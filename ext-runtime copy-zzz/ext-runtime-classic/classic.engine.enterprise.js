var Ext=Ext||{};Ext.Boot=Ext.Boot||function(u){function a(){var e,t,i,n,r=!1,o=Array.prototype.shift.call(arguments);for("boolean"==typeof arguments[arguments.length-1]&&(r=Array.prototype.pop.call(arguments)),i=arguments.length,e=0;e<i;e++)if("object"==typeof(n=arguments[e]))for(t in n)o[r?t.toLowerCase():t]=n[t];return o}var c=document,s=[],l={disableCaching:!(/[?&](?:cache|disableCacheBuster)\b/i.test(location.search)||!/http[s]?\:/i.test(location.href)||/(^|[ ;])ext-cache=1/.test(c.cookie)),disableCachingParam:"_dc",loadDelay:!1,preserveScripts:!0,charset:"UTF-8"},i=/\.css(?:\?|$)/i,d=c.createElement("a"),e="undefined"!=typeof window,h={browser:e,node:!e&&"function"==typeof require,phantom:window&&(window._phantom||window.callPhantom)||/PhantomJS/.test(window.navigator.userAgent)},f=Ext.platformTags={},g=function(e,t,i){if(i&&g(e,i),e&&t&&"object"==typeof t)for(var n in t)e[n]=t[n];return e},p="function"==typeof Object.keys?function(e){return e?Object.keys(e):[]}:function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t);return i},m={loading:0,loaded:0,apply:g,env:h,config:l,assetConfig:{},scripts:{},currentFile:null,suspendedQueue:[],currentRequest:null,syncMode:!1,debug:function(e){},useElements:!0,listeners:[],Request:r,Entry:x,allowMultipleBrowsers:!1,browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",dolfin:"Dolfin",edge:"Edge",webosbrowser:"webOSBrowser",chromeMobile:"ChromeMobile",chromeiOS:"ChromeiOS",silk:"Silk",other:"Other"},osNames:{ios:"iOS",android:"Android",windowsPhone:"WindowsPhone",webos:"webOS",blackberry:"BlackBerry",rimTablet:"RIMTablet",mac:"MacOS",win:"Windows",tizen:"Tizen",linux:"Linux",bada:"Bada",chromeOS:"ChromeOS",other:"Other"},browserPrefixes:{ie:"MSIE ",edge:"Edge/",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"OPR/",dolfin:"Dolfin/",webosbrowser:"wOSBrowser/",chromeMobile:"CrMo/",chromeiOS:"CriOS/",silk:"Silk/"},browserPriority:["edge","opera","dolfin","webosbrowser","silk","chromeiOS","chromeMobile","ie","firefox","safari","chrome"],osPrefixes:{tizen:"(Tizen )",ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",windowsPhone:"Windows Phone ",blackberry:"(?:BlackBerry|BB)(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/",chromeOS:"CrOS "},fallbackOSPrefixes:{windows:"win",mac:"mac",linux:"linux"},devicePrefixes:{iPhone:"iPhone",iPod:"iPod",iPad:"iPad"},maxIEVersion:12,detectPlatformTags:function(){var c=this,h=navigator.userAgent,e=/Mobile(\/|\s)/.test(h),r=document.createElement("div"),t=function(){var e,t,i,n,r,o,a,s,l,d={};for(o=c.browserPriority.length,r=0;r<o;r++)n=c.browserPriority[r],l?s=0:(i=c.browserPrefixes[n],(s=(a=h.match(new RegExp("("+i+")([\\w\\._]+)")))&&1<a.length?parseInt(a[2]):0)&&(l=!0)),d[n]=s;if(d.ie){var u=document.documentMode;8<=u&&(d.ie=u)}for(s=d.ie||!1,e=Math.max(s,c.maxIEVersion),r=8;r<=e;++r)d[(t="ie"+r)+"m"]=s?s<=r:0,d[t]=s?s===r:0,d[t+"p"]=s?r<=s:0;return d}(),i=function(){var e,t,i,n,r,o,a,s,l,d={};for(r=(i=p(c.osPrefixes)).length,l=n=0;n<r;n++)t=i[n],e=c.osPrefixes[t],(s=!(a=(o=h.match(new RegExp("("+e+")([^\\s;]+)")))?o[1]:null)||"HTC_"!==a&&"Silk/"!==a?o&&1<o.length?parseFloat(o[o.length-1]):0:2.3)&&l++,d[t]=s;for(r=(i=p(c.fallbackOSPrefixes)).length,n=0;n<r;n++)t=i[n],0===l?(e=c.fallbackOSPrefixes[t],o=h.toLowerCase().match(new RegExp(e)),d[t]=!!o||0):d[t]=0;return d}(),n=function(){var e,t,i,n,r,o,a={};for(r=(i=p(c.devicePrefixes)).length,n=0;n<r;n++)t=i[n],e=c.devicePrefixes[t],o=h.match(new RegExp(e)),a[t]=!!o||0;return a}(),o=m.loadPlatformsParam();a(f,t,i,n,o,!0),f.phone=!!(f.iphone||f.ipod||!f.silk&&f.android&&(f.android<3||e)||f.blackberry&&e||f.windowsphone),f.tablet=!(f.phone||!(f.ipad||f.android||f.silk||f.rimtablet||f.ie10&&/; Touch/.test(h))),f.touch=function(e,t){void 0===t&&(t=window);var i="on"+e.toLowerCase(),n=i in r;return n||r.setAttribute&&r.removeAttribute&&(r.setAttribute(i,""),n="function"==typeof r[i],void 0!==r[i]&&(r[i]=void 0),r.removeAttribute(i)),n}("touchend")||navigator.maxTouchPoints||navigator.msMaxTouchPoints,f.desktop=!f.phone&&!f.tablet,f.cordova=f.phonegap=!!(window.PhoneGap||window.Cordova||window.cordova),f.webview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(h),f.androidstock=f.android<=4.3&&(f.safari||f.silk),a(f,o,!0)},loadPlatformsParam:function(){var e,t,i,n,r,o,a=window.location.search.substr(1).split("&"),s={},l={};for(e=0;e<a.length;e++)s[(t=a[e].split("="))[0]]=t[1];if(s.platformTags)for(i=(t=s.platformTags.split(",")).length,e=0;e<i;e++)r=(n=t[e].split(":"))[0],o=!0,1<n.length&&("false"!==(o=n[1])&&"0"!==o||(o=!1)),l[r]=o;return l},filterPlatform:function(e,t){e=s.concat(e||s),t=s.concat(t||s);var i,n,r=e.length,o=t.length,a=!r&&o;for(i=0;i<r&&!a;i++)n=e[i],a=!!f[n];for(i=0;i<o&&a;i++)n=t[i],a=!f[n];return a},init:function(){var e,t,i,n,r,o,a=c.getElementsByTagName("script"),s=a[0],l=a.length,d=/\/ext(\-[a-z\-]+)?\.js$/;m.hasReadyState="readyState"in s,m.hasAsync="async"in s,m.hasDefer="defer"in s,m.hasOnLoad="onload"in s,m.isIE8=m.hasReadyState&&!m.hasAsync&&m.hasDefer&&!m.hasOnLoad,m.isIE9=m.hasReadyState&&!m.hasAsync&&m.hasDefer&&m.hasOnLoad,m.isIE10p=m.hasReadyState&&m.hasAsync&&m.hasDefer&&m.hasOnLoad,m.isIE8?(m.isIE10=!1,m.isIE10m=!0):(m.isIE10=-1!==navigator.appVersion.indexOf("MSIE 10"),m.isIE10m=m.isIE10||m.isIE9||m.isIE8),m.isIE11=m.isIE10p&&!m.isIE10;for(r=0;r<l;r++)(e=(s=a[r]).src)&&(t=s.readyState||null,!i&&d.test(e)&&(i=e),m.scripts[n=m.canonicalUrl(e)]||new x({key:n,url:e,done:null===t||"loaded"===t||"complete"===t,el:s,prop:"src"}));i=i||(s=a[a.length-1]).src,m.baseUrl=i.substring(0,i.lastIndexOf("/")+1),o=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),m.origin=o,m.detectPlatformTags(),Ext.filterPlatform=m.filterPlatform},canonicalUrl:function(e){d.href=e;var t,i,n=d.href,r=l.disableCachingParam,o=r?n.indexOf(r+"="):-1;return 0<o&&("?"===(t=n.charAt(o-1))||"&"===t)&&((i=(i=n.indexOf("&",o))<0?"":n.substring(i))&&"?"===t&&(++o,i=i.substring(1)),n=n.substring(0,o-1)+i),n},getConfig:function(e){return e?m.config[e]:m.config},setConfig:function(e,t){if("string"==typeof e)m.config[e]=t;else for(var i in e)m.setConfig(i,e[i]);return m},getHead:function(){return m.docHead||(m.docHead=c.head||c.getElementsByTagName("head")[0])},create:function(e,t,i){var n=i||{};return n.url=e,n.key=t,m.scripts[t]=new x(n)},getEntry:function(e,t,i){var n,r;return n=i?e:m.canonicalUrl(e),(r=m.scripts[n])||(r=m.create(e,n,t),i&&(r.canonicalPath=!0)),r},registerContent:function(e,t,i){var n={content:i,loaded:!0,css:"css"===t};return m.getEntry(e,n)},processRequest:function(e,t){e.loadEntries(t)},load:function(e){return(e=new r(e)).sync||m.syncMode?m.loadSync(e):(m.currentRequest?(e.getEntries(),m.suspendedQueue.push(e)):(m.currentRequest=e,m.processRequest(e,!1)),m)},loadSync:function(e){e=new r(e);return m.syncMode++,m.processRequest(e,!0),m.syncMode--,m},loadBasePrefix:function(e){return(e=new r(e)).prependBaseUrl=!0,m.load(e)},loadSyncBasePrefix:function(e){return(e=new r(e)).prependBaseUrl=!0,m.loadSync(e)},requestComplete:function(e){var t;if(m.currentRequest===e)for(m.currentRequest=null;0<m.suspendedQueue.length;)if(!(t=m.suspendedQueue.shift()).done){m.load(t);break}m.currentRequest||0!=m.suspendedQueue.length||m.fireListeners()},isLoading:function(){return!m.currentRequest&&0==m.suspendedQueue.length},fireListeners:function(){for(var e;m.isLoading()&&(e=m.listeners.shift());)e()},onBootReady:function(e){m.isLoading()?m.listeners.push(e):e()},getPathsFromIndexes:function(e,t){if(!("length"in e)){var i,n=[];for(i in e)isNaN(+i)||(n[+i]=e[i]);e=n}return r.prototype.getPathsFromIndexes(e,t)},createLoadOrderMap:function(e){return r.prototype.createLoadOrderMap(e)},fetch:function(e,t,i,n){n=void 0===n?!!t:n;function r(){l&&4==l.readyState&&(a=1223===l.status?204:0!==l.status||"file:"!==(self.location||{}).protocol&&"ionp:"!==(self.location||{}).protocol?l.status:200,s=l.responseText,o={content:s,status:a,exception:d},t&&t.call(i,o),l.onreadystatechange=u,l=null)}var o,a,s,l=new XMLHttpRequest,d=!1;n&&(l.onreadystatechange=r);try{l.open("GET",e,n),l.send(null)}catch(e){return d=e,r(),o}return n||r(),o},notifyAll:function(e){e.notifyRequests()}};function r(e){if(e.$isRequest)return e;var t=(e=e.url?e:{url:e}).url,i=t.charAt?[t]:t,n=e.charset||m.config.charset;g(this,e),delete this.url,this.urls=i,this.charset=n}function x(e){if(e.$isEntry)return e;var t,i=e.charset||m.config.charset,n=Ext.manifest,r=n&&n.loader,o=void 0!==e.cache?e.cache:r&&r.cache;m.config.disableCaching&&(void 0===o&&(o=!m.config.disableCaching),!1===o?t=+new Date:!0!==o&&(t=o),t=t&&(r&&r.cacheParam||m.config.disableCachingParam)+"="+t),g(this,e),this.charset=i,this.buster=t,this.requests=[]}return x.prototype={$isEntry:!0,done:!(r.prototype={$isRequest:!0,createLoadOrderMap:function(e){var t,i,n=e.length,r={};for(t=0;t<n;t++)r[(i=e[t]).path]=i;return r},getLoadIndexes:function(e,t,i,n,r){var o,a,s,l,d,u=[],c=[e],h=e.idx;if(t[h])return u;for(t[h]=u[h]=!0;e=c.shift();)if(o=e.canonicalPath?m.getEntry(e.path,null,!0):m.getEntry(this.prepareUrl(e.path)),!r||!o.done)for(l=0,d=(a=n&&e.uses&&e.uses.length?e.requires.concat(e.uses):e.requires).length;l<d;l++)t[s=a[l]]||(t[s]=u[s]=!0,c.push(i[s]));return u},getPathsFromIndexes:function(e,t){var i,n,r=[];for(i=0,n=e.length;i<n;i++)e[i]&&r.push(t[i].path);return r},expandUrl:function(e,t,i,n,r,o){var a,s;return t&&(a=i[e])&&(s=this.getLoadIndexes(a,n,t,r,o)).length?this.getPathsFromIndexes(s,t):[e]},expandUrls:function(e,t){var i,n,r,o,a,s,l,d=this.loadOrder,u=[],c={},h=[];for("string"==typeof e&&(e=[e]),d&&(i=(i=this.loadOrderMap)||(this.loadOrderMap=this.createLoadOrderMap(d))),r=0,o=e.length;r<o;r++)for(a=0,s=(n=this.expandUrl(e[r],d,i,h,t,!1)).length;a<s;a++)c[l=n[a]]||(c[l]=!0,u.push(l));return 0===u.length&&(u=e),u},expandLoadOrder:function(){var e,t=this,i=t.urls;return t.expanded?e=i:(e=this.expandUrls(i,!0),t.expanded=!0),t.urls=e,i.length!=e.length&&(t.sequential=!0),t},getUrls:function(){return this.expandLoadOrder(),this.urls},prepareUrl:function(e){return this.prependBaseUrl?m.baseUrl+e:e},getEntries:function(){var e,t,i,n,r,o,a=this,s=a.entries;if(!s){for(s=[],r=a.getUrls(),a.loadOrder&&(e=a.loadOrderMap),i=0;i<r.length;i++)o=a.prepareUrl(r[i]),e&&(t=e[o]),(n=m.getEntry(o,{buster:a.buster,charset:a.charset},t&&t.canonicalPath)).requests.push(a),s.push(n);a.entries=s}return s},loadEntries:function(e){var t,i,n,r=this,o=(t=r.getEntries()).length,a=r.loadStart||0;for(void 0!==e&&(r.sync=e),r.loaded=r.loaded||0,r.loading=r.loading||o,n=a;n<o;n++)if(!(!!(i=t[n]).loaded||t[n].load(r.sync))){r.loadStart=n,i.onDone(function(){r.loadEntries(e)});break}r.processLoadedEntries()},processLoadedEntries:function(){var e,t,i=this,n=i.getEntries(),r=n.length,o=i.startIndex||0;if(!i.done){for(e=o;e<r;e++){if(!(t=n[e]).loaded)return void(i.startIndex=e);t.evaluated||t.evaluate(),t.error&&(i.error=!0)}i.notify()}},notify:function(){var e=this;if(!e.done){var t=e.error,i=e[t?"failure":"success"],n="delay"in e?e.delay:t?1:m.config.chainDelay,r=e.scope||e;e.done=!0,i&&(0===n||0<n?setTimeout(function(){i.call(r,e)},n):i.call(r,e)),e.fireListeners(),m.requestComplete(e)}},onDone:function(e){var t=this.listeners||(this.listeners=[]);this.done?e(this):t.push(e)},fireListeners:function(){var e,t=this.listeners;if(t)for(;e=t.shift();)e(this)}}),evaluated:!1,loaded:!1,isCrossDomain:function(){return void 0===this.crossDomain&&(this.crossDomain=0!==this.getLoadUrl().indexOf(m.origin)),this.crossDomain},isCss:function(){var e=this;if(void 0===e.css)if(e.url){var t=m.assetConfig[e.url];e.css=t?"css"===t.type:i.test(e.url)}else e.css=!1;return this.css},getElement:function(e){var t=this,i=t.el;return i||(t.isCss()?(e=e||"link",i=c.createElement(e),"link"==e?(i.rel="stylesheet",t.prop="href"):t.prop="textContent",i.type="text/css"):(e=e||"script",(i=c.createElement(e)).type="text/javascript",t.prop="src",t.charset&&(i.charset=t.charset),m.hasAsync&&(i.async=!1)),t.el=i),i},getLoadUrl:function(){var e,t=this;return e=t.canonicalPath?t.url:m.canonicalUrl(t.url),t.loadUrl||(t.loadUrl=t.buster?e+(-1===e.indexOf("?")?"?":"&")+t.buster:e),t.loadUrl},fetch:function(e){var t=this.getLoadUrl(),i=!!e.async,n=e.complete;m.fetch(t,n,this,i)},onContentLoaded:function(e){var t=this,i=e.status,n=e.content,r=e.exception,o=this.getLoadUrl();t.loaded=!0,!r&&0!==i||h.phantom?200<=i&&i<300||304===i||h.phantom||0===i&&0<n.length?t.content=n:(t.error="Failed loading synchronously via XHR: '"+o+"'. Please verify that the file exists. XHR status code: "+i||!0,t.evaluated=!0):(t.error="Failed loading synchronously via XHR: '"+o+"'. It's likely that the file is either being loaded from a different domain or from the local file system where cross origin requests are not allowed for security reasons. Try asynchronous loading instead."||!0,t.evaluated=!0)},createLoadElement:function(e){var t=this,i=t.getElement();t.preserve=!0,i.onerror=function(){t.error=!0,e&&(e(),e=null)},m.isIE10m?i.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||e&&(e(),e=this.onreadystatechange=this.onerror=null)}:i.onload=function(){e(),e=this.onload=this.onerror=null},i[t.prop]=t.getLoadUrl()},onLoadElementReady:function(){m.getHead().appendChild(this.getElement()),this.evaluated=!0},inject:function(e,t){var i,n,r,o,a=this,s=m.getHead(),l=a.url,d=a.key;return a.isCss()?(a.preserve=!0,o=d.substring(0,d.lastIndexOf("/")+1),(i=c.createElement("base")).href=o,s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i),i.href=i.href,l&&(e+="\n/*# sourceURL="+d+" */"),r="styleSheet"in(n=a.getElement("style")),s.appendChild(i),r?(s.appendChild(n),n.styleSheet.cssText=e):(n.textContent=e,s.appendChild(n)),s.removeChild(i)):(l&&(e+="\n//# sourceURL="+d),Ext.globalEval(e)),a},loadCrossDomain:function(){var e=this;return e.createLoadElement(function(){e.el.onerror=e.el.onload=u,e.el=null,e.loaded=e.evaluated=e.done=!0,e.notifyRequests()}),e.evaluateLoadElement(),!1},loadElement:function(){var e=this;return e.createLoadElement(function(){e.el.onerror=e.el.onload=u,e.el=null,e.loaded=e.evaluated=e.done=!0,e.notifyRequests()}),e.evaluateLoadElement(),!0},loadSync:function(){var t=this;t.fetch({async:!1,complete:function(e){t.onContentLoaded(e)}}),t.evaluate(),t.notifyRequests()},load:function(e){var t=this;if(!t.loaded){if(t.loading)return!1;if(t.loading=!0,e)t.loadSync();else{if(m.isIE10||t.isCrossDomain())return t.loadCrossDomain();if(!t.isCss()&&m.hasReadyState)t.createLoadElement(function(){t.loaded=!0,t.notifyRequests()});else{if(!(!m.useElements||t.isCss()&&h.phantom))return t.loadElement();t.fetch({async:!e,complete:function(e){t.onContentLoaded(e),t.notifyRequests()}})}}}return!0},evaluateContent:function(){this.inject(this.content),this.content=null},evaluateLoadElement:function(){m.getHead().appendChild(this.getElement())},evaluate:function(){var e=this;if(!e.evaluated){if(e.evaluating)return;e.evaluating=!0,void 0!==e.content?e.evaluateContent():e.error||e.evaluateLoadElement(),e.evaluated=e.done=!0,e.cleanup()}},cleanup:function(){var e,t=this.el;if(t){if(!this.preserve)for(e in this.el=null,t.parentNode.removeChild(t),t)try{e!==this.prop&&(t[e]=null),delete t[e]}catch(e){}t.onload=t.onerror=t.onreadystatechange=u}},notifyRequests:function(){var e,t=this.requests,i=t.length;for(e=0;e<i;e++)t[e].processLoadedEntries();this.done&&this.fireListeners()},onDone:function(e){var t=this.listeners||(this.listeners=[]);this.done?e(this):t.push(e)},fireListeners:function(){var e,t=this.listeners;if(t&&0<t.length)for(;e=t.shift();)e(this)}},Ext.disableCacheBuster=function(e,t){var i=new Date;i.setTime(i.getTime()+24*(e?3650:-1)*60*60*1e3),i=i.toGMTString(),c.cookie="ext-cache=1; expires="+i+"; path="+(t||"/")},m.init(),m}(function(){}),Ext.globalEval=Ext.globalEval||(this.execScript?function(e){execScript(e)}:function(e){eval.call(window,e)}),Function.prototype.bind||function(){function e(t){var i=r.call(arguments,1),n=this;return i.length?function(){var e=arguments;return n.apply(t,e.length?i.concat(r.call(e)):i)}:(i=null,function(){return n.apply(t,arguments)})}var r=Array.prototype.slice;(Function.prototype.bind=e).$extjs=!0}(),Ext.setResourcePath=function(e,t){var i=Ext.manifest||(Ext.manifest={}),n=i.resources||(i.resources={});i&&("string"!=typeof e?Ext.apply(n,e):n[e]=t,i.resources=n)},Ext.getResourcePath=function(e,t,i){"string"!=typeof e&&(t=e.pool,i=e.packageName,e=e.path);var n=Ext.manifest,r=n&&n.resources,o=r[t],a=[];return null==o&&null==(o=r.path)&&(o="resources"),o&&a.push(o),i&&a.push(i),a.push(e),a.join("/")};var Ext=Ext||{};!function(){function e(){}function t(e){return e}var o,a,s,l,i,d,n=this,u=Object.prototype.toString,c=["valueOf","toLocaleString","toString","constructor"],r=Ext.fireIdle=function(){},h=function(){var e=h.caller.caller;return e.$owner.prototype[e.$name].apply(this,arguments)},f=Ext.manifest||{},g=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,p=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;for(i in Ext.global=n,Ext.$nextIid=0,Ext.now=Date.now||(Date.now=function(){return+new Date}),Ext.ticks=n.performance&&n.performance.now?function(){return performance.now()}:Ext.now,Ext._startTime=Ext.ticks(),r.$nullFn=t.$nullFn=r.$emptyFn=t.$identityFn=e.$nullFn=!0,e.$privacy="framework",r.$noClearOnDestroy=t.$noClearOnDestroy=!0,e.$noClearOnDestroy=!0,Ext.suspendLayouts=Ext.resumeLayouts=r,{toString:1})c=null;function m(e,t,i){var n,r;for(n in i)i.hasOwnProperty(n)&&("function"==typeof(r=i[n])&&(t.$className&&(r.name=t.$className+"#"+n),r.$name=n,r.$owner=t,r.$previous=e.hasOwnProperty(n)?e[n]:h),e[n]=r)}Ext.enumerables=c,Ext.apply=function(e,t,i){var n,r,o;if(e&&(i&&Ext.apply(e,i),t&&"object"==typeof t)){for(n in t)e[n]=t[n];if(c)for(r=c.length;r--;)o=c[r],t.hasOwnProperty(o)&&(e[o]=t[o])}return e},Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{}),Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isRobot:!1,isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:!1,enableListenerCollection:!0,name:Ext.sandboxName||"Ext",privateFn:e,emptyFn:r,identityFn:t,frameStartTime:Ext.now(),manifest:f,debugConfig:Ext.debugConfig||f.debug||{hooks:{"*":!0}},enableAria:!0,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",makeIdSelector:function(e){return Ext.validIdRe.test(e)||Ext.raise('Invalid id selector: "'+e+'"'),"#"+e},id:function(e,t){if(e&&e.id)return e.id;var i=(t||Ext.idPrefix)+ ++Ext.idSeed;return e&&(e.id=i),i},returnId:function(e){return e.getId()},returnTrue:function(){return!0},emptyString:new String,emptyArray:Object.freeze?Object.freeze([]):[],baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(DOMMouse|Moz.+|MS.+|webkit.+)/,canonicalEventName:function(e){return Ext.$eventNameMap[e]||(Ext.$eventNameMap[e]=Ext.$vendorEventRe.test(e)?e:e.toLowerCase())},applyIf:function(e,t){var i;if(e&&t&&"object"==typeof t)for(i in t)void 0===e[i]&&(e[i]=t[i]);return e},destroy:function(){var e,t,i=arguments.length;for(e=0;e<i;e++)(t=arguments[e])&&(Ext.isArray(t)?this.destroy.apply(this,t):Ext.isFunction(t.destroy)&&!t.destroyed&&t.destroy());return null},destroyMembers:function(e){for(var t,i,n=1,r=arguments,o=r.length;n<o;n++)null!=(t=e[i=r[n]])&&(e[i]=Ext.destroy(t))},override:function(e,t){if(e.$isClass)e.override(t);else if("function"==typeof e)Ext.apply(e.prototype,t);else{var i,n=e.self;n&&n.$isClass?((i=t.privates)&&(delete(t=Ext.apply({},t)).privates,m(e,n,i)),m(e,n,t)):Ext.apply(e,t)}return e},valueFrom:function(e,t,i){return Ext.isEmpty(e,i)?t:e},isEmpty:function(e,t){return null==e||!t&&""===e||Ext.isArray(e)&&0===e.length},isArray:"isArray"in Array?Array.isArray:function(e){return"[object Array]"===u.call(e)},isDate:function(e){return"[object Date]"===u.call(e)},isMSDate:function(e){return!!Ext.isString(e)&&p.test(e)},isObject:"[object Object]"===u.call(null)?function(e){return null!=e&&"[object Object]"===u.call(e)&&void 0===e.ownerDocument}:function(e){return"[object Object]"===u.call(e)},isSimpleObject:function(e){return e instanceof Object&&e.constructor===Object},isPrimitive:function(e){var t=typeof e;return"string"==t||"number"==t||"boolean"==t},isFunction:"undefined"!=typeof document&&"function"==typeof document.getElementsByTagName("body")?function(e){return!!e&&"[object Function]"===u.call(e)}:function(e){return!!e&&"function"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isElement:function(e){return!!e&&1===e.nodeType},isTextNode:function(e){return!!e&&"#text"===e.nodeName},isDefined:function(e){return void 0!==e},isIterable:function(e){return!(!e||"number"!=typeof e.length||"string"==typeof e||Ext.isFunction(e))&&(e.propertyIsEnumerable?!(!e.hasOwnProperty("length")||e.propertyIsEnumerable("length"))||g.test(u.call(e)):!!e.item)},isDebugEnabled:function(e,t){var i=Ext.debugConfig.hooks;if(i.hasOwnProperty(e))return i[e];var n=i["*"],r=0;if(void 0!==t&&(n=t),!e)return n;for(var o in i){var a=i[o];"."===e.charAt(o.length)&&e.substring(0,o.length)===o&&r<o.length&&(r=o.length,n=a)}return n},clone:function(e,t){if(null==e)return e;if(!1!==t&&e.nodeType&&e.cloneNode)return e.cloneNode(!0);var i,n,r,o,a,s=u.call(e);if("[object Date]"===s)return new Date(e.getTime());if("[object Array]"===s)for(i=e.length,o=[];i--;)o[i]=Ext.clone(e[i],t);else if("[object Object]"===s&&e.constructor===Object){for(a in o={},e)o[a]=Ext.clone(e[a],t);if(c)for(n=c.length;n--;)r=c[n],e.hasOwnProperty(r)&&(o[r]=e[r])}return o||e},getUniqueGlobalNamespace:function(){var e,t=this.uniqueGlobalNamespace;if(void 0===t){for(e=0;t="ExtBox"+ ++e,void 0!==n[t];);n[t]=Ext,this.uniqueGlobalNamespace=t}return t},functionFactoryCache:{},cacheableFunctionFactory:function(){var e,t,i,n=Array.prototype.slice.call(arguments),r=this.functionFactoryCache;return Ext.isSandboxed&&0<(i=n.length)&&(n[--i]="var Ext=window."+Ext.name+";"+n[i]),(t=r[e=n.join("")])||(t=Function.prototype.constructor.apply(Function.prototype,n),r[e]=t),t},functionFactory:function(){var e,t=Array.prototype.slice.call(arguments);return Ext.isSandboxed&&0<(e=t.length)&&(t[--e]="var Ext=window."+Ext.name+";"+t[e]),Function.prototype.constructor.apply(Function.prototype,t)},Logger:{log:function(e,t){e&&n.console&&(t&&t in n.console||(t="log"),e="["+t.toUpperCase()+"] "+e,n.console[t](e))},verbose:function(e){this.log(e,"verbose")},info:function(e){this.log(e,"info")},warn:function(e){this.log(e,"warn")},error:function(e){throw new Error(e)},deprecate:function(e){this.log(e,"warn")}},ariaWarn:function(e,t){Ext.enableAria&&!Ext.slicer&&(Ext.ariaWarn.first||(Ext.ariaWarn.first=!0,Ext.log.warn("WAI-ARIA compatibility warnings can be suppressed by adding the following to application startup code:"),Ext.log.warn("    Ext.ariaWarn = Ext.emptyFn;")),Ext.log.warn({msg:t,dump:e}))},getElementById:function(e){return document.getElementById(e)},splitAndUnescape:function(e,t){if(!e)return[];if(!t)return[e];var i,n,r=d[t]||(d[t]=new RegExp("\\\\"+t,"g")),o=[];for(i=e.split(t);void 0!==(n=i.shift());){for(;"\\"===n.charAt(n.length-1)&&0<i.length;)n=n+t+i.shift();n=n.replace(r,t),o.push(n)}return o},doElevate:function(){var e=a,t=o,i=l;a=o=l=null,s=t?e.apply(i,t):e.call(i),Ext.fireIdle()},elevate:function(e,t,i,n){var r;return i&&!i.length&&(i=null),Ext._suppressIdle=!1,n&&n.tick(),Ext.elevateFunction?(a=e,l=t,o=i,Ext.elevateFunction(Ext.doElevate),r=s,s=null):(r=i?e.apply(t,i):e.call(t),Ext.fireIdle()),n&&n.tock(),r},Timer:{all:{},track:!(d={}),captureStack:!0,created:function(e,t,i){if(!Ext.Timer.track)return null;var n=Ext.apply({kind:e,id:t,done:!1,firing:!1,creator:Ext.Timer.captureStack?(new Error).stack:null,tick:Ext.Timer.tick,tock:Ext.Timer.tock},i);return(Ext.Timer.all[e]||(Ext.Timer.all[e]={}))[n.id]=n,Ext.Timer.hook&&Ext.Timer.hook(n),n},get:function(e,t){t=t||"timeout";var i=Ext.Timer.all[t];return i&&i[e]||null},cancel:function(e,t){var i=Ext.Timer.all[e],n=i&&i[t];n&&(n.cancelled=!0,i[t]=null,delete i[t])},tick:function(){Ext.Timer.firing&&Ext.log.error("Previous timer state not cleaned up properly: "+Ext.Timer.firing.creator),"interval"!==this.kind&&(this.done=!0,Ext.Timer.all[this.kind][this.id]=null,delete Ext.Timer.all[this.kind][this.id]),this.firing=!0,Ext.Timer.firing=this},tock:function(){this.firing=!1,Ext.Timer.firing===this&&(Ext.Timer.firing=null)}},getExpando:function(e,t){var i=e.$expandos;return i&&i[t]||null},setExpando:function(e,t,i){var n=e.$expandos;return void 0!==i?(n||(e.$expandos={}))[t]=i:n&&delete n[t],i}}),Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=!0}(),Ext.platformTags.modern=!(Ext.platformTags.classic=Ext.isClassic=!0),function(){function r(){var e=this.sourceClass,t=this.sourceMethod,i=this.msg;return t&&(i?(t+="(): ",t+=i):t+="()"),e&&(t=t?e+"."+t:e),t||i||""}Ext.Error=function(e){var t=new Error;return Ext.isString(e)&&(e={msg:e}),Ext.apply(t,e),t.message=t.message||t.msg,t.toString=r,t},Ext.apply(Ext.Error,{ignore:!1,raise:function(e){var t,i,n=this.raise.caller;if(e=e||{},Ext.isString(e)&&(e={msg:e}),n===Ext.raise&&(n=n.caller),n&&(!e.sourceMethod&&(i=n.$name)&&(e.sourceMethod=i),!e.sourceClass&&(i=n.$owner)&&(i=i.$className)&&(e.sourceClass=i)),!0!==this.handle(e))throw t=r.call(e),Ext.log({msg:t,level:"error",dump:e,stack:!0}),new Ext.Error(e)},handle:function(){return this.ignore}})}(),Ext.deprecated=function(t){return t=t||"",function e(){Ext.raise('The method "'+e.$owner.$className+"."+e.$name+'" has been removed. '+t)}},Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)},function(){if(!!!window.__UNIT_TESTING__&&"undefined"!=typeof window){function e(){var e,t=Ext.log&&Ext.log.counters,i=t&&t.error+t.warn+t.info+t.log;i&&n!==i&&(e=[],t.error&&e.push("Errors: "+t.error),t.warn&&e.push("Warnings: "+t.warn),t.info&&e.push("Info: "+t.info),t.log&&e.push("Log: "+t.log),window.status="*** "+e.join(" -- "),n=i)}var n=0;e.$skipTimerCheck=!0,setInterval(e,1e3)}}(),Ext.Array=function(){var n=Array.prototype,g=n.slice,e=function(){var e,t=[],i=20;if(!t.splice)return!1;for(;i--;)t.push("A");return t.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F"),e=t.length,t.splice(13,0,"XXX"),e+1===t.length}(),t="indexOf"in n,o=!0;try{"undefined"!=typeof document&&g.call(document.getElementsByTagName("body"))}catch(e){o=!1}function f(e,t){return t<0?Math.max(0,e.length+t):Math.min(e.length,t)}function a(e,t,i,n){var r=n?n.length:0,o=e.length,a=f(e,t);if(a===o)r&&e.push.apply(e,n);else{var s,l=Math.min(i,o-a),d=a+l,u=d+r-l,c=o-d,h=o-l;if(u<d)for(s=0;s<c;++s)e[u+s]=e[d+s];else if(d<u)for(s=c;s--;)e[u+s]=e[d+s];if(r&&a===h)e.length=h,e.push.apply(e,n);else for(e.length=h+r,s=0;s<r;++s)e[a+s]=n[s]}return e}function i(e,t,i){var n,r=arguments.length,o=f(e,t);return r<3&&(i=e.length-o),n=e.slice(t,f(e,o+i)),r<4?a(e,o,i):a(e,o,i,g.call(arguments,3)),n}var p=e?function(e,t,i){return e.splice(t,i),e}:function(e,t,i){return a(e,t,i)},r=e?function(e,t,i,n){return n&&n.length?0!==t||i?t<e.length?e.splice.apply(e,[t,i].concat(n)):e.push.apply(e,n):e.unshift.apply(e,n):e.splice(t,i),e}:a,s=e?function(e){return e.splice.apply(e,g.call(arguments,1))}:i,m={binarySearch:function(e,t,i,n,r){var o,a,s=e.length;for(i instanceof Function?(r=i,i=0,n=s):n instanceof Function?(r=n,n=s):(void 0===i&&(i=0),void 0===n&&(n=s),r=r||m.lexicalCompare),--n;i<=n;)0<=(a=r(t,e[o=i+n>>1]))?i=1+o:a<0&&(n=o-1);return i},defaultCompare:function(e,t){return e<t?-1:t<e?1:0},lexicalCompare:function(e,t){return(e=String(e))<(t=String(t))?-1:t<e?1:0},each:function(e,t,i,n){var r,o;if(o=(e=m.from(e)).length,!0!==n){for(r=0;r<o;r++)if(!1===t.call(i||e[r],e[r],r,e))return r}else for(r=o-1;-1<r;r--)if(!1===t.call(i||e[r],e[r],r,e))return r;return!0},findInsertionIndex:function(e,t,i,n){var r,o,a=t.length;return i=i||m.lexicalCompare,0<=n&&n<a&&(r=0<n?i(e,t[n-1]):0,o=n<a?i(e,t[n]):0,0<=r&&o<1)?n:m.binarySearch(t,e,i)},forEach:"forEach"in n?function(e,t,i){e.forEach(t,i)}:function(e,t,i){var n,r;for(n=0,r=e.length;n<r;n++)t.call(i,e[n],n,e)},indexOf:t?function(e,t,i){return e?n.indexOf.call(e,t,i):-1}:function(e,t,i){var n,r=e?e.length:0;for(n=i<0?Math.max(0,r+i):i||0;n<r;n++)if(e[n]===t)return n;return-1},contains:t?function(e,t){return-1!==n.indexOf.call(e,t)}:function(e,t){var i,n;for(i=0,n=e.length;i<n;i++)if(e[i]===t)return!0;return!1},toArray:function(e,t,i){var n,r=[];if(!e||!e.length)return r;if("string"==typeof e&&(e=e.split("")),o)return g.call(e,t||0,i||e.length);for(t=t||0,i=i?i<0?e.length+i:i:e.length,n=t;n<i;n++)r.push(e[n]);return r},pluck:function(e,t){var i,n,r,o=[];for(i=0,n=e.length;i<n;i++)r=e[i],o.push(r[t]);return o},map:"map"in n?function(e,t,i){return Ext.Assert.isFunction(t,"Ext.Array.map must have a callback function passed as second argument."),e.map(t,i)}:function(e,t,i){Ext.Assert.isFunction(t,"Ext.Array.map must have a callback function passed as second argument.");var n,r=e.length,o=new Array(r);for(n=0;n<r;n++)o[n]=t.call(i,e[n],n,e);return o},every:"every"in n?function(e,t,i){return Ext.Assert.isFunction(t,"Ext.Array.every must have a callback function passed as second argument."),e.every(t,i)}:function(e,t,i){var n,r;for(Ext.Assert.isFunction(t,"Ext.Array.every must have a callback function passed as second argument."),n=0,r=e.length;n<r;++n)if(!t.call(i,e[n],n,e))return!1;return!0},some:"some"in n?function(e,t,i){return Ext.Assert.isFunction(t,"Ext.Array.some must have a callback function passed as second argument."),e.some(t,i)}:function(e,t,i){var n,r;for(Ext.Assert.isFunction(t,"Ext.Array.some must have a callback function passed as second argument."),n=0,r=e.length;n<r;++n)if(t.call(i,e[n],n,e))return!0;return!1},equals:function(e,t){var i,n=e.length,r=t.length;if(e===t)return!0;if(n!==r)return!1;for(i=0;i<n;++i)if(e[i]!==t[i])return!1;return!0},clean:function(e){var t,i,n,r=[];for(t=0,i=e.length;t<i;t++)n=e[t],Ext.isEmpty(n)||r.push(n);return r},unique:function(e){var t,i,n,r=[];for(t=0,i=e.length;t<i;t++)n=e[t],-1===m.indexOf(r,n)&&r.push(n);return r},filter:"filter"in n?function(e,t,i){return Ext.Assert.isFunction(t,"Ext.Array.filter must have a filter function passed as second argument."),e.filter(t,i)}:function(e,t,i){var n,r,o=[];for(Ext.Assert.isFunction(t,"Ext.Array.filter must have a filter function passed as second argument."),n=0,r=e.length;n<r;n++)t.call(i,e[n],n,e)&&o.push(e[n]);return o},findBy:function(e,t,i){var n,r;for(n=0,r=e.length;n<r;n++)if(t.call(i||e,e[n],n))return e[n];return null},from:function(e,t){var i;return null==e?[]:Ext.isArray(e)?t?g.call(e):e:(i=typeof e,!e||void 0===e.length||"string"==i||"function"==i&&e.apply?[e]:m.toArray(e))},remove:function(e,t){var i=m.indexOf(e,t);return-1!==i&&p(e,i,1),e},removeAt:function(e,t,i){var n=e.length;return 0<=t&&t<n&&(i=i||1,i=Math.min(i,n-t),p(e,t,i)),e},include:function(e,t){m.contains(e,t)||e.push(t)},clone:function(e){return g.call(e)},merge:function(){var e,t,i=g.call(arguments),n=[];for(e=0,t=i.length;e<t;e++)n=n.concat(i[e]);return m.unique(n)},intersect:function(){var e,t,i,n,r,o,a,s,l,d,u,c,h=[],f=g.call(arguments);if(!f.length)return h;for(e=f.length,d=r=0;d<e;d++)o=f[d],(!n||o.length<n.length)&&(n=o,r=d);for(n=m.unique(n),p(f,r,1),a=n.length,e=f.length,d=0;d<a;d++){for(s=n[d],u=l=0;u<e;u++)for(i=(t=f[u]).length,c=0;c<i;c++)if(s===t[c]){l++;break}l===e&&h.push(s)}return h},difference:function(e,t){var i,n,r,o=g.call(e),a=o.length;for(i=0,r=t.length;i<r;i++)for(n=0;n<a;n++)o[n]===t[i]&&(p(o,n,1),n--,a--);return o},reduce:Array.prototype.reduce?function(e,t,i){return 3===arguments.length?Array.prototype.reduce.call(e,t,i):Array.prototype.reduce.call(e,t)}:function(e,t,i){e=Object(e),Ext.isFunction(t)||Ext.raise("Invalid parameter: expected a function.");var n=0,r=e.length>>>0,o=i;if(arguments.length<3)for(;;){if(n in e){o=e[n++];break}if(++n>=r)throw new TypeError("Reduce of empty array with no initial value")}for(;n<r;++n)n in e&&(o=t(o,e[n],n,e));return o},slice:[1,2].slice(1,void 0).length?function(e,t,i){return g.call(e,t,i)}:function(e,t,i){return void 0===t?g.call(e):void 0===i?g.call(e,t):g.call(e,t,i)},sort:function(e,t){return function(i,n){var e,t=i.length,r=new Array(t);for(e=0;e<t;e++)r[e]=e;for(r.sort(function(e,t){return n(i[e],i[t])||e-t}),e=0;e<t;e++)r[e]=i[r[e]];for(e=0;e<t;e++)i[e]=r[e];return i}(e,t||m.lexicalCompare)},flatten:function(e){var o=[];return function e(t){var i,n,r;for(i=0,n=t.length;i<n;i++)r=t[i],Ext.isArray(r)?e(r):o.push(r);return o}(e)},min:function(e,t){var i,n,r,o=e[0];for(i=0,n=e.length;i<n;i++)r=e[i],t?1===t(o,r)&&(o=r):r<o&&(o=r);return o},max:function(e,t){var i,n,r,o=e[0];for(i=0,n=e.length;i<n;i++)r=e[i],t?-1===t(o,r)&&(o=r):o<r&&(o=r);return o},mean:function(e){return 0<e.length?m.sum(e)/e.length:void 0},sum:function(e){var t,i,n=0;for(t=0,i=e.length;t<i;t++)n+=e[t];return n},toMap:function(e,t,i){var n,r;if(!e)return null;if(n={},r=e.length,"string"==typeof e)n[e]=1;else if(t)if("string"==typeof t)for(;r--;)n[e[r][t]]=r+1;else for(;r--;)n[t.call(i,e[r])]=r+1;else for(;r--;)n[e[r]]=r+1;return n},toValueMap:function(e,t,i,n){var r,o,a,s,l,d,u={},c=e.length;if(t)for((s="string"!=typeof t)||(n=i),o=1===n,r=2===n;c--;)d=e[c],l=s?t.call(i,d):d[t],o?l in u?u[l].push(d):u[l]=[d]:r&&l in u?(a=u[l])instanceof Array?a.push(d):u[l]=[a,d]:u[l]=d;else for(;c--;)u[d=e[c]]=d;return u},_replaceSim:a,_spliceSim:i,erase:p,insert:function(e,t,i){return r(e,t,0,i)},move:function(e,t,i){if(i!==t){var n,r=e[t],o=t<i?1:-1;for(n=t;n!==i;n+=o)e[n]=e[n+o];e[i]=r}},replace:r,splice:s,push:function(e){var t,i,n=arguments,r=n.length;for(void 0===e?e=[]:Ext.isArray(e)||(e=[e]),t=1;t<r;t++)i=n[t],Array.prototype.push[Ext.isIterable(i)?"apply":"call"](e,i);return e},numericSortFn:function(e,t){return e-t}};return Ext.each=m.each,m.union=m.merge,Ext.min=m.min,Ext.max=m.max,Ext.sum=m.sum,Ext.mean=m.mean,Ext.flatten=m.flatten,Ext.clean=m.clean,Ext.unique=m.unique,Ext.pluck=m.pluck,Ext.toArray=function(){return m.toArray.apply(m,arguments)},m}(),Ext.Assert={falsey:function(e,t){e&&Ext.raise(t||"Expected a falsey value but was "+e)},falseyProp:function(e,t){var i;Ext.Assert.truthy(e),(i=e[t])&&(e.$className&&(t=e.$className+"#"+t),Ext.raise("Expected a falsey value for "+t+" but was "+i))},truthy:function(e,t){e||Ext.raise(t||"Expected a truthy value but was "+typeof e)},truthyProp:function(e,t){var i;Ext.Assert.truthy(e),(i=e[t])||(e.$className&&(t=e.$className+"#"+t),Ext.raise("Expected a truthy value for "+t+" but was "+typeof i))}},function(){var e,t;function i(e,i){var n,r=Ext[e];return function(e,t){r(e)||Ext.raise(t||n||(n="Expected value to be "+i))}}function n(e,i){var n,r=Ext[e];return function(e,t){Ext.Assert.truthy(e),r(e[t])||Ext.raise(n=n||"Expected "+(e.$className?e.$className+"#":"")+t+" to be "+i)}}function r(e,i){var n,r=Ext[e];return function(e,t){r(e)&&Ext.raise(t||n||(n="Expected value to NOT be "+i))}}function o(e,i){var n,r=Ext[e];return function(e,t){Ext.Assert.truthy(e),r(e[t])&&Ext.raise(n=n||"Expected "+(e.$className?e.$className+"#":"")+t+" to NOT be "+i)}}for(e in Ext)"is"===e.substring(0,2)&&Ext.isFunction(Ext[e])&&(t=e.substring(2),Ext.Assert[e]=i(e,t),Ext.Assert[e+"Prop"]=n(e,t),Ext.Assert["isNot"+t]=r(e,t),Ext.Assert["isNot"+t+"Prop"]=o(e,t))}(),Ext.String=function(){function t(e,t){return o[t]}function i(e,t){return t in a?a[t]:String.fromCharCode(parseInt(t.substr(2),10))}function r(e,t){return null!=e&&null!=t&&t.length<=e.length}var o,a,s,l,d,n=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,u=/('|\\)/g,c=/([-.*+?\^${}()|\[\]\/\\])/g,h=/^\s+|\s+$/g,f=/\s+/,g=/(^[^a-z]*|[^\w])/gi,p=String.fromCharCode;return d={fromCodePoint:String.fromCodePoint||function(){for(var e,t="",i=[],n=-1,r=arguments.length;++n<r;)e=Number(arguments[n]),(!isFinite(e)||e<0||1114111<e||Math.floor(e)!==e)&&Ext.raise("Invalid code point: "+e),e<=65535?i.push(e):(e-=65536,i.push(55296+(e>>10),e%1024+56320)),n+1===r&&(t+=p(i),i.length=0);return t},insert:function(e,t,i){var n;return e?(t&&(n=e.length,i||0===i||(i=n),i<0&&(i=n<=(i*=-1)?0:n-i),0===i?e=t+e:i>=e.length?e+=t:e=e.substr(0,i)+t+e.substr(i)),e):t},startsWith:function(e,t,i){var n=r(e,t);return n&&(i&&(e=e.toLowerCase(),t=t.toLowerCase()),n=0===e.lastIndexOf(t,0)),n},endsWith:function(e,t,i){var n=r(e,t);return n&&(i&&(e=e.toLowerCase(),t=t.toLowerCase()),n=-1!==e.indexOf(t,e.length-t.length)),n},createVarName:function(e){return e.replace(g,"")},htmlEncode:function(e){return e?String(e).replace(s,t):e},htmlDecode:function(e){return e?String(e).replace(l,i):e},hasHtmlCharacters:function(e){return s.test(e)},addCharacterEntities:function(e){var t,i,n=[],r=[];for(t in e)i=e[t],a[t]=i,o[i]=t,n.push(i),r.push(t);s=new RegExp("("+n.join("|")+")","g"),l=new RegExp("("+r.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){o={},a={},this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(e,t){return Ext.isEmpty(t)?e:e+(-1===e.indexOf("?")?"?":"&")+t},trim:function(e){return(e=e&&e.replace(n,""))||""},capitalize:function(e){return(e=e&&e.charAt(0).toUpperCase()+e.substr(1))||""},uncapitalize:function(e){return(e=e&&e.charAt(0).toLowerCase()+e.substr(1))||""},ellipsis:function(e,t,i){var n,r;return e&&e.length>t?i&&(n=e.substr(0,t-2),-1!==(r=Math.max(n.lastIndexOf(" "),n.lastIndexOf("."),n.lastIndexOf("!"),n.lastIndexOf("?")))&&t-15<=r)?n.substr(0,r)+"...":e.substr(0,t-3)+"...":e},escapeRegex:function(e){return e.replace(c,"\\$1")},createRegex:function(e,t,i,n){var r=e;return null==e||e.exec||(r=d.escapeRegex(String(e)),!1!==t&&(r="^"+r),!1!==i&&(r+="$"),r=new RegExp(r,!1!==n?"i":"")),r},escape:function(e){return e.replace(u,"\\$1")},toggle:function(e,t,i){return e===t?i:t},leftPad:function(e,t,i){var n=String(e);for(i=i||" ";n.length<t;)n=i+n;return n},repeat:function(e,t,i){var n,r=[];for(t<1&&(t=0),n=t;n--;)r.push(e);return r.join(i||"")},splitWords:function(e){return e&&"string"==typeof e?e.replace(h,"").split(f):e||[]}}}(),Ext.String.resetCharacterEntities(),Ext.htmlEncode=Ext.String.htmlEncode,Ext.htmlDecode=Ext.String.htmlDecode,Ext.urlAppend=Ext.String.urlAppend,Ext.Date=function(){var c,i,l=Date,t=/(\\.)/g,n=/([gGhHisucUOPZ]|MS)/,r=/([djzmnYycU]|MS)/,o=/\\/gi,a=/\{(\d+)\}/g,s=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),d=/^(?:(\d{1,4})|(\w{3,}))[/\-.\\\s](?:(\d{1,2})|(\w{3,}))[/\-.\\\s](\d{1,4})$/,u=Ext.String.leftPad,h={d:!0,j:!0},f={F:!0,m:!0,M:!0,n:!0},g={o:!0,Y:!0,y:!0},p=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return (v != null) ? v : null;"].join("\n");function m(e){var i=Array.prototype.slice.call(arguments,1);return e.replace(a,function(e,t){return i[t]})}return Date.prototype.toISOString||(Date.prototype.toISOString=function(){var e=this;return u(e.getUTCFullYear(),4,"0")+"-"+u(e.getUTCMonth()+1,2,"0")+"-"+u(e.getUTCDate(),2,"0")+"T"+u(e.getUTCHours(),2,"0")+":"+u(e.getUTCMinutes(),2,"0")+":"+u(e.getUTCSeconds(),2,"0")+"."+u(e.getUTCMilliseconds(),3,"0")+"Z"}),(c={now:l.now,toString:function(e){return(e=e||new l).getFullYear()+"-"+u(e.getMonth()+1,2,"0")+"-"+u(e.getDate(),2,"0")+"T"+u(e.getHours(),2,"0")+":"+u(e.getMinutes(),2,"0")+":"+u(e.getSeconds(),2,"0")},getElapsed:function(e,t){return Math.abs(e-(t||c.now()))},useStrict:!1,formatCodeToRegex:function(e,t){var i=c.parseCodes[e];return i&&(i="function"==typeof i?i():i,c.parseCodes[e]=i),i?Ext.applyIf({c:i.c?m(i.c,t||"{0}"):i.c},i):{g:0,c:null,s:Ext.String.escapeRegex(e)}},parseFunctions:{MS:function(e,t){var i=(e||"").match(s);return i?new l(+((i[1]||"")+i[2])):null},time:function(e,t){var i=parseInt(e,10);return i||0===i?new l(i):null},timestamp:function(e,t){var i=parseInt(e,10);return i||0===i?new l(1e3*i):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return c.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",DAYS_IN_WEEK:7,MONTHS_IN_YEAR:12,MAX_DAYS_IN_MONTH:31,SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",defaultTimeFormat:"h:i A",firstDayOfWeek:0,weekendDays:[0,6],getShortMonthName:function(e){return c.monthNames[e].substring(0,3)},getShortDayName:function(e){return c.dayNames[e].substring(0,3)},getMonthNumber:function(e){return c.monthNumbers[e.substring(0,1).toUpperCase()+e.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(e){return n.test(e.replace(t,""))},formatContainsDateInfo:function(e){return r.test(e.replace(t,""))},isMonthFormat:function(e){return!!f[e]},isYearFormat:function(e){return!!g[e]},unescapeFormat:function(e){return e.replace(o,"")},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(m.getDay())",j:"m.getDate()",l:"Ext.Date.dayNames[m.getDay()]",N:"(m.getDay() ? m.getDay() : 7)",S:"Ext.Date.getSuffix(m)",w:"m.getDay()",z:"Ext.Date.getDayOfYear(m)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:"Ext.Date.monthNames[m.getMonth()]",m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(m.getMonth())",n:"(m.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(m)",L:"(Ext.Date.isLeapYear(m) ? 1 : 0)",o:"(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:"((m.getHours() % 12) ? m.getHours() % 12 : 12)",G:"m.getHours()",h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(m)",P:"Ext.Date.getGMTOffset(m, true)",T:"Ext.Date.getTimezone(m)",Z:"(m.getTimezoneOffset() * -60)",c:function(){var e,t,i="Y-m-dTH:i:sP",n=[],r=i.length;for(e=0;e<r;++e)t=i.charAt(e),n.push("T"===t?"'T'":c.getFormatCode(t));return n.join(" + ")},C:function(){return"m.toISOString()"},U:"Math.round(m.getTime() / 1000)"},isValid:function(e,t,i,n,r,o,a){var s;return n=n||0,r=r||0,o=o||0,a=a||0,e===(s=c.add(new l(e<100?100:e,t-1,i,n,r,o,a),c.YEAR,e<100?e-100:0)).getFullYear()&&t===s.getMonth()+1&&i===s.getDate()&&n===s.getHours()&&r===s.getMinutes()&&o===s.getSeconds()&&a===s.getMilliseconds()},parse:function(e,t,i){var n;return t?(null==(n=c.parseFunctions)[t]&&c.createParser(t),n[t].call(c,e,Ext.isDefined(i)?i:c.useStrict)):c.flexParse(e)},parseDate:function(e,t,i){return c.parse(e,t,i)},getFormatCode:function(e){var t=c.formatCodes[e];return t&&(t="function"==typeof t?t():t,c.formatCodes[e]=t),t||"'"+Ext.String.escape(e)+"'"},createFormat:function(e){var t,i=[],n=!1,r="";for(t=0;t<e.length;++t)r=e.charAt(t),n||"\\"!==r?n?(n=!1,i.push("'"+Ext.String.escape(r)+"'")):"\n"===r?i.push("'\\n'"):i.push(c.getFormatCode(r)):n=!0;c.formatFunctions[e]=Ext.functionFactory("var m = this; return "+i.join("+"))},createParser:function(e){for(var t,i=c.parseRegexes.length,n=1,r=[],o=[],a=!1,s="",l=0,d=e.length,u=[];l<d;++l)s=e.charAt(l),a||"\\"!==s?a?(a=!1,o.push(Ext.String.escape(s))):(n+=(t=c.formatCodeToRegex(s,n)).g,o.push(t.s),t.g&&t.c&&(t.calcAtEnd?u.push(t.c):r.push(t.c))):a=!0;r=r.concat(u),c.parseRegexes[i]=new RegExp("^"+o.join("")+"$","i"),c.parseFunctions[e]=Ext.functionFactory("input","strict",m(p,i,r.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){var e,t=[];for(e=0;e<7;e++)t.push(c.getShortDayName(e));return{g:0,c:null,s:"(?:"+t.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+c.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+c.monthNames.join("|")+")"}},M:function(){var e,t=[];for(e=0;e<12;e++)t.push(c.getShortMonthName(e));return Ext.applyIf({s:"("+t.join("|")+")"},c.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:!0},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:!0},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[1-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var e,t,i=[],n=[c.formatCodeToRegex("Y",1),c.formatCodeToRegex("m",2),c.formatCodeToRegex("d",3),c.formatCodeToRegex("H",4),c.formatCodeToRegex("i",5),c.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if (results[8]) {","if (results[8] == 'Z') {","zz = 0;","}","else if (results[8].indexOf(':') > -1) {",c.formatCodeToRegex("P",8).c,"}","else {",c.formatCodeToRegex("O",8).c,"}","}"].join("\n")}];for(e=0,t=n.length;e<t;++e)i.push(n[e].c);return{g:1,c:i.join(""),s:[n[0].s,"(?:","-",n[1].s,"(?:","-",n[2].s,"(?:","(?:T| )?",n[3].s,":",n[4].s,"(?::",n[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},compare:function(e,t,i){var n,r;return"string"==typeof e&&(e=Ext.Date.parse(e)),"string"==typeof t&&(t=Ext.Date.parse(t)),n=Ext.Date.format(e,"C"),r=Ext.Date.format(t,"C"),i||(n=n.substr(0,10),r=r.substr(0,10)),n<r?-1:r<n?1:0},dateFormat:function(e,t){return c.format(e,t)},isEqual:function(e,t){return e&&t?+e==+t:!(e||t)},format:function(e,t){var i=c.formatFunctions;return Ext.isDate(e)?(null==i[t]&&c.createFormat(t),i[t].call(e)+""):""},getTimezone:function(e){return e.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(e,t){var i=e.getTimezoneOffset();return(0<i?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(i)/60),2,"0")+(t?":":"")+Ext.String.leftPad(Math.abs(i%60),2,"0")},getDayOfYear:function(e){var t,i=0,n=c.clone(e),r=e.getMonth();for(t=0,n.setDate(1),n.setMonth(0);t<r;n.setMonth(++t))i+=c.getDaysInMonth(n);return i+e.getDate()-1},getWeekOfYear:function(e){var t=l.UTC(e.getFullYear(),e.getMonth(),e.getDate()+3)/864e5,i=Math.floor(t/7),n=new l(6048e5*i).getUTCFullYear();return i-Math.floor(l.UTC(n,0,7)/6048e5)+1},isLeapYear:function(e){var t=e.getFullYear();return!(0!=(3&t)||!(t%100||t%400==0&&t))},getFirstDayOfMonth:function(e){var t=(e.getDay()-(e.getDate()-1))%7;return t<0?7+t:t},getLastDayOfMonth:function(e){return c.getLastDateOfMonth(e).getDay()},getFirstDateOfMonth:function(e){return new l(e.getFullYear(),e.getMonth(),1)},getLastDateOfMonth:function(e){return new l(e.getFullYear(),e.getMonth(),c.getDaysInMonth(e))},getDaysInMonth:(i=[31,28,31,30,31,30,31,31,30,31,30,31],function(e){var t=e.getMonth();return 1===t&&c.isLeapYear(e)?29:i[t]}),getSuffix:function(e){switch(e.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(e){return new l(e.getTime())},isDST:function(e){return new l(e.getFullYear(),0,1).getTimezoneOffset()!==e.getTimezoneOffset()},clearTime:function(e,t){var i,n,r;if(isNaN(e.getTime()))return e;if(t)return c.clearTime(c.clone(e));if(i=e.getDate(),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getDate()!==i){for(n=1,r=c.add(e,c.HOUR,n);r.getDate()!==i;n++,r=c.add(e,c.HOUR,n));e.setDate(i),e.setHours(r.getHours())}return e},add:function(e,t,i,n){var r,o,a=c.clone(e),s=0;if(!t||0===i)return a;if(o=i-parseInt(i,10),i=parseInt(i,10))switch(t.toLowerCase()){case c.MILLI:n?a.setMilliseconds(a.getMilliseconds()+i):a.setTime(a.getTime()+i);break;case c.SECOND:n?a.setSeconds(a.getSeconds()+i):a.setTime(a.getTime()+1e3*i);break;case c.MINUTE:n?a.setMinutes(a.getMinutes()+i):a.setTime(a.getTime()+60*i*1e3);break;case c.HOUR:n?a.setHours(a.getHours()+i):a.setTime(a.getTime()+60*i*60*1e3);break;case c.DAY:!1===n?a.setTime(a.getTime()+24*i*60*60*1e3):a.setDate(a.getDate()+i);break;case c.MONTH:28<(r=e.getDate())&&(r=Math.min(r,c.getLastDateOfMonth(c.add(c.getFirstDateOfMonth(e),c.MONTH,i)).getDate())),a.setDate(r),a.setMonth(e.getMonth()+i);break;case c.YEAR:28<(r=e.getDate())&&(r=Math.min(r,c.getLastDateOfMonth(c.add(c.getFirstDateOfMonth(e),c.YEAR,i)).getDate())),a.setDate(r),a.setFullYear(e.getFullYear()+i)}if(o){switch(t.toLowerCase()){case c.MILLI:s=1;break;case c.SECOND:s=1e3;break;case c.MINUTE:s=6e4;break;case c.HOUR:s=36e5;break;case c.DAY:s=864e5;break;case c.MONTH:s=864e5*(r=c.getDaysInMonth(a));break;case c.YEAR:s=864e5*(r=c.isLeapYear(a)?366:365)}s&&a.setTime(a.getTime()+s*o)}return a},subtract:function(e,t,i,n){return c.add(e,t,-i,n)},between:function(e,t,i){var n=e.getTime();return t.getTime()<=n&&n<=i.getTime()},isWeekend:function(e){return-1<Ext.Array.indexOf(this.weekendDays,e.getDay())},utcToLocal:function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},localToUtc:function(e){return c.utc(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},utc:function(e,t,i,n,r,o,a){return new Date(Date.UTC(e,t,i,n||0,r||0,o||0,a||0))},compat:function(){var e,t,i,n,r=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],o=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],a=r.length,s=o.length;for(n=0;n<a;n++)l[t=r[n]]=c[t];for(e=0;e<s;e++)i=o[e],l.prototype[i]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),c[i].apply(c,e)}},diff:function(e,t,i){var n,r=t-e;switch(i){case c.MILLI:return r;case c.SECOND:return Math.floor(r/1e3);case c.MINUTE:return Math.floor(r/6e4);case c.HOUR:return Math.floor(r/36e5);case c.DAY:return Math.floor(r/864e5);case"w":return Math.floor(r/6048e5);case c.MONTH:return n=12*t.getFullYear()+t.getMonth()-(12*e.getFullYear()+e.getMonth()),c.add(e,i,n)>t?n-1:n;case c.YEAR:return n=t.getFullYear()-e.getFullYear(),c.add(e,i,n)>t?n-1:n}},align:function(e,t,i){var n=new l(+e);switch(t.toLowerCase()){case c.MILLI:return n;case c.SECOND:return n.setUTCSeconds(n.getUTCSeconds()-n.getUTCSeconds()%i),n.setUTCMilliseconds(0),n;case c.MINUTE:return n.setUTCMinutes(n.getUTCMinutes()-n.getUTCMinutes()%i),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n;case c.HOUR:return n.setUTCHours(n.getUTCHours()-n.getUTCHours()%i),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n;case c.DAY:return 7!==i&&14!==i||n.setUTCDate(n.getUTCDate()-n.getUTCDay()+1),n.setUTCHours(0),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n;case c.MONTH:return n.setUTCMonth(n.getUTCMonth()-(n.getUTCMonth()-1)%i,1),n.setUTCHours(0),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n;case c.YEAR:return n.setUTCFullYear(n.getUTCFullYear()-n.getUTCFullYear()%i,1,1),n.setUTCHours(0),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),e}},flexParse:function(e,t){var i,n,r,o,a,s=d.exec(e);if(!s)return Ext.Date.parse(e,"C");if(t=t||Ext.Date.defaultFormat,s[2]||s[4]){if(s[2]&&s[4])return null;o=(s[2]?(r=c.monthNumbers[Ext.String.capitalize(s[2].substr(0,3))],n=parseInt(s[3])):(n=parseInt(s[1]),r=c.monthNumbers[Ext.String.capitalize(s[4].substr(0,3))]),parseInt(s[5]))}else i=t[0],!g[i]&&(h[i]||12<s[1]&&s[3]<13)?(n=parseInt(s[1]),r=parseInt(s[3])-1,o=parseInt(s[5])):!g[i]&&(f[i]||12<s[3]&&s[1]<13)?(r=parseInt(s[1])-1,n=parseInt(s[3]),o=parseInt(s[5])):(o=parseInt(s[1]),r=parseInt(s[3])-1,n=parseInt(s[5]));return isNaN(r)||r<0||11<r?null:(o<c.y2kYear&&(o+=2e3),a=new Date(o,r,1,0,0,0),n<1||n>Ext.Date.getDaysInMonth(a)?null:(a.setDate(n),a))}}).parseCodes.C=c.parseCodes.c,c}(),Ext.Function=function(){function e(){var e,t,i,n,r=l.length;for(a=null,t=0;t<r;t++)e=(i=l[t])[3],c[e]&&(delete c[e],(n=Ext.Timer.get(e,"raf"))&&n.tick(),i[0].apply(i[1]||g,i[2]||d),n&&n.tock());l=l.slice(r)}function o(){Ext.elevate(e)}var a,s=0,l=[],d=[],u=0,c={},h=Array.prototype.slice,f=window,g=Ext.global,t=!Ext.disableImmediate&&!(!g.setImmediate||!g.clearImmediate),p=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||function(e){function t(){e(n+r)}var i,n=Ext.now(),r=Math.max(0,16-(n-s));return t.$origFn=e.$origFn||e,t.$skipTimerCheck=t.$origFn.$skipTimerCheck,i=f.setTimeout(t,r),s=n+r,i},m={flexSetter:function(r){return function(e,t){var i,n;if(null!==e)if("string"!=typeof e){for(i in e)e.hasOwnProperty(i)&&r.call(this,i,e[i]);if(Ext.enumerables)for(n=Ext.enumerables.length;n--;)i=Ext.enumerables[n],e.hasOwnProperty(i)&&r.call(this,i,e[i])}else r.call(this,e,t);return this}},bind:function(e,t,i,n){if(arguments.length<=2)return e.bind(t);var r=e;return function(){var e=i||arguments;return!0===n?e=(e=h.call(arguments,0)).concat(i):"number"==typeof n&&(e=h.call(arguments,0),Ext.Array.insert(e,n,i)),r.apply(t||g,e)}},bindCallback:function(t,i,n,r,o){return function(){var e=h.call(arguments);return Ext.callback(t,i,n?n.concat(e):e,r,o)}},pass:function(t,i,n){return Ext.isArray(i)||(i=Ext.isIterable(i)?Ext.Array.clone(i):void 0!==i?[i]:[]),function(){var e=i.slice();return e.push.apply(e,arguments),t.apply(n||this,e)}},alias:function(e,t){return function(){return e[t].apply(e,arguments)}},clone:function(e){var t,i;for(i in t=function(){return e.apply(this,arguments)},e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},createInterceptor:function(t,i,n,r){return Ext.isFunction(i)?(r=Ext.isDefined(r)?r:null,function(){var e=arguments;return!1!==i.apply(n||this||g,e)?t.apply(this||g,e):r}):t},createDelayed:function(o,a,e,t,i){var s=o;return(e||t)&&(s=Ext.Function.bind(o,e,t,i)),function(){var e,t,i,n=this,r=h.call(arguments);e=function(){Ext.elevate(s,n,r,i)},t=setTimeout(e,a),e.$origFn=o.$origFn||o,e.$skipTimerCheck=e.$origFn.$skipTimerCheck,i=Ext.Timer.created("timeout",t,{type:"createDelayed",fn:o,timerFn:e})}},defer:function(e,t,i,n,r){var o,a,s,l=0;return a=i||n||r?Ext.Function.bind(e,i,n,r):e,0<t?(o=function(){Ext.elevate(a,null,null,s)},l=setTimeout(o,t),o.$origFn=e.$origFn||e,o.$skipTimerCheck=o.$origFn.$skipTimerCheck,s=Ext.Timer.created("timeout",l,{type:"defer",fn:e,timerFn:o})):a(),l},interval:function(e,t,i,n,r){var o,a,s,l;return s=Ext.Function.bind(e,i,n,r),o=function(){Ext.elevate(s,null,null,l)},a=setInterval(o,t),o.$origFn=s.$origFn||e,o.$skipTimerCheck=o.$origFn.$skipTimerCheck,l=Ext.Timer.created("interval",a,{type:"interval",fn:e,timerFn:o}),a},createSequence:function(t,i,n){return i?function(){var e=t.apply(this,arguments);return i.apply(n||this,arguments),e}:t},createBuffered:function(r,o,a,s){var l,d=function(){var e,t,i=s||h.call(arguments,0),n=a||this;l&&Ext.undefer(l),e=function(){Ext.elevate(r,n,i,t)},d.timer=l=setTimeout(e,o),e.$origFn=r.$origFn||r,e.$skipTimerCheck=e.$origFn.$skipTimerCheck,t=Ext.Timer.created("timeout",l,{type:"createBuffered",fn:r,timerFn:e})};return d},createAnimationFrame:function(i,n,r,o){var a,s;return o=o||3,a=function(){var e,t=r||h.call(arguments,0);n=n||this,3===o&&s&&m.cancelAnimationFrame(s),(1&o||!s)&&((e=function(){s=a.timerId=null,i.apply(n,t)}).$origFn=i.$origFn||i,e.$skipTimerCheck=e.$origFn.$skipTimerCheck,s=a.timerId=m.requestAnimationFrame(e))}},requestAnimationFrame:function(e,t,i){var n=++u,r=h.call(arguments,0);return r[3]=n,c[n]=1,Ext.Timer.created("raf",n,{type:"raf",fn:e}),l.push(r),a=a||p(o),n},cancelAnimationFrame:function(e){delete c[e],Ext.Timer.cancel("raf",e)},createThrottled:function(e,t,i){function n(){e.apply(i,o),s=Ext.now(),o=a=null}var r,o,a,s=0;return n.$origFn=e.$origFn||e,n.$skipTimerCheck=n.$origFn.$skipTimerCheck,function(){i=i||this,r=Ext.now()-s,o=Ext.Array.slice(arguments),t<=r?(Ext.undefer(a),n()):a=a||Ext.defer(n,t-r)}},createBarrier:function(e,t,i){function n(){--e||t.apply(i,arguments)}return n.$origFn=t.$origFn||t,n.$skipTimerCheck=n.$origFn.$skipTimerCheck,n},interceptBefore:function(e,t,i,n){var r=e[t]||Ext.emptyFn;return e[t]=function(){var e=i.apply(n||this,arguments);return r.apply(this,arguments),e}},interceptAfter:function(e,t,i,n){var r=e[t]||Ext.emptyFn;return e[t]=function(){return r.apply(this,arguments),i.apply(n||this,arguments)}},interceptAfterOnce:function(t,i,n,r){var o,a=t[i];return o=function(){var e;return a&&a.apply(this,arguments),e=n.apply(r||this,arguments),t[i]=a,t=i=n=r=a=o=null,e},t[i]=o},makeCallback:function(e,t){return t[e]||(t.$className&&Ext.raise('No method "'+e+'" on '+t.$className),Ext.raise('No method "'+e+'"')),function(){return t[e].apply(t,arguments)}},memoize:function(i,n,r){var o={},a=r&&Ext.isFunction(r);return function(e){var t=a?r.apply(n,arguments):e;return t in o||(o[t]=i.apply(n,arguments)),o[t]}},_stripCommentRe:/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(\/\/.*)/g,toCode:function(e){var t=e?e.toString():"";return t=t.replace(m._stripCommentRe,"")},fireElevatedHandlers:function(){o()}};return Ext.asap=t?function(e,t,i){var n,r,o,a=e;return null==t&&null==i||(a=m.bind(e,t,i)),n=function(){Ext.elevate(a,null,null,o)},r=setImmediate(n),n.$origFn=e.$origFn||e,n.$skipTimerCheck=n.$origFn.$skipTimerCheck,o=Ext.Timer.created("asap",r,{type:"asap",fn:e,timerFn:n}),r}:function(e,t,i){var n,r,o,a=e;return null==t&&null==i||(a=m.bind(e,t,i)),n=function(){Ext.elevate(a,null,null,o)},r=setTimeout(n,0,!0),n.$origFn=e.$origFn||e,n.$skipTimerCheck=n.$origFn.$skipTimerCheck,o=Ext.Timer.created("timeout",r,{type:"asap",fn:e,timerFn:n}),r},Ext.unasap=t?function(e){return e&&(clearImmediate(e),Ext.Timer.cancel("asap",e)),null}:function(e){return Ext.undefer(e)},Ext.asapCancel=function(e){return Ext.unasap(e)},Ext.defer=m.defer,Ext.undefer=function(e){return e&&(clearTimeout(e),Ext.Timer.cancel("timeout",e)),null},Ext.interval=m.interval,Ext.uninterval=function(e){return e&&(clearInterval(e),Ext.Timer.cancel("interval",e)),null},Ext.pass=m.pass,Ext.bind=m.bind,Ext.raf=function(){return m.requestAnimationFrame.apply(m,arguments)},Ext.unraf=function(e){m.cancelAnimationFrame(e)},m}(),Ext.Number=new function(){var o=this,e="1"!==.9.toFixed(),n=Math,l={count:!1,inclusive:!1,wrap:!0};Number.MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER||-(n.pow(2,53)-1),Number.MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||n.pow(2,53)-1,Ext.apply(o,{MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,MAX_32BIT_INTEGER:n.pow(2,31)-1,floatRe:/^[-+]?(?:\d+|\d*\.\d*)(?:[Ee][+-]?\d+)?$/,intRe:/^[-+]?\d+(?:[Ee]\+?\d+)?$/,Clip:{DEFAULT:l,COUNT:Ext.applyIf({count:!0},l),INCLUSIVE:Ext.applyIf({inclusive:!0},l),NOWRAP:Ext.applyIf({wrap:!1},l)},parseFloat:function(e){return void 0===e&&(e=null),null!==e&&"number"!=typeof e&&(e=String(e),e=o.floatRe.test(e)?+e:null,isNaN(e)&&(e=null)),e},parseInt:function(e){return void 0===e&&(e=null),"number"==typeof e?e=Math.floor(e):null!==e&&(e=String(e),e=o.intRe.test(e)?+e:null),e},binarySearch:function(e,t,i,n){var r,o;for(void 0===i&&(i=0),void 0===n&&(n=e.length),--n;i<=n;){if(t===(o=e[r=i+n>>>1]))return r;o<t?i=1+r:n=r-1}return i},bisectTuples:function(e,t,i,n,r){var o,a;for(void 0===n&&(n=0),void 0===r&&(r=e.length),--r;n<=r;){if(t===(a=e[o=n+r>>>1][i]))return o;a<t?n=1+o:r=o-1}return n},clipIndices:function(e,t,i){var n,r,o,a,s=0;for(n=(i=i||l).wrap,t=t||[],a=0;a<2;++a)r=o,o=null==(o=t[a])?s:a&&i.count?e<(o+=r)?e:o:(n&&(o=o<0?e+o:o),a&&i.inclusive&&++o,o<0?0:e<o?e:o),s=e;return t[0]=r,t[1]=o<r?r:o,t},constrain:function(e,t,i){var n=parseFloat(e);return null===t&&(t=e),null===i&&(i=e),n<t?t:i<n?i:n},snap:function(e,t,i,n){var r;return void 0===e||e<i?i||0:(t&&0!=(r=e%t)&&(e-=r,t<=2*r?e+=t:2*r<-t&&(e-=t)),o.constrain(e,i,n))},snapInRange:function(e,t,i,n){var r;return i=i||0,void 0===e||e<i?i:(t&&(r=(e-i)%t)&&(e-=r,t<=(r*=2)&&(e+=t)),void 0!==n&&e>(n=o.snapInRange(n,t,i))&&(e=n),e)},roundToNearest:function(e,t){return(t=t||1)*n.round(e/t)},roundToPrecision:function(e,t){var i=n.pow(10,t||1);return n.round(e*i)/i},truncateToPrecision:function(e,t){var i=n.pow(10,t||1);return parseInt(e*i,10)/i},sign:n.sign||function(e){return 0===(e=+e)||isNaN(e)?e:0<e?1:-1},log10:n.log10||function(e){return n.log(e)*n.LOG10E},isEqual:function(e,t,i){return"number"==typeof e&&"number"==typeof t&&"number"==typeof i||Ext.raise("All parameters should be valid numbers."),n.abs(e-t)<i},isFinite:Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},isInteger:Number.isInteger||function(e){return~~(e+0)===e},toFixed:e?function(e,t){var i;return t=t||0,i=n.pow(10,t),(n.round(e*i)/i).toFixed(t)}:function(e,t){return e.toFixed(t)},from:function(e,t){return isFinite(e)&&(e=parseFloat(e)),isNaN(e)?t:e},randomInt:function(e,t){return n.floor(n.random()*(t-e+1)+e)},correctFloat:function(e){return parseFloat(e.toPrecision(14))}}),Ext.num=function(){return o.from.apply(this,arguments)}},function(){function i(){}var u,y=/^\?/,v=/(\[):?([^\]]*)\]/g,E=/^([^\[]+)/,b=/\+/g;function n(e,t){var i;for(i in e)if(e.hasOwnProperty(i)&&e[i]!==t[i])return!1;return!0}u=Ext.Object={chain:Object.create||function(e){var t;return i.prototype=e,t=new i,i.prototype=null,t},clear:function(e){var t;for(t in e)delete e[t];return e},freeze:Object.freeze?function(e,t){var i;if(e&&"object"==typeof e&&!Object.isFrozen(e)&&(Object.freeze(e),t))for(i in e)u.freeze(e[i],t);return e}:Ext.identityFn,toQueryObjects:function(e,t,i){var n,r,o=u.toQueryObjects,a=[];if(Ext.isArray(t))for(n=0,r=t.length;n<r;n++)i?a=a.concat(o(e+"["+n+"]",t[n],!0)):a.push({name:e,value:t[n]});else if(Ext.isObject(t))for(n in t)t.hasOwnProperty(n)&&(i?a=a.concat(o(e+"["+n+"]",t[n],!0)):a.push({name:e,value:t[n]}));else a.push({name:e,value:t});return a},toQueryString:function(e,t){var i,n,r,o,a,s=[],l=[];for(i in e)e.hasOwnProperty(i)&&(s=s.concat(u.toQueryObjects(i,e[i],t)));for(n=0,r=s.length;n<r;n++)a=(o=s[n]).value,Ext.isEmpty(a)?a="":Ext.isDate(a)&&(a=Ext.Date.toString(a)),l.push(encodeURIComponent(o.name)+"="+encodeURIComponent(String(a)));return l.join("&")},fromQueryString:function(e,t){var i,n,r,o,a,s,l,d,u,c,h,f,g,p,m=e.replace(y,"").split("&"),x={};for(a=0,s=m.length;a<s;a++)if(0<(l=m[a]).length)if(r=(r=(n=l.split("="))[0]).replace(b,"%20"),r=decodeURIComponent(r),o=void 0!==(o=n[1])?(o=o.replace(b,"%20"),decodeURIComponent(o)):"",t){if(c=r.match(v),!(h=r.match(E)))throw new Error('[Ext.Object.fromQueryString] Malformed query string given, failed parsing name from "'+l+'"');if(r=h[0],f=[],null===c){x[r]=o;continue}for(d=0,u=c.length;d<u;d++)g=2===(g=c[d]).length?"":g.substring(1,g.length-1),f.push(g);for(f.unshift(r),i=x,d=0,u=f.length;d<u;d++)g=f[d],d===u-1?Ext.isArray(i)&&""===g?i.push(o):i[g]=o:(void 0!==i[g]&&"string"!=typeof i[g]||(p=f[d+1],i[g]=Ext.isNumeric(p)||""===p?[]:{}),i=i[g])}else x.hasOwnProperty(r)?(Ext.isArray(x[r])||(x[r]=[x[r]]),x[r].push(o)):x[r]=o;return x},each:function(e,t,i){var n,r,o=Ext.enumerables;if(e){for(r in i=i||e,e)if(e.hasOwnProperty(r)&&!1===t.call(i,r,e[r],e))return;if(o)for(n=o.length;n--;)if(e.hasOwnProperty(r=o[n])&&!1===t.call(i,r,e[r],e))return}},eachValue:function(e,t,i){var n,r,o=Ext.enumerables;for(r in i=i||e,e)if(e.hasOwnProperty(r)&&!1===t.call(i,e[r]))return;if(o)for(n=o.length;n--;)if(e.hasOwnProperty(r=o[n])&&!1===t.call(i,e[r]))return},merge:function(e){for(var t,i,n,r,o=1,a=arguments,s=a.length,l=u.merge,d=Ext.clone;o<s;o++)for(i in t=a[o])(n=t[i])&&n.constructor===Object?(r=e[i])&&r.constructor===Object?l(r,n):e[i]=d(n):e[i]=n;return e},mergeIf:function(e){for(var t,i,n,r=1,o=arguments.length,a=Ext.clone;r<o;r++)for(i in t=arguments[r])i in e||((n=t[i])&&n.constructor===Object?e[i]=a(n):e[i]=n);return e},getAllKeys:function(e){var t,i=[];for(t in e)i.push(t);return i},getKey:function(e,t){var i;for(i in e)if(e.hasOwnProperty(i)&&e[i]===t)return i;return null},getValues:function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(e[t]);return i},getKeys:"function"==typeof Object.keys?function(e){return e?Object.keys(e):[]}:function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t);return i},getSize:function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},isEmpty:function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},equals:function(e,t){return e===t||(e&&t?n(e,t)&&n(t,e):!e&&!t&&e===t)},fork:function(e){var t,i,n;if(e&&e.constructor===Object)for(i in t=u.chain(e),e)(n=e[i])&&(n.constructor===Object?t[i]=u.fork(n):n instanceof Array&&(t[i]=Ext.Array.clone(n)));else t=e;return t},defineProperty:"defineProperty"in Object?Object.defineProperty:function(e,t,i){Object.prototype.__defineGetter__&&(i.get&&e.__defineGetter__(t,i.get),i.set&&e.__defineSetter__(t,i.set))},classify:function(e){var t,i,n,r=e,o=[],a={};for(i in t=function(){var e,t,i;for(t=0,i=o.length;t<i;t++)this[e=o[t]]=new a[e]},e)e.hasOwnProperty(i)&&(n=e[i])&&n.constructor===Object&&(o.push(i),a[i]=u.classify(n));return t.prototype=r,t}},Ext.merge=Ext.Object.merge,Ext.mergeIf=Ext.Object.mergeIf}(),Ext.apply(Ext,{_namedScopes:{this:{isThis:1},controller:{isController:1},owner:{isOwner:1},up:{isUp:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},scrollbar:{_size:null,size:function(e){var t=Ext.scrollbar,i=t._size;if(Ext.isDomReady||Ext.raise("Ext.scrollbar.size() called before DomReady"),e||!i){var n,r,o=document.body,a=document.createElement("div");a.style.width=a.style.height="100px",a.style.overflow="scroll",a.style.position="absolute",o.appendChild(a),t._size=i={width:r=a.offsetWidth-a.clientWidth,height:n=a.offsetHeight-a.clientHeight},i.reservedWidth=r?"calc(100% - "+r+"px)":"",i.reservedHeight=n?"calc(100% - "+n+"px)":"",o.removeChild(a)}return i},height:function(e){return Ext.scrollbar.size(e).height},width:function(e){return Ext.scrollbar.size(e).width}},escapeId:function(){function t(e,t){return"\\"+t}function i(e,t){return"\\00"+t.charCodeAt(0).toString(16)+" "}var n=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,r=/([\W]{1})/g,o=/^(\d)/g;return function(e){return n.test(e)?e:e.replace(r,t).replace(o,i)}}(),lookUpFn:function(e,t){var i,n;for(e&&Ext.isFunction(e.up)||Ext.raise('Callback "up" syntax requires a caller with "up" method'),n=e.up();n&&!n[t];n=n.up())if((i=n.controller)&&i[t]){n=i;break}return n&&Ext.isFunction(n[t])||Ext.raise('No such method "'+t+'" found up() from '+(e.getId?e.getId():e.id)),n},callback:function(e,t,i,n,r,o){if(e){var a,s=t in Ext._namedScopes;return e.charAt?("."===e[2]?("up"!==e.substr(0,2)&&Ext.raise('Invalid callback method name "'+e+'"'),t&&Ext.raise('Callback "up" syntax is incompatible with scopes'),t=Ext.lookUpFn(r,e=e.substr(3))):r&&(s&&s.isUp?t=Ext.lookUpFn(r,e):t&&!s||(t=r.resolveListenerScope(s?t:o))),t&&Ext.isObject(t)||Ext.raise('Named method "'+e+'" requires a scope object'),Ext.isFunction(t[e])||Ext.raise('No method named "'+e+'" on '+(t.$className||"scope object")),e=t[e]):t=s?o||r:t||r,e&&Ext.isFunction(e)&&(t=t||Ext.global,n?Ext.defer(e,n,t,i):a=i?e.apply(t,i):e.call(t)),a}},coerce:function(e,t){var i=Ext.typeOf(e),n=Ext.typeOf(t),r="string"==typeof e;if(i!==n)switch(n){case"string":return String(e);case"number":return Number(e);case"boolean":return!(r&&(!e||"false"===e||"0"===e))&&Boolean(e);case"null":return r&&(!e||"null"===e)&&null;case"undefined":return r&&(!e||"undefined"===e)&&void 0;case"date":return r&&isNaN(e)?Ext.Date.parse(e,Ext.Date.defaultFormat):Date(Number(e))}return e},copyTo:function(e,t,i,n){var r,o,a;for("string"==typeof i&&(i=i.split(Ext.propertyNameSplitRe)),o=0,a=i?i.length:0;o<a;o++)r=i[o],(n||t.hasOwnProperty(r))&&(e[r]=t[r]);return e},copy:function(e,t,i,n){var r,o,a;for("string"==typeof i&&(i=i.split(Ext.propertyNameSplitRe)),o=0,a=i?i.length:0;o<a;o++)r=i[o],(t.hasOwnProperty(r)||n&&r in t)&&(e[r]=t[r]);return e},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(e,t,i){var n,r,o;for("string"==typeof i&&(i=i.split(Ext.propertyNameSplitRe)),r=0,o=i?i.length:0;r<o;r++)void 0===e[n=i[r]]&&(e[n]=t[n]);return e},copyIf:function(e,t,i){var n,r,o;for("string"==typeof i&&(i=i.split(Ext.propertyNameSplitRe)),r=0,o=i?i.length:0;r<o;r++)!((n=i[r])in e)&&n in t&&(e[n]=t[n]);return e},extend:function(){function a(e){var t;for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}var s=Object.prototype.constructor;return function(t,e,i){Ext.isObject(e)&&(i=e,e=t,t=i.constructor!==s?i.constructor:function(){e.apply(this,arguments)}),e||Ext.raise({sourceClass:"Ext",sourceMethod:"extend",msg:"Attempting to extend from a class which has not been loaded on the page."});function n(){}var r,o=e.prototype;return n.prototype=o,(((r=t.prototype=new n).constructor=t).superclass=o).constructor===s&&(o.constructor=e),t.override=function(e){Ext.override(t,e)},r.override=a,r.proto=r,t.override(i),t.extend=function(e){return Ext.extend(t,e)},t}}(),isOnline:function(){return Ext.global.navigator.onLine},iterate:function(e,t,i){Ext.isEmpty(e)||(void 0===i&&(i=e),Ext.isIterable(e)?Ext.Array.each.call(Ext.Array,e,t,i):Ext.Object.each.call(Ext.Object,e,t,i))},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(e){var t,i=e;return e&&"<"===e.charAt(0)&&(t=Ext._resourcePoolRe.exec(e))&&(i=Ext.getResourcePath(t[3],t[1],t[2])),i},urlEncode:function(){var e=Ext.Array.from(arguments),t="";return Ext.isString(e[1])&&(t=e[1]+"&",e[1]=!1),t+Ext.Object.toQueryString.apply(Ext.Object,e)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(e){return Ext.scrollbar.size(e)},typeOf:function(){var r=/\S/,o=Object.prototype.toString,a={number:1,string:1,boolean:1,undefined:1},s={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(e){if(null===e)return"null";var t,i,n=typeof e;return a[n]?n:(t=s[i=o.call(e)])?t:"function"==n?"function":"object"==n?void 0!==e.nodeType?3===e.nodeType?r.test(e.nodeValue)?"textnode":"whitespace":"element":"object":(Ext.raise({sourceClass:"Ext",sourceMethod:"typeOf",msg:'Failed to determine the type of "'+e+'".'}),i)}}(),factory:function(e,t,i,n){var r,o=Ext.ClassManager;if(!e||e.isInstance)return i&&i!==e&&i.destroy(),e;if(n){if("string"==typeof e)return o.instantiateByAlias(n+"."+e);if(Ext.isObject(e)&&"type"in e)return o.instantiateByAlias(n+"."+e.type,e)}return!0===e?(i||t||Ext.raise("[Ext.factory] Cannot determine type of class to create"),i||Ext.create(t)):(Ext.isObject(e)||Ext.raise("Invalid config, must be a valid config object"),"xtype"in e?r=o.instantiateByAlias("widget."+e.xtype,e):"xclass"in e&&(r=Ext.create(e.xclass,e)),r?(i&&i.destroy(),r):i?i.setConfig(e):Ext.create(t,e))},convertKeyedItems:function(e,t,i){if(e&&!e.isInstance&&Ext.isObject(e)){var n,r,o,a=e;if(e=[],a.xtype||a.xclass||a.itemId||a.id)e.push(a);else for(r in a)(n=a[r])&&(!0===n?n={}:"function"==typeof n?(i||Ext.raise("Function not expected here"),o=n,(n={})[i]=o):"string"==typeof n?(o=n,(n={})[t||"xtype"]=o):n=Ext.apply({},n),n.itemId=r,e.push(n))}return e},sortByWeight:function(e){e&&Ext.Array.sort(e,Ext.weightSortFn)},weightSortFn:function(e,t){return(e.weight||0)-(t.weight||0)},concat:function(e,t){var i=null==t,n=Ext.emptyArray;return null==e?i?e:n.concat(t):i?n.concat(e):n.concat(e,t)},log:function(){var f=/string|number|boolean/;function c(e){var t,i,n,r,o,a,s,l=Ext.global.console,d="log",u=c.indent||0;c.indent=u,"string"!=typeof e&&(e=(t=e).msg||"",d=t.level||d,i=t.dump,r=t.stack,n=t.prefix,o=t.fn,t.indent?++c.indent:t.outdent&&(c.indent=u=Math.max(u-1,0)),!i||l&&l.dir||(e+=function e(t,i,n,r){var o,a,s,l,d,u,c=[];if(Ext.isArray(t)?(d="[",u="]"):Ext.isObject(t)&&(d="{",u="}"),(n=n||3)<i)return d+"..."+u;i=i||1;var h=new Array(i).join("    ");for(l in t)if(t.hasOwnProperty(l)){if("function"==(a=typeof(s=t[l]))){if(!r)continue;o=a}else o="undefined"==a?a:null===s||f.test(a)||Ext.isDate(s)?Ext.encode(s):Ext.isArray(s)||Ext.isObject(s)?e(s,i+1,n,r):a;c.push(h+l+": "+o)}return c.length?d+"\n    "+c.join(",\n    ")+"\n"+h+u:d+u}(i),i=null)),1<arguments.length&&(e+=Array.prototype.slice.call(arguments,1).join("")),n&&(e=n+" - "+e),e=u?Ext.String.repeat(" ",c.indentSize*u)+e:e,"log"!==d&&(e="["+d.charAt(0).toUpperCase()+"] "+e),o&&(e+="\nCaller: "+o.toString()),l?(l[d]?l[d](e):l.log(e),i&&l.dir(i),r&&l.trace&&(l.firebug&&"error"===d||l.trace())):Ext.isOpera?opera.postError(e):(s=c.max,(a=c.out).length>=s&&Ext.Array.erase(a,0,a.length-3*Math.floor(s/4)),a.push(e)),++c.count,++c.counters[d]}function e(e,t){"string"==typeof t[0]&&t.unshift({}),t[0].level=e,c.apply(this,t)}return c.error=function(){e("error",Array.prototype.slice.call(arguments))},c.info=function(){e("info",Array.prototype.slice.call(arguments))},c.warn=function(){e("warn",Array.prototype.slice.call(arguments))},c.count=0,c.counters={error:0,warn:0,info:0,log:0},c.indentSize=2,c.out=[],c.max=750,c}()||function(){function e(){}return e.info=e.warn=e.error=Ext.emptyFn,e}()}),function(){var x,y=[""],c=/([^\d.])/,h=/[^\d]/g,f=/[-+]/g,v=/\s/g,g=/_/g,i={classic:1,modern:1};Ext.Version=x=function(e,t){var i,n,r,o,a,s,l,d=this,u=d.padModes;e.isVersion&&(e=e.version),d.version=l=String(e).toLowerCase().replace(g,".").replace(f,""),r=(i=l.charAt(0))in u?(l=l.substring(1),u[i]):t?u[t]:0,d.pad=r,s=l.search(c),d.shortVersion=l,-1!==s&&(d.release=a=l.substr(s,e.length),d.shortVersion=l.substr(0,s),a=x.releaseValueMap[a]||a),d.releaseValue=a||r,d.shortVersion=d.shortVersion.replace(h,""),d.parts=o=l.split(".");for(n=o.length;n--;)o[n]=parseInt(o[n],10);return r===1/0&&o.push(r),d.major=o[0]||r,d.minor=o[1]||r,d.patch=o[2]||r,d.build=o[3]||r,d},x.prototype={isVersion:!0,padModes:{"~":NaN,"^":1/0},release:"",compareTo:function(e){var t,i,n,r=this.pad,o=this.parts,a=o.length,s=e.isVersion?e:new x(e),l=s.pad,d=s.parts,u=d.length,c=Math.max(a,u);for(t=0;t<c;t++){if((i=t<a?o[t]:r)<(n=t<u?d[t]:l))return-1;if(n<i)return 1}return(i=this.releaseValue)<(n=s.releaseValue)?-1:n<i?1:0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(e){return 0<this.compareTo(e)},isGreaterThanOrEqual:function(e){return 0<=this.compareTo(e)},isLessThan:function(e){return this.compareTo(e)<0},isLessThanOrEqual:function(e){return this.compareTo(e)<=0},equals:function(e){return 0===this.compareTo(e)},match:function(e){return e=String(e),this.version.substr(0,e.length)===e},toArray:function(){var e=this;return[e.getMajor(),e.getMinor(),e.getPatch(),e.getBuild(),e.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(e){return 0<this.compareTo(e)},lt:function(e){return this.compareTo(e)<0},gtEq:function(e){return 0<=this.compareTo(e)},ltEq:function(e){return this.compareTo(e)<=0}},Ext.apply(x,{aliases:{from:{extjs:"ext",core:"core",touch:"modern"},to:{ext:["extjs"],core:["core"],modern:["touch"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(e){return e?isNaN(e)?this.releaseValueMap[e]||e:parseInt(e,10):0},compare:function(e,t){return(e.isVersion?e:new x(e)).compareTo(t)},set:function(e,t,i){var n,r=x.aliases.to[t],o=i.isVersion?i:new x(i);if(e[t]=o,r)for(n=r.length;0<n--;)e[r[n]]=o;return o}}),Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(e){var t=Ext.compatVersions;return(e?t[x.aliases.from[e]||e]:t.ext||t.touch||t.core)||Ext.getVersion(e)},setCompatVersion:function(e,t){x.set(Ext.compatVersions,e,t)},setVersion:function(e,t){return e in i&&(Ext.toolkit=e),Ext.lastRegisteredVersion=x.set(Ext.versions,e,t),this},getVersion:function(e){var t=Ext.versions;return e?t[x.aliases.from[e]||e]:t.ext||t.touch||t.core},checkVersion:function(e,t){var i,n,r,o,a,s,l,d,u,c=Ext.isArray(e),h=x.aliases.from,f=c?e:y,g=f.length,p=Ext.versions,m=p.ext||p.touch;for(c||(y[0]=e),i=0;i<g;++i){if(Ext.isString(l=f[i])){if(0<=l.indexOf(" ")&&(l=l.replace(v,"")),(n=l.indexOf("@"))<0)d=l,u=m;else{if(!(u=p[h[s=l.substring(0,n)]||s])){if(t)return!1;continue}d=l.substring(n+1)}(n=d.indexOf("-"))<0?"+"===d.charAt(n=d.length-1)?(o=d.substring(0,n),a=null):o=a=d:a=(o=0<n?d.substring(0,n):null,d.substring(n+1)),r=!0,o&&(r=(o=new x(o,"~")).ltEq(u)),r&&a&&(r=(a=new x(a,"~")).gtEq(u))}else r=Ext.checkVersion(l.and||l.or,!l.or),l.not&&(r=!r);if(r){if(!t)return!0}else if(t)return!1}return!!t},deprecate:function(e,t,i,n){x.compare(Ext.getVersion(e),t)<1&&i.call(n)}})}(),function(e){var t,i,n=e&&e.packages||{},r=e&&e.compatibility;for(t in n)(i=n[t])&&i.version&&Ext.setVersion(t,i.version);if(r)if(Ext.isString(r))Ext.setCompatVersion("core",r);else for(t in r)Ext.setCompatVersion(t,r[t]);n.ext||n.touch||(Ext.setVersion("ext","7.2.0.57"),Ext.setVersion("core","7.2.0.57"))}(Ext.manifest),Ext.Config=function(e){var t=e.charAt(0).toUpperCase()+e.substr(1);this.name=e,this.names={internal:"_"+e,initializing:"is"+t+"Initializing",apply:"apply"+t,update:"update"+t,get:"get"+t,set:"set"+t,initGet:"initGet"+t,changeEvent:e.toLowerCase()+"change"},this.root=this},Ext.Config.map={},Ext.Config.get=function(e){var t=Ext.Config.map;return t[e]||(t[e]=new Ext.Config(e))},Ext.Config.prototype={self:Ext.Config,isConfig:!0,combine:function(e,t,i,n){return this.merge?e=this.merge(n?Ext.clone(e):e,t,i):e&&e.constructor===Object&&t&&t.constructor===Object?e=Ext.merge({},t,e):n&&e&&(e=Ext.clone(e)),e},equals:function(e,t){return e===t},getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(e){return e.$configPrefixed?this.names.internal:this.name},mergeNew:function(e,t,i,n){var r,o;if(t)if(e)for(o in r=Ext.Object.chain(t),e)n&&o in r||(r[o]=e[o]);else r=t;else r=e;return r},mergeSets:function(e,t,i){var n,r,o=t?Ext.Object.chain(t):{};if(e instanceof Array)for(n=e.length;n--;)r=e[n],i&&r in o||(o[r]=!0);else if(e)if(e.constructor===Object)for(n in e)r=e[n],i&&n in o||(o[n]=r);else i&&e in o||(o[e]=!0);return o},makeGetter:function(){var e=this.name,t=this.names.internal;return function(){return this[this.$configPrefixed?t:e]}},makeInitGetter:function(){var t=this.name,e=this.names,i=e.set,n=e.get,r=e.initializing;return function(){var e=this;return e[r]=!0,delete e[n],e[i](e.config[t]),delete e[r],e[n].apply(e,arguments)}},makeSetter:function(){var e,o=this.name,t=this.names,a=t.internal,s=t.get,l=t.apply,d=t.update;return(e=function(e){var t,i=this,n=i.$configPrefixed?a:o,r=i[n];return delete i[s],i[l]&&void 0===(e=i[l](e,r))||e!==(r=i[n])&&(i[n]=e,i[d]&&i[d](e,r),(t=i.$configWatch)&&!i.isConfiguring&&t.fire(o,[i,o,i[n],r])),i}).$isDefault=!0,e},makeEventedSetter:function(){function r(e,t,i,n){e[n]=t,e[d]&&e[d](t,i);var r=e.$configWatch;r&&r.fire(o,[e,o,t,i])}var e,o=this.name,t=this.names,a=t.internal,s=t.get,l=t.apply,d=t.update,u=t.changeEvent;return(e=function(e){var t=this,i=t.$configPrefixed?a:o,n=t[i];return delete t[s],t[l]&&void 0===(e=t[l](e,n))||e!==(n=t[i])&&(t.isConfiguring?(t[i]=e,t[d]&&t[d](e,n)):t.fireEventedAction(u,[t,e,n],r,t,[t,e,n,i])),t}).$isDefault=!0,e}},function(){var E=Ext.Config,p=E.map,T=Ext.Object;Ext.Configurator=function(e){var t=this,i=e.prototype,n=e.superclass?e.superclass.self.$config:null;t.cls=e,(t.superCfg=n)?(t.configs=T.chain(n.configs),t.cachedConfigs=T.chain(n.cachedConfigs),t.initMap=T.chain(n.initMap),t.values=T.chain(n.values),t.needsFork=n.needsFork,t.deprecations=T.chain(n.deprecations)):(t.configs={},t.cachedConfigs={},t.initMap={},t.values={},t.deprecations={}),i.config=i.defaultConfig=t.values,e.$config=t},Ext.Configurator.prototype={self:Ext.Configurator,needsFork:!1,initList:null,add:function(e,t){var i,n,r,o,a,s,l,d,u,c,h=this,f=h.cls,g=h.configs,p=h.cachedConfigs,m=h.initMap,x=f.prototype,y=t&&t.$config.configs,v=h.values;for(l in e){if(r=!1,(n=(i=(c=e[l])&&c.constructor===Object)&&"$value"in c?c:null)&&(r=!!n.cached,i=(c=n.$value)&&c.constructor===Object),o=n&&n.merge,a=g[l]){if(t){if(!(o=a.merge))continue;n=null}else o=o||a.merge;t||!r||p[l]||Ext.raise("Redefining config as cached: "+l+" in class: "+f.$className),s=v[l],o?c=o.call(a,c,s,f,t):i&&s&&s.constructor===Object&&(c=Ext.merge({},s,c))}else y?(a=y[l],n=null):a=E.get(l),((g[l]=a).cached||r)&&(p[l]=!0),x[u=(d=a.names).get]||(x[u]=a.getter||a.getGetter()),x[u=d.set]||(x[u]=n&&n.evented?a.eventedSetter||a.getEventedSetter():a.setter||a.getSetter());n&&(a.owner!==f&&(g[l]=a=Ext.Object.chain(a),a.owner=f),Ext.apply(a,n),delete a.$value),!h.needsFork&&c&&(c.constructor===Object||c instanceof Array)&&(h.needsFork=!0),null!==c?m[l]=!0:(x.$configPrefixed?x[g[l].names.internal]=null:x[g[l].name]=null,l in m&&(m[l]=!1)),v[l]=c}},addDeprecations:function(e){var t,i,n,r=this.deprecations,o=(this.cls.$className||"")+"#";for(n in e)(i=e[n])?(t=i.message)||(t='This config has been renamed to "'+i+'"'):t="This config has been removed.",r[n]=o+n+": "+t},configure:function(e,t){var i,n,r,o,a,s,l,d,u,c,h,f,g,p=this,m=p.configs,x=p.deprecations,y=p.initMap,v=p.initListMap,E=p.initList,b=p.cls.prototype,C=p.values,S=0,w=!E;if(C=p.needsFork?T.fork(C):T.chain(C),e.isConfiguring=!0,w)for(d in p.initList=E=[],p.initListMap=v={},e.isFirstInstance=!0,y)c=(n=m[d]).cached,y[d]?(l=n.names,u=C[d],!b[l.set].$isDefault||b[l.apply]||b[l.update]||"object"==typeof u?(c?(i=i||[]).push(n):(E.push(n),v[d]=!0),e[l.get]=n.initGetter||n.getInitGetter()):b[n.getInternalName(b)]=u):c&&(b[n.getInternalName(b)]=void 0);if(s=i&&i.length){for(o=0;o<s;++o)e[a=i[o].getInternalName(b)]=null;for(o=0;o<s;++o)r=(l=(n=i[o]).names).get,e.hasOwnProperty(r)&&(e[l.set](C[n.name]),delete e[r]);for(o=0;o<s;++o)b[a=i[o].getInternalName(b)]=e[a],delete e[a]}for(t&&t.platformConfig&&(t=p.resolvePlatformConfig(e,t)),w&&e.afterCachedConfig&&!e.afterCachedConfig.$nullFn&&e.afterCachedConfig(t),e.config=C,o=0,s=E.length;o<s;++o)e[(n=E[o]).names.get]=n.initGetter||n.getInitGetter();if(!(g=e.self.$configTransforms)){for(d in e.self.$configTransforms=g=[],s=e.$configTransforms)g.push([d,s[d]]);if(1<(s=g.length))for(g.sort(p.transformSorter),o=0;o<s;++o)g[o]=g[o][0];else s&&(g[0]=g[0][0])}for(o=0;o<g.length;++o)e[d=g[o]]&&(t=e[d](t,p));if(t)for(d in t)u=t[d],n=m[d],x[d]&&(Ext.log.warn(x[d]),!n)||(n?(n.lazy||++S,v[d]||(e[n.names.get]=n.initGetter||n.getInitGetter()),h=C[d],n.merge?u=n.merge(u,h,e):u&&u.constructor===Object&&(u=h&&h.constructor===Object?Ext.merge(C[d],u):Ext.clone(u,!1))):(f=e.self.prototype[d],e.$configStrict&&"function"==typeof f&&!f.$nullFn&&Ext.raise("Cannot override method "+d+" on "+e.$className+" instance."),e[d]=u),C[d]=u);if(!e.beforeInitConfig||e.beforeInitConfig.$nullFn||!1!==e.beforeInitConfig(t)){if(t)for(d in t){if(!S)break;(n=m[d])&&!n.lazy&&(--S,r=(l=n.names).get,e.hasOwnProperty(r)&&(e[l.set](C[d]),delete e[l.get]))}for(o=0,s=E.length;o<s;++o)r=(l=(n=E[o]).names).get,!n.lazy&&e.hasOwnProperty(r)&&(e[l.set](C[n.name]),delete e[r]);delete e.isConfiguring}},getCurrentConfig:function(e){var t,i=e.defaultConfig,n={};for(t in i)n[t]=e[p[t].names.get]();return n},hoistConfigs:function(e,t,i){var n,r,o,a=e.config,s=this.configs,l=this.initListMap,d=!1;for(r=0;r<i.length;++r)o=i[r],t&&o in t&&(n=s[o],a[o]=n.combine(t[o],a[o],e),l[o]||(e[n.names.get]=n.initGetter||n.getInitGetter())),null!=a[o]&&(d=!0);return d},merge:function(e,t,i,n){var r,o,a,s,l=this.configs;for(r in n&&(t=Ext.clone(t,!1)),i)o=i[r],(s=l[r])&&(a=t[r],s.merge?o=s.merge(o,a,e):o&&o.constructor===Object&&(o=a&&a.constructor===Object?Ext.merge(a,o):Ext.clone(o,!1))),t[r]=o;return t},reconfigure:function(e,t,i){var n,r,o,a,s,l,d,u=e.config,c=[],h=e.$configStrict&&!(i&&!1===i.strict),f=this.configs,g=i&&i.defaults;for(s in t)if(n=f[s],(!g||!e.hasOwnProperty(n&&e.$configPrefixed?n.names.internal:s))&&(u[s]=t[s],!this.deprecations[s]||(Ext.log.warn(this.deprecations[s]),n))){if(n)e[n.names.get]=n.initGetter||n.getInitGetter();else if(d=e.self.prototype[s],h){if("function"==typeof d&&!d.$nullFn){Ext.Error.raise("Cannot override method "+s+" on "+e.$className+" instance.");continue}"type"!==s&&Ext.log.warn('No such config "'+s+'" for class '+e.$className)}c.push(s)}for(o=0,a=c.length;o<a;o++)(n=f[s=c[o]])?(r=(l=n.names).get,e.hasOwnProperty(r)&&(e[l.set](t[s]),delete e[r])):e[(l=(n=p[s]||Ext.Config.get(s)).names).set]?e[l.set](t[s]):e[s]=t[s]},resolvePlatformConfig:function(e,t){var i,n,r,o=t&&t.platformConfig,a=t;if(o&&(r=(n=Ext.getPlatformConfigKeys(o)).length))for(a=Ext.merge({},a),i=0,r=n.length;i<r;++i)this.merge(e,a,o[n[i]]);return a},transformSorter:function(e,t){return e[1]-t[1]}}}(),Ext.Base=function(e){function E(e,t,i){var n='"'+e+'" is deprecated.';return i?n+=" "+i:t&&(n+=' Please use "'+t+'" instead.'),function(){Ext.raise(n)}}function b(e,t,i,n){n=n||'"'+t+'" is deprecated.',i&&(n+=' Please use "'+i+'" instead.'),n&&Ext.Object.defineProperty(e,t,{get:function(){Ext.raise(n)},set:function(e){Ext.raise(n)},configurable:!0})}function C(e){return function(){return this[e].apply(this,arguments)}}function t(){}var i,r,o=[],n=[],a=function(e,t){return e.hasOwnProperty(t)||(e[t]=Ext.Object.chain(a(e.superclass,t))),e[t]},S=Ext.Version,w=/^\d/,s={},l={},d=t.prototype;for(i in Ext.Reaper=r={delay:100,queue:[],timer:null,add:function(e){r.timer||(r.timer=Ext.defer(r.tick,r.delay)),r.queue.push(e)},flush:function(){r.timer&&(Ext.undefer(r.timer),r.timer=null);var e,t,i=r.queue,n=i.length;for(r.queue=[],e=0;e<n;++e)(t=i[e])&&t.$reap&&t.$reap()},tick:function(){r.timer=null,r.flush()}},Ext.apply(t,{$className:"Ext.Base",$isClass:!0,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addConfigTransform:function(e,t){var i=a(this.prototype,"$configTransforms");this.$configTransforms&&Ext.raise("Config transforms cannot be added after instances are created"),i[e]=t},addDeprecations:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g,p=this,m=[],x=Ext.getCompatVersion(e.name),y=p.getConfigurator(),v=(p.$className||"")+"#";for(i in e)w.test(i)&&((g=new Ext.Version(i)).deprecations=e[i],m.push(g));for(m.sort(S.compare),n=m.length;n--;){if(t=(g=m[n]).deprecations,o=p.prototype,f=t.statics,a=x&&x.lt(g)){if(!a)break}else;for(;t;){if(d=t.methods)for(u in d)l=null,(h=d[u])?Ext.isString(h)?(Ext.Assert.isNotDefinedProp(o,u),Ext.Assert.isDefinedProp(o,h),l=a?C(h):E(v+u,h)):(r="",(h.message||h.fn)&&(r=h.message,h=h.fn),s=o.hasOwnProperty(u)&&o[u],a&&h?(h.$owner=p,h.$name=u,h.name=v+u,s&&(h.$previous=s),l=h):s||(l=E(v+u,null,r))):(Ext.Assert.isNotDefinedProp(o,u),l=E(v+u)),l&&(o[u]=l);if((d=t.configs)&&y.addDeprecations(d),(d=t.properties)&&!a)for(u in d)c=d[u],Ext.isString(c)?b(o,v+u,c):c&&c.message?b(o,v+u,null,c.message):b(o,v+u);t=f,f=null,o=p}}},extend:function(e){var t,i,n,r=this,o=e.prototype;if(((t=r.prototype=Ext.Object.chain(o)).self=r).superclass=t.superclass=o,!e.$isClass)for(i in d)i in t&&(t[i]=d[i]);if(n=o.$inheritableStatics)for(i in n)r.hasOwnProperty(i)||(r[i]=e[i]);e.$onExtended&&(r.$onExtended=e.$onExtended.slice()),r.getConfigurator()},$onExtended:[],triggerExtended:function(){Ext.classSystemMonitor&&Ext.classSystemMonitor(this,"Ext.Base#triggerExtended",arguments);var e,t,i=this.$onExtended,n=i.length;if(0<n)for(e=0;e<n;e++)(t=i[e]).fn.apply(t.scope||this,arguments)},onExtended:function(e,t){return this.$onExtended.push({fn:e,scope:t}),this},addStatics:function(e){return this.addMembers(e,!0),this},addInheritableStatics:function(e){var t,i,n,r=this,o=r.prototype,a=r.$inheritableStatics;a||(a=Ext.apply({},o.$inheritableStatics),r.$inheritableStatics=o.$inheritableStatics=a);var s=Ext.getClassName(r)+".";for(t in e)e.hasOwnProperty(t)&&(i=e[t],n=r[t],"function"==typeof i&&(i.name=s+t),"function"!=typeof n||n.$isClass||n.$nullFn||(i.$previous=n),r[t]=i,a[t]=!0);return r},addMembers:function(e,t,i){var n,r,o,a,s,l,d,u=this,c=Ext.Function.clone,h=t?u:u.prototype,f=!t&&h.defaultConfig,g=Ext.enumerables,p=e.privates,m=(u.$className||"")+"#";for(s in p&&(delete e.privates,t||(d=p.statics,delete p.statics),l=p.privacy||i||"framework",u.addMembers(p,t,l),d&&u.addMembers(d,!0,l)),e)if(e.hasOwnProperty(s)){if(!0===i&&(i="framework"),(a=e[s])&&a.$nullFn&&i!==a.$privacy&&Ext.raise("Cannot use stock function for private method "+(u.$className?u.$className+"#":"")+s),"function"!=typeof a||a.$isClass||a.$nullFn){if(f&&s in f&&!h.config.hasOwnProperty(s)){(n=n||{})[s]=a;continue}}else{a.$owner&&(a=c(a)),h.hasOwnProperty(s)&&(a.$previous=h[s]),a.$owner=u,a.$name=s,a.name=m+s;var x=h[s];i?(a.$privacy=i,x&&x.$privacy&&x.$privacy!==i&&Ext.privacyViolation(u,x,a,t)):x&&x.$privacy&&Ext.privacyViolation(u,x,a,t)}h[s]=a}if(n&&u.addConfig(n),g)for(r=0,o=g.length;r<o;++r)e.hasOwnProperty(s=g[r])&&((a=e[s])&&!a.$nullFn&&(a.$owner&&(a=c(a)),a.$owner=u,a.$name=s,a.name=m+s,h.hasOwnProperty(s)&&(a.$previous=h[s])),h[s]=a);return this},addMember:function(e,t,i){return s[e]=t,this.addMembers(s,!1,i),delete s[e],this},hookMember:function(e,t){var i=this.prototype[e];return this.addMember(e,t,i&&i.$privacy)},borrow:function(e,t){Ext.classSystemMonitor&&Ext.classSystemMonitor(this,"Ext.Base#borrow",arguments);var i,n,r,o=e.prototype,a={};for(i=0,n=(t=Ext.Array.from(t)).length;i<n;i++)a[r=t[i]]=o[r];return this.addMembers(a)},override:function(e){var t=this,i=e.statics,n=e.inheritableStatics,r=e.config,o=e.mixins,a=e.cachedConfig;return(i||n||r)&&(e=Ext.apply({},e)),i&&(t.addMembers(i,!0),delete e.statics),n&&(t.addInheritableStatics(n),delete e.inheritableStatics),e.platformConfig&&t.addPlatformConfig(e),r&&(t.addConfig(r),delete e.config),a&&(t.addCachedConfig(a),delete e.cachedConfig),delete e.mixins,t.addMembers(e),o&&t.mixin(o),t},addPlatformConfig:function(e){var t,i,n,r,o,a,s,l,d,u=this.prototype,c=e.platformConfig;if(delete u.platformConfig,c instanceof Array)throw new Error("platformConfigs must be specified as an object.");for(i=(r=this.getConfigurator()).configs,l=0,d=(o=Ext.getPlatformConfigKeys(c)).length;l<d;++l){for(a in t=null,n=c[o[l]])s=n[a],a in i?(t=t||{})[a]=s:u[a]=s;t&&r.add(t)}},callParent:function(e){var t;return(t=this.callParent.caller)&&(t.$previous||(t=t.$owner?t:t.caller)&&t.$owner.superclass.self[t.$name]).apply(this,e||o)},callSuper:function(e){var t;return(t=this.callSuper.caller)&&((t=t.$owner?t:t.caller)&&t.$owner.superclass.self[t.$name]).apply(this,e||o)},mixin:function(e,t){var i,n,r,o,a,s,l,d,u,c,h,f=this;if("string"==typeof e){for(r in i=t.prototype,n=f.prototype,i.onClassMixedIn&&i.onClassMixedIn.call(t,f),n.hasOwnProperty("mixins")||(n.mixins="mixins"in n?Ext.Object.chain(n.mixins):{}),i)d=i[r],"mixins"===r?Ext.applyIf(n.mixins,d):"mixinId"!==r&&"config"!==r&&"$inheritableStatics"!==r&&void 0===n[r]&&(n[r]=d);if(o=i.$inheritableStatics){for(h in c={},o)f.hasOwnProperty(h)||(c[h]=t[h]);f.addInheritableStatics(c)}return"config"in i&&f.addConfig(i.config,t),(n.mixins[e]=i).afterClassMixedIn&&i.afterClassMixedIn.call(t,f),f}if((u=e)instanceof Array)for(a=0,s=u.length;a<s;a++)i=u[a],f.mixin(i.prototype.mixinId||i.$className,i);else for(l in u)f.mixin(l,u[l])},addConfig:function(e,t){(this.$config||this.getConfigurator()).add(e,t)},addCachedConfig:function(e,t){var i,n={};for(i in e)n[i]={cached:!0,$value:e[i]};this.addConfig(n,t)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:e(function(e,t){l[e]=function(){return this[t].apply(this,arguments)},this.override(l),delete l[e]})}),t)t.hasOwnProperty(i)&&n.push(i);return t.$staticMembers=n,t.getConfigurator(),t.addMembers({$className:"Ext.Base",$configTransforms:{},isInstance:!0,$configPrefixed:!0,$configStrict:!0,isConfiguring:!1,isFirstInstance:!1,destroyed:!1,clearPropertiesOnDestroy:!0,clearPrototypeOnDestroy:!1,statics:function(){var e=this.statics.caller,t=this.self;return e?e.$owner:t},callParent:function(e){var t,i=(t=this.callParent.caller)&&(t.$previous||(t=t.$owner?t:t.caller)&&t.$owner.superclass[t.$name]);if(!i){var n,r;if(!(t=this.callParent.caller).$owner){if(!t.caller)throw new Error("Attempting to call a protected method from the public scope, which is not allowed");t=t.caller}if(n=t.$owner.superclass,!((r=t.$name)in n))throw new Error("this.callParent() was called but there's no such method ("+r+") found in the parent class ("+(Ext.getClassName(n)||"Object")+")")}return i.apply(this,e||o)},callSuper:function(e){var t,i=(t=this.callSuper.caller)&&(t=t.$owner?t:t.caller)&&t.$owner.superclass[t.$name];if(!i){var n,r;if(!(t=this.callSuper.caller).$owner){if(!t.caller)throw new Error("Attempting to call a protected method from the public scope, which is not allowed");t=t.caller}if(n=t.$owner.superclass,!((r=t.$name)in n))throw new Error("this.callSuper() was called but there's no such method ("+r+") found in the parent class ("+(Ext.getClassName(n)||"Object")+")")}return i.apply(this,e||o)},self:t,constructor:function(){return this},initConfig:function(e){var t=this,i=t.self.getConfigurator();return t.initConfig=Ext.emptyFn,t.initialConfig=e||{},i.configure(t,e),t},beforeInitConfig:Ext.emptyFn,getConfig:function(e,t,i){var n,r,o=this;return e?(n=o.self.$config.configs[e])?(r=o.$configPrefixed?n.names.internal:e,i?o.hasOwnProperty(r)?o[r]:null:t?o.hasOwnProperty(r)?o[r]:o.config[e]:o[n.names.get]()):o[e]:o.getCurrentConfig()},destroyMembers:function(){var e,t,i,n,r=this,o=r.self.$config.configs,a=arguments.length;for(n=0;n<a;n++)t=(e=o[t=arguments[n]])&&r.$configPrefixed?e.names.internal:t,(i=r.hasOwnProperty(t)&&r[t])&&(Ext.destroy(i),r[t]=null)},freezeConfig:function(t){var i=this,e=Ext.Config.get(t).names,n=i[e.get]();i[e.set]=function(e){return e!==n&&Ext.raise('Cannot change frozen config "'+t+'"'),i},Ext.isIE8||Object.defineProperty(i,i.$configPrefixed?e.internal:t,{get:function(){return n},set:function(e){e!==n&&Ext.raise('Cannot change frozen config "'+t+'"')}})},setConfig:function(e,t,i){var n,r,o,a=this;if(e)if(n=a.self.getConfigurator(),"string"==typeof e){if(!(r=n.configs[e])){if(a.$configStrict){if("function"==typeof(o=a.self.prototype[e])&&!o.$nullFn)return Ext.Error.raise("Cannot override method "+e+" on "+a.$className+" instance."),a;"type"!==e&&Ext.log.warn('No such config "'+e+'" for class '+a.$className)}r=Ext.Config.map[e]||Ext.Config.get(e)}a[r.names.set]?a[r.names.set](t):a[e]=t}else n.reconfigure(a,e,i||t);return a},getConfigWatcher:function(){return this.$configWatch||(this.$configWatch=new Ext.mixin.Watchable)},watchConfig:function(e,t,i){var n=this.getConfigWatcher();return n.on.apply(n,arguments)},$configWatch:null,getCurrentConfig:function(){return this.self.getConfigurator().getCurrentConfig(this)},hasConfig:function(e){return e in this.defaultConfig},getInitialConfig:function(e){var t=this.config;return e?t[e]:t},$links:null,link:function(e,t){return(this.$links||(this.$links={}))[e]=!0,this[e]=t},unlink:function(e){var t,i,n,r;for(Ext.isArray(e)||Ext.raise("Invalid argument - expected array of strings"),t=0,i=e.length;t<i;t++)(r=this[n=e[t]])&&(r.isInstance&&!r.destroyed?r.destroy():r.parentNode&&"nodeType"in r&&r.parentNode.removeChild(r)),this[n]=null;return this},$reap:function(){var e,t,i,n,r,o,a=this,s=a.$noClearOnDestroy;for(r=0,o=(e=Ext.Object.getKeys(a)).length;r<o;r++)!(i=a[t=e[r]])||s&&s[t]||"object"!=(n=typeof i)&&("function"!=n||i.$noClearOnDestroy)||(a[t]=null);if(a.$nulled=!0,Object.setPrototypeOf&&a.clearPrototypeOnDestroy&&!a.$vetoClearingPrototypeOnDestroy){if(e=a.$preservePrototypeProperties)for(r=0,o=e.length;r<o;r++)t=e[r],a.hasOwnProperty(t)||(a[t]=a[t]);Object.setPrototypeOf(a,null)}},destroy:function(){var e=this,t=e.$links,i=e.clearPropertiesOnDestroy;t&&(e.$links=null,e.unlink(Ext.Object.getKeys(t))),e.destroy=Ext.emptyFn,e.isDestroyed=e.destroyed=!0,!0===i?e.isObservable||e.$reap():i&&("async"!==i&&Ext.raise("Invalid value for clearPropertiesOnDestroy"),r.add(e))}}),d.callOverridden=d.callParent,Ext.privacyViolation=function(e,t,i,n){var r=i.$name,o=t.$owner&&t.$owner.$className,a=n?"static ":"",s=i.$privacy?"Private "+a+i.$privacy+' method "'+r+'"':"Public "+a+'method "'+r+'"';e.$className&&(s=e.$className+": "+s),t.$privacy?s+=o?" conflicts with private "+t.$privacy+" method declared by "+o:" conflicts with inherited private "+t.$privacy+" method.":s+=o?" hides public method inherited from "+o:" hides inherited public method.";var l=Ext.getCompatVersion(),d=Ext.getVersion();d&&l&&l.lt(d)?Ext.log.error(s):Ext.raise(s)},Ext.Reaper.tick.$skipTimerCheck=!0,t}(Ext.Function.flexSetter),function(e,t){(Ext.util||(Ext.util={})).LRU=e=function(e){var t;e&&Ext.apply(this,e),this.head=t={id:this.seed=0,key:null,value:null},this.map={},t.next=t.prev=t},e.prototype=t={count:0,add:function(e,t){var i=this,n=i.map,r=n[e];return r&&(i.unlink(r),--i.count),n[e]=r={id:++i.seed,key:e,value:t},i.link(r),++i.count,r},clear:function(e,t){var i=this.head,n=i.next;if(i.next=i.prev=i,this.count=0,e&&!e.$nullFn)for(;n!==i;n=n.next)e.call(t||this,n.key,n.value)},each:function(e,t){var i,n;for(t=t||this,n=(i=this.head).next;n!==i&&!e.call(t,n.key,n.value);n=n.next);},prune:function(e,t){var i,n=this,r=n.head.prev;return n.count&&(i=r.value,n.unlink(r),--n.count,e&&e.call(t||n,r.key,i)),i},remove:function(e){var t,i=this.map,n=i[e];return n&&(this.unlink(n),t=n.value,delete i[e],--this.count),t},touch:function(e){var t=this.head,i=this.map[e];i&&i.prev!==t&&(this.unlink(i),this.link(i))},trim:function(e,t,i){for(;this.count>e;)this.prune(t,i)},link:function(e){var t=this.head,i=t.next;e.next=i,(e.prev=t).next=e,i.prev=e},unlink:function(e){var t=e.next,i=e.prev;(i.next=t).prev=i}},t.destroy=function(){this.clear.apply(this,arguments)}}(),function(t,e,i){Ext.util.Cache=i=function(e){t.call(this,e)},e.prototype=t.prototype,i.prototype=Ext.apply(new e,{maxSize:100,clear:function(){t.prototype.clear.call(this,this.evict)},get:function(e){var t,i=this,n=i.map[e];return n?(t=n.value,i.touch(e)):(t=i.miss.apply(i,arguments),i.add(e,t),i.trim(i.maxSize,i.evict)),t},evict:Ext.emptyFn})}(Ext.util.LRU,function(){}),function(){function n(e,t){return e.length-t.length||(e<t?-1:t<e?1:0)}var g,r=Ext.Base,o=r.$staticMembers;function a(e){function t(){return this.constructor.apply(this,arguments)||null}return e&&(t.name=e),t}Ext.Class=g=function(e,t,i){return"function"!=typeof e&&(i=t,t=e,e=null),t=t||{},e=g.create(e,t),g.process(e,t,i),e},Ext.apply(g,{makeCtor:a,onBeforeCreated:function(e,t,i){Ext.classSystemMonitor&&Ext.classSystemMonitor(e,">> Ext.Class#onBeforeCreated",arguments),e.addMembers(t),i.onCreated.call(e,e),Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"<< Ext.Class#onBeforeCreated",arguments)},create:function(e,t){var i,n=o.length;for(e=e||a(t.$className);n--;)e[i=o[n]]=r[i];return e},process:function(e,t,i){var n,r,o,a,s,l,d,u=t.preprocessors||g.defaultPreprocessors,c=this.preprocessors,h={onBeforeCreated:this.onBeforeCreated},f=[];for(delete t.preprocessors,e._classHooks=h,o=0,a=u.length;o<a;o++)if("string"==typeof(n=u[o])){if(!0===(r=(n=c[n]).properties))f.push(n.fn);else if(r)for(s=0,l=r.length;s<l;s++)if(d=r[s],t.hasOwnProperty(d)){f.push(n.fn);break}}else f.push(n);h.onCreated=i||Ext.emptyFn,h.preprocessors=f,this.doProcess(e,t,h)},doProcess:function(e,t,i){for(var n=i.preprocessors,r=n.shift(),o=this.doProcess;r;r=n.shift())if(!1===r.call(this,e,t,i,o))return;i.onBeforeCreated.apply(this,arguments)},preprocessors:{},registerPreprocessor:function(e,t,i,n,r){return n=n||"last",i=i||[e],this.preprocessors[e]={name:e,properties:i||!1,fn:t},this.setDefaultPreprocessorPosition(e,n,r),this},getPreprocessor:function(e){return this.preprocessors[e]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(e){return this.defaultPreprocessors=Ext.Array.from(e),this},setDefaultPreprocessorPosition:function(e,t,i){var n,r=this.defaultPreprocessors;if("string"==typeof t){if("first"===t)return r.unshift(e),this;if("last"===t)return r.push(e),this;t="after"===t?1:-1}return-1!==(n=Ext.Array.indexOf(r,i))&&Ext.Array.splice(r,Math.max(0,n+t),0,e),this}}),g.registerPreprocessor("extend",function(e,t,i){var n,r,o,a=Ext.Base,s=a.prototype,l=t.extend;if(Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#extendPreProcessor",arguments),delete t.extend,r=(n=l&&l!==Object?l:a).prototype,!n.$isClass)for(o in s)r[o]||(r[o]=s[o]);e.extend(n),e.triggerExtended.apply(e,arguments),t.onClassExtended&&(e.onExtended(t.onClassExtended,e),delete t.onClassExtended)},!0),g.registerPreprocessor("privates",function(e,t){var i=t.privates,n=i.statics,r=i.privacy||!0;Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#privatePreprocessor",arguments),delete t.privates,delete i.statics,e.addMembers(i,!1,r),n&&e.addMembers(n,!0,r)}),g.registerPreprocessor("statics",function(e,t){Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#staticsPreprocessor",arguments),e.addStatics(t.statics),delete t.statics}),g.registerPreprocessor("inheritableStatics",function(e,t){Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#inheritableStaticsPreprocessor",arguments),e.addInheritableStatics(t.inheritableStatics),delete t.inheritableStatics}),Ext.createRuleFn=function(e){return new Function("$c","with($c) { try { return ("+e+"); } catch(e) { return false;}}")},Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn}),Ext.ruleKeySortFn=n,Ext.getPlatformConfigKeys=function(e){var t,i=[];for(t in e)Ext.expressionCache.get(t)(Ext.platformTags)&&i.push(t);return i.sort(n),i},g.registerPreprocessor("config",function(e,t){t.hasOwnProperty("$configPrefixed")&&(e.prototype.$configPrefixed=t.$configPrefixed),e.addConfig(t.config),delete t.config}),g.registerPreprocessor("cachedConfig",function(e,t){t.hasOwnProperty("$configPrefixed")&&(e.prototype.$configPrefixed=t.$configPrefixed),e.addCachedConfig(t.cachedConfig),delete t.cachedConfig}),g.registerPreprocessor("mixins",function(e,t,i){var n=t.mixins,r=i.onCreated;Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#mixinsPreprocessor",arguments),delete t.mixins,i.onCreated=function(){return Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#mixinsPreprocessor#beforeCreated",arguments),i.onCreated=r,e.mixin(n),i.onCreated.apply(this,arguments)}}),Ext.extend=function(e,t,i){var n,r;if(Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#extend-backwards-compatible",arguments),2===arguments.length&&Ext.isObject(t)&&(i=t,t=e,e=null),!t)throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.");return i.extend=t,i.preprocessors=["extend","statics","inheritableStatics","mixins","config"],e?(n=new g(e,i)).prototype.constructor=e:n=new g(i),n.prototype.override=function(e){for(r in e)e.hasOwnProperty(r)&&(this[r]=e[r])},n}}(),Ext.Inventory=function(){var e=this;e.names=[],e.paths={},e.alternateToName={},e.aliasToName={},e.nameToAliases={},e.nameToAlternates={},e.nameToPrefix={}},Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(e,t,i){return this.addMapping(e,t,this.aliasToName,this.nameToAliases,i)},addAlternate:function(e,t){return this.addMapping(e,t,this.alternateToName,this.nameToAlternates)},addMapping:function(e,t,i,n,r){var o,a,s,l,d,u,c=e.$className||e,h=c,f=this._array1;for(s in Ext.isString(c)&&((h={})[c]=t),h)for(a=h[s],Ext.isString(a)&&(f[0]=a,a=f),d=a.length,u=n[s]||(n[s]=[]),l=0;l<d;++l)(o=a[l])&&i[o]!==s&&(!r&&i[o]&&"Ext.Gadget"!==o&&Ext.log.warn("Overriding existing mapping: '"+o+"' From '"+i[o]+"' to '"+s+"'. Is this intentional?"),i[o]=s,u.push(o))},getAliasesByName:function(e){return this.nameToAliases[e]||null},getAlternatesByName:function(e){return this.nameToAlternates[e]||null},getNameByAlias:function(e){return this.aliasToName[e]||""},getNameByAlternate:function(e){return this.alternateToName[e]||""},getNamesByExpression:function(e,t,i){var n,r,o,a,s,l,d,u=this,c=u.aliasToName,h=u.alternateToName,f=u.nameToAliases,g=u.nameToAlternates,p=i?t:{},m=[],x=Ext.isString(e)?[e]:e,y=x.length,v=u.wildcardRe;for(r=0;r<y;++r)if((n=x[r]).indexOf("*")<0)(l=c[n])||(l=h[n])||(l=n),l in p||t&&l in t||(p[l]=1,m.push(l));else for(l in d=new RegExp("^"+n.replace(v,"(.*?)")+"$"),f)if(!(l in p||t&&l in t)){if(!(a=d.test(l))){for(s=(o=f[l]).length;!a&&0<s--;)a=d.test(o[s]);if((o=g[l])&&!a)for(s=o.length;!a&&0<s--;)a=d.test(o[s])}a&&(p[l]=1,m.push(l))}return m},getPath:function(e){var t,i=this,n=i.paths,r="";return e in n?r=n[e]:((t=i.nameToPrefix[e]||(i.nameToPrefix[e]=i.getPrefix(e)))&&(e=e.substring(t.length+1),(r=n[t])&&(r+="/")),r+=e.replace(i.dotRe,"/")+".js"),r},getPrefix:function(e){if(e in this.paths)return e;if(e in this.nameToPrefix)return this.nameToPrefix[e];for(var t,i,n,r,o=this.getPrefixes(),a=e.length;0<a--;)if(t=o[a]){if("."!==e.charAt(a))continue;for(n=0,r=t.length;n<r;n++)if((i=t[n])===e.substring(0,a))return i}return""},getPrefixes:function(){var e,t,i,n,r,o=this.prefixes;if(!o)for(e=this.names.slice(0),this.prefixes=o=[],n=0,r=e.length;n<r;n++)(o[i=(t=e[n]).length]||(o[i]=[])).push(t);return o},removeName:function(e){var t,i,n=this,r=n.aliasToName,o=n.alternateToName,a=n.nameToAliases,s=n.nameToAlternates,l=a[e],d=s[e];if(delete a[e],delete s[e],delete n.nameToPrefix[e],l)for(t=l.length;t--;)e===r[i=l[t]]&&delete r[i];if(d)for(t=d.length;t--;)e===o[i=d[t]]&&delete o[i]},resolveName:function(e){var t;return e in this.nameToAliases||(t=this.aliasToName[e])||(t=this.alternateToName[e]),t||e},select:function(e,t){var i,n=this,r={},o={excludes:r,exclude:function(){return n.getNamesByExpression(arguments[0],r,!0),this}};for(i in e)o[i]=n.selectMethod(r,e[i],t||e);return o},selectMethod:function(i,n,r){var o=this;return function(e){var t=Ext.Array.slice(arguments,1);return t.unshift(o.getNamesByExpression(e,i)),n.apply(r,t)}},setPath:Ext.Function.flexSetter(function(e,t){var i=this;return i.paths[e]=t,i.names.push(e),i.prefixes=null,i.nameToPrefix={},i})},Ext.ClassManager=function(t,a,r,f,i){var n=Ext.Class.makeCtor,s=[],o={Ext:{name:"Ext",value:Ext}},m=Ext.apply(new Ext.Inventory,{classes:{},classCount:0,classState:{},existCache:{},instantiators:[],isCreated:function(e){if("string"!=typeof e||e.length<1)throw new Error("[Ext.ClassManager] Invalid classname, must be a string and must not be empty");return!(!m.classes[e]&&!m.existCache[e])||!!m.lookupName(e,!1)&&(m.triggerCreated(e),!0)},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(e,t){m.existCache[e]=t||1,m.classState[e]+=40,m.notify(e,m.createdListeners,m.nameCreatedListeners)},onCreated:function(e,t,i){m.addListener(e,t,i,m.createdListeners,m.nameCreatedListeners)},notify:function(e,t,i){var n,r,o,a,s,l,d=m.getAlternatesByName(e),u=[e];for(n=0,r=t.length;n<r;n++)(s=t[n]).fn.call(s.scope,e);for(;u;){for(n=0,r=u.length;n<r;n++)if(t=i[l=u[n]]){for(o=0,a=t.length;o<a;o++)(s=t[o]).fn.call(s.scope,l);delete i[l]}u=d,d=null}},addListener:function(e,t,i,n,r){var o;if(Ext.isArray(i))for(e=Ext.Function.createBarrier(i.length,e,t),o=0;o<i.length;o++)this.addListener(e,null,i[o],n,r);else{var a={fn:e,scope:t};if(i){if(this.isCreated(i))return void e.call(t,i);r[i]||(r[i]=[]),r[i].push(a)}else n.push(a)}},$namespaceCache:o,addRootNamespaces:function(e){var t;for(t in e)o[t]={name:t,value:e[t]}},clearNamespaceCache:function(){var e;for(e in s.length=0,o)o[e].value||delete o[e]},getNamespaceEntry:function(e){var t,i;return"string"!=typeof e?e:((t=o[e])||(t=(i=e.lastIndexOf("."))<0?{name:e}:{name:e.substring(i+1),parent:m.getNamespaceEntry(e.substring(0,i))},o[e]=t),t)},lookupName:function(e,t){var i,n,r=m.getNamespaceEntry(e),o=Ext.global,a=0;for(i=r;i;i=i.parent)s[a++]=i;for(;o&&0<a--;)n=o,!(o=(i=s[a]).value||o[i.name])&&t&&(n[i.name]=o={});return o},setNamespace:function(e,t){var i=m.getNamespaceEntry(e),n=Ext.global;return i.parent&&(n=m.lookupName(i.parent,!0)),n[i.name]=t},setXType:function(e,t){var i=e.$className,n=(i?e:m.get(i=e)).prototype,r=n.xtypes,o=n.xtypesChain,a=n.xtypesMap;n.hasOwnProperty("xtypes")||(n.xtypes=r=[],n.xtypesChain=o=o?o.slice(0):[],n.xtypesMap=a=Ext.apply({},a)),m.addAlias(i,"widget."+t,!0),r.push(t),o.push(t),a[t]=!0},set:function(e,t){var i=m.getName(t);return m.classes[e]=m.setNamespace(e,t),m.classCount++,i&&i!==e&&m.addAlternate(i,e),m},get:function(e){return m.classes[e]||m.lookupName(e,!1)},addNameAliasMappings:function(e){m.addAlias(e)},addNameAlternateMappings:function(e){m.addAlternate(e)},getByAlias:function(e){return m.get(m.getNameByAlias(e))},getByConfig:function(e,t){var i,n=e.xclass;return i=n||((i=e.xtype)?t="widget.":i=e.type,m.getNameByAlias(t+i)),m.get(i)},getName:function(e){return e&&e.$className||""},getClass:function(e){return e&&e.self||null},create:function(u,c,h){var e;if(null!=u&&"string"!=typeof u)throw new Error("[Ext.define] Invalid class name '"+u+"' specified, must be a non-empty string");return e=n(u),"function"==typeof c&&(c=c(e)),u&&(m.classes[u]&&Ext.log.warn("[Ext.define] Duplicate class name '"+u+"' specified, must be a non-empty string"),e.name=u),c.$className=u,new t(e,c,function(){var e,t,i,n,r,o,a,s=c.postprocessors||m.defaultPostprocessors,l=m.postprocessors,d=[];for(delete c.postprocessors,t=0,i=s.length;t<i;t++)if("string"==typeof(e=s[t])){if(!0===(o=(e=l[e]).properties))d.push(e.fn);else if(o)for(n=0,r=o.length;n<r;n++)if(a=o[n],c.hasOwnProperty(a)){d.push(e.fn);break}}else d.push(e);c.postprocessors=d,c.createdFn=h,m.processCreate(u,this,c)})},processCreate:function(e,t,i){var n=this,r=i.postprocessors.shift(),o=i.createdFn;if(!r)return Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#classCreated",arguments),e&&n.set(e,t),delete t._classHooks,o&&o.call(t,t),void(e&&n.triggerCreated(e));!1!==r.call(n,e,t,i,n.processCreate)&&n.processCreate(e,t,i)},createOverride:function(o,a,s){var l,d,u,c=this,h=a.override,f=a.requires,g=a.uses,p=a.mixins,e=1;return u=function(){var e,t,i,n,r;if(!d){if(t=f?f.slice(0):[],p)if(l=p instanceof Array)for(i=0,r=p.length;i<r;++i)Ext.isString(e=p[i])&&t.push(e);else for(n in p)Ext.isString(e=p[n])&&t.push(e);if(d=!0,t.length)return void Ext.require(t,u)}if(l)for(i=0,r=p.length;i<r;++i)Ext.isString(e=p[i])&&(p[i]=Ext.ClassManager.get(e));else if(p)for(n in p)Ext.isString(e=p[n])&&(p[n]=Ext.ClassManager.get(e));e=h.$isClass?h:c.get(h),delete a.override,delete a.compatibility,delete a.requires,delete a.uses,Ext.override(e,a),Ext.Loader.history.push(o),g&&Ext.Loader.addUsedClasses(g),s&&s.call(e,e)},o&&(m.overrideMap[o]=!0),"compatibility"in a&&((e=a.compatibility)?"number"==typeof e?e=!0:"boolean"!=typeof e&&(e=Ext.checkVersion(e)):e=!1),e&&(h.$isClass?u():c.onCreated(u,c,h)),c.triggerCreated(o,2),c},instantiateByAlias:function(){var e=arguments[0],t=r.call(arguments),i=this.getNameByAlias(e);if(!i)throw new Error("[Ext.createByAlias] Unrecognized alias: "+e);return t[0]=i,Ext.create.apply(Ext,t)},instantiate:function(){return Ext.log.warn("Ext.ClassManager.instantiate() is deprecated. Use Ext.create() instead."),Ext.create.apply(Ext,arguments)},dynInstantiate:function(e,t){return(t=f(t,!0)).unshift(e),Ext.create.apply(Ext,t)},getInstantiator:function(e){var t,i,n,r=this.instantiators;if(!(t=r[e])){for(n=e,i=[],n=0;n<e;n++)i.push("a["+n+"]");(t=r[e]=new Function("c","a","return new c("+i.join(",")+")")).name="Ext.create"+e}return t},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(e,t,i,n,r){return n=n||"last",i=i||[e],this.postprocessors[e]={name:e,properties:i||!1,fn:t},this.setDefaultPostprocessorPosition(e,n,r),this},setDefaultPostprocessors:function(e){return this.defaultPostprocessors=f(e),this},setDefaultPostprocessorPosition:function(e,t,i){var n,r=this.defaultPostprocessors;if("string"==typeof t){if("first"===t)return r.unshift(e),this;if("last"===t)return r.push(e),this;t="after"===t?1:-1}return-1!==(n=Ext.Array.indexOf(r,i))&&Ext.Array.splice(r,Math.max(0,n+t),0,e),this}});if(m.registerPostprocessor("platformConfig",function(e,t,i){t.addPlatformConfig(i)}),m.registerPostprocessor("alias",function(e,t,i){Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#aliasPostProcessor",arguments);var n,r,o=Ext.Array.from(i.alias);for(n=0,r=o.length;n<r;n++)a=o[n],this.addAlias(t,a)},["xtype","alias"]),m.registerPostprocessor("singleton",function(e,t,i,n){return Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#singletonPostProcessor",arguments),!i.singleton||(n.call(this,e,new t,i),!1)}),m.registerPostprocessor("alternateClassName",function(e,t,i){var n,r,o,a=i.alternateClassName;for(Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#alternateClassNamePostprocessor",arguments),a instanceof Array||(a=[a]),n=0,r=a.length;n<r;n++){if("string"!=typeof(o=a[n]))throw new Error("[Ext.define] Invalid alternate of: '"+o+"' for class: '"+e+"'; must be a valid string");this.set(o,t)}}),m.registerPostprocessor("debugHooks",function(e,t,i){Ext.classSystemMonitor&&Ext.classSystemMonitor(t,"Ext.Class#debugHooks",arguments),Ext.isDebugEnabled(t.$className,i.debugHooks.$enabled)&&(delete i.debugHooks.$enabled,Ext.override(t,i.debugHooks)),delete(t.isInstance?t.self:t).prototype.debugHooks}),m.registerPostprocessor("deprecated",function(e,t,i){var n;Ext.classSystemMonitor&&Ext.classSystemMonitor(t,"Ext.Class#deprecated",arguments),(n=t.isInstance?t.self:t).addDeprecations(i.deprecated),delete n.prototype.deprecated}),Ext.apply(Ext,{create:function(){var e,t=arguments[0],i=typeof t,n=r.call(arguments,1);if("function"==i)e=t;else{if("string"!=i&&0===n.length&&(n=[t],(t=t.xclass)||(t=(t=n[0].xtype)&&"widget."+t)),"string"!=typeof t||t.length<1)throw new Error("[Ext.create] Invalid class name or alias '"+t+"' specified, must be a non-empty string");t=m.resolveName(t),e=m.get(t)}if(e||(Ext.syncRequire(t),e=m.get(t)),!e)throw new Error("[Ext.create] Unrecognized class name / alias: "+t);if("function"!=typeof e)throw new Error("[Ext.create] Singleton '"+t+"' cannot be instantiated.");return m.getInstantiator(n.length)(e,n)},widget:function(e,t){var i,n,r,o=e;return"string"!=typeof o?(o=(t=e).xtype,n=t.xclass):t=t||{},t.isComponent?t:(n||(i="widget."+o,n=m.getNameByAlias(i)),n&&(r=m.get(n)),r?new r(t):Ext.create(n||i,t))},createByAlias:a(m,"instantiateByAlias"),define:function(e,t,i){return Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"ClassManager#define",arguments),t.override?(m.classState[e]=20,m.createOverride.apply(m,arguments)):(m.classState[e]=10,m.create.apply(m,arguments))},undefine:function(e){var t=m.classes;Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#undefine",arguments),t[e]&&m.classCount--,delete t[e],delete m.existCache[e],delete m.classState[e],m.removeName(e),Ext.Factory.clearCaches();var i,n=m.getNamespaceEntry(e),r=n.parent?m.lookupName(n.parent,!1):Ext.global;if(r){i=n.name;try{delete r[i]}catch(e){r[i]=void 0}}return i},getClassName:a(m,"getName"),getDisplayName:function(e){if(e){if(e.displayName)return e.displayName;if(e.$name&&e.$class)return Ext.getClassName(e.$class)+"#"+e.$name;if(e.$className)return e.$className}return"Anonymous"},getClass:a(m,"getClass"),namespace:function(){var e,t=i;for(e=arguments.length;0<e--;)t=m.lookupName(arguments[e],!0);return t}}),Ext.addRootNamespaces=m.addRootNamespaces,Ext.createWidget=Ext.widget,Ext.ns=Ext.namespace,t.registerPreprocessor("className",function(e,t){"$className"in t&&(e.$className=t.$className,e.displayName=e.$className),Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#classNamePreprocessor",arguments)},!0,"first"),t.registerPreprocessor("alias",function(e,t){Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#aliasPreprocessor",arguments);var n,r,i,o,a=e.prototype,s=f(t.xtype),l=f(t.alias),d="widget.",u=d.length,c=Array.prototype.slice.call(a.xtypesChain||[]),h=Ext.merge({},a.xtypesMap||{});for(n=0,r=l.length;n<r;n++){if("string"!=typeof(i=l[n])||i.length<1)throw new Error("[Ext.define] Invalid alias of: '"+i+"' for class: '"+void 0+"'; must be a valid string");i.substring(0,u)===d&&(o=i.substring(u),Ext.Array.include(s,o))}for(e.xtype=t.xtype=s[0],t.xtypes=s,n=0,r=s.length;n<r;n++)o=s[n],h[o]||(h[o]=!0,c.push(o));for(t.xtypesChain=c,t.xtypesMap=h,Ext.Function.interceptAfterOnce(e,"onClassCreated",function(){var e,t,i=this.prototype.mixins;for(e in Ext.classSystemMonitor&&Ext.classSystemMonitor(this,"Ext.ClassManager#aliasPreprocessor#afterClassCreated",arguments),i)if(i.hasOwnProperty(e)&&(t=i[e],s=t.xtypes))for(n=0,r=s.length;n<r;n++)o=s[n],h[o]||(h[o]=!0,c.push(o))}),n=0,r=s.length;n<r;n++){if("string"!=typeof(o=s[n])||o.length<1)throw new Error("[Ext.define] Invalid xtype of: '"+o+"' for class: '"+void 0+"'; must be a valid non-empty string");Ext.Array.include(l,d+o)}t.alias=l},["xtype","alias"]),Ext.manifest){var e,l,d,u,c=Ext.manifest,h=c.classes,g=c.paths,p={},x={};if(g){if(c.bootRelative)for(d in u=Ext.Boot.baseUrl,g)g.hasOwnProperty(d)&&(g[d]=u+g[d]);m.setPath(g)}if(h)for(e in h)x[e]=[],p[e]=[],(l=h[e]).alias&&(p[e]=l.alias),l.alternates&&(x[e]=l.alternates);m.addAlias(p),m.addAlternate(x)}return m}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global),Ext.define("Ext.mixin.Watchable",{on:function(e,t,i){return this._watchUpdate(!1,"_watchAdd",e,t,i)},fire:function(e,t){var i,n,r,o,a=this.watching,s=a&&a[e];if(s){for(++s.$firing,n=0;n<s.length;++n)if(o=s[n][0],!1===(r=(i=s[n][1]).charAt?t?o[i].apply(o,t):o[i]():t?i.apply(o,t):i.call(o)))return r;--s.$firing}},fireEvent:function(){var e=Ext.Array.slice(arguments),t=e.shift();return this.fire(t,e)},un:function(e,t,i){return this._watchUpdate(!0,"_watchRemove",e,t,i)},privates:{watching:null,$watchOptions:{destroyable:1,scope:1},_watchAdd:function(e,t,i,n,r){"string"!=typeof i||n[i]||Ext.raise('No such method "'+i+'" on '+n.$className);var o,a,s=e[t],l=[n,i];if(s){for(o=s.length;0<o--;)if(i===(a=s[o])[1]&&(n?a[0]===n:!a[0]))return;s.$firing&&(e[t]=s=s.slice(),s.$firing=0)}else e[t]=s=[],s.$firing=0;s.push(l),r&&(l.push(t),r.items.push(l))},_watchRemove:function(e,t,i,n){var r,o=e[t];if(o)for(o.$firing&&(e[t]=o=o.slice(),o.$firing=0),r=o.length;0<r--;)o[r][0]===n&&o[r][1]===i&&o.splice(r,1)},_watchUpdate:function(e,t,i,n,r){var o,a=this,s=i,l=a.watching;if(!l){if(e)return;a.watching=l={}}if("string"==typeof i)a[t](l,i,n,r);else for(i in o=s.destroyable?{owner:a,items:[],destroy:a._watcherDestroyer}:null,r=s.scope,s)a.$watchOptions[i]||a[t](l,i,s[i],r,o);return o},_watcherDestroyer:function(){var e,t,i=this.owner,n=i.watching,r=this.items;for(t=0;t<r.length;++t)e=r[t],i._watchRemove(n,e[2],e[1],e[0])}}}),(Ext.env||(Ext.env={})).Browser=function(e,t){var i,n,r,o=this,a=Ext.Boot.browserPrefixes,s=Ext.Boot.browserNames,l=o.enginePrefixes,d=o.engineNames,u=e.match(new RegExp("((?:"+Ext.Object.getValues(a).join(")|(?:")+"))([\\w\\._]+)")),c=e.match(new RegExp("((?:"+Ext.Object.getValues(l).join(")|(?:")+"))([\\w\\._]+)")),h=s.other,f=d.other,g="",p="",m="",x=!1,y=/(Edge\/)([\w.]+)/,v="";if(o.userAgent=e,this.is=function(e){return!!this.is[e]},/Edge\//.test(e)&&(u=e.match(y),c=e.match(y)),u&&("Safari"===(h=s[Ext.Object.getKey(a,u[1])])&&/^Opera/.test(e)&&(h="Opera"),g=new Ext.Version(u[2])),c&&(f=d[Ext.Object.getKey(l,c[1])],p=new Ext.Version(c[2])),"Trident"===f&&"IE"!==h){h="IE";var E=e.match(/.*rv:(\d+.\d+)/);E&&E.length&&(E=E[1],g=new Ext.Version(E))}if(h&&g&&Ext.setVersion(h,g),e.match(/FB/)&&"Other"===h?(h=s.safari,f=d.webkit):e.match(/Android.*Chrome/g)?h="ChromeMobile":(u=e.match(/OPR\/(\d+.\d+)/))&&(h="Opera",g=new Ext.Version(u[1])),Ext.apply(this,{engineName:f,engineVersion:p,name:h,version:g}),this.setFlag(h,!0,t),g){if(m=g.getMajor()||"",o.is.IE)for(m=document.documentMode||parseInt(m,10),i=7;i<=11;++i)Ext[n="isIE"+i]=m===i,Ext[n+"m"]=m<=i,Ext[n+"p"]=i<=m;o.is.Opera&&parseInt(m,10)<=12&&(Ext.isOpera12m=!0),Ext.chromeVersion=Ext.isChrome?m:0,Ext.firefoxVersion=Ext.isFirefox?m:0,Ext.ieVersion=Ext.isIE?m:0,Ext.operaVersion=Ext.isOpera?m:0,Ext.safariVersion=Ext.isSafari?m:0,Ext.webKitVersion=Ext.isWebKit?m:0,this.setFlag(h+m,!0,t),this.setFlag(h+g.getShortVersion())}for(i in s)s.hasOwnProperty(i)&&(r=s[i],this.setFlag(r,h===r));for(i in this.setFlag(r),p&&(this.setFlag(f+(p.getMajor()||"")),this.setFlag(f+p.getShortVersion())),d)d.hasOwnProperty(i)&&(r=d[i],this.setFlag(r,f===r,t));this.setFlag("Standalone",!!navigator.standalone);try{v=window.top.ripple}catch(e){}this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(v)),this.setFlag("WebWorks",!!window.blackberry),void 0===window.PhoneGap&&void 0===window.Cordova&&void 0===window.cordova||(x=!0,this.setFlag("PhoneGap"),this.setFlag("Cordova")),/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(e)&&(x=!0),this.setFlag("WebView",x),this.isStrict=Ext.isStrict="CSS1Compat"===document.compatMode,this.isSecure=Ext.isSecure,this.identity=h+m+(this.isStrict?"Strict":"Quirks")},Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{edge:"Edge",webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{edge:"Edge/",webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(e,t,i){return void 0===t&&(t=!0),this.is[e]=t,this.is[e.toLowerCase()]=t,i&&(Ext["is"+e]=t),this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(e){var t=this.propertyPrefixes[this.engineName];return 0<t.length?t+Ext.String.capitalize(e):e}},function(e){Ext.browser=new Ext.env.Browser(e,!0),Ext.userAgent=e.toLowerCase(),Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank"}(Ext.global.navigator.userAgent),Ext.env.OS=function(e,t,i){var n,r,o,a,s,l,d=Ext.Boot.osNames,u=Ext.Boot.osPrefixes,c="",h=this.is;for(r in i=i||Ext.browser,u)if(u.hasOwnProperty(r)&&(o=u[r],a=e.match(new RegExp("(?:"+o+")([^\\s;]+)")))){n=d[r],c=(l=a[1])&&"HTC_"===l||l&&"Silk/"===l?new Ext.Version("2.3"):new Ext.Version(a[a.length-1]);break}for(r in n||(n=d[(e.toLowerCase().match(/mac|win|linux/)||["other"])[0]],c=new Ext.Version("")),this.name=n,this.version=c,(e.match(/ipad/i)||!e.match(/iphone/i)&&e.match(/Mac/)&&2<navigator.maxTouchPoints)&&(n="iOS",t="iPad"),t&&this.setFlag(t.replace(/ simulator$/i,"")),this.setFlag(n),c&&(this.setFlag(n+(c.getMajor()||"")),this.setFlag(n+c.getShortVersion())),d)d.hasOwnProperty(r)&&(s=d[r],h.hasOwnProperty(n)||this.setFlag(s,n===s));"iOS"===this.name&&568===window.screen.height&&this.setFlag("iPhone5"),(i.is.Safari||i.is.Silk)&&((this.is.Android2||this.is.Android3||501===i.version.shortVersion)&&i.setFlag("AndroidStock"),this.is.Android4&&(i.setFlag("AndroidStock"),i.setFlag("AndroidStock4")))},Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(e){return!!this[e]},name:null,version:null,setFlag:function(e,t){return void 0===t&&(t=!0),this.flags&&(this.flags[e]=t),this.is[e]=t,this.is[e.toLowerCase()]=t,this}},function(){var e,t,i,n=Ext.global.navigator,r=n.userAgent,o=Ext.env.OS,a=Ext.is||(Ext.is={});o.prototype.flags=a,Ext.os=e=new o(r,n.platform),t=e.name,Ext["is"+t]=!0,Ext.isMac=a.Mac=a.MacOS,Ext.isApple=Ext.isMac||Ext.isiOS;var s=window.location.search.match(/deviceType=(Tablet|Phone)/),l=window.deviceType;s&&s[1]?i=s[1]:"iPhone"===l?i="Phone":"iPad"===l?i="Tablet":e.is.Android||e.is.iOS||e.is.WindowsPhone||!/Windows|Linux|MacOS|ChromeOS/.test(t)?i=e.is.iPad||e.is.RIMTablet||e.is.Android3||Ext.browser.is.Silk||e.is.Android&&-1===r.search(/mobile/i)?"Tablet":"Phone":(i="Desktop",Ext.browser.is.WebView=!!Ext.browser.is.Ripple),"Tablet"===i&&"MacOS"===t&&(Ext.isiOS=!0,Ext.isiPadOS=!0),e.setFlag(i,!0),e.deviceType=i,delete o.prototype.flags}(),Ext.feature={has:function(e){return!!this.has[e]},testElements:{},getTestElement:function(e,t){if(void 0===e)e="div";else if("string"!=typeof e)return e;return t?document.createElement(e):(this.testElements[e]||(this.testElements[e]=document.createElement(e)),this.testElements[e])},isStyleSupported:function(e,t){var i=this.getTestElement(t).style,n=Ext.String.capitalize(e);return void 0!==i[e]||void 0!==i[Ext.browser.getStylePrefix(e)+n]},isStyleSupportedWithoutPrefix:function(e,t){return void 0!==this.getTestElement(t).style[e]},isEventSupported:function(e,t){void 0===t&&(t=window);var i=this.getTestElement(t),n="on"+e.toLowerCase(),r=n in i;return r||i.setAttribute&&i.removeAttribute&&(i.setAttribute(n,""),r="function"==typeof i[n],void 0!==i[n]&&(i[n]=void 0),i.removeAttribute(n)),r},getStyle:function(e,t){var i=e.ownerDocument.defaultView;return((i?i.getComputedStyle(e,null):e.currentStyle)||e.style)[t]},getSupportedPropertyName:function(e,t){var i=Ext.browser.getVendorProperyName(t);return i in e?i:t in e?t:null},detect:function(e){var t,i,n,r,o,a=this,s=document,l=a.toRun||a.tests,d=l.length,u=s.createElement("div"),c=[],h=Ext.supports,f=a.has;for(u.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>',e&&s.body.appendChild(u),r=a.preDetected[Ext.browser.identity]||[];d--;){if(n=l[d],o=r[d],t=n.name,i=n.names,void 0===o){if(!e&&n.ready){c.push(n);continue}o=n.fn.call(a,s,u)}if(t)h[t]=f[t]=o;else if(i)for(;i.length;)h[t=i.pop()]=f[t]=o}e&&s.body.removeChild(u),a.toRun=c},report:function(){var e,t=[],i=this.tests.length;for(e=0;e<i;++e)t.push(this.has[this.tests[e].name]?1:0);Ext.log(Ext.browser.identity+": ["+t.join(",")+"]")},preDetected:{},tests:[{name:"CloneNodeCopiesExpando",fn:function(){var e=document.createElement("div");return e.expandoProp={},e.cloneNode().expandoProp===e.expandoProp}},{name:"CSSPointerEvents",fn:function(e){return"pointerEvents"in e.documentElement.style}},{name:"CSS3BoxShadow",fn:function(e){return"boxShadow"in e.documentElement.style||"WebkitBoxShadow"in e.documentElement.style||"MozBoxShadow"in e.documentElement.style}},{name:"CSS3NegationSelector",fn:function(e){try{e.querySelectorAll("foo:not(bar)")}catch(e){return!1}return!0}},{name:"ClassList",fn:function(e){return!!e.documentElement.classList}},{name:"Canvas",fn:function(){var e=this.getTestElement("canvas");return!!(e&&e.getContext&&e.getContext("2d"))}},{name:"Svg",fn:function(e){return!(!e.createElementNS||!e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var e,t=this.getTestElement();return t.innerHTML="\x3c!--[if vml]><br><![endif]--\x3e",e=1===t.childNodes.length,t.innerHTML="",e}},{name:"Touch",fn:function(){var e=navigator.msMaxTouchPoints||navigator.maxTouchPoints;return Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)?Ext.supports.TouchEvents&&1!==e||1<e:Ext.supports.TouchEvents||0<e}},{name:"PointerEvents",fn:function(){var e=window.PointerEvent,t=window.navigator;return!(!e||!t.pointerEnabled&&Ext.isIE)&&!Ext.supports.TouchEvents}},{name:"MSPointerEvents",fn:function(){return Ext.isIE10}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"TouchAction",ready:!0,fn:function(e,t){if(!window.getComputedStyle)return 0;var i,n,r=["pan-x","pan-y","pinch-zoom","double-tap-zoom"],o=[1,2,4,8],a=r.length,s=0;for(i=0;i<a;i++)n=r[i],t.style.touchAction=n,getComputedStyle(t).touchAction===n&&(s|=o[i]);return s}},{name:"Orientation",fn:function(){return"orientation"in window&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation"in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase"in window}},{name:"WebSockets",fn:function(){return"WebSocket"in window}},{name:"Range",fn:function(){return!!document.createRange}},{name:"CreateContextualFragment",fn:function(){var e=!!document.createRange&&document.createRange();return e&&!!e.createContextualFragment}},{name:"History",fn:function(){return"history"in window&&"pushState"in window.history}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return!!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return!!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage"in window&&null!==window.localStorage)return localStorage.setItem("sencha-localstorage-test","test success"),localStorage.removeItem("sencha-localstorage-test"),!0}catch(e){}return!1}},{name:"XmlQuerySelector",fn:function(){var e,t='<?xml version="1.0" encoding="UTF-8" standalone="yes" ?><root></root>';if(window.ActiveXObject)(e=new ActiveXObject("Microsoft.xmlDOM")).async=!1,e.loadXML(t);else if(window.DOMParser){e=(new DOMParser).parseFromString(t,"text/xml")}return!!e&&!!e.lastChild.querySelector}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}},{name:"XHRUploadProgress",fn:function(){var e;return!(!window.XMLHttpRequest||Ext.browser.is.AndroidStock)&&((e=new XMLHttpRequest)&&"upload"in e&&"onprogress"in e.upload)}},{name:"NumericInputPlaceHolder",fn:function(){return!(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"matchesSelector",fn:function(){var e=document.documentElement,t="matches",i="webkitMatchesSelector",n="msMatchesSelector",r="mozMatchesSelector";return e[t]?t:e[i]?i:e[n]?n:e[r]?r:null}},{name:"RightMargin",ready:!0,fn:function(e,t){var i=e.defaultView;return!(i&&"0px"!==i.getComputedStyle(t.firstChild.firstChild,null).marginRight)}},{name:"DisplayChangeInputSelectionBug",fn:function(){var e=Ext.webKitVersion;return 0<e&&e<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var e=Ext.webKitVersion;return 0<e&&e<534.24}},{name:"TransparentColor",ready:!0,fn:function(e,t,i){return!((i=e.defaultView)&&"transparent"!==i.getComputedStyle(t.lastChild,null).backgroundColor)}},{name:"ComputedStyle",ready:!0,fn:function(e,t,i){return!(!(i=e.defaultView)||!i.getComputedStyle)}},{name:"Float",fn:function(e){return"cssFloat"in e.documentElement.style}},{name:"CSS3BorderRadius",ready:!0,fn:function(e){var t,i=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],n=!1;for(t=0;t<i.length;t++)void 0!==e.documentElement.style[i[t]]&&(n=!0);return n&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(e,t){var i="background-image:",n="linear-gradient(left top, black, white)",r=[i+"-webkit-gradient(linear, left top, right bottom, from(black), to(white))",i+n,i+"-moz-linear-gradient(left top, black, white)",i+"-ms-linear-gradient(left top, black, white)",i+"-o-linear-gradient(left top, black, white)"];return t.style.cssText=r.join(";"),-1!==(""+t.style.backgroundImage).indexOf("gradient")&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(e){return"onmouseenter"in e.documentElement&&"onmouseleave"in e.documentElement}},{name:"MouseWheel",fn:function(e){return"onmousewheel"in e.documentElement}},{name:"Opacity",fn:function(e,t){return!Ext.isIE8&&(t.firstChild.style.cssText="opacity:0.73","0.73"==t.firstChild.style.opacity)}},{name:"Placeholder",fn:function(e){return"placeholder"in e.createElement("input")}},{name:"Direct2DBug",fn:function(e){return Ext.isString(e.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(e){return"getBoundingClientRect"in e.documentElement}},{name:"RotatedBoundingClientRect",ready:!0,fn:function(e){var t=e.body,i=!1,n=e.createElement("div"),r=n.style;return n.getBoundingClientRect&&(r.position="absolute",r.top="0",r.WebkitTransform=r.MozTransform=r.msTransform=r.OTransform=r.transform="rotate(90deg)",r.width="100px",r.height="30px",t.appendChild(n),i=100!==n.getBoundingClientRect().height,t.removeChild(n)),i}},{name:"ChildContentClearedWhenSettingInnerHTML",ready:!0,fn:function(){var e,t=this.getTestElement();return t.innerHTML="<div>a</div>",e=t.firstChild,t.innerHTML="<div>b</div>","a"!==e.innerHTML}},{name:"IncludePaddingInWidthCalculation",ready:!0,fn:function(e,t){return 210===t.childNodes[1].firstChild.offsetWidth}},{name:"IncludePaddingInHeightCalculation",ready:!0,fn:function(e,t){return 210===t.childNodes[1].firstChild.offsetHeight}},{name:"TextAreaMaxLength",fn:function(e){return"maxlength"in e.createElement("textarea")}},{name:"GetPositionPercentage",ready:!0,fn:function(e,t){return"10%"===Ext.feature.getStyle(t.childNodes[2],"left")}},{name:"PercentageHeightOverflowBug",ready:!0,fn:function(e){var t,i,n=!1;return Ext.getScrollbarSize().height&&((t=(i=this.getTestElement("div",!0)).style).height="50px",t.width="50px",t.overflow="auto",t.position="absolute",i.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join(""),e.body.appendChild(i),50===i.firstChild.offsetHeight&&(n=!0),e.body.removeChild(i)),n}},{name:"xOriginBug",ready:!0,fn:function(e,t){t.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var i=document.getElementById("b1").getBoundingClientRect(),n=document.getElementById("b2").getBoundingClientRect(),r=document.getElementById("b3").getBoundingClientRect();return n.left!==i.left&&r.right!==i.right}},{name:"ScrollWidthInlinePaddingBug",ready:!0,fn:function(e){var t,i,n=!1;return(t=(i=e.createElement("div")).style).height="50px",t.width="50px",t.padding="10px",t.overflow="hidden",t.position="absolute",i.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>',e.body.appendChild(i),70===i.scrollWidth&&(n=!0),e.body.removeChild(i),n}},{name:"rtlVertScrollbarOnRight",ready:!0,fn:function(e,t){t.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var i=t.firstChild,n=i.firstChild;return n.offsetLeft+n.offsetWidth!==i.offsetLeft+i.offsetWidth}},{name:"rtlVertScrollbarOverflowBug",ready:!0,fn:function(e,t){t.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var i=t.firstChild,n=t.style,r=n.position;return n.position="absolute",i.offsetHeight,n.position=r,i.clientHeight===i.offsetHeight}},{identity:"defineProperty",fn:function(){return!Ext.isIE8m||(Ext.Object.defineProperty=Ext.emptyFn,!1)}},{identify:"nativeXhr",fn:function(){return"undefined"!=typeof XMLHttpRequest||!(XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return null}})}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?525<=parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10):!(!(Ext.isGecko||Ext.isIE||Ext.isEdge)||Ext.isOpera&&Ext.operaVersion<12)}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var e=document.documentMode;return"onhashchange"in window&&(void 0===e||7<e)}},{name:"FixedTableWidthBug",ready:!0,fn:function(){if(Ext.isIE8)return!1;var e,t=document.createElement("div"),i=document.createElement("div");return t.setAttribute("style","display:table;table-layout:fixed;"),i.setAttribute("style","display:table-cell;min-width:50px;"),t.appendChild(i),document.body.appendChild(t),t.offsetWidth,t.style.width="25px",e=t.offsetWidth,document.body.removeChild(t),50===e}},{name:"FocusinFocusoutEvents",fn:function(){return!(Ext.isGecko&&Ext.firefoxVersion<52)}},{name:"AsyncFocusEvents",fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:"accessibility",ready:!0,fn:function(e){var t,i,n,r,o,a=e.body;function s(e){var t,i,n=[],r=0;-1!==e.indexOf("rgb(")?n=e.replace("rgb(","").replace(")","").split(", "):-1!==e.indexOf("#")&&(t=7===e.length?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/,(i=e.match(t))&&(n=["0x"+i[1],"0x"+i[2],"0x"+i[3]]));for(var o=0;o<n.length;o++)r+=parseInt(n[o]);return r}return t=e.createElement("div"),i=e.createElement("img"),n=t.style,Ext.apply(n,{width:"2px",position:"absolute",clip:"rect(1px,1px,1px,1px)",borderWidth:"1px",borderStyle:"solid",borderTopTolor:"#f00",borderRightColor:"#ff0",backgroundColor:"#fff",backgroundImage:"url("+Ext.BLANK_IMAGE_URL+")"}),i.alt="",i.src=Ext.BLANK_IMAGE_URL,t.appendChild(i),a.appendChild(t),o=(n=t.currentStyle||t.style).backgroundImage,r={Images:1===i.offsetWidth&&"uninitialized"!==i.readyState,BackgroundImages:!(null!==o&&("none"===o||"url(invalid-url:)"===o)),BorderColors:n.borderTopColor!==n.borderRightColor,LightOnDark:0<s(n.color)-s(n.backgroundColor)},Ext.supports.HighContrastMode=!r.BackgroundImages,a.removeChild(t),t=i=null,r}},{name:"ViewportUnits",ready:!0,fn:function(e){if(Ext.isIE8)return!1;var t,i,n=e.body,r=document.createElement("div"),o=r.currentStyle||r.style;return n.appendChild(r),Ext.apply(o,{width:"50vw"}),t=parseInt(window.innerWidth/2,10),i=parseInt((window.getComputedStyle?getComputedStyle(r,null):r.currentStyle).width,10),n.removeChild(r),r=null,t===i}},{name:"CSSVariables",ready:!1,fn:function(){return!!window.getComputedStyle&&(window.CSS&&window.CSS.supports&&window.CSS.supports("--test-var",0))}},{name:"Selectors2",ready:!1,fn:function(e){try{return!!e.querySelectorAll(":scope")}catch(e){return!1}}},{name:"CSSScrollSnap",ready:!1,fn:function(e){var t=e.documentElement.style;return"scrollSnapType"in t||"webkitScrollSnapType"in t||"msScrollSnapType"in t}},{name:"TranslateYCausesHorizontalScroll",ready:!0,fn:function(e,t){return t.innerHTML='<div style="position: relative; overflow: auto; height: 200px; width: 200px;"><div><div style="transform: translateY(260px); width: 50px;">a</div></div></div>',t.firstChild.scrollWidth>t.firstChild.clientWidth}},{name:"FlexBoxBasisBug",ready:!0,fn:function(){return!!(Ext.isIE11||Ext.os.is.iOS&&Ext.os.version.major<=10||Ext.isSafari&&Ext.browser.version.isLessThan(11)||Ext.os.is.Android&&Ext.os.version.isLessThan(6))}},{name:"PercentageSizeFlexBug",ready:!0,fn:function(e,t){if(Ext.isIE9m)return!1;var i=t.style;return i.display="flex",i.flexDirection="column",i.height=i.width="100px",t.innerHTML='<div style="flex: 1 1;"><div style="height:50%"></div></div>',50!==t.firstChild.firstChild.offsetHeight}},{name:"CannotScrollExactHeight",fn:function(){return Ext.isIE10p}},{name:"WebKitInputTableBoxModelBug",ready:!0,fn:function(e,t){var i,n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("input"),a=n.style,s=r.style,l=o.style,d=e.body;return o.type="text",a.display="table",a.height="100px",s.display="table-cell",l.border="0",l.padding="10px",l.boxSizing="border-box",l.height="100%",r.appendChild(o),n.appendChild(r),d.appendChild(n),i=80===o.offsetHeight,d.removeChild(n),i}},{name:"PassiveEventListener",fn:function(e,t){var i,n=!1;try{i=Object.defineProperty({},"passive",{get:function(){n=!0}}),window.addEventListener("e",null,i),window.removeEventListener("e",null,i)}catch(e){}return n}},{name:"CSSMinContent",ready:!0,fn:function(e,t){return t.innerHTML='<div style="height:4px;width:4px;min-height:-webkit-min-content;min-height:-moz-min-content;min-height:min-content"><div style="height:8px;width:8px"></div></div>',8===t.firstChild.offsetHeight}},{name:"ComputedSizeIncludesPadding",ready:!0,fn:function(e,t){var i,n=!1,r=document.body;return window.getComputedStyle&&((i=document.createElement("div")).style.cssText="width:10px;padding:2px;-webkit-box-sizing:border-box;box-sizing:border-box;",r.appendChild(i),n="10px"===window.getComputedStyle(i,null).width,r.removeChild(i)),n}},{name:"inputEventData",ready:!1,fn:function(){return!!(window.InputEvent&&"data"in new InputEvent("input"))}},0]},Ext.feature.tests.pop(),Ext.supports={},Ext.feature.detect(),Ext.env.Ready={blocks:0<(location.search||"").indexOf("ext-pauseReadyFire")?1:0,bound:0,delay:1,events:[],firing:!1,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var e=Ext.env.Ready,t=document;e.bound||("complete"===t.readyState?e.onReadyEvent({type:t.readyState||"body"}):(e.bound=1,Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop&&(e.bound=2,t.addEventListener("deviceready",e.onReadyEvent,!1)),t.addEventListener("DOMContentLoaded",e.onReadyEvent,!1),window.addEventListener("load",e.onReadyEvent,!1)))},block:function(){++this.blocks,Ext.isReady=!1},fireReady:function(){var e=Ext.env.Ready;e.state||(Ext._readyTime=Ext.ticks(),Ext.isDomReady=!0,e.state=1,Ext.feature.detect(!0),e.delay?navigator.standalone?e.timer=Ext.defer(function(){e.timer=null,e.handleReadySoon()},1):e.handleReadySoon():e.handleReady())},handleReady:function(){1===this.state&&(this.state=2,Ext._beforeReadyTime=Ext.ticks(),this.invokeAll(),Ext._afterReadyTime=Ext.ticks())},handleReadySoon:function(e){var t=this;t.timer||(t.timer=Ext.defer(function(){t.timer=null,t.handleReady()},e||t.delay))},invoke:function(e){var t=e.delay;t?Ext.defer(e.fn,t,e.scope):Ext.elevateFunction?Ext.elevateFunction(e.fn,e.scope):e.fn.call(e.scope)},invokeAll:function(){Ext.elevateFunction?Ext.elevateFunction(this.doInvokeAll,this):this.doInvokeAll()},doInvokeAll:function(){var e,t=this,i=t.listeners;for(t.blocks||(Ext.isReady=!0),t.firing=!0;i.length;){if(t.sortGeneration!==t.generation&&(t.sortGeneration=t.generation,i.sort(t.sortFn)),e=i.pop(),t.blocks&&!e.dom){i.push(e);break}t.invoke(e)}t.firing=!1},makeListener:function(e,t,i){var n={fn:e,id:++this.nextId,scope:t,dom:!1,priority:0};return i&&Ext.apply(n,i),n.phase=n.dom?0:1,n},on:function(e,t,i){var n=Ext.env.Ready,r=n.makeListener(e,t,i);2!==n.state||n.firing||!r.dom&&n.blocks?(n.listeners.push(r),++n.generation,n.bound||n.bind()):n.invoke(r)},onReadyEvent:function(e){var t=Ext.env.Ready;Ext.elevateFunction?Ext.elevateFunction(t.doReadyEvent,t,arguments):t.doReadyEvent(e)},doReadyEvent:function(e){var t=this;e&&e.type&&t.events.push(e),0<t.bound&&(t.unbind(),t.bound=-1),t.state||t.fireReady()},sortFn:function(e,t){return-(e.phase-t.phase||t.priority-e.priority||e.id-t.id)},unblock:function(){var e=this;e.blocks&&(--e.blocks||2!==e.state||e.firing||e.invokeAll())},unbind:function(){var e=document;1<this.bound&&e.removeEventListener("deviceready",this.onReadyEvent,!1),e.removeEventListener("DOMContentLoaded",this.onReadyEvent,!1),window.removeEventListener("load",this.onReadyEvent,!1)}},function(){var r=Ext.env.Ready;Ext.isIE9m&&Ext.apply(r,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var t=!0;try{document.documentElement.doScroll("left")}catch(e){t=!1}return t&&document.body?r.onReadyEvent({type:"doScroll"}):r.scrollTimer=Ext.defer(r.pollScroll,20),t},bind:function(){var e,t=document;if(!r.bound){try{e=void 0===window.frameElement}catch(e){}if(e&&t.documentElement.doScroll){if(r.pollScroll())return}else r.pollScroll=Ext.emptyFn;"complete"===t.readyState?r.onReadyEvent({type:"already "+(t.readyState||"body")}):(t.attachEvent("onreadystatechange",r.onReadyStateChange),window.attachEvent("onload",r.onReadyEvent),r.bound=1)}},unbind:function(){document.detachEvent("onreadystatechange",r.onReadyStateChange),window.detachEvent("onload",r.onReadyEvent),Ext.isNumber(r.scrollTimer)&&(Ext.undefer(r.scrollTimer),r.scrollTimer=null)},onReadyStateChange:function(){var e=document.readyState;r.readyStatesRe.test(e)&&r.onReadyEvent({type:e})}}),Ext.onDocumentReady=function(e,t,i){var n={dom:!0};i&&Ext.apply(n,i),r.on(e,t,n)},Ext.onReady=function(e,t,i){r.on(e,t,i)},Ext.onInternalReady=function(e,t,i){r.on(e,t,Ext.apply({priority:1e3},i))},r.bind()}(),Ext.Loader=new function(){var v=this,E=Ext.ClassManager,o=Ext.Boot,e=Ext.Class,c=Ext.env.Ready,t=Ext.Function.alias,b=["extend","mixins","requires"],C={},i=[],a=[],r=[],S={},h={enabled:!0,scriptChainDelay:!1,disableCaching:!0,disableCachingParam:"_dc",paths:E.paths,preserveScripts:!0,scriptCharset:void 0},n={disableCaching:!0,disableCachingParam:!0,preserveScripts:!0,scriptChainDelay:"loadDelay"};Ext.apply(v,{isInHistory:C,isLoading:!1,history:i,config:h,readyListeners:a,optionalRequires:r,requiresMap:S,hasFileLoadError:!1,scriptsLoading:0,classesLoading:{},missingCount:0,missingQueue:{},syncModeEnabled:!1,init:function(){var e,t,i,n,r,o=document.getElementsByTagName("script"),a=o[o.length-1].src,s=a.substring(0,a.lastIndexOf("/")+1),l=Ext._classPathMetadata,d=Ext.Microloader,u=Ext.manifest;if(-1!==a.indexOf("packages/core/src/")?s+="../../":-1!==a.indexOf("/core/src/class/")&&(s+="../../../"),E.getPath("Ext")||E.setPath("Ext",s+"src"),l&&(Ext._classPathMetadata=null,v.addClassPathMappings(l)),u&&(e=u.loadOrder,t=Ext.Boot.baseUrl,e&&u.bootRelative))for(i=e.length,n=0;n<i;n++)(r=e[n]).path=t+r.path,r.canonicalPath=!0;d&&(c.block(),d.onMicroloaderReady(function(){c.unblock()}))},setConfig:Ext.Function.flexSetter(function(e,t){var i=n[e];return"paths"===e?v.setPath(t):(h[e]=t,i&&o.setConfig(!0===i?e:i,t)),v}),getConfig:function(e){return e?h[e]:h},setPath:function(){return E.setPath.apply(E,arguments),v},addClassPathMappings:function(e){return E.setPath(e),v},addBaseUrlClassPathMappings:function(e){var t;for(t in e)e[t]=o.baseUrl+e[t];Ext.Loader.addClassPathMappings(e)},getPath:function(e){return E.getPath(e)},require:function(e,t,i,n){var r;return n?v.exclude(n).require(e,t,i):(r=E.getNamesByExpression(e),v.load(r,t,i))},syncRequire:function(){var e,t=v.syncModeEnabled;return v.syncModeEnabled=!0,e=v.require.apply(v,arguments),v.syncModeEnabled=t,e},exclude:function(e){var t=E.select({require:function(e,t,i){return v.load(e,t,i)},syncRequire:function(e,t,i){var n,r=v.syncModeEnabled;return v.syncModeEnabled=!0,n=v.load(e,t,i),v.syncModeEnabled=r,n}});return t.exclude(e),t},load:function(e,t,i){t&&(t.length&&(t=v.makeLoadCallback(e,t)),t=t.bind(i||Ext.global));var n,r,o,a=E.classState,s=[],l=[],d={},u=e.length;for(r=0;r<u;++r)n=E.resolveName(e[r]),E.isCreated(n)||(s.push(n),a[n]||(d[n]=v.getPath(n),l.push(d[n])));return(o=s.length)?(v.missingCount+=o,E.onCreated(function(){t&&Ext.callback(t,i,arguments),v.checkReady()},v,s),h.enabled||Ext.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+(1<s.length?"es":"")+": "+s.join(", ")),l.length?v.loadScripts({url:l,_classNames:s,_urlByClass:d}):v.checkReady()):(t&&t.call(i),v.checkReady()),v.syncModeEnabled&&1===u?E.get(e[0]):v},makeLoadCallback:function(i,n){return function(){for(var e=[],t=i.length;0<t--;)e[t]=E.get(i[t]);return n.apply(this,e)}},onLoadFailure:function(e){var t,i,n,r=e.entries||[],o=this.onError;if(v.hasFileLoadError=!0,--v.scriptsLoading,o){for(n=0;n<r.length;n++)if((i=r[n]).error){t=new Error("Failed to load: "+i.url);break}t=t||new Error("Failed to load"),o.call(this.userScope,this,t,e)}else Ext.log.error("[Ext.Loader] Some requested files failed to load.");v.checkReady()},onLoadSuccess:function(){var e,t,i,n=this,r=n.onLoad,o=n._classNames,a=n._urlByClass,s=E.classState,l=v.missingQueue;for(--v.scriptsLoading,r&&r.call(n.userScope,n),t=0,i=o.length;t<i;t++)s[e=o[t]]||(l[e]=a[e]);v.checkReady()},reportMissingClasses:function(){var e,t=v.missingQueue,i=[],n=[];if(!v.syncModeEnabled&&!v.scriptsLoading&&v.isLoading&&!v.hasFileLoadError){for(e in t)i.push(e),n.push(t[e]);if(i.length)throw new Error("The following classes are not declared even if their files have been loaded: '"+i.join("', '")+"'. Please check the source code of their corresponding files for possible typos: '"+n.join("', '"))}},onReady:function(e,t,i,n){var r;i?c.on(e,t,n):(r=c.makeListener(e,t,n),v.isLoading?a.push(r):c.invoke(r))},addUsedClasses:function(e){var t,i,n;if(e)for(i=0,n=(e="string"==typeof e?[e]:e).length;i<n;i++)"string"!=typeof(t=e[i])||Ext.Array.contains(r,t)||r.push(t);return v},triggerReady:function(){var e,t=r;if(v.isLoading&&t.length)r=[],v.require(t);else{for(v.isLoading=!1,a.sort(c.sortFn);a.length&&!v.isLoading;)e=a.pop(),c.invoke(e);c.unblock()}},historyPush:function(e){return!e||C[e]||E.overrideMap[e]||(C[e]=!0,i.push(e)),v},loadScripts:function(e){var t,i=Ext.manifest,n=i&&i.loadOrder,r=i&&i.loadOrderMap;++v.scriptsLoading,n&&!r&&(i.loadOrderMap=r=o.createLoadOrderMap(n)),v.checkReady(),(t=Ext.apply({loadOrder:n,loadOrderMap:r,charset:h.scriptCharset,success:v.onLoadSuccess,failure:v.onLoadFailure,sync:v.syncModeEnabled,_classNames:[]},e)).userScope=t.scope,t.scope=t,o.load(t)},loadScriptsSync:function(e){var t=v.syncModeEnabled;v.syncModeEnabled=!0,v.loadScripts({url:e}),v.syncModeEnabled=t},loadScriptsSyncBasePrefix:function(e){var t=v.syncModeEnabled;v.syncModeEnabled=!0,v.loadScripts({url:e,prependBaseUrl:!0}),v.syncModeEnabled=t},loadScript:function(e){var t=!(e instanceof Array)&&!("string"==typeof e),i=t?e.url:e,n=t&&e.onError,r=t&&e.onLoad,o={url:i,scope:t&&e.scope,onLoad:r,onError:n,_classNames:[]};v.loadScripts(o)},checkMissingQueue:function(){var e,t=v.missingQueue,i={},n=0;for(e in t)E.classState[e]||E.isCreated(e)||(i[e]=t[e],n++);v.missingCount=n,v.missingQueue=i},checkReady:function(){var e,t=v.isLoading;v.checkMissingQueue(),(e=v.missingCount+v.scriptsLoading)&&!t?(c.block(),v.isLoading=!!e):!e&&t&&v.triggerReady(),!v.scriptsLoading&&v.missingCount&&Ext.defer(function(){var e;if(!v.scriptsLoading&&v.missingCount)for(e in Ext.log.error("[Loader] The following classes failed to load:"),v.missingQueue)Ext.log.error("[Loader] "+e+" from "+v.missingQueue[e])},1e3)}}),Ext.require=t(v,"require"),Ext.syncRequire=t(v,"syncRequire"),Ext.exclude=t(v,"exclude"),e.registerPreprocessor("loader",function(o,a,s,l){Ext.classSystemMonitor&&Ext.classSystemMonitor(o,"Ext.Loader#loaderPreprocessor",arguments);var e,t,i,n,r,d,u,c,h,f=this,g=[],p=E.getName(o);for(t=0,n=b.length;t<n;t++)if(u=b[t],a.hasOwnProperty(u))if("string"==typeof(c=a[u]))g.push(c);else if(c instanceof Array)for(i=0,r=c.length;i<r;i++)"string"==typeof(d=c[i])&&g.push(d);else if("function"!=typeof c)for(i in c)c.hasOwnProperty(i)&&"string"==typeof(d=c[i])&&g.push(d);if(0!==g.length){p&&(S[p]=g);var m,x=Ext.manifest&&Ext.manifest.classes,y=[];if(p&&(!x||!x[p])){for(h=v.requiredByMap||(v.requiredByMap={}),t=0,n=g.length;t<n;t++)(h[e=g[t]]||(h[e]=[])).push(p);(m=function(e){var t,i,n,r=S[e];if(y.push(e),r)for(Ext.Array.contains(r,p)&&Ext.Error.raise("Circular requirement detected! '"+p+"' and '"+y[1]+"' mutually require each other. Path: "+y.join(" -> ")+" -> "+y[0]),i=0,n=r.length;i<n;i++)t=r[i],C[t]||m(r[i])})(p)}return(p?v.exclude(p):v).require(g,function(){var e,t,i,n,r;for(e=0,t=b.length;e<t;e++)if(u=b[e],a.hasOwnProperty(u))if("string"==typeof(c=a[u]))a[u]=E.get(c);else if(c instanceof Array)for(i=0,n=c.length;i<n;i++)"string"==typeof(d=c[i])&&(a[u][i]=E.get(d));else if("function"!=typeof c)for(r in c)c.hasOwnProperty(r)&&"string"==typeof(d=c[r])&&(a[u][r]=E.get(d));l.call(f,o,a,s)}),!1}},!0,"after","className"),E.registerPostprocessor("uses",function(e,t,i){var n,r=i.uses;Ext.classSystemMonitor&&Ext.classSystemMonitor(t,"Ext.Loader#usesPostprocessor",arguments),r&&(n=E.getNamesByExpression(i.uses),v.addUsedClasses(n))}),E.onCreated(v.historyPush),v.init()},Ext._endTime=Ext.ticks(),Ext._beforereadyhandler&&Ext._beforereadyhandler(),Ext.define("Ext.Mixin",function(f){return{statics:{addHook:function(n,e,t,r){function i(){var e=arguments,t=o?n:r[n],i=this.callParent(e);return t.apply(this,e),i}var o=Ext.isFunction(n),a=e.hasOwnProperty(t)&&e[t];o&&(n.$previous=Ext.emptyFn),i.$name=t,i.$owner=e.self,a?(i.$previous=a.$previous,a.$previous=i):e[t]=i}},onClassExtended:function(e,t){var r,o,a,s,l,i,n=t.mixinConfig,d=t.xhooks,u=e.superclass,c=t.onClassMixedIn,h=t.afterClassMixedIn;d&&(delete t.xhooks,(n||(t.mixinConfig=n={})).on=d),n&&((i=u.mixinConfig)&&(t.mixinConfig=n=Ext.merge({},i,n)),t.mixinId=n.id,n.beforeHooks&&Ext.raise('Use of "beforeHooks" is deprecated - use "before" instead'),n.hooks&&Ext.raise('Use of "hooks" is deprecated - use "after" instead'),n.afterHooks&&Ext.raise('Use of "afterHooks" is deprecated - use "after" instead'),r=n.after,o=n.before,a=n.configs,s=n.extended,d=n.on,l=n.mixed),(r||o||d||s)&&(t.onClassMixedIn=function(i){var e,n=this.prototype,t=i.prototype;if(o&&Ext.Object.each(o,function(e,t){i.hookMember(e,function(){if(!1!==n[t].apply(this,arguments))return this.callParent(arguments)})}),r&&Ext.Object.each(r,function(e,t){i.hookMember(e,function(){var e=this.callParent(arguments);return n[t].apply(this,arguments),e})}),d)for(e in d)f.addHook(d[e],t,e,n);s&&i.onExtended(function(){var e=Ext.Array.slice(arguments,0);return e.unshift(i),s.apply(this,e)},this),c&&c.apply(this,arguments)}),(a||l)&&(t.afterClassMixedIn=function(e){if(a){var t,i,n,r=e.prototype,o=this.$config.configs;for(i in r)(t=o[i])&&t.isConfig&&r.hasOwnProperty(i)&&((n=n||{})[i]=r[i],delete r[i]);n&&e.$config.add(n)}h&&h.apply(this,arguments),l&&l.apply(this,arguments)})}}}),Ext.util=Ext.util||{},Ext.util.DelayedTask=function(r,o,a,s,t){function l(){u.id=null,o&&o.destroyed||(a?r.apply(o,a):r.call(o)),!1===t&&(Ext._suppressIdle=!0)}var d,u=this;r&&(l.$origFn=r.$origFn||r,l.$skipTimerCheck=l.$origFn.$skipTimerCheck),s="boolean"!=typeof s||s,u.id=null,u.delay=function(e,t,i,n){return s&&u.cancel(),"number"==typeof e&&(d=e),r=t||r,o=i||o,a=n||a,u.delayTime=d,r&&(l.$origFn=r.$origFn||r,l.$skipTimerCheck=l.$origFn.$skipTimerCheck),u.id||(u.id=-1===d?Ext.raf(l):Ext.defer(l,d||1)),u.id},u.cancel=function(){u.id&&(-1===u.delayTime?Ext.unraf(u.id):Ext.undefer(u.id),u.id=null)},u.flush=function(){var e;u.id&&(u.cancel(),e=t,t=!0,l(),t=e)},u.stop=function(e,t){!e||e!==r||t&&t!==o||u.cancel()}},Ext.define("Ext.util.Event",function(){var S=Array.prototype.slice,y=Ext.Array.insert,s=Ext.Array.toArray,d={};return{requires:"Ext.util.DelayedTask",isEvent:!0,suspended:0,noOptions:{},constructor:function(e,t){this.name=t,this.observable=e,this.listeners=[]},addListener:function(e,t,i,n,r){var o,a,s,l,d,u,c,h,f,g=this,p=!1,m=g.observable,x=g.name;if(t&&!Ext._namedScopes[t]&&"string"==typeof e&&"function"!=typeof t[e]&&Ext.raise("No method named '"+e+"' found on scope object"),-1===g.findListener(e,t)){if(a=g.createListener(e,t,i,n,r),g.firing&&(g.listeners=g.listeners.slice(0)),h=c=(o=g.listeners).length,s=i&&i.priority,u=void 0!==(d=g._highestNegativePriorityIndex),s)if(!(l=s<0)||u){for(f=l?d:0;f<c;f++)if((o[f].o&&o[f].o.priority||0)<s){h=f;break}}else g._highestNegativePriorityIndex=h;else u&&(h=d);!l&&h<=d&&g._highestNegativePriorityIndex++,h===c?o[c]=a:y(o,h,[a]),m.isElement&&m._getPublisher(x,!1===i.translate).subscribe(m,x,!1!==i.delegated,i.capture),r&&(r.managedListeners||(r.managedListeners=[])).push({item:g.observable,ename:i&&i.managedName||g.name,fn:e,scope:t,options:i}),p=!0}return p},createListener:function(e,t,i,n,r){var o,a=this,s=Ext._namedScopes,l=s[t],d={fn:e,scope:t,ev:a,caller:n,manager:r,namedScope:l,defaultScope:l?t||a.observable:void 0,lateBound:"string"==typeof e},u=e,c=!1;return d.lateBound&&"."===e[2]&&("up"!==e.substr(0,2)&&Ext.raise("Invalid listener method: "+e),d.defaultScope=null,d.namedScope=s[d.scope=t="up"],d.fn=u=e.substr(3)),i&&((d.o=i).single&&(u=a.createSingle(u,d,i,t),c=!0),i.target&&(u=a.createTargeted(u,d,i,t,c),c=!0),i.onFrame&&(u=a.createAnimFrame(u,d,i,t,c),c=!0),i.delay&&(u=a.createDelayed(u,d,i,t,c),c=!0),i.buffer&&(u=a.createBuffered(u,d,i,t,c),c=!0),a.observable.isElement&&(o=i.type)&&(d.type=o)),d.fireFn=u,d.wrapped=c,d},findListener:function(e,t){for(var i,n=this.listeners,r=n.length;r--;)if((i=n[r])&&i.fn===e&&i.scope==t)return r;return-1},removeListener:function(e,t,i){var n,r,o,a,s,l,d=this,u=!1,c=d.observable,h=d.name;if(-1!==(i=null!=i?i:d.findListener(e,t))){if(n=d.listeners[i],d.firing&&(d.listeners=d.listeners.slice(0)),d.listeners.splice(i,1),d._highestNegativePriorityIndex&&(i<d._highestNegativePriorityIndex?d._highestNegativePriorityIndex--:i===d._highestNegativePriorityIndex&&i===d.listeners.length&&delete d._highestNegativePriorityIndex),n){if(r=n.o,n.task&&(n.task.cancel(),delete n.task),l=n.tasks&&n.tasks.length){for(;l--;)n.tasks[l].cancel();delete n.tasks}if(n.fireFn.timerId=Ext.undefer(n.fireFn.timerId),(o=n.manager)&&(a=o.managedListeners))for(l=a.length;l--;)(s=a[l]).item===d.observable&&s.ename===h&&s.fn===e&&s.scope===t&&a.splice(l,1);c.isElement&&c._getPublisher(h,!1===r.translate).unsubscribe(c,h,!1!==r.delegated,r.capture)}u=!0}return u},clearListeners:function(){for(var e,t=this.listeners,i=t.length;i--;)e=t[i],this.removeListener(e.fn,e.scope)},suspend:function(){++this.suspended},resume:function(){this.suspended&&--this.suspended},isSuspended:function(){return 0<this.suspended},fireDelegated:function(e,t){return this.firingObservable=e,this.fire.apply(this,t)},fire:function(){var e,t,i,n,r,o,a,s,l,d,u,c,h,f,g,p=this,m=Ext.ComponentQuery,x=p.listeners,y=x.length,v=p.observable,E=v.isElement,b=v.isComponent,C=p.firingObservable;if(!p.suspended&&0<y)for(p.firing=!0,a=(r=arguments.length?S.call(arguments,0):[]).length,E&&(h=r[0]),n=0;n<y;n++)if(o=x[n]){if(e=o.o,E&&(l&&h.setCurrentTarget(l),(d=o.type)&&(u=h,h=r[0]=u.chain({type:d,isGesture:!1})),Ext.EventObject=h),c=r,e){if(t=e.delegate)if(E){if(!(s=h.getTarget("function"==typeof t?t:"#"+h.currentTarget.id+" "+t)))continue;r[1]=s,l=h.currentTarget,h.setCurrentTarget(s)}else if(b&&!m.is(C,t,v))continue;E&&(e.preventDefault&&h.preventDefault(),e.stopPropagation&&h.stopPropagation(),e.stopEvent&&h.stopEvent()),(r[a]=e).args&&(c=e.args.concat(r))}if(f=(i=p.getFireInfo(o)).fn,g=i.scope,i.fn=i.scope=null,g&&g.destroyed&&(p.removeListener(f,g,n),f=null,"Ext.container.Monitor"!==g.$className&&(Ext.raiseOnDestroyed?Ext.raise:Ext.log.warn)({msg:'Attempting to fire "'+p.name+'" event on destroyed '+(g.$className||"object")+" instance with id: "+(g.id||"unknown"),instance:g})),f&&!1===f.apply(g,c))return Ext.EventObject=null,p.firing=!1;e&&r.length--,u&&(h=r[0]=u,u=null),Ext.EventObject=null}return!(p.firing=!1)},getFireInfo:function(e,t){var i,n,r=this.observable,o=e.fireFn,a=e.scope,s=e.namedScope;if(!t&&e.wrapped)return d.fn=o,d;var l=i=t?e.fn:o;return e.lateBound?(n=e.caller||r,s&&s.isUp?a=Ext.lookUpFn(n,i):a&&!s||(a=n.resolveListenerScope(e.defaultScope)),a||Ext.raise('Unable to dynamically resolve scope for "'+e.ev.name+'" listener on '+this.observable.id),Ext.isFunction(a[i])||Ext.raise('No method named "'+i+'" on '+(a.$className||"scope object.")),i=a[i]):s&&s.isController?(a=(e.caller||r).resolveListenerScope(e.defaultScope))||Ext.raise('Unable to dynamically resolve scope for "'+e.ev.name+'" listener on '+this.observable.id):a&&!s||(a=r),d.fn=i,d.scope=a,i||Ext.raise('Unable to dynamically resolve method "'+l+'" on '+this.observable.$className),d},createAnimFrame:function(e,t,i,n,r){var o;return r||(e=(o=t.ev.getFireInfo(t,!0)).fn,n=o.scope,o.fn=o.scope=null),Ext.Function.createAnimationFrame(e,n,i.args)},createTargeted:function(t,i,n,r,o){return function(){var e;if(n.target===arguments[0])return o||(e=i.ev.getFireInfo(i,!0),t=e.fn,r=e.scope,e.fn=e.scope=null),t.apply(r,arguments)}},createBuffered:function(t,i,n,r,o){return i.task=new Ext.util.DelayedTask,function(){var e;i.task&&(Ext._unitTesting&&(n.$delayedTask=i.task),o||(e=i.ev.getFireInfo(i,!0),t=e.fn,r=e.scope,e.fn=e.scope=null),i.task.delay(n.buffer,t,r,s(arguments)))}},createDelayed:function(i,n,r,o,a){return function(){var e,t=new Ext.util.DelayedTask;a||(e=n.ev.getFireInfo(n,!0),i=e.fn,o=e.scope,e.fn=e.scope=null),n.tasks||(n.tasks=[]),n.tasks.push(t),Ext._unitTesting&&(r.$delayedTask=t),t.delay(r.delay||10,i,o,s(arguments))}},createSingle:function(r,o,e,a,s){return function(){var e,t=o.ev,i=t.observable,n=o.fn;return i?i.destroyed||i.removeListener(t.name,n,a):t.removeListener(n,a),s||(e=t.getFireInfo(o,!0),r=e.fn,a=e.scope,e.fn=e.scope=null),r.apply(a,arguments)}}}}),Ext.define("Ext.mixin.Identifiable",function(l){return{isIdentifiable:!0,mixinId:"identifiable",getId:function(){var e,t=this,i=t.id;return i||0===i||((e=t.initialConfig)&&e.id?i=e.id:(i=t.generateAutoId(),t.autoGenId=!0),t.setId(i)),t.getId=l._getId,i},setId:function(e){this.id=this.id=e},privates:{statics:{_idCleanRe:/\.|[^\w-]/g,uniqueIds:{},_getId:function(){return this.id}},defaultIdPrefix:"ext-",defaultIdSeparator:"-",id:null,autoGenId:!1,generateAutoId:function(){var e,t,i,n,r=this,o=r.self.prototype,a=r.defaultIdSeparator,s=l.uniqueIds;return o.hasOwnProperty("identifiablePrefix")||(e=l._idCleanRe,t=r.defaultIdPrefix,i=(n=r.xtype)?t+n.replace(e,a)+a:(i=o.$className)?i.replace(e,a).toLowerCase()+a:t+"anonymous"+a,o.identifiablePrefix=i),i=r.identifiablePrefix,s.hasOwnProperty(i)||(s[i]=0),i+ ++s[i]}}}}),Ext.define("Ext.mixin.Observable",function(f){var u=Ext.emptyFn,o=[],n=Array.prototype.slice,g=function(e){if(e instanceof g)return e;this.observable=e,arguments[1].isObservable&&(this.managedListeners=!0),this.args=n.call(arguments,1)},p=["events","hasListeners","managedListeners","eventedBeforeEventNames"];return g.prototype.destroy=function(){var e=this,t=e.args,i=e.observable,n=t[0].element||t[3]&&t[3].element;n&&(-1===Ext.Array.indexOf(i.referenceList,n)&&Ext.Logger.error("Destroying event listener with an invalid element reference of '"+n+"' for this component. Available values are: '"+i.referenceList.join("', '")+"'",i),i=i[n]),i.destroyed||i[e.managedListeners?"mun":"un"].apply(i,e.args),e.destroy=Ext.emptyFn},{extend:"Ext.Mixin",mixinConfig:{id:"observable",after:{destroy:"destroyObservable"}},requires:["Ext.util.Event"],mixins:["Ext.mixin.Identifiable"],statics:{releaseCapture:function(e){e.fireEventArgs=this.prototype.fireEventArgs},capture:function(e,i,n){this.captureArgs(e,function(e,t){return i.apply(n,[e].concat(t))},n)},captureArgs:function(e,t,i){e.fireEventArgs=Ext.Function.createInterceptor(e.fireEventArgs,t,i)},observe:function(e,t){return e&&(e.isObservable||(Ext.applyIf(e,new this),this.captureArgs(e.prototype,e.fireEventArgs,e)),Ext.isObject(t)&&e.on(t)),e},prepareClass:function(e,t,i){var n,r,o,a,s=e.listeners=[],l=i||e.prototype,d=l.listeners,u=t?t.listeners:e.superclass.self.listeners;if(u&&s.push(u),d&&((n=d.scope)?(r=Ext._namedScopes[n])&&r.isController&&(d.scope="self.controller"):d.scope="self",s.push(d),l.listeners=null),!e.HasListeners){function c(){}var h=e.superclass.HasListeners||t&&t.HasListeners||f.HasListeners;e.prototype.HasListeners=e.HasListeners=c,c.prototype=e.hasListeners=new h}for(n=e.prototype.$noClearOnDestroy||{},o=0,a=p.length;o<a;o++)n[p[o]]=!0;e.prototype.$noClearOnDestroy=n}},isObservable:!0,$vetoClearingPrototypeOnDestroy:!0,eventsSuspended:0,constructor:function(e){var t,i,n,r,o,a=this,s=a.self;if(!a.$observableInitialized){if(a.$observableInitialized=!0,a.hasListeners=a.hasListeners=new a.HasListeners,a.eventedBeforeEventNames={},a.events=a.events||{},(t=s.listeners)&&!a._addDeclaredListeners(t)&&(s.listeners=null),i=e&&e.listeners||a.listeners)if(i instanceof Array)for(o=0,r=i.length;o<r;++o)a.addListener(i[o]);else a.addListener(i);(n=e&&e.bubbleEvents||a.bubbleEvents)&&a.enableBubble(n),a.$applyConfigs?e&&Ext.apply(a,e):a.initConfig(e),i&&(a.listeners=null)}},onClassExtended:function(e,t){e.HasListeners||f.prepareClass(e,e.prototype.$observableMixedIn?void 0:t)},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(e){var t=this;return e instanceof Array?Ext.each(e,t._addDeclaredListeners,t):(t._addedDeclaredListeners=!0,t.addListener(e)),t._addedDeclaredListeners},addManagedListener:function(e,t,i,n,r,o){var a,s,l=this;if(l.managedListeners=l.managedListeners||[],"string"!=typeof t){for(t in s=4<arguments.length?r:t,r=t)r.hasOwnProperty(t)&&(a=r[t],e.$eventOptions[t]||l.addManagedListener(e,t,a.fn||a,a.scope||r.scope||n,a.fn?a:s,!0));if(r&&r.destroyable)return new g(l,e,r)}else if(i!==u&&(e.doAddListener(t,i,n,r,null,l,l),!o&&r&&r.destroyable))return new g(l,e,t,i,n)},removeManagedListener:function(e,t,i,n){var r,o,a,s,l;if(!e.$observableDestroyed)if("string"!=typeof t)for(t in r=t)r.hasOwnProperty(t)&&(o=r[t],e.$eventOptions[t]||this.removeManagedListener(e,t,o.fn||o,o.scope||r.scope||n));else for(a=this.managedListeners?this.managedListeners.slice():[],t=Ext.canonicalEventName(t),l=0,s=a.length;l<s;l++)this.removeManagedListenerItem(!1,a[l],e,t,i,n)},fireEvent:function(e){return this.fireEventArgs(e,n.call(arguments,1))},resolveListenerScope:function(e){var t=Ext._namedScopes[e];return t&&(t.isController&&Ext.raise('scope: "controller" can only be specified on classes that derive from Ext.Component or Ext.Widget'),(t.isSelf||t.isThis)&&(e=null)),e||this},fireEventArgs:function(e,t){var i,n=this.events,r=!0;return e=Ext.canonicalEventName(e),i=n&&n[e],this.hasListeners[e]&&(r=this.doFireEvent(e,t||o,!!i&&i.bubble)),r},fireAction:function(e,t,i,n,r,o){"string"!=typeof i||n||(i=this[i]),(r=r?Ext.Object.chain(r):{}).single=!0,r.priority="after"===o?-99.5:99.5,this.doAddListener(e,i,n,r),this.fireEventArgs(e,t)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var e,t,i=this,n=i.fn,r=i.scope,o=i.fnArgs;if(!--i._paused){if(n&&(e=Ext.Array.slice(o||i.args),!1===o&&e.shift(),i.fn=null,e.push(i),Ext.isFunction(n)?t=n.apply(r,e):r&&Ext.isString(n)&&Ext.isFunction(r[n])&&(t=r[n].apply(r,e)),!1===t))return!1;if(!i._paused)return i.owner.fireEventArgs(i.eventName,i.args)}}},fireEventedAction:function(e,t,i,n,r){var o,a=this.eventedBeforeEventNames,s=a[e]||(a[e]="before"+e),l=Ext.apply({owner:this,eventName:e,fn:i,scope:n,fnArgs:r,args:t},this.$eventedController);return t.push(l),o=this.fireEventArgs(s,t),t.pop(),!1!==o&&l.resume()},doFireEvent:function(e,t,i){var n,r,o=this,a=!0;do{if(o.eventsSuspended)return(n=o.eventQueue)&&n.push([e,t]),a;if((r=o.events&&o.events[e])&&!0!==r&&!1===(a=r.fire.apply(r,t)))break}while(i&&(o=o.getBubbleParent()));return a},getBubbleParent:function(){var e=this.getBubbleTarget&&this.getBubbleTarget();return e&&e.isObservable?e:null},addListener:function(e,t,i,n,r,o){var a,s,l,d,u,c=this,h=Ext._namedScopes;if("string"!=typeof e){for(e in l=(s=(i=(n=e).scope)&&h[i])&&s.isSelf,u=(c.isComponent||c.isWidget)&&n.element?c.$elementEventOptions:c.$eventOptions,n)a=n[e],u[e]||((d=a.scope)&&l&&(s=h[d])&&s.isController&&(d="self.controller"),c.doAddListener(e,a.fn||a,d||i,a.fn?a:n,r,o));if(n&&n.destroyable)return new g(c,n)}else if(c.doAddListener(e,t,i,n,r,o),n&&n.destroyable)return new g(c,e,t,i,n);return c},removeListener:function(e,t,i,n){var r,o,a=this;if("string"!=typeof e)for(e in o=e,n=n||a.$eventOptions,o)o.hasOwnProperty(e)&&(r=o[e],a.$eventOptions[e]||a.doRemoveListener(e,r.fn||r,r.scope||o.scope));else a.doRemoveListener(e,t,i);return a},onBefore:function(e,t,i,n){return this.addListener(e,t,i,n,"before")},onAfter:function(e,t,i,n){return this.addListener(e,t,i,n,"after")},unBefore:function(e,t,i,n){return this.removeListener(e,t,i,n,"before")},unAfter:function(e,t,i,n){return this.removeListener(e,t,i,n,"after")},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var e,t,i=this.events,n=this.hasListeners;if(i){for(t in i)i.hasOwnProperty(t)&&(e=i[t]).isEvent&&(delete n[t],e.clearListeners());this.events=null}this.clearManagedListeners()},purgeListeners:function(){return Ext.global.console&&Ext.global.console.warn("Observable: purgeListeners has been deprecated. Please use clearListeners."),this.clearListeners.apply(this,arguments)},clearManagedListeners:function(){var e,t,i=this.managedListeners;if(i){for(this.managedListeners=null,e=0,t=i.length;e<t;e++)this.removeManagedListenerItem(!0,i[e]);i.length=0}this.managedListeners=i},removeManagedListenerItem:function(e,t,i,n,r,o){!e&&(t.item!==i||t.ename!==n||r&&t.fn!==r||o&&t.scope!==o)||(t.item.destroyed||t.item.doRemoveListener(t.ename,t.fn,t.scope,t.options),e||Ext.Array.remove(this.managedListeners,t))},purgeManagedListeners:function(){return Ext.global.console&&Ext.global.console.warn("Observable: purgeManagedListeners has been deprecated. Please use clearManagedListeners."),this.clearManagedListeners.apply(this,arguments)},hasListener:function(e){return e=Ext.canonicalEventName(e),!!this.hasListeners[e]},isSuspended:function(e){var t=0<this.eventsSuspended,i=this.events;return!t&&e&&i&&(e=i[e])&&e.isEvent?e.isSuspended():t},suspendEvents:function(e){++this.eventsSuspended,e&&!this.eventQueue&&(this.eventQueue=[])},suspendEvent:function(){var e,t,i,n=this.events,r=arguments.length;for(e=0;e<r;e++)i=arguments[e],(t=n[i=Ext.canonicalEventName(i)])&&t.isEvent||(t=this._initEvent(i)),t.suspend()},resumeEvent:function(){var e,t,i=this.events||0,n=i&&arguments.length;for(e=0;e<n;e++)(t=i[Ext.canonicalEventName(arguments[e])])&&t.resume&&t.resume()},resumeEvents:function(e){var t,i,n=this,r=n.eventQueue;if(n.eventsSuspended&&!--n.eventsSuspended&&(delete n.eventQueue,!e&&r))for(t=r.length,i=0;i<t;i++)n.fireEventArgs.apply(n,r[i])},relayEvents:function(e,t,i){var n,r,o=t.length,a=0,s={};if(Ext.isObject(t))for(a in t)r=t[a],s[a]=this.createRelayer(r);else for(;a<o;a++)s[n=t[a]]=this.createRelayer(i?i+n:n);return this.mon(e,s,null,null,void 0),new g(this,e,s)},createRelayer:function(e,t){var i=this;return function(){return i.fireEventArgs.call(i,e,t?n.apply(arguments,t):arguments)}},enableBubble:function(e){if(e){var t,i,n,r="string"==typeof e?arguments:e,o=this.events,a=o&&r.length;for(n=0;n<a;++n)t=r[n],(i=o[t=Ext.canonicalEventName(t)])&&i.isEvent||(i=this._initEvent(t)),this.hasListeners._incr_(t),i.bubble=!0}},destroy:function(){this.clearListeners(),this.callParent(),this.destroyObservable(!0)},destroyObservable:function(e){var t=this,i=t.clearPropertiesOnDestroy;t.$observableDestroyed||(e||t.clearListeners(),t.destroyed&&(i&&(!0!==i||t.$nulled||t.$reap(),t.clearPrototypeOnDestroy||(t.fireEvent=t.fireEventArgs=t.fireAction=t.fireEventedAction=Ext.emptyFn),t.events=t.managedListeners=t.eventedBeforeEventNames=null,t.$observableDestroyed=!0),t.clearPrototypeOnDestroy&&Object.setPrototypeOf&&!t.$alreadyNulled&&(Object.setPrototypeOf(t,null),t.$alreadyNulled=!0)))},privates:{doAddListener:function(e,t,i,n,r,o,a){var s,l=this,d=!1;return(r=r||n&&n.order)&&(n&&n.priority||((n=n?Ext.Object.chain(n):{}).priority=l.$orderToPriority[r])),e=Ext.canonicalEventName(e),t||Ext.raise("Cannot add '"+e+"' listener to "+l.$className+" instance.  No function specified."),(s=(l.events||(l.events={}))[e])&&s.isEvent||(s=l._initEvent(e)),t!==u&&(!a&&i&&i.isObservable&&i!==l&&(a=i),s.addListener(t,i,n,o,a)&&(l.hasListeners._incr_(e),d=!0)),d},doRemoveListener:function(e,t,i){var n,r=!1,o=this.events;return e=Ext.canonicalEventName(e),n=o&&o[e],t||Ext.raise("Cannot remove '"+e+"' listener to "+this.$className+" instance.  No function specified."),n&&n.isEvent&&n.removeListener(t,i)&&(this.hasListeners._decr_(e),r=!0),r},_initEvent:function(e){return this.events[e]=new Ext.util.Event(this,e)}},deprecated:{"5.0":{methods:{addEvents:null}}}}},function(){function e(){}var i=this,t=i.prototype,n=function(e){var t=e.prototype;e.HasListeners||(t.$observableMixedIn=1,i.prepareClass(e,this),e.onExtended(function(e,t){Ext.classSystemMonitor&&Ext.classSystemMonitor("extend mixin",arguments),i.prepareClass(e,null,t)}),t.onClassMixedIn?Ext.override(e,{onClassMixedIn:function(e){n.call(this,e),this.callParent(arguments)}}):t.onClassMixedIn=function(e){n.call(this,e)}),r.call(this,e)},r=t.onClassMixedIn;function a(e){var o,a,s,l,d=(this.methodEvents=this.methodEvents||{})[e],u=this;return d||(u.methodEvents[e]=d={},d.originalFn=u[e],d.methodName=e,d.before=[],d.after=[],l=function(e,t,i){t=t||u,"string"==typeof e&&(e=t[e]),void 0!==(a=e.apply(t,i))&&("object"==typeof a?(o=void 0!==a.returnValue?a.returnValue:a,s=!!a.cancel):!1===a?s=!0:o=a)},u[e]=function(){var e,t,i,n=Array.prototype.slice.call(arguments,0),r=n.length;for(o=a=void 0,s=!1,t=0,i=d.before.length;t<i;t++)if((e=d.before[t]).extraArgs&&n.push.apply(n,e.extraArgs),l(e.fn,e.scope,n),n.length=r,s||e.preventDefault)return o;for(void 0!==(a=d.originalFn.apply(u,n))&&(o=a),t=0,i=d.after.length;t<i;t++)if((e=d.after[t]).extraArgs&&n.push.apply(n,e.extraArgs),l(e.fn,e.scope,n),n.length=r,s||e.preventDefault)return o;return o}),d}e.prototype={_decr_:function(e,t){null==t&&(t=1),(this[e]-=t)||delete this[e]},_incr_:function(e){this.hasOwnProperty(e)?++this[e]:this[e]=1}},t.HasListeners=i.HasListeners=e,i.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener",setListeners:"addListener"}),i.observeClass=i.observe,Ext.apply(t,{onClassMixedIn:n,beforeMethod:function(e,t,i,n,r){a.call(this,e).before.push({fn:t,scope:i,extraArgs:r,preventDefault:n})},afterMethod:function(e,t,i,n,r){a.call(this,e).after.push({fn:t,scope:i,extraArgs:r,preventDefault:n})},removeMethodListener:function(e,t,i){var n,r,o=a.call(this,e);for(n=0,r=o.before.length;n<r;n++)if(o.before[n].fn==t&&o.before[n].scope==i)return void Ext.Array.erase(o.before,n,1);for(n=0,r=o.after.length;n<r;n++)if(o.after[n].fn==t&&o.after[n].scope==i)return void Ext.Array.erase(o.after,n,1)},toggleEventLogging:function(e){Ext.util.Observable[e?"capture":"releaseCapture"](this,function(e){Ext.isDefined(Ext.global.console)&&Ext.global.console.log(e,arguments)})}})}),Ext.define("Ext.util.HashMap",{mixins:["Ext.mixin.Observable"],generation:0,config:{keyFn:null},constructor:function(e){var t,i=this;i.mixins.observable.constructor.call(i,e),i.clear(!0),(t=i.getKeyFn())&&(i.getKey=t)},getCount:function(){return this.length},getData:function(e,t){return void 0===t&&(t=e,e=this.getKey(t)),[e,t]},getKey:function(e){return e.id},add:function(e,t){var i=this;return 1===arguments.length&&(t=e,e=i.getKey(t)),i.containsKey(e)?i.replace(e,t):(i.map[e]=t,++i.length,i.generation++,i.hasListeners.add&&i.fireEvent("add",i,e,t),t)},replace:function(e,t){var i,n=this,r=n.map;return 1===arguments.length&&(t=e,e=n.getKey(t)),n.containsKey(e)||n.add(e,t),i=r[e],r[e]=t,n.generation++,n.hasListeners.replace&&n.fireEvent("replace",n,e,t,i),t},remove:function(e){var t=this.findKey(e);return void 0!==t&&this.removeAtKey(t)},removeAtKey:function(e){var t,i=this;return!!i.containsKey(e)&&(t=i.map[e],delete i.map[e],--i.length,i.generation++,i.hasListeners.remove&&i.fireEvent("remove",i,e,t),!0)},get:function(e){var t=this.map;return t.hasOwnProperty(e)?t[e]:void 0},clear:function(e){return(e||this.generation)&&(this.map={},this.length=0,this.generation=e?0:this.generation+1),!0!==e&&this.hasListeners.clear&&this.fireEvent("clear",this),this},containsKey:function(e){var t=this.map;return t.hasOwnProperty(e)&&void 0!==t[e]},contains:function(e){return this.containsKey(this.findKey(e))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(e){var t,i=[],n=this.map;for(t in n)n.hasOwnProperty(t)&&i.push(e?t:n[t]);return i},each:function(e,t){var i,n=Ext.apply({},this.map),r=this.length;for(i in t=t||this,n)if(n.hasOwnProperty(i)&&!1===e.call(t,i,n[i],r))break;return this},clone:function(){var e,t=new this.self(this.initialConfig),i=this.map;for(e in t.suspendEvents(),i)i.hasOwnProperty(e)&&t.add(e,i[e]);return t.resumeEvents(),t},findKey:function(e){var t,i=this.map;for(t in i)if(i.hasOwnProperty(t)&&i[t]===e)return t}},function(e){var t=e.prototype;t.removeByKey=t.removeAtKey}),Ext.define("Ext.AbstractManager",{requires:["Ext.util.HashMap"],typeName:"type",constructor:function(e){Ext.apply(this,e||{}),this.all=new Ext.util.HashMap,this.types={}},get:function(e){return this.all.get(e)},register:function(e){var t=this.all.getKey(e);void 0===t&&Ext.raise("Key is undefined. Please ensure the item has a key before registering the item."),this.all.containsKey(t)&&Ext.raise('Registering duplicate id "'+t+'" with '+this.$className),this.all.add(e)},unregister:function(e){this.all.remove(e)},registerType:function(e,t){(this.types[e]=t)[this.typeName]=e},isRegistered:function(e){return void 0!==this.types[e]},create:function(e,t){var i=e[this.typeName]||e.type||t,n=this.types[i];return void 0===n&&Ext.raise("The '"+i+"' type has not been registered with this manager"),new n(e)},onAvailable:function(n,r,o){var e,a,s=this.all;s.containsKey(n)?(e=s.get(n),r.call(o||e,e)):(a=function(e,t,i){t===n&&(r.call(o||i,i),s.un("add",a))},s.on("add",a))},each:function(e,t){this.all.each(e,t||this)},getCount:function(){return this.all.getCount()}}),Ext.define("Ext.promise.Consequence",function(n){return{promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(e,t,i){this.onFulfilled=e,this.onRejected=t,this.onProgress=i,this.deferred=new Ext.promise.Deferred,this.promise=this.deferred.promise},trigger:function(e,t){var i=this.deferred;switch(e){case"fulfill":this.propagate(t,this.onFulfilled,i,i.resolve);break;case"reject":this.propagate(t,this.onRejected,i,i.reject)}},update:function(e){Ext.isFunction(this.onProgress)&&(e=this.onProgress(e)),this.deferred.update(e)},propagate:function(e,t,i,n){Ext.isFunction(t)?this.schedule(function(){try{i.resolve(t(e))}catch(e){i.reject(e)}}):n.call(this.deferred,e)},schedule:function(e){var t=n.queueSize++;n.queue[t]=e,t||Ext.asap(n.dispatch)},statics:{queue:new Array(1e4),queueSize:0,dispatch:function(){var e,t,i=n.queue;for(t=0;t<n.queueSize;++t)e=i[t],i[t]=null,e();n.queueSize=0}}}},function(e){e.dispatch.$skipTimerCheck=!0}),Ext.define("Ext.promise.Deferred",{requires:["Ext.promise.Consequence"],promise:null,consequences:[],completed:!1,completionAction:null,completionValue:null,constructor:function(){this.promise=new Ext.promise.Promise(this),this.consequences=[],this.completed=!1,this.completionAction=null,this.completionValue=null},then:function(e,t,i){var n=new Ext.promise.Consequence(e,t,i);return this.completed?n.trigger(this.completionAction,this.completionValue):this.consequences.push(n),n.promise},resolve:function(e){var t,i,n=this;if(!n.completed)try{if(e===n.promise)throw new TypeError("A Promise cannot be resolved with itself.");if(null!=e&&("object"==typeof e||Ext.isFunction(e))&&Ext.isFunction(i=e.then)){t=!1;try{i.call(e,function(e){t||(t=!0,n.resolve(e))},function(e){t||(t=!0,n.reject(e))})}catch(e){t||n.reject(e)}}else n.complete("fulfill",e)}catch(e){n.reject(e)}},reject:function(e){this.completed||this.complete("reject",e)},update:function(e){var t,i,n=this.consequences;if(!this.completed)for(t=0,i=n.length;t<i;t++)n[t].update(e)},complete:function(e,t){var i,n,r=this.consequences;for(this.completionAction=e,this.completionValue=t,this.completed=!0,i=0,n=r.length;i<n;i++)r[i].trigger(this.completionAction,this.completionValue);this.consequences=null}}),Ext.define("Ext.promise.Promise",function(d){var u;return{requires:["Ext.promise.Deferred"],statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){u=Ext.promise.Deferred},all:function(e){return Ext.isArray(e)||d.is(e)||Ext.raise("Invalid parameter: expected an Array or Promise of an Array."),d.when(e).then(function(e){var t,i,n,r,o,a=new u,s=e.length,l=new Array(s);if(s)for(n=function(e,t){return d.when(e).then(function(e){return l[t]=e,--s||a.resolve(l),e},function(e){return a.reject(e)})},t=r=0,o=e.length;r<o;t=++r)i=e[t],t in e?n(i,t):s--;else a.resolve(l);return a.promise})},is:function(e){return null!=e&&("object"==typeof e||Ext.isFunction(e))&&Ext.isFunction(e.then)},race:function(e){var t,i=new u,n=e.length;for(Ext.isArray(e)||Ext.raise("Invalid parameter: expected an Array."),t=0;t<n;++t)i.resolve(e[t]);return i.promise},rethrowError:function(e){Ext.asap(function(){throw e})},when:function(e){var t=new u;return t.resolve(e),t.promise}},owner:null,constructor:function(e){this.owner=e},then:function(e,t,i,n){var r;return 1===arguments.length&&Ext.isObject(e)&&(e=(r=e).success,t=r.failure,i=r.progress,n=r.scope),n&&(e=e&&e.bind(n),t=t&&t.bind(n),i=i&&i.bind(n)),this.owner.then(e,t,i)},catch:function(e,t){var i;return 1===arguments.length&&Ext.isObject(e)&&(e=(i=e).fn,t=i.scope),null!=t&&(e=e.bind(t)),this.owner.then(null,e)},otherwise:function(e,t){return this.catch.apply(this,arguments)},always:function(t,e){var i;return 1===arguments.length&&Ext.isObject(t)&&(t=(i=t).fn,e=i.scope),null!=e&&(t=t.bind(e)),this.owner.then(function(e){try{t()}catch(e){d.rethrowError(e)}return e},function(e){try{t()}catch(e){d.rethrowError(e)}throw e})},done:function(){this.owner.then(null,d.rethrowError)},cancel:function(e){null==e&&(e=null),this.owner.reject(new this.self.CancellationError(e))},log:function(t){return null==t&&(t=""),this.owner.then(function(e){return Ext.log((t||"Promise")+" resolved with value: "+e),e},function(e){throw Ext.log((t||"Promise")+" rejected with reason: "+e),e})}}},function(e){e._ready()}),Ext.define("Ext.Promise",function(){var e;return{requires:["Ext.promise.Promise"],statics:{_ready:function(){e=Ext.promise.Promise},all:function(){return e.all.apply(e,arguments)},race:function(){return e.race.apply(e,arguments)},reject:function(e){var t=new Ext.promise.Deferred;return t.reject(e),t.promise},resolve:function(e){var t=new Ext.promise.Deferred;return t.resolve(e),t.promise}},constructor:function(e){var t=new Ext.promise.Deferred;return e(t.resolve.bind(t),t.reject.bind(t)),t.promise}}},function(e){var t=Ext.global.Promise;t&&t.resolve&&!Ext.useExtPromises?Ext.Promise=t:e._ready()}),Ext.define("Ext.Deferred",function(h){var n,e,t;return{extend:"Ext.promise.Deferred",requires:["Ext.Promise"],statics:{_ready:function(){n=Ext.promise.Promise,Ext.Promise.resolve},all:function(){return n.all.apply(n,arguments)},any:function(e){return Ext.isArray(e)||n.is(e)||Ext.raise("Invalid parameter: expected an Array or Promise of an Array."),h.some(e,1).then(function(e){return e[0]},function(e){if(!(e instanceof Error&&"Too few Promises were resolved."===e.message))throw e;Ext.raise("No Promises were resolved.")})},delay:function(e,t){var i;return 1===arguments.length&&(t=e,e=void 0),t=Math.max(t,1),(i=new h).timeoutId=Ext.defer(function(){delete i.timeoutId,i.resolve(e)},t),i.promise},getCachedRejected:function(){return e=e||Ext.Promise.reject()},getCachedResolved:function(){return t=t||Ext.Promise.resolve()},map:function(e,d){return Ext.isArray(e)||n.is(e)||Ext.raise("Invalid parameter: expected an Array or Promise of an Array."),Ext.isFunction(d)||Ext.raise("Invalid parameter: expected a function."),h.resolved(e).then(function(e){var i,t,n,r,o,a,s,l;if(r=e.length,a=new Array(e.length),i=new h,r)for(o=function(e,t){return h.resolved(e).then(function(e){return d(e,t,a)}).then(function(e){return a[t]=e,--r||i.resolve(a),e},function(e){return i.reject(e)})},t=s=0,l=e.length;s<l;t=++s)n=e[t],t in e?o(n,t):r--;else i.resolve(a);return i.promise})},memoize:function(e,t,i){var n=Ext.Function.memoize(e,t,i);return function(){return h.all(Ext.Array.slice(arguments)).then(function(e){return n.apply(t,e)})}},parallel:function(e,t){var i;return null==t&&(t=null),i=Ext.Array.slice(arguments,2),h.map(e,function(e){if(!Ext.isFunction(e))throw new Error("Invalid parameter: expected a function.");return e.apply(t,i)})},pipeline:function(e,t,i){return null==i&&(i=null),h.reduce(e,function(e,t){if(!Ext.isFunction(t))throw new Error("Invalid parameter: expected a function.");return t.call(i,e)},t)},race:function(){return n.race.apply(n,arguments)},reduce:function(e,o,t){var i;return Ext.isArray(e)||n.is(e)||Ext.raise("Invalid parameter: expected an Array or Promise of an Array."),Ext.isFunction(o)||Ext.raise("Invalid parameter: expected a function."),i=3===arguments.length,h.resolved(e).then(function(r){var e=[r,function(e,i,n){return h.resolved(e).then(function(t){return h.resolved(i).then(function(e){return o(t,e,n,r)})})}];return i&&e.push(t),Ext.Array.reduce.apply(Ext.Array,e)})},rejected:function(e){var t=new Ext.Deferred;return t.reject(e),t.promise},resolved:function(e){var t=new Ext.Deferred;return t.resolve(e),t.promise},sequence:function(e,i){var n;return null==i&&(i=null),n=Ext.Array.slice(arguments,2),h.reduce(e,function(t,e){if(!Ext.isFunction(e))throw new Error("Invalid parameter: expected a function.");return h.resolved(e.apply(i,n)).then(function(e){return t.push(e),t})},[])},some:function(e,c){return Ext.isArray(e)||n.is(e)||Ext.raise("Invalid parameter: expected an Array or Promise of an Array."),(!Ext.isNumeric(c)||c<=0)&&Ext.raise("Invalid parameter: expected a positive integer."),h.resolved(e).then(function(e){var t,i,n,r,o,a,s,l,d,u;if(l=[],s=c,a=e.length-s+1,t=new h,e.length<c)t.reject(new Error("Too few Promises were resolved."));else for(r=function(e){return 0<s&&l.push(e),0===--s&&t.resolve(l),e},n=function(e){return 0===--a&&t.reject(new Error("Too few Promises were resolved.")),e},i=d=0,u=e.length;d<u;i=++d)o=e[i],i in e&&h.resolved(o).then(r,n);return t.promise})},timeout:function(e,t){var i,n=new h;return i=Ext.defer(function(){i&&n.reject(new Error("Promise timed out."))},t),h.resolved(e).then(function(e){Ext.undefer(i),i=null,n.resolve(e)},function(e){Ext.undefer(i),i=null,n.reject(e)}),n.promise}}}},function(e){e._ready()}),Ext.Factory=function(e){this.aliasPrefix=e+".",this.cache={},this.name=e.replace(this.fixNameRe,this.fixNameFn),this.type=e,this.creator="create"+Ext.String.capitalize(this.name)},Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",typeProperty:"type",create:function(e,t){var i,n,r,o,a=Ext.ClassManager,s=this.cache,l=this.typeProperty;if(e){if(e[this.instanceProp])return e;"string"==typeof e&&(o=e,(e={})[this.defaultProperty]=o),n=e.xclass,o=e[l]}if(t&&t.constructor===Object&&(e=Ext.apply({},e,t),t=t[l]),n){if(!(r=a.get(n)))return a.instantiate(n,e)}else if((o=o||t||this.defaultType)||(r=this.defaultClass),o||r||Ext.raise("No type specified for "+this.type+".create"),!r&&!(r=s[o])){if(i=this.aliasPrefix+o,!(r=(n=a.getNameByAlias(i))&&a.get(n)))return a.instantiateByAlias(i,e);s[o]=r}return r.isInstance?r:new r(e)},fixNameRe:/\.[a-z]/gi,fixNameFn:function(e){return e.substring(1).toUpperCase()},clearCache:function(){this.cache={},this.instanceCache={}},hook:function(n){var r=this,o=r.create;r.create=function(e,t){var i=n.call(r,o,e,t);return void 0===i&&(i=o.call(r,e,t)),i}},update:function(e,t,i,n,r){var o,a,s,l;if(!t||t.isInstance)return t&&!t[this.instanceProp]&&Ext.raise("Config instance failed "+this.instanceProp+" requirement"),e&&e!==t&&e.destroy(),t;if("string"==typeof t&&(l=t,(t={})[this.defaultProperty]=l),e){if(!0===t)return e;if((l=t.xclass)?s=e.$className===l:(l=t.xtype)?s=e.isXType(l,!0):(l=t[this.typeProperty])&&(l=this.aliasPrefix+l,(o=e.self.prototype).hasOwnProperty("alias")&&(o=o.alias)&&(s=o===l||-1<o.indexOf(l))),s)return e.setConfig(t),e;e.destroy()}return!0===t&&(t={}),i&&(r&&(a=i[(a=Ext.Config.map[r]).names.get]())&&(t=Ext.merge(Ext.clone(a),t)),i[n=n||this.creator]&&((t=i[n](t))||Ext.raise("Missing return value from "+n+" on class "+i.$className))),this.create(t)}},Ext.Factory.define=function(e,t){var i,o,n,r=Ext.Factory,a=t&&t.cacheable;return e.constructor===Object?Ext.Object.each(e,r.define,r):(o=new Ext.Factory(e),t&&(t.constructor===Object?(Ext.apply(o,t),"string"==typeof(i=o.xclass)&&(o.defaultClass=Ext.ClassManager.get(i))):o.defaultType=t),r[o.name]=n=function(e,t){return o.create(e,t)},a&&(o.instanceCache={},o.hook(function(e,t,i){var n,r=this.instanceCache;return"string"!=typeof t||(n=r[t])||!1!==(n=e.call(this,t,i)).cacheable&&(r[t]=n,Ext.Object.freeze(n)),n})),n.instance=o,n.update=function(e,t,i,n,r){return o.update(e,t,i,n,r)}),n},Ext.Factory.clearCaches=function(){var e,t,i=Ext.Factory;for(e in i)(t=(t=i[e]).instance)&&t.clearCache()},Ext.Factory.on=function(e,t){Ext.Factory[e].instance.hook(t)},Ext.define("Ext.mixin.Factoryable",{mixinId:"factoryable",onClassMixedIn:function(e){var t,i,n=e.prototype,r=n.factoryConfig,o=n.alias,a={};(o=o&&o.length&&o[0])&&0<(t=o.lastIndexOf("."))&&(a.type=o.substring(0,t),a.defaultType=o.substring(t+1)),r&&(delete n.factoryConfig,Ext.apply(a,r)),i=Ext.Factory.define(a.type,a),e.create===Ext.Base.create&&(e.create=i)}}),Ext.define("Ext.data.request.Base",{requires:["Ext.Deferred"],mixins:["Ext.mixin.Factoryable"],factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(e){Ext.apply(this,e.options||{},e.ownerConfig),this.id=++Ext.data.Connection.requestId,this.owner=e.owner,this.options=e.options,this.requestOptions=e.requestOptions},start:function(){var e=this.getTimeout();e&&this.async&&(this.timer=Ext.defer(this.onTimeout,e,this))},abort:function(){this.clearTimer(),this.timedout||(this.aborted=!0),this.abort=Ext.emptyFn},createDeferred:function(){var e=this.result,t=new Ext.Deferred;return this.completed&&(this.success?t.resolve(e):t.reject(e)),this.deferred=t},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var e=this.getPromise();return e.then.apply(e,arguments)},onComplete:function(){var e=this.deferred,t=this.result;this.clearTimer(),e&&(this.success?e.resolve(t):e.reject(t)),this.completed=!0},onTimeout:function(){this.timedout=!0,this.timer=null,this.abort(!0)},getTimeout:function(){return this.timeout},clearTimer:function(){this.timer=Ext.undefer(this.timer)},destroy:function(){this.abort(),this.owner=this.options=this.requestOptions=this.result=null,this.callParent()},privates:{createException:function(){var e;return e={request:this,requestId:this.id,status:this.aborted?-1:0,statusText:this.aborted?"transaction aborted":"communication failure",getResponseHeader:this._getHeader,getAllResponseHeaders:this._getHeaders},this.aborted&&(e.aborted=!0),this.timedout&&(e.timedout=!0),e},_getHeader:function(e){var t=this.headers;return t&&t[e.toLowerCase()]},_getHeaders:function(){return this.headers}}}),Ext.define("Ext.data.flash.BinaryXhr",{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=!0,Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill"),Ext.GlobalEvents.fireEvent("flashready")},flashPluginActive:!1,flashPluginInjected:!1,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(e,t,i){var n;(n=this.liveConnections[Number(e)])?n.onFlashStateChange(t,i):Ext.warn.log("onFlashStateChange for unknown connection ID: "+e)},registerConnection:function(e){var t=this.connectionIndex;return this.conectionIndex=this.connectionIndex+1,this.liveConnections[t]=e,t},injectFlashPlugin:function(){var e,i;this.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]}),e=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/"),i="/plugins/flash/FlashPlugin.swf",i=[Ext.Loader.getPath("Ext.data.Connection"),"../../plugins/flash/FlashPlugin.swf"].join("/"),Ext.flashPluginPath&&(i=Ext.flashPluginPath),Ext.Loader.loadScript({url:e,onLoad:function(){var e={},t={};e.quality="high",e.bgcolor="#ffffff",e.allowscriptaccess="sameDomain",e.allowfullscreen="true",t.id="ext-flash-polyfill",t.name="polyfill",t.align="middle",swfobject.embedSWF(i,"ext-flash-polyfill","0","0","11.4.0","playerProductInstall.swf",{},e,t)},onError:function(){Ext.raise("Could not load flash-loader file swfobject.js from "+flashLoader)},scope:this}),Ext.data.flash.BinaryXhr.flashPluginInjected=!0}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(e){Ext.data.flash.BinaryXhr.flashPluginInjected||Ext.data.flash.BinaryXhr.injectFlashPlugin(),Ext.apply(this,e),this.requestHeaders={}},abort:function(){4!==this.readyState?(this.aborted=!0,Ext.data.flash.BinaryXhr.flashPluginActive?(Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(this.javascriptId),delete Ext.data.flash.BinaryXhr.liveConnections[this.javascriptId]):Ext.GlobalEvents.removeListener("flashready",this.onFlashReady,this)):Ext.warn.log("Aborting a connection that's completed its transfer: "+this.url)},getAllResponseHeaders:function(){var i=[];return Ext.Object.each(this.responseHeaders,function(e,t){i.push(e+": "+t)}),i.join("\r\n")},getResponseHeader:function(e){var t=this.responseHeaders;return t&&t[e]||null},open:function(e,t,i,n,r){this.method=e,this.url=t,this.async=!1!==i,this.user=n,this.password=r,this.async||Ext.raise("Binary posts are only supported in async mode: "+t),"POST"!==this.method&&Ext.log.warn("Binary data can only be sent as a POST request: "+t)},overrideMimeType:function(e){this.mimeType=e},send:function(e){this.body=e,Ext.data.flash.BinaryXhr.flashPluginActive?this.onFlashReady():Ext.GlobalEvents.addListener("flashready",this.onFlashReady,this)},onFlashReady:function(){var e,t=this;t.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(t),e={method:t.method,url:t.url,user:t.user,password:t.password,mimeType:t.mimeType,requestHeaders:t.requestHeaders,body:t.body,javascriptId:t.javascriptId},Ext.data.flash.BinaryXhr.flashPlugin.postBinary(e)},setReadyState:function(e){this.readyState!==e&&(this.readyState=e,this.onreadystatechange())},setRequestHeader:function(e,t){this.requestHeaders[e]=t},onreadystatechange:Ext.emptyFn,parseData:function(e){this.status=e.status||0,this.responseHeaders={},this.mimeType&&(this.responseHeaders["content-type"]=this.mimeType),"complete"===e.reason?(this.responseBytes=e.data,this.responseHeaders["content-length"]=e.data.length):"error"===e.reason||"securityError"===e.reason?(this.statusText=e.text,this.responseHeaders["content-length"]=0):Ext.raise("Unkown reason code in data: "+e.reason)},onFlashStateChange:function(e,t){4===e&&(this.parseData(t),delete Ext.data.flash.BinaryXhr.liveConnections[this.javascriptId]),this.setReadyState(e)}}),Ext.define("Ext.data.request.Ajax",{extend:"Ext.data.request.Base",alias:"request.ajax",requires:["Ext.data.flash.BinaryXhr"],statics:{parseStatus:function(e,t){var i,n,r,o;if(t&&("arraybuffer"===(i=t.responseType)?n=t.byteLength:"blob"===i?n=t.response.size:"json"!==i&&"document"!==i||!t.response?"text"!==i&&""!==i&&i||!t.responseText||(n=t.responseText.length):n=0),o=!1,!(r=200<=(e=1223===e?204:e)&&e<300||304===e||0===e&&Ext.isNumber(n)))switch(e){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:o=!0}return{success:r,isException:o}}},start:function(e){var t,i=this,n=i.options,r=i.requestOptions,o=i.isXdr;return t=i.xhr=i.openRequest(n,r,i.async,i.username,i.password),o||i.setupHeaders(t,n,r.data,r.params),i.async&&(o||(t.onreadystatechange=i.bindStateChange())),o&&i.processXdrRequest(i,t),i.callParent([e]),t.send(e),i.async?i:i.onComplete()},abort:function(e){var t=this.xhr;if(e||this.isLoading()){try{t.onreadystatechange=null}catch(e){t.onreadystatechange=Ext.emptyFn}t.abort(),this.callParent([e]),this.onComplete(),this.cleanup()}},cleanup:function(){this.xhr=null,delete this.xhr},isLoading:function(){var e=this.xhr,t=e&&e.readyState,i=Ext.data.flash&&Ext.data.flash.BinaryXhr;return!(!e||this.aborted||this.timedout)&&(i&&e instanceof i?4!==t:0!==t&&4!==t)},openRequest:function(e,t,i,n,r){var o=this.newRequest(e);return n?o.open(t.method,t.url,i,n,r):this.isXdr?o.open(t.method,t.url):o.open(t.method,t.url,i),(e.binary||this.binary)&&(window.Uint8Array?o.responseType="arraybuffer":o.overrideMimeType?o.overrideMimeType("text/plain; charset=x-user-defined"):Ext.isIE||Ext.log.warn("Your browser does not support loading binary data using Ajax.")),e.responseType&&(o.responseType=e.responseType),(e.withCredentials||this.withCredentials)&&(o.withCredentials=!0),o},newRequest:function(e){var t;return e.binaryData?t=window.Uint8Array?this.getXhrInstance():new Ext.data.flash.BinaryXhr:this.cors&&Ext.isIE9m?(t=this.getXdrInstance(),this.isXdr=!0):(t=this.getXhrInstance(),this.isXdr=!1),t},setupHeaders:function(e,t,i,n){var r,o,a=Ext.apply({},t.headers||{},this.defaultHeaders),s=this.defaultPostHeader,l=t.jsonData,d=t.xmlData,u="Content-Type",c=this.useDefaultXhrHeader;a.hasOwnProperty(u)||!i&&!n||(i&&(t.rawData?s="text/plain":d&&Ext.isDefined(d)?s="text/xml":l&&Ext.isDefined(l)&&(s="application/json")),a[u]=s),c&&!a["X-Requested-With"]&&(a["X-Requested-With"]=this.defaultXhrHeader),void 0!==a[u]&&null!==a[u]||delete a[u];try{for(r in a)a.hasOwnProperty(r)&&(o=a[r],e.setRequestHeader(r,o))}catch(e){this.owner.fireEvent("exception",r,o)}return a},getXdrInstance:function(){var e;return 8<=Ext.ieVersion?e=new XDomainRequest:Ext.raise({msg:"Your browser does not support CORS"}),e},getXhrInstance:function(){return new XMLHttpRequest},processXdrRequest:function(e,t){delete e.headers,e.contentType=e.options.contentType||this.defaultXdrContentType,t.onload=this.bindStateChange(!0),t.onerror=t.ontimeout=this.bindStateChange(!1)},processXdrResponse:function(e,t){e.getAllResponseHeaders=function(){return[]},e.getResponseHeader=function(){return""},e.contentType=t.contentType||this.defaultXdrContentType},bindStateChange:function(e){var t=this;return function(){Ext.elevate(function(){t.onStateChange(e)})}},onStateChange:function(e){var t=this.xhr;(t&&4===t.readyState||this.isXdr)&&(this.clearTimer(),this.onComplete(e),this.cleanup())},onComplete:function(e){var t,i,n,r=this,o=r.owner,a=r.options,s=r.xhr,l={success:!1,isException:!1};if(!s||r.destroyed)return r.result=l;try{(t=Ext.data.request.Ajax.parseStatus(s.status,s)).success&&(t.success=4===s.readyState)}catch(e){t=l}return(i=r.success=r.isXdr?e:t.success)?(n=r.createResponse(s),o.hasListeners.requestcomplete&&o.fireEvent("requestcomplete",o,n,a),a.success&&Ext.callback(a.success,a.scope,[n,a])):(n=t.isException||r.aborted||r.timedout?r.createException(s):r.createResponse(s),o.hasListeners.requestexception&&o.fireEvent("requestexception",o,n,a),a.failure&&Ext.callback(a.failure,a.scope,[n,a])),r.result=n,a.callback&&Ext.callback(a.callback,a.scope,[a,i,n]),o.onRequestComplete(r),r.callParent([e]),n},createResponse:function(e){for(var t,i,n,r,o=this.isXdr,a={},s=o?[]:e.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),l=s.length;l--;)0<=(i=(t=s[l]).indexOf(":"))&&(n=t.substr(0,i).toLowerCase()," "===t.charAt(i+1)&&++i,a[n]=t.substr(i+1));return r={request:this,requestId:this.id,status:e.status,statusText:e.statusText,getResponseHeader:function(e){return a[e.toLowerCase()]},getAllResponseHeaders:function(){return a}},o&&this.processXdrResponse(r,e),this.binary?r.responseBytes=this.getByteArray(e):(e.responseType&&(r.responseType=e.responseType),"blob"===e.responseType?r.responseBlob=e.response:"json"===e.responseType?r.responseJson=e.response:"document"===e.responseType?r.responseXML=e.response:(r.responseText=e.responseText,r.responseXML=e.responseXML)),r},destroy:function(){this.xhr=null,this.callParent()},privates:{getByteArray:function(e){var t,i,n,r,o=e.response,a=e.responseBody;if(e instanceof(Ext.data.flash&&Ext.data.flash.BinaryXhr))t=e.responseBytes;else if(window.Uint8Array)t=o?new Uint8Array(o):[];else if(Ext.isIE9p)try{t=new VBArray(a).toArray()}catch(e){t=[]}else if(Ext.isIE)this.self.vbScriptInjected||this.injectVBScript(),getIEByteArray(e.responseBody,t=[]);else for(t=[],n=(i=e.responseText).length,r=0;r<n;r++)t.push(255&i.charCodeAt(r));return t},injectVBScript:function(){var e=document.createElement("script");e.type="text/vbscript",e.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n"),Ext.getHead().dom.appendChild(e),this.self.vbScriptInjected=!0}}}),Ext.define("Ext.data.request.Form",{extend:"Ext.data.request.Base",alias:"request.form",start:function(e){var t=this.options,i=this.requestOptions;return this.callParent([e]),this.form=this.upload(t.form,i.url,i.data,t),this},abort:function(e){var t;if(this.isLoading())try{(t=this.frame.dom).stop?t.stop():t.document.execCommand("Stop")}catch(e){}this.callParent([e]),this.onComplete(),this.cleanup()},cleanup:function(){var e=this.frame;e&&(e.un("load",this.onComplete,this),Ext.removeNode(e)),this.frame=this.form=null},isLoading:function(){return!!this.frame},upload:function(i,e,t,n){i=Ext.getDom(i);function r(e,t){o=document.createElement("input"),Ext.fly(o).set({type:"hidden",value:t,name:e}),i.appendChild(o),m.push(o)}var o,a,s,l,d,u,c,h,f=document.createElement("iframe"),g=Ext.get(f),p=g.id,m=[],x="multipart/form-data",y={target:i.target,method:i.method,encoding:i.encoding,enctype:i.enctype,action:i.action};if(g.set({name:p,cls:Ext.baseCSSPrefix+"hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1}),document.body.appendChild(f),document.body.appendChild(i),document.frames&&(document.frames[p].name=p),Ext.fly(i).set({target:p,method:"POST",enctype:x,encoding:x,action:e||y.action}),t)for(l in a=Ext.Object.fromQueryString(t)||{})if(a.hasOwnProperty(l))if(s=a[l],Ext.isArray(s))for(d=s.length,u=0;u<d;u++)r(l,s[u]);else r(l,s);for((this.frame=g).on({load:this.onComplete,scope:this,single:!Ext.isOpera}),i.submit(),document.body.removeChild(i),Ext.fly(i).set(y),c=m.length,h=0;h<c;h++)Ext.removeNode(m[h]);return i},getDoc:function(){var e=this.frame.dom;return e&&(e.contentWindow.document||e.contentDocument)||(window.frames[e.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var t,e,i,n,r,o=this,a=o.frame,s=o.owner,l=o.options;if(a){if(o.aborted||o.timedout)o.result=r=o.createException(),r.responseXML=null,r.responseText=Ext.encode({success:!1,message:Ext.String.trim(r.statusText)}),r.request=o,t=l.failure,i=!1;else try{if(e=o.getDoc(),o.result=r={responseText:"",responseXML:null,request:o},e){if(Ext.isOpera&&e.location===Ext.SSL_SECURE_URL)return;e.body&&((n=e.body.firstChild)&&/pre/i.test(n.tagName)?r.responseText=n.textContent||n.innerText:(n=e.getElementsByTagName("textarea")[0])?r.responseText=n.value:r.responseText=e.body.textContent||e.body.innerText),r.responseXML=e.XMLDocument||e,t=l.success,i=!0,r.status=200}else Ext.raise("Could not acquire a suitable connection for the file upload service.")}catch(e){o.result=r=o.createException(),r.status=400,r.statusText=(e.message||e.description)+"",r.responseText=Ext.encode({success:!1,message:Ext.String.trim(r.statusText)}),r.responseXML=null,t=l.failure,i=!1}o.frame=null,o.success=i,s.fireEvent(i?"requestcomplete":"requestexception",s,r,l),Ext.callback(t,l.scope,[r,l]),Ext.callback(l.callback,l.scope,[l,i,r]),s.onRequestComplete(o),Ext.asap(a.destroy,a),o.callParent()}},destroy:function(){this.cleanup(),this.callParent()}}),Ext.define("Ext.data.Connection",{mixins:{observable:"Ext.mixin.Observable"},requires:["Ext.data.request.Ajax","Ext.data.request.Form","Ext.data.flash.BinaryXhr","Ext.Deferred"],statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:!0,username:"",password:"",disableCaching:!0,withCredentials:!1,binary:!1,cors:!1,isXdr:!1,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:3e4,extraParams:null,autoAbort:!1,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest"},constructor:function(e){this.mixins.observable.constructor.call(this,e),this.requests={}},request:function(e){var t,i;return e=e||{},!1!==this.fireEvent("beforerequest",this,e)?(t=this.setOptions(e,e.scope||Ext.global),(i=this.createRequest(e,t)).start(t.data)):(i={status:-1,statusText:"Request cancelled in beforerequest event handler"},Ext.callback(e.callback,e.scope,[e,!1,i]),Ext.Deferred.rejected([e,!1,i]))},createRequest:function(e,t){var i,n=e.type||t.type;return n=n||(this.isFormUpload(e)?"form":"ajax"),(e.autoAbort||this.getAutoAbort())&&this.abort(),i=Ext.Factory.request({type:n,owner:this,options:e,requestOptions:t,ownerConfig:this.getConfig()}),this.requests[i.id]=i,this.latestId=i.id,i},isFormUpload:function(e){var t=this.getForm(e);return!!t&&(e.isUpload||this.enctypeRe.test(t.getAttribute("enctype")))},getForm:function(e){return Ext.getDom(e.form)},setOptions:function(e,t){var i,n,r,o=e.params||{},a=this.getExtraParams(),s=e.urlParams,l=e.url||this.getUrl(),d=e.cors,u=e.jsonData;return void 0!==d&&this.setCors(d),Ext.isFunction(o)&&(o=o.call(t,e)),Ext.isFunction(l)&&(l=l.call(t,e)),(l=this.setupUrl(e,l))||Ext.raise({options:e,msg:"No URL specified"}),r=e.rawData||e.binaryData||e.xmlData||u||null,u&&!Ext.isPrimitive(u)&&(r=Ext.encode(r)),e.binaryData&&(Ext.isArray(e.binaryData)||Ext.log.warn("Binary submission data must be an array of byte values! Instead got "+typeof e.binaryData),this.nativeBinaryPostSupport()&&(r=new Uint8Array(e.binaryData),(Ext.isChrome&&Ext.chromeVersion<22||Ext.isSafari||Ext.isGecko)&&(r=r.buffer))),Ext.isObject(o)&&(o=Ext.Object.toQueryString(o)),Ext.isObject(a)&&(a=Ext.Object.toQueryString(a)),o+=a?(o?"&":"")+a:"",s=Ext.isObject(s)?Ext.Object.toQueryString(s):s,o=this.setupParams(e,o),i=(e.method||this.getMethod()||(o||r?"POST":"GET")).toUpperCase(),this.setupMethod(e,i),n=!1!==e.disableCaching&&(e.disableCaching||this.getDisableCaching()),"GET"===i&&n&&(l=Ext.urlAppend(l,(e.disableCachingParam||this.getDisableCachingParam())+"="+(new Date).getTime())),("GET"===i||r)&&o&&(l=Ext.urlAppend(l,o),o=null),s&&(l=Ext.urlAppend(l,s)),{url:l,method:i,data:r||o||null}},setupUrl:function(e,t){var i=this.getForm(e);return i&&(t=t||i.action),t},setupParams:function(e,t){var i,n=this.getForm(e);return n&&!this.isFormUpload(e)&&(i=Ext.Element.serializeForm(n),t=t?t+"&"+i:i),t},setupMethod:function(e,t){return this.isFormUpload(e)?"POST":t},isLoading:function(e){return!!(e=e||this.getLatest())&&e.isLoading()},abort:function(e){(e=e||this.getLatest())&&e.isLoading()&&e.abort()},abortAll:function(){var e,t=this.requests;for(e in t)this.abort(t[e])},getLatest:function(){var e,t=this.latestId;return t&&(e=this.requests[t]),e||null},clearTimeout:function(e){(e=e||this.getLatest())&&e.clearTimer()},onRequestComplete:function(e){delete this.requests[e.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||Ext.isSafari&&Ext.isDefined(window.Uint8Array)||Ext.isGecko&&Ext.isDefined(window.Uint8Array)}}),Ext.define("Ext.Ajax",{extend:"Ext.data.Connection",singleton:!0,autoAbort:!1}),Ext.define("Ext.AnimationQueue",{singleton:!0,constructor:function(){var e=this;e.queue=[],e.taskQueue=[],e.runningQueue=[],e.idleQueue=[],e.isRunning=!1,e.isIdle=!0,e.run=e.run.bind(e),Ext.os.is.iOS&&(e.watch.$skipTimerCheck=!0,e.watchdogTimer=Ext.interval(e.watch,500,e))},start:function(e,t,i){var n=this;n.queue.push(arguments),n.isRunning||(n.hasOwnProperty("idleTimer")&&(Ext.undefer(n.idleTimer),delete n.idleTimer),n.hasOwnProperty("idleQueueTimer")&&(Ext.undefer(n.idleQueueTimer),delete n.idleQueueTimer),n.isIdle=!1,n.isRunning=!0,n.startCountTime=Ext.now(),n.count=0,n.doStart())},clear:function(){var e=this;Ext.undefer(e.idleTimer),Ext.undefer(e.idleQueueTimer),Ext.unraf(e.animationFrameId),e.idleTimer=e.idleQueueTimer=e.animationFrameId=null,e.queue.length=e.taskQueue.length=e.runningQueue.length=e.idleQueue.length=0,e.isRunning=!1,e.isIdle=!0,e.startCountTime=Ext.now(),e.count=0},watch:function(){this.isRunning&&500<=Ext.now()-this.lastRunTime&&this.run()},run:function(){var e,t,i,n,r,o=this,a=o.runningQueue;if(o.animationFrameId=null,o.isRunning){for(e=Ext.now(),o.lastRunTime=e,o.frameStartTime=e,n=o.queue.length;n--;)(i=(t=o.queue[n])[1]&&t[1].getElement&&t[1].getElement())&&i.destroyed&&o.queue.splice(n,1);for(a.push.apply(a,o.queue),n=0,r=a.length;n<r;n++)o.invoke(a[n]);a.length=0;var s=o.frameStartTime-o.startCountTime,l=++o.count;200<=s&&(o.onFpsChanged(1e3*l/s,l,s),o.startCountTime=o.frameStartTime,o.count=0),o.queue.length||o.stop(),o.isRunning&&o.doIterate()}},onFpsChanged:Ext.emptyFn,onStop:Ext.emptyFn,doStart:function(){this.animationFrameId||(this.animationFrameId=Ext.raf(this.run)),this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId||(this.animationFrameId=Ext.raf(this.run))},doStop:function(){this.animationFrameId&&Ext.unraf(this.animationFrameId),this.animationFrameId=null},stop:function(e,t,i){var n,r,o=this,a=o.queue,s=a.length;if(o.isRunning){for(n=0;n<s;n++)(r=a[n])[0]===e&&r[1]===t&&r[2]===i&&(a.splice(n,1),n--,s--);0===s&&(o.doStop(),o.onStop(),o.isRunning=!1,o.idleQueue.length&&!o.idleTimer&&(o.idleTimer=Ext.defer(o.whenIdle,100,o)))}},onIdle:function(e,t,i){var n,r,o,a=this.idleQueue;for(n=0,r=a.length;n<r;n++)if(e===(o=a[n])[0]&&t===o[1]&&i===o[2])return;a.push(arguments),this.isIdle?this.processIdleQueue():this.idleTimer||(this.idleTimer=Ext.defer(this.whenIdle,100,this))},unIdle:function(e,t,i){var n,r,o,a=this.idleQueue;for(n=0,r=a.length;n<r;n++)if(e===(o=a[n])[0]&&t===o[1]&&i===o[2])return a.splice(n,1),!0;return!a.length&&this.idleTimer&&(Ext.undefer(this.idleTimer),delete this.idleTimer),!a.length&&this.idleQueueTimer&&(Ext.undefer(this.idleQueueTimer),delete this.idleQueueTimer),!1},queueTask:function(e,t,i){this.taskQueue.push(arguments),this.processTaskQueue()},dequeueTask:function(e,t,i){var n,r,o,a=this.taskQueue;for(n=0,r=a.length;n<r;n++)e===(o=a[n])[0]&&t===o[1]&&i===o[2]&&(a.splice(n,1),n--,r--)},invoke:function(e){var t=e[0],i=e[1],n=e[2];t="string"==typeof t?i[t]:t,Ext.isArray(n)?t.apply(i,n):t.call(i,n)},whenIdle:function(){delete this.idleTimer,this.isIdle=!0,this.processIdleQueue()},processIdleQueue:function(){this.hasOwnProperty("idleQueueTimer")||(this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this))},processIdleQueueItem:function(){var e,t=this.idleQueue;delete this.idleQueueTimer,this.isIdle&&0<t.length&&(e=t.shift(),this.invoke(e),this.processIdleQueue())},processTaskQueue:function(){this.hasOwnProperty("taskQueueTimer")||(this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this))},processTaskQueueItem:function(){var e,t=this.taskQueue;delete this.taskQueueTimer,0<t.length&&(e=t.shift(),this.invoke(e),this.processTaskQueue())},showFps:function(){var e={color:"white","background-color":"black","text-align":"center","font-family":"sans-serif","font-size":"8px","font-weight":"normal","font-style":"normal","line-height":"20px","-webkit-font-smoothing":"antialiased",zIndex:1e5,position:"absolute"};Ext.getBody().append([{style:Ext.applyIf({bottom:"50px",left:0,width:"50px",height:"20px"},e),html:"Average"},{style:Ext.applyIf({"background-color":"red","font-size":"18px","line-height":"50px",bottom:0,left:0,width:"50px",height:"50px"},e),id:"__averageFps",html:"0"},{style:Ext.applyIf({bottom:"50px",left:"50px",width:"50px",height:"20px"},e),html:"Min (Last 1k)"},{style:Ext.applyIf({"background-color":"orange","font-size":"18px","line-height":"50px",bottom:0,left:"50px",width:"50px",height:"50px"},e),id:"__minFps",html:"0"},{style:Ext.applyIf({bottom:"50px",left:"100px",width:"50px",height:"20px"},e),html:"Max (Last 1k)"},{style:Ext.applyIf({"background-color":"maroon","font-size":"18px","line-height":"50px",bottom:0,left:"100px",width:"50px",height:"50px"},e),id:"__maxFps",html:"0"},{style:Ext.applyIf({bottom:"50px",left:"150px",width:"50px",height:"20px"},e),html:"Current"},{style:Ext.applyIf({"background-color":"green","font-size":"18px","line-height":"50px",bottom:0,left:"150px",width:"50px",height:"50px"},e),id:"__currentFps",html:"0"}]),Ext.AnimationQueue.resetFps()},resetFps:function(){var t=Ext.get("__currentFps"),i=Ext.get("__averageFps"),n=Ext.get("__minFps"),r=Ext.get("__maxFps"),o=1e3,a=0,s=0,l=0;t&&(Ext.AnimationQueue.onFpsChanged=function(e){++s%10||(o=1e3,a=0),l+=e,o=Math.min(o,e),a=Math.max(a,e),t.setHtml(Math.round(e)),i.setHtml(Math.round(l/s)),n.setHtml(Math.round(o)),r.setHtml(Math.round(a))})}},function(){var e=window.location.search.substr(1).split("&");Ext.Array.contains(e,"showfps")&&Ext.onReady(this.showFps.bind(this))}),Ext.define("Ext.mixin.Bufferable",function(l){return{extend:"Ext.Mixin",mixinConfig:{id:"bufferable",after:{destroy:"cancelAllCalls"},before:{$reap:"cancelAllCalls"},extended:function(e,t,i){var n=i.bufferableMethods;n&&(delete i.bufferableMethods,l.processClass(t,n))}},afterClassMixedIn:function(e){l.processClass(e)},privates:{cancelAllCalls:function(){var e,t=this.bufferables;if(t)for(e in t)t[e].cancel(),delete t[e]},cancelBufferedCall:function(e,t){var i=this.bufferables,n=i&&i[e];return n&&n[t?"invoke":"cancel"](),!!n},flushBufferedCall:function(e){return this.cancelBufferedCall(e,!0)},initBufferables:function(){var e,t=this.hasOwnProperty("bufferableMethods")&&this.bufferableMethods;return t&&(l._canonicalize(t),e=this.self.prototype.bufferableMethods,this.bufferableMethods=Ext.merge(Ext.clone(e),t)),this.bufferables={}},isCallPending:function(e){var t=this.bufferables;return!!(t&&t[e])},statics:{SINGLE:{single:!0},_canonicalize:function(e){var t,i,n,r;for(r in e)n=Ext.String.capitalize(r),"number"!==(t=typeof(i=e[r]))&&"string"!==t||(e[r]=i={delay:i}),"string"==typeof(t=i.delay)&&(i[t]=!0,delete i.delay),i.capitalized=n,i.name=r,i.fn||(i.fn="do"+n),i.flag||(i.flag="is"+n+"Pending")},_canceller:function(){var e=this.id;e&&(this.delay?Ext.undefer(e):this.asap?Ext.unasap(e):this.idle?Ext.un("idle",e,null,l.SINGLE):this.raf&&Ext.unraf(e),this.id=null),this.args=null,this.target[this.flag]=!1},_invoker:function(){var e=this.args||Ext.emptyArray,t=this.target;++this.invokes,this.cancel(),t[this.fn].apply(t,e)},delayCall:function(e,t,i){if(!e.destroying){function n(){a.id&&(a.id=null,a.invoke())}var r=e.bufferables||e.initBufferables(),o=t.name,a=r[o]||(r[o]=Ext.apply({calls:0,invokes:0,args:null,cancel:l._canceller,id:null,target:e,invoke:l._invoker},t)),s=t.delay;a.id&&a.cancel(),a.args=i,++a.calls,e[a.flag]=!0,s?a.id=Ext.defer(n,s):t.asap?a.id=Ext.asap(n):t.idle?(a.id=n,Ext.on("idle",n,null,l.SINGLE)):t.raf?a.id=Ext.raf(n):a.invoke()}},processClass:function(e,t){var i,n,r=e.prototype,o=r.bufferableMethods;if(t?(l._canonicalize(t),o=o&&Ext.merge(Ext.clone(o),t),r.bufferableMethods=o||t):(t=o,l._canonicalize(t),r.bufferables=null),t)for(n in t)r[n]||(i=t[n],l.processMethod(r,i,Array.prototype.slice))},processMethod:function(e,t,i){var n=t.name,r=t.capitalized;e[n]=function(){return l.delayCall(this,t,i.call(arguments))},e["cancel"+r]=function(){return this.cancelBufferedCall(n)},e["flush"+r]=function(){return this.flushBufferedCall(n)}}}}}}),Ext.define("Ext.ComponentManager",{alternateClassName:"Ext.ComponentMgr",singleton:!0,mixins:["Ext.mixin.Bufferable"],count:0,fixReferencesTimer:null,referenceRepairs:0,typeName:"xtype",bufferableMethods:{handleDocumentMouseDown:"asap"},constructor:function(e){Ext.apply(this,e),this.all={},this.byInstanceId={},this.holders={},this.onAvailableCallbacks={}},create:function(e,t){return"string"==typeof e?Ext.widget(e):e.isComponent?e:"xclass"in e?Ext.create(e.xclass,e):Ext.widget(e.xtype||t,e)},get:function(e){return this.all[e]},register:function(e){var t=this,i=e.getId(),n=t.onAvailableCallbacks;void 0===i&&Ext.raise("Component id is undefined. Please ensure the component has an id."),i in t.all&&Ext.raise('Duplicate component id "'+i+'"'),e.$iid in t.byInstanceId&&Ext.raise('Duplicate component instance id "'+e.$iid+'"'),t.all[i]=e,((t.byInstanceId[e.$iid]=e).nameHolder||e.referenceHolder)&&(t.holders[i]=e),++t.count,t.hasFocusListener||t.installFocusListener(),(n=n&&n[i])&&n.length&&t.notifyAvailable(e)},unregister:function(e){var t=this.all,i=this.byInstanceId,n=this.holders,r=e.getId();r in n&&(n[r]=null,delete n[r]),t[r]=null,delete t[r],i[r=e.$iid]=null,delete i[r],--this.count},markReferencesDirty:function(){var e,t,i=this,n=i.holders;if(!Ext.referencesDirty){for(t in n)(e=n[t]).refs=e.nameRefs=null,e.invalidateChildDirty&&e.invalidateChildDirty();Ext.referencesDirty=!0,i.fixReferencesTimer=Ext.asap(function(){i.fixReferencesTimer=null,i.fixReferences()})}},fixReferences:function(){var e,t,i=this.all,n=this.holders;if(Ext.referencesDirty){for(t in this.fixReferencesTimer=Ext.unasap(this.fixReferencesTimer),Ext.referencesDirty=0,++this.referenceRepairs,n)(e=n[t]).beginSyncChildDirty&&e.beginSyncChildDirty();for(t in i)i[t]._fixReference();for(t in n)(e=n[t]).finishSyncChildDirty&&e.finishSyncChildDirty();Ext.referencesDirty=!1}},onAvailable:function(e,t,i){var n,r=this.onAvailableCallbacks,o=this.all;e in o?(n=o[e],t.call(i||n,n)):e&&(Ext.isArray(r[e])||(r[e]=[]),r[e].push(function(e){t.call(i||e,e)}))},notifyAvailable:function(e){for(var t=this.onAvailableCallbacks[e&&e.getId()]||[];t.length;)t.shift()(e)},each:function(e,t){Ext.Object.each(this.all,e,t)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.from(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(e){var t,i,n,r,o=e.event.chain(),a=Ext.applyIf({event:o},e);if(t=o.toComponent=a.toComponent=Ext.Component.from(e.toElement),i=o.fromComponent=a.fromComponent=Ext.Component.from(e.fromElement),n=this.getCommonAncestor(i,t),t!==i){if(i&&!i.destroyed&&!i.isDestructing())for(i.handleBlurEvent&&i.handleBlurEvent(a),r=i;r&&r!==n;r=r.getRefOwner())r.destroyed||r.destroying||(o.type="focusleave",r.onFocusLeave(o));if(t&&!t.destroyed&&!t.isDestructing())for(t.handleFocusEvent&&t.handleFocusEvent(a),r=t;r&&r!==n;r=r.getRefOwner())o.type="focusenter",r.onFocusEnter(o)}for(r=n;r;r=r.getRefOwner())r.destroying||r.destroyed||r.onFocusMove(a)},getCommonAncestor:function(e,t){if(e===t)return e;for(;e&&!e.isAncestor(t)&&e!==t;)e=e.getRefOwner();return e},privates:{doHandleDocumentMouseDown:function(e){var t,i=Ext.Widget.prototype.floatedSelector;i&&(t=Ext.Component.from(e.getTarget(i,Ext.getBody())))&&t.toFront(!0)},installFocusListener:function(){Ext.on("focus",this.onGlobalFocus,this),this.hasFocusListener=!0},clearAll:function(){this.all={},this.byInstanceId={},this.holders={},this.onAvailableCallbacks={}},from:function(e,t,i){var n,r,o,a,s=this.all,l=0;for(e&&e.isEvent&&(e=e.target),n=Ext.getDom(e),"number"!=typeof t&&(r=Ext.getDom(t),t=Number.MAX_VALUE);n&&1===n.nodeType&&l<t&&n!==r;){if(o=n.getAttribute("data-componentid")||n.id){if((a=s[o])&&(!i||Ext.ComponentQuery.is(a,i)))return a;l++}n=n.parentNode}return null}}},function(t){t.fromElement=t.from,Ext.referencesDirty=!1,Ext.fixReferences=function(){t.fixReferences()},Ext.markReferencesDirty=function(){t.markReferencesDirty()},Ext.getCmp=function(e){return t.get(e)},Ext.iidToCmp=function(e){return t.byInstanceId[e]||null},Ext.doEv=function(e,t){var i,n,r;return!((i=Ext.Component.from(t.target))&&!i.destroying&&!i.destroyed&&i.getEventHandlers&&(n=i.getEventHandlers()[t.type])&&i[n])||(r=new Ext.event.Event(t),i[n](r))}}),Ext.ns("Ext.util").Operators={"=":function(e,t){return e==t},"!=":function(e,t){return e!=t},"^=":function(e,t){return e&&e.substr(0,t.length)==t},"$=":function(e,t){return e&&e.substr(e.length-t.length)==t},"*=":function(e,t){return e&&-1!==e.indexOf(t)},"%=":function(e,t){return e%t==0},"|=":function(e,t){return e&&(e==t||e.substr(0,t.length+1)==t+"-")},"~=":function(e,t){return e&&-1!=(" "+e+" ").indexOf(" "+t+" ")}},Ext.define("Ext.util.LruCache",{extend:"Ext.util.HashMap",config:{maxSize:null},add:function(e,t){var i,n;return this.removeAtKey(e),i={prev:n=this.last,next:null,key:e,value:t},n?n.next=i:this.first=i,this.last=i,this.callParent([e,i]),this.prune(),t},insertBefore:function(e,t,i){var n,r;return(i=this.map[this.findKey(i)])?((n=this.findKey(t))?this.unlinkEntry(r=this.map[n]):r={prev:i.prev,next:i,key:e,value:t},i.prev?r.prev.next=r:this.first=r,(r.next=i).prev=r,this.prune(),t):this.add(e,t)},get:function(e){var t=this.map[e];if(t)return t.next&&this.moveToEnd(t),t.value},removeAtKey:function(e){return this.unlinkEntry(this.map[e]),this.callParent(arguments)},clear:function(e){return this.first=this.last=null,this.callParent([e])},unlinkEntry:function(e){e&&(e.next?e.next.prev=e.prev:this.last=e.prev,e.prev?e.prev.next=e.next:this.first=e.next,e.prev=e.next=null)},moveToEnd:function(e){this.unlinkEntry(e),(e.prev=this.last)?this.last.next=e:this.first=e,this.last=e},getArray:function(e){for(var t=[],i=this.first;i;)t.push(e?i.key:i.value),i=i.next;return t},each:function(e,t,i){var n=i?this.last:this.first,r=this.length;for(t=t||this;n&&!1!==e.call(t,n.key,n.value,r);)n=i?n.prev:n.next;return this},findKey:function(e){var t,i=this.map;for(t in i)if(i.hasOwnProperty(t)&&i[t].value===e)return t},clone:function(){var e,t=new this.self(this.initialConfig),i=this.map;for(e in t.suspendEvents(),i)i.hasOwnProperty(e)&&t.add(e,i[e].value);return t.resumeEvents(),t},prune:function(){var e=this.getMaxSize(),t=e?this.length-e:0;if(0<t)for(;this.first&&t;t--)this.removeAtKey(this.first.key)}}),Ext.define("Ext.ComponentQuery",{singleton:!0,requires:["Ext.ComponentManager","Ext.util.Operators","Ext.util.LruCache"]},function(){function c(e,t){return t.method.apply(this,[e].concat(t.args))}function h(e,t){for(var i,n=[],r=0,o=e.length,a=">"!==t;r<o;r++)(i=e[r]).getRefItems&&(n=n.concat(i.getRefItems(a)));return n}function f(e){for(var t,i=[],n=0,r=e.length;n<r;n++)for(t=e[n];t=t.getRefOwner();)i.push(t);return i}function p(e,t,i){if("*"===t)return e.slice();for(var n,r=[],o=0,a=e.length;o<a;o++)!(n=e[o]).destroyed&&n.isXType(t,i)&&r.push(n);return r}function m(e,t,i){for(var n,r=[],o=0,a=e.length;o<a;o++)n=e[o],(i?n.id:n.getItemId())===t&&r.push(n);return r}var g=this,x=Ext.util.Operators,d=/(\d*)n\+?(\d*)/,u=/\D/,y=/^(\s)+/,v=/\\(.)/g,l=new Ext.util.LruCache({maxSize:100}),e=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),E=/^(\s?([>\^])\s?|\s|$)/,b=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,C=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:p,argTransform:function(e){var t=e[0];return Ext.log.warn('"'+t+'" ComponentQuery selector style is deprecated, use "'+t.replace(/^\./,"")+'" without the leading dot instead'),void 0!==e[1]&&(e[1]=e[1].replace(v,"$1")),e.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:function(e,t,i,n){var r,o,a,s,l,d,u,c,h=[],f=e.length;for("@"===t.charAt(0)&&(r=!0,t=t.substr(1)),"?"===t.charAt(0)&&(o=r=!0,t=t.substr(1)),d=0;d<f;d++){if(l=(a=e[d]).self&&a.self.getConfigurator&&a.self.$config.configs[t])s=a[l.names.get]();else{if(r&&!a.hasOwnProperty(t))continue;s=a[t]}if(o)h.push(a);else if("~="===i){if(s)for(Ext.isArray(s)||(s=s.split(" ")),u=0,c=s.length;u<c;u++)if(x[i](Ext.coerce(s[u],n),n)){h.push(a);break}}else"/="===i?null!=s&&n.test(s)&&h.push(a):(n?x[i](Ext.coerce(s,n),n):s)&&h.push(a)}return h},argTransform:function(e){var t=e[0],i=e[1],n=e[2],r=e[4];if(void 0!==r){r=r.replace(v,"$1");var o,a=Ext.String.format,s="ComponentQuery selector '{0}' has an unescaped ({1}) character at the {2} of the attribute value pattern. Usually that indicates an error where the opening quote is not followed by the closing quote. If you need to match a ({1}) character at the {2} of the attribute value, escape the quote character in your pattern: (\\{1})";(o=/^(['"]).*?[^'"]$/.exec(r))?Ext.log.warn(a(s,t,o[1],"beginning")):(o=/^[^'"].*?(['"])$/.exec(r))&&Ext.log.warn(a(s,t,o[1],"end"))}return"/="===n&&(r=l.get(r)||l.add(r,new RegExp(r))),[i,n,r]}},{re:/^#((?:\\\.|[\w\-])+)/,method:m},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:function(e,t,i){return g.pseudos[t](e,i)},argTransform:function(e){return void 0!==e[2]&&(e[2]=e[2].replace(v,"$1")),e.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:e}];g.Query=Ext.extend(Object,{constructor:function(e){e=e||{},Ext.apply(this,e)},execute:function(e){var t,i,n,r=this.operations,o=[];for(i=0,n=r.length;i<n;i++)t=r[i],o=o.concat(this._execute(e,t));return o},_execute:function(e,t){var i,n,r=0,o=t.length;for(e?Ext.isIterable(e)?n=e:e.isMixedCollection&&(n=e.items):n=Ext.ComponentManager.getAll();r<o;r++)if(n="^"===(i=t[r]).mode?f(n||[e]):i.mode?h(n||[e],i.mode):c(n||h([e]),i),r===o-1)return n;return[]},is:function(e,t){var i,n,r=this.operations,o=!1,a=r.length;if(0===a)return!0;for(n=0;n<a;n++)if(i=r[n],o=this._is(e,t,i))return o;return!1},_is:function(e,t,i){var n,r,o,a,s,l,d=i.length,u=[e];for(r=d-1;0<=r;--r){if(a=(n=i[r]).mode)if("^"===a)u=h(u," ");else if(">"===a){for(s=[],o=0,d=u.length;o<d;++o)(l=u[o].getRefOwner())&&s.push(l);u=s}else u=f(u);else u=c(u,n);if(0===u.length)return!1}return!t||(a||(u=f(u)),0<u.length&&(u=c(u,{method:m,args:[t.id,!0]})),0!==u.length)},getMatches:function(e,t){var i,n=t.length;for(i=0;i<n&&0!==(e=c(e,t[i])).length;++i);return e},isMultiMatch:function(){return 1<this.operations.length}}),Ext.apply(g,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(e,t){for(var i,n=0,r=e.length,o=[],a=-1;n<r;++n)i=e[n],g.is(i,t)||(o[++a]=i);return o},first:function(e){var t=[];return 0<e.length&&t.push(e[0]),t},last:function(e){var t=e.length,i=[];return 0<t&&i.push(e[t-1]),i},focusable:function(e){for(var t,i=e.length,n=[],r=0;r<i;r++)(t=e[r]).isFocusable&&t.isFocusable()&&n.push(t);return n},canfocus:function(e,t){for(var i,n=e.length,r=[],o=0;o<n;o++)(i=e[o]).canFocus&&i.canFocus(!1,t)&&r.push(i);return r},"nth-child":function(e,t){var i,n,r,o,a,s,l=[];for(n=+((i=d.exec(("even"===t?"2n":"odd"===t&&"2n+1")||!u.test(t)&&"n+"+t||t))[1]||1),o=+i[2],r=0;a=e[r];r++)s=r+1,1==n?0!=o&&s!==o||l.push(a):(s+o)%n==0&&l.push(a);return l},scrollable:function(e){for(var t,i=e.length,n=[],r=0;r<i;r++)((t=e[r]).scrollable||t._scrollable)&&n.push(t);return n},visible:function(e,t){var i,n=e.length,r=[],o=0;for(t="true"===t;o<n;o++)(i=e[o]).isVisible(t)&&r.push(i);return r}},query:function(e,t){if(!e)return Ext.ComponentManager.getAll();var i,n,r,o=[],a=[],s={},l=g.cache.get(e);if(o=(l=l||g.cache.add(e,g.parse(e))).execute(t),l.isMultiMatch()){for(i=o.length,r=0;r<i;r++)s[(n=o[r]).id]||(a.push(n),s[n.id]=!0);o=a}return o},visitPreOrder:function(e,t,i,n,r){g._visit(!0,e,t,i,n,r)},visitPostOrder:function(e,t,i,n,r){g._visit(!1,e,t,i,n,r)},_visit:function(e,t,i,n,r,o){var a,s,l,d=g.cache.get(t),u=[i],c=0;if(l=(d=d||g.cache.add(t,g.parse(t))).is(i),i.getRefItems&&(c=(a=i.getRefItems()).length),o&&Ext.Array.push(u,o),e&&l&&!1===n.apply(r||i,u))return!1;for(s=0;s<c;s++)if(!1===g._visit.call(g,e,t,a[s],n,r,o))return!1;return!(!e&&l&&!1===n.apply(r||i,u))&&void 0},is:function(e,t,i){return!t||("function"==typeof t?t(e):(g.cache.get(t)||g.cache.add(t,g.parse(t))).is(e,i))},parse:function(e){var t,i,n,r,o=[];for(n=0,r=(t=Ext.splitAndUnescape(e,",")).length;n<r;n++)""===(i=Ext.String.trim(t[n]))&&Ext.raise('Invalid ComponentQuery selector: ""'),o.push(g._parse(i));return new g.Query({operations:o})},_parse:function(e){for(var t,i,n,r,o,a,s,l,d,u,c,h=[],f=Ext.String.trim,g=C.length;e&&t!==e;){for((i=(t=e).match(b))&&(r=i[1],n=f(i[2]).replace(v,"$1"),"#"===r?h.push({method:m,args:[n]}):h.push({method:p,args:[n,Boolean(i[3])]}),e=e.replace(i[0],"").replace(y,"$1"));!(o=e.match(E));)for(l=0;e&&l<g;l++){if(d=C[l],a=e.match(d.re),u=d.method,s=d.argTransform,a){c=s?s(a):a.slice(1),h.push({method:Ext.isString(d.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[u].concat(a.slice(1)))):d.method,args:c}),e=e.replace(a[0],"").replace(y,"$1");break}l===g-1&&Ext.raise('Invalid ComponentQuery selector: "'+e+'"')}o[1]&&(h.push({mode:o[2]||o[1]}),e=e.replace(o[0],"").replace(y,""))}return h}}),Ext.all=function(){return g.query.apply(g,arguments)},Ext.first=function(){var e=g.query.apply(g,arguments);return e&&e[0]||null}}),Ext.define("Ext.Evented",{alternateClassName:"Ext.EventedBase",mixins:["Ext.mixin.Observable"],initialized:!1,constructor:function(e){this.callParent(),this.mixins.observable.constructor.call(this,e),this.initialized=!0},onClassExtended:function(e,t){if(t.hasOwnProperty("eventedConfig")){var i,n,r=t.config,o=t.eventedConfig;for(i in r?Ext.applyIf(r,o):e.addConfig(o),o)o.hasOwnProperty(i)&&(t[(n=Ext.Config.get(i)).names.set]=n.eventedSetter||n.getEventedSetter())}}}),Ext.define("Ext.util.Positionable",{mixinId:"positionable",_positionTopLeft:["position","top","left"],clippedCls:Ext.baseCSSPrefix+"clipped",afterSetPosition:Ext.emptyFn,getAnchorToXY:function(){Ext.raise("getAnchorToXY is not implemented in "+this.$className)},getBorderPadding:function(){Ext.raise("getBorderPadding is not implemented in "+this.$className)},getLocalX:function(){Ext.raise("getLocalX is not implemented in "+this.$className)},getLocalXY:function(){Ext.raise("getLocalXY is not implemented in "+this.$className)},getLocalY:function(){Ext.raise("getLocalY is not implemented in "+this.$className)},getX:function(){Ext.raise("getX is not implemented in "+this.$className)},getXY:function(){Ext.raise("getXY is not implemented in "+this.$className)},getY:function(){Ext.raise("getY is not implemented in "+this.$className)},setLocalX:function(){Ext.raise("setLocalX is not implemented in "+this.$className)},setLocalXY:function(){Ext.raise("setLocalXY is not implemented in "+this.$className)},setLocalY:function(){Ext.raise("setLocalY is not implemented in "+this.$className)},setX:function(){Ext.raise("setX is not implemented in "+this.$className)},setXY:function(){Ext.raise("setXY is not implemented in "+this.$className)},setY:function(){Ext.raise("setY is not implemented in "+this.$className)},adjustForConstraints:function(e,t){var i=this.getConstrainVector(t,e);return i&&(e[0]+=i[0],e[1]+=i[1]),e},alignTo:function(e,t,i,n){var r=this.el;return this.setXY(this.getAlignToXY(e,t,i),!(!r.anim||!n)&&r.anim(n))},calculateAnchorXY:function(e,t,i,n){var r=this.getRegion();return r.setPosition(0,0),r.translateBy(t||0,i||0),n&&(r.setWidth(n.width),r.setHeight(n.height)),r.getAnchorPoint(e)},convertPositionSpec:function(e){return Ext.util.Region.getAlignInfo(e)},getAlignToXY:function(e,t,i){var n=this.getAlignToRegion(e,t,i);return[n.x,n.y]},getAlignToRegion:function(e,t,i,n){var r,o,a;return(e=Ext.fly(e.el||e))&&e.dom||Ext.raise({sourceClass:"Ext.util.Positionable",sourceMethod:"getAlignToXY",msg:"Attempted to align an element that doesn't exist"}),(t=this.convertPositionSpec(t)).constrain&&(r="!"===t.constrain?e:this.constrainTo||this.container||this.el.parent(),r=Ext.fly(r.el||r).getConstrainRegion()),e===Ext.getBody()&&(o=e.getScroll(),a=i&&2===i.length?i:[0,0],i=[o.left+a[0],o.top+a[1]]),this.getRegion().alignTo({target:e.getRegion(),inside:r,minHeight:n,offset:i,align:t,axisLock:!0})},getAnchorXY:function(e,t,i){var n=this.getRegion(),r=this.el,o="BODY"===r.dom.nodeName||9===r.dom.nodeType,a=r.getScroll();return t?n.setPosition(0,0):o&&n.setPosition(a.left,a.top),i&&(n.setWidth(i.width),n.setHeight(i.height)),n.getAnchorPoint(e)},getBox:function(e,t){var i,n,r,o,a,s=t?this.getLocalXY():this.getXY(),l=s[0],d=s[1];return n="BODY"===this.el.dom.nodeName||9===this.el.dom.nodeType?(i=Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight()):(i=this.getWidth(),this.getHeight()),e&&(l+=o=(r=this.getBorderPadding()).beforeX,d+=a=r.beforeY,i-=o+r.afterX,n-=a+r.afterY),{x:l,left:l,0:l,y:d,top:d,1:d,width:i,height:n,right:l+i,bottom:d+n}},calculateConstrainedPosition:function(e,t,i,n){var r,o,a,s,l=this,d=l.floatParent,u=d?d.getTargetEl():null,c=!1;return i&&d?(o=u.getXY(),a=u.getBorderPadding(),o[0]+=a.beforeX,o[1]+=a.beforeY,t&&(s=[t[0]+o[0],t[1]+o[1]])):s=t,e=e||l.constrainTo||u||l.container||l.el.parent(),i&&s&&(s=l.reverseTranslateXY(s)),(r=(l.constrainHeader&&l.header.rendered?l.header:l).getConstrainVector(e,s,n))&&((c=t||l.getPosition(i))[0]+=r[0],c[1]+=r[1]),c},getConstrainRegion:function(){var e,t,i,n=this.el,r="BODY"===n.dom.nodeName,o=n.dom,a=n.getBorders(),s=n.getXY(),l=s[0]+a.beforeX,d=s[1]+a.beforeY;return i=r?(l=(e=n.getScroll()).left,d=e.top,t=Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight()):(t=o.clientWidth,o.clientHeight),new Ext.util.Region(d,l+t,d+i,l)},getConstrainVector:function(e,t,i){var n=this.getRegion(),r=[0,0],o=this.shadow&&this.constrainShadow&&!this.shadowDisabled?this.el.shadow.getShadowSize():void 0,a=!1,s=this.constraintInsets;return e instanceof Ext.util.Region||(e=(e=Ext.get(e.el||e)).getConstrainRegion()),s&&(s=Ext.isObject(s)?s:Ext.Element.parseBox(s),e.adjust(s.top,s.right,s.bottom,s.left)),t&&n.translateBy(t[0]-n.x,t[1]-n.y),i&&(n.right=n.left+i[0],n.bottom=n.top+i[1]),o&&e.adjust(o[0],-o[1],-o[2],o[3]),n.right>e.right&&(a=!0,r[0]=e.right-n.right),n.left+r[0]<e.left&&(a=!0,r[0]=e.left-n.left),n.bottom>e.bottom&&(a=!0,r[1]=e.bottom-n.bottom),n.top+r[1]<e.top&&(a=!0,r[1]=e.top-n.top),!!a&&r},getOffsetsTo:function(e){var t=this.getXY(),i=e.isRegion?[e.x,e.y]:Ext.fly(e.el||e).getXY();return[t[0]-i[0],t[1]-i[1]]},getRegion:function(e,t){var i=this.getBox(e,t);return new Ext.util.Region(i.top,i.right,i.bottom,i.left)},getClientRegion:function(){var e,t,i=this.el,n=i.dom,r=this.getBox(!0),o=n.offsetHeight>n.clientHeight,a=n.offsetWidth>n.clientWidth;return(o||a)&&(t=Ext.getScrollbarSize(),a&&(a=t.width,"rtl"===i.getStyle("direction")&&!Ext.supports.rtlVertScrollbarOnRight?(e=i.getPadding("l"),r.left-=e+Math.max(e,a)):(e=i.getPadding("r"),r.right+=e-Math.max(e,a))),o&&(o=t.height,e=i.getPadding("b"),r.bottom+=e-Math.max(e,o))),new Ext.util.Region(r.top,r.right,r.bottom,r.left)},getViewRegion:function(){var e,t,i,n,r,o,a,s=this.el;return a="BODY"===s.dom.nodeName?(r=(t=s.getScroll()).left,n=t.top,o=Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight()):(e=this.getBorderPadding(),r=(i=this.getXY())[0]+e.beforeX,n=i[1]+e.beforeY,o=this.getWidth(!0),this.getHeight(!0)),new Ext.util.Region(n,r+o,n+a,r)},move:function(e,t,i){var n=this.getXY(),r=n[0],o=n[1],a=[r-t,o],s=[r+t,o],l=[r,o-t],d=[r,o+t],u={l:a,left:a,r:s,right:s,t:l,top:l,up:l,b:d,bottom:d,down:d};e=e.toLowerCase(),this.setXY([u[e][0],u[e][1]],i)},setBox:function(e){var t,i;return e.isRegion&&(e={x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}),this.constrainBox(e),t=e.x,i=e.y,this.setXY([t,i]),this.setSize(e.width,e.height),this.afterSetPosition(t,i),this},constrainBox:function(e){var t,i,n;(this.constrain||this.constrainHeader)&&(i="x"in e?e.x:e.left,n="y"in e?e.y:e.top,(t=this.calculateConstrainedPosition(null,[i,n],!1,[e.width,e.height]))&&(e.x=t[0],e.y=t[1]))},translatePoints:function(e,t){var i=this.translateXY(e,t);return{left:i.x,top:i.y}},translateXY:function(e,t){var i=this.el,n=i.getStyle(this._positionTopLeft),r="relative"===n.position,o=parseFloat(n.left),a=parseFloat(n.top),s=this.getXY();return Ext.isArray(e)&&(t=e[1],e=e[0]),isNaN(o)&&(o=r?0:i.dom.offsetLeft),isNaN(a)&&(a=r?0:i.dom.offsetTop),{x:o="number"==typeof e?e-s[0]+o:void 0,y:a="number"==typeof t?t-s[1]+a:void 0}},reverseTranslateXY:function(e){var t,i,n,r,o=e,a=this.el,s=a.dom.offsetParent;return s&&(t=a.isStyle("position","relative"),i=Ext.fly(s).getXY(),n=e[0]+i[0]+s.clientLeft,r=e[1]+i[1]+s.clientTop,t&&(n+=a.getPadding("l"),r+=a.getPadding("t")),o=[n,r]),o},privates:{clipTo:function(e,t){var i,n,r,o,a,s,l=this.el,d=l.getRegion(),u=[],c=this.clippedCls;for(i=e.isRegion?e:(e.isComponent?e.el:Ext.fly(e)).getConstrainRegion(),1&(t=t||15)&&0<(n=i.top-d.top)?(u[0]=n,a=!0):u[0]=-1e4,2&t&&0<(n=d.right-i.right)?(u[1]=Math.max(0,l.getWidth()-n),a=!0):u[1]=1e4,4&t&&0<(n=d.bottom-i.bottom)?(u[2]=Math.max(0,l.getHeight()-n),a=!0):u[2]=1e4,8&t&&0<(n=i.left-d.left)?(u[3]=n,a=!0):u[3]=-1e4,o="rect(",r=0;r<4;++r)o+=Ext.Element.addUnits(u[r],"px"),o+=3===r?")":",";if(l.dom.style.clip=o,l.addCls(c),(s=l.shadow)&&(l=s.el)&&l.dom){for(u[2]-=s.offsets.y,u[3]-=s.offsets.x,o="rect(",r=0;r<4;++r)o+=Ext.Element.addUnits(u[r],"px"),o+=3===r?")":",";l.dom.style.clip=o,a&&!Ext.supports.CSS3BoxShadow?l.dom.style.display="none":(l.dom.style.display="",l.addCls(c))}},clearClip:function(){var e=this.el,t=this.clippedCls;e.dom.style.clip=Ext.isIE8?"auto":"",e.removeCls(t),e.shadow&&e.shadow.el&&e.shadow.el.dom&&(e.shadow.el.dom.style.clip=Ext.isIE8?"auto":"",Ext.supports.CSS3BoxShadow||(e.dom.style.display="",e.removeCls(t)))}}}),Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(e,t,i,n,r,o){function a(){s.mixins.positionable.alignTo.call(s,e,t,i,n),Ext.callback(o,s)}var s=this,l=!Ext.isEmpty(r),d=s.getAnchor();return s.removeAnchor(),Ext.apply(d,{fn:a,scroll:l}),Ext.on("resize",a,null),l&&Ext.getWin().on("scroll",a,null,{buffer:isNaN(r)?50:r}),a(),s},getAnchor:function(){var e,t=this.el;if(t&&t.dom)return(e=t.getData())._anchor||(e._anchor={})},alignTo:function(e,t,i,n){var r,o,a=this,s=a.el;return a.isComponent&&a.getSizeModel().height.shrinkWrap&&(a.maxHeight&&a.setMaxHeight(null),r=!0),o=a.getAlignToRegion(e,t,i,a.minHeight||150),a.setXY([o.x,o.y],!(!s.anim||!n)&&s.anim(n)),r&&(r=o.getHeight())!==a.getHeight()&&a.setMaxHeight(r),a},removeAnchor:function(){var e=this.getAnchor();return e&&e.fn&&(Ext.un("resize",e.fn),e.scroll&&Ext.getWin().on("scroll",e.fn),delete e.fn),this},setBox:function(e,t){return e.isRegion&&(e={x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}),t?(this.constrainBox(e),this.animate(Ext.applyIf({to:e,listeners:{afteranimate:Ext.Function.bind(this.afterSetPosition,this,[e.x,e.y])}},t))):this.callParent([e]),this}}),Ext.define("Ext.dom.UnderlayPool",{constructor:function(e){this.elementConfig=e,this.cache=[]},checkOut:function(){var e=this.cache.shift();return e||((e=Ext.Element.create(this.elementConfig)).setVisibilityMode(2),e.dom.setAttribute("data-sticky",!0)),e},checkIn:function(e){this.cache.push(e),Ext.getDetachedBody().dom.appendChild(e.dom)},reset:function(){for(var e=this.cache,t=e.length;t--;)e[t].destroy();this.cache=[]}}),Ext.define("Ext.dom.Underlay",{requires:["Ext.dom.UnderlayPool"],constructor:function(e){Ext.apply(this,e)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var e=this.el;e&&(e.dom&&(e.hide(),this.getPool().checkIn(e)),this.el=null),this.hidden=!0},realign:function(e,t,i,n){var r=this.el,o=this.target,a=this.offsets,s=Math.max;r&&(null==e&&(e=o.getX()),null==t&&(t=o.getY()),null==i&&(i=o.getWidth()),null==n&&(n=o.getHeight()),a&&(e+=a.x,t+=a.y,i=s(i+a.w,0),n=s(n+a.h,0)),r.setXY([e,t]),r.setSize(i,n))},setZIndex:function(e){this.zIndex=e,this.el&&this.el.setStyle("z-index",e)},show:function(){var e,t=this,i=t.target,n=t.zIndex,r=t.el,o=t.getInsertionTarget().dom;r=r||(t.el=t.getPool().checkOut()),t.beforeShow(),null==n&&(n=parseInt(i.getStyle("z-index"),10)),n&&r.setStyle("z-index",n),r.setStyle("position",t.fixed?"fixed":""),(e=r.dom).nextSibling!==o&&i.dom.parentNode.insertBefore(e,o),r.show(),t.realign(),t.hidden=!1}}),Ext.define("Ext.dom.Shadow",{extend:"Ext.dom.Underlay",alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:Ext.baseCSSPrefix+(Ext.supports.CSS3BoxShadow?"css":"ie")+"-shadow",constructor:function(e){var t,i,n,r;switch(this.callParent([e]),this.elementConfig={cls:this.cls,role:"presentation"},n=this.offset,r=Math.floor(n/2),this.opacity=50,this.mode.toLowerCase()){case"drop":t={x:0,y:0,w:n,h:n},i=Ext.supports.CSS3BoxShadow?{x:n,y:n,h:-n,w:-n}:{x:-r,y:-r,h:-r,w:-r};break;case"sides":t={x:-n,y:0,w:2*n,h:n},i=Ext.supports.CSS3BoxShadow?{x:0,y:n,h:-n,w:0}:{x:1+r-2*n,y:-(1+r),h:-1,w:r-1};break;case"frame":t={x:-n,y:-n,w:2*n,h:2*n},i=Ext.supports.CSS3BoxShadow?{x:0,y:0,h:0,w:0}:{x:1+r-2*n,y:1+r-2*n,h:n-r-1,w:n-r-1};break;case"bottom":t={x:-n,y:0,w:2*n,h:n},i=Ext.supports.CSS3BoxShadow?{x:0,y:n,h:-n,w:0}:{x:0,y:n,h:0,w:0}}this.offsets=i,this.outerOffsets=t},getShadowSize:function(){var e=this.el?this.offset:0,t=[e,e,e,e],i=this.mode.toLowerCase();return this.el&&"frame"!==i&&(t[0]=0,"drop"===i&&(t[3]=0)),t},boxShadowProperty:function(){var e="boxShadow",t=document.documentElement.style;return"boxShadow"in t||("WebkitBoxShadow"in t?e="WebkitBoxShadow":"MozBoxShadow"in t&&(e="MozBoxShadow")),e}(),beforeShow:function(){var e=this.el.dom.style,t=this.shim;Ext.supports.CSS3BoxShadow?e[this.boxShadowProperty]="0 0 "+(this.offset+2)+"px #888":e.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+this.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")",t&&t.realign()},setOpacity:function(e){var t=this.el;t&&(Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(e=Math.floor(100*e/2)/100),this.opacity=e,t.setOpacity(e))}}),Ext.define("Ext.dom.Shim",{extend:"Ext.dom.Underlay",cls:Ext.baseCSSPrefix+"shim",constructor:function(e){this.callParent([e]),this.elementConfig={tag:"iframe",cls:this.cls,role:"presentation",frameBorder:"0",src:Ext.SSL_SECURE_URL,tabindex:"-1"}},getInsertionTarget:function(){var e=this.shadow;return e&&e.el||this.target}}),Ext.define("Ext.dom.ElementEvent",{extend:"Ext.util.Event",addListener:function(e,t,i,n,r){var o=this,a=o.name,s=Ext.event.publisher.Dom.instance.directEvents[a];return!1===(i=i||{}).delegated||s?(s&&i.delegate&&(i.capture=!0),i.capture?(o.directCaptures||(o.directCaptures=new Ext.util.Event(o.observable,a))).addListener(e,t,i,n,r):(o.directs||(o.directs=new Ext.util.Event(o.observable,a))).addListener(e,t,i,n,r)):i.capture?(o.captures||(o.captures=new Ext.util.Event(o.observable,a))).addListener(e,t,i,n,r):o.callParent([e,t,i,n,r])},removeListener:function(e,t){var i=this.captures,n=this.directs,r=this.directCaptures,o=!1,a=this.findListener(e,t);return-1!==a?o=this.callParent([e,t,a]):(n&&(a=n.findListener(e,t)),-1!==a?o=n.removeListener(e,t,a):(i&&(a=i.findListener(e,t)),-1!==a?o=i.removeListener(e,t,a):r&&-1!==(a=r.findListener(e,t))&&(o=r.removeListener(e,t,a)))),o},clearListeners:function(){var e=this.directCaptures,t=this.directs,i=this.captures;e&&e.clearListeners(),t&&t.clearListeners(),i&&i.clearListeners(),this.callParent()},suspend:function(){var e=this.directCaptures,t=this.directs,i=this.captures;e&&e.suspend(),t&&t.suspend(),i&&i.suspend(),this.callParent()},resume:function(){var e=this.directCaptures,t=this.directs,i=this.captures;e&&e.resume(),t&&t.resume(),i&&i.resume(),this.callParent()}}),Ext.define("Ext.event.publisher.Publisher",{isEventPublisher:!0,$vetoClearingPrototypeOnDestroy:!0,handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var e=this.type;this.handles={},e||Ext.raise("Event publisher '"+this.$className+"' defined without a 'type' property."),this.self.instance&&Ext.raise("Cannot create multiple instances of '"+this.$className+"'. Use '"+this.$className+".instance' to retrieve the singleton instance."),this.registerEvents(),Ext.event.publisher.Publisher.publishers[e]=this},registerEvents:function(e){var t,i,n=Ext.event.publisher.Publisher.publishersByEvent,r=e||this.handledEvents,o=r.length;for(i=0;i<o;i++)t=r[i],this.handles[t]=1,n[t]=this},subscribe:function(){Ext.raise("Ext.event.publisher.Publisher subclass '"+this.$className+'" has no subscribe method.')},unsubscribe:function(){Ext.raise("Ext.event.publisher.Publisher subclass '"+this.$className+'" has no unsubscribe method.')},fire:function(e,t,i){var n;e.hasListeners[t]&&(n=e.events[t])&&n.fire.apply(n,i)}}),Ext.define("Ext.util.Offset",{statics:{fromObject:function(e){return e instanceof this?e:"number"==typeof e?new this(e,e):e.length?new this(e[0],e[1]):new this(e.x,e.y)}},constructor:function(e,t){return this.x=null==e||isNaN(e)?0:e,this.y=null==t||isNaN(t)?0:t,this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(e){this.x=e.x,this.y=e.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(e){return e instanceof this.statics()||Ext.raise("Offset must be an instance of Ext.util.Offset"),this.x===e.x&&this.y===e.y},add:function(e){e instanceof this.statics()||Ext.raise("Offset must be an instance of Ext.util.Offset"),this.x+=e.x,this.y+=e.y},round:function(e){var t;isNaN(e)?(this.x=Math.round(this.x),this.y=Math.round(this.y)):(t=Math.pow(10,e),this.x=Math.round(this.x*t)/t,this.y=Math.round(this.y*t)/t)},isZero:function(){return 0===this.x&&0===this.y}}),Ext.define("Ext.util.Region",function(){function C(e,t,i,n,r){var o,a,s,l,d,u,c,h=Math.ceil(n.x),f=Math.ceil(h/2)+3;if((!r||r.intersect(e))&&null!=i){if(1&i){if(t.getHeight()<h+4)return;o=e.top+f-t.height,a=e.bottom-f-1,t.setPosition(t.x,Math.min(Math.max(t.y,o),a)),o=t.top+2,a=t.bottom-(h+2),u=(l=3===i)?t.right:t.left,d=new A.Region(Math.max(t.top,e.top),u,Math.min(t.bottom,e.bottom),u),(s=new A.Region(0,0,0,0).setWidth(n.y).setHeight(h).alignTo({target:d,align:l?"l-r":"r-l",overlap:!0})).setPosition(s.x,Math.min(Math.max(s.y,o),a)),s.position=l?"right":"left"}else{if(t.getWidth()<h+4)return;o=e.left+f-t.width,a=e.right-f-1,t.setPosition(Math.min(Math.max(t.x,o),a),t.y),o=t.left+2,a=t.right-(h+2),c=(l=0===i)?t.bottom:t.top,d=new A.Region(c,Math.min(t.right,e.right),c,Math.max(t.left,e.left)),(s=new A.Region(0,0,0,0).setWidth(h).setHeight(n.y).alignTo({target:d,align:l?"t-b":"b-t",overlap:!0})).setPosition(Math.min(Math.max(s.x,o),a),s.y),s.position=l?"bottom":"top"}if(r&&!r.contains(s))return;t.anchor=s,t.anchor.align=i}}var A=Ext.util,a=/([^\?!]*)(!|\?)?$/,s=/^(?:(?:([trbl])(\d+))|(tl|t|tc|tr|l|c|r|bl|b|bc|br))(?:-(?:(?:([trbl])(\d+))|(tl|t|tc|tr|l|c|r|bl|b|bc|br)))?$/i,l={l:0,r:100,t:0,b:100,c:50},d={l:100,r:0,t:0,b:100,c:50},u={b:0,l:1,t:2,r:3},c={"tl-tr":"l0-r0","tl-r":"l0-r50","bl-r":"l100-r50","bl-br":"l100-r100","tr-tl":"r0-l0","tr-l":"r0-l50","br-l":"r100-l50","br-bl":"r100-l100"},h={"tl-tr":"r0-l0","tl-r":"r0-l50","bl-r":"r100-l50","bl-br":"r100-l100","tr-tl":"l0-r0","tr-l":"l0-r50","br-l":"l100-r50","br-bl":"l100-r100"},S=[],D=new A.Offset(0,0),w=[-1,1,1,-1];return{requires:["Ext.util.Offset"],isRegion:!0,statics:{getRegion:function(e){return Ext.fly(e).getRegion()},from:function(e){return new this(e.top,e.right,e.bottom,e.left)},getAlignInfo:function(e,t){if("object"==typeof e)return e;e=e?e.indexOf("-")<0?"tl-"+e:e:"tl-bl",e=(i=a.exec(e))[1],e=(t?h:c)[e]||e;var i,n,r=t?d:l,o=s.exec(e);return o||Ext.raise({sourceClass:"Ext.util.Region",sourceMethod:"getAlignInfo",position:e,msg:'Attempted to align an element with an invalid position: "'+e+'"'}),n={myEdge:o[1],myOffset:o[2],otherEdge:o[4],otherOffset:o[5],constrain:i[2]},o[3]&&(n.myEdge=o[3][0],n.myOffset=r[o[3][1]],null==n.myOffset&&(n.myOffset=50)),o[6]&&(n.otherEdge=o[6][0],n.otherOffset=r[o[6][1]],null==n.otherOffset&&(n.otherOffset=50)),n.position=u[n.myEdge],n}},constructor:function(e,t,i,n){var r=this;r.y=r.top=r[1]=e,r.right=t,r.bottom=i,r.x=r.left=r[0]=n,r.height=r.bottom-r.top,r.width=r.right-r.left},setPosition:function(e,t){return 1===arguments.length&&(t=e[1],e=e[0]),this.translateBy(e-this.x,t-this.y)},contains:function(e){return e.x>=this.x&&(e.right||e.x)<=this.right&&e.y>=this.y&&(e.bottom||e.y)<=this.bottom},intersect:function(e){var t=Math.max(this.y,e.y),i=Math.min(this.right,e.right),n=Math.min(this.bottom,e.bottom),r=Math.max(this.x,e.x);return t<n&&r<i&&new this.self(t,i,n,r)},union:function(e){var t=Math.min(this.y,e.y),i=Math.max(this.right,e.right),n=Math.max(this.bottom,e.bottom),r=Math.min(this.x,e.x);return new this.self(t,i,n,r)},constrainTo:function(e){var t=this,i=Ext.Number.constrain;return t.top=t.y=i(t.top,e.y,e.bottom),t.bottom=i(t.bottom,e.y,e.bottom),t.left=t.x=i(t.left,e.x,e.right),t.right=i(t.right,e.x,e.right),t.height=t.bottom-t.top,t.width=t.right-t.left,t},adjust:function(e,t,i,n){var r=this;return r.top=r.y+=e||0,r.left=r.x+=n||0,r.right+=t||0,r.bottom+=i||0,r.height=r.bottom-r.top,r.width=r.right-r.left,r},getOutOfBoundOffset:function(e,t){var i;return Ext.isObject(e)?(t=e,(i=new A.Offset).x=this.getOutOfBoundOffsetX(t.x),i.y=this.getOutOfBoundOffsetY(t.y),i):"x"===e?this.getOutOfBoundOffsetX(t):this.getOutOfBoundOffsetY(t)},getOutOfBoundOffsetX:function(e){return e<=this.x?this.x-e:e>=this.right?this.right-e:0},getOutOfBoundOffsetY:function(e){return e<=this.y?this.y-e:e>=this.bottom?this.bottom-e:0},isOutOfBound:function(e,t){return Ext.isObject(e)?(t=e,this.isOutOfBoundX(t.x)||this.isOutOfBoundY(t.y)):"x"===e?this.isOutOfBoundX(t):this.isOutOfBoundY(t)},isOutOfBoundX:function(e){return e<this.x||e>this.right},isOutOfBoundY:function(e){return e<this.y||e>this.bottom},restrict:function(e,t,i){var n;return Ext.isObject(e)?(i=t,(n=(t=e).copy?t.copy():{x:t.x,y:t.y}).x=this.restrictX(t.x,i),n.y=this.restrictY(t.y,i),n):"x"===e?this.restrictX(t,i):this.restrictY(t,i)},restrictX:function(e,t){return t=t||1,e<=this.x?e-=(e-this.x)*t:e>=this.right&&(e-=(e-this.right)*t),e},restrictY:function(e,t){return t=t||1,e<=this.y?e-=(e-this.y)*t:e>=this.bottom&&(e-=(e-this.bottom)*t),e},alignTo:function(e){var t,i,n,r,o,a,s,l,d=this.self,u=A.Offset,c=Ext.Element,h=function(e){var t,i,n,r,o=A.Region,a=typeof e;if(null==e)return o.EMPTY;if(e.isRegion)return e;if(e.isElement||1===e.nodeType)return this.getRegion(e);if("string"==a){switch((e=e.split(" ")).length){case 1:e[1]=e[2]=e[3]=e[0];break;case 2:e[2]=e[0],e[3]=e[1];break;case 3:e[3]=e[1]}t=parseInt(e[0],10)||0,i=parseInt(e[1],10)||0,n=parseInt(e[2],10)||0,r=parseInt(e[3],10)||0}else"number"==a?t=i=n=r=e:"number"==typeof e.x?(t=e.y,r=e.x,n="number"==typeof e.right?(i=e.right,e.bottom):(i=r+e.width,t+e.height)):Ext.raise("Not convertible to a Region: "+e);return new o(t,i,n,r)}(e.target),f=e.rtl,g=e.overlap,p=e.align,m=e.anchorSize,x=e.offset,y=e.inside,v=e.position,E=e.allowXTranslate,b=e.allowYTranslate;return x&&((x=u.fromObject(x))instanceof u||Ext.raise("offset option must be an Ext.util.Offset")),m&&((m=u.fromObject(m))instanceof u||Ext.raise("anchorSize option must be an Ext.util.Offset")),y&&!y.isRegion&&(y=Ext.getDom(y)===document.body?new d(0,c.getDocumentWidth(),c.getDocumentHeight(),0):Ext.fly(y).getRegion()),v?(2===v.length&&(v=new A.Point(v[0],v[1])),n=(new d).copyFrom(this).setPosition(v.x,v.y)):(p=this.getAlignInfo(p,f),y&&(h.x>=y.right?(h.setPosition(y.right-1,h.y),3!==p.position&&(p=this.getAlignInfo("r-l",f))):h.right<y.x&&(h.setPosition(y.x-h.getWidth()+1,h.y),1!==p.position&&(p=this.getAlignInfo("l-r",f))),h.y>=y.bottom?(h.setPosition(h.x,y.bottom-1),0!==p.position&&(p=this.getAlignInfo("b-t",f))):h.bottom<y.y&&(h.setPosition(h.x,y.y-h.getHeight()+1),2!==p.position&&(p=this.getAlignInfo("t-b",f)))),t=m?(a=h,s=m,null!=(l=p.position)&&s&&(S[0]=S[1]=S[2]=S[3]=0,S[l]=s.y*w[l],(a=A.Region.from(a)).adjust.apply(a,S)),a):h,g=!!(n=d.from(this).translateBy(this.getAlignToVector(t,p))).intersect(t),!x||!g&&m||n.translateBy(x),m&&C(h,n,p.position,m,y)),y&&(r=n.copy(),n.left<y.left&&(n.translateBy(y.left-n.left,0),i=!0),n.right>y.right&&n.left>y.left&&(n.translateBy(y.right-n.right,0),i=!0),n.top<y.top&&(n.translateBy(0,y.top-n.top),i=!0),n.bottom>y.bottom&&n.top>y.top&&(n.translateBy(0,y.bottom-n.bottom),i=!0),i&&!g&&(n.anchor=null,e.axisLock&&(1&p.position?b=!1:E=!1),v?n.contains(v)&&v.exclude(n,{inside:y,centerOnSideChange:!1}):(o=n.copy(),n.intersect(t)?p.position=h.exclude(n,{initialPosition:r,defaultPosition:p.position,inside:y,minHeight:e.minHeight,minWidth:e.minWidth,allowX:E,allowY:b,offset:x,anchorHeight:m?m.y:0,centerOnSideChange:!!m}):e.minWidth&&n.getWidth()>y.getWidth()?(n.setPosition(0,n.y),n.setWidth(Math.max(y.getWidth(),e.minWidth)),n.constrainWidth=!0):e.minHeight&&n.getHeight()>y.getHeight()&&(n.setPosition(n.x,0),n.setHeight(Math.max(y.getHeight(),e.minHeight)),n.constrainHeight=!0),n.align=p,y.contains(n)?m&&C(h,n,p.position,m,y):n=o))),n},exclude:function(e,t){var i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v=this,E=(t=t||{}).initialPosition||e,b=t.inside,C=t.defaultPosition,S=t.centerOnSideChange,w=t.minHeight,T=t.minWidth,P=!1!==t.allowX,k=!1!==t.allowY,I=t.anchorHeight,R=t.offset,M=[];if(R=R||D,k?(M.push([0,v.top-e.bottom-I+R.y,"b-t",0,Math.abs(v.top-E.bottom-I+R.y)]),M.push([0,v.bottom-e.top+I+R.y,"t-b",2,Math.abs(v.bottom-E.top+I+R.y)])):S=!1,P?(M.push([v.left-e.right-I+R.x,0,"r-l",3,Math.abs(v.left-E.right-I+R.x)]),M.push([v.right-e.left+I+R.x,0,"l-r",1,Math.abs(v.right-E.left+I+R.x)])):S=!1,Ext.Array.sort(M,function(e,t){var i=e[4]-t[4];if(!i){if(e[3]===C)return-1;if(t[3]===C)return 1}return i}),!b)return e.translateBy.apply(e,M[0]),M[0][3];for(r=0;r<M.length;r++){if(n=M[r],(i=A.Region.from(e)).translateBy.apply(i,n),b.contains(i)){e.copyFrom(i),l={align:n[2],position:n[3],distance:n[4]};break}w&&(p=i,m=v,x=b,(g=w)&&x&&(p.top>=m.bottom&&p.bottom>x.bottom?(p.setHeight(Math.max(p.getHeight()+x.bottom-p.bottom,g)),p.constrainHeight=!0):p.bottom<=m.top&&p.top<x.top?(y=Math.max(p.getHeight()+p.top-x.top,g),p.adjust(p.getHeight()-y),p.constrainHeight=!0):p.getHeight()>x.getHeight()&&(p.setHeight(Math.max(g,x.getHeight())),p.setPosition(p.x,0),p.constrainHeight=!0)),b.contains(i)&&(!o||i.getArea()>o.region.getArea())&&(o={region:i,align:n[2],position:n[3],distance:n[4]})),T&&(u=i,c=v,h=b,(d=T)&&h&&(u.left>=c.right&&u.right>h.right?(u.setWidth(Math.max(u.getWidth()+h.right-u.right,d)),u.constrainWidth=!0):u.right<=c.left&&u.left<h.left?(f=Math.max(u.getWidth()+u.left-h.left,d),u.adjust(0,0,0,u.getWidth()-f),u.constrainWidth=!0):u.getWidth()>h.getWidth()&&(u.setWidth(Math.max(d,h.getWidth())),u.setPosition(0,u.y),u.constrainWidth=!0)),b.contains(i)&&(!o||i.getArea()>o.region.getArea())&&(o={region:i,align:n[2],position:n[3],distance:n[4]})),(s=b.intersect(i))&&(s=s.getArea(),(!a||s&&a.area<s)&&(a={region:i,align:n[2],position:n[3],distance:n[4],area:s}))}return l||(o?(e.copyFrom(o.region),l=o,e.constrainWidth=o.region.constrainWidth,e.constrainHeight=o.region.constrainHeight):a&&(e.copyFrom(a.region),l=a)),l?((1&l.position)!=(1&C)&&l.distance&&S&&(n=e.alignTo({align:l.align,target:v,anchorSize:I,offset:R,axisLock:!0,inside:b,minHeight:t.minHeight,minWidth:t.minWidth}),b.contains(n)&&e.setPosition(n.x,n.y)),l.position):C},getAlignToXY:function(e,t,i){var n=this.getAlignToVector(e,t,i);return[this.x+n[0],this.y+n[1]]},getAnchorPoint:function(e,t){return e="string"==typeof e?this.getAlignInfo(e+"-tl",t):e,this["getAnchorPoint_"+e.myEdge](e.myOffset)},getAlignToVector:function(e,t,i){t="string"==typeof t?this.getAlignInfo(t,i):t;var n=this["getAnchorPoint_"+t.myEdge](t.myOffset),r=e["getAnchorPoint_"+t.otherEdge](t.otherOffset);return[r[0]-n[0],r[1]-n[1]]},getAnchorPoint_t:function(e){return[this.x+Math.round(this.getWidth()*(e/100)),this.y]},getAnchorPoint_b:function(e){return[this.x+Math.round(this.getWidth()*(e/100)),this.bottom]},getAnchorPoint_l:function(e){return[this.x,this.y+Math.round(this.getHeight()*(e/100))]},getAnchorPoint_r:function(e){return[this.right,this.y+Math.round(this.getHeight()*(e/100))]},getAnchorPoint_c:function(){return[this.x+Math.round(this.getWidth()/2),this.y+Math.round(this.getHeight()/2)]},getCenter:function(){return[this.x+this.width/2,this.y+this.height/2]},getHeight:function(){return this.bottom-this.y},getWidth:function(){return this.right-this.x},getArea:function(){return this.getHeight()*this.getWidth()},setHeight:function(e){return this.height=e,this.bottom=this.top+e,this},setWidth:function(e){return this.width=e,this.right=this.left+e,this},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},setSize:function(e,t){return void 0===t&&(t=e),this.setWidth(e),this.setHeight(t)},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(e){return this.top=this.y=this[1]=e.y,this.right=e.right,this.bottom=e.bottom,this.left=this.x=this[0]=e.x,this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(e,t){return e.length?(t=e[1],e=e[0]):1===arguments.length&&(t=e.y,e=e.x),this.top=this.y+=t,this.right+=e,this.bottom+=t,this.left=this.x+=e,this},round:function(){var e=this;return e.top=e.y=Math.round(e.y),e.right=Math.round(e.right),e.bottom=Math.round(e.bottom),e.left=e.x=Math.round(e.x),e},equals:function(e){return this.top===e.top&&this.right===e.right&&this.bottom===e.bottom&&this.left===e.left},getOffsetsTo:function(e){return{x:this.x-e.x,y:this.y-e.y}},highlight:function(){var e=Ext.getBody().createChild({style:"background-color:#52a0db;opacity:0.4;position:absolute;z-index:9999999"});return e.setBox(this),Ext.defer(function(){e.destroy()},5e3),e}}},function(e){e.prototype.getAlignInfo=e.getAlignInfo,e.EMPTY=new e(0,0,0,0),Object.freeze&&Object.freeze(e.EMPTY)}),Ext.define("Ext.util.Point",{extend:"Ext.util.Region",isPoint:!0,radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(e){var t=e.changedTouches,i=t&&0<t.length?t[0]:e;return this.fromTouch(i)},fromTouch:function(e){return new this(e.pageX,e.pageY)},from:function(e){return e?e instanceof this?e:new this(e.x,e.y):new this(0,0)}},constructor:function(e,t){null==e&&(e=0),null==t&&(t=0),this.callParent([t,e,t,e])},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(e){return this.x=e.x,this.y=e.y,this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(e){return this.x===e.x&&this.y===e.y},isCloseTo:function(e,t){if("number"==typeof t)return this.getDistanceTo(e)<=t;var i=e.x,n=e.y,r=t.x,o=t.y;return this.x<=i+r&&this.x>=i-r&&this.y<=n+o&&this.y>=n-o},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(e){return e instanceof Ext.util.Region||(e=Ext.get(e.el||e).getRegion()),e.contains(this)},roundedEquals:function(e){return e&&"object"==typeof e||(e=this.origin),Math.round(this.x)===Math.round(e.x)&&Math.round(this.y)===Math.round(e.y)},getDistanceTo:function(e){e&&"object"==typeof e||(e=this.origin);var t=this.x-e.x,i=this.y-e.y;return Math.sqrt(t*t+i*i)},getAngleTo:function(e){e&&"object"==typeof e||(e=this.origin);var t=this.x-e.x,i=this.y-e.y;return Math.atan2(i,t)*this.radianToDegreeConstant}},function(){this.prototype.translate=this.prototype.translateBy}),Ext.define("Ext.event.Event",{alternateClassName:"Ext.EventObjectImpl",requires:["Ext.util.Point"],stopped:!1,claimed:!1,defaultPrevented:!1,isEvent:!0,geckoRelatedTargetEvents:{blur:1,dragenter:1,dragleave:1,focus:1},statics:{resolveTextNode:function(e){return e&&3===e.nodeType?e.parentNode:e},gestureEvents:{},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,focusin:1,focusenter:1},blurEvents:{blur:1,focusout:1,focusleave:1},wheelEvents:{wheel:1,mousewheel:1},pointerTypeMap:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"},keyEventRe:/^key/,keyFlags:{CTRL:"ctrlKey",CONTROL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",CMD:"metaKey",COMMAND:"metaKey",CMDORCTRL:Ext.isMac?"metaKey":"ctrlKey",COMMANDORCONTROL:Ext.isMac?"metaKey":"ctrlKey",META:"metaKey"},modifierGlyphs:{ctrlKey:"⌃",altKey:"⌥",metaKey:Ext.isMac?"⌘":"⊞",shiftKey:"⇧"},specialKeyGlyphs:{BACKSPACE:"⌫",TAB:"⇥",ENTER:"⏎",RETURN:"⏎",SPACE:"␣",PAGE_UP:"⇞",PAGE_DOWN:"⇟",END:"⇲",HOME:"⌂",LEFT:"←",UP:"↑",RIGHT:"→",DOWN:"↓",PRINT_SCREEN:"⎙",INSERT:"⎀",DELETE:"⌦",CONTEXT_MENU:"☰"},_hyphenRe:/^[a-z]+\-/i,getKeyId:function(e){e="number"==typeof e?this.keyCodes[e]:e.toUpperCase();var t,i,n=this._hyphenRe.test(e)?"-":"+",r=e===n?[n]:e.split(n),o=r.length-1,a=r[o],s=[];for(Ext.event.Event[a]||Ext.raise('Invalid key name: "'+a+'"'),i=0;i<o;i++)(t=this.keyFlags[r[i]])||Ext.raise('Invalid key modifier: "'+r[i]+'"'),s[t]=!0;return s.ctrlKey&&s.push(this.modifierGlyphs.ctrlKey),s.altKey&&s.push(this.modifierGlyphs.altKey),s.shiftKey&&s.push(this.modifierGlyphs.shiftKey),s.metaKey&&s.push(this.modifierGlyphs.metaKey),s.push(this.specialKeyGlyphs[a]||a),s.join("")},globalTabKeyDown:function(e){9===e.keyCode&&(Ext.event.Event.forwardTab=!e.shiftKey)},globalTabKeyUp:function(e){9===e.keyCode&&delete Ext.event.Event.forwardTab}},constructor:function(e){var t,i,n=this,r=n.self,o=n.self.resolveTextNode,a=e.changedTouches,s=a?a[0]:e,l=e.type;if(n.timeStamp=n.time=Ext.ticks(),n.pageX=s.pageX,n.pageY=s.pageY,n.clientX=s.clientX,n.clientY=s.clientY,n.target=n.delegatedTarget=o(e.target),n.currentTarget=o(e.currentTarget),i=e.relatedTarget)if(Ext.isGecko&&n.geckoRelatedTargetEvents[l])try{n.relatedTarget=o(i)}catch(e){n.relatedTarget=null}else n.relatedTarget=o(i);n.browserEvent=n.event=e,n.type=l,n.button=e.button||0,n.shiftKey=e.shiftKey,n.ctrlKey=e.ctrlKey||e.metaKey||!1,n.altKey=e.altKey,n.charCode=e.charCode,n.keyCode=e.keyCode,n.buttons=e.buttons,0===n.button&&0===n.buttons&&(n.buttons=1),r.focusEvents[l]||r.blurEvents[l]?(void 0!==r.forwardTab&&(n.forwardTab=r.forwardTab),r.focusEvents[l]?(n.fromElement=e.relatedTarget,n.toElement=e.target):(n.fromElement=e.target,n.toElement=e.relatedTarget)):"keydown"!==l&&delete r.forwardTab,r.mouseEvents[l]?t="mouse":r.clickEvents[l]?t=r.pointerTypeMap[e.pointerType]||(Ext.now()-Ext.event.publisher.Dom.lastTouchEndTime<1e3?"touch":"mouse"):r.pointerEvents[l]?t=r.pointerTypeMap[e.pointerType]||"mouse":r.touchEvents[l]&&(t="touch"),t&&(n.pointerType=t),n.isMultitouch=!1===e.isPrimary||e.touches&&1<e.touches.length,r.wheelEvents[l]&&n.getWheelDeltas()},chain:function(e){var t=Ext.Object.chain(this);return t.parentEvent=this,Ext.apply(t,e)},correctWheelDelta:function(e){var t=this.browserEvent.deltaMode,i=e;return 0===t?i=e*this.WHEEL_PIXEL_SIZE:1===t?i=e*this.WHEEL_LINE_SIZE:2===t&&(i=e*this.WHEEL_PAGE_SIZE),Math.round(i)},getChar:function(){var e=this.which();return String.fromCharCode(e)},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return"keypress"===this.type?String.fromCharCode(this.getCharCode()):this.keyCodes[this.keyCode]},key:function(){return this.browserEvent.key},which:function(){var e=this.browserEvent,t=e.which;return null==t&&(this.self.keyEventRe.test(e.type)?t=e.charCode||e.keyCode:void 0!==(t=e.button)&&(t=1&t?1:4&t?2:2&t?3:0)),t},getClipboardData:function(e){var t,i=this.browserEvent.clipboardData,n=Ext.global.clipboardData,r=null;return e=e||"text/plain",i&&i.getData?r=i.getData(e):n&&n.getData&&(t=this.ieMimeType[e])&&(r=n.getData(t)),r},getPoint:function(){var e,t=this.point;return t||(e=this.getXY(),t=this.point=new Ext.util.Point(e[0],e[1])),t},getRelatedTarget:function(e,t,i){var n=this.relatedTarget,r=null;return n&&n.nodeType&&(r=e?Ext.fly(n).findParent(e,t,i):i?Ext.get(n):n),r},getTarget:function(e,t,i){return e?Ext.fly(this.target).findParent(e,t,i):i?Ext.get(this.target):this.target},getTime:function(){return this.time},getWheelDelta:function(){return this.getWheelDeltas().y},getWheelDeltas:function(){var e,t,i,n=this.wheelDeltas;return n||(e=this.browserEvent,t=this.correctWheelDelta(e.deltaX||0),i=e.deltaY,i=this.correctWheelDelta(null==i?-e.wheelDelta:i),this.deltaX=t,this.deltaY=i,this.wheelDeltas=n={x:t,y:i}),n},getX:function(){return this.getXY()[0]},getXY:function(){var e=this.xy;if(!e){var t,i,n,r,o=(e=this.xy=[this.pageX,this.pageY])[0];o||0===o||(t=this.browserEvent,n=(i=document).documentElement,r=i.body,e[0]=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e[1]=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0))}return e},getLocalXY:function(e){var t,i=this.getXY(),n=Ext.fly(this.currentTarget).getXY(),r=i[0]-n[0],o=i[1]-n[1];return e&&(t=Ext.fly(this.currentTarget).getSize(),r=Math.max(0,Math.min(r,t.width)),o=Math.max(0,Math.min(o,t.height))),[r,o]},getY:function(){return this.getXY()[1]},hasModifier:function(){return!!(this.ctrlKey||this.altKey||this.shiftKey||this.metaKey)},isNavKeyPress:function(e){var t=this.keyCode;return(!("keypress"===this.type)||Ext.isGecko)&&33<=t&&t<=40||!e&&(t===this.RETURN||t===this.TAB||t===this.ESC)},isSpecialKey:function(){var e=this.keyCode,t=Ext.isGecko,i="keypress"===this.type;return t&&i&&0===this.charCode||this.isNavKeyPress()||e===this.BACKSPACE||e===this.ENTER||16<=e&&e<=20||(!i||t)&&44<=e&&e<=46},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var e=this.parentEvent;return this.defaultPrevented=!0,e&&(e.defaultPrevented=!0),this.browserEvent.preventDefault(),this},setCurrentTarget:function(e){this.currentTarget=this.delegatedTarget=e},stopEvent:function(){return this.preventDefault().stopPropagation()},mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},mouseupEvents:{mouseup:1,pointerup:1,touchend:1},stopPropagation:function(){var e=this,t=e.browserEvent,i=e.parentEvent;return e.mousedownEvents[e.type]&&Ext.GlobalEvents.fireMouseDown(e),e.mouseupEvents[e.type]&&Ext.GlobalEvents.fireMouseUp(e),e.stopped=!0,i&&!e.isGesture&&(i.stopped=!0),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,e},claimGesture:function(){var e=this.parentEvent;return this.claimed=!0,e&&!this.isGesture?e.claimGesture():this.preventDefault(),this},within:function(e,t,i){var n;return e&&(n=t?this.getRelatedTarget():this.getTarget()),!(!n||!1===i&&n===Ext.getDom(e))&&Ext.fly(e).contains(n)},privates:{ieMimeType:{"text/plain":"Text"}},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},function(e){var t,i,n,r={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_PIXEL_SIZE:1,WHEEL_LINE_SIZE:20,WHEEL_PAGE_SIZE:600},o={},a=e.gestureEvents,s=e.prototype;for(i in Ext.apply(a,e.mouseEvents),Ext.apply(a,e.pointerEvents),Ext.apply(a,e.touchEvents),Ext.apply(e,r),Ext.apply(s,r),delete r.RETURN,r)o[r[i]]=i;if(e.keyCodes=s.keyCodes=o,Ext.isIE9m||(document.addEventListener("keydown",e.globalTabKeyDown,!0),document.addEventListener("keyup",e.globalTabKeyUp,!0)),s.getTrueXY=s.getXY,"undefined"!=typeof KeyboardEvent&&!("key"in KeyboardEvent.prototype)){for(s._keys=n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},t=1;t<25;++t)n[t+111]="F"+t;for(t=0;t<26;++t)n[t]=[String.fromCharCode(t+97),String.fromCharCode(t+65)];s.key=function(){var e=n[this.browserEvent.which||this.keyCode];return e&&"string"!=typeof e&&(e=e[+this.shiftKey]),e}}}),Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",injectEvent:function(){var s,g,t={};function i(e,t){}return!Ext.isIE9m&&document.createEvent?s={createHtmlEvent:function(e,t,i,n){var r=e.createEvent("HTMLEvents");return r.initEvent(t,i,n),r},createMouseEvent:function(e,t,i,n,r,o,a,s,l,d,u,c,h){var f=e.createEvent("MouseEvents"),g=e.defaultView||window;return f.initMouseEvent?f.initMouseEvent(t,i,n,g,r,o,a,o,a,s,l,d,u,c,h):((f=e.createEvent("UIEvents")).initEvent(t,i,n),f.view=g,f.detail=r,f.screenX=o,f.screenY=a,f.clientX=o,f.clientY=a,f.ctrlKey=s,f.altKey=l,f.metaKey=u,f.shiftKey=d,f.button=c,f.relatedTarget=h),f},createUIEvent:function(e,t,i,n,r){var o=e.createEvent("UIEvents"),a=e.defaultView||window;return o.initUIEvent(t,i,n,a,r),o},fireEvent:function(e,t,i){e.dispatchEvent(i)}}:document.createEventObject&&(g={0:1,1:4,2:2},s={createHtmlEvent:function(e,t,i,n){var r=e.createEventObject();return r.bubbles=i,r.cancelable=n,r},createMouseEvent:function(e,t,i,n,r,o,a,s,l,d,u,c,h){var f=e.createEventObject();return f.bubbles=i,f.cancelable=n,f.detail=r,f.screenX=o,f.screenY=a,f.clientX=o,f.clientY=a,f.ctrlKey=s,f.altKey=l,f.shiftKey=d,f.metaKey=u,f.button=g[c]||c,f.relatedTarget=h,f},createUIEvent:function(e,t,i,n,r){var o=e.createEventObject();return o.bubbles=i,o.cancelable=n,o},fireEvent:function(e,t,i){e.fireEvent("on"+t,i)}}),Ext.Object.each({load:[!1,!1],unload:[!1,!1],select:[!0,!1],change:[!0,!1],submit:[!0,!0],reset:[!0,!1],resize:[!0,!1],scroll:[!0,!1]},function(n,e){var r=e[0],o=e[1];t[n]=function(e,t){var i=s.createHtmlEvent(n,r,o);s.fireEvent(e,n,i)}}),Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(e){var r,o,a;t[e]=(o=1,a="mousemove"!==(r=e),function(e,t){var i,n=t.getXY();i=s.createMouseEvent(e.ownerDocument,r,!0,a,o,n[0],n[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),s.fireEvent(e,r,i)})}),Ext.Object.each({focusin:[!0,!1],focusout:[!0,!1],activate:[!0,!0],focus:[!1,!1],blur:[!1,!1]},function(n,e){var r=e[0],o=e[1];t[n]=function(e,t){var i=s.createUIEvent(e.ownerDocument,n,r,o,1);s.fireEvent(e,n,i)}}),s||(t={},s={}),function(e){(t[this.type]||i)(e?e.dom||e:this.getTarget(),this)}}(),preventDefault:function(e){var t,i,n,r=this.browserEvent,o=this.parentEvent;return"unknown"!=typeof r.type&&(e||(this.defaultPrevented=!0),o&&(o.defaultPrevented=!0),r.preventDefault?r.preventDefault():("mousedown"===r.type&&(i=r.target,"on"!==(t=i.getAttribute("unselectable"))&&(i.setAttribute("unselectable","on"),(n=function(){i.setAttribute("unselectable",t)}).$skipTimerCheck=!0,Ext.defer(n,1))),r.returnValue=!1,(r.ctrlKey||111<r.keyCode&&r.keyCode<124)&&(r.keyCode=-1))),this},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var r;Ext.isIE9m&&(r={0:0,1:0,4:1,2:2},this.override({statics:{enableIEAsync:function(e){var t,i={};for(t in e)i[t]=e[t];return i}},constructor:function(e,t,i,n){this.callParent([e,t,i,n]),this.button=r[e.button],"contextmenu"===e.type&&(this.button=2),this.toElement=e.toElement,this.fromElement=e.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(e){this.browserEvent=this.self.enableIEAsync(e)},getRelatedTarget:function(e,t,i){var n,r;return this.relatedTarget||(n=this.type,this.mouseLeaveRe.test(n)?r=this.toElement:this.mouseEnterRe.test(n)&&(r=this.fromElement),r&&(this.relatedTarget=this.self.resolveTextNode(r))),this.callParent([e,t,i])}}),document.attachEvent("onkeydown",Ext.event.Event.globalTabKeyDown),document.attachEvent("onkeyup",Ext.event.Event.globalTabKeyUp),window.attachEvent("onunload",function(){document.detachEvent("onkeydown",Ext.event.Event.globalTabKeyDown),document.detachEvent("onkeyup",Ext.event.Event.globalTabKeyUp)}))}),Ext.define("Ext.event.publisher.Dom",{extend:"Ext.event.publisher.Publisher",requires:["Ext.event.Event"],type:"dom",handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1,scroll:1,online:1,offline:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var e=this,t=Ext.supports.PassiveEventListener;e.listenerOptions=!!t&&{passive:!1},e.captureOptions=!t||{passive:!1,capture:!0},e.bubbleSubscribers={},e.captureSubscribers={},e.directSubscribers={},e.directCaptureSubscribers={},e.delegatedListeners={},e.initHandlers(),Ext.onInternalReady(e.onReady,e),e.callParent(),e.registerDomEvents()},registerDomEvents:function(){var e,t,i=Ext.event.publisher.Publisher.publishersByEvent,n=this.handledDomEvents,r=n.length;for(e=0;e<r;e++)t=n[e],this.handles[t]=1,i[t]=this},onReady:function(){var e,t,i=this.handledDomEvents;if(i)for(t=0,e=i.length;t<e;t++)this.addDelegatedListener(i[t]);Ext.getWin().on("unload",this.destroy,this,{priority:-1e4})},initHandlers:function(){this.onDelegatedEvent=Ext.bind(this.onDelegatedEvent,this),this.onDirectEvent=Ext.bind(this.onDirectEvent,this),this.onDirectCaptureEvent=Ext.bind(this.onDirectCaptureEvent,this)},addDelegatedListener:function(e){this.delegatedListeners[e]=1,this.target.addEventListener(e,this.onDelegatedEvent,this.captureEvents[e]?this.captureOptions:this.listenerOptions)},removeDelegatedListener:function(e){delete this.delegatedListeners[e],this.target.removeEventListener(e,this.onDelegatedEvent,this.captureEvents[e]?this.captureOptions:this.listenerOptions)},addDirectListener:function(e,t,i){t.dom.addEventListener(e,i?this.onDirectCaptureEvent:this.onDirectEvent,i?this.captureOptions:this.listenerOptions)},removeDirectListener:function(e,t,i){t.dom.removeEventListener(e,i?this.onDirectCaptureEvent:this.onDirectEvent,i?this.captureOptions:this.listenerOptions)},subscribe:function(e,t,i,n){var r,o;i&&!this.directEvents[t]?(r=n?this.captureSubscribers:this.bubbleSubscribers,this.handles[t]||this.delegatedListeners[t]||this.addDelegatedListener(t),r[t]?++r[t]:r[t]=1):(r=n?this.directCaptureSubscribers:this.directSubscribers,o=e.id,(r=r[t]||(r[t]={}))[o]?++r[o]:(r[o]=1,this.addDirectListener(t,e,n)))},unsubscribe:function(e,t,i,n){var r,o,a,s;i&&!this.directEvents[t]?(r=this.captureSubscribers,o=this.bubbleSubscribers,(a=n?r:o)[t]&&--a[t],this.handles[t]||o[t]||r[t]||this.removeDelegatedListener(t)):(a=n?this.directCaptureSubscribers:this.directSubscribers,s=e.id,(a=a[t])[s]&&--a[s],a[s]||(delete a[s],this.removeDirectListener(t,e,n)))},getPropagatingTargets:function(e){for(var t=e,i=[];t;)i.push(t),t=t.parentNode||t.defaultView;return i},publish:function(e,t,i){var n,r,o,a,s,l,d,u,c=!1,h=!1;for(i=i||!1,t||(e instanceof Array&&Ext.raise("Propagation targets must be supplied when publishing an array of events."),o=e.target,t=this.captureEvents[e.type]?(a=Ext.cache[o.id])?[a]:[]:this.getPropagatingTargets(o)),n=Ext.Array.from(e),l=t.length,u=n.length,s=0;s<u;s++)r=n[s].type,!c&&this.captureSubscribers[r]&&(c=!0),!h&&this.bubbleSubscribers[r]&&(h=!0);if(c)for(s=l;s--;)if(a=Ext.cache[t[s].id])for(d=0;d<u;d++)e=n[d],this.fire(a,e.type,e,!1,!0),!i&&e.claimed&&(i=!0,d=this.filterClaimed(n,e),u=n.length),e.stopped&&(n.splice(d,1),d--,u--);if(h&&!e.stopped)for(s=0;s<l;s++)if(a=Ext.cache[t[s].id])for(d=0;d<u;d++)e=n[d],this.fire(a,e.type,e,!1,!1),!i&&e.claimed&&this.filterClaimed&&(i=!0,d=this.filterClaimed(n,e),u=n.length),e.stopped&&(n.splice(d,1),d--,u--)},publishDelegatedDomEvent:function(e){this.publish(e)},fire:function(e,t,i,n,r){var o;e.hasListeners[t]&&(o=e.events[t])&&(r&&n?o=o.directCaptures:r?o=o.captures:n&&(o=o.directs),o&&(i.setCurrentTarget(e.dom),o.fire(i,i.target)))},onDelegatedEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDelegatedEvent,this,[e]):this.doDelegatedEvent(e)},doDelegatedEvent:function(e){var t;t=(e=new Ext.event.Event(e)).time,this.isEventBlocked(e)||(this.beforeEvent(e),Ext.frameStartTime=t,this.reEnterCountAdjusted=!1,this.reEnterCount++,this.publishDelegatedDomEvent(e),this.reEnterCountAdjusted||this.reEnterCount--,this.afterEvent(e))},onDirectEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDirectEvent,this,[e,!1]):this.doDirectEvent(e,!1)},onDirectCaptureEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDirectEvent,this,[e,!0]):this.doDirectEvent(e,!0)},doDirectEvent:function(e,t){var i,n,r=e.currentTarget;i=(e=new Ext.event.Event(e)).time,this.isEventBlocked(e)||(this.beforeEvent(e),Ext.frameStartTime=i,(n=Ext.cache[r.id])&&(this.reEnterCountAdjusted=!1,this.reEnterCount++,this.fire(n,e.type,e,!0,t),this.reEnterCountAdjusted||this.reEnterCount--),this.afterEvent(e))},beforeEvent:function(e){var t,i,n=e.browserEvent,r=Ext.event.publisher.Dom;"touchstart"===n.type&&1===(t=n.touches).length&&(i=t[0],r.lastTouchStartX=i.pageX,r.lastTouchStartY=i.pageY)},afterEvent:function(e){var t=e.browserEvent.type,i=Ext.event.publisher.Dom,n=Ext.GlobalEvents;e.self.pointerEvents[t]&&"mouse"!==e.pointerType&&(i.lastScreenPointerEventTime=Ext.now()),"touchend"===t&&(i.lastTouchEndTime=Ext.now()),this.reEnterCount||n.idleEventMask[t]||Ext.fireIdle()},isEventBlocked:function(e){var t=e.type,i=Ext.event.publisher.Dom,n=Ext.now();return!(!Ext.isGecko||"click"!==e.type||2!==e.button)||(this.blockedPointerEvents[t]&&"mouse"!==e.pointerType||this.blockedCompatibilityMouseEvents[t]&&n-i.lastScreenPointerEventTime<1e3||Ext.supports.TouchEvents&&e.self.mouseEvents[e.type]&&Math.abs(e.pageX-i.lastTouchStartX)<15&&Math.abs(e.pageY-i.lastTouchStartY)<15&&Ext.now()-i.lastTouchEndTime<1e3)},destroy:function(){var e,t=Ext.dom.GarbageCollector;for(e in this.delegatedListeners)this.removeDelegatedListener(e);Ext.Reaper.flush(),t&&t.collect(),this.callParent()},reset:function(){var e=Ext.event.publisher.Dom;this.reEnterCount=0,e.lastScreenPointerEventTime=e.lastTouchEndTime=e.lastTouchStartX=e.lastTouchStartY=void 0}},function(e){var t=document,i=t.defaultView,n=e.prototype;Ext.os.is.iOS&&window.self!==window.top||Ext.browser.is.AndroidStock||!i||!i.addEventListener?n.target=t:n.target=i,e.instance=new e}),Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(e){var r={focus:!0,focusin:!0,focusout:!0,blur:!0};if(Ext.isIE10m&&e.override({isEventBlocked:function(e){if(!r[e.type])return this.callParent([e]);var t=document.body,i=e.browserEvent,n=Ext.synchronouslyFocusing;return!(!n||("focusout"!==i.type||i.srcElement!==n&&i.srcElement!==window||i.toElement!==t)&&("focusin"!==i.type||i.srcElement!==t&&i.srcElement!==window||i.fromElement!==n||null!==i.toElement))}}),Ext.isIE9m){var a,t=document.documentElement,i=document.body,n=e.prototype;n.target=document,n.directBoundListeners={},a=function(e,t,i){e.target=e.srcElement||window,e.currentTarget=this,i?t.onDirectCaptureEvent(e):t.onDirectEvent(e)},e.override({addDelegatedListener:function(e){this.delegatedListeners[e]=1,this.target.attachEvent("on"+e,this.onDelegatedEvent)},removeDelegatedListener:function(e){delete this.delegatedListeners[e],this.target.detachEvent("on"+e,this.onDelegatedEvent)},addDirectListener:function(e,t,i){var n=t.dom,r=Ext.Function.bind(a,n,[this,i],!0),o=this.directBoundListeners;(o[e]||(o[e]={}))[n.id]=r,n.attachEvent?n.attachEvent("on"+e,r):this.callParent([e,t,i])},removeDirectListener:function(e,t,i){var n=t.dom;n.detachEvent?n.detachEvent("on"+e,this.directBoundListeners[e][n.id]):this.callParent([e,t,i])},doDelegatedEvent:function(e){return e.target=e.srcElement||window,"focusin"===e.type?e.relatedTarget=e.fromElement===i||e.fromElement===t?null:e.fromElement:"focusout"===e.type&&(e.relatedTarget=e.toElement===i||e.toElement===t?null:e.toElement),this.callParent([e])}}),Ext.apply(n.directEvents,n.captureEvents),Ext.apply(n.directEvents,{change:1,input:1,paste:1}),n.captureEvents={}}}),Ext.define("Ext.event.publisher.Gesture",{extend:"Ext.event.publisher.Dom",requires:["Ext.util.Point","Ext.AnimationQueue"],uses:"Ext.event.gesture.*",type:"gesture",isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},isEndEvent:{mouseup:1,touchend:1,pointerup:1,MSPointerUp:1},handledEvents:[],handledDomEvents:[],constructor:function(e){var t=this,i=t.handledDomEvents,n=Ext.supports,r=n.TouchEvents,o=t.onTouchStart,a=t.onTouchMove,s=t.onTouchEnd;return t.handlers={touchstart:o,touchmove:a,touchend:s,touchcancel:s,pointerdown:o,pointermove:a,pointerup:s,pointercancel:s,MSPointerDown:o,MSPointerMove:a,MSPointerUp:s,MSPointerCancel:s,mousedown:o,mousemove:a,mouseup:s},t.activeTouchesMap={},t.activeTouches=[],t.changedTouches=[],t.recognizers=[],t.eventToRecognizer={},t.cancelEvents=[],r&&(t.onTargetTouchMove=t.onTargetTouchMove.bind(t),t.onTargetTouchEnd=t.onTargetTouchEnd.bind(t)),n.PointerEvents?(i.push("pointerdown","pointermove","pointerup","pointercancel"),t.mousePointerType="mouse"):n.MSPointerEvents?(i.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"),t.mousePointerType=4):r&&i.push("touchstart","touchmove","touchend","touchcancel"),(!i.length||r&&Ext.os.is.Desktop)&&i.push("mousedown","mousemove","mouseup"),t.initConfig(e),t.callParent()},onReady:function(){this.callParent(),Ext.Array.sort(this.recognizers,function(e,t){var i=e.priority,n=t.priority;return n<i?1:i<n?-1:0})},registerRecognizer:function(e){var t,i,n=e.handledEvents,r=n.length;for(e.setOnRecognized(this.onRecognized),e.setCallbackScope(this),i=0;i<r;i++)t=n[i],this.handledEvents.push(t),this.eventToRecognizer[t]=e;this.registerEvents(n),this.recognizers.push(e)},onRecognized:function(e,t,i,n,r){var o,a,s,l,d=i.touches,u=i.changedTouches,c=u.length,h=this.events,f=!h.length,g=this.cancelEvents;if((n=n||{}).type=t,n.target=u[0].target,n.stopped=!1,n.claimed=!1,n.isGesture=!0,i=i.chain(n),!this.gestureTargets){if(1<c){for(o=[],s=0;s<c;s++)l=u[s],o.push(l.targets);a=this.getCommonTargets(o)}else a=u[0].targets;this.gestureTargets=a}r&&e.isSingleTouch&&1<d.length?(i.target=d[0].target,g.push(i)):h.push(i),f&&this.publishGestures()},getCommonTargets:function(e){var t,i,n,r=e[0],o=e.length,a=[],s=1;if(1===o)return r;for(;;){if(!(t=r[r.length-s]))return a;for(n=1;n<o;n++)if((i=e[n])[i.length-s]!==t)return a;a.unshift(t),s++}return a},invokeRecognizers:function(e,t){var i,n,r=this.recognizers,o=r.length;if("onStart"===e)for(i=0;i<o;i++)r[i].isActive=!0;for(i=0;i<o;i++)(n=r[i]).isActive&&!1===n[e].call(n,t)&&(n.isActive=!1)},filterClaimed:function(e,t){var i,n,r,o,a=this.eventToRecognizer,s=t.type,l=a[s];for(o=e.length;o--;)(r=e[o].type)===s?i=o:(n=a[r],(!l||n&&n!==l)&&(e.splice(o,1),i&&i--));return this.claimRecognizer(l,e[0]),i},claimRecognizer:function(e,t){var i,n,r,o=this.recognizers;for(i=0,n=o.length;i<n;i++)(r=o[i])!==e&&(r.isActive=!1,r.cancel(t));this.events.length&&this.publishGestures(!0)},publishGestures:function(e){var t=this,i=t.cancelEvents,n=t.events,r=t.gestureTargets;i.length&&(t.cancelEvents=[],t.publish(i,t.getPropagatingTargets(i[0].target),!0)),n.length&&(t.events=[],t.gestureTargets=null,t.publish(n,r||t.getPropagatingTargets(n[0].target),e))},updateTouches:function(e){var t,i,n,r,o,a,s,l,d=e.browserEvent,u=e.type,c=d.changedTouches||[d],h=this.activeTouches,f=this.activeTouchesMap,g=[];for(o=0,a=c.length;o<a;o++)(n=f[i="identifier"in(t=c[o])?t.identifier:"pointerId"in t?t.pointerId:1])||(r=Ext.event.Event.resolveTextNode(t.target),n=f[i]={identifier:i,target:r,targets:this.getPropagatingTargets(r)},h.push(n)),(this.isEndEvent[u]||this.isCancelEvent[u])&&(delete f[i],Ext.Array.remove(h,n)),s=Math.round(t.pageX),l=Math.round(t.pageY),n.pageX=s,n.pageY=l,n.point=new Ext.util.Point(s,l),g.push(n);e.touches=Ext.Array.clone(h),e.changedTouches=g},publishDelegatedDomEvent:function(e){!e.button||e.button<1?(this.events=[e],e.browserEvent.$extHandled=!0,this.handlers[e.type].call(this,e)):this.callParent([e])},onTouchStart:function(e){var t=this,i=e.target,n=e.browserEvent.touches;"touchstart"===e.browserEvent.type&&(i.addEventListener("touchmove",t.onTargetTouchMove),i.addEventListener("touchend",t.onTargetTouchEnd),i.addEventListener("touchcancel",t.onTargetTouchEnd)),n&&n.length<=t.activeTouches.length&&t.removeGhostTouches(n),t.updateTouches(e),t.isStarted||(Ext.enableGarbageCollector&&Ext.dom.GarbageCollector.pause(),t.isStarted=!0,t.invokeRecognizers("onStart",e)),t.invokeRecognizers("onTouchStart",e),t.publishGestures()},onTouchMove:function(e){var t=this.mousePointerType,i=this.isStarted;if(!i&&"mouse"===e.pointerType||this.updateTouches(e),i){if(t&&e.browserEvent.pointerType===t&&0===e.buttons)return e.type=Ext.dom.Element.prototype.eventMap.touchend,e.button=0,void this.onTouchEnd(e);0<e.changedTouches.length&&this.invokeRecognizers("onTouchMove",e)}this.publishGestures()},onTouchEnd:function(e){var t,i=this,n=i.isStarted;if(!n&&"mouse"===e.pointerType||i.updateTouches(e),n){t=i.activeTouches.length;try{i.invokeRecognizers(i.isCancelEvent[e.type]?"onTouchCancel":"onTouchEnd",e)}finally{try{t||(i.isStarted=!1,i.invokeRecognizers("onEnd",e))}finally{try{i.publishGestures()}finally{t||Ext.enableGarbageCollector&&Ext.dom.GarbageCollector.resume(),i.reEnterCountAdjusted=!0,i.reEnterCount--}}}}else i.publishGestures()},onTargetTouchMove:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doTargetTouchMove,this,[e]):this.doTargetTouchMove(e)},doTargetTouchMove:function(e){Ext.getBody().contains(e.target)||(this.reEnterCountAdjusted=!1,this.reEnterCount++,this.onTouchMove(new Ext.event.Event(e)),this.reEnterCountAdjusted||this.reEnterCount--)},onTargetTouchEnd:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doTargetTouchEnd,this,[e]):this.doTargetTouchEnd(e)},doTargetTouchEnd:function(e){var t=e.target;t.removeEventListener("touchmove",this.onTargetTouchMove),t.removeEventListener("touchend",this.onTargetTouchEnd),t.removeEventListener("touchcancel",this.onTargetTouchEnd),Ext.getBody().contains(t)||(this.reEnterCountAdjusted=!1,this.reEnterCount++,this.onTouchEnd(new Ext.event.Event(e)),this.reEnterCountAdjusted||this.reEnterCount--)},reset:function(){var e,t,i=this.recognizers,n=i.length;for(this.activeTouchesMap={},this.activeTouches=[],this.changedTouches=[],this.isStarted=!1,this.gestureTargets=null,this.events=[],this.cancelEvents=[],e=0;e<n;e++)(t=i[e]).reset(),t.isActive=!1;this.callParent()},privates:{removeGhostTouches:function(e){var t,i,n,r={},o=e.length,a=this.activeTouches,s=this.activeTouchesMap;for(t=0;t<o;++t)r[e[t].identifier]=!0;for(t=a.length;t--;)e[i=(n=a[t]).identifier]||(Ext.Array.remove(a,n),delete s[i])}}},function(n){var e=Event.prototype,r=e.stopPropagation;r&&(e.stopPropagation=function(){var e,t=n.instance,i=this.type;!this.$extHandled&&t.handles[i]&&(e=new Ext.event.Event(this),t.updateTouches(e),t.invokeRecognizers("onTouchCancel",e),t.reset(),t.reEnterCountAdjusted=!0),r.apply(this,arguments)}),n.instance=Ext.$gesturePublisher=new n}),Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){Ext.isIE9m&&this.override({updateTouches:function(e,t){var i=e.browserEvent,n=e.getXY();i.pageX=n[0],i.pageY=n[1],this.callParent([e,t])},doDelegatedEvent:function(e){this.callParent([Ext.event.Event.enableIEAsync(e)])}})}),Ext.define("Ext.mixin.Templatable",{extend:"Ext.Mixin",mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var e=document.createDocumentFragment();return e.appendChild(Ext.Element.create(this.getElementConfig(),!0)),e},initElement:function(){var e=this.self.prototype;e.elementTemplate=this.getElementTemplate(),e.initElement=e.doInitElement,this.initElement.apply(this,arguments)},linkElement:function(e,t){this.link(e,t)},doInitElement:function(){var e,t,i,n,r,o=this.referenceAttributeName;for(t=0,i=(e=this.elementTemplate.cloneNode(!0).querySelectorAll(this.referenceSelector)).length;t<i;t++)r=(n=e[t]).getAttribute(o),n.removeAttribute(o),this.linkElement(r,n)}}),Ext.define("Ext.TaskQueue",{requires:"Ext.AnimationQueue",singleton:!0,pending:!1,mode:!0,protectedReadQueue:[],protectedWriteQueue:[],readQueue:[],writeQueue:[],readRequestId:0,writeRequestId:0,timer:null,constructor:function(){var e=this;e.run=e.run.bind(e),e.runProtected=Ext.Function.bind(e.run,e,[e.protectedReadQueue,e.protectedWriteQueue,"runProtected"]),e.runProtected.$skipTimerCheck=!0,Ext.os.is.iOS&&(e.watch.$skipTimerCheck=!0,e.watchdogTimer=Ext.interval(this.watch,500,this))},requestRead:function(e,t,i){var n={id:++this.readRequestId,fn:e,scope:t,args:i};return!0===arguments[3]?(this.protectedReadQueue.push(n),this.request(!0,"runProtected")):(this.readQueue.push(n),this.request(!0)),n.id},cancelRead:function(e){this.cancelRequest(this.readQueue,e,!0)},requestWrite:function(e,t,i){var n={id:++this.writeRequestId,fn:e,scope:t,args:i};return!0===arguments[3]?(this.protectedWriteQueue.push(n),this.request(!1,"runProtected")):(this.writeQueue.push(n),this.request(!1)),n.id},cancelWrite:function(e){this.cancelRequest(this.writeQueue,e,!1)},request:function(e,t){var i=this,n=i.mode;i.pending||(i.pendingTime=Date.now(),i.pending=!0,i.mode=e,i.timer=e?Ext.defer(i[t]||i.run,1):Ext.raf(i[t]||i.run)),i.mode===e&&i.timer&&(n?Ext.undefer(i.timer):Ext.unraf(i.timer),i.timer=e?Ext.defer(i[t]||i.run,1):Ext.raf(i[t]||i.run))},cancelRequest:function(e,t,i){var n;for(n=0;n<e.length;n++)if(e[n].id===t){e.splice(n,1);break}!e.length&&this.mode===i&&this.timer&&Ext.undefer(this.timer)},watch:function(){this.pending&&500<=Date.now()-this.pendingTime&&this.run()},run:function(e,t,i){var n,r,o,a,s,l,d,u,c=null;for(e=e||this.readQueue,t=t||this.writeQueue,this.pending=!1,this.pending=this.timer=!1,this.mode?(n=e,0<t.length&&(c=!1)):(n=t,0<e.length&&(c=!0)),r=n.slice(),d=n.length=0,u=r.length;d<u;d++)a=(o=r[d]).fn,s=o.scope,l=o.args,s&&(s.destroying||s.destroyed)||("string"==typeof a&&(a=s[a]),l?a.apply(s,l):a.call(s));r.length=0,null!==c&&this.request(c,i)},clear:function(){var e=this.timer;e&&(this.mode?Ext.undefer(e):Ext.unraf(e)),this.readQueue.length=this.writeQueue.length=0,this.pending=this.timer=!1,this.mode=!0},privates:{flush:function(){for(var e=this.mode;this.readQueue.length||this.writeQueue.length;)e?Ext.undefer(this.timer):Ext.unraf(this.timer),this.run();this.mode=!0}}}),Ext.define("Ext.util.sizemonitor.Abstract",{mixins:["Ext.mixin.Templatable"],requires:["Ext.TaskQueue"],config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:null,height:null,contentWidth:null,contentHeight:null,constructor:function(e){this.refresh=this.refresh.bind(this),this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0},this.initElement(),this.initConfig(e),this.bindListeners(!0)},bindListeners:Ext.emptyFn,applyElement:function(e){if(e)return Ext.get(e)},updateElement:function(e){e.append(this.detectorsContainer,!0),e.addCls(Ext.baseCSSPrefix+"size-monitored")},applyArgs:function(e){return e.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.clientWidth},getContentHeight:function(){return this.detectorsContainer.clientHeight},refreshSize:function(){var e=this.getElement();if(!e||e.destroyed)return!1;var t,i=this,n=e.measure(),r=n.width,o=n.height,a=i.getContentWidth(),s=i.getContentHeight(),l=i.contentWidth,d=i.contentHeight,u=i.info,c=!1;return i.width=r,i.height=o,0<(t=(l!==(i.contentWidth=a)?1:0)+(d!==(i.contentHeight=s)?2:0))&&(u.width=r,u.height=o,u.contentWidth=a,u.contentHeight=s,u.flag=t,c=!0,i.getCallback().apply(i.getScope(),i.getArgs())),c},refresh:function(){this.destroying||this.destroyed||(this.refreshSize(),Ext.TaskQueue.requestWrite("refreshMonitors",this))},destroy:function(){var e=this.getElement();this.bindListeners(!1),e&&!e.destroyed&&e.removeCls(Ext.baseCSSPrefix+"size-monitored"),delete this._element,this.refresh=null,this.callParent()}}),Ext.define("Ext.util.sizemonitor.Scroll",{extend:"Ext.util.sizemonitor.Abstract",getElementConfig:function(){return{reference:"detectorsContainer",classList:[Ext.baseCSSPrefix+"size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(e){this.onScroll=this.onScroll.bind(this),this.callParent(arguments)},bindListeners:function(e){var t=e?"addEventListener":"removeEventListener";this.expandMonitor[t]("scroll",this.onScroll,!0),this.shrinkMonitor[t]("scroll",this.onScroll,!0)},onScroll:function(){this.destroyed||Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var e=this.expandMonitor,t=this.shrinkMonitor;e&&!e.destroyed&&(e.scrollLeft=1e6,e.scrollTop=1e6),t&&!t.destroyed&&(t.scrollLeft=1e6,t.scrollTop=1e6)},destroy:function(){this.onScroll=null,this.callParent()}}),Ext.define("Ext.util.SizeMonitor",{requires:["Ext.util.sizemonitor.Scroll"],constructor:function(e){return new Ext.util.sizemonitor.Scroll(e)}}),Ext.define("Ext.event.publisher.ElementSize",{extend:"Ext.event.publisher.Publisher",requires:["Ext.util.SizeMonitor"],type:"size",handledEvents:["resize"],constructor:function(){this.monitors={},this.subscribers={},this.callParent(arguments)},subscribe:function(e){var t=e.id,i=this.subscribers,n=this.monitors;return i[t]?++i[t]:(i[t]=1,n[t]=new Ext.util.SizeMonitor({element:e,callback:this.onElementResize,scope:this,args:[e]})),e.on("painted","forceRefresh",n[t]),!0},unsubscribe:function(e){var t,i=e.id,n=this.subscribers,r=this.monitors;n[i]&&!--n[i]&&(delete n[i],t=r[i],e.un("painted","forceRefresh",t),t.destroy(),delete r[i]),e.activeRead&&Ext.TaskQueue.cancelRead(e.activeRead)},fireElementResize:function(e,t){delete e.activeRead,this.fire(e,"resize",[e,t])},onElementResize:function(e,t){e.activeRead||(e.activeRead=Ext.TaskQueue.requestRead("fireElementResize",this,[e,t],!!e.$skipResourceCheck))},privates:{syncRefresh:function(e){var t,i,n,r;for(n=0,r=(e=Ext.Array.from(e)).length;n<r;++n)"string"!=typeof(t=e[n])&&(t=t.id),(i=this.monitors[t])&&i.forceRefresh();Ext.TaskQueue.flush(),Ext.Function.fireElevatedHandlers()}}},function(e){e.instance=new e}),Ext.define("Ext.util.paintmonitor.Abstract",{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(e){this.onElementPainted=this.onElementPainted.bind(this),this.initConfig(e)},bindListeners:function(e){this.monitorElement[e?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,!0)},applyElement:function(e){if(e)return Ext.get(e)},updateElement:function(e){this.monitorElement=Ext.Element.create({classList:[Ext.baseCSSPrefix+"paint-monitor",this.monitorClass]},!0),e.appendChild(this.monitorElement,!0),e.addCls(Ext.baseCSSPrefix+"paint-monitored"),this.bindListeners(!0)},onElementPainted:function(){},destroy:function(){var e=this.monitorElement,t=e.parentNode,i=this.getElement();this.bindListeners(!1),delete this.monitorElement,i&&!i.destroyed&&(i.removeCls(Ext.baseCSSPrefix+"paint-monitored"),delete this._element),t&&t.removeChild(e),this.callParent()}}),Ext.define("Ext.util.paintmonitor.CssAnimation",{extend:"Ext.util.paintmonitor.Abstract",eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:function(e){e.animationName===Ext.baseCSSPrefix+"paint-monitor-helper"&&this.getCallback().apply(this.getScope(),this.getArgs())}}),Ext.define("Ext.util.PaintMonitor",{requires:["Ext.util.paintmonitor.CssAnimation"],constructor:function(e){return new Ext.util.paintmonitor.CssAnimation(e)}}),Ext.define("Ext.event.publisher.ElementPaint",{extend:"Ext.event.publisher.Publisher",requires:["Ext.util.PaintMonitor","Ext.TaskQueue"],type:"paint",handledEvents:["painted"],constructor:function(){this.monitors={},this.subscribers={},this.callParent(arguments)},subscribe:function(e){var t=e.id,i=this.subscribers;i[t]?++i[t]:(i[t]=1,this.monitors[t]=new Ext.util.PaintMonitor({element:e,callback:this.onElementPainted,scope:this,args:[e]}))},unsubscribe:function(e){var t=e.id,i=this.subscribers,n=this.monitors;i[t]&&!--i[t]&&(delete i[t],n[t].destroy(),delete n[t]),e.activeRead&&Ext.TaskQueue.cancelRead(e.activeRead)},fireElementPainted:function(e){delete e.activeRead,this.fire(e,"painted",[e])},onElementPainted:function(e){e.activeRead||(e.activeRead=Ext.TaskQueue.requestRead("fireElementPainted",this,[e],!!e.$skipResourceCheck))}},function(e){e.instance=new e}),Ext.define("Ext.dom.Element",function(O){function t(e,t){return t.charAt(1).toUpperCase()}function d(e){return parseFloat(e)||0}var e,u,c,o,h,n,f,s,g,r,a,l,p=window,m=document,x=m.documentElement,y=p.top,v=[],E="position",b=/\w/g,C=/\s+/,S=/[\s]+/,i=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,w=/\?$/,T=/top/i,P={},k={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},I={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},R={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},M={b:"backward",back:"backward",f:"forward"},A=[I.l,I.r,I.t,I.b],D=[k.l,k.r,k.t,k.b],F=/\d+$/,L=/\d+(px|r?em|%|vh|vw|vmin|vmax|en|ch|ex|pt|in|cm|mm|pc)$/i,B=/^-ms-/,N=/(-[a-z])/gi,H=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,V=/^\d+(?:\.\d*)?px$/i,_=/(%|r?em|auto|vh|vw|vmin|vmax|ch|ex)$/i,z={},W="originalDisplay",G=function(e,t){var i,n,r;if(1===e.nodeType&&(e._extData=null,t))for(n=0,r=(i=e.childNodes).length;n<r;++n)G(i[n],t)},X=Ext.baseCSSPrefix+"hidden-opacity",U=Ext.baseCSSPrefix+"hidden-visibility",Y=Ext.baseCSSPrefix+"hidden-display",q=Ext.baseCSSPrefix+"hidden-offsets",K=Ext.baseCSSPrefix+"hidden-clip",$=0,j=0,Q=!1,Z=!1,J=/text|password|search|tel|url/i;try{e=y.__elementIdCounter__,y.__elementIdCounter__=e}catch(e){y=p}return y.__elementIdCounter__=e=(y.__elementIdCounter__||0)+1,u="ext-window-"+e,c="ext-document-"+e,Object.freeze&&Object.freeze(v),{alternateClassName:["Ext.Element"],mixins:["Ext.util.Positionable","Ext.mixin.Observable"],requires:["Ext.dom.Shadow","Ext.dom.Shim","Ext.dom.ElementEvent","Ext.event.publisher.Dom","Ext.event.publisher.Gesture","Ext.event.publisher.ElementSize","Ext.event.publisher.ElementPaint"],uses:["Ext.dom.Helper","Ext.dom.CompositeElement","Ext.dom.Fly","Ext.dom.TouchAction","Ext.event.publisher.Focus"],observableType:"element",isElement:!0,skipGarbageCollection:!0,$applyConfigs:!0,identifiablePrefix:"ext-element-",_selectDir:M,styleHooks:{transform:{set:function(e,t,i){var n,r="";if("string"!=typeof t){for(n in t)r&&(r+=" "),0===n.indexOf("translate")?r+=n+"("+O.addUnits(t[n],"px")+")":r+=n+"("+t[n]+")";t=r}e.style.transform=t}}},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(e){var t,i=this;if("string"==typeof e&&(e=m.getElementById(e)),!e)return Ext.raise("Invalid domNode reference or an id of an existing domNode: "+e),null;Ext.cache[e.id]&&Ext.raise("Element cache already contains an entry for id '"+e.id+"'.  Use Ext.get() to create or retrieve Element instances."),(t=(i.dom=e).id)||(e.id=t=i.generateAutoId()),i.id=t,i.validIdRe.test(i.id)||Ext.raise('Invalid Element "id": "'+i.id+'"'),i.el=i,(Ext.cache[t]=i).longpressListenerCount=0,i.mixins.observable.constructor.call(i)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,OPACITY:5,minKeyboardHeight:100,unitRe:L,useDelegatedEvents:!0,validNodeTypes:{1:1,9:1},namespaceURIs:{html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"},selectableCls:Ext.baseCSSPrefix+"selectable",unselectableCls:Ext.baseCSSPrefix+"unselectable",maxRippleDiameter:75,addUnits:function(e,t){return"number"==typeof e?e+(t||"px"):""===e||"auto"===e||null==e?e||"":F.test(e)?e+(t||"px"):L.test(e)?e:(Ext.isString(e)&&0===e.indexOf("calc")||Ext.Logger.warn("Warning, size detected ("+e+") not a valid property value on Element.addUnits."),e||"")},create:function(e,t,i){var n,r,o,a,s,l,d,u,c,h;if((e=e||{}).isElement)return t?e.dom:e;if("nodeType"in e)return t?e:Ext.get(e);if("string"==typeof e)return m.createTextNode(e);for(l in a=(a=e.tag)||"div",o=(r=(h=e.namespace||i)?m.createElementNS(this.namespaceURIs[h]||h,a):m.createElement(a)).style,e)if("tag"!==l&&"namespace"!==l)switch(s=e[l],l){case"style":if("string"==typeof s)r.setAttribute(l,s);else for(d in s)o[d]=s[d];break;case"className":case"cls":c=s.split(C),n=n?n.concat(c):c;break;case"classList":n=n?n.concat(s):s;break;case"text":r.textContent=s;break;case"html":r.innerHTML=s;break;case"hidden":n?n.push(Y):n=[Y];break;case"children":if(null!=s)for(d=0,u=s.length;d<u;d++)r.appendChild(this.create(s[d],!0,h));break;default:null!=s&&r.setAttribute(l,s)}return n&&(r.className=n.join(" ")),t?r:this.get(r)},fly:function(e,t){return Ext.fly(e,t)},fromPoint:function(){var r;if(Ext.isIE||Ext.isEdge)try{r=window.self!==window.top}catch(e){r=!0}return function(e,t,i){var n=null;return!(n=m.elementFromPoint(e,t))&&r&&(n=m.elementFromPoint(e,t)),i?n:Ext.get(n)}}(),fromPagePoint:function(e,t,i){var n=Ext.getDoc().getScroll();return O.fromPoint(e-n.left,t-n.top,i)},get:function(e){var t,i,n,r,o,a,s,l=Ext.cache;if(!e)return null;function d(e){Ext.raise("DOM element with id "+e+" in Element cache is not the same as element in the DOM. Make sure to clean up Element instances using destroy()")}if(e.isFly&&(e=e.dom),"string"==typeof e){if(n=e,l.hasOwnProperty(n)){if((r=l[n]).skipGarbageCollection||!Ext.isGarbage(r.dom))return(i=Ext.getElementById?Ext.getElementById(n):m.getElementById(n))&&i!==r.dom&&d(n),r;r.destroy()}if(n===u)return O.get(p);if(n===c)return O.get(m);if(i=Ext.getElementById?Ext.getElementById(n):m.getElementById(n))return new O(i)}if((t=e.nodeType)?(o=9===t,s=this.validNodeTypes[t]):a=e.window==e,s||a){if(n=e.id,e===m?e.id=n=c:e==p&&(e.id=n=u),l.hasOwnProperty(n)){if((r=l[n]).skipGarbageCollection||e===r.dom||!Ext.isGarbage(r.dom))return e!==r.dom&&d(n),r;r.destroy()}return e=new O(e),(a||o)&&(e.skipGarbageCollection=!0),e}return e.isElement||e.isComposite?e:Ext.isIterable(e)?this.select(e):null},getActiveElement:function(e){var t=m.activeElement;return t&&t.focus||(t=m.body),e?Ext.get(t):t},getDocumentHeight:function(){return Math.max(Ext.isStrict?x.scrollHeight:m.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(Ext.isStrict?x.scrollWidth:m.body.scrollWidth,this.getViewportWidth())},getOrientation:function(){return Ext.supports.OrientationChange?0==p.orientation?"portrait":"landscape":p.innerHeight>p.innerWidth?"portrait":"landscape"},getViewportHeight:function(){var e=O._viewportHeight;return Ext.isIE9m?m.documentElement.clientHeight:null!=e?e:x.clientHeight},getViewportWidth:function(){var e=O._viewportWidth;return Ext.isIE9m?m.documentElement.clientWidth:null!=e?e:x.clientWidth},getViewportScale:function(){return(Ext.isiOS||Ext.isAndroid?1:y.devicePixelRatio||y.screen.deviceXDPI/y.screen.logicalXDPI)*this.getViewportTouchScale()},getViewportTouchScale:function(e){var t,i=1;return!e&&(t=this._viewportTouchScale)?t:(Ext.isIE10p||Ext.isEdge||Ext.isiOS?i=x.offsetWidth/p.innerWidth:Ext.isChromeMobile&&(i=y.outerWidth/y.innerWidth),i)},getViewSize:function(){return{width:O.getViewportWidth(),height:O.getViewportHeight()}},hasUnit:function(e){return!(!e||!L.test(e))},isRelativeUnit:function(e){return!e||_.test(e)},maskIframes:function(){var e=document.getElementsByTagName("iframe"),t=new Ext.dom.Fly;Ext.each(e,function(e){t.attach(e.parentNode).mask().setStyle("background-color","transparent")})},normalize:function(e){return z[e]||(z[e]=e.replace(B,"ms-").replace(N,t))},_onWindowFocusChange:function(e){Ext.fly(e.target).is(O.editableSelector)&&($=new Date,Q="focusin"===e.type||"pointerup"===e.type)},_onWindowResize:function(){var e,t,i=x.clientWidth,n=x.clientHeight,r=new Date;e=i-O._documentWidth,t=n-O._documentHeight,O._documentWidth=i,O._documentHeight=n,(r-$<1e3||r-j<1e3)&&0==e&&Q&&t<=-O.minKeyboardHeight?Z=!0:(Z&&0==e&&t>=O.minKeyboardHeight&&(Z=!1,j=new Date),Z||(O._viewportWidth=i,O._viewportHeight=n))},parseBox:function(e){var t,i,n;return"number"==(t=typeof(e=e||0))?{top:e,right:e,bottom:e,left:e}:"string"!=t?e:(1===(n=(i=e.split(" ")).length)?i[1]=i[2]=i[3]=i[0]:2===n?(i[2]=i[0],i[3]=i[1]):3===n&&(i[3]=i[1]),{top:parseFloat(i[0])||0,right:parseFloat(i[1])||0,bottom:parseFloat(i[2])||0,left:parseFloat(i[3])||0})},parseStyles:function(e){var t,i={};if(e)for(H.lastIndex=0;t=H.exec(e);)i[t[1]]=t[2]||"";return i},select:function(e,t,i){return Ext.fly(i||m).select(e,t)},query:function(e,t,i){return Ext.fly(i||m).query(e,t)},unitizeBox:function(e,t){return e=this.parseBox(e),this.addUnits(e.top,t)+" "+this.addUnits(e.right,t)+" "+this.addUnits(e.bottom,t)+" "+this.addUnits(e.left,t)},unmaskIframes:function(){var e=document.getElementsByTagName("iframe"),t=new Ext.dom.Fly;Ext.each(e,function(e){t.attach(e.parentNode).unmask()})},serializeForm:function(e){var t,i,n,r,o,a,s,l,d,u=e.elements||(m.forms[e]||Ext.getDom(e)).elements,c=!1,h=encodeURIComponent,f="",g=u.length;for(a=0;a<g;a++)if(i=(t=u[a]).name,n=t.type,r=t.options,!t.disabled&&i)if(/select-(one|multiple)/i.test(n))for(l=r.length,s=0;s<l;s++)(d=r[s]).selected&&(o=d.hasAttribute("value"),f+=Ext.String.format("{0}={1}&",h(i),h(o?d.value:d.text)));else/file|undefined|reset|button/i.test(n)||/radio|checkbox/i.test(n)&&!t.checked||"submit"===n&&c||(f+=h(i)+"="+h(t.value)+"&",c=/submit/i.test(n));return f.substr(0,f.length-1)},getCommonAncestor:function(e,t,i){for((n=n||new Ext.dom.Fly).attach(Ext.getDom(e));!n.isAncestor(t);){if(!n.dom.parentNode){n.attach(m.body);break}n.attach(n.dom.parentNode)}return i?n.dom:Ext.get(n)}},selectable:function(){return this.dom.unselectable="",this.removeCls(O.unselectableCls),this.addCls(O.selectableCls),this},unselectable:function(){return Ext.isOpera&&(this.dom.unselectable="on"),this.removeCls(O.selectableCls),this.addCls(O.unselectableCls),this},statics:{tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:!0,IFRAME:!0,EMBED:!0,INPUT:!0,OBJECT:!0,SELECT:!0,TEXTAREA:!0,HTML:!!Ext.isIE,BODY:!Ext.isIE},naturallyTabbableTags:{BUTTON:!0,IFRAME:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,OBJECT:!!Ext.isIE8m},inputTags:{INPUT:!0,TEXTAREA:!0},tabbableSavedCounterAttribute:"data-tabindex-counter",tabbableSavedValueAttribute:"data-tabindex-value",splitCls:function(e){return"string"==typeof e&&(e=e.split(C)),e}},_init:function(e){e.tabbableSelector+=",["+e.tabbableSavedCounterAttribute+"]"},addCls:function(e,t,i){return this.replaceCls(null,e,t,i)},addClsOnClick:function(e,t,i){var n=this,r=Ext.isFunction(t);return n.on("mousedown",function(){if(r&&!1===t.call(i||n,n))return!1;n.addCls(e),Ext.getDoc().on({mouseup:function(){n.dom&&n.removeCls(e)},single:!0})}),n},addClsOnFocus:function(e,t,i){var n=this,r=Ext.isFunction(t);return n.on("focus",function(){if(r&&!1===t.call(i||n,n))return!1;n.addCls(e)}),n.on("blur",function(){n.dom&&n.removeCls(e)}),n},addClsOnOver:function(e,t,i){var n=this,r=Ext.isFunction(t);return n.hover(function(){r&&!1===t.call(i||n,n)||n.addCls(e)},function(){n.removeCls(e)}),n},addStyles:function(e,t){var i,n,r=0,o=(e||"").match(b),a=[],s=o.length;if(1===s)r=parseFloat(this.getStyle(t[o[0]]))||0;else if(s){for(n=0;n<s;n++)i=o[n],a.push(t[i]);for(a=this.getStyle(a),n=0;n<s;n++)i=o[n],r+=parseFloat(a[t[i]])||0}return r},addUnits:function(e,t){return O.addUnits(e,t)},animate:function(e){return(e=new Ext.fx.Animation(e)).setElement(this),(this._activeAnimation=e).on({animationend:this._onAnimationEnd,scope:this}),Ext.Animator.run(e),e},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){return this.appendChild.apply(this,arguments)},appendChild:function(e,t){var i,n,r;if(e.nodeType||e.dom||"string"==typeof e)return e=Ext.getDom(e),this.dom.appendChild(e),t?e:Ext.get(e);if(e.length){for(i=Ext.fly(m.createDocumentFragment()),n=e.length,r=0;r<n;r++)i.appendChild(e[r],t);return e=Ext.Array.toArray(i.dom.childNodes),this.dom.appendChild(i.dom),t?e:new Ext.dom.CompositeElementLite(e)}return this.createChild(e,null,t)},appendTo:function(e){return Ext.getDom(e).appendChild(this.dom),this},applyStyles:function(e){return e&&("function"==typeof e&&(e=e.call()),"string"==typeof e&&(e=O.parseStyles(e)),"object"==typeof e&&this.setStyle(e)),this},blur:function(){var e=this.dom;if(e===m.body)return this.focus(void 0,e);try{e.blur()}catch(e){}return this},cacheScrollValues:function(){var e,t,i,n,r=[],o=[];for(h=h||new Ext.dom.Fly,i=0,n=(e=this.query("*")).length;i<n;i++)(0<(t=e[i]).scrollTop||0!==t.scrollLeft)&&(o.push(t),r.push(h.attach(t).getScroll()));return function(){var e,t,i;for(t=0,i=o.length;t<i;t++)e=r[t],h.attach(o[t]),h.setScrollLeft(e.left),h.setScrollTop(e.top)}},center:function(e){return this.alignTo(e||m,"c-c")},child:function(e,t){var i;return Ext.supports.Selectors2?this.selectNode(":scope>"+e,!!t):(i=null!=this.id?this.id:Ext.get(this).id,this.selectNode(Ext.makeIdSelector(i)+" > "+e,!!t))},clone:function(e,t){var i=this.dom.cloneNode(e);return Ext.supports.CloneNodeCopiesExpando&&G(i,e),t?i:Ext.get(i)},constrainScrollLeft:function(e){var t=this.dom;return Math.max(Math.min(e,t.scrollWidth-t.clientWidth),0)},constrainScrollTop:function(e){var t=this.dom;return Math.max(Math.min(e,t.scrollHeight-t.clientHeight),0)},createChild:function(e,t,i){return e=e||{tag:"div"},t?Ext.DomHelper.insertBefore(t,e,!0!==i):Ext.DomHelper.append(this.dom,e,!0!==i)},contains:function(e){if(!e)return!1;var t=Ext.getDom(e);return t===this.dom||this.isAncestor(t)},destroy:function(){var e=this,t=e.dom;e.destroyed?Ext.Logger.warn('Cannot destroy Element "'+e.id+'". Already destroyed.'):(e.resumeFocusEventsTimer&&(Ext.unasap(e.resumeFocusEventsTimer),e.resumeFocusEventsTimer=null),e.repaintTimer&&(e.repaintTimer=Ext.undefer(e.repaintTimer)),e.deferFocusTimer&&(e.deferFocusTimer=Ext.undefer(e.deferFocusTimer)),t&&(t===m.body?Ext.raise("Cannot destroy body element."):t===m?Ext.raise("Cannot destroy document object."):t===p&&Ext.raise("Cannot destroy window object")),t&&t.parentNode&&t.parentNode.removeChild(t),e.$ripples&&e.destroyAllRipples(),e.collect())},detach:function(){var e=this.dom,t=this.component;return e&&e.parentNode&&"BODY"!==e.tagName&&(t&&t.revertFocus(),e.parentNode.removeChild(e)),this},disableShadow:function(){var e=this.shadow;e&&(e.hide(),e.disabled=!0)},disableShim:function(){var e=this.shim;e&&(e.hide(),e.disabled=!0)},doReplaceWith:function(e){var t=this.dom;t.parentNode.replaceChild(Ext.getDom(e),t)},doScrollIntoView:function(e,t,i,n,r,o){h=h||new Ext.dom.Fly;var a=this.dom,s=h.attach(e)[r](),l=e.scrollTop,d=this.getScrollIntoViewXY(e,s,l),u=d.x,c=d.y;return n&&(i?i=Ext.apply({listeners:{afteranimate:function(){h.attach(a).highlight()}}},i):h.attach(a).highlight()),c!==l&&h.attach(e).scrollTo("top",c,i),!1!==t&&u!==s&&h.attach(e)[o]("left",u,i),this},down:function(e,t){return this.selectNode(e,!!t)},enableShadow:function(e,t){var i=this.shadow||(this.shadow=new Ext.dom.Shadow(Ext.apply({target:this},e))),n=this.shim;n&&(n.offsets=i.outerOffsets,(n.shadow=i).shim=n),!0===t||!1!==t&&this.isVisible()?i.show():i.hide(),i.disabled=!1},enableShim:function(e,t){var i=this.shim||(this.shim=new Ext.dom.Shim(Ext.apply({target:this},e))),n=this.shadow;return n&&(i.offsets=n.outerOffsets,(i.shadow=n).shim=i),!0===t||!1!==t&&this.isVisible()?i.show():i.hide(),i.disabled=!1,i},findParent:function(e,t,i){var n=this.dom,r=x,o=0;for(t||0===t?"number"!=typeof t&&(r=Ext.getDom(t),t=Number.MAX_VALUE):t=50;n&&1===n.nodeType&&o<t&&n!==r;){if(Ext.fly(n).is(e))return i?Ext.get(n):n;o++,n=n.parentNode}return null},findParentNode:function(e,t,i){var n=Ext.fly(this.dom.parentNode);return n?n.findParent(e,t,i):null},first:function(e,t){return this.matchNode("nextSibling","firstChild",e,t)},focus:function(e,t){return t=t||this.dom,Number(e)?Ext.defer(this.focus,e,this,[null,t]):(Ext.fireEvent("beforefocus",t),t.focus()),this},collect:function(){var e=this,t=e.dom,i=e.shadow,n=e.shim;e.isFly||(e.mixins.observable.destroy.call(e),delete Ext.cache[e.id],e.el=null),t&&(t._extData=e.dom=null),i&&(i.hide(),e.shadow=null),n&&(n.hide(),e.shim=null)},getAnchorToXY:function(e,t,i,n){return e.getAnchorXY(t,i,n)},getAttribute:function(e,t){var i=this.dom;return t?i.getAttributeNS(t,e)||i.getAttribute(t+":"+e):i.getAttribute(e)||i[e]||null},getAttributes:function(){var e,t,i,n=this.dom.attributes,r={};for(t=0,i=n.length;t<i;t++)r[(e=n[t]).name]=e.value;return r},getBottom:function(e){return(e?this.getLocalY():this.getY())+this.getHeight()},getById:function(e,t){var i=m.getElementById(e)||this.dom.querySelector(Ext.makeIdSelector(e));return t?i:i?Ext.get(i):null},getBorderPadding:function(){var e=this.getStyle(A),t=this.getStyle(D);return{beforeX:(parseFloat(t[k.l])||0)+(parseFloat(e[I.l])||0),afterX:(parseFloat(t[k.r])||0)+(parseFloat(e[I.r])||0),beforeY:(parseFloat(t[k.t])||0)+(parseFloat(e[I.t])||0),afterY:(parseFloat(t[k.b])||0)+(parseFloat(e[I.b])||0)}},getBorders:function(){var e=this.getStyle(D);return{beforeX:parseFloat(e[k.l])||0,afterX:parseFloat(e[k.r])||0,beforeY:parseFloat(e[k.t])||0,afterY:parseFloat(e[k.b])||0}},getBorderWidth:function(e){return this.addStyles(e,k)},getClassMap:function(e){var t=this.getData();return t&&(t=t.classMap,!1!==e&&(t=Ext.apply({},t))),t},getData:function(e){var t,i=this.dom;return i&&(t=i._extData||(i._extData={}),!1===e||t.isSynchronized||this.synchronize()),t||null},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getLastChild:function(){return Ext.get(this.dom.lastElementChild)},getHeight:function(e,t){var i,n,r=this.dom;return this.isStyle("display","none")?0:("BODY"===r.nodeName?i=O.getViewportHeight():t?i=r.getBoundingClientRect().height:null==(i=r.offsetHeight)&&(i=r.getBoundingClientRect().height),Ext.supports.Direct2DBug&&(n=this.adjustDirect2DDimension("height"),t?i+=n:0<n&&n<.5&&i++),e&&(i-=this.getBorderWidth("tb")+this.getPadding("tb")),i<0?0:i)},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(e){return e?this.getLocalX():this.getX()},getLocalX:function(){var e,t=this.getStyle("left");return t&&"auto"!==t?V.test(t)?t=parseFloat(t):(t=this.getX(),(e=this.dom.offsetParent)&&(t-=Ext.fly(e).getX())):t=0,t},getLocalXY:function(){var e,t=this.getStyle(["left","top"]),i=t.left,n=t.top;return i&&"auto"!==i?V.test(i)?i=parseFloat(i):(i=this.getX(),(e=this.dom.offsetParent)&&(i-=Ext.fly(e).getX())):i=0,n&&"auto"!==n?V.test(n)?n=parseFloat(n):(n=this.getY(),(e=this.dom.offsetParent)&&(n-=Ext.fly(e).getY())):n=0,[i,n]},getLocalY:function(){var e,t=this.getStyle("top");return t&&"auto"!==t?V.test(t)?t=parseFloat(t):(t=this.getY(),(e=this.dom.offsetParent)&&(t-=Ext.fly(e).getY())):t=0,t},getMargin:(a={t:"top",l:"left",r:"right",b:"bottom"},l=["margin-top","margin-left","margin-right","margin-bottom"],function(e){var t,i,n;if(e)n=this.addStyles(e,R);else if(n={},(t=this.getStyle(l))&&"object"==typeof t)for(i in n={},R)n[i]=n[a[i]]=parseFloat(t[R[i]])||0;return n}),getPadding:function(e){return this.addStyles(e,I)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(e){return(e?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var e,t,i=this.dom,n=m.body;return t=i===m||i===n?(e=x.scrollLeft||(n?n.scrollLeft:0),x.scrollTop||(n?n.scrollTop:0)):(e=i.scrollLeft,i.scrollTop),{left:e,top:t}},getScrollIntoViewXY:function(e,t,i,n){var r,o,a,s=this.dom;return n=n||P,o=e.isRegion?(a=e.height,e.width):(a=(e=Ext.getDom(e)).clientHeight,e.clientWidth),r=this.getOffsetsTo(e),{y:this.calcScrollPos(r[1]+i,s.offsetHeight,i,a,n.y),x:this.calcScrollPos(r[0]+t,s.offsetWidth,t,o,n.x)}},calcScrollPos:function(e,t,i,n,r){var o=e+t,a=i+n,s=r&&!w.test(r),l=i;return s||(r=r&&r.slice(0,-1),n<t||e<i?(r=r||"start",s=!0):a<o&&(r=r||"end",s=!0)),s&&("start"===r?l=e:"center"===r?l=Math.max(0,e-Math.floor(n/2)):"end"===r&&(l=Math.max(0,o-n))),l},getScrollLeft:function(){var e=this.dom;return e===m||e===m.body?this.getScroll().left:e.scrollLeft},getScrollTop:function(){var e=this.dom;return e===m||e===m.body?this.getScroll().top:e.scrollTop},getSize:function(e){return{width:this.getWidth(e),height:this.getHeight(e)}},getStyle:function(e,t){var i,n,r,o,a,s,l=this.dom,d="string"!=typeof e,u=this.styleHooks,c=e,h=c,f=1;if(d&&(n={},c=h[0],s=0,!(f=h.length)))return n;if(!l||l.documentElement)return n||"";i=l.style,t?a=i:(a=l.ownerDocument.defaultView.getComputedStyle(l,null))||(t=!0,a=i);do{if((r=u[c])||(u[c]=r={name:O.normalize(c)}),o=r.get?r.get(l,this,t,a):a[r.name],!d)return o;n[c]=o,c=h[++s]}while(s<f);return n},getStyleValue:function(e){return this.dom.style.getPropertyValue(e)},getCaretPos:function(){var e,t,i=this.dom;return J.test(i.type)?(t="number"!=typeof(e=i.selectionStart)&&this.getTextSelection())&&(e=t[0]):Ext.raise('Input type of "'+i.type+'" does not support selectionStart'),e},setCaretPos:function(e){this.selectText(e,e)},getTextSelection:function(){var e=this.dom;return J.test(e.type)?[e.selectionStart,e.selectionEnd,e.selectionDirection]:(Ext.raise('Input type of "'+this.dom.type+'" does not support selectionStart, selectionEnd and selectionDirection'),[])},selectText:function(e,t,i){var n,r,o=this.dom;return o&&J.test(o.type)?(e=e||0,r=o.value.length,void 0===t&&(t=r),i=M[i]||i||"forward",o.setSelectionRange?o.setSelectionRange(e,t,i):o.createTextRange&&(t<e&&(e=t),(n=o.createTextRange()).moveStart("character",e),n.moveEnd("character",-(r-t)),n.select())):J.test(o.type)||Ext.raise('Input type of "'+o.type+'" does not support setSelectionRange'),this},getTop:function(e){return e?this.getLocalY():this.getY()},getTouchAction:function(){return Ext.dom.TouchAction.get(this.dom)},getValue:function(e){var t=this.dom.value;return e?parseInt(t,10):t},getViewSize:function(){var e=this.dom;return e===m||e===m.body?{width:O.getViewportWidth(),height:O.getViewportHeight()}:{width:e.clientWidth,height:e.clientHeight}},getVisibilityMode:function(){var e=this.getData(),t=e.visibilityMode;return void 0===t&&(e.visibilityMode=t=O.DISPLAY),t},getWidth:function(e,t){var i,n,r,o=this.dom;return this.isStyle("display","none")?0:(n=Ext.supports.BoundingClientRect?(i=o.getBoundingClientRect(),n=this.vertical&&!Ext.supports.RotatedBoundingClientRect?i.bottom-i.top:i.right-i.left,t?n:Math.ceil(n)):o.offsetWidth,Ext.supports.Direct2DBug&&!this.vertical&&(r=this.adjustDirect2DDimension("width"),t?n+=r:0<r&&r<.5&&n++),e&&(n-=this.getBorderWidth("lr")+this.getPadding("lr")),n<0?0:n)},getX:function(){return this.getXY()[0]},getXY:function(){var e,t,i=Math.round,n=this.dom,r=m.body,o=0,a=0;if(n!==m&&n!==r)try{e=r.getBoundingClientRect(),o=(t=n.getBoundingClientRect()).left-e.left,a=t.top-e.top}catch(e){}return[i(o),i(a)]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},hasCls:function(e){return this.getClassMap().hasOwnProperty(e)},hide:function(){return this.setVisible(!1)},hover:function(e,t,i,n){return this.on("mouseenter",e,i||this.dom,n),this.on("mouseleave",t,i||this.dom,n),this},indexOf:function(e){var t=this.dom,i=e&&Ext.getDom(e);return t=t&&t.childNodes,i&&t?Array.prototype.indexOf.call(t,i):-1},insertAfter:function(e){return(e=Ext.getDom(e)).parentNode.insertBefore(this.dom,e.nextSibling),this},insertBefore:function(e){return(e=Ext.getDom(e)).parentNode.insertBefore(this.dom,e),this},insertFirst:function(e,t){return(e=e||{}).nodeType||e.dom||"string"==typeof e?(e=Ext.getDom(e),this.dom.insertBefore(e,this.dom.firstChild),t?e:Ext.get(e)):this.createChild(e,this.dom.firstChild,t)},insertHtml:function(e,t,i){var n=Ext.DomHelper.insertHtml(e,this.dom,t);return i?Ext.get(n):n},insertSibling:function(e,t,i){var n,r,o,a,s=Ext.DomHelper,l="after"===(t||"before").toLowerCase();if(Ext.isIterable(e)){if(o=e.length,r=Ext.fly(m.createDocumentFragment()),Ext.isArray(e))for(a=0;a<o;a++)n=r.appendChild(e[a],i);else{for(a=0;a<o;a++)r.dom.appendChild(n=e[0]);!1===i&&(n=Ext.get(n))}return this.dom.parentNode.insertBefore(r.dom,l?this.dom.nextSibling:this.dom),n}return(e=e||{}).nodeType||e.dom?(n=this.dom.parentNode.insertBefore(Ext.getDom(e),l?this.dom.nextSibling:this.dom),i||(n=Ext.get(n))):n=l&&!this.dom.nextSibling?s.append(this.dom.parentNode,e,!i):s[l?"insertAfter":"insertBefore"](this.dom,e,!i),n},is:function(e){var t=this.dom;return!e||!!t.tagName&&(Ext.isFunction(e)?e(t):t[Ext.supports.matchesSelector](e))},isAncestor:function(e){var t=!1,i=this.dom,n=Ext.getDom(e);if(i&&n){if(!n.nodeType)return!1;if(i.contains)return i.contains(n);if(i.compareDocumentPosition)return!!(16&i.compareDocumentPosition(n));for(;n=n.parentNode;)t=n===i||t}return t},isPainted:Ext.browser.is.IE?function(){var e=this.dom;return Boolean(e&&(0!==e.offsetHeight||0!==e.offsetWidth))}:function(){var e=this.dom;return Boolean(e&&e.offsetParent)},isScrollable:function(){var e=this.dom;return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},isStyle:function(e,t){return this.getStyle(e)===t},isVisible:function(e,t){var i,n=this.dom,r=!0;if(!n)return!1;for(t=t||3,o=o||new Ext.dom.Fly,i=n.ownerDocument.documentElement;n!==i&&(n&&11!==n.nodeType||(r=!1),r&&(o.attach(n),1&t&&(r=!o.isStyle("display","none")),r&&2&t&&(r=!o.isStyle("visibility","hidden"))),r&&e);n=n.parentNode);return r},last:function(e,t){return this.matchNode("previousSibling","lastChild",e,t)},matchNode:function(e,t,i,n){var r,o=this.dom;if(!o)return null;for(r=o[t];r;){if(1===r.nodeType&&(!i||Ext.fly(r,"_matchNode").is(i)))return n?r:Ext.get(r);r=r[e]}return null},measure:function(e){var t,i,n=this.dom,r="h"!==e,o="w"!==e,a=0,s=0,l=!Ext.supports.ComputedSizeIncludesPadding;return"BODY"===n.nodeName?(s=o&&O.getViewportHeight(),a=r&&O.getViewportWidth()):(i=n.offsetParent,l|="content-box"===(t=n.ownerDocument.defaultView.getComputedStyle(n,null)).boxSizing,null===i&&"fixed"!==t.position||(o&&(s=d(t.height),l&&(s+=d(t.paddingTop)+d(t.paddingBottom)+d(t.borderTopWidth)+d(t.borderBottomWidth))),r&&(a=d(t.width),l&&(a+=d(t.paddingLeft)+d(t.paddingRight)+d(t.borderLeftWidth)+d(t.borderRightWidth))))),e?r?a:s:e?null:{width:a,height:s}},measureContent:function(e){var t="h"!==e,i=this.measure(e),n=e?i:i.height,r=e?i:i.width;return"w"!==e&&(n-=this.getBorderWidth("tb")+this.getPadding("tb")),t&&(r-=this.getBorderWidth("lr")+this.getPadding("lr")),e?t?r:n:{width:r,height:n}},monitorMouseLeave:function(t,i,n){var r,o=this,e={mouseleave:function(e){Ext.isIE9m&&e.enableIEAsync(),r=Ext.defer(i,t,n||o,[e])},mouseenter:function(){Ext.undefer(r)},destroy:function(){Ext.undefer(r),o.destroyed||o.un(e)}};return o.on(e),e},next:function(e,t){return this.matchNode("nextSibling","nextSibling",e,t)},parent:function(e,t){return this.matchNode("parentNode","parentNode",e,t)},peekData:function(){var e=this.dom;return e&&e._extData||null},position:function(e,t,i,n){"BODY"!==this.dom.tagName&&(!e&&this.isStyle(E,"static")?this.setStyle(E,"relative"):e&&this.setStyle(E,e),t&&this.setStyle("z-index",t),(i||n)&&this.setXY([i||!1,n||!1]))},prev:function(e,t){return this.matchNode("previousSibling","previousSibling",e,t)},query:function(e,t,i){var n,r,o,a,s,l,d,u=this.dom;if(!u)return null;for(t=!1!==t,i||(n=[]),l=0,r=(e=e.split(",")).length;l<r;l++)if("string"==typeof e[l]){if(i)return a=u.querySelector(e[l]),t?a:Ext.get(a);for(d=0,o=(s=u.querySelectorAll(e[l])).length;d<o;d++)n.push(t?s[d]:Ext.get(s[d]))}return n},radioCls:function(e){var t,i,n,r=this.dom.parentNode.childNodes;for(e=Ext.isArray(e)?e:[e],i=0,n=r.length;i<n;i++)(t=r[i])&&1===t.nodeType&&Ext.fly(t).removeCls(e);return this.addCls(e)},redraw:function(){var e=this.dom,t=e.style;t.display="none",e.offsetHeight,t.display=""},remove:function(){this.destroy()},removeChild:function(e){return this.dom.removeChild(Ext.getDom(e)),this},removeCls:function(e,t,i){return this.replaceCls(e,null,t,i)},repaint:function(e,t){var i,n,r=this;return e?null!=t&&(i=!(n=t)):(e=Ext.baseCSSPrefix+"repaint",n=!(i=!1)),r.toggleCls(e,n),r.repaintTimer||(r.repaintTimer=Ext.defer(function(){r.repaintTimer=null,r.dom&&r.toggleCls(e,i)},1)),r},replace:function(e,t){var i=(e=Ext.getDom(e)).parentNode,n=e.id,r=this.dom;return i||Ext.raise('Cannot replace element "'+n+'". It is not attached to a parent node.'),!1!==t&&n&&Ext.cache[n]?(i.insertBefore(r,e),Ext.get(e).destroy()):i.replaceChild(r,e),this},replaceCls:function(e,t,i,n){var r,o,a,s,l,d=this.dom,u=0,c=0,h=e,f=(t||e)&&this.getData();if(f){for(r=f.classList,o=f.classMap,t=t?"string"==typeof t?t.split(C):t:v,h=h?"string"==typeof h?h.split(C):h:v,(i=i||"")&&"-"!==i[i.length-1]&&(i+="-"),(n=n||"")&&"-"!==n[0]&&(n="-"+n),a=0,s=h.length;a<s;a++)(l=h[a])&&(l=i+l+n,C.test(l)&&Ext.raise("Class names in arrays must not contain spaces"),o[l]&&(delete o[l],++c));for(a=0,s=t.length;a<s;a++)(l=t[a])&&(l=i+l+n,C.test(l)&&Ext.raise("Class names in arrays must not contain spaces"),o[l]||(o[l]=!0,c||(r.push(l),++u)));c?this.setClassMap(o,!0):u&&(r=r.join(" "),!Ext.isIE8&&d instanceof SVGElement?d.setAttribute("class",r):d.className=r)}return this},replaceWith:function(e){var t,i=this.dom,n=i.parentNode,r=Ext.cache;return this.clearListeners(),t=e.nodeType||e.dom||"string"==typeof e?(e=Ext.get(e),n.insertBefore(e.dom,i)):Ext.DomHelper.insertBefore(i,e),n.removeChild(i),this.dom=t,this.isFly||(delete r[this.id],r[this.id=Ext.id(t)]=this),this},resolveListenerScope:function(e){var t=this.component;return t?t.resolveListenerScope(e):this},scroll:function(e,t,i){if(!this.isScrollable())return!1;e=e.charAt(0);var n,r,o=this.dom,a="r"===e||"l"===e?"left":"top",s=!1;return"l"!==e&&"t"!==e&&"u"!==e||(t=-t),(r="left"==a?(n=o.scrollLeft,this.constrainScrollLeft(n+t)):(n=o.scrollTop,this.constrainScrollTop(n+t)))!==n&&(this.scrollTo(a,r,i),s=!0),s},scrollBy:function(e,t,i){var n=this.dom;return e.length?(i=t,t=e[1],e=e[0]):"number"!=typeof e&&(i=t,t=e.y,e=e.x),e&&this.scrollTo("left",this.constrainScrollLeft(n.scrollLeft+e),i),t&&this.scrollTo("top",this.constrainScrollTop(n.scrollTop+t),i),this},scrollChildIntoView:function(e,t){Ext.fly(e).scrollIntoView(this,t)},scrollIntoView:function(e,t,i,n){return e=Ext.getDom(e)||Ext.getBody().dom,this.doScrollIntoView(e,t,i,n,"getScrollLeft","scrollTo")},scrollTo:function(e,t,i){var n,r=T.test(e)?"scrollTop":"scrollLeft",o=this.dom;return i&&this.anim?((n={to:{}}).to[r]=t,Ext.isObject(i)&&Ext.applyIf(n,i),this.animate(n)):(o[r]=t,o[r]=t),this},select:function(e,t){var i,n;return"string"==typeof e?n=this.query(e,!t):void 0===e.length?Ext.raise("Invalid selector specified: "+e):(n=e,i=!0),t?new Ext.CompositeElement(n,!i):new Ext.CompositeElementLite(n,!0)},selectNode:function(e,t){return this.query(e,t,!0)},set:function(e,t){var i,n,r=this.dom;for(i in e)e.hasOwnProperty(i)&&(n=e[i],"style"===i?this.applyStyles(n):"cls"===i?r.className=n:!1!==t?void 0===n?r.removeAttribute(i):r.setAttribute(i,n):r[i]=n);return this},setBottom:function(e){return this.dom.style.bottom=O.addUnits(e),this},setClassMap:function(e,t){var i,n=this.getData(!1);n&&(e=t&&e||Ext.apply({},e),n.classMap=e,n.classList=i=Ext.Object.getKeys(e),n.isSynchronized=!0,this.dom.className=i.join(" "))},setCls:function(e){var t,i,n,r,o=this.getData(!1);for("string"==typeof e&&(e=e.split(C)),o.classList=r=e.slice(),o.classMap=n={},t=0,i=r.length;t<i;t++)n[r[t]]=!0;this.dom.className=r.join(" ")},setDisplayed:function(e){return"boolean"==typeof e&&(e=e?this._getDisplay():"none"),this.setStyle("display",e),(this.shadow||this.shim)&&this.setUnderlaysVisible("none"!==e),this},setHeight:function(e){return this.dom.style.height=O.addUnits(e),(this.shadow||this.shim)&&this.syncUnderlays(),this},setHtml:function(e){return this.dom&&(this.dom.innerHTML=e),this},setId:function(e){var t=this.id,i=Ext.cache;return t&&delete i[t],this.dom.id=e,i[this.id=e]=this},setLeft:function(e){return this.dom.style.left=O.addUnits(e),(this.shadow||this.shim)&&this.syncUnderlays(),this},setLocalX:function(e){var t=this.dom.style;return t.right="",t.left=null===e?"auto":e+"px",(this.shadow||this.shim)&&this.syncUnderlays(),this},setLocalXY:function(e,t){var i=this.dom.style;return i.right="",e&&e.length&&(t=e[1],e=e[0]),null===e?i.left="auto":void 0!==e&&(i.left=e+"px"),null===t?i.top="auto":void 0!==t&&(i.top=t+"px"),(this.shadow||this.shim)&&this.syncUnderlays(),this},setLocalY:function(e){return this.dom.style.top=null===e?"auto":e+"px",(this.shadow||this.shim)&&this.syncUnderlays(),this},setMargin:function(e){var t=this.dom.style;e||0===e?(e=this.self.unitizeBox(!0===e?5:e),t.setProperty("margin",e,"important")):(t.removeProperty("margin-top"),t.removeProperty("margin-right"),t.removeProperty("margin-bottom"),t.removeProperty("margin-left"))},setMaxHeight:function(e){return this.dom.style["max-height"]=O.addUnits(e),this},setMaxWidth:function(e){return this.dom.style["max-width"]=O.addUnits(e),this},setMinHeight:function(e){return this.dom.style["min-height"]=O.addUnits(e),this},setMinWidth:function(e){return this.dom.style["min-width"]=O.addUnits(e),this},setOpacity:function(e){return this.dom&&this.setStyle("opacity",e),this},setPadding:function(e){var t=this.dom.style;e||0===e?(e=this.self.unitizeBox(!0===e?5:e),t.setProperty("padding",e,"important")):(t.removeProperty("padding-top"),t.removeProperty("padding-right"),t.removeProperty("padding-bottom"),t.removeProperty("padding-left"))},setRight:function(e){return this.dom.style.right=O.addUnits(e),this},setScrollLeft:function(e){return this.dom.scrollLeft=e,this},setScrollTop:function(e){return this.dom.scrollTop=e,this},setSize:function(e,t){var i=this.dom.style;return Ext.isObject(e)&&(t=e.height,e=e.width),void 0!==e&&(i.width=O.addUnits(e)),void 0!==t&&(i.height=O.addUnits(t)),(this.shadow||this.shim)&&this.syncUnderlays(),this},setStyle:function(e,t){var i,n=this.dom,r=this.styleHooks,o=n.style,a=e;if("string"==typeof a)(i=r[a])||(r[a]=i={name:O.normalize(a)}),t=null==t?"":t,i.set?i.set(n,t,this):o[i.name]=t,i.afterSet&&i.afterSet(n,t,this);else for(a in e)(i=r[a])||(r[a]=i={name:O.normalize(a)}),t=null==(t=e[a])?"":t,i.set?i.set(n,t,this):o[i.name]=t,i.afterSet&&i.afterSet(n,t,this);return this},setText:function(e){this.dom.textContent=e},getText:function(){return this.dom.textContent},setTop:function(e){return this.dom.style.top=O.addUnits(e),(this.shadow||this.shim)&&this.syncUnderlays(),this},setTouchAction:function(e){Ext.dom.TouchAction.set(this.dom,e)},setUnderlaysVisible:function(e){var t=this.shadow,i=this.shim;t&&!t.disabled&&(e?t.show():t.hide()),i&&!i.disabled&&(e?i.show():i.hide())},setVisibility:function(e){var t=this.dom.style;e?t.removeProperty("visibility"):t.setProperty("visibility","hidden","important")},setVisibilityMode:function(e){return 1!==e&&2!==e&&3!==e&&4!==e&&5!==e&&Ext.raise("visibilityMode must be one of the following: Ext.Element.DISPLAY, Ext.Element.VISIBILITY, Ext.Element.OFFSETS, Ext.Element.CLIP, or Element.OPACITY"),this.getData().visibilityMode=e,this},setVisible:function(e){var t=this,i=e?"removeCls":"addCls";switch(t.getVisibilityMode()){case O.DISPLAY:t.removeCls([U,q,K,X]),t[i](Y);break;case O.VISIBILITY:t.removeCls([Y,q,K,X]),t[i](U);break;case O.OFFSETS:t.removeCls([U,Y,K,X]),t[i](q);break;case O.CLIP:t.removeCls([U,Y,q,X]),t[i](K);break;case O.OPACITY:t.removeCls([U,Y,q,K]),t[i](X)}return(t.shadow||t.shim)&&t.setUnderlaysVisible(e),!e&&t.$ripples&&t.destroyAllRipples(),t},setWidth:function(e){return this.dom.style.width=O.addUnits(e),(this.shadow||this.shim)&&this.syncUnderlays(),this},setX:function(e){return this.setXY([e,!1])},setXY:function(e){var t,i=this.translatePoints(e),n=this.dom.style;for(t in this.position(),n.right="",i)isNaN(i[t])||(n[t]=i[t]+"px");return(this.shadow||this.shim)&&this.syncUnderlays(),this},setY:function(e){return this.setXY([!1,e])},setZIndex:function(e){return this.shadow&&this.shadow.setZIndex(e),this.shim&&this.shim.setZIndex(e),this.setStyle("z-index",e)},show:function(){return this.setVisible(!0)},swallowEvent:function(e,t){function i(e){e.stopPropagation(),t&&e.preventDefault()}var n,r,o={destroyable:!0};if(Ext.isArray(e))for(r=e.length,n=0;n<r;n++)o[e[n]]=i;else o[e]=i;return this.on(o)},swapCls:function(e,t,i,n){void 0===i&&(i=!0);var r=i?e:t,o=i?t:e;return o&&this.removeCls(n?n+"-"+o:o),r&&this.addCls(n?n+"-"+r:r),this},synchronize:function(){var e,t,i,n=this.dom,r={},o=n.className,a=this.getData(!1);if(o&&0<o.length)for(t=0,i=(e=n.className.split(S)).length;t<i;t++)r[e[t]]=!0;else e=[];return a.classList=e,a.classMap=r,a.isSynchronized=!0,this},syncUnderlays:function(){var e,t,i,n,r,o=this.shadow,a=this.shim,s=this.dom;this.isVisible()&&(t=(e=this.getXY())[0],i=e[1],n=s.offsetWidth,r=s.offsetHeight,o&&!o.hidden&&o.realign(t,i,n,r),a&&!a.hidden&&a.realign(t,i,n,r))},toggleCls:function(e,t){return null==t&&(t=!this.hasCls(e)),t?this.addCls(e):this.removeCls(e)},toggle:function(){return this.setVisible(!this.isVisible()),this},translate:(r="webkitTransform"in m.createElement("div").style?"webkitTransform":"transform",function(e,t,i){e=Math.round(e),t=Math.round(t),i=Math.round(i),this.dom.style[r]="translate3d("+(e||0)+"px, "+(t||0)+"px, "+(i||0)+"px)"}),unwrap:function(){var e,t,i,n,r=this.dom,o=r.parentNode,a=(g=g||new Ext.dom.Fly).attach(Ext.Element.getActiveElement());return s=s||new Ext.dom.Fly,(t=Ext.cache[a.dom.id])&&(a=t),this.contains(a)&&(t&&t.suspendFocusEvents(),i=!0),o?(e=o.parentNode,i&&(n=e.getAttribute("tabIndex"),s.attach(e),s.set({tabIndex:-1}),s.suspendFocusEvents(),s.focus()),e.insertBefore(r,o),e.removeChild(o)):(e=m.createDocumentFragment()).appendChild(r),i&&(t?(t.focus(),t.resumeFocusEvents()):a.focus(),s&&(s.resumeFocusEvents(),s.set({tabIndex:n}))),this},up:function(e,t,i){return this.findParentNode(e,t,!i)},update:function(e){return this.setHtml(e)},wrap:function(e,t,i){var n,r,o,a=this.dom,s=Ext.DomHelper.insertBefore(a,e||{tag:"div"},!t),l=(f=f||new Ext.dom.Fly).attach(Ext.getDom(s)),d=l,u=(g=g||new Ext.dom.Fly).attach(Ext.Element.getActiveElement());return(n=Ext.cache[u.dom.id])&&(u=n),i&&(d=l.selectNode(i,t)),this.contains(u)&&(n&&n.suspendFocusEvents(),o=Ext.getDom(l).getAttribute("tabIndex"),l.set({tabIndex:-1}),l.suspendFocusEvents(),l.focus(),r=!0),(d.dom||d).appendChild(a),r&&(n?(n.focus(),n.resumeFocusEvents()):u.focus(),l.resumeFocusEvents(),l.set({tabIndex:o})),s},isFocusable:function(e){var t,i=this.dom,n=!1;return i&&!i.disabled&&(t=i.nodeName,n=!!Ext.Element.naturallyFocusableTags[t]||("A"===t||"LINK"===t)&&!!i.href||null!=i.getAttribute("tabIndex")||"true"===i.contentEditable,Ext.isIE8&&"INPUT"===t&&"hidden"===i.type&&(n=!1),n=n&&(e||this.isVisible(!0))),n},isInputField:function(){var e=this.dom,t=e.contentEditable;return!!(Ext.Element.inputTags[e.tagName]&&"button"!==e.type||""===t||"true"===t)},isTabbable:function(e){var t,i,n,r=this.dom,o=!1;return r&&!r.disabled&&(t=r.nodeName,i=null!=(n=r.getAttribute("tabIndex")),n-=0,"A"===t||"LINK"===t?o=r.href?!(i&&n<0):"true"===r.contentEditable&&!i||i&&0<=n:"true"===r.contentEditable||Ext.Element.naturallyTabbableTags[t]?o=!(i&&n<0):i&&0<=n&&(o=!0),Ext.isIE8&&"INPUT"===t&&"hidden"===r.type&&(o=!1),o=o&&(e||(!this.component||this.component.isVisible(!0))&&this.isVisible(!0))),o},ripplingCls:Ext.baseCSSPrefix+"rippling",ripplingTransitionCls:Ext.baseCSSPrefix+"ripple-transition",ripplingUnboundCls:Ext.baseCSSPrefix+"rippling-unbound",rippleBubbleCls:Ext.baseCSSPrefix+"ripple-bubble",rippleContainerCls:Ext.baseCSSPrefix+"ripple-container",rippleWrapperCls:Ext.baseCSSPrefix+"ripple-wrapper",noRippleDisplayMap:{table:1,"table-row":1,"table-row-group":1},noRippleTagMap:{TABLE:1,TR:1,TBODY:1},ripple:function(e,t){!0!==t&&t?Ext.isString(t)&&(t={color:t}):t={};var i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E,b,C,S=this,w=Ext.isString(t.delegate)?S.down(t.delegate):S,T=Ext.isString(t.measureSelector)?S.down(t.measureSelector):null,P=window.getComputedStyle(w.dom).color,k=!1===t.bound,I=t.position,R=S.ripplingCls,M=S.ripplingTransitionCls,A=S.ripplingUnboundCls,D=S.rippleBubbleCls,F=S.rippleContainerCls,L=S.rippleWrapperCls;if(w){if(i=w.getXY(),n=w.getWidth(),r=w.getHeight(),(C=w.$rippleClearTimeout)&&(w.$rippleClearTimeout=Ext.undefer(C)),o=T?(s=T.getWidth(),l=T.getHeight(),Math.max(s,l)):r<n?n:r,void 0===t.diameterLimit||!0===t.diameterLimit?o=Math.min(o,O.maxRippleDiameter):t.diameterLimit&&!1!==t.diameterLimit&&0!==t.diameterLimit&&(o=Math.min(o,t.diameterLimit)),a=[i[0]+n/2,i[1]+r/2],k&&(E=!1!==t.fit?(d=2.15*o,(v=w.getRegion()).setPosition(v.getCenter()).setSize(d).translateBy(-d/2,-d/2),S.up(function(e){var t=Ext.fly(e,"ripple");return!(e.tagName in S.noRippleTagMap)&&!(t.getStyle("display")in S.noRippleDisplayMap)&&t.getRegion().contains(v)})||Ext.getBody()):w),Ext.isString(e)?(t.color=e,e=null):e&&!e.isEvent&&(e=new Ext.event.Event(e)),e&&e.isEvent){if(e.browserEvent.$preventRipple)return;I=e.getXY(),e.browserEvent.$preventRipple=!0}c=(u=!k&&!t.centered&&I||a)[0]-i[0]-o/2,h=u[1]-i[1]-o/2,w.addCls(M),k?(b=E.getData(),(f=b.rippleWrapper)||(b.rippleWrapper=f=E.insertFirst({style:"position: absolute; top: 0; left: 0",cls:L+" "+R+" "+A}))):(w.addCls(R),g=w.child("."+F)),g||(k?(g=f.append({cls:F})).setXY(i):g=w.append({cls:F})),p=g.append({cls:D}),"default"!==t.color&&p.setStyle("backgroundColor",t.color||P),p.setWidth(o),p.setHeight(o),p.setTop(h),p.setLeft(c),x=function(){w.destroyed||(w.$rippleClearTimeout=Ext.defer(function(){w.removeCls([R,M]),w.$rippleClearTimeout=null},50))},m=function(){var e;p.destroy(),S.$ripples&&delete S.$ripples[p.id],(e=w.$rippleClearTimeout)&&(w.$rippleClearTimeout=Ext.undefer(e)),k?(g.destroy(),f.child("."+F)||(b.rippleWrapper=null,f.destroy(),x())):g.child("."+D)||(g.destroy(),x())},y=Ext.defer(m,t.destroyTime||1e3,S),S.$ripples||(S.$ripples={}),S.$ripples[p.id]={timerId:y,destructor:m},p.addCls(Ext.baseCSSPrefix+"ripple")}},destroyAllRipples:function(){var e,t;for(e in this.$ripples)t=this.$ripples[e],Ext.undefer(t.timerId),t.destructor&&t.destructor();this.$ripples=null},privates:{findTabbableElements:function(e){var t,i,n,r,o,a,s,l,d,u,c,h=this.dom,f=Ext.Element.tabbableSavedCounterAttribute,g=[],p=0;if(!h)return g;if(e&&(t=e.skipSelf,i=e.skipChildren,n=e.excludeRoot,r=e.includeSaved,o=e.includeHidden),(n=n&&Ext.getDom(n))&&n.contains(h))return g;if(!t&&(r&&h.hasAttribute(f)||this.isTabbable(o))&&(g[p++]=h),i)return g;if(!(u=(a=h.querySelectorAll(Ext.Element.tabbableSelector)).length))return g;for(l=new Ext.dom.Fly,d=0;d<u;d++)c=+(s=a[d]).getAttribute("tabIndex"),!(r&&s.hasAttribute(f)||!(c<0)&&l.attach(s).isTabbable(o))||n&&(n===s||n.contains(s))||(g[p++]=s);return g},saveTabbableState:function(e){var t,i,n,r,o,a=Ext.Element.tabbableSavedCounterAttribute,s=Ext.Element.tabbableSavedValueAttribute;for(e&&null!=e.includeSaved||((e=Ext.Object.chain(e||null)).includeSaved=!0),r=0,o=(i=this.findTabbableElements(e)).length;r<o;r++)0<(t=+(n=i[r]).getAttribute(a))?n.setAttribute(a,++t):(n.hasAttribute("tabIndex")?n.setAttribute(s,n.getAttribute("tabIndex")):n.setAttribute(s,"none"),n.setAttribute("tabIndex","-1"),n.setAttribute(a,"1"));return i},restoreTabbableState:function(e){var t,i,n,r,o,a=this.dom,s=Ext.Element.tabbableSavedCounterAttribute,l=Ext.Element.tabbableSavedValueAttribute,d=[],u=e&&e.skipSelf,c=e&&e.skipChildren,h=e&&e.reset;if(!a)return this;for(c||(d=Ext.Array.from(a.querySelectorAll("["+s+"]"))),u||d.unshift(a),r=0,o=d.length;r<o;r++)(n=d[r]).hasAttribute(s)&&n.hasAttribute(l)&&(i=+n.getAttribute(s),!h&&1<i?n.setAttribute(s,--i):("none"===(t=n.getAttribute(l))?n.removeAttribute("tabIndex"):n.setAttribute("tabIndex",t),n.removeAttribute(l),n.removeAttribute(s)));return d},setTabIndex:function(e){var t=this.dom,i=Ext.Element.tabbableSavedValueAttribute;t.hasAttribute(i)?null==e?(t.setAttribute(i,"none"),t.removeAttribute("tabIndex")):t.setAttribute(i,e):null==e?t.removeAttribute("tabIndex"):t.setAttribute("tabIndex",e)},doAddListener:function(e,t,i,n,r,o,a){var s,l,d,u=this,c=e;e=Ext.canonicalEventName(e),u.blockedEvents[e]||(s=u.mixins.observable.doAddListener,n=n||{},!1===O.useDelegatedEvents&&(n.delegated=n.delegated||!1),!1!==n.translate&&((l=u.additiveEvents[e])&&(n.type=e,e=l,s.call(u,e,t,i,n,r,o,a)),(d=u.eventMap[e])&&(n.type=n.type||e,a&&(n.managedName=c),e=d)),s.call(u,e,t,i,n,r,o,a)&&u.longpressEvents[e]&&1==++u.longpressListenerCount&&u.on("MSHoldVisual","preventMsHoldVisual",u),a&&d&&delete n.managedName,delete n.type)},doRemoveListener:function(e,t,i){var n,r,o,a,s=this;e=Ext.canonicalEventName(e),s.blockedEvents[e]||(n=s.mixins.observable.doRemoveListener,(o=s.additiveEvents[e])&&(e=o,n.call(s,e,t,i)),(r=s.eventMap[e])&&(a=n.call(s,r,t,i)),(a=n.call(s,e,t,i)||a)&&s.longpressEvents[e]&&!--s.longpressListenerCount&&s.un("MSHoldVisual","preventMsHoldVisual",s))},_initEvent:function(e){return this.events[e]=new Ext.dom.ElementEvent(this,e)},_getDisplay:function(){var e=this.getData(),t=e[W];return void 0===t&&(e[W]=t=""),t},_getPublisher:function(e,t){var i=Ext.event.publisher.Publisher,n=i.publishersByEvent[e];return(t&&!Ext.event.Event.gestureEvents[e]||!n||this.dom===window&&"resize"===e)&&(n=i.publishers.dom),n},isFocusSuspended:function(){var e=this.peekData();return e&&e.suspendFocusEvents},preventMsHoldVisual:function(e){e.preventDefault()},suspendFocusEvents:function(){this.isFly||this.suspendEvent("focus","blur"),this.getData().suspendFocusEvents=!0},resumeFocusEvents:function(){function e(){var e;this.destroyed||((e=this.getData())&&(e.suspendFocusEvents=!1),this.isFly||this.resumeEvent("focus","blur"))}!this.destroyed&&this.getData().suspendFocusEvents&&(Ext.isIE&&!this.isFly?this.resumeFocusEventsTimer=Ext.asap(e,this):e.call(this))}},deprecated:{"5.0":{methods:{getHTML:"getHtml",getPageBox:function(e){var t=this.dom,i="BODY"===t.nodeName,n=i?O.getViewportWidth():t.offsetWidth,r=i?O.getViewportHeight():t.offsetHeight,o=this.getXY(),a=o[1],s=o[0]+n,l=o[1]+r,d=o[0];return e?new Ext.util.Region(a,s,l,d):{left:d,top:a,width:n,height:r,right:s,bottom:l}},isTransparent:function(e){var t=this.getStyle(e);return!!t&&i.test(t)},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml"}}}}},function(a){var e,s=document,n=s.documentElement,t=a.prototype,r=Ext.supports,i="pointerdown",o="pointermove",l="pointerup",d="pointercancel",u="MSPointerDown",c="MSPointerMove",h="MSPointerUp",f="MSPointerCancel",g="mousedown",p="mousemove",m="mouseup",x="touchstart",y="touchmove",v="touchend",E="touchcancel",b=t.eventMap={},C=t.additiveEvents={},S=Ext.id;t._init(a),delete t._init,Ext.id=function(e,t){var i,n=e&&Ext.getDom(e,!0);return n?(i=n.id)||(i=S(null,t||a.prototype.identifiablePrefix),Ext.isSandboxed&&(i=(Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-"))+i),n.id=i):i=S(e,t),i},r.PointerEvents?(b[g]=i,b[p]=o,b[m]=l,b[x]=i,b[y]=o,b[v]=l,b[E]=d,b.mouseover="pointerover",b.mouseout="pointerout",b.mouseenter="pointerenter",Ext.isIE11||(b.mouseleave="pointerleave")):r.MSPointerEvents?(b[i]=u,b[o]=c,b[l]=h,b[d]=f,b[g]=u,b[p]=c,b[m]=h,b[x]=u,b[y]=c,b[v]=h,b[E]=f,b.mouseover="MSPointerOver",b.mouseout="MSPointerOut"):r.TouchEvents?(b[i]=x,b[o]=y,b[l]=v,b[d]=E,b[g]=x,b[p]=y,b[m]=v,b.click="tap",b.dblclick="doubletap",Ext.os.is.Desktop&&(b[x]=g,b[y]=p,b[v]=m,b[E]=m,C[g]=g,C[p]=p,C[m]=m,C[x]=x,C[y]=y,C[v]=v,C[E]=E,C[i]=g,C[o]=p,C[l]=m,C[d]=m)):(b[i]=g,b[o]=p,b[l]=m,b[d]=m,b[x]=g,b[y]=p,b[v]=m,b[E]=m),Ext.isWebKit&&(b.transitionend=Ext.browser.getVendorProperyName("transitionEnd"),b.animationstart=Ext.browser.getVendorProperyName("animationStart"),b.animationend=Ext.browser.getVendorProperyName("animationEnd")),Ext.supports.MouseWheel||Ext.isOpera||(b.mousewheel="DOMMouseScroll"),(e=t.$eventOptions=Ext.Object.chain(t.$eventOptions)).translate=e.capture=e.delegate=e.delegated=e.stopEvent=e.preventDefault=e.stopPropagation=e.element=1,t.styleHooks.opacity={name:"opacity",afterSet:function(e,t,i){var n=i.shadow;n&&n.setOpacity(t)}},t.getTrueXY=t.getXY,Ext.getViewportHeight=a.getViewportHeight,Ext.getViewportWidth=a.getViewportWidth,Ext.select=a.select,Ext.query=a.query,Ext.apply(Ext,{get:function(e){return a.get(e)},getDom:function(e){return e&&s?"string"==typeof e?Ext.getElementById(e):"dom"in e?e.dom:e:null},getBody:function(){if(!Ext._bodyEl){if(!s.body)throw new Error("[Ext.getBody] document.body does not yet exist");Ext._bodyEl=Ext.get(s.body),Ext._bodyEl.skipGarbageCollection=!0}return Ext._bodyEl},getHead:function(){return Ext._headEl||(Ext._headEl=Ext.get(s.head||s.getElementsByTagName("head")[0]),Ext._headEl.skipGarbageCollection=!0),Ext._headEl},getDoc:function(){return Ext._docEl||(Ext._docEl=Ext.get(s),Ext._docEl.skipGarbageCollection=!0),Ext._docEl},getWin:function(){return Ext._winEl||(Ext._winEl=Ext.get(window),Ext._winEl.skipGarbageCollection=!0),Ext._winEl},removeNode:function(e){var t,i=(e=e.dom||e)&&e.id,n=Ext.cache[i];n?n.destroy():!e||3!==e.nodeType&&"BODY"===e.tagName.toUpperCase()||(t=e.parentNode)&&t.removeChild(e)}}),Ext.isGarbage=function(e){return e&&1===e.nodeType&&"BODY"!==e.tagName&&"HTML"!==e.tagName&&(!e.parentNode||null===e.offsetParent&&(Ext.isIE8?s.all[e.id]:s.getElementById(e.id))!==e&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(e)))},Ext.onInternalReady(function(){var e,t=[];if(Ext.getDoc().on("selectstart",function(e,t){var i=a.selectableCls,n=a.unselectableCls,r=t&&t.tagName,o=new Ext.dom.Fly;if("input"!==(r=r&&r.toLowerCase())&&"textarea"!==r)for(;t&&1===t.nodeType&&t!==s.documentElement;){if(o.attach(t),o.hasCls(i))return;if(o.hasCls(n))return void e.stopEvent();t=t.parentNode}}),Ext.os.is.Android||Ext.os.is.Windows&&Ext.supports.Touch){var i=Ext.getWin();a._documentWidth=a._viewportWidth=n.clientWidth,a._documentHeight=a._viewportHeight=n.clientHeight,i.on({focusin:"_onWindowFocusChange",focusout:"_onWindowFocusChange",pointerup:"_onWindowFocusChange",capture:!0,delegated:!1,delay:1,scope:a}),i.on({resize:"_onWindowResize",priority:2e3,scope:a})}r.Touch&&t.push(Ext.baseCSSPrefix+"touch"),Ext.isIE&&Ext.isIE9m&&(t.push(Ext.baseCSSPrefix+"ie",Ext.baseCSSPrefix+"ie9m"),t.push(Ext.baseCSSPrefix+"ie8p"),Ext.isIE8?t.push(Ext.baseCSSPrefix+"ie8"):t.push(Ext.baseCSSPrefix+"ie9",Ext.baseCSSPrefix+"ie9p"),Ext.isIE8m&&t.push(Ext.baseCSSPrefix+"ie8m")),Ext.isIE10&&t.push(Ext.baseCSSPrefix+"ie10"),Ext.isIE10p&&t.push(Ext.baseCSSPrefix+"ie10p"),Ext.isIE11&&t.push(Ext.baseCSSPrefix+"ie11"),Ext.isEdge&&t.push(Ext.baseCSSPrefix+"edge"),Ext.isGecko&&t.push(Ext.baseCSSPrefix+"gecko"),Ext.isOpera&&t.push(Ext.baseCSSPrefix+"opera"),Ext.isOpera12m&&t.push(Ext.baseCSSPrefix+"opera12m"),Ext.isWebKit&&t.push(Ext.baseCSSPrefix+"webkit"),Ext.isSafari&&t.push(Ext.baseCSSPrefix+"safari"),Ext.isSafari9&&t.push(Ext.baseCSSPrefix+"safari9"),Ext.isSafari10&&t.push(Ext.baseCSSPrefix+"safari10"),Ext.isSafari&&(Ext.browser.version.isLessThan(11)&&t.push(Ext.baseCSSPrefix+"safari10m"),Ext.browser.version.isLessThan(9)&&t.push(Ext.baseCSSPrefix+"safari8m")),Ext.isChrome&&t.push(Ext.baseCSSPrefix+"chrome"),Ext.isMac&&t.push(Ext.baseCSSPrefix+"mac"),Ext.isWindows&&t.push(Ext.baseCSSPrefix+"windows"),Ext.isLinux&&t.push(Ext.baseCSSPrefix+"linux"),r.CSS3BorderRadius||t.push(Ext.baseCSSPrefix+"nbr"),r.CSS3LinearGradient||t.push(Ext.baseCSSPrefix+"nlg"),r.Touch&&t.push(Ext.baseCSSPrefix+"touch"),Ext.os.deviceType&&t.push(Ext.baseCSSPrefix+Ext.os.deviceType.toLowerCase()),Ext.os.is.BlackBerry&&(t.push(Ext.baseCSSPrefix+"bb"),Ext.browser.userAgent.match(/Kbd/gi)&&t.push(Ext.baseCSSPrefix+"bb-keyboard")),Ext.os.is.iOS&&Ext.isSafari&&t.push(Ext.baseCSSPrefix+"mobile-safari"),Ext.os.is.iOS&&Ext.browser.is.WebView&&!Ext.browser.is.Standalone&&t.push(Ext.baseCSSPrefix+"ios-native"),Ext.supports.FlexBoxBasisBug&&t.push(Ext.baseCSSPrefix+"has-flexbasis-bug"),Ext.getBody().addCls(t),(e=Ext.theme)&&e.getDocCls&&Ext.fly(document.documentElement).addCls(e.getDocCls())},null,{priority:1500})}),Ext.define("Ext.util.BasicFilter",{isFilter:!0,config:{id:null,disabled:!1,serializer:null},generation:0,constructor:function(e){this.initConfig(e)},updateDisabled:function(){this.isConfiguring||++this.generation}}),Ext.define("Ext.util.Filter",{extend:"Ext.util.BasicFilter",config:{property:null,root:null,value:null,filterFn:null,anyMatch:!1,exactMatch:!1,caseSensitive:!1,disableOnEmpty:!1,operator:null,convert:null},scope:null,$configStrict:!1,statics:{createFilterFn:function(a){return a?function(e){var t,i,n=a.isCollection?a.items:a,r=n.length,o=!0;for(t=0;o&&t<r;t++)(i=n[t]).getDisabled()||(o=i.filter(e));return o}:Ext.returnTrue},isEqual:function(e,t){return e.getProperty()===t.getProperty()&&(e.getOperator()===t.getOperator()&&(e.getValue()===t.getValue()||!(!Ext.isArray(e)||!Ext.isArray(t))&&Ext.Array.equals(e,t)))},isInvalid:function(e){if(!e.filterFn){if(!e.property)return"A Filter requires either a property or a filterFn to be set";if(!e.hasOwnProperty("value")&&!e.operator)return"A Filter requires either a property and value, or a filterFn to be set"}return!1}},constructor:function(e){var t=Ext.util.Filter.isInvalid(e);t&&Ext.log.warn(t),this.callParent([e])},preventConvert:{in:1,notin:1},filter:function(e){var t=this,i=t._filterFn||t.getFilterFn(),n=t.getConvert(),r=t._value;return t._filterValue=r,t.isDateValue=Ext.isDate(r),t.isDateValue&&(t.dateValue=r.getTime()),n&&!t.preventConvert[t.getOperator()]&&(t._filterValue=n.call(t.scope||t,r)),i.call(t.scope||t,e)},getId:function(){var e=this._id;return e||(e=(e=this.getProperty())||Ext.id(null,"ext-filter-"),this._id=e),e},getFilterFn:function(){var e,t=this._filterFn;return t||(t=(e=this.getOperator())?this.operatorFns[e]:this.createRegexFilter(),this._filterFn=t,this.generatedFilterFn=!0),t},createRegexFilter:function(){var i=this,e=!!i.getAnyMatch(),t=!!i.getExactMatch(),n=i.getValue(),r=Ext.String.createRegex(n,!e,!e&&t,!i.getCaseSensitive());return function(e){var t=i.getPropertyValue(e);return r?r.test(t):null==t}},getPropertyValue:function(e){var t=this._root;return(null==t?e:e[t])[this._property]},getState:function(){var e,t=this.getInitialConfig(),i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return delete i.root,i.value=this.getValue(),i},getScope:function(){return this.scope},serialize:function(){var e,t=this.getState(),i=this.getSerializer();return delete t.id,delete t.serializer,i&&(e=i.call(this,t))&&(t=e),t},serializeTo:function(e){var t,i;return this.getFilterFn(),this.generatedFilterFn&&(e.push(i=this.serialize()),t=this.primitiveRe.test(typeof i)),!t},updateOperator:function(){this.onConfigMutation()},updateConvert:function(){this.onConfigMutation()},updateProperty:function(){this.onConfigMutation()},updateAnyMatch:function(){this.onConfigMutation()},updateExactMatch:function(){this.onConfigMutation()},updateCaseSensitive:function(){this.onConfigMutation()},updateValue:function(e){this.onConfigMutation(),this.getDisableOnEmpty()&&this.setDisabled(Ext.isEmpty(e))},updateFilterFn:function(e){delete this.generatedFilterFn},onConfigMutation:function(){this.generation++,this.generatedFilterFn&&(this._filterFn=null)},updateDisableOnEmpty:function(e){e&&this.setDisabled(Ext.isEmpty(this.getValue()))},privates:{primitiveRe:/string|number|boolean/,getCandidateValue:function(e,t,i){var n=this._convert,r=this.getPropertyValue(e);return n?r=n.call(this.scope||this,r):i||(r=Ext.coerce(r,t)),r}}},function(e){var t=e.prototype.operatorFns={"<":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)<t},"<=":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)<=t},"=":function(e){var t=this._filterValue;return e=this.getCandidateValue(e,t),this.isDateValue&&e instanceof Date&&(e=e.getTime(),t=this.dateValue),e==t},"===":function(e){var t=this._filterValue;return e=this.getCandidateValue(e,t,!0),this.isDateValue&&e instanceof Date&&(e=e.getTime(),t=this.dateValue),e===t},">=":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)>=t},">":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)>t},"!=":function(e){var t=this._filterValue;return e=this.getCandidateValue(e,t),this.isDateValue&&e instanceof Date&&(e=e.getTime(),t=this.dateValue),e!=t},"!==":function(e){var t=this._filterValue;return e=this.getCandidateValue(e,t,!0),this.isDateValue&&e instanceof Date&&(e=e.getTime(),t=this.dateValue),e!==t},in:function(e){var t=this._filterValue;return Ext.Array.contains(t,this.getCandidateValue(e,t))},notin:function(e){var t=this._filterValue;return!Ext.Array.contains(t,this.getCandidateValue(e,t))},like:function(e){var t=this._filterValue;return t&&-1<this.getCandidateValue(e,t).toLowerCase().indexOf(t.toLowerCase())},"/=":function(e){var t=this._filterValue;if(e=this.getCandidateValue(e,t),t!==this.lastRegExpSource){this.lastRegExpSource=t;try{this.regex=new RegExp(t,"i")}catch(e){this.regex=null}}return!!this.regex&&this.regex.test(e)}};t["=="]=t["="],t.gt=t[">"],t.ge=t[">="],t.lt=t["<"],t.le=t["<="],t.eq=t["="],t.ne=t["!="]}),Ext.define("Ext.util.Observable",{extend:"Ext.mixin.Observable",$applyConfigs:!0},function(e){var t=Ext.mixin.Observable;e.releaseCapture=t.releaseCapture,e.capture=t.capture,e.captureArgs=t.captureArgs,e.observe=e.observeClass=t.observe}),Ext.define("Ext.util.AbstractMixedCollection",{requires:["Ext.util.Filter"],mixins:{observable:"Ext.util.Observable"},isMixedCollection:!0,generation:0,indexGeneration:0,constructor:function(e,t){var i=this;1===arguments.length&&Ext.isObject(e)?(i.initialConfig=e,Ext.apply(i,e)):(i.allowFunctions=!0===e,t&&(i.getKey=t),i.initialConfig={allowFunctions:i.allowFunctions,getKey:i.getKey}),i.items=[],i.map={},i.keys=[],i.indexMap={},i.length=0,i.mixins.observable.constructor.call(i)},destroy:function(){this.items=this.map=this.keys=this.indexMap=null,this.callParent()},allowFunctions:!1,add:function(e,t){var i=this.length;return 1===arguments.length?this.insert(i,e):this.insert(i,e,t)},getKey:function(e){return e.id},replace:function(e,t){var i,n;return 1===arguments.length&&(t=e,e=this.getKey(t)),i=this.map[e],null==e||void 0===i?this.add(e,t):(this.generation++,n=this.indexOfKey(e),this.items[n]=t,this.map[e]=t,this.hasListeners.replace&&this.fireEvent("replace",e,i,t),t)},reorder:function(e){var t,i=this.items,n=0,r=i.length,o=[],a=[];for(t in this.suspendEvents(),e)o[e[t]]=i[t];for(n=0;n<r;n++)null==e[n]&&a.push(i[n]);for(n=0;n<r;n++)null==o[n]&&(o[n]=a.shift());this.clear(),this.addAll(o),this.resumeEvents()},updateKey:function(e,t){var i,n=this.map,r=this.indexOfKey(e),o=this.indexMap;-1<r&&(i=n[e],delete n[e],delete o[e],n[t]=i,o[t]=r,this.keys[r]=t,this.indexGeneration=++this.generation)},addAll:function(e){var t;if(1<arguments.length||Ext.isArray(e))this.insert(this.length,1<arguments.length?arguments:e);else for(t in e)e.hasOwnProperty(t)&&(!this.allowFunctions&&"function"==typeof e[t]||this.add(t,e[t]))},each:function(e,t){for(var i,n=Ext.Array.push([],this.items),r=0,o=n.length;r<o&&(i=n[r],!1!==e.call(t||i,i,r,o));r++);},eachKey:function(e,t){for(var i=this.keys,n=this.items,r=0,o=i.length;r<o;r++)e.call(t||window,i[r],n[r],r,o)},findBy:function(e,t){for(var i=this.keys,n=this.items,r=0,o=n.length;r<o;r++)if(e.call(t||window,n[r],i[r]))return n[r];return null},find:function(){return Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.util.MixedCollection: find has been deprecated. Use findBy instead."),this.findBy.apply(this,arguments)},insert:function(e,t,i){return Ext.isIterable(t)?this.doInsert(e,t,i):(2<arguments.length?this.doInsert(e,[t],[i]):this.doInsert(e,[t]))[0]},doInsert:function(e,t,i){var n,r,o,a,s,l,d,u=this,c=t.length,h=c,f=u.hasListeners.add,g={};if(null!=i)u.useLinearSearch=!0;else for(i=t,t=new Array(c),o=0;o<c;o++)t[o]=this.getKey(i[o]);for(u.suspendEvents(),o=0;o<c;o++)n=t[o],-1!==(r=u.indexOfKey(n))&&(r<e&&e--,u.removeAt(r)),null!=n&&(null!=g[n]&&(s=!0,h--),g[n]=o);if(u.resumeEvents(),s){for(n in l=t,d=i,t=new Array(h),i=new Array(h),o=0,g)t[o]=l[g[n]],i[o]=d[g[n]],o++;c=h}for(a=e===u.length&&u.indexGeneration===u.generation,Ext.Array.insert(u.items,e,i),Ext.Array.insert(u.keys,e,t),u.length+=c,u.generation++,a&&(u.indexGeneration=u.generation),o=0;o<c;o++,e++)null!=(n=t[o])&&(u.map[n]=i[o],a&&(u.indexMap[n]=e)),f&&u.fireEvent("add",e,i[o],n);return i},remove:function(e){var t,i;return-1!==(i=!this.useLinearSearch&&(t=this.getKey(e))?this.indexOfKey(t):Ext.Array.indexOf(this.items,e))&&this.removeAt(i)},removeAll:function(e){var t,i=this;if(e||i.hasListeners.remove)if(e)for(t=e.length-1;0<=t;--t)i.remove(e[t]);else for(;i.length;)i.removeAt(0);else i.length=i.items.length=i.keys.length=0,i.map={},i.indexMap={},i.generation++,i.indexGeneration=i.generation},removeAt:function(e){var t,i,n=this;return e<n.length&&0<=e&&(n.length--,t=n.items[e],Ext.Array.erase(n.items,e,1),void 0!==(i=n.keys[e])&&delete n.map[i],Ext.Array.erase(n.keys,e,1),n.hasListeners.remove&&n.fireEvent("remove",t,i),n.generation++,t)},removeRange:function(e,t){var i,n,r,o,a,s,l=this;if(e<l.length&&0<=e){for(t=t||1,t=(o=Math.min(e+t,l.length))-e,a=(s=o===l.length)&&l.indexGeneration===l.generation,r=e;r<o;r++)null!=(n=l.keys[r])&&(delete l.map[n],a&&delete l.indexMap[n]);return i=l.items[r-1],l.length-=t,l.generation++,a&&(l.indexGeneration=l.generation),s?l.items.length=l.keys.length=l.length:(l.items.splice(e,t),l.keys.splice(e,t)),i}return!1},removeAtKey:function(e){var t,i=this.keys;if(null!=e)return this.removeAt(this.indexOfKey(e));for(t=i.length-1;0<=t;t--)null==i[t]&&this.removeAt(t)},getCount:function(){return this.length},indexOf:function(e){var t;return null!=e?!this.useLinearSearch&&(t=this.getKey(e))?this.indexOfKey(t):Ext.Array.indexOf(this.items,e):-1},indexOfKey:function(e){return this.map.hasOwnProperty(e)?(this.indexGeneration!==this.generation&&this.rebuildIndexMap(),this.indexMap[e]):-1},rebuildIndexMap:function(){var e,t=this.indexMap={},i=this.keys,n=i.length;for(e=0;e<n;e++)t[i[e]]=e;this.indexGeneration=this.generation},get:function(e){var t=this.map[e],i=void 0!==t?t:"number"==typeof e?this.items[e]:void 0;return"function"!=typeof i||this.allowFunctions?i:null},getAt:function(e){return this.items[e]},getByKey:function(e){return this.map[e]},contains:function(e){var t;return null!=e&&(!this.useLinearSearch&&(t=this.getKey(e))?null!=this.map[t]:-1!==Ext.Array.indexOf(this.items,e))},containsKey:function(e){return this.map.hasOwnProperty(e)},clear:function(){var e=this;e.generation&&(e.length=0,e.items=[],e.keys=[],e.map={},e.indexMap={},e.generation++,e.indexGeneration=e.generation),e.hasListeners.clear&&e.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(e,t,i,n){var r,o=this.extractValues(e,t),a=o.length,s=0;for(n=n||0===n?n:a-1,r=i=i||0;r<=n;r++)s+=o[r];return s},collect:function(e,t,i){var n,r,o,a=this.extractValues(e,t),s=a.length,l={},d=[];for(o=0;o<s;o++)n=a[o],r=String(n),!i&&Ext.isEmpty(n)||l[r]||(l[r]=!0,d.push(n));return d},extractValues:function(e,t){var i=this.items;return t&&(i=Ext.Array.pluck(i,t)),Ext.Array.pluck(i,e)},hasRange:function(e,t){return t<this.length},getRange:function(e,t){var i,n,r=this.items,o=[],a=r.length;return a<1||(t<e&&(n=!0,i=e,e=t,t=i),e<0&&(e=0),(null==t||a<=t)&&(t=a-1),o=r.slice(e,t+1),n&&o.length&&o.reverse()),o},filter:function(e,t,i,n){var r=[];return Ext.isString(e)?r.push(new Ext.util.Filter({property:e,value:t,anyMatch:i,caseSensitive:n})):(Ext.isArray(e)||e instanceof Ext.util.Filter)&&(r=r.concat(e)),this.filterBy(Ext.util.Filter.createFilterFn(r))},filterBy:function(e,t){var i,n=new this.self(this.initialConfig),r=this.keys,o=this.items,a=o.length;for(n.getKey=this.getKey,i=0;i<a;i++)e.call(t||this,o[i],r[i])&&n.add(r[i],o[i]);return n.useLinearSearch=this.useLinearSearch,n},findIndex:function(t,i,e,n,r){return Ext.isEmpty(i,!1)?-1:(i=this.createValueMatcher(i,n,r),this.findIndexBy(function(e){return e&&i.test(e[t])},null,e))},findIndexBy:function(e,t,i){for(var n=this.keys,r=this.items,o=i||0,a=r.length;o<a;o++)if(e.call(t||this,r[o],n[o]))return o;return-1},createValueMatcher:function(e,t,i,n){var r;return e.exec||(r=Ext.String.escapeRegex,e=String(e),!0===t?e=r(e):(e="^"+r(e),!0===n&&(e+="$")),e=new RegExp(e,i?"":"i")),e},clone:function(){var e=new this.self(this.initialConfig);return e.add(this.keys,this.items),e.useLinearSearch=this.useLinearSearch,e}}),Ext.define("Ext.util.Sorter",{isSorter:!0,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:void 0},statics:{createComparator:function(a,s){return s=s||0,function(e,t){var i,n,r=a.isCollection?a.items:a,o=r.length;for(n=0;n<o;++n)if(i=r[n].sort(e,t))return i;return s&&s(e,t)}}},multiplier:1,constructor:function(e){e&&!this.isGrouper&&!e.property==!e.sorterFn&&Ext.raise("A Sorter requires either a property or a sorterFn."),this.initConfig(e)},getId:function(){var e=this._id;return e||(e=(e=this.getProperty())||Ext.id(null,"ext-sorter-"),this._id=e),e},sort:function(e,t){return this.multiplier*this.sortFn(e,t)},sortFn:function(e,t){var i,n,r=this._transform,o=this._root,a=this._property;return o&&(e=e[o],t=t[o]),i=e[a],n=t[a],r&&(i=r(i),n=r(n)),n<i?1:i<n?-1:0},applyDirection:function(e){return e||"ASC"},updateDirection:function(e){this.multiplier="DESC"===e.toUpperCase()?-1:1},updateProperty:function(e){e&&delete this.sortFn},updateSorterFn:function(e){this.sortFn=e},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){var e={root:this.getRoot(),property:this.getProperty(),direction:this.getDirection()};return this._id&&(e.id=this._id),e},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}}),Ext.define("Ext.util.Sortable",{isSortable:!0,$configPrefixed:!1,$configStrict:!1,config:{sorters:null},defaultSortDirection:"ASC",requires:["Ext.util.Sorter"],multiSortLimit:3,statics:{createComparator:function(o){return o&&o.length?function(e,t){for(var i=o[0].sort(e,t),n=o.length,r=1;!i&&r<n;r++)i=o[r].sort.call(o[r],e,t);return i}:function(){return 0}}},applySorters:function(e){var t;return t=this.getSorters()||new Ext.util.MixedCollection(!1,Ext.returnId),e&&t.addAll(this.decodeSorters(e)),t},sort:function(e,t,i,n){var r,o,a=this,s=a.getSorters();if(s||(a.setSorters(null),s=a.getSorters()),Ext.isArray(e)?(n=i,i=t):Ext.isObject(e)?(e=[e],n=i,i=t):Ext.isString(e)&&((r=s.get(e))?null==t?r.toggle():r.setDirection(t):r={property:e,direction:t},e=[r]),e&&e.length)switch(e=a.decodeSorters(e),i){case"multi":s.insert(0,e[0]),0<(o=s.getCount()-a.multiSortLimit)&&s.removeRange(a.multiSortLimit,o);break;case"prepend":s.insert(0,e);break;case"append":s.addAll(e);break;case void 0:case null:case"replace":s.clear(),s.addAll(e);break;default:Ext.raise('Sorter insertion point must be "multi", "prepend", "append" or "replace"')}return!1!==n&&(a.fireEvent("beforesort",a,e),a.onBeforeSort(e),a.getSorterCount()&&a.doSort(a.generateComparator())),e},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var e=this.getSorters().getRange();return e.length?this.createComparator(e):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(e){Ext.isArray(e)||(e=void 0===e?[]:[e]);var t,i,n,r=e.length,o=Ext.util.Sorter,a=this.getModel?this.getModel():this.model;for(n=0;n<r;n++)(i=e[n])instanceof o||(Ext.isString(i)&&(i={property:i}),Ext.applyIf(i,{root:this.sortRoot,direction:"ASC"}),i.fn&&(i.sorterFn=i.fn),"function"==typeof i&&(i={sorterFn:i}),a&&!i.transform&&(t=a.getField(i.property),i.transform=t&&t.sortType!==Ext.identityFn?t.sortType:void 0),e[n]=new Ext.util.Sorter(i));return e},getFirstSorter:function(){for(var e,t=this.getSorters().items,i=t.length,n=0;n<i;++n)if(!(e=t[n]).isGrouper)return e;return null}},function(){this.prototype.createComparator=this.createComparator}),Ext.define("Ext.util.MixedCollection",{extend:"Ext.util.AbstractMixedCollection",mixins:{sortable:"Ext.util.Sortable"},constructor:function(){this.initConfig(),this.callParent(arguments)},doSort:function(e){this.sortBy(e)},_sort:function(i,e,n){var t,r,o,a="DESC"===String(e).toUpperCase()?-1:1,s=[],l=this.keys,d=this.items;for(n=n||function(e,t){return e-t},t=0,r=d.length;t<r;t++)s[s.length]={key:l[t],value:d[t],index:t};for(Ext.Array.sort(s,function(e,t){return n(e[i],t[i])*a||(e.index<t.index?-1:1)}),t=0,r=s.length;t<r;t++)o=s[t],d[t]=o.value,l[t]=o.key,this.indexMap[o.key]=t;this.generation++,this.indexGeneration=this.generation,this.fireEvent("sort",this)},sortBy:function(i){var e,t,n,r=this.items,o=this.keys,a=r.length;for(n=0;n<a;n++)r[n].$extCollectionIndex=n;for(Ext.Array.sort(r,function(e,t){return i(e,t)||(e.$extCollectionIndex<t.$extCollectionIndex?-1:1)}),n=0;n<a;n++)e=r[n],t=this.getKey(e),o[n]=t,this.indexMap[t]=n,delete e.$extCollectionIndex;this.generation++,this.indexGeneration=this.generation,this.fireEvent("sort",this,r,o)},findInsertionIndex:function(e,t){var i,n,r=this.items,o=0,a=r.length-1;for(t=t||this.generateComparator();o<=a;)0<=(n=t(e,r[i=o+a>>1]))?o=1+i:n<0&&(a=i-1);return o},reorder:function(e){this.callParent([e]),this.fireEvent("sort",this)},sortByKey:function(e,t){this._sort("key",e,t||function(e,t){var i=String(e).toUpperCase(),n=String(t).toUpperCase();return n<i?1:i<n?-1:0})}}),Ext.define("Ext.util.TaskRunner",{fireIdleEvent:null,interval:10,timerId:null,constructor:function(e){"number"==typeof e?this.interval=e:e&&Ext.apply(this,e),this.tasks=[],this.timerFn=this.onTick.bind(this)},newTask:function(e){var t=new Ext.util.TaskRunner.Task(e);return t.manager=this,Ext.Timer.track&&(t.creator=(new Error).stack),t},start:function(e){var t=Ext.Date.now();return e.pending||(this.tasks.push(e),e.pending=!0),e.stopped=!1,e.taskStartTime=t,e.taskRunTime=!1!==e.fireOnStart?0:e.taskStartTime,e.taskRunCount=0,this.firing||(!1!==e.fireOnStart?this.startTimer(0,t):this.startTimer(e.interval,t)),e},stop:function(e,t){var i,n=this.tasks,r=0;for(e.stopped||(e.stopped=!0,e.pending=!1,e.onStop&&e.onStop.call(e.scope||e,e)),t&&Ext.Array.remove(n,e),i=0;!r&&i<n.length;i++)n[i].stopped||r++;return r||(Ext.undefer(this.timerId),this.timerId=null),e},stopAll:function(t){var i=this;Ext.each(this.tasks,function(e){i.stop(e,t)},null,!0)},firing:!1,nextExpires:1e99,onTick:function(){var e,t,i,n,r,o,a,s=this,l=s.tasks,d=s.fireIdleEvent,u=Ext.Date.now(),c=1e99,h=l.length,f=Ext.Timer.get(s.timerId);for(f&&(f.tasks=[]),s.timerId=null,s.firing=!0,i=0;i<h||i<(h=l.length);++i){if(!(o=(n=l[i]).stopped)){if((e=n.taskRunTime+n.interval)<=u){if(r=1,null===d&&!1!==n.fireIdleEvent&&(d=!0),n.taskRunCount++,a=n.args?n.addCountToArgs?n.args.concat([n.taskRunCount]):n.args:[n.taskRunCount],f&&f.tasks.push(n),s.disableTryCatch)r=n.run.apply(n.scope||n,a);else try{r=n.run.apply(n.scope||n,a)}catch(e){try{Ext.log({fn:n.run,prefix:"Error while running task",stack:e.stack,msg:e,level:"error"}),n.onError&&(r=n.onError.call(n.scope||n,n,e))}catch(e){}}n.taskRunTime=u,!1===r||n.taskRunCount===n.repeat?(s.stop(n),o=!0):(o=n.stopped,e=u+n.interval)}!o&&n.duration&&n.duration<=u-n.taskStartTime&&(s.stop(n),o=!0)}o?(n.pending=!1,t=t||l.slice(0,i)):(t&&t.push(n),e<c&&(c=e))}t&&(s.tasks=t),s.firing=!1,s.tasks.length&&s.startTimer(c-u,Ext.Date.now()),null===d&&(d=!1),Ext._suppressIdle=!d},startTimer:function(e,t){var i=this,n=t+e,r=i.timerId;if(r&&i.nextExpires-n>i.interval&&(r=Ext.undefer(r)),!r){e<i.interval&&(e=i.interval),i.timerId=Ext.defer(i.timerFn,e),i.nextExpires=n;var o=Ext.Timer.get(i.timerId);o&&(o.runner=i)}}},function(){var e=this.prototype;e.destroy=e.stopAll,this.Task=new Ext.Class({isTask:!0,stopped:!0,fireOnStart:!1,constructor:function(e){Ext.apply(this,e)},restart:function(e){void 0!==e&&(this.interval=e),this.manager.start(this)},start:function(e){this.stopped&&this.restart(e)},stop:function(e){this.manager.stop(this,e)},destroy:function(){this.stop(!0)}}),(e=this.Task.prototype).destroy=e.stop}),Ext.define("Ext.fx.target.Target",{isAnimTarget:!0,constructor:function(e){this.target=e,this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}}),Ext.define("Ext.fx.target.Element",{extend:"Ext.fx.target.Target",type:"element",constructor:function(e){this.callParent([e]),this.isAbsoluteOnPage=this.target.dom.parentNode===document.body&&this.target.isStyle("position","absolute")},getElVal:function(e,t,i){return void 0===i&&(i="x"===t?e.getX():"y"===t?e.getY():"scrollTop"===t?e.getScroll().top:"scrollLeft"===t?e.getScroll().left:"height"===t?e.getHeight():"width"===t?e.getWidth():e.getStyle(t)),i},getAttr:function(e,t){var i=this.target;return[[i,this.getElVal(i,e,t)]]},setAttr:function(e){var t,i,n,r,o,a,s=e.length;for(r=0;r<s;r++)for(i in t=e[r].attrs)if(t.hasOwnProperty(i))for(a=t[i].length,o=0;o<a;o++)n=t[i][o],this.setElVal(n[0],i,n[1])},setElVal:function(e,t,i){"x"===t?this.isAbsoluteOnPage?e.setLocalX(i):e.setXY([i,null]):"y"===t?this.isAbsoluteOnPage?e.setLocalY(i):e.setXY([null,i]):"scrollTop"===t?e.scrollTo("top",i):"scrollLeft"===t?e.scrollTo("left",i):"width"===t?e.setWidth(i):"height"===t?e.setHeight(i):e.setStyle(t,i)}}),Ext.define("Ext.fx.target.ElementCSS",{extend:"Ext.fx.target.Element",setAttr:function(e,t){function i(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)}var n,r,o,a,s,l,d,u,c,h={attrs:[],duration:[],easing:[]},f=e.length,g={single:!0};for(d=0;d<f;d++)for(o in s=(r=e[d]).duration,a=r.easing,r=r.attrs)-1===Ext.Array.indexOf(h.attrs,o)&&(h.attrs.push(o.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})),h.duration.push(s+"ms"),h.easing.push(a));for(n=h.attrs.join(","),s=h.duration.join(","),a=h.easing.join(", "),d=0;d<f;d++)for(o in r=e[d].attrs)for(c=r[o].length,u=0;u<c;u++)(l=r[o][u])[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",t?"":n),l[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",t?"":s),l[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",t?"":a),l[0].setStyle(o,l[1]),t?l=l[0].dom.offsetWidth:l[0].on(Ext.supports.CSS3TransitionEnd,i,l[0],g)}}),Ext.define("Ext.fx.target.CompositeElement",{extend:"Ext.fx.target.Element",isComposite:!0,constructor:function(e){e.id=e.id||Ext.id(null,"ext-composite-"),this.callParent([e])},getAttr:function(e,t){var i,n,r=[],o=this.target,a=o.elements,s=a.length;for(i=0;i<s;i++)(n=a[i])&&(n=o.getElement(n),r.push([n,this.getElVal(n,e,t)]));return r},setAttr:function(e){var t,i,n,r,o,a,s,l,d=this.target,u=e.length,c=d.elements,h=c.length;for(a=0;a<u;a++)for(r in n=e[a].attrs)if(n.hasOwnProperty(r))for(l=n[r].length,s=0;s<l;s++)for(t=n[r][s][1],i=0;i<h;++i)(o=c[i])&&(o=d.getElement(o),this.setElVal(o,r,t))},remove:function(){this.target.destroy()}}),Ext.define("Ext.fx.target.CompositeElementCSS",{extend:"Ext.fx.target.CompositeElement",requires:["Ext.fx.target.ElementCSS"],setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}}),Ext.define("Ext.fx.target.Sprite",{extend:"Ext.fx.target.Target",type:"draw",getFromPrim:function(e,t){var i;switch(t){case"rotate":case"rotation":return{x:(i=e.attr.rotation).x||0,y:i.y||0,degrees:i.degrees||0};case"scale":case"scaling":return{x:(i=e.attr.scaling).x||1,y:i.y||1,cx:i.cx||0,cy:i.cy||0};case"translate":case"translation":return{x:(i=e.attr.translation).x||0,y:i.y||0};default:return e.attr[t]}},getAttr:function(e,t){return[[this.target,void 0!==t?t:this.getFromPrim(this.target,e)]]},setAttr:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f=e.length,g=[];for(l=0;l<f;l++)for(i in t=e[l].attrs)for(h=(n=t[i]).length,d=0;d<h;d++)o=n[d][0],r=n[d][1],s="translate"===i||"translation"===i?{x:r.x,y:r.y}:"rotate"===i||"rotation"===i?(u=r.x,isNaN(u)&&(u=null),c=r.y,isNaN(c)&&(c=null),{degrees:r.degrees,x:u,y:c}):"scale"===i||"scaling"===i?(u=r.x,isNaN(u)&&(u=null),c=r.y,isNaN(c)&&(c=null),{x:u,y:c,cx:r.cx,cy:r.cy}):"width"===i||"height"===i||"x"===i||"y"===i?parseFloat(r):r,-1===(a=Ext.Array.indexOf(g,o))&&(g.push([o,{}]),a=g.length-1),g[a][1][i]=s;for(f=g.length,l=0;l<f;l++)g[l][0].setAttributes(g[l][1]);this.target.redraw()}}),Ext.define("Ext.fx.target.CompositeSprite",{extend:"Ext.fx.target.Sprite",getAttr:function(e,t){var i,n,r=[],o=[].concat(this.target.items),a=o.length;for(i=0;i<a;i++)n=o[i],r.push([n,void 0!==t?t:this.getFromPrim(n,e)]);return r}}),Ext.define("Ext.fx.target.Component",{extend:"Ext.fx.target.Target",type:"component",getPropMethod:{top:function(){return this.getPosition(!0)[1]},left:function(){return this.getPosition(!0)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(e,t){return[[this.target,void 0!==t?t:this.getPropMethod[e].call(this.target)]]},setAttr:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g=e.length,p={};for(a=0;a<g;a++){for(r in n=e[a].attrs)for(l=n[r].length,s=0;s<l;s++)o=n[r][s],(f=p[this.setMethods[r]]||(p[this.setMethods[r]]={})).target=o[0],f[r]=o[1];p.setPosition&&(d=void 0===(o=p.setPosition).left?void 0:parseFloat(o.left),u=void 0===o.top?void 0:parseFloat(o.top),o.target.setPosition(d,u)),p.setPagePosition&&(o=p.setPagePosition).target.setPagePosition(o.x,o.y),p.setSize&&(c=void 0===(o=p.setSize).width?o.target.getWidth():parseFloat(o.width),h=void 0===o.height?o.target.getHeight():parseFloat(o.height),o.target.el.setSize(c,h),(i||this.dynamic)&&Ext.GlobalEvents.on({idle:Ext.Function.bind(o.target.setSize,o.target,[c,h]),single:!0})),p.setOpacity&&(o=p.setOpacity).target.el.setStyle("opacity",o.opacity)}}}),Ext.define("Ext.fx.Queue",{requires:["Ext.util.HashMap"],constructor:function(){this.targets=new Ext.util.HashMap,this.fxQueue={}},getFxDefaults:function(e){var t=this.targets.get(e);return t?t.fxDefaults:{}},setFxDefaults:function(e,t){var i=this.targets.get(e);i&&(i.fxDefaults=Ext.apply(i.fxDefaults||{},t))},stopAnimation:function(e,t){for(var i,n=this.getFxQueue(e),r=n.length;r;)(i=n[r-1])&&i.end(t),r--},getActiveAnimation:function(e){var t=this.getFxQueue(e);return!(!t||!t.length)&&t[0]},hasFxBlock:function(e){var t=this.getFxQueue(e);return t&&t[0]&&t[0].block},getFxQueue:function(e){if(!e)return!1;var t=this.fxQueue,i=t[e],n=this.targets.get(e);return!!n&&(i||(this.fxQueue[e]=t[e]=[],"element"!==n.type&&n.target.on("destroy",function(){t[e]=null,delete t[e]})),this.fxQueue[e])},clearFxQueue:function(){Ext.Object.clear(this.fxQueue)},queueFx:function(t){var i,e,n=this,r=t.target,o=r.getId();r&&((e=(i=n.getFxQueue(o)).length)?t.concurrent?t.paused=!1:i[e-1].on("afteranimate",function(){t.paused=!1}):t.paused=!1,t.on("afteranimate",function(){var e;Ext.Array.remove(i,t),0===i.length&&(n.targets.remove(t.target),n.fxQueue[o]=null,delete n.fxQueue[o]),t.remove&&"element"===r.type&&(e=Ext.get(o))&&e.destroy()},n,{single:!0}),i.push(t))}}),Ext.define("Ext.fx.Manager",{singleton:!0,requires:["Ext.util.MixedCollection","Ext.util.TaskRunner","Ext.fx.target.Element","Ext.fx.target.ElementCSS","Ext.fx.target.CompositeElement","Ext.fx.target.CompositeElementCSS","Ext.fx.target.Sprite","Ext.fx.target.CompositeSprite","Ext.fx.target.Component"],mixins:{queue:"Ext.fx.Queue"},constructor:function(){this.items=new Ext.util.MixedCollection,this.targetArr={},this.mixins.queue.constructor.call(this),this.taskRunner=new Ext.util.TaskRunner},interval:16,forceJS:!0,createTarget:function(e){var t,i=!this.forceJS&&Ext.supports.Transitions;if(this.useCSS3=i,e){if(e.tagName||Ext.isString(e)||e.isFly)e=Ext.get(e),t=new Ext.fx.target["Element"+(i?"CSS":"")](e);else if(e.dom)t=new Ext.fx.target["Element"+(i?"CSS":"")](e);else if(e.isComposite)t=new Ext.fx.target["CompositeElement"+(i?"CSS":"")](e);else if(e.isSprite)t=new Ext.fx.target.Sprite(e);else if(e.isCompositeSprite)t=new Ext.fx.target.CompositeSprite(e);else{if(!e.isComponent)return e.isAnimTarget?e:null;t=new Ext.fx.target.Component(e)}return this.targets.add(t),t}return null},addAnim:function(e){var t=this.items,i=this.task;t.add(e.id,e),!i&&t.length&&(i=this.task={run:this.runner,interval:this.interval,scope:this},this.taskRunner.start(i))},removeAnim:function(e){var t=this.items,i=this.task;t.removeAtKey(e.id),i&&!t.length&&(this.taskRunner.stop(i),delete this.task)},runner:function(){var e,t=this.items.getRange(),i=0,n=t.length;for(this.targetArr={},this.timestamp=new Date;i<n;i++)(e=t[i]).isReady()&&this.startAnim(e);for(i=0;i<n;i++)(e=t[i]).isRunning()&&this.runAnim(e);this.applyPendingAttrs(),this.targetArr=null},startAnim:function(e){e.start(this.timestamp)},runAnim:function(e,t){if(e){var i,n,r=this.useCSS3&&"element"===e.target.type,o=this.timestamp-e.startTime,a=o>=e.duration;return t&&(o=e.duration,a=!0),i=this.collectTargetData(e,o,r,a),r&&(e.target.setAttr(i.anims[e.id].attributes,!0),this.collectTargetData(e,e.duration,r,a),e.paused=!0,i=e.target.target,e.target.isComposite&&(i=e.target.target.last()),(n={})[Ext.supports.CSS3TransitionEnd]=e.lastFrame,n.scope=e,n.single=!0,i.on(n)),i}},jumpToEnd:function(e){var t,i;this.targetArr||(this.targetArr={},i=!0),t=this.runAnim(e,!0),this.applyAnimAttrs(t,t.anims[e.id]),i&&(this.targetArr=null)},collectTargetData:function(e,t,i,n){var r=e.target.getId(),o=this.targetArr[r];return(o=o||(this.targetArr[r]={id:r,el:e.target,anims:{}})).anims[e.id]={id:e.id,anim:e,elapsed:t,isLastFrame:n,attributes:[{duration:e.duration,easing:i&&e.reverse?e.easingFn.reverse().toCSS3():e.easing,attrs:e.runAnim(t)}]},o},applyAnimAttrs:function(e,t){var i=t.anim;t.attributes&&i.isRunning()&&(e.el.setAttr(t.attributes,!1,t.isLastFrame),t.isLastFrame&&i.lastFrame())},applyPendingAttrs:function(){var e,t,i,n,r,o=this.targetArr;for(t in o)if(o.hasOwnProperty(t))for(r in(e=o[t]).anims)e.anims.hasOwnProperty(r)&&(n=(i=e.anims[r]).anim,i.attributes&&n.isRunning()&&(e.el.setAttr(i.attributes,!1,i.isLastFrame),i.isLastFrame&&n.lastFrame()))},clear:function(){this.taskRunner&&this.taskRunner.stopAll(!0),this.targetArr={},this.items.clear(),this.targets.clear(),this.clearFxQueue()}}),Ext.define("Ext.fx.Animator",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager"],isAnimator:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",running:!1,paused:!1,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(e){var t=this;e=Ext.apply(t,e||{}),t.config=e,t.id=Ext.id(null,"ext-animator-"),t.mixins.observable.constructor.call(t,e),t.timeline=[],t.createTimeline(t.keyframes),t.target&&(t.applyAnimator(t.target),Ext.fx.Manager.addAnim(t))},sorter:function(e,t){return e.pct-t.pct},createTimeline:function(e){var t,i,n,r,o,a,s=[],l=this.to||{},d=this.duration;for(o in e)e.hasOwnProperty(o)&&this.animKeyFramesRE.test(o)&&(a={attrs:Ext.apply(e[o],l)},"from"===o?o=0:"to"===o&&(o=100),a.pct=parseInt(o,10),s.push(a));for(Ext.Array.sort(s,this.sorter),r=s.length,n=0;n<r;n++)t=s[n-1]?d*(s[n-1].pct/100):0,i=d*(s[n].pct/100),this.timeline.push({duration:i-t,attrs:s[n].attrs})},applyAnimator:function(e){var t,i,n,r,o,a=[],s=this.timeline,l=s.length;if(!1!==this.fireEvent("beforeanimate",this)){for(o=0;o<l;o++)i=(r=(t=s[o]).attrs).easing||this.easing,n=r.damper||this.damper,delete r.easing,delete r.damper,t=new Ext.fx.Anim({target:e,easing:i,damper:n,duration:t.duration,paused:!0,to:r}),a.push(t);for(this.animations=a,this.target=t.target,o=0;o<l-1;o++)(t=a[o]).nextAnim=a[o+1],t.on("afteranimate",function(){this.nextAnim.paused=!1}),t.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},this);a[l-1].on("afteranimate",function(){this.lastFrame()},this)}},start:function(e){var t=this.delay,i=this.delayStart;if(t){if(!i)return void(this.delayStart=e);if(e-i<t)return;e=new Date(i.getTime()+t)}!1!==this.fireEvent("beforeanimate",this)&&(this.startTime=e,this.running=!0,this.animations[this.keyframeStep].paused=!1)},lastFrame:function(){var e=this,t=e.iterations,i=e.currentIteration;++i<t?(e.startTime=new Date,e.currentIteration=i,e.keyframeStep=0,e.applyAnimator(e.target),e.animations[e.keyframeStep].paused=!1):(e.currentIteration=0,e.end())},end:function(){this.fireEvent("afteranimate",this,this.startTime,new Date-this.startTime)},isReady:function(){return!1===this.paused&&!1===this.running&&0<this.iterations},isRunning:function(){return!1}}),Ext.define("Ext.fx.CubicBezier",{singleton:!0,cubicBezierAtTime:function(e,t,i,n,r,o){var a,l=3*t,d=3*(n-t)-l,u=1-l-d,s=3*i,c=3*(r-i)-s,h=1-s-c;function f(e){return((u*e+d)*e+l)*e}return a=function(e,t){var i,n,r,o,a,s;for(r=e,s=0;s<8;s++){if(o=f(r)-e,Math.abs(o)<t)return r;if(a=(3*u*r+2*d)*r+l,Math.abs(a)<1e-6)break;r-=o/a}if(n=1,(r=e)<(i=0))return i;if(n<r)return n;for(;i<n;){if(o=f(r),Math.abs(o-e)<t)return r;o<e?i=r:n=r,r=(n-i)/2+i}return r}(e,1/(200*o)),((h*a+c)*a+s)*a},cubicBezier:function(t,i,n,r){function e(e){return Ext.fx.CubicBezier.cubicBezierAtTime(e,t,i,n,r,1)}return e.toCSS3=function(){return"cubic-bezier("+[t,i,n,r].join(",")+")"},e.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-n,1-r,1-t,1-i)},e}}),Ext.define("Ext.fx.Easing",function(){var e=Math,t=e.PI,a=e.pow,i=e.sin,s=e.sqrt,l=e.abs,n=1.70158;return{singleton:!0,requires:["Ext.fx.CubicBezier"],linear:Ext.identityFn,ease:function(e){var t=.07813-e/2,i=s(.0066+t*t),n=i-t,r=-i-t,o=a(l(n),1/3)*(n<0?-1:1)+a(l(r),1/3)*(r<0?-1:1)+.25;return 3*a(1-o,2)*o*.1+3*(1-o)*o*o+o*o*o},easeIn:function(e){return a(e,1.7)},easeOut:function(e){return a(e,.48)},easeInOut:function(e){var t=.48-e/1.04,i=s(.1734+t*t),n=i-t,r=-i-t,o=a(l(n),1/3)*(n<0?-1:1)+a(l(r),1/3)*(r<0?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(e){return e*e*((1+n)*e-n)},backOut:function(e){return--e*e*((1+n)*e+n)+1},elasticIn:function(e){return 0===e||1===e?e:a(2,-10*e)*i(2*t*(e-.075)/.3)+1},elasticOut:function(e){return 1-Ext.fx.Easing.elasticIn(1-e)},bounceIn:function(e){return 1-Ext.fx.Easing.bounceOut(1-e)},bounceOut:function(e){var t=7.5625;return e<1/2.75?t*e*e:e<2/2.75?t*(e-=1.5/2.75)*e+.75:e<2.5/2.75?t*(e-=2.25/2.75)*e+.9375:t*(e-=2.625/2.75)*e+.984375}}},function(e){var t=e.self,i=t.prototype;t.addMembers({"back-in":i.backIn,"back-out":i.backOut,"ease-in":i.easeIn,"ease-out":i.easeOut,"elastic-in":i.elasticIn,"elastic-out":i.elasticOut,"bounce-in":i.bounceIn,"bounce-out":i.bounceOut,"ease-in-out":i.easeInOut})}),Ext.define("Ext.fx.DrawPath",{singleton:!0,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(e,t){return"object"==(t=String(t).toLowerCase())&&e===Object(e)||"undefined"==t&&typeof e==t||"null"==t&&null===e||"array"==t&&Array.isArray&&Array.isArray(e)||Object.prototype.toString.call(e).toLowerCase().slice(8,-1)==t},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(e){return e.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(e){if(!e)return null;var o=this,a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=[];return o.is(e,"array")&&o.is(e[0],"array")&&(s=o.pathClone(e)),s.length||String(e).replace(o.pathCommandRE,function(e,t,i){var n=[],r=t.toLowerCase();for(i.replace(o.pathValuesRE,function(e,t){t&&n.push(+t)}),"m"===r&&2<n.length&&(s.push([t].concat(Ext.Array.splice(n,0,2))),r="l",t="m"===t?"l":"L");n.length>=a[r]&&(s.push([t].concat(Ext.Array.splice(n,0,a[r]))),a[r]););}),s.toString=o.path2string,s},pathClone:function(e){var t,i,n,r,o=[];for(this.is(e,"array")&&this.is(e&&e[0],"array")||(e=this.parsePathString(e)),n=0,r=e.length;n<r;n++)for(o[n]=[],t=0,i=e[n].length;t<i;t++)o[n][t]=e[n][t];return o.toString=this.path2string,o},pathToAbsolute:function(e){this.is(e,"array")&&this.is(e&&e[0],"array")||(e=this.parsePathString(e));var t,i,n,r,o=[],a=0,s=0,l=0,d=0,u=0,c=e.length;for(c&&"M"===e[0][0]&&(l=a=+e[0][1],d=s=+e[0][2],u++,o[0]=["M",a,s]);u<c;u++){if(t=o[u]=[],(i=e[u])[0]!==i[0].toUpperCase())switch(t[0]=i[0].toUpperCase(),t[0]){case"A":t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=+(i[6]+a),t[7]=+(i[7]+s);break;case"V":t[1]=+i[1]+s;break;case"H":t[1]=+i[1]+a;break;case"M":l=+i[1]+a,d=+i[2]+s;default:for(n=1,r=i.length;n<r;n++)t[n]=+i[n]+(n%2?a:s)}else for(n=0,r=i.length;n<r;n++)o[u][n]=i[n];switch(t[0]){case"Z":a=l,s=d;break;case"H":a=t[1];break;case"V":s=t[1];break;case"M":l=(i=o[u])[(r=i.length)-2],d=i[r-1];default:a=(i=o[u])[(r=i.length)-2],s=i[r-1]}}return o.toString=this.path2string,o},interpolatePaths:function(e,t){function i(e,t){var i;if(7<e[t].length){for(e[t].shift(),i=e[t];i.length;)Ext.Array.splice(e,t++,0,["C"].concat(Ext.Array.splice(i,0,6)));Ext.Array.erase(e,t,1),o=Math.max(u.length,c.length||0)}}function n(e,t,i,n,r){e&&t&&"M"===e[r][0]&&"M"!==t[r][0]&&(Ext.Array.splice(t,r,0,["M",n.x,n.y]),i.bx=0,i.by=0,i.x=e[r][1],i.y=e[r][2],o=Math.max(u.length,c.length||0))}var r,o,a,s,l,d,u=this.pathToAbsolute(e),c=this.pathToAbsolute(t),h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};for(r=0,o=Math.max(u.length,c.length||0);r<o;r++)u[r]=this.command2curve(u[r],h),i(u,r),c[r]=this.command2curve(c[r],f),i(c,r),n(u,c,h,f,r),n(c,u,f,h,r),a=u[r],s=c[r],l=a.length,d=s.length,h.x=a[l-2],h.y=a[l-1],h.bx=parseFloat(a[l-4])||h.x,h.by=parseFloat(a[l-3])||h.y,f.bx=parseFloat(s[d-4])||f.x,f.by=parseFloat(s[d-3])||f.y,f.x=s[d-2],f.y=s[d-1];return[u,c]},command2curve:function(e,t){if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch("T"!==e[0]&&"Q"!==e[0]&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(this.arc2curve.apply(this,[t.x,t.y].concat(e.slice(1))));break;case"S":e=["C",t.x+(t.x-(t.bx||t.x)),t.y+(t.y-(t.by||t.y))].concat(e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"].concat(this.quadratic2curve(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(this.quadratic2curve(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(t.x,t.y,e[1],e[2],e[1],e[2]);break;case"H":e=["C"].concat(t.x,t.y,e[1],t.y,e[1],t.y);break;case"V":e=["C"].concat(t.x,t.y,t.x,e[1],t.x,e[1]);break;case"Z":e=["C"].concat(t.x,t.y,t.X,t.Y,t.X,t.Y)}return e},quadratic2curve:function(e,t,i,n,r,o){return[1/3*e+2/3*i,1/3*t+2/3*n,1/3*r+2/3*i,1/3*o+2/3*n,r,o]},rotate:function(e,t,i){var n=Math.cos(i),r=Math.sin(i);return{x:e*n-t*r,y:e*r+t*n}},arc2curve:function(e,t,i,n,r,o,a,s,l,d){var u,c,h,f,g,p,m,x,y,v,E,b,C,S,w,T,P,k,I,R,M,A,D,F,L,O,B,N,H,V=Math.PI,_=120*V/180,z=this.radian*(+r||0),W=[],G=Math,X=G.cos,U=G.sin,Y=G.sqrt,q=G.abs,K=G.asin;if(d?(v=d[0],E=d[1],x=d[2],y=d[3]):(e=(u=this.rotate(e,t,-z)).x,t=u.y,1<(f=(c=(e-(s=(u=this.rotate(s,l,-z)).x))/2)*c/(i*i)+(h=(t-(l=u.y))/2)*h/(n*n))&&(i*=f=Y(f),n*=f),x=(m=(o==a?-1:1)*Y(q(((g=i*i)*(p=n*n)-g*h*h-p*c*c)/(g*h*h+p*c*c))))*i*h/n+(e+s)/2,v=K(((t-(y=m*-n*c/i+(t+l)/2))/n).toFixed(7)),E=K(((l-y)/n).toFixed(7)),(v=e<x?V-v:v)<0&&(v=2*V+v),(E=s<x?V-E:E)<0&&(E=2*V+E),a&&E<v&&(v-=2*V),!a&&v<E&&(E-=2*V)),q(b=E-v)>_&&(B=E,N=s,H=l,s=x+i*X(E=v+_*(a&&v<E?1:-1)),l=y+n*U(E),W=this.arc2curve(s,l,i,n,r,0,a,N,H,[E,B,x,y])),b=E-v,C=X(v),S=U(v),w=X(E),T=U(E),A=[s+(k=4/3*i*(P=G.tan(b/4)))*T,l-(I=4/3*n*P)*w],D=[s,l],(M=[e+k*S,t-I*C])[0]=2*(R=[e,t])[0]-M[0],M[1]=2*R[1]-M[1],d)return[M,A,D].concat(W);for(F=[],O=(W=[M,A,D].concat(W).join().split(",")).length,L=0;L<O;L++)F[L]=L%2?this.rotate(W[L-1],W[L],z).y:this.rotate(W[L],W[L+1],z).x;return F}}),Ext.define("Ext.fx.PropertyHandler",{requires:["Ext.fx.DrawPath"],statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(e,t,i,n,r){var o,a=this.unitRE,s=a.exec(e);return i="number"==typeof i?i:1,s&&(e=s[1],o=s[2],this.scrollRE.test(r)||o||!this.pixelDefaultsRE.test(r)||(o="px")),e=+e||0,(s=a.exec(t))&&(t=s[1],o=s[2]||o),{from:e,delta:((t=+t||0)-(null!=n?n:e))*i,units:o}},get:function(e,t,i,n,r){var o,a,s,l,d,u=e.length,c=[];for(o=0;o<u;o++)if(n&&(a=n[o][1].from),Ext.isArray(e[o][1])&&Ext.isArray(t)){for(s=[],l=0,d=e[o][1].length;l<d;l++)s.push(this.computeDelta(e[o][1][l],t[l],i,a,r));c.push([e[o][0],s])}else c.push([e[o][0],this.computeDelta(e[o][1],t,i,a,r)]);return c},set:function(e,t){var i,n,r,o,a,s=e.length,l=[];for(i=0;i<s;i++)if(n=e[i][1],Ext.isArray(n)){for(r=[],a=0,o=n.length;a<o;a++)r.push(n[a].from+n[a].delta*t+(n[a].units||0));l.push([e[i][0],r])}else l.push([e[i][0],n.from+n.delta*t+(n.units||0)]);return l}},stringHandler:{computeDelta:function(e,t,i,n,r){return{from:e,delta:t}},get:function(e,t,i,n,r){var o,a=e.length,s=[];for(o=0;o<a;o++)s.push([e[o][0],this.computeDelta(e[o][1],t,i,void 0,r)]);return s},set:function(e,t){var i,n,r=e.length,o=[];for(i=0;i<r;i++)n=e[i][1],o.push([e[i][0],n.delta]);return o}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(e,t){var i,n,r,o=!1,a=[this.hexRE,this.rgbRE,this.hex3RE],s=a.length;for(r=0;r<s;r++)if(n=r%2==0?16:10,(i=a[r].exec(e))&&4===i.length){2===r&&(i[1]+=i[1],i[2]+=i[2],i[3]+=i[3]),o={red:parseInt(i[1],n),green:parseInt(i[2],n),blue:parseInt(i[3],n)};break}return o||e},computeDelta:function(e,t,i,n){e=this.parseColor(e);var r=n||e,o=typeof r,a=typeof(t=this.parseColor(t,i));return"string"==o||"undefined"==o||"string"==a||"undefined"==a?t||r:{from:e,delta:{red:Math.round((t.red-r.red)*i),green:Math.round((t.green-r.green)*i),blue:Math.round((t.blue-r.blue)*i)}}},get:function(e,t,i,n){var r,o,a=e.length,s=[];for(r=0;r<a;r++)n&&(o=n[r][1].from),s.push([e[r][0],this.computeDelta(e[r][1],t,i,o)]);return s},set:function(e,t){var i,n,r,o,a,s=e.length,l=[];for(i=0;i<s;i++)if(n=e[i][1]){if(o=n.from,a=n.delta,void 0===(n="object"==typeof(n="object"==typeof n&&"red"in n?"rgb("+n.red+", "+n.green+", "+n.blue+")":n)&&n.length?n[0]:n))return[];r="string"==typeof n?n:"rgb("+[(o.red+Math.round(a.red*t))%256,(o.green+Math.round(a.green*t))%256,(o.blue+Math.round(a.blue*t))%256].join(",")+")",l.push([e[i][0],r])}return l}},object:{interpolate:function(e,t){var i,n={};for(i in t="number"==typeof t?t:1,e)n[i]=parseFloat(e[i])*t;return n},computeDelta:function(e,t,i,n){e=this.interpolate(e),t=this.interpolate(t,i);var r,o=n||e,a={};for(r in t)a[r]=t[r]-o[r];return{from:e,delta:a}},get:function(e,t,i,n){var r,o,a=e.length,s=[];for(r=0;r<a;r++)n&&(o=n[r][1].from),s.push([e[r][0],this.computeDelta(e[r][1],t,i,o)]);return s},set:function(e,t){var i,n,r,o,a,s=e.length,l=[],d={};for(i=0;i<s;i++){for(a in n=(o=e[i][1]).from,r=o.delta,n)d[a]=n[a]+r[a]*t;l.push([e[i][0],d])}return l}},path:{computeDelta:function(e,t,i,n){return{from:e=+e||0,delta:((t=+t||0)-(null!=n?n:e))*(i="number"==typeof i?i:1)}},forcePath:function(e){return Ext.isArray(e)||Ext.isArray(e[0])||(e=Ext.fx.DrawPath.parsePathString(e)),e},get:function(e,t,i,n){var r,o,a,s,l,d,u,c,h,f=this.forcePath(t),g=[],p=e.length;for(a=0;a<p;a++){for(h=this.forcePath(e[a][1]),h=(s=Ext.fx.DrawPath.interpolatePaths(h,f))[0],f=s[1],r=h.length,c=[],d=0;d<r;d++){for(s=[h[d][0]],o=h[d].length,u=1;u<o;u++)l=n&&n[0][1][d][u].from,s.push(this.computeDelta(h[d][u],f[d][u],i,l));c.push(s)}g.push([e[a][0],c])}return g},set:function(e,t){var i,n,r,o,a,s,l,d,u=e.length,c=[];for(i=0;i<u;i++){for(o=[],l=(s=e[i][1]).length,n=0;n<l;n++){for(a=[s[n][0]],d=s[n].length,r=1;r<d;r++)a.push(s[n][r].from+s[n][r].delta*t);o.push(a.join(","))}c.push([e[i][0],o.join(",")])}return c}}}},function(){for(var e=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],t=e.length,i=0;i<t;i++)this[e[i]]=this.color;for(t=(e=["cursor"]).length,i=0;i<t;i++)this[e[i]]=this.stringHandler}),Ext.define("Ext.fx.Anim",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager","Ext.fx.Animator","Ext.fx.Easing","Ext.fx.CubicBezier","Ext.fx.PropertyHandler"],isAnimation:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^)]+)\)/,reverse:!1,running:!1,paused:!1,iterations:1,autoEnd:!1,alternate:!1,currentIteration:0,startTime:0,frameCount:0,constructor:function(e){var t,i=this;if((e=e||{}).keyframes)return new Ext.fx.Animator(e);Ext.apply(i,e),void 0===i.from&&(i.from={}),i.propHandlers={},i.config=e,i.target=Ext.fx.Manager.createTarget(i.target),i.easingFn=Ext.fx.Easing[i.easing],i.target.dynamic=i.dynamic,i.easingFn||(i.easingFn=String(i.easing).match(i.bezierRE),i.easingFn&&5===i.easingFn.length&&(t=i.easingFn,i.easingFn=Ext.fx.CubicBezier.cubicBezier(+t[1],+t[2],+t[3],+t[4]))),i.id=Ext.id(null,"ext-anim-"),i.mixins.observable.constructor.call(i),Ext.fx.Manager.addAnim(i),e.autoEnd&&(i.running=!0,i.jumpToEnd())},setAttr:function(e,t){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,e,t)},initAttrs:function(){var e,t,i,n,r=this.from,o=this.to,a=this.initialFrom||{},s={};for(n in o)o.hasOwnProperty(n)&&(e=this.target.getAttr(n,r[n]),t=o[n],i=Ext.fx.PropertyHandler[n]?this.propHandlers[n]=Ext.fx.PropertyHandler[n]:Ext.isObject(t)?this.propHandlers[n]=Ext.fx.PropertyHandler.object:this.propHandlers[n]=Ext.fx.PropertyHandler.defaultHandler,s[n]=i.get(e,t,this.damper,a[n],n));this.currentAttrs=s},start:function(e){var t=this,i=t.delay,n=t.delayStart;if(i){if(!n)return void(t.delayStart=e);if(e-n<i)return;e=new Date(n.getTime()+i)}!1!==t.fireEvent("beforeanimate",t)&&(t.startTime=e,t.paused||t.currentAttrs||t.initAttrs(),t.running=!0,t.frameCount=0)},jumpToEnd:function(e){this.endWasCalled||(this.currentAttrs||this.initAttrs(),Ext.fx.Manager.jumpToEnd(this),this.end(e))},runAnim:function(e){var t,i,n,r,o=this.currentAttrs,a=this.duration,s=this.easingFn,l=this.propHandlers,d={};for(n in a<=e&&(e=a,r=!0),this.reverse&&(e=a-e),o)o.hasOwnProperty(n)&&(i=o[n],t=r?1:s(e/a),d[n]=l[n].set(i,t));return this.frameCount++,d},lastFrame:function(){var e=this,t=e.iterations,i=e.currentIteration;++i<t?(e.alternate&&(e.reverse=!e.reverse),e.startTime=new Date,e.currentIteration=i,e.paused=!1):(e.currentIteration=0,e.end(),e.fireEvent("lastframe",e,e.startTime))},endWasCalled:0,end:function(e){var t=this;t.endWasCalled++||(t.startTime=0,t.paused=!1,t.running=!1,Ext.fx.Manager.removeAnim(t),e||(t.fireEvent("afteranimate",t,t.startTime),Ext.callback(t.callback,t.scope,[t,t.startTime])),t.remove&&t.target.destroy())},isReady:function(){return!1===this.paused&&!1===this.running&&0<this.iterations},isRunning:function(){return!1===this.paused&&!0===this.running&&!0!==this.isAnimator}}),Ext.enableFx=!0,Ext.define("Ext.util.Animate",{mixinId:"animate",requires:["Ext.fx.Manager","Ext.fx.Anim"],isAnimate:!0,animate:function(e){return Ext.fx.Manager.hasFxBlock(this.id)||Ext.fx.Manager.queueFx(new Ext.fx.Anim(this.anim(e))),this},anim:function(e){return Ext.isObject(e)?(e.stopAnimation&&this.stopAnimation(),Ext.applyIf(e,Ext.fx.Manager.getFxDefaults(this.id)),Ext.apply({target:this,paused:!0},e)):!!e&&{}},getAnimationProps:function(){var e=this.layout;return e&&e.animate?e.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(e){return Ext.fx.Manager.stopAnimation(this.id,e),this},syncFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!0}),this},sequenceFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!1}),this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}}),Ext.define("Ext.dom.Fly",{extend:"Ext.dom.Element",alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:!0,constructor:function(e){this.dom=e,this.el=this},attach:function(e){var t;return e?(this.dom=Ext.getDom(e),Ext.cache[e.id]||(t=this.peekData())&&(t.isSynchronized=!1),this):this.detach()},detach:function(){return this.dom=null},addListener:function(){Ext.raise("Cannot use addListener() on Ext.dom.Fly instances. Please use Ext.get() to retrieve an Ext.dom.Element instance instead.")},removeListener:function(){Ext.raise("Cannot use removeListener() on Ext.dom.Fly instances. Please use Ext.get() to retrieve an Ext.dom.Element instance instead.")}},function(a){var e,s={};a.cache=s,Ext.fly=function(e,t){var i,n,r=null,o=Ext.fly;return t=t||o.caller&&(o.caller.$name||o.caller.name)||"_global",(e=Ext.getDom(e))&&(i=e.nodeType,(a.prototype.validNodeTypes[i]||!i&&e.window==e)&&((r=Ext.cache[e.id])&&r.dom===e||("constructor"===t&&(t="$constructor"),(r=s[t]||(s[t]=new a)).dom=e,(n=r.peekData())&&(n.isSynchronized=!1)))),r},Ext.getDetachedBody=function(){return e||(Ext.detachedBodyEl=e=new a(document.createElement("div")),e.isDetachedBody=!0),e}}),Ext.define("Ext.dom.CompositeElementLite",{alternateClassName:["Ext.CompositeElementLite"],requires:["Ext.dom.Fly"],isComposite:!0,isLite:!0,statics:{importElementMethods:function(){var e=Ext.dom.Element,i=this.prototype;Ext.Object.each(e.prototype,function(e,t){"function"!=typeof t||i[e]||(i[e]=function(){return this.invoke(e,arguments)})})}},constructor:function(e,t){t?this.elements=e||[]:(this.elements=[],this.add(e))},getElement:function(e){return(this._fly||(this._fly=new Ext.dom.Fly)).attach(e)},transformElement:function(e){return Ext.getDom(e)},getCount:function(){return this.elements.length},add:function(e,t){var i,n,r=this.elements;if(!e)return this;for("string"==typeof e?e=Ext.fly(t||document).query(e):e.isComposite?e=e.elements:Ext.isIterable(e)||(e=[e]),i=0,n=e.length;i<n;++i)r.push(this.transformElement(e[i]));return this},invoke:function(e,t){var i,n,r,o=this.elements,a=o.length;if(0!==r)for(i=(this.isLite?Ext.dom.Fly:Ext.dom.Element).prototype,r=0;r<a;r++)(n=o[r])&&i[e].apply(this.getElement(n),t);return this},item:function(e){var t=this.elements[e],i=null;return t&&(i=this.getElement(t)),i},slice:function(e,t){return Ext.Array.slice(this.elements,e,t)},each:function(e,t){var i,n,r=this.elements,o=r.length;for(i=0;i<o&&(!(n=r[i])||(n=this.getElement(n),!1!==e.call(t||n,n,this,i)));i++);return this},fill:function(e){return this.elements=[],this.add(e),this},insert:function(e,t){Ext.Array.insert(this.elements,e,t)},filter:function(e){for(var t,i=this.elements,n=i.length,r=[],o=0,a="function"==typeof e;o<n;o++)(t=i[o])&&(t=this.getElement(t),(a?!1!==e.call(t,t,this,o):t.is(e))&&r.push(this.transformElement(t)));return this.elements=r,this},indexOf:function(e){return Ext.Array.indexOf(this.elements,this.transformElement(e))},replaceElement:function(e,t,i){var n,r=isNaN(e)?this.indexOf(e):e;return-1<r&&(t=Ext.getDom(t),i&&((n=this.elements[r]).parentNode.insertBefore(t,n),Ext.removeNode(n)),Ext.Array.splice(this.elements,r,1,t)),this},clear:function(e){var t=this.elements,i=t.length-1;if(e)for(;0<=i;i--)Ext.removeNode(t[i]);this.elements=[]},addElements:function(e,t){if(!e)return this;"string"==typeof e&&(e=Ext.dom.Element.selectorFunction(e,t));var i,n=this.elements,r=e.length;for(i=0;i<r;i++)n.push(Ext.get(e[i]));return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(e){return-1!==this.indexOf(e)},removeElement:function(e,t){var i,n,r,o,a=this.elements;for(r=0,o=(e=[].concat(e)).length;r<o;r++)(n=a[i=e[r]]||a[i=this.indexOf(i)])&&(t&&(n.dom?n.destroy():Ext.removeNode(n)),Ext.Array.erase(a,i,1));return this},destroy:function(){this.invoke("destroy",arguments),this.callParent()}},function(e){var t=e.prototype;e.importElementMethods(),t.on=t.addListener}),Ext.define("Ext.overrides.dom.Element",function(){function t(e,t){return t.charAt(1).toUpperCase()}var l,m,u=window,f=document,d="hidden",i="isClipped",n="overflow",r="overflow-x",o="overflow-y",a="originalClip",c="visibility",h="display",g="visibilityMode",p=Ext.baseCSSPrefix+"hidden-offsets",x=Ext.baseCSSPrefix+"hidden-clip",s=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),y=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/gi,v=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,E=/\ssrc=(['"])(.*?)\1/i,b=/\S/,C=/\stype=(['"])(.*?)\1/i,S=/table-row|table-.*-group/,w=/^-ms-/,T=/(-[a-z])/gi,P=Ext.baseCSSPrefix+"masked",k=Ext.baseCSSPrefix+"masked-relative",I=Ext.baseCSSPrefix+"mask-msg",R=/^body/i,M={},A=f.createRange?f.createRange():null;if(Ext.isIE8){function e(){var e,t=L.length;for(e=0;e<t;e++)F.appendChild(L[e]);F.innerHTML="",L.length=0}var D,F=f.createElement("div"),L=[];e.$skipTimerCheck=!0,D=Ext.Function.createBuffered(e,10)}return{override:"Ext.dom.Element",mixins:["Ext.util.Animate"],uses:["Ext.dom.GarbageCollector","Ext.dom.Fly","Ext.event.publisher.MouseEnterLeave","Ext.fx.Manager","Ext.fx.Anim"],skipGarbageCollection:!1,_init:function(e){l=e,u.__UNIT_TESTING__&&(e.destroyQueue=L)},statics:{normalize:function(e){return"float"===e&&(e=Ext.supports.Float?"cssFloat":"styleFloat"),M[e]||(M[e]=e.replace(w,"ms-").replace(T,t))}},addKeyListener:function(e,t,i){var n;return n="object"!=typeof e||Ext.isArray(e)?{target:this,key:e,fn:t,scope:i}:{target:this,key:e.key,shift:e.shift,ctrl:e.ctrl,alt:e.alt,fn:t,scope:i},new Ext.util.KeyMap(n)},addKeyMap:function(e){return new Ext.util.KeyMap(Ext.apply({target:this},e))},adjustDirect2DDimension:function(e){var t,i=this.dom,n=this.getStyle("display"),r=i.style.display,o=i.style.position,a="width"===e?0:1,s=i.currentStyle;return"inline"===n&&(i.style.display="inline-block"),i.style.position=n.match(S)?"absolute":"static",t=(parseFloat(s[e])||2*parseFloat(s.msTransformOrigin.split(" ")[a]))%1,i.style.position=o,"inline"===n&&(i.style.display=r),t},afterAnimate:function(){var e=this.shadow;!e||e.disabled||e.animate||e.show()},anchorAnimX:function(e){var t="l"===e?"right":"left";this.dom.style[t]="0px"},anim:function(e){if(!Ext.isObject(e))return!!e&&{};var t,i=e.duration||Ext.fx.Anim.prototype.duration,n=e.easing||"ease";return e.stopAnimation&&this.stopAnimation(),Ext.applyIf(e,Ext.fx.Manager.getFxDefaults(this.id)),Ext.fx.Manager.setFxDefaults(this.id,{delay:0}),t={target:this.dom,remove:e.remove,alternate:e.alternate||!1,duration:i,easing:n,callback:e.callback,listeners:e.listeners,iterations:e.iterations||1,scope:e.scope,block:e.block,concurrent:e.concurrent,delay:e.delay||0,paused:!0,keyframes:e.keyframes,from:e.from||{},to:Ext.apply({},e),userConfig:e},Ext.apply(t.to,e.to),delete t.to.to,delete t.to.from,delete t.to.remove,delete t.to.alternate,delete t.to.keyframes,delete t.to.iterations,delete t.to.listeners,delete t.to.target,delete t.to.paused,delete t.to.callback,delete t.to.scope,delete t.to.duration,delete t.to.easing,delete t.to.concurrent,delete t.to.block,delete t.to.stopAnimation,delete t.to.delay,t},animate:function(e){return this.addAnimation(e),this},addAnimation:function(e){var t,i,n,r=this.dom.id||Ext.id(this.dom);return Ext.fx.Manager.hasFxBlock(r)||(e.listeners&&(t=e.listeners,delete e.listeners),e.internalListeners&&(e.listeners=e.internalListeners,delete e.internalListeners),n=e.autoEnd,delete e.autoEnd,(i=new Ext.fx.Anim(this.anim(e))).on({afteranimate:"afterAnimate",beforeanimate:"beforeAnimate",scope:this,single:!0}),t&&i.on(t),Ext.fx.Manager.queueFx(i),n&&i.jumpToEnd()),i},beforeAnimate:function(){var e=this.shadow;!e||e.disabled||e.animate||e.hide()},boxWrap:function(e){var t;return e=e||Ext.baseCSSPrefix+"box",(t=Ext.get(this.insertHtml("beforeBegin","<div class='"+e+"' role='presentation'>"+Ext.String.format(s,e)+"</div>"))).selectNode("."+e+"-mc").appendChild(this.dom),t},clean:function(e){var t,i=this.dom,n=this.getData(),r=i.firstChild,o=-1;if(n.isCleaned&&!0!==e)return this;for(;r;)t=r.nextSibling,3===r.nodeType?b.test(r.nodeValue)?t&&3===t.nodeType&&(r.appendData(Ext.String.trim(t.data)),i.removeChild(t),t=r.nextSibling,r.nodeIndex=++o):i.removeChild(r):(Ext.fly(r,"_clean").clean(),r.nodeIndex=++o),r=t;return n.isCleaned=!0,this},empty:A?function(){var e=this.dom;e.firstChild&&(A.setStartBefore(e.firstChild),A.setEndAfter(e.lastChild),A.deleteContents())}:function(){for(var e=this.dom;e.lastChild;)e.removeChild(e.lastChild)},clearListeners:function(){this.removeAnchor(),this.callParent()},clearPositioning:function(e){return e=e||"",this.setStyle({left:e,right:e,top:e,bottom:e,"z-index":"",position:"static"})},createProxy:function(e,t,i){e="object"==typeof e?e:{tag:"div",role:"presentation",cls:e};var n=t?Ext.DomHelper.append(t,e,!0):Ext.DomHelper.insertBefore(this.dom,e,!0);return n.setVisibilityMode(l.DISPLAY),n.hide(),i&&this.setBox&&this.getBox&&n.setBox(this.getBox()),n},clearOpacity:function(){return this.setOpacity("")},clip:function(){var e,t=this.getData();return t[i]||(t[i]=!0,e=this.getStyle([n,r,o]),t[a]={o:e[n],x:e[r],y:e[o]},this.setStyle(n,d),this.setStyle(r,d),this.setStyle(o,d)),this},destroy:function(){var e,t,i=this.dom,n=this.peekData();i&&(this.isAnimate&&this.stopAnimation(!0),this.removeAnchor()),this.deferredFocusTimer&&(Ext.undefer(this.deferredFocusTimer),this.deferredFocusTimer=null),this.callParent(),i&&Ext.isIE8&&i.window!=i&&9!==i.nodeType&&"BODY"!==i.tagName&&"HTML"!==i.tagName&&(L[L.length]=i,D()),n&&(e=n.maskEl,t=n.maskMsg,e&&e.destroy(),t&&t.destroy())},enableDisplayMode:function(e){return this.setVisibilityMode(l.DISPLAY),void 0!==e&&(this.getData().originalDisplay=e),this},fadeIn:function(e){var t=this.dom,i=new Ext.dom.Fly;return this.animate(Ext.apply({},e,{opacity:1,internalListeners:{beforeanimate:function(e){i.attach(t),i.isStyle("display","none")?i.setDisplayed(""):i.show()}}})),this},fadeOut:function(t){var i=this.dom,n=new Ext.dom.Fly;return t=Ext.apply({opacity:0,internalListeners:{afteranimate:function(e){0===e.to.opacity&&(n.attach(i),n.attach(i),t.useDisplay?n.setDisplayed(!1):n.hide())}}},t),this.animate(t),this},fixDisplay:function(){this.isStyle(h,"none")&&(this.setStyle(c,d),this.setStyle(h,this._getDisplay()),this.isStyle(h,"none")&&this.setStyle(h,"block"))},frame:function(n,r,o){var e,a=this.dom,s=new Ext.dom.Fly;return n=n||"#C3DAF9",r=r||1,o=o||{},e=function(){var e,t,i=this;s.attach(a),s.show(),e=s.getBox(),t=Ext.getBody().createChild({role:"presentation",id:s.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35e3,border:"0px solid "+n}}),new Ext.fx.Anim({target:t,duration:o.duration||1e3,iterations:r,from:{top:e.y,left:e.x,borderWidth:0,opacity:1,height:e.height,width:e.width},to:{top:e.y-20,left:e.x-20,borderWidth:10,opacity:0,height:e.height+40,width:e.width+40}}).on("afteranimate",function(){t.destroy(),i.end()})},this.animate({duration:2*Math.max(o.duration,500)||2e3,listeners:{beforeanimate:{fn:e}},callback:o.callback,scope:o.scope}),this},getColor:function(e,t,i){var n,r,o,a=this.getStyle(e),s=i||""===i?i:"#";if(!a||/transparent|inherit/.test(a))return t;if(/^r/.test(a))for(r=(a=a.slice(4,a.length-1).split(",")).length,o=0;o<r;o++)s+=((n=parseInt(a[o],10))<16?"0":"")+n.toString(16);else s+=3===(a=a.replace("#","")).length?a.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):a;return 5<s.length?s.toLowerCase():t},getLoader:function(){var e=this.getData(),t=e.loader;return t||(e.loader=t=new Ext.ElementLoader({target:this})),t},getPositioning:function(e){var t=this.getStyle(["left","top","position","z-index"]),i=this.dom;return e&&("auto"===t.left&&(t.left=i.offsetLeft+"px"),"auto"===t.top&&(t.top=i.offsetTop+"px")),t},ghost:function(o,e){var t,a=this.dom,s=new Ext.dom.Fly;return o=o||"b",t=function(){s.attach(a);var e=s.getWidth(),t=s.getHeight(),i=s.getXY(),n=s.getPositioning(),r={opacity:0};switch(o){case"t":r.y=i[1]-t;break;case"l":r.x=i[0]-e;break;case"r":r.x=i[0]+e;break;case"b":r.y=i[1]+t;break;case"tl":r.x=i[0]-e,r.y=i[1]-t;break;case"bl":r.x=i[0]-e,r.y=i[1]+t;break;case"br":r.x=i[0]+e,r.y=i[1]+t;break;case"tr":r.x=i[0]+e,r.y=i[1]-t}this.to=r,this.on("afteranimate",function(){s.attach(a),s&&(s.hide(),s.clearOpacity(),s.setPositioning(n))})},this.animate(Ext.applyIf(e||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:t}})),this},getTextSelection:function(){var e,t,i,n;return"number"!=typeof(e=this.callParent())[0]&&(i=(t=this.dom).ownerDocument.selection.createRange(),(n=t.createTextRange()).setEndPoint("EndToStart",i),e[0]=n.text.length,e[1]=e[0]+i.text.length),e},hide:function(e){return"string"==typeof e?this.setVisible(!1,e):this.setVisible(!1,this.anim(e)),this},highlight:function(e,t){var i,n,r,o,a,s=this.dom,l={},d=new Ext.dom.Fly;return o=(t=t||{}).listeners||{},l[r=t.attr||"backgroundColor"]=e||"ffff9c",t.to?n=t.to:(n={})[r]=t.endColor||this.getColor(r,"ffffff",""),t.listeners=Ext.apply(Ext.apply({},o),{beforeanimate:function(){if(d.attach(s),i=s.style[r],d.clearOpacity(),d.show(),a=o.beforeanimate)return(a.fn||a).apply(a.scope||o.scope||u,arguments)},afteranimate:function(){s&&(s.style[r]=i),(a=o.afteranimate)&&(a.fn||a).apply(a.scope||o.scope||u,arguments)}}),this.animate(Ext.apply({},t,{duration:1e3,easing:"ease-in",from:l,to:n})),this},initDD:function(e,t,i){var n=new Ext.dd.DD(Ext.id(this.dom),e,t);return Ext.apply(n,i)},initDDProxy:function(e,t,i){var n=new Ext.dd.DDProxy(Ext.id(this.dom),e,t);return Ext.apply(n,i)},initDDTarget:function(e,t,i){var n=new Ext.dd.DDTarget(Ext.id(this.dom),e,t);return Ext.apply(n,i)},isMasked:function(e){var t,i=this.getData(),n=i.maskEl,r=i.maskMsg,o=!1;if(n&&n.isVisible())r&&r.center(this),o=!0;else if(e&&(t=this.findParentNode()))return Ext.fly(t).isMasked(e);return o},load:function(e){return this.getLoader().load(e),this},mask:function(e,t,i){var n,r=this.dom,o=this.getData(),a=o.maskEl;return R.test(r.tagName)&&"static"===this.getStyle("position")||this.addCls(k),a&&a.destroy(),a=Ext.DomHelper.append(r,{role:"presentation",cls:Ext.baseCSSPrefix+"mask "+Ext.baseCSSPrefix+"border-box",children:{role:"presentation",cls:t?I+" "+t:I,cn:{tag:"div",role:"presentation",cls:Ext.baseCSSPrefix+"mask-msg-inner",cn:{tag:"div",role:"presentation",cls:Ext.baseCSSPrefix+"mask-msg-text",html:e||""}}}},!0),n=Ext.fly(a.dom.firstChild),o.maskEl=a,this.addCls(P),a.setDisplayed(!0),"string"==typeof e?(n.setDisplayed(!0),n.center(this)):n.setDisplayed(!1),r===f.body&&a.addCls(Ext.baseCSSPrefix+"mask-fixed"),this.saveTabbableState({skipSelf:r===f.body}),Ext.isIE9m&&r!==f.body&&this.isStyle("height","auto")&&a.setSize(void 0,i||this.getHeight()),a},puff:function(e){var t,i,n=this.dom,r=new Ext.dom.Fly,o=this.getBox();return i=this.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],!0),e=Ext.applyIf(e||{},{easing:"ease-out",duration:500,useDisplay:!1}),t=function(){r.attach(n),r.clearOpacity(),r.show(),this.to={width:2*o.width,height:2*o.height,x:o.x-o.width/2,y:o.y-o.height/2,opacity:0,fontSize:"200%"},this.on("afteranimate",function(){r.attach(n),e.useDisplay?r.setDisplayed(!1):r.hide(),r.setStyle(i),Ext.callback(e.callback,e.scope)})},this.animate({duration:e.duration,easing:e.easing,listeners:{beforeanimate:{fn:t}}}),this},setCapture:function(){var e=this.dom;Ext.isIE9m&&e.setCapture&&e.setCapture()},setHeight:function(e,t){return t&&this.anim?(Ext.isObject(t)||(t={}),this.animate(Ext.applyIf({to:{height:e}},t))):this.callParent(arguments),this},setHorizontal:function(){var e=this.verticalCls;delete this.vertical,e&&(delete this.verticalCls,this.removeCls(e)),delete this.setWidth,delete this.setHeight,Ext.isIE8||(delete this.getWidth,delete this.getHeight),delete this.styleHooks},updateText:function(e){},setHtml:function(s,e,l,d){var u,t,c,h=this;if(!h.dom)return h;if(s=s||"",t=h.dom,!0===e)return u=Ext.id(),s+='<span id="'+u+'" role="presentation"></span>',c=Ext.interval(function(){var e,t,i,n,r,o,a;if(!(o=f.getElementById(u)))return!1;for(Ext.uninterval(c),Ext.removeNode(o),e=Ext.getHead().dom;t=y.exec(s);)(n=!!(i=t[1])&&i.match(E))&&n[2]?((a=f.createElement("script")).src=n[2],(r=i.match(C))&&r[2]&&(a.type=r[2]),e.appendChild(a)):t[2]&&0<t[2].length&&(d?Ext.functionFactory(t[2]).call(d):Ext.globalEval(t[2]));Ext.callback(l,d||h)},20),t.innerHTML=s.replace(v,""),h;if(Ext.isIE)for(;t.firstChild;)t.removeChild(t.firstChild);return t.innerHTML=s,Ext.callback(l,h),h},setOpacity:function(e,t){return this.dom&&(t&&this.anim?("object"!=typeof t&&(t={duration:350,easing:"ease-in"}),this.animate(Ext.applyIf({to:{opacity:e}},t))):this.setStyle("opacity",e)),this},setPositioning:function(e){return this.setStyle(e)},setVertical:function(e,t){var i=l.prototype;this.vertical=!0,t&&this.addCls(this.verticalCls=t),this.setWidth=i.setHeight,this.setHeight=i.setWidth,Ext.isIE8||(this.getWidth=i.getHeight,this.getHeight=i.getWidth),this.styleHooks=270===e?i.verticalStyleHooks270:i.verticalStyleHooks90},setSize:function(e,t,i){return Ext.isObject(e)&&(i=t,t=e.height,e=e.width),i&&this.anim?(!0===i&&(i={}),this.animate(Ext.applyIf({to:{width:e,height:t}},i))):(this.dom.style.width=l.addUnits(e),this.dom.style.height=l.addUnits(t),(this.shadow||this.shim)&&this.syncUnderlays()),this},setVisible:function(e,t){var i,n,r,o=this,a=o.dom,s=(n=o.getData(),void 0===(r=n[g])&&(n[g]=r=l.VISIBILITY),r);if("string"==typeof t){switch(t){case h:s=l.DISPLAY;break;case c:s=l.VISIBILITY;break;case"offsets":s=l.OFFSETS;break;case"clip":s=l.CLIP}o.setVisibilityMode(s),t=!1}if(t&&o.anim)e&&(o.setOpacity(.01),o.setVisible(!0)),Ext.isObject(t)||(t={duration:350,easing:"ease-in"}),i=new Ext.dom.Fly,o.animate(Ext.applyIf({callback:function(){e||i.attach(a).setVisible(!1).setOpacity(1)},to:{opacity:e?1:0}},t));else{if(s===l.DISPLAY)return o.setDisplayed(e);s===l.OFFSETS?o[e?"removeCls":"addCls"](p):s===l.CLIP?o[e?"removeCls":"addCls"](x):s===l.VISIBILITY&&(o.fixDisplay(),a.style.visibility=e?"":d)}return o.getData().isVisible=e,(o.shadow||o.shim)&&o.setUnderlaysVisible(e),o},setWidth:function(e,t){return t&&this.anim?(Ext.isObject(t)||(t={}),this.animate(Ext.applyIf({to:{width:e}},t))):this.callParent(arguments),this},setX:function(e,t){return this.setXY([e,this.getY()],t)},setXY:function(e,t){return t&&this.anim?(Ext.isObject(t)||(t={}),this.animate(Ext.applyIf({to:{x:e[0],y:e[1]}},t))):this.callParent([e]),this},setY:function(e,t){return this.setXY([this.getX(),e],t)},show:function(e){return"string"==typeof e?this.setVisible(!0,e):this.setVisible(!0,this.anim(e)),this},slideIn:function(a,s,l){var e,d,u,c,h=this,f=h.dom,g=f.style,p=new Ext.dom.Fly;return a=a||"t",s=s||{},e=function(){var e,t,i,n,r=this,o=s.listeners;switch(p.attach(f),l||p.fixDisplay(),e=p.getBox(),"t"!==a&&"b"!==a||0!==e.height?"l"!==a&&"r"!==a||0!==e.width||(e.width=f.scrollWidth):e.height=f.scrollHeight,t=p.getStyle(["width","height","left","right","top","bottom","position","z-index"],!0),p.setSize(e.width,e.height),s.preserveScroll&&(u=p.cacheScrollValues()),n=p.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+f.id,style:{visibility:l?"visible":"hidden"}}),c=n.dom.parentNode,n.setPositioning(p.getPositioning()),n.isStyle("position","static")&&n.position("relative"),p.clearPositioning("auto"),n.clip(),u&&u(),p.setStyle({visibility:"",position:"absolute"}),l&&n.setSize(e.width,e.height),a){case"t":i={from:{width:e.width+"px",height:"0px"},to:{width:e.width+"px",height:e.height+"px"}},g.bottom="0px";break;case"l":i={from:{width:"0px",height:e.height+"px"},to:{width:e.width+"px",height:e.height+"px"}},h.anchorAnimX(a);break;case"r":i={from:{x:e.x+e.width,width:"0px",height:e.height+"px"},to:{x:e.x,width:e.width+"px",height:e.height+"px"}},h.anchorAnimX(a);break;case"b":i={from:{y:e.y+e.height,width:e.width+"px",height:"0px"},to:{y:e.y,width:e.width+"px",height:e.height+"px"}};break;case"tl":i={from:{x:e.x,y:e.y,width:"0px",height:"0px"},to:{width:e.width+"px",height:e.height+"px"}},g.bottom="0px",h.anchorAnimX("l");break;case"bl":i={from:{y:e.y+e.height,width:"0px",height:"0px"},to:{y:e.y,width:e.width+"px",height:e.height+"px"}},h.anchorAnimX("l");break;case"br":i={from:{x:e.x+e.width,y:e.y+e.height,width:"0px",height:"0px"},to:{x:e.x,y:e.y,width:e.width+"px",height:e.height+"px"}},h.anchorAnimX("r");break;case"tr":i={from:{x:e.x+e.width,width:"0px",height:"0px"},to:{x:e.x,width:e.width+"px",height:e.height+"px"}},g.bottom="0px",h.anchorAnimX("r")}n.show(),delete(d=Ext.apply({},s)).listeners,(d=new Ext.fx.Anim(Ext.applyIf(d,{target:n,duration:500,easing:"ease-out",from:l?i.to:i.from,to:l?i.from:i.to}))).on("afteranimate",function(){p.attach(f),p.setStyle(t),l&&(s.useDisplay?p.setDisplayed(!1):p.hide()),n.dom&&(n.dom.parentNode?n.dom.parentNode.insertBefore(f,n.dom):c.appendChild(f),n.destroy()),u&&u(),r.end()}),o&&d.on(o)},h.animate({duration:s.duration?2*Math.max(s.duration,500):1e3,listeners:{beforeanimate:e}}),h},slideOut:function(e,t){return this.slideIn(e,t,!0)},switchOff:function(r){var e,o=this.dom,a=new Ext.dom.Fly;return r=Ext.applyIf(r||{},{easing:"ease-in",duration:500,remove:!1,useDisplay:!1}),e=function(){a.attach(o);var e,t=this,i=a.getSize(),n=a.getXY();a.clearOpacity(),a.clip(),e=a.getPositioning(),new Ext.fx.Animator({target:o,duration:r.duration,easing:r.easing,keyframes:{33:{opacity:.3},66:{height:1,y:n[1]+i.height/2},100:{width:1,x:n[0]+i.width/2}}}).on("afteranimate",function(){a.attach(o),r.useDisplay?a.setDisplayed(!1):a.hide(),a.clearOpacity(),a.setPositioning(e),a.setSize(i),t.end()})},this.animate({duration:2*Math.max(r.duration,500),listeners:{beforeanimate:{fn:e}},callback:r.callback,scope:r.scope}),this},syncContent:function(e){var t,i,n,r,o,a,s,l,d,u=(e=Ext.getDom(e)).childNodes,c=u.length,h=this.dom,f=h.childNodes,g=f.length,p=h._extData;for(m=m||new Ext.dom.Fly,s=(a=e.attributes).length,t=0;t<s;t++)l=a[t].name,d=a[t].value,"id"!==l&&h.getAttribute(l)!==d&&h.setAttribute(l,a[t].value);if(p&&(p.isSynchronized=!1),c===g)for(t=0;t<c;t++){if(n=u[t],i=f[t],o=n.nodeType,r=n.style,o!==i.nodeType||1===o&&n.tagName!==i.tagName)return void(h.innerHTML=e.innerHTML);r?(n.id&&i.id!==n.id&&(i.id=n.id),i.style.cssText=r.cssText,i.className=n.className,m.attach(i).syncContent(n)):i.data=n.data}else h.innerHTML=e.innerHTML},toggle:function(e){return this.setVisible(!this.isVisible(),this.anim(e)),this},unmask:function(){var e,t=this.getData(),i=t.maskEl;i&&((e=i.dom.style).clearExpression&&(e.clearExpression("width"),e.clearExpression("height")),i&&(i.destroy(),delete t.maskEl),this.removeCls([P,k])),this.restoreTabbableState(this.dom===f.body)},unclip:function(){var e,t=this.getData();return t[i]&&(t[i]=!1,(e=t[a]).o&&this.setStyle(n,e.o),e.x&&this.setStyle(r,e.x),e.y&&this.setStyle(o,e.y)),this},translate:function(e,t,i){Ext.supports.CssTransforms&&!Ext.isIE9m?this.callParent(arguments):(null!=e&&(this.dom.style.left=e+"px"),null!=t&&(this.dom.style.top=t+"px"))},deprecated:{"4.0":{methods:{pause:function(e){return Ext.fx.Manager.setFxDefaults(this.id,{delay:e}),this},scale:function(e,t,i){return this.animate(Ext.apply({},i,{width:e,height:t})),this},shift:function(e){return this.animate(e),this}}},4.2:{methods:{moveTo:function(e,t,i){return this.setXY([e,t],i)},setBounds:function(e,t,i,n,r){return this.setBox({x:e,y:t,width:i,height:n},r)},setLeftTop:function(e,t){var i=this.dom.style;return i.left=l.addUnits(e),i.top=l.addUnits(t),(this.shadow||this.shim)&&this.syncUnderlays(),this},setLocation:function(e,t,i){return this.setXY([e,t],i)}}},"5.0":{methods:{getAttributeNS:function(e,t){return this.getAttribute(t,e)},getCenterXY:function(){return this.getAlignToXY(f,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle("height"))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle("width"))||0},getStyleSize:function(){var e,t,i,n=this.dom;return n===f||n===f.body?{width:l.getViewportWidth(),height:l.getViewportHeight()}:((e=this.getStyle(["height","width"],!0)).width&&"auto"!==e.width&&(t=parseFloat(e.width)),e.height&&"auto"!==e.height&&(i=parseFloat(e.height)),{width:t||this.getWidth(!0),height:i||this.getHeight(!0)})},isBorderBox:function(){return!0},isDisplayed:function(){return!this.isStyle("display","none")},focusable:"isFocusable"}}}}}(),function(){var c,h,e,t,i,n,r,y=Ext.dom.Element,f=y.prototype,a=!Ext.isIE8,g=document,o=g.defaultView,s=/alpha\(opacity=(.*)\)/i,l=/^\s+|\s+$/g,p=f.styleHooks,v=Ext.supports;if(f._init(y),delete f._init,Ext.plainTableCls=Ext.baseCSSPrefix+"table-plain",Ext.plainListCls=Ext.baseCSSPrefix+"list-plain",Ext.CompositeElementLite&&Ext.CompositeElementLite.importElementMethods(),!v.Opacity&&Ext.isIE&&Ext.apply(p.opacity,{get:function(e){var t,i,n=e.style.filter;return n.match&&(t=n.match(s))&&(i=parseFloat(t[1]),!isNaN(i))?i?i/100:0:1},set:function(e,t){var i=e.style,n=i.filter.replace(s,"").replace(l,"");i.zoom=1,"number"==typeof t&&0<=t&&t<1?(t*=100,i.filter=n+(n.length?" ":"")+"alpha(opacity="+t+")"):i.filter=n}}),!v.matchesSelector){var m,x=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,E=/-/g,b={};f.matcherCache=b,f.is=function(e){var t,i,n,r,o,a,s,l,d,u,c=this.dom;if(!e)return!0;if(1!==c.nodeType)return!1;if(!(n=Ext.isFunction(e)?e:b[e])){if(!(i=e.match(x)))return(r=c.parentNode)||(o=!0,r=m=m||g.createDocumentFragment(),m.appendChild(c)),a=-1!==Ext.Array.indexOf(Ext.fly(r,"_is").query(e),c),o&&m.removeChild(c),a;s=i[1],t=i[2],b[e]=n=t?(d=s,u=new RegExp("(?:^|\\s+)"+t.replace(E,"\\-")+"(?:\\s+|$)"),d&&"*"!==d?(d=d.toUpperCase(),function(e){return e.tagName===d&&u.test(e.className)}):function(e){return u.test(e.className)}):(l=(l=s).toUpperCase(),function(e){return e.tagName===l})}return n(c)}}if(o&&o.getComputedStyle||(f.getStyle=function(e,t){var i,n,r,o,a,s,l=this.dom,d="string"!=typeof e,u=e,c=u,h=1,f=t,g=this.styleHooks;if(d&&(n={},u=c[0],s=0,!(h=c.length)))return n;if(!l||l.documentElement)return n||"";i=l.style,t?a=i:(a=l.currentStyle)||(f=!0,a=i);do{if((r=g[u])||(g[u]=r={name:y.normalize(u)}),o=r.get?r.get(l,this,f,a):a[r.name],!d)return o;n[u]=o,u=c[++s]}while(s<h);return n}),Ext.isIE8){for(r=function(e,t,i,n){return"none"===n[this.styleName]?"0px":n[this.name]},t=(e=["Top","Right","Bottom","Left"]).length;t--;)n="border"+(i=e[t])+"Width",p["border-"+i.toLowerCase()+"-width"]=p[n]={name:n,styleName:"border"+i+"Style",get:r};var d=Ext.baseCSSPrefix+"sync-repaint";f.syncRepaint=function(){this.addCls(d),this.getWidth(),this.removeCls(d)}}Ext.isIE10m&&Ext.override(y,{focus:function(e,t){var i;if(t=t||this.dom,this.deferredFocusTimer&&Ext.undefer(this.deferredFocusTimer),this.deferredFocusTimer=null,Number(e))this.deferredFocusTimer=Ext.defer(this.focus,e,this,[null,t]);else{Ext.GlobalEvents.fireEvent("beforefocus",t),!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagname||(Ext.synchronouslyFocusing=document.activeElement);try{t.focus()}catch(e){i=e}Ext.synchronouslyFocusing&&document.activeElement!==t&&!i&&t.focus(),Ext.synchronouslyFocusing=null}return this}}),Ext.apply(Ext,{enableGarbageCollector:!0,isBorderBox:!0,useShims:!1,getElementById:function(e){var t,i=g.getElementById(e);return!i&&(t=Ext.detachedBodyEl)&&(i=t.dom.querySelector(Ext.makeIdSelector(e))),i},addBehaviors:function(e){var t,i,n,r={};if(Ext.isReady){for(i in e)(t=i.split("@"))[1]&&(r[n=t[0]]||(r[n]=Ext.fly(document).select(n,!0)),r[n].on(t[1],e[i]));r=null}else Ext.onInternalReady(function(){Ext.addBehaviors(e)})}}),Ext.isIE9m?(Ext.getElementById=function(e){var t,i=g.getElementById(e);return!i&&(t=Ext.detachedBodyEl)&&(i=t.dom.all[e]),i},f.getById=function(e,t){var i,n,r=this.dom,o=null;return r&&(n=a&&g.getElementById(e)||r.all[e])&&(o=t?n:((i=Ext.cache[e])&&(i.skipGarbageCollection||!Ext.isGarbage(i.dom)?o=i:(Ext.raise("Stale Element with id '"+n.id+"' found in Element cache. Make sure to clean up Element instances using destroy()"),i.destroy())),o||new Ext.Element(n))),o}):g.querySelector||(Ext.getDetachedBody=Ext.getBody,Ext.getElementById=function(e){return g.getElementById(e)},f.getById=function(e,t){var i=g.getElementById(e);return t?i:i?Ext.get(i):null}),!Ext.isIE||Ext.isIE9p&&9<=g.documentMode||(f.getAttribute=function(e,t){var i,n=this.dom;return t?"undefined"!=(i=typeof n[t+":"+e])&&"unknown"!=i&&n[t+":"+e]||null:("for"===e&&(e="htmlFor"),n[e]||null)}),Ext.onInternalReady(function(){var e,t,i,n,o=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,a=f.setWidth,s=f.setHeight,l=f.setSize,r=f.unselectable,d=/^\d+(?:\.\d*)?px$/i;function u(e,t,i,n){var r=n[this.name]||"";return o.test(r)?"transparent":r}if(v.FixedTableWidthBug&&(p.width={name:"width",set:function(e,t,i){var n=e.style,r=i._needsTableWidthFix,o=n.display;r&&(n.display="none"),n.width=t,r&&(e.scrollWidth,n.display=o)}},f.setWidth=function(e,t){var i=this.dom,n=i.style,r=this._needsTableWidthFix,o=n.display;return r&&!t&&(n.display="none"),a.call(this,e,t),r&&!t&&(i.scrollWidth,n.display=o),this},f.setSize=function(e,t,i){var n=this.dom,r=n.style,o=this._needsTableWidthFix,a=r.display;return o&&!i&&(r.display="none"),l.call(this,e,t,i),o&&!i&&(n.scrollWidth,r.display=a),this}),Ext.isIE8&&(p.height={name:"height",set:function(e,t,i){var n,r,o=i.component;o&&o._syncFrameHeight&&i===o.el&&(r=o.frameBody.dom.style,d.test(t)?(n=o.getFrameInfo())&&(r.height=parseInt(t,10)-n.height+"px"):t&&"auto"!==t||(r.height="")),e.style.height=t}},f.setHeight=function(e,t){var i,n,r=this.component;return r&&r._syncFrameHeight&&this===r.el&&(n=r.frameBody.dom.style,e&&"auto"!==e?(i=r.getFrameInfo())&&(n.height=e-i.height+"px"):n.height=""),s.call(this,e,t)},f.setSize=function(e,t,i){var n,r,o=this.component;return o&&o._syncFrameHeight&&this===o.el&&(r=o.frameBody.dom.style,t&&"auto"!==t?(n=o.getFrameInfo())&&(r.height=t-n.height+"px"):r.height=""),l.call(this,e,t,i)},f.setText=function(e){var t=this.dom;if(1!==t.childNodes.length||3!==t.firstChild.nodeType){for(;t.lastChild&&3!==t.lastChild.nodeType;)t.removeChild(t.lastChild);t.appendChild(document.createTextNode())}t.firstChild.data=e},f.unselectable=function(){r.call(this),this.dom.onselectstart=function(){return!1}}),v.RightMargin||(p.marginRight=p["margin-right"]={name:"marginRight",get:v.DisplayChangeInputSelectionBug||v.DisplayChangeTextAreaSelectionBug?function(e,t,i,n){var r,o,a,s,l,d,u,c,h,f,g,p,m,x=n.marginRight;return"0px"!==x&&(r=e.style,s=e,p=v.DisplayChangeInputSelectionBug,m=v.DisplayChangeTextAreaSelectionBug,o=(p||m)&&(d=(l=y.getActiveElement())&&l.tagName,(m&&"TEXTAREA"===d||p&&"INPUT"===d&&"text"===l.type)&&Ext.fly(s).isAncestor(l)&&(u=l.selectionStart,c=l.selectionEnd,Ext.isNumber(u)&&Ext.isNumber(c)))?(h=l,f=u,g=c,function(){h.selectionStart=f,h.selectionEnd=g}):Ext.emptyFn,a=r.display,r.display="inline-block",x=(i?n:e.ownerDocument.defaultView.getComputedStyle(e,"")).marginRight,r.display=a,o()),x}:function(e,t,i,n){var r,o,a=n.marginRight;return"0px"!==a&&(o=(r=e.style).display,r.display="inline-block",a=(i?n:e.ownerDocument.defaultView.getComputedStyle(e,null)).marginRight,r.display=o),a}}),!v.TransparentColor)for(t=(e=["background-color","border-color","color","outline-color"]).length;t--;)i=e[t],n=y.normalize(i),p[i]=p[n]={name:n,get:u};f.verticalStyleHooks90=c=Ext.Object.chain(p),f.verticalStyleHooks270=h=Ext.Object.chain(p),c.width=p.height||{name:"height"},c.height=p.width||{name:"width"},c["margin-top"]={name:"marginLeft"},c["margin-right"]={name:"marginTop"},c["margin-bottom"]={name:"marginRight"},c["margin-left"]={name:"marginBottom"},c["padding-top"]={name:"paddingLeft"},c["padding-right"]={name:"paddingTop"},c["padding-bottom"]={name:"paddingRight"},c["padding-left"]={name:"paddingBottom"},c["border-top"]={name:"borderLeft"},c["border-right"]={name:"borderTop"},c["border-bottom"]={name:"borderRight"},c["border-left"]={name:"borderBottom"},h.width=p.height||{name:"height"},h.height=p.width||{name:"width"},h["margin-top"]={name:"marginRight"},h["margin-right"]={name:"marginBottom"},h["margin-bottom"]={name:"marginLeft"},h["margin-left"]={name:"marginTop"},h["padding-top"]={name:"paddingRight"},h["padding-right"]={name:"paddingBottom"},h["padding-bottom"]={name:"paddingLeft"},h["padding-left"]={name:"paddingTop"},h["border-top"]={name:"borderRight"},h["border-right"]={name:"borderBottom"},h["border-bottom"]={name:"borderLeft"},h["border-left"]={name:"borderTop"},Ext.scopeCss||Ext.getBody().addCls(Ext.baseCSSPrefix+"body")},null,{priority:1500})}),Ext.define("Ext.GlobalEvents",{extend:"Ext.mixin.Observable",alternateClassName:"Ext.globalEvents",requires:["Ext.dom.Element"],observableType:"global",singleton:!0,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},windowListeners:{resize:{fn:"fireResize"}},constructor:function(){var e=this;e.callParent(),Ext.onInternalReady(function(){e.attachListeners()})},setPressedComponent:function(e,t){var i=this,n=i.pressedComponent;n&&n.onRelease&&n.onRelease(t),i.pressedComponent=e,i.pressedScrollStart=e?Ext.on({scrollstart:function(){i.setPressedComponent(null,t)},destroyable:!0}):Ext.destroy(i.pressedScrollStart)},attachListeners:function(){var e=Ext.getWin(),t=this.windowListeners;this.onlineState=Ext.isOnline(),this.curHeight=Ext.Element.getViewportHeight(),this.curWidth=Ext.Element.getViewportWidth(),e.on({scope:this,online:"handleOnlineChange",offline:"handleOnlineChange"}),this.fireResize.$skipTimerCheck=!0,t&&(t.scope=this,Ext.isModern?t.resize.onFrame=!0:t.resize.buffer=this.resizeBuffer,e.on(t)),Ext.getDoc().on({touchstart:"fireMouseDown",mousedown:"fireMouseDown",mouseup:"fireMouseUp",touchend:"fireMouseUp",drop:"fireMouseUp",dragend:"fireMouseUp",scope:this})},fireMouseDown:function(e){this.fireEvent("mousedown",e),Ext.ComponentManager.handleDocumentMouseDown(e)},fireMouseUp:function(e){this.fireEvent("mouseup",e),this.setPressedComponent(null,e)},fireResize:function(){var e=Ext.Element,t=e.getViewportWidth(),i=e.getViewportHeight();this.curHeight===i&&this.curWidth===t||(this.curHeight=i,this.curWidth=t,this.hasListeners.resize&&this.fireEvent("resize",t,i))},handleOnlineChange:function(){var e=Ext.isOnline();e!==this.onlineState&&(this.onlineState=e,this.fireEvent("onlinechange",e))}},function(e){Ext.hasListeners=e.hasListeners,Ext.on=function(){return e.addListener.apply(e,arguments)},Ext.un=function(){return e.removeListener.apply(e,arguments)},Ext.fireEvent=function(){return e.fireEvent.apply(e,arguments)},Ext.fireIdle=function(){e.hasListeners.idle&&!Ext._suppressIdle&&e.fireEventArgs("idle"),Ext._suppressIdle=!1},Ext._suppressIdle=!1}),Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",attachListeners:function(){var e,t;Ext.isIE8&&(e=Ext.getDoc().dom.documentElement,t=Ext.Function.createBuffered(this.fireResize,this.resizeBuffer,this),Ext.getWin().dom.attachEvent("onresize",function(){e.clientWidth===Ext.GlobalEvents.curWidth&&e.clientHeight===Ext.GlobalEvents.curHeight||t()})),this.callParent()},deprecated:{5:{methods:{addListener:function(e,t,i,n,r,o,a){var s,l;if("ready"===e)l=t;else if("string"!=typeof e)for(s in e)"ready"===s&&(l=e[s]);l&&(Ext.log.warn("Ext.on('ready', fn) is deprecated.  Please use Ext.onReady(fn) instead."),Ext.onReady(l)),this.callParent([e,t,i,n,r,o,a])}}}}}),Ext.define("Ext.Glyph",{isGlyph:!0,constructor:function(e){e&&this.setGlyph(e)},setGlyph:function(e){var t;return"string"==typeof(this.glyphConfig=e)?(t=e.split("@"),e=isNaN(t[0])?parseInt("0"+t[0],16):parseInt(t[0],10),!isNaN(e)&&e||(e=t[0].charCodeAt(0)),this.fontFamily=t[1]||Ext._glyphFontFamily):this.fontFamily=Ext._glyphFontFamily,this.codepoint=e,this.character=Ext.String.fromCodePoint(this.codepoint),this},getStyle:function(){return{"font-family":this.fontFamily}},isEqual:function(e){return e&&e.isGlyph&&e.codepoint===this.codepoint&&e.fontFamily===this.fontFamily},statics:function(){var t;return{fly:function(e){return e.isGlyph?e:(t=t||new Ext.Glyph).setGlyph(e)}}}()}),Ext.USE_NATIVE_JSON=!0,Ext.JSON=new function(){var me=this,hasNative=window.JSON&&"[object JSON]"===JSON.toString(),useHasOwn=!!{}.hasOwnProperty,pad=function(e){return e<10?"0"+e:e},doDecode=function(json){return eval("("+json+")")},doEncode=function(e,t){return null==e?"null":Ext.isDate(e)?me.encodeDate(e):Ext.isString(e)?Ext.isMSDate(e)?me.encodeMSDate(e):me.encodeString(e):"number"==typeof e?isFinite(e)?String(e):"null":Ext.isBoolean(e)?String(e):"function"==typeof e.toJSON?doEncode(e.toJSON()):Ext.isArray(e)?encodeArray(e,t):Ext.isObject(e)?encodeObject(e,t):"function"==typeof e?"null":"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(e){return'"'+e.replace(charToReplace,function(e){var t=m[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(e){return'"'+e+'"'},encodeArrayPretty=function(e,t){var i,n=e.length,r=t+"   ",o=","+r,a=["[",r];for(i=0;i<n;i+=1)a.push(me.encodeValue(e[i],r),o);return a[a.length-1]=t+"]",a.join("")},encodeObjectPretty=function(e,t){var i,n,r=t+"   ",o=","+r,a=["{",r];for(i in e)if(n=e[i],!useHasOwn||e.hasOwnProperty(i)){if("function"==typeof n||void 0===n||n.isInstance)continue;a.push(me.encodeValue(i)+": "+me.encodeValue(n,r),o)}return a[a.length-1]=t+"}",a.join("")},encodeArray=function(e,t){if(t)return encodeArrayPretty(e,t);var i,n=["[",""],r=e.length;for(i=0;i<r;i+=1)n.push(me.encodeValue(e[i]),",");return n[n.length-1]="]",n.join("")},encodeObject=function(e,t){if(t)return encodeObjectPretty(e,t);var i,n,r=["{",""];for(i in e)if(n=e[i],!useHasOwn||e.hasOwnProperty(i)){if("function"==typeof n||void 0===n)continue;r.push(me.encodeValue(i),":",me.encodeValue(n),",")}return r[r.length-1]="}",r.join("")};me.encodeString=encodeString,me.encodeValue=doEncode,me.encodeDate=function(e){return'"'+e.getFullYear()+"-"+pad(e.getMonth()+1)+"-"+pad(e.getDate())+"T"+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds())+'"'},me.encode=function(e){return hasNative&&Ext.USE_NATIVE_JSON?JSON.stringify(e):me.encodeValue(e)},me.decode=function(t,i){try{return hasNative&&Ext.USE_NATIVE_JSON?JSON.parse(t):doDecode(t)}catch(e){if(i)return null;Ext.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+t})}},me.encodeMSDate=encodeMSDate,Ext.util||(Ext.util={}),Ext.util.JSON=me,Ext.encode=me.encode,Ext.decode=me.decode},Ext.define("Ext.mixin.Inheritable",{extend:"Ext.Mixin",mixinConfig:{id:"inheritable"},getInherited:function(e){var t,i,n,r,o=this,a=e&&o.inheritedStateInner||o.inheritedState,s=o.getRefOwner(),l=o.isContainer;return a&&!a.invalid||(t=o.getRefOwner(),r=o.ownerLayout,s&&(n=!r||r===s.layout),o.inheritedState=a=Ext.Object.chain(t?t.getInherited(n):Ext.rootInheritedState),l&&(o.inheritedStateInner=i=Ext.Object.chain(a)),o.initInheritedState(a,i),a=l&&e?o.inheritedStateInner:o.inheritedState),a},getInheritedConfig:function(e,t){var i,n,r=this.inheritedState;return r&&!r.invalid||(r=this.getInherited()),n=r[e],t&&r.hasOwnProperty(e)&&(i=n,delete r[e],n=r[e],r[e]=i),n},resolveListenerScope:function(e,t){var i,n="boolean"==typeof t,r=Ext._namedScopes[e];return r?r.isController?i=this.getInheritedConfig("controller",n?t:!r.isSelf):r.isOwner?i=this.getRefOwner():r.isSelf?i=this.getInheritedConfig("defaultListenerScope",n&&t)||this:r.isThis&&(i=this):i=this.getInheritedConfig("defaultListenerScope",!n||t)||e||this,i||null},resolveSatelliteListenerScope:function(e,t){var i,n=Ext._namedScopes[t];return n?n.isController?i=this.getInheritedConfig("controller"):n.isSelf?i=this.getInheritedConfig("defaultListenerScope")||e:n.isThis&&(i=e):i=this.getInheritedConfig("defaultListenerScope")||t||this,i||null},lookupNameHolder:function(e){return this.getInheritedConfig("nameHolder",!1!==e)||null},lookupReferenceHolder:function(e){return this.getInheritedConfig("referenceHolder",!1!==e)||null},getRefOwner:function(){return this.ownerCmp||this.ownerCt||this.parent||this.$initParent||this.floatParent},bubble:function(e,t,i){var n;for(n=this;n&&!1!==e.apply(t||n,i||[n]);n=n.getRefOwner());},isDescendantOf:function(e){return!!e&&e.isAncestor(this)},isAncestor:function(e){for(;e;){if(e.getRefOwner()===this)return!0;e=e.getRefOwner()}return!1},invalidateInheritedState:function(){var e=this.inheritedState;e&&(e.invalid=!0,delete this.inheritedState)},privates:{_fixReference:function(){var e;this.name&&this.nameable&&(e=this.lookupNameHolder())&&!e.destroyed&&e.attachNameRef(this),this.reference&&(e=this.lookupReferenceHolder())&&!e.destroyed&&e.attachReference(this)},onInheritedAdd:function(e,t){this.inheritedState&&t&&this.invalidateInheritedState(),Ext.ComponentManager.markReferencesDirty()},onInheritedRemove:function(e){Ext.ComponentManager.markReferencesDirty(),this.inheritedState&&!e&&this.invalidateInheritedState()}}},function(){Ext.rootInheritedState={}}),Ext.define("Ext.mixin.Bindable",{mixinId:"bindable",config:{bind:{$value:null,lazy:!0},controller:null,defaultListenerScope:!1,publishes:{$value:null,lazy:!0,merge:function(e,t){return this.mergeSets(e,t)}},session:{$value:null,lazy:!0},twoWayBindable:{$value:null,lazy:!0,merge:function(e,t){return this.mergeSets(e,t)}},viewModel:{$value:null,lazy:!0}},defaultBindProperty:null,nameable:!1,shareableName:!1,reference:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,getReference:function(){return this.reference},initInheritedState:function(e){var t=this,i=t.reference,n=t.getController(),r=t.getConfig("viewModel",!0),o=t.getConfig("session",!0),a=t.getDefaultListenerScope();n&&(e.controller=n),a?e.defaultListenerScope=t:n&&(e.defaultListenerScope=n),r&&(r.isViewModel||(r=t),e.viewModel=r),o&&(o.isSession||(o=t),e.session=o),i&&(t.referenceKey=(e.referencePath||"")+i,t.viewModelKey=(e.viewModelPath||"")+i)},isBound:function(e){var t=this.getBind();return!(!t||!t[e||this.defaultBindProperty])},lookupController:function(e){return this.getInheritedConfig("controller",e)||null},lookupSession:function(e){var t=e?null:this.getSession();return t||(t=this.getInheritedConfig("session",e))&&!t.isSession&&(t=t.getInherited().session=t.getSession()),t||null},lookupViewModel:function(e){var t=e?null:this.getViewModel();return t||(t=this.getInheritedConfig("viewModel",e))&&!t.isViewModel&&(t=t.getInherited().viewModel=t.getViewModel()),t||null},publishState:function(e,t){var i,n,r,o,a=this.publishedState,s=this.getBind(),l=s&&e&&s[e],d=0;if(0!==arguments.length&&2!==arguments.length&&Ext.raise("publishState must either be called with no args, or with both name AND value passed"),!l||l.syncing||l.isReadOnly()||(l.calls||null!=t&&t!==this.getInitialConfig()[e])&&l.setValue(t),(n=this.getPublishes())&&(r=this.lookupViewModel())&&(o=this.viewModelKey)){if(a=a||(this.publishedState={}),e){if(!n[e])return;if(!(t&&t.constructor===Object||t instanceof Array)&&a[e]===t)return;o+=".",o+=e}else{for(i in n)++d,a[i]=this.getConfig(i);if(!d)return;t=a}r.set(o,t)}},privates:{applyBind:function(e,t){if(!e)return t;var i,n,r,o,a=this,s=a.lookupViewModel(),l=a.getTwoWayBindable(),d=a._getBindTemplateScope;for(r in s||Ext.raise("Cannot use bind config without a viewModel"),"string"==typeof e&&(a.defaultBindProperty||Ext.raise(a.$className+" has no defaultBindProperty - Please specify a bind object"),i=e,(e={})[a.defaultBindProperty]=i),e)o=e[r],(i=t&&t[r])&&(i.destroy(),delete t[r]),o&&(!i&&l&&l[r]&&((n=n||{})[r]="_onConfigPropChange"),(i=s.bind(o,a.onBindNotify,a))._config=Ext.Config.get(r),i.getTemplateScope=d,a[i._config.names.set]||Ext.raise("Cannot bind "+r+" on "+a.$className+" - missing a "+i._config.names.set+" method."),(t=t||{})[r]=i);return n&&(n.scope=a).watchConfig(n),a.$bindings=t},applyController:function(e){return e&&(e=Ext.Factory.controller(e)).setView(this),this.controller=e},updatePublishes:function(e){var t,i;if(e&&this.lookupViewModel()){for(t in e)e[t]&&((i=i||{})[t]="_onConfigPropChange");i&&(i.scope=this).watchConfig(i)}return e},applySession:function(e){var t,i;return e?(e.isSession||(i=!0===e?{}:e,e=(t=this.lookupSession(!0))?t.spawn(i):new Ext.data.Session(i)),e):null},applyViewModel:function(e){var t;return e?(e.isViewModel||((t={parent:this.lookupViewModel(!0),view:this}).session=this.getSession(),t.parent||(t.session=this.lookupSession()),e&&(e.constructor===Object?Ext.apply(t,e):"string"==typeof e&&(t.type=e)),e=Ext.Factory.viewModel(t)),e):null},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var e=this.getConfig("viewModel",!0),t=this.getConfig("session",!0),i=this.getController();e&&e.isViewModel&&(e.destroy(),this.setViewModel(null)),t&&t.isSession&&(t.getAutoDestroy()&&t.destroy(),this.setSession(null)),i&&(this.setController(null),i.destroy())},initBindable:function(){var e=this.controller;this.initBindable=Ext.emptyFn,this.getBind(),this.getPublishes(),this.viewModel||this.getViewModel(),e&&e.initBindings(),this.reference&&this.publishState()},isSyncing:function(e){var t,i=this.getBind(),n=!1;return i&&(t=i[e])&&(n=0<t.syncing),n},notifyIf:function(e){var t=this.lookupViewModel(e);t&&t.notify()},onBindNotify:function(e,t,i){i.syncing=i.syncing+1||1,this[i._config.names.set](e),--i.syncing},_onConfigPropChange:function(e,t,i){e.publishState(t,i)},removeBindings:function(){var e,t,i=this.$bindings;if(i)for(t in i)(e=i[t])&&(e.destroy(),e._config=e.getTemplateScope=null,i[t]=null)},updateSession:function(e){var t=this.getInherited();e?t.session=e:delete t.session},updateViewModel:function(e,t){var i=this.getInherited(),n=this.getController();e?(this.hasVM=!0,(i.viewModel=e).setView(this),n&&n.initViewModel(e)):delete i.viewModel,this.viewModel=e}}}),Ext.define("Ext.mixin.ComponentDelegation",{extend:"Ext.Mixin",mixinConfig:{id:"componentDelegation"},privates:{addDelegatedListener:function(e,t,i,n,r,o,a){var s;e=Ext.canonicalEventName(e),(r=r||n.order)&&(n&&n.priority||((n=n?Ext.Object.chain(n):{}).priority=this.$orderToPriority[r])),n.target&&Ext.raise("Cannot add '"+e+"' listener to component: '"+this.id+"' - 'delegate' and 'target' event options are incompatible."),((s=this.$delegatedEvents||(this.$delegatedEvents={}))[e]||(s[e]=new Ext.util.Event(this,e))).addListener(t,i,n,o,a)&&this.$hasDelegatedListeners._incr_(e)},clearDelegatedListeners:function(){var e,t,i,n=this.$delegatedEvents;if(n)for(e in n)i=(t=n[e]).listeners.length,t.clearListeners(),this.$hasDelegatedListeners._decr_(e,i),delete n[e]},doFireDelegatedEvent:function(e,t){var i,n,r,o=!0;if(this.$hasDelegatedListeners[e])for(i=this.getRefOwner();i&&(!(n=i.$delegatedEvents)||!(r=n[e])||!1!==(o=r.fireDelegated(this,t)));)i=i.getRefOwner();return o},removeDelegatedListener:function(e,t,i){var n,r=this.$delegatedEvents;r&&(n=r[e])&&n.removeListener(t,i)&&(this.$hasDelegatedListeners._decr_(e),0===n.listeners.length&&delete r[e])},destroyComponentDelegation:function(){this.clearPropertiesOnDestroy&&(this.$delegatedEvents=null)}},onClassMixedIn:function(e){function t(){}e.prototype.HasListeners=e.HasListeners=t,t.prototype=e.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners}},function(e){function t(){}(e.HasDelegatedListeners=t).prototype=e.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners}),Ext.define("Ext.plugin.Abstract",{alternateClassName:"Ext.AbstractPlugin",mixins:["Ext.mixin.Identifiable"],isPlugin:!0,constructor:function(e){e&&(this.cmp=e.cmp,this.pluginConfig=e,this.initConfig(e))},init:Ext.emptyFn,destroy:function(){this.destroy=Ext.emptyFn,this.destroying=!0,this.cmp=this.pluginConfig=null,this.doDestroy(),this.callParent()},doDestroy:Ext.emptyFn,clonePlugin:function(e){return new this.self(Ext.apply({},e,this.pluginConfig))},getCmp:function(){return this.cmp},setCmp:function(e){this.cmp=e},getStatefulOwner:function(){return[this.cmp,"plugins"]},onClassExtended:function(e,t,i){var n=t.alias,r=e.prototype;n&&!t.ptype&&(Ext.isArray(n)&&(n=n[0]),r.ptype=n.split("plugin.")[1])},resolveListenerScope:function(e){var t,i=this.getCmp();return i&&(t=i.resolveSatelliteListenerScope(this,e)),t||this.mixins.observable.resolveListenerScope.call(this,e)},statics:{decode:function(e,t,i){if(e){var n,r,o,a,s=Ext.typeOf(e);if("string"===s)(o={})[t]=e,e=[o];else if(e.isInstance)e=[e];else if("object"===s)if(e[t])e=[e];else{for(r in o=i?Ext.merge(Ext.clone(i),e):e,e=[],o)(a=o[r])&&((n={id:r})[t]=r,Ext.apply(n,a),e.push(n));Ext.sortByWeight(e)}else"array"!==s?Ext.raise('Invalid value for "plugins" config ("'+s+'"'):e=e.slice()}return e}}}),Ext.define("Ext.overrides.plugin.Abstract",{override:"Ext.plugin.Abstract",$configStrict:!1,$configPrefixed:!1,disabled:!1,getState:null,applyState:null,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}}),Ext.define("Ext.mixin.Pluggable",function(i){return{requires:["Ext.plugin.Abstract"],mixinId:"pluggable",config:{plugins:null},addPlugin:function(e){var t=this.getPlugins();return t?((e=this.createPlugin(e)).init(this),t.push(e)):(this.setPlugins(e),e=this.getPlugins()[0]),e},destroyPlugin:function(e){return this.removePlugin(e,!0)},findPlugin:function(e){var t,i,n,r=this.getPlugins(),o=r&&r.length;for(t=0;t<o&&!n;t++)(i=r[t]).type!==e&&i.ptype!==e||(n=i);return n||null},getPlugin:function(e){var t,i,n,r=this.getPlugins(),o=r&&r.length;for(t=0;t<o&&!n;t++)(i=r[t]).id!==e&&i.pluginId!==e||(n=i);return n||null},removePlugin:function(e,t){for(var i,n=this.getPlugins(),r=n&&n.length||0;0<r--;){if((i=n[r])===e||i.id===e){n.splice(r,1),t?i.destroy&&i.destroy():i.detachCmp&&(i.detachCmp(),i.setCmp&&i.setCmp(null));break}i=null}return i},privates:{statics:{idSeed:0},activatePlugin:function(e){var t,i,n,r=this.initialConfig,o=r&&r.plugins,a=null;if(o)for(i=(i=this.config.plugins)&&"object"==typeof i?i:null,t=(o=Ext.plugin.Abstract.decode(o,"type",i)).length;0<t--;)if((n=o[t])===e||n.type===e){this.initialConfig=r=Ext.apply({},r),(r.plugins=o)[t]=a=this.createPlugin(n);break}return a},applyPlugins:function(e,t){var i,n,r,o=t&&t.length||0;for(e=e&&Ext.plugin.Abstract.decode(e,"type"),n=0;n<o;++n)t[n].$dead=!0;for(i=e&&e.length||0,n=0;n<i;++n)e[n]=this.createPlugin(e[n]);for(n=0;n<i;++n)(r=e[n]).$dead?delete r.$dead:r.init(this);for(n=0;n<o;++n)(r=t[n]).$dead&&(delete r.$dead,Ext.destroy(r));return e},createPlugin:function(e){var t;return"string"==typeof e&&(e={type:e}),(t=e).isInstance||(e.cmp=this,t=Ext.factory(e,null,null,"plugin"),delete e.cmp),t.id||(t.id=++i.idSeed),t.setCmp&&t.setCmp(this),t}}}}),Ext.define("Ext.mixin.Keyboard",function(c){return{extend:"Ext.Mixin",mixinConfig:{id:"keyboard"},config:{keyMap:{$value:null,cached:!0,merge:function(e,t,i,n){var r,o,a,s,l;if(null===e)return e;for(o in r=t&&!i.isInstance?Ext.Object.chain(t):{},e)"scope"!==o&&(a=o.toUpperCase(),n&&void 0!==r[a]||((s=e[o])&&(l=(s="string"==typeof s||"function"==typeof s?{handler:s}:Ext.apply({handler:s.fn},s)).scope||e.scope||"self",s.scope="controller"===l?"self.controller":l),r[a]=s));return r}},keyMapEnabled:null},keyMapTarget:"el",applyKeyMap:function(e,t){var i=this.hasOwnProperty("config");return i&&t&&t.$owner!==this&&(t=Ext.apply({},t)),e=e?c.combineKeyMaps(t,e,i&&this):null,this._keyMapReady&&this.setKeyMapListener(e&&this.getKeyMapEnabled()),e},initKeyMap:function(){var e=this.getKeyMapEnabled();this._keyMapReady=!0,null===e?this.setKeyMapEnabled(!0):this.setKeyMapListener(e&&this.getKeyMap())},disableKeyMapGroup:function(e){this.setKeyMapGroupEnabled(e,!1)},enableKeyMapGroup:function(e){this.setKeyMapGroupEnabled(e,!0)},setKeyMapGroupEnabled:function(e,t){(this.disabledKeyMapGroups||(this.disabledKeyMapGroups={}))[e]=!t},updateKeyMapEnabled:function(e){this.setKeyMapListener(e&&this._keyMapReady&&this.getKeyMap())},privates:{_keyMapListenCount:0,_keyMapReady:!1,comparePriorities:function(e,t){return(t.priority||0)-(e.priority||0)},findKeyMapEntries:function(e){var t,i,n,r=this.disabledKeyMapGroups,o=this.getKeyMap(),a=o&&c.getKeyName(e),s=[];if(a=a&&o[a])for(a.sorted||(Ext.Array.sort(a,this.comparePriorities),a.sorted=!0),i=a.length,n=0;n<i;n++)t=a[n],r&&r[t.group]||c.matchEntry(t,e)&&s.push(t);return s},onKeyMapEvent:function(e){var t,i,n,r=this.getKeyMapEnabled()?this.findKeyMapEntries(e):null,o=r&&r.length;for(this.lastKeyMapEvent=e,t=0;t<o&&!1!==n;t++)i=r[t],n=Ext.callback(i.handler,i.scope,[e,this],0,this);return n},setKeyMapListener:function(e){var t,i=this._keyMapListener;i&&(i.destroy(),i=null),e&&(++this._keyMapListenCount,e&&("function"==typeof(t=this[this.keyMapTarget])&&(t=t.call(this)),i=t.on({destroyable:!0,scope:this,keydown:"onKeyMapEvent",keypress:"onKeyMapEvent"}))),this._keyMapListener=i||null},statics:{_charCodeRe:/^#([\d]+)$/,_keySpecRe:/^(?:(?:(\*)[\+\-])|(?:([a-z\+\-]*)[\+\-]))?(?:([a-z0-9_]+|[\+\-]|(?:#?\d+))(?:\:([a-z]+))?)$/i,_delimiterRe:/-|\+/,_keyMapEvents:{charCode:"keypress",keyCode:"keydown"},combineKeyMaps:function(e,t,i){var n,r,o,a,s=t.scope||"controller";for(r in t)if("scope"!==r){if(o=t[r])o="string"==typeof o||"function"==typeof o?{handler:o,scope:s}:o&&Ext.apply({handler:o.fn,scope:s},o),e=e||{};else if(void 0===o&&Ext.raise('keyMap entry "'+r+'" is undefined'),!e)continue;c.parseEntry(r,n=o||{})?(a=e[n.name])?(i&&a.$owner!==i&&(e[n.name]=a=a.slice(),a.$owner=i),a.push(o),a.sorted=!1):((a=e[n.name]=[o]).$owner=i,a.sorted=!0):Ext.raise('Invalid keyMap key specification "'+r+'"')}return e&&i&&(e.$owner=i),e||null},getKeyName:function(e){var t;if(e.isEvent){if(t=e.keyCode||e.charCode,e=e.browserEvent,229===t&&"code"in e){if(Ext.String.startsWith(e.code,"Key"))return e.key.substr(3);if(Ext.String.startsWith(e.code,"Digit"))return e.key.substr(5)}}else t=e;return Ext.event.Event.keyCodes[t]||String.fromCharCode(t)},matchEntry:function(e,t){var i,n=t.browserEvent;if(t.type!==e.event)return!1;if(i=e.charCode){if(t.getCharCode()!==i)return!1}else if(e.keyCode!==t.keyCode||!e.ignoreModifiers&&!e.shiftKey!=!n.shiftKey)return!1;return e.ignoreModifiers||!e.ctrlKey==!n.ctrlKey&&!e.altKey==!n.altKey&&!e.metaKey==!n.metaKey&&!e.shiftKey==!n.shiftKey},parseEntry:function(e,t){e=e.toUpperCase();var i,n,r,o,a,s=Ext.event.Event,l=s.keyFlags,d=this._keySpecRe.exec(e),u="keyCode";if(d){if(i=d[3],d[4]&&(t.group=d[4]),!(t.ignoreModifiers=!!d[1])&&d[2])for(a=(d=d[2].split(this._delimiterRe)).length,r=0;r<a;r++){if(!l[d[r]])return!1;t[l[d[r]]]=!0}return t.name=i,isNaN(n=s[i])&&((o=this._charCodeRe.exec(i))?n=+o[1]:1===i.length&&(n=i.charCodeAt(0)),n?u="charCode":n=+i,t.name=c.getKeyName(n)),t.event=t.event||this._keyMapEvents[u],!isNaN(n)&&(t[u]=n)}}}}}}),Ext.define("Ext.mixin.Focusable",{mixinId:"focusable",$isFocusableEntity:!0,focusable:!1,hasFocus:!1,containsFocus:!1,focusCls:Ext.baseCSSPrefix+"focused",focusEl:"el",getFocusEl:function(){var e=this.focusEl;return e&&e.dom?e:null},getFocusClsEl:function(){return this.getFocusEl()},initFocusable:Ext.emptyFn,initFocusableEvents:function(e){this.initFocusableElement(e)},enableFocusable:Ext.emptyFn,disableFocusable:function(){this.hasFocus&&this.revertFocus(),this.removeFocusCls()},destroyFocusable:function(){Ext.destroy(this.focusListeners),this.focusListeners=this.focusEnterEvent=this.focusTask=null,this.focusEl=this.ariaEl=null},isFocusable:function(e){var t;return!!(this.focusable||this.isContainer&&e)&&(!(!(t=this.getFocusEl())||!this.canFocus())&&(t&&!t.destroyed&&t.isFocusable(e)))},isDestructing:function(){var e;for(e=this;e;e=e.getRefOwner())if(e.destroying||e.destroyed)return!0;return!1},canFocus:function(e,t){var i=this.ownerFocusableContainer,n=i&&i.allowFocusingDisabledChildren;return!this.destroyed&&this.rendered&&!this.isDestructing()&&(this.isContainer||this.focusable)&&(!this.isDisabled()||n)&&(e||this.isVisible(!0))||t&&!!this.findFocusTarget()},focus:function(e){var t,i,n=this;if(!n.focusable&&!n.isContainer||n.destroyed||n.destroying)return!1;if(!n.canFocus()||!(t=n.getFocusEl()))return!(!(t=n.findFocusTarget())||t===n)&&t.focus.apply(t,arguments);if(t.$isFocusableEntity)return t.focus.apply(t,arguments);if(i=t.dom)t.focus(),e&&(n.selectText||i.select)&&(n.selectText?Ext.isArray(e)?n.selectText.apply(n,e):n.selectText():i.select());else{if(!t.focus)return!1;t.focus()}return!0},onBlur:function(e){var t=this,i=t.ownerFocusableContainer;t.hasFocus=!1,t.beforeBlur&&!t.beforeBlur.$emptyFn&&t.beforeBlur(e),i&&i.beforeFocusableChildBlur(t,e),t.removeFocusCls(e),t.hasListeners.blur&&t.fireEvent("blur",t,e),t.postBlur&&!t.postBlur.$emptyFn&&t.postBlur(e),i&&i.afterFocusableChildBlur(t,e)},onFocus:function(e){var t=this,i=t.ownerFocusableContainer;t.canFocus()&&(t.beforeFocus&&!t.beforeFocus.$emptyFn&&t.beforeFocus(e),i&&i.beforeFocusableChildFocus(t,e),t.addFocusCls(e),t.hasFocus||(t.hasFocus=!0,t.fireEvent("focus",t,e)),t.postFocus&&!t.postFocus.$emptyFn&&t.postFocus(e),i&&i.afterFocusableChildFocus(t,e))},getTabIndex:function(){var e,t;if(this.focusable){if(e=this.getFocusEl())if(e.$isFocusableEntity)t=e.getTabIndex();else{if(!e.isElement||!e.dom)return;null!==(t=e.dom.getAttribute("tabIndex"))&&(t-=0)}return"number"!=typeof t&&(t=this.tabIndex),t}},setTabIndex:function(e,t){var i,n=this,r=n.ownerFocusableContainer,o=r&&r.allowFocusingDisabledChildren,a=n.focusable;(a||n.forceTabIndex||null==e)&&(n.tabIndex=e,n.destroying||n.destroyed||n.isDisabled()&&!o||(n.focusable=!0,i=t||n.getFocusEl(),n.focusable=a,i&&(i.$isFocusableEntity?i.setTabIndex(e):i.isElement&&i.dom&&i.setTabIndex(e))))},onFocusEnter:function(e){this.destroying||this.destroyed||(this.focusEnterEvent=e,this.containsFocus=!0,this.hasListeners.focusenter&&this.fireEvent("focusenter",this,e))},onFocusLeave:function(e){this.destroying||this.destroyed||(this.focusEnterEvent=null,this.containsFocus=!1,this.hasListeners.focusleave&&this.fireEvent("focusleave",this,e))},onFocusMove:Ext.emptyFn,privates:{forceTabIndex:!1,revertFocus:function(){var e,t,i=this.focusEnterEvent,n=Ext.Element.getActiveElement();i&&!this.preventRefocus&&this.el.contains(n)&&((e=(t=i.fromComponent)&&(t.destroyed||t.isDestructing())?document.body:i.relatedTarget)===document.body&&(t=this.findFocusTarget())&&(e=t.getFocusEl()),e&&e.$isFocusableEntity?!e.destroyed&&e.isFocusable()&&e.focus():Ext.getDoc().contains(e)&&Ext.fly(e).isFocusable()?(t=Ext.Component.from(e))?t.revertFocusTo(e):e.focus():i.fromComponent&&i.fromComponent.focus&&(i.fromComponent.focus()||n.blur()))},revertFocusTo:function(e){e.focus()},findFocusTarget:function(){var e,t,i,n,r,o;if(this.preventRefocus)return null;for(e=[],t=this.getRefOwner();t;t=t.getRefOwner())t.isDisabled()||e.unshift(t);for(n=0,i=e.length;n<i;n++)if((t=e[n]).destroying||!t.isVisible()){e.length=n;break}for(n=e.length-1;0<=n;n--){if(t=e[n],(r=Ext.ComponentQuery.query(":canfocus()",t)).length)return r[(o=Ext.Array.indexOf(r,Ext.ComponentManager.getActiveComponent()))+1]||r[o-1]||r[0];if(t.isFocusable&&t.isFocusable())return t}},initFocusableElement:function(e){var t=this.getTabIndex(),i=this.getFocusEl();i&&!i.$isFocusableEntity&&(null!=t&&(e||this.canFocus(!0))&&this.setTabIndex(t,i),i.dom.hasAttribute("data-componentid")||i.dom.setAttribute("data-componentid",this.id))},addFocusCls:function(e){var t,i=this.focusCls;t=this.getFocusClsEl(),i&&(t=this.getFocusClsEl(e))&&t.addCls(i)},removeFocusCls:function(e){var t,i=this.focusCls;i&&(t=this.getFocusClsEl(e))&&t.removeCls(i)},handleFocusEvent:function(e){var t;!this.focusable||this.destroying||this.destroyed||this.isFocusing(e)&&((t=new Ext.event.Event(e.event)).type="focus",t.relatedTarget=e.fromElement,t.target=e.toElement,this.onFocus(t))},handleBlurEvent:function(e){var t;!this.focusable||this.destroying||this.destroyed||e.toElement!==document.body&&!this.isBlurring(e)||((t=new Ext.event.Event(e.event)).type="blur",t.target=e.fromElement,t.relatedTarget=e.toElement,this.onBlur(t))},isFocusing:function(e){var t=this.getFocusEl();return!!t&&(t.isFocusing?t.isFocusing(e):t.dom===document.activeElement&&e.toElement===t.dom&&e.fromElement!==e.toElement)},isBlurring:function(e){var t=this.getFocusEl();return!!t&&(t.isFocusing?t.isBlurring(e):t.dom!==document.activeElement&&e.fromElement===t.dom&&e.fromElement!==e.toElement)},blur:function(){var e;this.focusable&&this.canFocus()&&(e=this.getFocusEl())&&(this.blurring=!0,e.blur(),delete this.blurring)},isTabbable:function(){var e;return!!(this.focusable&&(e=this.getFocusEl())&&e.isTabbable())&&e.isTabbable()},disableTabbing:function(){var e,t=this.el;this.destroying||this.destroyed||(t&&t.saveTabbableState(),(e=this.getFocusEl())&&(e.$isFocusableEntity?e.disableTabbing():e.isElement&&t&&!t.contains(e)&&e.saveTabbableState()))},enableTabbing:function(e){var t,i=this.el;this.destroying||this.destroyed||((t=this.getFocusEl())&&(t.$isFocusableEntity?t.enableTabbing():t.isElement&&i&&!i.contains(t)&&t.restoreTabbableState()),i&&i.restoreTabbableState({reset:e}))}}},function(){var t=Ext.baseCSSPrefix+"keyboard-mode",i=!1;function n(){i!==Ext.getBody().hasCls(t)&&Ext.setKeyboardMode(i)}Ext.enableKeyboardMode=Ext.isModern||!Ext.os.is.Desktop,Ext.setKeyboardMode=Ext.setKeyboardMode||function(e){Ext.keyboardMode=e,Ext.getBody().toggleCls(t,e)},Ext.isTouchMode=function(){return Ext.now()-Ext.lastTouchTime<500},Ext.syncKeyboardMode=function(e){var t;Ext.enableKeyboardMode&&("pointermove"===(t=e.type)?i=!1:(i="keydown"===t,Ext.lastTouchTime="touch"===e.pointerType&&Ext.now(),Ext.setKeyboardMode(i)))},Ext.getEnableKeyboardMode=function(){return Ext.enableKeyboardMode},Ext.setEnableKeyboardMode=function(e){var t={pointerdown:Ext.syncKeyboardMode,pointermove:Ext.syncKeyboardMode,keydown:Ext.syncKeyboardMode,capture:!0,delegated:!1};Ext.enableKeyboardMode=!!e,Ext.enableKeyboardMode?(Ext.getWin().on(t),Ext.on("focus",n)):(Ext.getWin().un(t),Ext.un("focus",n))},Ext.onReady(function(){Ext.enableKeyboardMode||Ext.getBody().addCls(t),Ext.setEnableKeyboardMode(Ext.enableKeyboardMode)})}),Ext.define("Ext.mixin.Accessible",{extend:"Ext.Mixin",mixinConfig:{id:"accessible"},config:{ariaAttributes:{$value:null,lazy:!0}},ariaEl:"el",privates:{getAriaLabelEl:function(e){var t,i,n,r,o=[];if(e){if(Ext.isFunction(e))return e.call(this);if(Ext.isArray(e)||(e=[e]),t=this.lookupReferenceHolder())for(i=0,n=e.length;i<n;i++)(r=t.lookupReference(e[i]))&&o.push(r.ariaEl.id)}return o.length?o.join(" "):null}}}),Ext.define("Ext.Widget",{extend:"Ext.Evented",xtype:"widget",alternateClassName:"Ext.Gadget",requires:["Ext.dom.Element"],mixins:["Ext.mixin.Inheritable","Ext.mixin.Bindable","Ext.mixin.ComponentDelegation","Ext.mixin.Pluggable","Ext.mixin.Keyboard","Ext.mixin.Factoryable","Ext.mixin.Focusable","Ext.mixin.Accessible"],isWidget:!0,factoryConfig:{creator:null,defaultProperty:"xtype",defaultType:"component",typeProperty:"xtype"},element:{reference:"element"},observableType:"component",cachedConfig:{cls:null,margin:null,style:null,border:null,touchAction:null,eventHandlers:{focus:"handleFocusEvent",blur:"handleBlurEvent"}},name:null,config:{renderTo:null,ui:null,userCls:null,ripple:null,hideMode:null,instanceCls:null},eventedConfig:{width:null,height:null,hidden:null,disabled:null},template:[],baseCls:null,classCls:null,classClsRoot:!0,classClsList:[],clearPropertiesOnDestroy:"async",focusEl:"element",ariaEl:"element",spaceRe:/\s+/,noBorderCls:Ext.baseCSSPrefix+"noborder-trbl",borderedCls:Ext.baseCSSPrefix+"bordered",disabledCls:Ext.baseCSSPrefix+"disabled",heightedCls:Ext.baseCSSPrefix+"heighted",widthedCls:Ext.baseCSSPrefix+"widthed",constructor:function(e){var t,i=this,n=i.baseCls,r=e&&e.renderTo;i.$iid=++Ext.$nextIid,null!=n&&!0!==n||(i.baseCls=i.classCls||Ext.baseCSSPrefix+i.xtype),e&&"baseCls"in e&&Ext.raise("baseCls cannot be used as an instance config. It must be specified at class definition time."),(e&&e.controller||i.config.controller)&&(i.referenceHolder=!0),i.initId(e),i.initElement(),r&&delete(e=Ext.apply({},e)).renderTo,i.mixins.observable.constructor.call(i,e),i.focusable&&i.initFocusableEvents(!0),i.syncUiCls(),Ext.ComponentManager.register(i),(t=i.getController())&&t.init(i),r&&i.setRenderTo(r)},afterCachedConfig:function(){var e,t,i,n,r=this.self.prototype,o=this.referenceList,a=this.renderElement;for(r.renderTemplate=e=document.createDocumentFragment(),e.appendChild(a.clone(!0,!0)),t=0,i=(n=e.querySelectorAll("[id]")).length;t<i;t++)n[t].removeAttribute("id");for(t=0,i=o.length;t<i;t++)this[o[t]].dom.removeAttribute("reference")},applyHidden:function(e){return!!e},applyDisabled:function(e){return!!e},updateDisabled:function(e){var t=this,i=t.ownerFocusableContainer;i&&(e?i.beforeFocusableChildDisable.$nullFn||i.beforeFocusableChildDisable(t):i.beforeFocusableChildEnable.$nullFn||i.beforeFocusableChildEnable(t)),t.element.toggleCls(t.disabledCls,e),t.focusable&&(e?t.disableFocusable():t.enableFocusable()),i&&(e?i.onFocusableChildDisable.$nullFn||i.onFocusableChildDisable(t):i.onFocusableChildEnable.$nullFn||i.onFocusableChildEnable(t))},disable:function(){this.setDisabled(!0)},enable:function(){this.setDisabled(!1)},isDisabled:function(){return this.getDisabled()},isEnabled:function(){return!this.getDisabled()},applyTouchAction:function(e,t){return null!=t&&(e=Ext.merge({},t,e)),e},applyWidth:function(e){return this.filterLengthValue(e)},applyHeight:function(e){return this.filterLengthValue(e)},updateBorder:function(e){e=e||null===e,this.toggleCls(this.noBorderCls,!e),this.toggleCls(this.borderedCls,!!e)},clearListeners:function(){this.mixins.observable.clearListeners.call(this),this.mixins.componentDelegation.clearDelegatedListeners.call(this)},destroy:function(){this.isDestroying=this.destroying=!0,this.destroy=Ext.emptyFn,this.doDestroy(),this.clearListeners(),this.mixins.componentDelegation.destroyComponentDelegation.call(this),this.callParent()},doDestroy:function(){var e,t,i,n=this.referenceList,r=this.ownerFocusableContainer;for(this.ownerCmp=null,r&&!r.onFocusableChildDestroy.$nullFn&&r.onFocusableChildDestroy(this),e=0,t=n.length;e<t;e++)i=n[e],this.hasOwnProperty(i)&&(this[i].destroy(),this[i]=null);this.destroyBindable(),Ext.ComponentManager.unregister(this)},doFireEvent:function(e,t,i){var n,r;return!1===(r=this.mixins.observable.doFireEvent.call(this,e,t,i))||this.destroyed||(n=this.events[e])&&n.suspended||(r=this.mixins.componentDelegation.doFireDelegatedEvent.call(this,e,t)),r},getBubbleTarget:function(){return this.getRefOwner()},getElementConfig:function(){var e=this.element;return"children"in e||(e=Ext.apply({children:this.getTemplate()},e)),e},getSize:function(){return this.el.getSize()},getTemplate:function(){return Ext.clone(this.template)},getClassCls:function(){for(var e,t,i,n,r=this.self.prototype,o=r;o;){if(t=o.hasOwnProperty("classCls")?o.classCls:null)if(t instanceof Array)for(i=0,n=t.length;i<n;i++)(e=e||[]).push(t[i]);else(e=e||[]).push(t);if(o.classClsRoot&&o.hasOwnProperty("classClsRoot"))break;o=o.superclass}return e&&(r.classClsList=e),e},hide:function(){this.setHidden(!0)},initElement:function(){var e,t,i,n,r,o,a,s,l,d,u,c,h=this,f=h.self.prototype,g=h.getId(),p=h.referenceList=h.referenceList=[],m=!f.hasOwnProperty("renderTemplate"),x=f.hasOwnProperty("uiReferences")?f.uiReferences:f.uiReferences={element:""};if(m)for(e=document.createDocumentFragment(),i=h.processElementConfig.call(f),t=Ext.Element.create(i,!0),e.appendChild(t),o=0,a=(r=e.querySelectorAll("[uiCls]")).length;o<a;o++)l=(s=r[o]).getAttribute("reference"),u=s.getAttribute("uiCls"),l||Ext.raise('Cannot render element with uiCls="'+u+'". uiCls is only allowed on elements that have a reference name.'),x[l]=u,s.removeAttribute("uiCls");else t=(e=h.renderTemplate.cloneNode(!0)).firstChild;for(o=0,a=(r=e.querySelectorAll("[reference]")).length;o<a;o++)l=(s=r[o]).getAttribute("reference"),m||s.removeAttribute("reference"),"element"===l?(n&&Ext.raise("Duplicate 'element' reference detected in '"+h.$className+"' template."),s.id=g,(n=h.el=h.addElementReference(l,s)).dom.setAttribute("data-componentid",g),m&&((d=h.getClassCls())&&n.addCls(d),(c=h.baseCls)&&c!==h.classCls&&n.addCls(c))):(u=x[l])&&m?(h.addElementReference(l,s),h.initUiReference(l,u,!1)):h.addElementReferenceOnDemand(l,s),l===h.focusEl&&h.addElementReference("focusEl",s),l===h.ariaEl&&h.addElementReferenceOnDemand("ariaEl",s),p.push(l);n||Ext.raise("No 'element' reference found in '"+h.$className+"' template."),t===n.dom?h.renderElement=n:h.addElementReferenceOnDemand("renderElement",t),t.setAttribute(h.dataXid,h.$iid)},dataXid:"data-"+Ext.baseCSSPrefix.substr(0,Ext.baseCSSPrefix.length-1)+"id",is:function(e){return Ext.ComponentQuery.is(this,e)},isHidden:function(e){var t,i=!!this.getHidden();if(!i&&e)for(t=this.getRefOwner();t&&t!==e&&!i;)i=!!t.getHidden(),t=t.getRefOwner();return i},isVisible:function(e){return this.rendered&&!this.destroyed&&!this.isHidden(e)},isXType:function(e,t){return t?-1!==Ext.Array.indexOf(this.xtypes,e):!!this.xtypesMap[e]},lookupTpl:function(e){return Ext.XTemplate.getTpl(this,e)},owns:function(e){var t,i=!1;return e.isEvent?e=e.target:e.isElement&&(e=e.dom),(t=Ext.Component.from(e))&&(i=t===this||!!t.up(this)),i},render:function(e,t){e&&e.isWidget&&(e=e.el);var i,n=this.renderElement.dom,r=Ext.getDom(e);Ext.isNumber(i)&&(t=r.childNodes[t]),i=Ext.getDom(t),r&&(i?r.insertBefore(n,i):r.appendChild(n),this.setRendered(Ext.getBody().contains(n),!0))},toggleCls:function(e,t){return this.element.toggleCls(e,t),this},resolveListenerScope:function(e,t){return this.mixins.inheritable.resolveListenerScope.call(this,e,t)},setSize:function(e,t){if(e&&"object"==typeof e)return this.setSize(e.width,e.height);void 0!==e&&this.setWidth(e),void 0!==t&&this.setHeight(t)},show:function(){this.setHidden(!1)},addCls:function(e,t,i){this.destroyed||this.el.replaceCls(null,e,t,i)},applyCls:function(e){return e&&Ext.dom.Element.splitCls(e)},applyUi:function(e){return this.parseUi(e,!0)},removeCls:function(e,t,i){this.destroyed||this.el.replaceCls(e,null,t,i)},replaceCls:function(e,t,i,n){this.destroyed||this.el.replaceCls(e,t,i,n)},hasCls:function(e){return this.el.hasCls(e)},updateCls:function(e,t){this.element.replaceCls(t,e)},updateHidden:function(e){var t=this,i=t.renderElement,n=t.ownerFocusableContainer;n?e?n.beforeFocusableChildHide.$nullFn||n.beforeFocusableChildHide(t):n.beforeFocusableChildShow.$nullFn||n.beforeFocusableChildShow(t):e&&t.revertFocus(),i&&!i.destroyed&&(e?i.hide():i.show()),t.focusableContainer&&t.activateFocusableContainer&&t.activateFocusableContainer(!e),n&&(e?n.onFocusableChildHide.$nullFn||n.onFocusableChildHide(t):n.onFocusableChildShow.$nullFn||n.onFocusableChildShow(t))},updateMargin:function(e){this.element.setMargin(e)},updateRipple:function(e){var t=this.el;t&&(t.un("touchstart","onRippleStart",this),t.un("touchend","onRippleStart",this),t.destroyAllRipples(),e.release?t.on("touchend","onRippleStart",this):t.on("touchstart","onRippleStart",this))},shouldRipple:function(e){var t,i=this.getDisabled&&this.getDisabled(),n=this.el,r=!i&&this.getRipple();return r&&e&&(t=e.getTarget(this.noRippleSelector))&&(n.dom!==t&&!n.contains(t)||(r=null)),r},onRippleStart:function(e){var t=this.shouldRipple(e);0===e.button&&t&&this.el.ripple(e,t)},applyStyle:function(e,t){return t&&e===t&&Ext.isObject(t)&&(e=Ext.apply({},e)),this.element.applyStyles(e),null},getStyle:function(){Ext.Error.raise("'style' is a write-only config. To query element styles use the Ext.dom.Element API.")},updateRenderTo:function(e){this.render(e)},updateTouchAction:function(e){var t,i,n,r;for(t in e)i=this[t],n=e[t],i&&i.isElement?i.setTouchAction(n):r=!0;r&&this.el.setTouchAction(e)},updateUi:function(){this.isConfiguring||this.syncUiCls()},updateWidth:function(e){var t=this.el;t.setWidth(e),t.toggleCls(this.widthedCls,null!=e&&"auto"!==e)},updateHeight:function(e){var t=this.el;t.setHeight(e),t.toggleCls(this.heightedCls,null!=e&&"auto"!==e)},isWidthed:function(){var e=this.getWidth();return null!=e&&"auto"!==e},isHeighted:function(){var e=this.getHeight();return null!=e&&"auto"!==e},up:function(e,t){var i=this.getRefOwner(),n="string"==typeof t,r="number"==typeof t,o=t&&t.isComponent,a=0;if(e)for(;i;i=i.getRefOwner()){if(i.destroyed)return null;if(a++,e.isComponent||e.isWidget){if(i===e)return i}else if(Ext.ComponentQuery.is(i,e))return i;if(n&&i.is(t))return;if(r&&a===t)return;if(o&&i===t)return}return i},updateLayout:Ext.emptyFn,updateInstanceCls:function(e,t){var i,n,r,o,a,s,l=this.el,d=this.classClsList,u=Ext.Array,c=this.uiReferences;if(t)for(l.removeCls(t),r=0,o=(t=u.from(t)).length;r<o;r++)for(i in a=t[r],u.remove(d,a),c)n=this[i],s=c[i],n.removeCls(a+"-"+s);if(e)for(l.addCls(e),e=u.from(e),this.classClsList=d.concat(e),r=0,o=e.length;r<o;r++)for(i in a=e[r],c)n=this[i],s=c[i],n.addCls(a+"-"+s);this.isConfiguring||this.syncUiCls()},getBaseCls:function(){return this.baseCls},setBaseCls:function(){Ext.raise("baseCls cannot be reconfigured. It must be specified at class definition time.")},onClassExtended:function(e,t){t.config&&t.config.baseCls&&Ext.raise("baseCls must be declared directly on the class body. Please move it outside of the config block.")},privates:{_hideModes:{clip:"CLIP",display:"DISPLAY",offsets:"OFFSETS",opacity:"OPACITY",visibility:"VISIBILITY"},noRippleSelector:"."+Ext.baseCSSPrefix+"no-ripple",addElementReferenceOnDemand:function(e,t){this._elementListeners[e]?this.addElementReference(e,t):Ext.Object.defineProperty(this,e,{get:function(){return this.destroyed?null:(delete this[e],this.addElementReference(e,t))},configurable:!0})},addElementReference:function(e,t){var i,n,r=this[e]=Ext.get(t),o=this._elementListeners[e];if(r.skipGarbageCollection=!0,r.component=this,o){for(i in o=Ext.clone(o))"object"==typeof(n=o[i])&&(n.scope=this);o.scope=this,r.on(o)}return r},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element,!0),this.isDetached=!0},reattachToBody:function(){this.isDetached&&Ext.getDetachedBody().contains(this.element)&&Ext.getBody().appendChild(this.element,!0),this.isDetached=!1},doAddListener:function(e,t,i,n,r,o,a){var s,l,d,u=n&&n.element,c=n&&n.delegate;if(u){for(d in-1===Ext.Array.indexOf(this.referenceList,u)&&Ext.Logger.error("Adding event listener with an invalid element reference of '"+u+"' for this component. Available values are: '"+this.referenceList.join("', '")+"'",this),(s={})[e]=t,i&&(s.scope=i),l=Ext.Element.prototype.$eventOptions,n)l[d]&&(s[d]=n[d]);this.mon(this[u],s)}else c?this.mixins.componentDelegation.addDelegatedListener.call(this,e,t,i,n,r,o,a):this.callParent([e,t,i,n,r,o,a])},doRemoveListener:function(e,t,i){this.mixins.observable.doRemoveListener.call(this,e,t,i),this.mixins.componentDelegation.removeDelegatedListener.call(this,e,t,i)},filterLengthValue:function(e){return e||0===e?e:null},hasHiddenContent:function(){return this.getHidden()},initElementListeners:function(e){var t,i,n,r,o,a=this.self.superclass._elementListeners,s=e.reference,l=e.children;if(t=this.hasOwnProperty("_elementListeners")?this._elementListeners:this._elementListeners=a?Ext.Object.chain(a):{},s&&(i=e.listeners)&&(a&&(n=a[s])&&(i=Ext.Object.chain(n),Ext.apply(i,e.listeners)),t[s]=i,e.listeners=null),l)for(o=0,r=l.length;o<r;o++)this.initElementListeners(l[o])},initId:function(e){var t=this.config,i=e&&e.id||t&&t.id;i?(this.setId(i),this.id=i):this.getId()},measure:function(e){return this.element.measure(e)},processElementConfig:function(){var e,t=this.self.superclass;return this.hasOwnProperty("_elementConfig")?e=this._elementConfig:(e=this._elementConfig=this.getElementConfig(),t.isWidget&&this.processElementConfig.call(t),this.initElementListeners(e)),e},parseUi:function(e,t){return e=Ext.String.splitWords(e),t&&(e=e.join(" ")),e},addUi:function(e){this.setUi(this.doAddUi(e,this.getUi()))},doAddUi:function(e,t){var i,n,r,o=null;if(e){for(r=(e=this.parseUi(e)).length,t=this.parseUi(t),i=0;i<r;i++)n=e[i],-1===Ext.Array.indexOf(t,n)&&t.push(n);o=t.join(" ")}return o},removeUi:function(e){this.setUi(this.doRemoveUi(e,this.getUi()))},doRemoveUi:function(e,t){var i,n,r,o,a=null;if(e){for(o=(e=this.parseUi(e)).length,t=this.parseUi(t),i=0;i<o;i++)n=e[i],-1!==(r=Ext.Array.indexOf(t,n))&&t.splice(r,1);a=t.join(" ")}return a},initUiReference:function(e,t,i){var n,r,o=this,a=o[e],s=o.baseCls,l=o.classClsList,d=[];if((i=!1!==i)&&(o.hasOwnProperty("uiReferences")||(o.uiReferences=Ext.clone(o.uiReferences)),o.uiReferences[e]=t),t="-"+t,s&&s!==o.classCls&&d.push(s+t),l)for(n=0,r=l.length;n<r;n++)d.push(l[n]+t);a.addCls(d),i&&!o.isConfiguring&&o.syncUiCls()},syncUiCls:function(e){var t,i,n,r,o,a,s,l,d,u=this.getUi(),c=this.currentUiCls||(this.currentUiCls={}),h=this.baseCls,f=e||this.uiReferences,g=this.classClsList,p=g?g.length:0;for(n in u&&(i=(u=this.parseUi(u)).length),f)if(t=[],(r=this[n])&&((o=c[n])&&r.removeCls(o),u)){for(a=(a=f[n])?"-"+a:"",l=0;l<i;l++)if(s="-"+u[l]+a,h&&h!==this.classCls&&t.push(h+s),g)for(d=0;d<p;d++)t.push(g[d]+s);r.addCls(t),c[n]=t}},applyHideMode:function(e){return e||"display"},updateHideMode:function(e){var t=this.el,i=this.getHidden();this._hideModes[e]||Ext.raise('Invalid hideMode: "'+e+'" (must be one of: "'+Object.keys(this._hideModes).join('", "')+'")'),i&&t.show(),this.renderElement.setVisibilityMode(Ext.Element[this._hideModes[e]]),i&&t.hide()},updateUserCls:function(e,t){this.element.replaceCls(t,e)}}},function(e){var t=e.prototype;(t.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1,(t.$eventOptions=Ext.Object.chain(t.$eventOptions)).delegate=1,Ext.updateWidget=Ext.Factory.widget.update}),Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",uses:["Ext.Component","Ext.layout.component.Auto"],$configStrict:!1,isComponent:!0,liquidLayout:!0,rendered:!0,rendering:!0,config:{renderTo:null},constructor:function(e){var t;this.callParent([e]),this.getComponentLayout(),(t=this.getRenderTo())&&this.render(t)},addClsWithUI:function(e){this.el.addCls(e)},afterComponentLayout:Ext.emptyFn,updateLayout:function(){var e=this.getRefOwner();e&&e.updateLayout()},destroy:function(){var e=this.ownerCt;e&&e.remove&&e.remove(this,!1),this.callParent()},finishRender:function(){this.rendering=!1,this.initBindable(),this.initKeyMap()},getAnimationProps:function(){return{}},getComponentLayout:function(){var e=this.componentLayout;return e||(e=this.componentLayout=new Ext.layout.component.Auto).setOwner(this),e},getEl:function(){return this.element},getTdCls:function(){return Ext.baseCSSPrefix+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(e,t,i){this.ownerCt=e,this.onInheritedAdd(this,i),this.isDetached=!1},onRemoved:function(e){this.onInheritedRemove(e),this.ownerCt=this.ownerLayout=null},parseBox:function(e){return Ext.Element.parseBox(e)},removeClsWithUI:function(e){this.el.removeCls(e)},render:function(e,t){var i,n=this.element,r=Ext.Component.prototype;this.ownerCt&&!this.floating||(Ext.scopeCss&&n.addCls(r.rootCls),n.addCls(r.borderBoxCls)),t&&(i=e.childNodes[t])?Ext.fly(e).insertBefore(n,i):(Ext.fly(e).appendChild(n),this.finishRender())},setPosition:function(e,t){this.el.setLocalXY(e,t)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},isLayoutChild:function(e){var t=this.ownerCt;return!!t&&(t===e||t.isLayoutChild(e))},privates:{doAddListener:function(e,t,i,n,r,o,a){"painted"!==e&&"resize"!==e||this.element.doAddListener(e,t,i||this,n,r),this.callParent([e,t,i,n,r,o,a])},doRemoveListener:function(e,t,i){"painted"!==e&&"resize"!==e||this.element.doRemoveListener(e,t,i),this.callParent([e,t,i])}}},function(e){var t=e.prototype;Ext.isIE9m&&(t.addElementReferenceOnDemand=t.addElementReference)}),Ext.define("Ext.mixin.Responsive",function(l){return{extend:"Ext.Mixin",mixinConfig:{id:"responsive",after:{destroy:"destroy"}},config:{responsiveConfig:{$value:void 0,merge:function(e,t,i,n){var r,o,a,s;if(!e)return t;for(s in a=t?Ext.Object.chain(t):{},r=l.context,e)n&&s in a||((o=e[s]).fn!==r&&(o={fn:r,config:o}),a[s]=o);return a}},responsiveFormulas:{$value:null,merge:function(e,t,i,n){return this.mergeNew(e,t,i,n)}}},destroy:function(){l.unregister(this)},privates:{statics:{active:!1,all:{},_configNames:["responsiveConfig","responsiveFormulas"],context:Ext.Object.chain(Ext.platformTags),count:0,nextId:0,activate:function(){l.active=!0,l.updateContext(),Ext.on("resize",l.onResize,l)},deactivate:function(){l.active=!1,Ext.un("resize",l.onResize,l)},notify:function(){var e,t=l.all,i=l.context,n=l.timer;for(e in n&&(l.timer=Ext.unasap(n)),l.updateContext(),Ext.suspendLayouts(),Ext.fireEvent("beforeresponsiveupdate",i),t)t[e].setupResponsiveContext();for(e in Ext.fireEvent("beginresponsiveupdate",i),t)t[e].updateResponsiveState();Ext.fireEvent("responsiveupdate",i),Ext.resumeLayouts(!0)},onResize:function(){l.timer||(l.timer=Ext.asap(l.onTimer))},onTimer:function(){l.timer=null,l.notify()},register:function(e){var t=e.$responsiveId;t||(e.$responsiveId=t=++l.nextId,l.all[t]=e,1==++l.count&&l.activate())},unregister:function(e){var t=e.$responsiveId;t in l.all&&(e.$responsiveId=null,delete l.all[t],0==--l.count&&l.deactivate())},updateContext:function(){var e=Ext.Element,t=e.getViewportWidth(),i=e.getViewportHeight(),n=l.context;n.width=t,n.height=i,n.tall=t<i,n.wide=!n.tall,n.landscape=n.portrait=!1,n.platform||(n.platform=Ext.platformTags),n[Ext.dom.Element.getOrientation()]=!0}},afterClassMixedIn:function(e){var t,i=e.prototype,n=i.responsiveConfig,r=i.responsiveFormulas;(n||r)&&(t={},n&&(delete i.responsiveConfig,t.responsiveConfig=n),r&&(delete i.responsiveFormulas,t.responsiveFormulas=r),e.getConfigurator().add(t)),e.addConfigTransform("transformResponsiveConfig",10)},applyResponsiveConfig:function(e){var t;for(t in e)e[t].fn=Ext.createRuleFn(t);return e},applyResponsiveFormulas:function(e){var t,i,n;if(e)for(i in n={},e)Ext.isString(t=e[i])&&(t=Ext.createRuleFn(t)),n[i]=t;return n},getResponsiveState:function(){var e,t,i,n=l.context,r=this.getResponsiveConfig();if(r)for(i in t={},r)(e=r[i]).fn.call(this,n)&&Ext.merge(t,e.config);return t},setupResponsiveContext:function(){var e,t=this.getResponsiveFormulas(),i=l.context;if(t)for(e in t)i[e]=t[e].call(this,i)},transformResponsiveConfig:function(e,t){var i,n=e;return t.hoistConfigs(this,e,l._configNames)&&(l.register(this),this.setupResponsiveContext(),(i=this.getResponsiveState())&&(delete(n=Ext.merge({},e,i)).responsiveConfig,delete n.responsiveFormulas)),n},updateResponsiveState:function(){var e=this.getResponsiveState();this.setConfig(e)}}}}),Ext.define("Ext.ResponsiveWidget",{override:"Ext.Widget",mixins:["Ext.mixin.Responsive"]}),Ext.define("Ext.ProgressBase",{mixinId:"progressbase",config:{value:0,textTpl:null},applyTextTpl:function(e){return e.isTemplate||(e=new Ext.XTemplate(e)),e},applyValue:function(e){return e||0}}),Ext.define("Ext.Progress",{extend:"Ext.Gadget",xtype:["progress","progressbarwidget"],alternateClassName:"Ext.ProgressBarWidget",mixins:["Ext.ProgressBase"],config:{text:null,animate:!1},cachedConfig:{textCls:Ext.baseCSSPrefix+"progress-text",cls:null},baseCls:Ext.baseCSSPrefix+"progress",template:[{reference:"backgroundEl"},{reference:"barEl",cls:Ext.baseCSSPrefix+"progress-bar",children:[{reference:"textEl"}]}],defaultBindProperty:"value",updateCls:function(e,t){var i=this.element;t&&i.removeCls(t),e&&i.addCls(e)},updateUi:function(e,t){var i=this.element,n=this.barEl,r=this.baseCls+"-";this.callParent([e,t]),t&&(i.removeCls(r+t),n.removeCls(r+"bar-"+t)),i.addCls(r+e),n.addCls(r+"bar-"+e)},updateTextCls:function(e){this.backgroundEl.addCls(e+" "+e+"-back"),this.textEl.addCls(e)},updateValue:function(e,t){var i=this.getTextTpl();i&&this.setText(i.apply({value:e,percent:Math.round(100*e)})),!this.isConfiguring&&this.getAnimate()?(this.stopBarAnimation(),this.startBarAnimation(Ext.apply({from:{width:100*t+"%"},to:{width:100*e+"%"}},this.animate))):this.barEl.setStyle("width",100*e+"%")},updateText:function(e){this.backgroundEl.setHtml(e),this.textEl.setHtml(e)},doDestroy:function(){this.stopBarAnimation(),this.callParent()},privates:{startBarAnimation:Ext.privateFn,stopBarAnimation:Ext.privateFn}}),Ext.define("Ext.overrides.Progress",{override:"Ext.Progress",config:{ui:"default"},updateWidth:function(e,t){this.callParent([e,t]),e-=this.element.getBorderWidth("lr"),this.backgroundEl.setWidth(e),this.textEl.setWidth(e)},privates:{startBarAnimation:function(e){this.barEl.animate(e)},stopBarAnimation:function(){this.barEl.stopAnimation()}}}),Ext.define("Ext.util.Format",function(){var f,i;return{requires:["Ext.Error","Ext.Number","Ext.String","Ext.Date"],singleton:!0,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",currencySpacer:"",percentSign:"%",currencyAtEnd:!1,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,.#]+/,formatCleanRe:/[^\d.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){f=this},nbsp:function(e,t){return((t=!1!==t)?""!==e&&null!=e:e)||(e=" "),e},undef:function(e){return void 0!==e?e:""},defaultValue:function(e,t){return void 0!==e&&""!==e?e:t},substr:"b"!=="ab".substr(-1)?function(e,t,i){var n=String(e);return t<0?n.substr(Math.max(n.length+t,0),i):n.substr(t,i)}:function(e,t,i){return String(e).substr(t,i)},lowercase:function(e){return String(e).toLowerCase()},uppercase:function(e){return String(e).toUpperCase()},usMoney:function(e){return f.currency(e,"$",2)},currency:function(e,t,i,n,r){var o="",a=",0",s=0;for((e=+e)<0&&(e=-e,o="-"),a+=0<(i=Ext.isDefined(i)?i:f.currencyPrecision)?".":"";s<i;s++)a+="0";return e=f.number(e,a),null==r&&(r=f.currencySpacer),!0===(n||f.currencyAtEnd)?Ext.String.format("{0}{1}{2}{3}",o,e,r,t||f.currencySign):Ext.String.format("{0}{1}{2}{3}",o,t||f.currencySign,r,e)},date:function(e,t){return e?(Ext.isDate(e)||(e=new Date(Date.parse(e))),Ext.Date.dateFormat(e,t||Ext.Date.defaultFormat)):""},dateRenderer:function(t){return function(e){return f.date(e,t)}},hex:function(e,t){var i=parseInt(e||0,10).toString(16);if(t)for(t<0&&(t=-t,i.length>t&&(i=i.substring(i.length-t)));i.length<t;)i="0"+i;return i},or:function(e,t){return e||t},pick:function(e,t,i){var n;return Ext.isNumber(e)&&(n=arguments[e+1])?n:e?i:t},lessThanElse:function(e,t,i,n,r){var o=Ext.Number.from(e,0),a=Ext.Number.from(t,0),s=!Ext.isDefined(r);return o<a?i:a<o||s?n:r},sign:function(e,t,i,n){return void 0===n&&(n=i),f.lessThanElse(e,0,t,i,n)},stripTags:function(e){return e?String(e).replace(f.stripTagsRe,""):e},stripScripts:function(e){return e?String(e).replace(f.stripScriptsRe,""):e},fileSize:function(e){return e<1024?1===e?"1 byte":e+" bytes":e<1048576?Math.round(10*e/1024)/10+" KB":e<1073741824?Math.round(10*e/1048576)/10+" MB":Math.round(10*e/1073741824)/10+" GB"},math:(i={},function(e,t){return i[t]||(i[t]=Ext.functionFactory("v","return v "+t+";")),i[t](e)}),round:function(e,t){var i=Number(e);return"number"==typeof t?(t=Math.pow(10,t),i=Math.round(e*t)/t):void 0===t&&(i=Math.round(i)),i},number:function(e,t){var i;if(!t)return e;if(isNaN(e))return"";if(!(i=f.formatFns[t])){var n,r,o,a,s,l=t,d=f.thousandSeparator,u=f.decimalSeparator,c=0,h="";r="/i"===t.substr(t.length-2)?(f.I18NFormatCleanRe&&f.lastDecimalSeparator===u||(f.I18NFormatCleanRe=new RegExp("[^\\d\\"+u+"#]","g"),f.lastDecimalSeparator=u),n=-1!==(t=t.substr(0,t.length-2)).indexOf(d),t.replace(f.I18NFormatCleanRe,"").split(u)):(n=-1!==t.indexOf(","),t.replace(f.formatCleanRe,"").split(".")),o=t.replace(f.formatPattern,""),2<r.length?Ext.raise({sourceClass:"Ext.util.Format",sourceMethod:"number",value:e,formatString:t,msg:"Invalid number format, should have no more than 1 decimal"}):2===r.length&&(c=r[1].length,(a=r[1].match(f.hashRe))&&(h='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+a[0].length+'}$")')),s=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(n?",thousandSeparator,thousands=[],j,n,i":"")+(o?',formatString="'+t+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+c+");",h,";"],n?(c&&(s[s.length]='parts=fnum.split(".");',s[s.length]="fnum=parts[0];"),s[s.length]="if(absVal>=1000) {",s[s.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}",c&&(s[s.length]="fnum += utilFormat.decimalSeparator+parts[1];")):c&&(s[s.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'),s[s.length]='if(neg&&fnum!=="'+(c?"0."+Ext.String.repeat("0",c):"0")+'") { fnum="-"+fnum; }',a&&(s[s.length]='fnum=fnum.replace(trailingZeroes,"");'),s[s.length]="return ",s[s.length]=o?"formatString.replace(formatPattern, fnum);":"fnum;",s[s.length]="};",i=f.formatFns[l]=Ext.functionFactory("Ext",s.join(""))(Ext)}return i(e)},numberRenderer:function(t){return function(e){return f.number(e,t)}},percent:function(e,t){return f.number(100*e,t||"0")+f.percentSign},repeat:function(e,t,i){return Ext.String.repeat(t,e,i)},attributes:function(e){var t,i;if("object"==typeof e){for(i in t=[],e)e.hasOwnProperty(i)&&t.push(i,'="',"style"===i?Ext.DomHelper.generateStyles(e[i],null,!0):Ext.htmlEncode(e[i]),'" ');e=t.join("")}return e||""},plural:function(e,t,i){return e+" "+(1===e?t:i||t+"s")},nl2br:function(e){return Ext.isEmpty(e)?"":e.replace(f.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(e){if("number"==typeof(e=e||0))return{top:e,right:e,bottom:e,left:e};var t=e.split(" "),i=t.length;return 1===i?t[1]=t[2]=t[3]=t[0]:2===i?(t[2]=t[0],t[3]=t[1]):3===i&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0}},resource:function(e,t){return t=t||"",Ext.resolveResource(t+e)},uri:function(e){return encodeURI(e)},uriCmp:function(e){return encodeURIComponent(e)},wordBreakRe:/[\W\s]+/,word:function(e,t,i){var n=i?"string"==typeof i?new RegExp(i):i:f.wordBreakRe;return(e||"").split(n)[t||0]||""}}}),Ext.define("Ext.Template",{requires:["Ext.util.Format"],inheritableStatics:{from:function(e,t){return new this((e=Ext.getDom(e)).value||e.innerHTML,t||"")}},useEval:Ext.isGecko,constructor:function(e){var t,i,n=arguments,r=[],o=n.length;if(this.initialConfig={},1===o&&Ext.isArray(e)&&(o=(n=e).length),1<o)for(t=0;t<o;t++)"object"==typeof(i=n[t])?(Ext.apply(this.initialConfig,i),Ext.apply(this,i)):r.push(i);else r.push(e);this.html=r.join("")},isTemplate:!0,disableFormats:!1,tokenRe:/\{(?:(?:(\d+)|([a-z_$][\w\-$]*))(?::([a-z_.]+)(?:\(([^)]*?)?\))?)?)\}/gi,apply:function(e){return this.compiled?(this.fn||this.compile(),this.fn(e).join("")):this.evaluate(e)},evaluate:function(o){var a=!this.disableFormats,s=Ext.util.Format,l=this;return this.html.replace(this.tokenRe,function(e,t,i,n,r){return null!=i&&""!==i||(i=t),n&&a?(r=r?[o[i]].concat(Ext.functionFactory("return ["+r+"];")()):[o[i]],"this."===n.substr(0,5)?l[n.substr(5)].apply(l,r):s[n]?s[n].apply(s,r):e):void 0!==o[i]?o[i]:""})},applyOut:function(e,t){return this.compiled?(this.fn||this.compile(),t.push.apply(t,this.fn(e))):t.push(this.apply(e)),t},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(e,t){return this.html=e,this.compiled=!!t,this.fn=null,this},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var e,t=this;return e=t.html.replace(t.compileARe,"\\\\").replace(t.compileBRe,"\\n").replace(t.compileCRe,"\\'").replace(t.tokenRe,t.regexReplaceFn.bind(t)),e=(!0!==this.disableFormats?"var fm=Ext.util.Format;":"")+(t.useEval?"$=":"return")+" function(v){return ['"+e+"'];};",t.fn=t.useEval?t.evalCompiled(e):new Function("Ext",e)(Ext),t.compiled=!0,t},evalCompiled:function($){return eval($),$},regexReplaceFn:function(e,t,i,n,r){if(null==t||""===t?t='"'+i+'"':this.stringFormat&&(t=parseInt(t)+1),n&&!0!==this.disableFormats){if(r=r?","+r:"","this."===n.substr(0,5))n+="(";else{if(!Ext.util.Format[n])return e;n="fm."+n+"("}return"',"+n+"v["+t+"]"+r+"),'"}return"',v["+t+"] == undefined ? '' : v["+t+"],'"},insertFirst:function(e,t,i){return this.doInsert("afterBegin",e,t,i)},insertBefore:function(e,t,i){return this.doInsert("beforeBegin",e,t,i)},insertAfter:function(e,t,i){return this.doInsert("afterEnd",e,t,i)},append:function(e,t,i){return this.doInsert("beforeEnd",e,t,i)},doInsert:function(e,t,i,n){var r=Ext.DomHelper.insertHtml(e,Ext.getDom(t),this.apply(i));return n?Ext.get(r):r},overwrite:function(e,t,i){var n=Ext.DomHelper.overwrite(Ext.getDom(e),this.apply(t));return i?Ext.get(n):n}},function(i){var n=/\{\d+\}/,r={useFormat:!1,compiled:!0,stringFormat:!0},o={};Ext.String.format=Ext.util.Format.format=function(e){var t;return(o[e]||(o[e]=(t=e,n.test(t)?(t=new i(t,r),function(){return t.apply(arguments)}):function(){return t}))).apply(this,arguments)},Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}}),Ext.define("Ext.util.XTemplateParser",{requires:["Ext.String"],constructor:function(e){Ext.apply(this,e)},doTpl:Ext.emptyFn,parse:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g=this,p=e.length,m={elseif:"elif"},x=g.topRe,y=g.actionsRe;for(g.level=0,g.stack=i=[],t=0;t<p;t=u){if(x.lastIndex=t,!(r=x.exec(e))){g.doText(e.substring(t,p));break}if(d=r.index,u=x.lastIndex,t<d&&(n=e.substring(t,d),f&&""===Ext.String.trim(n)||g.doText(n)),f=!1,r[1])u=e.indexOf("%}",d+2),g.doEval(e.substring(d+2,u)),u+=2;else if(r[2])u=e.indexOf("]}",d+2),g.doExpr(e.substring(d+2,u)),u+=2;else if(r[3])g.doTag(r[3]);else if(r[4]){for(c=null;null!==(l=y.exec(r[4]));)(n=l[2]||l[3])&&(n=Ext.String.htmlDecode(n),"string"==typeof(a=(c=c||{})[o=m[o=l[1]]||o])?c[o]=[a,n]:a?c[o].push(n):c[o]=n);c?c.if?(g.doIf(c.if,c),i.push({type:"if"})):c.switch?(g.doSwitch(c.switch,c),i.push({type:"switch"}),f=!0):c.case?g.doCase(c.case,c):c.elif?g.doElseIf(c.elif,c):c.for?(++g.level,(h=g.propRe.exec(r[4]))&&(c.propName=h[1]||h[2]),g.doFor(c.for,c),i.push({type:"for",actions:c})):c.foreach?(++g.level,(h=g.propRe.exec(r[4]))&&(c.propName=h[1]||h[2]),g.doForEach(c.foreach,c),i.push({type:"foreach",actions:c})):c.exec&&(g.doExec(c.exec,c),i.push({type:"exec",actions:c})):g.elseRe.test(r[4])?g.doElse():g.defaultRe.test(r[4])?g.doDefault():(g.doTpl(),i.push({type:"tpl"}))}else 5===r[0].length?i.push({type:"tpl"}):(s=i.pop(),g.doEnd(s.type,s.actions),"for"!==s.type&&"foreach"!==s.type||--g.level)}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/}),Ext.define("Ext.util.XTemplateCompiler",{extend:"Ext.util.XTemplateParser",useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:!0,propNameRe:/^[\w\d$]*$/,compile:function(e){var t=this.generate(e);return this.useEval?this.evalTpl(t):new Function("Ext",t)(Ext)},generate:function(e){var t,i=this,n="var fm=Ext.util.Format,ts=Object.prototype.toString;";return i.maxLevel=0,i.body=["var c0=values, a0="+i.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"],i.definitions?"string"==typeof i.definitions?i.definitions=[i.definitions,n]:i.definitions.push(n):i.definitions=[n],i.switches=[],i.parse(e),i.definitions.push((i.useEval?"$=":"return")+" function ("+i.fnArgs+") {",i.body.join(""),"}"),t=i.definitions.join("\n"),i.definitions.length=i.body.length=i.switches.length=0,i.definitions=i.body=i.switches=0,t},doText:function(e){var t=this.body;e=e.replace(this.aposRe,"\\'").replace(this.newLineRe,"\\n"),this.useIndex?t.push("out[out.length]='",e,"'\n"):t.push("out.push('",e,"')\n")},doExpr:function(e){var t=this.body;t.push("if ((v="+e+") != null) out"),this.useIndex?t.push("[out.length]=v\n"):t.push(".push(v)\n")},doTag:function(e){var t=this.parseTag(e);t?this.doExpr(t):this.doText("{"+e+"}")},doElse:function(){this.body.push("} else {\n")},doEval:function(e){this.body.push(e,"\n")},doIf:function(e,t){"."===e?this.body.push("if (values) {\n"):this.propNameRe.test(e)?this.body.push("if (",this.parseTag(e),") {\n"):this.body.push("if (",this.addFn(e),this.callFn,") {\n"),t.exec&&this.doExec(t.exec)},doElseIf:function(e,t){"."===e?this.body.push("else if (values) {\n"):this.propNameRe.test(e)?this.body.push("} else if (",this.parseTag(e),") {\n"):this.body.push("} else if (",this.addFn(e),this.callFn,") {\n"),t.exec&&this.doExec(t.exec)},doSwitch:function(e){var t;"."===e||"#"===e?(t="."===e?"values":"xindex",this.body.push("switch (",t,") {\n")):this.propNameRe.test(e)?this.body.push("switch (",this.parseTag(e),") {\n"):this.body.push("switch (",this.addFn(e),this.callFn,") {\n"),this.switches.push(0)},doCase:function(e){var t,i,n=Ext.isArray(e)?e:[e],r=this.switches.length-1;for(this.switches[r]?this.body.push("break;\n"):this.switches[r]++,i=0,r=n.length;i<r;++i)t=this.intRe.exec(n[i]),n[i]=t?t[1]:"'"+n[i].replace(this.aposRe,"\\'")+"'";this.body.push("case ",n.join(": case "),":\n")},doDefault:function(){var e=this.switches.length-1;this.switches[e]?this.body.push("break;\n"):this.switches[e]++,this.body.push("default:\n")},doEnd:function(e,t){var i=this.level-1;"for"===e||"foreach"===e?(t.exec&&this.doExec(t.exec),this.body.push("}\n"),this.body.push("parent=p",i,";values=r",1+i,";xcount=n"+i+";xindex=i",i,"+1;xkey=k",i,";\n")):"if"!==e&&"switch"!==e||this.body.push("}\n")},doFor:function(e,t){var i,n,r=this,o=r.level,a=o-1;i="."===e?"values":r.propNameRe.test(e)?r.parseTag(e):r.addFn(e)+r.callFn,r.maxLevel<o&&(r.maxLevel=o,r.body.push("var ")),n="."===e?"c"+o:"a"+a+"?c"+a+"[i"+a+"]:c"+a,r.body.push("i",o,"=0,n",o,"=0,c",o,"=",i,",a",o,"=",r.createArrayTest(o),",r",o,"=values,p",o,",k",o,";\n","p",o,"=parent=",n,"\n","if (c",o,"){if(a",o,"){n",o,"=c",o,".length;}else if (c",o,".isMixedCollection){c",o,"=c",o,".items;n",o,"=c",o,".length;}else if(c",o,".isStore){c",o,"=c",o,".data.items;n",o,"=c",o,".length;}else{c",o,"=[c",o,"];n",o,"=1;}}\n","for (xcount=n",o,";i",o,"<n"+o+";++i",o,"){\n","values=c",o,"[i",o,"]"),t.propName&&r.body.push(".",t.propName),r.body.push("\n","xindex=i",o,"+1\n"),t.between&&r.body.push('if(xindex>1){ out.push("',t.between,'"); } \n')},doForEach:function(e,t){var i,n,r=this,o=r.level,a=o-1;i="."===e?"values":r.propNameRe.test(e)?r.parseTag(e):r.addFn(e)+r.callFn,r.maxLevel<o&&(r.maxLevel=o,r.body.push("var ")),n="."===e?"c"+o:"a"+a+"?c"+a+"[i"+a+"]:c"+a,r.body.push("i",o,"=-1,n",o,"=0,c",o,"=",i,",a",o,"=",r.createArrayTest(o),",r",o,"=values,p",o,",k",o,";\n","p",o,"=parent=",n,"\n","for(k",o," in c",o,"){\n","xindex=++i",o,"+1;\n","xkey=k",o,";\n","values=c",o,"[k",o,"];"),t.propName&&r.body.push(".",t.propName),t.between&&r.body.push('if(xindex>1){ out.push("',t.between,'"); } \n')},createArrayTest:"isArray"in Array?function(e){return"Array.isArray(c"+e+")"}:function(e){return"ts.call(c"+e+')==="[object Array]"'},doExec:function(e,t){var i="f"+this.definitions.length,n=this.guards[this.strict?0:1];this.definitions.push("function "+i+"("+this.fnArgs+") {",n.doTry," var $v = values; with($v) {","  "+e," }",n.doCatch,"}"),this.body.push(i+this.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:' } catch(e) {\nExt.log.warn("XTemplate evaluation exception: " + e.message);\n}'}],addFn:function(e){var t="f"+this.definitions.length,i=this.guards[this.strict?0:1];return"."===e?this.definitions.push("function "+t+"("+this.fnArgs+") {"," return values","}"):".."===e?this.definitions.push("function "+t+"("+this.fnArgs+") {"," return parent","}"):this.definitions.push("function "+t+"("+this.fnArgs+") {",i.doTry," var $v = values; with($v) {","  return("+e+")"," }",i.doCatch,"}"),t},parseTag:function(e){var t,i,n,r,o,a=this.tagRe.exec(e);return a?(t=a[1],i=a[2],n=a[3],r=a[4],o="."===t?(this.validTypes||(this.definitions.push("var validTypes={string:1,number:1,boolean:1};"),this.validTypes=!0),'validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'):"#"===t?"xindex":"$"===t?"xkey":"parent."===t.substr(0,7)?t:isNaN(t)&&-1===t.indexOf("-")&&-1!==t.indexOf(".")?"values."+t:"values['"+t+"']",r&&(o="("+o+r+")"),i&&this.useFormat?(n=n?","+n:"","this."!==i.substr(0,5)?i="fm."+i+"(":i+="(",i+o+n+")"):o):null},evalTpl:function($){return eval($),$},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},function(){var e=this.prototype;e.fnArgs="out,values,parent,xindex,xcount,xkey",e.callFn=".call(this,"+e.fnArgs+")"}),Ext.define("Ext.XTemplate",{extend:"Ext.Template",requires:["Ext.util.XTemplateCompiler"],isXTemplate:!0,emptyObj:{},fn:null,strict:!1,apply:function(e,t,i,n){var r=this.applyOut(e,[],t,i,n);return 1===r.length?r[0]:r.join("")},applyOut:function(e,t,i,n,r){var o,a=this;if(a.fn||(o=new Ext.util.XTemplateCompiler({useFormat:!0!==a.disableFormats,definitions:a.definitions,strict:a.strict}),a.fn=o.compile(a.html)),n=n||1,r=r||1,a.strict)a.fn(t,e,i||a.emptyObj,n,r);else try{a.fn(t,e,i||a.emptyObj,n,r)}catch(e){Ext.log.warn("XTemplate evaluation exception: "+e.message)}return t},compile:function(){return this},statics:{get:function(e,t,i){var n=e;return null==e?t&&i&&(n=this.getTpl(t,i)):!e&&""!==e||e.isTemplate||(n=new this(e)),n},getTpl:function(e,t){var i,n=e[t];if(n&&(n.isTemplate||(n=Ext.XTemplate.get(n)),!n.owner)){if(e.hasOwnProperty(t))i=e;else for(i=e.self.prototype;i&&!i.hasOwnProperty(t);i=i.superclass);(i[t]=n).owner=i}return n||null}}}),Ext.define("Ext.app.EventDomain",{requires:["Ext.util.Event"],statics:{instances:{}},isEventDomain:!0,isInstance:!1,constructor:function(){this.isInstance||(Ext.app.EventDomain.instances[this.type]=this),this.bus={},this.monitoredClasses=[]},dispatch:function(e,t,i){t=Ext.canonicalEventName(t);var n,r,o,a,s,l,d,u,c=this.bus[t];if(!c)return!0;for(n in c)if(c.hasOwnProperty(n)&&this.match(e,n,this.controller))for(o in r=c[n])if(r.hasOwnProperty(o)&&(a=r[o]).controller.isActive())for(l=(s=a.list).length,d=0;d<l;d++)if(!1===(u=s[d]).fire.apply(u,i))return!1;return!0},listen:function(e,t){var i,n,r,o,a,s,l,d,u,c,h=this.bus,f=this.idProperty,g=this.monitoredClasses,p=g.length,m=t.getId(),x="component"===this.type,y=x?t.getRefMap():null;for(r in e)if(d=e[r],x&&(r=y[r]||r),d)for(u in f&&(/^[*#]/.test(r)||Ext.raise("Selectors containing id should begin with #"),r="*"===r?r:r.substring(1)),d){for(o=null,a=d[u],s=t,u=Ext.canonicalEventName(u),l=new Ext.util.Event(t,u),Ext.isObject(a)&&(a=(o=a).fn,s=o.scope||t,delete o.fn,delete o.scope),o&&o.scope||"string"!=typeof a?"string"==typeof a&&(a=s[a]):(s[a]||Ext.raise('Cannot resolve "'+a+'" on controller.'),s=null),l.addListener(a,s,o),i=0;i<p;++i)(c=g[i].hasListeners)&&c._incr_(u);((n=(n=h[u]||(h[u]={}))[r]||(n[r]={}))[m]||(n[m]={controller:t,list:[]})).list.push(l)}},match:function(e,t){var i=this.idProperty;return!!i&&("*"===t||e[i]===t)},monitor:function(e){var n=this,t=e.isInstance?e:e.prototype,r=t.doFireEvent;n.monitoredClasses.push(e),t.doFireEvent=function(e,t){var i;return!1===(i=r.apply(this,arguments))||this.destroyed||this.isSuspended(e)||(i=n.dispatch(this,e,t)),i}},unlisten:function(e){var t,i,n,r,o,a,s,l,d,u,c,h=this.bus,f=e,g=this.monitoredClasses,p=g.length;for(i in e.isController&&(f=e.getId()),h)if(i=Ext.canonicalEventName(i),h.hasOwnProperty(i)&&(s=h[i]))for(a in s)if((u=(t=s[a])[f])&&(n=u.list)){for(l=0,r=n.length;l<r;++l)for((o=n[l]).clearListeners(),d=0;d<p;++d)(c=g[d].hasListeners)&&c._decr_(o.name);delete t[f]}},destroy:function(){this.monitoredClasses=this.bus=null,this.callParent()}}),Ext.define("Ext.app.domain.Component",{extend:"Ext.app.EventDomain",singleton:!0,requires:["Ext.Widget"],type:"component",constructor:function(){this.callParent(),this.monitor(Ext.Widget)},dispatch:function(e,t,i){for(var n,r,o=e.lookupController(!1);o;){if((n=o.compDomain)&&!1===n.dispatch(e,t,i))return!1;o=(r=o.getView())?r.lookupController(!0):null}return this.callParent([e,t,i])},match:function(e,t){return e.is(t)}}),Ext.define("Ext.util.ProtoElement",function(){var d=Ext.String.splitWords,u=Ext.Array.toMap;return{isProtoEl:!0,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:!1,constructor:function(e){var t,i,n=this;e&&(Ext.apply(n,e),t=n.cls,i=n.style,delete n.cls),n.classList=t?d(t):[],n.classMap=t?u(n.classList):{},i&&("string"==typeof i?n.style=Ext.Element.parseStyles(i):Ext.isFunction(i)?(n.styleFn=i,delete n.style):n.style=Ext.apply({},i))},flush:function(){this.flushClassList=[],this.removedClasses={},delete this.style,delete this.unselectableAttr},addCls:function(e){if(!e)return this;for(var t,i="string"==typeof e?d(e):e,n=i.length,r=this.classList,o=this.classMap,a=this.flushClassList,s=0;s<n;++s)o[t=i[s]]||(o[t]=!0,r.push(t),a&&(a.push(t),delete this.removedClasses[t]));return this},hasCls:function(e){return e in this.classMap},removeCls:function(e){var t,i,n=this.classList,r=this.classList=[],o=u(d(e)),a=n.length,s=this.classMap,l=this.removedClasses;for(t=0;t<a;++t)o[i=n[t]]?(l&&s[i]&&(l[i]=!0,Ext.Array.remove(this.flushClassList,i)),delete s[i]):r.push(i);return this},setStyle:function(e,t){var i=this.style||(this.style={});return"string"==typeof e?1===arguments.length?this.setStyle(Ext.Element.parseStyles(e)):i[e]=t:Ext.apply(i,e),this},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls),Ext.isOpera&&(this.unselectableAttr=!0)},writeTo:function(e){var t,i=this,n=i.flushClassList||i.classList,r=i.removedClasses;return i.styleFn?(t=Ext.apply({},i.styleFn()),Ext.apply(t,i.style)):t=i.style,e[i.clsProp]=n.join(" "),t&&(e[i.styleProp]=i.styleIsText?Ext.DomHelper.generateStyles(t,null,!0):t),r&&(r=Ext.Object.getKeys(r)).length&&(e[i.removedProp]=r.join(" ")),i.unselectableAttr&&(e.unselectable="on"),e}}}),Ext.define("Ext.dom.CompositeElement",{alternateClassName:"Ext.CompositeElement",extend:"Ext.dom.CompositeElementLite",isLite:!1,getElement:function(e){return e},transformElement:function(e){return Ext.get(e)}}),Ext.define("Ext.plugin.Manager",{singleton:!0,alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],typeName:"ptype",create:function(e,t,i){var n,r;return(n=e.init?e:(i?(e=Ext.apply({},e)).cmp=i:i=e.cmp,e.xclass?Ext.create(e):(r="plugin."+(e.ptype||t),Ext.ClassManager.instantiateByAlias(r,e))))&&i&&n.setCmp&&!n.setCmpCalled&&(n.setCmp(i),n.setCmpCalled=!0),n}}),Ext.define("Ext.util.CSS",function(){function a(e,t){return t.charAt(1).toUpperCase()}var s,l=null,o=document,d=/(-[a-z])/gi;return{singleton:!0,rules:l,initialized:!1,constructor:function(){s=this},createStyleSheet:function(e,t){var i,n=o.getElementsByTagName("head")[0],r=o.createElement("style");return r.setAttribute("type","text/css"),t&&r.setAttribute("id",t),(i=r.styleSheet)?(n.appendChild(r),i.cssText=e):(r.appendChild(o.createTextNode(e)),n.appendChild(r),i=r.sheet),s.cacheStyleSheet(i),i},removeStyleSheet:function(e){var t="string"==typeof e?o.getElementById(e):e.ownerNode;t&&t.parentNode.removeChild(t)},swapStyleSheet:function(e,t){var i;s.removeStyleSheet(e),(i=o.createElement("link")).setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("id",e),i.setAttribute("href",t),o.getElementsByTagName("head")[0].appendChild(i)},cacheStyleSheet:function(e){l=l||(s.rules={});try{var t,i,n=e.cssRules||e.rules,r=n.length-1,o=e.imports,a=o?o.length:0;for(i=0;i<a;++i)s.cacheStyleSheet(o[i]);for(;0<=r;--r)(t=n[r]).styleSheet&&s.cacheStyleSheet(t.styleSheet),s.cacheRule(t,e)}catch(e){}},cacheRule:function(e,t){var i,n,r;if(e.styleSheet)return s.cacheStyleSheet(e.styleSheet);if(i=e.selectorText)for(n=(i=i.split(",")).length,r=0;r<n;r++)l[Ext.String.trim(i[r]).toLowerCase()]={parentStyleSheet:t,cssRule:e}},getRules:function(e){var t,i={};for(t in null!==l&&!e||s.refreshCache(),l)i[t]=l[t].cssRule;return i},refreshCache:function(){var e=o.styleSheets,t=0,i=e.length;for(l=s.rules={};t<i;t++)try{e[t].disabled||s.cacheStyleSheet(e[t])}catch(e){}},getRule:function(e,t,i){var n,r;if(l&&!t||s.refreshCache(),!Ext.isArray(e))return(r=l[e.toLowerCase()])&&!i&&(r=r.cssRule),r||null;for(n=0;n<e.length;n++)if(l[e[n]])return i?l[e[n].toLowerCase()]:l[e[n].toLowerCase()].cssRule;return null},createRule:function(e,t,i){var n,r=e.cssRules||e.rules,o=r.length;return e.insertRule?e.insertRule(t+" {"+i+"}",o):e.addRule(t,i||" "),s.cacheRule(n=r[o],e),n},updateRule:function(e,t,i){var n,r,o;if(Ext.isArray(e)){for(r=0;r<e.length;r++)if(s.updateRule(e[r],t,i))return!0}else if(n=s.getRule(e)){if(2===arguments.length)for(t in o=Ext.Element.parseStyles(t))n.style[t.replace(d,a)]=o[t];else n.style[t.replace(d,a)]=i;return!0}return!1},deleteRule:function(e){var t,i,n=s.getRule(e,!1,!0);n&&(t=n.parentStyleSheet,i=Ext.Array.indexOf(t.cssRules||t.rules,n.cssRule),t.deleteRule?t.deleteRule(i):t.removeRule(i),delete l[e])}}}),Ext.define("Ext.fx.easing.Abstract",{config:{startTime:0,startValue:0},isEasing:!0,isEnded:!1,constructor:function(e){return this.initConfig(e),this},applyStartTime:function(e){return e=e||Ext.Date.now()},updateStartTime:function(e){this.reset()},reset:function(){this.isEnded=!1},getValue:Ext.emptyFn}),Ext.define("Ext.fx.easing.Linear",{extend:"Ext.fx.easing.Abstract",alias:"easing.linear",config:{duration:0,endValue:0},updateStartValue:function(e){this.distance=this.getEndValue()-e},updateEndValue:function(e){this.distance=e-this.getStartValue()},getValue:function(){var e=Ext.Date.now()-this.getStartTime(),t=this.getDuration();return t<e?(this.isEnded=!0,this.getEndValue()):this.getStartValue()+e/t*this.distance}}),Ext.define("Ext.util.translatable.Abstract",{extend:"Ext.Evented",mixins:["Ext.mixin.Factoryable"],factoryConfig:{type:"translatable",defaultType:"csstransform"},requires:["Ext.fx.easing.Linear"],config:{easing:null,easingX:{duration:300},easingY:{duration:300},offsetX:0,offsetY:0},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:!1,isTranslatable:!0,constructor:function(e){this.callParent([e]),this.position={x:0,y:0}},factoryEasing:function(e){return Ext.factory(e,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(e){this.getEasingX()||this.setEasingX(this.factoryEasing(e)),this.getEasingY()||this.setEasingY(this.factoryEasing(e))},applyEasingX:function(e){return this.factoryEasing(e)},applyEasingY:function(e){return this.factoryEasing(e)},updateOffsetX:function(){this.isConfiguring||this.isAnimating||this.translateXY(this.x,this.y)},updateOffsetY:function(){this.isConfiguring||this.isAnimating||this.translateXY(this.x,this.y)},translate:function(e,t,i){if(i)return this.translateAnimated(e,t,i);this.isAnimating&&this.stopAnimation(),isNaN(e)||"number"!=typeof e?e=this.x:this.x=e,isNaN(t)||"number"!=typeof t?t=this.y:this.y=t,this.translateXY(e,t)},translateXY:function(e,t){this.destroyed||(this.doTranslate(e+this.getOffsetX(),t+this.getOffsetY()),this.hasListeners.translate&&this.fireEvent("translate",this,e,t))},translateAxis:function(e,t,i){var n,r;return"x"===e?n=t:r=t,this.translate(n,r,i)},getPosition:function(){var e=this.position;return e.x=-this.x,e.y=-this.y,e},animate:function(e,t){var i=this;return i.activeEasingX=e,i.activeEasingY=t,i.isAnimating=!0,i.ownerCmp&&(i.ownerCmp.isTranslating=!0),i.lastX=null,i.lastY=null,Ext.AnimationQueue.start(i.doAnimationFrame,i),i.fireEvent("animationstart",i,i.x,i.y),i},translateAnimated:function(e,t,i){var n,r,o,a,s=this;return Ext.isObject(i)||(i={}),s.isAnimating&&s.stopAnimation(),s.callback=i.callback,s.callbackScope=i.scope,n=Ext.Date.now(),r=i.easing,o="number"==typeof e?i.easingX||r||s.getEasingX()||!0:null,a="number"==typeof t?i.easingY||r||s.getEasingY()||!0:null,o&&((o=s.factoryEasing(o)).setStartTime(n),o.setStartValue(s.x),o.setEndValue(e),"duration"in i&&o.setDuration(i.duration)),a&&((a=s.factoryEasing(a)).setStartTime(n),a.setStartValue(s.y),a.setEndValue(t),"duration"in i&&a.setDuration(i.duration)),s.animate(o,a)},doAnimationFrame:function(){var e,t,i=this,n=i.activeEasingX,r=i.activeEasingY,o=Date.now();i.isAnimating&&(i.lastRun=o,null!==n||null!==r?(null!==n?(i.x=e=Math.round(n.getValue()),n.isEnded&&(i.activeEasingX=null,i.fireEvent("axisanimationend",i,"x",e))):e=i.x,null!==r?(i.y=t=Math.round(r.getValue()),r.isEnded&&(i.activeEasingY=null,i.fireEvent("axisanimationend",i,"y",t))):t=i.y,i.lastX===e&&i.lastY===t||(i.translateXY(e,t),i.lastX=e,i.lastY=t),i.fireEvent("animationframe",i,e,t)):i.stopAnimation())},stopAnimation:function(){var e=this;e.isAnimating&&(e.activeEasingX=null,e.activeEasingY=null,e.isAnimating=!1,e.ownerCmp&&(e.ownerCmp.isTranslating=!1),Ext.AnimationQueue.stop(e.doAnimationFrame,e),e.fireEvent("animationend",e,e.x,e.y),e.callback&&(e.callback.call(e.callbackScope),e.callback=null))},refresh:function(){this.translate(this.x,this.y)},resolveListenerScope:function(){var e=this.ownerCmp,t=arguments;return e?e.resolveListenerScope.apply(e,t):this.callParent(t)},destroy:function(){this.destroying=!0,this.isAnimating&&this.stopAnimation(),this.callParent(),this.destroyed=!0}}),Ext.define("Ext.util.translatable.Dom",{extend:"Ext.util.translatable.Abstract",alias:"translatable.dom",config:{element:null},applyElement:function(e){if(e)return Ext.get(e)},updateElement:function(){this.refresh()},translateXY:function(e,t){var i=this.getElement();i&&!i.destroyed&&this.callParent([e,t])}}),Ext.define("Ext.util.translatable.ScrollPosition",{extend:"Ext.util.translatable.Dom",alias:"translatable.scrollposition",constructor:function(e){e&&e.element&&(this.x=e.element.getScrollLeft(),this.y=e.element.getScrollTop()),this.callParent([e])},translateAnimated:function(){var e=this.getElement();this.x=e.getScrollLeft(),this.y=e.getScrollTop(),this.callParent(arguments)},doTranslate:function(e,t){var i=this.getElement();i.setScrollLeft(Math.round(e)),i.setScrollTop(Math.round(t))},getPosition:function(){var e=this.position,t=this.getElement();return e.x=t.getScrollLeft(),e.y=t.getScrollTop(),e}}),Ext.define("Ext.scroll.Scroller",{extend:"Ext.Evented",alias:"scroller.scroller",alternateClassName:"Ext.scroll.NativeScroller",mixins:["Ext.mixin.Factoryable","Ext.mixin.Bufferable"],requires:["Ext.util.CSS","Ext.util.translatable.ScrollPosition","Ext.Deferred"],factoryConfig:{defaultType:"scroller"},bufferableMethods:{onDomScrollEnd:100},isScroller:!0,config:{direction:void 0,element:void 0,scrollbars:null,snapSelector:null,snapOffset:null,msSnapInterval:null,x:!0,y:!0,scrollElement:null,size:null,spacerXY:null,touchAction:null},snappableCls:Ext.baseCSSPrefix+"scroller-snappable",elementCls:Ext.baseCSSPrefix+"scroller",spacerCls:Ext.baseCSSPrefix+"scroller-spacer",noScrollbarsCls:Ext.baseCSSPrefix+"no-scrollbars",statics:{create:function(e,t){return Ext.Factory.scroller(e,t)},getScrollingElement:function(){var e,t,i=document,n=this.$standardScrollElement,r=i.scrollingElement;return r||(void 0===n&&((e=document.createElement("iframe")).style.height="1px",document.body.appendChild(e),(t=e.contentWindow.document).write('<!DOCTYPE html><div style="height:9999em">x</div>'),t.close(),n=t.documentElement.scrollHeight>t.body.scrollHeight,e.parentNode.removeChild(e),this.$standardScrollElement=n),n?i.documentElement:i.body)},initViewportScroller:function(){var e=Ext.getViewportScroller();e.getElement()||e.setElement(Ext.getBody())}},constructor:function(e){this.position={x:0,y:0},this.callParent([e])},destroy:function(){var e,t=this,i=t._partners;if(Ext.undefer(t.restoreTimer),t.setX(Ext.emptyString),t.setY(Ext.emptyString),t._spacer&&t._spacer.destroy(),t.scrollListener&&t.scrollListener.destroy(),i)for(e in i)t.removePartner(i[e].scroller);t.setElement(null),t._partners=t.component=null,t.translatable&&(t.translatable.destroy(),t.translatable=null),t.removeSnapStylesheet(),t.callParent()},addPartner:function(e,t){var i=this._partners||(this._partners={}),n=e._partners||(e._partners={});t=this.axisConfigs[t||"both"],i[e.getId()]={scroller:e,axes:t},n[this.getId()]={scroller:this,axes:t}},applyElement:function(e,t){return t&&this.scrollListener&&this.scrollListener.destroy(),e&&("string"!=typeof e||Ext.get(e)||Ext.raise("Cannot create Ext.scroll.Scroller instance. Element with id '"+e+"' not found."),e=Ext.get(e)),e},applySize:function(e,t){var i,n;if(null===e||"number"==typeof e?i=n=e:e&&(i=e.x,n=e.y),null===i?i=0:void 0===i&&(i=t?t.x:0),null===n?n=0:void 0===n&&(n=t?t.y:0),!t||i!==t.x||n!==t.y)return{x:i,y:n}},getClientSize:function(){var e=this.getElement().dom;return{x:e.clientWidth,y:e.clientHeight}},getScrollbarSize:function(){var e,t,i,n,r,o,a=0,s=0,l=this.getElement();return l&&!l.destroyed&&(t=this.getX(),i=this.getY(),e=l.dom,(t||i)&&(o=Ext.scrollbar.size()),"scroll"===t?n=!0:t&&(n=e.scrollWidth>e.clientWidth),"scroll"===i?r=!0:i&&(r=e.scrollHeight>e.clientHeight),n&&(s=o.height),r&&(a=o.width)),{width:a,height:s}},getPosition:function(){return this.positionDirty&&this.updateDomScrollPosition(),this.position},getSize:function(){var e,t=this.getElement();return t&&!t.destroyed?{x:(e=t.dom).scrollWidth,y:e.scrollHeight}:{x:0,y:0}},getMaxPosition:function(){var e,t=this.getElement(),i=0,n=0;return t&&!t.destroyed&&(i=(e=t.dom).scrollWidth-e.clientWidth,n=e.scrollHeight-e.clientHeight),{x:i,y:n}},getMaxUserPosition:function(){var e,t=this.getElement(),i=0,n=0;return t&&!t.destroyed&&(e=t.dom,this.getX()&&(i=e.scrollWidth-e.clientWidth),this.getY()&&(n=e.scrollHeight-e.clientHeight)),{x:i,y:n}},refresh:function(){return this.positionDirty=!0,this.fireEvent("refresh",this),this},removePartner:function(e){var t=this._partners,i=e._partners;t&&delete t[e.getId()],i&&delete i[this.getId()]},scrollBy:function(e,t,i){var n=this.getPosition();return e&&(e.length?(i=t,t=e[1],e=e[0]):"number"!=typeof e&&(i=t,t=e.y,e=e.x)),e="number"==typeof e?e+n.x:null,t="number"==typeof t?t+n.y:null,this.doScrollTo(e,t,i)},ensureVisible:function(e,t){var i,n,r=this.getPosition();return e?(e&&e.element&&!e.isElement&&(e=(t=e).element),i=(t=t||{}).highlight,(n=this.getEnsureVisibleXY(e,t)).y!==r.y||n.x!==r.x?(i&&this.on({scrollend:"doHighlight",scope:this,single:!0,args:[e,i]}),this.doScrollTo(n.x,n.y,t.animation)):(i&&this.doHighlight(e,i),Ext.Deferred.getCachedResolved())):Ext.Deferred.getCachedRejected()},scrollIntoView:function(e,t,i,n){return this.ensureVisible(e,{animation:i,highlight:n,x:t})},isInView:function(e){return this.doIsInView(e)},scrollTo:function(e,t,i){var n;return e&&(e.length?(i=t,t=e[1],e=e[0]):"number"!=typeof e&&(i=t,t=e.y,e=e.x)),(e<0||t<0)&&(n=this.getMaxPosition(),e<0&&(e+=n.x),t<0&&(t+=n.y)),this.doScrollTo(e,t,i)},updateDirection:function(e){var t,i;e?("auto"===e?i=t=!0:"vertical"===e?i=!(t=!1):"horizontal"===e?i=!(t=!0):"both"===e&&(i=t="scroll"),this.setX(t),this.setY(i)):(t=this.getX(),i=this.getY(),t&&i?e="scroll"===i&&"scroll"===t?"both":"auto":i?e="vertical":t&&(e="horizontal"),this._direction=e)},updateScrollbars:function(e,t){this.syncScrollbarCls()},updateSize:function(e){var t,i=this.getElement(),n=e.x,r=e.y;i&&(this.positionDirty=!0,t=this.getSpacer(),n||r?(0<n&&--n,0<r&&--r,this.setSpacerXY({x:n,y:r}),t.show()):t.hide())},updateMsSnapInterval:function(){this.initMsSnapInterval()},updateSnapSelector:function(){this.initSnap()},updateSnapOffset:function(){this.initSnap()},updateTouchAction:function(e){var t=this.getElement();t&&t.setTouchAction(e)},updateElement:function(e,t){var i,n,r=this,o=r.getTouchAction(),a=r.scrollListener,s=r.elementCls;a&&(a.destroy(),r.scrollListener=null,r.setScrollElement(null)),t&&!t.destroyed&&(t.setStyle("overflow","hidden"),t.removeCls(s)),e&&(n=e.dom===document.documentElement||e.dom===document.body?(i=Ext.getDoc(),Ext.scroll.Scroller.getScrollingElement()):i=e,r.setScrollElement(Ext.get(n)),r.scrollListener=i.on({scroll:r.onDomScroll,scope:r,destroyable:!0}),o&&e.setTouchAction(o),r.initXStyle(),r.initYStyle(),e.addCls(s),r.initSnap(),r.initMsSnapInterval(),r.syncScrollbarCls())},updateX:function(e){this.initXStyle()},updateY:function(e){this.initYStyle()},deprecated:{5:{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(e){return this.scrollTo(0,0,e)},scrollToEnd:function(e){return this.scrollTo(1/0,1/0,e)}}}},privates:{axisConfigs:{x:{x:!0},y:{y:!0},both:{x:!0,y:!0}},getEnsureVisibleXY:function(e,t){var i,n,r=this.getPosition(),o=this.component?this.component.getScrollableClientRegion():this.getElement();return e&&e.element&&!e.isElement&&(e=(t=e).element),(n=(t=t||{}).align)&&(Ext.isString(n)?n={x:!1===t.x?null:n,y:!1===t.y?null:n}:Ext.isObject(n)&&(n.x&&!1===t.x&&(n.x=null),n.y&&!1===t.y&&(n.y=null))),(i=Ext.fly(e).getScrollIntoViewXY(o,r.x,r.y,n)).x=!1===t.x?r.x:i.x,i.y=!1===t.y?r.y:i.y,i},getSpacer:function(){var e,t=this._spacer;return t||(e=this.getElement(),(t=this._spacer=e.createChild({cls:this.spacerCls,role:"presentation"},e.dom.firstChild)).setVisibilityMode(2),t.hide(),e.position()),t},applySpacerXY:function(e,t){return t&&e.x===t.x&&e.y===t.y&&(e=void 0),e},updateSpacerXY:function(e){var t,i=this.getSpacer().dom.style,n=e.y;i.marginTop="",this.translateSpacer(e.x,this.constrainScrollRange(n)),i.lineHeight=Number(!parseInt(i.lineHeight,10))+"px",1e6<n&&0<(t=n-this.getElement().dom.scrollHeight)&&(i.marginTop=Math.min(t,this.maxSpacerMargin||0)+"px")},translateSpacer:function(e,t){this.getSpacer().translate(e,t)},doIsInView:function(e,t){var i,n,r=this.component,o={x:!1,y:!1},a=this.getElement();return e&&(t||a.contains(e)||r&&r.owns(e))&&(n=a.getRegion(),i=Ext.fly(e).getRegion(),o.x=i.right>n.left&&i.left<n.right,o.y=i.bottom>n.top&&i.top<n.bottom),o},contains:function(e){for(var t=this.getElement(),i=e;i&&i!==Ext.Viewport;){if(t.contains(i.el))return!0;i=i.getRefOwner()}return!1},constrainScrollRange:function(e){var t,i,n,r,o,a;if(e<1e6)return e;if(!this.maxSpacerTranslate){for(i=t=Math.pow(2,32),n=500,r=Ext.getBody().createChild({style:{position:"absolute",left:"-10000px",top:"0",width:"500px",height:"500px"},cn:{cls:this.spacerCls}},null,!0),a=(o=Ext.get(r.firstChild)).dom.style,o.translate(0,t-1),a.lineHeight=Number(!parseInt(a.lineHeight,10))+"px";i!==n+1;)o.translate(0,t=n+Math.floor((i-n)/2)),a.lineHeight=Number(!parseInt(a.lineHeight,10))+"px",r.scrollHeight<t?i=t:n=t;for(o.translate(0,Ext.scroll.Scroller.prototype.maxSpacerTranslate=n),i=2*n;i!==n+1;)o.dom.style.marginTop=(t=n+Math.floor((i-n)/2))+"px",a.lineHeight=Number(!parseInt(a.lineHeight,10))+"px",r.scrollHeight<t?i=t:n=t;Ext.fly(r).destroy(),Ext.scroll.Scroller.prototype.maxSpacerMargin=n-Ext.scroll.Scroller.prototype.maxSpacerTranslate}return Math.min(e,this.maxSpacerTranslate)},convertX:function(e){return e},doHighlight:function(e,t){!0!==t?Ext.fly(e).highlight(t):Ext.fly(e).highlight()},doScrollTo:function(e,t,i){var n,r,o,a,s,l,d,u=this,c=u.getScrollElement();return c&&!c.destroyed?(r=c.dom,a=t===1/0,((o=e===1/0)||a)&&(n=u.getMaxPosition(),o&&(e=n.x),a&&(t=n.y)),null!==e&&(e=u.convertX(e)),s=i?((l=u.translatable)||(u.translatable=l=new Ext.util.translatable.ScrollPosition({element:c})),d=new Ext.Deferred,l.on("animationend",function(){u.destroyed?d.reject():d.resolve()},Ext.global,{single:!0,onFrame:!0}),l.translate(e,t,i),d.promise):(null!=t&&(r.scrollTop=t),null!=e&&(r.scrollLeft=e),Ext.Deferred.getCachedResolved()),u.positionDirty=!0):s=Ext.Deferred.getCachedRejected(),s},fireScrollStart:function(e,t,i,n){var r=this.component;this.invokePartners("onPartnerScrollStart",e,t,i,n),this.startX=e-i,this.startY=t-n,this.hasListeners.scrollstart&&this.fireEvent("scrollstart",this,e,t),r&&r.onScrollStart&&r.onScrollStart(e,t),Ext.GlobalEvents.fireEvent("scrollstart",this,e,t)},fireScroll:function(e,t,i,n){var r=this.component;this.invokePartners("onPartnerScroll",e,t,i,n),this.hasListeners.scroll&&this.fireEvent("scroll",this,e,t,i,n),r&&r.onScrollMove&&r.onScrollMove(e,t),Ext.GlobalEvents.fireEvent("scroll",this,e,t,i,n)},fireScrollEnd:function(e,t,i,n){var r=this,o=r.component,a=e-r.startX,s=t-r.startY;r.startX=r.startY=null,r.invokePartners("onPartnerScrollEnd",e,t,i,n),r.hasListeners.scrollend&&r.fireEvent("scrollend",r,e,t,a,s),o&&o.onScrollEnd&&o.onScrollEnd(e,t),Ext.GlobalEvents.fireEvent("scrollend",r,e,t,a,s)},getElementScroll:function(e){return e.getScroll()},initSnap:function(){var e,t,i,n=this.getSnapOffset(),r=this.getSnapSelector(),o=this.getElement();o&&r&&(o.addCls(this.snappableCls),this.removeSnapStylesheet(),n&&(e=(e=n.x||0)&&-e+"px",t=(t=n.y||0)&&-t+"px"),i=e+" "+t+";",this.snapStylesheet=Ext.util.CSS.createStyleSheet("#"+o.id+" "+r+"{-webkit-scroll-snap-coordinate:"+i+"scroll-snap-coordinate:"+i+"}"))},initMsSnapInterval:function(){var e,t,i,n,r=this.getElement();r&&(e=this.getMsSnapInterval())&&(t=e.x,i=e.y,n=r.dom.style,t&&(n["-ms-scroll-snap-points-x"]="snapInterval(0px, "+t+"px)"),i&&(n["-ms-scroll-snap-points-y"]="snapInterval(0px, "+i+"px)"))},initXStyle:function(){var e=this.getElement(),t=this.getX();e&&e.dom&&(t?!0===t&&(t="auto"):t="hidden",e.setStyle("overflow-x",t))},initYStyle:function(){var e=this.getElement(),t=this.getY();e&&e.dom&&(t?!0===t&&(t="auto"):t="hidden",e.setStyle("overflow-y",t))},invokePartners:function(e,t,i,n,r){var o,a,s,l=this._partners;if(!this.suspendSync){for(a in this.invokingPartners=!0,l)s=l[a].axes,!(o=l[a].scroller).invokingPartners&&(n&&s.x||r&&s.y)&&o[e](this,s.x?t:null,s.y?i:null,n,r);this.invokingPartners=!1}},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(e){var t;this.suspendSync&&this.suspendSync--,!this.suspendSync&&e&&(t=this.getPosition(),this.invokePartners("onPartnerScroll",t.x,t.y),this.invokePartners("onPartnerScrollEnd",t.x,t.y))},readPosition:function(e){var t,i=this.getScrollElement();return e=e||{},i&&!i.destroyed&&(t=this.getElementScroll(i),e.x=t.left,e.y=t.top),e},updateDomScrollPosition:function(e){var t,i,n,r,o=this.position,a=o.x,s=o.y;return this.readPosition(o),t=o.x,i=o.y,this.positionDirty=!1,e||(r=i-s,((n=t-a)||r)&&(this.isScrolling||(this.isScrolling=Ext.isScrolling=!0,this.fireScrollStart(t,i,n,r)),this.fireScroll(t,i,n,r),this.onDomScrollEnd(t,i,n,r))),o},syncWithPartners:function(){var e,t,i,n=this._partners;for(e in this.suspendPartnerSync(),n)i=(t=n[e].scroller).getPosition(),this.onPartnerScroll(t,i.x,i.y);this.resumePartnerSync()},syncScrollbarCls:function(){var e=this.getElement();e&&e.toggleCls(this.noScrollbarsCls,!1===this.getScrollbars())},onDomScroll:function(){var e=!!this.restoreTimer;this.updateDomScrollPosition(e),e&&Ext.undefer(this.onDomScrollEnd.timer)},doOnDomScrollEnd:function(e,t,i,n){this.destroying||this.destroyed||(this.isScrolling=Ext.isScrolling=!1,void 0!==e&&(this.trackingScrollLeft=e,this.trackingScrollTop=t,this.fireScrollEnd(e,t,i,n)))},onPartnerScrollStart:function(e,t,i,n,r){this.isScrolling=!0,this.fireScrollStart(t,i,n,r)},onPartnerScroll:function(e,t,i,n,r){this.doScrollTo(t,i,!1),this.updateDomScrollPosition(!0),this.fireScroll(t,i,n,r)},onPartnerScrollEnd:function(e,t,i,n,r){this.cancelOnDomScrollEnd(),this.doOnDomScrollEnd(t,i,n,r)},removeSnapStylesheet:function(){var e=this.snapStylesheet;e&&(Ext.util.CSS.removeStyleSheet(e),this.snapStylesheet=null)},restoreState:function(){var e=this;e.getScrollElement()&&void 0!==e.trackingScrollTop&&(e.restoreTimer||(e.restoreTimer=Ext.defer(function(){e.restoreTimer=null},50)),e.doScrollTo(e.trackingScrollLeft,e.trackingScrollTop,!1))}}},function(t){Ext.getViewportScroller=function(){var e=t.viewport;return e||(t.viewport=e=new t,t.initViewportScroller()),e},Ext.setViewportScroller=function(e){t.viewport!==e&&(Ext.destroy(t.viewport),e&&!e.isScroller&&(e=new t(e)),t.viewport=e)},Ext.onReady(function(){t.initViewportScrollerTimer=Ext.defer(t.initViewportScroller,100)})}),Ext.define("Ext.util.Floating",{mixinId:"floating",uses:["Ext.ZIndexManager"],focusOnToFront:!0,shadow:"sides",animateShadow:!1,constrain:!1,alignOnScroll:!0,config:{activeCounter:0,alwaysOnTop:!1},preventDefaultAlign:!1,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var e,t,i=this,n=i.el,r=i.shadow;r&&(t={mode:!0===r?"sides":r},(e=i.shadowOffset)&&(t.offset=e),t.animate=i.animateShadow,t.fixed=i.fixed,n.enableShadow(t,!1)),(i.shim||Ext.useShims)&&n.enableShim({fixed:i.fixed},!1),n.setVisibilityMode(i._visModeMap[i.hideMode]),i.el.on({mousedown:i.onMouseDown,scope:i,capture:!0}),i.registerWithOwnerCt(),i.initHierarchyEvents()},alignTo:function(e,t,i,n,r){var o,a,s,l,d,u=this;if(e.isComponent?(o=e.el,e.destroyed):(u.alignTargetFly=u.alignTargetFly||new Ext.dom.Fly,!(a=(o=e=u.alignTargetFly.attach(e)).dom)||Ext.isGarbage(a)))return u._lastAlignTarget=null,void(u.alignListeners&&u.alignListeners.destroy());u.mixins.positionable.alignTo.call(u,o,t,i,n,!1!==r),s=u.getXY(),l=e.getXY(),u.alignVector=[s[0]-l[0],s[1]-l[1]],u._lastAlignTarget=e,u._lastAlignToPos=t,u._lastAlignToOffsets=i,u._topAlignTarget=u.getTopAlignTarget(),u.clearClip(),u.alignListeners||(d={resize:{fn:u.alignOnResize,buffer:100},scope:u,destroyable:!0},u.alignOnScroll&&!o.contains(u.el)&&(d.scroll=u.doRealign),u.alignListeners=Ext.on(d))},initFloatConstrain:function(){var e=this.floatParent;!this.constrain&&!this.constrainHeader||this.constrainTo||(this.constrainTo=e?e.getTargetEl():this.container)},initHierarchyEvents:function(){this.hierarchyEventListeners||(this.hierarchyEventListeners=Ext.on({hide:"syncHidden",collapse:"syncHidden",show:"syncHidden",expand:"syncHidden",added:"syncHidden",scope:this,destroyable:!0}))},registerWithOwnerCt:function(){var e=this,t=e.ownerCt,i=e.zIndexParent;i&&i.unregisterFloatingItem(e),i=e.zIndexParent=e.up("[floating]"),e.floatParent=t||i,e.initFloatConstrain(),delete e.ownerCt,i?i.registerFloatingItem(e):Ext.WindowManager.register(e)},onMouseDown:function(e){var t,i,n=this.focusTask,r=this.getRefOwner(),o="touch"===e.pointerType;if(this.floating&&(!n||!n.id)){for(this.owns(Ext.Element.getActiveElement())&&(o={ownsFocus:!0}),t=e.target,i=this.el.dom;!o&&t&&t!==i;)Ext.fly(t).isFocusable()&&(o={ownsFocus:!0}),t=t.parentNode;Ext.WindowManager.getActive()===this&&(t===i||o)||this.toFront(o),!o&&r&&r.containsFocus&&e.preventDefault()}},onBeforeFloatLayout:function(){this.el.preventSync=!0},onAfterFloatLayout:function(){var e=this.el;(e.shadow||e.shim)&&(e.setUnderlaysVisible(!1!==e.getData().isVisible),e.syncUnderlays())},syncHidden:function(){var e=this,t=e.hidden||!e.rendered,i=e.hierarchicallyHidden=e.isHierarchicallyHidden(),n=e.pendingShow;t!==i&&(i?(e.hide(),e.pendingShow=!0):n&&(delete e.pendingShow,n.length?e.show.apply(e,n):e.show()))},setZIndex:function(e){return this.el.setZIndex(e),e+=10,this.floatingDescendants&&(e=100*Math.floor(this.floatingDescendants.setBase(e)/100)+1e4),e},doConstrain:function(e){var t=this.calculateConstrainedPosition(e,null,!0);t&&this.setPosition(t)},updateActiveCounter:function(e){var t=this.zIndexParent;t&&t!==t.zIndexManager.front&&!1!==this.bringParentToFront&&t.setActiveCounter(++Ext.ZIndexManager.activeCounter),(t=this.zIndexManager)&&t.onComponentUpdate(this)},updateAlwaysOnTop:function(e){var t=this.zIndexManager;t&&t.onComponentUpdate(this)},toFront:function(e){return this.zIndexManager.bringToFront(this,e||!this.focusOnToFront)&&this.hasListeners.tofront&&this.fireEvent("tofront",this,this.el.getZIndex()),this},onZIndexChange:function(e){e?(this.el.shadow&&!1!==this.el.getData().isVisible&&!this.maximized&&this.el.enableShadow(null,!0),this.fireEvent("activate",this)):this.fireEvent("deactivate",this)},onFocusTopmost:function(){var e=Ext.ComponentManager.getActiveComponent();e&&e.up(this)||this.focus()},toBack:function(){return this.zIndexManager.sendToBack(this),this},center:function(){var e,t=this.floatParent;return this.isVisible()?(e=this.getAlignToXY(t?t.getTargetEl():this.container,"c-c"),this.setPagePosition(e)):this.needsCenter=!0,this},onFloatShow:function(){var e=this._lastAlignTarget;this.needsCenter?this.center():e&&(e.destroyed?this._lastAlignTarget=null:this.alignTo(e,this._lastAlignToPos,this._lastAlignToOffsets,!1,!this.fixed)),this.needsCenter=!1},fitContainer:function(e){var t=this.floatParent,i=t?t.getTargetEl():this.container,n=i.getViewSize(),r=t||i.dom!==document.body?[0,0]:i.getXY();n.x=r[0],n.y=r[1],this.setBox(n,e)},privates:{onFloatDestroy:function(){var e=this.alignTargetFly;this.hierarchyEventListeners&&(this.hierarchyEventListeners.destroy(),this.hierarchyEventListeners=null),this.clearAlignEl(),e&&(e.detach(),e.destroy())},getTopAlignTarget:function(){for(var e=this._lastAlignTarget,t=e;e&&(t=e)&&e.isComponent;)e=t.isFloating()?t._lastAlignTarget:(e=t.up("{isFloating()}"))&&e._lastAlignTarget;return t},clearAlignEl:function(){this._lastAlignTarget&&(this.alignListeners=Ext.destroy(this.alignListeners),Ext.un("scroll",this.doRealign,this),this._lastAlignToPos=this._lastAlignTarget=this._lastAlignToOffsets=this._topAlignTarget=null)},alignOnResize:function(){this.doRealign()},doRealign:function(e){var t,i,n,r=this._lastAlignTarget.el;r&&this.isVisible()&&((r.isComponent?r.destroyed:!(t=r.dom)||Ext.isGarbage(t))?this.clearAlignEl():e&&(!e.getElement().contains(this._topAlignTarget.el)||e.getElement().contains(this.el))||(n=[(i=r.getXY())[0]+this.alignVector[0],i[1]+this.alignVector[1]],this.setXY(n),e&&this.clipToScroller(e)))},clipToScroller:function(e){var t=this._topAlignTarget.getBox(),i=e.getElement().getConstrainRegion(),n=0;t.top<i.top&&(n=1),t.right>i.right&&(n|=2),t.bottom>i.bottom&&(n|=4),t.left<i.left&&(n|=8),n?this.clipTo(i,n):this.clearClip()}}}),Ext.define("Ext.util.ElementContainer",{mixinId:"elementCt",config:{childEls:{$value:{},cached:!0,lazy:!0,merge:function(e,t,i,n){var r,o,a=t?Ext.Object.chain(t):{};if(e instanceof Array)for(r=e.length;r--;)o=e[r],n&&o in a||("string"==typeof o?a[o]={name:o,itemId:o}:a[o.name]=o);else if(e)if(e.constructor===Object)for(r in e)n&&r in a||(!0===(o=e[r])?a[r]={itemId:r}:"string"==typeof o?a[r]={itemId:o}:"itemId"in(a[r]=o)||(o.itemId=r),a[r].name=r);else n&&e in a||(a[e]={name:e,itemId:e});return a}}},destroy:function(){var e,t,i=this.getChildEls();for(t in i)(e=this[t])&&(e.destroy&&(e.component=null,e.destroy()),this[t]=null)},privates:{addChildEl:function(e){var t=this.getChildEls();this.hasOwnProperty("childEls")||(this.childEls=t=Ext.Object.chain(t)),"string"==typeof e&&(e={name:e,itemId:e}),t[e.name]=e},afterClassMixedIn:function(e){var t=e.prototype,i=t.childEls;i&&(delete t.childEls,e.getConfigurator().add({childEls:i}))},attachChildEls:function(e,t){var i,n,r,o,a,s,l,d=this.getChildEls(),u=t||this,c=u.id+"-",h=!u.frame;for(i in d)if(r=d[i],!h||!r.frame){if(s=(a=r.select)?e.select(a,!0):(a=r.selectNode)?e.selectNode(a,!1):(l=r.id)?Ext.cache[l]||e.getById(l):(l=c+r.itemId,Ext.cache[l]))if(s.isElement)s.component=u;else if(s.isComposite&&!s.isLite)for(o=(n=s.elements).length;o--;)n[o].component=u;this[i]=s||null}}}}),Ext.define("Ext.util.Renderable",{mixinId:"renderable",requires:["Ext.dom.Element"],frameIdRegex:/[-]frame\d+[TMB][LCR]$/,frameCls:Ext.baseCSSPrefix+"frame",frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'before'); %}</tpl>",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'after'); %}</tpl>"],frameTableTpl:["<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'before'); %}</tpl>",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ',Ext.baseCSSPrefix+'table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'after'); %}</tpl>"],_renderState:0,_layerCls:Ext.baseCSSPrefix+"layer",_fixedLayerCls:Ext.baseCSSPrefix+"fixed-layer",ariaStaticRoles:{presentation:!0,article:!0,definition:!0,directory:!0,document:!0,img:!0,heading:!0,math:!0,note:!0,banner:!0,complementary:!0,contentinfo:!0,navigation:!0,search:!0,undefined:!0,null:!0},statics:{makeRenderSetter:function(n,r){var o=n.name;return function(e){var t=this.renderConfigs||(this.renderConfigs={}),i=t[r];return this._renderState>=r?(n.setter||n.getSetter()).call(this,e):(i||(t[r]=i={}),o in i||(i[o]=this[o]),this[o]=e),this}},processRenderConfig:function(e,t,i){var n,r,o,a,s=this.prototype,l=this.getConfigurator(),d=Ext.util.Renderable.makeRenderSetter,u=e[t];for(o in u)s[a=(r=Ext.Config.get(o)).names.set]||(n=r.renderSetter||(r.renderSetter={}),s[a]=n[i]||(n[i]=d(r,i)));delete e[t],l.add(u)}},onClassMixedIn:function(e){function i(e){e.beforeRenderConfig&&this.processRenderConfig(e,"beforeRenderConfig",1),e.renderConfig&&this.processRenderConfig(e,"renderConfig",3),n.call(this,e)}function t(e,t){e.override=i,e.processRenderConfig=r,t.beforeRenderConfig&&e.processRenderConfig(t,"beforeRenderConfig",1),t.renderConfig&&e.processRenderConfig(t,"renderConfig",3)}var n=e.override,r=this.processRenderConfig;t(e,e.prototype),e.onExtended(t)},afterRender:function(){var e,t,i,n,r,o=this,a={},s=o.protoEl,l=o.el;o.finishRenderChildren(),o._renderState=4,o.contentEl&&(n=(i=Ext.baseCSSPrefix)+"hidden-",(r=o.contentEl=Ext.get(o.contentEl)).component=o,r.removeCls([i+"hidden",n+"display",n+"offsets"]),o.getContentTarget().appendChild(r.dom)),s.writeTo(a),(t=a.removed)&&l.removeCls(t),(t=a.cls).length&&l.addCls(t),(t=a.style)&&l.setStyle(t),o.protoEl=null,o.ownerCt||o.skipLayout||o.updateLayout(),o.x&&o.y||!o.pageX&&!o.pageY||o.setPagePosition(o.pageX,o.pageY),o.disableOnRender&&o.onDisable(),(e=o.controller)&&e.afterRender&&e.afterRender(o),o.focusableContainer&&o.initFocusableContainer&&o.initFocusableContainer()},afterFirstLayout:function(e,t){var i,n,r,o,a,s=this,l=s.x,d=s.y,u=s.defaultAlign,c=s.alignOffset;s.ownerLayout||(n=void 0!==l,r=void 0!==d),!s.floating||s.preventDefaultAlign||n&&r||(s.floatParent?(o=s.floatParent.getTargetEl().getViewRegion(),a=s.el.getAlignToXY(s.alignTarget||s.floatParent.getTargetEl(),u,c),o.x=a[0]-o.x,o.y=a[1]-o.y):(a=s.el.getAlignToXY(s.alignTarget||s.container,u,c),o=s.el.translateXY(a[0],a[1])),l=n?l:o.x,d=r?d:o.y,n=r=!0),(n||r)&&s.setPosition(l,d),s.onBoxReady(e,t),(i=s.controller)&&i.boxReady&&i.boxReady(s,e,t)},beforeRender:function(){var e,t=this,i=t.floating,n=t.getComponentLayout(),r=t.userCls;t._renderState=1,t.ariaUsesMainElement="el"===t.ariaEl,(e=t.controller)&&e.beforeRender&&e.beforeRender(t),t.initBindable(),t.renderConfigs&&t.flushRenderConfigs(),r&&t.addCls(r),i&&(t.addCls(t.fixed?t._fixedLayerCls:t._layerCls),(r=i.cls)&&t.addCls(r)),t.frame=t.frame||t.alwaysFramed,n.initialized||n.initLayout(),t.initOverflow(),t.setUI(t.ui)},doApplyRenderTpl:function(e,t){var i=t.$comp;i.rendered||i.initRenderTpl().applyOut(t.renderData,e)},getElConfig:function(){var e,t=this,i=t.autoEl,n=t.getFrameInfo(),r={tag:"div",tpl:n?t.initFramingTpl(n.table):t.initRenderTpl()},o=t.layoutTargetCls,a=t.protoEl,s=t.ariaRole;return t.initStyles(a),o&&!n&&a.addCls(o),a.writeTo(r),a.flush(),i&&(Ext.isString(i)?r.tag=i:Ext.apply(r,i)),s&&t.ariaUsesMainElement&&(r.role=s,t.ariaStaticRoles[s]||(r["aria-hidden"]=!!t.hidden,r["aria-disabled"]=!!t.disabled,t.ariaLabel&&!t.ariaLabelledBy&&(r["aria-label"]=t.ariaLabel),t.collapsible&&(r["aria-expanded"]=!t.collapsed),t.ariaRenderAttributes&&Ext.apply(r,t.ariaRenderAttributes),t.config.ariaAttributes&&Ext.apply(r,t.getAriaAttributes()))),r.id=t.id,r.tpl&&(n?(r.tplData=e=t.getFrameRenderData(),e.renderData=t.initRenderData()):r.tplData=t.initRenderData()),t.ariaRenderAttributes=null,r},getInsertPosition:function(e){return void 0!==e&&(e=Ext.isNumber(e)?this.container.dom.childNodes[e]:Ext.getDom(e)),e},getRenderTree:function(){var e=this,t=null;return e.hasListeners.beforerender&&!1===e.fireEvent("beforerender",e)||(e._renderState=1,e.beforeRender(),e.rendering=!0,e._renderState=2,t=e.getElConfig(),e.el&&(t.id=e.$pid=Ext.id(null,e.el.identifiablePrefix))),t},initRenderData:function(){var e,t,i=this,n=i.ariaRole;return e=Ext.apply({$comp:i,id:i.id,ui:i.ui,uiCls:i.uiCls,baseCls:i.baseCls,componentCls:i.componentCls,frame:i.frame,hasTabGuard:!!i.tabGuard,scrollerCls:i.scrollerCls,childElCls:"",ariaEl:i.ariaEl},i.renderData),n&&!i.ariaUsesMainElement&&(t={role:n},i.ariaStaticRoles[n]||(t["aria-hidden"]=!!i.hidden,t["aria-disabled"]=!!i.disabled,i.ariaLabel&&!i.ariaLabelledBy&&(t["aria-label"]=i.ariaLabel),i.collapsible&&(t["aria-expanded"]=!i.collapsed),i.ariaRenderAttributes&&Ext.apply(t,i.ariaRenderAttributes),i.config.ariaAttributes&&Ext.apply(t,i.getAriaAttributes())),e.ariaAttributes=t),e},onRender:function(e,t){var i,n,r=this,o=r.x,a=r.y,s=null,l=r.el,d=r.scrollable;r.applyRenderSelectors(),d&&d.isScroller&&(d.setElement(r.getOverflowEl()),Ext.isIE&&(r.showListenerIE=Ext.on("show",r.onGlobalShow,r,{destroyable:!0}))),r.rendering=null,r.rendered=!0,r._renderState=3,r.renderConfigs&&r.flushRenderConfigs(),null!=o&&(s={x:o}),null!=a&&((s=s||{}).y=a),r.getFrameInfo()||(i=r.width,n=r.height,"number"==typeof i&&((s=s||{}).width=i),"number"==typeof n&&((s=s||{}).height=n)),r.lastBox=l.lastBox=s},render:function(e,t){var i,n,r,o=this,a=o.el,s=o.ownerLayout;a&&!a.isElement&&(o.wrapPrimaryEl(a),a=o.el),o.skipLayout||Ext.suspendLayouts(),e=o.initContainer(e),r=o.getInsertPosition(t),a?o.hasListeners.beforerender&&!1===o.fireEvent("beforerender",o)?i=!0:(o.beforeRender(),o.needsRenderTpl=o.rendering=!0,o._renderState=2,o.initStyles(a),!1!==o.allowDomMove&&(r?e.dom.insertBefore(a.dom,r):e.dom.appendChild(a.dom))):(n=o.getRenderTree(),s&&s.transformItemRenderTree&&(n=s.transformItemRenderTree(n)),n&&(a=r?Ext.DomHelper.insertBefore(r,n):Ext.DomHelper.append(e,n),o.wrapPrimaryEl(a),o.cacheRefEls(a))),a&&!i&&o.finishRender(t),o.skipLayout||Ext.resumeLayouts(!o.hidden&&!e.isDetachedBody)},ensureAttachedToBody:function(e){for(var t,i=this;i.ownerCt;)i=i.ownerCt;i.container.isDetachedBody&&(i.container=t=Ext.getBody(),t.appendChild(i.el.dom),e&&i.updateLayout(),"number"!=typeof i.x&&"number"!=typeof i.y||i.setPosition(i.x,i.y))},privates:{applyRenderSelectors:function(){var e,t,i=this,n=i.renderSelectors,r=i.el;if(i.attachChildEls(r),"string"==typeof i.focusEl&&(i.focusEl=i[i.focusEl]),i.ariaEl=i[i.ariaEl]||i.el,n)for(t in n)(e=n[t])&&(i[t]=r.selectNode(e,!1))},cacheRefEls:function(e){e=e||this.el;var t,i,n=Ext.cache,r=Ext.dom.Element,o=(e.isElement?e.dom:e).querySelectorAll("[data-ref]"),a=o.length;for(i=0;i<a;i++)n[(t=o[i]).id]||new r(t)},doAutoRender:function(){this.rendered||(this.floating?this.render(this.renderTo||document.body):this.render(Ext.isBoolean(this.autoRender)?Ext.getBody():this.autoRender))},doRenderContent:function(e,t){var i=t.$comp,n=i.data;i.html&&(Ext.DomHelper.generateMarkup(i.html,e),delete i.html),i.tpl&&(i.tpl.isTemplate||(i.tpl=new Ext.XTemplate(i.tpl)),n&&(i.data=n=n.isEntity?n.getData(!0):n,i.tpl.applyOut(n,e)))},doRenderFramingTabGuard:function(e,t,i){var n=t.$comp.layout;t.renderData.$skipTabGuards=!0,n&&n.doRenderTabGuard&&n.doRenderTabGuard.call(this,e,t,i)},flushRenderConfigs:function(){var e,t,i,n,r,o=this.renderConfigs,a=this._renderState;if(o){for(t=0;t<=a;++t)if(e=o[t])for(i in o[t]=null,e)r=e[i],(n=n||{})[i]=this[i],this[i]=r;n&&this.setConfig(n)}},finishRender:function(e){var t,i,n,r,o,a,s,l=this,d=Ext.cache;if(!l.el||l.$pid)if(a=l.container?(s=d[l.id])?s.dom:l.container.getById(l.id,!0):(s=d[n=l.$pid||l.id])?s.dom:Ext.getDom(n),l.el){for(delete l.$pid,l.el.dom||l.wrapPrimaryEl(l.el),a.parentNode.insertBefore(l.el.dom,a),t=a,i=(a=l.el.dom).firstChild;t.firstChild;)a.insertBefore(t.firstChild,i);l.el.addCls(t.className),Ext.removeNode(t)}else l.wrapPrimaryEl(a);else l.needsRenderTpl&&((r=l.initRenderTpl())&&(o=l.initRenderData(),r.insertFirst(l.getTargetEl(),o)),l.cacheRefEls());(l.el.component=l).container||(l.container=Ext.get(l.el.dom.parentNode)),l.ctCls&&l.container.addCls(l.ctCls),l.onRender(l.container,e),l.overflowInited||l.initOverflow(),l.el.setVisibilityMode(Ext.Element[l.hideMode.toUpperCase()]),l.overCls&&l.el.hover(l.addOverCls,l.removeOverCls,l),l.hasListeners.render&&l.fireEvent("render",l),l.afterRender(),l.hasListeners.afterrender&&l.fireEvent("afterrender",l),l.initEvents(),l.hidden&&l.el.hide()},finishRenderChildren:function(){this.getComponentLayout().finishRender()},getFrameRenderData:function(){var e=this,t=e.frameSize,i="";return e._syncFrameHeight&&e.height&&(i="height:"+(e.height-t.height)+"px"),{$comp:e,id:e.id,fgid:e.id+"-frame",ui:e.ui,uiCls:e.uiCls,frameCls:e.frameCls,frameBodyCls:e.layoutTargetCls||"",baseCls:e.baseCls,hasTabGuard:e.tabGuard,top:!!t.top,left:!!t.left,right:!!t.right,bottom:!!t.bottom,mcStyle:i,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame)return!1;var e,t,i,n,r,o,a,s,l,d,u,c,h,f=this.frameInfoCache,g=this.getFramingInfoCls()+"-frameInfo",p=f[g];return null==p&&(p=!!((e=(e=Ext.fly(this.getStyleProxy(g),"frame-style-el").getStyle("font-family"))&&e.split("-"))&&5<=e.length)&&(t=parseInt(e[1],10),i=parseInt(e[2],10),n=parseInt(e[3],10),r=parseInt(e[4],10),o=parseInt(e[5],10)||0,a=parseInt(e[6],10)||0,s=parseInt(e[7],10)||0,l=parseInt(e[8],10)||0,d=parseInt(e[9],10)||0,u=parseInt(e[10],10)||0,c=parseInt(e[11],10)||0,h=parseInt(e[12],10)||0,{table:"t"===e[0].charAt(0),vertical:"v"===e[0].charAt(1),top:t,right:i,bottom:n,left:r,width:r+i,height:t+n,border:{top:o,right:a,bottom:s,left:l,width:l+a,height:o+s},padding:{top:d,right:u,bottom:c,left:h,width:h+u,height:d+c}}),!0!==this.frame||p||Ext.log.error("You have set frame: true explicity on this component ("+this.getXType()+") and it does not have any framing defined in the CSS template. In this case IE cannot figure out what sizes to use and thus framing on this component will be disabled."),f[g]=p),this.frame=!!p,this.frameSize=p},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(e){var t;return(t=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({"data-sticky":!0,role:"presentation",style:{position:"absolute",top:"-10000px"}},null,!0))).className=e,t},getFrameTpl:function(e){return this.lookupTpl(e?"frameTableTpl":"frameTpl")},initContainer:function(e){return!e&&this.el&&(e=this.el.dom.parentNode,this.allowDomMove=!1),this.container=e.dom?e:Ext.get(e),this.container},initOverflow:function(){var e=this.getOverflowStyle(),t=this.scrollFlags,i=this.getOverflowEl();(t.y||t.x)&&i&&i.isElement&&(this.overflowInited=!0,i.setStyle(e))},initFramingTpl:function(e){var t=this.getFrameTpl(e);return t&&!t.applyRenderTpl&&this.setupFramingTpl(t),t},initRenderTpl:function(){var e=this.lookupTpl("renderTpl");return e&&!e.renderContent&&this.setupRenderTpl(e),e},setupFramingTpl:function(e){e.applyRenderTpl=this.doApplyRenderTpl,e.renderTabGuard=this.doRenderFramingTabGuard},setupRenderTpl:function(e){e.renderBody=e.renderContent=this.doRenderContent},updateFrame:function(){if(!Ext.supports.CSS3BorderRadius&&this.frame){var e,t,i,n,r,o,a,s,l,d,u=this,c=u.el.dom,h=u.frameTable,f=u.frameBody,g=f.dom,p=u.getFrameInfo();for(i=document.createElement("div"),(o=u.getFrameRenderData()).hasTabGuard=!1,u.getFrameTpl(p.table).insertFirst(i,o),d=i.querySelectorAll("[data-ref]"),l=i.querySelector('[data-ref="frameBody"]'),r=g;r.parentNode!==c;)r=r.parentNode;for(;i.firstChild;)c.insertBefore(i.firstChild,r);for(t in l.parentNode.replaceChild(g,l),g.className=l.className,f.setSize(),e=u.getChildEls(),h&&(h.destroy(),u.frameTable=null),e)e[t].frame&&(n=u[t])&&n!==f&&(n.destroy(),u[t]=null);for(s=d.length;s--;)"frameBody"!==(t=(a=d[s]).getAttribute("data-ref"))&&(u[t]=new Ext.dom.Element(a))}},frameInfoCache:{}}}),Ext.define("Ext.state.Provider",{mixins:{observable:"Ext.util.Observable"},prefix:"ext-",constructor:function(e){Ext.apply(this,e),this.state={},this.mixins.observable.constructor.call(this)},get:function(e,t){var i=this.state[e];return void 0===i?t:i},clear:function(e){delete this.state[e],this.fireEvent("statechange",this,e,null)},set:function(e,t){this.state[e]=t,this.fireEvent("statechange",this,e,t)},decodeValue:function(e){var t,i,n,r,o,a,s=/^(a|n|d|b|s|o|e):(.*)$/.exec(unescape(e));if(s&&s[1])switch(i=s[1],e=s[2],i){case"e":return null;case"n":return parseFloat(e);case"d":return new Date(Date.parse(e));case"b":return"1"===e;case"a":if(t=[],e)for(o=(r=e.split("^")).length,a=0;a<o;a++)e=r[a],t.push(this.decodeValue(e));return t;case"o":if(t={},e)for(o=(r=e.split("^")).length,a=0;a<o;a++)t[(n=(e=r[a]).split("="))[0]]=this.decodeValue(n[1]);return t;default:return e}},encodeValue:function(e){var t,i,n,r="",o=0;if(null==e)return"e:1";if("number"==typeof e)t="n:"+e;else if("boolean"==typeof e)t="b:"+(e?"1":"0");else if(Ext.isDate(e))t="d:"+e.toUTCString();else if(Ext.isArray(e)){for(i=e.length;o<i;o++)r+=this.encodeValue(e[o]),o!==i-1&&(r+="^");t="a:"+r}else if("object"==typeof e){for(n in e)"function"!=typeof e[n]&&void 0!==e[n]&&(r+=n+"="+this.encodeValue(e[n])+"^");t="o:"+r.substring(0,r.length-1)}else t="s:"+e;return escape(t)}}),Ext.define("Ext.state.Manager",{singleton:!0,requires:["Ext.state.Provider"],constructor:function(){this.provider=new Ext.state.Provider},setProvider:function(e){this.provider=e},get:function(e,t){return this.provider.get(e,t)},set:function(e,t){this.provider.set(e,t)},clear:function(e){this.provider.clear(e)},getProvider:function(){return this.provider}}),Ext.define("Ext.state.Stateful",{mixinId:"state",requires:["Ext.state.Manager","Ext.util.TaskRunner"],config:{stateful:null},saveDelay:100,constructor:function(){this.stateEvents||(this.stateEvents=[]),this.stateful&&(this.addStateEvents(this.stateEvents),this.initState())},addStateEvents:function(e){var t,i,n,r;if(this.stateful&&this.getStateId())for(r="string"==typeof e?arguments:e,n=this.stateEventsByName||(this.stateEventsByName={}),t=r.length;t--;)(i=r[t])&&!n[i]&&(n[i]=1,this.on(i,this.onStateChange,this))},onStateChange:function(){var e,t,i=this.saveDelay;this.stateful&&(i?(this.stateTask||(t=(e=Ext.state.Stateful).runner||(e.runner=new Ext.util.TaskRunner),this.stateTask=t.newTask({run:this.saveState,scope:this,interval:i,repeat:1,fireIdleEvent:!1})),this.stateTask.start()):this.saveState())},saveState:function(){var e,t,i,n,r,o,a,s,l=this,d=l.getStateful(),u=d&&l.getStateId(),c=l.hasListeners;if(u){if(a=l.getState()||{},Ext.isObject(d))for(r in t=(t=l.self.getConfigurator()).configs,d)d[r]?r in a||(e=t[r],a[r]=e?l[e.get]():l[r]):delete a[r];for(r=0,o=(i=l.getPlugins()||[]).length;r<o;r++)(n=i[r])&&n.getState&&(s=n.getState(a))&&!a[n.ptype]&&(a[n.ptype]=s);c.beforestatesave&&!1===l.fireEvent("beforestatesave",l,a)||(Ext.state.Manager.set(u,a),c.statesave&&l.fireEvent("statesave",l,a))}},getState:function(){return null},applyState:function(e){e&&Ext.apply(this,e)},getStateId:function(){return this.stateId||(this.autoGenId?null:this.id)},initState:function(){var e,t,i,n,r,o,a,s=this.stateful&&this.getStateId(),l=this.hasListeners;if(s&&(t=Ext.state.Manager.get(s))&&(e=Ext.apply({},t),!l.beforestaterestore||!1!==this.fireEvent("beforestaterestore",this,t))){for(i=0,n=(r=this.getPlugins()||[]).length;i<n;i++)(o=r[i])&&(a=o.ptype,o.applyState&&o.applyState(e[a],t),delete e[a]);this.applyState(e),l.staterestore&&this.fireEvent("staterestore",this,t)}},savePropToState:function(e,t,i){var n=this[e],r=this.initialConfig;return!(!this.hasOwnProperty(e)||r&&r[e]===n)&&(t&&(t[i||e]=n),!0)},savePropsToState:function(e,t){var i,n;if("string"==typeof e)this.savePropToState(e,t);else for(i=0,n=e.length;i<n;++i)this.savePropToState(e[i],t);return t},destroy:function(){var e=this.stateTask;e&&(e.destroy(),this.stateTask=null)}}),Ext.define("Ext.Component",{alternateClassName:"Ext.AbstractComponent",xtype:["component","box"],requires:["Ext.ComponentQuery","Ext.ComponentManager","Ext.util.ProtoElement","Ext.dom.CompositeElement","Ext.plugin.Abstract","Ext.plugin.Manager","Ext.scroll.Scroller"],mixins:["Ext.mixin.Inheritable","Ext.util.Floating","Ext.util.Positionable","Ext.util.Observable","Ext.mixin.ComponentDelegation","Ext.mixin.Bindable","Ext.util.Animate","Ext.util.ElementContainer","Ext.util.Renderable","Ext.state.Stateful","Ext.mixin.Focusable","Ext.mixin.Accessible","Ext.mixin.Keyboard"],uses:["Ext.overrides.*","Ext.Element","Ext.DomHelper","Ext.XTemplate","Ext.ComponentLoader","Ext.layout.Context","Ext.layout.Layout","Ext.layout.component.Auto","Ext.LoadMask","Ext.ZIndexManager","Ext.util.DelayedTask","Ext.resizer.Resizer","Ext.util.ComponentDragger"],statics:{AUTO_ID:1e3,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[.,\s]/g,ariaHighContrastModeCls:Ext.baseCSSPrefix+"aria-highcontrast",cancelLayout:function(e,t){var i=this.runningLayoutContext||this.pendingLayouts;i&&i.cancelComponent(e,!1,t)},from:function(e,t,i){return Ext.ComponentManager.from(e,t,i)},fromElement:function(e,t,i){return Ext.ComponentManager.from(e,t,i)},flushLayouts:function(){var n=this,e=n.pendingLayouts;e&&e.invalidQueue.length&&(n.pendingLayouts=null,n.runningLayoutContext=e,Ext.override(e,{runComplete:function(){var e,t=Ext.scroll.Scroller,i=Ext.GlobalEvents;return n.runningLayoutContext=null,t.viewport&&t.viewport.restoreState(),e=this.callParent(),i.hasListeners.afterlayout&&i.fireEvent("afterlayout"),e}}),e.run())},resumeLayouts:function(e){this.layoutSuspendCount&&!--this.layoutSuspendCount&&(e&&this.flushLayouts(),Ext.GlobalEvents.hasListeners.resumelayouts&&Ext.GlobalEvents.fireEvent("resumelayouts"))},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(e,t){var i=this.runningLayoutContext;i?i.queueInvalidate(e):((this.pendingLayouts||(this.pendingLayouts=new Ext.layout.Context)).queueInvalidate(e),t||this.layoutSuspendCount||e.isLayoutSuspended()||this.flushLayouts())}},$configPrefixed:!1,$configStrict:!1,clearPropertiesOnDestroy:"async",manageLayoutScroll:!0,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},renderConfig:{touchAction:null},defaultBindProperty:"html",alignTarget:null,autoRender:!1,autoShow:!1,baseCls:Ext.baseCSSPrefix+"component",childEls:{frameTable:{frame:!0},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:!1,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:function(){var e=["input","select","textarea","optgroup","option","table"];return!Ext.isIE9m||Ext.isIE9&&!Ext.isIEQuirks||e.push("p"),new RegExp("^(?:"+e.join("|")+")$","i")}(),disabledCls:Ext.baseCSSPrefix+"item-disabled",draggable:!1,floating:!1,hidden:!1,hideMode:"display",maskElement:null,renderTpl:"{%this.renderContent(out,values)%}",resizeHandles:"all",shrinkWrap:2,toFrontOnShow:!0,synthetic:!1,tplWriteMode:"overwrite",ui:"default",uiCls:[],userCls:null,weight:null,allowDomMove:!0,autoGenId:!1,borderBoxCls:Ext.baseCSSPrefix+"border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:!1,frameSize:null,horizontalPosProp:"left",isComponent:!0,_isLayoutRoot:!1,layoutSuspendCount:0,liquidLayout:!1,maskOnDisable:!0,rendered:!1,rootCls:Ext.baseCSSPrefix+"body",scrollerCls:Ext.baseCSSPrefix+"scroll-scroller",_scrollFlags:{auto:{auto:{overflowX:"auto",overflowY:"auto",x:!0,y:!0,both:!0},false:{overflowX:"auto",overflowY:"hidden",x:!0,y:!1,both:!1},scroll:{overflowX:"auto",overflowY:"scroll",x:!0,y:!0,both:!0}},false:{auto:{overflowX:"hidden",overflowY:"auto",x:!1,y:!0,both:!1},false:{overflowX:"hidden",overflowY:"hidden",x:!1,y:!1,both:!1},scroll:{overflowX:"hidden",overflowY:"scroll",x:!1,y:!0,both:!1}},scroll:{auto:{overflowX:"scroll",overflowY:"auto",x:!0,y:!0,both:!0},false:{overflowX:"scroll",overflowY:"hidden",x:!0,y:!1,both:!1},scroll:{overflowX:"scroll",overflowY:"scroll",x:!0,y:!0,both:!0}},none:{overflowX:"",overflowY:"",x:!1,y:!1,both:!1}},_scrollableCfg:{x:{x:!0,y:!1},y:{x:!1,y:!0},horizontal:{x:!0,y:!1},vertical:{x:!1,y:!0},both:{x:!0,y:!0},true:{x:!0,y:!0}},validIdRe:Ext.validIdRe,constructor:function(e){var t,i,n,r,o,a,s,l,d=this;if((e=e||{}).initialConfig?(e.isAction&&(d.baseAction=e),e=e.initialConfig):(e.tagName||e.dom||Ext.isString(e))&&(e={applyTo:e,id:e.id||e}),d.initialConfig=e,d.$iid=++Ext.$nextIid,(e&&e.controller||d.config.controller)&&(d.referenceHolder=!0),d.getId(),d.protoEl=new Ext.util.ProtoElement,d.$calledInitConfig=!0,d.initConfig(e),delete d.$calledInitConfig,null==d.scrollable&&((o=d.autoScroll)?l=!!o:(a=d.overflowX,s=d.overflowY,(a||s)&&(l={x:!(!a||"hidden"===a)&&a,y:!(!s||"hidden"===s)&&s})),l&&d.setScrollable(l)),(n=d.xhooks)&&(delete d.xhooks,Ext.override(d,n)),d.mixins.elementCt.constructor.call(d),d.validIdRe.test(d.id)||Ext.raise('Invalid component "id": "'+d.id+'"'),d.validIdRe.test(d.itemId)||Ext.raise('Invalid component "itemId": "'+d.itemId+'"'),d.setupProtoEl(),d.cls&&(d.initialCls=d.cls,d.protoEl.addCls(d.cls)),d.style&&(d.initialStyle=d.style,d.protoEl.setStyle(d.style)),d.renderData=d.renderData||{},d.initComponent(),d.preventRegister||Ext.ComponentManager.register(d),d.mixins.state.constructor.call(d),d.addStateEvents("resize"),(r=d.getController())&&r.init(d),d.plugins)for(t=0,i=d.plugins.length;t<i;t++)d.plugins[t]=d.initPlugin(d.plugins[t]);d.loader=d.getLoader(),d.disabled&&(d.disabled=!1,d.disable(!0)),d.renderTo&&d.render(d.renderTo),d.autoShow&&!d.$initParent&&d.show(),Ext.isDefined(d.disabledClass)&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.Component: disabledClass has been deprecated. Please use disabledCls."),d.disabledCls=d.disabledClass,delete d.disabledClass),d.baseAction&&d.baseAction.addComponent(d)},beforeInitConfig:function(){this.$calledInitConfig||Ext.raise("initConfig should not be called by subclasses, it will be called by Ext.Component"),this.mixins.observable.constructor.call(this)},addCls:function(e){var t=this.rendered?this.el:this.protoEl;return t.addCls.apply(t,arguments),this},addClsWithUI:function(e,t){var i,n,r=[],o=0,a=this.uiCls=Ext.Array.clone(this.uiCls),s=this.activeUI;for("string"==typeof e&&(e=e.indexOf(" ")<0?[e]:Ext.String.splitWords(e)),i=e.length;o<i;o++)(n=e[o])&&!this.hasUICls(n)&&(a.push(n),s&&(r=r.concat(this.addUIClsToElement(n))));return!0!==t&&s&&this.addCls(r),r},afterComponentLayout:function(e,t,i,n){var r=this.scrollable;1==++this.componentLayoutCounter?this.afterFirstLayout(e,t):this.manageLayoutScroll&&r&&r.restoreState(),e===i&&t===n||this.onResize(e,t,i,n),this.floating&&this.onAfterFloatLayout()},addPlugin:function(e){return e=this.constructPlugin(e),this.plugins?this.plugins.push(e):this.plugins=[e],this.pluginsInitialized&&this.initPlugin(e),e},addPropertyToState:function(e,t,i){var n=arguments.length;return 3!==n&&!this.hasOwnProperty(t)||(n<3&&(i=this[t]),i!==this.initialConfig[t]&&((e=e||{})[t]=i)),e},addUIClsToElement:function(e){var t,i,n,r,o=this.baseCls+"-"+this.ui+"-"+e,a=[Ext.baseCSSPrefix+e,this.baseCls+"-"+e,o];if(this.rendered&&this.frame&&!Ext.supports.CSS3BorderRadius)for(i in o+="-",t=this.getChildEls())(r=t[i].frame)&&!0!==r&&(n=this[i])&&n.addCls(o+r);return a},removeUIClsFromElement:function(e){var t,i,n,r,o=this.baseCls+"-"+this.ui+"-"+e,a=[Ext.baseCSSPrefix+e,this.baseCls+"-"+e,o];if(this.rendered&&this.frame&&!Ext.supports.CSS3BorderRadius)for(i in o+="-",t=this.getChildEls())(r=t[i].frame)&&!0!==r&&(n=this[i])&&n.removeCls(o+r);return a},adjustPosition:function(e,t){var i;return this.isContainedFloater()&&(e+=(i=this.floatParent.getTargetEl().getViewRegion()).left,t+=i.top),{x:e,y:t}},afterHide:function(e,t){var i=this,n=i.ownerFocusableContainer;delete i.getInherited().topmostFocusEvent,i.hiddenByLayout=null,i.ownerLayout&&i.updateLayout({isRoot:!1}),n&&!n.onFocusableChildHide.$nullFn&&n.onFocusableChildHide(i),i.fireHierarchyEvent("hide"),i.fireEvent("hide",i),Ext.callback(e,t||i)},afterSetPosition:function(e,t){this.onPosition(e,t),this.hasListeners.move&&this.fireEvent("move",this,e,t)},afterShow:function(e,t,i){var n,r,o,a=this,s=a.el,l=a.zIndexManager;e=a.getAnimateTarget(e),l&&l.suspendReflow(),a.ghost||(e=null),e?(r={x:s.getX(),y:s.getY(),width:s.dom.offsetWidth,height:s.dom.offsetHeight},n={x:e.getX(),y:e.getY(),width:e.dom.offsetWidth,height:e.dom.offsetHeight},a.fireHierarchyEvent("show"),(o=a.ghost()).el.stopAnimation(),o.setX(-1e4),a.ghostBox=r,o.el.animate({from:n,to:r,listeners:{beforeanimate:function(){a.modal&&o.toFront()},afteranimate:function(){a.destroying||(o.componentLayout.lastComponentSize=null,a.unghost(),a.ghostBox=null,a.onShowComplete(t,i))}}})):(a.onShowComplete(t,i),a.fireHierarchyEvent("show")),l&&l.resumeReflow(!0)},animate:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x=this;return o=(e=e||{}).to||{},Ext.fx.Manager.hasFxBlock(x.id)?x:((t=Ext.isDefined(o.width))&&(r=Ext.Number.constrain(o.width,x.minWidth,x.maxWidth)),(i=Ext.isDefined(o.height))&&(n=Ext.Number.constrain(o.height,x.minHeight,x.maxHeight)),e.dynamic||!t&&!i||(d=l=(e.from?e.from.width:void 0)||x.getWidth(),c=u=(e.from?e.from.height:void 0)||x.getHeight(),h=!1,i&&u<n&&(c=n,h=!0),t&&l<r&&(d=r,h=!0),(i||t)&&"hidden"!==(m=x.el.getStyle("overflow"))&&x.el.setStyle("overflow","hidden"),h&&(a=!Ext.isNumber(x.width),s=!Ext.isNumber(x.height),x.setSize(d,c),x.el.setSize(l,u),a&&delete x.width,s&&delete x.height),t&&(o.width=r),i&&(o.height=n)),f=x.constrain,g=x.constrainHeader,(f||g)&&(x.constrain=x.constrainHeader=!1,p=e.callback,e.callback=function(){x.constrain=f,x.constrainHeader=g,p&&p.call(e.scope||x,arguments),"hidden"!==m&&x.el.setStyle("overflow",m)}),x.mixins.animate.animate.apply(x,arguments))},applyScrollable:function(e,t){var i,n=this,r=n.rendered;return e?(!0!==e&&"string"!=typeof e||((i=n._scrollableCfg[e])||Ext.raise("'"+e+"' is not a valid value for 'scrollable'"),e=i),t?(t.setConfig(e),e=t):(e=Ext.Object.chain(e),r&&(e.element=n.getOverflowEl()),(e=Ext.scroll.Scroller.create(e,n.scrollableType)).component=n)):t&&(e=t).setConfig({x:!1,y:!1}),!n.rendered||n.destroying||n.destroyed||(e?n.getOverflowStyle():n.scrollFlags=n._scrollFlags.none,n.updateLayout()),e},getScrollableClientRegion:function(){return this.getScrollable().getElement().getClientRegion()},applyTouchAction:function(e,t){return null!=t&&(e=Ext.merge({},t,e)),e},beforeDestroy:Ext.emptyFn,beforeLayout:function(){this.floating&&this.onBeforeFloatLayout()},beforeSetPosition:function(e,t,i){var n,r,o,a,s=null;return e&&(Ext.isNumber(n=e[0])?(i=t,t=e[1],e=n):void 0!==(n=e.x)&&(i=t,t=e.y,e=n)),(this.constrain||this.constrainHeader)&&(s=this.calculateConstrainedPosition(null,[e,t],!0))&&(e=s[0],t=s[1]),o=void 0!==t,((r=void 0!==e)||o)&&(this.x=e,this.y=t,s={x:(a=this.adjustPosition(e,t)).x,y:a.y,anim:i,hasX:r,hasY:o}),s},beforeShow:Ext.emptyFn,bubble:function(e,t,i){for(var n=this;n&&!1!==e.apply(t||n,i||[n]);)n=n.getBubbleTarget();return this},clearListeners:function(){this.mixins.observable.clearListeners.call(this),this.mixins.componentDelegation.clearDelegatedListeners.call(this)},cloneConfig:function(e){var t=(e=e||{}).id||Ext.id(),i=Ext.applyIf(e,this.initialConfig);return i.id=t,new(Ext.getClass(this))(i)},destroy:function(){var e=this;e.hasListeners.beforedestroy&&!1===e.fireEvent("beforedestroy",e)||(e.isDestroying=e.destroying=!0,e.doDestroy(),e.clearListeners(),e.isDestroying=e.destroying=!1,e.callParent(),e.mixins.componentDelegation.destroyComponentDelegation.call(e),e.mixins.observable.destroyObservable.call(e,!0))},doDestroy:function(){var e,t,i,n=this,r=n.ownerFocusableContainer,o=n.container,a=n.renderSelectors;if(t=n.floatParent||n.ownerCt,n.floating&&(delete n.floatParent,n.zIndexManager&&!n.zIndexManager.destroyed&&n.zIndexManager.unregister(n),n.floating=!0),n.removeBindings(),n.beforeDestroy.$emptyFn||n.beforeDestroy(),n.destroyBindable(),t&&t.remove&&t.remove(n,{destroy:!1}),n.stopAnimation(),n.rendered&&Ext.destroy(n.loadMask,n.dd,n.resizer,n.proxy,n.proxyWrap,n.resizerComponent,n.scrollable,n.contentEl),r&&!r.onFocusableChildDestroy.$nullFn&&r.onFocusableChildDestroy(n),n.focusable&&n.destroyFocusable(),Ext.destroy(n.componentLayout,n.loadMask,n.floatingDescendants),n.onDestroy.$emptyFn||n.onDestroy(),Ext.destroy(n.plugins),n.rendered&&Ext.Component.cancelLayout(n,!0),n.componentLayout=null,n.hasListeners.destroy&&n.fireEvent("destroy",n),n.preventRegister||Ext.ComponentManager.unregister(n),n.mixins.state.destroy.call(n),n.floating&&n.onFloatDestroy(),n.rendered){if(n.showListenerIE&&(n.showListenerIE.destroy(),n.showListenerIE=null),n.preserveElOnDestroy||n.el.destroy(),n.collectContainerElement&&o&&(o.destroyed||o.collect(),n.container=null),n.el.component=null,n.mixins.elementCt.destroy.call(n),a)for(e in a)a.hasOwnProperty(e)&&(i=n[e])&&(delete n[e],i.destroy());n.rendered=!1}},disable:function(e,t){var i=this,n=i.ownerFocusableContainer,r=i.getInherited();return t||(r.disabled=!0,i.savedDisabled=!0),i.maskOnDisable&&(r.disableMask=!0),i.disabled||(n&&!n.beforeFocusableChildDisable.$nullFn&&n.beforeFocusableChildDisable(i),i.addCls(i.disabledCls),i.rendered?i.onDisable():i.disableOnRender=!0,(i.disabled=!0)!==e&&i.fireEvent("disable",i),n&&!n.onFocusableChildDisable.$nullFn&&n.onFocusableChildDisable(i)),i},doFireEvent:function(e,t,i){var n;return!1===(n=this.mixins.observable.doFireEvent.call(this,e,t,i))||this.destroyed||(n=this.mixins.componentDelegation.doFireDelegatedEvent.call(this,e,t)),n},enable:function(e,t){var i=this,n=i.ownerFocusableContainer,r=i.getInherited();return t||(delete i.getInherited().disabled,i.savedDisabled=!1),i.maskOnDisable&&delete r.disableMask,i.disabled&&(t&&r.hasOwnProperty("disabled")||(n&&!n.beforeFocusableChildEnable.$nullFn&&n.beforeFocusableChildEnable(i),i.disableOnRender=!1,i.removeCls(i.disabledCls),i.rendered&&i.onEnable(),!(i.disabled=!1)!==e&&i.fireEvent("enable",i),n&&!n.onFocusableChildEnable.$nullFn&&n.onFocusableChildEnable(i))),i},findParentBy:function(e){var t;for(t=this.getRefOwner();t&&!e(t,this);t=t.getRefOwner());return t||null},findParentByType:function(t){return Ext.isFunction(t)?this.findParentBy(function(e){return e.self===t||e.constructor===t}):this.up(t)},findPlugin:function(e){var t,i=this.plugins,n=i&&i.length;for(t=0;t<n;t++)if(i[t].ptype===e)return i[t]},getAnimateTarget:function(e){return(e=(e=e||this.animateTarget)&&(e.isComponent?e.getEl():Ext.get(e)))||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){return this.componentLayout&&this.componentLayout.isLayout||this.setComponentLayout(Ext.layout.Layout.create(this.componentLayout,"autocomponent")),this.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(e){var t=this.componentLayout;this.hidden&&(e.hidden=!0),this.collapseImmune&&(e.collapseImmune=!0),void 0!==this.modelValidation&&(e.modelValidation=this.modelValidation),this.savedDisabled&&(e.disabled=!0),this.mixins.bindable.initInheritedState.call(this,e),t&&t.initInheritedState&&t.initInheritedState(e)},getId:function(){var e;return this.id||(this.id=this.initialConfig.id)||(e=(e=this.getXType())?e.replace(Ext.Component.INVALID_ID_CHARS_Re,"-"):Ext.name.toLowerCase()+"-comp",this.id=e+"-"+this.getAutoId()),this.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var e=this.loader;return e?(e.isLoader?e.setTarget(this):this.loader=new Ext.ComponentLoader(Ext.apply({target:this},e)),this.loader):null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(e){var t,i,n=this.plugins,r=n&&n.length;for(t=0;t<r;t++)if((i=n[t]).id===e||i.pluginId===e)return i;return null},getPosition:function(e){var t,i,n=this.isContainedFloater();return!0!==e||n?(t=this.getXY(),!0===e&&n&&(i=this.floatParent.getTargetEl().getViewRegion(),t[0]-=i.left,t[1]-=i.top),t):[this.getLocalX(),this.getLocalY()]},getScrollX:function(){var e=this.getScrollable();return e?e.getPosition().x:0},getScrollY:function(){var e=this.getScrollable();return e?e.getPosition().y:0},getSize:function(e){return this.el.getSize(e)},getSizeModel:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f=this,g=Ext.layout.SizeModel,p=f.componentLayout.ownerContext,m=f.width,x=f.height,y=f.floating||f.floated;return p&&(h=p.widthModel,s=p.heightModel),h&&s||(n="number"==(t=typeof m),r="number"==(i=typeof x),(c=y||!(l=f.ownerLayout))?(d=Ext.layout.Layout.prototype.autoSizePolicy,u=y?3:f.shrinkWrap,n&&(h=g.configured),r&&(s=g.configured)):(d=l.getItemSizePolicy(f,e),u=l.isItemShrinkWrap(f)),p&&(p.ownerSizePolicy=d),u=!0===u?3:u||0,c&&u&&(m&&"string"==t&&(u&=2,o=!0),x&&"string"==i&&(u&=1,a=!0)),3!==u&&(e=e||f.ownerCt&&f.ownerCt.getSizeModel())&&(u|=(e.width.shrinkWrap?1:0)|(e.height.shrinkWrap?2:0)),h=h||(d.setsWidth||f.frame&&o?d.readsWidth?n?g.calculatedFromConfigured:1&u?g.calculatedFromShrinkWrap:g.calculatedFromNatural:g.calculated:n?g.configured:1&u?g.shrinkWrap:g.natural),s=s||(d.setsHeight||f.frame&&a?d.readsHeight?r?g.calculatedFromConfigured:2&u?g.calculatedFromShrinkWrap:g.calculatedFromNatural:g.calculated:r?g.configured:2&u?g.shrinkWrap:g.natural)),h.pairsByHeightOrdinal[s.ordinal]},getState:function(){var e=null,t=this.getSizeModel();return t.width.configured&&(e=this.addPropertyToState(e,"width")),t.height.configured&&(e=this.addPropertyToState(e,"height")),e},getUserCls:function(){return this.userCls},setUserCls:function(e){var t=this.userCls;return e!==t&&(this.userCls=e,this.rendered&&this.el.replaceCls(t,e)),t},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var e,t,i,n=this.self;if(!n.xtypes){for(e=[],t=this;t;)void 0!==(i=t.xtypes)&&e.unshift.apply(e,i),t=t.superclass;n.xtypeChain=e,n.xtypes=e.join("/")}return n.xtypes},hasCls:function(e){var t=this.rendered?this.el:this.protoEl;return t.hasCls.apply(t,arguments)},hasUICls:function(e){var t=this.uiCls||[];return Ext.Array.contains(t,e)},hide:function(e,t,i){var n=this,r=n.ownerFocusableContainer;return n.pendingShow&&(n.pendingShow=!1),n.rendered&&!n.isVisible()||n.hasListeners.beforehide&&!1===n.fireEvent("beforehide",n)&&!n.hierarchicallyHidden||(n.getInherited().hidden=n.hidden=!0,r&&!r.beforeFocusableChildHide.$nullFn&&r.beforeFocusableChildHide(n),n.fireHierarchyEvent("beforehide"),n.rendered&&n.onHide.apply(n,arguments)),n},initComponent:function(){var e=this,t=e.width,i=e.height;e.plugins&&!e.plugins.processed&&e.constructPlugins(),e.pluginsInitialized=!0,null==t&&null==i||e.setSize(t,i),e.listeners&&(e.on(e.listeners),e.listeners=null),e.focusable&&e.initFocusable()},initEvents:function(){var e,t,i,n,r,o=this.afterRenderEvents;if(o)for(i in o)if((t=this[i])&&t.on)for(n=0,r=(e=o[i]).length;n<r;++n)this.mon(t,e[n]);this.focusable&&this.initFocusableEvents(),this.initKeyMap()},is:function(e){return Ext.ComponentQuery.is(this,e)},isDisabled:function(){return this.disabled},isDraggable:function(){return!!this.draggable},isDroppable:function(){return!!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},getHidden:function(){return this.hidden},isHierarchicallyHidden:function(){for(var e,t,i=this,n=!1;e=i.ownerCt||i.floatParent;i=e){if((t=e.getInherited()).hidden){n=!0;break}if(!i.getInherited().collapseImmune){n=!!t.collapsed;break}if(e.collapsed&&!i.collapseImmune){n=!0;break}}return n},isLayoutChild:function(e){return!this.floating&&!!this.up(e)},isLayoutRoot:function(){var e=this.ownerLayout;return!(e&&!this._isLayoutRoot&&!this.floating)||e.isItemLayoutRoot(this)},isLayoutSuspended:function(){for(var e,t=this;t;){if(t.layoutSuspendCount||t.suspendLayout)return!0;if(!(e=t.ownerLayout))break;t=e.owner}return!1},isVisible:function(e){var t;return this.hidden||!this.rendered||this.destroyed?t=!0:e&&(t=this.isHierarchicallyHidden()),!t},isXType:function(e,t){return t?-1!==Ext.Array.indexOf(this.xtypes,e):!!this.xtypesMap[e]},isMasked:function(e){return!!(this.masked||this.loadMask&&this.loadMask.isVisible()||e&&this.getInherited().masked)},lookupTpl:function(e){return Ext.XTemplate.getTpl(this,e)},setMasked:function(e){var t=this.ownerFocusableContainer;return e?(this.masked=!0,this.getInherited().masked=e):(this.masked=!1,delete this.getInherited().masked),t&&!t.onFocusableChildMasked.$nullFn&&t.onFocusableChildMasked(this,e),this},mask:function(e,t,i){var n=this.lastBox,r=this.getMaskTarget()||this.el;n&&(i=n.height),r.mask(e,t,i),this.setMasked(!0)},nextNode:function(e,t){var i,n,r,o,a,s=this.ownerCt;if(t&&this.is(e))return this;if(s){for(n=s.items.items,o=Ext.Array.indexOf(n,this)+1,r=n.length;o<r;o++){if((a=n[o]).is(e))return a;if(a.down&&(i=a.down(e)))return i}return s.nextNode(e)}return null},nextSibling:function(e){var t,i,n,r,o=this.ownerCt;if(o&&(n=(t=o.items).indexOf(this)+1))if(e){for(i=t.getCount();n<i;n++)if((r=t.getAt(n)).is(e))return r}else if(n<t.getCount())return t.getAt(n);return null},onAdded:function(e,t,i){this.ownerCt=e,this.onInheritedAdd(this,i),this.hasListeners&&this.hasListeners.added&&this.fireEvent("added",this,e,t),Ext.GlobalEvents.hasListeners.added&&this.fireHierarchyEvent("added")},onRemoved:function(e){var t,i=this;!i.isLayoutMoving&&i.el&&i.el.contains(Ext.Element.getActiveElement())&&(t=i.findFocusTarget())&&t.focus(),Ext.GlobalEvents.hasListeners.removed&&i.fireHierarchyEvent("removed"),i.hasListeners.removed&&i.fireEvent("removed",i,i.ownerCt),i.onInheritedRemove(e),i.ownerCt=i.ownerLayout=null},onBoxReady:function(e,t){var i,n=this;(n.ariaLabelledBy||n.ariaDescribedBy)&&(n.ariaLabelledBy&&(i=n.getAriaLabelEl(n.ariaLabelledBy))&&n.ariaEl.dom.setAttribute("aria-labelledby",i),n.ariaDescribedBy&&(i=n.getAriaLabelEl(n.ariaDescribedBy))&&n.ariaEl.dom.setAttribute("aria-describedby",i)),n.resizable&&n.initResizable(n.resizable),n.draggable&&n.initDraggable(),n.hasListeners.boxready&&n.fireEvent("boxready",n,e,t)},onDestroy:Ext.emptyFn,onDisable:function(){var e,t,i=this;i.focusable&&i.disableFocusable(),i.ariaStaticRoles[i.ariaRole]||i.ariaEl.dom.setAttribute("aria-disabled",!0),i.maskOnDisable&&!i.getInheritedConfig("disableMask",!0)&&(t=(e=i.el.dom).nodeName,i.disabledRe.test(t)&&(e.disabled=!0),i.nonMaskableRe.test(t)||i.mask())},onEnable:function(){var e,t,i=this;i.focusable&&i.enableFocusable(),i.ariaStaticRoles[i.ariaRole]||i.ariaEl.dom.setAttribute("aria-disabled",!1),i.maskOnDisable&&i.getInherited().hasOwnProperty("masked")&&(t=(e=i.el.dom).nodeName,i.disabledRe.test(t)&&(e.disabled=!1),i.nonMaskableRe.test(t)||i.unmask())},onGlobalShow:function(e){this.up(e)&&this.getScrollable().restoreState()},onHide:function(e,t,i){var n,r,o,a=this;a.ariaStaticRoles[a.ariaRole]||a.destroying||a.destroyed||a.ariaEl.dom.setAttribute("aria-hidden",!0),a.revertFocus(),e=a.getAnimateTarget(e),a.ghost||(e=null),e?(o={x:e.getX(),y:e.getY(),width:e.dom.offsetWidth,height:e.dom.offsetHeight},(n=a.ghost()).el.stopAnimation(),r=a.getSize(),n.el.animate({to:o,listeners:{afteranimate:function(){a.destroying||(n.componentLayout.lastComponentSize=null,a.unghost(!1),n.el.setSize(r),a.afterHide(t,i))}}})):a.el.hide(),e||a.afterHide(t,i)},onPosition:Ext.emptyFn,onResize:function(e,t,i,n){this.floating&&this.constrain&&this.doConstrain(),this.hasListeners.resize&&this.fireEvent("resize",this,e,t,i,n)},onShow:function(){var e=this;e.ariaStaticRoles[e.ariaRole]||e.ariaEl.dom.setAttribute("aria-hidden",!1),e.el.show(),e.updateLayout({isRoot:!1,context:e._showContext}),e.floating&&(e.maximized?e.fitContainer():e.constrain&&e.doConstrain())},_showContext:{show:!0},onShowComplete:function(e,t){var i=this.ownerFocusableContainer;this.floating&&this.onFloatShow(),Ext.callback(e,t||this),this.fireEvent("show",this),i&&!i.onFocusableChildShow.$nullFn&&i.onFocusableChildShow(this),delete this.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(e,t){var i,n,r,o,a=this.ownerCt;if(t&&this.is(e))return this;if(a){for(n=a.items.items,r=Ext.Array.indexOf(n,this)-1;-1<r;r--){if((o=n[r]).query&&(i=(i=o.query(e))[i.length-1]))return i;if(o.is(e))return o}return a.previousNode(e,!0)}return null},previousSibling:function(e){var t,i,n,r=this.ownerCt;if(r&&-1!==(i=(t=r.items).indexOf(this)))if(e){for(--i;0<=i;i--)if((n=t.getAt(i)).is(e))return n}else if(i)return t.getAt(--i);return null},registerFloatingItem:function(e){this.floatingDescendants||(this.floatingDescendants=new Ext.ZIndexManager(this)),this.floatingDescendants.register(e)},removeCls:function(e){var t=this.rendered?this.el:this.protoEl;return t.removeCls.apply(t,arguments),this},removeClsWithUI:function(e,t){var i,n,r=[],o=0,a=Ext.Array,s=a.remove,l=this.uiCls=a.clone(this.uiCls),d=this.activeUI;for("string"==typeof e&&(e=e.indexOf(" ")<0?[e]:Ext.String.splitWords(e)),i=e.length,o=0;o<i;o++)(n=e[o])&&this.hasUICls(n)&&(s(l,n),d&&(r=r.concat(this.removeUIClsFromElement(n))));return!0!==t&&d&&this.removeCls(r),r},resumeLayouts:function(e){this.rendered&&(this.layoutSuspendCount||Ext.log.warn("Mismatched call to resumeLayouts - layouts are currently not suspended."),this.layoutSuspendCount&&!--this.layoutSuspendCount&&(this.suspendLayout=!1,e&&!this.isLayoutSuspended()&&this.updateLayout(e)))},scrollBy:function(e,t,i){var n=this.getScrollable();n&&n.scrollBy(e,t,i)},scrollTo:function(e,t,i){var n=this.getScrollable();n&&n.scrollTo(e,t,i)},setAutoScroll:function(e){return this.setScrollable(!!e),this},setBorder:function(e,t){var i=!!t;(this.rendered||i)&&(i||(t=this.el),e=e?!0===e?"1px":this.unitizeBox(e):0,t.setStyle("border-width",e),i||this.updateLayout()),this.border=e},setDock:function(e){var t=this.ownerCt;return e!==this.dock&&(t&&t.moveDocked?t.moveDocked(this,e):this.dock=e),this},setDisabled:function(e){return this[e?"disable":"enable"]()},setFlex:function(e){this.flex=e},setHeight:function(e){return this.setSize(void 0,e)},setLoading:function(e,t){var i=this,n={target:i};return i.rendered&&(!1!==e?(Ext.isString(e)?n.msg=e:Ext.apply(n,e,i.maskDefaults),i.loadMask&&i.loadMask.isLoadMask?Ext.apply(i.loadMask,n):(t&&null==n.useTargetEl&&(n.useTargetEl=!0),i.loadMask=new Ext.LoadMask(n)),i.loadMask.isVisible()?i.loadMask.syncMaskState():i.loadMask.show()):i.loadMask&&i.loadMask.isLoadMask&&i.loadMask.hide()),i.loadMask},setMargin:function(e,t){this.rendered?(e=e||0===e?(!0===e&&(e=5),this.unitizeBox(e)):"",this.margin=e,this.margin$=null,this.getEl().setStyle("margin",e),t||this.updateLayout(this._notAsLayoutRoot)):this.margin=e},setOverflowXY:function(e,t){return this.setScrollable({x:!(!e||"hidden"===e)&&e,y:!(!t||"hidden"===t)&&t}),this},setPagePosition:function(e,t,i){var n,r,o=this;return Ext.isArray(e)&&(t=e[1],e=e[0]),o.pageX=e,o.pageY=t,o.floating?(o.isContainedFloater()?(r=o.floatParent.getTargetEl().getViewRegion(),Ext.isNumber(e)&&Ext.isNumber(r.left)&&(e-=r.left),Ext.isNumber(t)&&Ext.isNumber(r.top)&&(t-=r.top)):(e=(n=o.el.translateXY(e,t)).x,t=n.y),o.setPosition(e,t,i)):(n=o.el.translateXY(e,t),o.setPosition(n.x,n.y,i)),o},setPosition:function(e,t,i){var n=this,r=n.beforeSetPosition.apply(n,arguments);return r&&n.rendered&&(e=r.x,t=r.y,i?e===n.getLocalX()&&t===n.getLocalY()||(n.stopAnimation(),n.animate(Ext.apply({duration:1e3,listeners:{afteranimate:Ext.Function.bind(n.afterSetPosition,n,[e,t])},to:{left:e,top:t}},i))):(n.setLocalXY(e,t),n.afterSetPosition(e,t))),n},setScrollX:function(e,t){var i=this.getScrollable();i&&i.scrollTo(e,null,t)},setScrollY:function(e,t){var i=this.getScrollable();i&&i.scrollTo(null,e,t)},setSize:function(e,t){var i,n,r=this,o=r.width,a=r.height;return e&&"object"==typeof e&&(t=e.height,e=e.width),"number"==typeof e?r.width=Ext.Number.constrain(e,r.minWidth,r.maxWidth):null===e?delete r.width:"string"==typeof e&&(i=!0,r.width=e),"number"==typeof t?r.height=Ext.Number.constrain(t,r.minHeight,r.maxHeight):null===t?delete r.height:"string"==typeof t&&(n=!0,r.height=t),r.rendered&&r.isVisible()&&(o===r.width&&a===r.height||((r.liquidLayout||i||n)&&r.el.setSize(r.width,r.height),r.updateLayout(r._notAsLayoutRoot))),r},setStyle:function(e,t){return(this.el||this.protoEl).setStyle(e,t),this},setUI:function(e){var t,i=this,n=i.uiCls,r=i.activeUI;e!==r&&(r?((t=i.removeClsWithUI(n,!0)).length&&i.removeCls(t),i.removeUIFromElement()):i.uiCls=[],i.ui=e,i.activeUI=e,i.addUIToElement(),(t=i.addClsWithUI(n,!0)).length&&i.addCls(t),i.rendered&&i.updateLayout())},setVisible:function(e){return this[e?"show":"hide"]()},setHidden:function(e){return this.setVisible(!e)},setWidth:function(e){return this.setSize(e)},show:function(e,t,i){var n=this,r=n.rendered,o=n.ownerFocusableContainer;return n.hierarchicallyHidden||n.floating&&!r&&n.isHierarchicallyHidden()?(r||n.initHierarchyEvents(),1<arguments.length?(e=null,n.pendingShow=arguments):n.pendingShow=!0):r&&n.isVisible()?n.floating&&(n.onFloatShow(),n.toFrontOnShow&&n.toFront()):!1!==n.fireEvent("beforeshow",n)?(n.hidden=!1,delete this.getInherited().hidden,o&&!o.beforeFocusableChildShow.$nullFn&&o.beforeFocusableChildShow(n),Ext.suspendLayouts(),r||!n.autoRender&&!n.floating||(n.doAutoRender(),r=n.rendered),r?(n.beforeShow(),Ext.resumeLayouts(),n.onShow.apply(n,arguments),n.afterShow.apply(n,arguments)):Ext.resumeLayouts(!0)):n.onShowVeto(),n},showAt:function(e,t,i){var n=this;return n.rendered||!n.autoRender&&!n.floating?n.floating?n.setPosition(e,t,i):n.setPagePosition(e,t,i):(n.x=e,n.y=t),n.show()},showBy:function(e,t,i){var n=this;return n.floating||Ext.log.warn("Using showBy on a non-floating component"),n.floating&&e&&(n._lastAlignTarget=e,n._lastAlignToPos=t||n.defaultAlign,n.alignOffset&&n.alignOffset===i||(n.alignOffset=i),n._lastAlignToOffsets=i||n.alignOffset,n.show()),n},suspendLayouts:function(){this.rendered&&1==++this.layoutSuspendCount&&(this.suspendLayout=!0)},toggleCls:function(e,t){return void 0===t&&(t=!this.hasCls(e)),this[t?"addCls":"removeCls"](e)},unitizeBox:function(e){return Ext.Element.unitizeBox(e)},unmask:function(){(this.getMaskTarget()||this.el).unmask(),this.setMasked(!1)},unregisterFloatingItem:function(e){this.floatingDescendants&&this.floatingDescendants.unregister(e)},up:function(e,t){var i=this.getRefOwner(),n="string"==typeof t,r="number"==typeof t,o=t&&t.isComponent,a=0;if(e)for(;i;i=i.getRefOwner()){if(i.destroyed)return null;if(a++,e.isComponent){if(i===e)return i}else if(Ext.ComponentQuery.is(i,e))return i;if(n&&i.is(t))return;if(r&&a===t)return;if(o&&i===t)return}return i},update:function(e,t,i,n){var r,o,a,s=this,l=s.tpl&&!Ext.isString(e),d=s.ownerFocusableContainer;l?s.data=e&&e.isEntity?e.getData(!0):e:s.html=Ext.isObject(e)?Ext.DomHelper.markup(e):e,s.rendered&&(o=(r=s.getSizeModel()).width.shrinkWrap||r.height.shrinkWrap,s.isContainer?(a=s.layout.getRenderTarget(),o=o||0<s.items.items.length):a=s.getTargetEl(),l?s.tpl[s.tplWriteMode](a,s.data||{}):a.setHtml(s.html,t,i,n||s),o&&s.updateLayout(),d&&!d.onFocusableChildUpdate.$nullFn&&d.onFocusableChildUpdate(s))},setHtml:function(e,t,i,n){this.update(e,t,null,n)},applyData:function(e){this.update(e)},updateBox:function(e){return this.setSize(e.width,e.height),this.setPagePosition(e.x,e.y),this},_asLayoutRoot:{isRoot:!0},_notAsLayoutRoot:{isRoot:!1},updateLayout:function(e){var t,i=this,n=i.lastBox,r=e&&e.isRoot,o=e&&e.context;n&&(n.invalid=!0),!i.rendered||i.isDetached||i.layoutSuspendCount||i.suspendLayout||(i.hidden?Ext.Component.cancelLayout(i):"boolean"!=typeof r&&(r=i.isLayoutRoot()),!r&&i.ownerLayout&&i.ownerLayout.onContentChange(i,o)||i.isLayoutSuspended()||(t=e&&e.hasOwnProperty("defer")?e.defer:i.deferLayouts,Ext.Component.updateLayout(i,t)))},updateMaxHeight:function(e,t){this.changeConstraint(e,t,"min","max-height","height")},updateMaxWidth:function(e,t){this.changeConstraint(e,t,"min","max-width","width")},updateMinHeight:function(e,t){this.changeConstraint(e,t,"max","min-height","height")},updateMinWidth:function(e,t){this.changeConstraint(e,t,"max","min-width","width")},updateTouchAction:function(e){var t,i,n,r;for(t in e)i=this[t],n=e[t],i&&i.isElement?i.setTouchAction(n):r=!0;r&&this.el.setTouchAction(e)},getAnchorToXY:function(e,t,i,n){return e.getAnchorXY(t,i,n)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(e){this.el.setLocalX(e)},setLocalXY:function(e,t){this.el.setLocalXY(e,t)},setLocalY:function(e){this.el.setLocalY(e)},setX:function(e,t){this.el.setX(e,t)},setXY:function(e,t){this.el.setXY(e,t)},setY:function(e,t){this.el.setY(e,t)},privates:{addOverCls:function(){this.disabled||this.el.addCls(this.overCls)},addUIToElement:function(){var e,t,i,n,r=this.baseCls+"-"+this.ui;if(this.addCls(r),this.rendered&&this.frame&&!Ext.supports.CSS3BorderRadius)for(t in r+="-",e=this.getChildEls())(n=e[t].frame)&&!0!==n&&(i=this[t])&&i.addCls(r+n)},changeConstraint:function(e,t,i,n,r){var o=this[r];null!=e&&"number"==typeof o&&(this[r]=Math[i](o,e)),this.liquidLayout&&(null!=e?this.setStyle(n,e+"px"):t&&this.setStyle(n,"")),this.rendered&&this.updateLayout()},constructPlugin:function(e){var t=Ext.plugin.Manager;return e="string"==typeof e?t.create({},e,this):t.create(e,null,this)},constructPlugins:function(){var e,t,i,n=this.plugins;if(n)for(this.plugins=e=Ext.plugin.Abstract.decode(n,"ptype"),e.processed=!0,t=0,i=e.length;t<i;t++)e[t]=this.constructPlugin(e[t]);return this.pluginsInitialized=!0,e},detachFromBody:function(){this.isDetached||(Ext.getDetachedBody().appendChild(this.el,!0),Ext.Component.cancelLayout(this),this.isDetached=!0)},doAddListener:function(e,t,i,n,r,o,a){var s,l,d,u,c,h=this;if(Ext.isObject(t)||n&&n.element){if(n.element)for(l in u=n.element,(s={})[e]=t,i&&(s.scope=i),d=h.$elementEventOptions,n)d[l]&&(s[l]=n[l]);else s=t,u=e;(c=h[u])&&c.isObservable?h.mon(c,s):(h.afterRenderEvents=h.afterRenderEvents||{},h.afterRenderEvents[u]||(h.afterRenderEvents[u]=[]),h.afterRenderEvents[u].push(s))}else n&&n.delegate?h.mixins.componentDelegation.addDelegatedListener.call(h,e,t,i,n,r,o,a):h.mixins.observable.doAddListener.call(h,e,t,i,n,r,o,a)},doRemoveListener:function(e,t,i){this.mixins.observable.doRemoveListener.call(this,e,t,i),this.mixins.componentDelegation.removeDelegatedListener.call(this,e,t,i)},fireHierarchyEvent:function(e){var t=Ext.GlobalEvents;t.hasListeners[e]&&t.fireEvent(e,this)},getActionEl:function(){return this.el},getAutoId:function(){return this.autoGenId=!0,++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var e,t,i,n=this.getScrollable(),r=this._scrollFlags;return i=n?(!0===(e=n.getX())&&(e="auto"),!0===(t=n.getY())&&(t="auto"),r[e][t]):r.none,{overflowX:(this.scrollFlags=i).overflowX,overflowY:i.overflowY}},getPlugins:function(){var e=this.plugins;return(e=e&&e.processed?e:this.constructPlugins())||null},getProxy:function(){var e;return this.proxy||(e=Ext.getBody(),this.proxy=this.el.createProxy(Ext.baseCSSPrefix+"proxy-el",e,!0)),this.proxy},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return Ext.baseCSSPrefix+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(e){return Ext.log.warn("getTpl is deprecated, use lookupTpl."),this.lookupTpl(e)},initCls:function(){var e=this,t=[e.baseCls],i=e.getComponentLayout().targetCls;return i&&t.push(i),Ext.isDefined(e.cmpCls)&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.Component: cmpCls has been deprecated. Please use componentCls."),e.componentCls=e.cmpCls,delete e.cmpCls),e.componentCls?t.push(e.componentCls):e.componentCls=e.baseCls,t},initDraggable:function(){var e,t,i=this;e=i.resizer&&i.resizer.el!==i.el?i.resizerComponent=new Ext.Component({el:i.resizer.el,rendered:!0,container:i.container}):i,t=Ext.applyIf({el:e.getDragEl(),constrainTo:i.constrain||i.draggable.constrain?i.constrainTo||(i.floatParent?i.floatParent.getTargetEl():i.container):void 0},i.draggable),(i.constrain||i.constrainDelegate)&&(t.constrain=i.constrain,t.constrainDelegate=i.constrainDelegate),i.dd=new Ext.util.ComponentDragger(e,t)},initPadding:function(e){var t=this.padding;null!=t&&(this.layout&&this.layout.managePadding&&"padding"===this.contentPaddingProperty?e.setStyle("padding",0):e.setStyle("padding",this.unitizeBox(!0===t?5:t)))},initPlugin:function(e){return e.init(this),e},initResizable:function(e){((e=Ext.apply({target:this,dynamic:!1,constrainTo:this.constrain||e&&e.constrain?this.constrainTo||(this.floatParent?this.floatParent.getTargetEl():this.container):void 0,handles:this.resizeHandles},e)).target=this).resizer=new Ext.resizer.Resizer(e)},initStyles:function(e){var t,i,n=this,r=n.margin,o=n.border,a=n.cls,s=n.style,l=n.x,d=n.y,u=n.liquidLayout;n.initPadding(e),null!=r&&e.setStyle("margin",this.unitizeBox(!0===r?5:r)),null!=o&&n.setBorder(o,e),a&&a!==n.initialCls&&(e.addCls(a),n.cls=n.initialCls=null),s&&s!==n.initialStyle&&(e.setStyle(s),n.style=n.initialStyle=null),null!=l&&e.setStyle(n.horizontalPosProp,"number"==typeof l?l+"px":l),null!=d&&e.setStyle("top","number"==typeof d?d+"px":d),n.ownerCt&&!n.floating||(Ext.scopeCss&&e.addCls(n.rootCls),e.addCls(n.borderBoxCls)),!u&&n.getFrameInfo()||(t=n.width,i=n.height,null!=t&&("number"==typeof t?e.setStyle("width",t+"px"):e.setStyle("width",t)),null!=i&&("number"==typeof i?e.setStyle("height",i+"px"):e.setStyle("height",i)))},isContainedFloater:function(){return this.floating&&this.floatParent},isDescendant:function(e){var t;if(e.isContainer)for(t=this.ownerCt;t;t=t.ownerCt)if(t===e)return!0;return!1},owns:function(e){var t,i=!1;return e.isEvent?e=e.target:e.isElement&&(e=e.dom),(t=Ext.Component.fromElement(e))&&(i=t===this||!!t.up(this)),i},parseBox:function(e){return Ext.Element.parseBox(e)},reattachToBody:function(){this.isDetached=!1},removeManagedListenerItem:function(e,t,i,n,r,o){var a=t.options?t.options.element:null;if(!a)return this.mixins.observable.removeManagedListenerItem.apply(this,arguments);(a=this[a])&&a.un&&(!e&&(t.item!==i||t.ename!==n||r&&t.fn!==r||o&&t.scope!==o)||(a.un(t.ename,t.fn,t.scope),e||Ext.Array.remove(this.managedListeners,t)))},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(e){Ext.Array.remove(this.plugins,e),e.destroy()},removeUIFromElement:function(){var e,t,i,n,r=this.baseCls+"-"+this.ui;if(this.removeCls(r),this.rendered&&this.frame&&!Ext.supports.CSS3BorderRadius)for(t in r+="-",e=this.getChildEls())(n=e[t].frame)&&!0!==n&&(i=this[t])&&i.removeCls(r+n)},setComponentLayout:function(e){var t=this.componentLayout;t&&t.isLayout&&t!==e&&t.setOwner(null),(this.componentLayout=e).setOwner(this)},setHiddenState:function(e){var t=this.getInherited(),i=this.zIndexManager;(this.hidden=e)?t.hidden=!0:delete t.hidden,i&&i.onComponentShowHide(this)},setupProtoEl:function(){var e=this.initCls();this.protoEl.addCls(e)},wrapPrimaryEl:function(e){var t=this.el;t&&t.isElement||(this.el=Ext.get(e)),this.floating&&this.mixins.floating.constructor.call(this)}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){return this.updateLayout(),this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},function(i){var e=i.prototype;(e.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1,(e.$eventOptions=Ext.Object.chain(e.$eventOptions)).delegate=1,i.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"}),Ext.resumeLayouts=function(e){i.resumeLayouts(e)},Ext.suspendLayouts=function(){i.suspendLayouts()},Ext.batchLayouts=function(e,t){i.suspendLayouts();try{e.call(t)}finally{i.resumeLayouts(!0)}},Ext.setGlyphFontFamily=function(e){Ext._glyphFontFamily=e},i.hierarchyEventSource=e.hierarchyEventSource=Ext.GlobalEvents,Ext.onReady(function(){Ext.supports.HighContrastMode&&Ext.getBody().addCls(i.ariaHighContrastModeCls)})}),Ext.define("Ext.overrides.mixin.Focusable",{override:"Ext.Component",focusCls:"focus",focus:function(e,t,i,n){var r,o=this;return!o.focusable&&!o.isContainer||o.destroyed||o.destroying||(t?o.getFocusTask().delay(Ext.isNumber(t)?t:10,o.focus,o,[e,!1,i,n]):(o.cancelFocus(),o.floating&&o.container&&o.container.dom&&(r=o.container.dom.scrollTop),!1!==o.mixins.focusable.focus.apply(o,arguments)&&(i&&Ext.callback(i,n),o.floating&&void 0!==r&&(o.container.dom.scrollTop=r)))),o},cancelFocus:function(){var e=this.getFocusTask();e&&e.cancel()},beforeBlur:Ext.emptyFn,postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,postFocus:Ext.emptyFn,onFocusEnter:function(e){this.destroying||this.destroyed||(this.floating&&this!==this.zIndexManager.getActive()&&this.toFront(!0),this.callParent([e]))},destroyFocusable:function(){this.focusTask&&this.focusTask.stop(this.focus,this),this.callParent()},privates:{addFocusCls:function(e){var t,i=this.focusCls;i&&(t=this.getFocusClsEl(e))&&t.addCls(this.addClsWithUI(i,!0))},removeFocusCls:function(e){var t,i=this.focusCls;i&&(t=this.getFocusClsEl(e))&&t.removeCls(this.removeClsWithUI(i,!0))},getFocusTask:function(){return this.focusTask||(this.focusTask=Ext.focusTask),this.focusTask},updateMaskState:function(e,t){var i,n=this,r=n.ariaEl.dom,o=n.getInherited().disabled&&n.getInherited().disableMask;e?(n.disableTabbing(),o||n.setMasked(!0),r&&(r.setAttribute("aria-busy","true"),(i=r.getAttribute("aria-describedby"))&&(n._savedAriaDescribedBy=i),r.setAttribute("aria-describedby",t.ariaEl.id))):(n.enableTabbing(),o||n.setMasked(!1),r&&(r.removeAttribute("aria-busy"),i=r.getAttribute("aria-describedby"),r.removeAttribute("aria-describedby"),i===t.ariaEl.id&&n._savedAriaDescribedBy&&(r.setAttribute("aria-describedby",n._savedAriaDescribedBy),delete n._savedAriaDescribedBy)))}}},function(){Ext.focusTask||(Ext.focusTask=new Ext.util.DelayedTask)}),Ext.define("Ext.Responsive",{override:"Ext.Component",mixins:["Ext.mixin.Responsive"],requires:["Ext.ResponsiveWidget"]}),Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var t=this;t._borderRegionInited||(t._borderRegionInited=!0,t.addStateEvents(["changeregion","changeweight"]),Ext.override(t,{getState:function(){var e=t.callParent();return e=t.addPropertyToState(e,"region"),e=t.addPropertyToState(e,"weight")}}))},getOwningBorderContainer:function(){var e=this.getOwningBorderLayout();return e&&e.owner},getOwningBorderLayout:function(){var e=this.ownerLayout;return e&&e.isBorderLayout?e:null},setRegion:function(e){var t,i=this,n=i.region;if("string"!=typeof e&&Ext.raise("Use setBox to set the size or position of a component."),e!==n)if(t=i.getOwningBorderLayout()){var r,o,a,s=t.regionFlags[e],l=i.placeholder,d=i.splitter,u=t.owner,c=t.regionMeta,h=i.collapsed||i.floated;if(!1===i.fireEventArgs("beforechangeregion",[i,e]))return n;Ext.suspendLayouts(),i.region=e,Ext.apply(i,s),i.updateCollapseTool&&i.updateCollapseTool(),d&&(Ext.apply(d,s),d.updateOrientation(),0<=(a=(o=u.items).indexOf(i))&&(r=c[e].splitterDelta,o.getAt(a+r)!==d&&(o.remove(d),a=o.indexOf(i),0<r&&++a,o.insert(a,d)))),l&&(h&&i.expand(!1),u.remove(l),i.placeholder=null,h&&i.collapse(null,!1)),u.updateLayout(),Ext.resumeLayouts(!0),i.fireEventArgs("changeregion",[i,n])}else i.region=e;return n},setWeight:function(e){var t=this.getOwningBorderContainer(),i=this.placeholder,n=this.weight;return e!==n&&!1!==this.fireEventArgs("beforechangeweight",[this,e])&&(this.weight=e,i&&(i.weight=e),t&&t.updateLayout(),this.fireEventArgs("changeweight",[this,n])),n}},function(e){var t=e.prototype;t.setBorderRegion=t.setRegion,t.setRegionWeight=t.setWeight}),Ext.define("Ext.overrides.app.domain.Component",{override:"Ext.app.domain.Component",requires:["Ext.Component"]},function(e){e.monitor(Ext.Component)}),Ext.define("Ext.app.EventBus",{singleton:!0,requires:["Ext.app.domain.Component"],constructor:function(){var e=Ext.app.EventDomain.instances;this.callParent(),this.domains=e,this.bus=e.component.bus},control:function(e,t){return this.domains.component.listen(e,t)},listen:function(e,t){var i,n=this.domains;for(i in e)e.hasOwnProperty(i)&&n[i].listen(e[i],t)},unlisten:function(e){var t,i=Ext.app.EventDomain.instances;for(t in i)i[t].unlisten(e)}}),Ext.define("Ext.app.domain.Global",{extend:"Ext.app.EventDomain",requires:["Ext.GlobalEvents"],singleton:!0,type:"global",constructor:function(){this.callParent(),this.monitor(Ext.GlobalEvents)},listen:function(e,t){this.callParent([{global:e},t])},match:Ext.returnTrue}),Ext.define("Ext.route.Handler",{lazy:!1,statics:{fromRouteConfig:function(e,t){return new this({action:e.action,before:e.before,lazy:e.lazy,exit:e.exit,scope:t,single:e.single})}},constructor:function(e){Ext.apply(this,e)}}),Ext.define("Ext.route.Action",{config:{actions:null,befores:null,urlParams:[]},started:!1,stopped:!1,constructor:function(e){this.deferred=new Ext.Deferred,this.resume=this.resume.bind(this),this.stop=this.stop.bind(this),this.initConfig(e),this.callParent([e])},applyActions:function(e){return e=e&&Ext.Array.from(e)},applyBefores:function(e){return e=e&&Ext.Array.from(e)},destroy:function(){this.deferred=null,this.setBefores(null).setActions(null).setUrlParams(null),this.callParent()},resume:function(){return this.next()},stop:function(){return this.stopped=!0,this.done()},next:function(){var e,t,i,n=this,r=n.getActions(),o=n.getBefores(),a=n.getUrlParams();return i=Ext.isArray(a)?a.slice():[a],!n.stopped&&(o&&o.length||r&&r.length)?o&&o.length?(e=o.shift(),i.push(n),(t=Ext.callback(e.fn,e.scope,i))&&t.then&&t.then(function(e){n.resume(e)},function(e){n.stop(e)})):(r&&r.length&&(e=r.shift(),Ext.callback(e.fn,e.scope,i)),n.next()):n.done(),n},run:function(){var e=this.deferred;return this.started||(this.next(),this.started=!0),e.promise},done:function(){var e=this.deferred;return this.stopped?e.reject():e.resolve(),this.destroy(),this},before:function(e,t,i){Ext.isBoolean(e)||(i=t,t=e,e=!1);var n=this.getBefores(),r={fn:t,scope:i};if(!this.destroyed)return n?e?n.unshift(r):n.push(r):this.setBefores(r),this;Ext.raise("This action has has already resolved and therefore will never execute this function.")},action:function(e,t,i){Ext.isBoolean(e)||(i=t,t=e,e=!1);var n=this.getActions(),r={fn:t,scope:i};if(!this.destroyed)return n?e?n.unshift(r):n.push(r):this.setActions(r),this;Ext.raise("This action has has already resolved and therefore will never execute this function.")},then:function(e,t){if(!this.destroyed)return this.deferred.then(e,t);Ext.raise("This action has has already resolved and therefore will never execute either function.")}}),Ext.define("Ext.route.Route",{requires:["Ext.route.Action","Ext.route.Handler"],config:{name:null,url:null,allowInactive:!1,conditions:{},caseInsensitive:!1,handlers:[],types:{cached:!0,$value:{alpha:{re:"([a-zA-Z]+)"},alphanum:{re:"([a-zA-Z0-9]+|[0-9]+(?:\\.[0-9]+)?|[0-9]*(?:\\.[0-9]+){1})",parse:function(e){var t;return e&&this.numRe.test(e)&&(t=parseFloat(e),isNaN(t)||(e=t)),e}},num:{re:"([0-9]+(?:\\.[0-9]+)?|[0-9]*(?:\\.[0-9]+){1})",parse:function(e){return e=e&&parseFloat(e)}},"...":{re:"(.+)?",split:"/",parse:function(e){var t,i,n;if(e)for(t=e.length,i=0;i<t;i++)n=parseFloat(e[i]),isNaN(n)||(e[i]=n);return e}}}}},defaultMatcher:"([%a-zA-Z0-9\\-\\_\\s,]+)",numRe:/^[0-9]*(?:\.[0-9]*)?$/,typeParamRegex:/:{([0-9A-Za-z_]+)(?::?([0-9A-Za-z_]+|.{3})?)}/g,optionalGroupRegex:/\((.+?)\)/g,paramMatchingRegex:/:([0-9A-Za-z_]+)/g,isRoute:!0,constructor:function(e){var t;this.initConfig(e),(t=this.getUrl().replace(this.optionalGroupRegex,function(e,t){return"(?:"+t+")?"})).match(this.typeParamRegex)?this.handleNamedPattern(t):this.handlePositionalPattern(t)},handlePositionalPattern:function(e){this.paramsInMatchString=e.match(this.paramMatchingRegex)||[],this.matcherRegex=this.createMatcherRegex(e),this.mode="positional"},handleNamedPattern:function(o){var e=this.typeParamRegex,a=this.getConditions(),s=this.getTypes(),l=this.defaultMatcher,d={},t=o.replace(e,function(e,t,i){var n=i&&s[i],r=a[t]||n||l;return d[t]&&Ext.raise('"'+t+'" already defined in route "'+o+'"'),i&&!n&&Ext.raise('Unknown parameter type "'+i+'" in route "'+o+'"'),Ext.isObject(r)&&(r=r.re),d[t]={matcher:r,type:i},r});-1!==t.search(this.paramMatchingRegex)&&Ext.raise("URL parameter mismatch. Positional url parameter found while in named mode."),this.paramsInMatchString=d,this.matcherRegex=new RegExp("^"+t+"$",this.getCaseInsensitive()?"i":""),this.mode="named"},recognize:function(e){var t,i,n,r,o,a;if(this.recognizes(e)){for(i=(t=this.getHandlers()).length,a=0;a<i;a++)if(t[a].lastToken!==e){n=!0;break}return n||e!==this.lastToken?(r=this.matchesFor(e),o=this.getUrlParams(e),Ext.applyIf(r,{historyUrl:e,urlParams:o})):!0}return!1},getUrlParams:function(e){return"named"===this.mode?this.getNamedUrlParams(e):this.getPositionalUrlParams(e)},getPositionalUrlParams:function(e){var t,i,n,r,o=[],a=this.getConditions(),s=this.paramsInMatchString,l=e.match(this.matcherRegex),d=s.length;for(l.shift(),t=0;t<d;t++)i=s[t],r=l[t],a[i]?n=a[i]:":"===i[0]&&a[i=i.substr(1)]&&(n=a[i]),r=this.parseValue(r,n),Ext.isDefined(r)&&""!==r&&(Ext.isArray(r)?o.push.apply(o,r):o.push(r));return o},getNamedUrlParams:function(e){var t,i,n,r,o,a=this.getConditions(),s=this.getTypes(),l={},d=this.paramsInMatchString,u=e.match(this.matcherRegex);for(t in u.shift(),d)i=d[t],n=u.shift(),o=a[t],r=s[i.type],(o||r)&&(r=Ext.merge({},o,s[i.type])),l[t]=this.parseValue(n,r);return l},parseValue:function(e,t){return t&&(e&&t.split&&((e=e.split(t.split))[0]||e.shift(),e[e.length-1]||e.pop()),t.parse&&(e=t.parse.call(this,e))),!e&&Ext.isString(e)&&(e=void 0),e},recognizes:function(e){return this.matcherRegex.test(e)},execute:function(i,n){var r,o,a,s,l,d,u,c=this,h=c.getAllowInactive(),f=c.getHandlers(),g=Ext.route.Router.getQueueRoutes(),p=f.length,m=n&&n.urlParams||[];return c.lastToken=i,g||(l=[]),new Ext.Promise(function(e,t){if(!1===n)t();else{for(g&&(s=new Ext.route.Action({urlParams:m})),r=0;r<p;r++)o=f[r],null!=i&&o.lastToken===i||(a=o.scope,o.lastToken=i,!h&&a.isActive&&!a.isActive()||(g||(s=new Ext.route.Action({urlParams:m})),d=o.single,o.before&&s.before(o.before,a),o.action&&s.action(o.action,a),d&&(u=Ext.bind(c.removeHandler,c,[null,o]),!0===d?o.action?s.action(u,c):s.before(function(){return u(),Ext.Promise.resolve()},c):s.before("before"===d,function(){return u(),Ext.Promise.resolve()},c)),g||(!1===Ext.fireEvent("beforeroute",s,c)?s.destroy():l.push(s.run()))));g?!1===Ext.fireEvent("beforeroute",s,c)?(s.destroy(),t()):s.run().then(e,t):Ext.Promise.all(l).then(e,t)}})},matchesFor:function(e){var t,i={},n="named"===this.mode?Ext.Object.getKeys(this.paramsInMatchString):this.paramsInMatchString,r=e.match(this.matcherRegex),o=n.length;for(r.shift(),t=0;t<o;t++)i[n[t].replace(":","")]=r[t];return i},createMatcherRegex:function(e){var t,i,n,r=this.paramsInMatchString,o=this.getConditions(),a=this.defaultMatcher,s=r.length,l=this.getCaseInsensitive()?"i":"";if("*"===e)e=e.replace("*","\\*");else for(t=0;t<s;t++)n=o[i=r[t]]?o[i]:":"===i[0]&&o[i.substr(1)]?o[i.substr(1)]:a,Ext.isObject(n)&&(n=n.re),e=e.replace(new RegExp(i),n||a);return new RegExp("^"+e+"$",l)},addHandler:function(e){var t=this.getHandlers();return e.isInstance||(e=new Ext.route.Handler(e)),t.push(e),e.route=this},removeHandler:function(e,t){var i,n,r=this.getHandlers(),o=r.length,a=[];for(i=0;i<o;i++)n=r[i],t?n!==t&&a.push(n):n.scope!==e&&a.push(n);return this.setHandlers(a),this},clearLastTokens:function(){var e,t=this.getHandlers(),i=t.length;for(e=0;e<i;e++)t[e].lastToken=null;this.lastToken=null},onExit:function(){var e,t,i,n=this.getHandlers(),r=this.getAllowInactive(),o=n.length,a=new Ext.route.Action({urlParams:[this.lastToken]});for(this.clearLastTokens(),e=0;e<o;e++)if((t=n[e]).exit){if(i=t.scope,!r&&i.isActive&&!i.isActive())continue;a.action(t.exit,i)}!1===Ext.fireEvent("beforerouteexit",a,this)?a.destroy():a.run()}}),Ext.define("Ext.util.History",{singleton:!0,alternateClassName:"Ext.History",mixins:{observable:"Ext.util.Observable"},useTopWindow:!1,hashRe:/^(#?!?)/,constructor:function(){this.ready=!1,this.currentToken=null,this.mixins.observable.constructor.call(this)},getHash:function(){return(this.win.location.hash||"").replace(this.hashRe,"")},setHash:function(e,t){var i=this.hashRe,n=this.win.location;e=e.replace(i,this.hashbang?"#!":"#");try{t?n.replace(e):n.hash=e,this.currentToken=e.replace(i,"")}catch(e){}},handleStateChange:function(e){e=e.replace(this.hashRe,""),this.fireEvent("change",this.currentToken=e)},startUp:function(){this.currentToken=this.getHash(),Ext.get(this.win).on("hashchange",this.onHashChange,this),this.ready=!0,this.fireEvent("ready",this)},onHashChange:function(){var e=this.getHash();e!==this.hash&&(this.hash=e,this.handleStateChange(e))},init:function(e,t){var i=this;i.ready?Ext.callback(e,t,[i]):Ext.isReady?(i.win=i.useTopWindow?window.top:window,i.hash=i.getHash(),e&&i.on("ready",e,t,{single:!0}),i.startUp()):Ext.onInternalReady(function(){i.init(e,t)})},add:function(e,t){var i=!1;return!1!==t&&this.getToken()===e||(this.setHash(e),i=!0),i},replace:function(e,t){var i=!1;return!1!==t&&this.getToken()===e||(this.setHash(e,!0),i=!0),i},back:function(){this.win.history.go(-1)},forward:function(){this.win.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}}),Ext.define("Ext.route.Router",{singleton:!0,requires:["Ext.route.Action","Ext.route.Route","Ext.util.History"],config:{hashbang:null,multipleToken:"|",queueRoutes:!0},constructor:function(){var e=Ext.util.History;e.ready||e.init(),e.on("change",this.onStateChange,this),this.initConfig(),this.clear()},updateHashbang:function(e){Ext.util.History.hashbang=e},onStateChange:function(e){var t,i,n,r=e.split(this.getMultipleToken());if(this.isSuspended){if(t=this.suspendedQueue,i=0,n=r.length,t)for(;i<n;i++)e=r[i],Ext.Array.contains(t,e)||t.push(e)}else this.handleBefore(r)},handleBefore:function(e){var t=new Ext.route.Action;!1===Ext.fireEvent("beforeroutes",t,e)?t.destroy():t.run().then(this.handleBeforeRoute.bind(this,e),Ext.emptyFn)},handleBeforeRoute:function(e){var t=this.getByName("*");t?t.execute().then(this.doRun.bind(this,e),Ext.emptyFn):this.doRun(e)},doRun:function(e){for(var t,i,n,r,o,a=this.application,s=this.routes,l=0,d=e.length,u={},c=[];l<d;l++){for(n in t=e[l],i=!1,s)(o=(r=s[n]).recognize(t))?((i=!0)!==o&&r.execute(t,o).then(null,Ext.bind(this.onRouteRejection,this,[r],0)),Ext.Array.remove(c,r),u[n]||(u[n]=1)):u[n]||c.push(r);i||(a&&a.fireEvent("unmatchedroute",t),Ext.fireEvent("unmatchedroute",t))}for(l=0,d=c.length;l<d;l++)c[l].onExit()},onRouteRejection:function(e,t){Ext.fireEvent("routereject",e,t),t&&Ext.raise(t)},connect:function(e,t,i){var n,r,o=this.routes,a=this.getMultipleToken(),s=t.name||e,l=Ext.getVersion().parts.slice(0,3).join(".");if("!"===e[0]&&(Ext.util.History.hashbang||Ext.log({level:"error",msg:'Route found with "!" ("'+e+'"). Should use new hashbang functionality instead. Please see the router guide for more: https://docs.sencha.com/extjs/'+l+"/guides/application_architecture/router.html"}),e=e.substr(1),this.setHashbang(!0)),Ext.isString(t)&&(t={action:t}),n=Ext.route.Handler.fromRouteConfig(t,i),(r=o[s])||(t.name=s,t.url=e,r=o[s]=new Ext.route.Route(t)),r.addHandler(n),n.lazy){var d,u,c=Ext.util.History.getToken().split(a),h=c.length,f=[];for(d=0;d<h;d++)u=c[d],-1===Ext.Array.indexOf(f,u)&&r.recognize(u)&&f.push(u);this.onStateChange(f.join(a))}return n},disconnect:function(e,t){var i,n,r=this.routes;if(t)(i=t.route||this.getByName(t.name||t.url))&&i.removeHandler(e,t);else for(n in r)(i=r[n]).removeHandler(e)},recognize:function(e){var t,i,n,r,o,a,s=this.routes,l=[];for(t in s)if(r=(i=s[t])&&i.length)for(n=0;n<r;n++)(a=(o=i[n]).recognize(e))&&l.push({route:o,urlParams:a});return!!l.length&&l},draw:function(e){e.call(this,this)},clear:function(){this.routes={}},clearLastTokens:function(e){var t,i,n=this.routes;for(t in n)i=n[t],e&&!i.recognize(e)||i.clearLastTokens()},getByName:function(e){var t=this.routes;if(t)return t[e]},suspend:function(e){this.isSuspended=!0,this.suspendedQueue||!1===e||(this.suspendedQueue=[])},resume:function(e){var t,i=this.suspendedQueue;this.isSuspended&&(this.isSuspended=!1,this.suspendedQueue=null,!e&&i&&(t=i.join(this.getMultipleToken()),this.onStateChange(t)))}}),Ext.define("Ext.route.Mixin",{extend:"Ext.Mixin",requires:["Ext.route.Handler","Ext.route.Router"],mixinConfig:{id:"routerable",before:{destroy:"destroyRouterable"}},config:{routes:null},destroyRouterable:function(){Ext.route.Router.disconnect(this)},applyRoutes:function(e,t){var i,n=Ext.route.Router;if(e)for(i in e)e[i]=n.connect(i,e[i],this);if(t)for(i in t)n.disconnect(this,t[i]);return e},redirectTo:function(e,t){var i,n,r,o,a,s,l,d=Ext.util.History.getToken(),u=Ext.route.Router,c=u.getMultipleToken(),h=d?d.split(c):[],f=h.length;if(-1===e)return Ext.util.History.back();if(1===e)return Ext.util.History.forward();if(e.isModel)e=e.toUrl();else if(Ext.isObject(e)){for(r in e)if(o=e[r],Ext.isObject(o)||(o={token:o}),f){if(a=u.getByName(r)){for(l=!1,n=0;n<f;n++)if(s=h[n],a.matcherRegex.test(s))if(l=!0,o.token){if(o.fn&&!1===o.fn.call(this,s,h,o))continue;h[n]=o.token,o.force&&(a.lastToken=null)}else h.splice(n,1),n--,f--,a.lastToken=null;o&&o.token&&!l&&h.push(o.token)}}else o&&o.token&&h.push(o.token);e=h.join(c)}if(!0===t?(i=t,t=null):t&&(i=t.force),f=h.length,i&&f)for(n=0;n<f;n++)s=h[n],u.clearLastTokens(s);return d===e?(i&&u.onStateChange(e),!1):(t&&t.replace?Ext.util.History.replace(e):Ext.util.History.add(e),!0)},privates:{afterClassMixedIn:function(e){var t=e.prototype,i=t.routes;i&&(delete t.routes,e.getConfigurator().add({routes:i}))}}}),Ext.define("Ext.app.BaseController",{requires:["Ext.app.EventBus","Ext.app.domain.Global"],uses:["Ext.app.domain.Controller"],mixins:["Ext.mixin.Observable","Ext.route.Mixin"],isController:!0,config:{id:void 0,control:null,listen:null},constructor:function(e){Ext.apply(this,e),delete this.control,delete this.listen,this.eventbus=Ext.app.EventBus,this.mixins.observable.constructor.call(this,e)},updateId:function(e){this.id=e},applyListen:function(e){return Ext.isObject(e)&&(e=Ext.clone(e)),e},applyControl:function(e){return Ext.isObject(e)&&(e=Ext.clone(e)),e},updateControl:function(e){this.getId(),e&&this.control(e)},updateListen:function(e){this.getId(),e&&this.listen(e)},isActive:function(){return!0},control:function(e,t,i){var n,r=i;Ext.isString(e)?(n={})[e]=t:(n=e,r=t),this.eventbus.control(n,r||this)},listen:function(e,t){this.eventbus.listen(e,t||this)},destroy:function(){var e=this.eventbus;e&&(e.unlisten(this),this.eventbus=null),this.callParent()}}),Ext.define("Ext.app.Util",{},function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(e){var t,i,n=Ext.app.namespaces;for(Ext.isArray(e)||(e=[e]),t=0,i=e.length;t<i;t++)n[e[t]]=!0},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(e){var t,i=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),n="";for(t in i)i.hasOwnProperty(t)&&t.length>n.length&&t+"."===e.substring(0,t.length+1)&&(n=t);return""===n?void 0:n},setupPaths:function(e,t,i){var n,r=Ext.manifest;if(e&&null!==t&&((r=r&&r.paths)&&void 0===t||Ext.Loader.setPath(e,void 0===t?"app":t)),i)for(n in i)i.hasOwnProperty(n)&&Ext.Loader.setPath(n,i[n])}}),Ext.getNamespace=Ext.app.getNamespace}),Ext.define("Ext.util.CollectionKey",{mixins:["Ext.mixin.Identifiable"],isCollectionKey:!0,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:!0},generation:0,map:null,mapRebuilds:0,constructor:function(e){this.initConfig(e),Ext.isFunction(this.getKey)||Ext.raise("CollectionKey requires a keyFn or property config")},get:function(e){return(this.map||this.getMap())[e]||null},clear:function(){this.map=null},getRootProperty:function(){var e=this.callParent();return null!==e?e:this.getCollection().getRootProperty()},indexOf:function(e,t){var i,n,r,o,a=(this.map||this.getMap())[e],s=this.getCollection(),l=s.length;if(!a)return-1;if(void 0===t&&(t=-1),a instanceof Array){for(n=l,o=(r=a).length;0<o--;)(i=s.indexOf(r[o]))<n&&t<i&&(n=i);if(n===l)return-1}else n=s.indexOf(a);return t<n?n:-1},updateKey:function(e,t){var i,n,r=this.map;r&&((i=r[t])instanceof Array?0<=(n=Ext.Array.indexOf(i,e))&&(2<i.length?i.splice(n,1):r[t]=i[1-n]):i&&(this.getUnique()&&i!==e&&Ext.raise('Incorrect oldKey "'+t+'" for item with newKey "'+this.getKey(e)+'"'),delete r[t]),this.add([e]))},onCollectionAdd:function(e,t){this.map&&this.add(t.items)},onCollectionItemChange:function(e,t){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(e,t){var i,n=this.map,r=t.items,o=r.length;if(n)if(this.getUnique()&&o<e.length/2)for(i=0;i<o;++i)delete n[this.getKey(r[i])];else this.map=null},add:function(e){var t,i,n,r,o,a,s=this.map;for(o=e.length,a=this.getUnique(),i=0;i<o;++i)r=this.getKey(n=e[i]),!a&&r in s?((t=s[r])instanceof Array||(s[r]=t=[t]),t.push(n)):s[r]=n},applyKeyFn:function(t){Ext.isString(t)?this.getKey=function(e){return e[t]()}:this.getKey=t},updateProperty:function(t){var i=this.getRootProperty();this.getKey=function(e){return(i?e[i]:e)[t]}},getMap:function(){var e=this.map;return e||(this.map=e={},this.keysByItemKey={},++this.mapRebuilds,this.add(this.getCollection().items)),e},updateCollection:function(e,t){e&&e.addObserver(this),t&&t.removeObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())},destroy:function(){this.clear(),this.getCollection().removeObserver(this),this.destroyed=!0}}),Ext.define("Ext.util.Grouper",{extend:"Ext.util.Sorter",isGrouper:!0,config:{groupFn:null,sortProperty:null},constructor:function(e){e&&e.getGroupString&&Ext.raise("Cannot set getGroupString - use groupFn instead"),this.callParent(arguments)},getGroupString:function(e){var t=e.$collapsedGroupPlaceholder?e.$groupKey:this._groupFn(e);return null!=t?String(t):""},sortFn:function(e,t){var i=this.getGroupString(e),n=this.getGroupString(t),r=this._sortProperty,o=this._root,a=this._sorterFn,s=this._transform;if(i===n)return 0;if(r||a){if(a)return a.call(this,e,t);o&&(e=e[o],t=t[o]),i=e[r],n=t[r],s&&(i=s(i),n=s(n))}return n<i?1:i<n?-1:0},standardGroupFn:function(e){var t=this._root;return(t?e[t]:e)[this._property]},updateSorterFn:function(){},updateProperty:function(){this.getGroupFn()||this.setGroupFn(this.standardGroupFn)}}),Ext.define("Ext.util.Collection",{mixins:["Ext.mixin.Observable"],requires:["Ext.util.CollectionKey","Ext.util.Filter","Ext.util.Sorter","Ext.util.Grouper"],uses:["Ext.util.SorterCollection","Ext.util.FilterCollection","Ext.util.GroupCollection"],isCollection:!0,config:{autoFilter:!0,autoSort:!0,autoGroup:!0,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,groupConfig:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null,trackGroups:!0},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:!1,sorted:!1,filtered:!1,$endUpdatePriority:1001,manageSorters:!0,constructor:function(e){this.callParent([e]),this.items=[],this.map={},this.length=0,e&&e.keyFn&&(this.getKey=e.keyFn),this.mixins.observable.constructor.call(this,e)},destroy:function(){var e=this,t=e._filters,i=e._sorters,n=e._groups;t&&(t.destroy(),e._filters=null),i&&(e.grouped=e.sorted=!1,e.setSorters(null),e.manageSorters&&i.destroy()),n&&(n.destroy(),e._groups=null),e.setSource(null),e.observers=e.items=e.map=null,e.callParent()},add:function(e){var t=this.decodeItems(arguments,0),i=t;return t.length&&(this.splice(this.length,0,t),i=1===t.length?t[0]:t),i},replaceAll:function(){var e,t;return(e=t=this.decodeItems(arguments,0)).length?(this.splice(0,this.length,t),e=1===t.length?t[0]:t):this.removeAll(),e},aggregate:function(e,t,i,n,r){var o=Ext.Array.slice(arguments);return o.unshift(this.items),this.aggregateItems.apply(this,o)},aggregateByGroup:function(e,t,i){var n=this.getGroups();return this.aggregateGroups(n,e,t,i)},aggregateItems:function(e,t,i,n,r,o){var a,s,l,d,u,c,h=Ext.Number.clipIndices(e.length,[n,r]),f=0!==n&&r!==e.length;if(n=h[0],r=h[1],!Ext.isFunction(i))return(i=this._aggregators[i]).call(this,e,n,r,t,this.getRootProperty());for(l=this.getRootProperty(),u=new Array(void 0),c=f?new Array(void 0):e,a=n,s=0;a<r;++a,s++)f&&(c[s]=d=e[a]),u[s]=(l?d[l]:d)[t];return i.call(o||this,e,u,0)},aggregateGroups:function(e,t,i,n){var r,o,a,s=e.items,l=s.length,d=!Ext.isFunction(i),u={};for(r=0;r<l;++r)o=s[r],a=d?o[i](t):this.aggregateItems(o.items,t,i,null,null,n),u[o.getGroupKey()]=a;return u},beginUpdate:function(){this.updating++||this.notify("beginupdate")},clear:function(){var e,t,i=this.generation,n=i?this.items:[];if(i&&(this.items.length=this.length=0,this.map={},this.indices={},this.generation++,e=this.getExtraKeys()))for(t in e)e[t].clear();return n},clone:function(){var e=new this.self(this.initialConfig);return e.add(this.items),e},collect:function(e,t,i){var n,r,o,a=this.items,s=a.length,l={},d=[];for(n=0;n<s;++n)o=a[n],o=(t?o[t]:o)[e],r=String(o),!i&&Ext.isEmpty(o)||l[r]||(l[r]=1,d.push(o));return d},contains:function(e){var t,i=!1;return null!=e&&(t=this.getKey(e),i=this.map[t]===e),i},containsAll:function(e){var t,i=Ext.isArray(e)?e:arguments;for(t=i.length;0<t--;)if(!this.contains(i[t]))return!1;return!0},containsKey:function(e){return e in this.map},createFiltered:function(e,t,i,n,r){var o,a,s,l,d,u=new this.self(Ext.applyIf({source:null},this.initialConfig)),c=this.getRootProperty(),h=this.items;if(Ext.isFunction(e))l=e,d=t;else{if(Ext.isString(e))s=[new Ext.util.Filter({property:e,value:t,root:c,anyMatch:i,caseSensitive:n,exactMatch:r})];else if(e instanceof Ext.util.Filter)s=[e],e.setRoot(c);else if(Ext.isArray(e))for(a=0,o=(s=e.slice(0)).length;a<o;++a)s[a].setRoot(c);l=Ext.util.Filter.createFilterFn(s)}for(d=d||this,a=0,o=h.length;a<o;a++)l.call(d,h[a])&&u.add(h[a]);return u},filterBy:function(e,t){return this.createFiltered(e,t)},each:function(e,t){var i,n,r=this.items,o=r.length;if(o)for(t=t||this,r=r.slice(0),i=0;i<o&&!1!==(n=e.call(t,r[i],i,o));i++);return n},eachKey:function(e,t){var i,n,r,o,a=this.items,s=a.length;if(s)for(t=t||this,a=a.slice(0),i=0;i<s&&(r=this.getKey(n=a[i]),!1!==(o=e.call(t,r,n,i,s)));i++);return o},endUpdate:function(){--this.updating||this.notify("endupdate")},find:function(t,e,i,n,r,o){var a,s;return Ext.isEmpty(e,!1)?null:(a=Ext.String.createRegex(e,n,r,o),s=this.getRootProperty(),this.findBy(function(e){return e&&a.test((s?e[s]:e)[t])},null,i))},findBy:function(e,t,i){var n,r,o,a=this.items,s=a.length;for(t=t||this,n=i||0;n<s;n++)if(o=this.getKey(r=a[n]),e.call(t,r,o))return a[n];return null},findIndex:function(e,t,i,n,r,o){var a=this.find(e,t,i,n,r,o);return a?this.indexOf(a):-1},findIndexBy:function(e,t,i){var n=this.findBy(e,t,i);return n?this.indexOf(n):-1},first:function(e){var t=e?this.getGroups():void 0;return t?this.aggregateGroups(t,null,"first"):this.items[0]},last:function(e){var t=e?this.getGroups():void 0;return t?this.aggregateGroups(t,null,"last"):this.items[this.length-1]},get:function(e){return this.map[e]},getAt:function(e){return this.items[e]},getByKey:function(e){return this.map[e]},getCount:function(){return this.length},getKey:function(e){var t=e.id;return 0===t||t||0===(t=e._id)||t?t:e.getId()},getRange:function(e,t){var i,n=this.items,r=n.length;return t<e&&Ext.raise("Inverted range passed to Collection.getRange: ["+e+","+t+"]"),i=r?(i=Ext.Number.clipIndices(r,[e,t]),n.slice(i[0],i[1])):[]},getValues:function(e,t,i,n){var r,o,a=this.items,s=Ext.Number.clipIndices(a.length,[i,n]),l=[];for(r=s[0],n=s[1];r<n;++r)o=a[r],o=(t?o[t]:o)[e],l.push(o);return l},indexOf:function(e){var t;return e?(t=this.getKey(e),this.indexOfKey(t)):-1},indexOfKey:function(e){var t=this.indices;return e in this.map?(t=t||this.getIndices())[e]:-1},insert:function(e,t){var i=this.decodeItems(arguments,1),n=i;return i.length&&(this.splice(e,0,i),n=1===i.length?i[0]:i),n},itemChanged:function(e,t,i,n){var r,o,a,s,l,d,u=this,c=void 0!==i,h=u.filtered&&u.getAutoFilter(),f=!1,g=0,p=u.items,m=u.length-1,x=u.sorted&&0<m&&u.getAutoSort(),y=u.getSource(),v=0,E=!1,b=!1;y&&!y.updating?(u.sourceUpdating=!0,y.itemChanged(e,t,i,n),u.sourceUpdating=!1):(o=u.getKey(e),h&&(f=(b=(l=u.indexOfKey(c?i:o))<0)!==(E=u.isItemFiltered(e))),f?d=E?(v=[e],-1):(s=[e],u.length):x&&!E&&(h||(l=u.indexOfKey(c?i:o)),a=u.getSortFn(),-1!==l&&(l&&0<a(p[l-1],p[l])?(g=-1,d=Ext.Array.binarySearch(p,e,0,l,a)):l<m&&0<a(p[l],p[l+1])&&(g=1,d=Ext.Array.binarySearch(p,e,l+1,a)),g&&(s=[e]))),r={item:e,key:o,index:d,filterChanged:f,keyChanged:c,indexChanged:!!g,filtered:E,oldIndex:l,newIndex:d,wasFiltered:b,meta:n},c&&(r.oldKey=i),t&&(r.modified=t),++u.generation,u.beginUpdate(),u.notify("beforeitemchange",[r]),c&&u.updateKey(e,i,r),(s||v)&&u.splice(d,v,s),0<g?r.newIndex--:g<0&&r.oldIndex++,u.notify(E?"filtereditemchange":"itemchange",[r]),u.endUpdate())},remove:function(e){var t=this.decodeRemoveItems(arguments,0),i=this.length;return this.splice(0,t),i-this.length},removeAll:function(){var e=this.length;return this.generation&&e&&this.splice(0,e),this},removeAt:function(e,t){var i,n=this.length,r=Ext.Number,o=r.clipIndices(n,[e,void 0===t?1:t],r.Clip.COUNT),a=o[0],s=o[1]-a,l=1==s&&this.getAt(a);return this.splice(a,s),i=this.length-n,l&&i?l:i},removeByKey:function(e){var t=this.getByKey(e);return!(!t||!this.remove(t))&&t},replace:function(e){var t=this.indexOf(e);-1===t?this.add(e):this.insert(t,e)},splice:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y=this,v=y.sorted&&y.getAutoSort(),E=y.map,b=y.items,C=y.length,S=t instanceof Array?y.decodeRemoveItems(t):null,w=!S,T=Ext.Number,P=T.clipIndices(C,[e,w?t:0],T.Clip.COUNT),k=P[0],I=P[1],R=I-k,M=y.decodeItems(arguments,2),A=M?M.length:0,D=k,F=y.indices||(A||S?y.getIndices():null),L=null,O=R?[k]:null,B=null,N=y.getSource();if(N&&!N.updating){if(w)for(S=[],d=0;d<R;++d)S.push(b[k+d]);return d=k<C?N.indexOf(b[k]):N.length,y.requestedIndex=e,N.splice(d,S,M),delete y.requestedIndex,y}if(A){for(n=M,B=[],r={},v&&(x=y.getSorters(),1<A&&(n.$cloned||(M=n=n.slice(0)),y.sortData(n))),d=0;d<A;++d)void 0!==(h=r[f=y.getKey(u=M[d])])?(m=m||{})[h]=1:((c=F[f])<k||I<=c)&&(O=O||[]).push(c),r[f]=d,B.push(f);if(m){for(g=B,B=[],(n=[]).$cloned=!0,d=0;d<A;++d)m[d]||(u=M[d],n.push(u),B.push(g[d]));A=n.length}L={items:n,keys:B}}for(d=S?S.length:0;0<d--;)void 0!==(c=F[f=y.getKey(S[d])])&&(O=O||[]).push(c);if(!L&&!O)return y;if(y.beginUpdate(),O){for(a=null,l=[],o={},1<O.length&&O.sort(Ext.Array.numericSortFn),d=0,p=O.length;d<p;++d)(f=y.getKey(u=b[c=O[d]]))in E&&(delete E[f],(!a||c>a.at+s.length)&&(l.push(a={at:c,items:s=[],keys:g=[],map:o,next:a,replacement:L}),L&&(L.replaced=a)),s.push(o[f]=u),g.push(f),c<D&&--D,1<R&&c===k&&(--R,O[d--]=++k));for(L&&(L.at=D),h=l.length;0<h--;){if((d=(a=l[h]).at)+(p=a.items.length)<C&&(y.indices=F=null),y.length=C-=p,b.splice(d,p),F)for(g=a.keys,d=0;d<p;++d)delete F[g[d]];++y.generation,y.notify("remove",[a])}}if(L)if(v&&1<A&&C)y.spliceMerge(n,B);else{if(v&&(1<A?(D=0,y.indices=F=null):D=x.findInsertionIndex(L.items[0],b,y.getSortFn(),e)),D===C){for(I=D,d=n.length-1;0<=d;--d)b[I+d]=n[d];if(F=y.indices)for(d=0;d<A;++d)F[B[d]]=D+d}else y.indices=null,Ext.Array.insert(b,D,n);for(d=0;d<A;++d)E[B[d]]=n[d];y.length+=A,L.at=D,L.atItem=0===D?null:b[D-1],++y.generation,y.notify("add",[L])}return y.endUpdate(),y},update:function(e,t){this.beginUpdate();try{return e.call(t||this,this)}catch(e){throw Ext.log.error(this.$className+": Unhandled Exception: ",e.description||e.message),e}finally{this.endUpdate()}},updateKey:function(e,t,i){var n,r=this.map,o=this.indices,a=this.getSource();a&&!a.updating?a.updateKey(e,t):(n=this.getKey(e))!==t&&(r[t]!==e||n in r?(n in r&&r[n]!==e&&Ext.raise('Duplicate newKey "'+n+'" for item with oldKey "'+t+'"'),t in r&&r[t]!==e&&Ext.raise('Incorrect oldKey "'+t+'" for item with newKey "'+n+'"')):(delete r[t],this.updating++,this.generation++,r[n]=e,o&&(o[n]=o[t],delete o[t]),this.notify("updatekey",[Ext.apply({item:e,newKey:n,oldKey:t},i)]),this.updating--))},findInsertIndex:function(e,t){for(var i,n,r=this.getSource(),o=r.items,a=r.indexOf(e)-1;-1<a;){if(i=o[a],-1<(n=this.indexOf(i)))return n+1;--a}return t},onCollectionAdd:function(e,t){var i,n,r,o,a,s,l=this,d=t.atItem,u=l.transformItems(t.items),c=l.requestedIndex;if(void 0!==c?n=c:-1<(n=(a=d||e.items[1])?l.indexOf(a):-1)?d&&++n:l.sorted||(n=l.findInsertIndex(u[0],t.at?l.length:0)),l.getAutoFilter()&&l.filtered)for(o=0,s=u.length;o<s;++o)a=u[o],l.isItemFiltered(a)?(r=r||u.slice(0,o),(i=i||[]).push(a)):r&&r.push(a);l.splice(n<0?l.length:n,0,r||u),i&&l.notify("filteradd",[i])},onCollectionBeforeItemChange:function(e,t){this.onCollectionUpdateKey=null,this.sourceUpdating||this.notify("beforeitemchange",[t])},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(e,t){delete this.onCollectionUpdateKey,this.itemChanged(t.item,t.modified,t.oldKey,t.meta)},onCollectionFilteredItemChange:function(){delete this.onCollectionUpdateKey},onCollectionRefresh:function(e){var t,i,n,r,o,a=this,s={},l={},d=a.items,u=a.transformItems(e.items),c=a.getFilterFn();if(a.filtered&&a.getAutoFilter()){for(o=t=0,r=u.length;t<r;t++)c(u[t])&&(d[o++]=u[t]);d.length=o}else d.length=0,d.push.apply(d,u);for(a.sorted&&a.sortData(d),a.length=r=d.length,a.map=s,a.indices=l,t=0;t<r;++t)s[n=a.getKey(i=d[t])]=i,l[n]=t;++a.generation,a.notify("refresh")},onCollectionRemove:function(e,t){this.splice(0,t.items)},onCollectionUpdateKey:function(e,t){this.updateKey(t.item,t.oldKey,t)},_aggregators:{average:function(e,t,i,n,r){var o=i-t;return o&&this._aggregators.sum.call(this,e,t,i,n,r)/o},bounds:function(e,t,i,n,r){var o,a,s,l;for(l=t;l<i;++l)o=e[l],(o=(r?o[r]:o)[n])<a||(a=o),s<o||(s=o);return[s,a]},count:function(e){return e.length},extremes:function(e,t,i,n,r){var o,a,s,l,d,u=null,c=null;for(o=t;o<i;++o)a=e[o],(d=(r?a[r]:a)[n])<s||(s=d,u=a),l<d||(l=d,c=a);return[c,u]},max:function(e,t,i,n,r){return this._aggregators.bounds.call(this,e,t,i,n,r)[1]},maxItem:function(e,t,i,n,r){return this._aggregators.extremes.call(this,e,t,i,n,r)[1]},min:function(e,t,i,n,r){return this._aggregators.bounds.call(this,e,t,i,n,r)[0]},minItem:function(e,t,i,n,r){return this._aggregators.extremes.call(this,e,t,i,n,r)[0]},sum:function(e,t,i,n,r){var o,a,s;for(a=0,s=t;s<i;++s)o=e[s],a+=o=(r?o[r]:o)[n];return a}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(e){var t=this.observers;t||(this.observers=t=[]),Ext.Array.contains(t,e)&&Ext.Error.raise("Observer already added"),this.notifying&&(this.observers=t=t.slice(0)),t.push(e),1<t.length&&Ext.Array.sort(t,this.prioritySortFn)},prioritySortFn:function(e,t){return(e.observerPriority||0)-(t.observerPriority||0)},applyExtraKeys:function(e,t){var i,n,r,o=t||{};for(n in e)(r=e[n]).isCollectionKey?r.setCollection(this):(i={collection:this},Ext.isString(r)?i.property=r:i=Ext.apply(i,r),r=new Ext.util.CollectionKey(i)),o[n]=this[n]=r,r.name=n;return o},applyGrouper:function(e){return e=e&&this.getSorters().decodeSorter(e,Ext.util.Grouper)},decodeItems:function(e,t){var i,n,r,o=void 0===t?e:e[t];if(!o||!o.$cloned){if((i=e.length>t+1||!Ext.isIterable(o))&&1===(o=Ext.Array.slice(e,t)).length&&void 0===o[0]&&(o.length=0),n=this.getDecoder())for(i||(o=o.slice(0),i=!0),r=o.length;0<r--;)!1===(o[r]=n.call(this,o[r]))&&o.splice(r,1);i&&(o.$cloned=!0)}return o},getIndices:function(){var e,t=this.indices,i=this.items,n=i.length;if(!t)for(this.indices=t={},++this.indexRebuilds,e=0;e<n;++e)t[this.getKey(i[e])]=e;return t},notify:function(e,t){var i,n,r,o,a=this.observers,s=this._eventToMethodMap[e],l=0;if(t=t||[],a&&s){for(this.notifying=!0,i=0,n=a.length;i<n;++i)(r=(o=a[i])[s])&&(l++||t.unshift(this),r.apply(o,t));this.notifying=!1}this.hasListeners&&this.hasListeners[e]&&(l||t.unshift(this),this.fireEventArgs(e,t))},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(e){var t=this._filters;return t||!1===e||(t=new Ext.util.FilterCollection({id:this.getId()+"-filters"+(this.generation||"")}),this.setFilters(t)),t},isItemFiltered:function(e){return!this.getFilters().filterFn(e)},onFilterChange:function(e){var t,i,n,r=this,o=r.getSource();if(o){if(o.destroyed)return;(o.length||r.length)&&r.onCollectionRefresh(o)}else{if(t=r.getExtraKeys())for(n in i={},t)i[n]=t[n].clone(r);o=new Ext.util.Collection({keyFn:r.getKey,extraKeys:i,rootProperty:r.getRootProperty()}),r.length&&o.add(r.items),r.setSource(o),r.autoSource=o}r.notify("filter")},applyFilters:function(e,t){return!e||e.isFilterCollection?e:(e&&(t=t||this.getFilters()).splice(0,t.length,e),t)},updateFilters:function(e,t){t&&t.un("endupdate","onEndUpdateFilters",this),e&&(e.on({endupdate:"onEndUpdateFilters",scope:this,priority:this.$endUpdatePriority}),e.$filterable=this),this.onEndUpdateFilters(e)},onEndUpdateFilters:function(e){var t=this.filtered,i=!!e&&0<e.getFilterCount();(t||i)&&(this.filtered=i,this.onFilterChange(e))},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(e){var t=this._sorters;return t||!1===e||(t=new Ext.util.SorterCollection({id:this.getId()+"-sorters"+(this.generation||"")}),this.setSorters(t)),t},onSortChange:function(){this.sorted&&this.sortItems()},sort:function(e,t,i){var n=this.getSorters();return n.addSort.apply(n,arguments),this},sortData:function(e){return Ext.Array.sort(e,this.getSortFn()),e},sortItems:function(e){this.sorted&&(e&&Ext.raise("Collections with sorters cannot resorted"),e=this.getSortFn()),this.indices=null,this.notify("beforesort",[this.getSorters(!1)]),this.length&&Ext.Array.sort(this.items,e),this.notify("sort")},sortBy:function(e){return this.sortItems(e)},findInsertionIndex:function(e,t,i,n){return Ext.Array.findInsertionIndex(e,t||this.items,i||this.getSortFn(),n)},applySorters:function(e,t){return!e||e.isSorterCollection?e:(e&&(t=t||this.getSorters()).splice(0,t.length,e),t)},createSortFn:function(){var n=this.getGrouper(),e=this.getSorters(!1),r=e?e.getSortFn():null;return n?function(e,t){var i=n.sort(e,t);return!i&&r&&(i=r(e,t)),i}:r},updateGrouper:function(e){var t,i=this,n=i.getGroups(),r=i.getSorters();i.onSorterChange(),i.grouped=!!e,e?i.getTrackGroups()&&(n||((n=new Ext.util.GroupCollection({id:i.getId()+"-groups"+(i.generation||""),itemRoot:i.getRootProperty(),groupConfig:i.getGroupConfig()})).$groupable=i).setGroups(n),n.setGrouper(e),t=!0):(n&&(i.removeObserver(n),n.destroy()),i.setGroups(null)),r.updating||i.onEndUpdateSorters(r),t&&n.onCollectionRefresh(i)},updateSorters:function(e,t){t&&!t.destroyed&&t.un("endupdate","onEndUpdateSorters",this),e&&(e.on({endupdate:"onEndUpdateSorters",scope:this,priority:this.$endUpdatePriority}),this.manageSorters&&(e.$sortable=this)),this.onSorterChange(),this.onEndUpdateSorters(e)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(e){var t=this.sorted,i=this.grouped&&this.getAutoGroup()||e&&0<e.length;(t||i)&&(this.sorted=!!i,this.onSortChange(e))},removeObserver:function(e){var t=this.observers;t&&Ext.Array.remove(t,e)},spliceMerge:function(e,t){var i,n,r,o,a,s,l=this.map,d=e.length,u=0,c=this.items,h=c.length,f=[],g=0,p=[],m=this.getSortFn();for(this.items=p,s=0;s<d;s=n){for(o=e[s];u<h&&!(m(o,a=c[u])<0);++u)p.push(a);if(u===h){for(f[g++]={at:p.length,itemAt:p[p.length-1],items:i=[]},1<g&&(f[g-2].next=f[g-1]);s<d;++s)i.push(o=e[s]),p.push(o);break}for(f[g++]={at:p.length,itemAt:p[p.length-1],items:i=[o]},1<g&&(f[g-2].next=f[g-1]),p.push(o),n=s+1;n<d&&!(0<=m(o=e[n],a));++n)p.push(o),i.push(o)}for(;u<h;++u)p.push(c[u]);for(r=0;r<d;++r)l[t[r]]=e[r];for(this.length=p.length,++this.generation,this.indices=null,r=0;r<g;++r)this.notify("add",[f[r]])},transformItems:Ext.identityFn,getGroups:function(){return this.callParent()||null},updateAutoGroup:function(e){var t=this.getGroups();t&&t.setAutoGroup(e),this.onEndUpdateSorters(this._sorters)},updateGroups:function(e,t){t&&this.removeObserver(t),e&&this.addObserver(e)},updateSource:function(e,t){var i=this.autoSource;t&&(t.destroyed||t.removeObserver(this),t===i&&(i.destroy(),this.autoSource=null)),e&&(e.addObserver(this),(e.length||this.length)&&this.onCollectionRefresh(e))}},function(){var e=this.prototype;e.removeAtKey=e.removeByKey,e.decodeRemoveItems=e.decodeItems,Ext.Object.each(e._aggregators,function(n){e[n]=function(e,t,i){return this.aggregate(e,n,t,i)},e[n+"ByGroup"]=function(e){return this.aggregateByGroup(e,n)}})}),Ext.define("Ext.data.Range",{requires:["Ext.util.DelayedTask","Ext.Deferred"],isDataRange:!0,begin:0,buffer:0,end:0,length:0,store:null,waitTimeout:1e4,activeWait:null,constructor:function(e){var t,i;Ext.apply(this,e),(t=(i=this.store).activeRanges)||(i.activeRanges=t=[]),t.push(this),this.refresh(),"begin"in e&&(this.begin=this.end=0,this.goto(e.begin,e.end).catch(function(){}))},destroy:function(){var e=this.store,t=e&&e.activeRanges;Ext.destroy(this.storeListeners),t&&Ext.Array.remove(t,this),this.cancelActiveWait(),this.callParent()},goto:function(e,t){var i,n=this,r=n.buffer,o=n.task;return n.begin=e,n.end=t,n.length=t-e,n.cancelActiveWait(),n.activeWait=n.setupWait(e,t),i=n.activeWait.promise,n.resolveWaitIfSatisfied(),0<r?(o||(n.task=o=new Ext.util.DelayedTask(n.doGoto,n)),o.delay(r)):n.doGoto(),i},privates:{lastBegin:0,lastEnd:0,cancelActiveWait:function(){this.resolveWait(null)},doGoto:Ext.privateFn,refresh:function(){this.records=this.store.getData().items},resolveWait:function(e){var t=this.activeWait;return t&&(t.deferred.resolve(e),this.activeWait=null),e},resolveWaitIfSatisfied:function(){this.resolveWait(this)},setupWait:function(e,t){var i=this,n=i.waitTimeout,r=new Ext.Deferred,o=r.promise;return n&&(o=Ext.Deferred.timeout(o,n).catch(function(){return i.resolveWait(null)})),{deferred:r,promise:o}}}}),Ext.define("Ext.util.ObjectTemplate",{requires:["Ext.XTemplate"],isObjectTemplate:!0,excludeProperties:{},valueRe:/^[{][a-z.]+[}]$/i,statics:{create:function(e,t){return Ext.isObject(e)||Ext.raise("The template is not an Object"),e.isObjectTemplate?e:new Ext.util.ObjectTemplate(e,t)}},constructor:function(e,t){Ext.apply(this,t),this.template=e},apply:function(e){return delete this.apply,this.apply=this.compile(this.template),this.apply(e)},privates:{compile:function(r){var o,e,n,t,a=this.excludeProperties;if(Ext.isString(r))t=r.indexOf("{")<0?function(){return r}:this.valueRe.test(r)?(r=r.substring(1,r.length-1).split("."),function(e){var t,i;for(t=e,i=0;t&&i<r.length;++i)t=t[r[i]];return t}):(r=new Ext.XTemplate(r),function(e){return r.apply(e)});else if(!r||Ext.isPrimitive(r)||Ext.isFunction(r))t=function(){return r};else if(r instanceof Array){for(o=[],e=0,n=r.length;e<n;++e)o[e]=this.compile(r[e]);t=function(e){var t,i=[];for(t=0;t<n;++t)i[t]=o[t](e);return i}}else{for(e in o={},r)a[e]||(o[e]=this.compile(r[e]));t=function(e){var t,i,n={};for(t in r)void 0!==(i=a[t]?r[t]:o[t](e))&&(n[t]=i);return n}}return t}}}),Ext.define("Ext.data.schema.Role",{isRole:!0,left:!0,owner:!1,side:"left",isMany:!1,defaultReaderType:"json",_internalReadOptions:{recordsOnly:!0,asRoot:!0},constructor:function(e,t){var i=t.extra;Ext.apply(this,t),i&&(delete(i=Ext.apply({},i)).type,Ext.apply(this,i),delete this.extra),(this.association=e).owner===this.side&&((e.owner=this).owner=!0)},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(e,t,i,n){return i},checkMembership:Ext.emptyFn,adoptAssociated:function(e,t){var i=this.getAssociatedItem(e);i&&t.adopt(i)},$roleFilterId:"$associationRoleFilter",createAssociationStore:function(e,t,i,n){var r,o=this.association,a=o.getFieldName(),s=o.isManyToMany,l=this.storeConfig,d=t.getId(),u={asynchronousLoad:!1,model:this.cls,role:this,session:e,associatedEntity:t,disableMetaChangeEvent:!0,pageSize:null,remoteFilter:!0,trackRemoved:!e};return s?u.filters=[{id:this.$roleFilterId,property:this.inverse.field,value:d,exactMatch:!0}]:a&&(u.filters=[{id:this.$roleFilterId,property:a,value:d,exactMatch:!0}],u.foreignKeyName=a),l&&Ext.apply(u,l),r=Ext.Factory.store(u),this.onStoreCreate(r,e,d),s&&!e||r.on({scope:this,add:"onAddToMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany"}),i&&r.loadData(i),r.complete=!!n,r},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(r,o,a,e,t){var i,s,n,l,d,u,c,h,f,g=this.getStoreName(),p=r[g],m=p,x=r.session,y=o&&o.reload,v=r.$source,E=!1,b=!1;if(!p){if(x){if(v&&(b=v.phantom),!e&&v&&(c=v[g])&&!c.isLoading()){for(e=[],n=0,l=(d=c.getData().items).length;n<l;++n)u=d[n],e.push(x.getRecord(u.self,u.id));E=!!c.complete,i=!0}i||(h=!!e,e=this.findRecords(x,r,e,t),h||e&&e.length||(e=null),E=b||h)}else E=!!e;(p=this.createAssociationStore(x,r,e,E||r.phantom)).$source=c,e||!this.autoLoad&&!o||(y=!0),r[g]=p}return o&&(y||p.isLoading()?p.on("load",function(e,t,i,n){s=[e,n],a=a||o.scope||r,i?Ext.callback(o.success,a,s):Ext.callback(o.failure,a,s),s.push(i),Ext.callback(o,a,s),Ext.callback(o.callback,a,s)},null,{single:!0}):(s=[p,null],a=a||o.scope||r,Ext.callback(o.success,a,s),s.push(!0),Ext.callback(o,a,s),Ext.callback(o.callback,a,s))),f=p.isLoading(),y?f||p.load():m&&e&&!f&&p.loadData(e),p},getAssociatedItem:function(e){return e[this.isMany?this.getStoreName():this.getInstanceName()]||null},onDrop:Ext.emptyFn,onIdChanged:Ext.emptyFn,getReaderRoot:function(){return this.associationKey||(this.associationKey=this.association.schema.getNamer().readerRoot(this.role))},getReader:function(){var e=this.reader,t=this.cls,i=!this.associationKey,n=this.getReaderRoot();return e&&!e.isReader&&(Ext.isString(e)&&(e={type:e}),Ext.applyIf(e,{model:t,rootProperty:n,useSimpleAccessors:i,type:this.defaultReaderType}),e=this.reader=Ext.createByAlias("reader."+e.type,e)),e},getInstanceName:function(){return this.instanceName||(this.instanceName=this.association.schema.getNamer().instanceName(this.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName="$old"+this.getInstanceName())},getStoreName:function(){return this.storeName||(this.storeName=this.association.schema.getNamer().storeName(this.role))},constructReader:function(e){var t,i,n=this.getReader(),r=this.cls,o=!this.associationKey,a=this.getReaderRoot();return n||((i=r.getProxy())?((n=new((t=i.getReader()).self)).copyFrom(t),n.setRootProperty(a)):n=new e.self({model:r,useSimpleAccessors:o,rootProperty:a}),this.reader=n),n},read:function(e,t,i,n){var r=this.constructReader(i),o=r.getRoot(t);if(o)return r.readRecords(o,n,this._internalReadOptions)},getCallbackOptions:function(e,t,i){return"function"==typeof e?e={callback:e,scope:t||i}:e&&((e=Ext.apply({},e)).scope=t||e.scope||i),e},doGetFK:function(e,t,i){var n,r,o=this.cls,a=this.association.getFieldName(),s=this.getInstanceName(),l=e[s],d=t&&t.reload,u=void 0!==l&&!d,c=e.session;return u?l&&(u=!l.isLoading()):c?(n=e.get(a))||0===n?(u=c.peekRecord(o,n,!0)&&!d,l=c.getRecord(o,n,!1)):(u=!0,e[s]=l=null):a?(n=e.get(a))||0===n?l=l||o.createWithId(n):(u=!0,e[s]=l=null):(u=!0,l=null),u?t&&(r=[l,null],i=i||t.scope||e,Ext.callback(t.success,i,r),r.push(!0),Ext.callback(t,i,r),Ext.callback(t.callback,i,r)):(e[s]=l,t=this.getCallbackOptions(t,i,e),l.load(t)),l},doSetFK:function(e,t,i,n){var r,o=this.association.getFieldName(),a=this.getInstanceName(),s=e[a],l=this.inverse,d=l.setterName;if(t&&t.isEntity?s!==t&&(e[r=this.getOldInstanceName()]=s,e[a]=t,s&&s.isEntity&&(s[l.getInstanceName()]=void 0),o&&e.set(o,t.getId()),delete e[r],e.onAssociatedRecordSet(t,this),d&&t[d](e)):(o||Ext.raise('No foreignKey specified for "'+this.association.left.role+'" by '+e.$className),(e.changingKey&&!l.isMany||e.set(o,t))&&s&&s.isEntity&&!s.isEqual(s.getId(),t)&&(e[a]=void 0,l.isMany||(s[l.getInstanceName()]=void 0))),i)return Ext.isFunction(i)&&(i={callback:i,scope:n||e}),e.save(i)}}),Ext.define("Ext.data.schema.Association",{requires:["Ext.data.schema.Role"],isOneToOne:!1,isManyToOne:!1,isManyToMany:!1,owner:null,field:null,constructor:function(e){var t,i;Ext.apply(this,e),this.left=t=new this.Left(this,this.left),this.right=i=new this.Right(this,this.right),(t.inverse=i).inverse=t},hasField:function(){return!!this.field},getFieldName:function(){var e=this.field;return e?e.name:""}}),Ext.define("Ext.data.schema.OneToOne",{extend:"Ext.data.schema.Association",isOneToOne:!0,isToOne:!0,kind:"one-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",onDrop:function(e,t){var i=this.getAssociatedItem(e);e[this.getInstanceName()]=null,i&&(i[this.inverse.getInstanceName()]=null)},onIdChanged:function(e,t,i){var n=this.getAssociatedItem(e),r=this.association.getFieldName();!e.session&&n&&r&&n.set(r,i)},createGetter:function(){var e=this;return function(){return e.doGet(this)}},createSetter:function(){var t=this;return function(e){return t.doSet(this,e)}},doGet:function(e){var t=e[this.getInstanceName()];e.session;return t||null},doSet:function(e,t){var i=this.getInstanceName(),n=e[i],r=this.inverse.setterName;return n!==t&&(e[i]=t,r&&t[r](e),e.onAssociatedRecordSet(t,this)),n},read:function(e,t,i,n){var r,o=this.callParent([e,t,i,n]);o&&(r=o[0])&&((r[this.inverse.getInstanceName()]=e)[this.getInstanceName()]=r,delete e.data[this.role])}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:!1,side:"right",createGetter:function(){var i=this;return function(e,t){return i.doGetFK(this,e,t)}},createSetter:function(){var n=this;return function(e,t,i){return n.doSetFK(this,e,t,i)}},onDrop:function(e,t){var i,n=this.association.field,r=this.getAssociatedItem(e);this.inverse.owner&&(t&&n?((i=e.get(n.name))||0===i)&&(r=t.getEntry(this.cls,i).record)&&r.drop():r&&r.drop()),n&&e.set(n.name,null),e[this.getInstanceName()]=null,r&&(r[this.inverse.getInstanceName()]=null)},onValueChange:function(e,t,i){var n=e[this.getOldInstanceName()]||this.getAssociatedItem(e),r=i||0===i,o=this.getInstanceName(),a=this.cls;e.changingKey=!0,this.doSetFK(e,i),r?t&&a&&(e[o]=t.peekRecord(a,i)||void 0):e[o]=null,this.inverse.owner&&n&&this.association.schema.queueKeyCheck(n,this),e.changingKey=!1},checkKeyForDrop:function(e){this.inverse.getAssociatedItem(e)||e.drop()},read:function(e,t,i,n){var r,o,a,s,l,d,u,c,h=this.callParent([e,t,i,n]);h&&(r=h[0],(o=this.association.field)&&(a=o.name),s=e.session,c=e.data,r&&(s&&!((l=s.getRefs(r,this.inverse,!0))&&l[e.id]||void 0===c[a])||(o&&(u=c[a])!==(d=r.id)&&(c[a]=d,s&&s.updateReference(e,o,d,u)),(r[this.inverse.getInstanceName()]=e)[this.getInstanceName()]=r),delete c[this.role]))}})}),Ext.define("Ext.data.schema.ManyToOne",{extend:"Ext.data.schema.Association",isManyToOne:!0,isToOne:!0,kind:"many-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:!0,onDrop:function(e,t){var i,n,r,o,a=this.getAssociatedItem(e);if(a){if((i=a.removeAll())&&this.inverse.owner)for(r=0,n=i.length;r<n;++r)i[r].drop();a.destroy(),e[this.getStoreName()]=null}else if(t&&(i=t.getRefs(e,this)))for(o in i)i[o].drop()},onIdChanged:function(e,t,i){var n,r,o,a,s=this.association.getFieldName(),l=this.getAssociatedItem(e);if(l&&((a=l.getFilters().get(this.$roleFilterId))&&a.setValue(i),!e.session&&s))for(r=0,o=(n=l.getDataSource().items).length;r<o;++r)n[r].set(s,i)},processUpdate:function(e,t){var i,n,r,o,a=this.inverse.cls,s=t.R;if(s)for(i in s)(n=e.peekRecord(a,i))?(o=e.getEntityList(this.cls,s[i]),(r=this.getAssociatedItem(n))?(r.loadData(o),r.complete=!0):n[this.getterName](null,null,o)):e.onInvalidAssociationEntity(a,i)},findRecords:function(e,t,i,n){var r,o,a,s,l,d,u=i,c=e.getRefs(t,this,!0),h=this.association.field;if(h&&(c||n)){if(r=h.name,u=[],i)for(d={},s=0,l=i.length;s<l;++s)a=(o=i[s]).id,c&&c[a]?u.push(o):n&&void 0===o.data[r]&&(u.push(o),o.data[r]=t.id,e.updateReference(o,h,t.id,void 0)),d[a]=!0;if(c)for(a in c)d&&d[a]||u.push(c[a])}return u},processLoad:function(e,t,i,n){var r=i;return n&&(r=this.findRecords(n,t,i,!0)),this.onLoadMany(t,r,n),r},adoptAssociated:function(e,t){var i,n,r,o=this.getAssociatedItem(e);if(o)for(o.setSession(t),n=0,r=(i=o.getData().items).length;n<r;++n)t.adopt(i[n])},createGetter:function(){var n=this;return function(e,t,i){return n.getAssociatedStore(this,e,t,i,!0)}},createSetter:null,onAddToMany:function(e,t){var i=e.getAssociatedEntity();this.association.field?this.syncFK(t,i,!1):this.setInstances(i,t)},onLoadMany:function(e,t,i){this.setInstances(e,t,i)},onRemoveFromMany:function(e,t){this.association.field?this.syncFK(t,e.getAssociatedEntity(),!0):this.setInstances(null,t)},read:function(e,t,i,n){var r,o,a,s=this.inverse.getInstanceName(),l=this.callParent([e,t,i,n]);if(l)for(r=e[this.getterName](null,null,l),delete e.data[this.role],a=0,o=(l=r.getData().items).length;a<o;++a)l[a][s]=e},setInstances:function(e,t,i){var n,r,o,a,s,l=this.inverse.getInstanceName(),d=e?e.getId():null,u=this.association.field,c=t.length;for(n=0;n<c;++n)(r=t[n])[l]=e,u&&(s=u.name,(o=(a=r.data)[s])!==d&&(a[s]=d,i&&i.updateReference(r,u,d,o)))},syncFK:function(e,t,i){for(var n,r,o=this.association.getFieldName(),a=this.inverse,s=a.setterName,l=a.getInstanceName(),d=e.length,u=t.getId();0<d--;)r=i?null:t,!(n=e[d]).isEqual(u,n.get(o))!==i?(n.changingKey=!0,n[s](r),n.changingKey=!1):n[l]=r}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:!1,side:"right",onDrop:function(e,t){var i=this.association.field;i&&e.set(i.name,null),e[this.getInstanceName()]=null},createGetter:function(){var i=this;return function(e,t){return i.doGetFK(this,e,t)}},createSetter:function(){var n=this;return function(e,t,i){return n.doSetFK(this,e,t,i)}},checkMembership:function(e,t){var i,n=this.association.field;n&&(i=this.getSessionStore(e,t.get(n.name)))&&!i.contains(t)&&i.add(t)},onValueChange:function(e,t,i,n){var r,o,a,s,l,d,u=this.getInstanceName(),c=this.cls;if(!e.changingKey)if((r=i||0===i)||(e[u]=null),t)(a=this.getSessionStore(t,n))&&a.remove(e),r&&((a=this.getSessionStore(t,i))&&!a.isLoading()&&a.add(e),c&&(d=t.peekRecord(c,i)),e[u]=d||void 0);else if(o=e.joined)for(s=o.length-1;0<=s;s--)(a=o[s]).isStore&&(l=a.getAssociatedEntity())&&l.self===this.cls&&l.getId()===n&&a.remove(e);this.owner&&null===i&&this.association.schema.queueKeyCheck(e,this)},checkKeyForDrop:function(e){var t=this.association.field;null===e.get(t.name)&&e.drop()},getSessionStore:function(e,t){var i,n=this.cls;if(n&&(i=e.peekRecord(n,t)))return this.inverse.getAssociatedItem(i)},read:function(e,t,i,n){var r,o=this.callParent([e,t,i,n]);o&&(r=o[0])&&(e[this.getInstanceName()]=r,delete e.data[this.role])}})}),Ext.define("Ext.data.schema.ManyToMany",{extend:"Ext.data.schema.Association",isManyToMany:!0,isToMany:!0,kind:"many-to-many",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:!0,digitRe:/^\d+$/,findRecords:function(e,t,i){var n,r,o,a,s,l,d=e.getMatrixSlice(this.inverse,t.id).members,u=[],c=this.cls;if(i)for(n={},r=0,o=i.length;r<o;++r)(s=d[a=(l=i[r]).id])&&-1===s[2]||u.push(l),n[a]=!0;for(a in d)s=d[a],(!n||!n[a]&&s&&-1!==s[2])&&(l=e.peekRecord(c,a))&&u.push(l);return u},onIdChanged:function(e,t,i){var n=this.getAssociatedItem(e);n&&n.getFilters().get(this.$roleFilterId).setValue(i)},processLoad:function(e,t,i,n){var r=i;return n&&(r=this.findRecords(n,t,i),this.onAddToMany(e,r,!0)),r},processUpdate:function(e,t){var i,n,r,o,a=this.inverse.cls,s=t.R;if(s)for(i in s)(n=e.peekRecord(a,i))?(o=e.getEntityList(this.cls,s[i]),(r=this.getAssociatedItem(n))?(r.loadData(o),r.complete=!0):n[this.getterName](null,null,o)):e.onInvalidAssociationEntity(a,i);this.processMatrixBlock(e,t.C,1),this.processMatrixBlock(e,t.D,-1)},checkMembership:function(e,t){var i,n,r,o,a,s,l,d,u,c=e.getMatrix(this.association,!0);if(c&&(n=(i=this.left?c.right:c.left).inverse.role.cls,r=this.inverse,(a=i.slices)&&(o=a[t.id])))for(s in l=o.members)-1!==l[s][2]&&(d=e.peekRecord(n,s))&&(u=r.getAssociatedItem(d))&&(u.matrixUpdate=1,u.add(t),u.matrixUpdate=0)},onStoreCreate:function(e,t,i){var n;t&&((n=t.getMatrixSlice(this.inverse,i)).attach(e),n.notify=this.onMatrixUpdate,n.scope=this)},processMatrixBlock:function(e,t,i){var n,r=this.inverse,o=this.digitRe;if(t)for(n in t)o.test(n)&&(n=parseInt(n,10)),e.getMatrixSlice(r,n).update(t[n],i)},createGetter:function(){var n=this;return function(e,t,i){return n.getAssociatedStore(this,e,t,i,!1)}},onAddToMany:function(e,t,i){e.matrixUpdate||(e.matrixUpdate=1,e.matrix.update(t,!0===i?0:1),e.matrixUpdate=0)},onRemoveFromMany:function(e,t){e.matrixUpdate||(e.matrixUpdate=1,e.matrix.update(t,-1),e.matrixUpdate=0)},read:function(e,t,i,n){var r=this.callParent([e,t,i,n]);r&&(e[this.getterName](null,null,r),delete e.data[this.role])},onMatrixUpdate:function(e,t,i){var n,r,o,a=e.store;!a||a.loading||a.matrixUpdate||(a.matrixUpdate=1,n=a.indexOfId(t),i<0?0<=n&&a.remove([n]):n<0&&(r=(o=a.getSession().getEntry(this.type,t))&&o.record)&&a.add(r),a.matrixUpdate=0)},adoptAssociated:function(e,t){var i,n,r,o=this.getAssociatedItem(e);if(o)for(o.setSession(t),this.onStoreCreate(o,t,e.getId()),n=0,r=(i=o.getData().items).length;n<r;++n)t.adopt(i[n])}},function(){var e=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:e,left:!1,side:"right"})},null,"Ext.data.schema.ManyToMany")})}),Ext.define("Ext.util.Inflector",{singleton:!0,plurals:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat|potat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status|sex)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/^(p)erson$/i,"$1eople"],[/^(m)an$/i,"$1en"],[/(.*)(child)(ren)?$/i,"$1$2ren"],[/s$/i,"s"],[/$/,"s"]],singulars:[[/(address)$/i,"$1"],[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/(p)eople$/i,"$1erson"],[/s$/i,""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(e,t){this.singulars.unshift([e,t])},plural:function(e,t){this.plurals.unshift([e,t])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(e){return-1!==Ext.Array.indexOf(this.uncountable,e)},pluralize:function(e){if(this.isTransnumeral(e))return e;var t,i,n,r=this.plurals,o=r.length;for(n=0;n<o;n++)if((i=(t=r[n])[0])==e||i.test&&i.test(e))return e.replace(i,t[1]);return e},singularize:function(e){if(this.isTransnumeral(e))return e;var t,i,n,r=this.singulars,o=r.length;for(n=0;n<o;n++)if((i=(t=r[n])[0])==e||i.test&&i.test(e))return e.replace(i,t[1]);return e},classify:function(e){return Ext.String.capitalize(this.singularize(e))},ordinalize:function(e){var t=parseInt(e,10),i=t%100;if(11<=i&&i<=13)return e+"th";switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}},function(){var e,t={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"};for(e in t)t.hasOwnProperty(e)&&(this.plural(e,t[e]),this.singular(t[e],e))}),Ext.define("Ext.data.schema.Namer",{mixins:["Ext.mixin.Factoryable"],requires:["Ext.util.Inflector"],alias:"namer.default",isNamer:!0,capitalize:function(e){return Ext.String.capitalize(e)},fieldRole:function(e){var t=e.match(this.endsWithIdRe,"");return t&&(e=e.substr(0,e.length-(t[1]||t[2]).length)),this.apply("uncapitalize",e)},idField:function(e){return this.apply("uncapitalize,singularize",e)+"Id"},instanceName:function(e){return this.apply("underscore",e)},multiRole:function(e){return this.apply("undotted,uncapitalize,pluralize",e)},pluralize:function(e){return Ext.util.Inflector.pluralize(e)},readerRoot:function(e){return this.apply("uncapitalize",e)},singularize:function(e){return Ext.util.Inflector.singularize(e)},storeName:function(e){return this.apply("underscore",e)},uncapitalize:function(e){return Ext.String.uncapitalize(e)},underscore:function(e){return"_"+e},uniRole:function(e){return this.apply("undotted,uncapitalize,singularize",e)},undotted:function(e){var t,i;if(e.indexOf(".")<0)return e;for(i=(t=e.split(".")).length;1<i--;)t[i]=this.apply("capitalize",t[i]);return t.join("")},getterName:function(e){var t=e.role;return e&&e.isMany?t:"get"+this.apply("capitalize",t)},inverseFieldRole:function(e,t,i,n){var r=this.apply(t?"uniRole":"multiRole",e),o=this.apply("pluralize",i),a=this.apply("undotted,pluralize",n);return o.toLowerCase()!==a.toLowerCase()&&(r=i+this.apply("capitalize",r)),r},manyToMany:function(e,t,i){var n=this.apply("undotted,capitalize,singularize",t)+this.apply("undotted,capitalize,pluralize",i);return e&&(n=this.apply("capitalize",e+n)),n},manyToOne:function(e,t,i,n){return this.apply("capitalize,singularize",i)+this.apply("capitalize",t)},matrixRole:function(e,t){var i=this.apply(e?"multiRole,capitalize":"multiRole",t);return e?e+i:i},oneToOne:function(e,t,i,n){return this.apply("undotted,capitalize,singularize",i)+this.apply("capitalize",t)},setterName:function(e){return"set"+this.apply("capitalize",e.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(e,t){var i,n,r,o=this.cache,a=o[t]||(o[t]={}),s=a[e];if(!s){if(e.indexOf(",")<0)s=this[e](t);else for(n=(r=e.split(",")).length,s=t,i=0;i<n;++i)s=this.apply(r[i],s);a[e]=s}return s}}),Ext.define("Ext.data.schema.Schema",{mixins:["Ext.mixin.Factoryable"],requires:["Ext.util.ObjectTemplate","Ext.data.schema.OneToOne","Ext.data.schema.ManyToOne","Ext.data.schema.ManyToMany","Ext.data.schema.Namer"],alias:"schema.default",aliasPrefix:"schema.",isSchema:!0,type:"default",statics:{instances:{},clearInstance:function(e){var t=this.instances[e];delete this.instances[e],t&&(t.clear(!0),t.destroy())},get:function(e){var t,i,n=this.instances,r="default",o=e&&Ext.isString(e);if(e){if(e.isSchema)return e;r=o?e:e.id||r}return(t=n[r])?e&&!o&&("default"!==r&&Ext.raise("Only the default Schema instance can be reconfigured"),i=Ext.merge({},t.config),Ext.merge(i,e),t.setConfig(i),t.config=i,t.setConfig=function(){Ext.raise("The schema can only be reconfigured once")}):(n[r]=t=this.create(e),t.id=r),t},lookupEntity:function(e){var t,i,n=null,r=this.instances;if(e)if(e.isEntity)n=e.self;else if(Ext.isFunction(e))n=e;else if(Ext.isString(e)){if(!(n=Ext.ClassManager.get(e))||n.prototype&&n.prototype.isEntity||(n=null),!n)for(i in r)(t=r[i].getEntity(e))&&(n&&Ext.raise('Ambiguous entity name "'+e+'". Defined by schema "'+n.schema.type+'" and "'+i+'"'),n=t);n||Ext.raise('No such Entity "'+e+'".')}return n}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(e,t){var i=t.alias;i&&!t.type&&(Ext.isString(i)||(i=i[0]),e.prototype.type=i.substring(this.prototype.aliasPrefix.length))},constructor:function(e){this.initConfig(e),this.clear()},applyDefaultIdentifier:function(e){return e&&Ext.Factory.dataIdentifier(e)},applyNamer:function(e){var t=Ext.data.schema.Namer.create(e);return t.schema=this,t},applyNamespace:function(e){var t;return e&&(t=e.length-1,"."!==e.charAt(t)&&(e+=".")),e},applyProxy:function(e){return Ext.util.ObjectTemplate.create(e)},eachAssociation:function(e,t){var i,n=this.associations;for(i in n)if(n.hasOwnProperty(i)&&!1===e.call(t,i,n[i]))break},eachEntity:function(e,t){var i,n=this.entities;for(i in n)if(n.hasOwnProperty(i)&&!1===e.call(t,i,n[i].cls))break},getAssociation:function(e){return this.associations[e]||null},getEntity:function(e){var t=this.entityClasses[e]||this.entities[e];return t&&t.cls||null},getEntityName:function(e){var t,i,n=this.getNamespace();if(i="string"==typeof e?e:e.$className||null){if(n&&(t=n.length,i.substring(0,t)!==n))return i;t&&(i=i.substring(t))}return i},hasAssociations:function(e){return e=e.entityName||e,!!this.associationEntityMap[e]},hasEntity:function(e){var t=this.getEntityName(e);return!(!this.entities[t]&&!this.entityClasses[t])},addMatrix:function(e,t,i,n,r){var o,a,s,l=this.getNamer(),d=this.associations,u=this.entities,c=n.type,h=r.type,f=n.field||l.apply("idField",c),g=r.field||l.apply("idField",h),p=n.role||l.matrixRole(i,c),m=r.role||l.matrixRole(i,h);a=u[c]||(u[c]={cls:null,name:c,associations:{}}),s=u[h]||(u[h]={cls:null,name:h,associations:{}}),++this.assocCount,d[t]=o=new Ext.data.schema.ManyToMany({name:t,schema:this,definedBy:e,left:{cls:a.cls,type:c,role:p,field:f,associationKey:n.associationKey},right:{cls:s.cls,type:h,role:m,field:g,associationKey:r.associationKey}}),a.associations[o.right.role]=o.right,s.associations[o.left.role]=o.left,a.cls&&(this.associationEntityMap[a.cls.entityName]=!0),s.cls&&(this.associationEntityMap[s.cls.entityName]=!0),this.decorateModel(o)},addReference:function(e,t,i,n,r){var o,a=this.getNamer(),s=this.entities,l=this.associations,d=e.entityName,u=i.association,c=i.child,h=i.parent,f=i.role,g=i.type||h||c,p=i.inverse,m=Ext.isString(p)?{role:p}:p,x=m&&m.role;f=f||(!t||i.legacy?a.apply("uncapitalize",g):a.apply("fieldRole",t.name)),x=x||a.inverseFieldRole(d,n,f,g),u=u||(n?a.oneToOne(e,x,g,f):a.manyToOne(e,x,g,f)),r&&u in l&&!1!==r(l[u],u,x,f)||(u in l&&Ext.raise('Duplicate association: "'+u+'" declared by '+d+(t?"."+t.name:"")+" (collides with "+l[u].definedBy.entityName+")"),t&&t.definedBy===s[g]&&Ext.raise("ForeignKey reference should not be owned by the target model"),o=s[g]||(s[g]={cls:null,name:g,associations:{}}),u=new(n?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne)({name:u,owner:c?"left":h?"right":null,definedBy:e,schema:this,field:t,nullable:!t||!!t.allowBlank,left:{cls:e,type:d,role:x,extra:m},right:{cls:o.cls,type:g,role:f,extra:i},meta:i}),e.associations[f]=u.right,o.associations[x]=u.left,t&&(t.reference=u.right,e.references.push(t)),++this.assocCount,this.associationEntityMap[d]=!0,o.cls&&(this.associationEntityMap[o.cls.entityName]=!0),(l[u.name]=u).right.cls&&this.decorateModel(u))},privates:{addEntity:function(e){var t,i,n,r,o,a=this.entities,s=e.entityName,l=a[s],d=e.fields;if(l)if(l.cls)Ext.raise('Duplicate entity name "'+s+'": '+l.cls.$className+" and "+e.$className);else for(o in t=l.associations)t[o].inverse.cls=e,this.associationEntityMap[s]=!0,this.decorateModel(t[o].association);else a[s]=l={name:s,associations:{}};for((l.cls=e).prototype.associations=e.associations=l.associations,this.entityClasses[e.$className]=l,++this.entityCount,n=0,r=d.length;n<r;++n)(i=d[n]).reference&&this.addReferenceDescr(e,i)},addMatrices:function(e,t){var i,n,r;if(Ext.isString(t))this.addMatrixDescr(e,null,t);else if(t[0])for(i=0,n=t.length;i<n;++i)this.addMatrixDescr(e,null,t[i]);else for(r in t)this.addMatrixDescr(e,r,t[r])},addMatrixDescr:function(e,t,i){var n,r,o=e.entityName,a=this.associations,s=this.getNamer(),l=i.left,d=i.right;if(Ext.isString(i)?d="#"===i.charAt(0)?(l={type:o},{type:i.substring(1)}):"#"===i.charAt(n=i.length-1)?(l={type:i.substring(0,n)},{type:o}):s.apply("multiRole",o)<s.apply("multiRole",i)?(l={type:o},{type:i}):(l={type:i},{type:o}):(Ext.Assert.isString(i.type,'No "type" for manyToMany in '+o),r=i.relation,l||!d&&s.apply("multiRole",o)<s.apply("multiRole",i.type)?(l=l&&!0!==l?Ext.apply({type:o},l):{type:o},d=i):(d=d&&!0!==d?Ext.apply({type:o},d):{type:o},l=i)),(t=t||s.manyToMany(r,l.type,d.type))in a){var u,c=a[t],h=[c.kind,c.left.type,c.left.role,c.left.field,c.right.type,c.right.role,c.right.field].join("|");delete a[t],this.addMatrix(e,t,r,l,d),u=a[t],(a[t]=c).left.cls.associations[c.right.role]=c.right,c.right.cls.associations[c.left.role]=c.left,--this.assocCount,h!=(u=[u.kind,u.left.type,u.left.role,u.left.field,u.right.type,u.right.role,u.right.field].join("|"))&&(Ext.log.warn(t+"("+c.definedBy.entityName+"): "+h),Ext.log.warn(t+"("+o+"): "+u),Ext.raise('Conflicting association: "'+t+'" declared by '+o+" was previously declared by "+c.definedBy.entityName))}else this.addMatrix(e,t,r,l,d)},addReferenceDescr:function(e,t){var i=t.$reference;i=Ext.isString(i)?{type:i}:Ext.apply({},i),this.addReference(e,t,i,t.unique)},addBelongsTo:function(e,t){this.addKeylessSingle(e,t,!1)},addHasOne:function(e,t){this.addKeylessSingle(e,t,!0)},addKeylessSingle:function(e,t,i){var n,r;(t=Ext.apply({},this.checkLegacyAssociation(e,t))).type=this.getEntityName(t.child||t.parent||t.type),n=t.foreignKey||t.type.toLowerCase()+"_id",r=e.getField(n),t.fromSingle=!0,r&&(r.$reference=t,r.unique=!0,t.legacy=!0,Ext.log.warn("Using foreignKey is deprecated, use a keyed association. See Ext.data.field.Field.reference")),this.addReference(e,r,t,i)},addHasMany:function(s,e){var l,t,i,n,r,o,a,d=this.entities,u=this.pending;(e=Ext.apply({},this.checkLegacyAssociation(s,e))).type=this.getEntityName(e.child||e.parent||e.type),n=d[t=e.type],(l=n&&n.cls)?(t=s.entityName,r=e.foreignKey||t.toLowerCase()+"_id",delete e.foreignKey,a=Ext.apply({},e.inverse),delete e.inverse,delete(o=Ext.apply({},e)).type,e=Ext.apply({type:t,inverse:o},a),o.child&&(delete o.child,e.parent=t),(i=l.getField(r))&&((i.$reference=e).legacy=!0,Ext.log.warn("Using foreignKey is deprecated, use a keyed association. See Ext.data.field.Field.reference")),this.addReference(l,i,e,!1,function(e,t,i,n){var r,o,a=!!e.meta.fromSingle&&l===e.left.cls;return a&&(r=l.entityName,o=s.entityName,Ext.raise('hasMany ("'+o+'") and belongsTo ("'+r+'") should not be used in conjunction to declare a relationship. Use only one.')),a})):(u[t]||(u[t]=[]),u[t].push([s,e]))},checkLegacyAssociation:function(e,t){var i;return(t=Ext.isString(t)?{type:t}:Ext.apply({},t)).model&&(t.type=t.model,delete t.model),(i=t.associatedName||t.name)&&(delete t.associatedName,delete t.name,t.role=i),t},afterKeylessAssociations:function(e){var t,i,n=this.pending,r=e.entityName,o=n[r];if(o){for(t=0,i=o.length;t<i;++t)this.addHasMany.apply(this,o[t]);delete n[r]}},clear:function(e){var t=this,i=t.timer;delete t.setConfig,i&&(window.clearTimeout(i),t.timer=null),t.associations={},t.associationEntityMap={},t.entities={},t.entityClasses={},t.pending={},t.assocCount=t.entityCount=0,e&&t.setNamespace(null)},constructProxy:function(e){var t=Ext.Object.chain(e),i=this.getProxy();return t.schema=this,t.prefix=this.getUrlPrefix(),i.apply(t)},applyDecoration:function(e){var t,i,n,r=e.inverse.cls,o=this.getNamer();r&&!e.decorated&&(e.decorated=!0,n=r.prototype,(t=e.getterName)||(e.getterName=t=o.getterName(e)),n[t]=e.createGetter(),e.createSetter&&((i=e.setterName)||(e.setterName=i=o.setterName(e)),n[i]=e.createSetter()))},decorateModel:function(e){this.applyDecoration(e.left),this.applyDecoration(e.right)},processKeyChecks:function(e){var t,i,n,r=this.keyCheckQueue,o=this.timer;if(o&&(window.clearTimeout(o),this.timer=null),r)do{for(r=this.keyCheckQueue,this.keyCheckQueue=[],i=0,t=r.length;i<t;++i)(n=r[i]).role.checkKeyForDrop(n.record)}while(e&&this.keyCheckQueue.length)},queueKeyCheck:function(e,t){var i=this.keyCheckQueue,n=this.timer;i||(this.keyCheckQueue=i=[]),i.push({record:e,role:t}),n||(this.timer=n=Ext.defer(this.processKeyChecks,this.getKeyCheckDelay(),this))},rankEntities:function(){var e,t,i=this.entities,n=Ext.Object.getKeys(i),r=n.length;for(this.nextRank=1,n.sort(),t=0;t<r;++t)(e=i[n[t]].cls).rank||this.rankEntity(e);this.topoStack=null},rankEntity:function(e){var t,i,n,r=e.associations,o=this.topoStack||(this.topoStack=[]),a=e.entityName;for(n in o.push(a),0===e.rank&&Ext.raise(a+" has circular foreign-key references: "+o.join(" --\x3e ")),e.rank=0,r)!(i=r[n]).left&&i.association.field&&((t=i.cls).rank||this.rankEntity(t));e.rank=this.nextRank++,o.pop()}}}),Ext.define("Ext.data.AbstractStore",{mixins:["Ext.mixin.Observable","Ext.mixin.Factoryable"],requires:["Ext.util.Collection","Ext.data.Range","Ext.data.schema.Schema","Ext.util.Filter"],factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:!1,$configStrict:!1,config:{filters:null,autoDestroy:void 0,storeId:null,statefulFilters:!1,sorters:null,remoteSort:{lazy:!0,$value:!1},remoteFilter:{lazy:!0,$value:!1},groupField:void 0,groupDir:"ASC",grouper:null,pageSize:25,autoSort:null,reloadOnClearSorters:!1},currentPage:1,loading:!1,isStore:!0,updating:0,constructor:function(e){var t;this.callParent([e]),this.isInitializing=!0,this.mixins.observable.constructor.call(this,e),this.isInitializing=!1,!(t=this.getStoreId())&&e&&e.id&&this.setStoreId(t=e.id),t&&Ext.data.StoreManager.register(this)},createActiveRange:function(e){var t=Ext.apply({store:this},e);return new Ext.data.Range(t)},syncActiveRanges:function(){var e,t=this.activeRanges,i=t&&t.length;for(e=0;e<i;e++)t[e].refresh()},getCount:function(){var e=this.getData();return e?e.getCount():0},rangeCached:function(e,t){return this.getData().getCount()>=Math.max(e,t)},find:function(e,t,i,n,r,o){var a=!n,s=!(!a||!o);return this.getData().findIndex(e,t,i,a,s,!r)},findRecord:function(){var e=this.find.apply(this,arguments);return-1!==e?this.getAt(e):null},findExact:function(t,i,e){return this.getData().findIndexBy(function(e){return e.isEqual(e.get(t),i)},this,e)},findBy:function(e,t,i){return this.getData().findIndexBy(e,t,i)},getAt:function(e){return this.getData().getAt(e)||null},getRange:function(e,t,i){var n=this.getData().getRange(e,Ext.isNumber(t)?t+1:t);return i&&i.callback&&i.callback.call(i.scope||this,n,e,t,i),n},getFilters:function(e){var t=this.callParent();return t||!1===e||(this.setFilters([]),t=this.callParent()),t},applyFilters:function(e,t){var i=!t;return i&&(t=this.createFiltersCollection()),e!==t&&(e&&e.isCollection&&(e=e.items.slice()),t.add(e),i&&this.onRemoteFilterSet(t,this.getRemoteFilter())),t},getSorters:function(e){var t=this.callParent();return t||!1===e||(this.setSorters([]),t=this.callParent()),t},applySorters:function(e,t){var i;return t||(t=this.createSortersCollection(),i=!0),t.add(e),i&&this.onRemoteSortSet(t,this.getRemoteSort()),t},filter:function(e,t,i){Ext.isString(e)&&(e={property:e,value:t}),this.suppressNextFilter=!!i,this.getFilters().add(e),this.suppressNextFilter=!1},removeFilter:function(e,t){var i=this.getFilters();this.suppressNextFilter=!!t,e instanceof Ext.util.Filter?i.remove(e):i.removeByKey(e),this.suppressNextFilter=!1},updateAutoSort:function(e){this.getData().setAutoSort(e)},updateRemoteSort:function(e){this.onRemoteSortSet(this.getSorters(!1),e)},updateRemoteFilter:function(e){this.onRemoteFilterSet(this.getFilters(!1),e)},addFilter:function(e,t){this.suppressNextFilter=!!t,this.getFilters().add(e),this.suppressNextFilter=!1},filterBy:function(e,t){this.getFilters().add({filterFn:e,scope:t||this})},clearFilter:function(e){var t=this.getFilters(!1);t&&0!==t.getCount()&&(this.suppressNextFilter=!!e,t.removeAll(),this.suppressNextFilter=!1)},isFiltered:function(){return 0<this.getFilters().getCount()},isSorted:function(){var e=this.getSorters(!1);return!!(e&&0<e.length)||this.isGrouped()},addFieldTransform:function(e){if(!e.getTransform()){var t,i,n=e.getProperty(),r=this.getModel();r&&(i=(t=r.getField(n))?t.getSortType():null),i&&i!==Ext.identityFn&&e.setTransform(i)}},beginUpdate:function(){!this.updating++&&this.hasListeners.beginupdate&&this.fireEvent("beginupdate")},endUpdate:function(){this.updating&&!--this.updating&&(this.hasListeners.endupdate&&this.fireEvent("endupdate"),this.onEndUpdate())},getState:function(){var t,i,e,n=[],r=this.getFilters(),o=this.getGrouper();return this.getSorters().each(function(e){n[n.length]=e.getState(),i=!0}),this.statefulFilters&&this.saveStatefulFilters&&(i=!0,t=[],r.each(function(e){t[t.length]=e.getState()})),o&&(i=!0),i&&(e={},n.length&&(e.sorters=n),t&&(e.filters=t),o&&(e.grouper=o.getState())),e},applyState:function(e){var t=e.sorters,i=e.filters,n=e.grouper;t&&this.getSorters().replaceAll(t),i&&(this.saveStatefulFilters=!0,this.getFilters().replaceAll(i)),n&&this.setGrouper(n)},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var e=this;e.hasListeners.beforedestroy&&e.fireEvent("beforedestroy",e),e.destroying=!0,e.getStoreId()&&Ext.data.StoreManager.unregister(e),e.doDestroy(),e.hasListeners.destroy&&e.fireEvent("destroy",e),e.callParent()},doDestroy:Ext.emptyFn,sort:function(e,t,i){0===arguments.length?this.getRemoteSort()?this.load():this.forceLocalSort():this.getSorters().addSort(e,t,i)},onBeforeCollectionSort:function(e,t){t&&this.fireEvent("beforesort",this,t.getRange())},onSorterEndUpdate:function(){var e,t=this,i=!0,n=t.getSorters(!1);!t.settingGroups&&n&&(e=(n=n.getRange()).length,t.getRemoteSort()?(n.length||t.getReloadOnClearSorters())&&(i=!1,t.load({callback:function(){t.fireEvent("sort",t,n)}})):e&&(t.fireEvent("datachanged",t),t.fireEvent("refresh",t)),i&&t.fireEvent("sort",t,n))},onFilterEndUpdate:function(){var e=this,t=e.suppressNextFilter;e.getFilters(!1)&&(e.getRemoteFilter()?(e.getFilters().each(function(e){e.getInitialConfig().filterFn&&Ext.raise("Unable to use a filtering function in conjunction with remote filtering.")}),e.currentPage=1,t||e.load()):t||(e.fireEvent("datachanged",e),e.fireEvent("refresh",e)),e.trackStateChanges&&(e.saveStatefulFilters=!0),e.fireEvent("filterchange",e,e.getFilters().getRange()))},updateGroupField:function(e){e?this.setGrouper({property:e,direction:this.getGroupDir()}):this.setGrouper(null)},getGrouper:function(){return this.getData().getGrouper()},group:function(e,t){var i=this,n=i.getSorters(!1),r=e||n&&n.length,o=i.getData();e&&"string"==typeof e&&(e={property:e,direction:t||i.getGroupDir()}),i.settingGroups=!0,e===o.getGrouper()?o.updateGrouper(e):o.setGrouper(e),delete i.settingGroups,r?i.getRemoteSort()?i.isInitializing||i.load({scope:i,callback:function(){i.fireGroupChange()}}):(i.fireEvent("datachanged",i),i.fireEvent("refresh",i),i.fireGroupChange()):i.fireGroupChange()},fireGroupChange:function(e){this.isConfiguring||this.destroying||this.destroyed||this.fireGroupChangeEvent(e||this.getGrouper())},fireGroupChangeEvent:function(e){this.fireEvent("groupchange",this,e)},clearGrouping:function(){this.group(null)},getGroupField:function(){var e=this.getGrouper(),t="";return e&&(t=e.getProperty()),t},isGrouped:function(){return!!this.getGrouper()},applyGrouper:function(e){return this.group(e),this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{_metaProperties:{count:"getCount",first:"first",last:"last",loading:"hasPendingLoad",totalCount:"getTotalCount"},interpret:function(e){var t=this._metaProperties[e];return t&&this[t]()},loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(e,t){e&&e[t?"on":"un"]("endupdate","onFilterEndUpdate",this)},onRemoteSortSet:function(e,t){var i;e&&(e[t?"on":"un"]("endupdate","onSorterEndUpdate",this),(i=this.getData())&&i[t?"un":"on"]("beforesort","onBeforeCollectionSort",this))}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}}),Ext.define("Ext.data.Error",{isError:!0,$configPrefixed:!1,config:{field:null,message:""},constructor:function(e){this.initConfig(e),this.msg=this.message}}),Ext.define("Ext.data.ErrorCollection",{extend:"Ext.util.MixedCollection",alternateClassName:"Ext.data.Errors",requires:["Ext.data.Error"],init:function(e){var t,i,n,r,o,a,s,l=e.fields,d=e.data;for(n=0,r=l.length;n<r;++n)a=d[s=(i=l[n]).name],i.validate&&!i.validate.$nullFn&&(t=this.length,o=i.validate(a,null,this,e),t===this.length&&!0!==o&&this.add(s,o));return this},add:function(e,t){var i,n=Ext.data.field.Field.defaultInvalidMessage,r=e;if(Ext.isString(e)?r=new Ext.data.Error({field:e,message:t||n}):(r.isError||(r=new Ext.data.Error({field:r.field||r.name,message:r.error||r.message||r.msg||n})),e=r.field),i=this.get(e)){if(Ext.isArray(i))return i.push(r),i;this.removeAtKey(e),(r=[i,r]).field=e,r=[r]}return this.callParent([r])},getKey:function(e){return e.field},isValid:function(){return 0===this.length},getByField:function(e){var t=this.get(e);return t&&!Ext.isArray(t)&&(t=[t]),t||[]}}),Ext.define("Ext.data.operation.Operation",{alternateClassName:"Ext.data.Operation",isOperation:!0,config:{synchronous:!1,url:"",params:void 0,callback:void 0,scope:void 0,resultSet:null,response:null,request:null,records:null,id:void 0,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:!1,running:!1,complete:!1,success:void 0,exception:!1,error:void 0,idPrefix:"ext-operation-",constructor:function(e){var t=e&&e.scope;this.initConfig(e),e&&(e.scope=t),t&&(this.setScope(t),this.initialConfig.scope=t),this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var e;return delete this.error,delete this.success,this.complete=this.exception=!1,this.setStarted(),this.request=e=this.doExecute(),e&&e.setOperation(this),e},doExecute:Ext.emptyFn,abort:function(){var e,t=this.request;this.aborted=!0,this.running&&t&&((e=this.getProxy())&&!e.destroyed&&e.abort(t),this.request=null),this.running=!1},process:function(e,t,i,n){n=!1!==n,this.setResponse(i),this.setResultSet(e),e.getSuccess()?(this.doProcess(e,t,i),this.setSuccessful(n)):n&&this.setException(e.getMessage())},_commitSetOptions:{convert:!0,commit:!0},doProcess:function(e,t,i){var n,r,o,a,s=this._commitSetOptions,l=this.getRecords(),d=l.length,u=l[0].clientIdProperty,c=e.getRecords(),h=c?c.length:0;if(h&&u){for(n=Ext.Array.toValueMap(l,"id"),a=0;a<h;++a)(o=n[(r=c[a])[u]])?(delete n[o.id],delete r[u],o.set(r,s)):Ext.log.warn("Ignoring server record: "+Ext.encode(r));for(a in n)n[a].commit()}else for(a=0;a<d;++a)o=l[a],0!==h&&(r=c[a])?o.set(r,s):o.commit()},setStarted:function(){this.started=this.running=!0},setCompleted:function(){var e;this.complete=!0,this.running=!1,this.destroying||this.triggerCallbacks(),this.destroyed||(e=this.getProxy())&&!e.destroyed&&e.completeOperation(this)},setSuccessful:function(e){this.success=!0,e&&this.setCompleted()},setException:function(e){this.exception=!0,this.success=this.running=!1,this.error=e,this.setCompleted()},triggerCallbacks:function(){var e=this,t=e.getInternalCallback();if(t){if(t.call(e.getInternalScope()||e,e),e.destroyed)return;e.setInternalCallback(null),e.setInternalScope(null)}if(t=e.getCallback()){if(t.call(e.getScope()||e,e.getRecords(),e,e.wasSuccessful()),e.destroyed)return;e.setCallback(null),e.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var e;return this._records||((e=this.getResultSet())?e.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&!0===this.success},allowWrite:function(){return!0},destroy:function(){var e=this;e.destroying=!0,e.running&&e.abort(),e._params=e._callback=e._scope=e._resultSet=e._response=null,e.request=e._request=e._records=e._proxy=e._batch=null,e._recordCreator=e._internalCallback=e._internalScope=null,e.callParent()}}),Ext.define("Ext.data.operation.Create",{extend:"Ext.data.operation.Operation",alias:"data.operation.create",action:"create",isCreateOperation:!0,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}}),Ext.define("Ext.data.operation.Destroy",{extend:"Ext.data.operation.Operation",alias:"data.operation.destroy",action:"destroy",isDestroyOperation:!0,order:30,foreignKeyDirection:-1,doProcess:function(){var e,t=this.getRecords(),i=t.length;for(e=0;e<i;++e)t[e].setErased()},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(e,t){var i={};return i[e.idField[this.getNameProperty()||"name"]]=e.id,i}}),Ext.define("Ext.data.operation.Read",{extend:"Ext.data.operation.Operation",alias:"data.operation.read",action:"read",isReadOperation:!0,config:{filters:void 0,sorters:void 0,grouper:void 0,start:void 0,limit:void 0,page:void 0,addRecords:!1},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return!1}}),Ext.define("Ext.data.operation.Update",{extend:"Ext.data.operation.Operation",alias:"data.operation.update",action:"update",isUpdateOperation:!0,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}}),Ext.define("Ext.data.SortTypes",function(){var i;return{singleton:!0,constructor:function(){i=this},none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(e){return null!=e?String(e).replace(i.stripTagsRE,""):"\0"},asUCText:function(e){return null!=e?String(e).toUpperCase().replace(i.stripTagsRE,""):"\0"},asUCString:function(e){return null!=e?String(e).toUpperCase():"\0"},asDate:function(e){return e?Ext.isDate(e)?e.getTime():Date.parse(String(e)):0},asFloat:function(e){var t=parseFloat(String(e).replace(i.stripCommasRe,""));return isNaN(t)?0:t},asInt:function(e){var t=parseInt(String(e).replace(i.stripCommasRe,""),10);return isNaN(t)?0:t}}}),Ext.define("Ext.data.validator.Validator",{mixins:["Ext.mixin.Factoryable"],alias:"data.validator.base",isValidator:!0,factoryConfig:{cacheable:!0},type:"base",constructor:function(e){"function"==typeof e?(this.fnOnly=!0,this.validate=e):this.initConfig(e)},validate:function(){return!0},clone:function(){return this.fnOnly?new Ext.data.validator.Validator(this.validate):new this.self(this.getCurrentConfig())}},function(e){Ext.Factory.validator=Ext.Factory.dataValidator}),Ext.define("Ext.data.field.Field",{mixins:["Ext.mixin.Factoryable"],requires:["Ext.data.SortTypes","Ext.data.validator.Validator"],alternateClassName:"Ext.data.Field",alias:"data.field.auto",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:!0,isField:!0,allowBlank:!0,allowNull:!1,critical:!1,defaultInvalidMessage:"This field is invalid",defaultValue:void 0,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:void 0,persist:null,reference:null,summary:null,summaryField:"",unique:!1,rank:null,stripRe:/[$,%]/g,calculated:!1,evil:!1,identifier:!1,onClassExtended:function(e,t){var i=t.sortType,n=e.prototype,r=n.validators,o=t.validators,a=t.alias;a&&("string"!=typeof a&&(a=a[0]),a&&(n.type=a.substr(a.lastIndexOf(".")+1))),i&&Ext.isString(i)&&(n.sortType=Ext.data.SortTypes[i]),o&&(Ext.isArray(o)||(o=[o]),delete t.validators,r&&(o=r.concat(o)),n.validators=o)},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(e){var t,i,n,r,o,a,s,l,d,u,c,h=this,f=h.calculateRe;if(e&&(Ext.isString(e)?h.name=e:((c=e.validators)&&(delete e.validators,h.instanceValidators=c),Ext.apply(h,e))),h.allowNull||(h.allowNull=!!h.reference),t=h.calculate,o=h.depends,t&&(h.convert=h.doCalculate,!o)){if(!(o=t.$depends))for(a={},d=Ext.Function.toCode(t),t.$depends=o=[],l=(s=h.argumentNamesRe.exec(d))?s[1]:"data";s=f.exec(d);)l!==s[1]||a[u=s[2]]||(a[u]=1,o.push(u));h.depends=o}n=h.defaultValue,h.convert&&(h.calculated=i=1<h.convert.length,h.evil=i&&!o),null===h.persist&&(h.persist=!t),r=h.sortType,h.sortType?Ext.isString(r)&&(h.sortType=Ext.data.SortTypes[r]):h.sortType=Ext.data.SortTypes.none,o&&"string"==typeof o&&(h.depends=[o]),h.cloneDefaultValue=void 0!==n&&(Ext.isDate(n)||Ext.isArray(n)||Ext.isObject(n))},setModelValidators:function(e){this._validators=null,this.modelValidators=e},constructValidators:function(e){var t,i,n,r,o,a;if(e){for(e instanceof Array||(e=[e]),t=this._validators,n=0,i=e.length;n<i;++n)(r=e[n]).fn&&(r=r.fn),(o=Ext.Factory.dataValidator(r)).isPresence?a=o:t.push(o);a&&(this.presence=[a])}},collate:function(e,t){var i=e,n=t;return this.sortType&&(i=this.sortType(i),n=this.sortType(n)),i===n?0:i<n?-1:1},compare:function(e,t){return e===t?0:e<t?-1:1},isEqual:function(e,t){return 0===this.compare(e,t)},convert:null,serialize:null,validate:function(e,t,i,n){var r,o,a=this.getValidators();return!(o=this.presence)||null!=e&&""!==e||!0===(r=this.validateGroup(o,e,t,i,n))?this.validateGroup(a,e,t,i,n):r},validateGroup:function(e,t,i,n,r){var o,a,s,l="";for(a=0,o=e.length;a<o;++a)if(!0!==(s=e[a].validate(t,r)))if(s=s||this.defaultInvalidMessage,n)n.isMixedCollection?n.add(this.name,s):n.isCollection?n.add(s):n.push(s),l=l||s;else{if(!i){l=s;break}l&&(l+=i),l+=s}return l||!0},doCalculate:function(e,t){return t?this.calculate(t.data):e},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var e=this.mapping;return!(!e&&0!==e)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getSummary:function(){var e=this.doneSummary,t=this.summary;return e||(this.doneSummary=!0,t&&(this.summary=t=Ext.Factory.dataSummary(t))),t||null},getType:function(){return"auto"},privates:{getValidators:function(){var e=this._validators;return e||(this._validators=e=[],this.constructValidators(this.validators),this.constructValidators(this.modelValidators),this.constructValidators(this.instanceValidators)),e}},deprecated:{5.1:{methods:{getSortDir:function(){return this.sortDir}}}}}),Ext.define("Ext.data.field.Array",{extend:"Ext.data.field.Field",alias:"data.field.array",isArrayField:!0,itemType:{type:"auto"},getType:function(){return"array"},collate:function(e,t){return this.collateOrCompare(e,t,"collate")},compare:function(e,t){return this.collateOrCompare(e,t,"compare")},convert:function(e){return this.doForEach(!e&&0!==e||Ext.isArray(e)?e:[e],"convert")},serialize:function(e){return this.doForEach(e,"serialize")},getItemField:function(){var e=this.itemType;return this.itemField||("string"==typeof e?e={type:e}:e&&e.isDataField||(e=Ext.apply({type:"auto"},e)),this.itemField=Ext.data.field.Field.create(e)),this.itemField},doForEach:function(e,t){if(!e)return this.allowNull?null:[];var i,n=e.length,r=Array(n),o=this.getItemField();for(i=0;i<n;++i)r[i]=o[t]?o[t](e[i]):e[i];return r},collateOrCompare:function(e,t,i){var n,r,o,a,s,l=this.getItemField();if(!e&&!t||e===t)return 0;if(!e||!t)return e?1:-1;for(r=e.length,o=t.length,a=Math.min(r,o),n=0;n<a;++n)if(0!==(s=l[i](e[n],t[n])))return s;return r===o?0:r<o?-1:1}}),Ext.define("Ext.data.field.Boolean",{extend:"Ext.data.field.Field",alias:["data.field.bool","data.field.boolean"],isBooleanField:!0,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(e){return"boolean"==typeof e?e:!this.allowNull||null!=e&&""!==e?this.trueRe.test(String(e)):null},getType:function(){return"bool"}}),Ext.define("Ext.data.field.Date",{extend:"Ext.data.field.Field",alias:"data.field.date",sortType:"asDate",isDateField:!0,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(e,t){var i,n=e instanceof Date,r=t instanceof Date;return i=r&&n?0===(i=e.getTime()-t.getTime())?0:i<0?-1:1:n==r?0:n?1:-1},convert:function(e){if(!e)return null;if(e instanceof Date)return e;var t,i=this.dateReadFormat||this.dateFormat;return i?Ext.Date.parse(e,i,this.useStrict):(t=Date.parse(e))?new Date(t):null},serialize:function(e){var t,i=null;return Ext.isDate(e)&&(i=(t=this.getDateWriteFormat())?Ext.Date.format(e,t):e),i},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){return this.hasOwnProperty("dateWriteFormat")?this.dateWriteFormat:this.hasOwnProperty("dateFormat")?this.dateFormat:this.dateWriteFormat||this.dateFormat||"timestamp"},getType:function(){return"date"}}),Ext.define("Ext.data.field.Integer",{extend:"Ext.data.field.Field",alias:["data.field.int","data.field.integer"],isNumeric:!0,isIntegerField:!0,numericType:"int",convert:function(e){if("number"==typeof e)return this.getNumber(e);var t,i=null==e||""===e,n=this.allowNull;return i?t=n?null:0:(t=this.parse(e),n&&isNaN(t)&&(t=null)),t},getNumber:function(e){return parseInt(e,10)},getType:function(){return this.numericType},parse:function(e){return parseInt(String(e).replace(this.stripRe,""),10)},sortType:function(e){return null==e&&(e=1/0),e}}),Ext.define("Ext.data.field.Number",{extend:"Ext.data.field.Integer",alias:["data.field.float","data.field.number"],isIntegerField:!1,isNumberField:!0,numericType:"float",getNumber:Ext.identityFn,parse:function(e){return parseFloat(String(e).replace(this.stripRe,""))}}),Ext.define("Ext.data.field.String",{extend:"Ext.data.field.Field",alias:"data.field.string",sortType:"asUCString",isStringField:!0,convert:function(e){var t=this.allowNull?null:"";return null==e?t:String(e)},getType:function(){return"string"}}),Ext.define("Ext.data.identifier.Generator",{abstract:!0,mixins:["Ext.mixin.Factoryable"],alias:"data.identifier.default",factoryConfig:{defaultType:"sequential"},isGenerator:!0,config:{id:null},constructor:function(e){var t;this.initConfig(e),(t=this.getId())&&(Ext.data.identifier.Generator.all[t]=this)},privates:{clone:function(e){var t=this.getInitialConfig();return t=e?Ext.apply({},e,t):t,new this.self(t)},statics:{all:{}}}},function(){var i=this,e=Ext.Factory,n=e.dataIdentifier;e.dataIdentifier=function(e){var t=Ext.isString(e)?e:e&&e.id;return t&&i.all[t]||n(e)}}),Ext.define("Ext.data.identifier.Sequential",{extend:"Ext.data.identifier.Generator",alias:"data.identifier.sequential",config:{increment:1,prefix:null,seed:1},generate:function(){var e=this._seed,t=this._prefix;return this._seed+=this._increment,null!==t?t+e:e}}),Ext.define("Ext.data.Model",{alternateClassName:"Ext.data.Record",requires:["Ext.data.ErrorCollection","Ext.data.operation.*","Ext.data.field.*","Ext.data.validator.Validator","Ext.data.schema.Schema","Ext.data.identifier.Generator","Ext.data.identifier.Sequential"],uses:["Ext.data.Validation"],isEntity:!0,isModel:!0,validIdRe:null,erasing:!1,loadOperation:null,loadCount:0,observableType:"record",crudState:"R",crudStateWas:null,constructor:function(e,t,i){var n,r,o,a,s,l,d,u=this,c=u.self,h=c.identifier,f=Ext.data.Model,g=f.identifier,p=u.idField.name;u.data=u.data=e=e||{},u.internalId=a=g.generate();var m=e[p];if(t&&!t.isSession&&Ext.raise('Bad Model constructor argument 2 - "session" is not a Session'),(n=e)instanceof Array)for(u.data=e={},d=u.getFields(),s=Math.min(d.length,n.length),l=0;l<s;++l)e[d[l].name]=n[l];(o=c.initializeFn)||(c.initializeFn=o=f.makeInitializeFn(c)),o.$nullFn||c.initializeFn(u),u.isSummaryModel||((u.id=r=e[p])||0===r||(m&&Ext.raise('The model ID configured in data ("'+m+'") has been rejected by the '+u.fieldsMap[p].type+" field converter for the "+p+" field"),r=t?(h=t.getIdentifier(c)).generate():g===h?a:h.generate(),e[p]=u.id=r,u.phantom=!0,u.crudState="C"),t&&!i&&t.add(u),u.phantom&&(u.crudStateWas="C")),u.init&&Ext.isFunction(u.init)&&u.init()},editing:!1,dirty:!1,session:null,dropped:!1,erased:!1,clientIdProperty:null,evented:!1,phantom:!1,idProperty:"id",manyToMany:null,identifier:null,previousValues:void 0,proxy:void 0,schema:"default",summary:null,versionProperty:null,generation:1,validationSeparator:null,convertOnSet:!0,beginEdit:function(){var e=this.modified,t=this.previousValues;this.editing||(this.editing=!0,this.editMemento={dirty:this.dirty,data:Ext.apply({},this.data),generation:this.generation,modified:e&&Ext.apply({},e),previousValues:t&&Ext.apply({},t)})},calculateSummary:function(e){var t,i,n,r,o,a,s=this.getFields(),l=s.length,d=e.length;for(t=0;t<l;++t)(n=(a=s[t]).getSummary())&&(i=i||{},o=a.name,r=a.summaryField||o,i[o]=n.calculate(e,r,"data",0,d));i&&this.set(i,this._commitOptions)},cancelEdit:function(){var e=this.editMemento,t=this.validation;e&&(this.editing=!1,Ext.apply(this,e),this.editMemento=null,t&&t.syncGeneration!==this.generation&&(t.syncGeneration=0))},endEdit:function(e,t){var i=this.editMemento;i&&(this.editing=!1,this.editMemento=null,this.previousValues=i.previousValues,e||(t=t||this.getModifiedFieldNames(i.data),(this.dirty||t&&t.length)&&this.callJoined("afterEdit",[t])))},getField:function(e){return this.self.getField(e)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(e,t){this.set(this.idProperty,e,t)},getPrevious:function(e){var t=this.previousValues;return t&&t[e]},isModified:function(e){var t=this.modified;return!(!t||!t.hasOwnProperty(e))},getModified:function(e){var t;return this.isModified(e)&&(t=this.modified[e]),t},get:function(e){return this.data[e]},_singleProp:{},_rejectOptions:{convert:!1,silent:!0},set:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E=this,b=E.self,C=E.data,S=E.modified,w=E.previousValues,T=E.session,P=Ext.isString(e),k=P?i:t,I=k?!1!==k.convert:E.convertOnSet,R=E.fieldsMap,M=k&&k.silent,A=k&&k.commit,D=!(k&&!1===k.refs)&&T,F=!(k&&!1===k.dirty&&!A),L=null,O=0,B=E.associations;for(P?(y=E._singleProp)[e]=t:y=e,(p=b.rankedFields)||(p=b.rankFields()),f=p.length;;){for(s in y)if(x=y[s],n=C[s],d=E,m=(r=R[s])?(I&&r.convert&&(x=r.convert(x,E)),(d=r).reference):null,!d.isEqual(n,x)){for(C[s]=x,(L=L||[]).push(s),(w||(E.previousValues=w={}))[s]=n,m&&m.cls&&(D&&T.updateReference(E,r,x,n),m.onValueChange(E,T,x,n)),h=(c=r&&r.dependents)&&c.length;0<h--;)(u=c[h]).dirty=!0,O=O?Math.min(O,u.rank):u.rank;r&&!r.persist||(S&&S.hasOwnProperty(s)?F&&!d.isEqual(S[s],x)||(delete S[s],E.dirty=-1):F&&(S||(E.modified=S={}),E.dirty=!0,S[s]=n)),s===E.idField.name&&(o=!0,l=n,g=x)}if(!O)break;for((r=p[O-1]).dirty=!1,P?delete y[e]:(y=E._singleProp,P=!0),y[e=r.name]=C[e],I=!0;O<f&&!p[O].dirty;++O);O<f?++O:O=0}if(E.dirty<0)for(a in E.dirty=!1,S)if(S.hasOwnProperty(a)){E.dirty=!0;break}if(P&&delete y[e],++E.generation,o&&(E.id=g,E.onIdChanged(g,l),E.callJoined("onIdChanged",[l,g]),B))for(v in B)B[v].onIdChanged(E,l,g);return A?E.commit(M,L):M||E.editing||!L||E.callJoined("afterEdit",[L]),L},reject:function(e){var t=this.modified;this.erased&&Ext.raise("Cannot reject once a record has been erased."),t&&this.set(t,this._rejectOptions),this.dropped=!1,this.clearState(),e||this.callJoined("afterReject")},commit:function(e,t){var i,n=this.versionProperty,r=this.data;this.clearState(),!n||this.phantom||isNaN(r[n])||++r[n],this.phantom=!1,this.dropped&&(this.erased=i=!0),e||(i?this.callJoined("afterErase"):this.callJoined("afterCommit",[t]))},clearState:function(){this.dirty=this.editing=!1,this.editMemento=this.modified=null},drop:function(e){var t,i=this.associations,n=this.session;if(!this.erased&&!this.dropped){if(this.dropped=!0,i&&!1!==e)for(t in i)i[t].onDrop(this,n);this.callJoined("afterDrop"),this.phantom&&this.setErased()}},join:function(e){var t=this.joined;t?t.length?Ext.Array.include(t,e):t[0]=e:t=this.joined=[e],e.isStore&&!this.store&&(this.store=e)},unjoin:function(e){var t,i=this.joined,n=i&&i.length,r=this.store;if(e===this.session)this.session=null;else if(1===n&&i[0]===e?i.length=0:n&&Ext.Array.remove(i,e),r===e){if(r=null,i)for(t=0,n=i.length;t<n;++t)if((e=i[t]).isStore){r=e;break}this.store=r}},clone:function(e){var t=this.modified,i=this.copy(this.id,e);return t&&(i.modified=Ext.apply({},t)),i.dirty=this.dirty,i.dropped=this.dropped,i.phantom=this.phantom,i},copy:function(e,t){var i=Ext.apply({},this.data),n=this.idProperty,r=this.self;return e||0===e?i[n]=e:null===e&&delete i[n],new r(i,t)},getProxy:function(){return this.self.getProxy()},getValidation:function(e){var t=this.validation;return t||(this.validation=t=new Ext.data.Validation,t.attach(this)),(!0===e||!1!==e&&t.syncGeneration!==this.generation)&&t.refresh(e),t},validate:function(){return(new Ext.data.ErrorCollection).init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var e=this.$className.split(".");return e[e.length-1].toLowerCase()+"/"+this.getId()},erase:function(e){return this.erasing=!0,this.drop(),this.erasing=!1,this.save(e)},setErased:function(){this.erased=!0,this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var e=this.self,t=e.criticalFields;return t||(e.rankFields(),t=e.criticalFields),t},getAssociatedData:function(e,t){var i,n,r,o,a,s,l,d,u,c,h,f=this.associations;for(d in e=e||{},this.$gathering=1,t=t&&Ext.apply({},t),f)if((r=f[d].getAssociatedItem(this))&&!r.$gathering){if(r.isStore){for(r.$gathering=1,s=(o=r.getData().items).length,a=[],n=0;n<s;++n)i=!(l=o[n]).$gathering,l.$gathering=1,u=t?(void 0===(h=t.associated)?(t.associated=i,c=!0):i||(c=!(t.associated=!1)),t):i?this._getAssociatedOptions:this._getNotAssociatedOptions,a.push(l.getData(u)),c&&(t.associated=h,c=!1),delete l.$gathering;delete r.$gathering}else u=t||this._getAssociatedOptions,t&&void 0===t.associated&&(u.associated=!0),a=r.getData(u);e[d]=a}return delete this.$gathering,e},getData:function(e){var t,i,n,r,o,a=this,s={},l=!0===e?a._getAssociatedOptions:e||s,d=a.data,u=l.associated,c=l.changes,h=c&&l.critical,f=c?a.modified:d,g=a.fieldsMap,p=l.persist,m=l.serialize;if(f)for(r in f){if(o=d[r],i=g[r]){if(p&&!i.persist)continue;m&&i.serialize&&(o=i.serialize(o,a))}s[r]=o}if(h)for(n=(t=a.self.criticalFields||a.getCriticalFields()).length;0<n--;)(r=(i=t[n]).name)in s||(o=d[r],m&&i.serialize&&(o=i.serialize(o,a)),s[r]=o);return u&&("object"==typeof u?a.getNestedData(l,s):a.getAssociatedData(s,l)),s},getNestedData:function(e,t){var i,n,r,o,a,s,l,d,u,c=this.associations,h=e.associated;for(d in t=t||{},h)if(l=c[d],!0===(u=h[d])?delete e.associated:e.associated=u,n=l.getAssociatedItem(this)){if(n.isStore)for(a=(r=n.getData().items).length,o=[],i=0;i<a;++i)s=r[i],o.push(s.getData(e));else o=n.getData(e);t[d]=o}return e.associated=h,t},getTransientFields:function(){var e=this.self,t=e.transientFields;return t||(e.rankFields(),t=e.transientFields),t},isLoading:function(){return!!this.loadOperation},abort:function(){var e=this.loadOperation;e&&e.abort()},load:function(s){s=Ext.apply({},s);var l=this,d=s.scope||l,e=l.getProxy(),u=s.callback,t=l.loadOperation,r=l.getId();if(t)return(t.extraCalls||(t.extraCalls=[])).push(s),t;var o=!0;return l.phantom&&(o=!1),s.id=r,s.recordCreator=function(e,t,i){var n=l.session;return i&&(i.recordCreator=n?n.recordCreator:null),l.set(e,l._commitOptions),o&&l.getId()!==r&&Ext.raise("Invalid record id returned for "+r+"@"+l.entityName),l},s.internalCallback=function(e){var t,i,n=e.wasSuccessful()&&0<e.getRecords().length,r=l.loadOperation.extraCalls,o=[l,e],a=[l,e,n];if(l.loadOperation=null,++l.loadCount,n?Ext.callback(s.success,d,o):Ext.callback(s.failure,d,o),Ext.callback(u,d,a),r)for(t=0,i=r.length;t<i;++t)s=r[t],n?Ext.callback(s.success,d,o):Ext.callback(s.failure,d,o),Ext.callback(s.callback,d,a);l.callJoined("afterLoad")},delete s.callback,l.loadOperation=t=e.createOperation("read",s),t.execute(),t},mergeData:function(e){this.dirty||this.set(e,this._commitOptions)},save:function(n){n=Ext.apply({},n);var e,r=this,t=r.phantom,i=r.dropped,o=i?"destroy":t?"create":"update",a=n.scope||r,s=n.callback,l=r.getProxy();return n.records=[r],n.internalCallback=function(e){var t=[r,e],i=e.wasSuccessful();i?Ext.callback(n.success,a,t):Ext.callback(n.failure,a,t),t.push(i),Ext.callback(s,a,t)},delete n.callback,e=l.createOperation(o,n),i&&t?(e.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet),r.setErased(),e.setSuccessful(!0)):e.execute(),e},statics:{defaultProxy:"memory"},inheritableStatics:{_associatedReadOptions:{recordsOnly:!0,asRoot:!0},loadData:function(e,t){return e?this.getProxy().getReader().readRecords([e],t?{recordCreator:t.recordCreator}:void 0,this._associatedReadOptions)[0]:new this(e,t)},getSummaryModel:function(){var e=this.prototype,t=this.summaryModel;return t||((t=Ext.define(null,{extend:this,fields:e.summaryFields||[],isSummaryModel:!0})).isSummaryModel=!0,this.summaryModel=e.summaryModel=t),t||null},addFields:function(e){this.replaceFields(e)},replaceFields:function(e,t){var i,n,r,o,a,s,l,d=this,u=d.prototype,c=Ext.data.field.Field,h=d.fields,f=d.fieldsMap,g=d.fieldOrdinals;if(!0===t)h.length=0,d.fieldsMap=f={},d.fieldOrdinals=g={},l=!0;else if(t){for(n=t.length;0<n--;)(a=t[n])in g&&(delete g[a],delete f[a]);for(n=0,o=h.length;n<o;++n)(a=(i=h[n]).name)in g?g[a]=n:(h.splice(n,1),--n,--o)}for(n=0,o=e?e.length:0;n<o;n++)(a=(i=e[n]).name)in g||(g[a]=s=h.length,h.push(i=c.create(i)),(f[a]=i).ordinal=s,i.definedBy=i.owner=this);if(!l)for(n=0,o=h.length;n<o;++n)h[n].rank=null;d.idField=u.idField=r=f[u.idProperty],r&&(r.allowNull=r.critical=r.identifier=!0,r.defaultValue=null),d.initializeFn=d.rankedFields=d.transientFields=d.criticalFields=null},removeFields:function(e){this.replaceFields(null,e)},getIdFromData:function(e){var t=this.idField;return t.calculated?new this(e).id:e[t.name]},createWithId:function(e,t,i){var n=t;return!e&&0!==e||(n={},t&&Ext.apply(n,t),n[this.idField.name]=e),new this(n,i)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(e){return this.fieldsMap[e]||null},getProxy:function(){var e,t=this.proxy,i=this.defaultProxy;return t||(!(t=this.proxyConfig)&&i&&(t=i),t&&t.isProxy||("string"==typeof t&&(t={type:t}),e=Ext.merge(this.schema.constructProxy(this),t),t=t&&t.type&&!1===t.schema?t:e),t=this.setProxy(t)),t},setProxy:function(e){var t;return e&&(e.isProxy?(t=e.getModel())&&t!==this&&(e=e.clone()):e=Ext.Factory.proxy(e),e.setModel(this)),this.prototype.proxy=this.proxy=e},load:function(e,t,i){var n,r={};return i&&(n=i.peekRecord(this,e)),n||(r[this.prototype.idProperty]=e,n=new this(r,i)),n.load(t),n}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(e,t){var i,n=this.stores,r=n.length;for(i=0;i<r;++i)e.call(t,n[i])},join:function(e){var t=this.stores,i=this.joined;i?i.push(e):i=this.joined=[e],e.isStore&&(this.store=this.store||e,(t=t||(this.stores=[])).push(e))},unjoin:function(e){var t=this.stores,i=this.joined;1===i.length?i.length=0:Ext.Array.remove(i,e),e.isStore&&(Ext.Array.remove(t,e),this.store=t[0]||null)}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:!0},_getChangesOptions:{changes:!0},_getAssociatedOptions:{associated:!0},_getNotAssociatedOptions:{associated:!1},_metaProperties:{dirty:"isDirty",phantom:"isPhantom",valid:"isValid"},copyFrom:function(e){var t,i,n,r,o=this.fields,a=o.length,s=[],l=this.idProperty,d=0;if(e){for(t=this.data,i=e.data;d<a;d++)(n=o[d].name)!==l&&(void 0===(r=i[n])||this.isEqual(t[n],r)||(t[n]=r,s.push(n)));this.phantom&&!e.phantom&&(this.beginEdit(),this.setId(e.getId()),this.endEdit(!0),this.commit(!0))}return s},callJoined:function(e,t){var i,n,r,o,a=this.joined,s=this.session,l=this.dropped?"D":this.phantom?"C":this.dirty?"U":"R";if(this.crudState=l,(a||s)&&(t?t.unshift(this):t=[this],(r=s&&s[e])&&r.apply(s,t),a))for(i=0,n=a.length;i<n;++i)(o=a[i])&&(r=o[e])&&r.apply(o,t);this.crudStateWas=l},hasPendingLoad:function(){return this.isLoading()},interpret:function(e){var t=this._metaProperties[e];return(t=t||(t=this.associations)&&t[e]&&t[e].getterName)?this[t]():this.data[e]},isDirty:function(){return this.dirty},isPhantom:function(){return this.phantom},onAssociatedRecordSet:function(e,t){this.callJoined("afterAssociatedRecordSet",[e,t])},onIdChanged:Ext.privateFn,setSession:function(e){e&&(this.session&&Ext.raise("This model already belongs to a session."),this.id||Ext.raise("The model must have an id to participate in a session.")),(this.session=e)&&e.add(this)},getModifiedFieldNames:function(e){var t,i=this.data,n=[],r=e||this.editMemento.data;for(t in i)i.hasOwnProperty(t)&&(this.isEqual(i[t],r[t],t)||n.push(t));return n},isEqual:function(e,t,i){var n;return i&&(n=i.isField?i:this.fieldsMap[i])?n.isEqual(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",rankFields:function(){var e,t,i,n=this.prototype,r=this.fields,o=r.length,a=[],s=[],l=[];for(this.rankedFields=n.rankedFields=a,this.criticalFields=n.criticalFields=s,this.transientFields=n.transientFields=l,i=0;i<o;++i)(t=r[i]).critical&&s.push(t),t.persist||l.push(t),t.evil?(e=e||[]).push(t):t.depends||(a.push(t),t.rank=a.length);for(i=0;i<o;++i)(t=r[i]).rank||t.evil||this.topoAdd(t);if(e)for(i=0,o=e.length;i<o;++i)a.push(t=e[i]),t.rank=a.length;return this.topoStack=null,a},topoAdd:function(e){var t,i,n=e.depends,r=n?n.length:0,o=this.rankedFields,a=this.topoStack||(this.topoStack=[]);for(a.push(e.name),0===e.rank&&Ext.raise(this.$className+" has circular field dependencies: "+a.join(" --\x3e ")),a.length&&e.evil&&Ext.raise(this.$className+": Field "+a[a.length-1]+" cannot depend on depends-less field "+e.name),t=e.rank=0;t<r;++t)(i=this.fieldsMap[n[t]])||Ext.raise(this.$className+": Field "+e.name+" depends on undefined field "+n[t]),(i.dependents||(i.dependents=[])).push(e),i.rank||this.topoAdd(i);o.push(e),e.rank=o.length,a.pop()},initFields:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g=Ext.data.field.Field,p=e.fields,m=[],x={},y={},v=i.fields,E=e.versionProperty||i.versionProperty,b=t.idProperty;if(t.fields=i.fields=m,t.fieldOrdinals=i.fieldOrdinals=x,t.fieldsMap=i.fieldsMap=y,t.references=i.references=[],v)for(o=0,a=v.length;o<a;++o)m[o]=r=Ext.Object.chain(v[o]),r.dependents=null,r.owner=t,x[s=r.name]=o,(y[s]=r).rank=null,r.generated&&(c=(u=r).name);if(delete e.fields,p)for(o=0,a=p.length;o<a;++o)(d=(r=p[o]).reference)&&"string"!=typeof d&&(d=Ext.merge({},d)),r.$reference=d,void 0===(l=x[s=(r=g.create(p[o])).name])&&(x[s]=l=m.length),y[s]=r,(m[l]=r).definedBy=r.owner=t,r.ordinal=l,s===b&&(f=r),s===c&&(h=!0);if(n=y[b]){if(f&&!h&&u&&u.generated)for(Ext.Array.remove(m,u),delete y[c],delete x[c],y[b]=f,o=0,a=m.length;o<a;++o)r=m[o],m.ordinal=o,x[r.name]=o}else l=u&&u.generated?u.ordinal:m.length,delete y[c],delete x[c],n=new g(b),m[l]=n,x[b]=l,(y[b]=n).definedBy=t,n.ordinal=l,n.generated=!0;n.allowNull=n.critical=n.identifier=!0,n.defaultValue=null,t.idField=i.idField=n,E&&((r=y[E])||(l=m.length,r=new g({name:E,type:"int"}),m[l]=r,x[E]=l,(y[E]=r).definedBy=t,r.ordinal=l,r.generated=!0),r.defaultValue=1,r.critical=!0)},initSummaries:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g=e.summary,p=i.fields,m=i.summaryFields;if(m)for(u=[],c={},o=0,l=m.length;o<l;++o)h=m[o],u.push(h),c[h.name]=o;for(o=0,l=p.length;o<l;++o)(n=p[o]).summary&&n.definedBy===t&&((s=s||{})[n.name]=n.summary);if(s&&(g=Ext.apply(s,g)),g)for(d in delete e.summary,u=u||[],c=c||{},g)"function"!=(f=typeof(h=g[d]))&&"string"!=f||(h={summary:h}),a=c[d],(n=(h=Ext.apply({name:d},h)).field)&&(delete h.field,h.summaryField=n),r=h.summaryField,(n=i.fieldsMap[r||d])&&!h.type&&(h.type=n.type),void 0===a&&(a=u.length,c[d]=a),u[a]=h;u&&(i.summaryFields=u)},initValidators:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f=i.validators;if(f)for(r in n={},f)n[r]=Ext.Array.clone(f[r]);if(a=e.validators||e.validations,e.validations&&(delete e.validations,Ext.log.warn((t.$className||"Ext.data.Model")+": validations has been deprecated. Please use validators instead.")),a){if(delete e.validators,n=n||{},Ext.isArray(a)){for(o={},s=0,l=a.length;s<l;++s)o[u=(h=a[s]).field]||(o[u]=[]),h=h.fn||h,o[u].push(h);a=o}for(u in a)d=a[u],Ext.isArray(d)||(d=[d]),(c=n[u])?Ext.Array.push(c,d):n[u]=d}if(n)for(u in n)(r=t.getField(u))&&r.setModelValidators(n[u]);t.validators=i.validators=n},initAssociations:function(e,t,i){var n,r,o,a,s=t.associations,l=t.belongsTo,d=t.hasMany,u=t.hasOne,c=t.manyToMany;if(delete t.associations,delete t.belongsTo,delete t.hasMany,delete t.hasOne,delete t.manyToMany,c&&e.addMatrices(i,c),s)for(n=0,r=(s=Ext.isArray(s)?s:[s]).length;n<r;++n)switch(o=s[n],delete(a=Ext.apply({},o)).type,o.type){case"belongsTo":e.addBelongsTo(i,a);break;case"hasMany":e.addHasMany(i,a);break;case"hasOne":e.addHasOne(i,a);break;default:Ext.raise('Invalid association type: "'+o.type+'"')}if(l)for(n=0,r=(l=Ext.isArray(l)?l:[l]).length;n<r;++n)e.addBelongsTo(i,l[n]);if(d)for(n=0,r=(d=Ext.isArray(d)?d:[d]).length;n<r;++n)e.addHasMany(i,d[n]);if(u)for(n=0,r=(u=Ext.isArray(u)?u:[u]).length;n<r;++n)e.addHasOne(i,u[n]);e.afterKeylessAssociations(i)},initIdentifier:function(e,t,i){var n,r=e.identifier||e.idgen,o=i.identifier||t.schema._defaultIdentifier;e.idgen&&Ext.log.warn("Ext.data.Model: idgen has been deprecated. Please use identifier instead."),r?(delete e.identifier,delete e.idgen,r=Ext.Factory.dataIdentifier(r)):o&&(r=o.clone&&!o.getId()?o.clone():o.isGenerator?o:Ext.Factory.dataIdentifier(o)),t.identifier=i.identifier=r,r||(n=(n=t.entityName)||Ext.id(null,"extModel"),t.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:n+"-"}))},findValidator:function(e,t,i){var n,r,o,a=i.type||i,s=e[t];if(s)for(r=0,n=s.length;r<n;++r)if((o=s[r]).type===a)return o;return null},makeInitializeFn:function(e){var t,i,n,r,o,a,s,l,d,u,c=["var "],h=["\nreturn function (e) {\n    var data = e.data, v;\n"],f=0;for((a=e.rankedFields)||(a=e.rankFields()),d=0,u=a.length;d<u;++d)s="f"+d,n=(o=a[d]).convert,d&&c.push(",  \n    "),c.push(s," = $fields["+d+"]"),c.push("  /*  ",o.name,"  */"),((l=void 0!==o.defaultValue)||n)&&(r='data["'+o.name+'"]',++f,t=i="",o.cloneDefaultValue&&(t="Ext.clone(",i=")"),h.push("\n"),n&&l?h.push("    v = ",r,";\n    if (v !== undefined) {\n        v = ",s,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",t,s,".defaultValue",i,";\n    }\n    ",r," = v;"):n?h.push("    v = ",s,".convert(",r,",e);\n    if (v !== undefined) {\n        ",r," = v;\n    }\n"):l&&h.push("    if (",r," === undefined) {\n        ",r," = ",t,s,".defaultValue",i,";\n    }\n"));return f?(c.push(";\n"),c.push.apply(c,h),c.push("}"),c=c.join(""),new Function("$fields","Ext",c)(a,Ext)):Ext.emptyFn}}}},function(){var l,d=this,e=d.prototype,u=Ext.data.schema.Schema;d.proxyConfig=e.proxy,delete e.proxy,d.fields=[],d.fieldsMap=e.fieldsMap={},d.schema=e.schema=u.get(e.schema),e.idField=new Ext.data.field.Field(e.idProperty),d.identifier=new Ext.data.identifier.Sequential,d.onExtended(function(e,t){var i,n,r,o=e.prototype,a=t.schema,s=o.superclass.self;e.idProperty=t.idProperty||o.idProperty,a?(delete t.schema,i=u.get(a)):(i=o.schema)||(i=l=l||u.get("default")),e.rankFields=d.rankFields,e.topoAdd=d.topoAdd,o.schema=e.schema=i,(n=t.entityName)||(o.entityName=n=i.getEntityName(e),n||(t.associations&&Ext.raise('Anonymous entities cannot specify "associations"'),t.belongsTo&&Ext.raise('Anonymous entities cannot specify "belongsTo"'),t.hasMany&&Ext.raise('Anonymous entities cannot specify "hasMany"'),t.hasOne&&Ext.raise('Anonymous entities cannot specify "hasOne"'),t.matrices&&Ext.raise('Anonymous entities cannot specify "manyToMany"'))),e.entityName=n,e.fieldExtractors={},d.initIdentifier(t,e,o),d.initFields(t,e,o),d.initValidators(t,e,o),t.isSummaryModel||d.initSummaries(t,e,o),e.fields.items=e.fields,n&&(i.addEntity(e),d.initAssociations(i,t,e)),(r=t.proxy)?delete t.proxy:s!==d&&(r=s.proxyConfig||s.proxy),e.proxyConfig=r})}),Ext.define("Ext.data.ResultSet",{isResultSet:!0,$configPrefixed:!1,config:{loaded:!0,count:null,total:null,remoteTotal:null,success:!1,records:null,message:null,metadata:null,groupData:null,summaryData:null},constructor:function(e){this.initConfig(e)},getCount:function(){var e,t=this.callParent();return t||(e=this.getRecords())&&(t=e.length),t}}),Ext.define("Ext.data.reader.Reader",{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],requires:["Ext.data.ResultSet","Ext.XTemplate","Ext.util.LruCache"],mixins:["Ext.mixin.Observable","Ext.mixin.Factoryable"],alias:"reader.base",factoryConfig:{defaultType:null},config:{groupRootProperty:"",implicitIncludes:!0,keepRawData:null,messageProperty:"",model:null,proxy:null,readRecordsOnFailure:!0,rootProperty:"",successProperty:"success",summaryRootProperty:"",totalProperty:"total",transform:null,typeProperty:""},isReader:!0,constructor:function(e){e&&e.hasOwnProperty("root")&&((e=Ext.apply({},e)).rootProperty=e.root,delete e.root,Ext.log.error('Ext.data.reader.Reader: Using the deprecated "root" configuration. Use "rootProperty" instead.')),this.duringInit=1,this.mixins.observable.constructor.call(this,e),--this.duringInit,this.buildExtractors()},forceBuildExtractors:function(){this.duringInit||this.buildExtractors(!0)},updateGroupRootProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},applyModel:function(e){return Ext.data.schema.Schema.lookupEntity(e)},updateSuccessProperty:function(){this.forceBuildExtractors()},updateSummaryRootProperty:function(){this.forceBuildExtractors()},updateTotalProperty:function(){this.forceBuildExtractors()},applyTransform:function(e){return e?(Ext.isFunction(e)?e={fn:e}:e.charAt&&(e={fn:this[e]}),e.fn.bind(e.scope||this)):e},read:function(e,t){var i,n,r;if(e)if(r=e.responseText,e.responseType||r){if((n=this.getResponseData(e))&&n.__$isError)return new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:n.msg});i=this.readRecords(n,t)}else""!==r&&(i=this.readRecords(e,t));return i||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(e){return{__$isError:!0,msg:e}},readRecords:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g=this,p=i&&i.recordsOnly,m=i&&i.asRoot,x=null,y=null;return(h=g.getMeta?g.getMeta(e):e.metaData)&&g.onMetaChange(h),(c=g.getTransform())&&(e=c(e)),g.buildExtractors(),g.getKeepRawData()&&(g.rawData=e),g.hasListeners.rawdata&&g.fireEventArgs("rawdata",[e]),e=g.getData(e),n=!0,r=0,o=[],g.getSuccessProperty()&&(!1!==(d=g.getSuccess(e))&&"false"!==d||(n=!1)),g.getMessageProperty()&&(u=g.getMessage(e)),(n||g.getReadRecordsOnFailure())&&((a=m||Ext.isArray(e)?e:g.getRoot(e))&&(l=a.length),g.getTotalProperty()&&(d=parseInt(g.getTotal(e),10),isNaN(d)||(s=l=d)),a&&(r=(o=g.extractData(a,t)).length),g.getGroupRootProperty()&&(a=g.getGroupRoot(e))&&(f={includes:!1,model:g.getModel().getSummaryModel()},x=g.extractData(a,f)||null),g.getSummaryRootProperty()&&(a=g.getSummaryRoot(e))&&(f=f||{includes:!1,model:g.getModel().getSummaryModel()},y=(y=g.extractData(a,f)||null)&&y[0])),p?o:new Ext.data.ResultSet({total:l||r,remoteTotal:s,metadata:h,count:r,records:o,success:n,message:u,groupData:x,summaryData:y})},extractData:function(e,t){var i,n,r,o,a,s=t&&t.model?Ext.data.schema.Schema.lookupEntity(t.model):this.getModel(),l=s.schema,d=t&&"includes"in t?t.includes:l.hasAssociations(s)&&this.getImplicitIncludes(),u=this.getFieldExtractorInfo(s),c=e.length,h=new Array(c),f=this.getTypeProperty();for(!c&&Ext.isObject(e)&&(e=[e],c=1),a=0;a<c;a++)(o=e[a]).isModel||(n=o,(o=f&&(r=this.getChildType(l,n,f))?(i=r.getProxy().getReader()).extractRecord(n,t,r,l.hasAssociations(r)&&i.getImplicitIncludes(),i.getFieldExtractorInfo(r)):this.extractRecord(n,t,s,d,u)).isModel&&o.isNode&&(o.raw=n)),o.onLoad&&o.onLoad(),h[a]=o;return h},getChildType:function(e,t,i){var n;switch(typeof i){case"string":return e.getEntity(t[i]);case"object":return n=i.namespace,e.getEntity((n?n+".":"")+t[i.name]);case"function":return e.getEntity(i(t))}},extractRecordData:function(e,t){var i=t&&t.model?Ext.data.schema.Schema.lookupEntity(t.model):this.getModel(),n=this.getFieldExtractorInfo(i);return this.extractRecord(e,t,i,!1,n)},extractRecord:function(e,t,i,n,r){var o,a,s=t&&t.recordCreator||this.defaultRecordCreator;return o=this.extractModelData(e,r),a=s.call(this,o,i||this.getModel(),t),n&&a.isModel&&this.readAssociated(a,e,t),a},getFieldExtractorInfo:function(e){var t,i,n=e.fieldExtractors;if(n)return void 0===(i=n[t=this.$className])&&(n[t]=i=this.buildFieldExtractors(e)),i},buildFieldExtractors:function(e){var t,i,n,r,o=e.getFields(),a=o.length,s=[],l=[],d=null,u=0;for(n=0;n<a;++n)t=o[n],(r=this.createFieldAccessor(t))&&(i=t.name,s.push("val = extractors["+u+"](raw, self); if (val !== undefined) { data['"+i+"'] = val; }"),l.push(r),++u);return s.length&&(d={extractors:l,fn:new Function("raw","data","extractors","self","var val;"+s.join("\n"))}),d},defaultRecordCreator:function(e,t){return new t(e)},defaultRecordCreatorFromServer:function(e,t){var i=new t(e);return i.phantom=!1,i},getModelData:function(e){return{}},extractModelData:function(e,t){var i=this.getModelData(e);return t&&(0,t.fn)(e,i,t.extractors,this),i},readAssociated:function(e,t,i){var n,r,o=e.associations;for(n in o)o.hasOwnProperty(n)&&(r=o[n]).cls&&r.read(e,t,this,i)},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(e){Ext.raise("getResponseData must be implemented in the Ext.data.reader.Reader subclass")},onMetaChange:function(e){var t,i,n,r,o=e.fields;(this.metaData=e).root&&this.setRootProperty(e.root),e.totalProperty&&this.setTotalProperty(e.totalProperty),e.successProperty&&this.setSuccessProperty(e.successProperty),e.messageProperty&&this.setMessageProperty(e.messageProperty),n=e.clientIdProperty,o?(i=Ext.define(null,{extend:"Ext.data.Model",fields:o,clientIdProperty:n}),this.setModel(i),(r=this.getProxy())&&r.setModel(i)):n&&(t=this.getModel())&&(t.self.prototype.clientIdProperty=n)},buildExtractors:function(e){var t,i,n,r=this;if(e||!r.hasExtractors)return t=r.getTotalProperty(),i=r.getSuccessProperty(),n=r.getMessageProperty(),t&&(r.getTotal=r.getAccessor(t)),i&&(r.getSuccess=r.getAccessor(i)),n&&(r.getMessage=r.getAccessor(n)),r.hasExtractors=!0},getAccessor:function(e){var t,i,n=this.extractorCache;return"string"==typeof e?((i=this.getAccessorKey(e))&&(t=n.get(i)),t||(t=this.createAccessor(e),i&&n.add(i,t))):t=this.createAccessor(e),t},getAccessorKey:function(e){var t=this.$className;return t?t+e:""},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){this.model=this.getTotal=this.getSuccess=this.getMessage=this.rawData=null,this.onMetaChange=null,this.transform=null,this.callParent()},privates:{copyFrom:function(e){e.buildExtractors(),this.getTotal=e.getTotal,this.getSuccess=e.getSuccess,this.getMessage=e.getMessage,++this.duringInit,this.setConfig(e.getConfig()),--this.duringInit,this.hasExtractors=!0}}},function(e){var t=e.prototype;Ext.apply(t,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:!0,message:""})}),t.extractorCache=new Ext.util.LruCache}),Ext.define("Ext.data.writer.Writer",{alias:"writer.base",alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],mixins:["Ext.mixin.Factoryable"],factoryConfig:{defaultType:null},isWriter:!0,config:{clientIdProperty:null,allDataOptions:{persist:!0},partialDataOptions:{changes:!0,critical:!0},writeAllFields:!1,dateFormat:null,nameProperty:"name",writeRecordId:!0,transform:null},constructor:function(e){this.initConfig(e)},applyTransform:function(e){return e?(Ext.isFunction(e)&&(e={fn:e}),e.fn.bind(e.scope||this)):e},write:function(e){var t,i=e.getOperation(),n=i.getRecords()||[],r=n.length,o=[];for(t=0;t<r;t++)o.push(this.getRecordData(n[t],i));return this.writeRecords(e,o)},writeRecords:Ext.emptyFn,getRecordData:function(e,t){var i,n,r,o,a,s,l,d,u=this.getNameProperty(),c="name"!==u,h=e.self.idField,f=h?h[u]||h.name:"id",g=e.id,p=this.getWriteAllFields();if(h&&h.serialize&&(g=h.serialize(g)),!p&&t&&t.isDestroyOperation)(i={})[f]=g;else for(f in n=this.getDateFormat(),o=(r=e.phantom)||p?this.getAllDataOptions():this.getPartialDataOptions(),a=r&&this.getClientIdProperty(),s=e.getFieldsMap(),o.serialize=!1,l=e.getData(o),i=c?{}:l,a?(i[a]=g,delete l[f]):this.getWriteRecordId()||delete l[f],l)g=l[f],(d=s[f])?(d.isDateField&&n&&Ext.isDate(g)?g=Ext.Date.format(g,n):d.serialize&&(g=d.serialize(g,e)),c&&(f=d[u]||f),i[f]=g):c&&(i[f]=g);return i}}),Ext.define("Ext.data.proxy.Proxy",{mixins:["Ext.mixin.Factoryable","Ext.mixin.Observable"],$configPrefixed:!1,alias:"proxy.proxy",alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],requires:["Ext.data.schema.Schema","Ext.data.reader.Reader","Ext.data.writer.Writer"],uses:["Ext.data.Batch","Ext.data.operation.*","Ext.data.Model"],config:{batchOrder:"create,update,destroy",batchActions:!0,model:void 0,reader:{type:"json"},writer:{type:"json"}},isProxy:!0,isSynchronous:!1,constructor:function(e){this.mixins.observable.constructor.call(this,e),this.pendingOperations={}},applyModel:function(e){return Ext.data.schema.Schema.lookupEntity(e)},updateModel:function(e){var t;e&&(t=this.getReader())&&!t.getModel()&&t.setModel(e)},applyReader:function(e){return this.isSynchronous&&((e=e||{}).keepRawData=!0),Ext.Factory.reader(e)},updateReader:function(e){var t;e&&((t=this.getModel())?e.setModel(t):(t=e.getModel())&&this.setModel(t),null!=e.responseType&&(this.responseType=e.responseType))},applyWriter:function(e){var t=this.getReader();return(e=Ext.Factory.writer(e)).getRecord&&!e.getRecord()&&t&&t.getRecord&&(t=t.getRecord())&&e.setRecord(t),e},abort:Ext.emptyFn,onMetaChange:function(e){this.fireEvent("metachange",this,e)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(e,t){var i,n,r,o,a,s,l,d,u,c=this.getBatchActions();for(void 0===e.operations&&(e={operations:e,listeners:t}),e.batch?Ext.isDefined(e.batch.runOperation)&&(i=Ext.applyIf(e.batch,{proxy:this,listeners:{}})):e.batch={proxy:this,listeners:e.listeners||{}},(i=i||new Ext.data.Batch(e.batch)).on("complete",Ext.bind(this.onBatchComplete,this,[e],0),null,{single:!0,priority:1e3}),i.$destroyOwner=e.$destroyOwner,o=(r=this.getBatchOrder().split(",")).length,s=0;s<o;s++)if(a=r[s],n=e.operations[a])if(c)i.add(this.createOperation(a,{records:n,params:e.params}));else for(d=n.length,l=0;l<d;l++)u=n[l],i.add(this.createOperation(a,{records:[u],params:e.params}));return i.start(),i},onBatchComplete:function(e,t){var i=e.scope||this;t.hasException()?Ext.isFunction(e.failure)&&Ext.callback(e.failure,i,[t,e]):Ext.isFunction(e.success)&&Ext.callback(e.success,i,[t,e]),Ext.isFunction(e.callback)&&Ext.callback(e.callback,i,[t,e]),t.$destroyOwner||t.destroy()},createOperation:function(e,t){var i=Ext.createByAlias("data.operation."+e,t);return i.setProxy(this),this.pendingOperations[i._internalId]=i},completeOperation:function(e){delete this.pendingOperations[e._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var e,t,i=this.pendingOperations;for(e in i)(t=i[e])&&t.isRunning()&&t.abort(),t.destroy();this.pendingOperations=null,this.callParent()}}),Ext.define("Ext.data.proxy.Client",{extend:"Ext.data.proxy.Proxy",alternateClassName:"Ext.data.ClientProxy",isSynchronous:!0,clear:function(){Ext.raise("The Ext.data.proxy.Client subclass that you are using has not defined a 'clear' function. See src/data/ClientProxy.js for details.")}}),Ext.define("Ext.data.proxy.Memory",{extend:"Ext.data.proxy.Client",alias:"proxy.memory",alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:!0,config:{enablePaging:null,data:{$value:null,merge:function(e,t,i,n){return e?Ext.clone(e):e}},clearOnRead:null},finishOperation:function(e){var t,i=e.getRecords(),n=i.length;for(t=0;t<n;t++)i[t].dropped=!!e.isDestroyOperation,i[t].commit();e.setSuccessful(!0)},create:function(e){this.finishOperation(e)},update:function(e){this.finishOperation(e)},erase:function(e){this.finishOperation(e)},read:function(e){var t,i=this.getReader(),n=i.read(this.getData(),{recordCreator:i.defaultRecordCreatorFromServer}),r=n.getRecords(),o=e.getSorters(),a=e.getGrouper(),s=e.getFilters(),l=e.getStart(),d=e.getLimit();!1!==e.process(n,null,null,!1)&&(e.success&&this.getClearOnRead()&&this.setData(null),s&&s.length&&(n.setRecords(r=Ext.Array.filter(r,Ext.util.Filter.createFilterFn(s))),n.setTotal(r.length)),a&&(o=o?o.concat(a):o),o&&o.length&&n.setRecords(r=Ext.Array.sort(r,Ext.util.Sortable.createComparator(o))),this.getEnablePaging()&&void 0!==l&&void 0!==d&&(l>=n.getTotal()?n.setConfig({success:!1,records:[],total:0}):n.setRecords(Ext.Array.slice(r,l,l+d))),e.setCompleted(),(t=n.getMetadata())&&this.onMetaChange(t))},clear:Ext.emptyFn}),Ext.define("Ext.data.ProxyStore",{extend:"Ext.data.AbstractStore",requires:["Ext.data.Model","Ext.data.proxy.Proxy","Ext.data.proxy.Memory","Ext.data.operation.*"],config:{model:void 0,fields:null,proxy:void 0,autoLoad:void 0,autoSync:!1,batchUpdateMode:"operation",sortOnLoad:!0,trackRemoved:!0,asynchronousLoad:void 0},onClassExtended:function(e,t,i){var n,r=t.model;"string"==typeof r&&(n=i.onBeforeCreated,i.onBeforeCreated=function(){var e=this,t=arguments;Ext.require(r,function(){n.apply(e,t)})})},implicitModel:"Ext.data.Model",autoSyncSuspended:0,removed:null,constructor:function(e){var t=this.model;if(this.callParent(arguments),!1===this.getAsynchronousLoad()&&this.flushLoad(),!this.getModel()&&!1!==this.useModelWarning&&"ext-empty-store"!==this.getStoreId()){var i=[Ext.getClassName(this)||"Store"," created with no model."];"string"==typeof t&&i.push(" The name '",t,"'"," does not correspond to a valid model."),Ext.log.warn(i.join(""))}},doDestroy:function(){var e=this.getProxy();this.clearLoadTask(),Ext.destroy(this.getData()),this.data=null,this.setProxy(null),e.autoCreated&&e.destroy(),this.setModel(null),this.callParent()},applyAsynchronousLoad:function(e){return null==e&&(e=!this.loadsSynchronously()),e},updateAutoLoad:function(e){this.getData(),e&&this.load(Ext.isObject(e)?e:void 0)},getTotalCount:function(){return this.totalCount||0},applyFields:function(e){e&&this.createImplicitModel(e)},applyModel:function(e){return e?e=Ext.data.schema.Schema.lookupEntity(e):this.destroying||(this.getFields(),e=this.getModel()||this.createImplicitModel()),e},applyProxy:function(e){var t=this.getModel();return null!==e&&(e?e.isProxy?e.setModel(t):(Ext.isString(e)?e={type:e,model:t}:e.model||(e=Ext.apply({model:t},e)),(e=Ext.createByAlias("proxy."+e.type,e)).autoCreated=!0):t&&(e=t.getProxy(),this.useModelProxy=!0),e||((e=Ext.createByAlias("proxy.memory")).autoCreated=!0)),e},applyState:function(e){this.callParent([e]),(this.getAutoLoad()||this.isLoaded())&&(this.getRemoteSort()||this.getRemoteFilter())&&this.load()},updateProxy:function(e,t){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(e){this.cleanRemoved(),this.removed=e?[]:null},onMetaChange:function(e,t){this.fireEvent("metachange",this,t)},create:function(e,t){var i=new(this.getModel())(e);return(t=Ext.apply({},t)).records||(t.records=[i]),t.internalScope=this,t.internalCallback=this.onProxyWrite,this.createOperation("create",t).execute()},read:function(){return this.load.apply(this,arguments)},update:function(e){return(e=Ext.apply({},e)).records||(e.records=this.getUpdatedRecords()),e.internalScope=this,e.internalCallback=this.onProxyWrite,this.createOperation("update",e).execute()},onProxyWrite:function(e){var t=e.wasSuccessful(),i=e.getRecords();switch(e.getAction()){case"create":this.onCreateRecords(i,e,t);break;case"update":this.onUpdateRecords(i,e,t);break;case"destroy":this.onDestroyRecords(i,e,t)}t&&(this.fireEvent("write",this,e),this.fireEvent("datachanged",this))},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(e,t,i){i&&this.cleanRemoved()},erase:function(e){return(e=Ext.apply({},e)).records||(e.records=this.getRemovedRecords()),e.internalScope=this,e.internalCallback=this.onProxyWrite,this.createOperation("destroy",e).execute()},onBatchOperationComplete:function(e,t){return this.onProxyWrite(t)},onBatchComplete:function(e,t){var i,n=e.operations,r=n.length;if("operation"!==this.batchUpdateMode){for(this.suspendEvents(),i=0;i<r;i++)this.onProxyWrite(n[i]);this.resumeEvents()}this.isSyncing=!1,e.$destroyOwner===this&&e.destroy(),this.fireEvent("datachanged",this)},onBatchException:function(e,t){},filterNew:function(e){return e.phantom&&e.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(e){return e.dirty&&!e.phantom&&e.isValid()},getRemovedRecords:function(){var e=this.getRawRemovedRecords();return e?Ext.Array.clone(e):[]},sync:function(e){var t=this,i={},n=t.getNewRecords(),r=t.getUpdatedRecords(),o=t.getRemovedRecords(),a=!1;return t.isSyncing&&Ext.log.warn("Sync called while a sync operation is in progress. Consider configuring autoSync as false."),t.needsSync=!1,0<n.length&&(i.create=n,a=!0),0<r.length&&(i.update=r,a=!0),0<o.length&&(i.destroy=o,a=!0),a&&!1!==t.fireEvent("beforesync",i)&&(t.isSyncing=!0,e=e||{},t.proxy.batch(Ext.apply(e,{operations:i,listeners:t.getBatchListeners(),$destroyOwner:t}))),t},getBatchListeners:function(){var e={scope:this,exception:this.onBatchException,complete:this.onBatchComplete};return"operation"===this.batchUpdateMode&&(e.operationcomplete=this.onBatchOperationComplete),e},save:function(){return this.sync.apply(this,arguments)},load:function(e){return e="function"==typeof e?{callback:e}:e?Ext.Object.chain(e):{},this.pendingLoadOptions=e,this.getAsynchronousLoad()?this.loadTimer||(this.loadTimer=Ext.asap(this.flushLoad,this)):this.flushLoad(),this},flushLoad:function(){var e,t=this,i=t.pendingLoadOptions;t.destroying||t.destroyed||(t.clearLoadTask(),i&&(t.setLoadOptions(i),t.getRemoteSort()&&i.sorters&&t.fireEvent("beforesort",t,i.sorters),e=Ext.apply({internalScope:t,internalCallback:t.onProxyLoad,scope:t},i),t.lastOptions=e,e=t.createOperation("read",e),!1!==t.fireEvent("beforeload",t,e)?(t.onBeforeLoad(e),t.loading=!0,t.hasListeners.beginload&&t.fireEvent("beginload",t,e),e.execute()):(t.getAsynchronousLoad()&&e.abort(),e.setCompleted())))},reload:function(e){return this.load(Ext.apply({},e,this.lastOptions))},onEndUpdate:function(){this.needsSync&&this.autoSync&&!this.autoSyncSuspended&&this.sync()},afterReject:function(e){this.contains(e)&&(this.onUpdate(e,Ext.data.Model.REJECT,null),this.fireEvent("update",this,e,Ext.data.Model.REJECT,null),this.fireEvent("datachanged",this))},afterCommit:function(e,t){t=t||null,this.contains(e)&&(this.onUpdate(e,Ext.data.Model.COMMIT,t),this.fireEvent("update",this,e,Ext.data.Model.COMMIT,t),this.fireEvent("datachanged",this))},afterErase:function(e){this.onErase(e)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,hasPendingLoad:function(){return!!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return!!this.loading},isLoaded:function(){return 0<this.loadCount},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(e){this.autoSyncSuspended||Ext.log.warn("Mismatched call to resumeAutoSync - auto synchronization is currently not suspended."),this.autoSyncSuspended&&!--this.autoSyncSuspended&&e&&this.sync()},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){this.pendingLoadOptions=this.loadTimer=Ext.unasap(this.loadTimer)},cleanRemoved:function(){var e,t,i=this.getRawRemovedRecords();if(i){for(t=0,e=i.length;t<e;++t)i[t].unjoin(this);i.length=0}},createOperation:function(e,t){var i,n=this.getProxy();return this.proxyListeners||(i={scope:this,destroyable:!0,beginprocessresponse:this.beginUpdate,endprocessresponse:this.endUpdate},this.disableMetaChangeEvent||(i.metachange=this.onMetaChange),this.proxyListeners=n.on(i)),n.createOperation(e,t)},createImplicitModel:function(e){var t,i,n={extend:this.implicitModel,statics:{defaultProxy:"memory"}};e&&(n.fields=e),i=Ext.define(null,n),this.setModel(i),(t=this.getProxy())?i.setProxy(t):this.setProxy(i.getProxy())},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(e){var t=this.getRawRemovedRecords();t&&(Ext.Array.remove(t,e),e.unjoin(this))},setLoadOptions:function(e){var t,i;this.getRemoteFilter()&&(t=this.getFilters(!1))&&t.getCount()&&(e.filters=t.getRange()),this.getRemoteSort()&&(i=this.getSorters(!1))&&i.getCount()&&(e.sorters=i.getRange())}}}),Ext.define("Ext.util.Group",{extend:"Ext.util.Collection",isGroup:!0,config:{groupKey:null},$endUpdatePriority:2001,manageSorters:!1}),Ext.define("Ext.data.Group",{extend:"Ext.util.Group",isDataGroup:!0,store:null,getSummaryRecord:function(){var e,t=this.summaryRecord,i=this.store,n=i.getData().generation;return t||(e=i.getModel().getSummaryModel(),this.summaryRecord=t=new e),t.isRemote||t.summaryGeneration===n||(t.calculateSummary(this.items),t.summaryGeneration=n),t}}),Ext.define("Ext.data.LocalStore",{extend:"Ext.Mixin",requires:["Ext.data.Group"],mixinConfig:{id:"localstore",after:{fireGroupChangeEvent:"onGrouperChange"}},config:{extraKeys:null},applyExtraKeys:function(e){var t,i=this.getData();for(t in i.setExtraKeys(e),e=i.getExtraKeys())this[t]=e[t]},add:function(e){return this.insert(this.getCount(),1===arguments.length?e:arguments)},constructDataCollection:function(){var e=new Ext.util.Collection({id:this.getId()+"-data",rootProperty:"data",groupConfig:{xclass:"Ext.data.Group",store:this}});return e.addObserver(this),e},createModel:function(e){var t=this.getSession();return e.isModel||(e=new(this.getModel())(e,t)),e},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var e=this.getData().getSorters();return e.setSorterConfigure(this.addFieldTransform,this),e},getSummaryRecord:function(){var e,t=this.summaryRecord,i=this.getData(),n=i.generation;return t||(e=this.getModel().getSummaryModel(),this.summaryRecord=t=new e),t.isRemote||t.summaryGeneration===n||(t.calculateSummary(i.items),t.summaryGeneration=n),t},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},onGrouperChange:function(e){this.callObservers("GrouperChange",[e])},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){var e=this.getSorters();e.beginUpdate(),e.endUpdate()},contains:function(e){return-1<this.indexOf(e)},each:function(e,t,i){var n,r,o,a=this.getData(),s=i;for("object"==typeof i&&(s=i.filtered),s&&a.filtered&&(a=a.getSource()),n=(a=a.items.slice(0)).length,o=0;o<n&&(r=a[o],!1!==e.call(t||r,r,o,n));++o);},collect:function(e,t,i){var n=t,r=this.getData();return"object"==typeof t&&(i=t.filtered,n=t.allowNull),i&&r.filtered&&(r=r.getSource()),r.collect(e,"data",n)},getById:function(e){var t=this.getData();return t.filtered&&(t=t.getSource()),t.get(e)||null},getByInternalId:function(e){var t,i=this.getData();return i.filtered&&(i.$hasExtraKeys||(t=this.makeInternalKeyCfg(),i.setExtraKeys(t),i.$hasExtraKeys=!0),i=i.getSource()),i.$hasExtraKeys||(i.setExtraKeys(t||this.makeInternalKeyCfg()),i.$hasExtraKeys=!0),i.byInternalId.get(e)||null},getDataSource:function(){var e=this.getData();return e.getSource()||e},indexOf:function(e){return this.getData().indexOf(e)},indexOfId:function(e){return this.indexOf(this.getById(e))},insert:function(e,t){var i,n;if(t&&(i=(t=Ext.isIterable(t)?Ext.Array.clone(t):[t]).length),!i)return[];for(n=0;n<i;++n)t[n]=this.createModel(t[n]);return this.getData().insert(e,t),t},queryBy:function(e,t){var i=this.getData();return(i.getSource()||i).createFiltered(e,t)},query:function(e,t,i,n,r){var o=this.getData();return(o.getSource()||o).createFiltered(e,t,i,n,r)},first:function(e){return this.getData().first(e)||null},last:function(e){return this.getData().last(e)||null},sum:function(e,t){var i=this.getData();return t&&this.isGrouped()?i.sumByGroup(e):i.sum(e)},count:function(e){var t=this.getData();return e&&this.isGrouped()?t.countByGroup():t.count()},min:function(e,t){var i=this.getData();return t&&this.isGrouped()?i.minByGroup(e):i.min(e)},max:function(e,t){var i=this.getData();return t&&this.isGrouped()?i.maxByGroup(e):i.max(e)},average:function(e,t){var i=this.getData();return t&&this.isGrouped()?i.averageByGroup(e):i.average(e)},aggregate:function(e,t,i,n){var r,o,a,s,l;if(i&&this.isGrouped()){for(o=(r=this.getGroups().items).length,a={},l=0;l<o;++l)a[(s=r[l]).getGroupKey()]=this.getAggregate(e,t||this,s.items,n);return a}return this.getAggregate(e,t,this.getData().items,n)},getAggregate:function(e,t,i,n){var r,o=[],a=i.length;for(r=0;r<a;++r)o[r]=i[r].get(n);return e.call(t||this,i,o)},addObserver:function(e){var t=this.observers;t||(this.observers=t=new Ext.util.Collection),t.add(e)},removeObserver:function(e){var t=this.observers;t&&t.remove(e)},callObservers:function(e,t){var i,n,r,o,a,s=this.observers;if(s)for(n=s.items,t?t.unshift(this):t=[this],r=0,i=n.length;r<i;++r)(a=n[r])[o="onSource"+e]&&a[o].apply(a,t)},queryRecordsBy:function(e,t){var i,n,r,o=this.getData(),a=[];for(t=t||this,n=0,i=(o=(o.getSource()||o).items).length;n<i;++n)r=o[n],!0===e.call(t,r)&&a.push(r);return a},queryRecords:function(e,t){var i,n,r,o=this.getData(),a=[];for(n=0,i=(o=(o.getSource()||o).items).length;n<i;++n)(r=o[n]).get(e)===t&&a.push(r);return a},privates:{isLast:function(e){return e===this.last()},makeInternalKeyCfg:function(){return{byInternalId:{property:"internalId",rootProperty:""}}}}}),Ext.define("Ext.data.proxy.Server",{extend:"Ext.data.proxy.Proxy",alias:"proxy.server",alternateClassName:"Ext.data.ServerProxy",uses:["Ext.data.Request"],isRemote:!0,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:!1,simpleGroupMode:!1,noCache:!0,cacheString:"_dc",timeout:3e4,api:{create:void 0,read:void 0,update:void 0,destroy:void 0},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(e,t){var i=this.getExtraParams();i[e]=t,this.fireEvent("extraparamschanged",i)},updateExtraParams:function(e,t){this.fireEvent("extraparamschanged",e)},buildRequest:function(e){var t,i,n,r=Ext.apply({},e.getParams()),o=Ext.applyIf(r,this.getExtraParams()||{});return Ext.applyIf(o,this.getParams(e)),i=e.getId(),n=this.getIdParam(),void 0!==i&&void 0===o[n]&&(o[n]=i),(t=new Ext.data.Request({params:o,action:e.getAction(),records:e.getRecords(),url:e.getUrl(),operation:e,proxy:this})).setUrl(this.buildUrl(t)),e.setRequest(t),t},processResponse:function(e,t,i,n){var r,o,a,s,l,d=this;d.destroying||d.destroyed||(d.fireEvent("beginprocessresponse",d,n,t),r=!0===e?(o=d.getReader(),a=204===n.status?o.getNullResultSet():o.read(d.extractResponseData(n),{recordCreator:t.getRecordCreator()||o.defaultRecordCreatorFromServer}),t.$destroyOwner||(t.$destroyOwner=d,l=!0),t.process(a,i,n),!t.wasSuccessful()):(d.setException(t,n),!0),d.destroyed||(r?d.fireEvent("exception",d,n,t):(s=a.getMetadata())&&d.onMetaChange(s),d.destroyed||(d.afterRequest(i,e),d.fireEvent("endprocessresponse",d,n,t))),!t.destroyed&&l&&t.$destroyOwner===d&&t.destroy())},setException:function(e,t){e.setException({status:t.status,statusText:t.statusText,response:t})},extractResponseData:Ext.identityFn,applyEncoding:function(e){return Ext.encode(e)},encodeSorters:function(e,t){var i,n=[],r=e.length;for(i=0;i<r;i++)n[i]=e[i].serialize();return this.applyEncoding(t?n[0]:n)},encodeFilters:function(e){var t,i,n=[],r=e.length;for(i=0;i<r;i++)t|=e[i].serializeTo(n);return t?this.applyEncoding(n):n},getParams:function(e){if(!e.isReadOperation)return{};var t,i,n=this,r={},o=e.getGrouper(),a=e.getSorters(),s=e.getFilters(),l=e.getPage(),d=e.getStart(),u=e.getLimit(),c=n.getSimpleSortMode(),h=n.getSimpleGroupMode(),f=n.getPageParam(),g=n.getStartParam(),p=n.getLimitParam(),m=n.getGroupParam(),x=n.getGroupDirectionParam(),y=n.getSortParam(),v=n.getFilterParam(),E=n.getDirectionParam();if(f&&l&&(r[f]=l),g&&(d||0===d)&&(r[g]=d),p&&u&&(r[p]=u),(t=m&&o)&&(h?(r[m]=o.getProperty(),x===m?r[m]+=" "+o.getDirection():r[x]=o.getDirection()):r[m]=n.encodeSorters([o],!0)),y&&a&&0<a.length)if(c)for(i=1<a.length&&t?1:0;i<a.length;i++)E===y?r[y]=Ext.Array.push(r[y]||[],a[i].getProperty()+" "+a[i].getDirection()):(r[y]=Ext.Array.push(r[y]||[],a[i].getProperty()),r[E]=Ext.Array.push(r[E]||[],a[i].getDirection()));else r[y]=n.encodeSorters(a);return v&&s&&0<s.length&&(r[v]=n.encodeFilters(s)),r},buildUrl:function(e){var t=this.getUrl(e);return t||Ext.raise("You are using a ServerProxy but have not supplied it with a url."),this.getNoCache()&&(t=Ext.urlAppend(t,Ext.String.format("{0}={1}",this.getCacheString(),Ext.Date.now()))),t},getUrl:function(e){var t;return e&&(t=e.getUrl()||this.getApi()[e.getAction()]),t||this.callParent()},doRequest:function(e,t,i){Ext.raise("The doRequest function has not been implemented on your Ext.data.proxy.Server subclass. See src/data/ServerProxy.js for details")},afterRequest:Ext.emptyFn,destroy:function(){this.destroying=!0,this.reader=this.writer=Ext.destroy(this.reader,this.writer),this.callParent(),this.destroyed=!0}}),Ext.define("Ext.data.proxy.Ajax",{requires:["Ext.Ajax"],extend:"Ext.data.proxy.Server",alias:"proxy.ajax",alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],isAjaxProxy:!0,defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:!1,headers:void 0,paramsAsJson:!1,withCredentials:!1,useDefaultXhrHeader:!0,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(e){var t,i,n=this,r=n.getWriter(),o=n.buildRequest(e),a=n.getMethod(o);return r&&e.allowWrite()&&(o=r.write(o)),o.setConfig({binary:n.getBinary(),headers:n.getHeaders(),timeout:n.getTimeout(),scope:n,callback:n.createRequestCallback(o,e),method:a,useDefaultXhrHeader:n.getUseDefaultXhrHeader(),disableCaching:!1}),null!=n.responseType&&Ext.supports.XHR2&&o.setResponseType(n.responseType),"GET"!==a.toUpperCase()&&n.getParamsAsJson()&&(i=o.getParams())&&(t=(t=o.getJsonData())?Ext.Object.merge({},t,i):i,o.setJsonData(t),o.setParams(void 0)),n.getWithCredentials()&&(o.setWithCredentials(!0),o.setUsername(n.getUsername()),o.setPassword(n.getPassword())),n.sendRequest(o)},sendRequest:function(e){return e.setRawRequest(Ext.Ajax.request(e.getCurrentConfig())),this.lastRequest=e},abort:function(e){(e=e||this.lastRequest)&&Ext.Ajax.abort(e.getRawRequest())},getMethod:function(e){var t,i=this.getActionMethods(),n=e.getAction();return i&&(t=i[n]),t||this.defaultActionMethods[n]},createRequestCallback:function(n,r){return function(e,t,i){n===this.lastRequest&&(this.lastRequest=null),this.destroying||this.destroyed||this.processResponse(t,r,n,i)}},destroy:function(){this.lastRequest=null,this.callParent()}}),Ext.define("Ext.data.reader.Json",{extend:"Ext.data.reader.Reader",alternateClassName:"Ext.data.JsonReader",alias:"reader.json",requires:["Ext.JSON"],config:{record:null,metaProperty:"metaData",useSimpleAccessors:!1,preserveRawData:!1},responseType:"json",updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},getResponseData:function(t){var i;if("object"==typeof t.responseJson)return t.responseJson;try{return Ext.decode(t.responseText)}catch(e){return i=this.createReadError(e.message),Ext.Logger.warn("Unable to parse the JSON returned by the server"),this.fireEvent("exception",this,t,i),i}},buildExtractors:function(e){var t=this,i=Ext.emptyFn;t.callParent([e])&&(t.getRoot=t.setupExtractor(t.getRootProperty(),Ext.identityFn),t.getGroupRoot=t.setupExtractor(t.getGroupRootProperty(),i),t.getSummaryRoot=t.setupExtractor(t.getSummaryRootProperty(),i),t.getMeta=t.setupExtractor(t.getMetaProperty(),i))},extractData:function(e,t){var i,n,r=this.getRecord(),o=[];if(r)for(!(i=e.length)&&Ext.isObject(e)&&(i=1,e=[e]),n=0;n<i;n++)o[n]=e[n][r];else o=e;return this.callParent([o,t])},getModelData:function(e){return this.getPreserveRawData()?Ext.apply({},e):e},createAccessor:function(){var p=/[\[\.]/;return function(t){var e,i,n,r,o,a,s,l,d,u,c,h,f,g=this.getUseSimpleAccessors();if(t||0===t){if("function"==typeof t)return t;if(g||(e=String(t).search(p)),!0===g||e<0)i=function(e){return null==e?null:e[t]};else{for(n="raw",r=[],o="",a=0,f=t.length,c=0;c<=f;++c)s="["===(u=t[c]),l="]"===u,!(d="."===u||s||l||!u)||1<a||a&&!l?o+=u:d&&(h=!1,s?++a:l&&(--a,h=!0),o&&(n+=o=h?"["+o+"]":"."+o,r.push(""+n),o=""));i=r.join(" && "),i=Ext.functionFactory("raw","return "+i)}return i}}}(),createFieldAccessor:function(i){var e=i.mapping,t=e||0===e,n=t?e:i.name;if(t)return"function"==typeof n?function(e,t){return i.mapping(e,t)}:this.createAccessor(n)},getAccessorKey:function(e){var t=this.getUseSimpleAccessors()?"simple":"";return this.callParent([t+e])},privates:{copyFrom:function(e){this.callParent([e]),this.getRoot=e.getRoot},getGroupRoot:function(e){return this.buildExtractors(),this.getGroupRoot(e)},getSummaryRoot:function(e){return this.buildExtractors(),this.getSummaryRoot(e)},setupExtractor:function(e,t){return e?this.getAccessor(e):t}}}),Ext.define("Ext.data.writer.Json",{extend:"Ext.data.writer.Writer",alternateClassName:"Ext.data.JsonWriter",alias:"writer.json",config:{rootProperty:void 0,encode:!1,allowSingle:!0,expandData:!1},constructor:function(e){e&&e.hasOwnProperty("root")&&((e=Ext.apply({},e)).rootProperty=e.root,delete e.root,Ext.log.warn('Ext.data.writer.Json: Using the deprecated "root" configuration. Use "rootProperty" instead.')),this.callParent([e])},getExpandedData:function(e){var t,i,n,r,o,a,s=e.length,l=0;for(a=function(e,t){var i={};return i[e]=t,i};l<s;l++)for(i in t=e[l])if(t.hasOwnProperty(i)&&0<(r=(n=i.split(".")).length-1)){for(o=t[i];0<r;r--)o=a(n[r],o);t[n[0]]=t[n[0]]||{},Ext.Object.merge(t[n[0]],o),delete t[i]}return e},writeRecords:function(e,t){var i,n,r,o=this.getRootProperty();return this.getExpandData()&&(t=this.getExpandedData(t)),this.getAllowSingle()&&1===t.length&&(t=t[0],n=!0),(r=this.getTransform())&&(t=r(t,e)),this.getEncode()?o?e.setParam(o,Ext.encode(t)):Ext.raise("Must specify a root when using encode"):(n||t&&t.length)&&(i=e.getJsonData()||{},o?i[o]=t:i=t,e.setJsonData(i)),e}}),Ext.define("Ext.util.SorterCollection",{extend:"Ext.util.Collection",requires:["Ext.util.Sorter"],isSorterCollection:!0,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(e){this.sortFn=Ext.util.Sorter.createComparator(this),this.callParent([e]),this.setDecoder(this.decodeSorter)},addSort:function(e,t,i){var n,r,o,a,s,l,d,u=this;e?(a=u.getOptions(),e instanceof Array?(d=e,i=t,t=null):Ext.isString(e)?d=(l=u.get(e))?[l]:[{property:e,direction:t||a.getDefaultSortDirection()}]:Ext.isFunction(e)?d=[{sorterFn:e,direction:t||a.getDefaultSortDirection()}]:(Ext.isObject(e)||Ext.raise("Invalid sort descriptor: "+e),d=[e],i=t,t=null),i&&!u._sortModes[i]&&Ext.raise('Sort mode should be "multi", "append", "prepend" or "replace", not "'+i+'"'),i=u._sortModes[i||"replace"],s=u.getAt(0),n=u.length,r=i.append?n:0,u.beginUpdate(),u.splice(r,i.replace?n:0,d),i.multi&&(n=u.length,(o=a.getMultiSortLimit())<n&&u.removeAt(o,n)),l&&t?l.setDirection(t):0===r&&s&&s===u.getAt(0)&&s.toggle()):u.beginUpdate(),u.endUpdate()},clear:function(){this.beginUpdate(),this.callParent(),this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(e){var t,i,n=this.items,r=n.length;for(t=0;t<r;++t)if((i=n[t]).getProperty()===e)return i;return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(e,t){var i,n,r,o=this.getOptions(),a=o.getRootProperty(),s=this.getSorterOptionsFn();if(e.isSorter)e.getRoot()||e.setRoot(a);else{if(n={direction:o.getDefaultSortDirection(),root:a},"string"==(r=typeof e)){if(i=this.get(e))return i;n.property=e}else"function"==r?n.sorterFn=e:(Ext.isObject(e)||Ext.raise("Invalid sorter specified: "+e),(n=Ext.apply(n,e)).fn&&(n.sorterFn=n.fn,delete n.fn));e=Ext.create(t||Ext.util.Sorter,n)}return s&&s.call(this.getSorterOptionsScope()||this,e),e},setSorterConfigure:function(e,t){this.setSorterOptionsFn(e),this.setSorterOptionsScope(t)},decodeRemoveItems:function(e,t){var i=void 0===t?e:e[t];if(!i||!i.$cloned){(e.length>t+1||!Ext.isIterable(i))&&(i=Ext.Array.slice(e,t));var n,r,o,a,s,l=this.items,d=i.length,u=[];for(n=0;n<d;n++)if((a=i[n])&&a.isSorter)u.push(a);else if("string"==(s=typeof a))(a=this.get(a))&&u.push(a);else if("function"==s)for(o=l.length;0<o--;)(r=l[o]).getSorterFn()===a&&u.push(r);else Ext.raise("Invalid sorter specification: "+a);(i=u).$cloned=!0}return i},getOptions:function(){return this.$sortable||this}}),Ext.define("Ext.util.FilterCollection",{extend:"Ext.util.Collection",requires:["Ext.util.Filter"],isFilterCollection:!0,$filterable:null,filterFn:null,constructor:function(e){this.filterFn=Ext.util.Filter.createFilterFn(this),this.callParent([e]),this.setDecoder(this.decodeFilter)},filterData:function(e){return this.filtered?Ext.Array.filter(e,this.filterFn):e},getFilterFn:function(){return this.filterFn},isItemFiltered:function(e){return!this.filterFn(e)},getFilterCount:function(){var e,t=this.items,i=t.length;for(e=i-1;0<=e;e--)t[e].getDisabled()&&i--;return i},decodeFilter:function(e){var t,i=this.getOptions().getRootProperty();if(e.isFilter)e.setRoot&&!e.getRoot()&&e.setRoot(i);else{if(t={root:i},Ext.isFunction(e))t.filterFn=e;else if(Ext.isObject(e)||Ext.raise("Invalid filter specified: "+e),(t=Ext.apply(t,e)).fn&&(t.filterFn=t.fn,delete t.fn),Ext.util.Filter.isInvalid(t))return!1;e=new Ext.util.Filter(t)}return e},decodeRemoveItems:function(e,t){var i=void 0===t?e:e[t];if(!i.$cloned){(e.length>t+1||!Ext.isIterable(i))&&(i=Ext.Array.slice(e,t));var n,r,o,a,s,l,d,u,c,h=this.items,f=i.length,g=[];for(r=0;r<f;r++)if((n=i[r])&&n.isFilter)g.push(n);else for(o="function"==(c=typeof n),a=void 0!==n.property&&void 0!==n.value,s="string"==c,o||a||s||Ext.raise("Invalid filter specification: "+n),u=h.length;0<u--;)l=h[u],d=!1,s?d=l.getProperty()===n:o?d=l.getFilterFn()===n:a&&(d=l.getProperty()===n.property&&l.getValue()===n.value),d&&g.push(l);(i=g).$cloned=!0}return i},getOptions:function(){return this.$filterable||this}}),Ext.define("Ext.util.GroupCollection",{extend:"Ext.util.Collection",requires:["Ext.util.Group","Ext.util.SorterCollection","Ext.util.FilterCollection"],isGroupCollection:!0,config:{grouper:null,groupConfig:null,itemRoot:null},observerPriority:-100,emptyGroupRetainTime:3e5,constructor:function(e){this.emptyGroups={},this.callParent([e]),this.on("remove","onGroupRemove",this)},getItemGroup:function(e){var t=this.getGrouper().getGroupString(e);return this.get(t)},onCollectionAdd:function(e,t){this.isConfiguring||this.addItemsToGroups(e,t.items,t.at)},onCollectionBeforeItemChange:function(e,t){this.changeDetails=t},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(e,t){t.indexChanged||this.syncItemGrouping(e,t),this.changeDetails=null},onCollectionRefresh:function(e){if(e.generation){var t,i,n,r,o,a=this.itemGroupKeys={},s=this.createEntries(e,e.items),l=s.entries;for(i=0,n=l.length;i<n;++i)for((r=l[i]).group.splice(0,1e99,r.items),o=0;o<r.items.length;o++)a[e.getKey(r.items[o])]=r.group;for(t in l=null,this.map)t in s.groups||(l=l||[]).push(this.map[t]);l&&this.remove(l),this.sortItems()}},onCollectionRemove:function(e,t){var i,n,r,o,a,s,l,d,u=this.changeDetails,c=this.itemGroupKeys||(this.itemGroupKeys={});if(e.getCount()){u?(d=u.item||u.items[0],(i=this.createEntries(e,[d],!1).entries)[0].group=c["oldKey"in t?t.oldKey:e.getKey(d)]):i=this.createEntries(e,t.items,!1).entries;for(o=0,a=i.length;o<a;++o){for((r=(n=i[o]).group)&&r.remove(n.items),s=0;s<n.items.length;s++)delete c[e.getKey(n.items[s])];r&&!r.length&&(l=l||[]).push(r)}}else for(this.itemGroupKeys={},o=0,a=(l=this.items).length;o<a;++o)l[o].clear();l&&this.remove(l)},onCollectionSort:function(e){var t,i,n,r,o=e.getSorters(!1);if(o)for(t=this.items,i=this.length,n=0;n<i;++n)(r=t[n]).getSorters()===o?r.sortItems():r.setSorters(o)},onCollectionUpdateKey:function(e,t){t.indexChanged||(t.oldIndex=e.indexOf(t.item),this.syncItemGrouping(e,t))},addItemsToGroups:function(e,t,i,n){var r,o,a,s,l,d,u,c,h=this.itemGroupKeys||(this.itemGroupKeys={}),f=this.createEntries(e,t).entries,g=-1;for(a=0,s=f.length;a<s;++a)if(d=(o=f[a]).group,n||0===n)c=t[0],0<d.getCount()&&0===e.getSorters().getCount()&&(g=n<(u=e.indexOf(d.items[0]))?0:n-u),-1===g?d.add(c):d.insert(g,c);else for(1<this.length&&i&&(r=e.indexOf(f[0].group.getAt(0)),i=Math.max(i-r,0)),o.group.insert(null!=i?i:d.items.length,o.items),l=0;l<o.items.length;l++)h[e.getKey(o.items[l])]=o.group;this.sortItems()},createEntries:function(e,t,i){var n,r,o,a,s,l,d={},u=[],c=this.getGrouper();for(a=0,l=t.length;a<l;++a)(n=d[o=c.getGroupString(s=t[a])])||(r=this.getGroup(e,o,i),u.push(d[o]=n={group:r,items:[]})),n.items.push(s);return{groups:d,entries:u}},syncItemGrouping:function(e,t){var i,n,r,o,a=this.itemGroupKeys||(this.itemGroupKeys={}),s=t.item;n=e.getKey(s),r=a[i="oldKey"in t?t.oldKey:n],o=this.getGroup(e,this.getGrouper().getGroupString(s)),t.group=o,t.oldGroup=r,(t.groupChanged=o!==r)?(r&&(r.updateKey(s,i,n),r.remove(s),r.length||this.remove(r)),this.addItemsToGroups(e,[s],null,t.oldIndex)):r.itemChanged(s,t.modified,t.oldKey,t),delete a[i],a[n]=o},getGroup:function(e,t,i){var n=this.get(t),r=this.getAutoSort();return n?n.setSorters(e.getSorters()):!1!==i&&((n=this.emptyGroups[t]||Ext.create(Ext.apply({xclass:"Ext.util.Group",id:this.getId()+"-group-"+t,groupKey:t,rootProperty:this.getItemRoot(),sorters:e.getSorters()},this.getGroupConfig()))).ejectTime=null,this.setAutoSort(!1),this.add(n),this.setAutoSort(r)),n},getKey:function(e){return e.getGroupKey()},createSortFn:function(){var i=this.getGrouper(),n=this.getSorters().getSortFn();return i?function(e,t){return i.sort(e.items[0],t.items[0])||n(e,t)}:n},updateGrouper:function(e){this.grouped=!(!e||!this.$groupable.getAutoGroup()),this.onSorterChange(),this.onEndUpdateSorters(this.getSorters())},destroy:function(){this.$groupable=null,this.destroyGroups(this.items),Ext.undefer(this.checkRemoveQueueTimer),this.callParent()},privates:{destroyGroups:function(e){var t,i=e.length;for(t=0;t<i;++t)e[t].destroy()},onGroupRemove:function(e,t){var i,n,r,o=t.items,a=this.emptyGroups;for(r=0,i=(o=Ext.Array.from(o)).length;r<i;r++)(n=o[r]).setSorters(null),(a[n.getGroupKey()]=n).ejectTime=Ext.now();this.checkRemoveQueue()},checkRemoveQueue:function(){var e,t,i,n=this.emptyGroups;for(e in n)!(t=n[e]).getCount()&&Ext.now()-t.ejectTime>this.emptyGroupRetainTime?(Ext.destroy(t),delete n[e]):i=!0;i&&(Ext.undefer(this.checkRemoveQueueTimer),this.checkRemoveQueueTimer=Ext.defer(this.checkRemoveQueue,this.emptyGroupRetainTime,this))}}}),Ext.define("Ext.data.Store",{extend:"Ext.data.ProxyStore",alias:"store.store",mixins:["Ext.data.LocalStore"],requires:["Ext.data.Model","Ext.data.proxy.Ajax","Ext.data.reader.Json","Ext.data.writer.Json","Ext.util.GroupCollection","Ext.util.DelayedTask"],uses:["Ext.data.StoreManager","Ext.util.Grouper"],config:{data:void 0,clearRemovedOnLoad:!0,clearOnPageLoad:!0,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:!0},loadCount:0,complete:!1,moveMapCount:0,constructor:function(e){var t;if(e){if(e.buffered)return this.self!==Ext.data.Store&&Ext.raise("buffered config not supported on derived Store classes. Please derive from Ext.data.BufferedStore."),new Ext.data.BufferedStore(e);e.remoteGroup&&Ext.log.warn("Ext.data.Store: remoteGroup has been removed. Use remoteSort instead.")}this.callParent([e]),(t=this.inlineData)&&(delete this.inlineData,this.loadInlineData(t))},applyData:function(e,t){var i=this;return i.getFields(),i.getModel(),e&&e.isCollection?(e.setRootProperty("data"),(t=e).addObserver(this),e.getCount()&&(i.afterLoadRecords(e.items),i.hasListeners.load&&i.fireEvent("load",i,e.items,!0))):(t=t||i.constructDataCollection(),e&&(i.isInitializing?i.inlineData=e:i.loadData(e))),t},loadInlineData:function(e){var t=this.getProxy();t&&t.isMemoryProxy?(t.setData(e),this.suspendEvents(),this.read()):(this.removeAll(!0),this.suspendEvents(),this.loadData(e)),this.resumeEvents()},onCollectionAdd:function(e,t){this.loadCount=this.loadCount||1,this.onCollectionAddItems(e,t.items,t)},onCollectionFilterAdd:function(e,t){this.onCollectionAddItems(e,t)},onCollectionAddItems:function(e,t,i){var n,r,o,a,s=this,l=t.length,d=!!i&&!i.next,u=s.removed,c=s.ignoreCollectionAdd,h=s.getSession(),f=i&&i.replaced;for(s.activeRanges&&s.syncActiveRanges(),n=0;n<l;++n)o=t[n],h&&h.adopt(o),c||(o.join(s),u&&u.length&&Ext.Array.remove(u,o),r=r||o.phantom||o.dirty);if(!c){if(f){for(a=[];Ext.Array.push(a,f.items),f=f.next;);s.setMoving(a,!0)}i&&(i.replaced?d&&(s.fireEvent("datachanged",s),s.fireEvent("refresh",s)):(s.fireEvent("add",s,t,i.at),d&&s.fireEvent("datachanged",s))),a&&s.setMoving(a,!1),s.needsSync=s.needsSync||r}},onCollectionBeforeItemChange:function(e,t){var i=t.item,n=t.modified||null,r=t.meta;this.fireEvent("beforeupdate",this,i,r,n,t)},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(e,t){var i=t.item,n=t.modified||null,r=t.meta;this.fireChangeEvent(i)&&(this.onUpdate(i,r,n,t),this.fireEvent("update",this,i,r,n,t),this.fireEvent("datachanged",this))},afterChange:function(e,t,i){this.getData().itemChanged(e,t||null,void 0,i)},afterCommit:function(e,t){this.afterChange(e,t,Ext.data.Model.COMMIT)},afterEdit:function(e,t){this.needsSync=this.needsSync||e.dirty,this.afterChange(e,t,Ext.data.Model.EDIT)},afterReject:function(e){this.afterChange(e,null,Ext.data.Model.REJECT)},afterDrop:function(e){this.getData().remove(e)},afterErase:function(e){this.removeFromRemoved(e)},addSorted:function(e){var t,i=this.getRemoteSort(),n=this.getData();return i&&n.setSorters(this.getSorters()),t=n.findInsertionIndex(e),i&&n.setSorters(null),this.insert(t,e)},remove:function(e,t,i){var n,r,o,a,s=this.getDataSource();if(e)if(e.isModel)n=-1<s.indexOf(e)?(o=[e],1):0;else{for(o=[],r=0,n=e.length;r<n;++r){if((a=e[r])&&a.isEntity){if(!s.contains(a))continue}else if(!(a=s.getAt(a)))continue;o.push(a)}n=o.length}return n?(this.removeIsMove=!0===t,this.removeIsSilent=i,s.remove(o),this.removeIsSilent=!1,o):[]},onCollectionRemove:function(e,t){var i,n,r=this,o=r.removed,a=t.items,s=a.length,l=t.at,d=t.replacement,u=r.removeIsMove||d&&Ext.Array.equals(a,d.items),c=r.removeIsSilent,h=!t.next,f=r.getDataSource();if(!r.ignoreCollectionRemove){for(d&&r.setMoving(d.items,!0),i=s-1;0<=i;i--)n=a[i],f.contains(n)||(!o||u||n.phantom||n.erasing?n.unjoin(r):(n.removedFrom=l+i,o.push(n),r.needsSync=!0));c||d&&d.items.length||(r.fireEvent("remove",r,a,l,u),h&&r.fireEvent("datachanged",r)),d&&r.setMoving(d.items,!1)}},onFilterEndUpdate:function(){this.destroying||this.destroyed||(this.activeRanges&&this.syncActiveRanges(),this.callParent(arguments),this.callObservers("Filter"))},removeAt:function(e,t){var i=this.getData();if((e=Math.max(e,0))<i.length){if(1===arguments.length)t=1;else if(!t)return;i.removeAt(e,t)}},removeAll:function(e){var t=this.getData(),i=t.getRange();return t.length&&(this.removeIsSilent=!0,this.callObservers("BeforeRemoveAll"),t.removeAll(),this.removeIsSilent=!1,e||(this.fireEvent("clear",this,i),this.fireEvent("datachanged",this)),this.callObservers("AfterRemoveAll",[!!e])),i},setRecords:function(e){var t=this.getCount();++this.loadCount,t?this.getData().splice(0,t,e):this.add(e)},splice:function(e,t,i){return this.getData().splice(e,t,i)},onProxyLoad:function(e){var t=this,i=e.getResultSet(),n=e.getRecords(),r=e.wasSuccessful();t.destroyed||(i&&(t.totalCount=i.getTotal()),r?(n=t.processAssociation(n),t.loadRecords(n,e.getAddRecords()?{addRecords:!0}:void 0),t.attachSummaryRecord(i)):t.loading=!1,t.hasListeners.load&&t.fireEvent("load",t,n,r,e),t.callObservers("AfterLoad",[n,r,e]))},onProxyWrite:function(e){e.wasSuccessful()&&this.attachSummaryRecord(e.getResultSet()),this.callParent([e])},filterDataSource:function(e){var t,i=this.getDataSource(),n=i.items,r=n.length,o=[];for(t=0;t<r;t++)e.call(i,n[t])&&o.push(n[t]);return o},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(e,t){var i,n=e.length,r=[];for(i=0;i<n;i++)r.push(this.createModel(e[i]));r=this.processAssociation(r),this.loadRecords(r,t?this.addRecordsOptions:void 0)},loadRawData:function(e,t){var i,n,r,o=this.getSession();return n=(i=this.getProxy().getReader().read(e,o?{recordCreator:o.recordCreator}:void 0)).getRecords(),(r=i.getSuccess())&&(this.totalCount=i.getTotal(),this.loadRecords(n,t?this.addRecordsOptions:void 0)),r},loadRecords:function(e,t){var i,n,r=this.getData();t&&(i=t.addRecords),this.getRemoteSort()||this.getSortOnLoad()||(n=!0,r.setAutoSort(!1)),i||this.clearData(!0),this.loading=!1,this.ignoreCollectionAdd=!0,this.callObservers("BeforePopulate"),r.add(e),this.ignoreCollectionAdd=!1,n&&r.setAutoSort(!0),this.afterLoadRecords(e)},afterLoadRecords:function(e){var t,i=this,n=e.length;for(t=0;t<n;t++)e[t].join(i);i.isEmptyStore||(++i.loadCount,i.complete=!0),i.hasListeners.datachanged&&i.fireEvent("datachanged",i),i.hasListeners.refresh&&i.fireEvent("refresh",i),i.callObservers("AfterPopulate")},loadPage:function(e,t){var i=this.getPageSize();this.currentPage=e,t=Ext.apply({page:e,start:(e-1)*i,limit:i,addRecords:!this.getClearOnPageLoad()},t),this.read(t)},nextPage:function(e){this.loadPage(this.currentPage+1,e)},previousPage:function(e){this.loadPage(this.currentPage-1,e)},clearData:function(e){var t,i,n,r,o=this.removed,a=this.getDataSource(),s=this.getClearRemovedOnLoad(),l=o&&e&&!s;if(a){for(n=0,r=(t=a.items).length;n<r;++n)i=t[n],l&&Ext.Array.contains(o,i)||i.unjoin(this);this.ignoreCollectionRemove=!0,this.callObservers("BeforeClear"),a.removeAll(),this.ignoreCollectionRemove=!1,this.callObservers("AfterClear")}!o||e&&!s||(o.length=0)},onIdChanged:function(e,t,i){this.getData().updateKey(e,t),this.fireEvent("idchanged",this,e,t,i)},commitChanges:function(){var e=this.getModifiedRecords(),t=e.length,i=0;for(Ext.suspendLayouts(),this.beginUpdate();i<t;i++)e[i].commit();this.cleanRemoved(),this.endUpdate(),Ext.resumeLayouts(!0),this.fireEvent("commit",this)},filterNewOnly:function(e){return!0===e.phantom},filterRejects:function(e){return e.phantom||e.dirty},rejectChanges:function(){var e,t,i,n,r,o,a=this,s=a.getRejectRecords(),l=s.length;for(Ext.suspendLayouts(),a.beginUpdate(),e=0;e<l;e++)(t=s[e]).phantom?(i=i||[]).push(t):t.reject();if(i)for(a.remove(i),e=0,l=i.length;e<l;++e)i[e].reject();if(s=a.getRawRemovedRecords()){for(l=s.length,(n=!a.getRemoteSort()&&a.isSorted())&&(o=(r=a.getData()).getAutoSort(),r.setAutoSort(!1)),e=l-1;0<=e;e--)(t=s[e]).reject(),n||a.insert(t.removedFrom||0,t);n&&(r.setAutoSort(o),a.add(s)),s.length=0}a.endUpdate(),Ext.resumeLayouts(!0),a.fireEvent("reject",a)},doDestroy:function(){var e=this.loadTask,t=this.getData().getSource();this.clearData(),this.setSession(null),this.observers=null,e&&(e.cancel(),this.loadTask=null),t&&t.destroy(),this.callParent()},privates:{commitOptions:{commit:!0},attachSummaryRecord:function(e){if(e){var t,i,n,r,o,a=e.getSummaryData(),s=this.getGrouper(),l=this.summaryRecord,d=this.commitOptions;if(a&&(l?l.set(a.data,d):(this.summaryRecord=a).isRemote=!0),s&&(a=e.getGroupData()))for(t=this.getGroups(),n=0,i=a.length;n<i;++n)r=a[n],(o=t.getItemGroup(r))&&((l=o.summaryRecord)?l.set(r.data,d):(o.summaryRecord=r).isRemote=!0)}},fetch:function(e){e=Ext.apply({},e),this.setLoadOptions(e),this.createOperation("read",e).execute()},fireChangeEvent:function(e){return this.getDataSource().contains(e)},onBeforeLoad:function(e){this.callObservers("BeforeLoad",[e])},onRemoteFilterSet:function(e,t){e&&this.getData().setFilters(t?null:e),this.callParent([e,t])},onRemoteSortSet:function(e,t){var i=this.getData();e&&i.setSorters(t?null:e),i.setAutoGroup(!t),this.callParent([e,t])},isMoving:function(e,t){var i,n,r=this.moveMap,o=0;if(r)if(e)if(Ext.isArray(e))for(n=0,i=e.length;n<i;++n)o+=r[e[n].id]?1:0;else r[e.id]&&++o;else o=t?r:this.moveMapCount;return o},setLoadOptions:function(e){var t,i,n=this.getPageSize();this.getRemoteSort()&&!e.grouper&&(i=this.getGrouper())&&(e.grouper=i),(n||"start"in e||"limit"in e||"page"in e)&&(e.page=null!=e.page?e.page:this.currentPage,e.start=void 0!==e.start?e.start:(e.page-1)*n,e.limit=null!=e.limit?e.limit:n,this.currentPage=e.page),e.addRecords=e.addRecords||!1,e.recordCreator||(t=this.getSession())&&(e.recordCreator=t.recordCreator),this.callParent([e])},setMoving:function(e,t){var i,n,r=this.moveMap||(this.moveMap={}),o=e.length;for(i=0;i<o;++i)n=e[i].id,t?r[n]?++r[n]:(r[n]=1,++this.moveMapCount):0==--r[n]&&(delete r[n],--this.moveMapCount);0===this.moveMapCount&&(this.moveMap=null)},processAssociation:function(e){var t=this.getAssociatedEntity();return t&&(e=this.getRole().processLoad(this,t,e,this.getSession())),e}}}),Ext.define("Ext.data.reader.Array",{extend:"Ext.data.reader.Json",alternateClassName:"Ext.data.ArrayReader",alias:"reader.array",config:{totalProperty:void 0,successProperty:void 0},createFieldAccessor:function(e){var t,i=e.mapping,n=e.hasMapping()?i:e.ordinal;return e.mapping=n,t=this.callParent(arguments),e.mapping=i,t},getModelData:function(e){return{}}}),Ext.define("Ext.data.ArrayStore",{extend:"Ext.data.Store",alias:"store.array",alternateClassName:["Ext.data.SimpleStore"],requires:["Ext.data.proxy.Memory","Ext.data.reader.Array"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(e,t){if(this.expandData){for(var i=[],n=0,r=e.length;n<r;n++)i[i.length]=[e[n]];e=i}this.callParent([e,t])}}),Ext.define("Ext.data.StoreManager",{extend:"Ext.util.MixedCollection",alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:!0,requires:["Ext.data.ArrayStore"],register:function(){var e,t;for(e=0;t=arguments[e];e++)this.add(t)},unregister:function(){var e,t;for(e=0;t=arguments[e];e++)this.remove(this.lookup(t))},lookup:function(e,t){var i,n,r,o,a,s;if(Ext.isArray(e)){if(i=e[0],n=e,!Ext.isObject(i)){if(o=["field1"],r=Ext.isArray(i))for(a=2,s=i.length;a<=s;++a)o.push("field"+a);else for(n=[],a=0,s=e.length;a<s;++a)n.push([e[a]]);return new Ext.data.ArrayStore({data:n,fields:o,autoDestroy:!0,autoCreated:!0,expanded:!r})}e={data:n}}return Ext.isString(e)?this.get(e):Ext.Factory.store(e,t)},getKey:function(e){return e.storeId},addEmptyStore:function(){var e=this.$emptyStore,t={destroy:Ext.emptyFn};e||((e=this.$emptyStore=Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:!1})).ignoreLeaked=!0,e.isEmptyStore=!0,e.on=e.addListener=function(){return t},e.un=e.removeListener=Ext.emptyFn,e.add=e.remove=e.insert=e.destroy=e.loadData=function(){Ext.raise("Cannot modify ext-empty-store")}),this.add(e)},clear:function(){this.callParent(),this.addEmptyStore()}},function(){Ext.regStore=function(e,t){var i;if(Ext.isObject(e))t=e;else{if(Ext.data.StoreManager.containsKey(e))return Ext.data.StoreManager.lookup(e);t.storeId=e}return i=t instanceof Ext.data.Store?t:new Ext.data.Store(t),Ext.data.StoreManager.register(i),i},Ext.getStore=function(e){return Ext.data.StoreManager.lookup(e)},Ext.data.StoreManager.addEmptyStore()}),Ext.define("Ext.app.domain.Store",{extend:"Ext.app.EventDomain",singleton:!0,requires:["Ext.data.AbstractStore"],type:"store",prefix:"store.",idMatchRe:/^#/,constructor:function(){this.callParent(),this.monitor(Ext.data.AbstractStore)},match:function(e,t){var i=!1,n=e.alias;return"*"===t?i=!0:this.idMatchRe.test(t)?i=e.getStoreId()===t.substring(1):n&&(i=-1<Ext.Array.indexOf(n,this.prefix+t)),i}}),Ext.define("Ext.app.Controller",{extend:"Ext.app.BaseController",requires:["Ext.app.Util","Ext.data.StoreManager","Ext.ComponentManager","Ext.app.domain.Component","Ext.app.domain.Store"],statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"},profile:{getter:"getProfile",upper:"Profiles"}},controllerRegex:/^(.*)\.controller\./,profileRegex:/^(.*)\.profile\./,createGetter:function(e,t){return function(){return this[e](t)}},getGetterName:function(e,t){var i,n="get",r=e.split("."),o=r.length;for(i=0;i<o;i++)n+=Ext.String.capitalize(r[i]);return n+=t},resolveNamespace:function(e,t){var i,n,r,o,a=Ext.app.Controller;return i=e.prototype.isProfile?a.profileRegex:a.controllerRegex,n=Ext.getClassName(e),(r=t.$namespace||t.namespace||Ext.app.getNamespace(n)||(o=i.exec(n))&&o[1])||Ext.log.warn("Missing namespace for "+n+", please define it in namespaces property of your Application class."),r},processDependencies:function(e,t,i,n,r,o){if(r&&r.length){var a,s,l,d,u,c,h,f,g=this.strings[n];for(Ext.isArray(r)||(r=[r]),u=0,c=r.length;u<c;u++)d=r[u],a=this.getFullName(d,n,i,o),r[u]=s=a.absoluteName,l=a.shortName,t.push(s),e[h=this.getGetterName(l,g.upper)]?"getMainView"===h&&Ext.log.warn("Cannot have a view named 'Main' - getter conflicts with mainView config."):e[h]=f=this.createGetter(g.getter,d),f&&"controller"!==n&&(f["Ext.app.getter"]=!0)}},getFullName:function(e,t,i,n){var r,o,a=e;return 0<(r=e.indexOf("@"))?(a=e.substring(0,r),o=e.substring(r+1)+"."+a):0<e.indexOf(".")&&(Ext.ClassManager.isCreated(e)||this.hasRegisteredPrefix(e))?a=(o=e).replace(i+"."+t+".",""):(i||Ext.log.warn("Cannot find namespace for "+t+" "+e+", assuming it is fully qualified class name"),i?(o=i+"."+t+"."+(n?n+"."+e:e),a=e):o=e),{absoluteName:o,shortName:a}},hasRegisteredPrefix:function(e){var t=Ext.ClassManager.getPrefix(e);return t&&t!==e}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:!0,moduleClassName:null},onClassExtended:function(e,t,i){var a=i.onBeforeCreated;i.onBeforeCreated=function(e,t){var i,n,r=Ext.app.Controller,o=[];n=e.prototype,(i=r.resolveNamespace(e,t))&&(n.$namespace=i),r.processDependencies(n,o,i,"model",t.models),r.processDependencies(n,o,i,"view",t.views),r.processDependencies(n,o,i,"store",t.stores),r.processDependencies(n,o,i,"controller",t.controllers),Ext.require(o,Ext.Function.pass(a,arguments,this))}},constructor:function(e){this.initAutoGetters(),this.callParent([e])},normalizeRefs:function(e){var i=[];return e&&(Ext.isObject(e)?Ext.Object.each(e,function(e,t){Ext.isString(t)&&(t={selector:t}),t.ref=e,i.push(t)}):Ext.isArray(e)&&(i=Ext.Array.merge(i,e))),(e=this.refs)&&(this.refs=null,(e=this.normalizeRefs(e))&&(i=Ext.Array.merge(i,e))),i},getRefMap:function(){var e,t,i,n,r=this._refMap;if(!r&&(e=this.getRefs(),r=this._refMap={},e))for(n=0,i=e.length;n<i;n++)r[(t=e[n]).ref]=t.selector;return r},applyId:function(e){return e||Ext.app.Controller.getFullName(this.$className,"controller",this.$namespace).shortName},applyRefs:function(e){return this.normalizeRefs(Ext.clone(e))},updateRefs:function(e){e&&this.ref(e)},initAutoGetters:function(){var e,t,i=this.self.prototype;for(e in i)(t=i[e])&&t["Ext.app.getter"]&&t.call(this)},doInit:function(e){this._initialized||(this.init(e),this._initialized=!0)},finishInit:function(e){var t,i,n=this.controllers;if(this._initialized&&n&&n.length)for(t=0,i=n.length;t<i;t++)this.getController(n[t]).finishInit(e)},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(!0)},deactivate:function(){this.setActive(!1)},isActive:function(){return this.getActive()},ref:function(e){var t,i,n,r=0,o=e.length;for(e=Ext.Array.from(e),this.references=this.references||[];r<o;r++)i=(t=e[r]).ref,this[n="get"+Ext.String.capitalize(i)]||(this[n]=Ext.Function.pass(this.getRef,[i,t],this)),this.references.push(i.toLowerCase())},addRef:function(e){this.ref(e)},getRef:function(e,t,i){var n=this.refCache||(this.refCache={}),r=n[e];return t=t||{},i=i||{},Ext.apply(t,i),t.forceCreate?Ext.ComponentManager.create(t,"component"):(r||(t.selector&&(n[e]=r=Ext.ComponentQuery.query(t.selector)[0]),!r&&t.autoCreate&&(n[e]=r=Ext.ComponentManager.create(t,"component")),r&&r.on("destroy",function(){n[e]=null})),r)},hasRef:function(e){var t=this.references;return t&&-1!==Ext.Array.indexOf(t,e.toLowerCase())},getController:function(e){var t=this.getApplication();return e===this.getId()?this:t&&t.getController(e)},getStore:function(e){var t,i;return t=-1===e.indexOf("@")?e:e.split("@")[0],(i=Ext.StoreManager.get(t))||(e=Ext.app.Controller.getFullName(e,"store",this.$namespace))&&(i=Ext.create(e.absoluteName,{id:t})),i},getModel:function(e){var t=Ext.app.Controller.getFullName(e,"model",this.$namespace),i=Ext.ClassManager.get(t.absoluteName);return i=i||Ext.data.schema.Schema.lookupEntity(e)},getProfile:function(e){return e=Ext.app.Controller.getFullName(e,"profile",this.$namespace)},getView:function(e){var t=Ext.app.Controller.getFullName(e,"view",this.$namespace);return t&&Ext.ClassManager.get(t.absoluteName)},destroy:function(e,t){var i,n,r=this.application;if(!t&&r&&r.unregister(this),this.application=null,e)for(n in i=this.refCache)i.hasOwnProperty(n)&&Ext.destroy(i[n]);this.callParent()}}),Ext.define("Ext.app.Application",{extend:"Ext.app.Controller",requires:["Ext.util.History","Ext.util.MixedCollection"],isApplication:!0,scope:void 0,namespaces:[],paths:null,config:{name:"",appProperty:"app",profiles:[],currentProfile:null,mainView:{$value:null,lazy:!0},defaultToken:null,glyphFontFamily:null,quickTips:!0,router:null},onClassExtended:function(e,t,i){var n,r,o=Ext.app.Controller,a=e.prototype,s=[];(r=t.name||e.superclass.name)&&(t.$namespace=r,Ext.app.addNamespaces(r)),t.namespaces&&Ext.app.addNamespaces(t.namespaces),t["paths processed"]?delete t["paths processed"]:Ext.app.setupPaths(r,"appFolder"in t?t.appFolder:e.superclass.appFolder,t.paths),o.processDependencies(a,s,r,"profile",t.profiles),a.getDependencies(e,t,s),s.length&&(n=i.onBeforeCreated,i.onBeforeCreated=function(e,t){var i=Ext.Array.clone(arguments);t.__handleRequires?t.__handleRequires.call(this,s,Ext.bind(function(){return n.apply(this,i)},this)):Ext.require(s,function(){return n.apply(this,i)})})},getDependencies:Ext.emptyFn,constructor:function(e){var t=Ext.app.Application;Ext.route.Router.application=this,t.instance||(t.instance=this),this.callParent([e]),Ext.isEmpty(this.getName())&&Ext.raise("[Ext.app.Application] Name property is required"),this.doInit(this),Ext.on("appupdate",this.onAppUpdate,this,{single:!0}),Ext.Loader.setConfig({enabled:!0}),this.onProfilesReady()},applyId:function(e){return e||this.$className},updateRouter:function(e){e&&Ext.route.Router.setConfig(e)},onAppUpdate:Ext.emptyFn,onProfilesReady:function(){var e,t,i,n=this.getProfiles(),r=n.length;for(t=0;t<r;t++)(i=Ext.create(n[t],{application:this})).isActive()&&!e&&(e=i,this.setCurrentProfile(e));e&&e.init(),this.initControllers(),this.onBeforeLaunch(),this.finishInitControllers(),Ext.fireEvent("applaunch",this)},doInit:function(e){this.initNamespace(e),this.callParent([e])},initNamespace:function(e){var t=e.getAppProperty(),i=Ext.namespace(e.getName());i&&(i.getApplication=function(){return e},t&&(i[t]?i[t]!==e&&Ext.log.warn("An existing reference is being overwritten for "+name+"."+t+". See the appProperty config."):i[t]=e))},initControllers:function(){var e,t,i=Ext.Array.from(this.controllers),n=this.getCurrentProfile();for(this.controllers=new Ext.util.MixedCollection,e=0,t=i.length;e<t;e++)this.getController(i[e]);if(n)for(e=0,t=(i=n.getControllers()).length;e<t;e++)this.getController(i[e])},finishInitControllers:function(){var e,t,i;for(t=0,i=(e=this.controllers.getRange()).length;t<i;t++)e[t].finishInit(this)},launch:Ext.emptyFn,onBeforeLaunch:function(){var e,t,i,n,r=this,o=Ext.util.History,a=r.getDefaultToken(),s=r.getCurrentProfile();for(r.initMainView(),s&&s.launch(),r.launch.call(r.scope||r),r.launched=!0,r.fireEvent("launch",r),i=(e=r.controllers.items).length,t=0;t<i;t++)e[t].onLaunch(r);o.ready||o.init(),(n=o.getToken())||n===a?Ext.route.Router.onStateChange(n):a&&o.replace(a),Ext.Microloader&&Ext.Microloader.appUpdate&&Ext.Microloader.appUpdate.updated&&Ext.Microloader.fireAppUpdate(),r.cnsTimer||(r.cnsTimer=Ext.defer(Ext.ClassManager.clearNamespaceCache,2e3,Ext.ClassManager))},getModuleClassName:function(e,t){return Ext.app.Controller.getFullName(e,t,this.getName()).absoluteName},initMainView:function(){var e,t=this.getCurrentProfile();t&&(e=t.getMainView()),e?this.setMainView(e):this.getMainView()},applyMainView:function(e){return this.getView(e).create({$initParent:this.viewport})},createController:function(e){return this.getController(e)},destroyController:function(e){"string"==typeof e&&(e=this.getController(e,!0)),Ext.destroy(e)},getController:function(e,t){var i,n,r,o,a,s,l=this.controllers;if(!(n=l.get(e)))for(o=0,r=(s=l.items).length;o<r;++o)if((i=(a=s[o]).getModuleClassName())&&i===e){n=a;break}return n||t||(i=this.getModuleClassName(e,"controller"),n=Ext.create(i,{application:this,moduleClassName:i}),l.add(n),this._initialized&&n.doInit(this)),n},unregister:function(e){this.controllers.remove(e)},getApplication:function(){return this},destroy:function(t){var e=this,i=e.controllers,n=Ext.namespace(e.getName()),r=e.getAppProperty();Ext.undefer(e.cnsTimer),Ext.un("appupdate",e.onAppUpdate,e),Ext.destroy(e.viewport),i&&i.each(function(e){e.destroy(t,!0)}),e.controllers=null,e.callParent([t,!0]),n&&n[r]===e&&delete n[r],Ext.route.Router.application===e&&(Ext.route.Router.application=null),Ext.app.Application.instance===e&&(Ext.app.Application.instance=null)},updateGlyphFontFamily:function(e){Ext.setGlyphFontFamily(e)},applyProfiles:function(e){var t=this;return Ext.Array.map(e,function(e){return t.getModuleClassName(e,"profile")})}},function(){Ext.getApplication=function(){return Ext.app.Application.instance}}),Ext.application=function(e){function t(t){Ext.onReady(function(){var e=Ext.viewport;(e=e&&e.Viewport)&&e.setup&&e.setup(t.prototype.config.viewport),Ext.app.Application.instance=new t})}"string"==typeof e?Ext.require(e,function(){t(Ext.ClassManager.get(e))}):(e=Ext.apply({extend:"Ext.app.Application"},e),Ext.app.setupPaths(e.name,e.appFolder,e.paths),e["paths processed"]=!0,Ext.define(e.name+".$application",e,function(){t(this)}))},Ext.define("Ext.overrides.app.Application",{override:"Ext.app.Application",uses:["Ext.tip.QuickTipManager"],autoCreateViewport:!1,config:{enableQuickTips:null},quickTips:!0,updateEnableQuickTips:function(e){this.setQuickTips(e)},applyMainView:function(e){var t,i,n,r,o;return"string"==typeof e?(t=this.getView(e),n={}):(n=e,t=Ext.ClassManager.getByConfig(e)),(i=t.prototype).isViewport||(r=Ext.Array.from(i.plugins),o=Ext.Array.from(n.plugins),(n=Ext.apply({},n)).plugins=["viewport"].concat(r,o)),t.create(n)},getDependencies:function(e,t,i){var n=Ext.app.Controller,r=e.prototype,o=t.$namespace,a=t.autoCreateViewport;a&&(o||Ext.raise("[Ext.app.Application] Can't resolve namespace for "+t.$className+", did you forget to specify 'name' property?"),!0===a?a="Viewport":i.push("Ext.plugin.Viewport"),n.processDependencies(r,i,o,"view",a))},onBeforeLaunch:function(){var e=this.autoCreateViewport;this.getQuickTips()&&this.initQuickTips(),e&&this.initViewport(),this.callParent(arguments)},getViewportName:function(){var e=null,t=this.autoCreateViewport;return t&&(e=!0===t?"Viewport":t),e},initViewport:function(){this.setMainView(this.getViewportName())},initQuickTips:function(){Ext.tip.QuickTipManager.init()}}),Ext.define("Ext.app.Profile",{mixins:["Ext.mixin.Observable"],requires:["Ext.app.Controller"],isProfile:!0,config:{mainView:{$value:null,lazy:!0},application:null,controllers:[],models:[],views:[],stores:[]},constructor:function(e){this.initConfig(e),this.mixins.observable.constructor.apply(this,arguments)},isActive:function(){return!1},init:function(){var e,t=this.getViews();if(t&&!(t instanceof Array))for(e in t)Ext.ClassManager.setXType(t[e],e)},launch:Ext.emptyFn,onClassExtended:function(e,t,i){var d=i.onBeforeCreated;i.onBeforeCreated=function(e,t){var i,n,r=Ext.app.Controller,o=e.$className,a=[],s=e.prototype,l=t.views;(i=t.name)?delete t.name:i=(i=o.split("."))[i.length-1],e._name=i,e._namespace=i=(t.namespace||i).toLowerCase(),delete t.namespace,n=r.resolveNamespace(e,t),r.processDependencies(s,a,n,"model",t.models,i),r.processDependencies(s,a,n,"store",t.stores,i),r.processDependencies(s,a,n,"controller",t.controllers,i),l&&(l instanceof Array?r.processDependencies(s,a,n,"view",l,i):Ext.app.Profile.processViews(o,l,a)),Ext.require(a,Ext.Function.pass(d,arguments,this))}},getName:function(){return this.self._name},getNamespace:function(){return this.self._namespace},privates:{statics:{processViews:function(e,t,i){var n,r,o,a;for(a in t)"string"!=typeof(r=t[a])&&((o=r.xclass)||Ext.raise("Views must specify an xclass"),delete(n=Ext.apply({extend:o},r)).xclass,Ext.define(t[a]=e+"$"+a,n),r=o),i.push(r)}}}}),Ext.define("Ext.app.domain.View",{extend:"Ext.app.EventDomain",requires:["Ext.Widget"],isInstance:!0,constructor:function(e){this.callParent([e]),this.controller=e,this.monitoredClasses=[Ext.Widget]},match:function(e,t,i){return"#"===t?i===e.getController():e.is(t)},destroy:function(){this.controller=null,this.callParent()}}),Ext.define("Ext.overrides.app.domain.View",{override:"Ext.app.domain.View",requires:["Ext.Component"],constructor:function(e){this.callParent([e]),this.monitoredClasses.push(Ext.Component)}}),Ext.define("Ext.app.ViewController",{extend:"Ext.app.BaseController",alias:"controller.controller",requires:["Ext.app.domain.View"],mixins:["Ext.mixin.Factoryable"],isViewController:!0,factoryConfig:{type:"controller"},config:{bindings:{$value:null,lazy:!0},closeViewAction:"destroy"},view:null,constructor:function(e){this.compDomain=new Ext.app.domain.View(this),this.callParent([e])},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var e,t,i,n=this.compDomain;if(this.$hasBinds)for(i in e=this.getBindings())(t=e[i])&&t.destroy();n&&(n.unlisten(this),n.destroy()),this.compDomain=this.view=null,this.callParent()},closeView:function(){var e=this.getView();e&&e[this.getCloseViewAction()]()},control:function(e,t){var i=e;Ext.isString(e)&&((i={})[e]=t),this.compDomain.listen(i,this)},listen:function(e,t){var i=e.component;i&&(delete(e=Ext.apply({},e)).component,this.control(i)),this.callParent([e,t])},applyId:function(e){return e=e||Ext.id(null,"controller-")},getReferences:function(){var e=this.view;return e&&e.getReferences()},getView:function(){return this.view},lookup:function(e){var t=this.view;return t&&t.lookup(e)},lookupReference:function(e){return this.lookup(e)},getSession:function(){var e=this.view;return e&&e.lookupSession()},getViewModel:function(){var e=this.view;return e&&e.lookupViewModel()},getStore:function(e){var t=this.getViewModel();return t?t.getStore(e):null},fireViewEvent:function(e,t){var i=this.view,n=!1,r=arguments;return i&&(i!==t&&(r=Ext.Array.slice(r)).splice(1,0,i),n=i.fireEvent.apply(i,r)),n},applyBindings:function(e){if(!e)return null;var t,i,n,r=this.getViewModel(),o=this.getBindTemplateScope();for(i in this.$hasBinds=!0,r||Ext.raise("Cannot use bind config without a viewModel"),e)t=null,(n=e[i])&&((t=r.bind(n,i,this)).getTemplateScope=o),e[i]=t;return e},privates:{view:null,attachReference:function(e){var t=this.view;t&&t.attachReference(e)},getBindTemplateScope:function(){return this.scope},initBindings:function(){this.getBindings()},setView:function(e){this.view=e,this.beforeInit.$nullFn||this.beforeInit(e)}}}),Ext.define("Ext.util.Bag",{isBag:!0,constructor:function(){this.items=[],this.map={}},generation:0,length:0,beginUpdate:Ext.emptyFn,endUpdate:Ext.emptyFn,add:function(e){var t,i,n,r,o,a,s,l=this.items,d=this.map,u=1;for(Ext.isArray(e)&&(t=a=[],u=e.length),i=0;i<u;i++)void 0===(n=d[r=this.getKey(o=t?e[i]:e)])?(l.push(o),d[r]=this.length++,t?t.push(o):a=o):(s=l[n],t?t.push(s):a=s,l[n]=o);return++this.generation,a},clear:function(){var e=this.generation||this.length,t=e?this.items:[];return e&&(this.items=[],this.length=0,this.map={},++this.generation),t},clone:function(){var e=new this.self;return this.length&&(Ext.apply(e.map,this.map),e.items=this.items.slice(),e.length=this.length),e},contains:function(e){var t,i=!1,n=this.map;return null!=e&&(t=this.getKey(e))in n&&(i=this.items[n[t]]===e),i},containsKey:function(e){return e in this.map},destroy:function(){this.items=this.map=null,this.callParent()},each:function(e,t){var i,n,r=this.items,o=r.length;if(o)for(t=t||this,r=r.slice(0),i=0;i<o&&!1!==(n=e.call(t,r[i],i,o));i++);return n},getAt:function(e){var t=null;return e<this.length&&(t=this.items[e]),t},get:function(e){return this.getByKey(e)},getByKey:function(e){var t=this.map;return e in t?this.items[t[e]]:null},indexOfKey:function(e){var t=this.map;return e in t?t[e]:-1},last:function(){return this.items[this.length-1]},updateKey:function(e,t){var i,n=this.map;e&&t&&((i=this.getKey(e))!==t?this.getAt(n[t])!==e||i in n||(this.generation++,n[i]=n[t],delete n[t]):(i in n&&this.getAt(n[i])!==e&&Ext.raise('Duplicate newKey "'+i+'" for item with oldKey "'+t+'"'),t in n&&this.getAt(n[t])!==e&&Ext.raise('Incorrect oldKey "'+t+'" for item with newKey "'+i+'"')))},getCount:function(){return this.length},getKey:function(e){return e.id||e.getId()},getRange:function(e,t){var i,n=this.items,r=n.length;return i=r?(i=Ext.Number.clipIndices(r,[e,t]),n.slice(i[0],i[1])):[]},remove:function(e){var t,i,n,r,o,a,s,l=this.map,d=this.items,u=null,c=1;if(Ext.isArray(e)&&(c=e.length,i=u=[]),this.length){for(n=0;n<c;n++)void 0!==(r=l[o=this.getKey(i?e[n]:e)])&&(delete l[o],s=d[r],i?i.push(s):u=s,a=d.pop(),r<--this.length&&(d[r]=a,l[this.getKey(a)]=r),t=!0);t&&++this.generation}return u},removeByKey:function(e){var t=this.getByKey(e);return t&&this.remove(t),t||null},replace:function(e){return this.add(e),e},sort:function(e){var t,i=this.items,n=i.length;if(n){for(Ext.Array.sort(i,e),this.map={};0<n--;)t=i[n],this.map[this.getKey(t)]=n;++this.generation}}}),Ext.define("Ext.util.Scheduler",{mixins:["Ext.mixin.Observable"],requires:["Ext.util.Bag"],busyCounter:0,lastBusyCounter:0,destroyed:!1,firing:null,notifyIndex:-1,nextId:0,orderedItems:null,passes:0,scheduledCount:0,validIdRe:null,config:{cycleLimit:5,preSort:null,tickDelay:5},suspendOnNotify:!0,constructor:function(e){Ext.util.Scheduler.instances?Ext.util.Scheduler.instances.push(this):Ext.util.Scheduler.instances=[this],this.id=Ext.util.Scheduler.count=(Ext.util.Scheduler.count||0)+1,this.mixins.observable.constructor.call(this,e),this.items=new Ext.util.Bag},destroy:function(){var e=this.timer;e&&(window.clearTimeout(e),this.timer=null),this.items.destroy(),this.items=this.orderedItems=null,this.callParent(),Ext.Array.remove(Ext.util.Scheduler.instances,this)},add:function(e){var t=this.items;t===this.firing&&(this.items=t=t.clone()),e.id=e.id||++this.nextId,e.scheduler=this,t.add(e),this.sortMap||(this.orderedItems=null)},remove:function(e){var t=this.items;this.destroyed||(this.sortMap&&Ext.raise("Items cannot be removed during sort"),t===this.firing&&(this.items=t=t.clone()),e.scheduled&&(this.unscheduleItem(e),e.scheduled=!1),t.remove(e),this.orderedItems=null)},sort:function(){var e,t,i=this.items,n={},r=this.getPreSort();for(this.orderedItems=[],this.sortMap=n,this.sortStack=[],r&&i.sort(r),i=i.items,e=0;e<i.length;++e)n[(t=i[e]).id]||this.sortItem(t);this.sortMap=null,this.sortStack=null},sortItem:function(e){var t,i=this,n=i.sortMap,r=i.orderedItems;if(e.scheduler||i.add(e),t=e.id,e.scheduler!==i&&Ext.raise("Item "+t+" belongs to another Scheduler"),i.sortStack.push(e),0===n[t]){for(var o=[],a=0;a<i.sortStack.length;++a)o[a]=i.sortStack[a].getFullName();Ext.raise("Dependency cycle detected: "+o.join("\n --\x3e "))}return t in n||(n[t]=0,e.sort.$nullFn||e.sort(),n[t]=1,e.order=i.orderedItems.length,r.push(e)),i.sortStack.pop(),i},sortItems:function(e){var t=this.sortItem;return e&&(e instanceof Array?Ext.each(e,t,this):Ext.Object.eachValue(e,t,this)),this},applyPreSort:function(e){if("function"==typeof e)return e;var t,i,n,s=e.split(","),l=[],d=s.length;for(i=0;i<d;++i)l[i]=1,"-"===(t=(n=s[i]).charAt(0))?l[i]=-1:"+"!==t&&(t=0),t&&(s[i]=n.substring(1));return function(e,t){var i,n,r,o,a=0;for(i=0;!a&&i<d;++i)r=e[n=s[i]],o=t[n],a=l[i]*(r<o?-1:o<r?1:0);return a}},notify:function(){var e,t,i,n,r,o,a=this,s=a.timer,l=a.getCycleLimit(),d=Ext.GlobalEvents,u=a.suspendOnNotify;if(s&&(window.clearTimeout(s),a.timer=null),!a.firing&&a.scheduledCount){for(u&&Ext.suspendLayouts();a.scheduledCount;){if(!l){a.firing=null,a.onCycleLimitExceeded&&a.onCycleLimitExceeded();break}if(--l,o||(o=!0,d.hasListeners.beforebindnotify&&d.fireEvent("beforebindnotify",a)),++a.passes,(r=a.orderedItems)||(a.sort(),r=a.orderedItems),n=r.length)for(a.firing=a.items,t=0;t<n&&(!(i=r[t]).scheduled||(i.scheduled=!1,--a.scheduledCount,a.notifyIndex=t,i.react(),a.scheduledCount));++t);}a.firing=null,a.notifyIndex=-1,u&&Ext.resumeLayouts(!0)}(e=a.busyCounter)!==a.lastBusyCounter&&((a.lastBusyCounter=e)||a.fireEvent("idle",a))},onTick:function(){this.timer=null,this.notify()},scheduleItem:function(e){++this.scheduledCount,this.timer||this.firing||this.scheduleTick()},scheduleTick:function(){this.destroyed||this.timer||(this.timer=Ext.defer(this.onTick,this.getTickDelay(),this))},unscheduleItem:function(e){this.scheduledCount&&--this.scheduledCount},adjustBusy:function(e){var t=this.busyCounter+e;(this.busyCounter=t)?this.lastBusyCounter||(this.lastBusyCounter=t,this.fireEvent("busy",this)):this.lastBusyCounter&&!this.timer&&this.scheduleTick()},isBusy:function(){return!this.isIdle()},isIdle:function(){return!(this.busyCounter+this.lastBusyCounter)},debugHooks:{$enabled:!1,onCycleLimitExceeded:function(){Ext.raise("Exceeded cycleLimit "+this.getCycleLimit())},scheduleItem:function(e){e||Ext.raise("scheduleItem: Invalid argument"),Ext.log("Schedule item: "+e.getFullName()+" - "+(this.scheduledCount+1)),e.order<=this.notifyIndex&&Ext.log.warn("Suboptimal order: "+e.order+" < "+this.notifyIndex),this.callParent([e])},unscheduleItem:function(e){this.scheduledCount||Ext.raise("Invalid scheduleCount"),this.callParent([e]),Ext.log("Unschedule item: "+e.getFullName()+" - "+this.scheduledCount)}}}),Ext.define("Ext.data.Batch",{mixins:{observable:"Ext.mixin.Observable"},config:{pauseOnException:!1},current:-1,total:0,running:!1,complete:!1,exception:!1,constructor:function(e){this.mixins.observable.constructor.call(this,e),this.operations=[],this.exceptions=[]},add:function(e){var t,i;if(Ext.isArray(e))for(t=0,i=e.length;t<i;++t)this.add(e[t]);else this.total++,e.setBatch(this),this.operations.push(e);return this},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(e,t){var i=e.order-t.order;if(i)return i;var n,r=e.entityType,o=t.entityType;return r&&o?((n=r.rank)||(r.schema.rankEntities(),n=r.rank),(n-o.rank)*e.foreignKeyDirection):0},start:function(e){return this.destroyed||!this.operations.length||this.running?this:(this.exceptions.length=0,this.exception=!1,this.running=!0,this.runOperation(Ext.isDefined(e)?e:this.current+1))},abort:function(){var e;this.running&&((e=this.getCurrent()).destroyed||e.abort()),this.running=!1,this.aborted=!0,this.current=void 0},retry:function(){return this.start(this.current)},runNextOperation:function(){return this.running&&this.runOperation(this.current+1),this},pause:function(){return this.running=!1,this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var e=null,t=this.current;return-1===t||this.complete||(e=this.operations[t]),e},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(e){var t=this.operations,i=t[e];return void 0===i?(this.running=!1,this.complete=!0,this.fireEvent("complete",this,t[t.length-1])):(this.current=e,i.setInternalCallback(this.onOperationComplete),i.setInternalScope(this),i.execute()),this},onOperationComplete:function(e){var t=e.hasException();t&&(this.exception=!0,this.exceptions.push(e),this.fireEvent("exception",this,e)),t&&this.getPauseOnException()?this.pause():(this.fireEvent("operationcomplete",this,e),this.runNextOperation())},destroy:function(){var e,t,i,n=this.operations;for(this.running&&this.abort(),t=0,i=this.operations.length;t<i;t++)(e=n[t])&&(e.destroyed||e.$destroyOwner||e.destroy(),e[t]=null);this.operations=this.exceptions=null,this.callParent()}}),Ext.define("Ext.data.matrix.Slice",{constructor:function(e,t){this.id=t,this.side=e,this.members={}},attach:function(e){Ext.Assert.falsey(this.store,"Store is already attached"),(this.store=e).matrix=this,e.on("load",this.onStoreLoad,this,{single:!0})},commit:function(){var e,t=this.members;for(e in t)t[e][2]=0},onStoreLoad:function(e){this.update(e.getData().items,0)},update:function(e,t){e instanceof Array||Ext.raise("Only array of records or record ids are supported");var i,n,r,o,a,s,l=Ext.data.matrix.Slice,d=this.side,u=d.index,c=e.length,h=this.id,f=this.members,g=d.inverse,p=g.slices;for(r=0;r<c;++r)n=null,i=f[a=(o=e[r]).isEntity?o.id:o],t<0&&i&&1===i[2]?(delete f[a],(s=p[a])&&delete s.members[h],n=1):i?t===i[2]||0===t||1===t&&0===i[2]||(i[2]=t,s=p[a],n=1):((i=[a,a,t])[u]=h,f[a]=i,(s=p[a])||(p[a]=s=new l(g,a)),s.members[h]=i,n=1),n&&(this.notify&&this.notify.call(this.scope,this,a,t),s&&s.notify&&s.notify.call(s.scope,s,h,t))},updateId:function(e){var t,i,n=this.id,r=this.side,o=r.slices,a=o[n],s=a.members,l=r.index,d=r.inverse.slices;for(t in o[this.id=e]=a,delete o[n],s)s[t][l]=e,(i=d[t].members)[e]=i[n],delete i[n]},destroy:function(){var e=this.store;e&&(e.matrix=null,e.un("load",this.onStoreLoad,this)),this.notify=this.scope=this.store=this.side=this.members=null,this.callParent()}}),Ext.define("Ext.data.matrix.Side",{requires:["Ext.data.matrix.Slice"],constructor:function(e,t,i){this.matrix=e,this.index=t,this.role=i,this.slices={}},commit:function(){var e,t=this.slices;for(e in t)t[e].commit()},get:function(e,t){var i=this.slices,n=i[e]||(i[e]=new Ext.data.matrix.Slice(this,e));return t||0===t?n.members[t]:n},update:function(e,t,i){return this.get(e).update(t,i)},updateId:function(e,t){var i=this.get(e);i&&i.updateId(t)},destroy:function(){var e,t=this.slices;for(e in t)t[e].destroy();this.inverse=this.matrix=this.role=this.slices=null,this.callParent()}}),Ext.define("Ext.data.matrix.Matrix",{requires:["Ext.data.matrix.Side"],constructor:function(e,t){var i=t.isManyToMany?t:e.getSchema().getAssociation(t),n=Ext.data.matrix.Side,r=new n(this,0,i.left),o=new n(this,1,i.right);Ext.Assert.truthy(i.isManyToMany,"Association is not many-to-many"),this.association=i,this.session=e,this.left=r,this.right=o,(r.inverse=o).inverse=r},commit:function(){this.left.commit(),this.right.commit()},update:function(e,t,i){return this.left.update(e,t,i)},updateId:function(e,t,i){var n,r=e.self,o=this.left,a=this.right;r===o.role.cls&&(n=o),r===a.role.cls&&(n=a),n&&n.updateId(t,i)},destroy:function(){this.left.destroy(),this.right.destroy(),this.association=this.session=this.left=this.right=null,this.callParent()}}),Ext.define("Ext.data.session.ChangesVisitor",{constructor:function(e){var t;t=(this.session=e).getCrudProperties(),this.result=null,this.writerOptions={},this.createKey=t.create,this.readKey=t.read,this.updateKey=t.update,this.dropKey=t.drop},onDirtyRecord:function(e){var t,i,n,r,o=this.crud,a=e.phantom,s=e.dropped,l=e.$className,d=a||s?"allDataOptions":"partialDataOptions",u=this.writerOptions,c=e.entityName;if(a&&s)return!1;o=a?this.createKey:s?this.dropKey:this.updateKey,u=u[l]||(u[l]={}),s&&((t=u.drop)||(u.drop=t={all:e.getProxy().getWriter().getWriteAllFields()}),t.all||(n=e.id)),n||((t=u[d])||(t=e.getProxy().getWriter().getConfig(d),u[d]=t=Ext.Object.chain(t),this.setupOptions(t)),n=e.getData(t)),(i=(i=(r=this.result||(this.result={}))[c]||(r[c]={}))[o]||(i[o]=[])).push(n)},setupOptions:function(e){e.serialize=!0},onMatrixChange:function(e,t,i,n){var r,o,a=e.left.type,s=e.right.role,l=n<0?this.dropKey:this.createKey;(r=(r=(r=(r=(o=this.result||(this.result={}))[a]||(o[a]={}))[s]||(r[s]={}))[l]||(r[l]={}))[t]||(r[t]=[])).push(i)}}),Ext.define("Ext.data.session.ChildChangesVisitor",{extend:"Ext.data.session.ChangesVisitor",constructor:function(){this.seen={},this.callParent(arguments)},setupOptions:function(e){this.callParent([e]),e.serialize=!1},onDirtyRecord:function(e){!1!==this.callParent(arguments)&&(e.$source||!e.dropped&&e.phantom||this.readEntity(e))},readEntity:function(e){var t,i,n=this.readKey,r=e.entityName,o=e.id,a=this.seen,s=r+o;a[s]||(a[s]=!0,(i=(i=(t=this.result||(this.result={}))[r]||(t[r]={}))[n]||(i[n]=[])).push(Ext.apply({},e.modified,e.data)))}}),Ext.define("Ext.data.session.BatchVisitor",{map:null,constructor:function(e){this.batch=e},getBatch:function(e){var t,i,n,r,o,a,s,l,d,u,c=this.map,h=this.batch;if(c)for(n in h=h||new Ext.data.Batch,c)for(o in s=(a=(i=(t=c[n]).entity).getProxy()).getBatchActions(),delete t.entity,t)if(s)(r=a.createOperation(o,{records:t[o]})).entityType=i,h.add(r);else for(u=0,d=(l=t[o]).length;u<d;++u)(r=a.createOperation(o,{records:[l[u]]})).entityType=i,h.add(r);return h&&!1!==e&&h.sort(),h},onDirtyRecord:function(e){var t=e.phantom?"create":e.dropped?"destroy":"update",i=e.$className,n=this.map||(this.map={}),r=n[i]||(n[i]={entity:e.self});(r=r[t]||(r[t]=[])).push(e)}}),Ext.define("Ext.mixin.Dirty",{mixinId:"dirty",config:{dirty:{$value:!1,lazy:!0}},dirty:!1,_dirtyRecordCount:0,ignoreDirty:!1,recordStateIsDirtyState:!0,isDirty:function(){return this.getDirty()},applyDirty:function(e){return!this.ignoreDirty&&e},updateDirty:function(e){this.dirty=e,this.fireEvent&&!this.isDirtyInitializing&&this.fireDirtyChange()},clearRecordStates:function(){var e=this._crudCounters;e&&(e.C=e.U=e.D=0),this._dirtyRecordCount=0,this.recordStateIsDirtyState&&this.setDirty(!1)},fireDirtyChange:function(){!this.ignoreDirty&&this.hasListeners.dirtychange&&this.fireEvent("dirtychange",this,this.dirty)},trackRecordState:function(e,t){var i,n,r=this._crudCounters||(this._crudCounters={C:0,R:0,U:0,D:0}),o=this._dirtyRecordCount,a=e.crudState,s=e.crudStateWas;return!t&&a===s||(!t&&s&&--r[s],e.phantom&&"D"===a||++r[a],this.checkCounters(),this._dirtyRecordCount=n=r.C+r.U+r.D,(i=!n!=!o)&&this.recordStateIsDirtyState&&this.setDirty(0<n)),i},untrackRecordState:function(e){var t,i,n=this._crudCounters,r=this._dirtyRecordCount,o=e.crudState;return n&&"D"!==o&&!e.erased&&(--n[o],this.checkCounters(),this._dirtyRecordCount=i=n.C+n.U+n.D,(t=!i!=!r)&&this.recordStateIsDirtyState&&this.setDirty(0<i)),t},checkCounters:function(){var e,t=this._crudCounters;for(e in t)t[e]<0&&Ext.raise("Invalid state for "+e)}}),Ext.define("Ext.data.Session",{requires:["Ext.data.schema.Schema","Ext.data.Batch","Ext.data.matrix.Matrix","Ext.data.session.ChangesVisitor","Ext.data.session.ChildChangesVisitor","Ext.data.session.BatchVisitor"],mixins:["Ext.mixin.Dirty","Ext.mixin.Observable"],isSession:!0,config:{schema:"default",parent:null,autoDestroy:!0,crudProperties:{create:"C",read:"R",update:"U",drop:"D"}},crudOperations:[{type:"R",entityMethod:"readEntities"},{type:"C",entityMethod:"createEntities"},{type:"U",entityMethod:"updateEntities"},{type:"D",entityMethod:"dropEntities"}],crudKeys:{C:1,R:1,U:1,D:1},statics:{nextId:1},constructor:function(e){this.data={},this.matrices={},this.id=Ext.data.Session.nextId++,this.identifierCache={},this.recordCreator=this.recordCreator.bind(this),this.mixins.observable.constructor.call(this,e)},destroy:function(){var e,t,i,n,r=this.matrices,o=this.data;for(n in r)r[n].destroy();for(e in o)for(n in t=o[e])(i=t[n].record)&&(i.$source=null,i.unjoin(this));this.identifierCache=this.recordCreator=this.matrices=this.data=null,this.setSchema(null),this.callParent()},adopt:function(e){var t,i=e.associations;if(this.checkModelType(e.self),e.session&&e.session!==this&&Ext.raise("Record already belongs to an existing session"),e.session!==this&&(this.add(e),i))for(t in i)i[t].adoptAssociated(e,this)},commit:function(){var e,t,i,n,r=this.data,o=this.matrices,a=this.getDirty();for(e in this.suspendEvent("dirtychange"),r)for(i in t=r[e])(n=t[i].record)&&n.commit();for(i in o)o[i].commit();this.clearRecordStates(),this.resumeEvent("dirtychange"),this.getDirty()!==a&&this.fireDirtyChange()},createRecord:function(e,t,i){this.checkModelType(e);var n,r=e.$isClass?e:this.getSchema().getEntity(e),o=this.getParent();return t&&o&&(n=r.getIdFromData(t),o.peekRecord(r,n)&&Ext.raise("A parent session already contains an entry for "+r.entityName+": "+n)),new r(t,i?null:this)},getChanges:function(){var e=new Ext.data.session.ChangesVisitor(this);return this.visitData(e),e.result},getChangesForParent:function(){var e=new Ext.data.session.ChildChangesVisitor(this);return this.visitData(e),e.result},getRecord:function(e,t,i){var n,r,o,a,s=e.isModel;return s&&(t=(s=e).id,e=e.self),(n=this.peekRecord(e,t))||(r=e.$isClass?e:this.getSchema().getEntity(e),(o=this.getParent())&&(a=o.peekRecord(r,t)),a&&(a.isLoading()?s=!1:(n=a.copy(void 0,this)).$source=a),n||(s?(n=s,this.adopt(n)):(n=r.createWithId(t,null,this),!1!==i&&n.load(Ext.isObject(i)?i:void 0)))),n},getSaveBatch:function(e){var t=new Ext.data.session.BatchVisitor;return this.visitData(t),t.getBatch(e)},onInvalidAssociationEntity:function(e,t){Ext.raise("Unable to read association entity: "+this.getModelIdentifier(e,t))},onInvalidEntityCreate:function(e,t){Ext.raise("Cannot create, record already not exists: "+this.getModelIdentifier(e,t))},onInvalidEntityDrop:function(e,t){Ext.raise("Cannot drop, record does not exist: "+this.getModelIdentifier(e,t))},onInvalidEntityRead:function(e,t){Ext.raise("Cannot read, record already not exists: "+this.getModelIdentifier(e,t))},onInvalidEntityUpdate:function(e,t,i){i?Ext.raise("Cannot update, record dropped: "+this.getModelIdentifier(e,t)):Ext.raise("Cannot update, record does not exist: "+this.getModelIdentifier(e,t))},peekRecord:function(e,t,i){this.checkModelType(e);var n,r,o=(e.$isClass?e:this.getSchema().getEntity(e)).entityName,a=this.data[o];return!(n=(a=a&&a[t])&&a.record)&&i&&(n=(r=this.getParent())&&r.peekRecord(e,t,i)),n||null},save:function(){var e,t=this.getParent();t?(e=new Ext.data.session.ChildChangesVisitor(this),this.visitData(e),t.update(e.result),this.commit()):Ext.raise("Cannot commit session, no parent exists")},spawn:function(){return new this.self({schema:this.getSchema(),parent:this})},update:function(e){var t,i,n,r,o,a,s,l,d,u,c=this,h=c.getSchema(),f=c.crudOperations,g=f.length,p=c.crudKeys,m=c.getDirty();for(t in c.suspendEvent("dirtychange"),c.getSchema().processKeyChecks(!0),e)for((i=h.getEntity(t))||Ext.raise("Invalid entity type: "+t),n=e[t],r=0;r<g;++r)(a=n[(o=f[r]).type])&&c[o.entityMethod](i,a);for(t in e)for(l in s=(i=h.getEntity(t)).associations,n=e[t])p[l]||((d=s[l])||Ext.raise("Invalid association key for "+t+', "'+l+'"'),u=n[d.role],d.processUpdate(c,u));c.resumeEvent("dirtychange"),c.getDirty()!==m&&c.fireDirtyChange()},afterCommit:function(e){this.trackRecordState(e)},afterDrop:function(e){this.trackRecordState(e)},afterEdit:function(e){this.trackRecordState(e)},afterErase:function(e){this.evict(e)},afterReject:function(e){this.trackRecordState(e)},privates:{add:function(e){var t,i,n=e.id,r=this.getEntry(e.self,n);for(i in r.record&&Ext.raise("Duplicate id "+e.id+" for "+e.entityName),e.session=this,r.record=e,this.trackRecordState(e,!0),this.registerReferences(e),t=e.associations)t[i].checkMembership(this,e)},applySchema:function(e){return Ext.data.schema.Schema.get(e)},checkModelType:function(e){e.$isClass&&(e=e.entityName),e?this.getSchema().getEntity(e)||Ext.raise("Unknown entity type "+e):Ext.raise("Unable to use anonymous models in a Session")},createEntities:function(e,t){var i,n,r,o,a=t.length;for(i=0;i<a;++i)n=t[i],o=e.getIdFromData(n),(r=this.peekRecord(e,o))?this.onInvalidEntityCreate(e,o):((r=this.createRecord(e,n,!0)).phantom=!0,r.crudState="C",this.add(r),r.crudStateWas="C")},dropEntities:function(e,t){var i,n,r,o,a=t.length;for(a&&(o=Ext.isObject(t[0])),i=0;i<a;++i)r=t[i],o&&(r=e.getIdFromData(r)),(n=this.peekRecord(e,r))?n.drop():this.onInvalidEntityDrop(e,r)},evict:function(e){var t=e.entityName,i=this.data[t],n=e.id;i&&i[n]&&(this.untrackRecordState(e),e.unjoin(this),delete i[n])},getEntityList:function(e,t){var i,n,r,o,a=t.length;for(i=0;i<a;++i)n=t[i],(r=this.peekRecord(e,n))?t[i]=r:(o=!0,t[i]=null,this.onInvalidAssociationEntity(e,n));return o&&(t=Ext.Array.clean(t)),t},getEntry:function(e,t){e.isModel&&(t=e.getId(),e=e.self);var i,n=(e.$isClass?e:this.getSchema().getEntity(e)).entityName,r=this.data;return i=(i=r[n]||(r[n]={}))[t]||(i[t]={})},getRefs:function(e,t,i){var n,r,o,a=this.getEntry(e),s=a&&a.refs&&a.refs[t.role],l=i&&this.getParent();if(l&&(n=l.getRefs(e,t))){for(r in n)o=n[r],s&&s[r]||this.getRecord(o.self,o.id);s=a&&a.refs&&a.refs[t.role]}return s||null},getIdentifier:function(e){var t,i,n,r,o=this.getParent();return o?r=o.getIdentifier(e):(r=(t=this.identifierCache)[n=(i=e.identifier).getId()||e.entityName])||(r=i.clone?i.clone({id:null}):i,t[n]=r),r},getMatrix:function(e,t){var i,n=e.isManyToMany?e.name:e,r=this.matrices;return(i=r[n])||t||(i=r[n]=new Ext.data.matrix.Matrix(this,e)),i||null},getMatrixSlice:function(e,t){return this.getMatrix(e.association)[e.side].get(t)},getModelIdentifier:function(e,t){return t+"@"+e.entityName},onIdChanged:function(e,t,i){var n,r,o,a,s,l,d=this.matrices,u=e.entityName,c=e.id,h=this.data[u],f=h[t],g=e.associations,p=f.refs,m=this._setNoRefs;for(l in h[i]&&Ext.raise("Cannot change "+u+" id from "+t+" to "+i+" id already exists"),delete h[t],h[i]=f,d)d[l].updateId(e,t,i);if(p)for(a in p)if(s=p[a],!(n=g[a].association).isManyToMany)for(o in r=n.field.name,s)s[o].set(r,c,m);this.registerReferences(e,t)},processManyBlock:function(e,t,i,n){var r,o,a,s;if(i)for(r in i)(o=this.peekRecord(e,r))?(a=this.getEntityList(t.cls,i[r]),s=t.getAssociatedItem(o),this[n](t,s,o,a)):this.onInvalidAssociationEntity(e,r)},processManyCreate:function(e,t,i,n){t?t.add(n):i[e.getterName](null,null,n)},processManyDrop:function(e,t,i,n){t&&t.remove(n)},processManyRead:function(e,t,i,n){t?t.setRecords(n):i[e.getterName](null,null,n)},readEntities:function(e,t){var i,n,r,o,a=t.length;for(i=0;i<a;++i)n=t[i],o=e.getIdFromData(n),(r=this.peekRecord(e,o))?this.onInvalidEntityRead(e,o):r=this.createRecord(e,n,!0),r.phantom=!1,this.add(r)},recordCreator:function(e,t){var i=t.getIdFromData(e),n=this.peekRecord(t,i,!0);return n?(n=this.getRecord(t,i)).mergeData(e):n=new t(e,this),n},registerReferences:function(e,t){e.entityName;var i,n,r,o,a,s,l,d,u=e.id,c=e.data,h=t||0===t;for(o=(s=e.references).length,n=0;n<o;++n)!(r=c[(a=s[n]).name])&&0!==r||((a=a.reference).type,d=a.inverse.role,(l=(l=(i=this.getEntry(a.cls,r)).refs||(i.refs={}))[d]||(l[d]={}))[u]=e,h&&delete l[t])},updateEntities:function(e,t){var i,n,r,o,a=t.length;if(Ext.isArray(t))for(i=0;i<a;++i)n=t[i],o=e.getIdFromData(n),(r=this.peekRecord(e,o))?r.set(n):this.onInvalidEntityUpdate(e,o);else for(o in t)n=t[o],(r=this.peekRecord(e,o))&&!r.dropped?r.set(n):this.onInvalidEntityUpdate(e,o,!!r)},updateReference:function(e,t,i,n){var r,o,a=t.reference,s=a.type,l=a.inverse.role,d=e.id;!n&&0!==n||delete(o=this.getEntry(s,n).refs[l])[d],!i&&0!==i||((o=(o=(r=this.getEntry(s,i)).refs||(r.refs={}))[l]||(o[l]={}))[d]=e)},visitData:function(e){var t,i,n,r,o,a,s,l,d,u,c=this.data,h=this.matrices;for(s in this.getSchema().processKeyChecks(!0),c)for(n in t=c[s])(l=t[n].record)&&(l.phantom||l.dirty||l.dropped?e.onDirtyRecord&&e.onDirtyRecord(l):e.onCleanRecord&&e.onCleanRecord(l));if(e.onMatrixChange)for(s in h)for(n in d=(o=h[s].left).slices,i=o.role.association,d)for(r in a=d[n].members)(u=(l=a[r])[2])&&e.onMatrixChange(i,l[0],l[1],u);return e},_setNoRefs:{refs:!1}}}),Ext.define("Ext.util.Schedulable",{abstract:!0,isSchedulable:!0,scheduled:!1,constructor:function(){this.getScheduler().add(this)},destroy:function(){var e=this.getScheduler();e&&!e.destroyed&&e.remove(this),this.scheduler=null,this.schedule=this.react=Ext.emptyFn,this.callParent()},getFullName:function(){return this.name||this.id},privates:{getScheduler:function(){return this.scheduler},schedule:function(){var e;this.scheduled||(e=this.getScheduler())&&(this.scheduled=!0,this.onSchedule&&this.onSchedule(),e.scheduleItem(this))},unschedule:function(){var e;this.scheduled&&((e=this.getScheduler())&&!e.destroyed&&e.unscheduleItem(this),this.scheduled=!1)},sort:function(){}}}),Ext.define("Ext.app.bind.BaseBinding",{extend:"Ext.util.Schedulable",isBinding:!0,calls:0,kind:20,defaultOptions:{},lastValue:void 0,constructor:function(e,t,i,n){this.options=n,this.owner=e,this.scope=i,(this.callback=t)||Ext.raise("Callback is required"),this.lateBound=Ext.isString(t),n&&n.deep&&(this.deep=!0),this.callParent()},destroy:function(){var e=this.owner;e&&e.onBindDestroy(this),this.callParent(),this.scope=this.callback=this.owner=null},isReadOnly:function(){return!0},privates:{getScheduler:function(){var e=this.owner;return e&&e.getScheduler()},getSession:function(){var e=this.owner;return e.isSession?e:e.getSession()},notify:function(e){var t=this,i=t.options||t.defaultOptions,n=t.lastValue;t.calls&&!t.deep&&!t.valueChanged(e,n)||(++t.calls,t.lastValue=e,t.lateBound?t.scope[t.callback](e,n,t):t.callback.call(t.scope,e,n,t),i.single&&t.destroy())},valueChanged:function(e,t){var i=!0;return t!==e?e&&t&&e instanceof Date&&t instanceof Date&&(i=e.getTime()!==t.getTime()):i=Ext.isArray(e),i}}}),Ext.define("Ext.app.bind.Binding",{extend:"Ext.app.bind.BaseBinding",constructor:function(e,t,i,n){this.callParent([e.owner,t,i,n]),this.stub=e,this.depth=e.depth,e.isAvailable()&&!e.scheduled&&this.schedule()},destroy:function(e){var t=this.stub;t&&!e&&(t.unbind(this),this.stub=null),this.callParent()},bindValidation:function(e,t){var i=this.stub;return i&&i.bindValidation(e,t)},bindValidationField:function(e,t){var i=this.stub;return i&&i.bindValidationField(e,t)},getFullName:function(){return this.fullName||(this.fullName="@("+this.stub.getFullName()+")")},getValue:function(){var e=this.stub;return e&&e.getValue()},isAvailable:function(){var e=this.stub;return e&&e.isAvailable()},isLoading:function(){var e=this.stub;return e&&e.isLoading()},isReadOnly:function(){var e=this.stub,t=this.options,i=!0;return t&&!1===t.twoWay||e&&(i=e.isReadOnly()),i},refresh:function(){},setValue:function(e){this.isReadOnly()&&Ext.raise("Cannot setValue on a readonly binding"),this.stub.set(e)},privates:{getDataObject:function(){var e=this.stub;return e&&e.getDataObject()},getRawValue:function(){var e=this.stub;return e&&e.getRawValue()},isDescendantOf:function(e){var t=this.stub;return!!t&&(e===t||t.isDescendantOf(e))},react:function(){this.notify(this.getValue())},schedule:function(){this.stub.scheduled||this.callParent()},sort:function(){var e=this.stub;e.scheduler.sortItem(e)}}}),Ext.define("Ext.app.bind.AbstractStub",{extend:"Ext.util.Schedulable",requires:["Ext.app.bind.Binding"],children:null,depth:0,generation:1,kind:10,parent:null,constructor:function(e,t){this.owner=e,this.name=t,this.callParent()},destroy:function(){var e,t,i,n=this.children,r=this.bindings;if(r)for(t=0,e=r.length;t<e;++t)r[t].destroy(!0);for(i in n)n[i].destroy();this.scheduled&&this.unschedule(),this.callParent()},add:function(e){((this.children||(this.children={}))[e.name]=e).depth=this.depth+1,e.parent=this},getChild:function(e){var t=Ext.isString(e)?e.split("."):e;return t&&t.length?this.descend(t,0):this},getFullName:function(){var e,t=this.fullName,i=this.parent;return t||(t=this.name||this.id,i&&(e=i.getFullName())&&(t=(":"!==e.charAt(e.length-1)?e+".":e)+t),this.fullName=t),t},getSession:function(){var e=this.owner;return e.isSession?e:e.getSession()},bind:function(e,t,i){var n=new Ext.app.bind.Binding(this,e,t,i),r=this.bindings||(this.bindings=[]);return n.depth=this.depth,r.push(n),n},getValue:function(){return this.isAvailable()?this.getRawValue():null},graft:function(e){var t,i=this.bindings,n=this.name;if(this.parent=this.bindings=null,this.destroy(),e.depth=this.depth,e.bindings=i,e.generation=this.generation+1,e.name=n,e.id=this.id,e.path=this.path,i)for(t=i.length;0<t--;)i[t].stub=e;return e},isDescendantOf:function(e){var t;for(t=this;t=t.parent;)if(t===e)return!0;return!1},isAvailable:function(){return!0},isLoading:function(){return!1},onSchedule:function(){var e,t,i,n,r;for(r=this.parent;r;r=r.parent)if(n=r.bindings)for(e=0,t=n.length;e<t;++e)(i=n[e]).deep&&!i.scheduled&&i.schedule()},react:function(){var e,t,i,n=this.bindings;if(n)for(t=0,i=n.length;t<i;++t)(e=n[t]).scheduled||e.schedule()},unbind:function(e){var t=this.bindings;t&&t.length&&Ext.Array.remove(t,e)},privates:{collect:function(){var e,t,i=this.children,n=this.bindings,r=0,o=0;if(i)for(t in i)0===(o=(e=i[t]).collect())&&(e.destroy(),delete i[t]),r+=o;return n&&(r+=n.length),r},getScheduler:function(){var e=this.owner;return e&&e.getScheduler()},sort:function(){var e=this.parent;e&&this.scheduler.sortItem(e)}}}),Ext.define("Ext.app.bind.Stub",{extend:"Ext.app.bind.AbstractStub",requires:["Ext.app.bind.Binding"],isStub:!0,dirty:!0,formula:null,validationKey:"validation",constructor:function(e,t,i){var n=t;this.callParent([e,t]),this.boundValue=null,i&&(i.add(this),i.isRootStub||(n=i.path+"."+t),this.checkHadValue()),this.path=n},destroy:function(){var e=this.formula,t=this.storeBinding;e&&e.destroy(),t&&t.destroy(),this.detachBound(),this.callParent()},bindValidation:function(e,t){var i=this.parent;return i&&i.descend([this.validationKey,this.name]).bind(e,t)},bindValidationField:function(i,n){var e,t=this.parent,r=this.name,o="string"==typeof i;return t&&(e=t.bind(function(e){var t=null;e&&e.isModel&&(t=e.getField(r)),o?n[i](t,e,this):i.call(n,t,e,this)})),e||null},descend:function(e,t){var i,n=this.children||(this.children={}),r=t||0,o=e[r++];return(i=n[o])||(i=new Ext.app.bind.Stub(this.owner,o,this)),r<e.length&&(i=i.descend(e,r)),i},getChildValue:function(e){var t,i=this.name,n=this.bindMappings,r=n.store,o=n.model;return e||Ext.isString(e)?(t=this.inspectValue(e))||(e.isEntity?t=o[i]?e[o[i]]():e.data[i]:e.isStore&&r[i]?t=e[r[i]]():void 0===(t=e[i])&&this.hadValue&&(t=null)):t=this.hadValue?null:void 0,t},getDataObject:function(){var e,t=this.parent.getDataObject(),i=this.name,n=t?t[i]:null,r=this.bindMappings.store;return n?t.isStore&&i in r&&(n=t[r[i]]()):t&&t.isEntity&&(e=t.associations)&&i in e&&(n=t[e[i].getterName]()),n&&(n.$className||Ext.isObject(n))||(t[i]=n={},this.hadValue=!0,this.invalidate(!0,!0)),n},getRawValue:function(){return this.getChildValue(this.getParentValue())},graft:function(e){var t,i,n=this.parent,r=this.children,o=this.name;if(e.parent=n,e.children=r,n&&(n.children[o]=e),r)for(t in r)r[t].parent=e;return this.children=null,e.checkHadValue(),(i=this.callParent([e])).invalidate(!0,!0),i},isAvailable:function(){return this.checkAvailability()},isLoading:function(){return!this.checkAvailability(!0)},invalidate:function(e,t){var i,n=this.children;if(this.dirty=!0,this.checkHadValue(),!t&&this.isAvailable()&&(this.scheduled||this.schedule()),e&&n)for(i in n)n[i].invalidate(e,t)},isReadOnly:function(){var e=this.formula;return!(!e||e.set)},set:function(e,t){var i,n,r,o,a=this.parent,s=this.name,l=this.formula;if(l&&!l.settingValue&&l.set)l.setValue(e);else{if(this.isLinkStub&&(l=(r=this.getLinkFormulaStub())?r.formula:null))return r.isReadOnly()&&Ext.raise("Cannot setValue on a readonly formula"),void l.setValue(e);(i=a.getDataObject()).isEntity?(n=i.associations)&&s in n?((o=n[s].setterName)&&i[o](e),this.invalidate(!0)):i.set(s,e):(e&&e.constructor===Object||e!==i[s]||!i.hasOwnProperty(s))&&(!t&&this.setByLink(e)||(void 0===e?delete i[s]:i[s]=e,this.inspectValue(i),this.invalidate(!0)))}},onStoreDataChanged:function(){this.invalidate(!0)},afterLoad:function(e){this.invalidate(!0)},afterCommit:function(e){this.afterEdit(e,null)},afterEdit:function(e,t){var i,n,r,o,a,s=this.children,l=t&&t.length,d=e.associations,u=this.bindMappings.model;if(s){if(l)for(n=0;n<l;++n)(r=(r=s[o=t[n]])||(a=(a=e.fieldsMap[o])&&a.reference)&&s[a.role])&&r.invalidate(!0);else for(i in s)d&&i in d||s[i].invalidate(!0);for(i in u)(r=s[i])&&r.invalidate()}this.invalidate()},afterReject:function(e){this.afterEdit(e,null)},afterAssociatedRecordSet:function(e,t,i){var n=this.children,r=i.role;n&&r in n&&n[r].invalidate(!0)},setByLink:function(e){var t,i,n,r,o,a,s=0,l=!1;for(r=this;r;r=r.parent){if(r.isLinkStub){if(i=r,s)for(n=[],t=0,r=this;r!==i;r=r.parent)n[s-++t]=r.name;break}++s}return r=null,i&&(o=i.parent,a=i.name,r=o.shouldClimb(a)?i.getTargetStub():o.insertChild(a)),r&&(n&&(r=r.descend(n)),r.set(e),l=!0),l},setFormula:function(e){var t=this.formula;t&&t.destroy(),this.formula=new Ext.app.bind.Formula(this,e)},react:function(){var e,t=this.boundValue,i=this.children;if(t)if(t.isValidation){if(t.refresh(),e=t.generation,this.lastValidationGeneration===e)return;this.lastValidationGeneration=e}else t.isModel&&i&&i[this.validationKey]&&t.isValid();this.callParent()},privates:{bindMappings:{store:{count:"getCount",first:"first",last:"last",loading:"hasPendingLoad",totalCount:"getTotalCount"},model:{dirty:"isDirty",phantom:"isPhantom",valid:"isValid"}},checkAvailability:function(e){var t,i,n,r,o=this.parent,a=this.bindMappings,s=this.name,l=!(!o||!o.checkAvailability(e));return l&&(i=this.getParentValue(),(n=this.inspectValue(i))?l=e?!n.hasPendingLoad():!!n.isStore||(!n.isLoading()||0<n.loadCount):(i&&(i.isModel?a.model[s]?(l=!o.isLoading(),r=!0):(t=i.associations)&&s in t||(r=l=!0):i.isStore&&a.store[s]&&"loading"!==s&&(l=!o.isLoading(),r=!0)),r||(l=this.hadValue||void 0!==this.getRawValue()))),l},checkHadValue:function(){this.hadValue||(this.hadValue=void 0!==this.getRawValue())},collect:function(){return this.callParent()+(this.storeBinding?1:0)+(this.formula?1:0)},getLinkFormulaStub:function(){for(var e=this;e.isLinkStub;)e=e.binding.stub;return e.formula?e:null},getParentValue:function(){return this.dirty&&(this.parentValue=this.parent.getValue(),this.dirty=!1),this.parentValue},setStore:function(e){this.storeBinding=e},inspectValue:function(e){var t,i,n=this.name,r=this.boundValue,o=null;return e&&e.isEntity?(t=e.associations)&&n in t?o=e[t[n].getterName]():n===this.validationKey&&(o=e.getValidation(),this.lastValidationGeneration=null):e&&(i=e[n])&&(i.isModel||i.isStore)&&(o=i),r!==o&&(r&&this.detachBound(),o&&(o.isModel?o.join(this):(!o.associatedEntity||!1===o.autoLoad||o.complete||o.hasPendingLoad()||o.load(),o.on({scope:this,beginload:"onStoreDataChanged",load:"onStoreDataChanged",datachanged:"onStoreDataChanged",destroy:"onDestroyBound"}))),this.boundValue=o),o},detachBound:function(){var e=this.boundValue;e&&!e.destroyed&&(e.isModel?e.unjoin(this):e.un({scope:this,beginload:"onStoreDataChanged",load:"onStoreDataChanged",datachanged:"onStoreDataChanged",destroy:"onDestroyBound"}))},onDestroyBound:function(){this.owner.destroying||this.set(null)},sort:function(){var e=this.formula,t=this.scheduler,i=this.storeBinding;this.callParent(),i&&t.sortItem(i),e&&t.sortItem(e)}}}),Ext.define("Ext.app.bind.LinkStub",{extend:"Ext.app.bind.Stub",isLinkStub:!0,binding:null,destroy:function(){var e=this.binding,t=this.owner;e&&(this.binding=null,e.destroy(),t&&delete t.linkData[this.name]),this.target=null,this.callParent()},getFullName:function(){return this.fullName||(this.fullName="("+this.callParent()+" -> "+this.binding.getFullName()+")")},getDataObject:function(){var e,t,i=this.binding,n=this.parent,r=this.name;return n.isRootStub&&!n.shouldClimb(r)?(e=n.owner.getData()).hasOwnProperty(r)||(e[r]=t={}):t=i&&i.getDataObject(),t},getRawValue:function(){var e=this.binding;return e&&e.getRawValue()},getValue:function(){var e=this.binding;return e&&e.getValue()},getTargetStub:function(){var e=this.binding;return e&&e.stub},isAvailable:function(){var e=this.binding;return!!e&&e.isAvailable()},isLoading:function(){var e=this.binding;return!!e&&e.isLoading()},link:function(e,t){var i=this.binding;i&&i.destroy(),t=this.target=t||this.owner,this.linkDescriptor=e,this.binding=t.bind(e,this.onChange,this),this.binding.deep=!0},onChange:function(){this.invalidate(!0)},react:function(){this.owner.linkData[this.name]=this.getValue(),this.callParent()},privates:{collect:function(){return this.callParent()+(this.binding?1:0)},sort:function(){var e=this.binding;e&&this.scheduler.sortItem(e)}}}),Ext.define("Ext.app.bind.RootStub",{extend:"Ext.app.bind.AbstractStub",requires:["Ext.app.bind.LinkStub","Ext.app.bind.Stub"],isRootStub:!0,depth:0,createRootChild:function(e,t){var i,n,r=this.owner,o=r.getData(),a=this.children,s=a&&a[e],l=s?null:this;return t||o.hasOwnProperty(e)||!(i=r.getParent())?n=new Ext.app.bind.Stub(r,e,l):(n=new Ext.app.bind.LinkStub(r,e,l)).link("{"+e+"}",i),s&&s.graft(n),n},createStubChild:function(e){return this.createRootChild(e,!0)},descend:function(e,t){var i=this.children,n=t||0,r=e[n++],o=i&&i[r]||this.createRootChild(r);return n<e.length&&(o=o.descend(e,n)),o},getFullName:function(){return this.fullName||(this.fullName=this.owner.id+":")},getDataObject:function(){return this.owner.data},getRawValue:function(){return this.owner.data},getValue:function(){return this.owner.data},isDescendantOf:function(){return!1},set:function(e,t){e&&e.constructor===Object||Ext.raise("Only an object can be set at the root");var i,n,r,o,a,s=this.children||(this.children={}),l=this.owner,d=l.data,u=l.getParent();for(r in e)0<=r.indexOf(".")&&Ext.raise("Value names cannot contain dots"),void 0!==(n=e[r])?(i=s[r],o=t||!this.shouldClimb(r),i?o&&i.isLinkStub&&!i.getLinkFormulaStub()&&(i=this.insertChild(r)):(i=this.createRootChild(r,o),a=!0),a&&d.hasOwnProperty(e)||l.invalidateChildLinks(r),i.set(n,o)):d.hasOwnProperty(r)&&(delete d[r],(i=s[r])&&(!i.isLinkStub&&u&&(i=this.createRootChild(r)),l.invalidateChildLinks(r,!0),i.invalidate(!0)))},schedule:Ext.emptyFn,unschedule:Ext.emptyFn,privates:{checkAvailability:function(){return!0},insertChild:function(e){return this.createRootChild(e,!0)},invalidateChildLink:function(e,t){var i=this.children,n=i&&i[e];n&&n.isLinkStub&&!n.getLinkFormulaStub()&&(n=this.createRootChild(e),t&&n.invalidate(!0),this.owner.invalidateChildLinks(e,t))},shouldClimb:function(e){for(var t=this.owner.getParent();t;){if(t.getData().hasOwnProperty(e))return!0;t=t.getParent()}return!1}}}),Ext.define("Ext.app.bind.Multi",{extend:"Ext.app.bind.BaseBinding",isMultiBinding:!0,missing:1,deep:!0,constructor:function(e,t,i,n,r){var o=this,a=r&&r.trackStatics;o.callParent([t,i,n,r]),o.bindings=[],o.literal=e.$literal,e.constructor===Object?(a&&(o.staticKeys=[]),o.addObject(e,o.lastValue={},o.staticKeys)):o.addArray(e,o.lastValue=[]),--o.missing||o.scheduled||o.schedule()},destroy:function(){this.bindings=Ext.destroy(this.bindings),this.callParent()},add:function(e,t,i){var n,r,o=this,a=o.owner,s=o.bindings,l=o.literal?e.reference?"bindEntity":"bindExpression":"bind";return++o.missing,r=(n=a[l](e,function(e){t[i]=e,1===n.calls&&--o.missing,o.missing||o.scheduled||o.schedule()},o,null)).depth,(!s.length||r<o.depth)&&(o.depth=r),s.push(n),!this.isBindingStatic(n)},addArray:function(e,t){var i,n,r,o=e.length,a=!1;for(r=0;r<o;++r)i=(n=e[r])&&(n.reference||Ext.isString(n))?this.add(n,t,r):Ext.isArray(n)?this.addArray(n,t[r]=[]):n&&n.constructor===Object?this.addObject(n,t[r]={}):(t[r]=n,!1),a=a||i;return a},addObject:function(e,t,i){var n,r,o,a=!1;for(o in e)n=(r=e[o])&&(r.reference||Ext.isString(r))?this.add(r,t,o):Ext.isArray(r)?this.addArray(r,t[o]=[]):r&&r.constructor===Object?this.addObject(r,t[o]={}):(t[o]=r,!1),i&&!n&&i.push(o),a=a||n;return a},getFullName:function(){var e,t=this.fullName,i=this.bindings,n=i.length;if(!t){for(t="@[",e=0;e<n;++e)e&&(t+=","),t+=i[e].getFullName();t+="]",this.fullName=t}return t},getRawValue:function(){return this.lastValue},isDescendantOf:function(){return!1},isLoading:function(){for(var e=this.bindings,t=e.length;0<t--;)if(e[t].isLoading())return!0;return!1},isAvailable:function(){for(var e=this.bindings,t=e.length;0<t--;)if(e[t].isAvailable())return!0;return!1},isBindingStatic:function(e){return e.isTemplateBinding&&e.isStatic},isStatic:function(){var e,t,i=this.bindings,n=i.length;for(e=0;e<n;++e)if(t=i[e],!this.isBindingStatic(t))return!1;return!0},pruneStaticKeys:function(){var e,t=Ext.apply({},this.lastValue),i=this.staticKeys,n=i.length;for(e=0;e<n;++e)delete t[i[e]];return t},react:function(){this.notify(this.lastValue)},refresh:function(){},privates:{sort:function(){this.scheduler.sortItems(this.bindings)}}}),Ext.define("Ext.app.bind.Formula",{extend:"Ext.util.Schedulable",requires:["Ext.util.LruCache"],statics:{getFormulaParser:function(e){var t,i,n=this.formulaCache;return(t=(n=n||(this.formulaCache=new Ext.util.LruCache({maxSize:20}))).get(e))||(i="[^\\.a-z0-9_]"+Ext.String.escapeRegex(e)+"\\(\\s*(['\"])(.*?)\\1\\s*\\)",t=new RegExp(i,"gi"),n.add(e,t)),t}},isFormula:!0,calculation:null,explicit:!1,set:null,single:!1,fnKeywordArgumentNamesRe:/^function\s*[^\(]*\(\s*([^,\)\s]+)/,fnKeywordRe:/^\s*function/,replaceParenRe:/[\(\)]/g,constructor:function(e,t){var i,n,r,o,a=this,s=e.owner;a.owner=s,a.stub=e,a.callParent(),t instanceof Function?a.get=r=t:(a.get=r=t.get,a.set=t.set,n=t.bind,t.single&&(a.single=t.single),n&&(i=n.bindTo)&&(delete(o=Ext.apply({},n)).bindTo,n=i)),r||Ext.raise("Must specify a getter method for a formula"),n?a.explicit=!0:n=r.$expressions||a.parseFormula(r),a.binding=s.bind(n,a.onChange,a,o)},destroy:function(){var e=this.binding,t=this.stub;e&&(e.destroy(),this.binding=null),t&&(t.formula=null),this.callParent(),this.getterFn=this.owner=null},getFullName:function(){return this.fullName||(this.fullName=this.stub.getFullName()+"="+this.callParent()+")")},getRawValue:function(){return this.calculation},onChange:function(){this.scheduled||this.schedule()},parseFormula:function(e){var t,i,n,r,o=Ext.Function.toCode(e),a={$literal:!0};for(this.fnKeywordRe.test(o)?(t=this.fnKeywordArgumentNamesRe.exec(o))&&(i=t[1]):(t=o.split("=>")[0])&&(i=(t=Ext.String.trim(t.replace(this.replaceParenRe,"")).split(","))[0]),i=i||"get",n=Ext.app.bind.Formula.getFormulaParser(i);t=n.exec(o);)a[r=t[2]]=r;return a.$literal=!0,e.$expressions=a},react:function(){var e,t=this,i=t.owner,n=t.binding.lastValue;e=t.explicit?n:i.getFormulaFn(n),t.settingValue=!0,t.stub.set(t.calculation=t.get.call(i,e)),t.settingValue=!1,t.single&&t.destroy()},setValue:function(e){this.set.call(this.stub.owner,e)},privates:{getScheduler:function(){var e=this.owner;return e&&e.getScheduler()},sort:function(){var e=this.binding;e.destroyed||this.scheduler.sortItem(e)}}}),Ext.define("Ext.util.Fly",{inheritableStatics:{flyPoolSize:2,fly:function(){var e=this.flyweights||(this.flyweights=[]),t=e.length?e.pop():new this;return t.reset.apply(t,arguments),t}},release:function(){var e=this.self,t=e.flyweights||(e.flyweights=[]);this.reset(),t.length<e.flyPoolSize&&t.push(this)},reset:Ext.emptyFn}),Ext.define("Ext.parse.Tokenizer",function(e){var t=e.flyweights=[],i={literal:!0,boolean:!0,type:"boolean"},r={error:!0},u={ident:!0},n={literal:!0,nil:!0},d={literal:!0,number:!0,type:"number"},l={literal:!0,string:!0,type:"string"};return{extend:"Ext.util.Fly",isTokenizer:!0,statics:{BOOLEAN:i,ERROR:r,IDENT:u,LITERAL:{literal:!0},NULL:n,NUMBER:d,STRING:l},config:{keywords:{null:{type:"literal",is:n,value:null},false:{type:"literal",is:i,value:!1},true:{type:"literal",is:i,value:!0}},operators:{"+":"plus","-":"minus","*":"multiply","/":"divide","!":"not",",":"comma",":":"colon","[":"arrayOpen","]":"arrayClose","{":"curlyOpen","}":"curlyClose","(":"parenOpen",")":"parenClose"},patterns:null},error:null,index:-1,constructor:function(e){this.operators={},this.patterns=[],this.initConfig(e)},next:function(){var e=this.peek();return this.head=void 0,e},peek:function(){var e=this.error,t=this.head;return e||(void 0===t&&(this.head=t=this.advance()),t)},release:function(){this.reset(),t.length<e.flyPoolSize&&t.push(this)},reset:function(e,t,i){return this.error=null,this.head=void 0,this.index=-1,this.text=e||null,this.pos=t||0,this.end=e&&null==i?e.length:i,this},privates:{digitRe:/[0-9]/,identFirstRe:/[a-z_$]/i,identRe:/[0-9a-z_$]/i,spaceRe:/[ \t]/,end:0,head:void 0,pos:0,text:null,applyOperators:function(e){var t,i,n,r,o,a,s,l=this.operators;for(s in e){for(t=l,a=e[s],o=s.length,r=0;r<o;++r)t=t[i=s.charAt(r)]||(t[i]={});a?(t.token=n={type:"operator",name:a,value:s,is:{operator:!0}},n.is[a]=!0):t.token=null}},applyPatterns:function(e){var t,i,n,r,o=this.patterns;for(n in e)i=(t=e[n]).extract,r=t.re,delete t.extract,delete t.re,o.push({name:n,re:r,extract:i,token:t})},advance:function(){for(var e,t=this.spaceRe,i=this.text,n=this.end;this.pos<n;){if(e=i.charAt(this.pos),!t.test(e))return this.index=this.pos,this.parse(e);++this.pos}return null},parse:function(e){var t,i,n,r,o=this,a=o.digitRe,s=o.text,l=o.end,d=o.patterns;if("."===e&&o.pos+1<l&&a.test(s.charAt(o.pos+1))&&(r=o.parseNumber()),!r)for(t=0;t<d.length;++t)if((n=d[t]).re.lastIndex=o.pos,(i=n.re.exec(s))&&i.index===o.pos){r=Ext.apply({value:n.extract?n.extract(i):i[0]},n.token),o.pos+=i[0].length;break}return!r&&o.operators[e]&&(r=o.parseOperator(e)),r=r||('"'===e||"'"===e?o.parseString():a.test(e)?o.parseNumber():o.identFirstRe.test(e)?o.parseIdent():o.syntaxError("Unexpected character"))},parseIdent:function(){for(var e,t,i=this.identRe,n=this.getKeywords(),r=!this.operators["."],o=this.text,a=this.pos,s=a,l=this.end,d=0;s<l;){if(e=o.charAt(s),r&&"."===e){if("."===d)return this.syntaxError(s,"Unexpected dot operator");++s}else{if(!i.test(e))break;++s}d=e}return"."===d?this.syntaxError(s-1,"Unexpected dot operator"):(t=o.substring(a,this.pos=s),n&&n[t]||{type:"ident",is:u,value:t})},parseNumber:function(){for(var e,t,i,n,r=this,o=r.digitRe,a=r.text,s=r.pos,l=r.end;r.pos<l;)if("-"===(e=a.charAt(r.pos))||"+"===e){if(r.pos!==s)break;++r.pos}else if("."===e){if(t)break;t=!0,++r.pos}else if("e"===e||"E"===e){if(i)break;t=i=!0,"-"!==(e=a.charAt(++r.pos))&&"+"!==e||++r.pos}else{if(!o.test(e))break;++r.pos}return n={type:"literal",is:d,value:+a.substring(s,r.pos)},isFinite(n.value)||(n=r.syntaxError(s,"Invalid number")),n},parseOperator:function(e){for(var t,i,n,r=this.operators,o=this.text,a=this.end,s=this.pos;r[e]&&(++s,(n=(r=r[e]).token)&&(t=n,i=s),s<a);)e=o.charAt(s);return t&&(this.pos=i),t},parseString:function(){var e,t,i,n=this.text,r=this.pos,o=r,a=this.end,s="";for(i=n.charAt(r++);r<a;){if((e=n.charAt(r++))===i){t=!0;break}"\\"===e&&r<a&&(e=n.charAt(r++)),s+=e}return this.pos=r,t?{type:"literal",is:l,value:s}:this.syntaxError(o,"Unterminated string")},syntaxError:function(e,t){"string"==typeof e&&(t=e,e=this.pos);var i=null==e?"":" (at index "+e+")",n=new Error(t+i);return n.type="error",n.is=r,i&&(n.at=e),this.error=n}}}}),Ext.define("Ext.parse.Symbol",{priority:0,constructor:function(e,t){var i=this.defaultProperty;t&&"object"==typeof t?Ext.apply(this,t):void 0!==t&&i&&(this[i]=t),this.id=e},dump:function(){var e,t=this,i={at:t.at,arity:t.arity};if("value"in t&&(i.value=t.value),t.lhs&&(i.lhs=t.lhs.dump(),i.rhs=t.rhs.dump()),t.operand&&(i.operand=t.operand.dump()),t.args)for(i.args=[],e=0;e<t.args.length;++e)i.args.push(t.args[e].dump());return i},led:function(){this.parser.syntaxError(this.at,"Missing operator")},nud:function(){this.parser.syntaxError(this.at,"Undefined")},update:function(e){if(e&&"object"==typeof e){var t=e.priority,i=e.led,n=e.nud;this.priority<=t&&(this.priority=t),i&&(this.led=i),n&&(this.nud=n)}}}),Ext.define("Ext.parse.symbol.Constant",{extend:"Ext.parse.Symbol",arity:"literal",isLiteral:!0,defaultProperty:"value",constructor:function(e,t){this.callParent([e,t]),this._value=this.value},nud:function(){return this.value=this._value,this.arity="literal",this.isLiteral=!0,this}}),Ext.define("Ext.parse.symbol.Infix",{extend:"Ext.parse.Symbol",arity:"binary",isBinary:!0,defaultProperty:"priority",led:function(e){return this.lhs=e,this.rhs=this.parser.parseExpression(this.priority),this.arity="binary",this.isBinary=!0,this}}),Ext.define("Ext.parse.symbol.InfixRight",{extend:"Ext.parse.symbol.Infix",led:function(e){return this.lhs=e,this.rhs=this.parser.parseExpression(this.priority-1),this.arity="binary",this.isBinary=!0,this}}),Ext.define("Ext.parse.symbol.Paren",{extend:"Ext.parse.Symbol",arity:"binary",isBinary:!0,priority:80,led:function(e){var t=[],i=this.parser,n=e.id,r=e.arity;for("."!==n&&"["!==n&&("unary"===r&&"function"===n||"ident"===r||"("===n||"&&"===n||"||"===n||"?"===n||i.syntaxError(e.at,"Expected a variable name.")),this.arity="invoke",this.isInvoke=!0,this.operand=e,this.args=t;")"!==i.token.id;)t.length&&i.advance(","),t.push(i.parseExpression());return i.advance(")"),this},nud:function(){var e=this.parser,t=e.parseExpression();return e.advance(")"),t}}),Ext.define("Ext.parse.symbol.Prefix",{extend:"Ext.parse.Symbol",arity:"unary",isUnary:!0,priority:70,nud:function(){return this.operand=this.parser.parseExpression(this.priority),this.arity="unary",this.isUnary=!0,this}}),Ext.define("Ext.parse.Parser",function(){function e(){return this}return{extend:"Ext.util.Fly",requires:["Ext.parse.Tokenizer","Ext.parse.symbol.Constant","Ext.parse.symbol.InfixRight","Ext.parse.symbol.Paren","Ext.parse.symbol.Prefix"],isParser:!0,config:{constants:{null:null,false:!1,true:!0},infix:{"===":40,"!==":40,"==":40,"!=":40,"<":40,"<=":40,">":40,">=":40,"+":50,"-":50,"*":60,"/":60},infixRight:{"&&":30,"||":30},prefix:{"!":0,"-":0,"+":0},symbols:{":":0,",":0,")":0,"[":0,"]":0,"{":0,"}":0,"(end)":0,"(ident)":{arity:"ident",isIdent:!0,nud:e},"(literal)":{arity:"literal",isLiteral:!0,nud:e},"(":{xclass:"Ext.parse.symbol.Paren"}},tokenizer:{keywords:null}},token:null,constructor:function(e){this.symbols={},this.initConfig(e)},advance:function(e){var t,i,n,r,o=this.tokenizer,a=o.peek(),s=this.symbols,l=o.index;if(this.error)throw this.error;return e&&this.expect(e),a?(o.next(),t=a.is,r=a.value,t.ident?n=s[r]||s["(ident)"]:t.operator?((n=s[r])||this.syntaxError(a.at,'Unknown operator "'+r+'"'),i=a.name):t.literal?n=s["(literal)"]:this.syntaxError(a.at,"Unexpected token"),this.token=n=Ext.Object.chain(n),n.at=l,n.is=t,n.value=r,n.arity||(n.arity=a.type),i&&(n.name=i),n):this.token=s["(end)"]},expect:function(e){var t=this.token;return e!==t.id&&this.syntaxError(t.at,'Expected "'+e+'"'),this},parseExpression:function(e){var t,i=this.token;for(e=e||0,this.advance(),t=i.nud();e<(i=this.token).priority;)this.advance(),t=i.led(t);return t},reset:function(e,t,i){return this.error=this.token=null,this.tokenizer.reset(e,t,i),this.advance(),this},syntaxError:function(e,t){"string"==typeof e&&(t=e,e=this.pos);var i=null==e?"":" (at index "+e+")",n=new Error(t+i);throw n.type="error",i&&(n.at=e),this.error=n},privates:{error:null,addSymbol:function(e,t,i,n){var r,o,a,s=this.symbols,l=s[e];if(l){if("object"==typeof t)r=t;else{if(!n||!i)return l;for(o=(n=Ext.Array.from(n)).length,r={},a=0;a<o;a++)r[n[a]]=i.prototype[n[a]]}l.update(r)}else i=t&&t.xclass?Ext.ClassManager.get(t.xclass):i||Ext.parse.Symbol,s[e]=l=new i(e,t),l.parser=this;return l},addSymbols:function(e,t,i){var n;for(n in e)this.addSymbol(n,e[n],t,i)},applyConstants:function(e){this.addSymbols(e,Ext.parse.symbol.Constant,"nud")},applyInfix:function(e){this.addSymbols(e,Ext.parse.symbol.Infix,"led")},applyInfixRight:function(e){this.addSymbols(e,Ext.parse.symbol.InfixRight,"led")},applyPrefix:function(e){this.addSymbols(e,Ext.parse.symbol.Prefix,"nud")},applySymbols:function(e){this.addSymbols(e)},applyTokenizer:function(e){var t=e;e&&!e.isTokenizer&&(t=new Ext.parse.Tokenizer(e)),this.tokenizer=t}}}}),Ext.define("Ext.app.bind.Parser",{extend:"Ext.parse.Parser",requires:["Ext.util.Format"],infix:{":":{priority:70,dump:function(){var e,t={at:this.at,arity:this.arity,value:this.value,operand:this.operand.dump(),fmt:[]},i=this.fmt;for(e=0;e<i.length;++e)t.fmt.push(i[e].dump());return t},led:function(e){return this.arity="formatter",this.operand=e,this.fmt=this.parser.parseFmt(),this}},"?":{priority:20,led:function(e){var t,i=this.parser,n=i.symbols[":"];return this.condition=e,t=n.priority,n.priority=0,this.tv=i.parseExpression(0),this.parser.advance(":"),n.priority=t,this.fv=i.parseExpression(0),this.arity="ternary",this}}},symbols:{"(":{nud:function(){var e,t,i=this.parser,n=i.symbols[":"];return t=n.priority,n.priority=70,e=i.parseExpression(),i.advance(")"),n.priority=t,e}}},prefix:{"@":0},tokenizer:{operators:{"@":"at","?":"qmark","===":"feq","!==":"fneq","==":"eq","!=":"neq","<":"lt","<=":"lte",">":"gt",">=":"gte","&&":"and","||":"or"}},compileExpression:function(e,t){var i,n,r=this;return r.tokens=e,r.tokensMap=t,(i=(i="@"===r.token.value&&r.tokenizer.peek())&&"debugger"===i.value)&&(r.advance(),r.advance()),n=r.parseSlot(r.parseExpression(),i),r.tokens=r.tokensMap=null,n},compileFormat:function(){var e;try{e=this.parseSlot({arity:"formatter",fmt:this.parseFmt(),operand:{arity:"ident",value:"dummy"}}),this.expect("(end)")}catch(e){Ext.raise('Invalid format expression: "'+this.tokenizer.text+'"')}return e},privates:{useEval:Ext.isGecko,escapeRe:/(["'\\])/g,parseFmt:function(){for(var e,t=[],i=this.symbols[":"].priority;t.length&&this.advance(),(e=this.parseExpression(i)).isIdent||e.isInvoke?t.push(e):this.syntaxError(e.at,"Expected formatter name"),":"===this.token.id;);return t},parseSlot:function(e,t){var i,n,r,o,a,s=[],l=[],d=this.tokens||[];if(this.definitions=s,(this.body=l).push("return "+this.compile(e)+";"),n="var fm = Ext.util.Format,\nme,",a="var a = Ext.Array.from(values);\nme = scope;\n",o=d.length)for(r=0;r<o;r++)n+="v"+r+(r===o-1?";":","),a+="v"+r+" = a["+r+"]; ";else n+="v0;",a+="v0 = a[0];";return s=Ext.Array.insert(s,0,[n]),l=(l=Ext.Array.insert(l,0,[a])).join("\n"),t&&(l="debugger;\n"+l),s.push((this.useEval?"$=":"return")+" function (values, scope) {",l,"}"),n=s.join("\n"),i=this.useEval?this.evalFn(n):new Function("Ext",n)(Ext),this.definitions=this.body=null,i},compile:function(e){var t;switch(e.arity){case"ident":return this.addToken(e.value);case"literal":return"string"==typeof(t=e.value)?'"'+String(t).replace(this.escapeRe,"\\$1")+'"':t;case"unary":return this.compileUnary(e);case"binary":return this.compileBinary(e);case"ternary":return this.compileTernary(e);case"formatter":return this.compileFormatter(e)}return this.syntaxError(e.at,"Compile error! Unknown symbol")},compileUnary:function(e){var t=e.value,i=e.operand;return"!"===t||"-"===t||"+"===t?t+"("+this.compile(i)+")":"@"===t?i.isIdent?i.value:this.syntaxError(e.at,"Compile error! Unexpected symbol"):""},compileBinary:function(e){return"("+this.compile(e.lhs)+" "+e.value+" "+this.compile(e.rhs)+")"},compileTernary:function(e){return"("+this.compile(e.condition)+" ? "+this.compile(e.tv)+" : "+this.compile(e.fv)+")"},compileFormatter:function(e){var t,i=e.fmt,n=i.length,r=["var ret;"];if(i.length)for(r.push("ret = "+this.compileFormatFn(i[0],this.compile(e.operand))+";"),t=1;t<n;t++)r.push("ret = "+this.compileFormatFn(i[t],"ret")+";");return r.push("return ret;"),this.addFn(r.join("\n"))},compileFormatFn:function(e,t){var i,n,r,o=[],a="";if(e.isIdent?i=e.value:e.isInvoke&&(i=e.operand.value,o=e.args),"this."===i.substring(0,5))i="me."+i.substring(5);else{if(!(i in Ext.util.Format))return this.syntaxError(e.at,'Compile error! Invalid format specified "'+i+'"');i="fm."+i}for(a+=t,n=o.length,r=0;r<n;r++)a+=", "+this.compile(o[r]);return i+"("+a+")"},addFn:function(e){var t=this.definitions,i="f"+t.length;return t.push("function "+i+"() {",e,"}"),i+"()"},evalFn:function($){return eval($),$},addToken:function(e){var t=this.tokensMap,i=this.tokens,n=0;return t&&i&&(e in t?n=t[e]:(t[e]=n=i.length,i.push(e))),"v"+n}}}),Ext.define("Ext.app.bind.Template",{requires:["Ext.util.Format","Ext.app.bind.Parser"],escapes:!1,buffer:null,slots:null,tokens:null,constructor:function(e){var t,i=this._initters;for(t in this.text=e,i)this[t]=i[t]},_initters:{apply:function(e,t){return this.parse().apply(e,t)},getTokens:function(){return this.parse().getTokens()}},apply:function(e,t){var i,n,r=this.slots,o=this.buffer,a=r.length;for(i=0;i<a;++i)(n=r[i])&&(o[i]=n(e,t));return n&&this.single?o[0]:o.join("")},getText:function(){return this.buffer.join("")},getTokens:function(){return this.tokens},isStatic:function(){var e=this.getTokens(),t=this.slots;return 0===e.length&&0===t.length},privates:{literalChar:"~",escapeChar:"\\",parse:function(){var e,t,i,n,r,o=this,a=o.text,s=Ext.app.bind.Parser.fly(),l=o.buffer=[],d=o.slots=[],u=a.length,c=0,h=o.escapes,f="",g=0,p=o.escapeChar,m=o.literalChar;for(r in o._initters)delete o[r];for(o.tokens=[],o.tokensMap={};g<u;){if(i=a[g],t=e,e=h&&i===p)i=a[g+1],++g;else{if(i===m&&n===m&&!t){f=f.slice(0,-1),f+=a.substring(g+1);break}if("{"===i){f&&(l[c++]=f,f=""),s.reset(a,g+1),g=o.parseExpression(s,c),++c;continue}}f+=i,++g,n=i}return f&&(l[c]=f),s.release(),o.single=0===l.length&&1===d.length,o},parseExpression:function(e,t){var i;return this.slots[t]=e.compileExpression(this.tokens,this.tokensMap),i=e.token.at+1,e.expect("}"),i}}}),Ext.define("Ext.app.bind.TemplateBinding",{extend:"Ext.app.bind.BaseBinding",requires:["Ext.app.bind.Multi","Ext.app.bind.Template"],isTemplateBinding:!0,lastValue:void 0,value:void 0,constructor:function(e,t,i,n,r){var o=new Ext.app.bind.Template(e),a=o.getTokens();this.callParent([t,i,n,r]),this.tpl=o,(this.tokens=a).$literal=!0,o.isStatic()?(this.isStatic=!0,this.onData(o.getText())):this.multiBinding=new Ext.app.bind.Multi(a,t,this.onBindData,this)},destroy:function(){Ext.destroy(this.multiBinding),this.tpl=this.multiBinding=null,this.callParent()},getFullName:function(){var e=this.multiBinding;return this.fullName||(this.fullName="$"+(e?e.getFullName():this.callParent()))},getRawValue:function(){return this.value},getTemplateScope:function(){return null},isAvailable:function(){var e=this.multiBinding;return!!e&&e.isAvailable()},isDescendantOf:function(){return!1},isLoading:function(){var e=this.multiBinding;return!!e&&e.isLoading()},onBindData:function(e){this.onData(this.tpl.apply(e,this.getTemplateScope()))},onData:function(e){var t=this.value;t!==(this.value=e)&&(this.lastValue=t,this.schedule())},react:function(){this.notify(this.value)},refresh:function(){var e=this.multiBinding;e&&e.refresh()},privates:{sort:function(){var e=this.multiBinding;e&&this.scheduler.sortItem(e)}}}),Ext.define("Ext.data.ChainedStore",{extend:"Ext.data.AbstractStore",alias:"store.chained",mixins:["Ext.data.LocalStore"],isChainedStore:!0,config:{source:null,remoteFilter:!1,remoteSort:!1},syncSourceGrouping:!1,updateRemoteFilter:function(e,t){e&&Ext.raise("Remote filtering cannot be used with chained stores."),this.callParent([e,t])},updateRemoteSort:function(e,t){e&&Ext.raise("Remote sorting cannot be used with chained stores."),this.callParent([e,t])},remove:function(){var e=this.getSource();return e||Ext.raise("Cannot remove records with no source."),e.remove.apply(e,arguments)},removeAll:function(){var e=this.getSource();return e||Ext.raise("Cannot remove records with no source."),e.removeAll()},getData:function(){var e=this.data;return e||(this.data=e=this.constructDataCollection()),e},getTotalCount:function(){return this.getCount()},getSession:function(){return this.getSourceValue("getSession",null)},applySource:function(e){if(e){var t,i=e;(e=Ext.data.StoreManager.lookup(e))||(t="Invalid source {0}specified for Ext.data.ChainedStore",t=Ext.String.format(t,"string"==typeof i?'"'+i+'" ':""),Ext.raise(t))}return e},updateSource:function(e,t){var i=this;t&&!t.destroyed&&t.removeObserver(i),e&&(i.getData().setSource(e.getData()),i.syncSourceGrouping&&i.setGrouper(e.getGrouper()),i.isInitializing||(i.fireEvent("refresh",i),i.fireEvent("datachanged",i)),e.addObserver(i))},getModel:function(){return this.getSourceValue("getModel",null)},getProxy:function(){return null},onCollectionAdd:function(e,t){var i=t.items,n=!t.next;this.ignoreCollectionAdd||(this.activeRanges&&this.syncActiveRanges(),this.fireEvent("add",this,i,t.at),n&&this.fireEvent("datachanged",this))},onCollectionItemChange:function(e,t){var i=t.item,n=t.modified||null,r=t.meta;this.activeRanges&&t.newIndex!==t.oldIndex&&this.syncActiveRanges(),this.onUpdate(i,r,n,t),this.fireEvent("update",this,i,r,n,t),this.fireEvent("datachanged",this)},onCollectionUpdateKey:function(e,t){this.fireEvent("idchanged",this,t.item,t.oldKey,t.newKey)},onUpdate:Ext.emptyFn,lastCollectionRefesh:null,onCollectionRefresh:function(e){var t=e.generation;this.isConfiguring||this.lastCollectionRefesh===t||(this.lastCollectionRefesh=t,this.fireEvent("datachanged",this),this.fireEvent("refresh",this))},onCollectionRemove:function(e,t){var i=t.items,n=!t.next;this.ignoreCollectionRemove||(this.fireEvent("remove",this,i,t.at,!1),n&&this.fireEvent("datachanged",this))},onSourceBeforeLoad:function(e,t){this.fireEvent("beforeload",this,t),this.callObservers("BeforeLoad",[t])},onSourceAfterLoad:function(e,t,i,n){this.fireEvent("load",this,t,i,n),this.callObservers("AfterLoad",[t,i,n])},onFilterEndUpdate:function(){this.getData().generation!==this.lastCollectionRefesh||this.getRemoteFilter()||(this.suppressNextFilter=!0),this.callParent(arguments),this.callObservers("Filter")},onSourceBeforePopulate:function(){this.ignoreCollectionAdd=!0,this.callObservers("BeforePopulate")},onSourceAfterPopulate:function(){this.ignoreCollectionAdd=!1,this.fireEvent("datachanged",this),this.fireEvent("refresh",this),this.callObservers("AfterPopulate")},onSourceBeforeClear:function(){this.ignoreCollectionRemove=!0,this.callObservers("BeforeClear")},onSourceAfterClear:function(){this.ignoreCollectionRemove=!1,this.callObservers("AfterClear")},onSourceBeforeRemoveAll:function(){this.ignoreCollectionRemove=!0,this.callObservers("BeforeRemoveAll")},onSourceAfterRemoveAll:function(e,t){this.ignoreCollectionRemove=!1,t||(this.fireEvent("clear",this),this.fireEvent("datachanged",this)),this.callObservers("AfterRemoveAll",[t])},onSourceFilter:function(){var e=this.getData().generation;this.lastCollectionRefesh!==e&&(this.lastCollectionRefesh=e,this.fireEvent("refresh",this),this.fireEvent("datachanged",this))},onSourceGrouperChange:function(e,t){this.syncSourceGrouping&&this.setGrouper(t)},hasPendingLoad:function(){return this.getSourceValue("hasPendingLoad",!1)},isLoaded:function(){return this.getSourceValue("isLoaded",!1)},isLoading:function(){return this.getSourceValue("isLoading",!1)},doDestroy:function(){this.observers=null,this.setSource(null),this.getData().destroy(!0),this.data=null,this.callParent()},privates:{getSourceValue:function(e,t){var i=this.getSource(),n=t;return i&&!i.destroyed&&(n=i[e]()),n},isMoving:function(){var e=this.getSource();return!!e.isMoving&&e.isMoving.apply(e,arguments)},loadsSynchronously:function(){return this.getSource().loadsSynchronously()}}}),Ext.define("Ext.app.ViewModel",{mixins:["Ext.mixin.Factoryable","Ext.mixin.Identifiable"],requires:["Ext.util.Scheduler","Ext.data.Session","Ext.app.bind.RootStub","Ext.app.bind.LinkStub","Ext.app.bind.Multi","Ext.app.bind.Formula","Ext.app.bind.TemplateBinding","Ext.data.ChainedStore"],alias:"viewmodel.default",isViewModel:!0,factoryConfig:{name:"viewModel"},collectTimeout:100,expressionRe:/^(?:\{(?:(\d+)|([a-z_][\w.]*))\})$/i,statics:{escape:function(e){var t,i=e;if("string"==typeof e)i="~~"+e;else if(e&&e.constructor===Object)for(t in i={},e)i[t]=this.escape(e[t]);return i}},$configStrict:!1,config:{data:!0,formulas:{$value:null,merge:function(e,t,i,n){return this.mergeNew(e,t,i,n)}},links:null,parent:null,root:!0,scheduler:null,schema:"default",session:null,stores:null,view:null},constructor:function(e){this.bindings={},this.initConfig(e)},destroy:function(){var e,t,i,n,r=this,o=r._scheduler,a=r.storeInfo,s=r.getParent(),l=r.collectTask,d=r.children,u=r.bindings;if(r.destroying=!0,l&&(l.cancel(),r.collectTask=null),d)for(e in d)d[e].destroy();if(a)for(e in a)n=(t=a[e]).$binding,((i=t.autoDestroy)||!t.$wasInstance&&!1!==i)&&t.destroy(),Ext.destroy(n);for(e in s&&s.unregisterChild(r),r.getRoot().destroy(),u)u[e].destroy();o&&o.$owner===r&&(o.$owner=null,o.destroy()),r.children=r.storeInfo=r._session=r._view=r._scheduler=r.bindings=r._root=r._parent=r.formulaFn=r.$formulaData=null,r.callParent()},bind:function(e,t,i,n){var r,o=!0;return i=i||this,n||void 0===e.bindTo||Ext.isString(e)||(e=(n=e).bindTo),Ext.isString(e)?this.expressionRe.test(e)?(e=e.substring(1,e.length-1),r=this.bindExpression(e,t,i,n),o=!1):r=new Ext.app.bind.TemplateBinding(e,this,t,i,n):r=new Ext.app.bind.Multi(e,this,t,i,n),o&&(this.bindings[r.id]=r),r},getSession:function(){var e,t=this._session;return!t&&(e=this.getParent())&&this.setSession(t=e.getSession()),t||null},getStore:function(e){var t,i=this.storeInfo;return i&&(t=i[e]),t||null},linkTo:function(e,t){var i,n,r,o,a,s;-1<e.indexOf(".")&&Ext.raise('Links can only be at the top-level: "'+e+'"'),t.isModel&&(t={type:t.entityName,id:t.id}),o=t.type||t.reference,n=t.create,o?(r=t.id,!t.create&&Ext.isEmpty(r)&&Ext.raise('No id specified. To create a phantom model, specify "create: true" as part of the reference.'),n&&(r=void 0),s=this.getRecord(o,r),Ext.isObject(n)&&(s.set(n),s.commit(),s.phantom=!0),(i=this.getRoot().createStubChild(e)).set(s)):((i=this.getStub(e)).isLinkStub||(a=new Ext.app.bind.LinkStub(this,i.name),i.graft(a),i=a),i.link(t))},notify:function(){var e=this.getScheduler();e.firing||e.notify()},get:function(e){return this.getStub(e).getValue()},set:function(e,t){var i,n;this.getData(),void 0===t&&e&&e.constructor===Object?(n=this.getRoot(),t=e):n=e&&e.indexOf(".")<0?((i={})[e]=t,t=i,this.getRoot()):this.getStub(e),n.set(t)},privates:{registerChild:function(e){var t=this.children;t||(this.children=t={}),t[e.getId()]=e},unregisterChild:function(e){var t=this.children;!this.destroying&&t&&delete t[e.getId()]},getRecord:function(e,t){var i,n=this.getSession(),r=e,o=void 0!==t;return n?i=o?n.getRecord(e,t):n.createRecord(e):(r.$isClass||(r=this.getSchema().getEntity(r))||Ext.raise("Invalid model name: "+e),o?(i=r.createWithId(t)).load():i=new r),i},bindExpression:function(e,t,i,n){return this.getStub(e).bind(t,i,n)},applyScheduler:function(e){return e&&!e.isInstance&&(!0===e&&(e={}),"preSort"in e||(e=Ext.apply({preSort:"kind,-depth"},e)),(e=new Ext.util.Scheduler(e)).$owner=this),e},getScheduler:function(){var e,t=this._scheduler;return t||((e=this.getParent())?t=e.getScheduler():(t=new Ext.util.Scheduler({preSort:"kind,-depth"})).$owner=this,this.setScheduler(t)),t},getStub:function(e){var t=this.getRoot();return e?t.getChild(e):t},collect:function(){var e=this.getParent(),t=this.collectTask;e?e.collect():(t=t||(this.collectTask=new Ext.util.DelayedTask(this.doCollect,this)),0===this.collectTimeout?this.doCollect():t.delay(this.collectTimeout))},doCollect:function(){var e,t=this.children;if(t)for(e in t)t[e].doCollect();this.getRoot().collect()},invalidateChildLinks:function(e,t){var i,n=this.children;if(n)for(i in n)n[i].getRoot().invalidateChildLink(e,t)},onBindDestroy:function(e,t){var i;this.destroying||(t||delete this.bindings[e.id],(i=this.getParent())?i.onBindDestroy(e,!0):this.collect())},applyData:function(e,t){var i,n;this.getSession(),t||(n=this.getParent(),this.linkData=i=n?Ext.Object.chain(n.getData()):{},this.data=this._data=Ext.Object.chain(i)),e&&e.constructor===Object&&this.getRoot().set(e,!0)},applyParent:function(e){return e&&e.registerChild(this),e},applyStores:function(e){var t,i,n,r,o=this,a=o.getRoot();for(t in o.storeInfo={},o.listenerScopeFn=function(){return o.getView().getInheritedConfig("defaultListenerScope")},e)(i=e[t]).isStore?(i.$wasInstance=!0,o.setupStore(i,t)):(r=(i=Ext.isString(i)?{source:i}:Ext.apply({},i)).listeners,delete i.listeners,(n=o.bind(i,o.onStoreBind,o,{trackStatics:!0})).isStatic()?(n.destroy(),o.createStore(t,i,r)):(n.$storeKey=t,n.$listeners=r,a.createStubChild(t).setStore(n)))},onStoreBind:function(e,t,i){var n,r=this.storeInfo,o=i.$storeKey,a=r[o];a?(n=(e=Ext.merge({},i.pruneStaticKeys())).proxy,delete e.type,delete e.model,delete e.fields,delete e.proxy,delete e.listeners,n&&(delete n.reader,delete n.writer,a.getProxy().setConfig(n)),a.setConfig(e)):this.createStore(o,e,i.$listeners,i)},createStore:function(e,t,i,n){var r,o=this.getSession();(t=Ext.apply({},t)).session&&(t.session=o),t.source&&(t.type=t.type||"chained"),t.listeners=i,t.resolveListenerScope=this.listenerScopeFn,(r=Ext.Factory.store(t)).$binding=n,this.setupStore(r,e)},setupStore:function(e,t){var i={};this.getData(),e.resolveListenerScope=this.listenerScopeFn,this.storeInfo[t]=e,i[t]=e,this.setData(i)},applyFormulas:function(e){var t,i=this.getRoot();for(t in this.getData(),e)0<=t.indexOf(".")&&Ext.raise("Formula names cannot contain dots: "+t),i.createStubChild(t),this.getStub(t).setFormula(e[t]);return e},applyLinks:function(e){var t;for(t in e)this.linkTo(t,e[t])},applySchema:function(e){return Ext.data.schema.Schema.get(e)},applyRoot:function(){var e=new Ext.app.bind.RootStub(this),t=this.getParent();return t&&(e.depth=t.getRoot().depth-1e3),e},getFormulaFn:function(e){var t=this,i=t.formulaFn;return i=i||(t.formulaFn=function(e){return t.$formulaData[e]}),t.$formulaData=e,i}}}),Ext.define("Ext.app.domain.Controller",{extend:"Ext.app.EventDomain",singleton:!0,requires:["Ext.app.Controller"],type:"controller",prefix:"controller.",idMatchRe:/^#/,constructor:function(){this.callParent(),this.monitor(Ext.app.BaseController)},match:function(e,t){var i=!1,n=e.alias;return"*"===t?i=!0:"#"===t?i=!!e.isApplication:this.idMatchRe.test(t)?i=e.getId()===t.substring(1):n&&(i=-1<Ext.Array.indexOf(n,this.prefix+t)),i}}),Ext.define("Ext.direct.Manager",{singleton:!0,requires:["Ext.util.MixedCollection"],mixins:["Ext.mixin.Observable"],exceptions:{TRANSPORT:"xhr",PARSE:"parse",DATA:"data",LOGIN:"login",SERVER:"exception"},providerClasses:{},remotingMethods:{},config:{varName:"Ext.REMOTING_API"},apiNotFoundError:"Ext Direct API was not found at {0}",constructor:function(){this.mixins.observable.constructor.call(this),this.transactions=new Ext.util.MixedCollection,this.providers=new Ext.util.MixedCollection},addProvider:function(e){var t,i,n=arguments,r=this.relayers||(this.relayers={});if(!(1<n.length))return e.isProvider||(e=Ext.create("direct."+e.type+"provider",e)),this.providers.add(e),e.on("data",this.onProviderData,this),e.relayedEvents&&(r[e.id]=this.relayEvents(e,e.relayedEvents)),e.isConnected()||e.connect(),e;for(t=0,i=n.length;t<i;++t)this.addProvider(n[t])},loadProvider:function(e,t,i){var n,r,o,a,s,l,d=this.providerClasses;if(Ext.isArray(e))for(s=0,l=e.length;s<l;s++)this.loadProvider(e[s],t,i);else{if(n=e.type,r=e.url,d[n]&&d[n].checkConfig(e))return a=this.addProvider(e),this.fireEventArgs("providerload",[r,a]),void Ext.callback(t,i,[r,a]);o=e.varName||this.getVarName(),delete e.varName,r||Ext.raise("Need API discovery URL to load a Remoting provider!"),delete e.url,Ext.Loader.loadScript({url:r,scope:this,onLoad:function(){this.onApiLoadSuccess({url:r,varName:o,config:e,callback:t,scope:i})},onError:function(){this.onApiLoadFailure({url:r,callback:t,scope:i})}})}},getProvider:function(e){return e.isProvider?e:this.providers.get(e)},removeProvider:function(e){var t,i=this.providers,n=this.relayers;return(e=e.isProvider?e:i.get(e))?(e.un("data",this.onProviderData,this),n[t=e.id]&&(n[t].destroy(),delete n[t]),i.remove(e),e):null},addTransaction:function(e){return this.transactions.add(e),e},removeTransaction:function(e){return e=this.getTransaction(e),this.transactions.remove(e),e},getTransaction:function(e){return"object"==typeof e?e:this.transactions.get(e)},onProviderData:function(e,t){var i,n;if(Ext.isArray(t))for(i=0,n=t.length;i<n;++i)this.onProviderData(e,t[i]);else t.name&&"event"!==t.name&&"exception"!==t.name?this.fireEvent(t.name,t):!1===t.status&&this.fireEvent("exception",t),this.fireEvent("event",t,e)},parseMethod:function(e){var t,i,n,r=Ext.global,o=0;if(Ext.isFunction(e))t=e;else if(Ext.isString(e)&&!(t=this.remotingMethods[e])){for(n=(i=e.split(".")).length;r&&o<n;)r=r[i[o]],++o;t=Ext.isFunction(r)?r:null}return t||null},resolveApi:function(e,t){var i,n,r,o,a;for(n in(i=e&&e.prefix)&&"."!==i.substr(i.length-1)&&(i+="."),e)r=e[n],"prefix"!==n&&"function"!=typeof r&&(o=(i||"")+r,"function"==typeof(a=this.parseMethod(o))?e[n]=a:Ext.raise("Cannot resolve Direct API method '"+o+"' for "+n+" action in "+t.$className+" instance with id: "+(null!=t.id?t.id:"unknown")));return e},privates:{addProviderClass:function(e,t){this.providerClasses[e]=t},onApiLoadSuccess:function(options){var me=this,url=options.url,varName=options.varName,api,provider,error;try{api=Ext.apply(options.config,eval(varName)),provider=me.addProvider(api)}catch(e){error=e+""}error?(me.fireEventArgs("providerloaderror",[url,error]),Ext.callback(options.callback,options.scope,[url,error])):(me.fireEventArgs("providerload",[url,provider]),Ext.callback(options.callback,options.scope,[url,provider]))},onApiLoadFailure:function(e){var t,i=e.url;t=Ext.String.format(this.apiNotFoundError,i),this.fireEventArgs("providerloaderror",[i,t]),Ext.callback(e.callback,e.scope,[i,t])},registerMethod:function(e,t){this.remotingMethods[e]=t},clearAllMethods:function(){this.remotingMethods={}}}},function(){Ext.Direct=Ext.direct.Manager}),Ext.define("Ext.direct.Provider",{alias:"direct.provider",mixins:["Ext.mixin.Observable"],requires:["Ext.direct.Manager"],isProvider:!0,$configPrefixed:!1,$configStrict:!1,config:{headers:void 0},subscribers:0,constructor:function(e){this.mixins.observable.constructor.call(this,e),this.requests={},null==this.id&&(this.id=Ext.id(null,"provider-"))},destroy:function(){this.disconnect(!0),this.callParent()},isConnected:function(){return 0<this.subscribers},connect:function(){0===this.subscribers&&(this.doConnect(),this.fireEventArgs("connect",[this])),this.subscribers++},doConnect:Ext.emptyFn,disconnect:function(e){(0<this.subscribers||e)&&(e?this.subscribers=0:this.subscribers--,0===this.subscribers&&(this.doDisconnect(),this.fireEventArgs("disconnect",[this])))},doDisconnect:function(){var e,t=this.requests;for(e in t)t[e].abort();this.requests={}},sendAjaxRequest:function(e){var t=Ext.Ajax.request(e);return t&&t.id&&(this.requests[t.id]=t),t},onData:function(e,t,i){i&&i.request&&delete this.requests[i.request.id]},inheritableStatics:{checkConfig:Ext.returnFalse},onClassExtended:function(e,t,i){t.type&&Ext.direct.Manager.addProviderClass(t.type,e)}}),Ext.define("Ext.app.domain.Direct",{extend:"Ext.app.EventDomain",singleton:!0,requires:["Ext.direct.Provider"],type:"direct",idProperty:"id",constructor:function(){this.callParent(),this.monitor(Ext.direct.Provider)}}),Ext.define("Ext.data.PageMap",{extend:"Ext.util.LruCache",config:{store:null,pageSize:0,rootProperty:""},clear:function(e){this.pageMapGeneration=(this.pageMapGeneration||0)+1,this.indexMap={},this.callParent([e])},updatePageSize:function(e,t){if(null!=t)throw"pageMap page size may not be changed"},forEach:function(e,t){var i,n,r,o,a,s=Ext.Object.getKeys(this.map),l=s.length,d=this.getPageSize();for(r=0;r<l;r++)s[r]=+s[r];for(Ext.Array.sort(s,Ext.Array.numericSortFn),t=t||this,r=0;r<l;r++)for(i=s[r],a=(n=this.getPage(i)).length,o=0;o<a;o++)if(!1===e.call(t,n[o],(i-1)*d+o))return},findBy:function(i,n){var r=null;return n=n||this,this.forEach(function(e,t){if(i.call(n,e,t))return r=e,!1}),r},findIndexBy:function(i,n){var r=-1;return n=n||this,this.forEach(function(e,t){if(i.call(n,e))return r=t,!1}),r},find:function(t,e,i,n,r,o){if(Ext.isEmpty(e,!1))return null;var a=Ext.String.createRegex(e,n,r,o),s=this.getRootProperty();return this.findBy(function(e){return e&&a.test((s?e[s]:e)[t])},null,i)},findIndex:function(t,e,i,n,r,o){if(Ext.isEmpty(e,!1))return null;var a=Ext.String.createRegex(e,n,r,o),s=this.getRootProperty();return this.findIndexBy(function(e){return e&&a.test((s?e[s]:e)[t])},null,i)},getPageFromRecordIndex:function(e){return Math.floor(e/this.getPageSize())+1},addAll:function(e){this.getCount()&&Ext.raise("Cannot addAll to a non-empty PageMap"),this.addPage(1,e)},addPage:function(e,t){var i,n,r,o,a=this.getPageSize(),s=e+Math.floor((t.length-1)/a),l=(e-1)*a,d=this.indexMap;for(o=0;e<=s;e++,o+=a){for(n=0,r=(i=Ext.Array.slice(t,o,o+a)).length;n<r;n++)d[i[n].internalId]=l++;this.add(e,i),this.fireEvent("pageadd",this,e,i)}},getCount:function(){var e=this.callParent();return e=e&&(e-1)*this.getPageSize()+this.last.value.length},getByInternalId:function(e){var t=this.indexMap[e];if(null!=t)return this.getAt(t)},indexOf:function(e){var t=-1;return e&&null==(t=this.indexMap[e.internalId])&&(t=-1),t},insert:function(){Ext.raise("insert operation not suppported into buffered Store")},remove:function(){Ext.raise("remove operation not suppported from buffered Store")},removeAt:function(){Ext.raise("removeAt operation not suppported from buffered Store")},removeAtKey:function(e){var t,i,n,r=this.getPage(e);if(r&&!1!==this.fireEvent("beforepageremove",this,e,r)){for(n=r.length,i=0;i<n;i++)delete this.indexMap[r[i].internalId];t=this.callParent(arguments),this.fireEvent("pageremove",this,e,r),r.length=0}return t},getPage:function(e){return this.get(e)},hasRange:function(e,t){for(var i=this.getPageFromRecordIndex(e),n=this.getPageFromRecordIndex(t);i<=n;i++)if(!this.hasPage(i))return!1;return(n-1)*this._pageSize+this.getPage(n).length>t},hasPage:function(e){return!!this.get(e)},peekPage:function(e){return this.map[e]},getAt:function(e){return this.getRange(e,e+1)[0]},getRange:function(e,t){t&&t--,this.hasRange(e,t)||Ext.raise("PageMap asked for range which it does not have");for(var i,n,r,o=Ext.Array,a=this.getPageSize(),s=this.getPageFromRecordIndex(e),l=this.getPageFromRecordIndex(t),d=(s-1)*a,u=l*a-1,c=s,h=[];c<=l;c++)r=c===s?0<(i=e-d):(i=0,!1),c===l&&(n=a-(u-t),r=r||n<a),r?o.push(h,o.slice(this.getPage(c),i,n)):o.push(h,this.getPage(c));return h}}),Ext.define("Ext.data.BufferedStore",{extend:"Ext.data.ProxyStore",alias:"store.buffered",requires:["Ext.data.PageMap","Ext.util.Filter","Ext.util.Sorter","Ext.util.Grouper"],uses:["Ext.util.SorterCollection","Ext.util.FilterCollection","Ext.util.GroupCollection"],isBufferedStore:!0,buffered:!0,config:{data:0,pageSize:25,remoteSort:!0,remoteFilter:!0,sortOnLoad:!1,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:!1},applyData:function(e){var t=this.data||(this.data=this.createDataCollection());return e&&!0!==e&&Ext.raise("Cannot load a buffered store with local data - the store is a map of remote data"),t},applyProxy:function(e){return(e=this.callParent([e]))&&e.setEnablePaging&&e.setEnablePaging(!0),e},applyAutoSort:function(){},createFiltersCollection:function(){return new Ext.util.FilterCollection},createSortersCollection:function(){return new Ext.util.SorterCollection},updateRemoteFilter:function(e,t){!1===e&&Ext.raise("Buffered stores are always remotely filtered."),this.callParent([e,t])},updateRemoteSort:function(e,t){!1===e&&Ext.raise("Buffered stores are always remotely sorted."),this.callParent([e,t])},updateTrackRemoved:function(e){!1!==e&&Ext.raise("Cannot use trackRemoved with a buffered store."),this.callParent(arguments)},updateGroupField:function(e){this.group(e)},getGrouper:function(){return this.grouper},isGrouped:function(){return!!this.grouper},createDataCollection:function(){var e=new Ext.data.PageMap({store:this,rootProperty:"data",pageSize:this.getPageSize(),maxSize:this.getPurgePageCount(),listeners:{clear:this.onPageMapClear,scope:this}});return this.relayEvents(e,["beforepageremove","pageadd","pageremove"]),this.pageRequests={},e},add:function(){Ext.raise("add method may not be called on a buffered store - the store is a map of remote data")},insert:function(){Ext.raise("insert method may not be called on a buffered store - the store is a map of remote data")},removeAll:function(e){var t=this.getData();t&&(e&&this.suspendEvent("clear"),t.clear(),e&&this.resumeEvent("clear"))},flushLoad:function(){var e=this.pendingLoadOptions;if(this.clearLoadTask(),e)return e.preserveOnFlush||(this.getData().clear(),e.page=1,e.start=0,e.limit=this.getViewSize()||this.getDefaultViewSize()),e.loadCallback=e.callback,e.callback=null,this.loadToPrefetch(e)},reload:function(e){var i,n,t,r,o,a,s,l,d=this,u=d.getData(),c=Number.MAX_VALUE;if(e=e||{},!d.loading&&!1!==d.fireEvent("beforeload",d,e))for(a=function(){var e=d.totalCount,t=n-i;e<=n&&(n=e-1,i=Math.max(n-t,0)),d.rangeCached(i,n,!1)&&(d.loadCount=(d.loadCount||0)+1,d.loading=!1,u.un("pageadd",a),l=u.getRange(i,n),d.fireEvent("refresh",d),d.fireEvent("load",d,l,!0))},s=Math.ceil((d.getLeadingBufferZone()+d.getTrailingBufferZone())/2),d.lastRequestStart&&d.preserveScrollOnReload?(i=d.lastRequestStart,n=d.lastRequestEnd,c=d.getTotalCount()):(i=e.start||0,n=i+(e.count||d.getPageSize())-1),u.clear(!0),delete d.totalCount,i=Math.max(i-s,0),n=Math.min(n+s,c),i=0===i?0:i-1,n=n===c?n:n+1,t=d.getPageFromRecordIndex(i),r=d.getPageFromRecordIndex(n),d.loading=!0,e.waitForReload=a,u.on("pageadd",a),o=t;o<=r;o++)d.prefetchPage(o,e)},filter:function(){this.getRemoteFilter()||Ext.raise("Local filtering may not be used on a buffered store - the store is a map of remote data"),this.callParent(arguments)},filterBy:function(e,t){Ext.raise("Local filtering may not be used on a buffered store - the store is a map of remote data")},loadData:function(e,t){Ext.raise("LoadData may not be used on a buffered store - the store is a map of remote data")},loadPage:function(e,t){return(t=t||{}).page=this.currentPage=e,t.start=(e-1)*this.getPageSize(),t.limit=this.getViewSize()||this.getDefaultViewSize(),t.loadCallback=t.callback,t.callback=null,t.preserveOnFlush=!0,this.load(t)},clearData:function(e){var t=this.getData();t&&t.clear()},getCount:function(){return this.totalCount||0},getRange:function(n,r,o){var a,e,t,s,l,d=this,i=d.totalCount-1,u=d.lastRequestStart,c=[],h=d.getData();return o=Ext.apply({prefetchStart:n,prefetchEnd:r},o),r=r>=d.totalCount?i:r,t=!1!==o.forRender?(e=0===n?0:n-1,r===i?r:r+1):(e=n,r),d.lastRequestStart=n,d.lastRequestEnd=r,d.rangeCached(n,r,o.forRender)?(d.onRangeAvailable(o),c=h.getRange(n,r+1)):(d.fireEvent("cachemiss",d,n,r),s=d.getPageFromRecordIndex(e),l=d.getPageFromRecordIndex(t),a=function(e,t,i){s<=t&&t<=l&&d.rangeCached(n,r)&&(d.fireEvent("cachefilled",d,n,r),h.un("pageadd",a),d.onRangeAvailable(o))},h.on("pageadd",a),d.prefetchRange(n,r)),d.primeCache(n,r,n<u?-1:1),c},getById:function(t){return this.data.findBy(function(e){return e.getId()===t})},getAt:function(e){var t=this.getData();if(t.hasRange(e,e))return t.getAt(e)},getByInternalId:function(e){return this.data.getByInternalId(e)},contains:function(e){return-1<this.indexOf(e)},indexOf:function(e){return this.getData().indexOf(e)},indexOfId:function(e){return this.indexOf(this.getById(e))},group:function(e,t){var i,n=this;e&&"string"==typeof e?(i=n.grouper)&&void 0!==t?i.setDirection(t):n.grouper=new Ext.util.Grouper({property:e,direction:t||"ASC",root:"data"}):n.grouper=e?n.getSorters().decodeSorter(e,Ext.util.Grouper):null,n.getData().clear(),n.loadPage(1,{callback:function(){n.fireEvent("groupchange",n,n.getGrouper())}})},getPageFromRecordIndex:function(e){return Math.floor(e/this.getPageSize())+1},calculatePageCacheSize:function(e){var t=this.getPurgePageCount();return t?Math.max(this.getData().getMaxSize()||0,2*Math.ceil((e+this.getTrailingBufferZone()+this.getLeadingBufferZone())/this.getPageSize())+t):0},loadToPrefetch:function(e){function r(){t=t||[],e.loadCallback&&e.loadCallback.call(e.scope||d,t,l,!0),e.callback&&e.callback.call(e.scope||d,t,i||0,n||0,e)}function o(){d.loadCount=(d.loadCount||0)+1,d.fireEvent("datachanged",d),d.fireEvent("refresh",d),d.fireEvent("load",d,t,!0)}var a,t,s,l,d=this,u=e,i=e.start,n=e.start+e.limit-1,c=d.getViewSize()||e.limit,h=Math.min(n,e.start+c-1),f=d.getPageFromRecordIndex(Math.max(i-d.getTrailingBufferZone(),0)),g=d.getPageFromRecordIndex(n+d.getLeadingBufferZone()),p=d.getData(),m=function(){d.rangeCached(i,h)&&(d.loading=!1,t=p.getRange(i,h+1),p.un("pageadd",m),d.hasListeners.guaranteedrange&&d.guaranteeRange(i,h,e.callback,e.scope),r(),o())};!isNaN(d.pageSize)&&d.pageSize||Ext.raise("Buffered store configured without a pageSize",d),p.setMaxSize(d.calculatePageCacheSize(c)),!1!==d.fireEvent("beforeload",d,e)&&(delete d.totalCount,d.loading=!0,e.callback&&delete(u=Ext.apply({},e)).callback,d.on("prefetch",function(e,t,i,n){if(l=n,i)if(s=d.getTotalCount())for(p.on("pageadd",m),h=Math.min(h,s-1),g=d.getPageFromRecordIndex(Math.min(h+d.getLeadingBufferZone(),s-1)),a=f+1;a<=g;++a)d.prefetchPage(a,u);else r(),o();else d.loading=!1,r(),d.fireEvent("load",d,t,!1)},null,{single:!0}),d.prefetchPage(f,u))},prefetch:function(e){var t,i,n=this,r=n.getPageSize(),o=n.getData();return r?(n.lastPageSize&&r!==n.lastPageSize&&Ext.raise("pageSize cannot be dynamically altered"),o.getPageSize()||o.setPageSize(r)):n.pageSize=o.setPageSize(r=e.limit),n.lastPageSize=r,e.page||(e.page=n.getPageFromRecordIndex(e.start),e.start=(e.page-1)*r,e.limit=Math.ceil(e.limit/r)*r),(i=n.pageRequests[e.page])&&i.getOperation().pageMapGeneration===o.pageMapGeneration||(e=Ext.apply({action:"read",filters:n.getFilters().items,sorters:n.getSorters().items,grouper:n.getGrouper(),internalCallback:n.onProxyPrefetch,internalScope:n},e),(t=n.createOperation("read",e)).pageMapGeneration=o.pageMapGeneration,!1!==n.fireEvent("beforeprefetch",n,t)&&(n.pageRequests[e.page]=t.execute(),n.getProxy().isSynchronous&&delete n.pageRequests[e.page])),n},onPageMapClear:function(){var e,t=this,i=t.wasLoading,n=t.pageRequests,r=t.getData();for(e in r.clearListeners(),r.on("clear",t.onPageMapClear,t),t.relayEvents(r,["beforepageremove","pageadd","pageremove"]),t.loading=!0,t.totalCount=0,n)n.hasOwnProperty(e)&&n[e].getOperation().abort();t.fireEvent("clear",t),t.loading=i},prefetchPage:function(e,t){var i=this.getPageSize(),n=(e-1)*i,r=this.totalCount;void 0!==r&&this.data.getCount()===r||this.prefetch(Ext.applyIf({page:e,start:n,limit:i},t))},onProxyPrefetch:function(e){if(!this.destroying&&!this.destroyed){var t,i,n=this,r=e.getResultSet(),o=e.getRecords(),a=e.wasSuccessful(),s=e.getPage(),l=e.waitForReload,d=n.totalCount,u=n.pageRequests;if(e.pageMapGeneration===n.getData().pageMapGeneration){if(r&&(n.totalCount=r.getTotal(),n.totalCount!==d&&n.fireEvent("totalcountchange",n.totalCount)),void 0!==s&&delete n.pageRequests[s],n.loading=!1,n.fireEvent("prefetch",n,o,a,e),a)if(0===n.totalCount){if(l){for(t in u)(i=u[t].getOperation()).waitForReload===l&&delete i.waitForReload;n.getData().un("pageadd",l),n.fireEvent("refresh",n),n.fireEvent("load",n,[],!0)}}else n.cachePage(o,e.getPage());Ext.callback(e.getCallback(),e.getScope()||n,[o,e,a])}}},cachePage:function(e,t){var i,n=e.length;for(Ext.isDefined(this.totalCount)||(this.totalCount=e.length,this.fireEvent("totalcountchange",this.totalCount)),i=0;i<n;i++)e[i].join(this);this.getData().addPage(t,e)},rangeCached:function(e,t,i){var n=e,r=t;return!1!==i&&(n=0===e?0:e-1,r=t===this.totalCount-1?t:t+1),this.getData().hasRange(n,r)},pageCached:function(e){return this.getData().hasPage(e)},pagePending:function(e){return!!this.pageRequests[e]},rangeSatisfied:function(e,t){return this.rangeCached(e,t)},onRangeAvailable:function(e){var t,i=this.getTotalCount(),n=e.prefetchStart,r=e.prefetchEnd>i-1?i-1:e.prefetchEnd;(r=Math.max(0,r))<n&&Ext.log({level:"warn",msg:"Start ("+n+") was greater than end ("+r+") for the range of records requested ("+n+"-"+e.prefetchEnd+")"+(this.storeId?' from store "'+this.storeId+'"':"")}),t=this.getData().getRange(n,r+1),!1!==e.fireEvent&&this.fireEvent("guaranteedrange",t,n,r,e),e.callback&&e.callback.call(e.scope||this,t,n,r,e)},guaranteeRange:function(e,t,i,n,r){r=Ext.apply({callback:i,scope:n},r),this.getRange(e,t+1,r)},prefetchRange:function(e,t){var i,n,r,o=this.getData();if(!this.rangeCached(e,t))for(i=this.getPageFromRecordIndex(e),n=this.getPageFromRecordIndex(t),o.setMaxSize(this.calculatePageCacheSize(t-e+1)),r=i;r<=n;r++)this.pageCached(r)||this.prefetchPage(r)},primeCache:function(e,t,i){var n=this.getLeadingBufferZone(),r=this.getTrailingBufferZone(),o=this.getPageSize(),a=this.totalCount;t=-1===i?(e=Math.max(e-n,0),Math.min(t+r,a-1)):1===i?(e=Math.max(Math.min(e-r,a-o),0),Math.min(t+n,a-1)):(e=Math.min(Math.max(Math.floor(e-(n+r)/2),0),a-this.pageSize),Math.min(Math.max(Math.ceil(t+(n+r)/2),0),a-1)),this.prefetchRange(e,t)},sort:function(e,t,i){0===arguments.length?this.clearAndLoad():this.getSorters().addSort(e,t,i)},onSorterEndUpdate:function(){var e=this,t=e.getSorters().getRange();t.length?(e.fireEvent("beforesort",e,t),e.clearAndLoad({callback:function(){e.fireEvent("sort",e,t)}})):e.fireEvent("sort",e,t)},clearAndLoad:function(e){this.clearing=!0,this.getData().clear(),this.clearing=!1,this.loadPage(1,e)},privates:{isLast:function(e){return this.indexOf(e)===this.getTotalCount()-1},isMoving:function(){return!1}}}),Ext.define("Ext.data.ClientStore",{extend:"Ext.data.Store",alias:"store.clientstorage",requires:["Ext.data.proxy.Memory"],config:{storage:"local",storageKey:null},trackRemoved:!1,proxy:{type:"memory",clearOnRead:!0},sync:function(t){var i=this,e=i._getKey(),n=i.getStorage(),r=i.getDataSource(),o=i.getProxy(),a=o.getWriter(),s=a.getWriteAllFields(),l=[];try{i.suspendAutoSync(),a.setWriteAllFields(!0),r.each(function(e){e.phantom&&e.setId(i.nextId()),l.push(a.getRecordData(e)),e.commit()}),l.length?(l=JSON.stringify(l),l=n.setItem(e,l)):n.removeItem(e),t&&t.success&&Ext.callback(t.success,t.scope||o,[null,t])}catch(e){t&&t.failure&&Ext.callback(t.failure,t.scope||o,[null,t])}finally{i.resumeAutoSync(),a.setWriteAllFields(s)}return t&&t.callback&&Ext.callback(t.callback,t.scope||o,[null,t]),i},applyStorage:function(e){var t=Ext.global[e+"Storage"];return t&&t.getItem&&t.setItem||Ext.raise('Invalid storage config "'+e+'"; expected "local" or "session"'),t},updateProxy:function(e,t){var i,n=this._getKey(),r=this.getStorage();this.callParent([e,t]),(i=r.getItem(n))&&e.setData(JSON.parse(i))},privates:{_getKey:function(){var e=this.getStorageKey();return e||Ext.raise("ClientStore requires a storageKey"),e},nextId:function(){for(var e=this.getDataSource(),t=1;e.containsKey(t);)++t;return t}}}),Ext.define("Ext.data.proxy.Direct",{extend:"Ext.data.proxy.Server",alternateClassName:"Ext.data.DirectProxy",alias:"proxy.direct",requires:["Ext.direct.Manager"],config:{paramOrder:void 0,paramsAsHash:!0,directFn:void 0,api:void 0,metadata:void 0},paramOrderRe:/[\s,|]/,constructor:function(e){this.callParent([e]),this.canceledOperations={}},applyParamOrder:function(e){return Ext.isString(e)&&(e=e.split(this.paramOrderRe)),e},updateApi:function(){this.methodsResolved=!1},updateDirectFn:function(){this.methodsResolved=!1},resolveMethods:function(){var e,t=this.getDirectFn(),i=this.getApi();t&&(this.setDirectFn(e=Ext.direct.Manager.parseMethod(t)),Ext.isFunction(e)||Ext.raise("Cannot resolve directFn "+t)),i&&(i=Ext.direct.Manager.resolveApi(i,this),this.setApi(i)),this.methodsResolved=!0},doRequest:function(e){var t,i,n,r,o,a,s,l=this;return l.methodsResolved||l.resolveMethods(),n=(i=l.buildRequest(e)).getAction(),(a=l.getApi())&&(s=a[n]),(s=s||l.getDirectFn())&&s.directCfg||Ext.raise({msg:'No Ext Direct function specified for Direct proxy "'+n+'" operation',proxy:l}),!l.paramOrder&&1<s.directCfg.method.len&&Ext.raise({msg:'Incorrect parameters for Direct proxy "'+n+'" operation',proxy:l}),(t=l.getWriter())&&e.allowWrite()&&(i=t.write(i)),r="read"===n?i.getParams():i.getJsonData(),o=s.directCfg.method.getArgs({params:r,allowSingle:t.getAllowSingle(),paramOrder:l.getParamOrder(),paramsAsHash:l.getParamsAsHash(),paramsAsArray:!0,metadata:l.getMetadata(),callback:l.createRequestCallback(i,e),scope:l}),i.setConfig({args:o,directFn:s}),s.apply(window,o),i},abort:function(e){var t;e&&e.isDataRequest&&(e=e.getOperation()),e&&e.isOperation&&(t=e.id),null!=t&&(this.canceledOperations[t]=!0)},applyEncoding:Ext.identityFn,createRequestCallback:function(i,n){var r=this;return function(e,t){r.canceledOperations[n.id]||r.processResponse(t.status,n,i,t),delete r.canceledOperations[n.id]}},extractResponseData:function(e){return Ext.isDefined(e.result)?e.result:e.data},setException:function(e,t){e.setException(t.message)},buildUrl:function(){return""}}),Ext.define("Ext.data.DirectStore",{extend:"Ext.data.Store",alias:"store.direct",requires:["Ext.data.proxy.Direct"],constructor:function(e){var t;(e=Ext.apply({},e)).proxy||(t={type:"direct",reader:{type:"json"}},Ext.copyTo(t,e,"paramOrder,paramsAsHash,directFn,api,simpleSortMode,extraParams"),Ext.copyTo(t.reader,e,"totalProperty,root,rootProperty,idProperty"),e.proxy=t),this.callParent([e])}}),Ext.define("Ext.data.JsonP",{singleton:!0,requestCount:0,requests:{},timeout:3e4,disableCaching:!0,disableCachingParam:"_dc",callbackKey:"callback",request:function(e){(e=Ext.apply({},e)).url||Ext.raise("A url must be specified for a JSONP request.");var t,i,n=this,r=Ext.isDefined(e.disableCaching)?e.disableCaching:n.disableCaching,o=e.disableCachingParam||n.disableCachingParam,a=++n.requestCount,s=e.callbackName||"callback"+a,l=e.callbackKey||n.callbackKey,d=Ext.isDefined(e.timeout)?e.timeout:n.timeout,u=Ext.apply({},e.params),c=e.url,h=Ext.name;return r&&!u[o]&&(u[o]=Ext.Date.now()),(e.params=u)[l]=h+".data.JsonP."+s,i=n.createScript(c,u,e),n.requests[a]=t={url:c,params:u,script:i,id:a,scope:e.scope,success:e.success,failure:e.failure,callback:e.callback,callbackKey:l,callbackName:s},0<d&&(t.timeout=Ext.defer(n.handleTimeout,d,n,[t])),n.setupErrorHandling(t),n[s]=n.bindResponse(t),n.loadScript(t),t},bindResponse:function(t){var i=this;return function(e){Ext.elevate(function(){i.handleResponse(e,t)})}},abort:function(e){var t,i=this.requests;if(e)e.id||(e=i[e]),this.handleAbort(e);else for(t in i)i.hasOwnProperty(t)&&this.abort(i[t])},setupErrorHandling:function(e){e.script.onerror=Ext.bind(this.handleError,this,[e])},handleAbort:function(e){e.errorType="abort",this.handleResponse(null,e)},handleError:function(e){e.errorType="error",this.handleResponse(null,e)},cleanupErrorHandling:function(e){e.script.onerror=null},handleTimeout:function(e){e.errorType="timeout",this.handleResponse(null,e)},handleResponse:function(e,t){var i=!0;Ext.undefer(t.timeout),delete this[t.callbackName],delete this.requests[t.id],this.cleanupErrorHandling(t),Ext.fly(t.script).destroy(),t.errorType?(i=!1,Ext.callback(t.failure,t.scope,[t.errorType])):Ext.callback(t.success,t.scope,[e]),Ext.callback(t.callback,t.scope,[i,e,t.errorType])},createScript:function(e,t,i){var n=document.createElement("script");return n.setAttribute("src",Ext.urlAppend(e,Ext.Object.toQueryString(t))),n.setAttribute("async",!0),n.setAttribute("type","text/javascript"),n},loadScript:function(e){Ext.getHead().appendChild(e.script)}}),Ext.define("Ext.data.proxy.JsonP",{extend:"Ext.data.proxy.Server",alternateClassName:"Ext.data.ScriptTagProxy",alias:["proxy.jsonp","proxy.scripttag"],requires:["Ext.data.JsonP"],config:{callbackKey:"callback",recordParam:"records",autoAppendParams:!0},doRequest:function(e){var t=this.buildRequest(e),i=t.getParams();return t.setConfig({callbackKey:this.callbackKey,timeout:this.timeout,scope:this,disableCaching:!1,callback:this.createRequestCallback(t,e)}),this.getAutoAppendParams()&&t.setParams({}),t.setRawRequest(Ext.data.JsonP.request(t.getCurrentConfig())),t.setParams(i),this.lastRequest=t},createRequestCallback:function(n,r){var o=this;return function(e,t,i){n===o.lastRequest&&(o.lastRequest=null),o.processResponse(e,r,n,t)}},setException:function(e,t){e.setException(e.getRequest().getRawRequest().errorType)},buildUrl:function(e){var t,i,n,r,o,a=this.callParent(arguments),s=e.getRecords(),l=this.getWriter();if(l&&e.getOperation().allowWrite()&&(e=l.write(e)),i=(t=e.getParams()).filters,delete t.filters,i&&i.length)for(r=0;r<i.length;r++)(o=(n=i[r]).getValue())&&(t[n.getProperty()]=o);return!(Ext.isArray(s)&&0<s.length)||l&&l.getEncode()||(t[this.getRecordParam()]=this.encodeRecords(s)),this.getAutoAppendParams()&&(a=Ext.urlAppend(a,Ext.Object.toQueryString(t))),a},abort:function(e){(e=e||this.lastRequest)&&Ext.data.JsonP.abort(e.getRawRequest())},encodeRecords:function(e){for(var t=[],i=0,n=e.length;i<n;i++)t.push(Ext.encode(e[i].getData()));return t}}),Ext.define("Ext.data.JsonPStore",{extend:"Ext.data.Store",alias:"store.jsonp",requires:["Ext.data.proxy.JsonP","Ext.data.reader.Json"],constructor:function(e){e=Ext.apply({proxy:{type:"jsonp",reader:"json"}},e),this.callParent([e])}}),Ext.define("Ext.data.JsonStore",{extend:"Ext.data.Store",alias:"store.json",requires:["Ext.data.proxy.Ajax","Ext.data.reader.Json","Ext.data.writer.Json"],constructor:function(e){e=Ext.apply({proxy:{type:"ajax",reader:"json",writer:"json"}},e),this.callParent([e])}}),Ext.define("Ext.data.ModelManager",{alternateClassName:"Ext.ModelMgr",requires:["Ext.data.schema.Schema"],singleton:!0,deprecated:{5:{methods:{clear:null,create:function(e,t,i){var n=t;return n.isEntity||(n=this.getModel(t||e.name)),n.createWithId(i,e)},each:function(e,t){Ext.data.Model.schema.eachEntity(e,t)},get:function(e){return this.getModel(e)},getCount:function(){return Ext.data.Model.schema.entityCount},getModel:function(e){return Ext.data.schema.Schema.lookupEntity(e)},isRegistered:function(e){return!!this.getModel(e)}}}}}),Ext.define("Ext.data.NodeInterface",{requires:["Ext.data.field.Boolean","Ext.data.field.Integer","Ext.data.field.String","Ext.data.writer.Json","Ext.mixin.Observable"],statics:{decorate:function(e){var t,i,n,r=Ext.data.schema.Schema.lookupEntity(e),o=r.prototype;r.prototype.isObservable||r.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable),o.isNode||(t=o.idProperty,n=(i=r.getField(t)).type,r.override(this.getPrototypeBody()),r.addFields([{name:"parentId",type:n,defaultValue:null,allowNull:i.allowNull},{name:"index",type:"int",defaultValue:-1,persist:!1,convert:null},{name:"depth",type:"int",defaultValue:0,persist:!1,convert:null},{name:"expanded",type:"bool",defaultValue:!1,persist:!1,convert:null},{name:"expandable",type:"bool",defaultValue:!0,persist:!1,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"leaf",type:"bool",defaultValue:!1},{name:"cls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"icon",type:"string",defaultValue:"",persist:!1,convert:null},{name:"glyph",type:"string",defaultValue:"",persist:!1,convert:null},{name:"root",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isLast",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isFirst",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"allowDrop",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"allowDrag",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"loaded",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"loading",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"href",type:"string",defaultValue:"",persist:!1,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:!1,convert:null},{name:"children",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"visible",type:"boolean",defaultValue:!0,persist:!1},{name:"text",type:"string",persist:!1}]))},getPrototypeBody:function(){var o={idchanged:!0,append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0,expand:!0,collapse:!0,beforeexpand:!0,beforecollapse:!0,sort:!0},f={silent:!0};return{isNode:!0,firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,constructor:function(){return this.mixins.observable.constructor.call(this),this.callParent(arguments),this.childNodes=[],this},createNode:function(e){var t,i,n,r,o,a,s=this.childType,l=this.self;return e.isModel||(s?l=this.schema.getEntity(s):(i=(t=this.getTreeStore())&&t.getProxy().getReader(),r=(n=this.getProxy())?n.getReader():null,(o=!i||r&&r.initialConfig.typeProperty?r:i)&&(a=o.getTypeProperty())&&(l=o.getChildType(this.schema,e,a))),e=new l(e)),e.childNodes||(e.firstChild=e.lastChild=e.parentNode=e.previousSibling=e.nextSibling=null,e.childNodes=[]),e},isLeaf:function(){return!0===this.get("leaf")},setFirstChild:function(e){this.firstChild=e},setLastChild:function(e){this.lastChild=e},updateInfo:function(e,t){var i,n,r,o,a,s=this.phantom;if(e={silent:!0,commit:e},null!=t.depth&&t.depth!==this.data.depth)for(n={depth:t.depth+1},o=(r=this.childNodes).length,a=0;a<o;a++)r[a].updateInfo(e,n);return i=this.set(t,e),this.phantom=s,i},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return!this.isLeaf()&&0<this.childNodes.length},isExpandable:function(){return!!this.get("expandable")&&!(this.isLeaf()||this.isLoaded()&&!this.phantom&&!this.hasChildNodes())},triggerUIUpdate:function(){this.callJoined("afterEdit",[])},appendChild:function(e,t,i){var n,r,o,a,s,l,d,u=this,c=u.getTreeStore(),h=c&&c.bulkUpdate,f={isLast:!0,parentId:u.getId(),depth:(u.data.depth||0)+1};if(Ext.suspendLayouts(),Ext.isArray(e)){for(d=e.length,s=new Array(d),u.callTreeStore("beginFill"),l=0;l<d;l++)s[l]=u.appendChild(e[l],t,i);u.callTreeStore("endFill",[s])}else{if(e=u.createNode(e),!0!==t&&!1===u.fireBubbledEvent("beforeappend",[u,e]))return Ext.resumeLayouts(!0),!1;if(a=u.childNodes.length,n=e.parentNode){if(!0!==t&&!1===e.fireBubbledEvent("beforemove",[e,n,u,a]))return Ext.resumeLayouts(!0),!1;if(!1===n.removeChild(e,!1,t,n.getTreeStore()===c))return Ext.resumeLayouts(!0),!1}c&&c.beginUpdate(),0===(a=u.childNodes.length)&&u.setFirstChild(e),(u.childNodes[a]=e).parentNode=u,e.nextSibling=null,u.setLastChild(e),(r=u.childNodes[a-1])?((e.previousSibling=r).nextSibling=e,r.updateInfo(i,{isLast:!1}),h||r.triggerUIUpdate()):e.previousSibling=null,f.isFirst=0===a,f.index=a,o=e.updateInfo(i,f),u.isLeaf()&&u.set("leaf",!1),u.isLoaded()?1!==u.childNodes.length||h||u.triggerUIUpdate():h?u.data.loaded=!0:u.set("loaded",!0),a&&u.childNodes[a-1].isExpanded()&&!h&&u.childNodes[a-1].cascade(u.triggerUIUpdate),c&&(c.registerNode(u,!h),h&&c.registerNode(e)),!0!==t&&(u.fireBubbledEvent("append",[u,e,a]),n&&e.fireBubbledEvent("move",[e,n,u,a])),u.callTreeStore("onNodeAppend",[e,a]),o&&e.callJoined("afterEdit",[o]),s=e,c&&c.endUpdate()}return Ext.resumeLayouts(!0),s},getOwnerTree:function(){var e=this.getTreeStore();return e&&e.ownerTree},getTreeStore:function(){for(var e=this;e&&!e.treeStore;)e=e.parentNode;return e&&e.treeStore},removeChild:function(e,t,i,n){var r,o,a,s,l=this,d=l.indexOf(e),u=l.getTreeStore(),c=u&&u.bulkUpdate,h=[];if(-1===d||!0!==i&&!1===l.fireBubbledEvent("beforeremove",[l,e,!!n]))return!1;if(Ext.suspendLayouts(),u&&u.beginUpdate(),Ext.Array.erase(l.childNodes,d,1),l.firstChild===e&&l.setFirstChild(e.nextSibling),l.lastChild===e&&l.setLastChild(e.previousSibling),(a=e.previousSibling)&&(e.previousSibling.nextSibling=e.nextSibling),e.nextSibling)for(e.nextSibling.previousSibling=e.previousSibling,0===d&&e.nextSibling.updateInfo(!1,{isFirst:!0}),r=d,o=l.childNodes.length;r<o;r++)l.childNodes[r].updateInfo(!1,{index:r});else a&&(a.updateInfo(!1,{isLast:!0}),c||(a.isExpanded()?a.cascade(l.triggerUIUpdate):a.triggerUIUpdate()));return l.childNodes.length||c||l.triggerUIUpdate(),Ext.resumeLayouts(!0),!0!==i&&(s={parentNode:e.parentNode,previousSibling:e.previousSibling,nextSibling:e.nextSibling},l.callTreeStore("beforeNodeRemove",[[e],!!n,h]),e.previousSibling=e.nextSibling=e.parentNode=null,l.fireBubbledEvent("remove",[l,e,!!n,s]),l.callTreeStore("onNodeRemove",[[e],!!n,h])),t?e.erase(!0):e.clear(),n||e.set({parentId:null,lastParentId:l.getId()},f),u&&u.endUpdate(),e},copy:function(e,t,i){var n,r,o=[e],a=this.childNodes?this.childNodes.length:0;if(t&&t.isSession?o.push(t):arguments.length<3&&(i=t),n=this.callParent(o),i)for(r=0;r<a;r++)n.appendChild(this.childNodes[r].copy(void 0,!0));return n},clear:function(e,t){var i=this;i.parentNode=i.previousSibling=i.nextSibling=null,e&&(i.firstChild=i.lastChild=i.childNodes=null),t&&(i.firstChild=i.lastChild=null,i.childNodes.length=0,i.data&&(i.data.children=null))},drop:function(){var e,t,i,n=this.childNodes,r=this.parentNode,o=this.getTreeStore();for(this.callParent(),r?r.removeChild(this):this.get("root")&&o.setRoot(null),o&&o.beginUpdate(),t=0,i=n?n.length:0;t<i;t++)(e=n[t]).clear(),e.drop();o&&o.endUpdate()},erase:function(e){var t,i,n=this.childNodes,r=n&&n.length;for(this.remove(),this.clear(!0),this.callParent([e]),t=0;t<r;t++)(i=n[t]).parentNode=null,i.erase(e)},insertBefore:function(e,t,i){var n,r,o,a,s,l,d=this,u=d.indexOf(t),c=e.parentNode,h=u,f=d.getTreeStore(),g=f&&f.bulkUpdate;if(!t)return d.appendChild(e);if(e===t)return!1;if(e=d.createNode(e),!0!==i&&!1===d.fireBubbledEvent("beforeinsert",[d,e,t]))return!1;if(c===d&&d.indexOf(e)<u&&h--,c){if(!0!==i&&!1===e.fireBubbledEvent("beforemove",[e,c,d,u,t]))return!1;if(!1===c.removeChild(e,!1,i,c.getTreeStore()===f))return!1}for(f&&f.beginUpdate(),0===h&&d.setFirstChild(e),Ext.Array.splice(d.childNodes,h,0,e),e.parentNode=d,(e.nextSibling=t).previousSibling=e,(r=d.childNodes[h-1])?(e.previousSibling=r).nextSibling=e:e.previousSibling=null,a=e.updateInfo(!1,{parentId:d.getId(),index:h,isFirst:0===h,isLast:!1,depth:(d.data.depth||0)+1}),o=h+1,n=d.childNodes.length;o<n;o++)(l=(s=d.childNodes[o]).updateInfo(!1,{index:o}))&&s.callJoined("afterEdit",[l]);return d.isLoaded()?1!==d.childNodes.length||g||d.triggerUIUpdate():g?d.data.loaded=!0:d.set("loaded",!0),f&&f.registerNode(d,!g),!0!==i&&(d.fireBubbledEvent("insert",[d,e,t]),c&&e.fireBubbledEvent("move",[e,c,d,h,t])),d.callTreeStore("onNodeInsert",[e,h]),a&&e.callJoined("afterEdit",[a]),f&&f.endUpdate(),e},insertChild:function(e,t){var i=this.childNodes[e];return i?this.insertBefore(t,i):this.appendChild(t)},isLastVisible:function(){var e=this.data.isLast,t=this.nextSibling;if(e||!this.getTreeStore().isFiltered())return e;for(;t;){if(t.data.visible)return!1;t=t.nextSibling}return!0},remove:function(e,t){var i=this.parentNode;return i?i.removeChild(this,e,t):e&&this.erase(!0),this},removeAll:function(e,t,i){var n,r,o,a=this,s=a.childNodes,l=s.length,d=[];if(!l)return a;for(i||(r=a.getTreeStore())&&(r.beginUpdate(),r.suspendEvent("remove"),a.callTreeStore("beforeNodeRemove",[s,!1,d])),o=0;o<l;++o)(n=s[o]).previousSibling=n.nextSibling=n.parentNode=null,a.fireBubbledEvent("remove",[a,n,!1]),e?n.erase(!0):n.removeAll(!1,t,!0);return!i&&r&&(r.resumeEvent("remove"),a.callTreeStore("onNodeRemove",[s,!1,d]),r.endUpdate()),a.firstChild=a.lastChild=null,s.length=0,i||a.triggerUIUpdate(),a},getChildAt:function(e){return this.childNodes[e]},replaceChild:function(e,t,i){var n=t?t.nextSibling:null;return this.removeChild(t,!1,i),this.insertBefore(e,n,i),t},indexOf:function(e){return Ext.Array.indexOf(this.childNodes,e)},indexOfId:function(e){for(var t=this.childNodes,i=t.length,n=0;n<i;++n)if(t[n].getId()===e)return n;return-1},getPath:function(e,t){e=e||this.idProperty,t=t||"/";for(var i=[this.get(e)],n=this.parentNode;n;)i.unshift(n.get(e)),n=n.parentNode;return t+i.join(t)},getDepth:function(){return this.get("depth")},bubble:function(e,t,i){for(var n=this;n&&!1!==e.apply(t||n,i||[n]);)n=n.parentNode},cascade:function(e,t,i,n){var r,o,a,s=e;if(1!==arguments.length||Ext.isFunction(e)||(n=e.after,t=e.scope,i=e.args,s=e.before),!s||!1!==s.apply(t||this,i||[this])){for(a=0,o=(r=this.childNodes).length;a<o;a++)r[a].cascade.call(r[a],s,t,i,n);n&&n.apply(t||this,i||[this])}},cascadeBy:function(){return this.cascade.apply(this,arguments)},eachChild:function(e,t,i){var n,r=this.childNodes,o=r.length;for(n=0;n<o&&!1!==e.apply(t||this,i||[r[n]]);n++);},findChild:function(e,t,i){return this.findChildBy(function(){return this.get(e)==t},null,i)},findChildBy:function(e,t,i){var n,r,o,a,s=this.childNodes;for(n=0,r=s.length;n<r;n++){if(o=s[n],!0===e.call(t||o,o))return o;if(i&&null!==(a=o.findChildBy(e,t,i)))return a}return null},contains:function(e){return e.isAncestor(this)},isAncestor:function(e){for(var t=this.parentNode;t;){if(t===e)return!0;t=t.parentNode}return!1},sort:function(e,t,i){var n,r,o=this.childNodes,a=o.length,s={isFirst:!0};if(0<a){for(e=e||this.getTreeStore().getSortFn(),Ext.Array.sort(o,e),this.setFirstChild(o[0]),this.setLastChild(o[a-1]),n=0;n<a;n++)(r=o[n]).previousSibling=o[n-1],r.nextSibling=o[n+1],s.isLast=n===a-1,s.index=n,r.updateInfo(!1,s),s.isFirst=!1,t&&!r.isLeaf()&&r.sort(e,!0,!0);!0!==i&&(this.fireBubbledEvent("sort",[this,o]),this.callTreeStore("onNodeSort",[o]))}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isBranchLoaded:function(){var t=!this.isLeaf()&&this.isLoaded();return t&&this.cascade(function(e){return e.isLeaf()||(t=t||e.isBranchLoaded()),t}),t},isLoading:function(){return this.get("loading")},isRoot:function(){return!this.parentNode},isVisible:function(){for(var e=this.parentNode;e;){if(!e.isExpanded())return!1;e=e.parentNode}return!0},expand:function(e,t,i){var n,r,o=this;o.isLeaf()?Ext.callback(t,i||o):o.isLoading()?o.on("expand",function(){o.expand(e,t,i)},o,{single:!0}):o.isExpanded()?e?o.expandChildren(!0,t,i):Ext.callback(t,i||o,[o.childNodes]):!1!==o.fireBubbledEvent("beforeexpand",[o])&&(e&&(o.parentNode&&o.parentNode.isSynchronousRecursiveExpand?o.isSynchronousRecursiveExpand=!0:((n=o.getTreeStore()).getProxy().isSynchronous||o.isBranchLoaded())&&(o.isSynchronousRecursiveExpand=!0,n.suspendEvent("add","datachanged"),r=!0)),o.callTreeStore("onBeforeNodeExpand",[o.onChildNodesAvailable,o,[e,t,i]]),r&&(n.resumeEvent("add","datachanged"),n.fireEvent("datachanged",n),n.fireEvent("refresh",n)),o.isSynchronousRecursiveExpand=!1)},onChildNodesAvailable:function(e,t,i,n){var r,o,a,s=this,l=s.getTreeStore(),d=l&&l.bulkUpdate;for(Ext.suspendLayouts(),r=s.parentNode;r;r=r.parentNode)r.isExpanded()||(o=o||[]).unshift(r);if(d||!l.isVisible(s)?s.data.expanded=!0:s.set("expanded",!0),o){for(a=1;a<o.length;a++)r=o[a],d||!l.isVisible(r)?r.data.expanded=!0:r.set("expanded",!0);for(o[0].expand(),a=1;a<o.length;a++)(r=o[a]).fireBubbledEvent("expand",[r,r.childNodes])}else s.callTreeStore("onNodeExpand",[e,!1]);s.fireBubbledEvent("expand",[s,e]),t?s.expandChildren(!0,i,n):Ext.callback(i,n||s,[s.childNodes]),Ext.resumeLayouts(!0)},expandChildren:function(e,t,i,n){var r,o,a,s,l,d,u;for(Ext.isBoolean(t)&&(r=t,t=i,i=n,n=r),void 0===n&&(n=(u=this.getTreeStore())&&u.singleExpand),a=this.childNodes,s=[],l=n?Math.min(a.length,1):a.length,o=0;o<l;++o)(d=a[o]).isLeaf()||(s[s.length]=d);for(l=s.length,o=0;o<l;++o)s[o].expand(e);t&&Ext.callback(t,i||this,[this.childNodes])},collapse:function(e,t,i){var n,r,o=this,a=o.isExpanded(),s=o.getTreeStore(),l=s&&s.bulkUpdate,d=o.childNodes.length;if(!o.isLeaf()&&(!a&&e||!1!==o.fireBubbledEvent("beforecollapse",[o]))){if(Ext.suspendLayouts(),o.isExpanded())t=e?(r=function(){for(n=0;n<d;n++)o.childNodes[n].setCollapsed(!0)},t?Ext.Function.createSequence(r,Ext.Function.bind(t,i,[o.childNodes])):r):t&&Ext.Function.bind(t,i,[o.childNodes]),l||!s.contains(o)?o.data.expanded=!1:o.set("expanded",!1),o.callTreeStore("onNodeCollapse",[o.childNodes,t,i]),o.fireBubbledEvent("collapse",[o,o.childNodes]),t=null;else if(e)for(n=0;n<d;n++)o.childNodes[n].setCollapsed(!0);Ext.resumeLayouts(!0)}Ext.callback(t,i||o,[o.childNodes])},setCollapsed:function(e){var t,i=this.childNodes.length;if(!this.isLeaf()&&!1!==this.fireBubbledEvent("beforecollapse",[this])&&(this.data.expanded=!1,this.fireBubbledEvent("collapse",[this,this.childNodes]),e))for(t=0;t<i;t++)this.childNodes[t].setCollapsed(!0)},collapseChildren:function(e,t,i){var n,r,o=this.childNodes,a=o.length,s=[];for(r=0;r<a;++r)!(n=o[r]).isLeaf()&&n.isLoaded()&&n.isExpanded()&&s.push(n);if(a=s.length)for(r=0;r<a;++r)n=s[r],r===a-1?n.collapse(e,t,i):n.collapse(e);else Ext.callback(t,i)},fireEvent:function(e){return this.fireBubbledEvent(e,Ext.Array.slice(arguments,1))},fireBubbledEvent:function(e,t){var i,n,r;if(o[e]){for(n=this;!1!==i&&n;n=(r=n).parentNode)i=n.fireEventArgs.call(n,e,t);return!1!==i&&(n=r.getTreeStore())&&n.hasListeners&&n.hasListeners[e="node"+e]&&(i=n.fireEventArgs(e,t)),i}return this.fireEventArgs.apply(this,arguments)},serialize:function(e){var t,i,n=e||new Ext.data.writer.Json({writeAllFields:!0}),r=n.getRecordData(this),o=this.childNodes,a=o.length;if(0<a)for(r.children=t=[],i=0;i<a;i++)t.push(o[i].serialize(n));return r},callTreeStore:function(e,t){var i=this.getTreeStore(),n=i&&i[e];i&&n&&((t=t||[])[0]!==this&&t.unshift(this),n.apply(i,t))},addCls:function(e){this.replaceCls(null,e)},removeCls:function(e){this.replaceCls(e)},replaceCls:function(e,t){var i=this._parseCls(this.data.cls),n=this._parseCls(e);n.length&&(i=Ext.Array.difference(i,n)),(n=this._parseCls(t)).length&&(i=Ext.Array.unique(i.concat(n))),this.set("cls",i.join(" "))},toggleCls:function(e,t){var i,n,r,o,a;if(void 0===t){for(i=this._parseCls(this.data.cls),o=0,r=(n=this._parseCls(e)).length;o<r;++o)a=n[o],Ext.Array.contains(i,a)?Ext.Array.remove(i,a):i.push(a);this.set("cls",i.join(" "))}else t?this.addCls(e):this.removeCls(e)},privates:{_noCls:[],spacesRe:/\s+/,join:function(e){e.isTreeStore?this.isRoot()&&(this.treeStore=this.store=e):this.callParent([e])},callJoined:function(e,t){this.callParent([e,t]),this.callTreeStore(e,t)},_parseCls:function(e){return e?"string"==typeof e?e.split(this.spacesRe):e:this._noCls}}}}}}),Ext.define("Ext.mixin.Queryable",{mixinId:"queryable",isQueryable:!0,query:function(e){return e=e||"*",Ext.ComponentQuery.query(e,this.getQueryRoot())},queryBy:function(e,t){for(var i,n=[],r=this.getQueryRoot().getRefItems(!0),o=0,a=r.length;o<a;++o)i=r[o],!1!==e.call(t||i,i)&&n.push(i);return n},queryById:function(e){return this.down(Ext.makeIdSelector(e))},child:function(e){var t=this.getQueryRoot().getRefItems();return e&&e.isComponent?this.matchById(t,e.getItemId()):(e&&(t=Ext.ComponentQuery.query(e,t)),t.length?t[0]:null)},down:function(e){return e&&e.isComponent?this.matchById(this.getRefItems(!0),e.getItemId()):(e=e||"",this.query(e)[0]||null)},visitPreOrder:function(e,t,i,n){Ext.ComponentQuery._visit(!0,e,this.getQueryRoot(),t,i,n)},visitPostOrder:function(e,t,i,n){Ext.ComponentQuery._visit(!1,e,this.getQueryRoot(),t,i,n)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(e,t){var i,n,r=e.length;for(i=0;i<r;++i)if((n=e[i]).getItemId()===t)return n;return null}}}),Ext.define("Ext.data.TreeModel",{extend:"Ext.data.Model",requires:["Ext.data.NodeInterface"],mixins:["Ext.mixin.Queryable"],getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode},statics:{defaultProxy:"memory"}},function(){Ext.data.NodeInterface.decorate(this)}),Ext.define("Ext.data.NodeStore",{extend:"Ext.data.Store",alias:"store.node",requires:["Ext.data.TreeModel","Ext.data.NodeInterface"],isNodeStore:!0,config:{node:null,recursive:!1,rootVisible:!1,folderSort:!1},implicitModel:"Ext.data.TreeModel",getTotalCount:function(){return this.getCount()},updateFolderSort:function(e){var t=this.getData();t.setTrackGroups(!1),e?t.setGrouper({groupFn:this.folderSortFn}):t.setGrouper(null)},folderSortFn:function(e){return e.data.leaf?1:0},afterReject:function(e){this.contains(e)&&(this.onUpdate(e,Ext.data.Model.REJECT,null),this.fireEvent("update",this,e,Ext.data.Model.REJECT,null))},afterCommit:function(e,t){t=t||null,this.contains(e)&&(this.onUpdate(e,Ext.data.Model.COMMIT,t),this.fireEvent("update",this,e,Ext.data.Model.COMMIT,t))},onNodeAppend:function(e,t){e===this.getNode()&&this.add([t].concat(this.retrieveChildNodes(t)))},onNodeInsert:function(e,t,i){e===this.getNode()&&this.insert(0,[t].concat(this.retrieveChildNodes(t)))},onNodeRemove:function(e,t){e===this.getNode()&&this.remove([t].concat(this.retrieveChildNodes(t)))},onNodeExpand:function(e,t){e===this.getNode()&&this.loadRecords(t)},applyNode:function(e){return e&&(e.isModel||(e=new(this.getModel())(e)),e.isNode||Ext.data.NodeInterface.decorate(e)),e},updateNode:function(e,t){var i,n=this;t&&!t.destroyed&&(t.un({append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove",scope:n}),t.unjoin(n)),e&&(e.on({scope:n,append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove"}),e.join(n),i=[],e.childNodes.length&&(i=i.concat(n.retrieveChildNodes(e))),n.getRootVisible()?i.push(e):(e.isLoaded()||e.isLoading())&&e.set("expanded",!0),n.getData().clear(),n.fireEvent("clear",n),n.suspendEvents(),n.isInitializing?n.inlineData=i:n.add(i),n.resumeEvents(),0===i.length&&(n.loaded=e.loaded=!0),n.fireEvent("refresh",n,n.data))},isVisible:function(e){var t=e.parentNode;if(!this.getRecursive()&&t!==this.getNode())return!1;for(;t;){if(!t.isExpanded())return!1;if(t===this.getNode())break;t=t.parentNode}return!0},privates:{retrieveChildNodes:function(e){var t=this.getNode(),i=this.getRecursive(),n=[],r=e;if(!e.childNodes.length||!i&&e!==t)return n;if(!i)return e.childNodes;for(;r;)if(r._added){if(delete r._added,r===e)break;r=r.nextSibling||r.parentNode}else r!==e&&n.push(r),r=r.firstChild?(r._added=!0,r.firstChild):r.nextSibling||r.parentNode;return n}}}),Ext.define("Ext.data.query.Compiler",{compile:function(){var e,t,i,n=this,r=n.ast;if(n.error=null,r){e=["return function (item) {","\tvar rec = item.isEntity && item;","\treturn "],i=[],(n.query=n).assemble(e,i,"\t",r),e.push("}"),e=i.concat(e).join("\n");try{t=new Function("Ext","O","F",e),n.fn=t(Ext,n.operators,n.getFunctions()),n.fn.generation=n.generation}catch(e){throw(n.error=e).message="Failed to compile: "+e.message,e}finally{n.query=null}}else n.fn=Ext.returnTrue},privates:{asmOps:{">":"gt","<":"lt","==":"eq",">=":"ge","<=":"le","!=":"ne"},assemblers:{binary:function(e,t,i,n,r,o,a){var s,l=e.operatorTypeMap[r.type][1],d=e.asmOps[l],u=r.on,c="";for(d?(t[o]+="O."+d+"(",l=", ",c=")"):l=" "+l+" ",t[o]+="(",s=0;s<u.length;++s)s&&t.push(n+")"+l+"("),t.push(a),e.assemble(t,i,a,u[s]);t.push(n+")"+c)},between:function(e,t,i,n,r,o,a){var s,l=r.on;for(t[o]+="O.between(",s=0;s<3;++s)s&&(t[o=t.length-1]+=", "),e.assemble(t,i,a,l[s]);t.push(n+")")},fn:function(e,t,i,n,r,o,a){var s,l,d=r.fn.toLowerCase(),u=e.query.getFunctions();for(u[d]||Ext.raise('Unsupported function "'+r.fn+'"'),(u=u[d]).vargs?t[o]+="F."+d+".fn([":t[o]+="F."+d+".fn(",s=r.args,l=0;l<s.length;++l)l&&(t[o=t.length-1]+=", "),t.push(a),e.assemble(t,i,a,s[l]);u.vargs?t.push(n+"])"):t.push(n+")")},id:function(e,t,i,n,r,o,a){var s=r.value,l=s.split(".");1===l.length?t[o]+="rec ? rec.interpret("+Ext.JSON.encode(s)+") : item."+s:(s="p"+i.length,i.push("var "+s+" = "+Ext.JSON.encode(l)+";"),t[o]+="O.dots(item, "+s+")")},in:function(e,t,i,n,r,o,a){var s=r.on;t[o]+="O.in(",e.assemble(t,i,a,s[0]),t[o=t.length-1]+=", ",e.assemble(t,i,a,s[1]),t.push(n+")")},like:function(e,t,i,n,r,o,a){var s,l=r.on;t[o]+="O.like(",e.assemble(t,i,a,l[0]),t[o=t.length-1]+=", ",(s=l[1]).re&&(s={type:"regexp",value:s.re,flags:s.flags}),e.assemble(t,i,a,s),t[o=t.length-1]+=") "},list:function(e,t,i,n,r,o,a){t[o]+="[";for(var s=0,l=r.value;s<l.length;++s)s&&(t[o=t.length-1]+=", "),t.push(a),e.assemble(t,i,a,l[s]);t.push(n+"]")},string:"regexp",regexp:function(e,t,i,n,r,o){var a="re"+i.length;i.push("var "+a+" = /"+(r.re||r.value)+"/"+(r.flags||"")+";"),t[o]+=a},unary:function(e,t,i,n,r,o,a){var s=e.operatorTypeMap[r.type][1],l=r.on;t[o]+=s+"(",t.push(a),e.assemble(t,i,a,l),t.push(n+")")}},operators:{between:function(e,t,i){return t<=e&&e<=i},dots:function(e,t){var i,n;if(e.isEntity)for(n=e,i=0;i<t.length;++i){if(!n||!n.interpret){n=void 0;break}n=n.interpret(t[i])}else for(n=e,i=0;i<t.length;++i){if(!n){n=void 0;break}n=n[t[i]]}return n},in:function(e,t){return Ext.Array.contains(t,e)},like:function(e,t){return e=String(e),"string"==typeof t?!!e&&-1<e.toLowerCase().indexOf(t.toLowerCase()):t.test(e)},eq:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?!Ext.Date.compare(e,t):e==t},ge:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?0<=Ext.Date.compare(e,t):t<=e},gt:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?0<Ext.Date.compare(e,t):t<e},le:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?Ext.Date.compare(e,t)<=0:e<=t},lt:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?Ext.Date.compare(e,t)<0:e<t},ne:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?!!Ext.Date.compare(e,t):e!=t}},assemble:function(e,t,i,n){var r,o,a=this.assemblers,s=typeof n,l=e.length-1,d=i+"\t",u=n.type;"boolean"==s||"number"==s?e[l]+=n:"string"==s?e[l]+=Ext.JSON.encode(n):(r=this.operatorTypeMap[u],"string"==typeof(o=a[u]||r&&a[r[0]])&&(o=a[o]),o(this,e,t,i,n,e.length-1,d))}}}),Ext.define("Ext.data.query.Converter",{getFilters:function(){var e,t,i,n,r,o,a,s,l,d,u=this.ast,c=this.exprToFilter,h=this.operatorTypeMap,f=this.fn,g=u&&u.on;if(u)if(f.hasOwnProperty("$filters"))s=f.$filters;else{if("and"===u.type&&g){for(i=[],n=0,o=g.length;n<o&&((r=(e=g[n]).on)&&2===r.length)&&(l=r[1],"id"===(r=r[0]).type)&&((d=c[e.type])||(a=h[e.type])&&(d=c[a[0]]))&&(t=d(e,r.value,l,a));++n)i.push(t);n===o&&(s=i)}f.$filters=s}else s=null;return s},setFilters:function(e){var t,i,n,r,o,a=null,s=e&&e.length;if(s)for(a={type:"and",on:[]},n=0;n<s;++n)i=e[n],t=(o=this.filterToExpr[r=i.operator])?o(i):{type:this.getOperatorType(r),on:[{type:"id",value:i.property},i.value]},a.on.push(t);this.ast=a,this.refresh()},privates:{exprToFilter:{binary:function(e,t,i,n){return Ext.isPrimitive(i)&&{property:t,operator:n[1],value:i}},in:function(e,t,i){var n=0,r=i.value;if("list"===i.type&&Ext.isArray(r))for(n=r.length;0<n--&&Ext.isPrimitive(r[n]););return n<0&&{property:t,operator:"in",value:r}},like:function(e,t,i){return"regexp"===i.type?{property:t,operator:"/=",value:i.value}:"string"===i.type&&{property:t,operator:"like",value:i.value}}},filterToExpr:{"/=":function(e){return{type:"like",on:[{type:"id",value:e.property},{type:"regexp",value:e.value}]}},in:function(e){return{type:"in",on:[{type:"id",value:e.property},{type:"list",value:e.value}]}},like:function(e){return{type:"like",on:[{type:"id",value:e.property},{type:"string",value:e.value,re:e.value,flags:"i"}]}}}}}),Ext.define("Ext.data.query.Stringifier",{stringify:function(e){var t,i,n=typeof e,r=e.type,o=this.operatorTypeMap,a=this.getPriority(e),s=this.stringifiers;return"boolean"==n||"number"==n?String(e):"string"==n?Ext.JSON.encode(e):(!(i=s[r])&&r in o&&(i=s[(t=o[r])[0]],t=t[2]||t[1]),"string"==typeof i&&(i=s[i]),i(this,e,a,t))},privates:{getPriority:function(e){var t=this.symbols,i=this.operatorTypeMap,n=e.type,r=1e9;return"between"===n?(r=0,r=t[n].priority):"and"===n||"or"===n||"in"===n||"like"===n?r=t[n].priority:n in i&&(r=t[i[n][1]].priority),r},stringifiers:{and:"or",or:function(e,t,i){var n,r,o,a="or"===t.type?" or ":" and ",s="",l=t.on;for(n=0;n<l.length;++n)s&&(s+=a),r=l[n],o=e.getPriority(r)<i,r=e.stringify(r),o&&(r="("+r+")"),s+=r;return s},between:function(e,t,i){var n,r,o,a,s=t.on,l=s[0],d=e.getPriority(l)<i;for(l=e.stringify(l),d&&(l="("+l+")"),a=l+" between ",i=e.symbols.and.priority,n=0;n<2;++n)n&&(a+=" and "),o=s[n+1],r=n?"id"!==o.type&&!Ext.isPrimitive(o):e.getPriority(o)<i,o=e.stringify(o),r&&(o="("+o+")"),a+=o;return a},binary:function(e,t,i,n){var r=t.on,o=r[0],a=r[1],s=e.getPriority(o)<i,l=e.getPriority(a)<i;return o=e.stringify(o),a=e.stringify(a),s&&(o="("+o+")"),l&&(a="("+a+")"),o+" "+n+" "+a},fn:function(e,t){return t.fn+"("+e.stringifyArray(t.args)+")"},id:function(e,t){return t.value},list:function(e,t){return"("+e.stringifyArray(t.value)+")"},regexp:function(e,t){return"/"+t.value+"/"+(t.flags||"")},string:function(e,t){return Ext.JSON.encode(t.value)},unary:function(e,t,i,n){var r=t.on,o=e.stringify(r),a=r.type;return"fn"!==a&&"id"!==a&&"unary"!==a&&(o="("+o+")"),n+o}},stringifyArray:function(e){var t,i,n="";for(t=0;t<e.length;++t)n&&(n+=", "),i=e[t],n+=i=this.stringify(i);return n}}}),Ext.define("Ext.data.query.Parser",function(c){var i={list:!0,literal:!0,type:"list"};return{extend:"Ext.parse.Parser",tokenizer:{keywords:{and:{type:"operator",name:"and",value:"&&",is:{operator:!0}},or:{type:"operator",name:"or",value:"||",is:{operator:!0}},not:{type:"operator",name:"not",value:"!",is:{operator:!0}},between:{type:"operator",name:"between",value:"between",is:{operator:!0}},like:{type:"operator",name:"like",value:"like",is:{operator:!0}},in:{type:"operator",name:"in",value:"in",is:{operator:!0}}},operators:{"=":"eq","==":"seq","===":"seq","!==":"sne","!=":"neq","<>":"neq","<":"lt","<=":"lte",">":"gt",">=":"gte","&&":"and","||":"or",",":"comma"},patterns:{regex:{type:"literal",is:{literal:!0,regexp:!0,type:"regexp"},re:/\/(?!\/)((?:\[.+?]|\\.|[^/\\\r\n])+)\/([gimyu]{0,5})/g,extract:function(e){var t=e[1],i=e[2];return i?[t,i]:t}}}},infix:{"=":40,"<>":40,like:40,between:{priority:70,led:function(e){var t=this.parser;return this.arity="between",this.operand=e,this.low=t.parseExpression(t.symbols.and.priority),t.advance("&&"),this.high=t.parseExpression(80),this}},in:{priority:40,led:function(e){var t=this.parser;return t.advance("("),this.arity="binary",this.lhs=e,this.rhs={arity:"literal",value:t.parseList(),is:i},t.advance(")"),this}}},infixRight:{and:30,or:30},prefix:{not:0},parse:function(){var e=this.parseExpression();return this.convert(e)},privates:{opCodes:{binary:{"=":"eq",">":"gt","<":"lt",">=":"ge","<=":"le","!=":"ne","<>":"ne","+":"add","/":"div","*":"mul","-":"sub"},unary:{"-":"neg","!":"not"}},convert:function(e){var t,i,n,r,o=this,a=e.arity,s=e.is,l=e.name,d=o.opCodes,u=e.value;switch(a){case"between":r={type:"between",on:[o.convert(e.operand),o.convert(e.low),o.convert(e.high)]};break;case"ident":r={type:"id",value:u};break;case"invoke":r={type:"fn",fn:e.operand.value,args:o.convertArray(e.args)};break;case"unary":r={type:d.unary[u],on:o.convert(e.operand)};break;case"binary":"and"===l||"or"===l?(i=o.convert(e.lhs),(n=o.convert(e.rhs)).type===l?(t=n.on).unshift(i):t=[i,n],r={type:l,on:t}):("or"===u&&(u="||"),r={type:d.binary[u]||l,on:[o.convert(e.lhs),o.convert(e.rhs)]},"like"===l&&(r.on[1]=o.likeToRe(r.on[1],e.rhs.at)));break;case"literal":s.string||s.number||s.boolean?r=u:(r={type:s.type,value:u},s.list?r.value=o.convertArray(u):s.regexp&&"string"!=typeof u&&(r.value=u[0],r.flags=u[1]))}return r&&"object"==typeof r&&!r.type&&(r.type=a),r},convertArray:function(e){for(var t=[],i=e.length;0<i--;)t[i]=this.convert(e[i]);return t},likeToRe:function(e,t){if("string"==typeof e)e={type:"string",value:e};else if("regexp"===e.type)return e;var i,n,r,o,a=this.specialChars||(c.prototype.specialChars=Ext.Array.toMap(".+*?^$=!|:-<>[](){}\\".split(""))),s=e.value,l=s.length,d="",u=!0;e:for(r=0;r<l;++r){if(n=s[r],!i){if("\\"===n){i=n;continue}if("*"===n||"%"===n){d+=".*",u=!1;continue}if("?"===n||"_"===n){d+=".",u=!1;continue}if("["===n){for(d+=n,u=!1,o=r;++r<l;)if(n=s[r],i)d+=i+n,i=0;else if("\\"===n)i=n;else if(d+=n,"]"===n)continue e;this.syntaxError(o+(e.at||t||0),"Incomplete character set")}}i=0,a[n]&&(d+="\\"),d+=n}return e.re=d||".*",u?e.flags="i":e.re="^"+d+"$",e},parseList:function(){for(var e=[];e.length&&this.advance(),e.push(this.parseExpression()),","===this.token.id;);return e}}}}),Ext.define("Ext.data.Query",{extend:"Ext.util.BasicFilter",mixins:["Ext.mixin.Factoryable","Ext.data.query.Compiler","Ext.data.query.Converter","Ext.data.query.Stringifier"],alias:"query.default",requires:["Ext.data.query.Parser"],config:{format:"ast",functions:{cached:!0,$value:{abs:function(e){return Math.abs(e)},"avg...":function(e){for(var t,i=0,n=0,r=e.length;0<r--;)null!=(t=e[r])&&(n+=t,++i);return i?n/i:0},date:function(e){return e instanceof Date?e:Ext.Date.parse(e)},lower:function(e){return null==e?"":String(e).toLowerCase()},"max...":function(e){for(var t,i=null,n=e.length;0<n--;)null!=(t=e[n])&&(i=null===i||i<t?t:i);return i},"min...":function(e){for(var t,i=null,n=e.length;0<n--;)null!=(t=e[n])&&(i=null===i?t:i<t?i:t);return i},"sum...":function(e){for(var t,i=null,n=e.length;0<n--;)null!=(t=e[n])&&(i=null===i?t:i+t);return null===i?0:i},upper:function(e){return null==e?"":String(e).toUpperCase()}}},source:""},ast:null,error:null,generation:0,constructor:function(e){"string"==typeof e&&(e={source:e});var t=Ext.data.query.Parser.fly();this.symbols=t.symbols,t.release(),this.callParent([e])},filter:function(e){var t=this.error;if(t)throw t;return!!this.fn(e)},refresh:function(){++this.generation,this.compile()},serialize:function(){var e,t,i=this.getFormat(),n=this.getSerializer();switch(i){case"ast":e=this.ast,n&&(e=Ext.clone(e));break;case"filters":e=this.getFilters()||null;break;case"query":e=this.toString()}return e&&n&&(t=n.call(this,e))&&(e=t),e},serializeTo:function(e){var t,i=this.serialize();return i&&i.length&&(e.push.apply(e,i),t=!0),t},sync:function(){var e=this.fn;e&&e.generation===this.generation||this.compile()},toString:function(){var e=this.ast;return e?this.stringify(e):""},validFormatsRe:/^(ast|filters|query)$/,applyFormat:function(e){return this.validFormatsRe.test(e)||Ext.raise("Invalid query format"),e},applyFunctions:function(e){var t,i,n,r={},o=this.vargsRe;for(i in e)(t={fn:e[n=i],vargs:o.test(i)}).vargs&&(n=i.substr(0,i.length-3)),r[n.toLowerCase()]=t;return r},applySource:function(e){if(e)return e;++this.generation,this.ast=null,this.compile()},updateSource:function(e){var t=Ext.data.query.Parser.fly(e);++this.generation;try{this.error=this.fn=null,this.ast=t.parse()}catch(e){throw(this.error=e).message="Failed to parse: "+e.message,e}finally{t.release()}this.compile()},privates:{operatorTypeMap:{and:["binary","&&","and"],or:["binary","||","or"],eq:["binary","==","="],ge:["binary",">=",null],gt:["binary",">",null],le:["binary","<=",null],lt:["binary","<",null],ne:["binary","!=",null],add:["binary","+",null],div:["binary","/",null],mul:["binary","*",null],sub:["binary","-",null],in:["binary",null,"in"],like:["binary",null,"like"],seq:["binary","===","=="],sne:["binary","!==",null],neg:["unary","-",null],not:["unary","!",null]},vargsRe:/\.\.\.$/,getOperatorType:function(e){var t,i=this.operatorTypeMap;for(t in i)if(i[t][1]===e||i[t][2]===e)return t;return Ext.raise('Unrecognized filter operator: "'+e+'"'),null}}}),Ext.define("Ext.data.Request",{isDataRequest:!0,config:{action:void 0,params:void 0,method:"GET",url:null,operation:null,proxy:null,disableCaching:!1,headers:{},callbackKey:null,rawRequest:null,jsonData:void 0,xmlData:void 0,withCredentials:!1,username:null,password:null,binary:!1,callback:null,scope:null,timeout:3e4,records:null,directFn:null,args:null,useDefaultXhrHeader:null,responseType:null},constructor:function(e){this.initConfig(e)},getParam:function(e){var t=this.getParams();if(t)return t[e]},setParam:function(e,t){var i=this.getParams()||{};i[e]=t,this.setParams(i)}}),Ext.define("Ext.data.TreeStore",{extend:"Ext.data.Store",alias:"store.tree",requires:["Ext.util.Sorter","Ext.data.TreeModel","Ext.data.NodeInterface"],isTreeStore:!0,config:{root:null,rootVisible:!1,defaultRootProperty:"children",parentIdProperty:null,clearOnLoad:!0,clearRemovedOnLoad:!0,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",folderSort:!1,pageSize:null},filterer:"topdown",lazyFill:!1,fillCount:0,bulkUpdate:0,nodesToUnregister:0,_silentOptions:{silent:!0},implicitModel:"Ext.data.TreeModel",groupField:null,groupDir:null,grouper:null,constructor:function(e){this.byIdMap={},this.callParent([e]),Ext.isDefined(this.nodeParameter)&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.data.TreeStore: nodeParameter has been deprecated. Please use nodeParam instead."),this.nodeParam=this.nodeParameter,delete this.nodeParameter)},applyFields:function(e,t){e&&this.defaultRootProperty!==this.self.prototype.config.defaultRootProperty&&(e=e.concat({name:this.defaultRootProperty,type:"auto",defaultValue:null,persist:!1})),this.callParent([e,t])},applyGroupField:function(e){return null},applyGroupDir:function(e){return null},applyGrouper:function(e){return e&&Ext.raise("You can't group a TreeStore"),null},group:Ext.emptyFn,onSorterEndUpdate:function(){var e=this,t=e.getSorters().getRange(),i=e.getRoot(),n=e.getFolderSort();e.fireEvent("beforesort",e,t),i&&(n||t.length)?e.getRemoteSort()?t.length&&e.load({callback:function(){e.fireEvent("sort",e,t)}}):(i.sort(this.getSortFn(),!0),e.fireEvent("datachanged",e),e.fireEvent("refresh",e),e.fireEvent("sort",e,t)):e.fireEvent("sort",e,t)},updateFolderSort:function(e){this.needsFolderSort=e,this.onSorterEndUpdate()},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var n=this,r=this.sorters.getSortFn();return function(e,t){var i=0;return n.needsFolderSort&&(i=(e.data.leaf?1:0)-(t.data.leaf?1:0)),n.needsIndexSort&&0===i&&(i=e.data.index-t.data.index),i||r(e,t)}},getTotalCount:function(){return this.getCount()},afterEdit:function(e,t){var i,n,r,o=this,a=e.parentNode,s=o.getRootVisible(),l=!a&&!s,d=e.get("visible");l||d===o.contains(e)?o.getRoot()&&o.needsLocalFilter()&&o.onFilterEndUpdate(o.getFilters()):d?a&&!o.isVisible(e)||(n=[e],e.isExpanded()&&o.handleNodeExpand(e,e.childNodes,n),i=e.previousSibling?o.indexOfPreviousVisibleNode(e.previousSibling):a?o.indexOf(a):-1,o.insert(i+1,n)):(r=o.indexOf(e),o.removeAt(r,o.indexOfNextVisibleNode(e)-r)),o.callParent([e,t])},afterReject:function(e){this.contains(e)&&(this.onUpdate(e,Ext.data.Model.REJECT,null),this.fireEvent("update",this,e,Ext.data.Model.REJECT,null))},afterCommit:function(e,t){t=t||null,this.contains(e)&&(this.onUpdate(e,Ext.data.Model.COMMIT,t),this.fireEvent("update",this,e,Ext.data.Model.COMMIT,t))},updateRootVisible:function(e){var t,i=this.getRoot();i&&(t=this.getData(),e?t.insert(0,i):t.remove(i))},updateTrackRemoved:function(e){this.callParent(arguments),this.removedNodes=this.removed,this.removed=null},onDestroyRecords:function(e,t,i){i&&(this.removedNodes.length=0)},updateProxy:function(e){var t;e&&(e.setIdParam&&e.setIdParam(this.getNodeParam()),t=e.getReader(),Ext.isEmpty(t.getRootProperty())&&t.setRootProperty(this.getDefaultRootProperty()))},setProxy:function(e){this.changingProxy=!0,this.callParent([e]),this.changingProxy=!1},updateModel:function(e){var t;e&&(t=e.prototype.isNode,Ext.data.NodeInterface.decorate(e),t||this.changingProxy||this.getProxy().getReader().buildExtractors(!0))},onCollectionFilter:Ext.emptyFn,onFilterEndUpdate:function(e){var t,i,n,r,o=this,a=e.length,s=o.getRoot();if(o.getRemoteFilter())o.callParent([e]);else{if(a?o.doFilter(s):s.cascade({after:function(e){e.set("visible",!0,o._silentOptions)}}),a)for(n=[],r=0,a=(t=s.childNodes).length;r<a;r++)(i=t[r]).get("visible")&&n.push(i);else n=s.childNodes;o.onNodeFilter(s,n),s.fireEvent("filterchange",s,n),o.suppressNextFilter=!0,o.callParent([e]),o.suppressNextFilter=!1}},onNodeFilter:function(e,t){var i=this,n=i.getData(),r=[];i.getRootVisible()&&e.get("visible")&&r.push(e),i.handleNodeExpand(e,t,r),i.suspendEvents(),n.splice(0,n.getCount(),r),i.resumeEvents(),i.suppressNextFilter||(i.fireEvent("datachanged",i),i.fireEvent("refresh",i))},onBeforeNodeExpand:function(e,t,i,n){var r,o,a,s,l,d,u=this;e.isLoaded()?(d=[e.childNodes],n&&d.push.apply(d,n),Ext.callback(t,i||e,d)):e.isLoading()?u.on("load",function(){d=[e.childNodes],n&&d.push.apply(d,n),Ext.callback(t,i||e,d)},u,{single:!0,priority:1001}):(r=u.getProxy().getReader(),(l=(s=(a=(o=e.getProxy())?o.getReader():null)&&a.initialConfig.rootProperty?a:r).getRoot(e.raw||e.data))||e.phantom&&!e.isRoot()?(u.fillNode(e,s.extractData(l||[],{model:e.childType,recordCreator:u.recordCreator})),d=[e.childNodes],n&&d.push.apply(d,n),Ext.callback(t,i||e,d)):(u.read({node:e,onChildNodesAvailable:function(){delete u.lastOptions.onChildNodesAvailable,d=[e.childNodes],n&&d.push.apply(d,n),Ext.callback(t,i||e,d)}}),u.flushLoad()))},onNodeExpand:function(e,t){var i=this.indexOf(e)+1,n=[];this.handleNodeExpand(e,t,n),this.refreshCounter||!e.isRoot()||e.get("visible")?(++this.loadCount,this.insert(i,n)):this.loadRecords(n)},handleNodeExpand:function(e,t,i){var n,r,o=t?t.length:0;if((e===this.getRoot()||this.isVisible(e))&&o)for(n=0;n<o;n++)(r=t[n]).get("visible")&&(i.push(r),r.isExpanded()&&(r.isLoaded()?this.handleNodeExpand(r,r.childNodes,i):(r.set("expanded",!1,{silent:!0}),r.expand())))},onNodeCollapse:function(e,t,i,n){var r,o=this.indexOf(e)+1;this.needsLocalFilter()&&(t=Ext.Array.filter(t,this.filterVisible)),t.length&&this.isVisible(e)&&(r=this.indexOfNextVisibleNode(e),this.removeAt(o,r-o)),Ext.callback(i,n)},indexOfNextVisibleNode:function(e){for(var t;e.parentNode;){for(t=e.nextSibling;t&&!t.get("visible");t=t.nextSibling);if(t)return this.indexOf(t);e=e.parentNode}return this.getCount()},indexOfPreviousVisibleNode:function(e){var t;for(t=e;t&&!t.get("visible");t=t.previousSibling);if(t){if(t.isExpanded()&&t.lastChild)return this.indexOfPreviousVisibleNode(t.lastChild)}else t=e.parentNode;return this.indexOf(t)},filterNew:function(e){return!e.get("root")&&this.callParent([e])},filterRejects:function(e){return!e.get("root")&&this.callParent([e])},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew,this)},getRejectRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterRejects,this)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(e,t,i,n){Ext.isArray(t)||(t=[t]);var r,o,a=this,s=t.length,l=a.removedNodes;for(o=0;!r&&o<s;o++)t[o].get("visible")&&(r=t[o]);for(r?(n[0]=a.indexOf(t[0]),n[1]=a.indexOfNextVisibleNode(t[t.length-1])-n[0]):(n[0]=-1,n[1]=0),o=0;o<s;o++)t[o].cascade(function(e){a.unregisterNode(e,!0),l&&!i&&(e.phantom||e.erasing||a.loading||(e.removedFrom=a.indexOf(e),l.push(e),a.needsSync=!0))})},afterDrop:Ext.emptyFn,onNodeRemove:function(e,t,i,n){this.suspendAutoSync(),-1!==n[0]&&(this.removeIsMove=i,this.removeAt.apply(this,n),this.removeIsMove=!1),this.resumeAutoSync()},onNodeAppend:function(e,t,i){this.onNodeInsert(e,t,i)},onNodeInsert:function(e,t,i){var n,r,o,a,s,l,d=this,u=t.raw||t.data,c=d.removedNodes;e&&d.needsLocalFilter()&&d.doFilter(e),d.beginUpdate(),d.isVisible(t)&&(l=0!==i&&t.previousSibling?d.indexOfPreviousVisibleNode(t.previousSibling):d.indexOf(e),d.insert(l+1,t),!t.isLeaf()&&t.isExpanded()&&(t.isLoaded()?d.onNodeExpand(t,t.childNodes):d.fillCount||(t.set("expanded",!1),t.expand()))),Ext.Array.remove(c,t),d.needsSync=d.needsSync||t.phantom||t.dirty,t.isLeaf()||t.isLoaded()||d.lazyFill||(n=d.getProxy().getReader(),(s=(a=(o=(r=t.getProxy())?r.getReader():null)&&o.initialConfig.rootProperty?o:n).getRoot(u))&&d.fillNode(t,a.extractData(s,{model:t.childType,recordCreator:d.recordCreator}))),d.endUpdate()},registerNode:function(e,t){var i,n,r,o=this.byIdMap[e.id];if((this.byIdMap[e.id]=e).onRegisterTreeNode&&e!==o&&e.onRegisterTreeNode(this),e.onUnregisterTreeNode&&this.nodesToUnregister++,!0===t)for(n=(i=e.childNodes).length,r=0;r<n;r++)this.registerNode(i[r],!0)},unregisterNode:function(e,t){var i,n,r,o=this.byIdMap[e.id];if(delete this.byIdMap[e.id],!0===t)for(n=(i=e.childNodes).length,r=0;r<n;r++)this.unregisterNode(i[r],!0);e.onUnregisterTreeNode&&e===o&&(e.onUnregisterTreeNode(this),this.nodesToUnregister--)},onNodeSort:function(e,t){this.suspendAutoSync(),(-1!==this.indexOf(e)&&e.isExpanded()||e===this.getRoot()&&!this.getRootVisible())&&(Ext.suspendLayouts(),this.onNodeCollapse(e,t),this.onNodeExpand(e,t),Ext.resumeLayouts(!0)),this.resumeAutoSync(this.autoSync)},applyRoot:function(e){var t=this.getModel(),i=t.prototype.idProperty,n=this.getDefaultRootId();return e&&!e.isNode&&(e=Ext.apply({text:this.getDefaultRootText(),root:!0,isFirst:!0,isLast:!0,depth:0,index:0,parentId:null,allowDrag:!1},e),n&&void 0===e[i]&&(e[i]=n),e=new t(e)),e},updateRoot:function(e,t){var i,n,r=this,o=[],a=r.isConfiguring;if(r.getTrackRemoved(),r.suspendEvent("add","remove"),a&&r.suspendEvent("refresh","datachanged"),t&&t.isModel&&(n=r.getRootVisible()?[t]:t.childNodes,r.beforeNodeRemove(null,n,!1,o),t.set("root",!1),r.onNodeRemove(null,n,!1,o),t.fireEvent("remove",null,t,!1),t.fireEvent("rootchange",null),t.clearListeners(),t.store=t.treeStore=null,r.unregisterNode(t)),r.getData().clear(),e)if(!1===e.fireEventArgs("beforeappend",[null,e]))e=null;else{if(i=e.parentNode){if(!i.removeChild(e,!1,!1,i.getTreeStore()===r))return}else(i=e.getTreeStore())&&i!==r&&e===i.getRoot()&&i.setRoot(null);e.store=e.treeStore=r,e.set("root",!0),e.updateInfo(!0,{isFirst:!0,isLast:!0,depth:0,index:0,parentId:null}),r.registerNode(e,!0),e.fireEvent("append",null,e,!1),e.fireEvent("rootchange",e),r.onNodeAppend(null,e,0),e.phantom=!0}a||r.fireEvent("rootchange",e,t),e&&(r.getAutoLoad()||e.isExpanded())?e.isLoaded()?(r.onNodeExpand(e,e.childNodes),a||(r.fireEvent("datachanged",r),r.fireEvent("refresh",r))):(e.data.expanded=!1,e.expand(!1),!e.isLoaded||r.getProxy().isSynchronous||a||(r.fireEvent("datachanged",r),r.fireEvent("refresh",r))):a||(r.fireEvent("datachanged",r),r.fireEvent("refresh",r)),r.resumeEvent("add","remove"),a&&r.resumeEvent("refresh","datachanged")},doDestroy:function(){var t=this,e=t.getRoot();e&&t.nodesToUnregister&&e.cascade(function(e){e.onUnregisterTreeNode&&e.onUnregisterTreeNode(t)}),t.callParent()},each:function(t,i,e){var n,r=0,o=e;if(e&&"object"==typeof e&&(n=e.collapsed,o=e.filtered),!n)return this.callParent([t,i,o]);this.getRoot().cascade(function(e){if(!0===o||e.get("visible"))return t.call(i||e,e,r++)})},collect:function(t,e,i){var n,r,o,a={},s=[],l=e;return e&&"object"==typeof e&&(n=e.collapsed,i=e.filtered,l=e.allowNull),n||i?this.getRoot().cascade(function(e){if(!0!==i&&!e.get("visible")||(o=e.get(t),r=String(o),!l&&Ext.isEmpty(o)||a[r]||(a[r]=1,s.push(o))),!n&&!e.isExpanded())return!1}):s=this.callParent([t,l,i]),s},getNodeById:function(e){return this.byIdMap[e]||null},findNode:function(t,e,i,n,r){var o,a=null;return Ext.isEmpty(e,!1)?a:t===this.model.idProperty&&arguments.length<3?this.byIdMap[e]:(o=Ext.String.createRegex(e,i,n,r),Ext.Object.eachValue(this.byIdMap,function(e){if(e&&o.test(e.get(t)))return a=e,!1}),a)},load:function(e){var t=e&&e.node;if(t=t||this.getRoot()){if(!t.isLoading())return this.callParent([e])}else t=this.setRoot({expanded:!0,autoRoot:!0})},reload:function(e){var t=Ext.apply({},e,this.lastOptions);return t.node=this.getRoot(),this.load(t)},flushLoad:function(){var n,r,o,e,t,i,a=this,s=a.pendingLoadOptions,l=a.getClearOnLoad();if(a.clearLoadTask(),s)return e=(n=s.node||a.getRoot())&&n.isRoot(),r=s.callback,o=s.scope,s.params=s.params||{},n.data.expanded&&!e&&(n.data.loaded=!1,l&&(n.data.expanded=!1),s.callback=function(e,t,i){l||n.collapse(),n.expand(),Ext.callback(r,o,[e,t,i])}),s.id=n.getId(),a.setLoadOptions(s),a.getRemoteSort()&&s.sorters&&a.fireEvent("beforesort",a,s.sorters),s=Ext.apply({node:s.node||n,internalScope:a,internalCallback:a.onProxyLoad},s),a.lastOptions=Ext.apply({},s),s.isRootLoad=e,t=a.createOperation("read",s),!1!==a.fireEvent("beforeload",a,t)&&(a.loading=!0,e?(a.getClearRemovedOnLoad()&&(a.removedNodes.length=0),l&&(a.unregisterNode(n,!0),n.clear(!1,!0),a.registerNode(n),i=!0)):(a.loading&&(n.data.loaded=!1),a.getTrackRemoved()&&a.getClearRemovedOnLoad()&&a.clearRemoved(n),l&&n.removeAll(!1)),a.loading&&n&&n.set("loading",!0,{silent:!(a.contains(n)||n===a.getRoot())}),i&&(a.clearData(!0),a.getRootVisible()&&(a.suspendEvents(),a.add(n),a.resumeEvents())),t.execute()),a},onProxyLoad:function(e){var t=this,i=e.initialConfig,n=e.wasSuccessful(),r=e.getRecords(),o=i.node,a=i.isRootLoad,s=e.getScope()||t,l=[r,e,n];t.destroyed||(t.loading=!1,o.set("loading",!1),n&&(++t.loadCount,t.getClearOnLoad()||(r=t.cleanRecords(o,r)),t.getParentIdProperty()&&(r=t.treeify(o,r)),a&&t.suspendEvent("add","update"),r=t.fillNode(o,r)),Ext.callback(i.onChildNodesAvailable,s,l),a&&(t.resumeEvent("add","update"),t.callObservers("BeforePopulate"),t.fireEvent("datachanged",t),t.fireEvent("refresh",t),t.callObservers("AfterPopulate")),t.fireEvent("load",t,r,n,e,o))},clearRemoved:function(e){var t,i,n,r=this.removedNodes,o=e.getId(),a=r.length,s=a,l={},d=[],u={};if(e!==this.getRoot()){for(;s--;)u[(t=r[s]).getId()]=t;for(s=a;s--;){for(i=t=r[s];i&&i.getId()!==o;)n=i.get("parentId")||i.get("lastParentId"),i=i.parentNode||this.getNodeById(n)||u[n];i&&(l[t.getId()]=t)}for(s=0;s<a;s++)l[(t=r[s]).getId()]||d.push(t);this.removedNodes=d}else this.removedNodes.length=0},fillNode:function(e,t){var i=t?t.length:0;return 1==++this.bulkUpdate&&this.suspendEvent("datachanged"),i?(this.setupNodes(t),e.appendChild(t,void 0,!0)):1===this.bulkUpdate?e.set("loaded",!0):e.data.loaded=!0,--this.bulkUpdate||this.resumeEvent("datachanged"),t},setupNodes:function(e){var t,i,n,r=this,o=r.getSorters(),a=!1,s=e.length,l=r.sortOnLoad&&1<s&&!r.getRemoteSort()&&r.getFolderSort()||o.length,d=r.needsLocalFilter();for(d&&r.doFilter(e[0]),n=1;n<s;n++)t=e[n],i=e[n-1],d&&r.doFilter(t),a=t.data.index!==i.data.index;l?(r.needsIndexSort=!0,Ext.Array.sort(e,r.getSortFn()),r.needsIndexSort=!1):a&&Ext.Array.sort(e,r.sortByIndex)},beginFill:function(){this.fillCount++||(this.beginUpdate(),this.suspendEvent("add","update"),this.suspendAutoSync(),this.fillArray=[])},endFill:function(e,t){var i,n,r,o=this.fillArray;if(o.push(t),!--this.fillCount){for(this.resumeAutoSync(),this.resumeEvent("add","update"),i=0,n=o.length;i<n;i++)-1!==(r=this.indexOf(o[i][0]))&&this.fireEvent("add",this,o[i],r);this.fillArray=null,this.endUpdate()}},sortByIndex:function(e,t){return e.data.index-t.data.index},onIdChanged:function(e,t,i){var n,r=e.childNodes,o=r&&r.length;for(this.callParent(arguments),delete this.byIdMap[t],this.byIdMap[i]=e,n=0;n<o;n++)r[n].set("parentId",i)},treeify:function(e,t){var i,n,r,o,a,s,l=e.getId(),d=this.getParentIdProperty(),u=t.length,c=[],h={};for(i=0;i<u;i++)(n=t[i]).data.depth=1,h[n.id]=n;for(i=0;i<u;i++)!(r=(n=t[i]).data[d])&&0!==r||r===l?c.push(n):(h[r]||Ext.raise('Ext.data.TreeStore, Invalid parentId "'+r+'"'),(o=h[r]).$children=o.$children||[],o.$children.push(n),n.data.depth=o.data.depth+1);for(a in h)(s=(n=h[a]).$children)&&(delete n.$children,this.setupNodes(s),n.appendChild(s)),this.registerNode(n);return this.setupNodes(c),c},cleanRecords:function(e,t){for(var i,n={},r=e.childNodes,o=0,a=r.length,s=[];o<a;++o)n[r[o].getId()]=!0;for(o=0,a=t.length;o<a;++o)n[(i=t[o]).getId()]||s.push(i);return s},removeAll:function(){var e=this.getRoot(),t=this.getData().length;this.suspendEvents(),this.setRoot(null),this.resumeEvents(),this.callParent(),t&&(this.fireEvent("clear",this),this.fireEvent("rootchange",e,null))},doSort:function(e){var t=this;t.getRemoteSort()?t.load():(t.tree.sort(e,!0),t.fireEvent("datachanged",t),t.fireEvent("refresh",t)),t.fireEvent("sort",t,t.sorters.getRange())},filterVisible:function(e){return e.get("visible")},isVisible:function(e){for(var t=e.parentNode,i=e.data.visible,n=this.getRoot();i&&t;)i=t.data.expanded&&t.data.visible,t=t.parentNode;return i&&!(e===n&&!this.getRootVisible())},commitChanges:function(){var e=this.removedNodes;e&&(e.length=0),this.callParent()},getRootNode:function(){return this.getRoot()},setRootNode:function(e){return this.setRoot(e),this.getRoot()},privates:{fireChangeEvent:function(e){return!!this.byIdMap[e.id]},getRawRemovedRecords:function(){return this.removedNodes},createOperation:function(e,t){var i,n=t.node;return this.useModelProxy&&n&&n!==this.getRootNode()&&(i=n.getProxy()),i&&i!==this.getProxy()?i.createOperation(e,t):this.callParent([e,t])},recordCreator:function(e,t){return new t(e)},doFilter:function(e){this.filterNodes(e,this.getFilters().getFilterFn(),!0)},filterNodes:function(e,t,i){var n,r,o="bottomup"===this.filterer,a=t(e)&&i||e.isRoot()&&!this.getRootVisible(),s=e.childNodes,l=s&&s.length;if(l){for(n=0;n<l;++n)r=this.filterNodes(s[n],t,a||o)||r;o&&(a=r||a)}return e.set("visible",a,this._silentOptions),a},needsLocalFilter:function(){return!this.getRemoteFilter()&&this.getFilters().length},onRemoteFilterSet:function(e,t){this.getData().setFilters(null),e&&e.on("endupdate",this.onFilterEndUpdate,this)},onRemoteSortSet:function(e,t){this.getData().setSorters(null),e&&e.on("endupdate",this.onSorterEndUpdate,this)}},deprecated:{5:{properties:{tree:null}}}}),Ext.define("Ext.data.Types",{singleton:!0,requires:["Ext.data.SortTypes"]},function(t){var e=Ext.data.SortTypes;Ext.apply(t,{stripRe:/[$,%]/g,AUTO:{sortType:e.none,type:"auto"},STRING:{convert:function(e){var t=this.getAllowNull()?null:"";return null==e?t:String(e)},sortType:e.asUCString,type:"string"},INT:{convert:function(e){return"number"==typeof e?parseInt(e,10):null!=e&&""!==e?parseInt(String(e).replace(t.stripRe,""),10):this.getAllowNull()?null:0},sortType:e.none,type:"int"},FLOAT:{convert:function(e){return"number"==typeof e?e:null!=e&&""!==e?parseFloat(String(e).replace(t.stripRe,""),10):this.getAllowNull()?null:0},sortType:e.none,type:"float"},BOOL:{convert:function(e){return"boolean"==typeof e?e:!this.getAllowNull()||null!=e&&""!==e?"true"===e||1==e:null},sortType:e.none,type:"bool"},DATE:{convert:function(e){var t,i=this.getDateReadFormat()||this.getDateFormat();return e?e instanceof Date?e:i?Ext.Date.parse(e,i):(t=Date.parse(e))?new Date(t):null:null},sortType:e.asDate,type:"date"}}),t.BOOLEAN=t.BOOL,t.INTEGER=t.INT,t.NUMBER=t.FLOAT}),Ext.define("Ext.data.Validation",{extend:"Ext.data.Model",isValidation:!0,syncGeneration:0,attach:function(e){this.record=e,this.isBase=e.self===Ext.data.Model,delete this.data.id},getValidation:function(){return null},isValid:function(){return this.syncGeneration!==this.record.generation&&this.refresh(),!this.dirty},refresh:function(e){if(!this.isBase){var t,i,n,r,o,a,s,l,d,u=this.data,c=this.record,h=c.fields,f=c.generation,g=c.data,p=c.validationSeparator,m=null;if(e||this.syncGeneration!==f){for(this.syncGeneration=f,o=0,a=h.length;o<a;++o)l=g[d=(r=h[o]).name],t=r.defaultInvalidMessage,n=0,d in u?i=u[d]:u[d]=i=!0,r.validate!==Ext.emptyFn&&!0!==(s=r.validate(l,p,null,c))&&(n=s||t),(n=n||!0)!==i&&((m=m||{})[d]=n);m&&this.set(m)}}}}),Ext.define("Ext.dom.Helper",function(){var t,i,l="afterbegin",d="afterend",u="beforebegin",c="beforeend",e=["BeforeBegin","previousSibling"],n=["AfterEnd","nextSibling"],h={beforebegin:e,afterend:n},f={beforebegin:e,afterend:n,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:!0,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:(t=/([a-z])([A-Z])/g,i={},function(e){return i[e]||(i[e]=e.replace(t,r))}),generateMarkup:function(e,t){var i,n,r,o,a,s=typeof e;if("string"==s||"number"==s)t.push(e);else if(Ext.isArray(e))for(o=0;o<e.length;o++)e[o]&&this.generateMarkup(e[o],t);else{for(i in r=e.tag||"div",t.push("<",r),e)e.hasOwnProperty(i)&&(void 0===(n=e[i])||this.confRe.test(i)||(n&&n.join&&(n=n.join(" ")),"object"==typeof n?(t.push(" ",i,'="'),this.generateStyles(n,t,!0).push('"')):t.push(" ",this.attributeTransform[i]||i,'="',n,'"')));this.emptyTags.test(r)?t.push("/>"):(t.push(">"),(n=e.tpl)&&n.applyOut(e.tplData,t),(n=e.html)&&t.push(n),(n=e.cn||e.children)&&this.generateMarkup(n,t),a=this.closeTags,t.push(a[r]||(a[r]="</"+r+">")))}return t},generateStyles:function(e,t,i){var n,r,o=t||[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],n=this.decamelizeName(n),i&&Ext.String.hasHtmlCharacters(r)&&(r=Ext.String.htmlEncode(r)),o.push(n,":",r,";"));return t||o.join("")},markup:function(e){return"string"==typeof e?e:this.generateMarkup(e,[]).join("")},applyStyles:function(e,t){Ext.fly(e).applyStyles(t)},createContextualFragment:function(e){var t,i,n=this.detachedDiv,r=document.createDocumentFragment();for(n.innerHTML=e,t=(i=n.childNodes).length;t--;)r.appendChild(i[0]);return r},createDom:function(e){var t,i=this.markup(e),n=this.detachedDiv;return n.innerHTML=i,t=n.firstChild,Ext.supports.ChildContentClearedWhenSettingInnerHTML?t.cloneNode(!0):t},insertHtml:function(e,t,i){var n,r,o,a,s;if(e=e.toLowerCase(),t.insertAdjacentHTML)return this.ieInsertHtml&&(s=this.ieInsertHtml(e,t,i))?s:(n=f[e])?(t.insertAdjacentHTML(n[0],i),t[n[1]]):void Ext.raise({sourceClass:"Ext.DomHelper",sourceMethod:"insertHtml",htmlToInsert:i,targetElement:t,msg:'Illegal insertion point reached: "'+e+'"'});if(3===t.nodeType&&(e=(e=e===l?u:e)===c?d:e),r=Ext.supports.CreateContextualFragment?t.ownerDocument.createRange():void 0,a="setStart"+(this.endRe.test(e)?"After":"Before"),h[e])return s=r?(r[a](t),r.createContextualFragment(i)):this.createContextualFragment(i),t.parentNode.insertBefore(s,e===u?t:t.nextSibling),t[(e===u?"previous":"next")+"Sibling"];if(o=(e===l?"first":"last")+"Child",t.firstChild){if(r)try{r[a](t[o]),s=r.createContextualFragment(i)}catch(e){s=this.createContextualFragment(i)}else s=this.createContextualFragment(i);e===l?t.insertBefore(s,t.firstChild):t.appendChild(s)}else t.innerHTML=i;return t[o]},insertBefore:function(e,t,i){return this.doInsert(e,t,i,u)},insertAfter:function(e,t,i){return this.doInsert(e,t,i,d)},insertFirst:function(e,t,i){return this.doInsert(e,t,i,l)},append:function(e,t,i){return this.doInsert(e,t,i,c)},overwrite:function(e,t,i){var n;return e=Ext.getDom(e),t=this.markup(t),this.ieOverwrite&&(n=this.ieOverwrite(e,t)),n||(e.innerHTML=t,n=e.firstChild),i?Ext.get(n):n},doInsert:function(e,t,i,n){var r;return"innerHTML"in(e=e.dom||Ext.getDom(e))?r=this.insertHtml(n,e,this.markup(t)):(r=this.createDom(t,null),3===e.nodeType&&(n=(n=n===l?u:n)===c?d:n),h[n]?e.parentNode.insertBefore(r,n===u?e:e.nextSibling):e.firstChild&&n===l?e.insertBefore(r,e.firstChild):e.appendChild(r)),i?Ext.get(r):r},createTemplate:function(e){var t=this.markup(e);return new Ext.Template(t)},createHtml:function(e){return this.markup(e)}};function r(e,t,i){return t+"-"+i.toLowerCase()}}),Ext.define("Ext.overrides.dom.Helper",function(){var r=/^(?:table|thead|tbody|tr|td)$/i,u=/td|tr|tbody|thead/i,c="<table><tbody>",h="</tbody></table>";return{override:"Ext.dom.Helper",ieInsertHtml:function(e,t,i){var n=null;return Ext.isIE9m&&r.test(t.tagName)&&(n=this.insertIntoTable(t.tagName.toLowerCase(),e,t,i)),n},ieOverwrite:function(e,t){if(Ext.isIE9m&&r.test(e.tagName)){for(;e.firstChild;)e.removeChild(e.firstChild);if(t)return this.insertHtml("afterbegin",e,t)}},ieTable:function(e,t,i,n){var r,o,a=-1,s=this.detachedDiv;for(s.innerHTML=[t,i,n].join("");++a<e;)s=s.firstChild;if(r=s.nextSibling)for(r=s,s=document.createDocumentFragment();r;)o=r.nextSibling,s.appendChild(r),r=o;return s},insertIntoTable:function(e,t,i,n){var r,o,a="beforebegin"===t,s="afterbegin"===t,l="beforeend"===t,d="afterend"===t;return"td"===e&&(s||l)||!u.test(e)&&(a||d)?null:(o=a?i:d?i.nextSibling:s?i.firstChild:null,(a||d)&&(i=i.parentNode),r="td"===e||"tr"===e&&(l||s)?this.ieTable(4,"<table><tbody><tr>",n,"</tr></tbody></table>"):("tbody"===e||"thead"===e)&&(l||s)||"tr"===e&&(a||d)?this.ieTable(3,c,n,h):this.ieTable(2,"<table>",n,"</table>"),i.insertBefore(r,o),r)}}}()),Ext.define("Ext.dom.Query",function(){var DQ,doc=document,cache,simpleCache,valueCache,useClassList=!!doc.documentElement.classList,useElementPointer=!!doc.documentElement.firstElementChild,useChildrenCollection=(t9d=doc.createElement("div"),t9d.innerHTML="\x3c!-- --\x3etext\x3c!-- --\x3e",t9d.children&&0===t9d.children.length),nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w\-\*\|\\]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,startIdRe=/^\s*#/,isIE=!!window.ActiveXObject,key=30803,longHex=/\\([0-9a-fA-F]{6})/g,shortHex=/\\([0-9a-fA-F]{1,6})\s{0,1}/g,nonHex=/\\([^0-9a-fA-F]{1})/g,escapes=/\\/g,num,hasEscapes,supportsColonNsSeparator=(v9d='<r><a:b xmlns:a="n"></a:b></r>',window.DOMParser?u9d=(new DOMParser).parseFromString(v9d,"application/xml"):(u9d=new ActiveXObject("Microsoft.XMLDOM")).loadXML(v9d),!!u9d.getElementsByTagName("a:b").length),longHexToChar=function(e,t){return String.fromCharCode(parseInt(t,16))},shortToLongHex=function(e,t){for(;t.length<6;)t="0"+t;return"\\"+t},charToLongHex=function(e,t){return 1===(num=t.charCodeAt(0).toString(16)).length&&(num="0"+num),"\\0000"+num},unescapeCssSelector=function(e){return hasEscapes?e.replace(longHex,longHexToChar):e},setupEscapes=function(e){return(hasEscapes=-1<e.indexOf("\\"))&&(e=e.replace(shortHex,shortToLongHex).replace(nonHex,charToLongHex).replace(escapes,"\\\\")),e},u9d,v9d,t9d;function children(e){for(var t,i=e.firstChild,n=-1;i;)t=i.nextSibling,3!=i.nodeType||nonSpace.test(i.nodeValue)?i.nodeIndex=++n:e.removeChild(i),i=t;return this}function attrValue(e,t){return e.tagName||void 0===e.length||(e=e[0]),e&&("for"==t?e.htmlFor:"class"==t||"className"==t?e.className:e.getAttribute(t)||e[t])}function getNodes(e,t,i){var n,r,o,a,s,l,d,u,c,h=[],f=-1;if(!e)return h;if(i=i.replace("|",":")||"*",void 0!==e.getElementsByTagName&&(e=[e]),t){if("/"==t||">"==t)for(d=i.toUpperCase(),r=0;o=e[r];r++)for(l=o.childNodes,a=0;c=l[a];a++)c.nodeName!=d&&c.nodeName!=i&&"*"!=i||(h[++f]=c);else if("+"==t)for(d=i.toUpperCase(),r=0;u=e[r];r++){for(;(u=u.nextSibling)&&1!=u.nodeType;);!u||u.nodeName!=d&&u.nodeName!=i&&"*"!=i||(h[++f]=u)}else if("~"==t)for(d=i.toUpperCase(),r=0;u=e[r];r++)for(;u=u.nextSibling;)u.nodeName!=d&&u.nodeName!=i&&"*"!=i||(h[++f]=u)}else if(i=unescapeCssSelector(i),!supportsColonNsSeparator&&DQ.isXml(e[0])&&-1!==i.indexOf(":"))for(r=0;o=e[r];r++)for(n=o.getElementsByTagName(i.split(":").pop()),a=0;s=n[a];a++)s.tagName===i&&(h[++f]=s);else for(r=0;o=e[r];r++)for(n=o.getElementsByTagName(i),a=0;s=n[a];a++)h[++f]=s;return h}function concat(e,t){return e.push.apply(e,t),e}function byTag(e,t){if(!e.tagName&&e!==doc||(e=[e]),!t)return e;var i,n,r=[],o=-1;for(t=t.toLowerCase(),i=0;n=e[i];i++)1==n.nodeType&&n.tagName.toLowerCase()==t&&(r[++o]=n);return r}function byId(e,t){if(t=unescapeCssSelector(t),!e.tagName&&e!==doc||(e=[e]),!t)return e;var i,n,r=[],o=-1;for(i=0;n=e[i];i++)if(n&&n.id==t)return r[++o]=n,r;return r}function byAttribute(e,t,i,n,r){var o,a,s,l,d,u=[],c=-1,h="{"==r,f=DQ.operators[n];for(i=unescapeCssSelector(i),l=0;d=e[l];l++)1===d.nodeType&&(s||(a=DQ.isXml(d),s=!0),o=a?d.getAttribute(t):h?DQ.getStyle(d,t):"class"==t||"className"==t?d.className:"for"==t?d.htmlFor:"href"==t?d.getAttribute("href",2):d.getAttribute(t),(f&&f(o,i)||!f&&o)&&(u[++c]=d));return u}function byPseudo(e,t,i){return i=unescapeCssSelector(i),DQ.pseudos[t](e,i)}function nodupIEXml(e){var t,i,n,r,o=++key;for(e[0].setAttribute("_nodup",o),t=[e[0]],i=1,n=e.length;i<n;i++)!(r=e[i]).getAttribute("_nodup")!=o&&(r.setAttribute("_nodup",o),t[t.length]=r);for(i=0,n=e.length;i<n;i++)e[i].removeAttribute("_nodup");return t}function nodup(e){if(!e)return[];var t,i,n,r,o,a=e.length,s=e,l=-1;if(!a||void 0!==e.nodeType||1==a)return e;if(isIE&&void 0!==e[0].selectSingleNode)return nodupIEXml(e);for(r=++key,e[0]._nodup=r,n=1;t=e[n];n++){if(t._nodup==r){for(s=[],o=0;o<n;o++)s[++l]=e[o];for(o=n+1;i=e[o];o++)i._nodup!=r&&(i._nodup=r,s[++l]=i);return s}t._nodup=r}return s}function quickDiffIEXml(e,t){var i,n,r=++key,o=[];for(i=0,n=e.length;i<n;i++)e[i].setAttribute("_qdiff",r);for(i=0,n=t.length;i<n;i++)t[i].getAttribute("_qdiff")!=r&&(o[o.length]=t[i]);for(i=0,n=e.length;i<n;i++)e[i].removeAttribute("_qdiff");return o}function quickDiff(e,t){var i,n,r=e.length,o=++key,a=[];if(!r)return t;if(isIE&&void 0!==e[0].selectSingleNode)return quickDiffIEXml(e,t);for(i=0;i<r;i++)e[i]._qdiff=o;for(i=0,n=t.length;i<n;i++)t[i]._qdiff!=o&&(a[a.length]=t[i]);return a}function quickId(e,t,i,n){return e==i?(n=unescapeCssSelector(n),(i.ownerDocument||i).getElementById(n)):byId(e=getNodes(e,t,"*"),n)}return eval("var batch = 30803, child, next, prev, byClassName;"),child=useChildrenCollection?function(e,t){return e.children[t]}:function(e,t){for(var i=0,n=e.firstChild;n;){if(1==n.nodeType&&++i==t)return n;n=n.nextSibling}return null},next=useElementPointer?function(e){return e.nextElementSibling}:function(e){for(;(e=e.nextSibling)&&1!=e.nodeType;);return e},prev=useElementPointer?function(e){return e.previousElementSibling}:function(e){for(;(e=e.previousSibling)&&1!=e.nodeType;);return e},byClassName=useClassList?function(e,t){if(!(t=unescapeCssSelector(t)))return e;var i,n,r,o=[],a=-1;for(i=0;n=e[i];i++)(r=n.classList)?r.contains(t)&&(o[++a]=n):-1!==(" "+n.className+" ").indexOf(t)&&(o[++a]=n);return o}:function(e,t){if(!(t=unescapeCssSelector(t)))return e;var i,n,r=[],o=-1;for(i=0;n=e[i];i++)-1!==(" "+n.className+" ").indexOf(t)&&(r[++o]=n);return r},{singleton:!0,alternateClassName:["Ext.core.DomQuery","Ext.DomQuery"],requires:["Ext.dom.Helper","Ext.util.Operators"],_init:function(){(DQ=this).operators=Ext.Object.chain(Ext.util.Operators),DQ._cache=cache=new Ext.util.LruCache({maxSize:200}),DQ._valueCache=valueCache=new Ext.util.LruCache({maxSize:200}),DQ._simpleCache=simpleCache=new Ext.util.LruCache({maxSize:200})},clearCache:function(){cache.clear(),valueCache.clear(),simpleCache.clear()},getStyle:function(e,t){return Ext.fly(e,"_DomQuery").getStyle(t)},compile:function(path,type){type=type||"select";var fn=["var f = function(root) {\n var mode; ++batch; var n = root || document;\n"],lastPath,matchers=DQ.matchers,matchersLn=matchers.length,lmode=path.match(modeRe),modeMatch,tokenMatch,matched,j,t,m;for(path=setupEscapes(path),lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',path=path.replace(lmode[1],""));"/"==path.substr(0,1);)path=path.substr(1);for(;path&&lastPath!=path;){for(lastPath=path,tokenMatch=path.match(tagTokenRe),"select"==type?tokenMatch?("#"==tokenMatch[1]?fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");':fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],"")):"@"!=path.substr(0,1)&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tokenMatch&&("#"==tokenMatch[1]?fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");':fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],""));!(modeMatch=path.match(modeRe));){for(matched=!1,j=0;j<matchersLn;j++)if(t=matchers[j],m=path.match(t.re),m){fn[fn.length]=t.select.replace(tplRe,function(e,t){return m[t]}),path=path.replace(m[0],""),matched=!0;break}matched||Ext.raise({sourceClass:"Ext.DomQuery",sourceMethod:"compile",msg:'Error parsing selector. Parsing failed at "'+path+'"'})}modeMatch[1]&&(fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";',path=path.replace(modeMatch[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),f},jsSelect:function(e,t,i){"string"==typeof(t=t||doc)&&(t=doc.getElementById(t));var n,r,o,a,s,l=Ext.splitAndUnescape(e,","),d=[];for(r=0,o=l.length;r<o;r++)a=l[r].replace(trimRe,""),(n=cache.get(a))?setupEscapes(a):((n=DQ.compile(a,i))||Ext.raise({sourceClass:"Ext.DomQuery",sourceMethod:"jsSelect",msg:a+" is not a valid selector"}),cache.add(a,n)),(s=n(t))&&s!==doc&&(d=d.concat(s));return 1<l.length?nodup(d):d},isXml:function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName},select:doc.querySelectorAll?function(e,t,i,n){if(t=t||doc,!DQ.isXml(t))try{return t.parentNode&&9!==t.nodeType&&-1===e.indexOf(",")&&!startIdRe.test(e)&&(e=Ext.makeIdSelector(Ext.id(t))+" "+e,t=t.parentNode),n?[t.querySelector(e)]:Ext.Array.toArray(t.querySelectorAll(e))}catch(e){}return DQ.jsSelect.call(this,e,t,i)}:function(e,t,i){return DQ.jsSelect.call(this,e,t,i)},selectNode:function(e,t){return Ext.DomQuery.select(e,t,null,!0)[0]},selectValue:function(e,t,i){e=e.replace(trimRe,"");var n,r=valueCache.get(e);return r?setupEscapes(e):(r=DQ.compile(e,"select"),valueCache.add(e,r)),n=r(t),DQ.getNodeValue(n[0]||n,i)},getNodeValue:function(e,t){"function"==typeof e.normalize&&e.normalize();var i=e&&e.firstChild,n=i?i.nodeValue:null;return void 0===t||null!=n&&""!==n||(n=t),n},selectNumber:function(e,t,i){var n=DQ.selectValue(e,t,i||0);return parseFloat(n)},is:function(e,t){"string"==typeof e&&(e=doc.getElementById(e));var i=Ext.isArray(e),n=DQ.filter(i?e:[e],t);return i?n.length==e.length:0<n.length},filter:function(e,t,i){t=t.replace(trimRe,"");var n,r=simpleCache.get(t);return r?setupEscapes(t):(r=DQ.compile(t,"simple"),simpleCache.add(t,r)),n=r(e),i?quickDiff(n,e):n},matchers:[{re:/^\.([\w\-\\]+)/,select:useClassList?'n = byClassName(n, "{1}");':'n = byClassName(n, " {1} ");'},{re:/^\:([\w\-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w\-\\]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w\-\.]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],pseudos:{"first-child":function(e){var t,i,n,r=[],o=-1;for(i=0;n=t=e[i];i++){for(;(t=t.previousSibling)&&1!=t.nodeType;);t||(r[++o]=n)}return r},"last-child":function(e){var t,i,n,r=[],o=-1;for(i=0;n=t=e[i];i++){for(;(t=t.nextSibling)&&1!=t.nodeType;);t||(r[++o]=n)}return r},"nth-child":function(e,t){var i,n,r,o,a,s=[],l=-1,d=nthRe.exec(("even"==t?"2n":"odd"==t&&"2n+1")||!nthRe2.test(t)&&"n+"+t||t),u=+(d[1]||1),c=+d[2];for(i=0;n=e[i];i++){if(a=n.parentNode,batch!=a._batch){for(r=0,o=a.firstChild;o;o=o.nextSibling)1==o.nodeType&&(o.nodeIndex=++r);a._batch=batch}1==u?0!=c&&n.nodeIndex!=c||(s[++l]=n):(n.nodeIndex+c)%u==0&&(s[++l]=n)}return s},"only-child":function(e){var t,i,n=[],r=-1;for(t=0;i=e[t];t++)prev(i)||next(i)||(n[++r]=i);return n},empty:function(e){var t,i,n,r,o,a,s=[],l=-1;for(t=0;i=e[t];t++){for(n=i.childNodes,a=!(r=0);o=n[r];)if(++r,1==o.nodeType||3==o.nodeType){a=!1;break}a&&(s[++l]=i)}return s},contains:function(e,t){var i,n,r=[],o=-1;for(i=0;n=e[i];i++)-1!=(n.textContent||n.innerText||n.text||"").indexOf(t)&&(r[++o]=n);return r},nodeValue:function(e,t){var i,n,r=[],o=-1;for(i=0;n=e[i];i++)n.firstChild&&n.firstChild.nodeValue==t&&(r[++o]=n);return r},checked:function(e){var t,i,n=[],r=-1;for(t=0;i=e[t];t++)!0===i.checked&&(n[++r]=i);return n},not:function(e,t){return DQ.filter(e,t,!0)},any:function(e,t){var i,n,r,o,a=t.split("|"),s=[],l=-1;for(n=0;r=e[n];n++)for(o=0;i=a[o];o++)if(DQ.is(r,i)){s[++l]=r;break}return s},odd:function(e){return this["nth-child"](e,"odd")},even:function(e){return this["nth-child"](e,"even")},nth:function(e,t){return e[t-1]||[]},first:function(e){return e[0]||[]},last:function(e){return e[e.length-1]||[]},has:function(e,t){var i,n,r=DQ.select,o=[],a=-1;for(i=0;n=e[i];i++)0<r(t,n).length&&(o[++a]=n);return o},next:function(e,t){var i,n,r,o=DQ.is,a=[],s=-1;for(i=0;n=e[i];i++)(r=next(n))&&o(r,t)&&(a[++s]=n);return a},prev:function(e,t){var i,n,r,o=DQ.is,a=[],s=-1;for(i=0;n=e[i];i++)(r=prev(n))&&o(r,t)&&(a[++s]=n);return a},focusable:function(e){for(var t,i=e.length,n=[],r=0;r<i;r++)t=e[r],Ext.fly(t,"_DomQuery").isFocusable()&&n.push(t);return n},visible:function(e,t){for(var i,n=e.length,r=[],o=0;o<n;o++)i=e[o],Ext.fly(i,"_DomQuery").isVisible(t)&&r.push(i);return r},isScrolled:function(e){var t,i,n,r=[],o=-1;for(t=0;i=e[t];t++)(0<(n=Ext.fly(i,"_DomQuery").getScroll()).top||0<n.left)&&(r[++o]=i);return r}}}},function(){this._init()}),Ext.define("Ext.data.reader.Xml",{extend:"Ext.data.reader.Reader",alternateClassName:"Ext.data.XmlReader",alias:"reader.xml",requires:["Ext.dom.Query"],config:{record:"",namespace:""},responseType:"document",createAccessor:function(t){return Ext.isEmpty(t)?Ext.emptyFn:Ext.isFunction(t)?t:function(e){return this.getNodeValue(Ext.DomQuery.selectNode(t,e))}},getNodeValue:function(e){if(e&&("function"==typeof e.normalize&&e.normalize(),e=e.firstChild))return e.nodeValue},getResponseData:function(e){var t=e.responseXML,i="XML data not found in the response";return t||(Ext.Logger.warn(i),this.createReadError(i))},getData:function(e){return e.documentElement||e},getRoot:function(e){return this.getRootValue(e,this.getRootProperty())},extractData:function(e,t){var i=this.getRecord();return i||Ext.raise("Record is a required parameter"),e=i!==e.nodeName?Ext.DomQuery.select(i,e):[e],this.callParent([e,t])},readRecords:function(e,t,i){return Ext.isArray(e)&&(e=e[0]),this.callParent([e,t,i])},createFieldAccessor:function(i){var n,e,t,r=this.getNamespace();return i.mapping?n=i.mapping:(n=(r?r+"|":"")+i.name,e=!0),t="function"==typeof n?function(e,t){return i.mapping(e,t)}:(e&&!r&&Ext.supports.XmlQuerySelector&&(t=function(e,t){return t.getNodeValue(e.querySelector(n))}),t||function(e,t){return t.getNodeValue(Ext.DomQuery.selectNode(n,e))})},privates:{getGroupRoot:function(e){return this.getRootValue(e,this.getGroupRootProperty())},getRootValue:function(e,t){var i=e.nodeName;return!t||i&&i===t?e:"function"==typeof t?t(e):Ext.DomQuery.isXml(e)?Ext.DomQuery.selectNode(t,e):void 0},getSummaryRoot:function(e){return this.getRootValue(e,this.getSummaryRootProperty())}},deprecated:{"5.1.1":{properties:{xmlData:null}}}}),Ext.define("Ext.data.writer.Xml",{extend:"Ext.data.writer.Writer",alternateClassName:"Ext.data.XmlWriter",alias:"writer.xml",config:{documentRoot:"xmlData",defaultDocumentRoot:"xmlData",header:"",record:"record"},selectorRe:/[^>\s]+/g,writeRecords:function(e,t){var i,n=[],r=0,o=t.length,a=this.getDocumentRoot(),s=this.getRecord(),l=s.match(this.selectorRe),d=l.length,u=1!==t.length&&1===d;for((i=this.getTransform())&&(t=i(t,e)),n.push(this.getHeader()||""),!a&&u&&(a=this.getDefaultDocumentRoot()),a&&n.push("<",a,">"),r=0;r<d-1;r++)n.push("<",l[r],">");for(s=l[r],r=0;r<o;++r)this.objectToElement(s,t[r],n);for(r=d-2;-1<r;r--)n.push("</",l[r],">");return a&&n.push("</",a,">"),e.setXmlData(n.join("")),e},objectToElement:function(e,t,i){var n,r,o,a,s,l,d,u,c,h=[];for(n in(i=i||[]).push("<",e),t)if(r=t[n],"@"===n[0])i.push(" ",n.substr(1),'="',r,'"');else if("object"==typeof r)this.objectToElement(n,r,h);else if(1<(a=(o=n.match(this.selectorRe)).length)){for(s=l=l||{},c=0;c<a;c++)s=(d=s)[u=o[c]]||(s[u]={});d[u]=r}else h.push("<",n,">",r,"</",n,">");if(i.push(">"),i.push.apply(i,h),l)for(n in l)r=l[n],this.objectToElement(n,r,i);return i.push("</",e,">"),i}}),Ext.define("Ext.data.XmlStore",{extend:"Ext.data.Store",alias:"store.xml",requires:["Ext.data.proxy.Ajax","Ext.data.reader.Xml","Ext.data.writer.Xml"],constructor:function(e){e=Ext.apply({proxy:{type:"ajax",reader:"xml",writer:"xml"}},e),this.callParent([e])}}),Ext.define("Ext.data.identifier.Negative",{extend:"Ext.data.identifier.Sequential",alias:"data.identifier.negative",config:{increment:-1,seed:-1}}),Ext.define("Ext.data.identifier.Uuid",{extend:"Ext.data.identifier.Generator",alias:"data.identifier.uuid",isUnique:!0,config:{id:null},constructor:function(e){this.callParent([e]),this.reconfigure(e)},reconfigure:function(e){var t=this.self;this.generate=e&&1===e.version?t.createSequential(e.salt,e.timestamp,e.clockSeq):t.createRandom()},clone:null,statics:{createRandom:function(){var n="xxxxxxxx-xxxx-4xxx-Rxxx-xMxxxxxxxxxx".split(""),r="0123456789abcdef".split(""),o=n.length,a=[];return function(){var e,t,i;for(i=0;i<o;++i)"-"!==(t=n[i])&&"4"!==t&&(e=16*Math.random(),t=r[e="R"===t?3&e|8:e|("M"===t?1:0)]),a[i]=t;return a.join("")}},createSequential:function(e,t,i){var n,r=[],o=Math.pow(2,32),a=e.lo,s=e.hi,l=t.lo,d=t.hi;return n=function(e,t){var i=e.toString(16).toLowerCase();return i.length>t?i=i.substring(i.length-t):i.length<t&&(i=Ext.String.leftPad(i,t,"0")),i},"number"==typeof e&&(s=Math.floor(e/o),a=Math.floor(e-s*o)),"number"==typeof t&&(d=Math.floor(t/o),l=Math.floor(t-d*o)),s|=256,r[3]=n(128|i>>>8&63,2)+n(255&i,2),r[4]=n(s,4)+n(a,8),function(){return r[0]=n(l,8),r[1]=n(65535&d,4),r[2]=n(d>>>16&4095|4096,4),o<=++l&&(l=0,++d),r.join("-")}}}},function(){this.Global=new this({id:"uuid"})}),Ext.define("Ext.data.proxy.WebStorage",{extend:"Ext.data.proxy.Client",alternateClassName:"Ext.data.WebStorageProxy",requires:["Ext.data.identifier.Sequential"],config:{id:void 0},constructor:function(e){this.callParent(arguments),this.cache={},void 0===this.getStorageObject()&&Ext.raise("Local Storage is not supported in this browser, please use another type of data proxy"),void 0===this.getId()&&Ext.raise("No unique id was provided to the local storage proxy. See Ext.data.proxy.LocalStorage documentation for details"),this.initialize()},create:function(e){var t,i,n,r,o=e.getRecords(),a=o.length,s=this.getIds();for(void 0===this.isHierarchical&&(this.isHierarchical=!!o[0].isNode,this.isHierarchical&&this.getStorageObject().setItem(this.getTreeKey(),!0)),n=0;n<a;n++)t=(i=o[n]).phantom?(r=i.identifier)&&r.isUnique?i.getId():this.getNextId():i.getId(),this.setRecord(i,t),i.commit(),s.push(t);this.setIds(s),e.setSuccessful(!0)},read:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g=[],p=!0,m=this.getModel(),x=0,y=e.getRecordCreator();if(this.isHierarchical)g=this.getTreeData();else if(d=(l=this.getIds()).length,c=e.getId())null!==(u=this.getRecord(c))&&(s=y?y(u,m):new m(u)),s?g.push(s):p=!1;else{for(n=e.getSorters(),i=e.getFilters(),r=e.getLimit(),t=[],h=0;h<d;h++)u=this.getRecord(l[h]),s=y?y(u,m):new m(u),t.push(s);for(n&&Ext.Array.sort(t,Ext.util.Sorter.createComparator(n)),h=e.getStart()||0;h<d;h++){if(s=t[h],a=!0,i)for(f=0,o=i.length;f<o;f++)a=i[f].filter(s);if(a&&(g.push(s),x++),r&&x===r)break}}p?(e.setResultSet(new Ext.data.ResultSet({records:g,total:g.length,loaded:!0})),e.setSuccessful(!0)):e.setException("Unable to load records")},update:function(e){var t,i,n,r=e.getRecords(),o=r.length,a=this.getIds();for(n=0;n<o;n++)t=r[n],this.setRecord(t),t.commit(),void 0!==(i=t.getId())&&-1===Ext.Array.indexOf(a,i)&&a.push(i);this.setIds(a),e.setSuccessful(!0)},erase:function(e){for(var t,i=e.getRecords(),n=this.getIds(),r=n.length,o=[],a={},s=i.length;s--;)Ext.apply(a,this.removeRecord(i[s]));for(s=0;s<r;s++)a[t=n[s]]||o.push(t);this.setIds(o),e.setSuccessful(!0)},getRecord:function(e){var t,i=this.cache;return(t=i[e]?i[e]:Ext.decode(this.getStorageObject().getItem(this.getRecordKey(e))))?((i[e]=t)[this.getModel().prototype.idProperty]=e,Ext.merge({},t)):null},setRecord:function(e,t){t?e.set("id",t,{commit:!0}):t=e.getId();for(var i,n,r,o,a,s=e.getData(),l={},d=this.getModel(),u=d.getFields(),c=u.length,h=0;h<c;h++)n=(i=u[h]).name,i.persist&&(a=s[n],i.isDateField&&i.dateFormat&&Ext.isDate(a)?a=Ext.Date.format(a,i.dateFormat):i.serialize&&(a=i.serialize(a,e)),l[n]=a);delete l[d.prototype.idProperty],e.isNode&&1===e.get("depth")&&delete l.parentId,r=this.getStorageObject(),o=this.getRecordKey(t),this.cache[t]=l,r.removeItem(o),r.setItem(o,Ext.encode(l))},removeRecord:function(e){var t,i,n=e.getId(),r={};if(r[n]=e,this.getStorageObject().removeItem(this.getRecordKey(n)),delete this.cache[n],e.childNodes)for(t=(i=e.childNodes).length;t--;)Ext.apply(r,this.removeRecord(i[t]));return r},getRecordKey:function(e){return e.isModel&&(e=e.getId()),Ext.String.format("{0}-{1}",this.getId(),e)},getRecordCounterKey:function(){return Ext.String.format("{0}-counter",this.getId())},getTreeKey:function(){return Ext.String.format("{0}-tree",this.getId())},getIds:function(){var e,t=(this.getStorageObject().getItem(this.getId())||"").split(","),i=t.length,n=this.getIdField().isStringField;if(1===i&&""===t[0])t=[];else for(e=0;e<i;e++)t[e]=n?t[e]:+t[e];return t},getIdField:function(){return this.getModel().prototype.idField},setIds:function(e){var t=this.getStorageObject(),i=e.join(","),n=this.getId();t.removeItem(n),Ext.isEmpty(i)||t.setItem(n,i)},getNextId:function(){var e,t=this.getStorageObject(),i=this.getRecordCounterKey(),n=this.getIdField().isStringField;return e=this.idGenerator.generate(),t.setItem(i,e),n&&(e+=""),e},getTreeData:function(){for(var e,t,i,n,r,o,a=this.getIds(),s=a.length,l=[],d={},u=[],c=0,h=this.getModel(),f=h.prototype.idProperty;c<s;c++)o=a[c],t=this.getRecord(o),l.push(t),(d[o]=t).parentId||u.push(t);for(e=u.length,Ext.Array.sort(l,this.sortByParentId),c=e;c<s;c++)n=(t=l[c]).parentId,i&&i[f]===n||((i=d[n]).children=r=[]),r.push(t);for(c=s;c--;)(t=l[c]).children||t.leaf||(t.loaded=!0);for(c=e;c--;)t=u[c],u[c]=new h(t);return u},sortByParentId:function(e,t){return(e.parentId||0)-(t.parentId||0)},initialize:function(){var e=this.getStorageObject(),t=+e.getItem(this.getRecordCounterKey()),i=this.getId();e.setItem(i,e.getItem(i)||""),e.getItem(this.getTreeKey())&&(this.isHierarchical=!0),this.idGenerator=new Ext.data.identifier.Sequential({seed:t?1+t:1})},clear:function(){var e,t=this.getStorageObject(),i=this.getIds(),n=i.length;for(e=0;e<n;e++)t.removeItem(this.getRecordKey(i[e]));t.removeItem(this.getRecordCounterKey()),t.removeItem(this.getTreeKey()),t.removeItem(this.getId()),this.cache={}},getStorageObject:function(){Ext.raise("The getStorageObject function has not been defined in your Ext.data.proxy.WebStorage subclass")}}),Ext.define("Ext.data.proxy.LocalStorage",{extend:"Ext.data.proxy.WebStorage",alias:"proxy.localstorage",alternateClassName:"Ext.data.LocalStorageProxy",getStorageObject:function(){return window.localStorage}}),Ext.define("Ext.data.proxy.Rest",{extend:"Ext.data.proxy.Ajax",alternateClassName:"Ext.data.RestProxy",alias:"proxy.rest",defaultActionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},slashRe:/\/$/,periodRe:/\.$/,config:{appendId:!0,format:null,batchActions:!1,actionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"}},buildUrl:function(e){var t,i,n=e.getOperation(),r=n.getRecords(),o=r?r[0]:null,a=this.getFormat(),s=this.getUrl(e);return t=o&&!o.phantom?o.getId():n.getId(),this.getAppendId()&&this.isValidId(t)&&(s.match(this.slashRe)||(s+="/"),s+=encodeURIComponent(t),(i=e.getParams())&&delete i[this.getIdParam()]),a&&(s.match(this.periodRe)||(s+="."),s+=a),e.setUrl(s),this.callParent([e])},isValidId:function(e){return e||0===e}}),Ext.define("Ext.data.proxy.SessionStorage",{extend:"Ext.data.proxy.WebStorage",alias:"proxy.sessionstorage",alternateClassName:"Ext.data.SessionStorageProxy",getStorageObject:function(){return window.sessionStorage}}),Ext.define("Ext.data.summary.Base",{mixins:["Ext.mixin.Factoryable"],alias:"data.summary.base",isAggregator:!0,factoryConfig:{defaultType:"base",cacheable:!0},constructor:function(e){var t=e&&e.calculate;t&&(delete(e=Ext.apply({},e)).calculate,this.calculate=t),this.initConfig(e)},extractValue:function(e,t,i){var n;return e&&(i&&(e=e[i]),n=e[t]),n}},function(){Ext.Factory.on("dataSummary",function(e,t){if("function"==typeof t)return e({calculate:t})})}),Ext.define("Ext.data.summary.Sum",{extend:"Ext.data.summary.Base",alias:"data.summary.sum",calculate:function(e,t,i,n,r){var o,a,s,l=r-n;for(o=0;o<l;++o)s=this.extractValue(e[n+o],t,i),a=o?a+s:s;return a}}),Ext.define("Ext.data.summary.Average",{extend:"Ext.data.summary.Sum",alias:"data.summary.average",calculate:function(e,t,i,n,r){var o,a=r-n;return 0<a&&(o=this.callParent([e,t,i,n,r])/a),o}}),Ext.define("Ext.data.summary.Count",{extend:"Ext.data.summary.Base",alias:"data.summary.count",calculate:function(e,t,i,n,r){return r-n}}),Ext.define("Ext.data.summary.Max",{extend:"Ext.data.summary.Base",alias:"data.summary.max",calculate:function(e,t,i,n,r){var o,a,s=this.extractValue(e[n],t,i);for(o=n;o<r;++o)s<(a=this.extractValue(e[o],t,i))&&(s=a);return s}}),Ext.define("Ext.data.summary.Min",{extend:"Ext.data.summary.Base",alias:"data.summary.min",calculate:function(e,t,i,n,r){var o,a,s=this.extractValue(e[n],t,i);for(o=n;o<r;++o)(a=this.extractValue(e[o],t,i))<s&&(s=a);return s}}),Ext.define("Ext.data.summary.None",{extend:"Ext.data.summary.Base",alias:"data.summary.none",config:{value:null},calculate:function(){return this.getValue()}}),Ext.define("Ext.data.validator.AbstractDate",{extend:"Ext.data.validator.Validator",config:{message:null,format:""},applyFormat:function(e){return e=e||this.getDefaultFormat(),Ext.isArray(e)||(e=[e]),e},parse:function(e){if(Ext.isDate(e))return e;var t,i=this.getFormat(),n=i.length,r=null;for(t=0;t<n&&!r;++t)r=Ext.Date.parse(e,i[t],!0);return r},validate:function(e){return!!this.parse(e)||this.getMessage()}}),Ext.define("Ext.data.validator.Bound",{extend:"Ext.data.validator.Validator",alias:"data.validator.bound",type:"bound",config:{min:void 0,max:void 0,emptyMessage:"Must be present",minOnlyMessage:"Value must be greater than {0}",maxOnlyMessage:"Value must be less than {0}",bothMessage:"Value must be between {0} and {1}"},resetMessages:function(){this._bothMsg=this._minMsg=this._maxMsg=null},updateMin:function(){this.resetMessages()},updateMax:function(){this.resetMessages()},updateMinOnlyMessage:function(){this.resetMessages()},updateMaxOnlyMessage:function(){this.resetMessages()},updateBothMessage:function(){this.resetMessages()},validate:function(e){var t=this,i=t.getMin(),n=t.getMax(),r=null!=i,o=null!=n,a=this.validateValue(e);return!0!==a||(e=t.getValue(e),r&&o?(e<i||n<e)&&(a=t._bothMsg||(t._bothMsg=Ext.String.format(t.getBothMessage(),i,n))):r?e<i&&(a=t._minMsg||(t._minMsg=Ext.String.format(t.getMinOnlyMessage(),i))):o&&n<e&&(a=t._maxMsg||(t._maxMsg=Ext.String.format(t.getMaxOnlyMessage(),n)))),a},validateValue:function(e){return null!=e||this.getEmptyMessage()},getValue:Ext.identityFn}),Ext.define("Ext.data.validator.Format",{extend:"Ext.data.validator.Validator",alias:"data.validator.format",type:"format",config:{message:"Is in the wrong format",matcher:void 0},constructor:function(){this.callParent(arguments),this.getMatcher()||Ext.raise("validator.Format must be configured with a matcher")},validate:function(e){var t=this.getMatcher(),i=t&&t.test(e);return i||this.getMessage()}}),Ext.define("Ext.data.validator.CIDRv4",{extend:"Ext.data.validator.Format",alias:"data.validator.cidrv4",type:"cidrv4",message:"Is not a valid CIDR block",matcher:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/([0-9]|[1-2][0-9]|3[0-2]))$/}),Ext.define("Ext.data.validator.CIDRv6",{extend:"Ext.data.validator.Format",alias:"data.validator.cidrv6",type:"cidrv6",message:"Is not a valid CIDR block",matcher:/^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*(\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))?$/}),Ext.define("Ext.data.validator.Number",{extend:"Ext.data.validator.Validator",alias:"data.validator.number",type:"number",config:{decimalSeparator:void 0,message:"Is not a valid number",thousandSeparator:void 0},constructor:function(e){this.callParent([e]),this.rebuildMatcher()},applyDecimalSeparator:function(e){return void 0===e?Ext.util.Format.decimalSeparator:e},updateDecimalSeparator:function(){this.rebuildMatcher()},applyThousandSeparator:function(e){return void 0===e?Ext.util.Format.thousandSeparator:e},updateThousandSeparator:function(){this.rebuildMatcher()},parse:function(e){var t=this.getDecimalSeparator(),i=Ext.Number;if("string"==typeof e){if(!this.matcher.test(e))return null;e=this.parseValue(e)}return t?i.parseFloat(e):i.parseInt(e)},validate:function(e){return null!==this.parse(e)||this.getMessage()},privates:{getMatcherText:function(e){var t=this.getThousandSeparator(),i=this.getDecimalSeparator(),n="(?:";return t&&(n+="(?:\\d{1,3}("+(t=Ext.String.escapeRegex(t))+"\\d{3})*)|"),n+="\\d*)",i&&(n+="(?:"+(i=Ext.String.escapeRegex(i))+"\\d*)?"),e||(n=this.getSignPart()+n),n},getSignPart:function(){return"(\\+|\\-)?"},parseValue:function(e){var t,i=this.thousandMatcher;return i&&(e=e.replace(i,"")),(t=this.getDecimalSeparator())&&"."!==t&&(e=e.replace(t,".")),e},rebuildMatcher:function(){var e;this.isConfiguring||(e=this.getThousandSeparator(),this.matcher=new RegExp("^"+this.getMatcherText()+"$"),e&&(this.thousandMatcher=e?new RegExp(Ext.String.escapeRegex(e),"g"):null))}}}),Ext.define("Ext.data.validator.Currency",{extend:"Ext.data.validator.Number",alias:"data.validator.currency",type:"currency",config:{symbolAtEnd:void 0,spacer:void 0,symbol:void 0},message:"Is not a valid currency amount",applySymbolAtEnd:function(e){return void 0===e?Ext.util.Format.currencyAtEnd:e},updateSymbolAtEnd:function(){this.rebuildMatcher()},applySpacer:function(e){return void 0===e?Ext.util.Format.currencySpacer:e},updateSpacer:function(){this.rebuildMatcher()},applySymbol:function(e){return void 0===e?Ext.util.Format.currencySign:e},updateSymbol:function(){this.rebuildMatcher()},privates:{getMatcherText:function(){var e=this.callParent([!0]),t=this.getSymbolMatcher();return this.getSymbolAtEnd()?e+=t:e=t+e,this.getSignPart()+e},getSymbolMatcher:function(){var e=Ext.String.escapeRegex(this.getSymbol()),t=Ext.String.escapeRegex(this.getSpacer()||"");return"(?:"+(this.getSymbolAtEnd()?t+e:e+t)+")?"},parseValue:function(e){return e=e.replace(this.currencyMatcher,this.atEnd?"":"$1"),this.callParent([e])},rebuildMatcher:function(){var e,t,i;this.callParent(),this.isConfiguring||(t=this.getSymbolAtEnd(),e=this.getSymbolMatcher(),i=this.getSignPart(),this.atEnd=t,this.currencyMatcher=new RegExp(t?e+"$":"^"+i+e))}}}),Ext.define("Ext.data.validator.CurrencyUS",{extend:"Ext.data.validator.Currency",alias:"data.validator.currency-us",type:"currency-us",thousandSeparator:",",decimalSeparator:".",symbol:"$",spacer:"",symbolAtEnd:!1}),Ext.define("Ext.data.validator.Date",{extend:"Ext.data.validator.AbstractDate",alias:"data.validator.date",type:"date",isDateValidator:!0,message:"Is not a valid date",privates:{getDefaultFormat:function(){return[Ext.Date.defaultFormat,"m/d/Y","n/j/Y","n/j/y","m/j/y","n/d/y","m/j/Y","n/d/Y","m-d-y","n-d-y","m-d-Y","mdy","mdY","Y-m-d"]}}}),Ext.define("Ext.data.validator.DateTime",{extend:"Ext.data.validator.AbstractDate",alias:"data.validator.datetime",type:"datetime",isDateTimeValidator:!0,message:"Is not a valid date and time",privates:{getDefaultFormat:function(){var e=Ext.Date;return e.defaultFormat+" "+e.defaultTimeFormat}}}),Ext.define("Ext.data.validator.Email",{extend:"Ext.data.validator.Format",alias:"data.validator.email",type:"email",message:"Is not a valid email address",matcher:/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+\/=?\^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/}),Ext.define("Ext.data.validator.List",{extend:"Ext.data.validator.Validator",alias:"data.validator.list",type:"list",config:{list:null,message:null},inclusion:null,validate:function(e){var t=Ext.Array.contains(this.getList(),e),i=this.inclusion;return i&&t||!i&&!t||this.getMessage()}}),Ext.define("Ext.data.validator.Exclusion",{extend:"Ext.data.validator.List",alias:"data.validator.exclusion",type:"exclusion",message:"Is a value that has been excluded",constructor:function(){this.callParent(arguments),this.getList()||Ext.raise("validator.Exclusion requires a list")},inclusion:!1}),Ext.define("Ext.data.validator.IPAddress",{extend:"Ext.data.validator.Format",alias:"data.validator.ipaddress",type:"ipaddress",message:"Is not a valid IP address",matcher:new RegExp("^(((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|((([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]).){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]).){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))))$")}),Ext.define("Ext.data.validator.Inclusion",{extend:"Ext.data.validator.List",alias:"data.validator.inclusion",type:"inclusion",message:"Is not in the list of acceptable values",constructor:function(){this.callParent(arguments),this.getList()||Ext.raise("validator.Inclusion requires a list")},inclusion:!0}),Ext.define("Ext.data.validator.Length",{extend:"Ext.data.validator.Bound",alias:"data.validator.length",type:"length",minOnlyMessage:"Length must be at least {0}",maxOnlyMessage:"Length must be no more than {0}",bothMessage:"Length must be between {0} and {1}",getValue:function(e){return String(e).length}}),Ext.define("Ext.data.validator.Presence",{extend:"Ext.data.validator.Validator",alias:"data.validator.presence",type:"presence",isPresence:!0,config:{message:"Must be present",allowEmpty:!1},validate:function(e){var t=!(null==e);return t&&!this.getAllowEmpty()&&(t=""!==e),!!t||this.getMessage()}}),Ext.define("Ext.data.validator.NotNull",{extend:"Ext.data.validator.Presence",alias:"data.validator.notnull",type:"notnull",allowEmpty:!0}),Ext.define("Ext.data.validator.Phone",{extend:"Ext.data.validator.Format",alias:"data.validator.phone",type:"phone",message:"Is not a valid phone number",matcher:new RegExp("^ *(?:\\+?(\\d{1,3})[- .]?)?(?:(?:(\\d{3})|\\((\\d{3})\\))?[- .]?)(?:([2-9]\\d{2})[- .]?)(\\d{4})(?: *(?:e?xt?) *(\\d*))? *$")}),Ext.define("Ext.data.validator.Range",{extend:"Ext.data.validator.Bound",alias:"data.validator.range",type:"range",minOnlyMessage:"Must be at least {0}",maxOnlyMessage:"Must be no more than than {0}",bothMessage:"Must be between {0} and {1}",config:{nanMessage:"Must be numeric"},validateValue:function(e){var t=this.callParent([e]);return!0===t&&isNaN(e)&&(t=this.getNanMessage()),t}}),Ext.define("Ext.data.validator.Time",{extend:"Ext.data.validator.AbstractDate",alias:"data.validator.time",type:"time",isTimeValidator:!0,message:"Is not a valid time",privates:{getDefaultFormat:function(){return Ext.Date.defaultTimeFormat}}}),Ext.define("Ext.data.validator.Url",{extend:"Ext.data.validator.Format",alias:"data.validator.url",type:"url",message:"Is not a valid URL",matcher:/^(http:\/\/|https:\/\/|ftp:\/\/|\/\/)([-a-zA-Z0-9@:%_\+.~#?&//=])+$/}),Ext.define("Ext.data.virtual.Group",{isVirtualGroup:!0,firstRecords:null,id:"",summaryRecord:null,constructor:function(e){this.id=e,this.firstRecords=[]},first:function(){return this.firstRecords[0]||null},getGroupKey:function(){return this.id},getSummaryRecord:function(){return this.summaryRecord}}),Ext.define("Ext.data.virtual.Page",{isVirtualPage:!0,begin:0,end:0,error:null,locked:null,number:0,operation:null,pageMap:null,records:null,state:null,constructor:function(e){var t;Ext.apply(this,e),t=this.pageMap.store.getPageSize(),this.begin=this.number*t,this.end=this.begin+t,this.locks={active:0,prefetch:0}},destroy:function(){var e=this.operation;this.state="destroyed",e&&e.abort(),this.callParent()},adjustLock:function(e,t){var i=this.locks,n=this.pageMap,r=null,o=this.locked;e in i||Ext.raise('Bad lock type (expected "active" or "prefetch"): "'+e+'"'),1!==t&&-1!==t&&Ext.raise("Invalid lock count delta (should be 1 or -1): "+t),i[e]+=t,i.active?r="active":i.prefetch&&(r="prefetch"),r!==o&&(this.locked=r,n&&n.onPageLockChange(this,r,o))},clearRecords:function(e,t){var i,n,r=this.begin,o=this.records;if(o)if(n=o.length,t)for(i=0;i<n;++i)delete e[o[i][t]];else for(i=0;i<n;++i)delete e[r+i]},fillRecords:function(e,t,i){var n,r,o,a=this.records,s=this.begin,l=this.pageMap.store;if(a)if(r=a.length,t)for(n=0;n<r;++n)(o=a[n]).join(l),e[o[t]]=i?s+n:o;else for(n=0;n<r;++n)a[n].join(l),e[s+n]=a[n]},isInitial:function(){return null===this.state},isLoaded:function(){return"loaded"===this.state},isLoading:function(){return"loading"===this.state},load:function(e){var t;this.state="loading",t=this.pageMap.store.loadVirtualPage(this,this.onLoad,this,e),"loading"===this.state&&(this.operation=t)},privates:{onLoad:function(e){this.operation=null,this.destroyed||((this.error=e.getError())?this.state="error":(this.records=e.getRecords(),this.state="loaded"),this.pageMap.onPageLoad(this))}}}),Ext.define("Ext.data.virtual.PageMap",{requires:["Ext.data.virtual.Page"],isVirtualPageMap:!0,config:{cacheSize:10,concurrentLoading:1,pageCount:null},generation:0,store:null,constructor:function(e){this.prefetchSortFn=this.prefetchSortFn.bind(this),this.initConfig(e),this.clear()},destroy:function(){this.clear(!0),this.callParent()},canSatisfy:function(e){var t=this.getPageIndex(e.end),i=this.getPageCount();return null===i||t<i},clear:function(e){var t,i=this,n=!e||null,r=i.pages;if(++i.generation,i.byId=n&&{},i.byInternalId=n&&{},i.cache=n&&[],i.indexMap=n&&{},i.pages=n&&{},i.loading=n&&[],i.loadQueues=n&&{active:[],prefetch:[]},r)for(t in r)i.destroyPage(r[t])},getPage:function(e,t){var i,n=this.getPageCount(),r=this.pages;return null===n||e<n?(i=r[e])||!1===t||(r[e]=i=new Ext.data.virtual.Page({pageMap:this,number:e})):Ext.raise("Invalid page number "+e+" when limit is "+n),i||null},getPageIndex:function(e){return e.isEntity&&(e=this.indexOf(e)),Math.floor(e/this.store.getPageSize())},getPageOf:function(e,t){var i=this.store.getPageSize(),n=Math.floor(e/i);return this.getPage(n,t)},getPages:function(e,t){var i,n=this.store.getPageSize(),r=Math.floor(e/n),o=Math.ceil(t/n),a={};for(i=r;i<o;++i)a[i]=this.getPage(i);return a},flushNextLoad:function(){var e=this.queueTimer;e&&Ext.unasap(e),this.loadNext()},indexOf:function(e){var t;return e&&(t=this.indexMap[e.internalId]),t||0===t?t:-1},getByInternalId:function(e){var t,i=this.indexMap[e];if((i||0===i)&&(t=this.pages[Math.floor(i/this.store.getPageSize())]))return t.records[i-t.begin]},updatePageCount:function(e,t){var i,n,r=this.pages;if(null===t||e<t)for(i in r)(n=r[i]).number>=e&&(this.clearPage(n),this.destroyPage(n))},privates:{queueTimer:null,clearPage:function(e,t){var i=Ext.Array,n=this.loadQueues;delete this.pages[e.number],e.clearRecords(this.byId,"id"),e.clearRecords(this.byInternalId,"internalId"),e.clearRecords(this.indexMap,"internalId"),i.remove(n.active,e),i.remove(n.prefetch,e),t||Ext.Array.remove(this.cache,e)},destroyPage:function(e){this.store.onPageDestroy(e),e.destroy()},loadNext:function(){var e,t,i=this.loading,n=this.loadQueues;if(!this.destroyed)for(e=this.getConcurrentLoading(),this.queueTimer=null;i.length<e&&(t=n.active.shift()||n.prefetch.shift());)i.push(t),t.load()},onPageLoad:function(e){var t,i=this.store,n=i.activeRanges,r=n.length;if(Ext.Array.remove(this.loading,e),!e.error)for(e.fillRecords(this.byId,"id"),e.fillRecords(this.byInternalId,"internalId"),e.fillRecords(this.indexMap,"internalId",!0),i.onPageDataAcquired(e),t=0;t<r;++t)n[t].onPageLoad(e);this.flushNextLoad()},onPageLockChange:function(e,t,i){var n,r,o=this,a=o.cache,s=o.loadQueues,l=o.store;if(e.isInitial()&&(i&&Ext.Array.remove(s[i],e),t&&(s[t].push(e),r=o.getConcurrentLoading(),!o.queueTimer&&o.loading.length<r&&(o.queueTimer=Ext.asap(o.loadNext,o)))),t)i||Ext.Array.remove(a,e);else for(a.push(e),n=o.getCacheSize();a.length>n;)e=a.shift(),o.clearPage(e,!0),l.onPageEvicted(e),o.destroyPage(e)},prefetchSortFn:function(e,t){e=e.number,t=t.number;var i=Math,n=this.sortFirstPage,r=this.sortLastPage,o=this.sortDirection,a=e<n,s=t<n;return(e=a?i.abs(n-e):i.abs(r-e))===(t=s?i.abs(n-t):i.abs(r-t))?a?o:-o:e-t},prioritizePrefetch:function(e,t,i){this.sortDirection=e,this.sortFirstPage=t,this.sortLastPage=i,this.loadQueues.prefetch.sort(this.prefetchSortFn)}}}),Ext.define("Ext.data.virtual.Range",{extend:"Ext.data.Range",isVirtualRange:!0,callback:null,prefetch:!1,scope:null,direction:1,constructor:function(e){this.adjustingPages=[],this.callParent([e])},reset:function(){this.records={},this.activePages=this.prefetchPages=null},privates:{adjustPageLocks:function(e,t){var i,n=this.adjustingPages,r=n.length;for(1<r&&n.sort(this.direction<0?this.pageSortBackFn:this.pageSortFwdFn),i=0;i<r;++i)n[i].adjustLock(e,t);n.length=0},doGoto:function(){var e,t,i,n,r,o,a,s=this,l=s.begin,d=s.end,u=s.prefetch,c=s.records,h=s.store,f=h.pageMap,g=h.totalCount,p=s.lastBegin,m=s.lastEnd,x=s.activePages,y=s.prefetchPages,v=s.trailingBufferZone,E=s.leadingBufferZone,b=s.adjustingPages;for(i in b.length=0,(n=p<l&&d<m||l<p&&m<d?s.direction:l<p?-1:p<l?1:s.direction)<0&&(i=v,v=E,E=i),s.direction=n,s.activePages=e=f.getPages(l,d),u&&(s.prefetchBegin=r=Math.max(0,l-v),null===g&&(g=Number.MAX_VALUE),s.prefetchEnd=o=Math.min(g,d+E),s.prefetchPages=a=f.getPages(r,o)),e)t=e[i],a&&delete a[i],x&&i in x?delete x[i]:(t.adjustLock("active",1),t.fillRecords(c));if(a)for(i in a)y&&i in y?delete y[i]:a[i].adjustLock("prefetch",1);if(y){for(i in y)b.push(y[i]);b.length&&s.adjustPageLocks("prefetch",-1)}if(x){for(i in x)b.push(t=x[i]),t.clearRecords(c);b.length&&s.adjustPageLocks("active",-1)}a&&f.prioritizePrefetch(n,f.getPageIndex(l),f.getPageIndex(d-1)),(s.lastBegin=l)===(s.lastEnd=d)&&0===l&&this.triggerCallback(0,0)},onPageDestroy:function(e){var t=e.number,i=this.activePages,n=this.prefetchPages;i&&delete i[t],n&&delete n[t]},onPageLoad:function(e){var t,i,n=this.activeWait;this.activePages[e.number]&&(e.fillRecords(this.records),t=Math.max(this.begin,e.begin),i=Math.min(this.end,e.end),this.triggerCallback(t,i),n&&(n.got++,this.resolveWaitIfSatisfied()))},pageSortBackFn:function(e,t){return t.number-e.number},pageSortFwdFn:function(e,t){return e.number-t.number},refresh:function(){this.records=this.records||{}},reload:function(){var e=this.begin,t=this.end;this.begin=this.end=0,this.direction=1,this.prefetchPages=this.activePages=null,this.goto(e,t)},resolveWaitIfSatisfied:function(){var e=this.activeWait;e&&e.got===e.needed&&this.resolveWait(this)},setupWait:function(e,t){var i,n=this.callParent([e,t]),r=this.store.pageMap.getPages(e,t),o=0;for(i in r)o+=r[i].isLoaded()?0:1;return n.got=0,n.needed=o,n},triggerCallback:function(e,t){var i=this.callback;i&&Ext.callback(i,this.scope,[this,e,t])}}}),Ext.define("Ext.data.virtual.Store",{extend:"Ext.data.ProxyStore",alias:"store.virtual",requires:["Ext.util.SorterCollection","Ext.util.FilterCollection","Ext.data.virtual.PageMap","Ext.data.virtual.Range"],uses:["Ext.data.virtual.Group"],isVirtualStore:!0,config:{data:null,totalCount:null,leadingBufferZone:200,trailingBufferZone:50},remoteSort:!0,remoteFilter:!0,sortOnLoad:!1,trackRemoved:!1,constructor:function(e){this.sortByPage=this.sortByPage.bind(this),this.activeRanges=[],this.pageMap=new Ext.data.virtual.PageMap({store:this}),this.callParent([e])},doDestroy:function(){this.pageMap.destroy(),this.callParent()},applyGrouper:function(e){return this.group(e),this.grouper},contains:function(e){return-1<this.indexOf(e)},createActiveRange:function(e){var t=Ext.apply({leadingBufferZone:this.getLeadingBufferZone(),trailingBufferZone:this.getTrailingBufferZone(),store:this},e);return new Ext.data.virtual.Range(t)},getAt:function(e){var t,i=this.pageMap.getPageOf(e,!1);return i&&i.records&&(t=i.records[e-i.begin]),t||null},getById:function(e){return this.pageMap.byId[e]||null},getCount:function(){return this.totalCount||0},getGrouper:function(){return this.grouper},getGroups:function(){var e=this.groupCollection;return e||(this.groupCollection=e=new Ext.util.Collection),e},getSummaryRecord:function(){return this.summaryRecord||null},isGrouped:function(){return!!this.grouper},group:function(e,t){(e=e||null)&&("string"==typeof e&&(e={property:e,direction:t||"ASC"}),e.isGrouper||(e=new Ext.util.Grouper(e)),e.setRoot("data"),this.getGroups().getSorters().splice(0,1,{property:"id",direction:e.getDirection()})),this.grouper=e,this.isConfiguring||(this.reloadRanges(),this.fireGroupChange(e))},getByInternalId:function(e){return this.pageMap.getByInternalId(e)},indexOf:function(e){return this.pageMap.indexOf(e)},indexOfId:function(e){var t=this.getById(e);return t?this.indexOf(t):-1},isLoaded:function(){return Ext.isNumber(this.totalCount)},load:function(e){var t=(e=e||{}).page||1,i=this.pageMap.getPage(t-1,!0);i.isLoading()||i.load({callback:e.callback,scope:e.scope})},reload:function(e){return"function"==typeof e&&(e={callback:e}),!1===this.fireEvent("beforereload")?null:(e=Ext.apply({internalScope:this,internalCallback:this.handleReload,page:1},e),this.pageMap.clear(),this.getGroups().clear(),this.loadInternal(e))},reloadRanges:function(){var e,t=this.activeRanges;for(this.pageMap.clear(),this.getGroups().clear(),e=t.length;0<e--;)t[e].reload()},removeAll:function(){var e,t=this.activeRanges;for(this.pageMap.clear(),e=t.length;0<e--;)t[e].reset();this.fireEvent("clear",this)},applyProxy:function(e){return(e=this.callParent([e]))&&e.setEnablePaging&&e.setEnablePaging(!0),e},createFiltersCollection:function(){return new Ext.util.FilterCollection},createSortersCollection:function(){return new Ext.util.SorterCollection},onFilterEndUpdate:function(){var e=this.getFilters(!1);this.isConfiguring||(this.reload(),this.fireEvent("filterchange",this,e.getRange()))},onSorterEndUpdate:function(){var e=this.getSorters().getRange(),t=!this.isConfiguring;t&&this.fireEvent("beforesort",this,e),t&&(this.reloadRanges(),this.fireEvent("sort",this,e))},updatePageSize:function(e){var t=this.totalCount;null!==t&&this.pageMap.setPageCount(Math.ceil(t/e))},updateTotalCount:function(e,t){var i=this.pageMap;this.totalCount=e,i.setPageCount(Math.ceil(e/this.getPageSize())),this.fireEvent("totalcountchange",this,e,t)},add:function(){Ext.raise("Virtual stores do not support the add() method")},insert:function(){Ext.raise("Virtual stores do not support the insert() method")},filter:function(){this.getRemoteFilter()||Ext.raise("Virtual stores do not support local filtering"),this.callParent(arguments)},filterBy:function(){Ext.raise("Virtual stores do not support local filtering")},loadData:function(){Ext.raise("Virtual stores do not support the loadData() method")},applyData:function(){Ext.raise("Virtual stores do not support direct data loading")},updateRemoteFilter:function(e,t){!1===e&&Ext.raise("Virtual stores are always remotely filtered."),this.callParent([e,t])},updateRemoteSort:function(e,t){!1===e&&Ext.raise("Virtual stores are always remotely sorted."),this.callParent([e,t])},updateTrackRemoved:function(e){!1!==e&&Ext.raise("Virtual stores do not support trackRemoved."),this.callParent(arguments)},afterEdit:function(e,t){this.fireEvent("update",this,e,Ext.data.Model.EDIT,t),this.fireEvent("datachanged",this)},privates:{attachSummaryData:function(e){var t,i,n,r,o,a=e.getSummaryData();if(a&&(this.summaryRecord=a),(a=e.getGroupData())&&(t=this.getGrouper()))for(this.groupSummaryData=r={},n=0,i=a.length;n<i;++n)o=a[n],r[t.getGroupString(o)]=o},handleReload:function(e){var t,i,n=this.activeRanges,r=n.length,o=this.pageMap,a=e.getResultSet(),s=e.wasSuccessful(),l=[];if(s)for(this.readTotalCount(a),this.fireEvent("reload",this,e),t=0;t<r;++t)i=n[t],o.canSatisfy(i)&&i.reload();a&&(l=a.records),this.fireEvent("load",this,l,s,e)},loadInternal:function(e){"function"==typeof e&&(e={callback:e});var t=e&&e.page||1,i=this.getPageSize(),n=this.createOperation("read",Ext.apply({start:(t-1)*i,limit:i,page:t,filters:this.getFilters().items,sorters:this.getSorters().items,grouper:this.getGrouper()},e));return!1!==this.fireEvent("beforeload",this,n)?(this.onBeforeLoad(n),n.execute()):n.setCompleted(),n},loadVirtualPage:function(n,r,o,e){var a=this,s=a.pageMap.generation;return a.loadInternal(Ext.apply({page:n.number+1,internalCallback:function(e){var t=e.getResultSet(),i=[];s===a.pageMap.generation&&(e.wasSuccessful()&&(a.readTotalCount(t),a.attachSummaryData(t)),r.call(o||n,e),a.groupSummaryData=null,t&&(i=t.records),a.fireEvent("load",a,i,e.wasSuccessful(),e))}},e))},lockGroups:function(e,t){var i,n,r,o,a,s,l,d=this.getGroups(),u=t.groupInfo={},c=t.records,h=c.length,f=this.groupSummaryData,g=this.pageMap,p=t.number;for(n=0;n<h;++n)a=c[n],u[r=e.getGroupString(a)]||(u[r]=a,(i=d.get(r))||(i=new Ext.data.virtual.Group(r),d.add(i)),(l=(s=i.firstRecords)[0])&&p<g.getPageIndex(l)?s.unshift(a):s.push(a),(o=f&&f[r])&&(i.summaryRecord=o))},onPageDataAcquired:function(e){var t=this.getGrouper();t&&this.lockGroups(t,e)},onPageDestroy:function(e){var t,i=this.activeRanges,n=i.length;for(t=0;t<n;++t)i[t].onPageDestroy(e)},onPageEvicted:function(e){var t=this.getGrouper();t&&this.releaseGroups(t,e)},readTotalCount:function(e){var t=e.getRemoteTotal();isNaN(t)||this.setTotalCount(t)},releaseGroups:function(e,t){var i,n,r,o,a=this.getGroups(),s=t.groupInfo;for(r in s)i=s[r],1===(n=(o=a.get(r)).firstRecords).length?a.remove(o):n[0]===i?(n.shift(),n.sort(this.sortByPage)):Ext.Array.remove(n,i)},sortByPage:function(e,t){var i=this.pageMap;return i.getPageIndex(e)-i.getPageIndex(t)}}}),Ext.define("Ext.direct.Event",{alias:"direct.event",status:!0,constructor:function(e){Ext.apply(this,e)},getName:function(){return this.name},getData:function(){return this.data}}),Ext.define("Ext.direct.RemotingEvent",{extend:"Ext.direct.Event",alias:"direct.rpc",getTransaction:function(){return this.transaction||Ext.direct.Manager.getTransaction(this.tid)}}),Ext.define("Ext.direct.ExceptionEvent",{extend:"Ext.direct.RemotingEvent",alias:"direct.exception",status:!1}),Ext.define("Ext.direct.JsonProvider",{extend:"Ext.direct.Provider",alias:"direct.jsonprovider",uses:["Ext.direct.ExceptionEvent","Ext.direct.Manager"],parseResponse:function(e){var t=e&&e.responseText;return null!=t?Ext.isObject(t)||Ext.isArray(t)?t:Ext.decode(t):null},createEvents:function(t){var e,i,n=null,r=[];try{n=this.parseResponse(t)}catch(e){return[new Ext.direct.ExceptionEvent({parsingError:!0,data:e,xhr:t,code:Ext.direct.Manager.exceptions.PARSE,message:"Error parsing json response: \n\n "+e})]}if(Ext.isArray(n))for(e=0,i=n.length;e<i;++e)r.push(this.createEvent(n[e]));else Ext.isObject(n)&&r.push(this.createEvent(n));return r},createEvent:function(e){return"object"==typeof e&&"type"in e?Ext.create("direct."+e.type,e):new Ext.direct.ExceptionEvent({data:e,code:Ext.direct.Manager.exceptions.DATA,message:"Invalid data: event type is not specified"})}}),Ext.define("Ext.direct.PollingProvider",{extend:"Ext.direct.JsonProvider",alias:"direct.pollingprovider",requires:["Ext.Ajax","Ext.util.TaskRunner","Ext.direct.ExceptionEvent"],type:"polling",interval:3e3,constructor:function(e){this.callParent([e]),this.pollTask=Ext.TaskManager.newTask({run:this.runPoll,interval:this.interval,scope:this})},destroy:function(){this.pollTask.stop(!0),this.callParent()},doConnect:function(){var e=this.url,t=this.pollFn;if(t&&Ext.isString(t)){var i=t;this.pollFn=t=Ext.direct.Manager.parseMethod(t),Ext.isFunction(t)||Ext.raise("Cannot resolve Ext Direct API method "+i+" for PollingProvider")}else Ext.isFunction(e)&&(Ext.log.warn("Using a function for url is deprecated, use pollFn instead."),this.pollFn=t=e,this.url=e=null);(e||t)&&(this.setInterval(this.interval),this.pollTask.start())},doDisconnect:function(){this.pollTask&&this.pollTask.stop()},getInterval:function(){return this.pollTask&&this.pollTask.interval},setInterval:function(e){var t=this.pollTask;e<100&&Ext.raise("Attempting to configure PollProvider "+this.id+" with interval that is less than 100ms."),this.interval=t.interval=e,this.isConnected()&&t.restart(e)},runPoll:function(){var e,t,i=this,n=i.url,r=i.pollFn,o=i.baseParams;!1!==i.fireEvent("beforepoll",i)&&(r?(e=r.directCfg.method.getArgs({params:void 0!==o?o:{},callback:i.onPollFn,scope:i}),r.apply(window,e)):(t={url:n,callback:i.onData,scope:i,params:o,headers:i.getHeaders()},null!=i.timeout&&(t.timeout=i.timeout),i.sendAjaxRequest(t)),i.fireEvent("poll",i))},onData:function(e,t,i){var n,r,o,a,s=this;if(t)for(n=0,r=(o=s.createEvents(i)).length;n<r;++n)a=o[n],s.fireEvent("data",s,a),a.status||s.fireEvent("exception",s,a);else a=new Ext.direct.ExceptionEvent({data:null,code:Ext.direct.Manager.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:i}),s.fireEvent("data",s,a),s.fireEvent("exception",s,a);s.callParent([e,t,i])},onPollFn:function(e,t,i,n){this.onData(null,i,{responseText:e})},inheritableStatics:{checkConfig:function(e){return e&&"polling"===e.type&&(e.url||e.pollFn)}}}),Ext.define("Ext.direct.RemotingMethod",{constructor:function(e){var t,i,n,r,o=this,a=e.params,s=e.len,l=e.metadata,d={};if(o.name=e.name,o.disableBatching=null!=e.batched&&!e.batched,e.formHandler)o.formHandler=e.formHandler;else if(Ext.isNumeric(s))o.len=s,o.ordered=!0;else for(o.named=!0,o.strict=void 0===e.strict||e.strict,o.params={},i=a&&a.length,n=0;n<i;n++)r=a[n],t=Ext.isObject(r)?r.name:r,o.params[t]=!0;if(l){if(a=l.params,s=l.len,Ext.isNumeric(s))0===s&&Ext.raise("metadata.len cannot be 0 for Ext Direct method "+o.name),d.ordered=!0,d.len=s;else if(Ext.isArray(a)){for(d.named=!0,d.params={},n=0,i=a.length;n<i;n++)r=a[n],d.params[r]=!0;d.strict=void 0===l.strict||l.strict}else Ext.raise("metadata is neither named nor ordered for Ext Direct method "+o.name);o.metadata=d}},getArgs:function(e){var t,i,n=e.params,r=e.paramOrder,o=e.metadata,a=e.options,s=[];if(this.ordered){if(0<this.len)if(r)if(e.paramsAsArray&&1===this.len&&(1<r.length||Ext.isArray(n))){if(Ext.isArray(n))for(t=0,i=n.length;t<i;t++)s.push(this.convertParams(n[t],r,r.length,!0));else s=this.convertParams(n,r,r.length,!0);(!n.allowSingle||1<s.length)&&(s=[s])}else s=this.convertParams(n,r,this.len,!1);else s.push(n)}else s.push(n);return s.push(e.callback,e.scope||window),(a||o)&&(a=Ext.apply({},a),o&&(a.metadata=o),s.push(a)),s},convertParams:function(e,t,i,n){var r,o,a,s=[];for(o=0,a=i;o<a;o++)r=t[o],s.push(e[r]);return n?0===s.length?void 0:1===s.length?s[0]:s:s},getCallData:function(e){var t,i,n,r,o,a,s=this,l=null,d=s.len,u=s.params,c=s.strict;if(s.ordered)i=e[d],n=e[d+1],o=e[d+2],0!==d&&(l=e.slice(0,d));else if(s.formHandler)t=e[0],i=e[1],n=e[2],o=e[3];else if(l=Ext.apply({},e[0]),i=e[1],n=e[2],o=e[3],c)for(r in l)l.hasOwnProperty(r)&&!u[r]&&delete l[r];if(s.metadata&&o&&o.metadata){if(s.metadata.ordered)Ext.isArray(o.metadata)?o.metadata.length<s.metadata.len&&Ext.raise("Not enough parameters in options.metadata for Ext Direct method "+s.name):Ext.raise("options.metadata is not an Array for Ext Direct method "+s.name),a=o.metadata.slice(0,s.metadata.len);else{if(Ext.isObject(o.metadata)||Ext.raise("options.metadata is not an Object for Ext Direct method "+s.name),a=Ext.apply({},o.metadata),s.metadata.strict)for(r in a)a.hasOwnProperty(r)&&!s.metadata.params[r]&&delete a[r];for(r in s.metadata.params)a.hasOwnProperty(r)||Ext.raise("Named parameter "+r+" is missing in options.metadata for Ext Direct method "+s.name)}delete o.metadata}return{form:t,data:l,metadata:a,callback:i,scope:n,options:o}}}),Ext.define("Ext.direct.Transaction",{alias:"direct.transaction",statics:{TRANSACTION_ID:0},constructor:function(e){Ext.apply(this,e),this.id=this.tid=++this.self.TRANSACTION_ID,this.retryCount=0},send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++,this.send()},getProvider:function(){return this.provider}}),Ext.define("Ext.direct.RemotingProvider",{extend:"Ext.direct.JsonProvider",alias:"direct.remotingprovider",requires:["Ext.util.MixedCollection","Ext.util.DelayedTask","Ext.direct.Transaction","Ext.direct.RemotingMethod","Ext.direct.Manager"],type:"remoting",enableBuffer:10,bufferLimit:Number.MAX_VALUE,maxRetries:1,constructor:function(e){this.callParent([e]),this.namespace=(Ext.isString(this.namespace)?Ext.ns(this.namespace):this.namespace)||Ext.global,this.callBuffer=[]},destroy:function(){this.callTask&&this.callTask.cancel(),this.callParent()},connect:function(){this.url||Ext.raise('Error initializing RemotingProvider "'+this.id+'", no url configured.'),this.callParent()},doConnect:function(){this.apiCreated||(this.initAPI(),this.apiCreated=!0)},getNamespace:function(e,t){var i,n,r;for(e=e||Ext.global,n=0,r=(i=t.toString().split(".")).length;n<r;n++)if(void 0===(e=e[i[n]]))return e;return e},createNamespaces:function(e,t){var i,n,r,o;for(e=e||Ext.global,r=0,o=(i=t.toString().split(".")).length;r<o;r++)e[n=i[r]]=e[n]||{},e=e[n];return e},initAPI:function(){var e,t,i,n,r,o,a,s=this.actions,l=this.namespace,d=Ext.direct.Manager;for(e in s)if(s.hasOwnProperty(e))for(t=this.disableNestedActions?(t=l[e])||(l[e]={}):(t=this.getNamespace(l,e))||this.createNamespaces(l,e),n=0,r=(i=s[e]).length;n<r;++n)t[(o=new Ext.direct.RemotingMethod(i[n])).name]=a=this.createHandler(e,o),d.registerMethod(a.$name,a)},createHandler:function(e,t){var i,n=this;return(i=function(){n.invokeFunction(e,t,Array.prototype.slice.call(arguments,0))}).name=i.$name=e+"."+t.name,i.$directFn=!0,i.directCfg=i.$directCfg={action:e,method:t},i},invokeFunction:function(e,t,i){var n,r,o,a;n=this.configureTransaction(e,t,i),!1!==this.fireEvent("beforecall",this,n,t)&&(Ext.direct.Manager.addTransaction(n),n.isForm&&(r=n.form,o="multipart/form-data"===String(r.getAttribute("enctype")).toLowerCase(),a={extTID:n.id,extAction:e,extMethod:t.name,extType:"rpc",extUpload:String(o)},n.metadata&&(a.extMetadata=Ext.JSON.encode(n.metadata)),Ext.apply(n,{form:r,isUpload:o,params:a})),this.queueTransaction(n),this.fireEvent("call",this,n,t))},configureTransaction:function(e,t,i,n){var r,o,a,s,l;return o=(r=t.getCallData(i)).callback,a=r.scope,s=r.options,o&&!Ext.isFunction(o)&&Ext.raise("Callback argument is not a function for Ext Direct method "+e+"."+t.name),o=o&&a?o.bind(a):o,l=Ext.apply({},{provider:this,args:i,action:e,method:t.name,form:r.form,data:r.data,metadata:r.metadata,callbackOptions:s,callback:o,isForm:!!t.formHandler,disableBatching:t.disableBatching}),s&&null!=s.timeout&&(l.timeout=s.timeout),new Ext.direct.Transaction(l)},queueTransaction:function(e){var t=this,i=t.callBuffer,n=t.enableBuffer;e.isForm||!1===n||e.disableBatching||null!=e.timeout?t.sendTransaction(e):(i.push(e),n&&i.length<t.bufferLimit?(t.callTask||(t.callTask=new Ext.util.DelayedTask(t.combineAndSend,t)),t.callTask.delay(Ext.isNumber(n)?n:10)):t.combineAndSend())},combineAndSend:function(){var e=this.callBuffer,t=e.length;0<t&&(this.sendTransaction(1===t?e[0]:e),this.callBuffer=[])},sendTransaction:function(e){var t,i,n,r,o,a,s=this,l=s.enableUrlEncode;if(t={url:s.url,callback:s.onData,scope:s,transaction:e,headers:s.getHeaders()},null!=e.timeout?t.timeout=e.timeout:null!=s.timeout&&(t.timeout=s.timeout),e.isForm)Ext.apply(t,{params:e.params,form:e.form,isUpload:e.isUpload});else{if(Ext.isArray(e))for(i=[],o=0,a=e.length;o<a;++o)r=s.getPayload(e[o]),i.push(r);else i=s.getPayload(e);l?((n={})[Ext.isString(l)?l:"data"]=Ext.encode(i),t.params=n):t.jsonData=i}return s.sendAjaxRequest(t)},getPayload:function(e){var t={action:e.action,method:e.method,data:e.data,type:"rpc",tid:e.id};return e.metadata&&(t.metadata=e.metadata),t},onData:function(e,t,i){var n,r,o,a,s,l,d=this;if(!d.destroying&&!d.destroyed){if(t=(o=t&&d.createEvents(i))&&o.length&&!o[0].parsingError)for(n=0,r=o.length;n<r;++n)a=o[n],d.fireEvent("data",d,a),(s=d.getTransaction(a))&&(!1!==d.fireEvent("beforecallback",d,a,s)&&d.runCallback(s,a,!0),Ext.direct.Manager.removeTransaction(s));else for(l=[].concat(e.transaction),a=o[0]||new Ext.direct.ExceptionEvent({data:null,transaction:s,code:Ext.direct.Manager.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:i}),n=0,r=l.length;n<r;++n)(s=d.getTransaction(l[n]))&&s.retryCount<d.maxRetries?s.retry():(d.fireEvent("data",d,a),d.fireEvent("exception",d,a),s&&!1!==d.fireEvent("beforecallback",d,a,s)&&d.runCallback(s,a,!1),Ext.direct.Manager.removeTransaction(s));d.callParent([e,t,i])}},getTransaction:function(e){return e&&e.tid?Ext.direct.Manager.getTransaction(e.tid):null},runCallback:function(e,t){var i,n,r,o=!!t.status,a=o?"success":"failure";e&&e.callback&&(i=e.callback,n=e.callbackOptions,r=void 0!==t.result?t.result:t.data,Ext.isFunction(i)?i(r,t,o,n):(Ext.callback(i[a],i.scope,[r,t,o,n]),Ext.callback(i.callback,i.scope,[r,t,o,n])))},inheritableStatics:{checkConfig:function(e){return e&&"remoting"===e.type&&e.url&&Ext.isArray(e.actions)}}}),Ext.define("Ext.dom.GarbageCollector",{singleton:!0,interval:3e4,constructor:function(){this.lastTime=Ext.now(),this.onTick=this.onTick.bind(this),this.onTick.$skipTimerCheck=!0,this.resume()},collect:function(){var t,e,i,n,r,o,a=Ext.cache,s=[];for(t in a)if(a.hasOwnProperty(t)&&!(i=a[t]).skipGarbageCollection){(e=i.dom)||Ext.raise("Missing DOM node in element garbage collection: "+t);try{r=Ext.isGarbage(e)}catch(e){delete a[t],s.push("#"+i.id);continue}r&&(r=!1,i&&i.dom&&(o=i.dom.tagName,i.collect(),s.push((o||"")+"#"+i.id)))}if(Ext.isIE9m){for(t in n={},a)a.hasOwnProperty(t)&&(n[t]=a[t]);Ext.cache=Ext.dom.Element.cache=n}return this.lastTime=Ext.now(),s},onTick:function(){this.timerId=null,Ext.enableGarbageCollector&&this.collect(),this.resume()},pause:function(){var e=this.timerId;e&&(this.timerId=null,Ext.undefer(e))},resume:function(){var e=this.lastTime;Ext.enableGarbageCollector&&Ext.now()-e>this.interval&&this.collect(),this.timerId||(this.timerId=Ext.defer(this.onTick,this.interval))}}),Ext.define("Ext.dom.TouchAction",{singleton:!0,requires:["Ext.dom.Element","Ext.util.Point"],lastTouchStartTime:0,minMoveDistance:8,spaceRe:/\s+/,preventSingle:null,preventMulti:null,disabledOverflowDom:null,panXCls:Ext.baseCSSPrefix+"touch-action-pan-x",panYCls:Ext.baseCSSPrefix+"touch-action-pan-y",cssValues:["none","pan-x","pan-y","pan-x pan-y","pinch-zoom","pan-x pinch-zoom","pan-y pinch-zoom","pan-x pan-y pinch-zoom","double-tap-zoom","pan-x double-tap-zoom","pan-y double-tap-zoom","pan-x pan-y double-tap-zoom","pinch-zoom double-tap-zoom","pan-x pinch-zoom double-tap-zoom","pan-y pinch-zoom double-tap-zoom",""],objectValues:[{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1},{panX:!0,panY:!1,pinchZoom:!1,doubleTapZoom:!1},{panX:!1,panY:!0,pinchZoom:!1,doubleTapZoom:!1},{panX:!0,panY:!0,pinchZoom:!1,doubleTapZoom:!1},{panX:!1,panY:!1,pinchZoom:!0,doubleTapZoom:!1},{panX:!0,panY:!1,pinchZoom:!0,doubleTapZoom:!1},{panX:!1,panY:!0,pinchZoom:!0,doubleTapZoom:!1},{panX:!0,panY:!0,pinchZoom:!0,doubleTapZoom:!1},{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!0},{panX:!0,panY:!1,pinchZoom:!1,doubleTapZoom:!0},{panX:!1,panY:!0,pinchZoom:!1,doubleTapZoom:!0},{panX:!0,panY:!0,pinchZoom:!1,doubleTapZoom:!0},{panX:!1,panY:!1,pinchZoom:!0,doubleTapZoom:!0},{panX:!0,panY:!1,pinchZoom:!0,doubleTapZoom:!0},{panX:!1,panY:!0,pinchZoom:!0,doubleTapZoom:!0},{panX:!0,panY:!0,pinchZoom:!0,doubleTapZoom:!0}],attributeName:"data-extTouchAction",constructor:function(){var e=Ext.supports;if(e.TouchAction?this.cssProp="touch-action":e.MSPointerEvents&&(this.cssProp="-ms-touch-action"),e.TouchEvents&&(Ext.getWin().on({touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",scope:this,delegated:!1,translate:!1,capture:!0,priority:5e3}),Ext.on({scroll:"onScroll",scope:this,destroyable:!0})),Ext.isFunction(Object.freeze)){var t,i,n=this.objectValues;for(t=0,i=n.length;t<i;t++)Object.freeze(n[t])}},containsTargets:function(e,t){var i,n,r=!0,o=t.browserEvent,a="touchend"===t.type?o.changedTouches:o.touches;for(i=0,n=a.length;i<n;i++)if(!e.contains(a[i].target)){r=!1;break}return r},disableOverflow:function(e,t){var i,n,r=t?"overflow-y":"overflow-x";if(!this.disabledOverflowDom&&!Ext.isiOS&&!Ext.scrollbar.width())for(this.disabledOverflowDom=e,n=t?this.panXCls:this.panYCls;e;)"auto"!==(i=Ext.fly(e).getStyle(r))&&"scroll"!==i||Ext.fly(e).addCls(n),e=e.parentNode},get:function(e){var t=e.getAttribute(this.attributeName),i=null;return null!=t&&(i=this.objectValues[t]),i},getFlags:function(e){var t;return"number"==typeof e?t=e:(t=0,!1!==e.panX&&(t|=1),!1!==e.panY&&(t|=2),!1!==e.pinchZoom&&(t|=4),!1!==e.doubleTapZoom&&(t|=8)),t},isScrollable:function(e,t,i){var n=Ext.fly(e).getStyle(t?"overflow-y":"overflow-x"),r="auto"===n||"scroll"===n;return r=r&&(t?i?e.scrollTop+e.clientHeight<e.scrollHeight:0<e.scrollTop:i?e.scrollLeft+e.clientWidth<e.scrollWidth:0<e.scrollLeft)},lookupFlags:function(e){return parseInt(e.getAttribute&&e.getAttribute(this.attributeName)||15,10)},onScroll:function(){this.scrollOccurred=!0,this.isDoubleTap=!1},onTouchEnd:function(e){var t,i=e.target;if(0===e.browserEvent.touches.length){if(this.isDoubleTap)for(;i;)null!=(t=this.lookupFlags(i))&&(8&t||e.preventDefault()),i=i.parentNode;this.isDoubleTap=!1,this.preventSingle=null,this.preventMulti=null,this.resetOverflow()}},onTouchMove:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g=this,p=null,m=e.target;if(h=g.preventSingle,f=g.preventMulti,(1!==(i=e.browserEvent.touches.length)||!1!==h)&&!1!==f){if(1<i&&!0===f||1===i&&!0===h)p=!0;else for(1===i&&(o=e.getPoint(),a=g.startPoint,l=Ext.Element.getViewportScale(),d=o.getDistanceTo(g.startPoint)*l,u=o.x-a.x,c=o.y-a.y,s=Math.abs(c)>=Math.abs(u));m&&1===m.nodeType;){if(0&(t=g.lookupFlags(m)))p=!0;else if(1===i){if(r=!!(2&t),(n=!!(1&t))&&r?p=!1:n||r?d>=g.minMoveDistance&&(p=!!(n&&s||r&&!s)):p=!0,!p&&g.isScrollable(m,s,(s?c:u)<0))break}else p=!!g.containsTargets(m,e)&&!(4&t);if(p)break;m=m.parentNode}1===i?g.preventSingle=p:1<i&&(g.preventMulti=p),p&&e.preventDefault()}},onTouchStart:function(e){var t,i,n,r;if(1===e.browserEvent.touches.length)for(t=e.time,!this.scrollOccurred&&t-this.lastTouchStartTime<=500&&(this.isDoubleTap=!0),this.lastTouchStartTime=t,this.scrollOccurred=!1,this.startPoint=e.getPoint(),n=e.target;n;){if(null!=(i=this.lookupFlags(n))&&(r=!!(1&i))!=!!(2&i)){this.disableOverflow(n,r);break}n=n.parentNode}else this.isDoubleTap=!1},resetOverflow:function(){for(var e=this.disabledOverflowDom;e;)Ext.fly(e).removeCls([this.panXCls,this.panYCls]),e=e.parentNode;this.disabledOverflowDom=null},set:function(e,t){var i=this.cssProp,n=this.getFlags(t),r=n&Ext.supports.TouchAction,o=this.attributeName;i&&Ext.fly(e).setStyle(i,this.cssValues[r]),15===n?e.removeAttribute(o):e.setAttribute(o,n)}}),Ext.define("Ext.drag.Constraint",{alias:"drag.constraint.base",mixins:["Ext.mixin.Factoryable"],factoryConfig:{defaultType:"base",type:"drag.constraint"},config:{element:null,horizontal:null,region:null,snap:null,source:null,vertical:null,x:null,y:null},constructor:function(e){this.initConfig(e)},applyElement:function(e){return e&&"boolean"!=typeof e&&(e=Ext.get(e)),e||null},applySnap:function(e){return"number"==typeof e&&(e={x:e,y:e}),e},constrain:function(e,t){var i,n,r=e[0],o=e[1],a=this.constrainInfo,s=a.initial,l=a.x,d=a.y,u=a.snap;return a.vertical?r=s.x:(u&&u.x&&(r=u.xFn?u.x.call(this,t,r):this.doSnap(r,s.x,u.x)),l&&(null!==(i=l[0])&&r<i&&(r=i),null!==(n=l[1])&&n<r&&(r=n))),a.horizontal?o=s.y:(u&&u.y&&(o=u.yFn?u.y.call(this,t,o):this.doSnap(o,s.y,u.y)),d&&(null!==(i=d[0])&&o<i&&(o=i),null!==(n=d[1])&&n<o&&(o=n))),[r,o]},destroy:function(){this.setSource(null),this.setElement(null),this.callParent()},privates:{constrainValue:function(e,t,i){var n=null,r=null===e,o=null===t;return r&&o||(n=r?t:o?e:i(e,t)),n},doSnap:function(e,t,i){if(!i)return e;var n=(e-t)/i,r=Math.floor(n);return t+i*(n=n-r<=.5?r:r+1)},onDragStart:function(e){var t,i,n=this,r=n.getSnap(),o=!!n.getVertical(),a=!!n.getHorizontal(),s=n.getElement(),l=n.getRegion(),d=e.proxy,u=d.element,c=n.getX(),h=n.getY(),f=null,g=null,p=null,m=null,x=null,y=null,v=null,E=null;s&&("boolean"==typeof s&&(s=n.getSource().getElement().parent()),l=e.local?"relative"===(t=s.getStyle("position"))||"absolute"===t?(i=s.getSize(),new Ext.util.Region(0,i.width,i.height,0)):s.getRegion(!0,!0):s.getRegion(!0)),l&&(o||(x=l.left,y=l.right-(u?d.width:0)),a||(v=l.top,E=l.bottom-(u?d.height:0))),o||!l&&!c||(c&&(f=c[0],g=c[1]),null===f&&null===g&&null===x&&null===y||(c=[f=n.constrainValue(f,x,Math.max),g=n.constrainValue(g,y,Math.min)])),a||!l&&!h||(h&&(p=h[0],m=h[1]),null===p&&null===m&&null===v&&null===E||(h=[p=n.constrainValue(p,v,Math.max),m=n.constrainValue(m,E,Math.min)])),r=r&&{x:r.x,xFn:"function"==typeof r.x,y:r.y,yFn:"function"==typeof r.y},n.constrainInfo={initial:e.element.initial,vertical:o,horizontal:a,x:c,y:h,snap:r}}}}),Ext.define("Ext.drag.Info",{requires:["Ext.Promise"],constructor:function(e,t){if(e){var i,n,r,o,a,s,l,d,u=this,c=e.getLocal();u.source=e,u.local=c,u.getEventXY(t),l=t.getXY(),d=(i=e.getElement()).getXY(),o=(a=c?i.getLocalXY():d)[0],s=a[1],u.initialEvent=t,u.eventTarget=t.target,u.cursor={current:{x:o,y:s},delta:{x:0,y:0},initial:{x:l[0],y:l[1]},offset:{x:l[0]-d[0],y:l[1]-d[1]}},u.element={current:{x:o,y:s},delta:{x:0,y:0},initial:{x:o,y:s}},u.proxy={instance:e.getProxy(),current:{x:o,y:s},delta:{x:0,y:0},initial:{x:o,y:s},element:i,isUnderCursor:!1,isElement:!0},u.types=[],u.data={},e.describe(u),n=(r=u.proxy).instance.setupElement(u),r.isElement=n===e.getElement(),(r.element=n)&&(r.width=n.getWidth(),r.height=n.getHeight()),r.isElement&&((i=u.element).current=r.current,i.delta=r.delta),u.needsCursorCheck=r.element&&e.manager&&e.manager.pointerBug}},cursor:null,element:null,eventTarget:null,files:null,isNative:!1,proxy:null,source:null,target:null,types:null,valid:!1,clearData:function(e){Ext.Array.remove(this.types,e),delete this.data[e]},clone:function(){var e=new Ext.drag.Info;return e.cursor=Ext.merge({},this.cursor),e.data=Ext.apply({},this.data),e.element=Ext.merge({},this.element),e.eventTarget=this.eventTarget,e.proxy=Ext.merge({},this.proxy),e.source=this.source,e.target=this.target,e.types=Ext.Array.clone(this.types),e.valid=this.valid,e},getData:function(e){var t,i=this.data,n=this.dataTransfer;return n?t=n.getData(e):(this.finalized||Ext.raise("Unable to call getData until the drop is complete"),"function"==typeof(t=i[e])&&(i[e]=t=t.call(this.source,this)),t||0===t||(t="")),Ext.Promise.resolve(t)},setData:function(e,t){Ext.Array.include(this.types,e),this.data[e]=t},destroy:function(){var e=this;e.eventTarget=e.data=e.proxy=e.targetMap=e.targetMap=e.types=e.elementMap=e.possibleTargets=e.target=null,e.callParent()},privates:{data:null,dataTransfer:null,elementMap:null,possibleTargets:null,targetMap:null,copyNativeData:function(e,t){var i=t.browserEvent.dataTransfer;this.target=e,this.dataTransfer=i,this.files=i.files},finalize:function(){var e=this.target;this.finalized=!0,e&&(e.info=null,e.handleDrop(this))},getAlignXY:function(e,t){var i=this.source,n=this.cursor.offset,r=i.getProxy(),o=this.proxy.element,a=i.getConstrain(),s=[e,t];return o&&(this.proxy.isElement?(s[0]-=n.x,s[1]-=n.y):s=r.adjustCursorOffset(this,s),a&&(s=a.constrain(s,this))),s},getEventXY:function(e){var t=e.getXY(),i=this.source;return this.local&&(t=i.convertToLocalXY(t)),t},onNativeDragEnter:function(e,t){this.valid=e.accepts(this),(e.info=this).copyNativeData(e,t)},onNativeDragLeave:function(e,t){this.target===e&&(e.info=null,this.valid=!1,this.target=this.dataTransfer=this.files=null)},onNativeDragMove:function(e,t){this.copyNativeData(e,t)},onNativeDrop:function(e,t){this.copyNativeData(e,t),e.info=null},setActive:function(e){var t=this,i=t.source,n=t.target,r=n!==e;n&&r&&(n.handleDragLeave(t),n.info=null),(t.target=e)?(r&&(t.valid=!!t.possibleTargets[e.getId()]&&!1!==e.accepts(t),e.handleDragEnter(t),e.info=t),e.handleDragMove(t)):t.valid=!1,r&&i.getProxy().update(t)},update:function(e,t){var i=this.getEventXY(e),n=i[0],r=i[1],o=this.getAlignXY(n,r),a=o[0],s=o[1],l=this.proxy,d=this.cursor,u=d.current,c=d.delta,h=d.initial,f=l.instance;u.x=n,u.y=r,c.x=n-h.x,c.y=r-h.y,u=l.current,c=l.delta,h=l.initial,u.x=a,u.y=s,c.x=a-h.x,c.y=s-h.y,this.needsCursorCheck&&(l.isUnderCursor=!(n<a||r<s||n>l.width+a||r>l.height+s)),!t&&f&&f.setXY(this,o)}}}),Ext.define("Ext.drag.Item",{mixins:["Ext.mixin.Observable","Ext.mixin.Identifiable"],config:{autoDestroy:!0,component:null,element:null,groups:null},constructor:function(e){this.mixins.observable.constructor.call(this,e)},isDisabled:function(){return this.disabled},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},updateComponent:function(e,t){var i;if(e)i=e.el;else{if(!t||t.el!==this.getElement())return;i=null}this.setElement(i)},applyElement:function(e){return e?Ext.get(e):null},updateElement:function(){this.setupListeners()},applyGroups:function(e){return"string"==typeof e&&(e=[e]),e},destroy:function(){var e=this.getElement();this.destroying=!0,this.setElement(null),e&&this.getAutoDestroy()&&e.destroy(),this.callParent()},privates:{disabled:!1,convertToLocalXY:function(e){var t=this.getComponent();return e=t?t.convertToLocalXY(e):[(e=this.getElement().translateXY(e[0],e[1])).x,e.y]},getElListeners:Ext.privateFn,setupListeners:function(e){var t=this.elListeners;e=e||this.getElement(),t&&(t.destroy(),this.elListeners=null),e&&(this.elListeners=e.on(Ext.apply({scope:this,destroyable:!0},this.getElListeners())))}}}),Ext.define("Ext.drag.Manager",{singleton:!0,uses:["Ext.mixin.Inheritable"],dragCls:Ext.baseCSSPrefix+"drag-body",pointerBug:Ext.isTouch||!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera,constructor:function(){this.targets={},this.nativeTargets=[],Ext.onReady(this.init,this)},init:function(){Ext.getDoc().on({scope:this,dragenter:{capture:!0,fn:"onNativeDragEnter"},dragleave:"onNativeDragLeave",dragover:"onNativeDragOver",drop:"onNativeDrop"})},destroy:function(){var e,t=this.targets;for(e in this.destroying=!0,t)t[e].destroy();this.targets=null,this.callParent()},privates:{elementFromPoint:function(e,t){return Ext.rootInheritedState.rtl&&(e=Ext.Element.getViewportWidth()-e),Ext.dom.Element.fromPagePoint(e,t,!0)},getAtPoint:function(e){var t,i,n=e.cursor.current,r=e.elementMap,o=e.proxy.isUnderCursor,a=this.pointerBug&&o?e.proxy.element.dom:null;for(a&&(a.style.visibility="hidden"),i=this.elementFromPoint(n.x,n.y),a&&(a.style.visibility="visible");i;){if(t=r[i.id])return t;i=i.parentNode}return null},getNativeDragInfo:function(e){var t=this.nativeDragInfo;return t||(this.nativeDragInfo=t=new Ext.drag.Info,t.isNative=!0),t},onDragCancel:function(){Ext.getBody().removeCls(this.dragCls)},onDragEnd:function(e,t){e.finalize(),Ext.getBody().removeCls(this.dragCls)},onDragMove:function(e,t){this.processDrag(e)},onDragStart:function(e,t){var i,n,r,o,a,s,l,d=e.source,u=this.targets,c=d.getGroups(),h={},f={},g={};for(i in g={},f={},c&&(o=Ext.Array.toMap(c)),u){if(!(n=u[i]).isDisabled()){if(a=!1,r=n.getGroups(),o||r){if(o&&r)for(l=0,s=r.length;l<s;++l)if(o[r[l]]){a=!0;break}}else a=!0;a&&(f[i]=n)}g[(h[i]=n).getElement().id]=n}e.possibleTargets=f,e.targetMap=h,e.elementMap=g,Ext.getBody().addCls(this.dragCls),this.processDrag(e)},onNativeDragEnter:function(e){var t=this.nativeTargets,i=e.target;e.preventDefault(),t[t.length-1]!==i&&t.push(i)},onNativeDragLeave:function(e){var t=this.nativeTargets;Ext.Array.remove(t,e.target),0===t.length&&(this.nativeDragInfo=null)},onNativeDragOver:function(e){e.preventDefault()},onNativeDrop:function(e){e.preventDefault(),this.nativeTargets.length=0,this.nativeDragInfo=null},processDrag:function(e){e.setActive(this.getAtPoint(e))},register:function(e){this.targets[e.getId()]=e},unregister:function(e){var t;this.destroying||(t=e.getId(),this.targets[t]=null,delete this.targets[t])}}}),Ext.define("Ext.drag.Source",{extend:"Ext.drag.Item",defaultIdPrefix:"source-",requires:["Ext.GlobalEvents","Ext.drag.Constraint"],config:{activateOnLongPress:!1,activeCls:null,constrain:null,handle:null,local:null,proxy:"original",revert:!1},dragging:!1,constructor:function(e){var t=e&&e.describe;t&&(this.describe=t,delete(e=Ext.apply({},e)).describe),this.callParent([e]),this.manager=Ext.drag.Manager},describe:Ext.emptyFn,isDragging:function(){return this.dragging},beforeDragStart:Ext.emptyFn,onDragCancel:Ext.emptyFn,onDragEnd:Ext.emptyFn,onDragMove:Ext.emptyFn,onDragStart:Ext.emptyFn,applyActivateOnLongPress:function(e){return"string"==typeof e&&(e=[e]),e},updateActivateOnLongPress:function(e){this.isConfiguring||this.setupListeners()},updateActiveCls:function(e,t){this.dragging&&this.getElement().replaceCls(t,e)},applyConstrain:function(e){return e&&!e.$isClass&&(e.isRegion?e={region:e}:!e.isElement&&Ext.isObject(e)||(e={element:e}),e=Ext.apply({source:this},e),e=Ext.Factory.dragConstraint(e)),e},updateElement:function(e,t){t&&!t.destroyed&&t.un("dragstart","stopNativeDrag",this),e&&!this.getHandle()&&(e.setTouchAction({panX:!1,panY:!1}),e.on("dragstart","stopNativeDrag",this,{translate:!1,delegated:!1})),this.callParent([e,t])},updateHandle:function(){this.isConfiguring||this.setupListeners()},applyProxy:function(e){return e=e&&Ext.Factory.dragproxy(e)},updateProxy:function(e,t){t&&t.destroy(),e&&e.setSource(this)},resolveListenerScope:function(){var e=this.ownerCmp,t=arguments;return e?e.resolveListenerScope.apply(e,t):this.callParent(t)},destroy:function(){this.manager=this.initialEvent=null,this.setConstrain(null),this.setProxy(null),this.callParent()},privates:{draggingCls:Ext.baseCSSPrefix+"drag-dragging",info:null,revertCls:Ext.baseCSSPrefix+"drag-revert",canActivateOnLongPress:function(e){var t=this.getActivateOnLongPress();return!(!t||!0!==t&&!Ext.Array.contains(t,e.pointerType))},dragCleanup:function(e){var t=this.getActiveCls(),i=this.getProxy(),n=this.getElement(),r=e?e.proxy.element:null;t&&n.removeCls(t),r&&r.removeCls(this.draggingCls),i.cleanup(e),this.dragging=!1,this.initialEvent=this.info=null},getElListeners:function(){var e=this.getHandle(),t={touchstart:"handleTouchStart",dragstart:"handleDragStart",drag:"handleDragMove",dragend:"handleDragEnd",dragcancel:"handleDragCancel"};return e&&(t.dragstart={fn:t.dragstart,delegate:e}),this.getActivateOnLongPress()&&(t.longpress="handleLongPress"),t},handleDragCancel:function(e){var t=this.info,i=this.manager;i&&i.onDragCancel(t,e),this.onDragCancel(t),this.hasListeners.dragcancel&&this.fireEvent("dragcancel",this,t,e),Ext.fireEvent("dragcancel",this,t,e),this.dragCleanup(t)},handleDragEnd:function(e){if(this.dragging){var t=this,i=t.manager,n=t.getRevert(),r=t.info,o=r.proxy;r.update(e),i&&i.onDragEnd(r,e),t.onDragEnd(r),t.hasListeners.dragend&&t.fireEvent("dragend",t,r,e),Ext.fireEvent("dragend",t,r,e),o=o.instance,n&&o?o.dragRevert(r,t.revertCls,n,function(){t.dragCleanup(r)}):t.dragCleanup(r)}},handleDragMove:function(e){var t=this.info,i=this.manager;this.dragging&&(e.stopPropagation(),e.claimGesture(),t.update(e),i&&i.onDragMove(t,e),this.onDragMove(t),this.hasListeners.dragmove&&this.fireEvent("dragmove",this,t,e))},handleDragStart:function(e){var t,i,n,r,o,a=this,s=a.hasListeners,l=a.manager,d=a.getConstrain(),u=a.initialEvent;return!a.preventStart(e)&&(s.initdragconstraints&&a.fireEvent("initdragconstraints",a,e),a.info=n=new Ext.drag.Info(a,u),a.setup(n),d&&d.onDragStart(n),n.update(e,!0),!(r=!1===a.beforeDragStart(n))&&s.beforedragstart&&(r=!1===a.fireEvent("beforedragstart",a,n,e)),r?(a.dragCleanup(),!1):(e.claimGesture(),a.dragging=!0,i=a.getActiveCls(),t=a.getElement(),i&&t.addCls(i),(o=n.proxy.element)&&o.addCls(a.draggingCls),n.update(e),l&&l.onDragStart(n,e),a.onDragStart(n),s.dragstart&&a.fireEvent("dragstart",a,n,e),void Ext.fireEvent("dragstart",a,n,e)))},handleLongPress:function(e){!this.isDisabled()&&this.canActivateOnLongPress(e)&&(this.initialEvent=e).startDrag()},handleTouchStart:function(e){this.isDisabled()||(this.initialEvent=e)},preventStart:function(e){return this.isDisabled()||!e.longpress&&this.canActivateOnLongPress(e)},setup:Ext.privateFn,stopNativeDrag:function(e){e.preventDefault()}}}),Ext.define("Ext.drag.Target",{extend:"Ext.drag.Item",requires:["Ext.drag.Manager"],defaultIdPrefix:"target-",config:{invalidCls:"",validCls:""},constructor:function(e){var t=e&&e.accepts;t&&(this.accepts=t,delete(e=Ext.apply({},e)).accepts),this.callParent([e]),Ext.drag.Manager.register(this)},accepts:function(e){return!0},disable:function(){this.callParent(),this.setupListeners(null)},enable:function(){this.callParent(),this.setupListeners()},beforeDrop:Ext.emptyFn,onDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragLeave:Ext.emptyFn,onDragMove:Ext.emptyFn,updateInvalidCls:function(e,t){var i=this.info;this.doUpdateCls(i&&!i.valid,e,t)},updateValidCls:function(e,t){var i=this.info;this.doUpdateCls(i&&i.valid,e,t)},destroy:function(){Ext.drag.Manager.unregister(this),this.callParent()},privates:{doUpdateCls:function(e,t,i){var n=this.getElement();i&&n.removeCls(i),t&&e&&n.addCls(t)},getElListeners:function(){return{dragenter:"handleNativeDragEnter",dragleave:"handleNativeDragLeave",dragover:"handleNativeDragMove",drop:"handleNativeDrop"}},handleDrop:function(e){var t=this,i=t.hasListeners,n=e.valid;return t.getElement().removeCls([t.getInvalidCls(),t.getValidCls()]),!(!n||!1===t.beforeDrop(e))&&((!i.beforedrop||!1!==t.fireEvent("beforedrop",t,e))&&(t.onDrop(e),void(i.drop&&t.fireEvent("drop",t,e))))},handleDragEnter:function(e){var t=e.valid?this.getValidCls():this.getInvalidCls();t&&this.getElement().addCls(t),this.onDragEnter(e),this.hasListeners.dragenter&&this.fireEvent("dragenter",this,e)},handleDragLeave:function(e){this.getElement().removeCls([this.getInvalidCls(),this.getValidCls()]),this.onDragLeave(e),this.hasListeners.dragleave&&this.fireEvent("dragleave",this,e)},handleDragMove:function(e){this.onDragMove(e),this.hasListeners.dragmove&&this.fireEvent("dragmove",this,e)},handleNativeDragEnter:function(e){var t=Ext.drag.Manager.getNativeDragInfo(e);t.onNativeDragEnter(this,e),this.hasListeners.dragenter&&this.fireEvent("dragenter",this,t)},handleNativeDragLeave:function(e){var t=Ext.drag.Manager.getNativeDragInfo(e);t.onNativeDragLeave(this,e),this.hasListeners.dragleave&&this.fireEvent("dragleave",this,t)},handleNativeDragMove:function(e){var t=Ext.drag.Manager.getNativeDragInfo(e);t.onNativeDragMove(this,e),this.hasListeners.dragmove&&this.fireEvent("dragmove",this,t)},handleNativeDrop:function(e){var t=this.hasListeners,i=Ext.drag.Manager.getNativeDragInfo(e),n=i.valid;if(i.onNativeDrop(this,e),n){if(t.beforedrop&&!1===this.fireEvent("beforedrop",this,i))return;t.drop&&this.fireEvent("drop",this,i)}}}}),Ext.define("Ext.drag.proxy.None",{mixins:["Ext.mixin.Factoryable"],alias:"drag.proxy.none",factoryConfig:{aliasPrefix:"drag.proxy.",type:"dragproxy"},config:{source:null},constructor:function(e){var t=e&&e.getElement;t&&(this.getElement=t,delete(e=Ext.apply({},e)).getElement),this.initConfig(e)},cleanup:Ext.emptyFn,dragRevert:function(e,t,i,n){var r=this.getPositionable(e),o=e.proxy.initial;r.addCls(t),r.setXY([o.x,o.y],Ext.apply({callback:function(){r.removeCls(t),n()}},i))},getElement:function(){return null},getPositionable:function(){return this.element},setXY:function(e,t,i){var n=this.getPositionable(e);n&&n.setXY(t,i)},update:Ext.emptyFn,privates:{setupElement:function(e){return this.element=this.getElement(e)},adjustCursorOffset:function(e,t){return t}}}),Ext.define("Ext.drag.proxy.Original",{extend:"Ext.drag.proxy.None",alias:"drag.proxy.original",getElement:function(e){return e.source.getElement()},getPositionable:function(e){var t=e.source;return t.getComponent()||t.getElement()}}),Ext.define("Ext.drag.proxy.Placeholder",{extend:"Ext.drag.proxy.None",alias:"drag.proxy.placeholder",config:{cls:"",cursorOffset:[12,20],html:null,invalidCls:"",validCls:""},placeholderCls:Ext.baseCSSPrefix+"drag-proxy-placeholder",cleanup:function(){this.element=Ext.destroy(this.element)},getElement:function(){var e=Ext.getBody().createChild({cls:this.getCls(),html:this.getHtml()});return e.addCls(this.placeholderCls),e.setTouchAction({panX:!1,panY:!1}),e},update:function(e){var t=this.element,i=this.getInvalidCls(),n=this.getValidCls(),r=e.valid;e.target?t.replaceCls(r?i:n,r?n:i):t.removeCls([i,n])},updateCls:function(e,t){var i=this.element;i&&(t&&i.removeCls(t),e&&i.addCls(e))},updateHtml:function(e){var t=this.element;t&&t.setHtml(e||"")},updateInvalidCls:function(e,t){this.doUpdateCls(e,t)},updateValidCls:function(e,t){this.doUpdateCls(e,t)},destroy:function(){this.element=Ext.destroy(this.element),this.callParent()},privates:{adjustCursorOffset:function(e,t){var i=this.getCursorOffset();return i&&(t[0]+=i[0]||0,t[1]+=i[1]||0),t},doUpdateCls:function(e,t){var i,n=this.element;n&&(t&&(i=e&&n.hasCls(t),n.removeCls(t)),e&&i&&n.addCls(e))}}}),Ext.define("Ext.event.gesture.Recognizer",{requires:["Ext.event.publisher.Gesture"],mixins:["Ext.mixin.Identifiable"],priority:0,handledEvents:[],isStarted:!1,config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(e){this.initConfig(e),Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:function(){return this.reset()},onTouchCancel:function(e){return this.cancel(e)},fire:function(e,t,i,n){this.getOnRecognized().call(this.getCallbackScope(),this,e,t,i,n)},cancel:function(e){return this.isStarted&&this.onCancel(e),this.reset()},onCancel:Ext.emptyFn,reset:function(){return this.isStarted=!1}}),Ext.define("Ext.event.gesture.SingleTouch",{extend:"Ext.event.gesture.Recognizer",isSingleTouch:!0,onTouchStart:function(e){if(1<e.touches.length)return this.cancel(e)}}),Ext.define("Ext.event.gesture.DoubleTap",{extend:"Ext.event.gesture.SingleTouch",priority:300,config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(e){var t,i=this.callParent([e]);return!1!==i&&(this.isStarted=!0,t=this.lastStartPoint=e.changedTouches[0].point,this.startPoint=this.startPoint||t,this.startTime=e.time,Ext.undefer(this.singleTapTimer)),i},onTouchMove:function(e){var t=e.changedTouches[0].point,i=Ext.Element.getViewportScale();if(Math.round(Math.abs(t.getDistanceTo(this.lastStartPoint)*i))>=this.getMoveDistance())return this.cancel(e)},onTouchEnd:function(e){var t,i,n=this,r=n.getMaxDuration(),o=e.time,a=e.target,s=n.lastTapTime,l=n.lastTarget,d=e.changedTouches[0].point;if(n.lastTapTime=o,n.lastTarget=a,s&&(t=o-s)<=r&&(i=Ext.Element.getViewportScale(),Math.round(Math.abs(d.getDistanceTo(n.startPoint)*i))<=n.getTapDistance()))return a!==l?n.cancel(e):(n.lastTarget=null,n.lastTapTime=0,n.fire("doubletap",e,{touch:e.changedTouches[0],duration:t}),n.callParent([e]));o-n.startTime>r?(n.fire("singletap",e),n.reset()):n.setSingleTapTimer(e)},setSingleTapTimer:function(e){var t=this;t.singleTapTimer=Ext.defer(function(){t.fire("singletap",e),t.reset()},t.getMaxDuration())},reset:function(){return Ext.undefer(this.singleTapTimer),this.startTime=this.lastTapTime=0,this.lastStartPoint=this.startPoint=this.singleTapTimer=null,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.doubleTap)}),Ext.define("Ext.event.gesture.Drag",{extend:"Ext.event.gesture.SingleTouch",priority:100,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){this.callParent(arguments),this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0},longpress:!1}},onTouchStart:function(e){var t=this.callParent([e]);return!1!==t&&(this.startTime=e.time,this.startPoint=e.changedTouches[0].point),t},tryDragStart:function(e){var t=e.changedTouches[0].point,i=this.getMinDistance(),n=Ext.Element.getViewportScale();i<=Math.round(Math.abs(t.getDistanceTo(this.startPoint)*n))&&this.doDragStart(e)},doDragStart:function(e,t){var i,n=e.changedTouches[0],r=n.point,o=this.info;t?(i=Ext.now(),this.startTime=i,this.startPoint=r,o.longpress=!0):i=e.time,this.isStarted=!0,this.previousPoint=this.lastPoint=r,this.resetInfo("x",e,n),this.resetInfo("y",e,n),o.time=i,this.fire("dragstart",e,o)},onTouchMove:function(e){var t,i,n=this;n.startPoint&&(n.isStarted||n.tryDragStart(e),n.isStarted&&(i=(t=e.changedTouches[0]).point,n.lastPoint&&(n.previousPoint=n.lastPoint),n.lastPoint=i,n.lastMoveEvent=e,n.updateInfo("x",e,t),n.updateInfo("y",e,t),n.info.time=e.time,n.fire("drag",e,n.info)))},onAxisDragEnd:function(e,t){var i=t.time-t.previousTime[e];0<i&&(t.flick.velocity[e]=(t[e]-t.previous[e])/i)},resetInfo:function(e,t,i){var n=this.lastPoint[e],r=this.startPoint[e],o=n-r,a=e.toUpperCase(),s=this.info;s.touch=i,s.delta[e]=o,s.absDelta[e]=Math.abs(o),s.previousTime[e]=this.startTime,s.previous[e]=r,s[e]=n,s.direction[e]=0,s["start"+a]=this.startPoint[e],s["previous"+a]=s.previous[e],s["page"+a]=s[e],s["delta"+a]=s.delta[e],s["absDelta"+a]=s.absDelta[e],s["previousDelta"+a]=0,s.startTime=this.startTime},updateInfo:function(e,t,i){var n=this.lastPoint[e],r=this.previousPoint[e],o=this.startPoint[e],a=n-o,s=this.info,l=s.direction,d=e.toUpperCase(),u=s.previous[e];s.touch=i,s.delta[e]=a,s.absDelta[e]=Math.abs(a),n!==u&&n!==s[e]&&(s.previous[e]=s[e],s.previousTime[e]=s.time),r<(s[e]=n)?l[e]=1:n<r&&(l[e]=-1),s["start"+d]=o,s["previous"+d]=s.previous[e],s["page"+d]=s[e],s["delta"+d]=s.delta[e],s["absDelta"+d]=s.absDelta[e],s["previousDelta"+d]=s.previous[e]-o,s.startTime=this.startTime},onTouchEnd:function(e){var t,i,n;return this.isStarted&&(i=(t=e.changedTouches[0]).point,n=this.info,this.lastPoint=i,this.updateInfo("x",e,t),this.updateInfo("y",e,t),n.time=e.time,this.onAxisDragEnd("x",n),this.onAxisDragEnd("y",n),this.fire("dragend",e,n)),this.callParent([e])},onCancel:function(e){var t=e.changedTouches[0],i=this.info;e.touches.length||(this.lastPoint=t.point),this.updateInfo("x",e,t),this.updateInfo("y",e,t),i.time=e.time,this.fire("dragcancel",e,i,!0)},reset:function(){return this.lastPoint=this.startPoint=this.previousPoint=this.lastPoint=this.lastMoveEvent=null,this.initInfo(),this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.drag)}),Ext.define("Ext.event.gesture.Swipe",{extend:"Ext.event.gesture.SingleTouch",priority:600,handledEvents:["swipestart","swipe","swipecancel"],config:{minDistance:80,maxOffset:35,maxDuration:1e3},onTouchStart:function(e){var t,i=this.callParent([e]);return!1!==i&&(t=e.changedTouches[0],this.startTime=e.time,this.isHorizontal=!0,this.isVertical=!0,this.startX=t.pageX,this.startY=t.pageY),i},onTouchMove:function(e){var t,i,n,r=this,o=e.changedTouches[0],a=o.pageX,s=o.pageY,l=a-r.startX,d=s-r.startY,u=Math.abs(a-r.startX),c=Math.abs(s-r.startY),h=e.time-r.startTime;return 0===u&&0===c||h>r.getMaxDuration()?r.cancel(e):(r.isHorizontal&&c>r.getMaxOffset()&&(r.isHorizontal=!1),r.isVertical&&u>r.getMaxOffset()&&(r.isVertical=!1),r.isVertical&&r.isHorizontal||(t=r.getMinDistance(),r.isHorizontal&&u<t?(i=l<0?"left":"right",n=u):r.isVertical&&c<t&&(i=d<0?"up":"down",n=c)),r.isHorizontal||r.isVertical?void(i&&!r.isStarted&&(r.isStarted=!0,r.fire("swipestart",e,{touch:o,direction:i,distance:n,duration:h}))):r.cancel(e))},onTouchEnd:function(e){var t,i,n,r,o,a,s,l,d,u,c,h=this;return!1!==h.onTouchMove(e)&&(i=(t=e.changedTouches[0]).pageX,n=t.pageY,r=i-h.startX,o=n-h.startY,a=Math.abs(r),s=Math.abs(o),l=h.getMinDistance(),d=e.time-h.startTime,h.isVertical&&s<l&&(h.isVertical=!1),h.isHorizontal&&a<l&&(h.isHorizontal=!1),h.isHorizontal?(u=r<0?"left":"right",c=a):h.isVertical&&(u=o<0?"up":"down",c=s),h.fire("swipe",e,{touch:t,direction:u,distance:c,duration:d})),this.callParent([e])},onCancel:function(e){this.fire("swipecancel",e,null,!0)},reset:function(){return this.startTime=this.isHorizontal=this.isVertical=this.startX=this.startY=null,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.swipe)}),Ext.define("Ext.event.gesture.EdgeSwipe",{extend:"Ext.event.gesture.Swipe",priority:500,handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],config:{minDistance:60},onTouchStart:function(e){var t,i=this.callParent([e]);return!1!==i&&(t=e.changedTouches[0],this.direction=null,this.isHorizontal=!0,this.isVertical=!0,this.startX=t.pageX,this.startY=t.pageY),i},onTouchMove:function(e){var t,i,n=this,r=e.changedTouches[0],o=r.pageX,a=r.pageY,s=o-n.startX,l=a-n.startY,d=Math.abs(a-n.startY),u=Math.abs(o-n.startX),c=n.getMinDistance(),h=n.getMaxOffset(),f=e.time-n.startTime,g=Ext.Viewport&&Ext.Element.getViewportWidth(),p=Ext.Viewport&&Ext.Element.getViewportHeight();if(n.isVertical&&h<u&&(n.isVertical=!1),n.isHorizontal&&h<d&&(n.isHorizontal=!1),n.isVertical&&n.isHorizontal&&(u<d?n.isHorizontal=!1:n.isVertical=!1),n.isHorizontal?(t=s<0?"left":"right",i=s):n.isVertical&&(t=l<0?"up":"down",i=l),"up"===(t=n.direction||(n.direction=t))?i=-1*l:"left"===t&&(i=-1*s),!(n.distance=i))return n.cancel(e);if(n.isStarted)n.fire("edgeswipe",e,{touch:r,direction:t,distance:i,duration:f});else{if("right"===t&&n.startX>c||"down"===t&&n.startY>c||"left"===t&&g-n.startX>c||"up"===t&&p-n.startY>c)return n.cancel(e);n.isStarted=!0,n.startTime=e.time,n.fire("edgeswipestart",e,{touch:r,direction:t,distance:i,duration:f})}},onTouchEnd:function(e){var t;return!1!==this.onTouchMove(e)&&(t=e.time-this.startTime,this.fire("edgeswipeend",e,{touch:e.changedTouches[0],direction:this.direction,distance:this.distance,duration:t})),this.reset()},onCancel:function(e){this.fire("edgeswipecancel",e,{touch:e.changedTouches[0]},!0)},reset:function(){return this.direction=this.isHorizontal=this.isVertical=this.startX=this.startY=this.startTime=this.distance=null,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.edgeSwipe)}),Ext.define("Ext.event.gesture.LongPress",{extend:"Ext.event.gesture.SingleTouch",priority:400,config:{moveDistance:8,minDuration:1e3},handledEvents:["longpress","taphold"],onTouchStart:function(e){var t=this.callParent([e]);return!1!==t&&(this.startPoint=e.changedTouches[0].point,this.setLongPressTimer(e)),t},setLongPressTimer:function(e){Ext.undefer(this.timer),this.timer=Ext.defer(this.fireLongPress,this.getMinDuration(),this,[e])},onTouchMove:function(e){var t=e.changedTouches[0].point,i=Ext.Element.getViewportScale();if(Math.round(Math.abs(t.getDistanceTo(this.startPoint)*i))>=this.getMoveDistance())return this.cancel(e)},reset:function(){return this.timer=this.startPoint=Ext.undefer(this.timer),this.callParent()},fireLongPress:function(e){var t={touch:e.changedTouches[0],duration:this.getMinDuration(),startDrag:this.startDrag};this.fire("taphold",e,t),this.fire("longpress",e,t),this.reset()},startDrag:function(){var e=Ext.event.gesture.Drag.instance,t=this.parentEvent;e.doDragStart(t,!0),Ext.event.publisher.Gesture.instance.claimRecognizer(e,t)}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.longPress)}),Ext.define("Ext.event.gesture.MultiTouch",{extend:"Ext.event.gesture.Recognizer",requiredTouchesCount:2,isTracking:!1,isMultiTouch:!0,onTouchStart:function(e){var t=this.requiredTouchesCount,i=e.touches.length;if(i===t)this.isTracking=!0;else if(t<i)return this.cancel(e)},reset:function(){return this.isTracking=!1,this.callParent()}}),Ext.define("Ext.event.gesture.Pinch",{extend:"Ext.event.gesture.MultiTouch",priority:700,handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(e){var t,i,n,r;if(this.isTracking){if(i=(t=e.touches)[0].point,n=t[1].point,0===(r=i.getDistanceTo(n)))return;this.isStarted?this.fire("pinch",e,{touches:t,distance:r,scale:r/this.startDistance}):(this.isStarted=!0,this.startDistance=r,this.fire("pinchstart",e,{touches:t,distance:r,scale:1}))}},onTouchEnd:function(e){return this.isStarted&&this.fire("pinchend",e),this.callParent([e])},onCancel:function(e){this.fire("pinchcancel",e,null,!0)},reset:function(){return this.lastTouches=null,this.startDistance=0,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.pinch)}),Ext.define("Ext.event.gesture.Rotate",{extend:"Ext.event.gesture.MultiTouch",priority:800,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(e){var t,i,n,r,o,a,s,l,d=this;d.isTracking&&(t=e.touches,i=d.lastAngle,n=t[0].point,r=t[1].point,o=n.getAngleTo(r),null!==i&&(l=Math.abs(i-o),a=o+360,s=o-360,Math.abs(a-i)<l?o=a:Math.abs(s-i)<l&&(o=s)),d.lastAngle=o,d.isStarted?d.fire("rotate",e,{touches:t,angle:o,rotation:o-d.startAngle}):(d.isStarted=!0,d.startAngle=o,d.fire("rotatestart",e,{touches:t,angle:o,rotation:0})),d.lastTouches=Ext.Array.clone(t))},onTouchEnd:function(e){return this.isStarted&&this.fire("rotateend",e),this.callParent([e])},onCancel:function(e){this.fire("rotatecancel",e,null,!0)},reset:function(){return this.lastTouches=this.lastAngle=this.startAngle=null,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.rotate)}),Ext.define("Ext.event.gesture.Tap",{extend:"Ext.event.gesture.SingleTouch",priority:200,handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(e){var t=this.callParent([e]);return!1!==t&&(this.isStarted=!0,this.startPoint=e.changedTouches[0].point),t},onTouchMove:function(e){var t=e.changedTouches[0].point,i=Ext.Element.getViewportScale();if(Math.round(Math.abs(t.getDistanceTo(this.startPoint)*i))>=this.getMoveDistance())return this.cancel(e)},onTouchEnd:function(e){return this.fire("tap",e,{touch:e.changedTouches[0]}),this.callParent([e])},onCancel:function(e){this.fire("tapcancel",e,{touch:e.changedTouches[0]},!0)},reset:function(){return this.startPoint=null,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.tap)}),Ext.define("Ext.event.publisher.Focus",{extend:"Ext.event.publisher.Dom",requires:["Ext.dom.Element","Ext.GlobalEvents"],type:"focus",handledEvents:["focusenter","focusleave","focusmove"],handledDomEvents:["focusin","focusout"],publishDelegatedDomEvent:function(e){var t=e.relatedTarget;this.$suppressEvents||("focusout"===e.type?null==t&&this.processFocusIn(e,e.target,document.body):(null!=t&&t.tagName||(t=document.body),this.processFocusIn(e,t,e.target)))},processFocusIn:function(e,t,i){var n,r,o,a,s,l=this.focusFly,d=[];if(!(t&&l.attach(t).isFocusSuspended()||i&&l.attach(i).isFocusSuspended())){for(i.compareDocumentPosition&&(o=!!(4&i.compareDocumentPosition(t))),r=t,n=Ext.dom.Element.getCommonAncestor(i,t,!0);r&&r!==n;r=r.parentNode)d.push(r);if(!d.length||(a=this.createSyntheticEvent("focusleave",e,t,i,t,i,o),this.publish(a,d),!a.stopped)){for(d.length=0,r=i;r&&r!==n;r=r.parentNode)d.push(r);s=this.createSyntheticEvent("focusenter",e,i,t,t,i,o),d.length&&(this.publish(s,d),s.stopped)||(d=this.getPropagatingTargets(n)).length&&(a=this.createSyntheticEvent("focusmove",e,i,t,t,i,o),this.publish(a,d),a.stopped)||Ext.GlobalEvents.hasListeners.focus&&Ext.GlobalEvents.fireEvent("focus",{event:s,toElement:i,fromElement:t,backwards:o})}}},createSyntheticEvent:function(e,t,i,n,r,o,a){var s=new Ext.event.Event(t);return s.type=e,s.relatedTarget=n,s.target=i,s.fromElement=r,s.toElement=o,s.backwards=a,s}},function(n){var r;n.prototype.focusFly=new Ext.dom.Fly,n.instance=new n,Ext.supports.FocusinFocusoutEvents||(this.override({handledDomEvents:["focus","blur"],publishDelegatedDomEvent:function(e){var t,i=this;i.callSuper([e]),t=e.target!==window&&e.target!==document,"blur"===e.type?(t?(r=Ext.defer(function(){r=0,i.processFocusIn(e,e.target,document.body),n.previousActiveElement=null},1),t&&Ext.cache[e.target.id]&&(Ext.cache[e.target.id].focusinTimeout=r)):e.explicitOriginalTarget===n.previousActiveElement&&e.target===window&&(Ext.undefer(r),r=0,i.processFocusIn(e,n.previousActiveElement,document.body),n.previousActiveElement=null),n.previousActiveElement=t?e.target:null):(Ext.undefer(r),r=0,i.processFocusIn(e,n.previousActiveElement||document.body,t?e.target:document.body))}}),Ext.define(null,{override:"Ext.dom.Element",destroy:function(){this.focusinTimeout&&(Ext.undefer(this.focusinTimeout),this.focusinTimeout=null),this.callParent()}}))}),Ext.define("Ext.field.InputMask",function(r){return{requires:["Ext.util.LRU"],cachedConfig:{blank:"_",characters:{"*":"[A-Za-z0-9]",a:"[a-z]",A:"[A-Z]",0:"[0-9]",9:"[0-9]"},ignoreCase:!0},config:{pattern:null},_cached:!1,_lastEditablePos:null,_mask:null,statics:{active:{},from:function(e,t){var i,n=r.active;return null===e?i=null:"string"!=typeof e?t&&!t._cached?(i=t).setConfig(e):i=new r(e):(i=n[e])?++i._cached:((i=r.cache.remove(e))||(i=new r({pattern:e})),(n[e]=i)._cached=1),i}},constructor:function(e){this.initConfig(e)},release:function(){var e,t=r.cache;this._cached&&!--this._cached?(e=this.getPattern(),r.active[e]!==this&&Ext.raise("Invalid call to InputMask#release (not active)"),t.map[e]&&Ext.raise("Invalid call to InputMask#release (already cached)"),delete r.active[e],t.add(e,this),t.trim(t.maxSize)):0===this._cached&&Ext.raise("Invalid call to InputMask#release (already released)")},clearRange:function(e,t,i){var n,r,o,a=this.getBlank(),s=t+i,l=e.length,d="";if(a)for(r=this.getPattern(),n=0;n<l;++n)n<t||s<=n?d+=e[n]:this.isFixedChar(n)?d+=r[n]:d+=a;else{for(o=this._prefix.length,n=0;n<l;++n)(n<o||n<t||s<=n)&&(d+=e[n]);d=this.formatValue(d)}return d},formatValue:function(e){var t,i,n,r,o,a=this.getBlank();if(a)if(e)o=this.formatValue(""),o=this.insertRange(o,e,0);else for(o="",t=0,i=(n=this.getPattern()).length;t<i;++t)this.isFixedChar(t)?o+=n[t]:o+=a;else{for(i=(r=this._prefix).length,t=(o=this.insertRange("",e,0)).length;i<t&&this.isFixedChar(t-1);)--t;o=t<i?r:o.slice(0,t-1)}return o},getEditPosLeft:function(e){var t;for(t=e;0<=t;--t)if(!this.isFixedChar(t))return t;return null},getEditPosRight:function(e){var t,i=this._mask.length;for(t=e;t<i;++t)if(!this.isFixedChar(t))return t;return null},getFilledLength:function(e){var t,i;if(!this.getBlank())return e.length;for(i=e&&e.length;0<i--&&(t=e[i],this.isFixedChar(i)||!this.isAllowedChar(t,i)););return++i||this._prefix.length},getSubLength:function(e,t,i){var n,r=this.getPattern(),o=0,a=r.length,s=t.length;for(n=i;n<a&&o<s;)this.isFixedChar(n)&&r[n]!==t[o]?++n:this.isAllowedChar(t[o++],n,!0)&&++n;return n-i},insertRange:function(e,t,i){var n,r,o,a,s=this.getPattern(),l=this.getBlank(),d=this.isFilled(e),u=this._prefix.length,c=s.length,h=t.length,f=e;for(!l&&i>f.length&&(f+=s.slice(f.length,i)),o=i,a=0;o<c&&a<h;)(r=this.isFixedChar(o))&&s[o]!==t[a]?(!l&&o>=f.length?f+=s[o]:l&&r&&t[a]===l&&++a,++o):(n=t[a++],this.isAllowedChar(n,o,!0)&&(o<f.length?f=l||d||o<u?f.slice(0,o)+n+f.slice(o+1):this.formatValue(f.substr(0,o)+n+f.substr(o)):l||(f+=n),++o));return f},isAllowedChar:function(e,t,i){var n,r,o=this.getPattern();return this.isFixedChar(t)?o[t]===e:(n=o[t],!(r=this.getCharacters()[n])||r.test(e||"")||i&&e===this.getBlank())},isEmpty:function(e){var t,i;for(t=0,i=e.length;t<i;++t)if(!this.isFixedChar(t)&&this.isAllowedChar(e[t],t))return!1;return!0},isFilled:function(e){return this.getFilledLength(e)===this._mask.length},isFixedChar:function(e){return-1<Ext.Array.indexOf(this._fixedCharPositions,e)},setCaretToEnd:function(e,t){var i=this.getFilledLength(t),n=this.getEditPosRight(i);null!==n&&Ext.raf(function(){e.destroyed||(e.setCaretPos(n),Ext.raf(function(){e.destroyed||e.setCaretPos(n)}))})},onBlur:function(e,t){!1!==e.getAutoHideInputMask()&&this.isEmpty(t)&&(e.maskProcessed=!0,e.setValue(""))},onFocus:function(e,t){!1!==e.getAutoHideInputMask()&&(t||(e.maskProcessed=!0,e.setValue(this._mask))),this.setCaretToEnd(e,t)},onChange:function(e,t,i){var n;if(e.maskProcessed||t===i)return!(e.maskProcessed=!1);t&&(n=this.formatValue(t),e.maskProcessed=!0,e.setValue(n))},processAutocomplete:function(e,t){var i;t&&(t.length>this._mask.length&&(t=t.substr(0,this._mask.length)),i=this.formatValue(t),e.maskProcessed=!0,e.inputElement.dom.value=i,e.setValue(i),this.setCaretToEnd(e,t))},showEmptyMask:function(e,t){var i=this.formatValue();e.maskProcessed=!0,e.setValue(i),t&&this.setCaretToEnd(e)},onKeyDown:function(e,t,i){if(!i.ctrlKey&&!i.metaKey){var n,r,o,a,s,l,d="Delete"===(i.keyCode===i.DELETE),u=t;(d||i.keyCode===i.BACKSPACE)&&(n=e.getCaretPos(),a=this._prefix.length,l=(s=e.getTextSelection())[0],(o=s[1]-l)?u=this.clearRange(t,l,o):n<a||!d&&n===a?n=a:null!==(r=d?this.getEditPosRight(n):this.getEditPosLeft(n-1))&&(u=this.clearRange(t,r,1),n=r),u!==t&&(e.maskProcessed=!0,e.setValue(u)),i.preventDefault(),e.setCaretPos(n))}},onKeyPress:function(e,t,i){var n,r,o,a,s=this,l=i.keyCode,d=i.getChar(),u=s.getPattern(),c=s._prefix.length,h=t;l===i.ENTER||l===i.TAB||i.ctrlKey||i.metaKey||(n=e.getCaretPos(),a=e.getTextSelection(),s.isFixedChar(n)&&u[n]===d?(h=s.insertRange(h,d,n),++n):null!==(r=s.getEditPosRight(n))&&s.isAllowedChar(d,r)&&(o=a[0],h=s.clearRange(h,o,a[1]-o),h=s.insertRange(h,d,r),n=r+1),h!==t&&(e.maskProcessed=!0,e.setValue(h)),i.preventDefault(),n<s._lastEditablePos&&c<n&&(n=s.getEditPosRight(n)),e.setCaretPos(n))},onPaste:function(e,t,i){var n,r=i.browserEvent.clipboardData;r&&r.getData?n=r.getData("text/plain"):Ext.global.clipboardData&&Ext.global.clipboardData.getData&&(n=Ext.global.clipboardData.getData("Text")),n&&this.paste(e,t,n,e.getTextSelection()),i.preventDefault()},paste:function(e,t,i,n){var r=n[0],o=n[1]-r,a=o?this.clearRange(t,r,o):t,s=this.getSubLength(a,i,r);a=this.insertRange(a,i,r),r+=s,r=this.getEditPosRight(r)||r,a!==t&&(e.maskProcessed=!0,e.setValue(a)),e.setCaretPos(r)},syncPattern:function(e){var t,i=e.getValue();!1===e.getAutoHideInputMask()?i?(t=this.formatValue(i),e.maskProcessed=!0,e.setValue(t)):this.showEmptyMask(e):i&&(t=this.formatValue(i),e.maskProcessed=!0,e.setValue(t))},applyCharacters:function(e){var t,i,n={},r=this.getIgnoreCase()?"i":"";for(t in e)"string"==typeof(i=e[t])&&(i=new RegExp(i,r)),n[t]=i;return n},updatePattern:function(e){var t,i,n=this.getCharacters(),r=0,o=e&&e.length,a=this.getBlank(),s=[],l="",d="";for(i=0;i<o;++i)n[t=e[i]]?(r=d.length+1,d+=a):(s.push(d.length),d+=t);for(this._lastEditablePos=r,this._mask=d,this._fixedCharPositions=s,i=0;i<d.length&&this.isFixedChar(i);++i)l+=d[i];this._prefix=l}}},function(e){e.cache=new Ext.util.LRU,e.cache.maxSize=100}),Ext.define("Ext.fx.State",{isAnimatable:{"background-color":!0,"background-image":!0,"background-position":!0,"border-bottom-color":!0,"border-bottom-width":!0,"border-color":!0,"border-left-color":!0,"border-left-width":!0,"border-right-color":!0,"border-right-width":!0,"border-spacing":!0,"border-top-color":!0,"border-top-width":!0,"border-width":!0,bottom:!0,color:!0,crop:!0,"font-size":!0,"font-weight":!0,height:!0,left:!0,"letter-spacing":!0,"line-height":!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"max-height":!0,"max-width":!0,"min-height":!0,"min-width":!0,opacity:!0,"outline-color":!0,"outline-offset":!0,"outline-width":!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,right:!0,"text-indent":!0,"text-shadow":!0,top:!0,"vertical-align":!0,visibility:!0,width:!0,"word-spacing":!0,"z-index":!0,zoom:!0,transform:!0},constructor:function(e){this.data={},this.set(e)},setConfig:function(e){return this.set(e),this},setRaw:function(e){return this.data=e,this},clear:function(){return this.setRaw({})},setTransform:function(e,t){var i,n,r=this.data,o=Ext.isArray(t),a=r.transform;if(a=a||(r.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}),"string"==typeof e)switch(e){case"translate":if(o){if(0===(i=t.length))break;if(a.translateX=t[0],1===i)break;if(a.translateY=t[1],2===i)break;a.translateZ=t[2]}else a.translateX=t;break;case"rotate":if(o){if(0===(i=t.length))break;if(a.rotateX=t[0],1===i)break;if(a.rotateY=t[1],2===i)break;a.rotateZ=t[2]}else a.rotate=t;break;case"scale":if(o){if(0===(i=t.length))break;if(a.scaleX=t[0],1===i)break;if(a.scaleY=t[1],2===i)break;a.scaleZ=t[2]}else a.scaleX=t,a.scaleY=t;break;case"skew":if(o){if(0===(i=t.length))break;if(a.skewX=t[0],1===i)break;a.skewY=t[1]}else a.skewX=t;break;default:a[e]=t}else for(n in e)e.hasOwnProperty(n)&&(t=e[n],this.setTransform(n,t))},set:function(e,t){var i,n=this.data;if("string"!=typeof e)for(i in e)t=e[i],"transform"===i?this.setTransform(t):n[i]=t;else"transform"===e?this.setTransform(t):n[e]=t;return this},unset:function(e){var t=this.data;return t.hasOwnProperty(e)&&delete t[e],this},getData:function(){return this.data}}),Ext.define("Ext.fx.animation.Abstract",{extend:"Ext.Evented",mixins:["Ext.mixin.Factoryable"],factoryConfig:{type:"animation"},isAnimation:!0,requires:["Ext.fx.State"],config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:!1,replacePrevious:!0},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_TOP:"top",DIRECTION_DOWN:"down",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d.]+)%$/,constructor:function(){return this.states={},this.callParent(arguments),this},applyElement:function(e){return Ext.get(e)},applyBefore:function(e,t){if(e)return Ext.factory(e,Ext.fx.State,t)},applyAfter:function(e,t){if(e)return Ext.factory(e,Ext.fx.State,t)},setFrom:function(e){return this.setState(this.STATE_FROM,e)},setTo:function(e){return this.setState(this.STATE_TO,e)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(e){var t,i=this.stateNameRegex;for(t in e)i.test(t)&&this.setState(t,e[t]);return this},getStates:function(){return this.states},updateCallback:function(e){e&&this.setOnEnd(e)},end:function(){this.stop()},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.destroying=!0,this.stop(),this.callParent(),this.destroying=!1,this.destroyed=!0},setState:function(e,t){var i,n=this.getStates();return(i=Ext.factory(t,Ext.fx.State,n[e]))?n[e]=i:e===this.STATE_TO&&Ext.Logger.error("Setting and invalid '100%' / 'to' state of: "+t),this},getState:function(e){return this.getStates()[e]},getData:function(){var e,t,i=this,n=i.getStates(),r={},o=i.getBefore(),a=i.getAfter(),s=n[i.STATE_FROM],l=n[i.STATE_TO],d=s.getData(),u=l.getData();for(t in n)n.hasOwnProperty(t)&&(e=n[t].getData(),r[t]=e);return{before:o?o.getData():{},after:a?a.getData():{},states:r,from:d,to:u,duration:i.getDuration(),iteration:i.getIteration(),direction:i.getDirection(),easing:i.getEasing(),delay:i.getDelay(),onEnd:i.getOnEnd(),onBeforeEnd:i.getOnBeforeEnd(),onBeforeStart:i.getOnBeforeStart(),scope:i.getScope(),preserveEndState:i.getPreserveEndState(),replacePrevious:i.getReplacePrevious()}}}),Ext.define("Ext.fx.animation.Slide",{extend:"Ext.fx.animation.Abstract",alternateClassName:"Ext.fx.animation.SlideIn",alias:["animation.slide","animation.slideIn"],config:{direction:"left",out:!1,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:!0,useCssTransform:!0},reverseDirectionMap:{up:"down",top:"down",down:"up",bottom:"up",left:"right",right:"left"},applyEasing:function(e){return"auto"===e?"ease-"+(this.getOut()?"in":"out"):e},getContainerBox:function(){var e=this._containerBox;return"auto"===e&&(e=this.getElement().getParent().getBox()),e},getElementBox:function(){var e=this._elementBox;return this.getIsElementBoxFit()?this.getContainerBox():("auto"===e&&(e=this.getElement().getBox()),e)},getData:function(){var e,t,i,n,r,o=this.getElementBox(),a=this.getContainerBox(),s=o||a,l=this.getFrom(),d=this.getTo(),u=this.getOut(),c=this.getOffset(),h=this.getDirection(),f=this.getUseCssTransform(),g=this.getReverse(),p=0,m=0;switch("string"==typeof c&&(e=!0,c=parseFloat(c)),g&&(h=this.reverseDirectionMap[h]),h){case this.DIRECTION_UP:case this.DIRECTION_TOP:e&&(c=s.height*c/100),m=u?a.top-s.top-s.height-c:a.bottom-s.bottom+s.height+c;break;case this.DIRECTION_DOWN:case this.DIRECTION_BOTTOM:e&&(c=s.height*c/100),m=u?a.bottom-s.bottom+s.height+c:a.top-s.height-s.top-c;break;case this.DIRECTION_RIGHT:e&&(c=s.width*c/100),p=u?a.right-s.right+s.width+c:a.left-s.left-s.width-c;break;case this.DIRECTION_LEFT:e&&(c=s.width*c/100),p=u?a.left-s.left-s.width-c:a.right-s.right+s.width+c}return t=u?0:p,i=u?0:m,f?l.setTransform({translateX:t,translateY:i}):(l.set("left",t),l.set("top",i)),n=u?p:0,r=u?m:0,f?d.setTransform({translateX:n,translateY:r}):(d.set("left",n),d.set("top",r)),this.callParent(arguments)}}),Ext.define("Ext.fx.animation.SlideOut",{extend:"Ext.fx.animation.Slide",alias:["animation.slideOut"],config:{out:!0}}),Ext.define("Ext.fx.animation.Fade",{extend:"Ext.fx.animation.Abstract",alternateClassName:"Ext.fx.animation.FadeIn",alias:["animation.fade","animation.fadeIn"],config:{out:!1,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(e){var t=this.getTo(),i=this.getFrom();e?(i.set("opacity",1),t.set("opacity",0)):(i.set("opacity",0),t.set("opacity",1))}}),Ext.define("Ext.fx.animation.FadeOut",{extend:"Ext.fx.animation.Fade",alias:"animation.fadeOut",config:{out:!0,before:{}}}),Ext.define("Ext.fx.animation.Flip",{extend:"Ext.fx.animation.Abstract",alias:"animation.flip",config:{easing:"ease-in",direction:"right",half:!1,out:null},getData:function(){var e=this.getFrom(),t=this.getTo(),i=this.getDirection(),n=this.getOut(),r=this.getHalf()?90:180,o=1,a=1,s=0,l=0,d=0,u=0;switch(n?a=.8:o=.8,i){case this.DIRECTION_UP:case this.DIRECTION_TOP:n?d=r:s=-r;break;case this.DIRECTION_DOWN:case this.DIRECTION_BOTTOM:n?d=-r:s=r;break;case this.DIRECTION_RIGHT:n?u=r:l=-r;break;case this.DIRECTION_LEFT:n?u=-r:l=r}return e.setTransform({rotateX:s,rotateY:l,scale:o}),t.setTransform({rotateX:d,rotateY:u,scale:a}),this.callParent()}}),Ext.define("Ext.fx.animation.Pop",{extend:"Ext.fx.animation.Abstract",alias:["animation.pop","animation.popIn"],alternateClassName:"Ext.fx.animation.PopIn",config:{out:!1,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var e=this.getTo(),t=this.getFrom();return this.getOut()?(t.set("opacity",1),t.setTransform({scale:1}),e.set("opacity",0),e.setTransform({scale:0})):(t.set("opacity",0),t.setTransform({scale:0}),e.set("opacity",1),e.setTransform({scale:1})),this.callParent(arguments)}}),Ext.define("Ext.fx.animation.PopOut",{extend:"Ext.fx.animation.Pop",alias:"animation.popOut",config:{out:!0,before:{}}}),Ext.define("Ext.fx.Animation",{requires:["Ext.fx.animation.Slide","Ext.fx.animation.SlideOut","Ext.fx.animation.Fade","Ext.fx.animation.FadeOut","Ext.fx.animation.Flip","Ext.fx.animation.Pop","Ext.fx.animation.PopOut"],constructor:function(e){var t,i=Ext.fx.animation.Abstract;return"string"==typeof e?(t=e,e={}):e&&e.type&&(t=e.type),t&&((i=Ext.ClassManager.getByAlias("animation."+t))||Ext.Logger.error("Invalid animation type of: '"+t+"'")),Ext.factory(e,i)}}),Ext.define("Ext.fx.runner.Css",{extend:"Ext.Evented",requires:["Ext.fx.Animation"],prefixedProperties:{transform:!0,"transform-origin":!0,perspective:!0,"transform-style":!0,transition:!0,"transition-property":!0,"transition-duration":!0,"transition-timing-function":!0,"transition-delay":!0,animation:!0,"animation-name":!0,"animation-duration":!0,"animation-iteration-count":!0,"animation-direction":!0,"animation-timing-function":!0,"animation-delay":!0},lengthProperties:{top:!0,right:!0,bottom:!0,left:!0,width:!0,height:!0,"max-height":!0,"max-width":!0,"min-height":!0,"min-width":!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,"border-bottom-width":!0,"border-left-width":!0,"border-right-width":!0,"border-spacing":!0,"border-top-width":!0,"border-width":!0,"outline-width":!0,"letter-spacing":!0,"line-height":!0,"text-indent":!0,"word-spacing":!0,"font-size":!0,translate:!0,translateX:!0,translateY:!0,translateZ:!0,translate3d:!0,x:!0,y:!0},durationProperties:{"transition-duration":!0,"transition-delay":!0,"animation-duration":!0,"animation-delay":!0},angleProperties:{rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,skew:!0,skewX:!0,skewY:!0},DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",customProperties:{x:!0,y:!0},formattedNameCache:{x:"left",y:"top"},transformMethods3d:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"],transformMethodsNo3d:["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],constructor:function(){this.transformMethods=Ext.feature.has.Css3dTransforms?this.transformMethods3d:this.transformMethodsNo3d,this.vendorPrefix=Ext.browser.getStyleDashPrefix(),this.ruleStylesCache={},this.callParent()},getStyleSheet:function(){var e,t,i=this.styleSheet;return i||((e=document.createElement("style")).type="text/css",(document.head||document.getElementsByTagName("head")[0]).appendChild(e),t=document.styleSheets,this.styleSheet=i=t[t.length-1]),i},applyRules:function(e){var t,i,n,r,o,a,s,l=this.getStyleSheet(),d=this.ruleStylesCache,u=l.cssRules;for(t in e)for(a in i=e[t],void 0===(n=d[t])&&(o=u.length,l.insertRule(t+"{}",o),n=d[t]=u.item(o).style),r=(r=n.$cache)||(n.$cache={}),i)s=this.formatValue(i[a],a),r[a=this.formatName(a)]!==s&&(null===(r[a]=s)?n.removeProperty(a):n.setProperty(a,s));return this},applyStyles:function(e){var t,i,n,r,o,a;for(t in e)if(e.hasOwnProperty(t)){if(this.activeElement=i=document.getElementById(t),!i)continue;for(o in n=i.style,r=e[t])r.hasOwnProperty(o)&&(a=this.formatValue(r[o],o),o=this.formatName(o),null===a?n.removeProperty(o):n.setProperty(o,a))}return this.activeElement=null,this},formatName:function(e){var t=this.formattedNameCache,i=t[e];return i||(i=!Ext.os.is.Tizen&&Ext.feature.has.CssTransformNoPrefix||!this.prefixedProperties[e]?e:this.vendorPrefix+e,t[e]=i),i},formatValue:function(e,t){var i,n,r,o,a,s,l=typeof e,d=this.DEFAULT_UNIT_LENGTH,u=this.customProperties[t];if(null===e)return"";if("string"==l)return this.lengthProperties[t]&&(Ext.dom.Element.hasUnit(e)||(e+=d,u&&(e=this.getCustomValue(e,t)))),e;if("number"==l){if(0===e)return"0";if(this.lengthProperties[t])return e+=d,u&&(e=this.getCustomValue(e,t)),e;if(this.angleProperties[t])return e+this.DEFAULT_UNIT_ANGLE;if(this.durationProperties[t])return e+this.DEFAULT_UNIT_DURATION}else{if("transform"===t){for(a=[],r=0,o=(i=this.transformMethods).length;r<o;r++)n=i[r],a.push(n+"("+this.formatValue(e[n],n)+")");return a.join(" ")}if(Ext.isArray(e)){for(s=[],r=0,o=e.length;r<o;r++)s.push(this.formatValue(e[r],t));return 0<s.length?s.join(", "):"none"}}return e},getCustomValue:function(e,t){var i=Ext.fly(this.activeElement);return"x"===t?e=i.translateXY(parseInt(e,10)).x:"y"===t&&(e=i.translateXY(null,parseInt(e,10)).y),e+this.DEFAULT_UNIT_LENGTH}}),Ext.define("Ext.fx.runner.CssTransition",{extend:"Ext.fx.runner.Css",requires:["Ext.AnimationQueue"],alternateClassName:"Ext.Animator",singleton:!0,listenersAttached:!1,constructor:function(){return this.runningAnimationsData={},this.transitionQueue={toData:{},transitionData:{}},this.callParent(arguments)},attachListeners:function(){var e=top===window?Ext.getWin():Ext.getBody();this.listenersAttached=!0,e.on("transitionend","onTransitionEnd",this)},onTransitionEnd:function(e){var t=e.target,i=t.id;i&&this.runningAnimationsData.hasOwnProperty(i)&&this.refreshRunningAnimationsData(Ext.get(t),[e.browserEvent.propertyName])},getElementId:function(e){return e.getId?e.getId():e.id},onAnimationEnd:function(e,t,i,n,r){var o,a,s,l,d,u=this.getElementId(e),c=this.runningAnimationsData[u],h={},f={};if(i.un("stop","onAnimationStop",this),c&&(o=c.nameMap),h[u]=f,t.onBeforeEnd&&t.onBeforeEnd.call(t.scope||this,e,n),i.fireEvent("animationbeforeend",i,e,n),this.fireEvent("animationbeforeend",this,i,e,n),r||!n&&!t.preserveEndState)for(s=0,l=(a=t.toPropertyNames).length;s<l;s++)d=a[s],o&&!o.hasOwnProperty(d)&&(f[d]=null);t.after&&Ext.merge(f,t.after),this.applyStyles(h),t.onEnd&&t.onEnd.call(t.scope||this,e,n),i.fireEvent("animationend",i,e,n),this.fireEvent("animationend",this,i,e,n),Ext.AnimationQueue.stop(Ext.emptyFn,i)},onAllAnimationsEnd:function(e){var t=this.getElementId(e),i=this.transitionQueue,n={};delete this.runningAnimationsData[t],n[t]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null},delete i.toData[t],delete i.transitionData[t],this.applyStyles(n),this.fireEvent("animationallend",this,e)},hasRunningAnimations:function(e){var t=this.getElementId(e),i=this.runningAnimationsData;return i.hasOwnProperty(t)&&0<i[t].sessions.length},refreshRunningAnimationsData:function(e,t,i,n){var r,o,a,s,l,d,u,c,h,f,g,p=this.getElementId(e),m=this.runningAnimationsData[p],x=!1;if(m){if(r=m.nameMap,o=m.nameList,a=m.sessions,i=Boolean(i),n=Boolean(n),!a)return this;if(0===(h=a.length))return this;if(n){for(m.nameMap={},c=o.length=0;c<h;c++)l=a[c],this.onAnimationEnd(e,l.data,l.animation,i,n);a.length=0}else for(c=0;c<h;c++){for(d=(l=a[c]).map,u=l.list,f=0,g=t.length;f<g;f++)d[s=t[f]]&&(delete d[s],Ext.Array.remove(u,s),l.length--,0==--r[s]&&(delete r[s],Ext.Array.remove(o,s)));0===l.length&&(a.splice(c,1),c--,h--,x=!0,this.onAnimationEnd(e,l.data,l.animation,i))}n||i||0!==a.length||!x||this.onAllAnimationsEnd(e)}},getRunningData:function(e){var t=this.runningAnimationsData;return t.hasOwnProperty(e)||(t[e]={nameMap:{},nameList:[],sessions:[]}),t[e]},getTestElement:function(){var e,t,i=this.testElement,n=this.iframe;return i?i.ownerDocument.defaultView!==n.contentWindow&&((e=n.contentDocument).body.appendChild(i),this.testElementComputedStyle=e.defaultView.getComputedStyle(i)):((n=this.iframe=document.createElement("iframe")).setAttribute("data-sticky",!0),n.setAttribute("tabIndex",-1),(t=n.style).setProperty("visibility","hidden","important"),t.setProperty("width","0px","important"),t.setProperty("height","0px","important"),t.setProperty("position","absolute","important"),t.setProperty("border","0px","important"),t.setProperty("zIndex","-1000","important"),document.body.appendChild(n),(e=n.contentDocument).open(),e.writeln("</body>"),e.close(),this.testElement=i=e.createElement("div"),i.style.setProperty("position","absolute","important"),e.body.appendChild(i),this.testElementComputedStyle=e.defaultView.getComputedStyle(i)),i},getCssStyleValue:function(e,t){var i=this.getTestElement(),n=this.testElementComputedStyle,r=i.style;return r.setProperty(e,t),Ext.browser.is.Firefox&&i.offsetHeight,t=n.getPropertyValue(e),r.removeProperty(e),t},run:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E,b,C,S,w,T,P,k,I,R,M=this,A=[],D=M.lengthProperties,F={},L=M.transitionQueue.toData,O={},B=M.transitionQueue.transitionData;for(M.listenersAttached||M.attachListeners(),h=0,g=(e=Ext.Array.from(e)).length;h<g;h++){for(E in p=e[h],p=Ext.factory(p,Ext.fx.Animation),A.push(p),M.activeElement=t=p.getElement(),Ext.AnimationQueue.start(Ext.emptyFn,p),y=window.getComputedStyle(t.dom),O[i=M.getElementId(t)]=O=Ext.merge({},p.getData()),(R=p.getOnBeforeStart())&&R.call(p.scope||M,t),p.fireEvent("animationstart",p,O),M.fireEvent("animationstart",M,p,O),o=O.before,n=O.from,r=O.to,O.fromPropertyNames=a=[],O.toPropertyNames=s=[],r)r.hasOwnProperty(E)&&(r[E]=b=M.formatValue(r[E],E),v=M.formatName(E),(S=D.hasOwnProperty(E))||(b=M.getCssStyleValue(v,b)),n.hasOwnProperty(E)?(n[E]=C=M.formatValue(n[E],E),S||(C=M.getCssStyleValue(v,C)),b!==C&&(a.push(v),s.push(v))):b!==y.getPropertyValue(v)&&s.push(v));if(0!==(m=s.length)){for(0<(P=(u=M.getRunningData(i)).sessions).length&&M.refreshRunningAnimationsData(t,Ext.Array.merge(a,s),!0,O.replacePrevious),w=u.nameMap,T=u.nameList,x={},f=0;f<m;f++)x[E=s[f]]=!0,w.hasOwnProperty(E)?w[E]++:(w[E]=1,T.push(E));k={element:t,map:x,list:s.slice(),length:m,data:O,animation:p},P.push(k),p.on("stop","onAnimationStop",M),c=Ext.apply({},o),Ext.apply(c,n),0<T.length&&(a=Ext.Array.difference(T,a),s=Ext.Array.merge(a,s),c["transition-property"]=a),F[i]=c,L[i]=Ext.apply({},r),B[i]={"transition-property":s,"transition-duration":O.duration,"transition-timing-function":O.easing,"transition-delay":O.delay},p.startTime=Date.now()}else M.onAnimationEnd(t,O,p)}return M.activeElement=null,d=M.$className,M.applyStyles(F),l=function(e){e.data===d&&e.source===window&&(window.removeEventListener("message",l,!1),M.applyStyles(M.transitionQueue.toData))},M.messageTimerId||((I=function(){var e;M.messageTimerId=null,Ext.isIE?(M.applyStyles(M.transitionQueue.transitionData),M.messageFollowupId||((e=function(){M.messageFollowupId=null,window.addEventListener("message",l,!1),window.postMessage(d,"*")}).$skipTimerCheck=!0,M.messageFollowupId=Ext.raf(e))):(Ext.merge(M.transitionQueue.toData,M.transitionQueue.transitionData),window.addEventListener("message",l,!1),window.postMessage(d,"*"))}).$skipTimerCheck=!0,M.messageTimerId=Ext.raf(I)),A},onAnimationStop:function(e){var t,i,n,r,o,a=this.runningAnimationsData,s=0,l=0;for(t in a)if(a.hasOwnProperty(t))for(s++,n=0,r=(i=a[t].sessions).length;n<r;n++)(o=i[n]).animation===e&&(this.refreshRunningAnimationsData(o.element,o.list.slice(),!1),e.destroying&&l++);s===l&&(this.messageFollowupId&&(Ext.unraf(this.messageFollowupId),this.messageFollowupId=null),this.messageTimerId&&(Ext.unraf(this.messageTimerId),this.messageTimerId=null),Ext.apply(this.transitionQueue,{toData:{},transitionData:{}}))}}),Ext.define("Ext.fx.Runner",{requires:["Ext.fx.runner.CssTransition"],constructor:function(){return new Ext.fx.runner.CssTransition}}),Ext.define("Ext.fx.animation.Cube",{extend:"Ext.fx.animation.Abstract",alias:"animation.cube",config:{before:{},after:{},direction:"right",out:!1},getData:function(){var e=this.getTo(),t=this.getFrom(),i=this.getBefore(),n=this.getAfter(),r=this.getOut(),o=this.getDirection(),a=this.getElement().getWidth(),s=r?"100% 100%":"0% 0%",l=1,d=1,u={rotateY:0,translateZ:0},c={rotateY:0,translateZ:0};return"left"!==o&&"right"!==o||(r?(d=.5,c.translateZ=a,c.rotateY=-90):(l=.5,u.translateZ=a,u.rotateY=90)),i["transform-origin"]=s,n["transform-origin"]=null,e.set("transform",c),t.set("transform",u),t.set("opacity",l),e.set("opacity",d),this.callParent(arguments)}}),Ext.define("Ext.fx.animation.Wipe",{extend:"Ext.fx.Animation",alternateClassName:"Ext.fx.animation.WipeIn",config:{easing:"ease-out",direction:"right",out:!1},refresh:function(){var e,t,i=this.getElement().dom.getBoundingClientRect(),n=i.width,r=i.height,o=this.getFrom(),a=this.getTo(),s=this.getOut(),l=0,d=0,u=0,c=0;switch(this.getDirection()){case"up":c=s?(e="-webkit-gradient(linear, left top, left bottom, from(#000), to(transparent), color-stop(33%, #000), color-stop(66%, transparent))",d=3*r+"px",r+"px"):(e="-webkit-gradient(linear, left top, left bottom, from(transparent), to(#000), color-stop(66%, #000), color-stop(33%, transparent))",d=2*-r+"px",0);break;case"down":c=s?(e="-webkit-gradient(linear, left top, left bottom, from(transparent), to(#000), color-stop(66%, #000), color-stop(33%, transparent))",d=2*-r+"px",0):(e="-webkit-gradient(linear, left top, left bottom, from(#000), to(transparent), color-stop(33%, #000), color-stop(66%, transparent))",d=3*r+"px",r+"px");break;case"right":u=s?(e="-webkit-gradient(linear, right top, left top, from(#000), to(transparent), color-stop(33%, #000), color-stop(66%, transparent))",l=2*-n+"px",0):(e="-webkit-gradient(linear, right top, left top, from(transparent), to(#000), color-stop(66%, #000), color-stop(33%, transparent))",2*-n+"px");break;case"left":u=s?(e="-webkit-gradient(linear, right top, left top, from(transparent), to(#000), color-stop(66%, #000), color-stop(33%, transparent))",2*-n+"px"):(e="-webkit-gradient(linear, right top, left top, from(#000), to(transparent), color-stop(33%, #000), color-stop(66%, transparent))",l=2*-n+"px",0)}s||(t=d,d=c,c=t,t=l,l=u,u=t),o.set("mask-image",e),o.set("mask-size",3*n+"px "+3*r+"px"),o.set("mask-position-x",l),o.set("mask-position-y",d),a.set("mask-position-x",u),a.set("mask-position-y",c)}}),Ext.define("Ext.fx.animation.WipeOut",{extend:"Ext.fx.animation.Wipe",config:{out:!0}}),Ext.define("Ext.fx.easing.Bounce",{extend:"Ext.fx.easing.Abstract",config:{springTension:.3,acceleration:30,startVelocity:0},getValue:function(){var e=(Ext.Date.now()-this.getStartTime())/this.getAcceleration(),t=e*Math.pow(Math.E,-this.getSpringTension()*e);return this.getStartValue()+this.getStartVelocity()*t}}),Ext.define("Ext.fx.easing.Momentum",{extend:"Ext.fx.easing.Abstract",config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(e){var t=Math.log(1-e/10);this.theta=t,this.alpha=t/this.getAcceleration()},updateStartVelocity:function(e){this.velocity=e*this.getAcceleration()},updateAcceleration:function(e){this.velocity=this.getStartVelocity()*e,this.alpha=this.theta/e},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var e=Ext.Date.now()-this.getStartTime();return Math.exp(e*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}}),Ext.define("Ext.fx.easing.BoundMomentum",{extend:"Ext.fx.easing.Abstract",requires:["Ext.fx.easing.Momentum","Ext.fx.easing.Bounce"],config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:.01,startVelocity:0},applyMomentum:function(e,t){return Ext.factory(e,Ext.fx.easing.Momentum,t)},applyBounce:function(e,t){return Ext.factory(e,Ext.fx.easing.Bounce,t)},updateStartTime:function(e){this.getMomentum().setStartTime(e),this.callParent(arguments)},updateStartVelocity:function(e){this.getMomentum().setStartVelocity(e)},updateStartValue:function(e){this.getMomentum().setStartValue(e)},reset:function(){return this.lastValue=null,this.isBouncingBack=!1,this.isOutOfBound=!1,this.callParent(arguments)},getValue:function(){var e,t,i=this.getMomentum(),n=this.getBounce(),r=i.getStartVelocity(),o=0<r?1:-1,a=this.getMinMomentumValue(),s=this.getMaxMomentumValue(),l=1==o?s:a,d=this.lastValue;if(0===r)return this.getStartValue();if(!this.isOutOfBound){if(e=i.getValue(),t=i.getVelocity(),Math.abs(t)<this.getMinVelocity()&&(this.isEnded=!0),a<=e&&e<=s)return e;this.isOutOfBound=!0,n.setStartTime(Ext.Date.now()).setStartVelocity(t).setStartValue(l)}return e=n.getValue(),this.isEnded||(this.isBouncingBack?Math.round(e)===l&&(this.isEnded=!0):null!==d&&(1==o&&e<d||-1==o&&d<e)&&(this.isBouncingBack=!0)),this.lastValue=e}}),Ext.define("Ext.fx.easing.EaseIn",{extend:"Ext.fx.easing.Linear",alias:"easing.ease-in",config:{exponent:4,duration:1500},getValue:function(){var e=Ext.Date.now()-this.getStartTime(),t=this.getDuration(),i=this.getStartValue(),n=this.getEndValue(),r=this.distance,o=e/t,a=i+Math.pow(o,this.getExponent())*r;return t<=e?(this.isEnded=!0,n):a}}),Ext.define("Ext.fx.easing.EaseOut",{extend:"Ext.fx.easing.Linear",alias:"easing.ease-out",config:{exponent:4,duration:1500},getValue:function(){var e=Ext.Date.now()-this.getStartTime(),t=this.getDuration(),i=this.getStartValue(),n=this.getEndValue(),r=this.distance,o=1-e/t,a=i+(1-Math.pow(o,this.getExponent()))*r;return t<=e?(this.isEnded=!0,n):a}}),Ext.define("Ext.fx.easing.Easing",{requires:["Ext.fx.easing.Linear"],constructor:function(e){return Ext.factory(e,Ext.fx.easing.Linear,null,"easing")}}),Ext.define("Ext.fx.runner.CssAnimation",{extend:"Ext.fx.runner.Css",constructor:function(){return this.runningAnimationsMap={},this.elementEndStates={},this.animationElementMap={},this.keyframesRulesCache={},this.uniqueId=0,this.callParent(arguments)},attachListeners:function(){this.listenersAttached=!0,Ext.getWin().on({animationstart:"onAnimationStart",animationend:"onAnimationEnd",scope:this})},onAnimationStart:function(e){var t=e.browserEvent.animationName,i=this.animationElementMap[t],n=this.runningAnimationsMap[i][t],r=this.elementEndStates,o=r[i],a={};o&&(delete r[i],a[i]=o,this.applyStyles(a)),n.before&&(a[i]=n.before,this.applyStyles(a))},onAnimationEnd:function(e){var t=e.target,i=e.browserEvent.animationName,n=this.animationElementMap,r=n[i],o=this.runningAnimationsMap[r],a=o[i];a.onBeforeEnd&&a.onBeforeEnd.call(a.scope||this,t),a.onEnd&&a.onEnd.call(a.scope||this,t),delete n[i],delete o[i],this.removeKeyframesRule(i)},generateAnimationId:function(){return"animation-"+ ++this.uniqueId},run:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m={},x=this.elementEndStates,y=this.animationElementMap,v=this.runningAnimationsMap;for(this.listenersAttached||this.attachListeners(),o=0,a=(e=Ext.Array.from(e)).length;o<a;o++){for(l in s=e[o],n=(s=Ext.factory(s,Ext.fx.Animation)).getElement().getId(),y[r=s.getName()||this.generateAnimationId()]=n,i=(s=s.getData()).states,this.addKeyframesRule(r,i),(t=(t=v[n])||(v[n]={}))[r]=s,u=[],c=[],h=[],f=[],g=[],p=[],t)t.hasOwnProperty(l)&&(d=t[l],u.push(l),c.push(d.duration),h.push(d.easing),f.push(d.delay),g.push(d.direction),p.push(d.iteration));m[n]={"animation-name":u,"animation-duration":c,"animation-timing-function":h,"animation-delay":f,"animation-direction":g,"animation-iteration-count":p},s.preserveEndState&&(x[n]=i["100%"])}this.applyStyles(m)},addKeyframesRule:function(e,t){var i,n,r,o,a,s,l,d,u;for(i in l=(a=(o=this.getStyleSheet()).cssRules).length,o.insertRule("@"+this.vendorPrefix+"keyframes "+e+"{}",l),r=a[l],t){for(d in n=t[i],l=(a=r.cssRules).length,s=[],n)u=this.formatValue(n[d],d),d=this.formatName(d),s.push(d+":"+u);r.insertRule(i+"{"+s.join(";")+"}",l)}return this},removeKeyframesRule:function(e){var t,i,n=this.getStyleSheet(),r=n.cssRules;for(t=0,i=r.length;t<i;t++)if(r[t].name===e){n.removeRule(t);break}return this}}),Ext.define("Ext.list.AbstractTreeItem",{extend:"Ext.Widget",isTreeListItem:!0,cachedConfig:{expandable:!1,expanded:!1,iconCls:"",leaf:!0,loading:!1,selected:!1,selectedParent:!1},config:{iconClsProperty:"iconCls",indent:null,owner:null,node:null,over:null,parentItem:null,text:{lazy:!0,$value:""},textProperty:"text"},updateNode:function(e){if(e){var t,i,n,r,o,a,s=this.itemMap;if(this.element.dom.setAttribute("data-recordId",e.internalId),!s)for(t=e.childNodes,i=this.getOwner(),this.itemMap=s={},r=0,n=t.length;r<n;++r)(a=t[r]).data.visible&&(o=i.createItem(a,this),s[a.internalId]=o,this.insertItem(o,null));this.setExpanded(e.isExpanded()),this.doNodeUpdate(e)}},updateSelected:function(e){var t;if(!this.isConfiguring)for(t=this.getParentItem();t&&!t.isRootListItem;)t.setSelectedParent(e),t=t.getParentItem()},collapse:function(){this.getNode().collapse()},expand:function(){this.getNode().expand()},getToolElement:Ext.emptyFn,insertItem:Ext.emptyFn,isExpanded:function(){return this.getExpanded()},isSelectionEvent:Ext.emptyFn,isToggleEvent:Ext.emptyFn,nodeCollapse:function(e,t){var i=this.getOwner(),n=this.preventAnimation?null:i.getAnimation();this.nodeCollapseBegin(n,t),n||this.nodeCollapseEnd(t)},nodeCollapseBegin:function(e,t){var i=this.getOwner();this.setExpanded(!1),i.fireEvent("itemcollapse",i,this)},nodeCollapseEnd:function(e){e||this.destroying||this.getOwner().updateLayout()},nodeExpand:function(e){var t=this.getOwner(),i=!this.getFloated()&&t.getAnimation();this.nodeExpandBegin(i),i||this.nodeExpandEnd()},nodeExpandBegin:function(e){var t=this.getOwner();this.setExpanded(!0),t.fireEvent("itemexpand",t,this)},nodeExpandEnd:function(){this.destroying||this.getOwner().updateLayout()},nodeInsert:function(e,t){var i,n=this.getOwner(),r=this.itemMap,o=e.internalId,a=n.getItem(e),s=null;a?((i=a.getParentItem()).removeItem(a),i!==this&&(i.doUpdateExpandable(),a.setParentItem(this))):a=this.getOwner().createItem(e,this),r[o]=a,t&&(s=r[t.internalId]),this.insertItem(a,s),this.doUpdateExpandable(),n.fireEvent("iteminsert",n,this,a,s),n.updateLayout()},nodeRemove:function(e){var t=this.itemMap,i=this.getOwner(),n=e.internalId,r=t[n];r&&(delete t[n],this.removeItem(r),r.destroy(),this.doUpdateExpandable(),i.fireEvent("itemremove",i,this,r),i.updateLayout())},nodeUpdate:function(e,t){this.doNodeUpdate(e)},onClick:function(e){var t=this.getOwner(),i=this.getNode(),n={event:e,item:this,node:i,tree:t,select:!1!==i.get("selectable")&&this.isSelectionEvent(e),toggle:this.isToggleEvent(e)};!1!==t.fireEvent("itemclick",t,n)&&(n.toggle&&(this.toggleExpanded(),e.preventDefault()),n.select&&t.setSelection(this.getNode()))},removeItem:Ext.emptyFn,destroy:function(){var e,t=this.itemMap,i=this.getOwner();if(t){for(e in t)t[e].destroy();this.itemMap=null}i&&i.removeItem(this.getNode()),this.setNode(null),this.setParentItem(null),this.setOwner(null),this.callParent()},privates:{doNodeUpdate:function(e,t){var i=this.getTextProperty(),n=this.getIconClsProperty();i&&this.setText(e.data[i]),n&&this.setIconCls(e.data[n]),this.setLoading(e.isLoading()),this.setLeaf(e.isLeaf()),this.doUpdateExpandable()},doUpdateExpandable:function(){var e=this.getNode();this.setExpandable(e.isExpandable())},toggleExpanded:function(){this.isExpanded()?this.collapse():this.expand()},updateIndent:function(e){var t,i=this.itemMap;for(t in i)i[t].setIndent(e)},updateOwner:function(e){this.parent=e}}}),Ext.define("Ext.overrides.list.AbstractTreeItem",{override:"Ext.list.AbstractTreeItem",config:{floated:null}}),Ext.define("Ext.list.RootTreeItem",{extend:"Ext.list.AbstractTreeItem",isRootListItem:!0,element:{reference:"element",tag:"ul",cls:Ext.baseCSSPrefix+"treelist-root-container"},insertItem:function(e,t){t?e.element.insertBefore(t.element):this.element.appendChild(e.element)},isToggleEvent:function(e){return!1}}),Ext.define("Ext.mixin.ItemRippler",{mixinId:"itemrippler",config:{itemRipple:null},shouldRippleItem:function(e,t){var i,n;return!t.getTarget(this.noItemRippleSelector,this.element)&&((i=e&&this.getItemRipple())&&e.isWidget&&(n=e.shouldRipple(t))&&(i=Ext.apply({},i,n)),i)},rippleItem:function(e,t){if(e){var i,n,r,o=t.type.match(this.rippleStateRe),a=this.shouldRippleItem(e,t),s=a&&a.release,l=!0===s,d=e.isWidget?e.el:e;a&&o&&l&&(this.$rippleStart=t.getXY()),a&&d&&(!o&&l||o&&!0!==s)&&(r=this.$rippledItems||(this.$rippledItems=[]),(n=this.$rippleStart)?(i=t.getXY(),Math.sqrt(Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2))<=8&&(d.ripple(t,a),r.push(d))):(d.ripple(t,a),r.push(d)),this.$rippleStart=null)}},destroyAllRipples:function(){var e;for(e=this.$rippledItems;e&&e.length;)e.pop().destroyAllRipples()},privates:{noItemRippleSelector:"."+Ext.baseCSSPrefix+"item-no-ripple, ."+Ext.baseCSSPrefix+"item-no-tap",rippleStateRe:/start|down/}}),Ext.define("Ext.list.TreeItem",{extend:"Ext.list.AbstractTreeItem",xtype:"treelistitem",collapsedCls:Ext.baseCSSPrefix+"treelist-item-collapsed",expandedCls:Ext.baseCSSPrefix+"treelist-item-expanded",floatedToolCls:Ext.baseCSSPrefix+"treelist-item-tool-floated",leafCls:Ext.baseCSSPrefix+"treelist-item-leaf",expandableCls:Ext.baseCSSPrefix+"treelist-item-expandable",hideIconCls:Ext.baseCSSPrefix+"treelist-item-hide-icon",loadingCls:Ext.baseCSSPrefix+"treelist-item-loading",selectedCls:Ext.baseCSSPrefix+"treelist-item-selected",selectedParentCls:Ext.baseCSSPrefix+"treelist-item-selected-parent",withIconCls:Ext.baseCSSPrefix+"treelist-item-with-icon",hoverCls:Ext.baseCSSPrefix+"treelist-item-over",rowHoverCls:Ext.baseCSSPrefix+"treelist-row-over",isTreeListItem:!0,config:{rowCls:null},rowClsProperty:"rowCls",element:{reference:"element",tag:"li",cls:Ext.baseCSSPrefix+"treelist-item",children:[{reference:"rowElement",cls:Ext.baseCSSPrefix+"treelist-row",children:[{reference:"wrapElement",cls:Ext.baseCSSPrefix+"treelist-item-wrap",children:[{reference:"iconElement",cls:Ext.baseCSSPrefix+"treelist-item-icon"},{reference:"textElement",cls:Ext.baseCSSPrefix+"treelist-item-text"},{reference:"expanderElement",cls:Ext.baseCSSPrefix+"treelist-item-expander"}]}]},{reference:"itemContainer",tag:"ul",cls:Ext.baseCSSPrefix+"treelist-container"},{reference:"toolElement",cls:Ext.baseCSSPrefix+"treelist-item-tool"}]},constructor:function(e){var t;this.callParent([e]),(t=this.toolElement.dom).parentNode.removeChild(t)},getToolElement:function(){return this.toolElement},insertItem:function(e,t){t?e.element.insertBefore(t.element):this.itemContainer.appendChild(e.element)},isSelectionEvent:function(e){var t=this.getOwner();return!this.isToggleEvent(e)||!t.getExpanderOnly()||t.getSelectOnExpander()},isToggleEvent:function(e){return this.getOwner().getExpanderOnly()?e.target===this.expanderElement.dom:!this.itemContainer.contains(e.target)},nodeCollapseBegin:function(e,t){var i,n=this.itemContainer;this.expanding&&this.stopAnimation(this.expanding),i=e&&n.getHeight(),this.callParent([e,t]),e&&(n.dom.style.display="block",this.collapsingForExpand=t,this.collapsing=this.runAnimation(Ext.merge({from:{height:i},to:{height:0},callback:this.nodeCollapseDone,scope:this},e)))},nodeCollapseDone:function(e){var t=this.itemContainer;this.destroying||this.destroyed||(this.collapsing=null,t.dom.style.display="",t.setHeight(null),this.nodeCollapseEnd(this.collapsingForExpand))},nodeExpandBegin:function(e){var t,i=this.itemContainer;this.collapsing&&this.stopAnimation(this.collapsing),this.callParent([e]),e&&(t=i.getHeight(),i.setHeight(0),this.expanding=this.runAnimation(Ext.merge({to:{height:t},callback:this.nodeExpandDone,scope:this},e)))},nodeExpandDone:function(){this.expanding=null,this.itemContainer.setHeight(null),this.nodeExpandEnd()},removeItem:function(e){this.itemContainer.removeChild(e.element)},updateNode:function(e,t){this.syncIndent(),this.callParent([e,t])},updateExpandable:function(e){this.updateExpandCls()},updateExpanded:function(e){var t=this.getNode();this.updateExpandCls(),t&&t.set("expanded",e)},updateIconCls:function(e,t){var i=this.element;this.doIconCls(this.iconElement,e,t),this.doIconCls(this.toolElement,e,t),i.toggleCls(this.withIconCls,!!e),i.toggleCls(this.hideIconCls,null===e)},updateLeaf:function(e){this.element.toggleCls(this.leafCls,e)},updateLoading:function(e){this.element.toggleCls(this.loadingCls,e)},updateOver:function(e){this.element.toggleCls(this.hoverCls,!!e),this.rowElement.toggleCls(this.rowHoverCls,1<e)},updateRowCls:function(e,t){this.rowElement.replaceCls(t,e)},updateSelected:function(e,t){var i=this.selectedCls,n=this.getToolElement();this.callParent([e,t]),this.element.toggleCls(i,e),n&&n.toggleCls(i,e)},updateSelectedParent:function(e){var t;this.element.toggleCls(this.selectedParentCls,e),(t=this.getToolElement())&&t.toggleCls(this.selectedCls,e)},updateText:function(e){this.textElement.update(e)},privates:{doNodeUpdate:function(e){this.callParent([e]),this.setRowCls(e&&e.data[this.rowClsProperty])},doIconCls:function(e,t,i){i&&e.removeCls(i),t&&e.addCls(t)},syncIndent:function(){var e,t=this.getIndent(),i=this.getNode();i&&(e=i.data.depth-1,this.wrapElement.dom.style.marginLeft=e*t+"px")},updateExpandCls:function(){if(!this.updatingExpandCls){var e=this.getExpandable(),t=this.element,i=this.getExpanded(),n=this.expandedCls,r=this.collapsedCls;this.updatingExpandCls=!0,t.toggleCls(this.expandableCls,e),e?(t.toggleCls(n,i),t.toggleCls(r,!i)):t.removeCls([n,r]),this.updatingExpandCls=!1}},updateIndent:function(e,t){this.syncIndent(),this.callParent([e,t])}}},function(e){e.prototype.floatedCls=[Ext.Widget.prototype.floatedCls,Ext.baseCSSPrefix+"treelist-item-floated"]}),Ext.define("Ext.overrides.list.TreeItem",{override:"Ext.list.TreeItem",setFloated:function(e){var t,i,n=this,r=n.element,o=n.placeholder;n.treeItemFloated!==e&&(e?((o=r.clone(!1,!0)).id+="-placeholder",n.placeholder=Ext.get(o),n.wasExpanded=n.getExpanded(),n.setExpanded(!0),r.addCls(n.floatedCls),r.dom.parentNode.insertBefore(o,r.dom),n.floater=n.createFloater()):o&&(i=n.wasExpanded,t=n.getNode(),n.setExpanded(i),!i&&t.isExpanded()&&(n.preventAnimation=!0,t.collapse(),n.preventAnimation=!1),n.floater.remove(n,!1),r.removeCls(n.floatedCls),o.dom.parentNode.insertBefore(r.dom,o.dom),o.destroy(),n.floater.destroy(),n.placeholder=n.floater=null),n.treeItemFloated=e)},getFloated:function(){return this.treeItemFloated},runAnimation:function(e){return this.itemContainer.addAnimation(e)},stopAnimation:function(e){e.jumpToEnd()},privates:{createFloater:function(){var e,t=this.getOwner(),i=this.up("treelist"),n=this.getToolElement(),r=i.expandedWidth,o=i.defaultListWidth;return null===r&&(r=o),this.floater=e=new Ext.container.Container({cls:i.self.prototype.element.cls+" "+i.uiPrefix+i.getUi()+" "+Ext.baseCSSPrefix+"treelist-floater",floating:!0,width:Ext.isIE8?o:r-n.getWidth(),shadow:!1,hidden:!0,renderTo:Ext.getBody(),listeners:{element:"el",click:function(e){return t.onClick(e)}}}),e.add(this),e.show(),e.el.alignTo(n,"tr?"),e}}}),Ext.define("Ext.list.Tree",{extend:"Ext.Gadget",xtype:"treelist",mixins:["Ext.mixin.ItemRippler"],requires:["Ext.list.RootTreeItem"],expanderFirstCls:Ext.baseCSSPrefix+"treelist-expander-first",expanderOnlyCls:Ext.baseCSSPrefix+"treelist-expander-only",highlightPathCls:Ext.baseCSSPrefix+"treelist-highlight-path",microCls:Ext.baseCSSPrefix+"treelist-micro",uiPrefix:Ext.baseCSSPrefix+"treelist-",element:{reference:"element",cls:Ext.baseCSSPrefix+"treelist "+Ext.baseCSSPrefix+"unselectable",listeners:{click:"onClick",touchstart:"onTouchStart",touchend:"onTouchEnd",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseover:"onMouseOver"},children:[{reference:"toolsElement",cls:Ext.baseCSSPrefix+"treelist-toolstrip",listeners:{click:"onToolStripClick",mouseover:"onToolStripMouseOver"}}]},cachedConfig:{animation:{duration:500,easing:"ease"},expanderFirst:!0,expanderOnly:!0},config:{floatLeafItems:!1,defaults:{xtype:"treelistitem"},highlightPath:null,iconSize:null,indent:null,micro:!1,overItem:null,selection:null,selectOnExpander:!1,singleExpand:null,store:null,ui:null},twoWayBindable:{selection:1},publishes:{selection:1},defaultBindProperty:"store",constructor:function(e){this.callParent([e]),this.publishState("selection",this.getSelection())},destroy:function(){this.unfloatAll(),this.activeFloater=null,this.setSelection(null),this.setStore(null),this.callParent()},updateOverItem:function(e,t){var i,n,r={},o=2;for(i=e;i;i=this.getItem(n.parentNode))r[(n=i.getNode()).internalId]=!0,i.setOver(o),o=1;if(t&&!t.destroyed)for(i=t;i&&!r[(n=i.getNode()).internalId];i=this.getItem(n.parentNode))i.setOver(0)},applyMicro:function(e){return Boolean(e)},applySelection:function(e,t){var i=this.getStore();return i||(e=null),!i||null===e||e instanceof Ext.data.Model||(e=i.getNodeById(e)),e&&!1===e.get("selectable")&&(e=t),e},updateSelection:function(e,t){var i,n;if(!this.destroying){if((i=this.getItem(t))&&i.setSelected(!1),i=this.getItem(e))for(i.setSelected(!0);n=i.getParentItem();)n.setExpanded(!0),i=n;this.fireEvent("selectionchange",this,e)}},applyStore:function(e){return e&&Ext.StoreManager.lookup(e,"tree")},updateStore:function(e,t){var i;t&&(t.destroyed||(t.getAutoDestroy()?t.destroy():this.storeListeners.destroy()),this.removeRoot(),this.storeListeners=null),e&&(this.storeListeners=e.on({destroyable:!0,scope:this,nodeappend:"onNodeAppend",nodecollapse:"onNodeCollapse",nodeexpand:"onNodeExpand",nodeinsert:"onNodeInsert",noderemove:"onNodeRemove",rootchange:"onRootChange",update:"onNodeUpdate",refresh:"onRefresh"}),(i=e.getRoot())&&this.createRootItem(i)),this.destroying||this.updateLayout()},updateExpanderFirst:function(e){this.element.toggleCls(this.expanderFirstCls,e)},updateExpanderOnly:function(e){this.element.toggleCls(this.expanderOnlyCls,!e)},updateHighlightPath:function(e){this.element.toggleCls(this.highlightPathCls,e)},updateMicro:function(e){e||(this.unfloatAll(),this.activeFloater=null),this.element.toggleCls(this.microCls,e)},updateUi:function(e,t){var i=this.element,n=this.uiPrefix;t&&i.removeCls(n+t),e&&i.addCls(n+e),delete this.iconSize,this.syncIconSize()},getItem:function(e){var t,i=this.itemMap;return e&&i&&(t=i[e.internalId]),t||null},getItemConfig:function(e,t){return Ext.apply({parentItem:t.isRootListItem?null:t,owner:this,node:e,indent:this.getIndent()},this.getDefaults())},privates:{checkForOutsideClick:function(e){this.activeFloater.element.contains(e.target)||this.unfloatAll()},collapsingForExpand:!1,createItem:function(e,t){var i,n,r=Ext.create(this.getItemConfig(e,t)),o=this.toolsElement;return t.isRootListItem&&(i=r.getToolElement())&&((n=this.findVisiblePreviousSibling(e))?(n=this.getItem(n),i.insertAfter(n.getToolElement())):o.insertFirst(i),i.dom.setAttribute("data-recordId",e.internalId),i.isTool=!0),this.itemMap[e.internalId]=r},createRootItem:function(e){var t;this.itemMap={},this.rootItem=t=new Ext.list.RootTreeItem({indent:this.getIndent(),node:e,owner:this}),this.element.appendChild(t.element),this.itemMap[e.internalId]=t},findVisiblePreviousSibling:function(e){for(var t=e.previousSibling;t;){if(t.data.visible)return t;t=t.previousSibling}return null},floatItem:function(e,t){var i,n=this;e.getFloated()||(n.toolMouseListeners&&(n.toolMouseListeners.destroy(),n.floaterMouseListeners.destroy(),n.floaterMouseListeners=n.toolMouseListeners=null),n.unfloatAll(),!t&&!n.getFloatLeafItems()&&e.getNode().isLeaf()||(n.activeFloater=i=e,n.floatedByHover=t,e.setFloated(!0),t?(n.toolMouseListeners=e.getToolElement().monitorMouseLeave(300,n.checkForMouseLeave,n),n.floaterMouseListeners=(e.floater||e).el.monitorMouseLeave(300,n.checkForMouseLeave,n),i.element.on("mouseover","onMouseOver",n)):Ext.on("mousedown","checkForOutsideClick",n)))},shouldRippleItem:function(e,t){return(!e||!e.getSelected())&&this.mixins.itemrippler.shouldRippleItem.call(this,e,t)},onTouchStart:function(e){this.doItemRipple(e)},onTouchEnd:function(e){this.doItemRipple(e)},doItemRipple:function(e){var t,i=e.getTarget("[data-recordId]");i&&(t=i.getAttribute("data-recordId"),(i=this.itemMap[t])&&this.shouldRippleItem(i,e)&&this.rippleItem(i,e))},onClick:function(e){var t,i=e.getTarget("[data-recordId]");i&&(t=i.getAttribute("data-recordId"),(i=this.itemMap[t])&&i.onClick(e))},onMouseEnter:function(e){this.onMouseOver(e)},onMouseLeave:function(){this.setOverItem(null)},onMouseOver:function(e){var t=Ext.Component.from(e);this.setOverItem(t&&t.isTreeListItem&&t)},checkForMouseLeave:function(e){var t=this.activeFloater,i=e.getRelatedTarget();t&&(i===t.getToolElement().dom||t.element.contains(i)||this.unfloatAll())},onNodeAppend:function(e,t){var i;e&&(i=this.itemMap[e.internalId])&&i.nodeInsert(t,null)},onNodeCollapse:function(e){var t=this.itemMap[e.internalId];t&&t.nodeCollapse(e,this.collapsingForExpand)},onNodeExpand:function(e){var t,i,n,r,o=this.itemMap[e.internalId];if(o){if(!o.isRootItem&&this.getSingleExpand()){for(this.collapsingForExpand=!0,n=0,i=(t=(o.getParentItem()||this.rootItem).getNode().childNodes).length;n<i;++n)(r=t[n])!==e&&r.collapse();this.collapsing=!1}o.nodeExpand(e)}},onNodeInsert:function(e,t,i){var n=this.itemMap[e.internalId];n&&n.nodeInsert(t,i)},onNodeRemove:function(e,t,i){var n;e&&!i&&(n=this.itemMap[e.internalId])&&n.nodeRemove(t)},onNodeUpdate:function(e,t,i,n){var r=this.itemMap[t.internalId];r&&r.nodeUpdate(t,n)},onRefresh:function(e){this.onRootChange(e.getRoot())},onRootChange:function(e){this.removeRoot(),e&&this.createRootItem(e),this.updateLayout(),this.fireEvent("refresh",this)},removeItem:function(e){var t,i,n=this.itemMap,r=e.internalId;n&&(null===(t=n[r]).getParentItem()&&(i=t.getToolElement())&&this.toolsElement.removeChild(i),delete n[r])},removeRoot:function(){var e=this.rootItem;e&&(this.element.removeChild(e.element),this.rootItem=this.itemMap=Ext.destroy(e))},onToolStripClick:function(e){var t,i=e.getTarget("[data-recordId]");i&&(t=i.getAttribute("data-recordId"),(i=this.itemMap[t])&&(i===this.activeFloater?this.unfloatAll():this.floatItem(i,!1)))},onToolStripMouseOver:function(e){var t,i=e.getTarget("[data-recordId]");i&&(t=i.getAttribute("data-recordId"),(i=this.itemMap[t])&&this.floatItem(i,!0))},syncIconSize:function(){var e=this.iconSize||(this.iconSize=parseInt(this.element.getStyle("background-position"),10));this.setIconSize(e)},unfloatAll:function(){var e=this,t=e.activeFloater;t&&(t.setFloated(!1),e.activeFloater=null,e.floatedByHover?(e.toolMouseListeners&&(e.toolMouseListeners.destroy(),e.floaterMouseListeners.destroy(),e.floaterMouseListeners=e.toolMouseListeners=null),t.element.un("mouseover","onMouseOver",e)):Ext.un("mousedown","checkForOutsideClick",e))},defaultIconSize:22,updateIconSize:function(e){this.setIndent(e||this.defaultIconSize)},updateIndent:function(e){var t=this.rootItem;t&&t.setIndent(e)}}}),Ext.define("Ext.overrides.list.Tree",{override:"Ext.list.Tree",canMeasure:!0,constructor:function(e){this.callParent([e]),Ext.isIE8||this.element.on("resize","onElResize",this)},beforeLayout:function(){this.syncIconSize()},onElResize:function(e,t){!this.getMicro()&&this.canMeasure&&(this.expandedWidth=t.width)},privates:{defaultListWidth:200,expandedWidth:null}}),Ext.define("Ext.mixin.ConfigProxy",function(m){return{extend:"Ext.Mixin",mixinConfig:{id:"configproxy",extended:function(e,t,i){var n=i.proxyConfig;t.$configProxies=Ext.apply({},t.superclass.self.$configProxies),n&&(delete i.proxyConfig,m.processClass(t,n))}},onClassMixedIn:function(e){var t=e.prototype,i=t.proxyConfig,n=t.initConfig;t.$proxiedConfigs=null,e.$configProxies={},t.initConfig=function(e){return n.apply(this,arguments),this.$proxiedConfigs=null,this},i&&(delete t.proxyConfig,m.processClass(e,i))},getProxiedConfigs:function(e){var t,i,n,r,o,a=this.config,s=this.self.$configProxies[e],l=s&&s.length;if(l&&this.isConfiguring)for(i=this.$proxiedConfigs||(this.$proxiedConfigs={});0<l--;)i[r=(t=s[l]).name]=t,void 0!==(o=a[r])&&((n=n||{})[r]=o);return n},mergeProxiedConfigs:function(e,t,i){var n=t,r=this.getProxiedConfigs(e);return r&&(t?t.constructor===Object&&(n=this.self.getConfigurator().merge(this,Ext.clone(t),r)):n=r),i&&n===t&&(n=Ext.clone(n)),n},statics:{processClass:function(e,t){var i,n,r,o,a,s,l,d,u,c,h=Ext.Config,f=e.prototype,g={},p=e.$configProxies;for(a in t){for(r=h.get(a).names.get,n=t[a],Ext.isArray(n)?s=null:(s=n.methods,n=n.configs),(u=p[a])?p[a]=u=u.slice():p[a]=u=[],o=0,l=s&&s.length;o<l;++o)f[d=s[o]]?Ext.raise('Cannot proxy method "'+d+'"'):f[d]=m.wrapFn(r,d);for(o=0,l=n&&n.length;o<l;++o)i=h.get(c=n[o]),c in g&&Ext.raise('Duplicate proxy config definitions for "'+c+'"'),c in f.config&&Ext.raise('Config "'+c+'" already defined for class '+f.$className),g[c]=void 0,u.push(i),f[d=i.names.get]?Ext.raise('Cannot proxy "'+c+'" config getter'):f[d]=m.wrapGet(r,d),f[d=i.names.set]?Ext.raise('Cannot proxy "'+c+'" config setter'):f[d]=m.wrapSet(r,d,c)}e.addConfig(g)},wrapFn:function(t,i){return function(){var e=this[t]();return e&&e[i].apply(e,arguments)}},wrapGet:function(t,i){return function(){var e=this[t]();return e&&e[i]()}},wrapSet:function(n,r,o){return function(e){var t,i;return this.isConfiguring&&void 0===e||(t=this[n](),(i=this.$proxiedConfigs)&&i[o]&&(delete i[o],t=null),t&&t[r](e)),this}}}}}),Ext.define("Ext.mixin.ConfigState",{extend:"Ext.Mixin",mixinConfig:{id:"configstate"},alternateStateConfig:"",toggleConfigState:function(e){var t,i=this.capturedConfigState,n=this.getConfig(this.alternateStateConfig);if(n)if(e){for(t in i={},n)i[t]=this.getConfig(t);this.capturedConfigState=i,this.setConfig(n)}else!this.isConfiguring&&i&&(this.setConfig(i),delete this.capturedConfigState)}}),Ext.define("Ext.mixin.Container",{extend:"Ext.Mixin",mixinConfig:{id:"container"},isContainer:!0,nameHolder:!1,referenceHolder:!1,getNamedItems:function(){return Ext.referencesDirty&&Ext.fixReferences(),this.nameRefs||null},getReferences:function(){return Ext.referencesDirty&&Ext.fixReferences(),this.refs||null},lookup:function(e){var t=this.getReferences();return t&&t[e]||null},lookupName:function(e){var t=this.getNamedItems();return t&&t[e]||null},lookupReference:function(e){return this.lookup(e)},privates:{attachNameRef:function(e){var t,i,n=e.name||e._name;!n||this.destroying||this.destroyed||((t=(i=this.nameRefs||(this.nameRefs={}))[n])?t.isInstance?Ext.raise('Duplicate name: "'+n+'" on '+this.id+" between "+t.id+" and "+e.id):t.push(e):t=e.shareableName?[e]:e,i[n]=t)},attachReference:function(e){var t,i;this.destroying||this.destroyed||((i=this.refs||(this.refs={}))[t=e.referenceKey]&&i[t]!==e&&Ext.log.warn('Duplicate reference: "'+t+'" on '+this.id),i[t]=e)},containerOnAdded:function(e,t){Ext.ComponentManager.markReferencesDirty()},containerOnRemoved:function(e){e||Ext.ComponentManager.markReferencesDirty()},initContainerInheritedState:function(e,t){var i=this,n=i.getController(),r=i.getSession(),o=i.getConfig("viewModel",!0),a=i.reference,s=i.referenceHolder;i.nameHolder&&(e.nameHolder=i),n?(e.referenceHolder=n,s=!0):s&&(e.referenceHolder=i),s?e.referencePath="":a&&i.isParentReference&&(e.referencePath=i.referenceKey+"."),r&&(e.session=r),o?e.viewModelPath="":a&&i.isParentReference&&(e.viewModelPath=i.viewModelKey+".")},setupReference:function(e){var t;return e&&">"===e.charAt(t=e.length-1)&&(this.isParentReference=!0,e=e.substring(0,t)),e&&!Ext.validIdRe.test(e)&&Ext.Error.raise('Invalid reference "'+e+'" for '+this.getId()+" - not a valid identifier"),e}}}),Ext.define("Ext.util.KeyMap",{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(e){var t=this;(1!==arguments.length||"string"==typeof e||e.dom||e.tagName||e===document||e.isComponent)&&Ext.raise("Legacy multi-argument KeyMap constructor is removed. Use a config object instead."),Ext.apply(t,e),t.bindings=[],t.target.isComponent||(t.target=Ext.get(t.target)),t.binding?t.addBinding(t.binding):e.key&&t.addBinding(e),t.enable()},addBinding:function(e){var t,i,n=e.key;if(this.processing&&(this.bindings=this.bindings.slice(0)),Ext.isArray(e))for(t=0,i=e.length;t<i;t++)this.addBinding(e[t]);else this.bindings.push(Ext.apply({keyCode:this.processKeys(n)},e))},removeBinding:function(e){var t,i,n,r=this.bindings,o=r.length;for(this.processing&&(this.bindings=r.slice(0)),n=this.processKeys(e.key),t=0;t<o;t++)if(((i=r[t]).fn||i.handler)===(e.fn||e.handler)&&i.scope===e.scope&&e.alt===i.alt&&e.ctrl===i.ctrl&&e.shift===i.shift&&Ext.Array.equals(i.keyCode,n))return void Ext.Array.erase(this.bindings,t,1)},processKeys:function(e){var t,i,n,r,o,a=!1;if(e.test)return e;if(Ext.isString(e)){for(i=[],o=0,r=(n=e.toUpperCase()).length;o<r;o++)i.push(n.charCodeAt(o));e=i,a=!0}if(Ext.isArray(e)||(e=[e]),!a)for(o=0,r=e.length;o<r;o++)t=e[o],Ext.isString(t)&&(e[o]=t.toUpperCase().charCodeAt(0));return e},handleTargetEvent:function(e){var t,i,n,r,o=this;if(o.enabled&&(t=o.bindings,e=o.processEvent.apply(o.processEventScope||o,arguments))){if(o.lastKeyEvent=e,o.ignoreInputFields&&Ext.fly(e.target).isInputField())return;if(!e.getKey)return e;for(o.processing=!0,i=0,n=t.length;i<n;i++)if(!1===(r=o.processBinding(t[i],e)))return o.processing=!1,r;o.processing=!1}},processEvent:Ext.identityFn,processBinding:function(e,t){if(this.checkModifiers(e,t)){var i,n,r,o=t.getKey(),a=e.fn||e.handler,s=e.scope||this,l=e.keyCode,d=e.defaultEventAction;if(l.test){if(l.test(String.fromCharCode(t.getCharCode()))&&(!0!==(r=a.call(s,o,t))&&d&&t[d](),!1===r))return r}else if(l.length)for(i=0,n=l.length;i<n;i++)if(o===l[i]){if(!0!==(r=a.call(s,o,t))&&d&&t[d](),!1===r)return r;break}}},checkModifiers:function(e,t){var i,n,r,o,a=["shift","ctrl","alt"];for(i=0,n=a.length;i<n;i++)if(void 0!==(r=e[o=a[i]])&&r!==t[o+"Key"])return!1;return!0},on:function(e,t,i){var n,r,o,a;Ext.isObject(e)&&!Ext.isArray(e)?(n=e.key,r=e.shift,o=e.ctrl,a=e.alt):n=e,this.addBinding({key:n,shift:r,ctrl:o,alt:a,fn:t,scope:i})},un:function(e,t,i){var n,r,o,a;Ext.isObject(e)&&!Ext.isArray(e)?(n=e.key,r=e.shift,o=e.ctrl,a=e.alt):n=e,this.removeBinding({key:n,shift:r,ctrl:o,alt:a,fn:t,scope:i})},isEnabled:function(){return!!this.enabled},enable:function(){this.enabled||(this.target.on(this.eventName,this.handleTargetEvent,this,{capture:this.capture,priority:this.priority}),this.enabled=!0)},disable:function(){this.enabled&&(this.target.destroyed||this.target.removeListener(this.eventName,this.handleTargetEvent,this),this.enabled=!1)},setDisabled:function(e){e?this.disable():this.enable()},destroy:function(e){var t=this.target;this.bindings=[],this.disable(),this.target=null,e&&(t.destroy(),Ext.raise("Using removeTarget argument in KeyMap destructor is not supported.")),this.callParent()}}),Ext.define("Ext.util.KeyNav",{alternateClassName:"Ext.KeyNav",requires:["Ext.util.KeyMap"],disabled:!1,defaultEventAction:!1,forceKeyDown:!1,eventName:"keypress",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(e){var t,i,n=this;2===arguments.length&&Ext.raise("2-argument KeyNav constructor is removed. Use a config object instead."),t={target:(e=e||{}).target,ignoreInputFields:e.ignoreInputFields,eventName:n.getKeyEvent("forceKeyDown"in e?e.forceKeyDown:n.forceKeyDown,e.eventName),capture:e.capture},n.map&&n.map.destroy(),n.initConfig(e),e.processEvent&&(t.processEvent=e.processEvent,t.processEventScope=e.processEventScope||n),e.priority&&(t.priority=e.priority),e.keyMap?i=n.map=e.keyMap:(i=n.map=new Ext.util.KeyMap(t),n.destroyKeyMap=!0),n.addBindings(e),i.disable(),e.disabled||i.enable()},addBindings:function(e){var t,i,n,r=this.map,o=Ext.util.KeyNav.keyOptions,a=Ext.event.Event,s=e.scope||this;for(i in e)t=e[i],null!=(n=1===i.length?i.charCodeAt(0):o[i]||a[i.toUpperCase()])&&(i=n),!t||1!==i.length&&isNaN(i=parseInt(i,10))||("function"==typeof t&&(t={handler:t,defaultEventAction:void 0!==e.defaultEventAction?e.defaultEventAction:this.defaultEventAction}),r.addBinding({key:i,ctrl:t.ctrl,shift:t.shift,alt:t.alt,handler:Ext.Function.bind(this.handleEvent,t.scope||s,[t.handler||t.fn,this],!0),defaultEventAction:void 0!==t.defaultEventAction?t.defaultEventAction:this.defaultEventAction}))},handleEvent:function(e,t,i,n){return n.lastKeyEvent=t,i.call(this,t)},destroy:function(e){e&&Ext.raise("removeEl argument in KeyNav destructor is not supported anymore."),this.destroyKeyMap&&this.map.destroy(e),this.map=null,this.callParent()},enable:function(){this.map&&(this.map.enable(),this.disabled=!1)},disable:function(){this.map&&this.map.disable(),this.disabled=!0},setDisabled:function(e){this.map.setDisabled(e),this.disabled=e},isEnabled:function(){return!this.disabled},getKeyEvent:function(e,t){return e||Ext.supports.SpecialKeyDownRepeat&&!t?"keydown":t||this.eventName}}),Ext.define("Ext.mixin.FocusableContainer",{extend:"Ext.Mixin",requires:["Ext.util.KeyNav"],mixinConfig:{id:"focusablecontainer"},isFocusableContainer:!0,focusableContainer:!1,resetFocusPosition:!1,activeChildTabIndex:0,inactiveChildTabIndex:-1,allowFocusingDisabledChildren:!1,focusableContainerEl:"el",privates:{initFocusableContainer:function(e){var t,i,n;if(this.focusableContainer)e=null==e||e,this.doInitFocusableContainer(e);else for(i=0,n=(t=this.getFocusables()).length;i<n;i++)t[i].ownerFocusableContainer=null},doInitFocusableContainer:function(e){var t,i=this,n=i.focusableContainerEl;n.isElement||(n=i.focusableContainerEl=i[n]),i.initFocusableContainerKeyNav&&i.initFocusableContainerKeyNav(n),e&&(i.clearFocusables(),i.isDisabled()||(t=i.findNextFocusableChild({step:1})||i.findNextFocusableChild({beforeRender:!0}))&&i.activateFocusable(t)),t=i.findNextFocusableChild({firstTabbable:!0}),i.activateFocusableContainer(!!t&&!i.isDisabled())},initFocusableContainerKeyNav:function(e){var t=this;t.focusableKeyNav||(e=e||t.focusableContainerEl,t.focusableKeyNav=new Ext.util.KeyNav({target:e,disabled:!0,eventName:"keydown",processEvent:t.processFocusableContainerKeyEvent,processEventScope:t,scope:t,tab:t.onFocusableContainerTabKey,enter:{handler:t.onFocusableContainerEnterKey,ctrl:!1,shift:!1,alt:!1},space:{handler:t.onFocusableContainerSpaceKey,ctrl:!1,shift:!1,alt:!1},up:{handler:t.onFocusableContainerUpKey,ctrl:!1,shift:!1,alt:!1},down:{handler:t.onFocusableContainerDownKey,ctrl:!1,shift:!1,alt:!1},left:{handler:t.onFocusableContainerLeftKey,ctrl:!1,shift:!1,alt:!1},right:{handler:t.onFocusableContainerRightKey,ctrl:!1,shift:!1,alt:!1}}))},destroyFocusableContainer:function(){this.focusableKeyNav=Ext.destroy(this.focusableKeyNav)},activateFocusableContainer:function(e){var t=this.focusableKeyNav;t&&t.setDisabled(!e)},isFocusableContainerActive:function(){var e=this.focusableKeyNav;return!!e&&!e.disabled},getFocusables:function(){return this.items.items},initDefaultFocusable:function(){var e,t,i,n,r=!1;if(n=(e=this.getFocusables()).length){for(i=0;i<n;i++)if(!(t=e[i]).isDisabled()&&t.isFocusable()){r=!0;break}if(r)return(t=this.findNextFocusableChild({items:e,step:!0}))&&this.activateFocusable(t),t}},clearFocusables:function(e){var t,i,n=this.getFocusables(),r=n.length;for(i=0;i<r;i++)!(t=n[i]).destroyed&&t.focusable&&t.isTabbable()&&this.deactivateFocusable(t)},processFocusableContainerKeyEvent:function(e){if(!Ext.fly(e.target).isInputField())return e},activateFocusable:function(e){e.setTabIndex(this.activeChildTabIndex)},deactivateFocusable:function(e){e.setTabIndex(this.inactiveChildTabIndex)},onFocusableContainerTabKey:function(){return!0},onFocusableContainerEnterKey:function(){return!0},onFocusableContainerSpaceKey:function(){return!0},onFocusableContainerUpKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!1)},onFocusableContainerDownKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!0)},onFocusableContainerLeftKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!1)},onFocusableContainerRightKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!0)},getFocusableFromEvent:function(e){var t=Ext.Component.from(e);return t||Ext.raise("No focusable child found for keyboard event!"),t},moveChildFocus:function(e,t){var i=this.getFocusableFromEvent(e);return this.focusChild(i,t,e)},focusChild:function(e,t){var i=this.findNextFocusableChild({child:e,step:t});return i&&i.focus(),i},findNextFocusableChild:function(e){var t,i,n,r,o,a,s,l,d=e.beforeRender,u=e.firstTabbable;for(t=e.items||this.getFocusables(),r=null!=e.step?e.step:1,n=e.child,l=!!this.allowFocusingDisabledChildren,o=Ext.Array.indexOf(t,n),r=!0===r?1:!1===r?-1:r,s=t.length,a=0<r?o<s?o+r:0:0<o?o+r:s-1;;a+=r){if(o<0&&(s<=a||a<0))return null;if(s<=a)a=-1;else if(a<0)a=s;else{if(a===o)return null;if((i=t[a])&&i.focusable&&(!i.isDisabled()||l))if(u){if(i.isTabbable&&i.isTabbable())return i}else if(d||i.isFocusable&&i.isFocusable())return i}}return null},onFocusEnter:function(e){var t;e.toComponent===this&&(t=this.initDefaultFocusable())&&t.focus(),this.activateFocusableContainer(!0)},onFocusLeave:function(e){this.resetFocusPosition&&(this.clearFocusables(),this.initDefaultFocusable())},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(e){!this.focusableContainer||this.destroying||this.destroyed||(this.clearFocusables(),this.activateFocusable(e))},afterFocusableChildFocus:function(e){!this.focusableContainer||this.destroying||this.destroyed||(this.lastFocusedChild=e)},onFocusableChildAdd:function(e){e.focusable&&(e.ownerFocusableContainer=this)},onFocusableChildRemove:function(e){var t;e.ownerFocusableContainer=null,e===this.lastFocusedChild&&(this.lastFocusedChild=null,t=this.initDefaultFocusable(),e.hasFocus&&(t=t||e.findFocusTarget())&&t.focus()),(e=t||this.findNextFocusableChild({step:1,beforeRender:!0}))||this.activateFocusableContainer(!1)},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(e){var t,i=this;!i.focusableContainer||i.destroying||i.destroyed||(i.containsFocus?(t=Ext.ComponentManager.getActiveComponent(),i.clearFocusables(),i.activateFocusable(t)):i.resetFocusPosition||null==i.lastFocusedChild?(i.clearFocusables(),e.hasFocus&&(i.activateFocusable(e),t=e)):(i.deactivateFocusable(e),e===i.lastFocusedChild&&(i.clearFocusables(),i.activateFocusable(e)),t=i.findNextFocusableChild({firstTabbable:!0})),t||i.initDefaultFocusable(),i.activateFocusableContainer(!0))},beforeFocusableChildDisable:function(e){var t;!this.focusableContainer||this.destroying||this.destroyed||e.hasFocus&&(t=this.findNextFocusableChild({child:e})||e.findFocusTarget())&&t.focus()},onFocusableChildDisable:function(e){!this.focusableContainer||this.destroying||this.destroyed||(this.findNextFocusableChild({firstTabbable:!0})||this.initDefaultFocusable())||this.activateFocusableContainer(!1)},beforeFocusableChildHide:function(e){return this.beforeFocusableChildDisable(e)},onFocusableChildHide:function(e){return this.onFocusableChildDisable(e)},beforeFocusableChildShow:function(e){return this.beforeFocusableChildEnable(e)},onFocusableChildShow:function(e){return this.onFocusableChildEnable(e)},onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn},deprecated:{7:{configs:{enableFocusableContainer:"focusableContainer"}}}}),Ext.define("Ext.mixin.Hookable",{extend:"Ext.Mixin",mixinConfig:{id:"hookable"},bindHook:function(e,t,i,n,r){return e.afterMethod(t,i||t,this,n,r),this},unbindHook:function(e,t,i){return e.removeMethodListener(t,i||t,this),this}}),Ext.define("Ext.mixin.Mashup",function(i){return{extend:"Ext.Mixin",mixinConfig:{id:"mashup",extended:function(e,t){i.process(t)}},statics:{process:function(r){var o,a,s=r.prototype,l=s.requiredScripts,d=r._classHooks,u=d.onCreated,c=r.prototype.xtypes,h=Ext.manifest.mashup||{},f=s.mashupConfig;l&&(delete s.requiredScripts,d.onCreated=function(){var i=this,e=[],n=Ext.Array.slice(arguments),t=h.redirect||{};if(l=e.concat(l),f=f&&h[f.key],c)for(o=0;!f&&o<c.length;++o)f=h[c[o]];for(o=0;o<l.length;o++)!1!==t[a=l[o]]&&(-1<(a=t[a]||a).indexOf("{")&&(f?a=new Ext.Template(a).apply(f):Ext.log.error("Missing mashup options for "+s.$className+' script "'+a+'"')),e.push(a));if(!e.length)return d.onCreated=u,void d.onCreated.call(i,n);Ext.Loader.loadScripts({url:e,cache:!0,onError:function(e,t){r.scriptError=r.prototype.scriptError=t,d.onCreated=u,d.onCreated.call(i,n)},onLoad:function(){d.onCreated=u,d.onCreated.call(i,n)}})})}},onClassMixedIn:function(e){i.process(e)}}}),Ext.define("Ext.mixin.Selectable",{extend:"Ext.Mixin",mixinConfig:{id:"selectable",after:{updateStore:"updateStore"}},config:{disableSelection:null,mode:"SINGLE",allowDeselect:!1,lastSelected:null,lastFocused:null,deselectOnContainerClick:!0,selected:!0,pruneRemoved:!0,selection:null,twoWayBindable:{selection:1},publishes:{selection:1}},modes:{SINGLE:!0,SIMPLE:!0,MULTI:!0},onNavigate:function(e){},selectableEventHooks:{add:"onSelectionStoreAdd",remove:"onSelectionStoreRemove",update:"onSelectionStoreUpdate",clear:{fn:"onSelectionStoreClear",priority:1e3},load:"refreshSelection",refresh:"refreshSelection"},initSelectable:function(){this.publishState("selection",this.getSelection())},applySelected:function(e){return e.isCollection||(e=new Ext.util.Collection(e)),e.addObserver(this),e},applyMode:function(e){return e=e?e.toUpperCase():"SINGLE",this.modes[e]?e:"SINGLE"},updateStore:function(e,t){var i=Ext.apply({},this.selectableEventHooks,{scope:this});t&&Ext.isObject(t)&&t.isStore&&(t.autoDestroy?t.destroy():t.un(i)),e&&(e.on(i),this.refreshSelection())},selectAll:function(e){var t=this.getStore().getRange();this.select(t,!0,e)},deselectAll:function(e){this.deselect(this.getSelected().getRange(),e),this.setLastSelected(null),this.setLastFocused(null)},updateSelection:function(e){this.changingSelection||(e?this.select(e):this.deselectAll())},selectWithEvent:function(e){var t=this.isSelected(e);switch(this.getMode()){case"MULTI":case"SIMPLE":t?this.deselect(e):this.select(e,!0);break;case"SINGLE":this.getAllowDeselect()&&t?this.deselect(e):this.select(e,!1)}},selectRange:function(e,t,i){var n,r,o=this.getStore(),a=[];if(!this.getDisableSelection()){for(t<e&&(n=t,t=e,e=n),r=e;r<=t;r++)a.push(o.getAt(r));this.doMultiSelect(a,i)}},select:function(e,t,i){var n;this.getDisableSelection()||("number"==typeof e&&(e=[this.getStore().getAt(e)]),e&&("SINGLE"===this.getMode()&&e?(n=e.length?e[0]:e,this.doSingleSelect(n,i)):this.doMultiSelect(e,t,i)))},doSingleSelect:function(e,t){this.doMultiSelect([e],!1,t)},doMultiSelect:function(e,t,i){if(null!==e&&!this.getDisableSelection()){e=Ext.isArray(e)?e:[e];var n,r,o,a=this.getSelected(),s=a.getCount(),l=this.getStore(),d=[];for(!t&&s&&(d=a.getRange()),r=0,o=e.length;r<o;r++)"number"==typeof(n=e[r])&&(e[r]=l.getAt(n));a.suppressEvent=i,a.splice(s,d,e),a.suppressEvent=!1}},deselect:function(e,t){var i,n,r,o,a;if(!this.getDisableSelection()){for(e=Ext.isArray(e)?e:[e],i=this.getSelected(),n=this.getStore(),o=0,a=e.length;o<a;o++)"number"==typeof(r=e[o])&&(e[o]=n.getAt(r));i.suppressEvent=t,i.remove(e),i.suppressEvent=!1}},onCollectionRemove:function(e,t){var i=this.getLastSelected(),n=t.items;i&&!e.contains(i)&&this.setLastSelected(e.last()),this.onItemDeselect(n,e.suppressEvent),e.suppressEvent||this.fireSelectionChange(n)},onCollectionAdd:function(e,t){var i=t.items;this.setLastSelected(e.last()),this.onItemSelect(i,e.suppressEvent),e.suppressEvent||this.fireSelectionChange(i)},updateLastFocused:function(e,t){this.onLastFocusChanged(t,e)},fireSelectionChange:function(e){this.changingSelection=!0,this.setSelection(this.getLastSelected()||null),this.changingSelection=!1,this.fireAction("selectionchange",[this,e],"getSelections")},getSelections:function(){return this.getSelected().getRange()},isSelected:function(e){return e=Ext.isNumber(e)?this.getStore().getAt(e):e,-1!==this.getSelected().indexOf(e)},hasSelection:function(){return 0<this.getSelected().getCount()},refreshSelection:function(){var e,t,i,n=this.getSelected(),r=n.getRange(),o=r.length,a=this.getStore().getData(),s=[],l=[];if(this.getPruneRemoved())for(a=a.getSource()||a,e=0;e<o;e++)t=r[e],(i=a.get(a.getKey(t)))?i!==t&&(s.push(t),l.push(i)):s.push(t);n.suppressEvent=!0,n.splice(n.getCount(),s,l),n.suppressEvent=!1},onSelectionStoreRemove:function(e,t){var i,n,r,o=this.getSelected(),a=t.length;if(!this.getDisableSelection()){for(r=0;r<a;r++)n=t[r],o.remove(n)&&(this.getLastSelected()==n&&this.setLastSelected(null),this.getLastFocused()==n&&this.setLastFocused(null),(i=i||[]).push(n));i&&this.fireSelectionChange([i])}},onSelectionStoreClear:function(e){var t=e.getData().items;this.onSelectionStoreRemove(e,t)},getSelectionCount:function(){return this.getSelected().getCount()},onSelectionStoreAdd:Ext.emptyFn,onSelectionStoreUpdate:Ext.emptyFn,onItemSelect:Ext.emptyFn,onItemDeselect:Ext.emptyFn,onLastFocusChanged:Ext.emptyFn,onEditorKey:Ext.emptyFn},function(){}),Ext.define("Ext.mixin.StoreWatcher",{mixinId:"storewatcher",config:{dataSource:null,owner:null,ownerListeners:{destroyable:!0,storechange:"onOwnerStoreChange"},sourceListeners:null,store:null,storeListeners:null},afterClassMixedIn:function(e){var t,i=this.getConfigurator(),n=e.prototype,r={};for(t in i.configs)n.hasOwnProperty(t)&&(r[t]=n[t],delete n[t]);e.addConfig(r)},onOwnerStoreChange:function(e,t){this.setStore(t)},updateDataSource:function(e){this.syncListeners(e,"$sourceListeners","getSourceListeners")},updateOwner:function(e){var t=this.ownerProperty;t&&(this[t]=e),this.syncListeners(e,"$ownerListeners","getOwnerListeners"),this.setStore(e?e.getStore():null)},applyStore:function(e){return e&&!e.isEmptyStore?e:null},updateStore:function(e){this.syncListeners(e,"$storeListeners","getStoreListeners"),this.syncDataSource()},privates:{syncDataSource:function(){var e,t=this.getStore();e=t?t.getDataSource?t.getDataSource():t.getData():null,this.setDataSource(e)},syncListeners:function(e,t,i){var n=this[t];n&&(this[t]=null,n.destroy()),e&&(i=this[i](),i=Ext.applyIf({destroyable:!0,scope:this},i),this[t]=e.on(i))}}}),Ext.define("Ext.mixin.StyleCacher",{extend:"Ext.Mixin",mixinConfig:{id:"stylecacher"},getCachedStyle:function(e,t){var i=this.$styleCache;return t in(i=i||(this.$styleCache={}))||(i[t]=Ext.fly(e).getStyle(t)),i[t]}}),Ext.define("Ext.mixin.Traversable",{extend:"Ext.Mixin",mixinConfig:{id:"traversable"},setParent:function(e){return this.parent=e,this},hasParent:function(){return Boolean(this.getParent())},is:function(){return!0},getParent:function(){return this.parent||this.$initParent},getAncestors:function(){for(var e=[],t=this.getParent();t;)e.push(t),t=t.getParent();return e},getAncestorIds:function(){for(var e=[],t=this.getParent();t;)e.push(t.getId()),t=t.getParent();return e},previousNode:function(e,t){var i,n,r,o,a=this.getRefOwner();if(t&&this.is(e))return this;if(a){for(n=a.items.items,r=Ext.Array.indexOf(n,this)-1;-1<r;r--){if((o=n[r]).query&&(i=(i=o.query(e))[i.length-1]))return i;if(!e||o.is(e))return o}return a.previousNode(e,!0)}return null},previousSibling:function(e){var t,i,n,r=this.getRefOwner();if(r&&-1!==(i=(t=r.items).indexOf(this)))if(e){for(--i;0<=i;i--)if((n=t.getAt(i)).is(e))return n}else if(i)return t.getAt(--i);return null},nextNode:function(e,t){var i,n,r,o,a,s=this.getRefOwner();if(t&&this.is(e))return this;if(s){for(n=s.items.items,o=Ext.Array.indexOf(n,this)+1,r=n.length;o<r;o++){if(a=n[o],!e||a.is(e))return a;if(a.down&&(i=a.down(e)))return i}return s.nextNode(e)}return null},nextSibling:function(e){var t,i,n,r,o=this.getRefOwner();if(o&&(n=(t=o.items).indexOf(this)+1))if(e){for(i=t.getCount();n<i;n++)if((r=t.getAt(n)).is(e))return r}else if(n<t.getCount())return t.getAt(n);return null}}),Ext.define("Ext.perf.Accumulator",function(){var i,n=null,r=Ext.global.chrome,o=function(){var e,t;if(o=Ext.now,Ext.isChrome&&r&&r.Interval)(e=new r.Interval).start(),o=function(){return e.microseconds()/1e3};else if(window.ActiveXObject)try{t=new ActiveXObject("SenchaToolbox.Toolbox"),Ext.senchaToolbox=t,o=function(){return t.milliseconds}}catch(e){}return Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=o,o()};function a(e,t){e.sum+=t,e.min=Math.min(e.min,t),e.max=Math.max(e.max,t)}function t(e){var t=e||o()-this.time,i=this.accum;++i.count,--i.depth||a(i.total,t),a(i.pure,t-this.childTime),(n=this.parent)&&(++n.accum.childCount,n.childTime+=t)}function s(){return{min:Number.MAX_VALUE,max:0,sum:0}}function h(i,n){return function(){var e=i.enter(),t=n.apply(this,arguments);return e.leave(),t}}function l(e,t,i,n){var r={avg:0,min:n.min,max:n.max,sum:0};return e&&(i=i||0,r.sum=n.sum-t*i,r.avg=r.sum/e),r}return{requires:["Ext.XTemplate","Ext.ClassManager"],constructor:function(e){this.count=this.childCount=this.depth=this.maxDepth=0,this.pure=s(),this.total=s(),this.name=e},statics:{getTimestamp:o},format:function(e){var t;return i=i||new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(e){return Math.round(100*e)/100}}),(t=this.getData(e)).name=this.name,t.pure.type="Pure",t.total.type="Total",t.times=[t.pure,t.total],i.apply(t)},getData:function(e){return{count:this.count,childCount:this.childCount,depth:this.maxDepth,pure:l(this.count,this.childCount,e,this.pure),total:l(this.count,this.childCount,e,this.total)}},enter:function(){var e={accum:this,leave:t,childTime:0,parent:n};return++this.depth,this.maxDepth<this.depth&&(this.maxDepth=this.depth),(n=e).time=o(),e},monitor:function(e,t,i){var n=this.enter();i?e.apply(t,i):e.call(t),n.leave()},report:function(){Ext.log(this.format())},tap:function(e,t){var i,n,r,o,a,s,l,d,u=this,c="string"==typeof t?[t]:t;return d=function(){if("string"==typeof e)for(i=Ext.global,o=e.split("."),r=0,a=o.length;r<a;++r)i=i[o[r]];else i=e;for(r=0,a=c.length;r<a;++r)s=c[r],(n="!"===s.charAt(0))?s=s.substring(1):n=!(s in i.prototype),(l=n?i:i.prototype)[s]=h(u,l[s])},Ext.ClassManager.onCreated(d,u,e),u}}},function(){Ext.perf.getTimestamp=this.getTimestamp}),Ext.define("Ext.perf.Monitor",{singleton:!0,alternateClassName:"Ext.Perf",requires:["Ext.perf.Accumulator"],constructor:function(){this.accumulators=[],this.accumulatorsByName={}},calibrate:function(){var e,t=new Ext.perf.Accumulator("$"),i=t.total,n=Ext.perf.Accumulator.getTimestamp,r=0;for(e=n();t.enter().leave(),++r,i.sum<100;);return(n()-e)/r},get:function(e){var t=this.accumulatorsByName[e];return t||(this.accumulatorsByName[e]=t=new Ext.perf.Accumulator(e),this.accumulators.push(t)),t},enter:function(e){return this.get(e).enter()},monitor:function(e,t,i){this.get(e).monitor(t,i)},report:function(){var e=this.accumulators,t=this.calibrate();e.sort(function(e,t){return e.name<t.name?-1:t.name<e.name?1:0}),this.updateGC(),Ext.log("Calibration: "+Math.round(100*t)/100+" msec/sample"),Ext.each(e,function(e){Ext.log(e.format(t))})},getData:function(t){var i={},e=this.accumulators;return Ext.each(e,function(e){(t||e.count)&&(i[e.name]=e.getData())}),i},reset:function(){Ext.each(this.accumulators,function(e){var t=e;t.count=t.childCount=t.depth=t.maxDepth=0,t.pure={min:Number.MAX_VALUE,max:0,sum:0},t.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var e,t=this.accumulatorsByName.GC,i=Ext.senchaToolbox;t&&(t.count=i.garbageCollectionCounter||0,t.count&&(e=t.pure,t.total.sum=e.sum=i.garbageCollectionMilliseconds,e.min=e.max=e.sum/t.count,(e=t.total).min=e.max=e.sum/t.count))},watchGC:function(){var e=Ext.senchaToolbox;Ext.perf.getTimestamp(),e&&(this.get("GC"),e.watchGarbageCollector(!1))},setup:function(e){var t,i,n,r,o;for(t in e=e||{render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}},this.currentConfig=e)if(e.hasOwnProperty(t))for(r in i=e[t],n=Ext.Perf.get(t),i)i.hasOwnProperty(r)&&(o=i[r],n.tap(r,o));this.watchGC()},setupLog:function(e){var t,i,n,r,o;for(t in e)if(e.hasOwnProperty(t)&&(i=Ext.ClassManager.get(t))){for(r in o={},n=e[t])o[r]=function(o,a){return function(){var e,t,i,n,r;return e=+Date.now(),r=this.callParent(arguments),t=Date.now()-e,window.console&&0<t&&((n="this"===a?this:"string"==typeof a?this[a]:"number"==typeof a?arguments[a]:null)&&(i=n.id),null!=i?console.log(o+" for "+i+": "+t+"ms"):console.log(o+" for unknown: "+t+"ms"),console.trace&&console.trace()),r}}(r,n[r]);Ext.override(i,o)}}}),Ext.define("Ext.plugin.AbstractClipboard",{extend:"Ext.plugin.Abstract",requires:["Ext.util.KeyMap"],cachedConfig:{formats:{text:{get:"getTextData",put:"putTextData"}}},config:{memory:null,source:"system",system:"text",gridListeners:null},destroy:function(){var e=this.keyMap,t=this.shared;Ext.destroy(this.destroyListener),e?(this.keyMap=Ext.destroy(e),--t.counter||(t.textArea=Ext.destroy(t.textArea))):this.renderListener=Ext.destroy(this.renderListener),this.callParent()},init:function(e){var t=this.getGridListeners();e.rendered?this.finishInit(e):t&&(this.renderListener=e.on(Ext.apply({scope:this,destroyable:!0,single:!0},t)))},onCmpReady:function(){this.renderListener=null,this.finishInit(this.getCmp())},getTarget:function(e){return e.el},privates:{shared:{counter:0,data:null,textArea:null},applyMemory:function(e){if(e=this.applySource(e))for(var t=e.length;0<t--;)"system"===e[t]&&Ext.raise('Invalid clipboard format "'+e[t]+'"');return e},applySource:function(e){if(e&&(Ext.isString(e)?e=[e]:0===e.length&&(e=null)),e){var t,i=this.getFormats();for(t=e.length;0<t--;)"system"===e[t]||i[e[t]]||Ext.raise('Invalid clipboard format "'+e[t]+'"')}return e||null},applySystem:function(e){return this.getFormats()[e]||Ext.raise('Invalid clipboard format "'+e+'"'),e},doCutCopy:function(e,t){var i,n=this.allFormats||this.syncFormats(),r=this.getData(t,n),o=this.getMemory(),a=this.getSystem();!1!==this.validateAction(e)&&(this.shared.data=o&&r,a&&(i=r[a],n[a]<3&&delete r[a],this.setClipboardData(i)))},doPaste:function(e,t){var i=this.getFormats();this[i[e].put](t,e)},finishInit:function(e){var t=this;t.keyMap=new Ext.util.KeyMap({target:t.getTarget(e),ignoreInputFields:!0,binding:[{ctrl:!0,key:"x",fn:t.onCut,scope:t},{ctrl:!0,key:"c",fn:t.onCopy,scope:t},{ctrl:!0,key:"v",fn:t.onPaste,scope:t}]}),++t.shared.counter,t.destroyListener=e.on({destroyable:!0,destroy:"destroy",scope:t})},getData:function(e,t){var i,n,r,o,a=this.getFormats();if(Ext.isString(t))a[t]||Ext.raise('Invalid clipboard format "'+t+'"'),i=this[a[t].get](t,e);else{if(i={},o=[],t)for(r in t)a[r]||Ext.raise('Invalid clipboard format "'+r+'"'),o.push(r);else o=Ext.Object.getAllKeys(a);for(n=o.length;0<n--;)i[r]=this[a[r].get](r,e&&!n)}return i},getHiddenTextArea:function(){var e,t=this.shared;return(e=t.textArea)||(e=t.textArea=Ext.getBody().createChild({tag:"textarea",tabIndex:-1,style:{position:"absolute",top:"-1000px",width:"1px",height:"1px"}})).suspendFocusEvents(),e},onCopy:function(e,t){this.doCutCopy(t,!1)},onCut:function(e,t){this.doCutCopy(t,!0)},onPaste:function(e,t){var i,n,r,o=this.shared.data,a=this.getSource();if(!1!==this.validateAction(t)&&a)for(i=0,n=a.length;i<n;++i){if("system"===(r=a[i])){r=this.getSystem(),this.pasteClipboardData(r);break}if(o&&r in o){this.doPaste(r,o[r]);break}}},pasteClipboardData:function(e){var t,i,n=this,r=window.clipboardData;r&&r.getData?n.doPaste(e,r.getData("text")):(i=Ext.Element.getActiveElement(!0),(t=n.getHiddenTextArea().dom).value="",i&&i.suspendFocusEvents(),t.focus(),Ext.defer(function(){i&&(i.focus(),i.resumeFocusEvents()),n.doPaste(e,t.value),t.value=""},100,n))},setClipboardData:function(e){var t,i,n=window.clipboardData;n&&n.setData?n.setData("text",e):(t=this.getHiddenTextArea().dom,i=Ext.Element.getActiveElement(!0),t.value=e,i&&i.suspendFocusEvents(),t.focus(),t.select(),Ext.defer(function(){t.value="",i&&(i.focus(),i.resumeFocusEvents())},50))},syncFormats:function(){var e,t,i={},n=this.getMemory(),r=this.getSystem();if(r&&(i[r]=1),n)for(e=n.length;0<e--;)i[t=n[e]]=i[t]?3:2;return this.allFormats=i},updateMemory:function(){this.allFormats=null},updateSystem:function(){this.allFormats=null},validateAction:Ext.privateFn}}),Ext.define("Ext.plugin.MouseEnter",{extend:"Ext.plugin.Abstract",alias:"plugin.mouseenter",element:"el",init:function(e){this.delegate||Ext.raise("mouseenter plugin must be configured with a delegate selector"),this.handler||Ext.raise("mouseenter plugin must be configured with handler callback");var t=this,i={mouseover:"onMouseEvent",scope:t,destroyable:!0},n=t.element;(t.leaveHandler||t.delay)&&(i.mouseout="onMouseEvent"),"string"==typeof n&&(n=e[t.element]),n?t.mouseListener=Ext.get(n).on(i):e.on({render:function(){t.mouseListener=e[t.element].on(i)},single:!0})},onMouseEvent:function(e){var t=e.getTarget(this.delegate);t&&t!==e.getRelatedTarget(this.delegate)&&(this.delay?(Ext.undefer(this.mouseEventTimer),this.mouseEventTimer=Ext.defer(this.handleMouseEvent,this.delay,this,[e,t])):this.handleMouseEvent(e,t))},handleMouseEvent:function(e,t){"mouseover"===e.type?Ext.callback(this.handler,null,[e,t],0,this.cmp,this.scope):this.leaveHandler&&Ext.callback(this.leaveHandler,null,[e,t],0,this.cmp,this.scope)},destroy:function(){Ext.destroy(this.mouseListener),this.callParent()}}),Ext.define("Ext.sparkline.Shape",{constructor:function(e,t,i,n){this.target=e,this.id=t,this.type=i,this.args=n},append:function(){return this.target.appendShape(this),this}}),Ext.define("Ext.sparkline.CanvasBase",{requires:["Ext.sparkline.Shape"],shapeCount:0,_pxregex:/(\d+)(px)?\s*$/i,constructor:function(e){this.owner=e,this.rtl=this.owner.getInherited().rtl},setWidth:function(e){this.pixelWidth=e},setHeight:function(e){this.pixelHeight=e},drawLine:function(e,t,i,n,r,o){return this.drawShape([[e,t],[i,n]],r,o)},drawShape:function(e,t,i,n){return this._genShape("Shape",[e,t,i,n])},drawCircle:function(e,t,i,n,r,o){return this._genShape("Circle",[e,t,i,n,r,o])},drawPieSlice:function(e,t,i,n,r,o,a){return this._genShape("PieSlice",[e,t,i,n,r,o,a])},drawRect:function(e,t,i,n,r,o){return this._genShape("Rect",[e,t,i,n,r,o])},getElement:function(){return this.el},getLastShapeId:function(){return this.lastShapeId},reset:function(){Ext.raise("reset not implemented")},_genShape:function(e,t){var i=this.shapeCount++;return t.unshift(i),new Ext.sparkline.Shape(this,i,e,t)},appendShape:function(e){Ext.raise("appendShape not implemented")},replaceWithShape:function(e,t){Ext.raise("replaceWithShape not implemented")},insertAfterShape:function(e,t){Ext.raise("insertAfterShape not implemented")},removeShapeId:function(e){Ext.raise("removeShapeId not implemented")},getShapeAt:function(e,t){Ext.raise("getShapeAt not implemented")},render:function(){Ext.raise("render not implemented")}}),Ext.define("Ext.sparkline.CanvasCanvas",{extend:"Ext.sparkline.CanvasBase",statics:{contextOverrides:function(){var a=window.devicePixelRatio||1;return{moveTo:function(e,t){this.rtl&&(e=this.canvas.width-e-1),this.$moveTo(e*a,t*a)},lineTo:function(e,t){this.rtl&&(e=this.canvas.width-e-1),this.$lineTo(e*a,t*a)},arc:function(e,t,i,n,r,o){this.rtl&&(e=this.canvas.width-e-1),this.$arc(e*a,t*a,i*a,n,r,o)},clearRect:function(e,t,i,n){this.rtl&&(e=this.canvas.width-e-i),this.$clearRect(e*a,t*a,i*a,n*a)}}}()},setWidth:function(e){this.callParent(arguments),this.owner.element.dom.width=e*(window.devicePixelRatio||1)},setHeight:function(e){this.callParent(arguments),this.owner.element.dom.height=e*(window.devicePixelRatio||1)},onOwnerUpdate:function(){this.el=this.owner.element,this.interact=!this.owner.initialConfig.disableInteraction,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=this.lastShapeId=null},_getContext:function(e,t,i){var n,r,o=this.context;if(!o){for(r in this.context=o=this.el.dom.getContext("2d"),n=Ext.sparkline.CanvasCanvas.contextOverrides)o["$"+r]=o[r];Ext.apply(o,n),o.rtl=this.rtl}return null!=e&&(o.strokeStyle=e),o.lineWidth=i||1,null!=t&&(o.fillStyle=t),o},reset:function(){this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=this.lastShapeId=null},_drawShape:function(e,t,i,n,r){var o,a,s=this._getContext(i,n,r),l=this.rtl?-.5:.5;for(s.beginPath(),s.moveTo(t[0][0]+l,t[0][1]+.5),o=1,a=t.length;o<a;o++)s.lineTo(t[o][0]+l,t[o][1]+.5);null!=i&&s.stroke(),null!=n&&s.fill(),null!=this.targetX&&null!=this.targetY&&s.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawCircle:function(e,t,i,n,r,o,a){var s=this._getContext(r,o,a);s.beginPath(),s.arc(t,i,n,0,2*Math.PI,!1),null!=this.targetX&&null!=this.targetY&&s.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e),null!=r&&s.stroke(),null!=o&&s.fill()},_drawPieSlice:function(e,t,i,n,r,o,a,s){var l=this._getContext(a,s);l.beginPath(),l.moveTo(t,i),l.arc(t,i,n,r,o,!1),l.lineTo(t,i),l.closePath(),null!=a&&l.stroke(),s&&l.fill(),void 0!==this.targetX&&void 0!==this.targetY&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawRect:function(e,t,i,n,r,o,a){return this._drawShape(e,[[t,i],[t+n,i],[t+n,i+r],[t,i+r],[t,i]],o,a)},appendShape:function(e){return this.shapes[e.id]=e,this.shapeseq.push(e.id),this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var i,n=this.shapeseq;for(this.shapes[t.id]=t,i=n.length;i--;)n[i]===e&&(n[i]=t.id);delete this.shapes[e]},replaceWithShapes:function(e,t){var i,n,r,o=this.shapeseq,a={};for(n=e.length;n--;)a[e[n]]=!0;for(n=o.length;n--;)a[i=o[n]]&&(o.splice(n,1),delete this.shapes[i],r=n);for(n=t.length;n--;)o.splice(r,0,t[n].id),this.shapes[t[n].id]=t[n]},insertAfterShape:function(e,t){var i,n=this.shapeseq;for(i=n.length;i--;)if(n[i]===e)return n.splice(i+1,0,t.id),void(this.shapes[t.id]=t)},removeShapeId:function(e){var t,i=this.shapeseq;for(t=i.length;t--;)if(i[t]===e){i.splice(t,1);break}delete this.shapes[e]},getShapeAt:function(e,t){return this.rtl&&(e=this.el.dom.width-e-1),this.targetX=e,this.targetY=t,this.render(),this.currentTargetShapeId},render:function(){var e,t,i=this.shapeseq,n=this.shapes,r=i.length;for(this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),t=0;t<r;t++)this["_draw"+(e=n[i[t]]).type].apply(this,e.args);this.interact||(this.shapes={},this.shapeseq=[])}}),Ext.define("Ext.sparkline.VmlCanvas",{extend:"Ext.sparkline.CanvasBase",setWidth:function(e){this.callParent(arguments),this.owner.groupEl.dom.coordsize=this.width+" "+(this.height||0),this.owner.groupEl.dom.style.width=e+"px"},setHeight:function(e){this.callParent(arguments),this.owner.groupEl.dom.coordsize=(this.width||0)+" "+this.height,this.owner.groupEl.dom.style.height=e+"px"},onOwnerUpdate:function(){this.group=this.owner.groupEl,this.el=this.owner.element,this.prerender=[]},_drawShape:function(e,t,i,n,r){var o,a,s,l,d,u,c=[];for(u=0,d=t.length;u<d;u++)c[u]=t[u][0]+","+t[u][1];return o=c.splice(0,1),r=null==r?1:r,a=null==i?' stroked="false" ':' strokeWeight="'+r+'px" strokeColor="'+i+'" ',s=null==n?' filled="false"':' fillColor="'+n+'" filled="true" ',l=c[0]===c[c.length-1]?"x ":"",['<svml:shape coordorigin="0 0" coordsize="',this.pixelWidth," ",this.pixelHeight,'" id="jqsshape',e,'" ',a,s,' style="position:absolute;height:',this.pixelHeight,"px;width:",this.pixelWidth,'px" ',' path="m ',o," l ",c.join(", ")," ",l,'e"></svml:shape>'].join("")},_drawCircle:function(e,t,i,n,r,o,a){var s=2*n;return['<svml:oval id="jqsshape',e,'" ',null==r?' stroked="false" ':' strokeWeight="'+a+'px" strokeColor="'+r+'" ',null==o?' filled="false"':' fillColor="'+o+'" filled="true" ',' style="position:absolute;top:',i-=n,"px; left:",t-=n,"px;width:",s,"px;height:",s,'px"></svml:oval>'].join("")},_drawPieSlice:function(e,t,i,n,r,o,a,s){var l,d,u,c,h,f,g=this.pixelWidth,p=this.pixelHeight;if(h=null==a?' stroked="false" ':' strokeWeight="1px" strokeColor="'+a+'" ',f=null==s?' filled="false"':' fillColor="'+s+'" filled="true" ',r===o)return"";if(o-r==2*Math.PI&&(r=0,o=2*Math.PI),l=t+Math.round(Math.cos(r)*n),d=i+Math.round(Math.sin(r)*n),u=t+Math.round(Math.cos(o)*n),c=i+Math.round(Math.sin(o)*n),l===u&&d===c){if(o-r<Math.PI)return"";l=u=t+n,d=c=i}return l===u&&d===c&&o-r<Math.PI?"":['<svml:shape coordorigin="0 0" coordsize="',g," ",p,'" id="jqsshape',e,'" ',h,f,' style="position:absolute;height:',p,"px;width:",g,'px" path="m ',t,",",i," wa ",[t-n,i-n,t+n,i+n,l,d,u,c].join(", "),' x e"></svml:shape>'].join("")},_drawRect:function(e,t,i,n,r,o,a){return this._drawShape(e,[[t,i],[t,i+r],[t+n,i+r],[t+n,i],[t,i]],o,a)},reset:function(){Ext.fly(this.group).empty()},appendShape:function(e){return this.prerender.push(this["_draw"+e.type].apply(this,e.args)),this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var i=this.el.getById("jqsshape"+e,!0),n=this["_draw"+t.type].apply(this,t.args);i.outerHTML=n},replaceWithShapes:function(e,t){var i,n=this.el.getById("jqsshape"+e[0],!0),r="",o=t.length;for(i=0;i<o;i++)r+=this["_draw"+t[i].type].apply(this,t[i].args);for(n.outerHTML=r,i=1;i<e.length;i++)this.el.getById("jqsshape"+e[i]).destroy()},insertAfterShape:function(e,t){var i=this.el.getById("jqsshape"+e,!0),n=this["_draw"+t.type].apply(this,t.args);i.insertAdjacentHTML("afterEnd",n)},removeShapeId:function(e){var t=this.el.getById("jqsshape"+e,!0);this.group.removeChild(t)},getShapeAt:function(e,t){return this.el.id.substr(8)},render:function(){this.group.dom.innerHTML=this.prerender.join("")}},function(){Ext.onInternalReady(function(){var e=document;e.namespaces&&!e.namespaces.svml&&e.namespaces.add("svml","urn:schemas-microsoft-com:vml","#default#VML")})}),Ext.define("Ext.util.Color",{alternateClassName:"Ext.draw.Color",statics:{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbToHexRe:/\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbaToHexRe:/\s*rgba\((\d+),\s*(\d+),\s*(\d+),\s*([.\d]+)\)/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,NONE:"none",RGBA_NONE:"rgba(0, 0, 0, 0)"},isColor:!0,lightnessFactor:.2,constructor:function(e,t,i,n){this.setRGB(e,t,i,n)},clone:function(){return new this.self(this.r,this.g,this.b,this.a)},setRGB:function(e,t,i,n){this.r=Math.min(255,Math.max(0,e)),this.g=Math.min(255,Math.max(0,t)),this.b=Math.min(255,Math.max(0,i)),this.a=void 0===n?1:Math.min(1,Math.max(0,n))},getBrightness:function(){return(299*(this.r/255*100)+587*(this.g/255*100)+114*(this.b/255*100))/1e3},getGrayscale:function(){return.3*this.r+.59*this.g+.11*this.b},getHSL:function(){var e,t=this.r/255,i=this.g/255,n=this.b/255,r=Math.max(t,i,n),o=Math.min(t,i,n),a=r-o,s=0,l=.5*(r+o);return o!==r&&(s=l<=.5?a/(r+o):a/(2-r-o),(e=t===r?60*(i-n)/a:i===r?120+60*(n-t)/a:240+60*(t-i)/a)<0&&(e+=360),360<=e&&(e-=360)),[e,s,l]},getHSV:function(){var e,t=this.r/255,i=this.g/255,n=this.b/255,r=Math.max(t,i,n),o=Math.min(t,i,n),a=r-o,s=0;return o!=r&&(s=r?a/r:0,(e=t===r?60*(i-n)/a:i===r?60*(n-t)/a+120:60*(t-i)/a+240)<0&&(e+=360),360<=e&&(e-=360)),[e,s,r]},setHSL:function(e,t,i){var n,r,o,a=Math.abs;if(e=(e%360+360)%360,i=1<i?1:i<0?0:i,0===(t=1<t?1:t<0?0:t)||null===e)i*=255,this.setRGB(i,i,i);else switch(e/=60,r=(n=t*(1-a(2*i-1)))*(1-a(e%2-1)),o=i-n/2,o*=255,n*=255,r*=255,Math.floor(e)){case 0:this.setRGB(n+o,r+o,o);break;case 1:this.setRGB(r+o,n+o,o);break;case 2:this.setRGB(o,n+o,r+o);break;case 3:this.setRGB(o,r+o,n+o);break;case 4:this.setRGB(r+o,o,n+o);break;case 5:this.setRGB(n+o,o,r+o)}return this},setHSV:function(e,t,i){var n,r,o;if(e=(e%360+360)%360,i=1<i?1:i<0?0:i,0===(t=1<t?1:t<0?0:t)||null===e)i*=255,this.setRGB(i,i,i);else switch(e/=60,r=(n=i*t)*(1-Math.abs(e%2-1)),o=i-n,o*=255,n*=255,r*=255,Math.floor(e)){case 0:this.setRGB(n+o,r+o,o);break;case 1:this.setRGB(r+o,n+o,o);break;case 2:this.setRGB(o,n+o,r+o);break;case 3:this.setRGB(o,r+o,n+o);break;case 4:this.setRGB(r+o,o,n+o);break;case 5:this.setRGB(n+o,o,r+o)}return this},createLighter:function(e){var t=this.clone();return t.lighten(e),t},lighten:function(e){var t;e||0===e||(e=this.lightnessFactor),t=this.getHSL(),this.setHSL(t[0],t[1],Ext.Number.constrain(t[2]+e,0,1))},createDarker:function(e){var t=this.clone();return t.darken(e),t},darken:function(e){return e||0===e||(e=this.lightnessFactor),this.lighten(-e)},toString:function(){var e,t,i,n=Math.round;return 1===this.a?(e=n(this.r).toString(16),t=n(this.g).toString(16),i=n(this.b).toString(16),["#",e=1===e.length?"0"+e:e,t=1===t.length?"0"+t:t,i=1===i.length?"0"+i:i].join("")):"rgba("+[n(this.r),n(this.g),n(this.b),0===this.a?0:this.a.toFixed(15)].join(", ")+")"},toHex:function(e){var t=this.r,i=this.g;return"#"+("000000"+(this.b|i<<8|t<<16).toString(16)).slice(-6)},setFromString:function(e){var t,i,n,r,o=1,a=parseInt;if(e===Ext.util.Color.NONE)return this.r=this.g=this.b=this.a=0,this;if(4!==e.length&&7!==e.length||"#"!==e.substr(0,1)){if(t=e.match(Ext.util.Color.rgbToHexRe))i=+t[1],n=+t[2],r=+t[3];else if(t=e.match(Ext.util.Color.rgbaToHexRe))i=+t[1],n=+t[2],r=+t[3],o=+t[4];else if(Ext.util.Color.ColorList.hasOwnProperty(e.toLowerCase()))return this.setFromString(Ext.util.Color.ColorList[e.toLowerCase()])}else(t=e.match(Ext.util.Color.hexRe))&&(i=a(t[1],16)>>0,n=a(t[2],16)>>0,r=a(t[3],16)>>0,4===e.length&&(i+=16*i,n+=16*n,r+=16*r));return void 0===i||(this.r=i,this.g=n,this.b=r,this.a=o),this}},function(){var r=new this;this.addStatics({fly:function(e,t,i,n){switch(arguments.length){case 1:r.setFromString(e);break;case 3:case 4:r.setRGB(e,t,i,n);break;default:return null}return r},ColorList:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},fromHSL:function(e,t,i){return new this(0,0,0,0).setHSL(e,t,i)},fromHSV:function(e,t,i){return new this(0,0,0,0).setHSL(e,t,i)},fromString:function(e){return new this(0,0,0,0).setFromString(e)},create:function(e){return e instanceof this?e:Ext.isArray(e)?new Ext.util.Color(e[0],e[1],e[2],e[3]):Ext.isString(e)?Ext.util.Color.fromString(e):2<arguments.length?new Ext.util.Color(e,arguments[1],arguments[2],arguments[3]):new Ext.util.Color(0,0,0,0)}})}),Ext.define("Ext.sparkline.Base",{extend:"Ext.Gadget",xtype:"sparkline",requires:["Ext.XTemplate","Ext.sparkline.CanvasCanvas","Ext.sparkline.VmlCanvas","Ext.util.Color"],cachedConfig:{lineColor:"#157fcc",defaultPixelsPerValue:3,tagValuesAttribute:"values",enableTagOptions:!1,enableHighlight:!0,highlightColor:null,highlightLighten:.1,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableTooltips:!1,disableInteraction:!1,tipTpl:null},config:{values:null},baseCls:Ext.baseCSSPrefix+"sparkline",element:{tag:"canvas",reference:"element",style:{display:"inline-block",verticalAlign:"top"},listeners:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},width:0,height:0},defaultBindProperty:"values",redrawQueue:{},inheritableStatics:{onClassCreated:function(e){var t,i,n=e.prototype.updateConfigChange,r=e.prototype,o=e.getConfigurator().configs;for(t in o)"tipTpl"!==t&&(r[i=Ext.Config.get(t).names.update]?r[i]=Ext.Function.createSequence(r[i],n):r[i]=n)}},constructor:function(e){var t=Ext.sparkline;this.canvas=Ext.supports.Canvas?new t.CanvasCanvas(this):new t.VmlCanvas(this),this.callParent([e])},all:function(e,t,i){var n;for(n=t.length;n--;)if((!i||null!==t[n])&&t[n]!==e)return!1;return!0},updateConfigChange:function(e){return!this.bufferRedraw&&this.height&&this.width?this.redraw():(this.redrawQueue[this.getId()]=this).redrawTimer||(Ext.sparkline.Base.prototype.redrawTimer=Ext.raf(this.processRedrawQueue)),e},applyTipTpl:function(e){return e&&!e.isTemplate&&(e=new Ext.XTemplate(e)),e},normalizeValue:function(e){var t;switch(e){case"undefined":e=void 0;break;case"null":e=null;break;case"true":e=!0;break;case"false":e=!1;break;default:e==(t=parseFloat(e))&&(e=t)}return e},normalizeValues:function(e){var t,i=[];for(t=e.length;t--;)i[t]=this.normalizeValue(e[t]);return i},updateWidth:function(e,t){var i=this.element.dom,n=this.measurer;this.callParent([e,t]),this.canvas.setWidth(e),this.width=e,null==this.height&&n&&this.setHeight(parseInt(n.getCachedStyle(i.parentNode,"line-height"),10))},updateHeight:function(e,t){this.callParent([e,t]),this.canvas.setHeight(e),this.height=e},setValues:function(e){var t=this.getValues();e=null==e?[]:Ext.Array.from(e),this.values=e,this.callParent([e]),e===t&&this.updateValues([e,t])},redraw:function(){this.destroyed||(this.canvas.onOwnerUpdate(),this.canvas.reset(),this.getValues()&&(this.onUpdate(),this.renderGraph()))},onUpdate:Ext.emptyFn,renderGraph:function(){var e=!0;return this.disabled&&(this.canvas.reset(),e=!1),e},onMouseEnter:function(e){this.onMouseMove(e)},onMouseMove:function(e){this.canvasRegion=this.canvasRegion||this.canvas.el.getRegion(),this.currentPageXY=e.getPoint(),this.redraw()},onMouseLeave:function(){this.canvasRegion=this.currentPageXY=this.targetX=this.targetY=null,this.redraw(),this.hideTip()},updateDisplay:function(){var e,t,i=this,n=i.getValues();n&&n.length&&i.currentPageXY&&i.canvasRegion.contains(i.currentPageXY)&&(null!=(t=i.getRegion(i.currentPageXY[0]-i.canvasRegion.left,i.canvasRegion.bottom-1-i.currentPageXY[1]))&&i.isValidRegion(t,n)&&(i.disableHighlight||i.renderHighlight(t),i.getDisableTooltips()||(e=i.getRegionTooltip(t))),i.hasListeners.sparklineregionchange&&i.fireEvent("sparklineregionchange",i),e&&(i.getSharedTooltip().setHtml(e),i.showTip())),e||i.hideTip()},getRegion:Ext.emptyFn,getRegionTooltip:function(e){var t,i,n,r,o,a,s,l,d,u=this,c=[],h=u.getTipTpl();if(t=u.getRegionFields(e),a=u.tooltipFormatter)return a(u,u,t);if(!h)return"";if(Ext.isArray(t)||(t=[t]),i=u.tooltipFormatFieldlist,n=u.tooltipFormatFieldlistKey,i&&n){for(r=[],l=t.length;l--;)o=t[l][n],-1!==(d=Ext.Array.indexOf(o,i))&&(r[d]=t[l]);t=r}for(s=t.length,d=0;d<s;d++)t[d].isNull&&u.getTooltipSkipNull()||(Ext.apply(t[d],{prefix:u.getTooltipPrefix(),suffix:u.getTooltipSuffix()}),c.push(h.apply(t[d])));return c.length?c.join("<br>"):""},getRegionFields:Ext.emptyFn,calcHighlightColor:function(e){var t,i=this.getHighlightColor(),n=this.getHighlightLighten();return i||(n&&(t=Ext.util.Color.fromString(e))&&(t.lighten(n),e=t.toHex()),e)},destroy:function(){delete this.redrawQueue[this.getId()],this.callParent()},privates:{hideTip:Ext.privateFn,isValidRegion:function(e,t){return e<t.length},showTip:Ext.privateFn}},function(t){var i=t.prototype;i.getSharedTooltip=function(){var e=this.tooltip;return e||(i.tooltip=e=t.constructTip()),e},t.onClassCreated(t),i.processRedrawQueue=function(){var e,t=i.redrawQueue;for(e in t)t[e].redraw();i.redrawQueue={},i.redrawTimer=0}}),Ext.define("Ext.override.sparkline.Base",{override:"Ext.sparkline.Base",statics:{constructTip:function(){return new Ext.tip.ToolTip({id:"sparklines-tooltip",showDelay:0,dismissDelay:0,hideDelay:400})}},onMouseMove:function(e){this.getSharedTooltip().triggerEvent=e,this.callParent([e])},onMouseLeave:function(e){this.callParent([e]),this.getSharedTooltip().target=null},privates:{hideTip:function(){var e=this.getSharedTooltip();e.target=null,e.hide()},showTip:function(){var e=this.getSharedTooltip();e.target=this.el,e.onTargetOver(e.triggerEvent)}}},function(e){Ext.supports.Canvas||(e.prototype.element={tag:"span",reference:"element",listeners:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},style:{display:"inline-block",position:"relative",overflow:"hidden",margin:"0px",padding:"0px",verticalAlign:"top",cursor:"default"},children:[{tag:"svml:group",reference:"groupEl",coordorigin:"0 0",coordsize:"0 0",style:"position:absolute;width:0;height:0;pointer-events:none"}]})}),Ext.define("Ext.sparkline.BarBase",{extend:"Ext.sparkline.Base",renderHighlight:function(e){this.renderRegion(e,!0)},renderGraph:function(){var e,t,i,n,r=this.values,o=this.canvas,a=this.regionShapes||(this.regionShapes={});if(this.callParent()){for(i=r.length;i--;)if(e=this.renderRegion(i))if(Ext.isArray(e)){for(t=[],n=e.length;n--;)e[n].append(),t.push(e[n].id);a[i]=t}else e.append(),a[i]=e.id;else a[i]=null;this.currentPageXY&&(this.currentRegion=null,this.updateDisplay()),o.render()}}}),Ext.define("Ext.sparkline.RangeMap",{constructor:function(e){var t,i,n=[];for(t in e)e.hasOwnProperty(t)&&"string"==typeof t&&-1<t.indexOf(":")&&((i=t.split(":"))[0]=0===i[0].length?-1/0:parseFloat(i[0]),i[1]=0===i[1].length?1/0:parseFloat(i[1]),i[2]=e[t],n.push(i));this.map=e,this.rangelist=n||!1},get:function(e){var t,i,n,r=this.rangelist;if(void 0!==(n=this.map[e]))return n;if(r)for(t=r.length;t--;)if((i=r[t])[0]<=e&&i[1]>=e)return i[2]}}),Ext.define("Ext.sparkline.Bar",{extend:"Ext.sparkline.BarBase",requires:["Ext.sparkline.RangeMap"],alias:"widget.sparklinebar",config:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:null,nullColor:null,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMin:null,chartRangeMax:null,chartRangeClip:!1,colorMap:null},tipTpl:"&#9679; {prefix}{value}{suffix}",remove:function(e,t){var i,n,r=[];for(i=0,n=e.length;i<n;i++)e[i]!==t&&r.push(e[i]);return r},all:function(e,t,i){var n;for(n=e.length;n--;)if((!i||null!==e[n])&&e[n]!==t)return!1;return!0},applyColorMap:function(e){return Ext.isArray(e)?(this.colorMapByIndex=e,this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=e,this.colorMapByValue&&null==this.colorMapByValue.get&&(this.colorMapByValue=new Ext.sparkline.RangeMap(e))),this.updateConfigChange(),e},onUpdate:function(){var e,t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E=this,b=E.values,C=E.getBarWidth(),S=E.getBarSpacing(),w=E.getChartRangeMin(),T=E.getChartRangeMax(),P=E.getChartRangeClip(),k=1/0,I=-1/0,R=E.getZeroAxis(),M=[],A=[];for(o=0,a=b.length;o<a;o++)((e="string"==typeof(y=b[o])&&-1<y.indexOf(":"))||Ext.isArray(y))&&(f=!0,e&&(y=b[o]=E.normalizeValues(y.split(":"))),y=E.remove(y,null),(t=Math.min.apply(Math,y))<k&&(k=t),I<(i=Math.max.apply(Math,y))&&(I=i));for(E.stacked=f,E.regionShapes={},E.totalBarWidth=C+S,b.length&&(E.width=b.length*C+(b.length-1)*S),P&&(c=null==w?-1/0:w,h=null==T?1/0:T),r=[],n=f?[]:r,o=0,a=b.length;o<a;o++)if(f)for(g=b[o],b[o]=x=[],M[o]=0,n[o]=A[o]=0,p=0,m=g.length;p<m;p++)null!==(y=x[p]=P?Ext.Number.constrain(g[p],c,h):g[p])&&(0<y&&(M[o]+=y),k<0&&0<I?y<0?A[o]+=Math.abs(y):n[o]+=y:n[o]+=Math.abs(y-(y<0?I:k)),r.push(y));else y=P?Ext.Number.constrain(b[o],c,h):b[o],null!==(y=b[o]=E.normalizeValue(y))&&r.push(y);E.max=u=Math.max.apply(Math,r),E.min=d=Math.min.apply(Math,r),E.stackMax=I=f?Math.max.apply(Math,M):u,E.stackMin=k=f?Math.min.apply(Math,r):d,null!=w&&(P||w<d)&&(d=w),null!=T&&(P||u<T)&&(u=T),l=d<=0&&0<=u&&R?0:R?0<d?d:u:d,E.xAxisOffset=l,s=f?Math.max.apply(Math,n)+Math.max.apply(Math,A):u-d,E.canvasHeightEf=R&&d<0?E.getHeight()-2:E.getHeight()-1,d<l?(v=((f&&0<=u?I:u)-l)/s*E.getHeight())!==Math.ceil(v)&&(E.canvasHeightEf-=2,v=Math.ceil(v)):v=E.getHeight(),E.yoffset=v,E.range=s},getRegion:function(e,t){var i=Math.floor(e/this.totalBarWidth);return i<0||i>=this.values.length?void 0:i},getRegionFields:function(e){var t,i,n=Ext.Array.from(this.values[e]),r=[];for(i=n.length;i--;)t=n[i],r.push({isNull:null===t,value:t,color:this.calcColor(i,t,e),offset:e});return r},calcColor:function(e,t,i){var n,r,o=this.colorMapByIndex,a=this.colorMapByValue,s=this.getZeroColor();return n=this.stacked?this.getStackedBarColor():t<0?this.getNegBarColor():this.getBarColor(),0===t&&null!=s&&(n=s),a&&(r=a.get(t))?n=r:o&&o.length>i&&(n=o[i]),Ext.isArray(n)?n[e%n.length]:n},renderRegion:function(e,t){var i,n,r,o,a,s,l,d,u,c,h=this,f=h.values[e],g=h.xAxisOffset,p=h.range,m=h.stacked,x=h.canvas,y=h.getBarWidth(),v=e*h.totalBarWidth,E=h.canvasHeightEf,b=h.yoffset,C=h.getNullColor();if(l=(f=Ext.isArray(f)?f:[f]).length,d=f[0],o=h.all(f,null),c=h.all(f,g,!0),o)C&&(r=t?C:h.calcHighlightColor(C,h),i=0<b?b-1:b,x.drawRect(v,i,y-1,0,r,r).append());else for(a=b,s=0;s<l;s++){if(d=f[s],m&&d===g){if(!c||u)continue;u=!0}n=0<p?Math.floor(E*(Math.abs(d-g)/p))+1:1,d<g||d===g&&0===b?(i=a,a+=n):(i=b-n,b-=n),r=h.calcColor(s,d,e),t&&(r=h.calcHighlightColor(r,h)),x.drawRect(v,i,y-1,n-1,r,r).append()}}},function(e){e.onClassCreated(e)}),Ext.define("Ext.sparkline.Box",{extend:"Ext.sparkline.Base",alias:"widget.sparklinebox",config:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:null,targetColor:"#4a2",chartRangeMin:null,chartRangeMax:null},tipTpl:["{field:this.fields}: {value}",{fields:function(e){return{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}[e]}}],tooltipFormatFieldlistKey:"field",quartile:function(e,t){var i;return 2===t?(i=Math.floor(e.length/2),e.length%2?e[i]:(e[i-1]+e[i])/2):e.length%2?(i=(e.length*t+t)/4)%1?(e[Math.floor(i)]+e[Math.floor(i)-1])/2:e[i-1]:(i=(e.length*t+2)/4)%1?(e[Math.floor(i)]+e[Math.floor(i)-1])/2:e[i-1]},applyValues:function(e){return e=Ext.Array.map(Ext.Array.from(e),Number),this.raw||e.sort(function(e,t){return e-t}),this.disabled=!(e&&e.length),this.updateConfigChange(),e},getRegion:function(){return 1},getRegionFields:function(){var e=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return void 0!==this.loutlier&&e.push({field:"lo",value:this.loutlier}),void 0!==this.routlier&&e.push({field:"ro",value:this.routlier}),void 0!==this.lwhisker&&e.push({field:"lw",value:this.lwhisker}),void 0!==this.rwhisker&&e.push({field:"rw",value:this.rwhisker}),e},renderHighlight:Ext.emptyFn,renderGraph:function(){var e,t,i,n,r,o,a,s,l,d,u,c=this,h=c.canvas,f=c.values,g=f.length,p=c.getWidth(),m=c.getHeight(),x=c.getChartRangeMin(),y=c.getChartRangeMax(),v=null==x?Math.min.apply(Math,f):x,E=null==y?Math.max.apply(Math,f):y,b=0,C=c.getSpotRadius(),S=c.getOutlierLineColor(),w=c.getOutlierFillColor(),T=c.getShowOutliers(),P=c.getOutlierIQR(),k=c.getLineColor(),I=c.getWhiskerColor(),R=c.getTargetColor();if(c.callParent()){if(c.raw)T&&5<f.length?(t=f[0],e=f[1],n=f[2],r=f[3],o=f[4],a=f[5],s=f[6]):(e=f[0],n=f[1],r=f[2],o=f[3],a=f[4]);else if(n=c.quartile(f,1),r=c.quartile(f,2),i=(o=c.quartile(f,3))-n,T){for(e=a=null,l=0;l<g;l++)null==e&&f[l]>n-i*P&&(e=f[l]),f[l]<o+i*P&&(a=f[l]);t=f[0],s=f[g-1]}else e=f[0],a=f[g-1];c.quartiles=[n,r,o],c.lwhisker=e,c.rwhisker=a,c.loutlier=t,c.routlier=s,u=p/(E-v+1),T&&(b=Math.ceil(C),u=(p-=2*Math.ceil(C))/(E-v+1),t<e&&h.drawCircle((t-v)*u+b,m/2,C,S,w).append(),a<s&&h.drawCircle((s-v)*u+b,m/2,C,S,w).append()),h.drawRect(Math.round((n-v)*u+b),Math.round(.1*m),Math.round((o-n)*u),Math.round(.8*m),c.getBoxLineColor(),c.getBoxFillColor()).append(),h.drawLine(Math.round((e-v)*u+b),Math.round(m/2),Math.round((n-v)*u+b),Math.round(m/2),k).append(),h.drawLine(Math.round((e-v)*u+b),Math.round(m/4),Math.round((e-v)*u+b),Math.round(m-m/4),I).append(),h.drawLine(Math.round((a-v)*u+b),Math.round(m/2),Math.round((o-v)*u+b),Math.round(m/2),k).append(),h.drawLine(Math.round((a-v)*u+b),Math.round(m/4),Math.round((a-v)*u+b),Math.round(m-m/4),I).append(),h.drawLine(Math.round((r-v)*u+b),Math.round(.1*m),Math.round((r-v)*u+b),Math.round(.9*m),c.getMedianColor()).append(),c.target&&(d=Math.ceil(c.spotRadius),h.drawLine(Math.round((c.target-v)*u+b),Math.round(m/2-d),Math.round((c.target-v)*u+b),Math.round(m/2+d),R).append(),h.drawLine(Math.round((c.target-v)*u+b-d),Math.round(m/2),Math.round((c.target-v)*u+b+d),Math.round(m/2),R).append()),c.currentPageXY&&c.canvasRegion.contains(c.currentPageXY)&&(c.currentRegion=null,c.updateDisplay()),h.render()}}}),Ext.define("Ext.sparkline.Bullet",{extend:"Ext.sparkline.Base",alias:"widget.sparklinebullet",config:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:null},tipTpl:["{fieldkey:this.fields} - {value}",{fields:function(e){return"r"===e?"Range":"p"===e?"Performance":"t"===e?"Target":void 0}}],applyValues:function(e){return e=Ext.Array.map(Ext.Array.from(e),this.normalizeValue),this.disabled=!(e&&e.length),this.updateConfigChange(),e},onUpdate:function(){var e,t,i,n=this,r=n.values,o=n.getBase();n.callParent(arguments),(i=r.slice())[0]=null===i[0]?i[2]:i[0],i[1]=null===r[1]?i[2]:i[1],e=Math.min.apply(Math,r),t=Math.max.apply(Math,r),e=null==o?e<0?e:0:o,n.min=e,n.max=t,n.range=t-e,n.shapes={},n.valueShapes={},n.regiondata={},r.length||(n.disabled=!0)},getRegion:function(e,t){var i=this.canvas.getShapeAt(e,t);return void 0!==i&&void 0!==this.shapes[i]?this.shapes[i]:void 0},getRegionFields:function(e){return{fieldkey:e.substr(0,1),value:this.values[parseInt(e.substr(1),10)],region:e}},renderHighlight:function(e){var t,i=this.valueShapes,n=this.shapes,r=i[e];switch(delete n[r],e.substr(0,1)){case"r":t=this.renderRange(parseInt(e.substr(1),10),!0);break;case"p":t=this.renderPerformance(!0);break;case"t":t=this.renderTarget(!0)}i[e]=t.id,n[t.id]=e,this.canvas.replaceWithShape(r,t)},renderRange:function(e,t){var i=this.values[e],n=Math.round(this.getWidth()*((i-this.min)/this.range)),r=this.getRangeColors(),o=r[Math.min(e-2,r.length-1)];return t&&(o=this.calcHighlightColor(o)),this.canvas.drawRect(0,0,n-1,this.getHeight()-1,o,o)},renderPerformance:function(e){var t=this.values[1],i=Math.round(this.getWidth()*((t-this.min)/this.range)),n=this.getPerformanceColor();return e&&(n=this.calcHighlightColor(n)),this.canvas.drawRect(0,Math.round(.3*this.getHeight()),i-1,Math.round(.4*this.getHeight())-1,n,n)},renderTarget:function(e){var t=this.values[0],i=this.getTargetWidth(),n=Math.round(this.getWidth()*((t-this.min)/this.range)-i/2),r=Math.round(.1*this.getHeight()),o=this.getHeight()-2*r,a=this.getTargetColor();return e&&(a=this.calcHighlightColor(a)),this.canvas.drawRect(n,r,i-1,o-1,a,a)},renderGraph:function(){var e,t,i=this,n=i.values.length,r=i.canvas,o=i.shapes||(i.shapes={}),a=i.valueShapes||(i.valueShapes={});if(i.callParent()){for(e=2;e<n;e++)o[(t=i.renderRange(e).append()).id]="r"+e,a["r"+e]=t.id;null!==i.values[1]&&(o[(t=i.renderPerformance().append()).id]="p1",a.p1=t.id),null!==i.values[0]&&(o[(t=this.renderTarget().append()).id]="t0",a.t0=t.id),i.currentPageXY&&i.canvasRegion.contains(i.currentPageXY)&&i.updateDisplay(),r.render()}},privates:{isValidRegion:function(e,t){return parseInt(e.substr(1),10)<t.length}}}),Ext.define("Ext.sparkline.Discrete",{extend:"Ext.sparkline.BarBase",alias:"widget.sparklinediscrete",config:{lineHeight:"auto",thresholdColor:null,thresholdValue:0,chartRangeMax:null,chartRangeMin:null,chartRangeClip:!1},tipTpl:"{prefix}{value}{suffix}",applyValues:function(e){return e=Ext.Array.map(Ext.Array.from(e),Number),this.disabled=!(e&&e.length),this.updateConfigChange(),e},onUpdate:function(){var e=this,t=e.values,i=e.getChartRangeMin(),n=e.getChartRangeMax(),r=e.getChartRangeClip();e.callParent(arguments),e.regionShapes={},e.min=Math.min.apply(Math,t),e.max=Math.max.apply(Math,t),e.range=e.max-e.min,e.width=e.getWidth(),e.interval=Math.floor(e.width/t.length),e.itemWidth=e.width/t.length,null!=i&&(r||i<e.min)&&(e.min=i),null!=n&&(r||n>e.max)&&(e.max=n),e.canvas&&"auto"===e.getLineHeight()&&e.setLineHeight(Math.round(.3*e.getHeight()))},getRegion:function(e,t){return Math.floor(e/this.itemWidth)},getRegionFields:function(e){return{isNull:void 0===this.values[e],value:this.values[e],offset:e}},renderRegion:function(e,t){var i,n,r,o,a=this,s=a.values,l=a.min,d=a.max,u=a.range,c=a.interval,h=a.canvas,f=a.getHeight(),g=a.getLineHeight(),p=f-g,m=a.getThresholdColor();n=Ext.Number.constrain(s[e],l,d),o=e*c,i=Math.round(p-(n-l)/u*p),r=m&&n<a.getThresholdValue()?m:a.getLineColor(),t&&(r=a.calcHighlightColor(r)),h.drawLine(o,i,o,i+g,r).append()}}),Ext.define("Ext.sparkline.Line",{extend:"Ext.sparkline.Base",requires:["Ext.sparkline.RangeMap"],alias:"widget.sparklineline",config:{fillColor:"#def",spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:null,normalRangeMax:null,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:null,chartRangeMax:null,chartRangeMinX:null,chartRangeMaxX:null,valueSpots:null},tipTpl:"&#9679; {prefix}{y}{suffix}",applyValueSpots:function(e){return e&&!e.get&&(e=new Ext.sparkline.RangeMap(e)),this.updateConfigChange(),e},onUpdate:function(){this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[]},getRegion:function(e,t){var i,n=this.regionMap;for(i=n.length;i--;)if(null!==n[i]&&e>=n[i][0]&&e<=n[i][1])return n[i][2]},getRegionFields:function(e){return{isNull:null===this.yvalues[e],x:this.xvalues[e],y:this.yvalues[e],color:this.getLineColor(),fillColor:this.getFillColor(),offset:e}},renderHighlight:function(e){var t=this.canvas,i=this.vertices[e],n=this.getSpotRadius(),r=this.getHighlightSpotColor(),o=this.getHighlightLineColor();i&&(n&&r&&t.drawCircle(i[0],i[1],n,null,r).append(),o&&t.drawLine(i[0],this.canvasTop,i[0],this.canvasTop+this.getHeight(),o).append())},scanValues:function(){var e,t,i=this,n=i.values,r=n.length,o=i.xvalues,a=i.yvalues,s=i.yminmax;for(e=0;e<r;e++)"string"==typeof(t=n[e])&&(t=t.split(":")),t&&2===t.length?(o.push(Number(t[0])),a.push(t=Number(t[1])),s.push(t)):(o.push(e),null==t||"null"===t?a.push(null):(a.push(t=Number(t)),s.push(t)));i.xvalues&&(o=i.xvalues),i.maxy=i.maxyorg=Math.max.apply(Math,s),i.miny=i.minyorg=Math.min.apply(Math,s),i.maxx=Math.max.apply(Math,o),i.minx=Math.min.apply(Math,o),i.xvalues=o,i.yvalues=a,i.yminmax=s},processRangeOptions:function(){var e=this,t=e.getNormalRangeMin(),i=e.getNormalRangeMax(),n=e.getChartRangeMin(),r=e.getChartRangeMinX(),o=e.getChartRangeMax(),a=e.getChartRangeMaxX();null!=t&&(t<e.miny&&(e.miny=t),i>e.maxy&&(e.maxy=i)),null!=n&&(e.chartRangeClip||n<e.miny)&&(e.miny=n),null!=o&&(e.chartRangeClip||o>e.maxy)&&(this.maxy=o),null!=r&&(e.chartRangeClipX||r<e.minx)&&(e.minx=r),null!=a&&(e.chartRangeClipX||a>e.maxx)&&(e.maxx=a)},drawNormalRange:function(e,t,i,n,r){var o=this.getNormalRangeMin(),a=this.getNormalRangeMax(),s=t+Math.round(i-i*((a-this.miny)/r)),l=Math.round(i*(a-o)/r);this.canvas.drawRect(e,s,n,l,void 0,this.normalRangeColor).append()},renderGraph:function(){var e,t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E,b,C,S=this,w=S.canvas,T=S.getWidth(),P=S.getHeight(),k=S.vertices,I=S.getSpotRadius(),R=S.regionMap,M=S.getValueSpots(),A=S.getSpotColor(),D=S.getMinSpotColor(),F=S.getMaxSpotColor(),L=S.getNormalRangeMin(),O=S.getDrawNormalOnTop();if(S.callParent()&&(S.scanValues(),S.processRangeOptions(),E=S.xvalues,b=S.yvalues,S.yminmax.length&&!(S.yvalues.length<2))){for(n=r=0,e=S.maxx-S.minx==0?1:S.maxx-S.minx,t=S.maxy-S.miny==0?1:S.maxy-S.miny,i=S.yvalues.length-1,I&&(T<4*I||P<4*I)&&(I=0),I&&(((y=S.getHighlightSpotColor()&&!S.disableInteraction)||D||A&&b[i]===S.miny)&&(P-=Math.ceil(I)),(y||F||A&&b[i]===S.maxy)&&(P-=Math.ceil(I),n+=Math.ceil(I)),!y&&(!D&&!F||b[0]!==S.miny&&b[0]!==S.maxy)||(r+=Math.ceil(I),T-=Math.ceil(I)),(y||A||D||F&&(b[i]===S.miny||b[i]===S.maxy))&&(T-=Math.ceil(I))),P--,null==L||O||S.drawNormalRange(r,n,P,T,t),s=[a=[]],h=f=null,g=b.length,C=0;C<g;C++)l=E[C],u=E[C+1],d=b[C],f=(c=r+Math.round((l-S.minx)*(T/e)))+((C<g-1?r+Math.round((u-S.minx)*(T/e)):T)-c)/2,R[C]=[h||0,f,C],h=f,null===d?C&&(null!==b[C-1]&&(a=[],s.push(a)),k.push(null)):(d<S.miny&&(d=S.miny),d>S.maxy&&(d=S.maxy),a.length||a.push([c,n+P]),o=[c,n+Math.round(P-P*((d-this.miny)/t))],a.push(o),k.push(o));for(p=[],m=[],x=s.length,C=0;C<x;C++)(a=s[C]).length&&(S.fillColor&&(a.push([a[a.length-1][0],n+P]),m.push(a.slice(0)),a.pop()),2<a.length&&(a[0]=[a[0][0],a[1][1]]),p.push(a));for(x=m.length,C=0;C<x;C++)w.drawShape(m[C],S.fillColor,S.fillColor).append();for(null!=L&&O&&S.drawNormalRange(r,n,P,T,t),x=p.length,C=0;C<x;C++)w.drawShape(p[C],S.getLineColor(),null,S.getLineWidth()).append();if(I&&M)for(null==M.get&&(M=new Ext.sparkline.RangeMap(M)),C=0;C<g;C++)(v=M.get(b[C]))&&w.drawCircle(r+Math.round((E[C]-S.minx)*(T/e)),n+Math.round(P-P*((b[C]-S.miny)/t)),I,null,v).append();I&&A&&null!=b[i]&&w.drawCircle(r+Math.round((E[E.length-1]-S.minx)*(T/e)),n+Math.round(P-P*((b[i]-S.miny)/t)),I,null,A).append(),S.maxy!==S.minyorg&&(I&&D&&(l=E[Ext.Array.indexOf(b,S.minyorg)],w.drawCircle(r+Math.round((l-S.minx)*(T/e)),n+Math.round(P-P*((S.minyorg-S.miny)/t)),I,null,D).append()),I&&F&&(l=E[Ext.Array.indexOf(b,S.maxyorg)],w.drawCircle(r+Math.round((l-S.minx)*(T/e)),n+Math.round(P-P*((S.maxyorg-S.miny)/t)),I,null,F).append())),S.canvasTop=n,S.currentPageXY&&S.canvasRegion.contains(S.currentPageXY)&&S.updateDisplay(),w.render()}}}),Ext.define("Ext.sparkline.Pie",{extend:"Ext.sparkline.Base",alias:"widget.sparklinepie",config:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000"},tipTpl:'&#9679; {value} ({percent:number("0.0")}%)',applyValues:function(e){return e=Ext.Array.map(Ext.Array.from(e),Number),this.disabled=!(e&&e.length),this.updateConfigChange(),e},onUpdate:function(){var e,t=this.values,i=0;if(this.callParent(arguments),this.shapes={},this.valueShapes={},0<t.length)for(e=t.length;e--;)i+=t[e];this.total=i,this.radius=Math.floor(Math.min(this.getWidth(),this.getHeight())/2)},getRegion:function(e,t){var i=window.devicePixelRatio||1,n=this.canvas.getShapeAt(e*i,t*i);return null!=n&&null!=this.shapes[n]?this.shapes[n]:null},getRegionFields:function(e){var t=this.getSliceColors();return{isNull:null==this.values[e],value:this.values[e],percent:this.values[e]/this.total*100,color:t[e%t.length],offset:e}},renderHighlight:function(e){this.renderSlice(e,!0).append()},renderSlice:function(e,t){var i,n,r,o,a,s=this.canvas,l=this.radius,d=this.getBorderWidth(),u=this.getOffset(),c=2*Math.PI,h=this.values,f=this.total,g=u?2*Math.PI*(u/360):0,p=this.getSliceColors();for(o=h.length,r=0;r<o;r++){if(n=i=g,0<f&&(n=g+c*(h[r]/f)),e===r)return a=p[r%p.length],t&&(a=this.calcHighlightColor(a)),s.drawPieSlice(l,l,l-d,i,n,null,a);g=n}},renderGraph:function(){var e,t,i=this,n=i.canvas,r=i.values,o=i.radius,a=i.getBorderWidth(),s=i.shapes||(i.shapes={}),l=i.valueShapes||(i.valueShapes={});if(i.callParent()){for(a&&n.drawCircle(o,o,Math.floor(o-a/2),i.getBorderColor(),null,a).append(),t=r.length;t--;)r[t]&&(e=i.renderSlice(t).append(),l[t]=e.id,s[e.id]=t);i.currentPageXY&&i.canvasRegion.contains(i.currentPageXY)&&(i.currentRegion=null,i.updateDisplay()),n.render()}}}),Ext.define("Ext.sparkline.TriState",{extend:"Ext.sparkline.BarBase",requires:["Ext.sparkline.RangeMap"],alias:"widget.sparklinetristate",config:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{}},tipTpl:["&#9679; {value:this.states}",{states:function(e){var t=Number(e);return-1===t?"Loss":0===t?"Draw":1===t?"Win":e}}],applyColorMap:function(e){return Ext.isArray(e)?(this.colorMapByIndex=e,this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=e,this.colorMapByValue&&null==this.colorMapByValue.get&&(this.colorMapByValue=new Ext.sparkline.RangeMap(e))),this.updateConfigChange(),e},applyValues:function(e){return e=Ext.Array.map(Ext.Array.from(e),Number),this.disabled=!(e&&e.length),this.updateConfigChange(),e},onUpdate:function(){this.totalBarWidth=this.getBarWidth()+this.getBarSpacing()},getBarWidth:function(){var e=this.values;return this._barWidth||(this.getWidth()-(e.length-1)*this.getBarSpacing())/e.length},getRegion:function(e,t){return Math.floor(e/this.totalBarWidth)},getRegionFields:function(e){return{isNull:null==this.values[e],value:this.values[e],color:this.calcColor(this.values[e],e),offset:e}},calcColor:function(e,t){var i,n=this.values,r=this.colorMapByIndex,o=this.colorMapByValue;return o&&(i=o.get(e))?i:r&&r.length>t?r[t]:n[t]<0?this.getNegBarColor():0<n[t]?this.getPosBarColor():this.getZeroBarColor()},renderRegion:function(e,t){var i,n,r,o,a,s,l=this.values,d=this.canvas;i=d.pixelHeight,r=Math.round(i/2),o=e*this.totalBarWidth,n=l[e]<0?(a=r)-1:0<l[e]?(a=0,r-1):(a=r-1,2),null!=(s=this.calcColor(l[e],e))&&(t&&(s=this.calcHighlightColor(s)),d.drawRect(o,a,this.getBarWidth()-1,n-1,s,s).append())}}),Ext.define("Ext.util.Base64",{singleton:!0,_str:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,n,r,o,a,s,l,d="",u=0;for(l=(e=this._utf8_encode(e)).length;u<l;)r=(t=e.charCodeAt(u++))>>2,o=(3&t)<<4|(i=e.charCodeAt(u++))>>4,a=(15&i)<<2|(n=e.charCodeAt(u++))>>6,s=63&n,isNaN(i)?a=s=64:isNaN(n)&&(s=64),d=d+this._str.charAt(r)+this._str.charAt(o)+this._str.charAt(a)+this._str.charAt(s);return d},decode:function(e){var t,i,n,r,o,a,s,l="",d=0;for(s=(e=e.replace(/[^A-Za-z0-9+=\/]/g,"")).length;d<s;)t=this._str.indexOf(e.charAt(d++))<<2|(r=this._str.indexOf(e.charAt(d++)))>>4,i=(15&r)<<4|(o=this._str.indexOf(e.charAt(d++)))>>2,n=(3&o)<<6|(a=this._str.indexOf(e.charAt(d++))),l+=String.fromCharCode(t),64!==o&&(l+=String.fromCharCode(i)),64!==a&&(l+=String.fromCharCode(n));return l=this._utf8_decode(l)},_utf8_encode:function(e){var t,i,n,r="";for(i=0,n=(e=e.replace(/\r\n/g,"\n")).length;i<n;i++)(t=e.charCodeAt(i))<128?r+=String.fromCharCode(t):(127<t&&t<2048?r+=String.fromCharCode(t>>6|192):(r+=String.fromCharCode(t>>12|224),r+=String.fromCharCode(t>>6&63|128)),r+=String.fromCharCode(63&t|128));return r},_utf8_decode:function(e){for(var t="",i=0,n=0,r=0,o=0,a=e.length;i<a;)(n=e.charCodeAt(i))<128?(t+=String.fromCharCode(n),i++):191<n&&n<224?(o=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&o),i+=2):(o=e.charCodeAt(i+1),r=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&r),i+=3);return t}}),Ext.define("Ext.util.DelimitedValue",{dateFormat:"C",delimiter:"\t",lineBreak:"\n",quote:'"',lineBreakRe:/\r?\n/g,lastLineBreakRe:/(\r?\n|\r)$/,constructor:function(e){e&&Ext.apply(this,e),this.parseREs={},this.quoteREs={}},decode:function(e,t,i){if(!e)return[];var n,r,o,a,s,l=[],d=[l],u=void 0!==i?i:this.quote,c=this.quoteREs;for(n=this.parseREs[t=t||this.delimiter]||new RegExp("(\\"+t+"|\\r?\\n|\\r|^)(?:\\"+u+"([^\\"+u+"]*(?:\\"+u+"\\"+u+"[^\\"+u+"]*)*)\\"+u+"|([^\\"+t+"\\r\\n]*))","gi"),r=c[u]||(c[u]=new RegExp("\\"+u+"\\"+u,"g"));o=n.exec(e);)(a=o[1]).length&&a!==t&&d.push(l=[]),o.index||o[0].charAt(0)!==t||l.push(""),s=o[2]?o[2].replace(r,u):o[3],l.push(s);return d},encode:function(e,t,i){for(var n,r,o,a=t||this.delimiter,s=this.dateFormat,l=void 0!==i?i:this.quote,d=l+l,u=e.length,c=this.lineBreakRe,h=[],f=[];0<u--;){for(o=e[u],f.length=r=o.length;0<r--;)null==(n=o[r])?n="":"string"==typeof n?n&&null!==l&&(-1<n.indexOf(l)?n=l+n.split(l).join(d)+l:(-1<n.indexOf(a)||c.test(n))&&(n=l+n+l)):Ext.isDate(n)?n=Ext.Date.format(n,s):n&&(isNaN(n)||Ext.isArray(n))&&Ext.raise("Cannot serialize "+Ext.typeOf(n)+" into CSV"),f[r]=n;h[u]=f.join(a)}return h.join(this.lineBreak)}}),Ext.define("Ext.util.CSV",{extend:"Ext.util.DelimitedValue",singleton:!0,delimiter:","}),Ext.define("Ext.util.ClickRepeater",{alternateClassName:"Ext.util.TapRepeater",mixins:["Ext.mixin.Observable"],config:{el:null,target:null,disabled:null},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,handler:null,scope:null,constructor:function(e){2===arguments.length&&(this.setEl(e),e=arguments[1]),this.mixins.observable.constructor.call(this,e)},destroy:function(){this.setEl(null),this.callParent()},privates:{fireClick:function(e){this.fireEvent("click",this,e),Ext.callback(this.handler,this.scope,[this,e],0,this.getTarget())},updateDisabled:function(e){e?(this.savedEl=this.getEl(),this.setEl(null)):this.savedEl&&this.setEl(this.savedEl)},updateTarget:function(e){this.setEl(e.el)},updateEl:function(e,t){var i,n=this;t&&(t.selectable(),Ext.undefer(n.timer),n.pressedCls&&t.removeCls(n.pressedCls),Ext.getDoc().un("mouseup",n.handleMouseUp,n),n.elListeners=Ext.destroy(n.elListeners)),e&&(e.unselectable(),i={mousedown:n.handleMouseDown,scope:n,destroyable:!0},(n.preventDefault||n.stopDefault)&&(i.click=n.eventOptions),n.elListeners=e.on(i))},eventOptions:function(e){this.preventDefault&&e.preventDefault(),this.stopDefault&&e.stopEvent()},handleMouseDown:function(e){var t=this,i=t.getEl();Ext.undefer(t.timer),t.pressedCls&&i.addCls(t.pressedCls),t.mousedownTime=Ext.now(),"mouse"===e.pointerType&&i.on("mouseout",t.handleMouseOut,t),Ext.getDoc().on("mouseup",t.handleMouseUp,t),t.fireEvent("mousedown",t,e),t.fireClick(e),t.accelerate&&(t.delay=400),t.timer=Ext.defer(t.click,t.delay||t.interval,t,[e]),t.mousedownPreventDefault&&e.preventDefault(),t.mousedownStopEvent&&e.stopEvent()},click:function(e){this.fireClick(e),this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.now()-this.mousedownTime,400,-390,12e3):this.interval,this,[e])},easeOutExpo:function(e,t,i,n){return e===n?t+i:i*(1-Math.pow(2,-10*e/n))+t},handleMouseOut:function(){var e=this.getEl();Ext.undefer(this.timer),this.pressedCls&&e.removeCls(this.pressedCls),e.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(e){var t=this.getEl();t.un("mouseover",this.handleMouseReturn,this),this.pressedCls&&t.addCls(this.pressedCls),this.click(e)},handleMouseUp:function(e){var t=this,i=t.getEl();Ext.undefer(t.timer),i.un("mouseover",t.handleMouseReturn,t),i.un("mouseout",t.handleMouseOut,t),Ext.getDoc().un("mouseup",t.handleMouseUp,t),t.pressedCls&&i.removeCls(t.pressedCls),t.fireEvent("mouseup",t,e)}}}),Ext.define("Ext.util.Cookies",{singleton:!0,set:function(e,t){var i=arguments,n=i.length,r=2<n?i[2]:null,o=3<n?i[3]:"/",a=4<n?i[4]:null,s=5<n&&i[5];document.cookie=e+"="+escape(t)+(null===r?"":"; expires="+r.toUTCString())+(null===o?"":"; path="+o)+(null===a?"":"; domain="+a)+(!0===s?"; secure":"")},get:function(e){var t,i,n,r=document.cookie.split("; "),o=r.length;for(i=0;i<o;++i)if((t=r[i].split("="))[0]===e)return(n=t[1])?unescape(n):"";return null},clear:function(e,t){this.get(e)&&(t=t||"/",document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+t)}}),Ext.define("Ext.util.ItemCollection",{extend:"Ext.util.MixedCollection",alternateClassName:"Ext.ItemCollection",getKey:function(e){return e.getItemId&&e.getItemId()},has:function(e){return this.map.hasOwnProperty(e.getId())}}),Ext.define("Ext.util.LocalStorage",{id:null,destroyed:!1,lazyKeys:!0,prefix:"",session:!1,_keys:null,_store:null,_users:0,statics:{cache:{},get:function(e){var t,i=this.cache,n={_users:1};return Ext.isString(e)?n.id=e:Ext.apply(n,e),(t=i[n.id])?(!0===t&&Ext.raise('Creating a shared instance of private local store "'+this.id+'".'),++t._users):t=new this(n),t},supported:!0},constructor:function(e){Ext.apply(this,e),this.hasOwnProperty("id")||Ext.raise("No id was provided to the local store."),this._users?Ext.util.LocalStorage.cache[this.id]=this:(Ext.util.LocalStorage.cache[this.id]&&Ext.raise('Cannot create duplicate instance of local store "'+this.id+'". Use Ext.util.LocalStorage.get() to share instances.'),Ext.util.LocalStorage.cache[this.id]=!0),this.init()},init:function(){var e=this.id;!this.prefix&&e&&(this.prefix=e+"-"),this._store=this.session?window.sessionStorage:window.localStorage},destroy:function(){this._users&&Ext.log.warn("LocalStorage(id="+this.id+") destroyed while in use"),delete Ext.util.LocalStorage.cache[this.id],this._store=this._keys=null,this.callParent()},getKeys:function(){var e,t,i=this._store,n=this.prefix,r=this._keys,o=n.length;if(!r)for(this._keys=r=[],e=i.length;e--;)(t=i.key(e)).length>o&&n===t.substring(0,o)&&r.push(t.substring(o));return r},release:function(){--this._users||this.destroy()},save:Ext.emptyFn,clear:function(){var e,t=this._store,i=this.prefix,n=this._keys||this.getKeys();for(e=n.length;e--;)t.removeItem(i+n[e]);n.length=0},key:function(e){var t=this._keys||this.getKeys();return 0<=e&&e<t.length?t[e]:null},getItem:function(e){var t=this.prefix+e;return this._store.getItem(t)},removeItem:function(e){var t=this.prefix+e,i=this._store,n=this._keys,r=i.length;i.removeItem(t),n&&r!==i.length&&(this.lazyKeys?this._keys=null:Ext.Array.remove(n,e))},setItem:function(e,t){var i=this.prefix+e,n=this._store,r=n.length,o=this._keys;n.setItem(i,t),o&&r!==n.length&&o.push(e)}}),Ext.define("Ext.util.Spans",{isSpans:!0,constructor:function(){this.spans=this.spans||[]},clear:function(){return this.spans.length=0,this},add:function(e,t){void 0===t&&("number"==typeof e?t=e+1:(t=e[1],e=e[0]));var i,n,r,o,a,s=this.spans;if((r=this.bisect(e))&&(i=(a=s[r-1])[0],e<=(n=a[1]))){if(t<=n)return!1;e=i,s.splice(--r,1)}return r<(o=this.bisect(t))&&(a=s[o-1],t=Math.max(t,a[1])),o<s.length&&t===(a=s[o])[0]&&(t=a[1],++o),s.splice(r,o-r,[e,t]),!0},contains:function(e,t){void 0===t&&("number"==typeof e?t=e+1:(t=e[1],e=e[0]));var i,n,r=this.spans,o=this.bisect(e),a=!1;return o&&e<(i=r[o-1][1])?a=t<=i:o<r.length&&(a=(n=r[o])[0]<=e&&t<=n[1]),a},each:function(e,t){var i,n,r,o=this.spans,a=o.length;for(i=0;i<a;i++)for(r=(n=o[i])[0];r<n[1];r++)if(!1===e.call(t||this,i))return},intersects:function(e,t){void 0===t&&("number"==typeof e?t=e+1:(t=e[1],e=e[0]));var i=this.spans,n=this.bisect(e),r=!1;return n&&e<i[n-1][1]?r=!0:n<i.length&&(r=i[n][0]<t),r},remove:function(e,t){void 0===t&&("number"==typeof e?t=e+1:(t=e[1],e=e[0]));var i,n,r,o=this.spans,a=this.bisect(e),s=!1;if(a&&e<(r=(n=o[a-1])[1])){if(n[1]=e,t<r)return o.splice(a,0,[t,r]),!0;s=!0}return a<(i=this.bisect(t))&&(s=!0,t<(n=o[i-1])[1]&&(n[0]=t,--i),(i-=a)&&o.splice(a,i)),s},stash:function(){return this.spans.slice()},unstash:function(e){return this.spans=e,this},getCount:function(){var e,t,i=this.spans,n=i.length,r=0;for(e=0;e<n;e++)r+=(t=i[e])[1]-t[0];return r},privates:{bisect:function(e){return Ext.Number.bisectTuples(this.spans,e,0)}}}),Ext.define("Ext.util.TsvDecoder",{extend:"Ext.util.DelimitedValue",alternateClassName:"Ext.util.TSV",delimiter:"\t"},function(e){Ext.util.TSV=new e}),Ext.define("Ext.util.TaskManager",{extend:"Ext.util.TaskRunner",alternateClassName:["Ext.TaskManager"],singleton:!0}),Ext.define("Ext.util.TextMetrics",{requires:["Ext.dom.Element"],statics:{shared:null,measure:function(e,t,i){var n=this.shared||(this.shared=new this(e,i));return n.bind(e),n.setFixedWidth(i||"auto"),n.getSize(t)},destroy:function(){this.shared=Ext.destroy(this.shared)}},constructor:function(e,t){var i=this.measure=Ext.getBody().createChild({"data-sticky":!0,role:"presentation",cls:Ext.baseCSSPrefix+"textmetrics",style:{position:"absolute",left:"-1000px",top:"-1000px",visibility:"hidden"}});e&&this.bind(e),t&&i.setWidth(t)},getSize:function(e){var t,i=this.measure;return i.setHtml(e),t=i.getSize(),i.setHtml(""),t},bind:function(e){this.measure.setStyle((this.el||(this.self.prototype.el=new Ext.dom.Fly)).attach(e).getStyle(["font-size","font-size-adjust","font-style","font-weight","font-family","font-kerning","font-stretch","line-height","text-transform","text-decoration","letter-spacing","word-break"]))},setFixedWidth:function(e){this.measure.setWidth(e)},getWidth:function(e){return this.measure.dom.style.width="auto",this.getSize(e).width},getHeight:function(e){return this.getSize(e).height},destroy:function(){this.el=this.measure=Ext.destroy(this.measure),this.callParent()}},function(){Ext.Element.override({getTextWidth:function(e,t,i){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(e,this.dom.innerHTML,!0)).width,t||0,i||1e6)}})}),Ext.define("Ext.util.paintmonitor.OverflowChange",{extend:"Ext.util.paintmonitor.Abstract",eventName:Ext.browser.is.Firefox?"overflow":"overflowchanged",monitorClass:"overflowchange",onElementPainted:function(e){this.getCallback().apply(this.getScope(),this.getArgs())}}),Ext.define("Ext.util.sizemonitor.OverflowChange",{extend:"Ext.util.sizemonitor.Abstract",constructor:function(e){this.onExpand=this.onExpand.bind(this),this.onShrink=this.onShrink.bind(this),this.callParent(arguments)},getElementConfig:function(){return{reference:"detectorsContainer",classList:[Ext.baseCSSPrefix+"size-monitors","overflowchanged"],children:[{reference:"expandMonitor",className:"expand",children:[{reference:"expandHelper"}]},{reference:"shrinkMonitor",className:"shrink",children:[{reference:"shrinkHelper"}]}]}},bindListeners:function(e){var t=e?"addEventListener":"removeEventListener";this.expandMonitor[t](Ext.browser.is.Firefox?"underflow":"overflowchanged",this.onExpand,!0),this.shrinkMonitor[t](Ext.browser.is.Firefox?"overflow":"overflowchanged",this.onShrink,!0)},onExpand:function(e){this.destroyed||Ext.browser.is.Webkit&&e.horizontalOverflow&&e.verticalOverflow||Ext.TaskQueue.requestRead("refresh",this)},onShrink:function(e){this.destroyed||Ext.browser.is.Webkit&&!e.horizontalOverflow&&!e.verticalOverflow||Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){if(!this.destroying&&!this.destroyed){var e,t=this.expandHelper,i=this.shrinkHelper,n=this.getContentBounds(),r=n.width,o=n.height;t&&!t.destroyed&&((e=t.style).width=r+1+"px",e.height=o+1+"px"),i&&!i.destroyed&&((e=i.style).width=r+"px",e.height=o+"px"),Ext.TaskQueue.requestRead("refresh",this)}},destroy:function(){this.onExpand=this.onShrink=null,this.callParent()}}),Ext.define("Ext.util.translatable.CssPosition",{extend:"Ext.util.translatable.Dom",alias:"translatable.cssposition",doTranslate:function(e,t){var i=this.getElement().dom.style;"number"==typeof e&&(i.left=e+"px"),"number"==typeof t&&(i.top=t+"px")},syncPosition:function(){var e=this.getElement().dom.style;return[this.x=parseFloat(e.left),this.y=parseFloat(e.top)]},destroy:function(){var e=this.getElement().dom.style;e.left=null,e.top=null,this.callParent()}}),Ext.define("Ext.util.translatable.CssTransform",{extend:"Ext.util.translatable.Dom",alias:"translatable.csstransform",isCssTransform:!0,posRegex:/(\d+)px[^\d]*(\d+)px/,doTranslate:function(e,t){this.getElement().translate(e,t)},syncPosition:function(){var e=this.posRegex.exec(this.getElement().dom.style.tranform);return e&&(this.x=parseFloat(e[1]),this.y=parseFloat(e[2])),[this.x,this.y]},destroy:function(){var e=this.getElement();e&&!e.destroyed&&(e.dom.style.webkitTransform=null),this.callParent()}}),Ext.define("Ext.util.translatable.ScrollParent",{extend:"Ext.util.translatable.Dom",alias:"translatable.scrollparent",isScrollParent:!0,applyElement:function(e){var t=Ext.get(e);return t&&(this.parent=t.parent()),t},doTranslate:function(e,t){var i=this.parent;i.setScrollLeft(Math.round(-e)),i.setScrollTop(Math.round(-t))},getPosition:function(){var e=this.position,t=this.parent;return e.x=t.getScrollLeft(),e.y=t.getScrollTop(),e}}),Ext.define(null,{override:"Ext.form.field.Checkbox",compatibility:Ext.isIE8,changeEventName:"propertychange",onChangeEvent:function(e){this.duringSetRawValue||"checked"!==e.browserEvent.propertyName||this.callParent([e])},updateCheckedCls:function(e){var t=this.displayEl;this.callParent([e]),t&&e!==this.lastValue&&t.repaint()}}),Ext.define(null,{override:"Ext.form.field.Radio",compatibility:Ext.isIE8,getSubTplData:function(e){var t=this.callParent([e]);return delete t.checked,t},afterRender:function(){this.callParent(),this.checked&&(this.inputEl.dom.checked=!0)},onChange:function(e,t){this.callSuper([e,t])}}),Ext.define(null,{override:"Ext.scroll.Scroller",compatibility:Ext.isIE8,privates:{doScrollTo:function(e,t,i){var n,r,o,a,s,l,d,u,c=this,h=c.getScrollElement();return h&&!h.destroyed?(r=h.dom,s=t===1/0,((a=e===1/0)||s)&&(n=c.getMaxPosition(),a&&(e=n.x),s&&(t=n.y)),null!==e&&(e=c.convertX(e)),l=i?(o={},null!=t&&(o.scrollTop=t),null!=e&&(o.scrollLeft=e),i=Ext.mergeIf({to:{scrollTop:t,scrollLeft:e}},i),d=new Ext.Deferred,u=i.callback,i.callback=function(){u&&u.call(i.scope||Ext.global,arguments),c.destroyed?d.reject():d.resolve()},h.animate(i),d.promise):(null!=e&&0!==e&&null!=t&&(c.deferDomScroll=!0),null!=t&&(r.scrollTop=t),null!=e&&(r.scrollLeft=e),c.deferDomScroll&&(c.deferDomScroll=!1,r.scrollLeft,r.scrollLeft=e,r.scrollTop,r.scrollTop=t),Ext.Deferred.getCachedResolved()),c.positionDirty=!0):l=Ext.Deferred.getCachedRejected(),l},onDomScroll:function(){this.deferDomScroll||this.callParent()}}}),Ext.define("Ext.Action",{constructor:function(e){this.initialConfig=e,this.itemId=e.itemId=e.itemId||e.id||Ext.id(),this.items=[]},isAction:!0,setText:function(e){this.initialConfig.text=e,this.callEach("setText",[e])},getText:function(){return this.initialConfig.text},setIconCls:function(e){this.initialConfig.iconCls=e,this.callEach("setIconCls",[e])},setGlyph:function(e){this.initialConfig.glyph=e,this.callEach("setGlyph",[e])},getIconCls:function(){return this.initialConfig.iconCls},setDisabled:function(e){this.initialConfig.disabled=e,this.callEach("setDisabled",[e])},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(e){this.initialConfig.hidden=e,this.callEach("setVisible",[!e])},show:function(){this.setHidden(!1)},hide:function(){this.setHidden(!0)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(e,t){this.initialConfig.handler=e,this.initialConfig.scope=t,this.callEach("setHandler",[e,t])},each:function(e,t){Ext.each(this.items,e,t)},callEach:function(e,t){var i,n=this.items,r=0,o=n.length;for(Ext.suspendLayouts();r<o;r++)(i=n[r])[e].apply(i,t);Ext.resumeLayouts(!0)},addComponent:function(e){this.items.push(e),e.on("destroy",this.removeComponent,this)},removeComponent:function(e){Ext.Array.remove(this.items,e)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||Ext.global,arguments)}}),Ext.define("Ext.ElementLoader",{mixins:["Ext.util.Observable"],uses:["Ext.data.Connection","Ext.Ajax"],statics:{Renderer:{Html:function(e,t,i){return e.getTarget().setHtml(t.responseText,!0===i.scripts,i.callback,i.rendererScope),!0}}},url:null,params:null,baseParams:null,autoLoad:!1,target:null,loadMask:!1,ajaxOptions:null,scripts:!1,isLoader:!0,constructor:function(e){var t;this.callParent([e]),this.mixins.observable.constructor.call(this,e),this.setTarget(this.target),this.autoLoad&&(!0===(t=this.autoLoad)&&(t=null),this.load(t))},setTarget:function(e){e=Ext.get(e),this.target&&this.target!==e&&this.abort(),this.target=e},getTarget:function(){return this.target||null},abort:function(){var e=this.active;void 0!==e&&(Ext.Ajax.abort(e.request),e.mask&&this.removeMask(),delete this.active)},removeMask:function(){this.target.unmask()},addMask:function(e){this.target.mask(!0===e?null:e)},load:function(e){if(!this.destroying&&!this.destroyed){this.target||Ext.raise("A valid target is required when loading content for "+this.id),e=Ext.apply({},e);var t=this,i=Ext.isDefined(e.loadMask)?e.loadMask:t.loadMask,n=Ext.apply({},e.params),r=Ext.apply({},e.ajaxOptions),o=e.callback||t.callback,a=e.scope||t.scope||t;Ext.applyIf(r,t.ajaxOptions),Ext.applyIf(e,r),Ext.applyIf(n,t.params),Ext.apply(n,t.baseParams),Ext.applyIf(e,{url:t.url}),e.url||Ext.raise("You must specify the URL from which content should be loaded"),Ext.apply(e,{scope:t,params:n,callback:t.onComplete}),!1!==t.fireEvent("beforeload",t,e)&&(i&&t.addMask(i),t.active={options:e,mask:i,scope:a,callback:o,success:e.success||t.success,failure:e.failure||t.failure,renderer:e.renderer||t.renderer,scripts:Ext.isDefined(e.scripts)?e.scripts:t.scripts},t.active.request=Ext.Ajax.request(e),t.setOptions(t.active,e))}},setOptions:function(e,t){e.rendererScope=t.rendererScope||this.rendererScope||this},onComplete:function(e,t,i){var n,r,o=this,a=o.active;a&&(r=a.scope,n=a.rendererScope,(t=t&&!1!==o.getRenderer(a.renderer).call(n,o,i,a))?(Ext.callback(a.success,r,[o,i,e]),o.fireEvent("load",o,i,e)):(Ext.callback(a.failure,r,[o,i,e]),o.fireEvent("exception",o,i,e)),Ext.callback(a.callback,r,[o,t,i,e]),a.mask&&o.removeMask()),delete o.active},getRenderer:function(e){return Ext.isFunction(e)?e:this.statics().Renderer.Html},startAutoRefresh:function(e,t){var i=this;i.stopAutoRefresh(),i.autoRefresh=Ext.interval(function(){i.load(t)},e)},stopAutoRefresh:function(){Ext.uninterval(this.autoRefresh),this.autoRefresh=null},isAutoRefreshing:function(){return!!this.autoRefresh},destroy:function(){this.stopAutoRefresh(),this.abort(),this.callParent()}}),Ext.define("Ext.ComponentLoader",{extend:"Ext.ElementLoader",statics:{Renderer:{Data:function(e,t,i){var n=!0;try{e.getTarget().update(Ext.decode(t.responseText))}catch(e){n=!1}return n},Component:function(e,t,i){var n=!0,r=e.getTarget(),o=[];r.isContainer||Ext.raise({target:r,msg:"Components can only be loaded into a container"});try{o=Ext.decode(t.responseText)}catch(e){n=!1}return n&&(r.suspendLayouts(),i.removeAll&&r.removeAll(),r.add(o),r.resumeLayouts(!0)),n}}},target:null,loadOnRender:!1,loadMask:!1,renderer:"html",setTarget:function(e){Ext.isString(e)&&(e=Ext.getCmp(e)),this.target&&this.target!==e&&this.abort(),(this.target=e)&&this.loadOnRender&&(e.rendered?this.doLoadOnRender():this.mon(e,"render",this.doLoadOnRender,this))},doLoadOnRender:function(){var e=this.loadOnRender;this.load(Ext.isObject(e)?e:null)},removeMask:function(){this.target.setLoading(!1)},addMask:function(e){this.target.setLoading(e)},setOptions:function(e,t){e.removeAll=Ext.isDefined(t.removeAll)?t.removeAll:this.removeAll,e.rendererScope=t.rendererScope||this.rendererScope||this.target},getRenderer:function(e){var t;if(Ext.isFunction(e))return e;switch(t=this.statics().Renderer,e){case"component":return t.Component;case"data":return t.Data;default:return Ext.ElementLoader.Renderer.Html}}}),Ext.define("Ext.layout.SizeModel",{constructor:function(e){var t,i=this,n=i.self,r=n.sizeModelsArray;Ext.apply(i,e),i[t=i.name]=!0,i.fixed=!(i.auto=i.natural||i.shrinkWrap),r[i.ordinal=r.length]=n[t]=n.sizeModels[t]=i},statics:{sizeModelsArray:[],sizeModels:{}},calculated:!1,configured:!1,constrainedMax:!1,constrainedMin:!1,natural:!1,shrinkWrap:!1,calculatedFromConfigured:!1,calculatedFromNatural:!1,calculatedFromShrinkWrap:!1,names:null},function(){var e,t,i,n,r,o=this,a=o.sizeModelsArray;for(new o({name:"calculated"}),new o({name:"configured",names:{width:"width",height:"height"}}),new o({name:"natural"}),new o({name:"shrinkWrap"}),new o({name:"calculatedFromConfigured",configured:!0,calculatedFrom:!0,names:{width:"width",height:"height"}}),new o({name:"calculatedFromNatural",natural:!0,calculatedFrom:!0}),new o({name:"calculatedFromShrinkWrap",shrinkWrap:!0,calculatedFrom:!0}),new o({name:"constrainedMax",configured:!0,constrained:!0,names:{width:"maxWidth",height:"maxHeight"}}),new o({name:"constrainedMin",configured:!0,constrained:!0,names:{width:"minWidth",height:"minHeight"}}),new o({name:"constrainedDock",configured:!0,constrained:!0,constrainedByMin:!0,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}}),e=0,i=a.length;e<i;++e)for((r=a[e]).pairsByHeightOrdinal=n=[],t=0;t<i;++t)n.push({width:r,height:a[t],ordinal:t})}),Ext.define("Ext.layout.Layout",{mixins:["Ext.mixin.Factoryable"],requires:["Ext.XTemplate","Ext.layout.SizeModel"],uses:["Ext.layout.Context"],factoryConfig:{type:"layout",defaultType:"autocontainer",instanceProp:"isLayout"},isLayout:!0,initialized:!1,running:!1,needsItemSize:!0,setsItemSize:!0,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:!1,$configStrict:!1,constructor:function(e){this.id=Ext.id(null,this.type+"-"),this.initConfig(e),delete this.type,this.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(e){var t,i=this,n=i.context;i.lastWidthModel!==e.widthModel&&(i.lastWidthModel&&(t=!0),i.lastWidthModel=e.widthModel),i.lastHeightModel!==e.heightModel&&(i.lastWidthModel&&(t=!0),i.lastHeightModel=e.heightModel),t&&((n=e.context).clearTriggers(i,!1),n.clearTriggers(i,!0),i.triggerCount=0)},finishedLayout:function(e){this.lastWidthModel=e.widthModel,this.lastHeightModel=e.heightModel,this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(e){return this.autoSizePolicy},isItemBoxParent:function(e){return!1},isItemLayoutRoot:function(e){var t=e.getSizeModel(),i=t.width,n=t.height;return!(!e.componentLayout.lastComponentSize&&(i.calculated||n.calculated))&&(!i.shrinkWrap&&!n.shrinkWrap)},isItemShrinkWrap:function(e){return e.shrinkWrap},isRunning:function(){return!!this.ownerContext},getItemsRenderTree:function(e,t){var i,n,r,o,a=e.length;if(a)for(o=[],i=0;i<a;++i)(n=e[i]).rendered||(t&&void 0!==t[n.id]?r=t[n.id]:(this.configureItem(n),r=n.getRenderTree(),t&&(t[n.id]=r)),r&&o.push(r));return o},finishRender:Ext.emptyFn,finishRenderItems:function(e,t){var i,n,r=t.length;for(i=0;i<r;i++)(n=t[i]).rendering&&n.finishRender(i)},renderChildren:function(){var e=this.getLayoutItems(),t=this.getRenderTarget();this.renderItems(e,t)},renderItems:function(e,t){var i,n=e.length,r=0,o=0;if(n){for(Ext.suspendLayouts();r<n;r++,o++)(i=e[r])&&!i.rendered?this.renderItem(i,t,o):i.ignoreDomPosition?--o:this.isValidParent(i,t,o)?this.configureItem(i):this.moveItem(i,t,o);Ext.resumeLayouts(!0)}},isValidParent:function(e,t,i){var n=t&&t.dom||t,r=this.getItemLayoutEl(e);return!(!r||!n)&&("number"==typeof i?(i=this.getPositionOffset(i),r===n.childNodes[i]):r.parentNode===n)},getItemLayoutEl:function(e){var t,i=e.el?e.el.dom:Ext.getDom(e),n=i.parentNode;return n&&(t=n.className)&&-1!==t.indexOf(Ext.baseCSSPrefix+"resizable-wrap")&&(i=i.parentNode),i},getPositionOffset:function(e){return e},configureItem:function(e){e.ownerLayout=this},renderItem:function(e,t,i){e.rendered||(this.configureItem(e),e.render(t,i))},moveItem:function(e,t,i){var n=Ext.fly(document.activeElement);t=t.dom||t,"number"==typeof i&&(i=t.childNodes[i]),e.el.contains(n)?n.suspendFocusEvents():n=null,t.insertBefore(e.el.dom,i||null),e.container=Ext.get(t),this.configureItem(e),n&&(n.focus(),n.resumeFocusEvents())},onContentChange:function(){return this.owner.updateLayout(),!0},initLayout:function(){this.initialized=!0},setOwner:function(e){this.owner=e},getLayoutItems:function(){return[]},onAdd:function(e){e.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(e){var t,i=e.el,n=this.owner;e.rendered&&(t=[].concat(this.itemCls||[]),n.itemCls&&(t=Ext.Array.push(t,n.itemCls)),t.length&&i.removeCls(t)),delete e.ownerLayout},afterCollapse:function(e,t){t&&this.onContentChange(e)},afterExpand:function(e,t){t&&this.onContentChange(e)},destroy:function(){var e;this.targetCls&&(e=this.getTarget())&&e.removeCls(this.targetCls),this.onDestroy.$emptyFn||this.onDestroy(),this.callParent()},sortWeightedItems:function(e,n){var t,i;for(t=0,i=e.length;t<i;++t)e[t].$i=t;for(Ext.Array.sort(e,function(e,t){var i=t.weight-e.weight;return i||(i=e.$i-t.$i,e[n]&&(i=-i)),i}),t=0;t<i;++t)delete e[t].$i}},function(){this.prototype.sizeModels=this.sizeModels=Ext.layout.SizeModel.sizeModels}),Ext.define("Ext.layout.container.Container",{extend:"Ext.layout.Layout",alternateClassName:"Ext.layout.ContainerLayout",alias:"layout.container",mixins:["Ext.util.ElementContainer"],requires:["Ext.XTemplate"],type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:!0,usesContainerWidth:!0,usesHeight:!0,usesWidth:!0,constructor:function(){this.callParent(arguments),this.mixins.elementCt.constructor.call(this)},destroy:function(){this.mixins.elementCt.destroy.call(this),this.callParent()},beginLayout:function(e){this.callParent(arguments),e.targetContext=e.paddingContext=e.getEl("getTarget",this),this.cacheChildItems(e)},beginLayoutCycle:function(e,t){this.callParent(arguments),t&&(this.usesContainerHeight&&++e.consumersContainerHeight,this.usesContainerWidth&&++e.consumersContainerWidth)},cacheChildItems:function(e){var t,i,n,r,o;if(this.needsItemSize||this.setsItemSize)for(t=e.context,i=e.childItems=[],r=(n=e.visibleItems=this.getVisibleItems()).length,o=0;o<r;++o)i.push(t.getCmp(n[o]))},cacheElements:function(){var e=this.owner;this.attachChildEls(e.el,e)},calculate:function(e){var t=e.props,i=e.el;e.widthModel.shrinkWrap&&isNaN(t.width)&&e.setContentWidth(i.getWidth()),e.heightModel.shrinkWrap&&isNaN(t.height)&&e.setContentHeight(i.getHeight())},configureItem:function(e){var t,i,n=this.itemCls,r=this.owner.itemCls;e.ownerLayout=this,n&&("string"==typeof n?i=[n]:t=!!(i=n)),r&&(t&&(i=Ext.Array.clone(i)),i=Ext.Array.push(i||[],r)),i&&e.addCls(i)},doRenderBody:function(e,t){this.renderItems(e,t),this.renderContent(e,t)},doRenderContainer:function(e,t){var i=t.$comp.layout,n=i.getRenderTpl(),r=i.getRenderData();n.applyOut(r,e)},doRenderItems:function(e,t){var i=t.$layout.getRenderTree();i&&Ext.DomHelper.generateMarkup(i,e)},doRenderTabGuard:function(e,t,i){var n,r=t.$comp;r.tabGuard&&!t.$skipTabGuards&&(n=r.lookupTpl("tabGuardTpl"))&&(t.tabGuard=i,t.tabGuardEl=r.tabGuardElements[i],r.addChildEl(t.tabGuardEl),n.applyOut(t,e),delete t.tabGuard,delete t.tabGuardEl)},finishRender:function(){var e,t;this.callParent(),this.cacheElements(),e=this.getRenderTarget(),t=this.getLayoutItems(),this.finishRenderItems(e,t)},notifyOwner:function(){this._hasTargetWarning||!this.targetCls||this.getTarget().hasCls(this.targetCls)||(this._hasTargetWarning=!0,Ext.log.warn("targetCls is missing. This may mean that getTargetEl() is being overridden but not applyTargetCls(). "+this.owner.id)),this.owner.afterLayout(this)},getContainerSize:function(e,t){var i,n,r,o,a=e.targetContext,s=a.getFrameInfo(),l=e.paddingContext.getPaddingInfo(),d=0,u=0;return e.widthModel.shrinkWrap||(++u,(i="number"==typeof(r=t?a.getDomProp("width"):a.getProp("width")))&&(++d,(r-=s.width+l.width)<0&&(r=0))),e.heightModel.shrinkWrap||(++u,(n="number"==typeof(o=t?a.getDomProp("height"):a.getProp("height")))&&(++d,(o-=s.height+l.height)<0&&(o=0))),{width:r,height:o,needed:u,got:d,gotAll:d===u,gotWidth:i,gotHeight:n}},getPositionOffset:function(e){var t;return this.createsInnerCt||(t=this.owner.itemNodeOffset)&&(e+=t),e},getLayoutItems:function(){var e=this.owner,t=e&&e.items;return t&&t.items||[]},getRenderData:function(){var e=this.owner;return{$comp:e,$layout:this,ownerId:e.id}},getRenderedItems:function(){var e,t,i,n=this.getRenderTarget(),r=this.getLayoutItems(),o=r.length,a=[];for(t=e=0;e<o;e++,t++)if((i=r[e]).rendered){if(i.ignoreDomPosition)--t;else if(!this.isValidParent(i,n,t))continue;a.push(i)}return a},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var e=Ext.XTemplate.getTpl(this,"renderTpl");return e.renderContent||this.owner.setupRenderTpl(e),e},getRenderTree:function(){for(var e,t,i=this.owner.items,n={};t=i.generation,e=this.getItemsRenderTree(this.getLayoutItems(),n),i.generation!==t;);return e},renderChildren:function(){for(var e,t,i=this.owner.items,n=this.getRenderTarget();e=i.generation,t=this.getLayoutItems(),this.renderItems(t,n),i.generation!==e;);},getScrollbarsNeeded:function(e,t,i,n){var r=Ext.scrollbar.size(),o="number"==typeof e,a="number"==typeof t,s=0,l=0;return r.width?(a&&t<n&&(l=2,e-=r.width),o&&e<i&&(s=1,!l&&a&&(t-=r.height)<n&&(l=2)),l+s):0},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var e,t,i,n=this.getRenderTarget(),r=this.getLayoutItems(),o=r.length,a=[];for(t=e=0;e<o;e++,t++)if((i=r[e]).rendered&&!0!==i.hidden&&!i.floated){if(i.ignoreDomPosition)--t;else if(!this.isValidParent(i,n,t))continue;a.push(i)}return a},getMoveAfterIndex:function(e){return this.owner.items.indexOf(e)+1},moveItemBefore:function(e,t){var i,n=this.owner,r=n.items,o=r.indexOf(e);return e===t?e:(t?(i=r.indexOf(t),-1<o&&o<i&&--i):i=r.length,n.insert(i,e))},setupRenderTpl:function(e){e.renderBody=this.doRenderBody,e.renderContainer=this.doRenderContainer,e.renderItems=this.doRenderItems,e.renderTabGuard=this.doRenderTabGuard},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(e){e.liquidLayout||++this.activeItemCount,this.callParent([e])},onRemove:function(e,t){e.liquidLayout||--this.activeItemCount,this.callParent([e,t])}}),Ext.define("Ext.layout.container.Auto",{extend:"Ext.layout.container.Container",alias:["layout.auto","layout.autocontainer"],type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:!1,managePadding:!0,manageOverflow:!1,needsItemSize:!1,setsItemSize:!1,lastOverflowAdjust:{width:0,height:0},outerCtCls:Ext.baseCSSPrefix+"autocontainer-outerCt",innerCtCls:Ext.baseCSSPrefix+"autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(e){this.callParent(arguments),this.initContextItems(e)},beforeLayoutCycle:function(e){var t=this.owner,i=t.inheritedState,n=t.inheritedStateInner;i&&!i.invalid||(i=t.getInherited(),n=t.inheritedStateInner),e.widthModel.shrinkWrap?n.inShrinkWrapTable=!0:delete n.inShrinkWrapTable},beginLayoutCycle:function(e){var t,i,n,r,o,a=this,s=a.outerCt,l=a.lastOuterCtWidth||"",d=a.lastOuterCtHeight||"",u=a.lastOuterCtTableLayout||"",c=e.state;a.callParent(arguments),i=n=r="",e.widthModel.shrinkWrap||(i="100%",o=a.owner.inheritedStateInner,t=a.getOverflowXStyle(e),r=o.inShrinkWrapTable||"auto"===t||"scroll"===t?"":"fixed"),e.heightModel.shrinkWrap||Ext.supports.PercentageHeightOverflowBug||(n="100%"),i===l&&!a.hasOuterCtPxWidth||(s.setStyle("width",i),a.lastOuterCtWidth=i,a.hasOuterCtPxWidth=!1),r!==u&&(s.setStyle("table-layout",r),a.lastOuterCtTableLayout=r),n===d&&!a.hasOuterCtPxHeight||(s.setStyle("height",n),a.lastOuterCtHeight=n,a.hasOuterCtPxHeight=!1),a.hasInnerCtPxHeight&&(a.innerCt.setStyle("height",""),a.hasInnerCtPxHeight=!1),c.overflowAdjust=c.overflowAdjust||a.lastOverflowAdjust},calculate:function(e){var t,i=e.state,n=this.getContainerSize(e,!0);t=i.calculatedItems||(i.calculatedItems=!this.calculateItems||this.calculateItems(e,n)),this.setCtSizeIfNeeded(e,n),t&&e.hasDomProp("containerChildrenSizeDone")&&(this.calculateContentSize(e),n.gotAll)?!this.manageOverflow||e.state.secondPass||this.reserveScrollbar||this.calculateOverflow(e,n):this.done=!1},calculateContentSize:function(e){var t=(e.widthModel.shrinkWrap?1:0)|(e.heightModel.shrinkWrap?2:0),i=1&t||void 0,n=2&t||void 0,r=0,o=e.props;i&&(isNaN(o.contentWidth)?++r:i=void 0),n&&(isNaN(o.contentHeight)?++r:n=void 0),r&&(i&&!e.setContentWidth(this.measureContentWidth(e))&&(this.done=!1),n&&!e.setContentHeight(this.measureContentHeight(e))&&(this.done=!1))},calculateOverflow:function(e){var t,i,n,r,o,a,s;o="auto"===this.getOverflowXStyle(e),a="auto"===this.getOverflowYStyle(e),(o||a)&&(n=Ext.scrollbar.size(),r=0,(s=e.overflowContext.el.dom).scrollWidth>s.clientWidth&&(r|=1),s.scrollHeight>s.clientHeight&&(r|=2),t=a&&2&r?n.width:0,i=o&&1&r?n.height:0,t===this.lastOverflowAdjust.width&&i===this.lastOverflowAdjust.height||(this.done=!1,e.invalidate({state:{overflowAdjust:{width:t,height:i},overflowState:r,secondPass:!0}})))},completeLayout:function(e){this.lastOverflowAdjust=e.state.overflowAdjust},doRenderBody:function(e,t){var i=t.$layout,n=Ext.XTemplate,r=i.beforeBodyTpl,o=i.afterBodyTpl;r&&n.getTpl(i,"beforeBodyTpl").applyOut(t,e),this.renderItems(e,t),this.renderContent(e,t),o&&n.getTpl(i,"afterBodyTpl").applyOut(t,e)},doRenderPadding:function(e,t){var i=t.$layout,n=t.$layout.owner,r=n[n.contentPaddingProperty];i.managePadding&&r&&e.push("padding:",n.unitizeBox(r))},finishedLayout:function(e){var t=this.innerCt;this.callParent(arguments),Ext.isIE8&&t.repaint(),Ext.isOpera&&(t.setStyle("position","relative"),t.dom.scrollWidth,t.setStyle("position",""))},getContainerSize:function(e,t){var i=this.callParent(arguments),n=e.state.overflowAdjust;return n&&(i.width-=n.width,i.height-=n.height),i},getRenderData:function(){var e=this.callParent();return e.innerCtCls=this.innerCtCls,e.outerCtCls=this.outerCtCls,e},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(e){return e.overflowXStyle||(e.overflowXStyle=this.owner.scrollFlags.overflowX||e.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(e){return e.overflowYStyle||(e.overflowYStyle=this.owner.scrollFlags.overflowY||e.overflowContext.getStyle("overflow-y"))},initContextItems:function(e){var t=e.target,i=this.owner.getOverflowEl();e.outerCtContext=e.getEl("outerCt",this),e.innerCtContext=e.getEl("innerCt",this),e.overflowContext=i===e.el?e:e.getEl(i),void 0!==t[t.contentPaddingProperty]&&(e.paddingContext=e.innerCtContext)},initLayout:function(){var e=Ext.scrollbar.width(),t=this.owner;this.callParent(),e&&this.manageOverflow&&!this.hasOwnProperty("lastOverflowAdjust")&&(t.scrollable||this.reserveScrollbar)&&(this.lastOverflowAdjust={width:e,height:0})},measureContentHeight:function(e){var t=this.outerCt.getHeight(),i=e.target;return this.managePadding&&void 0===i[i.contentPaddingProperty]&&(t+=e.targetContext.getPaddingInfo().height),t},measureContentWidth:function(e){var t,i,n,r,o;return this.chromeCellMeasureBug&&"table-cell"===(n=(i=(t=this.innerCt.dom).style).display)&&(i.display="",t.offsetWidth,i.display=n),Ext.isSafari&&((i=(t=this.outerCt.dom).style).display="table-cell",t.offsetWidth,t.style.display=""),r=this.outerCt.getWidth(),o=e.target,this.managePadding&&void 0===o[o.contentPaddingProperty]&&(r+=e.targetContext.getPaddingInfo().width),r},setCtSizeIfNeeded:function(e,t){var i,n,r=t.height,o=e.paddingContext.getPaddingInfo(),a=this.getTarget(),s=this.getOverflowXStyle(e),l="auto"===s||"scroll"===s,d=Ext.scrollbar.size();r&&!e.heightModel.shrinkWrap&&(Ext.supports.PercentageHeightOverflowBug&&(i=!0),Ext.isIE8&&(n=!0),(i||n)&&l&&a.dom.scrollWidth>a.dom.clientWidth&&(r=Math.max(r-d.height,0)),i&&(e.outerCtContext.setProp("height",r+o.height),this.hasOuterCtPxHeight=!0),n&&(e.innerCtContext.setProp("height",r),this.hasInnerCtPxHeight=!0))},setupRenderTpl:function(e){this.callParent(arguments),e.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt}},function(e){var t=Ext.chromeVersion;e.prototype.chromeCellMeasureBug=Ext.isChrome&&26<=t&&t<=34}),Ext.define("Ext.ZIndexManager",{alternateClassName:"Ext.WindowGroup",requires:["Ext.util.SorterCollection","Ext.util.FilterCollection","Ext.GlobalEvents"],statics:{zBase:9e3,activeCounter:0},reflowSuspended:0,constructor:function(e){var t=this;t.id=Ext.id(null,"zindex-mgr-"),t.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(e,t){var i=(e.alwaysOnTop||0)-(t.alwaysOnTop||0);return i=i||e.getActiveCounter()-t.getActiveCounter()}},filters:{filterFn:function(e){return e.isVisible()}}}),t.zIndexStack.addObserver(t),t.front=null,t.sortCount=0,t.globalListeners=Ext.GlobalEvents.on({beforehide:t.onComponentShowHide,show:t.onComponentShowHide,scope:t,destroyable:!0}),e?e.isContainer?(t.resizeListeners=e.on({resize:t.onContainerResize,scope:t,destroyable:!0}),t.zseed=Ext.Number.from(t.rendered?e.getEl().getStyle("zIndex"):void 0,t.getNextZSeed()),t.targetEl=e.getTargetEl(),t.container=e):(t.resizeListeners=Ext.on({resize:t.onContainerResize,scope:t,destroyable:!0}),t.zseed=t.getNextZSeed(),t.targetEl=Ext.get(e)):(t.zseed=t.getNextZSeed(),Ext.onInternalReady(function(){t.resizeListeners=Ext.on({resize:t.scheduleContainerResize,scope:t,destroyable:!0,priority:-1e4}),t.targetEl=Ext.getBody()}))},getId:function(){return this.id},getNextZSeed:function(){return Ext.ZIndexManager.zBase+=1e4},setBase:function(e){return this.zseed=e,this.onCollectionSort()},onCollectionSort:function(){var e,t,i,n,r,o=this,a=o.front,s=o.zseed,l=o.zIndexStack.getRange(),d=l.length,u=!a||a.isVisible();for(o.sortCount++,e=0;e<d;e++)(t=l[e]).destroying||t.destroyed||(s=t.setZIndex(s),t.hidden||((r=t).modal&&(i=t,n=null),u&&t.isFocusable(!0)&&(t.modal||t.focusOnToFront)&&(n=t)));return n&&n!==a&&!n.preventFocusOnActivate&&n.onFocusTopmost(),i?i===o.topModal?o.syncModalMask(i):o.showModalMask(i):o.hideModalMask(),r!==o.topMost&&(o.topMost&&o.topMost.onZIndexChange(!1),r&&r.onZIndexChange(!0)),o.front=n,o.topModal=i,o.topMost=r,!o.front&&o.topMost&&(o.front=o.topMost),s},onComponentUpdate:function(e){!this.reflowSuspended&&this.zIndexStack.contains(e)&&this.zIndexStack.sort()},suspendReflow:function(){this.reflowSuspended++},resumeReflow:function(e){this.reflowSuspended&&!--this.reflowSuspended&&e&&this.zIndexStack.sort()},onComponentReady:function(e){!this.reflowSuspended&&e.toFrontOnShow&&e.isVisible()&&(this.zIndexStack.itemChanged(e,"hidden"),this.zIndexStack.sort())},onComponentShowHide:function(e){var t=this.zIndexStack,i=this.sortCount;e.isFloating()&&!this.hidingAll&&(t.getSource()||t).contains(e)&&(this.tempHidden&&Ext.Array.remove(this.tempHidden,e),t.beginUpdate(),e.isVisible()?e.toFrontOnShow&&(t.itemChanged(e,"hidden"),e.setActiveCounter(++Ext.ZIndexManager.activeCounter)):t.itemChanged(e,"hidden"),t.endUpdate(),this.sortCount!==i||this.reflowSuspended||this.onCollectionSort())},register:function(e){e.zIndexManager&&e.zIndexManager.unregister(e),e.zIndexManager=this,e.rendered||e.on(this.getReadyEvent(e),this.onComponentReady,this,{single:!0}),this.zIndexStack.add(e)},unregister:function(e){delete e.zIndexManager,e.un(this.getReadyEvent(e),this.onComponentReady,this),this.zIndexStack.remove(e),this.onCollectionSort()},get:function(e){return e.isComponent?e:this.zIndexStack.get(e)},bringToFront:function(e,t){var i,n,r=this.zIndexStack,o=r.last();return!!(e=this.get(e))&&(n=e.preventFocusOnActivate,e.preventFocusOnActivate=t,e.setActiveCounter(++Ext.ZIndexManager.activeCounter),e.preventFocusOnActivate=n,(i=r.last())===e&&i!==o)},sendToBack:function(e){return(e=this.get(e))&&e.setActiveCounter(0),e||null},hideAll:function(){var e,t=this.zIndexStack.getRange(),i=t.length;for(this.hidingAll=!0,e=0;e<i;e++)t[e].hide();this.hidingAll=!1,this.hideModalMask(),this.front=null},hide:function(){var e,t,i=Ext.Element.getActiveElement(),n=this.zIndexStack.getRange(),r=n.length;for(this.focusRestoreElement=null,t=(this.tempHidden||(this.tempHidden=[])).length=0;t<r;t++)(e=n[t]).isVisible()&&(e.el.contains(i)&&(this.focusRestoreElement=i),e.el.hide(),e.pendingShow=e.hidden=!0,this.tempHidden.push(e))},show:function(){var e,t,i=this.tempHidden,n=i?i.length:0;for(t=0;t<n;t++)(e=i[t]).hidden=!1,e.pendingShow?(e.el.show(),e.pendingShow=!1,e.setPosition(e.x,e.y),e.onFloatShow()):e.hide();this.tempHidden=null,this.focusRestoreElement&&this.focusRestoreElement.focus()},getActive:function(){return this.zIndexStack.last()},getBy:function(e,t){return this.zIndexStack.filterBy(e,t).getRange()},each:function(e,t){this.zIndexStack.each(e,t)},eachBottomUp:function(e,t){var i,n,r=this.zIndexStack.getRange(),o=r.length;for(n=0;n<o;n++)if((i=r[n]).isComponent&&!1===e.call(t||i,i))return},eachTopDown:function(e,t){var i,n,r=this.zIndexStack.getRange();for(n=r.length;0<n--;)if((i=r[n]).isComponent&&!1===e.call(t||i,i))return},destroy:function(){var e,t=this.zIndexStack.getRange(),i=t.length;for(e=0;e<i;e++)Ext.destroy(t[e]);Ext.destroy(this.mask,this.maskShim,this.zIndexStack,this.globalListeners,this.resizeListeners),this.callParent()},privates:{getMaskBox:function(){var e=this.mask.maskTarget;return e.dom===document.body?{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,Ext.dom.Element.getDocumentWidth()),x:0,y:0}:e.getBox()},getReadyEvent:function(e){return e.liquidLayout?"afterrender":"boxready"},scheduleContainerResize:function(){this.containerResizeTimer||(this.containerResizeTimer=Ext.raf(this.onContainerResize,this))},onContainerResize:function(){var e,t=this.mask,i=this.maskShim;this.containerResizeTimer=null,t&&t.isVisible()&&(t.hide(),i&&i.hide(),e=this.getMaskBox(),i&&(i.setSize(e),i.show()),t.setSize(e),t.show())},onMaskMousedown:function(e){this.topModal&&(this.topModal.focus(),e.preventDefault())},onMaskClick:function(){var e=this.topModal;e&&(e.hasListeners.maskclick&&!1===e.fireEvent("maskclick",e)||e[e.maskClickAction||"focus"]())},showModalMask:function(e){var t=e.el,i=e.floatParent?e.floatParent.getEl():e.container,n=this.mask;n?this.hideModalMask():(this.mask=n=Ext.getBody().createChild({"data-sticky":!0,role:"presentation",cls:Ext.baseCSSPrefix+"mask "+Ext.baseCSSPrefix+"border-box",style:"height:0;width:0"}),n.setVisibilityMode(Ext.Element.DISPLAY),n.on({mousedown:this.onMaskMousedown,click:this.onMaskClick,scope:this})),(n.maskTarget=i).saveTabbableState({excludeRoot:t}),this.syncModalMask(e)},syncModalMask:function(e){var t=e.el.getZIndex()-4,i=this.mask,n=this.maskShim,r=this.getMaskBox();n&&(n.setZIndex(t),n.show(),n.setBox(r)),i.setZIndex(t),i.show(),i.setBox(r)},hideModalMask:function(){var e=this.mask,t=this.maskShim;e&&e.isVisible()&&(e.maskTarget.restoreTabbableState(),e.maskTarget=void 0,e.hide(),t&&t.hide())}}},function(){Ext.WindowManager=Ext.WindowMgr=new this}),Ext.define("Ext.container.Container",{extend:"Ext.Component",xtype:"container",alternateClassName:["Ext.Container","Ext.AbstractContainer"],requires:["Ext.Action","Ext.util.MixedCollection","Ext.layout.container.Auto","Ext.ZIndexManager","Ext.util.ItemCollection"],mixins:["Ext.mixin.Queryable","Ext.mixin.Container","Ext.mixin.FocusableContainer"],renderTpl:"<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'before'); %}</tpl>{% this.renderContainer(out,values) %}<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'after'); %}</tpl>",config:{actions:null},autoDestroy:!0,defaultType:"panel",detachOnRemove:!0,items:void 0,layout:"auto",suspendLayout:!1,tabGuardTpl:'<span id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" aria-hidden="true" class="'+Ext.baseCSSPrefix+"tab-guard "+Ext.baseCSSPrefix+'tab-guard-{tabGuardPosition}" style="width:0px;height:0px;"></span>',tabGuardElements:{before:"tabGuardBeforeEl",after:"tabGuardAfterEl"},_applyDefaultsOptions:{defaults:!0,strict:!1},ariaRole:"presentation",baseCls:Ext.baseCSSPrefix+"container",layoutCounter:0,add:function(){var e,t,i,n,r,o,a,s,l=this,d=Ext.Array.slice(arguments),u="number"==typeof d[0]?d.shift():-1,c=l.getLayout(),h=!1;for(1===d.length&&Ext.isArray(d[0])?(t=d[0],e=!0):t=d,l.rendered&&Ext.suspendLayouts(),a=t=l.prepareItems(t,!0),n=t.length,e||1!==n||(a=t[0]),i=0;i<n;i++)(r=t[i])||Ext.raise("Cannot add null item to Container with itemId/id: "+l.getItemId()),r.destroyed&&Ext.raise("Cannot add destroyed item '"+r.getId()+"' to Container '"+l.getId()+"'"),o=u<0?l.items.length:u+i,s=!!r.instancedCmp,delete r.instancedCmp,r.floating?((l.floatingItems||(l.floatingItems=new Ext.util.ItemCollection)).add(r),r.onAdded(l,o,s),delete r.$initParent,l.hasListeners.add&&l.fireEvent("add",l,r,o)):l.hasListeners.beforeadd&&!1===l.fireEvent("beforeadd",l,r,o)||!1===l.onBeforeAdd(r)||(l.items.insert(o,r),r.onAdded(l,o,s),delete r.$initParent,l.focusableContainer&&l.onFocusableChildAdd(r),l.onAdd(r,o),c.onAdd(r,o),h=!0,l.hasListeners.add&&l.fireEvent("add",l,r,o)),r.isLayoutMoving=!1;return h&&l.updateLayout(),l.rendered&&(n&&l.focusableContainer&&(l.$initFocusableContainerAfterLayout=!0),Ext.resumeLayouts(!0)),a},onAdded:function(e,t,i){this.callParent([e,t,i]),this.containerOnAdded(e,i)},onRemoved:function(e){this.containerOnRemoved(e),this.callParent(arguments)},afterComponentLayout:function(){var e,t,i,n=this.floatingItems;if(this.callParent(arguments),n)for(e=(n=n.items).length,t=0;t<e;t++)!(i=n[t]).rendered&&i.autoShow&&i.show()},afterLayout:function(e){++this.layoutCounter,this.hasListeners.afterlayout&&this.fireEvent("afterlayout",this,e),this.focusableContainer&&this.$initFocusableContainerAfterLayout&&this.initFocusableContainer(),delete this.$initFocusableContainerAfterLayout},doDestroy:function(){var e,t=this,i=t.items,n=t.floatingItems;if(t.focusableContainer&&t.destroyFocusableContainer(),i){for(;e=i.first();)t.doRemove(e,!0);i.destroy(),t.items=null}if(n){for(;e=n.first();)t.doRemove(e,!0);n.destroy(),t.floatingItems=null}Ext.destroy(t.layout),t.callParent()},beforeRender:function(){var e,t=this.getLayout();this.preventChildDisable=!0,this.callParent(),this.preventChildDisable=!1,t.initialized||t.initLayout(),(e=t.targetCls)&&this.applyTargetCls(e)},cascade:function(e,t,i){var n,r=this.items?this.items.items:[],o=r.length,a=0,s=i?i.concat(this):[this],l=s.length-1;if(!1!==e.apply(t||this,s))for(;a<o;a++)(n=r[a]).cascade?n.cascade(e,t,i):(s[l]=n,e.apply(t||n,s));return this},contains:function(t,e){var i=!1;return e?(this.cascade(function(e){if(e.contains&&e.contains(t))return!(i=!0)}),i):this.items.contains(t)||this.floatingItems&&this.floatingItems.contains(t)},disable:function(e,t){var i,n,r,o=this.disabled;if(this.callParent([e,t]),!t&&!this.preventChildDisable&&!o)for(n=(i=this.getChildItemsToDisable()).length,r=0;r<n;r++)i[r].disable(e,!0);return this.focusableContainer&&this.activateFocusableContainer(!1),this},enable:function(e,t){var i,n,r,o=this.disabled;if(this.callParent([e,t]),o)for(n=(i=this.getChildItemsToDisable()).length,r=0;r<n;r++)i[r].enable(e,!0);return this.focusableContainer&&this.activateFocusableContainer(!0),this},getChildByElement:function(e,t){var i,n,r=0,o=this.getRefItems(),a=o.length;for(e=Ext.getDom(e);r<a;r++)if((n=(i=o[r]).getEl())&&(n.dom===e||n.contains(e)))return t&&i.getChildByElement?i.getChildByElement(e,t):i;return null},getComponent:function(e){Ext.isObject(e)&&(e=e.getItemId());var t=this.items.get(e),i=this.floatingItems;return!t&&i&&"number"!=typeof e&&(t=i.get(e)),t},getFocusEl:function(){var e=this.getDefaultFocus();return e||(this.focusable?this.getTargetEl():void 0)},getLayout:function(){var e=this.layout;return e&&e.isLayout||this.setLayout(e),this.layout},getRefItems:function(e){for(var t,i=this.items.items,n=i.length,r=0,o=[];r<n;r++)t=i[r],o[o.length]=t,e&&t.getRefItems&&o.push.apply(o,t.getRefItems(!0));if(this.floatingItems)for(n=(i=this.floatingItems.items).length,r=0;r<n;r++)t=i[r],o[o.length]=t,e&&t.getRefItems&&o.push.apply(o,t.getRefItems(!0));return o},getDefaultFocus:function(){var e,t=this.defaultFocus;return t&&!this.isConfiguring&&(e=this.down(t)),e},setDefaultFocus:function(e){this.defaultFocus=e},initComponent:function(){var e=this;e.callParent(),e.getLayout(),e.constructing=!0,e.initItems(),e.disabled&&(e.disabled=!1,e.disable(!0)),e.reference=e.setupReference(e.reference),delete e.constructing},initItems:function(){var e=this.items;e&&e.isMixedCollection||(this.items=new Ext.util.ItemCollection,e&&(Ext.isArray(e)||(e=[e]),this.$initingItems=!0,this.add(e),delete this.$initingItems))},initInheritedState:function(e,t){var i=this.layout;this.callParent([e,t]),this.collapsed&&(e.collapsed=!0),this.initContainerInheritedState(e,t),i&&i.initInheritedState&&i.initInheritedState(e,t)},insert:function(e,t){var i;return t&&t.isComponent&&-1!==(i=this.items.indexOf(t))?this.move(i,e):this.add(e,t)},lookupComponent:function(e){var t,i=this.defaultType;if(!e.isComponent){if("string"==typeof e){if(!(t="@"===e[0]))return Ext.ComponentManager.get(e);e=this.getAction(e.substr(1)),i=this.defaultActionType||i}e=Ext.ComponentManager.create(e,i),t&&(e.instancedCmp=!0)}return e},move:function(e,t){var i,n=this.items;if(e.isComponent&&(e=n.indexOf(e)),i=n.getAt(e),e!==t){if(!1===(i=n.removeAt(e)))return!1;t=Math.min(t,n.getCount()),n.insert(t,i),this.onMove(i,e,t),this.hasListeners.childmove&&this.fireEvent("childmove",this,i,e,t),this.updateLayout()}return i},moveBefore:function(e,t){var i,n;return e!==t&&(i=Ext.Element.getActiveElement(!0),e.el&&e.el.contains(i)&&((n=i).suspendFocusEvents(),e.isLayoutMoving=!0),e=this.layout.moveItemBefore(e,t),n&&(e.isLayoutMoving=!1,n.focus(),n.resumeFocusEvents())),e},moveAfter:function(e,t){var i,n=this.layout;return e!==t&&(i=t?n.getMoveAfterIndex(t):0,e=this.moveBefore(e,this.items.getAt(i))),e},nextChild:function(e,t){var i,n=this.items,r=n.indexOf(e),o=0,a=n.length;if(-1!==r)if(t)for(;o<a&&((i=n.getAt(r+o))&&!Ext.ComponentQuery.is(i,t));o++);else i=n.getAt(r+1);return i||null},onAdd:Ext.emptyFn,onBeforeAdd:function(e){var t=e.ownerCt;e.isDetached&&e.reattachToBody(),t&&t!==this&&(e.isLayoutMoving=!0,t.remove(e,{destroy:!1,detach:!1}))},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){this.callParent(arguments),this.repositionFloatingItems()},onResize:function(){this.callParent(arguments),this.repositionFloatingItems()},prevChild:function(e,t){var i,n=this.items,r=n.indexOf(e),o=0,a=n.length;if(-1!==r)if(t)for(;o<a&&((i=n.getAt(r-o))&&!Ext.ComponentQuery.is(i,t));o++);else i=n.getAt(r-1);return i||null},remove:function(e,t){var i,n=this;if(!n.destroyed&&!n.destroying)return i=n.getComponent(e),arguments.length||Ext.log.warn("Ext.container.Container: remove takes an argument of the component to remove. cmp.remove() is incorrect usage."),!i||n.hasListeners.beforeremove&&!1===n.fireEvent("beforeremove",n,i)||(n.doRemove(i,t),n.hasListeners.remove&&n.fireEvent("remove",n,i),n.destroying||n.destroyAfterRemoving||i.floating||n.updateLayout(),n.destroyAfterRemoving&&n.destroy()),i},removeAll:function(e){var t,i,n,r=this.floatingItems,o=[],a=0;for(i=(t=r?this.items.items.concat(r.items):this.items.items.slice()).length,Ext.suspendLayouts(),this.removingAll=!0;a<i;a++)n=t[a],this.remove(n,e),n.ownerCt!==this&&o.push(n);return this.removingAll=!1,Ext.resumeLayouts(!!i),o},setLayout:function(e){var t,i=this.layout;e&&("string"==typeof e&&(e={type:e}),t=e.type,i&&(i.isLayout?t&&t!==i.type?i.setOwner(null):(i.setConfig(e),e=i):("string"==typeof i&&(i={type:i}),e=Ext.merge({},i,e))),e&&e.isLayout||(e.owner=this,e=Ext.Factory.layout(e)),e.setOwner(this)),this.layout=e,this.rendered&&this.updateLayout()},setActiveItem:function(e){return this.getLayout().setActiveItem(e)},updateActions:function(e){var t;for(t in e)e[t].isAction||(e[t]=new Ext.Action(e[t]))},getAction:function(e){var t=this;for(t=this;t;t=t.getRefOwner())if(t.actions&&t.actions[e])return t.actions[e]},onShowComplete:function(e,t){this.callParent([e,t]),this.focusableContainer&&this.activateFocusableContainer&&this.activateFocusableContainer()},onFocusEnter:function(e){this.callParent([e]),!this.focusableContainer||this.destroying||this.destroyed||this.mixins.focusablecontainer.onFocusEnter.call(this,e)},onFocusLeave:function(e){this.callParent([e]),!this.focusableContainer||this.destroying||this.destroyed||this.mixins.focusablecontainer.onFocusLeave.call(this,e)},privates:{applyDefaults:function(e){var t=this.defaults;return t&&(Ext.isFunction(t)&&(t=t.call(this,e)),Ext.isString(e)&&(e=Ext.ComponentManager.get(e)),e.isComponent?e.setConfig(t,null,this._applyDefaultsOptions):e=this.self.getConfigurator().merge(this,Ext.Object.fork(t),e)),e},applyTargetCls:function(e){this.layoutTargetCls=e},doRemove:function(e,t){var i,n=this,r=n.layout,o=r&&n.rendered,a=e.floating,s=n.detachOnRemove,l=n.autoDestroy;"boolean"==typeof t?l=t:"object"==typeof t&&(null!=t.destroy&&(l=t.destroy),null!=t.detach&&(s=t.detach)),i=e.destroying||l,a?n.floatingItems.remove(e):n.items.remove(e),o&&!a&&(r.running&&Ext.Component.cancelLayout(e,i),r.onRemove(e,i)),e.destroyed||e.onRemoved(i),!n.focusableContainer||n.destroying||n.destroyed||n.onFocusableChildRemove(e,i),n.onRemove(e,i),l?e.destroy():n.destroyed||(o&&!a&&r.afterRemove(e),s&&e.rendered&&e.detachFromBody())},finishRenderChildren:function(){var e;this.callParent(),(e=this.getLayout())&&e.finishRender()},getChildItemsToDisable:function(){return this.query("[isLabelable],[isFocusableContainer],button")},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},prepareItems:function(e,t){for(var i,n=0,r=(e=Ext.isArray(e)?e.slice():[e]).length;n<r;n++)null==(i=e[n])?(Ext.Array.erase(e,n,1),--n,--r):(t&&(i=this.applyDefaults(i)),i.$initParent=this,i.isComponent&&(i.instancedCmp=!0),e[n]=this.lookupComponent(i),delete i.$initParent);return e},repositionFloatingItems:function(){var e,t,i,n=this.floatingItems;if(n)for(e=(n=n.items).length,t=0;t<e;t++)(i=n[t]).el&&!i.hidden&&i.setPosition(i.x,i.y)},initTabGuards:function(e){var t,i,n,r=this,o=r.tabGuardBeforeEl,a=r.tabGuardAfterEl,s=r.tabGuardBeforeIndex||0,l=r.tabGuardAfterIndex||0;if(r.rendered&&r.tabGuard){if((n=r.el.findTabbableElements({skipSelf:!0}))[0]===o.dom&&n.shift(),n[n.length-1]===a.dom&&n.pop(),n&&n.length){if(null==s||null==l)for(t=0;t<n.length;t++)0<(i=+n[t].getAttribute("tabIndex"))&&(s=Math.min(s,i),l=Math.max(l,i));o.dom.setAttribute("tabIndex",s),a.dom.setAttribute("tabIndex",l)}else o.dom.removeAttribute("tabIndex"),a.dom.removeAttribute("tabIndex");r.onTabGuardFocusEnter&&(o.hasListeners.focusenter||o.on("focusenter",r.onTabGuardFocusEnter,r),a.hasListeners.focusenter||a.on("focusenter",r.onTabGuardFocusEnter,r))}},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){for(var e,t=this.items.items,i=t.length,n=this._noMargin;i--;)(e=t[i]).margin$=null,e.el.setStyle(n)},setupRenderTpl:function(e){this.callParent(arguments),this.getLayout().setupRenderTpl(e)}}}),Ext.define("Ext.layout.container.Editor",{extend:"Ext.layout.container.Container",alias:"layout.editor",autoSizeDefault:{width:"field",height:"field"},sizePolicies:{$:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},boundEl:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1}},boundEl:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},boundEl:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var t=this.owner.autoSize,i=t&&t.width,n=this.sizePolicies;return n=(n=n[i]||n.$)[i=t&&t.height]||n.$},calculate:function(e){var t,i,n=this.owner,r=n.autoSize;!0===r&&(r=this.autoSizeDefault),r&&(t=this.getDimension(n,r.width,"getWidth",n.width),i=this.getDimension(n,r.height,"getHeight",n.height)),e.childItems[0].setSize(t,i),e.setWidth(t),e.setHeight(i),e.setContentSize(t||n.field.getWidth(),i||n.field.getHeight())},getDimension:function(e,t,i,n){switch(t){case"boundEl":return e.boundEl[i]();case"field":return;default:return n}}}),Ext.define("Ext.Editor",{extend:"Ext.container.Container",xtype:"editor",requires:["Ext.layout.container.Editor"],layout:"editor",allowBlur:!0,revertInvalid:!0,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,focusOnToFront:!1,baseCls:Ext.baseCSSPrefix+"editor",editing:!1,preventDefaultAlign:!0,useBoundValue:!0,specialKeyDelay:1,initComponent:function(){var e=this,t=e.field=Ext.ComponentManager.create(e.field||{},"textfield");t.msgTarget=t.msgTarget||"qtip",e.mon(t,{scope:e,specialkey:e.onSpecialKey}),t.grow&&e.mon(t,"autosize",e.onFieldAutosize,e,{delay:1}),e.floating={constrain:e.constrain},e.items=t,e.callParent()},onAdded:function(e){this.ownerCmp=e},onFieldAutosize:function(){this.updateLayout()},afterRender:function(e,t){var i=this.field.inputEl;this.callParent(arguments),i&&(i.dom.name="",this.swallowKeys&&i.swallowEvent(["keypress","keydown"]))},onSpecialKey:function(e,t){var i=this,n=t.getKey(),r=i.completeOnEnter&&n===t.ENTER,o=i.cancelOnEsc&&n===t.ESC,a=i.specialKeyTask;(r||o)&&(t.stopEvent(),a||(i.specialKeyTask=a=new Ext.util.DelayedTask),a.delay(i.specialKeyDelay,r?i.completeEdit:i.cancelEdit,i),0===i.specialKeyDelay&&(a.cancel(),r?i.completeEdit():i.cancelEdit())),i.fireEvent("specialkey",i,e,t)},startEdit:function(e,t,i,n){var r,o,a,s,l=this,d=l.field;n||l.completeEdit(!0),l.boundEl=Ext.get(e),r=l.boundEl.dom,l.useBoundValue&&!Ext.isDefined(t)&&(t=Ext.String.trim(r.textContent||r.innerText||r.innerHTML)),!1!==l.fireEvent("beforestartedit",l,l.boundEl,t)&&(l.context&&(t=l.context.value),Ext.suspendLayouts(),l.rendered||(o=l.ownerCt,a=l.renderTo||o&&o.getEl()||Ext.getBody(),Ext.fly(a).position(),l.renderTo=a),l.startValue=t,l.show(),l.realign(!0),n||(d.suspendEvents(),d.setValue(t),d.resumeEvents()),!1!==i&&(s=!!Ext.isIE,d.focus(!!d.selectOnFocus||[Ext.Number.MAX_32BIT_INTEGER],s)),d.autoSize&&d.autoSize(),Ext.resumeLayouts(!0),l.toggleBoundEl(!1),l.editing=!0)},realign:function(e){!0===e&&this.updateLayout(),this.alignTo(this.boundEl,this.alignment,this.offsets)},completeEdit:function(e){var t,i=this,n=i.field,r=i.startValue,o=i.context&&i.context.cancel;i.editing&&(n.assertValue&&n.assertValue(),t=i.getValue(),n.isValid()?!i.ignoreNoChange||n.didValueChange(t,r)?!1!==i.fireEvent("beforecomplete",i,t,r)&&(t=i.getValue(),i.updateEl&&i.boundEl&&i.boundEl.setHtml(t),i.onEditComplete(e,o),i.fireEvent("complete",i,t,r)):i.onEditComplete(e):!1!==i.revertInvalid&&i.cancelEdit(e))},onShow:function(){this.callParent(arguments),this.fireEvent("startedit",this,this.boundEl,this.startValue)},cancelEdit:function(e){var t,i=this,n=i.startValue,r=i.field;i.editing&&(r&&(t=i.editedValue=i.getValue(),r.suspendEvents(),i.setValue(n),r.resumeEvents()),i.onEditComplete(e,!0),i.fireEvent("canceledit",i,t,n),delete i.editedValue)},onEditComplete:function(e,t){!(this.editing=!1)!==e&&(this.hide(),this.toggleBoundEl(!0))},onFocusLeave:function(e){!0===this.allowBlur&&this.editing&&this.completeEdit(),this.callParent([e])},onHide:function(){var e=this.field;this.editing?this.completeEdit():e.collapse&&e.collapse(),this.callParent(arguments)},getValue:function(){return this.field.getValue()},setValue:function(e){this.field.setValue(e)},toggleBoundEl:function(e){!1!==this.hideEl&&this.boundEl.setVisible(e)},doDestroy:function(){var e=this.specialKeyTask;e&&e.cancel(),Ext.destroy(this.field),this.callParent()}}),Ext.define("Ext.EventManager",{singleton:!0,mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,addListener:function(e,t,i,n,r){Ext.log.warn("Ext.EventManager is deprecated. Use Ext.dom.Element#addListener to attach an event listener."),Ext.get(e).addListener(t,i,n,r)},onWindowResize:function(e,t,i){Ext.log.warn("Ext.EventManager is deprecated. Use Ext.on('resize', fn) to attach a window resize listener."),Ext.GlobalEvents.on("resize",e,t,i)},onWindowUnload:function(e,t,i){Ext.log.warn("Ext.EventManager is deprecated. Use Ext.getWin().on('unload', fn) to attach a window unload listener."),Ext.getWin().on("unload",e,t,i)},purgeElement:function(e,t){Ext.log.warn("Ext.EventManager is deprecated. Call clearListeners() on a Ext.dom.Element to remove all listeners."),Ext.get(e).clearListeners()},removeAll:function(e){Ext.log.warn("Ext.EventManager is deprecated. Call clearListeners() on a Ext.dom.Element to remove all listeners."),Ext.get(e).clearListeners()},removeListener:function(e,t,i,n,r){Ext.log.warn("Ext.EventManager is deprecated. Use Ext.dom.Element#removeListener to remove an event listener."),Ext.get(e).removeListener(t,i,n,r)},removeResizeListener:function(e,t){Ext.log.warn("Ext.EventManager is deprecated. Use Ext.on('resize', fn) to detach a window resize listener."),Ext.GlobalEvents.un("resize",e,t)},removeUnloadListener:function(e,t){Ext.log.warn("Ext.EventManager is deprecated. Use Ext.getWin().un('unload', fn) to detach a window unload listener."),Ext.getWin().un("unload",e,t)},stopEvent:function(e){Ext.log.warn("Ext.EventManager.stopEvent() is deprecated. Call stopEvent() directly on the Ext.event.Event instance instead."),this.stopPropagation(e),this.preventDefault(e)},stopPropagation:function(e){Ext.log.warn("Ext.EventManager.stopPropagation() is deprecated. Call stopPropagation() directly on the Ext.event.Event instance instead."),(e=e.browserEvent||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){if(Ext.log.warn("Ext.EventManager.preventDefault() is deprecated. Call preventDefault() directly on the Ext.event.Event instance instead."),(e=e.browserEvent||e).preventDefault)e.preventDefault();else{e.returnValue=!1;try{(e.ctrlKey||111<e.keyCode&&e.keyCode<124)&&(e.keyCode=-1)}catch(e){}}},getId:function(e){return Ext.log.warn("Ext.EventManager.getId() is deprecated. Call Ext.get() to assign ids to elements."),(e=Ext.get(e)).id},getRelatedTarget:function(e){var t;return Ext.log.warn("Ext.EventManager.getRelatedTarget() is deprecated. Call getRelatedTarget() directly on the Ext.event.Event instance instead."),(t=(e=e.browserEvent||e).relatedTarget)||(this.mouseLeaveRe.test(e.type)?t=e.toElement:this.mouseEnterRe.test(e.type)&&(t=e.fromElement)),this.resolveTextNode(t)},getPageX:function(e){return Ext.log.warn("Ext.EventManager.getPageX() is deprecated. Call getX() directly on the Ext.event.Event instance instead."),this.getPageXY(e)[0]},getPageXY:function(e){Ext.log.warn("Ext.EventManager.getPageXY() is deprecated. Call getXY() directly on the Ext.event.Event instance instead.");var t=(e=e.browserEvent||e).pageX,i=e.pageY,n=document.documentElement,r=document.body;return t||0===t||(t=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),i=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),[t,i]},getPageY:function(e){return Ext.log.warn("Ext.EventManager.getPageY() is deprecated. Call getY() directly on the Ext.event.Event instance instead."),this.getPageXY(e)[1]},getTarget:function(e){return Ext.log.warn("Ext.EventManager.getTarget() is deprecated. Call getTarget() directly on the Ext.event.Event instance instead."),e=e.browserEvent||e,Ext.EventManager.resolveTextNode(e.target||e.srcElement)},resolveTextNode:Ext.isGecko?function(e){var t;if(e&&"[xpconnect wrapped native prototype]"!==(t=HTMLElement.prototype.toString.call(e))&&"[object XULElement]"!==t)return 3===e.nodeType?e.parentNode:e}:function(e){return e&&3===e.nodeType?e.parentNode:e}},function(e){e.on=e.addListener,e.un=e.removeListener}),Ext.define("Ext.Img",{extend:"Ext.Component",alias:["widget.image","widget.imagecomponent"],requires:["Ext.Glyph"],autoEl:"img",baseCls:Ext.baseCSSPrefix+"img",config:{src:null,glyph:null},alt:"",title:"",imgCls:"",maskOnDisable:!1,applySrc:function(e){return e&&Ext.resolveResource(e)},getElConfig:function(){var e,t=this,i=t.autoEl,n=t.callParent(),r=t.glyph;return r?(n.tag="div",n.html=r.character,n.style=n.style||{},n.style.fontFamily=r.fontFamily,n.role="img"):"img"===i||Ext.isObject(i)&&"img"===i.tag?e=n:n.cn=[e={tag:"img",id:t.id+"-img"}],e&&(t.imgCls&&(e.cls=(e.cls?e.cls+" ":"")+t.imgCls),e.src=t.src||Ext.BLANK_IMAGE_URL),t.alt?(e||n).alt=t.alt:((e||n).alt="",Ext.log.warn("For WAI-ARIA compliance, IMG elements SHOULD have an alt attribute.")),t.title&&((e||n).title=t.title),n},onRender:function(){var e,t=this.autoEl;this.callParent(arguments),e=this.el,"img"===t||Ext.isObject(t)&&"img"===t.tag?this.imgEl=e:this.imgEl=e.getById(this.id+"-img")},doDestroy:function(){var e=this.imgEl;e&&this.el!==e&&e.destroy(),this.imgEl=null,this.callParent()},getTitle:function(){return this.title},setTitle:function(e){var t=this.imgEl;this.title=e||"",t&&(t.dom.title=e||"")},afterComponentLayout:function(e,t,i,n){var r,o=this.getSizeModel().height;(o.calculated||o.configured)&&t&&this.glyph&&(r=t+"px",this.setStyle({"line-height":r,"font-size":r})),this.callParent([e,t,i,n])},getAlt:function(){return this.alt},setAlt:function(e){var t=this.imgEl;this.alt=e||"",t&&(t.dom.alt=e||"")},_naturalSize:null,getNaturalSize:function(){var e,t,i,n=this.imgEl,r=this._naturalSize;return n&&!r&&(n=n.dom,this._naturalSize=r={width:t=n.naturalWidth,height:n.naturalHeight},t||(t=(e=n.style).width,i=e.height,e.width=e.height="auto",r.width=n.width,r.height=n.height,e.width=t,e.height=i),r.aspect=r.width/r.height),r},updateSrc:function(e){var t=this.imgEl;t&&(t.dom.src=e||Ext.BLANK_IMAGE_URL)},applyGlyph:function(e,t){return e&&(e.isGlyph||(e=new Ext.Glyph(e)),e.isEqual(t)&&(e=void 0)),e},updateGlyph:function(e,t){var i=this.el;i&&(i.dom.innerHTML=e.character,i.setStyle(e.getStyle()))}}),Ext.define("Ext.util.StoreHolder",{requires:["Ext.data.StoreManager"],mixinId:"storeholder",autoDestroyBoundStore:!1,bindStore:function(e,t,i){var n,r=this;return i=i||"store",e!==(n=t?null:r[i])&&(n&&(r.onUnbindStore.$emptyFn||r.onUnbindStore(n,t,i),n.destroyed||(r.autoDestroyBoundStore&&"store"===i&&n.autoDestroy?n.destroy():r.unbindStoreListeners(n))),e?(r[i]=e=Ext.data.StoreManager.lookup(e),r.bindStoreListeners(e),r.onBindStore.$emptyFn||r.onBindStore(e,n,t)):r[i]=null,r.fireEvent&&r.fireEvent("storechange",r,e,n)),r},getStore:function(){return this.store},setStore:function(e){this.bindStore(e)},unbindStoreListeners:function(e){var t=this.storeListeners;t&&e.un(t)},bindStoreListeners:function(e){var t=this.getStoreListeners(e);t&&((t=Ext.apply({},t)).scope||(t.scope=this),this.storeListeners=t,e.on(t))},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn}),Ext.define("Ext.LoadMask",{extend:"Ext.Component",alias:"widget.loadmask",mixins:["Ext.util.StoreHolder"],uses:["Ext.data.StoreManager"],isLoadMask:!0,msg:"Loading...",msgCls:Ext.baseCSSPrefix+"mask-loading",msgWrapCls:Ext.baseCSSPrefix+"mask-msg",useMsg:!0,useTargetEl:!1,cls:Ext.baseCSSPrefix+"mask",componentCls:Ext.baseCSSPrefix+"border-box",ariaRole:"progressbar",focusable:!0,tabIndex:0,childEls:["msgWrapEl","msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}" role="presentation">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',Ext.baseCSSPrefix,'mask-msg-inner {childElCls}" role="presentation">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',Ext.baseCSSPrefix,"mask-msg-text",'{childElCls}" role="presentation">{msg}</div>',"</div>","</div>"],maskOnDisable:!1,skipLayout:!0,constructor:function(e){var t,i=this;2===arguments.length?(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.LoadMask: LoadMask now uses a standard 1 arg constructor: use the target config"),t=i.target=e,e=arguments[1]):t=e.target,e.maskCls&&(Ext.log.warn("Ext.LoadMask property maskCls is deprecated, use msgWrapCls instead"),e.msgWrapCls=e.msgWrapCls||e.maskCls),i.callParent([e]),t.isComponent?(i.ownerCt=t,i.hidden=!0,i.renderTo=i.getMaskTarget(),i.external=i.renderTo===Ext.getBody(),i.bindComponent(t)):(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.LoadMask: LoadMask for elements has been deprecated, use Ext.dom.Element.mask & Ext.dom.Element.unmask"),t=Ext.get(t),i.isElement=!0,i.renderTo=i.target),i.render(i.renderTo),i.store&&i.bindStore(i.store,!0)},initRenderData:function(){var e=this.callParent(arguments);return e.msg=this.msg||"",e},onRender:function(){this.callParent(arguments),this.maskEl=this.el},bindComponent:function(e){var t=this,i={scope:this,resize:t.sizeMask};t.external&&(i.added=t.onComponentAdded,i.removed=t.onComponentRemoved,e.floating?(i.move=t.sizeMask,t.activeOwner=e):e.ownerCt&&t.onComponentAdded(e.ownerCt)),t.mon(e,i),t.external&&t.mon(Ext.GlobalEvents,{show:t.onContainerShow,hide:t.onContainerHide,expand:t.onContainerExpand,collapse:t.onContainerCollapse,scope:t})},onComponentAdded:function(e){var t=this;delete t.activeOwner,(t.floatParent=e).floating||(e=e.up("[floating]")),e?(t.activeOwner=e,t.mon(e,"move",t.sizeMask,t),t.mon(e,"tofront",t.onOwnerToFront,t)):t.preventBringToFront=!0,e=t.floatParent.ownerCt,t.rendered&&t.isVisible()&&e&&(t.floatOwner=e,t.mon(e,"afterlayout",t.sizeMask,t,{single:!0}))},onComponentRemoved:function(e){var t=this,i=t.activeOwner,n=t.floatOwner;i&&(t.mun(i,"move",t.sizeMask,t),t.mun(i,"tofront",t.onOwnerToFront,t)),n&&t.mun(n,"afterlayout",t.sizeMask,t),delete t.activeOwner,delete t.floatOwner},afterRender:function(){this.callParent(arguments),Ext.isIE&&this.el.on("mousedown",this.onMouseDown,this),this.el.skipGarbageCollection=!0},onMouseDown:function(e){var t=this.el;e.within(t)&&(e.preventDefault(),t.focus())},onOwnerToFront:function(e,t){this.el.setStyle("zIndex",t+1)},onContainerShow:function(e){this.isHierarchicallyHidden()||this.onComponentShow()},onContainerHide:function(e){this.isHierarchicallyHidden()&&this.onComponentHide()},onContainerExpand:function(e){this.isHierarchicallyHidden()||this.onComponentShow()},onContainerCollapse:function(e){this.isHierarchicallyHidden()&&this.onComponentHide()},onComponentHide:function(){this.rendered&&this.isVisible()&&(this.hide(),this.showNext=!0)},onComponentShow:function(){this.showNext&&this.show(),delete this.showNext},sizeMask:function(){var e,t=this,i=t.activeOwner||t.target,n=t.external?t.getOwner().el:t.getMaskTarget();t.rendered&&t.isVisible()&&(t.external&&(!t.isElement&&i.floating&&(e=i.el.getZIndex(),isNaN(e)||t.onOwnerToFront(i,e)),t.el.setSize(n.getSize()).alignTo(n,"tl-tl")),t.msgWrapEl.center(t.el))},bindStore:function(e,t){if(Ext.destroy(this.proxyListeners),this.mixins.storeholder.bindStore.apply(this,arguments),e=this.store){for(;e.getSource;)e=e.getSource();e.loadsSynchronously()||(this.proxyListeners=e.getProxy().on({exception:this.onLoad,scope:this,destroyable:!0})),e.isLoading()&&this.onBeforeLoad()}},getStoreListeners:function(e){var t=this.onLoad,i=this.onBeforeLoad,n={cachemiss:i,cachefilled:{fn:t,buffer:100}};return e.loadsSynchronously()||(n.beforeload=i,n.load=t),n},onDisable:function(){this.callParent(arguments),this.loading&&this.onLoad()},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var e=this.getOwner();return this.isElement?this.target:this.useTargetEl?e.getTargetEl():e.getMaskTarget()||Ext.getBody()},onBeforeLoad:function(){var e,t=this,i=t.getOwner();t.disabled||(t.loading=!0,i.componentLayoutCounter?t.maybeShow():(e=i.afterComponentLayout,i.afterComponentLayout=function(){(i.afterComponentLayout=e).apply(i,arguments),t.maybeShow()}))},maybeShow:function(){var e=this.getOwner();e.isVisible(!0)&&(!this.isComponent||e.el.isVisible(!0))?this.loading&&e.rendered&&this.show():this.showNext=!0},hide:function(){var e=this.ownerCt;return this.target.removeCls(Ext.baseCSSPrefix+"masked"),this.isElement?(e.unmask(),void this.fireEvent("hide",this)):(e&&e.updateMaskState(!1,this),delete this.showNext,this.callParent(arguments))},show:function(){return this.target.addCls(Ext.baseCSSPrefix+"masked"),this.isElement?(this.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls),void this.fireEvent("show",this)):this.callParent(arguments)},afterShow:function(){var e=this.ownerCt;this.loading=!0,this.callParent(arguments),e.updateMaskState(!0,this),this.el.restoreTabbableState(),this.syncMaskState()},syncMaskState:function(){var e=this,t=e.ownerCt,i=e.el;e.isVisible()&&(e.hasOwnProperty("msgWrapCls")&&(i.dom.className=e.msgWrapCls),e.useMsg?(e.msgTextEl.setHtml(e.msg),e.ariaEl.dom.setAttribute("aria-valuetext",e.msg)):e.msgWrapEl.hide(),e.shim||Ext.useShims?i.enableShim(null,!0):i.disableShim(),t.el.contains(Ext.Element.getActiveElement())&&e.focus(),e.sizeMask())},onLoad:function(){this.loading=!1,this.hide()},doDestroy:function(){this.ownerCt=null,this.bindStore(null),this.isElement&&this.ownerCt.unmask(),this.callParent()}}),Ext.define("Ext.layout.component.Component",{extend:"Ext.layout.Layout",type:"component",isComponentLayout:!0,nullBox:{},usesContentHeight:!0,usesContentWidth:!0,usesHeight:!0,usesWidth:!0,widthCache:{},heightCache:{},beginLayoutCycle:function(e,t){var i,n,r,o,a,s=this.owner,l=e.ownerCtContext,d=e.heightModel,u=e.widthModel,c=s.el.dom===document.body,h=s.lastBox||this.nullBox,f=s.el.lastBox||this.nullBox,g=!c,p=e.isTopLevel;this.callParent([e,t]),t&&((a=s.getScrollable&&s.getScrollable())&&a.flushOnDomScrollEnd(),this.usesContentWidth&&++e.consumersContentWidth,this.usesContentHeight&&++e.consumersContentHeight,this.usesWidth&&++e.consumersWidth,this.usesHeight&&++e.consumersHeight,l&&!l.hasRawContent&&(i=s.ownerLayout)&&(i.usesWidth&&++e.consumersWidth,i.usesHeight&&++e.consumersHeight)),u.configured?(r=s[u.names.width],p&&u.calculatedFrom&&(r=h.width),c||(g=this.setWidthInDom||(t?r!==f.width:u.constrained)),e.setWidth(r,g)):p&&(u.calculated?(n=h.width,e.setWidth(n,n!==f.width)):u.calculatedFromNatural&&(s.el.dom.style.width=s.width),n=h.x,e.setProp("x",n,n!==f.x)),d.configured?(o=s[d.names.height],p&&d.calculatedFrom&&(o=h.height),c||(g=t?o!==f.height:d.constrained),e.setHeight(o,g)):p&&(d.calculated?(n=h.height,e.setHeight(n,n!==f.height)):d.calculatedFromNatural&&(s.el.dom.style.height=s.height),n=h.y,e.setProp("y",n,n!==f.y))},finishedLayout:function(e){var t,i,n,r,o,a=e.children,s=this.owner;if(a)for(t=a.length,i=0;i<t;i++)(n=a[i]).el.lastBox=n.props;e.previousSize=this.lastComponentSize,this.lastComponentSize=s.el.lastBox=o=e.props,(r=s.lastBox||(s.lastBox={})).x=o.x,r.y=o.y,r.width=o.width,r.height=o.height,r.invalid=!1,this.callParent([e])},notifyOwner:function(e){var t=this.lastComponentSize,i=e.previousSize;this.owner.afterComponentLayout(t.width,t.height,i?i.width:void 0,i?i.height:void 0)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(e){var t,i=this.targetInfo;return i||(t=e.getEl("getTarget",this),this.targetInfo=i={padding:t.getPaddingInfo(),border:t.getBorderInfo()}),i},measureAutoDimensions:function(e,t){var i,n,r,o,a,s,l,d,u=this.owner,c=u.layout,h=e.heightModel,f=e.widthModel,g=e.boxParent,p=e.isBoxParent,m=e.target,x=e.props,y={gotWidth:!1,gotHeight:!1,isContainer:i=!e.hasRawContent},v=t||3,E=0,b=0;return f.shrinkWrap&&e.consumersContentWidth?(++E,n=!(1&v),i?n?(y.contentWidth=0,y.gotWidth=!0,++b):void 0!==(y.contentWidth=e.getProp("contentWidth"))&&(y.gotWidth=!0,++b):"number"==typeof(o=x.contentWidth)?(y.contentWidth=o,y.gotWidth=!0,++b):(n||!!e.hasDomProp("containerChildrenSizeDone")&&(!(!p&&g&&!g.widthModel.shrinkWrap)||g.hasDomProp("width")))&&(a=n?0:c&&c.measureContentWidth?c.measureContentWidth(e):m.cacheWidth?(s=m.xtype+"-"+m.ui,(l=this.widthCache)[s]||(l[s]=this.measureContentWidth(e))):this.measureContentWidth(e),isNaN(y.contentWidth=a)||(e.setContentWidth(a,!0),y.gotWidth=!0,++b))):f.natural&&e.consumersWidth&&(++E,"number"==typeof(o=x.width)?(y.width=o,y.gotWidth=!0,++b):(!(!p&&g)||g.hasDomProp("width"))&&(isNaN(y.width=this.measureOwnerWidth(e))||(d=!(!m.minWidth&&!m.maxWidth||"number"==typeof m.width),e.setWidth(y.width,d),y.gotWidth=!0,++b))),h.shrinkWrap&&e.consumersContentHeight?(++E,r=!(2&v),i?r?(y.contentHeight=0,y.gotHeight=!0,++b):void 0!==(y.contentHeight=e.getProp("contentHeight"))&&(y.gotHeight=!0,++b):"number"==typeof(o=x.contentHeight)?(y.contentHeight=o,y.gotHeight=!0,++b):(r||!!e.hasDomProp("containerChildrenSizeDone")&&(!!u.noWrap||(f.shrinkWrap?!(!p&&g&&!g.widthModel.shrinkWrap)||g.hasDomProp("width"):(e.bodyContext||e).hasDomProp("width"))))&&(a=r?0:c&&c.measureContentHeight?c.measureContentHeight(e):m.cacheHeight?(s=m.xtype+"-"+m.ui,(l=this.heightCache)[s]||(l[s]=this.measureContentHeight(e))):this.measureContentHeight(e),isNaN(y.contentHeight=a)||(e.setContentHeight(a,!0),y.gotHeight=!0,++b))):h.natural&&e.consumersHeight&&(++E,"number"==typeof(o=x.height)?(y.height=o,y.gotHeight=!0,++b):(!(!p&&g)||g.hasDomProp("width"))&&(isNaN(y.height=this.measureOwnerHeight(e))||(d=!(!m.minHeight&&!m.maxHeight||"number"==typeof m.height),e.setHeight(y.height,d),y.gotHeight=!0,++b))),g&&e.onBoxMeasured(),y.gotAll=b===E,y},measureContentWidth:function(e){return e.el.getWidth()-e.getFrameInfo().width},measureContentHeight:function(e){return e.el.getHeight()-e.getFrameInfo().height},measureOwnerHeight:function(e){return e.el.getHeight()},measureOwnerWidth:function(e){return e.el.getWidth()}}),Ext.define("Ext.layout.component.Auto",{alias:"layout.autocomponent",extend:"Ext.layout.component.Component",type:"autocomponent",setHeightInDom:!1,setWidthInDom:!1,waitForOuterHeightInDom:!1,waitForOuterWidthInDom:!1,beginLayoutCycle:function(e,t){var i=this.lastWidthModel,n=this.lastHeightModel,r=this.owner.el;this.callParent(arguments),i&&i.fixed&&e.widthModel.shrinkWrap&&r.setWidth(null),n&&n.fixed&&e.heightModel.shrinkWrap&&r.setHeight(null)},calculate:function(e){var t,i,n=this,r=n.measureAutoDimensions(e),o=e.heightModel,a=e.widthModel;r.gotWidth?a.shrinkWrap?n.publishOwnerWidth(e,r.contentWidth):n.publishInnerWidth&&n.publishInnerWidth(e,r.width):!a.auto&&n.publishInnerWidth&&(void 0===(t=n.waitForOuterWidthInDom?e.getDomProp("width"):e.getProp("width"))?n.done=!1:n.publishInnerWidth(e,t)),r.gotHeight?o.shrinkWrap?n.publishOwnerHeight(e,r.contentHeight):n.publishInnerHeight&&n.publishInnerHeight(e,r.height):!o.auto&&n.publishInnerHeight&&(void 0===(i=n.waitForOuterHeightInDom?e.getDomProp("height"):e.getProp("height"))?n.done=!1:n.publishInnerHeight(e,i)),r.gotAll||(n.done=!1)},calculateOwnerHeightFromContentHeight:function(e,t){return t+e.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(e,t){return t+e.getFrameInfo().width},publishOwnerHeight:function(e,t){var i,n,r,o=this.owner,a=this.calculateOwnerHeightFromContentHeight(e,t);isNaN(a)?this.done=!1:((i=Ext.Number.constrain(a,o.minHeight,o.maxHeight))===a?n=this.setHeightInDom:(r=this.sizeModels[i<a?"constrainedMax":"constrainedMin"],a=i,e.heightModel.calculatedFromShrinkWrap?e.heightModel=r:e.invalidate({heightModel:r})),e.setHeight(a,n))},publishOwnerWidth:function(e,t){var i,n,r,o=this.owner,a=this.calculateOwnerWidthFromContentWidth(e,t);isNaN(a)?this.done=!1:((i=Ext.Number.constrain(a,o.minWidth,o.maxWidth))===a?n=this.setWidthInDom:(r=this.sizeModels[i<a?"constrainedMax":"constrainedMin"],a=i,e.widthModel.calculatedFromShrinkWrap?e.widthModel=r:e.invalidate({widthModel:r})),e.setWidth(a,n))}}),Ext.define("Ext.layout.component.ProgressBar",{extend:"Ext.layout.component.Auto",alias:"layout.progressbar",type:"progressbar",beginLayout:function(e){var t,i;if(this.callParent(arguments),!e.textEls)if((i=this.owner.textEl).isComposite)for(e.textEls=[],t=(i=i.elements).length;t--;)e.textEls[t]=e.getEl(Ext.get(i[t]));else e.textEls=[e.getEl("textEl")]},calculate:function(e){var t,i,n;if(this.callParent(arguments),Ext.isNumber(n=e.getProp("width")))for(n-=e.getBorderInfo().width,t=(i=e.textEls).length;t--;)i[t].setWidth(n);else this.done=!1}}),Ext.define("Ext.ProgressBar",{extend:"Ext.Component",xtype:"progressbar",mixins:["Ext.ProgressBase"],requires:["Ext.Template","Ext.CompositeElement","Ext.TaskManager","Ext.layout.component.ProgressBar"],uses:["Ext.fx.Anim"],baseCls:Ext.baseCSSPrefix+"progress",animate:!1,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back" role="presentation">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text" role="presentation">','<div role="presentation">{text}</div>',"</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",focusable:!0,tabIndex:0,autoEl:{"aria-valuemin":"0","aria-valuenow":"0","aria-valuemax":"100"},initRenderData:function(){var e,t=this.value||0;return e=this.callParent(),Ext.apply(e,{internalText:!this.hasOwnProperty("textEl"),text:this.text||Math.round(100*t)+"%",percentage:100*t})},onRender:function(){this.callParent(arguments),this.textEl?(this.textEl=Ext.get(this.textEl),this.updateText(this.text)):this.textEl=this.el.select("."+this.baseCls+"-text")},afterRender:function(){this.callParent(arguments),this.text&&this.ariaEl.dom.setAttribute("aria-valuetext",this.text)},updateValue:function(e){this.updateProgress(e)},updateProgress:function(e,t,i){var n=this,r=n.value,o=n.getTextTpl();return e=e||0,n.value=e=e||0,null!=t?(n.autoText=!1,n.updateText(t)):o?(n.autoText=!1,n.updateText(o.apply({value:e,percent:100*e}))):n.text||!1===n.autoText?n.text&&n.ariaEl.dom&&n.ariaEl.dom.removeAttribute("aria-valuetext"):(n.autoText=!0,n.updateText(Math.round(100*e)+"%")),n.rendered&&!n.destroyed&&(!0===i||!1!==i&&n.animate?(n.bar.stopAnimation(),n.bar.animate(Ext.apply({from:{width:100*r+"%"},to:{width:100*e+"%"}},n.animate))):n.bar.setStyle("width",100*e+"%"),n.ariaEl.dom.setAttribute("aria-valuenow",Math.round(100*e))),n.fireEvent("update",n,e,t),n},updateText:function(e){return this.autoText||(this.text=e),this.rendered&&(this.textEl.setHtml(e),this.autoText?this.ariaEl.dom.removeAttribute("aria-valuetext"):this.ariaEl.dom.setAttribute("aria-valuetext",e)),this},applyText:function(e){this.updateText(e)},getText:function(){return this.text},wait:function(i){var e,n=this;return n.waitTimer||(e=n,null!=(i=i||{}).text&&(n.autoText=!1),n.updateText(i.text),n.waitTimer=Ext.TaskManager.start({run:function(e){var t=i.increment||10;--e,n.updateProgress(100/t*((e+t)%t+1)*.01,null,i.animate)},interval:i.interval||1e3,duration:i.duration,onStop:function(){i.fn&&i.fn.apply(i.scope||n),n.reset()},scope:e})),n},isWaiting:function(){return null!==this.waitTimer},reset:function(e){return this.updateProgress(0),this.clearTimer(),!0===e&&this.hide(),this.rendered&&this.ariaEl.dom.removeAttribute("aria-valuetext"),this},clearTimer:function(){this.waitTimer&&(this.waitTimer.onStop=null,Ext.TaskManager.stop(this.waitTimer),this.waitTimer=null)},doDestroy:function(){var e,t,i,n=this.bar;if(this.clearTimer(),this.rendered){if(this.textEl.isComposite)for(t=0,i=(e=this.textEl.slice()).length;t<i;t++)Ext.get(e[t]).destroy();Ext.destroyMembers(this,"textEl","progressBar"),n&&this.animate&&n.stopAnimation()}this.callParent()}}),Ext.define("Ext.dom.ButtonElement",{extend:"Ext.dom.Element",setSize:function(e,t,i){var n=this.component;return this.callParent([e,t,i]),n.btnWrap.setStyle("table-layout",e&&"auto"!==e?"fixed":""),n.btnEl.setStyle("height",t&&"auto"!==t?"auto":""),this},setStyle:function(e,t){var i,n,r=this.component;return this.callParent([e,t]),e&&(("width"===e||"string"!=typeof e&&"width"in e)&&(i=t||e.width,r.btnWrap.setStyle("table-layout",i&&"auto"!==i?"fixed":"")),("height"===e||"string"!=typeof e&&"height"in e)&&(n=t||e.height,r.btnEl.setStyle("height",n&&"auto"!==n?"auto":""))),this},setHeight:function(e,t){return this.callParent([e,t]),this.component.btnEl.setStyle("height",e&&"auto"!==e?"auto":""),this},setWidth:function(e,t){return this.callParent([e,t]),this.component.btnWrap.setStyle("table-layout",e&&"auto"!==e?"fixed":""),this}}),Ext.define("Ext.button.Manager",{singleton:!0,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,init:function(){this.initialized||(Ext.getDoc().on({mouseup:this.onDocumentMouseUp,scope:this}),this.initialized=!0)},onButtonMousedown:function(e,t){var i=this.pressedButton;!i||i.destroying||i.destroyed||i.onMouseUp(t),this.pressedButton=e},onDocumentMouseUp:function(e){var t=this.pressedButton;!t||t.destroying||t.destroyed||(t.onMouseUp(e),this.pressedButton=null)},toggleGroup:function(e,t){var i,n,r;if(t)for(n=0,r=(i=this.groups[e.toggleGroup]).length;n<r;n++)i[n]!==e&&i[n].toggle(!1)},register:function(e){var t=this.groups,i=t[e.toggleGroup];this.init(),e.toggleGroup&&((i=i||(t[e.toggleGroup]=[])).push(e),e.on("toggle",this.toggleGroup,this))},unregister:function(e){if(e.toggleGroup){var t=this.groups[e.toggleGroup];t&&(Ext.Array.remove(t,e),e.un("toggle",this.toggleGroup,this))}},getPressed:function(e){var t,i=this.groups[e],n=0;if(i)for(t=i.length;n<t;n++)if(!0===i[n].pressed)return i[n];return null}}),Ext.define("Ext.menu.Manager",{singleton:!0,alternateClassName:"Ext.menu.MenuMgr",uses:["Ext.menu.Menu"],groups:{},visible:[],constructor:function(){var e=this;e.onShow=function(){return e.registerGlobalListeners(),e.onShow.apply(e,arguments)}},onGlobalScroll:function(e){var t,i,n=this.visible,r=n.length,o=e.getElement();if(r&&e!==Ext.scroll.Scroller.viewport)for(n=n.slice(),t=0;t<r;++t)(i=n[t]).alignOnScroll||!1===i.hideOnScroll||i.owns(o)||i.hide()},checkActiveMenus:function(e){var t,i,n=this.visible,r=n.length,o=Ext.Component.from(e);if(r)for(n=n.slice(),t=0;t<r;++t)(i=n[t]).owns(e)||o&&o.isMenuItem&&o.getMenu()===i||i.hide()},onShow:function(e){e.floating&&Ext.Array.include(this.visible,e)},onHide:function(e){e.floating&&Ext.Array.remove(this.visible,e)},hideAll:function(){var e,t=this.visible,i=t.length,n=!1;if(i)for(t=t.slice(),e=0;e<i;e++)t[e].hide(),n=!0;return n},get:function(e,t){var i;return"string"==typeof e?(i=Ext.getCmp(e))instanceof Ext.menu.Menu&&(e=i):Ext.isArray(e)?(t=Ext.apply({items:e},t),e=new Ext.menu.Menu(t)):e.isComponent||(t=Ext.apply({},e,t),e=Ext.ComponentManager.create(t,"menu")),e},registerCheckable:function(e){var t=this.groups,i=e.group;i&&(t[i]||(t[i]=[]),t[i].push(e))},unregisterCheckable:function(e){var t=this.groups,i=e.group;i&&Ext.Array.remove(t[i],e)},onCheckChange:function(e,t){var i,n,r,o=this.groups,a=e.group,s=0;if(a&&t)for(n=(i=o[a]).length;s<n;s++)(r=i[s])!==e&&r.setChecked(!1)},registerGlobalListeners:function(){delete this.onShow,Ext.on({mousedown:this.checkActiveMenus,scroll:this.onGlobalScroll,scope:this})}}),Ext.define("Ext.button.Button",{alias:"widget.button",extend:"Ext.Component",requires:["Ext.dom.ButtonElement","Ext.button.Manager","Ext.menu.Manager","Ext.util.ClickRepeater","Ext.util.TextMetrics","Ext.Glyph"],mixins:["Ext.mixin.Queryable"],alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:!0,glyph:null},isButton:!0,_syncFrameHeight:!0,liquidLayout:!0,hidden:!1,disabled:!1,pressed:!1,tabIndex:0,enableToggle:!1,menuAlign:"tl-bl?",showEmptyMenu:!1,clickEvent:"click",preventDefault:!0,handleMouseEvents:!0,tooltipType:"qtip",baseCls:Ext.baseCSSPrefix+"btn",hrefTarget:"_blank",destroyMenu:!0,focusable:!0,ariaRole:"button",keyMap:{scope:"this",SPACE:"onEnterKey",ENTER:"onEnterKey",DOWN:"onDownKey"},defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl","arrowEl","tooltipEl"],publishes:{pressed:1},_btnWrapCls:Ext.baseCSSPrefix+"btn-wrap",_btnCls:Ext.baseCSSPrefix+"btn-button",_baseIconCls:Ext.baseCSSPrefix+"btn-icon-el",_glyphCls:Ext.baseCSSPrefix+"btn-glyph",_innerCls:Ext.baseCSSPrefix+"btn-inner",_textCls:Ext.baseCSSPrefix+"btn-text",_noTextCls:Ext.baseCSSPrefix+"btn-no-text",_hasIconCls:Ext.baseCSSPrefix+"btn-icon",_pressedCls:Ext.baseCSSPrefix+"btn-pressed",_tooltipCls:Ext.baseCSSPrefix+"btn-tooltip",overCls:Ext.baseCSSPrefix+"btn-over",_disabledCls:Ext.baseCSSPrefix+"btn-disabled",_menuActiveCls:Ext.baseCSSPrefix+"btn-menu-active",_arrowElCls:Ext.baseCSSPrefix+"btn-arrow-el",_focusCls:Ext.baseCSSPrefix+"btn-focus",_arrowFocusCls:Ext.baseCSSPrefix+"arrow-focus",_arrowOverCls:Ext.baseCSSPrefix+"arrow-over",_arrowPressedCls:Ext.baseCSSPrefix+"arrow-pressed",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl><tpl if="split"><span id="{id}-arrowEl" class="{arrowElCls}" data-ref="arrowEl" role="button" hidefocus="on" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="arrowElAttributes"> {$}="{.}"</tpl> style="{arrowElStyle}">{arrowElText}</span></tpl><div id="{id}-tooltipEl" data-ref="tooltipEl" role="presentation" class="{tooltipCls}"></div>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph"><tpl if="glyphFontFamily">font-family:{glyphFontFamily};</tpl>">{glyph}<tpl else>"></tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:!1,shrinkWrap:3,frame:!0,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){this.disabled||this.doNavigate()},doNavigate:function(){"_blank"===this.hrefTarget?window.open(this.getHref(),this.hrefTarget):location.href=this.getHref()},_triggerRegion:{},initComponent:function(){var e=this;!e.isSplitButton&&e.menu&&((e.enableToggle||e.toggleGroup)&&Ext.ariaWarn(e,"According to WAI-ARIA 1.0 Authoring guide (http://www.w3.org/TR/wai-aria-practices/#menubutton), menu button '"+e.id+"' behavior will conflict with toggling."),e.href&&Ext.ariaWarn(e,"According to WAI-ARIA 1.0 Authoring guide (http://www.w3.org/TR/wai-aria-practices/#menubutton), menu button '"+e.id+"' cannot behave as a link."),(e.handler||e.hasListeners.hasOwnProperty("click"))&&Ext.ariaWarn(e,"According to WAI-ARIA 1.0 Authoring guide (http://www.w3.org/TR/wai-aria-practices/#menubutton), menu button '"+e.id+"' should display the menu on SPACE and ENTER keys, which will conflict with the button handler.")),e.addCls(Ext.baseCSSPrefix+"unselectable"),e.callParent(),e.menu&&(e.split=!0,e.setMenu(e.menu,!1,!0)),e.url&&(e.href=e.url),e.configuredWithPreventDefault=e.hasOwnProperty("preventDefault"),e.href&&!e.configuredWithPreventDefault&&(e.preventDefault=!1),Ext.isString(e.toggleGroup)&&""!==e.toggleGroup&&(e.enableToggle=!0),e.html&&!e.text&&(e.text=e.html,delete e.html)},getElConfig:function(){var e=this,t=e.callParent(),i=e.getHref(),n=e.hrefTarget;return"a"===t.tag&&(e.disabled||(t.tabIndex=e.tabIndex),i&&(e.disabled||(t.href=i,n&&(t.target=n)))),e.ariaStaticRoles[e.ariaRole]||(e.menu&&!e.isSplitButton&&(t["aria-haspopup"]=!0),e.enableToggle&&(t["aria-pressed"]=!!e.pressed)),t},beforeRender:function(){this.callParent(),this.pressed&&this.addCls(this._pressedCls)},initRenderData:function(){return Ext.apply(this.callParent(),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(e,t,i){var n,r,o=this,a=o.menu,s=o.isSplitButton?o.arrowEl&&o.arrowEl.dom:o.ariaEl.dom;a&&!i&&(!1!==t&&o.destroyMenu&&a.destroy(),a.ownerCmp=null),e?(n=e.isMenu,(e=Ext.menu.Manager.get(e,{ownerCmp:o})).setOwnerCmp(o,n),e.menuClickBuffer=250,o.mon(e,{scope:o,show:o.onMenuShow,hide:o.onMenuHide}),!a&&o.getArrowVisible()&&(o.split=!0,o.rendered&&(o._addSplitCls(),o.updateLayout())),o.menu=e,s?(s.setAttribute("aria-haspopup",!0),s.setAttribute("aria-owns",e.id)):((r=o.isSplitButton?o.ariaArrowElAttributes||(o.ariaArrowElAttributes={}):o.ariaRenderAttributes||(o.ariaRenderAttributes={}))["aria-haspopup"]=!0,r["aria-owns"]=e.id)):(o.rendered?(s.removeAttribute("aria-haspopup"),s.removeAttribute("aria-owns"),o._removeSplitCls(),o.updateLayout()):(r=o.isSplitButton?o.ariaArrowElAttributes:o.ariaRenderAttributes)&&(delete r["aria-haspopup"],delete r["aria-owns"]),o.split=!1,o.menu=null)},onRender:function(){var e,t,i,n=this;n.callParent(arguments),t=n.el,n.tooltip&&n.setTooltip(n.tooltip,!0),n.handleMouseEvents?(i={scope:n,mouseover:n.onMouseOver,mouseout:n.onMouseOut,mousedown:n.onMouseDown},n.split&&(i.mousemove=n.onMouseMove)):i={scope:n},Ext.supports.Touch&&(i.touchstart=n.onTouchStart),n.repeat?n.mon(new Ext.util.ClickRepeater(t,Ext.isObject(n.repeat)?n.repeat:{}),"click",n.onRepeatClick,n):i[n.clickEvent]?e=!0:i[n.clickEvent]=n.onClick,n.mon(t,i),n.hasFrameTable()&&n.mon(n.frameTable,"click",n.frameTableListener,n),e&&n.mon(t,n.clickEvent,n.onClick,n),Ext.button.Manager.register(n)},onFocusLeave:function(e){this.callParent([e]),this.menu&&this.menu.hide()},getTemplateArgs:function(){var e,t=this,i=t._btnCls,n=t._baseIconCls,r=t.getIconAlign(),o=t.glyph,a=t.text,s=t._hasIcon(),l=t._hasIconCls;return o&&(e=o.fontFamily,o=o.character),{split:t.isSplitButton,innerCls:t._innerCls,splitCls:t.getArrowVisible()?t.getSplitCls():"",tooltipCls:t._tooltipCls,iconUrl:t.icon,iconCls:t.iconCls,glyph:o,glyphCls:o?t._glyphCls:"",glyphFontFamily:e,text:a||"&#160;",closeText:t.closeText,textCls:a?t._textCls:"",noTextCls:a?"":t._noTextCls,hasIconCls:s?l:"",btnWrapCls:t._btnWrapCls,btnWrapStyle:t.width?"table-layout:fixed;":"",btnElStyle:t.height?"height:auto;":"",btnCls:i,baseIconCls:n,iconBeforeText:"left"===r||"top"===r,iconAlignCls:s?l+"-"+r:"",textAlignCls:i+"-"+t.getTextAlign(),arrowElCls:t._arrowElCls,arrowElStyle:t.arrowVisible?"":"display:none",tabIndex:t.tabIndex}},renderIcon:function(e){return this.lookupTpl("iconTpl").apply(e)},setHref:function(e){var t,i=this.hrefTarget;this.href=e,this.configuredWithPreventDefault||(this.preventDefault=!e),this.rendered&&(t=this.el.dom,!e||this.disabled?(t.removeAttribute("href"),t.removeAttribute("hrefTarget")):(t.href=this.getHref(),i&&(t.target=i)))},getHref:function(){var e=this.href;return!!e&&Ext.urlAppend(e,Ext.Object.toQueryString(Ext.apply({},this.params,this.baseParams)))},setParams:function(e){var t;this.params=e,this.rendered&&(t=this.el.dom,this.disabled?t.removeAttribute("href"):t.href=this.getHref()||"")},getSplitCls:function(){return this.split?this.baseCls+"-"+this.arrowCls+" "+this.baseCls+"-"+this.arrowCls+"-"+this.arrowAlign:""},setIcon:function(e){var t=this,i=t.btnIconEl,n=t.icon||"";return e=e||"",t.glyph&&t.setGlyph(null),(t.icon=e)!==n&&(i&&(i.removeCls(t.iconCls),i.setStyle("background-image",e?"url("+e+")":""),t._syncHasIconCls(),t.didIconStateChange(n,e)&&t.updateLayout()),t.fireEvent("iconchange",t,n,e)),t},setIconCls:function(e){var t=this,i=t.btnIconEl,n=t.iconCls||"";return e=e||"",t.glyph&&t.setGlyph(null),n!==(t.iconCls=e)&&(i&&(i.setStyle("background-image",""),i.removeCls(n),i.addCls(e),t._syncHasIconCls(),t.didIconStateChange(n,e)&&t.updateLayout()),t.fireEvent("iconchange",t,n,e)),t},applyGlyph:function(e,t){return e&&(e.isGlyph||(e=new Ext.Glyph(e)),e.isEqual(t)&&(e=void 0)),e},updateGlyph:function(e,t){var i=this.btnIconEl,n=this._glyphCls;return i&&(this.icon=null,i.setStyle("background-image",""),e?(i.dom.innerHTML=e.character,i.addCls(n),i.setStyle(e.getStyle())):(i.dom.innerHTML="",i.removeCls(n)),this._syncHasIconCls(),this.didIconStateChange(t,e)&&this.updateLayout()),this.fireEvent("glyphchange",this,e&&e.glyphConfig,t&&t.glyphConfig),this},setTooltip:function(e,t){var i=this,n=i.el;return i.rendered?(t&&e||i.clearTip(),i.disabled&&(n=i.tooltipEl),e&&(Ext.quickTipsActive&&Ext.isObject(e)?(Ext.tip.QuickTipManager.register(Ext.apply({target:n.id},e)),i.tooltip=e):n.dom.setAttribute(i.getTipAttr(),e),i.currentTooltipEl=n)):i.tooltip=e,i},updateIconAlign:function(e,t){var i,n,r;this.rendered&&(i=this.btnEl,n=this.btnIconEl,r=this._hasIconCls,t&&i.removeCls(r+"-"+t),i.addCls(r+"-"+e),"top"===e||"left"===e?i.insertFirst(n):i.appendChild(n),this.updateLayout())},updateTextAlign:function(e,t){var i=this.btnEl,n=this._btnCls;this.rendered&&(i.removeCls(n+"-"+t),i.addCls(n+"-"+e))},getTipAttr:function(){return"qtip"===this.tooltipType?"data-qtip":"title"},getRefItems:function(e){var t=this.menu,i=[];return t&&(e&&(i=t.getRefItems(e)),i.unshift(t)),i},clearTip:function(){var e=this.currentTooltipEl;e&&(this.currentTooltipEl=null,Ext.quickTipsActive&&Ext.isObject(this.tooltip)?Ext.tip.QuickTipManager.unregister(e):e.dom.removeAttribute(this.getTipAttr()))},doDestroy:function(){var e=this,t=e.menu;e.deferFocusTimer&&(Ext.undefer(e.deferFocusTimer),e.deferFocusTimer=null),e.rendered&&e.clearTip(),Ext.destroy(e.repeater),t&&e.destroyMenu&&(e.menu=Ext.destroy(t)),Ext.button.Manager.unregister(e),e.callParent()},setHandler:function(e,t){return this.handler=e,1<arguments.length&&(this.scope=t),this},updateText:function(e,t){var i=this.btnInnerEl,n=this.btnEl;e=null==e?"":String(e),t=t||"",this.rendered&&(i.setHtml(e||"&#160;"),n[e?"addCls":"removeCls"](this._textCls),n[e?"removeCls":"addCls"](this._noTextCls),this.updateLayout()),this.fireEvent("textchange",this,t,e)},didIconStateChange:function(e,t){var i=Ext.isEmpty(t);return Ext.isEmpty(e)?!i:i},click:function(e){return this.onClick(e)},setPressed:function(e){return this.toggle(!1!==e)},toggle:function(e,t){var i=this,n=i.ariaEl.dom;return i.enableToggle&&(e=void 0===e?!i.pressed:!!e,!1!==i.fireEvent("beforetoggle",i,e)&&e!==i.pressed&&(i[e?"addCls":"removeCls"](i._pressedCls),i.pressed=e,n&&n.setAttribute("aria-pressed",e),t||(i.fireEvent("toggle",i,e),Ext.callback(i.toggleHandler,i.scope,[i,e],0,i),i.publishState&&i.publishState("pressed",e)))),i},maybeShowMenu:function(e){this.menu&&this.showMenu(e)},showMenu:function(e){var t=this.menu,i=!e||e.pointerType;return t&&this.rendered&&(this.tooltip&&Ext.quickTipsActive&&"title"!==this.getTipAttr()&&Ext.tip.QuickTipManager.getQuickTip().cancelShow(this.el),t.isVisible()?i?t.hide():t.focus():(!e||this.showEmptyMenu||0<t.items.getCount())&&(t.autoFocus=!i,t.showBy(this.el,this.menuAlign))),this},hideMenu:function(){return this.hasVisibleMenu()&&this.menu.hide(),this},hasVisibleMenu:function(){var e=this.menu;return e&&e.rendered&&e.isVisible()},onRepeatClick:function(e,t){this.onClick(t)},onTouchStart:function(e){this.disabled&&this.doPreventDefault(e)},onEnterKey:function(e){if(!this.href)return this.onClick(e),e.stopEvent(),!1},onClick:function(e){e&&this.doPreventDefault(e),e&&"keydown"!==e.type&&e.button||this.disabled||(this.doToggle(),this.maybeShowMenu(e),this.fireHandler(e))},doToggle:function(){!1===this.allowDepress&&this.pressed||this.toggle()},doPreventDefault:function(e){e&&(this.preventDefault||this.disabled&&this.getHref())&&e.preventDefault()},fireHandler:function(e){!1===this.fireEvent("click",this,e)||this.destroyed||Ext.callback(this.handler,this.scope,[this,e],0,this)},onMouseOver:function(e){this.disabled||e.within(this.el,!0,!0)||this.onMouseEnter(e)},onMouseOut:function(e){e.within(this.el,!0,!0)||(this.overMenuTrigger&&this.onMenuTriggerOut(e),this.onMouseLeave(e))},onMouseMove:function(e){var t=this.overMenuTrigger;this.split&&(this.isWithinTrigger(e)?t||this.onMenuTriggerOver(e):t&&this.onMenuTriggerOut(e))},isWithinTrigger:function(e){var t,i,n=this.el;return(t="right"===this.arrowAlign?e.getX()-this.getX():e.getY()-n.getY())>(i=this.getTriggerRegion()).begin&&t<i.end},getTriggerRegion:function(){var e=this._triggerRegion,t="right"===this.arrowAlign,i=t?"getRight":"getBottom",n=t?this.getWidth():this.getHeight();return e.begin=n-(this.el[i]()-this.btnEl[i]()),e.end=n,e},onMouseEnter:function(e){this.fireEvent("mouseover",this,e)},onMouseLeave:function(e){this.fireEvent("mouseout",this,e)},onMenuTriggerOver:function(e){var t=this.arrowTooltip;this.overMenuTrigger=!0,this.split&&t&&this.btnWrap.dom.setAttribute(this.getTipAttr(),t),this.fireEvent("menutriggerover",this,this.menu,e)},onMenuTriggerOut:function(e){delete this.overMenuTrigger,this.split&&this.arrowTooltip&&this.btnWrap.dom.setAttribute(this.getTipAttr(),""),this.fireEvent("menutriggerout",this,this.menu,e)},onEnable:function(){var e=this,t=e.href,i=e.hrefTarget,n=e.el.dom;e.callParent(),e.removeCls(e._disabledCls),e.el.setTabIndex(e.tabIndex),e.tooltip&&e.setTooltip(e.tooltip),t&&(n.href=t),i&&(n.target=i)},onDisable:function(){var e=this,t=e.el.dom;e.callParent(),e.addCls(e._disabledCls),e.removeCls(e.overCls),e.el.setTabIndex(null),e.tooltip&&e.setTooltip(e.tooltip),e.href&&t.removeAttribute("href"),e.hrefTarget&&t.removeAttribute("target")},setScale:function(e){var t=this.ui.replace("-"+this.scale,"");if(!Ext.Array.contains(this.allowedScales,e))throw new Error("#setScale: scale must be an allowed scale ("+this.allowedScales.join(", ")+")");this.scale=e,this.setUI(t)},setUI:function(e){this.scale&&!e.match(this.scale)&&(e=e+"-"+this.scale),this.callParent([e])},onMouseDown:function(t){var i,n=this;(Ext.isIE||Ext.isEdge||"touch"===t.pointerType)&&(n.deferFocusTimer&&Ext.undefer(n.deferFocusTimer),i=Ext.Element.getActiveElement(),n.deferFocusTimer=Ext.defer(function(){var e;n.deferFocusTimer=null,n.destroying||n.destroyed||Ext.Element.getActiveElement()!==i||!n.canFocus()||(e=n.getFocusEl())&&!t.defaultPrevented&&e.focus()},1)),n.disabled||0!==t.button||(Ext.button.Manager.onButtonMousedown(n,t),n.removeCls(n._arrowPressedCls),n.addCls(n._pressedCls))},onMouseUp:function(e){this.destroyed||0!==e.button||this.pressed||this.removeCls(this._pressedCls)},onMenuShow:function(){this.addCls(this._menuActiveCls),this.fireEvent("menushow",this,this.menu)},onMenuHide:function(e){this.removeCls(this._menuActiveCls),this.fireEvent("menuhide",this,this.menu)},onDownKey:function(e){if(this.menu&&!this.disabled)return this.showMenu(e),e.stopEvent(),!1},updateArrowVisible:function(e){return this.rendered&&(e?(this.menu||this.isSplitButton)&&(this.split=!0,this._addSplitCls()):(this._removeSplitCls(),this.split=!1)),e},privates:{elClsMap:{btnWrap:"_btnWrapCls",btnEl:"_btnCls",btnIconEl:"_baseIconCls",btnInnerEl:"_innerCls"},addUIToElement:function(){this.callParent(),this.updateChildElsUICls(!0)},addOverCls:function(){this.disabled||this.addCls(this.overCls)},_addSplitCls:function(){this.btnWrap.addCls(this.getSplitCls())},getTdCls:function(){return Ext.baseCSSPrefix+"button-"+this.ui+"-"+this.scale+"-cell"},getValue:function(){return this.value},removeUIFromElement:function(){this.callParent(),this.updateChildElsUICls(!1)},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){this.btnWrap.removeCls(this.getSplitCls())},_syncHasIconCls:function(){var e=this.btnEl,t=this._hasIconCls;e&&e[this._hasIcon()?"addCls":"removeCls"]([t,t+"-"+this.iconAlign])},_hasIcon:function(){return!!(this.icon||this.iconCls||this.glyph)},updateChildElsUICls:function(e){var t,i,n,r=this.ui,o=e?"addCls":"removeCls",a=this.elClsMap;for(t in a)i=this[t],n=this[a[t]],i&&n&&i[o](n+"-"+r)},wrapPrimaryEl:function(e){this.el=new Ext.dom.ButtonElement(e),this.callParent([e])}}}),Ext.define("Ext.button.Split",{extend:"Ext.button.Button",alternateClassName:"Ext.SplitButton",alias:"widget.splitbutton",isSplitButton:!0,separateArrowStyling:!1,arrowCls:"split",split:!0,componentCls:Ext.baseCSSPrefix+"split-button",initComponent:function(){this.menu&&(this.arrowHandler||this.hasListeners.hasOwnProperty("arrowclick"))&&Ext.ariaWarn(this,"Using both menu and arrowHandler config options in Split buttons leads to confusing user experience and conflicts with accessibility best practices. See WAI-ARIA 1.0 Authoring guide: http://www.w3.org/TR/wai-aria-practices/#menubutton"),this.callParent()},getTemplateArgs:function(){var e,t;return t=this.callParent(),this.disabled&&(t.tabIndex=null),(e=this.ariaArrowElAttributes||{})["aria-hidden"]=!!this.hidden,e["aria-disabled"]=!!this.disabled,this.arrowTooltip?e["aria-label"]=this.arrowTooltip:e["aria-labelledby"]=this.id,t.arrowElAttributes=e,t},onRender:function(){var e,t=this;t.callParent(),(e=t.getFocusEl())&&e.on({scope:t,focus:t.onMainElFocus,blur:t.onMainElBlur}),(e=t.arrowEl)&&(e.dom.setAttribute("data-componentid",t.id),e.setVisibilityMode(Ext.dom.Element.DISPLAY),e.on({scope:t,focus:t.onArrowElFocus,blur:t.onArrowElBlur}))},setArrowHandler:function(e,t){this.arrowHandler=e,this.scope=t},onMouseDown:function(e){this.separateArrowStyling&&!this.disabled&&0===e.button&&this.isWithinTrigger(e)?(e.preventDefault(),this.arrowEl.focus(),Ext.button.Manager.onButtonMousedown(this,e),this.addCls(this._arrowPressedCls)):this.callParent([e])},onMouseUp:function(e){this.separateArrowStyling&&!this.destroyed&&0===e.button&&this.isWithinTrigger(e)?this.removeCls(this._arrowPressedCls):this.callParent([e])},onMenuTriggerOver:function(e){this.separateArrowStyling&&!this.disabled&&this.addCls(this._arrowOverCls),this.callParent([e])},onMenuTriggerOut:function(e){this.separateArrowStyling&&!this.disabled&&this.removeCls(this._arrowOverCls),this.callParent([e])},onClick:function(e){var t=this,i="keydown"===e.type&&e.target===t.arrowEl.dom;t.doPreventDefault(e),t.disabled||(i||t.isWithinTrigger(e)?(e.preventDefault(),t.maybeShowMenu(e),t.fireEvent("arrowclick",t,e),t.arrowHandler&&t.arrowHandler.call(t.scope||t,t,e)):(t.doToggle(),t.fireHandler(e)))},enable:function(e){var t=this.arrowEl;this.callParent([e]),t&&(t.dom.setAttribute("tabIndex",this.tabIndex),t.dom.setAttribute("aria-disabled","false"))},disable:function(e){var t=this.arrowEl;this.callParent([e]),t&&(t.dom.removeAttribute("tabIndex"),t.dom.setAttribute("aria-disabled","true"))},afterHide:function(e,t){this.callParent([e,t]),this.arrowEl.dom.setAttribute("aria-hidden","true")},afterShow:function(e,t,i){this.callParent([e,t,i]),this.arrowEl.dom.setAttribute("aria-hidden","false")},privates:{isFocusing:function(e){var t=e.fromElement,i=e.toElement,n=this.focusEl&&this.focusEl.dom,r=this.arrowEl&&this.arrowEl.dom;return!!this.focusable&&(i===n?t!==r:i!==r||t!==n)},isBlurring:function(e){var t=e.fromElement,i=e.toElement,n=this.focusEl&&this.focusEl.dom,r=this.arrowEl&&this.arrowEl.dom;return!!this.focusable&&(t===n?i!==r:t!==r||i!==n)},getFocusClsEl:Ext.privateFn,onMainElFocus:function(e){this.el.addCls(this._focusCls)},onMainElBlur:function(e){this.el.removeCls(this._focusCls)},onArrowElFocus:function(e){this.el.addCls(this._arrowFocusCls)},onArrowElBlur:function(){this.el.removeCls(this._arrowFocusCls)},setTabIndex:function(e){this.callParent([e]),this.arrowEl&&this.arrowEl.set({tabIndex:e})},_addSplitCls:function(){var e=this.arrowEl;this.callParent(),e.dom.setAttribute("tabIndex",this.tabIndex),e.setVisible(!0)},_removeSplitCls:function(){var e=this.arrowEl;this.callParent(),e.dom.removeAttribute("tabIndex"),e.setVisible(!1)}}}),Ext.define("Ext.button.Cycle",{extend:"Ext.button.Split",alternateClassName:"Ext.CycleButton",alias:"widget.cycle",getButtonText:function(e){var t="";return e&&!0===this.showText?(this.prependText&&(t+=this.prependText),t+=e.text):this.text},setActiveItem:function(e,t){var i=this,n=i.changeHandler,r=i.forceIcon,o=i.forceGlyph;i.settingActive=!0,Ext.isObject(e)||(e=i.menu.getComponent(e)),e&&(i.setText(i.getButtonText(e)),i.setIconCls(r||e.iconCls),i.setGlyph(o||e.glyph),(i.activeItem=e).checked||e.setChecked(!0,!1),t||(n&&Ext.callback(n,i.scope,[i,e],0,i),i.fireEvent("change",i,e))),i.settingActive=!1},getActiveItem:function(){return this.activeItem},initComponent:function(){var e,t,i,n,r=this,o=0;for(Ext.ariaWarn(r,"Using Cycle buttons is not recommended in accessible applications, because their behavior conflicts with accessibility best practices. See WAI-ARIA 1.0 Authoring guide: http://www.w3.org/TR/wai-aria-practices/#menubutton"),e=(r.menu.items||[]).concat(r.items||[]),r.menu=Ext.applyIf({cls:Ext.baseCSSPrefix+"cycle-menu",items:[]},r.menu),i=e.length,t=0;t<i;t++)n=e[t],n=Ext.applyIf({group:r.id,itemIndex:t,checkHandler:r.checkHandler,scope:r,checked:n.checked||!1},n),r.menu.items.push(n),n.checked&&(o=t);r.itemCount=r.menu.items.length,r.callParent(arguments),r.on("click",r.toggleSelected,r),r.setActiveItem(o,!0)},checkHandler:function(e,t){t&&!this.settingActive&&this.setActiveItem(e)},toggleSelected:function(){var e=this.menu;(this.activeItem.next(":not([disabled])")||e.items.getAt(0)).setChecked(!0)}}),Ext.define("Ext.layout.container.SegmentedButton",{extend:"Ext.layout.container.Container",alias:"layout.segmentedbutton",needsItemSize:!1,setsItemSize:!1,_btnRowCls:Ext.baseCSSPrefix+"segmented-button-row",getRenderTree:function(){var e,t,i=this.callParent();if(this.owner.getVertical())for(e=0,t=i.length;e<t;e++)i[e]={cls:this._btnRowCls,cn:i[e]};return i},getItemLayoutEl:function(e){var t=e.el.dom;return this.owner.getVertical()?t.parentNode:t},onDestroy:function(){var e,t;if(this.owner.rendered)for(e=this.getRenderTarget();t=e.last();)t.destroy()}}),Ext.define("Ext.button.Segmented",{extend:"Ext.container.Container",xtype:"segmentedbutton",requires:["Ext.button.Button","Ext.layout.container.SegmentedButton"],config:{allowDepress:!1,allowMultiple:!1,forceSelection:!1,allowToggle:!0,vertical:!1,defaultUI:"default"},beforeRenderConfig:{value:void 0},defaultBindProperty:"value",publishes:["value"],twoWayBindable:["value"],layout:"segmentedbutton",defaultType:"button",maskOnDisable:!1,isSegmentedButton:!0,baseCls:Ext.baseCSSPrefix+"segmented-button",itemCls:Ext.baseCSSPrefix+"segmented-button-item",_firstCls:Ext.baseCSSPrefix+"segmented-button-first",_lastCls:Ext.baseCSSPrefix+"segmented-button-last",_middleCls:Ext.baseCSSPrefix+"segmented-button-middle",applyValue:function(e,t){var i,n,r,o,a,s,l,d,u=this,c=u.getAllowMultiple();if(r=e instanceof Array?e:null==e?[]:[e],o=t instanceof Array?t:null==t?[]:[t],u._isApplyingValue=!0,!u.rendered)for(s=(a=u.items.items).length-1;0<=s;s--)n=a[s],!u.forceSelection||s||d||(n.pressed=!0),n.pressed&&(d=!0,null==(i=n.value)&&(i=u.items.indexOf(n)),Ext.Array.contains(r,i)||r.unshift(i));for(1<(l=r.length)&&!c&&Ext.raise("Cannot set multiple values when allowMultiple is false"),s=0;s<l;s++)e=r[s],(n=u._lookupButtonByValue(e))?(null!=(i=n.value)&&i!==e&&(r[s]=i),n.pressed||n.setPressed(!0)):Ext.raise("Invalid value '"+e+"' for segmented button: '"+u.id+"'");for(e=c?r:l?r[0]:null,s=0,l=o.length;s<l;s++)t=o[s],Ext.Array.contains(r,t)||u._lookupButtonByValue(t).setPressed(!1);return u._isApplyingValue=!1,e},updateValue:function(e,t){var i;this.hasListeners.change&&(e&&t&&this.getAllowMultiple()&&(i=Ext.Array.equals(e,t)),i||this.fireEvent("change",this,e,t))},beforeRender:function(){this.addCls(this.baseCls+this._getClsSuffix()),this._syncItemClasses(!0),this.callParent()},onAdd:function(e){var t,i,n=this,r="_syncItemClasses",o=n.items.items,a=o.length,s=0;for("default"!==e.ui||e.hasOwnProperty("ui")||"default"!==(i=n.getDefaultUI())&&(e.ui=i);s<a;s++)o[s]!==e&&null!=(t=o[s].value)&&t===e.value&&Ext.raise("Segmented button '"+n.id+"' cannot contain multiple items with value: '"+t+"'");n.mon(e,{hide:r,show:r,beforetoggle:"_onBeforeItemToggle",toggle:"_onItemToggle",scope:n}),n.getAllowToggle()&&(e.enableToggle=!0,n.getAllowMultiple()||(e.toggleGroup=n.getId(),e.allowDepress=n.getAllowDepress())),e.addCls(n.itemCls+n._getClsSuffix()),n._syncItemClasses(),n.callParent([e])},onRemove:function(e){e.removeCls(this.itemCls+this._getClsSuffix()),this._syncItemClasses(),this.callParent([e])},beforeLayout:function(){Ext.isChrome&&this.el.dom.offsetWidth,this.callParent()},updateDefaultUI:function(e){var t,i,n,r=this.items;if(this.rendered)Ext.raise("Changing the ui config of a segmented button after render is not supported.");else if(r)for(r.items&&(r=r.items),i=0,n=r.length;i<n;i++)"default"!==(t=r[i]).ui||"default"===e||t.hasOwnProperty("ui")||(r[i].ui=e)},updateAllowDepress:function(e,t){this.rendered&&e!==t&&Ext.raise("Changing the allowDepress config of a segmented button after render is not supported.")},updateAllowMultiple:function(e,t){this.rendered&&e!==t&&Ext.raise("Changing the allowMultiple config of a segmented button after render is not supported.")},updateAllowToggle:function(e,t){this.rendered&&e!==t&&Ext.raise("Changing the allowToggle config of a segmented button after render is not supported.")},updateVertical:function(e,t){this.rendered&&e!==t&&Ext.raise("Changing the orientation of a segmented button after render is not supported.")},privates:{_getClsSuffix:function(){return this.getVertical()?"-vertical":"-horizontal"},_getFirstCls:function(){return this._firstCls},_getLastCls:function(){return this._lastCls},_lookupButtonByValue:function(e){for(var t,i,n=this.items.items,r=n.length,o=0,a=null;o<r;o++)if(null!=(t=(i=n[o]).value)&&t===e){a=i;break}return a||"number"!=typeof e||(a=n[e]),a},_onBeforeItemToggle:function(e,t){if(this.allowMultiple&&this.forceSelection&&!t&&1===this.getValue().length)return!1},_onItemToggle:function(e,t){if(!this._isApplyingValue){var i,n=Ext.Array,r=this.allowMultiple,o=null!=e.value?e.value:this.items.indexOf(e),a=this.getValue();r&&(i=n.indexOf(a,o)),t?r?-1===i&&(a=n.slice(a)).push(o):a=o:r?-1<i&&(a=n.slice(a)).splice(i,1):a===o&&(a=null),this.setValue(a),this.fireEvent("toggle",this,e,t)}},_syncItemClasses:function(e){var t,i,n,r,o,a,s,l;if(e||this.rendered){for(t=this._getFirstCls(),i=this._middleCls,n=this._getLastCls(),o=(r=this.items.items).length,a=[],l=0;l<o;l++)(s=r[l]).hidden||a.push(s);for(o=a.length,l=0;l<o;l++)a[l].removeCls([t,i,n]);if(1<o){for(a[0].addCls(t),l=1;l<o-1;l++)a[l].addCls(i);a[o-1].addCls(n)}}}}}),Ext.define("Ext.panel.Bar",{extend:"Ext.container.Container",vertical:!1,_verticalSides:{left:1,right:1},initComponent:function(){var e=this.vertical;this.dock=this.dock||(e?"left":"top"),this.layout=Ext.apply(e?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},this.layout),this.callParent()},onAdded:function(e,t,i){this.initOrientation(),this.callParent([e,t,i])},onRemoved:function(e){this.removeClsWithUI(this.uiCls),this.callParent([e])},beforeRender:function(){!this.forceOrientation&&this.ownerCt||this.initOrientation(),this.callParent()},setDock:function(e){var t,i;e!==this.dock&&(Ext.suspendLayouts(),this.clearOrientation(),this.callParent([e]),this.initOrientation(),i=this.vertical,(t=this.layout).setVertical(i),t.setAlignRoundingMethod(i?"ceil":"floor"),Ext.resumeLayouts(!0))},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var e=this.dock,t=this.vertical=e?e in this._verticalSides:this.vertical;this.addClsWithUI([t?"vertical":"horizontal",this.getDockName()])}}}),Ext.define("Ext.panel.Title",{extend:"Ext.Component",xtype:"title",requires:["Ext.Glyph"],isTitle:!0,noWrap:!0,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:"presentation",unselectable:"on"},textElRole:"presentation",tabIndex:0,childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="textElRole"> role="{textElRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">{glyph}</tpl></div></div>',_textAlignClasses:{left:Ext.baseCSSPrefix+"title-align-left",center:Ext.baseCSSPrefix+"title-align-center",right:Ext.baseCSSPrefix+"title-align-right"},_iconAlignClasses:{top:Ext.baseCSSPrefix+"title-icon-top",right:Ext.baseCSSPrefix+"title-icon-right",bottom:Ext.baseCSSPrefix+"title-icon-bottom",left:Ext.baseCSSPrefix+"title-icon-left"},_rotationClasses:{0:Ext.baseCSSPrefix+"title-rotate-none",1:Ext.baseCSSPrefix+"title-rotate-right",2:Ext.baseCSSPrefix+"title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:Ext.baseCSSPrefix+"title",_titleSuffix:"-title",_glyphCls:Ext.baseCSSPrefix+"title-glyph",_iconWrapCls:Ext.baseCSSPrefix+"title-icon-wrap",_baseIconCls:Ext.baseCSSPrefix+"title-icon",_itemCls:Ext.baseCSSPrefix+"title-item",_textCls:Ext.baseCSSPrefix+"title-text",afterComponentLayout:function(){var e,t,i,n=this.getRotation();n&&!Ext.isIE8&&(i=this.el,t=(e=this.lastBox).x,i.setStyle(this._getVerticalAdjustDirection(),t+(1===n?e.width:-e.height)+"px")),this.callParent()},onRender:function(){var e=this.getRotation(),t=this.el;this.callParent(),e&&t.setVertical(this._rotationAngles[e]),Ext.supports.FixedTableWidthBug&&(t._needsTableWidthFix=!0)},applyText:function(e){return e=e||"&#160;"},beforeRender:function(){this.callParent(),this.addCls(this._rotationClasses[this.getRotation()]),this.addCls(this._textAlignClasses[this.getTextAlign()])},getIconMarkup:function(){return this.lookupTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var e,t=this,i=t.getIcon(),n=t.getIconCls(),r=t.getGlyph(),o=t.getIconAlign();return r&&(e=r.fontFamily,r=r.character),{id:t.id,ui:t.ui,itemCls:t._itemCls,iconUrl:i,iconCls:n,iconWrapCls:t._iconWrapCls,baseIconCls:t._baseIconCls,iconAlignCls:t._iconAlignClasses[o],glyph:r,glyphCls:r?t._glyphCls:"",glyphFontFamily:e}},initRenderData:function(){var e,t,i=this;return t=Ext.apply({text:i.getText(),textElRole:i.textElRole,id:i.id,ui:i.ui,itemCls:i._itemCls,textCls:i._textCls,iconMarkup:null,iconBeforeTitle:null},i.callParent()),i._hasIcon()&&(e=i.getIconAlign(),t.iconMarkup=i.getIconMarkup(),t.iconBeforeTitle="top"===e||"left"===e),t},onAdded:function(e,t,i){var n=this._titleSuffix,r=e.baseCls;this.addCls([r+n,r+n+"-"+e.ui]),this.callParent([e,t,i])},applyGlyph:function(e,t){return e&&(e.isGlyph||(e=new Ext.Glyph(e)),e.isEqual(t)&&(e=void 0)),e},updateGlyph:function(e,t){var i,n=this._glyphCls;this.rendered&&(this._syncIconVisibility(),i=this.iconEl,e?(i.dom.innerHTML=e.character,i.addCls(n),i.setStyle("font-family",e.fontFamily)):t!==e&&(i.dom.innerHTML="",i.removeCls(n)),this._didIconStateChange(t,e)&&this.updateLayout())},updateIcon:function(e,t){e=e||"",this.rendered&&e!==t&&(this._syncIconVisibility(),this.iconEl.setStyle("background-image",e?"url("+e+")":""),this._didIconStateChange(t,e)&&this.updateLayout())},updateIconAlign:function(e,t){var i,n,r=this.iconWrapEl;this.iconWrapEl&&(i=this.el,n=this._iconAlignClasses,t&&r.removeCls(n[t]),r.addCls(n[e]),"top"===e||"left"===e?i.insertFirst(r):i.appendChild(r),this.updateLayout())},updateIconCls:function(e,t){var i;e=e||"",this.rendered&&t!==e&&(this._syncIconVisibility(),i=this.iconEl,t&&i.removeCls(t),i.addCls(e),this._didIconStateChange(t,e)&&this.updateLayout())},updateRotation:function(e,t){var i,n;this.rendered&&(i=this.el,n=this._rotationClasses,this.removeCls(n[t]),this.addCls(n[e]),i.setHorizontal(),e&&i.setVertical(this._rotationAngles[e]),i.setStyle({right:"",left:"",top:"",height:"",width:""}),this.lastBox=null,this.updateLayout())},updateText:function(e){this.rendered&&(this.textEl.setHtml(e),this.updateLayout())},updateTextAlign:function(e,t){var i=this._textAlignClasses;this.rendered&&(t&&this.removeCls(i[t]),this.addCls(i[e]),this.updateLayout())},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(e,t){var i=Ext.isEmpty(t);return Ext.isEmpty(e)?!i:i},_hasIcon:function(){return!!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var e,t,i=this.el,n=this._hasIcon(),r=this.iconWrapEl;n&&!r&&(e="left"===(t=this.iconAlign)||"top"===t,i.dom.insertAdjacentHTML(e?"afterbegin":"beforeend",this.getIconMarkup()),r=this.iconWrapEl=i[e?"first":"last"](),this.iconEl=r.first()),r&&r.setDisplayed(n)}}}),Ext.define("Ext.panel.Tool",{extend:"Ext.Component",uses:["Ext.tip.QuickTipManager"],xtype:"tool",requires:["Ext.Glyph"],config:{glyph:null},isTool:!0,baseCls:Ext.baseCSSPrefix+"tool",disabledCls:Ext.baseCSSPrefix+"tool-disabled",toolPressedCls:Ext.baseCSSPrefix+"tool-pressed",toolOverCls:Ext.baseCSSPrefix+"tool-over",childEls:["toolEl"],renderTpl:['<div id="{id}-toolEl" data-ref="toolEl" class="{className} {childElCls}" role="presentation"<tpl if="glyph"><tpl if="glyphFontFamily"> style="font-family:{glyphFontFamily};"></tpl>{glyph}<tpl else>></tpl></div>'],toolOwner:null,tooltipType:"qtip",stopEvent:!0,ariaRole:"button",focusable:!0,tabIndex:0,keyMap:{scope:"this",SPACE:"onClick",ENTER:"onClick"},cacheHeight:!0,cacheWidth:!0,_toolTypes:{close:1,collapse:1,down:1,expand:1,gear:1,help:1,left:1,maximize:1,minimize:1,minus:1,next:1,pin:1,plus:1,prev:1,print:1,refresh:1,restore:1,right:1,save:1,search:1,toggle:1,unpin:1,up:1},initComponent:function(){this.id&&this._toolTypes[this.id]&&Ext.raise("When specifying a tool you should use the type option, the id can conflict now that tool is a Component"),this.tooltip=this.tooltip||this.qtip,this.callParent()},initRenderData:function(){var e,t=this.callParent(),i=this.getGlyph();return i&&(e=i.fontFamily,i=i.character),Ext.applyIf(t,{className:this.calculateClassName(),glyph:i,glyphFontFamily:e}),t},calculateClassName:function(){var e=this.baseCls+"-tool-el ";return this.type?e+=this.baseCls+"-img "+this.baseCls+"-"+this.type:this.iconCls&&(e+=this.iconCls),e},afterRender:function(){var e,t=this;t.callParent(),t.setTypeAfterRender&&(t.setTypeAfterRender=!1,t.setType(t.type)),t.el.on({click:t.onClick,mousedown:t.onMouseDown,mouseover:t.onMouseOver,mouseout:t.onMouseOut,scope:t}),(e=t.tooltip)&&t.setTooltip(e)},tipAttrs:{qtip:"data-qtip"},setTooltip:function(e,t){var i,n=this,r=n.tooltip,o=n.tooltipType,a=n.id,s=n.el;r&&Ext.quickTipsActive&&Ext.isObject(r)&&Ext.tip.QuickTipManager.unregister(a),n.tooltip=e,t&&(n.tooltipType=t),e&&(Ext.quickTipsActive&&Ext.isObject(e)?Ext.tip.QuickTipManager.register(Ext.apply({target:a},e)):s&&(t&&o&&t!==o&&(i=n.tipAttrs[o]||"title",s.dom.removeAttribute(i)),i=n.tipAttrs[t||o]||"title",s.dom.setAttribute(i,e)),"title"!==i&&n.ariaRole&&"presentation"!==n.ariaRole&&(s?s.dom.setAttribute("aria-label",e):(n.ariaRenderAttributes=n.ariaRenderAttributes||{},n.ariaRenderAttributes["aria-label"]=e)))},setType:function(e){var t,i,n=this,r=n.updating,o=n.rendering;return r||(t=n.calculateClassName(),o||(n.updating=i=!0),n.setIconCls(null),n.setGlyph(null)),n.type=e,i?(n.updateToolCls(t),n.updating=!1):o&&(n.setTypeAfterRender=!0),n},setIconCls:function(e){var t,i;return this.updating||(t=this.calculateClassName(),this.updating=i=!0,this.setType(null),this.setGlyph(null)),this.iconCls=e,i&&(this.updateToolCls(t),this.updating=!1),this},doDestroy:function(){this.setTooltip(null),delete this.toolOwner,this.callParent()},applyGlyph:function(e,t){return e&&(e.isGlyph||(e=new Ext.Glyph(e)),e.isEqual(t)&&(e=void 0)),e},updateGlyph:function(e,t){var i,n,r=this.toolEl;this.updating||(i=this.calculateClassName(),this.updating=n=!0,this.setType(null),this.setIconCls(null)),r&&(e?(r.dom.innerHTML=e.character,r.setStyle(e.getStyle())):r.dom.innerHTML=""),n&&(this.updateToolCls(i),this.updating=!1)},privates:{onClick:function(e,t){var i=this;return!i.disabled&&("keydown"!==e.type&&i.el.removeCls(i.toolPressedCls+" "+i.toolOverCls),!1!==i.stopEvent&&e.stopEvent(),i.handler?Ext.callback(i.handler,i.scope,[e,t,i.ownerCt,i],0,i):i.callback&&Ext.callback(i.callback,i.scope,[i.toolOwner||i.ownerCt,i,e],0,i),i.destroyed?void 0:(i.fireEvent("click",i,e,i.toolOwner||i.ownerCt),!0))},onMouseDown:function(e){if(e.preventDefault(),this.disabled)return!1;this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled)return!1;this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)},updateToolCls:function(e){var t=this.toolEl;t&&(t.removeCls(e),t.addCls(this.calculateClassName()))}}}),Ext.define("Ext.panel.Header",{extend:"Ext.panel.Bar",xtype:"header",requires:["Ext.panel.Title","Ext.panel.Tool"],isHeader:!0,defaultType:"tool",indicateDrag:!1,weight:-1,shrinkWrap:3,focusableContainer:!0,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",autoEl:{role:"presentation"},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:"title",flex:1},merge:function(e,t){return"object"!=typeof e&&(e={text:e}),Ext.merge(t?Ext.Object.chain(t):{},e)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:Ext.baseCSSPrefix+"header",initComponent:function(){var e=this,t=e.items,i=e.itemPosition,n=[e.headerCls];e.tools=e.tools||[],e.items=t=t?t.slice():[],void 0!==i&&(e._userItems=t.slice(),e.items=t=[]),e.indicateDragCls=e.headerCls+"-draggable",e.indicateDrag&&n.push(e.indicateDragCls),e.addCls(n),e.syncNoBorderCls(),Ext.Array.push(t,e.tools),e.tools.length=0,e.callParent(),e.on({dblclick:e.onDblClick,click:e.onClick,element:"el",scope:e})},addTool:function(e){this.add(Ext.ComponentManager.create(e,"tool")),this.checkFocusableTools()},afterLayout:function(){var e,t,i,n;this.vertical&&(t=this.frameTR)&&(e=this.frameBR,i=this.frameTL,n=this.getWidth()-t.getPadding("r")-(i?i.getPadding("l"):this.el.getBorderWidth("l"))+"px",e.setStyle("background-position-x",n),t.setStyle("background-position-x",n)),this.callParent()},applyTitle:function(e,t){var i,n;return e=e||"",i=Ext.isString(e),Ext.isObject(e)||(e={text:e.toString()}),t?(Ext.suspendLayouts(),t.setConfig(e),Ext.resumeLayouts(!0),e=t):(i&&(e.xtype="title"),e.ui=this.ui,n="rotation"in e,e.id=this.id+"-title",this.isAccordionHeader&&(e.ariaRole="tab",e.textElRole=null,e.focusable=!0),e=Ext.create(e),!n&&this.vertical&&"default"===this.titleRotation&&(e.rotation=1)),e},applyTitlePosition:function(e){var t=this.items.getCount();return this._titleInItems&&--t,Math.max(Math.min(e,t),0)},beforeLayout:function(){this.callParent(),this.syncBeforeAfterTitleClasses()},beforeRender:function(){var e=this.itemPosition;this.protoEl.unselectable(),this.callParent(),void 0!==e&&this.insert(e,this._userItems),this.checkFocusableTools()},checkFocusableTools:function(){var e,t,i,n=this,r=n.tools;if(n.isAccordionHeader)n.focusableContainer=!1;else{for(t=0,i=r.length;t<i;t++)if(r[t].focusable){e=!0;break}e?n.initialConfig.hasOwnProperty("focusableContainer")&&!n.focusableContainer||(n.ariaRole="toolbar",n.focusableContainer=!0,n.rendered&&(n.ariaEl.dom.setAttribute("role","toolbar"),n.initFocusableContainer(!0))):(n.ariaRole="presentation",n.focusableContainer=!1,n.rendered&&(n.ariaEl.dom.setAttribute("role","presentation"),n.initFocusableContainer(!0)))}},getTools:function(){return this.tools.slice()},onAdd:function(e,t){var i=this.tools;this.callParent([e,t]),e.isTool&&(i.push(e),i[e.type]=e)},onAdded:function(e,t,i){this.syncNoBorderCls(),this.callParent([e,t,i])},onRemoved:function(e,t,i){this.syncNoBorderCls(),this.callParent([e,t,i])},setDock:function(e){var t=this.getTitle(),i=this.getTitleRotation(),n=t.getRotation();Ext.suspendLayouts(),this.callParent([e]),"default"===i&&((i=this.vertical?1:0)!==n&&t.setRotation(i),this.rendered&&this.resetItemMargins()),Ext.resumeLayouts(!0)},updateGlyph:function(e){this.getTitle().setGlyph(e)},updateIcon:function(e){this.getTitle().setIcon(e)},updateIconAlign:function(e,t){this.getTitle().setIconAlign(e)},updateIconCls:function(e){this.getTitle().setIconCls(e)},updateTitle:function(e,t){t||(this.insert(this.getTitlePosition(),e),this._titleInItems=!0),this.titleCmp=e},updateTitleAlign:function(e,t){this.getTitle().setTextAlign(e)},updateTitlePosition:function(e){this.insert(e,this.getTitle())},updateTitleRotation:function(e){"default"===e&&(e=this.vertical?1:0),this.getTitle().setRotation(e)},privates:{fireClickEvent:function(e,t){var i="."+Ext.panel.Tool.prototype.baseCls;t.getTarget(i)||this.fireEvent(e,this,t)},getFramingInfoCls:function(){var e=this.callParent(),t=this.ownerCt;return!this.expanding&&t&&(t.collapsed||this.isCollapsedExpander)&&(e+="-"+t.collapsedCls),e+"-"+this.dock},onClick:function(e){this.fireClickEvent("click",e)},onDblClick:function(e){this.fireClickEvent("dblclick",e)},syncBeforeAfterTitleClasses:function(e){var t,i,n,r,o=this.items,a=o.items,s=this.getTitlePosition(),l=a.length,d=o.generation,u=this.syncBeforeAfterGen;if(e||u!==d)for(this.syncBeforeAfterGen=d,n=0;n<l;++n)t=(r=a[n]).afterTitleCls||(r.afterTitleCls=r.baseCls+"-after-title"),i=r.beforeTitleCls||(r.beforeTitleCls=r.baseCls+"-before-title"),!this.title||n<s?(u&&r.removeCls(t),r.addCls(i)):s<n&&(u&&r.removeCls(i),r.addCls(t))},syncNoBorderCls:function(){var e=this.ownerCt,t=this.headerCls+"-noborder";(e?!1!==e.border||e.frame:!1!==this.border)?this.removeCls(t):this.addCls(t)}}}),Ext.define("Ext.layout.container.boxOverflow.None",{alternateClassName:"Ext.layout.boxOverflow.None",alias:["box.overflow.none","box.overflow.None"],mixins:["Ext.mixin.Factoryable"],factoryConfig:{defaultType:"none"},isBoxOverflowHandler:!0,$configPrefixed:!1,$configStrict:!1,constructor:function(e){this.initConfig(e)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(e){var t,i=e.state.boxPlan;i&&i.tooNarrow?(t=this.handleOverflow(e))&&t.reservedSpace&&this.layout.publishInnerCtSize(e,t.reservedSpace):this.clearOverflow()},completeLayout:Ext.emptyFn,finishedLayout:function(e){var t,i,n=this.layout.owner;n.hasListeners.overflowchange&&(i=(t=n.query(">[hidden]")).length)!==this.lastHiddenCount&&(n.fireEvent("overflowchange",this.lastHiddenCount,i,t),this.lastHiddenCount=i)},onRemove:Ext.emptyFn,getItem:function(e){return this.layout.owner.getComponent(e)},getOwnerType:function(e){return e.isToolbar?"toolbar":e.isTabBar?"tab-bar":e.isMenu?"menu":e.isBreadcrumb?"breadcrumb":e.getXType()},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var e=this.layout,t=e.innerCt;t.removeCls(this.getOverflowCls(e.oppositeDirection)),t.addCls(this.getOverflowCls(e.direction))}}),Ext.define("Ext.layout.container.boxOverflow.Scroller",{extend:"Ext.layout.container.boxOverflow.None",alternateClassName:"Ext.layout.boxOverflow.Scroller",alias:["box.overflow.scroller","box.overflow.Scroller"],requires:["Ext.util.ClickRepeater","Ext.Element"],mixins:{observable:"Ext.mixin.Observable"},animateScroll:!1,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+"box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(e){this.mixins.observable.constructor.call(this,e),this.layout.owner.on({afterrender:this.onOwnerRender,scope:this,single:!0}),this.layout.owner.getOverflowEl=this.ownerGetOverflowImpl,this.scrollPosition=0,this.scrollSize=0},onOwnerRender:function(e){var t={isBoxOverflowScroller:!0,x:!1,y:!1,listeners:{scrollend:this.onScrollEnd,scope:this}};Ext.scrollbar.width()||Ext.platformTags.desktop?this.wheelListener=this.layout.innerCt.on("mousewheel",this.onMouseWheel,this,{destroyable:!0}):t[e.layout.horizontal?"x":"y"]=!0,e.setScrollable(t)},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(e){var t=this.layout,i=t.owner,n=this.getOwnerType(i),r=this.scrollerCls,o=r+" "+r+"-"+t.names[e]+" "+r+"-"+n+" "+r+"-"+n+"-"+i.ui;return i.plain&&(o+=" "+r+"-plain"),o},getOverflowCls:function(e){return this.scrollerCls+"-body-"+e},beginLayout:function(e){e.innerCtScrollPos=this.getScrollPosition(),this.callParent(arguments)},finishedLayout:function(e){var t,i=e.state.boxPlan,n=this.layout,r=n.names,o=Math.min(this.getMaxScrollPosition(),e.innerCtScrollPos);i&&i.tooNarrow&&(t=e.childItems[e.childItems.length-1].props,this.scrollSize=t[r.x]+t[r.width],this.updateScrollButtons(),n.innerCt[r.setScrollLeft](o)),this.callParent([e])},handleOverflow:function(e){var t,i,n,r,o=this.layout.names,a=o.getWidth,s=o.parallelMargins;return this.showScrollers(),n=this.getBeforeScroller(),r=this.getAfterScroller(),t=n[a]()+r[a]()+n.getMargin(s)+r.getMargin(s),i=e.targetContext.getPaddingInfo()[o.width],{reservedSpace:Math.max(t-i,0)}},getBeforeScroller:function(){return this._beforeScroller||(this._beforeScroller=this.createScroller(this.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){return this._afterScroller||(this._afterScroller=this.createScroller(this.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(e,t,i){var n,r=this.layout.owner,o=this.scrollerCls;return(n=r.el.getById(r.id+e)).addClsOnOver(o+"-hover"),n.addClsOnClick(o+"-pressed"),n.setVisibilityMode(Ext.Element.DISPLAY),this[t]=new Ext.util.ClickRepeater(n,{interval:this.scrollRepeatInterval,handler:i,scope:this,mousedownPreventDefault:!0}),n},onMouseWheel:function(e){var t=Ext.Component.from(e.target),i=t.getScrollable&&t.getScrollable();i&&i!==this.layout.owner.getScrollable()||(e.stopEvent(),this.scrollBy(this.getWheelDelta(e)*this.wheelIncrement*-1,!1))},getWheelDelta:function(e){return e.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.getBeforeScroller().show(),this.getAfterScroller().show(),this.layout.owner.addClsWithUI("vertical"===this.layout.direction?"vertical-scroller":"scroller")},hideScrollers:function(){var e=this.getBeforeScroller(),t=this.getAfterScroller();e&&(e.hide(),t.hide(),this.layout.owner.removeClsWithUI("vertical"===this.layout.direction?"vertical-scroller":"scroller"))},destroy:function(){Ext.destroyMembers(this,"beforeRepeater","afterRepeater","_beforeScroller","_afterScroller","wheelListener"),this.callParent()},scrollBy:function(e,t){var i=this.layout,n=i.owner.getScrollable(),r=[0,0,!!t&&this.getScrollAnim()];r[i.horizontal?0:1]=e,n.scrollBy.apply(n,r)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var e,t=this.getBeforeScroller(),i=this.getAfterScroller(),n=this.getScrollPosition();t&&i&&(e=this.scrollerCls+"-disabled",t[n?"removeCls":"addCls"](e),i[n>=this.getMaxScrollPosition()?"addCls":"removeCls"](e))},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,!1)},scrollRight:function(){this.scrollBy(this.scrollIncrement,!1)},getScrollPosition:function(){var e=this.layout;return e.owner.getScrollable().getPosition()[e.horizontal?"x":"y"]},getMaxScrollPosition:function(){var e=this.layout;return e.owner.getScrollable().getMaxPosition()[e.horizontal?"x":"y"]},setVertical:function(){var e=this.getBeforeScroller(),t=this.getAfterScroller(),i=this.layout.names,n=this.scrollerCls;e.removeCls(n+"-"+i.beforeY),t.removeCls(n+"-"+i.afterY),e.addCls(n+"-"+i.beforeX),t.addCls(n+"-"+i.afterX),this.callParent()},scrollTo:function(e,t){var i=this.layout,n=i.owner.getScrollable(),r=[0,0,!!t&&this.getScrollAnim()];r[i.horizontal?0:1]=e,n.scrollTo.apply(n,r)},onScrollEnd:function(e,t,i){this.updateScrollButtons(),this.fireEvent("scroll",this,this.layout.horizontal?t:i,!1)},scrollToItem:function(e,t){void 0!==(e=this.getItem(e))&&this.layout.owner.getScrollable().ensureVisible(e.el,{animation:t})},privates:{ownerGetOverflowImpl:function(){return this.layout.innerCt}}}),Ext.define("Ext.dd.DragDropManager",{singleton:!0,requires:["Ext.util.Region"],uses:["Ext.tip.QuickTipManager"],alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!1,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,notifyOccluded:!1,dragCls:Ext.baseCSSPrefix+"dd-drag-current",currentPoint:new Ext.util.Point,_execOnAll:function(e,t){var i,n,r,o,a=this.ids;for(i in a)if(a.hasOwnProperty(i))for(n in o=a[i])if(o.hasOwnProperty(n)){if(r=o[n],!this.isTypeOfDD(r))continue;r[e].apply(r,t)}},addListeners:function(){this.init(),Ext.getWin().on({unload:this._onUnload,resize:this._onResize,scope:this})},_onResize:function(e){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:8,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(e,t){this.initialized||this.init(),this.ids[t]||(this.ids[t]={}),this.ids[t][e.id]=e},removeDDFromGroup:function(e,t){var i;this.ids[t]||(this.ids[t]={}),(i=this.ids[t])&&i[e.id]&&delete i[e.id]},_remove:function(e,t){var i,n=this.ids,r=e.groups;if(!this.clearingAll){for(i in this.dragCurrent===e&&(this.dragCurrent=null),r)r.hasOwnProperty(i)&&(t?delete n[i]:n[i]&&delete n[i][e.id]);delete this.handleIds[e.id],delete this.locationCache[e.id]}},regHandle:function(e,t){this.handleIds[e]||(this.handleIds[e]={}),this.handleIds[e][t]=t},isDragDrop:function(e){return!!this.getDDById(e)},getRelated:function(e,t){var i,n,r,o=[];for(i in e.groups)for(n in this.ids[i])r=this.ids[i][n],this.isTypeOfDD(r)&&(t&&!r.isTarget||(o[o.length]=r));return o},isLegalTarget:function(e,t){var i,n,r=this.getRelated(e,!0);for(i=0,n=r.length;i<n;++i)if(r[i].id===t.id)return!0;return!1},isTypeOfDD:function(e){return e&&e.__ygDragDrop},isHandle:function(e,t){return this.handleIds[e]&&this.handleIds[e][t]},getDDById:function(e,t){var i,n;for(i in this.ids)if((n=this.ids[i][e])instanceof Ext.dd.DDTarget||t)return n;return null},handleMouseDown:function(e,t){var i=this,n=e.getXY(),r=t.getEl(),o={translate:!1,fn:i.handleMouseUp,capture:!1,priority:-1e3},a={translate:!1,fn:i.handleMouseMove,capture:!1},s={capture:!0,destroyable:!0,scope:i},l=e.browserEvent.type;s.touchstart=i.handleMouseUp,"pointerdown"===l?(s.pointerup=o,s.pointermove=a):"MSPointerDown"===l?(s.MSPointerUp=o,s.MSPointerMove=a):"mousedown"===l?(s.mouseup=o,s.mousemove=a):(s.touchend=o,s.touchmove=a),i.pointerMoveListeners=Ext.getDoc().on(s),i.isMouseDown=!0,i.currentPoint.setPosition(n),i.dragCurrent&&i.handleMouseUp(e),i.mousedownEvent=e,i.currentTarget=e.getTarget(),i.dragCurrent=t,Ext.fly(r).setCapture(),i.startX=n[0],i.startY=n[1],i.offsetX=i.offsetY=0,i.deltaX=i.startX-r.offsetLeft,i.deltaY=i.startY-r.offsetTop,i.dragThreshMet=!1},startDrag:function(e,t){var i,n=this.dragCurrent;Ext.undefer(this.clickTimeout),Ext.quickTipsActive&&Ext.tip.QuickTipManager.ddDisable(),n&&(n.b4StartDrag(e,t),n.startDrag(e,t),(i=Ext.fly(n.getDragEl()))&&(i.addCls(this.dragCls),i.shim&&i.shim.el&&i.shim.el.addCls(this.dragCls))),this.dragThreshMet=!0},handleMouseUp:function(e){var t=this;t.pointerMoveListeners.destroy(),t.isMouseDown=!1,t.dragCurrent&&(Ext.isIE&&document.releaseCapture&&document.releaseCapture(),Ext.undefer(t.clickTimeout),t.dragThreshMet&&t.fireEvents(e,!0),t.stopDrag(e),t.dragThreshMet&&t.stopEvent(e),t.mousedownEvent=t.currentTarget=null)},stopEvent:function(e){this.stopPropagation&&e.stopPropagation(),this.preventDefault&&"touch"===e.pointerType&&e.preventDefault()},stopDrag:function(e){var t,i=this.dragCurrent;Ext.quickTipsActive&&Ext.tip.QuickTipManager.ddEnable(),i&&(this.dragThreshMet&&((t=Ext.fly(i.getDragEl()))&&(t.removeCls(this.dragCls),t.shim&&t.shim.el&&t.shim.el.removeCls(this.dragCls)),i.b4EndDrag(e),i.endDrag(e)),this.dragCurrent.onMouseUp(e)),this.dragCurrent=null,this.dragOvers={}},handleMouseMove:function(e){var t,i,n=this,r=n.dragCurrent,o=e.getXY(),a=o[0],s=o[1];return n.offsetX=a-n.startX,n.offsetY=s-n.startY,n.currentPoint.setPosition(o),r&&(n.dragThreshMet||(t=Math.abs(n.offsetX),i=Math.abs(n.offsetY),(t>n.clickPixelThresh||i>n.clickPixelThresh)&&(e.claimGesture(),n.startDrag(n.startX,n.startY))),n.dragThreshMet&&(r.b4Drag(e),r.onDrag(e),r.moveOnly||n.fireEvents(e,!1)),n.stopEvent(e)),!0},fireEvents:function(e,t){var i,n,r,o,a,s,l,d,u=this,c=Ext.supports.Touch,h=u.dragCurrent,f=u.currentPoint,g=[],p=[],m=[],x=[],y=[],v=[];if(h&&!h.isLocked()){for(a in d=!(h.deltaX<0||h.deltaY<0),(c||!u.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&d)&&(i=h.getDragEl(),d&&(i.style.visibility="hidden"),e=e.chain({target:u.elementFromPoint(e.clientX,e.clientY)||document.documentElement}),d&&(i.style.visibility="visible")),u.dragOvers)n=u.dragOvers[a],delete u.dragOvers[a],u.isTypeOfDD(n)&&!n.destroyed&&(t?m.push(n):u.notifyOccluded?this.isOverTarget(f,n,u.mode)||m.push(n):e.within(n.getEl())||m.push(n),p[a]=!0);for(l in h.groups)if("string"==typeof l)for(a in u.ids[l])if(n=u.ids[l][a],u.isTypeOfDD(n)&&(r=n.getEl())&&n.isTarget&&!n.isLocked()&&Ext.fly(r).isVisible(!0)&&(n!==h||!1===h.ignoreSelf))if(u.notifyOccluded)-1!==(n.zIndex=u.getZIndex(r))&&(o=!0),g.push(n);else if(e.within(r)){g.push(n);break}for(o&&Ext.Array.sort(g,u.byZIndex),a=0,s=g.length;a<s&&(n=g[a],!u.isOverTarget(f,n,u.mode)||(t?y.push(n):(p[n.id]?x.push(n):v.push(n),u.dragOvers[n.id]=n),u.notifyOccluded));a++);if(u.mode)v.length&&h.onDragEnter(e,v),x.length&&(h.b4DragOver(e,x),h.onDragOver(e,x)),y.length&&(h.b4DragDrop(e,y),h.onDragDrop(e,y)),m.length&&(h.b4DragOut(e,m),h.onDragOut(e,m));else{for(a=0,s=v.length;a<s;++a)h.onDragEnter(e,v[a].id);for(a=0,s=x.length;a<s;++a)h.b4DragOver(e,x[a].id),h.onDragOver(e,x[a].id);for(a=0,s=y.length;a<s;++a)h.b4DragDrop(e,y[a].id),h.onDragDrop(e,y[a].id);for(a=0,s=m.length;a<s;++a)h.b4DragOut(e,m[a].id),h.onDragOut(e,m[a].id)}t&&!y.length&&h.onInvalidDrop(e)}},elementFromPoint:function(e,t){return Ext.rootInheritedState.rtl&&(e=Ext.Element.getViewportWidth()-e),Ext.Element.fromPoint(e,t,!0)},getZIndex:function(e){var t,i=document.body,n=-1;for(e=Ext.getDom(e);e!==i;)isNaN(t=Number(Ext.fly(e).getStyle("zIndex")))||(n=t),e=e.parentNode;return n},byZIndex:function(e,t){return e.zIndex<t.zIndex},getBestMatch:function(e){var t,i,n=null,r=e.length;if(1===r)n=e[0];else for(t=0;t<r;++t){if((i=e[t]).cursorIsOver){n=i;break}(!n||n.overlap.getArea()<i.overlap.getArea())&&(n=i)}return n},refreshCache:function(e){var t,i,n,r;for(t in e)if("string"==typeof t)for(i in this.ids[t])n=this.ids[t][i],this.isTypeOfDD(n)&&((r=this.getLocation(n))?this.locationCache[n.id]=r:delete this.locationCache[n.id])},verifyEl:function(e){return Ext.getBody().contains(e)},getLocation:function(e){var t,i,n,r,o,a,s,l,d,u;if(!this.isTypeOfDD(e))return null;if(e.getRegion)return e.getRegion();t=e.getEl();try{i=Ext.fly(t).getXY()}catch(e){}return i?(r=(n=i[0])+t.offsetWidth,a=(o=i[1])+t.offsetHeight,s=o-e.padding[0],l=r+e.padding[1],d=a+e.padding[2],u=n-e.padding[3],new Ext.util.Region(s,l,d,u)):null},isOverTarget:function(e,t,i){var n,r,o,a,s=this.locationCache[t.id];return s&&this.useCache||(s=this.getLocation(t),this.locationCache[t.id]=s),!!s&&(t.cursorIsOver=s.contains(e),(n=this.dragCurrent)&&n.getTargetCoord&&(i||n.constrainX||n.constrainY)?(t.overlap=null,r=n.getTargetCoord(e.x,e.y),o=n.getDragEl(),!!(a=new Ext.util.Region(r.y,r.x+o.offsetWidth,r.y+o.offsetHeight,r.x).intersect(s))&&(t.overlap=a,!!i||t.cursorIsOver)):t.cursorIsOver)},_onUnload:function(e,t){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var e,t=this,i=t.elementCache;for(e in t.dragCurrent&&(t.stopDrag(),t.dragCurrent=null),t.clearingAll=!0,t._execOnAll("unreg",[]),delete t.clearingAll,i)delete i[e];t.elementCache={},t.ids={},t.handleIds={}},elementCache:{},getElWrapper:function(e){var t=this.elementCache[e];return t&&t.el||(t=this.elementCache[e]=new this.ElementWrapper(Ext.getDom(e))),t},getElement:function(e){return Ext.getDom(e)},getCss:function(e){var t=Ext.getDom(e);return t?t.style:null},ElementWrapper:function(e){this.el=e||null,this.id=this.el&&e.id,this.css=this.el&&e.style},getPosX:function(e){return Ext.fly(e).getX()},getPosY:function(e){return Ext.fly(e).getY()},swapNode:function(e,t){var i,n;e.swapNode?e.swapNode(t):(i=t.parentNode,(n=t.nextSibling)===e?i.insertBefore(e,t):t===e.nextSibling?i.insertBefore(t,e):(e.parentNode.replaceChild(t,e),i.insertBefore(e,n)))},getScroll:function(){var e=window.document,t=e.documentElement,i=e.body,n=0,r=0;return t&&(t.scrollTop||t.scrollLeft)?(n=t.scrollTop,r=t.scrollLeft):i&&(n=i.scrollTop,r=i.scrollLeft),{top:n,left:r}},getStyle:function(e,t){return Ext.fly(e).getStyle(t)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(e,t){var i=Ext.fly(t).getXY();Ext.fly(e).setXY(i)},numericSort:function(e,t){return e-t},handleWasClicked:function(e,t){var i;if(this.isHandle(t,e.id))return!0;for(i=e.parentNode;i;){if(this.isHandle(t,i.id))return!0;i=i.parentNode}return!1}},function(e){Ext.onInternalReady(function(){e.addListeners()})}),Ext.define("Ext.resizer.Splitter",{extend:"Ext.Component",xtype:"splitter",requires:["Ext.XTemplate"],uses:["Ext.resizer.SplitterTracker"],childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}{childElCls}">',"</div>","</tpl>"],isSplitter:!0,baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",canResize:!0,collapsible:null,collapseOnDblClick:!0,defaultSplitMin:40,defaultSplitMax:1e3,collapseTarget:"next",horizontal:!1,vertical:!1,touchAction:void 0,size:5,tracker:null,ariaRole:"separator",focusable:!0,tabIndex:0,applyTouchAction:function(e,t){return void 0===e&&(e=this.vertical?{panX:!1}:{panY:!1}),this.callParent([e,t])},getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var e=this,t=e.getCollapseTarget(),i=e.collapsible;e.callParent(),t.collapsed&&e.addCls(e.collapsedClsInternal),e.canResize||e.addCls(e.baseCls+"-noresize"),Ext.applyIf(e.renderData,{collapseDir:e.getCollapseDirection(),collapsible:null!==i?i:t.collapsible}),e.ariaRenderAttributes=e.ariaRenderAttributes||{},e.ariaRenderAttributes["aria-orientation"]=e.orientation,e.protoEl.unselectable()},onRender:function(){var e,t,i=this;i.callParent(arguments),!1!==i.performCollapse&&(i.renderData.collapsible&&i.mon(i.collapseEl,"click",i.toggleTargetCmp,i),i.collapseOnDblClick&&i.mon(i.el,"dblclick",i.toggleTargetCmp,i)),(e=i.getCollapseTarget())&&e.isPanel&&e.on({collapse:i.onTargetCollapse,expand:i.onTargetExpand,beforeexpand:i.onBeforeTargetExpand,beforecollapse:i.onBeforeTargetCollapse,scope:i}),i.canResize&&(i.tracker=Ext.create(i.getTrackerConfig()),i.relayEvents(i.tracker,["beforedragstart","dragstart","dragend"])),(t=i.collapseEl)&&(t.lastCollapseDirCls=i.collapseDirProps[i.collapseDirection].cls)},getCollapseDirection:function(){var e,t,i,n=this.collapseDirection;return n||((e=this.collapseTarget).isComponent&&(n=e.collapseDirection),n||(i=this.ownerCt.layout.type,n=["bottom","right","top","left"][e.isComponent?(t=this.ownerCt.items,Number(t.indexOf(e)===t.indexOf(this)-1)<<1|Number("hbox"===i)):Number("prev"===this.collapseTarget)<<1|Number("hbox"===i)]),this.collapseDirection=n),this.setOrientation("top"===n||"bottom"===n?"horizontal":"vertical"),n},getCollapseTarget:function(){return this.collapseTarget.isComponent?this.collapseTarget:"prev"===this.collapseTarget?this.previousSibling():this.nextSibling()},setCollapseEl:function(e){var t=this.collapseEl;t&&t.setDisplayed(e)},onBeforeTargetExpand:function(e){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(e){e===this.getCollapseTarget()&&e["vertical"===this.orientation?"collapsedHorizontal":"collapsedVertical"]()&&this.el.addCls(this.collapsedClsInternal+" "+(this.collapsedCls||"")),this.setCollapseEl("")},onTargetExpand:function(e){this.el.removeCls(this.collapsedClsInternal+" "+(this.collapsedCls||"")),this.setCollapseEl("")},collapseDirProps:{top:{cls:Ext.baseCSSPrefix+"layout-split-top"},right:{cls:Ext.baseCSSPrefix+"layout-split-right"},bottom:{cls:Ext.baseCSSPrefix+"layout-split-bottom"},left:{cls:Ext.baseCSSPrefix+"layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var e,t=this.collapseEl,i=this.collapseDirProps[this.collapseDirection];t&&((e=t.lastCollapseDirCls)&&t.removeCls(e),t.addCls(t.lastCollapseDirCls=i.cls))},applyOrientation:function(){var e=this,t=e.orientation,i=e.orientationProps[t],n=e.size,r=i.fixedAxis,o=i.stretchedAxis,a=e.baseCls+"-";e[t]=!0,e[i.opposite]=!1,e.hasOwnProperty(r)&&"100%"!==e[r]||(e[r]=n),e.hasOwnProperty(o)&&e[o]!==n||(e[o]="100%"),e.removeCls(a+i.opposite),e.addCls(a+t)},setOrientation:function(e){this.orientation!==e&&(this.orientation=e,this.applyOrientation())},updateOrientation:function(){delete this.collapseDirection,this.getCollapseDirection(),this.applyCollapseDirection()},toggleTargetCmp:function(e,t){var i=this.getCollapseTarget(),n=i.placeholder;!Ext.isFunction(i.expand)||!Ext.isFunction(i.collapse)||(!n||n.hidden)&&i.hidden||(i.collapsed||i.floatedFromCollapse?i.expand():i.collapseDirection?i.collapse():i.collapse(this.renderData.collapseDir))},setSize:function(){this.callParent(arguments),Ext.isIE&&this.el&&this.el.repaint()},doDestroy:function(){Ext.destroy(this.tracker),this.callParent()}}),Ext.define("Ext.layout.container.Box",{extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.BoxLayout",alias:"layout.box",requires:["Ext.layout.container.boxOverflow.None","Ext.layout.container.boxOverflow.Scroller","Ext.util.Format","Ext.dd.DragDropManager","Ext.resizer.Splitter"],type:"box",config:{align:"begin",constrainAlign:!1,enableSplitters:!0,overflowHandler:{$value:null,merge:function(e,t){return"string"==typeof e&&(e={type:e}),Ext.merge(t?Ext.Object.chain(t):{},e)}},padding:0,pack:"start",stretchMaxPartner:void 0,vertical:!1,alignRoundingMethod:"round"},itemCls:Ext.baseCSSPrefix+"box-item",targetCls:Ext.baseCSSPrefix+"box-layout-ct",targetElCls:Ext.baseCSSPrefix+"box-target",innerCls:Ext.baseCSSPrefix+"box-inner",manageMargins:!0,createsInnerCt:!0,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:!0,definitions:"var dh=Ext.DomHelper;"}],constructor:function(e){var t,i=this;i.callParent([e]),i.setVertical(i.vertical),i.flexSortFn=i.flexSort.bind(i),"string"!=(t=typeof i.padding)&&"number"!=t||(i.padding=Ext.util.Format.parseBox(i.padding),i.padding.height=i.padding.top+i.padding.bottom,i.padding.width=i.padding.left+i.padding.right)},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(e,t){var i=this.sizePolicy,n=this.align,r=e.flex,o=n,a=this.names,s=a.height,l=a.width,d=e[l],u=e[s],c=this._percentageRe,h=c.test(d),f="stretch"===n,g="stretchmax"===n,p=this.constrainAlign;return!t&&(f||r||h||p&&!g)&&(t=this.owner.getSizeModel()),f?!c.test(u)&&t[s].shrinkWrap&&(o="stretchmax"):g||(o=c.test(u)?"stretch":p&&!t[s].shrinkWrap?"stretchmax":""),(r||h)&&(t[l].shrinkWrap||(i=i.flex)),i[o]},flexSort:function(e,t){var i,n,r,o,a,s,l=this.names.maxWidth,d=this.names.minWidth,u=e.target,c=t.target,h=u.flex,f=c.flex,g=0;return r=u[l]||1/0,o=c[l]||1/0,i=u[d]||0,n=c[d]||0,a=isFinite(i)||isFinite(n),s=isFinite(r)||isFinite(o),(a||s)&&(s&&(g=r-o),0===g&&a&&(g=n-i),0===g&&(g=s?f-h:h-f)),g},isItemBoxParent:function(e){return!0},isItemShrinkWrap:function(e){return!0},roundFlex:function(e){return Math.floor(e)},beginCollapse:function(e){"vertical"===this.direction&&e.collapsedVertical()?(e.collapseMemento.capture(["flex"]),delete e.flex):"horizontal"===this.direction&&e.collapsedHorizontal()&&(e.collapseMemento.capture(["flex"]),delete e.flex)},beginExpand:function(e){e.collapseMemento.restore(["flex"])},beginLayout:function(e){var t=this.owner,i=t.stretchMaxPartner,n=this.innerCt.dom.style,r=this.names,o=this.overflowHandler;e.boxNames=r,o&&o.beginLayout(e),"string"==typeof i&&(i=Ext.getCmp(i)||t.query(i)[0]),e.stretchMaxPartner=i&&e.context.getCmp(i),this.callParent([e]),e.innerCtContext=e.getEl("innerCt",this),e.targetElContext=e.getEl("targetEl",this),e.ownerScrollable=t.getScrollable(),n.width=n.height=""},beginLayoutCycle:function(e,t){var i,n,r=e.state,o=e.ownerScrollable,a=this.align,s=e.boxNames,l=this.pack,d=this._centerRe,u=this.overflowHandler,c=e.state.canScroll;u&&u.beginLayoutCycle(e,t),this.callParent([e,t]),e.parallelSizeModel=i=e[s.widthModel],e.perpendicularSizeModel=n=e[s.heightModel],e.boxOptions={align:a={stretch:"stretch"===a,stretchmax:"stretchmax"===a,center:d.test(a),bottom:this._endRe.test(a)},pack:l={center:d.test(l),end:"end"===l}},o&&!o.isBoxOverflowScroller&&(c||(r.canScroll={parallel:!i.shrinkWrap&&o[s.getX](),perpendicular:!n.shrinkWrap&&o[s.getY]()}),r.actualScroll||(r.actualScroll={parallel:!1,perpendicular:!1})),a.stretch&&n.shrinkWrap&&(a.stretchmax=!0,a.stretch=!1),a.nostretch=!(a.stretch||a.stretchmax),i.shrinkWrap&&(l.center=l.end=!1),this.cacheFlexes(e),this.targetEl.setWidth(2e4)},cacheFlexes:function(e){for(var t,i,n,r,o,a,s,l=e.boxNames,d=l.widthModel,u=l.heightModel,c=e.boxOptions.align.nostretch,h=0,f=e.childItems,g=f.length,p=[],m=0,x=0,y=0,v=l.minWidth,E=l.minHeight,b=this._percentageRe,C=0,S=0;g--;)t=(i=f[g]).target,(a=i[d]).calculated&&(i.flex=n=t.flex,n?(h+=n,p.push(i),m+=t[v]||0):(r=b.exec(t[l.width]))&&(i.percentageParallel=parseFloat(r[1])/100,++C)),y+=a.configured?t[l.width]:t[v]||0,o=i[u],c&&o.calculated&&(r=b.exec(t[l.height]),i.percentagePerpendicular=parseFloat(r[1])/100,++S),x<(s=o.configured?t[l.height]:t[E]||0)&&(x=s);e.flexedItems=p,e.flexedMinWidth=m,e.smallestWidth=y,e.smallestHeight=x,e.totalFlex=h,e.percentageWidths=C,e.percentageHeights=S,Ext.Array.sort(p,this.flexSortFn)},calculate:function(e){var t=e.boxNames,i=e.state,n=i.actualScroll,r=i.needsScroll,o=i.canScroll,a=i.boxPlan||(i.boxPlan={}),s=this.overflowHandler;if(a.targetSize=this.getContainerSize(e),o&&!r&&(i.needsScroll=r={parallel:o.parallel&&a.targetSize[t.width]<e.smallestWidth,perpendicular:o.perpendicular&&a.targetSize[t.height]<e.smallestHeight}),i.parallelDone||(i.parallelDone=this.calculateParallel(e,t,a)),i.perpendicularDone||(i.perpendicularDone=this.calculatePerpendicular(e,t,a)),i.parallelDone&&i.perpendicularDone){if(o&&!i.scrollPass&&(r.parallel!==n.parallel||r.perpendicular!==n.perpendicular))return e.invalidate({state:{scrollPass:!0,canScroll:o,needsScroll:n}}),void(this.done=!1);this.publishInnerCtSize(e),this.done&&e.boxOptions.align.stretchmax&&!i.stretchMaxDone&&(this.calculateStretchMax(e,t,a),i.stretchMaxDone=!0),s&&s.calculate(e)}else this.done=!1},calculateParallel:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g=e.parallelSizeModel.shrinkWrap,p=t.width,m=e.childItems,x=t.beforeX,y=t.afterX,v=t.setWidth,E=m.length,b=e.flexedItems,C=b.length,S=e.boxOptions.pack,w=this.padding,T=i.targetSize,P=T[p],k=e.state,I=k.needsScroll,R=k.canScroll,M=0,A=w[x],D=A+w[y],F=Ext.scrollbar.size(),L=F[t.width],O=F[t.height];if(!g&&!T[t.gotWidth])return!1;for(n=0;n<E;++n)if(M+=(r=(s=m[n]).marginInfo||s.getMarginInfo())[p],!s[t.widthModel].calculated&&(D+=c=s.getProp(p),isNaN(D)))return!1;if(D+=M,e.percentageWidths){if(h=P-M,isNaN(h))return!1;for(n=0;n<E;++n)(s=m[n]).percentageParallel&&(c=Math.ceil(h*s.percentageParallel),D+=c=s[v](c))}for(g?(f=0,i.tooNarrow=!1):(f=P-D,I&&I.perpendicular&&(f-=O),i.tooNarrow=f<e.flexedMinWidth,i.tooNarrow&&R&&R.parallel&&(k.actualScroll.parallel=!0)),u=D,o=f,a=e.totalFlex,n=0;n<C;n++)l=(s=b[n]).flex,d=this.roundFlex(l/a*o),u+=d=s[v](d),o=Math.max(0,o-d),a-=l;for(S.center?(A+=o/2)<0&&(A=0):S.end&&(A+=o),n=0;n<E;++n)A+=(r=(s=m[n]).marginInfo)[x],s.setProp(t.x,A),A+=r[y]+s.props[p];return u+=e.targetContext.getPaddingInfo()[p],e.state.contentWidth=u,I&&I.perpendicular&&(g&&(u+=L),e[t.hasOverflowY]=!0,e.target.componentLayout[t.setWidthInDom]=!0,e[t.invalidateScrollY]=Ext.isIE8),e[t.setContentWidth](u),!0},calculatePerpendicular:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g=e.state,p=g.needsScroll,m=g.canScroll,x=e.perpendicularSizeModel.shrinkWrap,y=i.targetSize,v=e.childItems,E=v.length,b=Math.max,C=t.height,S=t.setHeight,w=t.beforeY,T=t.y,P=this.padding,k=P[w],I=y[C]-k-P[t.afterY],R=e.boxOptions.align,M=R.stretch,A=R.stretchmax,D=R.center,F=R.bottom,L=this.constrainAlign,O=0,B=0,N=this.onBeforeConstrainInvalidateChild,H=this.onAfterConstrainInvalidateChild,V=Ext.scrollbar.height();if(!x&&!y[t.gotHeight])return!1;if((M||(D||F)&&!x)&&isNaN(I))return!1;if(p&&p.parallel&&(x?h=!0:(I-=V,i.targetSize[C]-=V)),M)O=b(l=I,e.smallestHeight);else for(r=0;r<E;r++){if(a=((d=v[r]).marginInfo||d.getMarginInfo())[C],f=d.percentagePerpendicular){if(++B,x)continue;o=f*I-a,o=d[S](o)}else o=d.getProp(C);if(!x&&L&&d[t.heightModel].shrinkWrap&&I<o&&(d.invalidate({before:N,after:H,layout:this,childHeight:I,names:t}),e.state.parallelDone=!1),isNaN(O=b(O,o+a,d.target[t.minHeight]||0)))return!1}if(h&&(O+=V,e[t.hasOverflowX]=!0,e.target.componentLayout[t.setHeightInDom]=!0,e[t.invalidateScrollX]=Ext.isIE8),(u=e.stretchMaxPartner)&&(e.setProp("maxChildHeight",O),(c=u.childItems)&&c.length&&(O=b(O,u.getProp("maxChildHeight")),isNaN(O))))return!1;for(e[t.setContentHeight](O+this.padding[C]+e.targetContext.getPaddingInfo()[C]),h&&(O-=V),O>y[C]&&m&&m.perpendicular&&(g.actualScroll.perpendicular=!0),i.maxSize=O,A?l=O:(D||F||B)&&(l=L?x?O:I:x?O:b(I,O),l-=e.innerCtContext.getBorderInfo()[C]),r=0;r<E;r++)n=k+(a=(d=v[r]).marginInfo||d.getMarginInfo())[w],M?d[S](l-a[C]):(f=d.percentagePerpendicular,x&&f&&(o=f*l-(a=d.marginInfo||d.getMarginInfo())[C],o=d[S](o)),D?0<(s=l-d.props[C])&&(n=k+Math[this.alignRoundingMethod](s/2)):F&&(n=b(0,l-n-d.props[C]))),d.setProp(T,n);return!0},onBeforeConstrainInvalidateChild:function(e,t){var i=t.names.heightModel;e[i].constrainedMin||(e[i]=Ext.layout.SizeModel.calculated)},onAfterConstrainInvalidateChild:function(e,t){var i=t.names;e.setProp(i.beforeY,0),e[i.heightModel].calculated&&e[i.setHeight](t.childHeight)},calculateStretchMax:function(e,t,i){var n,r,o,a,s=t.height,l=t.width,d=e.childItems,u=d.length,c=i.maxSize,h=this.onBeforeStretchMaxInvalidateChild,f=this.onAfterStretchMaxInvalidateChild;for(o=0;o<u;++o)r=(n=d[o]).props,(a=c-n.getMarginInfo()[s])===r[s]&&!n[t.heightModel].constrained||n.invalidate({before:h,after:f,layout:this,childWidth:r[l],childHeight:a,childX:r.x,childY:r.y,names:t})},onBeforeStretchMaxInvalidateChild:function(e,t){var i=t.names.heightModel;e[i].constrainedMax||(e[i]=Ext.layout.SizeModel.calculated)},onAfterStretchMaxInvalidateChild:function(e,t){var i=t.names,n=t.childHeight,r=t.childWidth;e.setProp("x",t.childX),e.setProp("y",t.childY),e[i.heightModel].calculated&&e[i.setHeight](n),e[i.widthModel].calculated&&e[i.setWidth](r)},completeLayout:function(e){var t,i,n,r,o,a=e.invalidateScrollX,s=e.invalidateScrollY,l=this.overflowHandler;l&&l.completeLayout(e),(a||s)&&(o=(t=(i=this.getTarget()).dom).style,a&&("auto"===(n=i.getStyle("overflowX"))?(n=o.overflowX,o.overflowX="scroll"):a=!1),s&&("auto"===(r=i.getStyle("overflowY"))?(r=o.overflowY,o.overflowY="scroll"):s=!1),(a||s)&&(t.scrollWidth,a&&(o.overflowX=n),s&&(o.overflowY=r)))},finishedLayout:function(e){var t=this.overflowHandler;t&&t.finishedLayout(e),this.callParent([e])},getLayoutItems:function(){var e,t,i,n,r,o,a,s=this.callParent(),l=s.length;for(i=0;i<l;++i)(n=s[i]).isSplitter||(a=n.splitter,n.hidden?a&&(a.hidden||(a.hidden=!0,a.el&&a.el.hide())):(o=!!a&&"next"===a.collapseTarget,t=null,e&&r?(r.hidden&&(r.hidden=!1,r.el&&r.el.show()),o&&(t=!0)):o&&(t=!e),null!==t&&a.hidden!==t&&(a.hidden=t,a.el&&a.el.setVisible(!t)),r=!o&&a,e=n));return e&&r&&!r.hidden&&(r.hidden=!0,r.el&&r.el.hide()),s},insertSplitter:function(e,t,i,n){var r={xtype:"splitter",id:e.id+"-splitter",hidden:i,splitterFor:e,synthetic:!0},o=t+("prev"===n.collapseTarget?1:0);r[this.names.height]="100%",n&&Ext.apply(r,n),e.splitter=this.owner.add(o,r)},publishInnerCtSize:function(e,t){var i,n,r=e.state,o=e.boxNames,a=o.height,s=o.width,l=e.boxOptions.align,d=this.padding,u=r.boxPlan,c=u.targetSize,h=u.maxSize,f=r.needsScroll,g=e.innerCtContext;t=t||0,e.parallelSizeModel.shrinkWrap||u.tooNarrow&&r.canScroll?i=r.contentWidth-e.targetContext.getPaddingInfo()[s]:(i=c[s],f&&f.perpendicular&&(i-=Ext.scrollbar.size()[s])),i-=t,this.owner.tooNarrow=u.tooNarrow,l.stretch?n=h:(n=u.maxSize+d[o.beforeY]+d[o.afterY]+g.getBorderInfo()[a],e.perpendicularSizeModel.shrinkWrap||!l.center&&!l.bottom||(n=Math.max(c[a],n))),g[o.setWidth](i),g[o.setHeight](n),e.targetElContext.setWidth(e.innerCtContext.props.width-(this.vertical?0:t||0)),isNaN(i+n)&&(this.done=!1)},onAdd:function(e,t){var i=this.enableSplitters&&!e.isButton&&e.split;this.callParent([e,t]),i&&(i=!0===i?{collapseTarget:"next"}:Ext.isString(i)?{collapseTarget:"before"===i?"next":"prev"}:Ext.apply({collapseTarget:"before"===i.side?"next":"prev"},i),this.insertSplitter(e,t,!!e.hidden,i))},onRemove:function(e,t){var i,n=this.names,r=this.owner,o=e.splitter,a=this.overflowHandler;this.callParent([e,t]),o&&r.contains(o)&&(r.doRemove(o,!0),e.splitter=null),a&&a.onRemove(e),e.layoutMarginCap===this.id&&delete e.layoutMarginCap,r.destroying||t||!e.rendered||(i=e.getEl())&&(i.setStyle(n.beforeY,""),i.setStyle(n.beforeX,""),i.setStyle("margin",""))},applyOverflowHandler:function(e,t){return"string"==typeof e&&(e={type:e}),t&&t.type===e.type?(delete e.type,t.setConfig(e),t):(e.layout=this,Ext.Factory.boxOverflow(e))},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},calculateChildBox:Ext.deprecated(),calculateChildBoxes:Ext.deprecated(),updateChildBoxes:Ext.deprecated(),destroy:function(){Ext.destroy(this.innerCt,this.overflowHandler),this.flexSortFn=this.innerCt=null,this.callParent()},getRenderData:function(){var e=this.callParent();return e.targetElCls=this.targetElCls,e},updateVertical:function(e){var t=this.overflowHandler,i=this.owner,n=this._props;Ext.apply(this,e?n.vbox:n.hbox),t&&i&&i.rendered&&t.setVertical(e)},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:!0,vertical:!1,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",getX:"getX",setX:"setX",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",getY:"getY",setY:"setY",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:!1,vertical:!0,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",getX:"getY",setX:"setY",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",getY:"getX",setY:"setX",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}}),Ext.define("Ext.layout.container.HBox",{extend:"Ext.layout.container.Box",alias:"layout.hbox",alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:!1}),Ext.define("Ext.layout.container.VBox",{extend:"Ext.layout.container.Box",alias:"layout.vbox",alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:!0}),Ext.define("Ext.toolbar.Toolbar",{extend:"Ext.container.Container",requires:["Ext.layout.container.HBox","Ext.layout.container.VBox"],uses:["Ext.toolbar.Fill","Ext.toolbar.Separator","Ext.toolbar.Spacer","Ext.plugin.MouseEnter"],alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",isToolbar:!0,baseCls:Ext.baseCSSPrefix+"toolbar",ariaRole:"toolbar",focusableContainer:!0,defaultType:"button",layout:void 0,vertical:void 0,enableOverflow:!1,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:!0,itemCls:Ext.baseCSSPrefix+"toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var e=this,t=e.layout,i=e.vertical;void 0===i&&(e.vertical=i="right"===e.dock||"left"===e.dock),e.layout=t=Ext.applyIf(Ext.isString(t)?{type:t}:t||{},{type:i?"vbox":"hbox",align:i?"stretchmax":"middle"}),e.overflowHandler?t.overflowHandler=e.overflowHandler:e.enableOverflow&&(t.overflowHandler="menu"),i&&e.addClsWithUI("vertical"),"footer"===e.ui&&(e.ignoreBorderManagement=!0),e.callParent()},afterFirstLayout:function(e,t){var i=this.layout.getRenderTarget().dom;this.callParent([e,t]),this.trackMenus&&this.addPlugin({ptype:"mouseenter",element:i,delegate:function(e){return e.parentNode===i},handler:this.onItemOver,scope:this})},getRefItems:function(e){var t,i=this.callParent(arguments),n=this.layout;return e&&(this.enableOverflow||"menu"===this.overflowHandler)&&(t=n.overflowHandler)&&t.menu&&(i=i.concat(t.menu.getRefItems(e))),i},lookupComponent:function(e){var t,i,n=arguments;return"string"==typeof e&&"@"!==e[0]&&(e="string"==typeof(t=(i=Ext.toolbar.Toolbar).shortcutsHV[this.vertical?1:0][e]||i.shortcuts[e])?{xtype:t}:t?Ext.apply({},t):{xtype:"tbtext",text:e},this.applyDefaults(e),n=[e]),this.callParent(n)},onBeforeAdd:function(e){var t="footer"===this.ui,i=t?this.defaultFooterButtonUI:this.defaultButtonUI;e.isSegmentedButton?"default"!==e.getDefaultUI()||e.config.hasOwnProperty("defaultUI")||e.setDefaultUI(i):"default"!==e.ui||e.hasOwnProperty("ui")||(e.isButton?e.ui=i:e.isFormField&&(e.ui=t?this.defaultFooterFieldUI:this.defaultFieldUI)),e instanceof Ext.toolbar.Separator&&e.setUI(this.vertical?"vertical":"horizontal"),this.callParent(arguments)},onAdd:function(e){e.needArrowKeys&&this.focusableContainer&&!this.hasOwnProperty("focusableContainer")&&(this.focusableContainer=!1,this.ariaRole="group"),this.callParent(arguments),this.trackMenu(e)},onRemove:function(e){this.callParent(arguments),this.trackMenu(e,!0)},privates:{applyDefaults:function(e){return Ext.isString(e)||(e=this.callParent(arguments)),e},trackMenu:function(e,t){e.menu&&e[t?"un":"on"]({menushow:this.onButtonMenuShow,menuhide:this.onButtonMenuHide,scope:this})},getChildItemsToDisable:function(){return this.items.getRange()},onItemOver:function(e,t){var i=Ext.Component.from(t),n=this.activeMenuBtn;n&&n!==i&&i.showMenu&&i.menu&&(i.focus(),i.showMenu(e))},onButtonMenuShow:function(e){this.activeMenuBtn=e},onButtonMenuHide:function(e){this.activeMenuBtn=null}}}),Ext.define("Ext.dd.DragDrop",{requires:["Ext.dd.DragDropManager"],constructor:function(e,t,i){e&&this.init(e,t,i)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,triggerEvent:"mousedown",b4StartDrag:function(e,t){},startDrag:function(e,t){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(e,t){},b4DragOver:function(e){},onDragOver:function(e,t){},b4DragOut:function(e){},onDragOut:function(e,t){},b4DragDrop:function(e){},onDragDrop:function(e,t){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(e,t,i){Ext.isNumber(t)&&(t={left:t,right:t,top:t,bottom:t}),t=t||this.defaultPadding;var n,r,o,a,s=Ext.get(this.getEl()).getBox(),l=Ext.get(e),d=l.getScroll(),u=l.dom;n=u===document.body?{x:d.left,y:d.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}:{x:(r=l.getXY())[0],y:r[1],width:u.clientWidth,height:u.clientHeight},o=s.y-n.y,a=s.x-n.x,this.resetConstraints(),this.setXConstraint(a-(t.left||0),n.width-a-s.width-(t.right||0),this.xTickSize),this.setYConstraint(o-(t.top||0),n.height-o-s.height-(t.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(e,t,i){this.el=this.el||Ext.get(e),this.initTarget(e,t,i),Ext.get(this.id).on(this.triggerEvent,this.handleMouseDown,this),Ext.supports.Touch&&"longpress"===this.triggerEvent&&Ext.get(this.id).swallowEvent("contextmenu",!0)},initTarget:function(e,t,i){this.config=i||{},this.DDMInstance=Ext.dd.DragDropManager,this.groups={},"string"!=typeof e&&(e=Ext.id(e)),this.id=e,this.addToGroup(t||"default"),this.handleElId=e,this.setDragElId(e),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig(),this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0],this.isTarget=!1!==this.config.isTarget,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=!1!==this.config.primaryButtonOnly},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(e,t,i,n){this.padding=t||0===t?i||0===i?[e,t,i,n]:[e,t,e,t]:[e,e,e,e]},setInitPosition:function(e,t){var i,n,r,o=this.getEl();this.DDMInstance.verifyEl(o)&&(i=e||0,n=t||0,r=Ext.fly(o).getXY(),this.initPageX=r[0]-i,this.initPageY=r[1]-n,this.lastPageX=r[0],this.lastPageY=r[1],this.setStartPosition(r))},setStartPosition:function(e){var t=e||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null,this.startPageX=t[0],this.startPageY=t[1]},addToGroup:function(e){this.groups[e]=!0,this.DDMInstance.regDragDrop(this,e)},removeFromGroup:function(e){this.groups[e]&&delete this.groups[e],this.DDMInstance.removeDDFromGroup(this,e)},setDragElId:function(e){this.dragElId=e},setHandleElId:function(e){"string"!=typeof e&&(e=Ext.id(e)),this.handleElId=e,this.DDMInstance.regHandle(this.id,e)},setOuterHandleElId:function(e){"string"!=typeof e&&(e=Ext.id(e)),Ext.get(e).on(this.triggerEvent,this.handleMouseDown,this),this.setHandleElId(e),this.hasOuterHandles=!0},unreg:function(){var e;this._domRef&&(e=Ext.fly(this.id))&&e.un(this.triggerEvent,this.handleMouseDown,this),this._domRef=null,this.DDMInstance._remove(this,this.autoGroup)},destroy:function(){this.unreg(),this.callParent()},isLocked:function(){return this.DDMInstance.isLocked()||this.locked},handleMouseDown:function(e,t){var i=this;i.primaryButtonOnly&&e.button||i.isLocked()||(i.DDMInstance.refreshCache(i.groups),(i.hasOuterHandles||i.DDMInstance.isOverTarget(e.getPoint(),i))&&i.clickValidator(e)&&(i.setStartPosition(),i.b4MouseDown(e),i.onMouseDown(e),i.DDMInstance.handleMouseDown(e,i),i.DDMInstance.stopEvent(e)))},clickValidator:function(e){var t=e.getTarget();return this.isValidHandleChild(t)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(t,this.id))},addInvalidHandleType:function(e){var t=e.toUpperCase();this.invalidHandleTypes[t]=t},addInvalidHandleId:function(e){"string"!=typeof e&&(e=Ext.id(e)),this.invalidHandleIds[e]=e},addInvalidHandleClass:function(e){this.invalidHandleClasses.push(e)},removeInvalidHandleType:function(e){var t=e.toUpperCase();delete this.invalidHandleTypes[t]},removeInvalidHandleId:function(e){"string"!=typeof e&&(e=Ext.id(e)),delete this.invalidHandleIds[e]},removeInvalidHandleClass:function(e){var t,i=this.invalidHandleClasses,n=i.length;for(t=0;t<n;++t)i[t]===e&&delete i[t]},isValidHandleChild:function(t){var i,e,n,r=!0;try{i=t.nodeName.toUpperCase()}catch(e){i=t.nodeName}for(r=(r=r&&!this.invalidHandleTypes[i])&&!this.invalidHandleIds[t.id],e=0,n=this.invalidHandleClasses.length;r&&e<n;++e)r=!Ext.fly(t).hasCls(this.invalidHandleClasses[e]);return r},setXTicks:function(e,t){var i,n={};for(this.xTicks=[],this.xTickSize=t,i=this.initPageX;i>=this.minX;i-=t)n[i]||(n[this.xTicks[this.xTicks.length]=i]=!0);for(i=this.initPageX;i<=this.maxX;i+=t)n[i]||(n[this.xTicks[this.xTicks.length]=i]=!0);Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(e,t){var i,n={};for(this.yTicks=[],this.yTickSize=t,i=this.initPageY;i>=this.minY;i-=t)n[i]||(n[this.yTicks[this.yTicks.length]=i]=!0);for(i=this.initPageY;i<=this.maxY;i+=t)n[i]||(n[this.yTicks[this.yTicks.length]=i]=!0);Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(e,t,i){this.leftConstraint=e,this.rightConstraint=t,this.minX=this.initPageX-e,this.maxX=this.initPageX+t,i&&this.setXTicks(this.initPageX,i),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(e,t,i){this.topConstraint=e,this.bottomConstraint=t,this.minY=this.initPageY-e,this.maxY=this.initPageY+t,i&&this.setYTicks(this.initPageY,i),this.constrainY=!0},resetConstraints:function(){var e,t;this.initPageX||0===this.initPageX?(e=this.maintainOffset?this.lastPageX-this.initPageX:0,t=this.maintainOffset?this.lastPageY-this.initPageY:0,this.setInitPosition(e,t)):this.setInitPosition(),this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(e,t){var i,n,r;if(t){if(t[0]>=e)return t[0];for(i=0,n=t.length;i<n;++i)if(t[r=i+1]&&t[r]>=e)return e-t[i]<t[r]-e?t[i]:t[r];return t[t.length-1]}return e},toString:function(){return"DragDrop "+this.id}}),Ext.define("Ext.dd.DD",{extend:"Ext.dd.DragDrop",requires:["Ext.dd.DragDropManager"],constructor:function(e,t,i){e&&this.init(e,t,i)},scroll:!0,autoOffset:function(e,t){var i=e-this.startPageX,n=t-this.startPageY;this.setDelta(i,n)},setDelta:function(e,t){this.deltaX=e,this.deltaY=t},setDragElPos:function(e,t){var i=this.getDragEl();this.alignElWithMouse(i,e,t)},alignElWithMouse:function(e,t,i){var n,r,o,a,s=this.getTargetCoord(t,i),l=e.dom?e:Ext.fly(e,"_dd"),d=l.getSize(),u=Ext.Element;return this.deltaSetXY?(n=this.cachedViewportSize,this.setLocalXY(l,Math.max(0,Math.min(s.x+this.deltaSetXY[0],n.width-d.width)),Math.max(0,Math.min(s.y+this.deltaSetXY[1],n.height-d.height)))):(n=this.cachedViewportSize={width:u.getDocumentWidth(),height:u.getDocumentHeight()},r=[Math.max(0,Math.min(s.x,n.width-d.width)),Math.max(0,Math.min(s.y,n.height-d.height))],l.setXY(r),o=this.getLocalX(l),a=l.getLocalY(),this.deltaSetXY=[o-s.x,a-s.y]),this.cachePosition(s.x,s.y),this.autoScroll(s.x,s.y,e.offsetHeight,e.offsetWidth),s},cachePosition:function(e,t){var i;e?(this.lastPageX=e,this.lastPageY=t):(i=Ext.fly(this.getEl()).getXY(),this.lastPageX=i[0],this.lastPageY=i[1])},autoScroll:function(e,t,i,n){var r,o,a,s,l,d,u,c,h;this.scroll&&(r=Ext.Element.getViewportHeight(),o=Ext.Element.getViewportWidth(),a=this.DDMInstance.getScrollTop(),s=this.DDMInstance.getScrollLeft(),l=i+t,d=n+e,u=r+a-t-this.deltaY,c=o+s-e-this.deltaX,h=document.all?80:30,r<l&&u<40&&window.scrollTo(s,a+h),t<a&&0<a&&t-a<40&&window.scrollTo(s,a-h),o<d&&c<40&&window.scrollTo(s+h,a),e<s&&0<s&&e-s<40&&window.scrollTo(s-h,a))},getTargetCoord:function(e,t){var i=e-this.deltaX,n=t-this.deltaY;return this.constrainX&&(i<this.minX&&(i=this.minX),i>this.maxX&&(i=this.maxX)),this.constrainY&&(n<this.minY&&(n=this.minY),n>this.maxY&&(n=this.maxY)),{x:i=this.getTick(i,this.xTicks),y:n=this.getTick(n,this.yTicks)}},applyConfig:function(){this.callParent(),this.scroll=!1!==this.config.scroll},b4MouseDown:function(e){var t=e.getXY();this.autoOffset(t[0],t[1])},b4Drag:function(e){var t=e.getXY();this.setDragElPos(t[0],t[1])},toString:function(){return"DD "+this.id},getLocalX:function(e){return e.getLocalX()},setLocalXY:function(e,t,i){e.setLocalXY(t,i)}}),Ext.define("Ext.dd.DDProxy",{extend:"Ext.dd.DD",statics:{dragElId:"ygddfdiv"},constructor:function(e,t,i){e&&(this.init(e,t,i),this.initFrame())},resizeFrame:!0,centerFrame:!1,createFrame:function(){var e,t,i=this,n=document.body;n&&n.firstChild?(e=this.getDragEl())||((e=document.createElement("div")).id=this.dragElId,e.setAttribute("role","presentation"),(t=e.style).position="absolute",t.visibility="hidden",t.cursor="move",t.border="2px solid #aaa",t.zIndex=999,n.insertBefore(e,n.firstChild)):Ext.defer(function(){i.createFrame()},50)},initFrame:function(){this.createFrame()},applyConfig:function(){this.callParent(),this.resizeFrame=!1!==this.config.resizeFrame,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(e,t){var i=this.getDragEl(),n=i.style;this._resizeProxy(),this.centerFrame&&this.setDelta(Math.round(parseInt(n.width,10)/2),Math.round(parseInt(n.height,10)/2)),this.setDragElPos(e,t),Ext.fly(i).show()},_resizeProxy:function(){var e;this.resizeFrame&&(e=this.getEl(),Ext.fly(this.getDragEl()).setSize(e.offsetWidth,e.offsetHeight))},b4MouseDown:function(e){var t=e.getXY(),i=t[0],n=t[1];this.autoOffset(i,n),this.setDragElPos(i,n)},b4StartDrag:function(e,t){this.showFrame(e,t)},b4EndDrag:function(e){Ext.fly(this.getDragEl()).hide()},endDrag:function(e){var t=this.getEl(),i=this.getDragEl();i.style.visibility="",this.beforeMove(),t.style.visibility="hidden",Ext.dd.DDM.moveToEl(t,i),i.style.visibility="hidden",t.style.visibility="",this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}}),Ext.define("Ext.dd.StatusProxy",{extend:"Ext.Component",animRepair:!1,childEls:["ghost"],renderTpl:['<div class="'+Ext.baseCSSPrefix+'dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="'+Ext.baseCSSPrefix+'dd-drag-ghost" role="presentation"></div>'],repairCls:Ext.baseCSSPrefix+"dd-drag-repair",ariaRole:"presentation",skipLayout:!0,alignOnScroll:!1,constructor:function(e){e=e||{},Ext.apply(this,{hideMode:"visibility",hidden:!0,floating:!0,id:this.id||Ext.id(),cls:Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed,shadow:e.shadow||!1,renderTo:Ext.getDetachedBody()}),this.callParent(arguments),this.dropStatus=this.dropNotAllowed},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",setStatus:function(e){e=e||this.dropNotAllowed,this.dropStatus!==e&&(this.el.replaceCls(this.dropStatus,e),this.dropStatus=e)},reset:function(e){var t=Ext.baseCSSPrefix+"dd-drag-proxy ";this.el.replaceCls(t+this.dropAllowed,t+this.dropNotAllowed),this.dropStatus=this.dropNotAllowed,e&&this.ghost.setHtml("")},update:function(e){var t;"string"==typeof e?this.ghost.setHtml(e):(this.ghost.setHtml(""),e.style.margin="0",this.ghost.dom.appendChild(e)),(t=this.ghost.dom.firstChild)&&Ext.fly(t).setStyle("float","none")},getGhost:function(){return this.ghost},hide:function(e){this.callParent(),e&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},sync:function(){this.el.syncUnderlays()},repair:function(e,t,i){var n=this;n.callback=t,n.scope=i,e&&!1!==n.animRepair?(n.el.addCls(n.repairCls),n.el.setUnderlaysVisible(!1),n.anim=n.el.animate({duration:n.repairDuration||500,easing:"ease-out",to:{x:e[0],y:e[1]},stopAnimation:!0,callback:n.afterRepair,scope:n})):n.afterRepair()},afterRepair:function(){this.hide(!0),this.el.removeCls(this.repairCls),"function"==typeof this.callback&&this.callback.call(this.scope||this),delete this.callback,delete this.scope}}),Ext.define("Ext.dd.DragSource",{extend:"Ext.dd.DDProxy",requires:["Ext.dd.StatusProxy","Ext.dd.DragDropManager"],dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",animRepair:!0,repairHighlightColor:"c3daf9",constructor:function(e,t){this.el=Ext.get(e),this.dragData||(this.dragData={}),Ext.apply(this,t),this.proxy||(this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})),this.callParent([this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:!0===this.scroll}]),this.dragging=!1},getDragData:function(e){return this.dragData},onDragEnter:function(e,t){var i,n=Ext.dd.DragDropManager.getDDById(t);this.cachedTarget=n,!1!==this.beforeDragEnter(n,e,t)&&(n.isNotifyTarget?(i=n.notifyEnter(this,e,this.dragData),this.proxy.setStatus(i)):this.proxy.setStatus(this.dropAllowed),this.afterDragEnter&&this.afterDragEnter(n,e,t))},beforeDragEnter:function(e,t,i){return!0},onDragOver:function(e,t){var i,n=this.cachedTarget||Ext.dd.DragDropManager.getDDById(t);!1!==this.beforeDragOver(n,e,t)&&(n.isNotifyTarget&&(i=n.notifyOver(this,e,this.dragData),this.proxy.setStatus(i)),this.afterDragOver&&this.afterDragOver(n,e,t))},beforeDragOver:function(e,t,i){return!0},onDragOut:function(e,t){var i=this.cachedTarget||Ext.dd.DragDropManager.getDDById(t);!1!==this.beforeDragOut(i,e,t)&&(i.isNotifyTarget&&i.notifyOut(this,e,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(i,e,t)),this.cachedTarget=null},beforeDragOut:function(e,t,i){return!0},onDragDrop:function(e,t){var i=this.cachedTarget||Ext.dd.DragDropManager.getDDById(t);!1!==this.beforeDragDrop(i,e,t)&&(i.isNotifyTarget?!1!==i.notifyDrop(this,e,this.dragData)?this.onValidDrop(i,e,t):this.onInvalidDrop(i,e,t):this.onValidDrop(i,e,t),this.afterDragDrop&&this.afterDragDrop(i,e,t)),delete this.cachedTarget},beforeDragDrop:function(e,t,i){return!0},onValidDrop:function(e,t,i){this.hideProxy(),this.afterValidDrop&&this.afterValidDrop(e,t,i)},getRepairXY:function(e,t){return this.el.getXY()},onInvalidDrop:function(e,t,i){var n=this;t||(t=e,e=null,i=t.getTarget().id),!1!==n.beforeInvalidDrop(e,t,i)&&(n.cachedTarget&&(n.cachedTarget.isNotifyTarget&&n.cachedTarget.notifyOut(n,t,n.dragData),n.cacheTarget=null),n.proxy.repair(n.getRepairXY(t,n.dragData),n.afterRepair,n),n.afterInvalidDrop&&n.afterInvalidDrop(t,i))},afterRepair:function(){Ext.enableFx&&this.el.highlight(this.repairHighlightColor),this.dragging=!1},beforeInvalidDrop:function(e,t,i){return!0},handleMouseDown:function(e){var t;this.dragging||(t=this.getDragData(e))&&!1!==this.onBeforeDrag(t,e)&&(this.dragData=t,this.proxy.stop(),this.callParent(arguments))},onBeforeDrag:function(e,t){return!0},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){return this.proxy.ensureAttachedToBody(!0),this.callParent(arguments)},startDrag:function(e,t){this.proxy.reset(),this.proxy.hidden=!1,this.dragging=!0,this.proxy.update(""),this.onInitDrag(e,t),this.proxy.show()},onInitDrag:function(e,t){var i=this.el.dom.cloneNode(!0);return i.id=Ext.id(),this.proxy.update(i),this.onStartDrag(e,t),!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide(),this.proxy.reset(!0),this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(e){},endDrag:function(e){this.onEndDrag(this.dragData,e)},onEndDrag:function(e,t){},autoOffset:function(e,t){this.setDelta(-12,-20)},destroy:function(){Ext.destroy(this.proxy),this.callParent()}}),Ext.define("Ext.panel.Proxy",{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:!0,constructor:function(e,t){this.panel=e,this.id=this.panel.id+"-ddproxy",Ext.apply(this,t)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.destroy(),delete this.proxy),this.panel.unghost(null,this.moveOnDrag),delete this.ghost)},show:function(){var e;this.ghost||(e=this.panel.getSize(),this.panel.el.setVisibilityMode(Ext.Element.DISPLAY),this.ghost=this.panel.ghost(),this.insertProxy&&(this.proxy=this.panel.el.insertSibling({role:"presentation",cls:Ext.baseCSSPrefix+"panel-dd-spacer"}),this.proxy.setSize(e)))},repair:function(e,t,i){this.hide(),Ext.callback(t,i||this)},moveProxy:function(e,t){this.proxy&&e.insertBefore(this.proxy.dom,t)}}),Ext.define("Ext.panel.DD",{extend:"Ext.dd.DragSource",requires:["Ext.panel.Proxy"],constructor:function(e,t){this.panel=e,this.dragData={panel:e},this.panelProxy=new Ext.panel.Proxy(e,t),this.proxy=this.panelProxy.proxy,this.callParent([e.el,t]),this.setupEl(e)},setupEl:function(e){var t=e.header,i=e.body;t&&(this.setHandleElId(t.id),i=t.el),i?(i.setStyle("cursor","move"),this.scroll=!1):e.on("boxready",this.setupEl,this,{single:!0})},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(e,t){this.panelProxy.show()},b4MouseDown:function(e){var t=e.getXY(),i=t[0],n=t[1];this.autoOffset(i,n)},onInitDrag:function(e,t){return this.onStartDrag(e,t),!0},createFrame:Ext.emptyFn,getDragEl:function(e){var t=this.panelProxy.ghost;if(t)return t.el.dom},endDrag:function(e){this.panelProxy.hide(),this.panel.saveState()},autoOffset:function(e,t){e-=this.startPageX,t-=this.startPageY,this.setDelta(e,t)},onInvalidDrop:function(e,t,i){!1!==this.beforeInvalidDrop(e,t,i)&&(this.cachedTarget&&(this.cachedTarget.isNotifyTarget&&this.cachedTarget.notifyOut(this,t,this.dragData),this.cacheTarget=null),this.afterInvalidDrop&&this.afterInvalidDrop(t,i))}}),Ext.define("Ext.layout.component.Dock",{extend:"Ext.layout.component.Component",alias:"layout.dock",alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:!0,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:!1,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:!0,x:!0},verticalCollapsePolicy:{height:!0,y:!0},finishRender:function(){var e,t;this.callParent(),e=this.getRenderTarget(),t=this.getDockedItems(),this.finishRenderItems(e,t)},isItemBoxParent:function(e){return!0},isItemShrinkWrap:function(e){return!0},noBorderClasses:[Ext.baseCSSPrefix+"docked-noborder-top",Ext.baseCSSPrefix+"docked-noborder-right",Ext.baseCSSPrefix+"docked-noborder-bottom",Ext.baseCSSPrefix+"docked-noborder-left"],noBorderClassesSides:{top:Ext.baseCSSPrefix+"docked-noborder-top",right:Ext.baseCSSPrefix+"docked-noborder-right",bottom:Ext.baseCSSPrefix+"docked-noborder-bottom",left:Ext.baseCSSPrefix+"docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:Ext.baseCSSPrefix+"docked",handleItemBorders:function(){var e,t,i,n,r,o,a,s=this,l=s.owner,d=s.lastDockedItems,u=s.borders,c=l.dockedItems.generation,h=s.noBorderClassesSides,f=s.borderWidthProps,g=s.collapsed;if(!(s.initializedBorders===c||l.border&&!l.manageBodyBorders||l.collapsed&&"mini"===l.collapseMode)){for(s.initializedBorders=c,s.collapsed=!1,s.lastDockedItems=t=s.getLayoutItems(),s.collapsed=g,e={top:[],right:[],bottom:[],left:[]},i=0,n=t.length;i<n;i++)o=(r=t[i]).dock,r.ignoreBorderManagement||(e[o].satisfied||(e[o].push(r),e[o].satisfied=!0),e.top.satisfied||"bottom"===o||e.top.push(r),e.right.satisfied||"left"===o||e.right.push(r),e.bottom.satisfied||"top"===o||e.bottom.push(r),e.left.satisfied||"right"===o||e.left.push(r));if(d)for(i=0,n=d.length;i<n;i++)(r=d[i]).destroyed||r.ignoreBorderManagement||l.manageBodyBorders||r.removeCls(s.noBorderClasses);if(u)for(a in u)l.manageBodyBorders&&u[a].satisfied&&l.setBodyStyle(f[a],"");for(a in e)if(n=e[a].length,l.manageBodyBorders)e[a].satisfied&&l.setBodyStyle(f[a],"1px");else{for(i=0;i<n;i++)e[a][i].addCls(h[a]);!e[a].satisfied&&!l.bodyBorder||!1===l.bodyBorder?l.addBodyCls(h[a]):l.removeBodyCls(h[a])}s.borders=e}},beforeLayoutCycle:function(e){var t,i,n=this.owner,r=this.sizeModels.shrinkWrap,o=n.shrinkWrapDock;n.collapsed&&(n.collapsedVertical()?(i=!0,e.measureDimensions=1):(t=!0,e.measureDimensions=2)),e.collapsedVert=i,e.collapsedHorz=t,i?e.heightModel=r:t&&(e.widthModel=r),o=!0===o?3:o||0,e.shrinkWrapDockHeight=1&o&&e.heightModel.shrinkWrap,e.shrinkWrapDockWidth=2&o&&e.widthModel.shrinkWrap},beginLayout:function(e){var t,i,n,r,o,a,s,l=this.owner,d=this.getLayoutItems(),u=e.context,c=d.length,h=this.lastCollapsedState;for(this.callParent(arguments),(a=l.getCollapsed())!==h&&void 0!==h&&(this.owner.collapsed?(e.isCollapsingOrExpanding=1,l.addClsWithUI(l.collapsedCls)):(e.isCollapsingOrExpanding=2,l.removeClsWithUI(l.collapsedCls),e.lastCollapsedState=this.lastCollapsedState)),this.lastCollapsedState=a,e.dockedItems=t=[],i=0;i<c;i++)(n=d[i]).rendered&&(s=n.dock,(r=u.getCmp(n)).dockedAt={x:0,y:0},r.offsets=o=Ext.Element.parseBox(n.offsets||0),r.horizontal="top"===s||"bottom"===s,o.width=o.left+o.right,o.height=o.top+o.bottom,t.push(r));e.bodyContext=e.getEl("body")},beginLayoutCycle:function(e){var t,i,n,r=e.dockedItems,o=r.length,a=this.owner,s=a.frameBody,l=this.lastHeightModel;for(this.callParent(arguments),this.owner.manageHeight?this.lastBodyDisplay&&(a.body.dom.style.display=this.lastBodyDisplay=""):("inline-block"!==this.lastBodyDisplay&&(a.body.dom.style.display=this.lastBodyDisplay="inline-block"),l&&l.shrinkWrap&&!e.heightModel.shrinkWrap&&(a.body.dom.style.marginBottom="")),e.widthModel.auto&&(e.widthModel.shrinkWrap&&a.el.setWidth(null),a.body.setWidth(null),s&&s.setWidth(null)),e.heightModel.auto&&(a.body.setHeight(null),s&&s.setHeight(null)),e.collapsedVert?e.setContentHeight(0):e.collapsedHorz&&e.setContentWidth(0),t=0;t<o;t++)if("right"===(n=(i=r[t].target).dock))i.setLocalX(0);else if("left"!==n)continue},calculate:function(e){var t,i,n,r,o,a=this,s=a.measureAutoDimensions(e,e.measureDimensions),l=e.state,d=l.horzDone,u=l.vertDone,c=e.bodyContext;for(e.borderInfo||e.getBorderInfo(),e.paddingInfo||e.getPaddingInfo(),e.frameInfo||e.getFrameInfo(),c.borderInfo||c.getBorderInfo(),c.paddingInfo||c.getPaddingInfo(),e.frameBorder||((t=e.framing)?(e.frameBorder=t.border,e.framePadding=t.padding):(e.frameBorder=e.borderInfo,e.framePadding=e.paddingInfo)),i=!d&&a.createAxis(e,s.contentWidth,e.widthModel,a.horzAxisProps,e.collapsedHorz),n=!u&&a.createAxis(e,s.contentHeight,e.heightModel,a.vertAxisProps,e.collapsedVert),r=0,o=e.dockedItems.length;o--;++r)i&&a.dockChild(e,i,o,r),n&&a.dockChild(e,n,o,r);i&&a.finishAxis(e,i)&&(l.horzDone=d=i),n&&a.finishAxis(e,n)&&(l.vertDone=u=n),d&&u&&a.finishConstraints(e,d,u)?a.finishPositions(e,d,u):a.done=!1},createAxis:function(e,t,i,n,r){var o,a,s,l=0,d=this.owner,u=d[n.maxSize],c=d[n.minSize]||0,h=n.dockBegin,f=n.dockEnd,g=n.pos,p=n.size,m=null!=u;return s=i.shrinkWrap?r?0:t+e.bodyContext.borderInfo[p]:(o=e.frameBorder,a=e.framePadding,l=o[h]+a[h],e.getProp(p)-(o[f]+a[f])),{shrinkWrap:i.shrinkWrap,sizeModel:i,initialBegin:l,begin:l,end:s,collapsed:r,horizontal:n.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:s-l,maxChildSize:0,hasMinMaxConstraints:(c||m)&&i.shrinkWrap,minSize:c,maxSize:m?u:1e9,bodyPosProp:this.owner.manageHeight?g:n.marginBegin,dockBegin:h,dockEnd:f,posProp:g,sizeProp:p,setSize:n.setSize,shrinkWrapDock:e[n.shrinkWrapDock],sizeModelName:n.sizeModel,dockedPixelsEnd:0}},dockChild:function(e,t,i,n){var r,o,a=e.dockedItems[t.shrinkWrap?i:n],s=a.target,l=s.dock,d=t.sizeProp;s.ignoreParentFrame&&e.isCollapsingOrExpanding&&a.clearMarginCache(),a.marginInfo||a.getMarginInfo(),r=l===t.dockBegin?t.shrinkWrap?this.dockOutwardBegin(e,a,s,t):this.dockInwardBegin(e,a,s,t):l===t.dockEnd?t.shrinkWrap?this.dockOutwardEnd(e,a,s,t):this.dockInwardEnd(e,a,s,t):t.shrinkWrapDock?(o=a.getProp(d)+a.marginInfo[d],t.maxChildSize=Math.max(t.maxChildSize,o),0):this.dockStretch(e,a,s,t),a.dockedAt[t.posProp]=r},dockInwardBegin:function(e,t,i,n){var r,o,a,s=n.begin,l=n.sizeProp,d=i.ignoreParentFrame;return d&&(n.ignoreFrameBegin=t,a=i.dock,s-=(r=e.frameBorder[a])+e.framePadding[a]),i.overlay||(o=t.getProp(l)+t.marginInfo[l],n.begin+=o,d&&(n.begin-=r)),s},dockInwardEnd:function(e,t,i,n){var r,o=n.sizeProp,a=t.getProp(o)+t.marginInfo[o],s=n.end-a;return i.overlay||(n.end=s),i.ignoreParentFrame&&(n.ignoreFrameEnd=t,s+=(r=e.frameBorder[i.dock])+e.framePadding[i.dock],n.end+=r),s},dockOutwardBegin:function(e,t,i,n){var r=n.begin,o=n.sizeProp;return n.collapsed?n.ignoreFrameBegin=n.ignoreFrameEnd=t:i.ignoreParentFrame&&(n.ignoreFrameBegin=t),i.overlay||(r-=t.getProp(o)+t.marginInfo[o],n.begin=r),r},dockOutwardEnd:function(e,t,i,n){var r,o=n.end,a=n.sizeProp;return r=t.getProp(a)+t.marginInfo[a],n.collapsed?n.ignoreFrameBegin=n.ignoreFrameEnd=t:i.ignoreParentFrame&&(n.ignoreFrameEnd=t),i.overlay||(n.end=o+r,n.dockedPixelsEnd+=r),o},dockStretch:function(e,t,i,n){var r,o=i.dock,a=n.sizeProp,s="top"===o||"bottom"===o,l=e.frameBorder,d=t.offsets,u=e.framePadding,c=s?"right":"bottom",h=s?"left":"top",f=n.begin+d[h];return!1!==i.stretch&&(r=n.end-f-d[c],i.ignoreParentFrame&&(f-=u[h]+l[h],r+=u[a]+l[a]),r-=t.marginInfo[a],t[n.setSize](r)),f},finishAxis:function(e,t){if(isNaN(t.maxChildSize))return!1;var i,n,r,o,a=t.begin,s=t.end-a,l=t.collapsed,d=t.setSize,u=t.dockBegin,c=t.dockEnd,h=e.framePadding,f=e.frameBorder,g=f[u],p=e.framing,m=p&&p[u],x=l?0:h[u],y=t.sizeProp,v=t.ignoreFrameBegin,E=t.ignoreFrameEnd,b=e.bodyContext,C=Math.max(g+x-m,0);return t.shrinkWrap?(n=t.initialSize,p?i=(r=-a+g+x)-m-C:r=(i=-a)+x,l||(s+=h[y]),v?(r-=g,i-=g,v.dockedAt[t.posProp]-=x):s+=g,l||(E?E.dockedAt[t.posProp]+=h[c]:s+=f[c]),t.size=s,t.horizontal||this.owner.manageHeight||(o=!1)):(i=p?(r=0,a-m-C):(r=-g,a-x-g),n=s),t.delta=r,b[d](n,o),b.setProp(t.bodyPosProp,i),!isNaN(s)},beforeInvalidateShrinkWrapDock:function(e,t){var i=t.axis.sizeModelName;e[i].constrainedMin||(e[i]=Ext.layout.SizeModel.calculated)},afterInvalidateShrinkWrapDock:function(e,t){var i,n=t.axis,r=t.layout;e[n.sizeModelName].calculated&&(i=r.dockStretch(t.ownerContext,e,e.target,n),e.setProp(n.posProp,n.delta+i))},finishConstraints:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f=this.sizeModels,g=t.shrinkWrap,p=i.shrinkWrap,m=this.owner;if(g&&(l=t.size,d=t.collapsed?0:t.minSize,u=t.maxSize,c=t.maxChildSize,u<(h=Math.max(l,c))?(s=f.constrainedMax,o=u):h<d?(s=f.constrainedMin,o=d):l<c?(s=f.constrainedDock,m.dockConstrainedWidth=o=c):o=l),p&&(l=i.size,d=i.collapsed?0:i.minSize,u=i.maxSize,c=i.maxChildSize,u<(h=Math.max(l,c+l-i.initialSize))?(a=f.constrainedMax,r=u):h<d?(a=f.constrainedMin,r=d):l<c?(a=f.constrainedDock,m.dockConstrainedHeight=r=c):(e.collapsedVert||m.manageHeight||(n=!1,e.bodyContext.setProp("margin-bottom",i.dockedPixelsEnd)),r=l)),s||a){if(s&&a&&s.constrainedMax&&a.constrainedByMin)return e.invalidate({widthModel:s}),!1;if(!e.widthModel.calculatedFromShrinkWrap&&!e.heightModel.calculatedFromShrinkWrap)return e.invalidate({widthModel:s,heightModel:a}),!1}else this.invalidateAxes(e,t,i);return g&&(e.setWidth(o),s&&(e.widthModel=s)),p&&(e.setHeight(r,n),a&&(e.heightModel=a)),!0},invalidateAxes:function(e,t,i){var n,r,o,a,s,l,d,u,c=this.beforeInvalidateShrinkWrapDock,h=this.afterInvalidateShrinkWrapDock,f=t.end-t.begin,g=i.initialSize,p=t.shrinkWrapDock&&t.maxChildSize<=f,m=i.shrinkWrapDock&&i.maxChildSize<=g;if(p||m)for(m&&(i.begin=i.initialBegin,i.end=i.begin+i.initialSize),o=0,r=(n=e.dockedItems).length;o<r;++o)l=(a=n[o]).horizontal,d=null,p&&l?(u=t.sizeProp,s=f,d=t):m&&!l&&(u=i.sizeProp,s=g,d=i),d&&(s-=a.getMarginInfo()[u])!==a.props[u]&&a.invalidate({before:c,after:h,axis:d,ownerContext:e,layout:this})},finishPositions:function(e,t,i){var n,r,o=e.dockedItems,a=o.length,s=t.delta,l=i.delta;for(n=0;n<a;++n)(r=o[n]).setProp("x",s+r.dockedAt.x),r.setProp("y",l+r.dockedAt.y)},finishedLayout:function(e){var t=e.target;this.callParent(arguments),e.animatePolicy||(1===e.isCollapsingOrExpanding?t.afterCollapse(!1):2===e.isCollapsingOrExpanding&&t.afterExpand(!1))},getAnimatePolicy:function(e){var t,i;return 1===e.isCollapsingOrExpanding?t=this.lastCollapsedState:2===e.isCollapsingOrExpanding&&(t=e.lastCollapsedState),"left"===t||"right"===t?i=this.horizontalCollapsePolicy:"top"!==t&&"bottom"!==t||(i=this.verticalCollapsePolicy),i},getDockedItems:function(r,e){var o,t,i,n,a,s,l=this,d="visual"===r,u=d?Ext.ComponentQuery.query("[rendered]",l.owner.dockedItems.items):l.owner.dockedItems.items,c=u&&u.length&&!1!==r;if(null==e)i=c&&!d?u.slice():u;else{for(i=[],n=0,s=u.length;n<s;++n)a="top"===(t=u[n].dock)||"left"===t,(e?a:!a)&&i.push(u[n]);c=c&&i.length}return c&&(o="render"===(r=r||"render"),Ext.Array.sort(i,function(e,t){var i,n;return!o||(i=l.owner.dockOrder[e.dock])===(n=l.owner.dockOrder[t.dock])||i+n?(i=l.getItemWeight(e,r),n=l.getItemWeight(t,r),void 0!==i&&void 0!==n?i-n:0):i-n})),i||[]},getItemWeight:function(e,t){var i=e.weight||this.owner.defaultDockWeights[e.dock];return i[t]||i},getLayoutItems:function(){var e,t,i,n,r;if(this.owner.collapsed)r=this.owner.getCollapsedDockedItems();else for(t=(e=this.getDockedItems("visual")).length,r=[],n=0;n<t;n++)(i=e[n]).hidden||r.push(i);return r},measureContentWidth:function(e){var t=e.bodyContext;return t.el.getWidth()-t.getBorderInfo().width},measureContentHeight:function(e){var t=e.bodyContext;return t.el.getHeight()-t.getBorderInfo().height},redoLayout:function(e){var t=this.owner;1===e.isCollapsingOrExpanding?(t.reExpander&&t.reExpander.el.show(),t.addClsWithUI(t.collapsedCls),e.redo(!0)):2===e.isCollapsingOrExpanding&&(t.removeClsWithUI(t.collapsedCls),e.bodyContext.redo())},getRenderTarget:function(){return this.owner.bodyWrap},renderChildren:function(){var e=this.getDockedItems(),t=this.getRenderTarget();this.handleItemBorders(),this.renderItems(e,t)},renderItems:function(e,t){var i,n,r,o,a,s,l,d,u,c,h,f,g,p,m=this.owner,x={},y=e.length,v=m.body.dom,E=m.bodyWrap.dom,b=!!m.frameSize,C=m.bodyContainer;if(y){for(f=0;f<y;f++)(x[(o=e[f]).id]=o).dockToEl&&(r=!0);for(n=(i=this.getRenderTarget().dom.childNodes).length,f=l=0;f<n;++f){if(s=(a=i[f])===v){d=f;break}x[a.id]&&++l}if(s||Ext.log.error("Dock layout error for "+m.id+": bodyEl not found!"),d-=l,r){for(s=!1,l=0,n=(i=m.el.dom.childNodes).length,f=0;f<n;f++){if(a=i[f],b?!(s=a===E||a===C)&&Ext.fly(a).contains(E)&&(s=!0,m.bodyContainer=a):s=a===E,s){c=f;break}x[a.id]&&++l}s||Ext.log.error("Dock layout error for "+m.id+": bodyWrapEl not found!"),c-=l}for(u=h=0,f=0;f<y;f++)(o=e[f]).dockToEl?(p=m.el,g=c+h++,"right"===o.dock||"bottom"===o.dock?(g++,b&&g++):b&&0<g&&g--):(p=t,g=d+u++,"right"!==o.dock&&"bottom"!==o.dock||g++),o.rendered?this.isValidParent(o,p,g)||this.moveItem(o,p,g):this.renderItem(o,p,g)}},undoLayout:function(e){var t=this.owner;1===e.isCollapsingOrExpanding?(t.reExpander&&t.reExpander.el.hide(),t.removeClsWithUI(t.collapsedCls),e.undo(!0)):2===e.isCollapsingOrExpanding&&(t.addClsWithUI(t.collapsedCls),e.bodyContext.undo())},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(e,t){var i,n,r=this.sizePolicy,o=this.owner.shrinkWrapDock;return!1===e.stretch?r.nostretch:(o=!0===o?3:o||0,(n="left"===(i=e.dock)||"right"===i)?(r=r.vert,o&=1):(r=r.horz,o&=2),o&&(t=t||this.owner.getSizeModel())[n?"height":"width"].shrinkWrap?r.shrinkWrap:r.stretch)},configureItem:function(e,t){this.callParent(arguments),e.addCls(this._itemCls),e.ignoreBorderManagement||e.addClsWithUI(this.getDockCls(e.dock))},getDockCls:function(e){return"docked-"+e},afterRemove:function(e){var t;this.callParent(arguments),e.removeCls(this._itemCls),e.ignoreBorderManagement||e.removeClsWithUI(this.getDockCls(e.dock)),(t=e.el&&e.el.dom)&&!e.destroying&&t.parentNode.removeChild(t),this.childrenChanged=!0},borderCollapseMap:{},getBorderCollapseTable:function(){var e,t=this.borderCollapseMap,i=this.owner,n=i.baseCls,r=i.ui;return(e=(t=t[n]||(t[n]={}))[r])||(n+="-"+r+"-outer-border-",t[r]=e=[0,n+"l",n+"b",n+"bl",n+"r",n+"rl",n+"rb",n+"rbl",n+"t",n+"tl",n+"tb",n+"tbl",n+"tr",n+"trl",n+"trb",n+"trbl"]),e}}),Ext.define("Ext.util.Memento",function(){function n(e,t,i,n){e[n?n+i:i]=t[i]}function t(e,t,i){delete e[i]}function r(e,t,i,n){var r=n?n+i:i,o=e[r];(o||e.hasOwnProperty(r))&&a(t,i,o)}function a(e,t,i){Ext.isDefined(i)?e[t]=i:delete e[t]}function o(e,t,i,n,r){var o,a;if(t)if(Ext.isArray(n))for(o=0,a=n.length;o<a;o++)e(t,i,n[o],r);else e(t,i,n,r)}return{data:null,target:null,constructor:function(e,t){this.data={},e&&(this.target=e,t&&this.capture(t))},capture:function(e,t,i){o(n,this.data||(this.data={}),t||this.target,e,i)},remove:function(e){o(t,this.data,null,e)},restore:function(e,t,i,n){o(r,this.data,i||this.target,e,n),!1!==t&&this.remove(e)},restoreAll:function(e,t){var i,n=t||this.target,r=this.data;for(i in e=!1!==e,r)r.hasOwnProperty(i)&&(a(n,i,r[i]),e&&delete r[i])}}}()),Ext.define("Ext.container.DockingContainer",{requires:["Ext.util.MixedCollection","Ext.Element"],isDockingContainer:!0,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,addDocked:function(e,t){var i,n,r,o,a=this,s=a.rendered,l=0,d=a.dockedItems,u=d.getCount();for(o=(e=a.prepareItems(e)).length,s&&Ext.suspendLayouts(),t=void 0===t?u:Math.min(t,u);l<o;l++)(r=e[l]).isDetached&&r.reattachToBody(),r.dock=r.dock||"top","left"!==r.dock&&"right"!==r.dock||a.horizontalDocks++,i=t+l,d.insert(i,r),n=!!r.instancedCmp,delete r.instancedCmp,r.onAdded(a,i,n),delete r.$initParent,a.onDockedAdd!==Ext.emptyFn&&a.onDockedAdd(r),a.hasListeners.dockedadd&&a.fireEvent("dockedadd",a,r,i);return a.rendered&&(a.updateLayout(),Ext.resumeLayouts(!0)),e},destroyDockedItems:function(){var e,t=this.dockedItems;if(t)for(;e=t.first();)this.removeDocked(e,{destroy:!0})},doRenderDockedItems:function(e,t,i){var n,r,o=t.$comp,a=o.componentLayout;o.tabGuard&&o.lookupTpl("tabGuardTpl");a.getDockedItems&&(r=(n=a.getDockedItems("render",!i))&&a.getItemsRenderTree(n))&&Ext.DomHelper.generateMarkup(r,e)},getDockedComponent:function(e){return Ext.isObject(e)&&(e=e.getItemId()),this.dockedItems.get(e)},getDockedItems:function(e,t){var i=this.getComponentLayout().getDockedItems("render",t);return e&&i.length&&(i=Ext.ComponentQuery.query(e,i)),i},getDockingRefItems:function(e,t){var i,n=e&&"*,* *",r=this.getDockedItems(n,!0);return r.push.apply(r,t),i=this.getDockedItems(n,!1),r.push.apply(r,i),r},initDockingItems:function(){var e=this.dockedItems;e&&e.isMixedCollection||(this.dockedItems=new Ext.util.ItemCollection,e&&this.addDocked(e))},insertDocked:function(e,t){this.addDocked(t,e)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(e,t){var i,n,r,o,a=this;return a.dockedItems.contains(e)&&(null==t?r=a.autoDestroy:"boolean"==typeof t?r=t:(r="destroy"in t&&t.destroy,o="detach"in t&&t.detach),"left"!==e.dock&&"right"!==e.dock||a.horizontalDocks--,(n=(i=a.componentLayout)&&a.rendered)&&i.onRemove(e),a.dockedItems.remove(e),e.destroyed||e.onRemoved(e.destroying||r),a.onDockedRemove(e),r?e.destroy():a.destroyed||(n&&i.afterRemove(e),o&&e.rendered&&e.detachFromBody()),a.hasListeners.dockedremove&&a.fireEvent("dockedremove",a,e),a.destroying||a.updateLayout()),e},moveDocked:function(e,t){this.rendered&&Ext.suspendLayouts(),this.removeDocked(e,{destroy:!1,detach:!0}),e.dock=t,this.addDocked(e),this.rendered&&(e.frame&&e.updateFrame(),Ext.resumeLayouts(!0))},setupDockingRenderTpl:function(e){e.renderDockedItems=this.doRenderDockedItems}}),Ext.define("Ext.panel.Panel",{extend:"Ext.container.Container",alias:"widget.panel",alternateClassName:"Ext.Panel",requires:["Ext.panel.Header","Ext.util.MixedCollection","Ext.toolbar.Toolbar","Ext.fx.Anim","Ext.panel.DD","Ext.XTemplate","Ext.layout.component.Dock","Ext.util.Memento"],mixins:{docking:"Ext.container.DockingContainer"},childEls:["bodyWrap","body"],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="',Ext.baseCSSPrefix,'hidden-clip" style="height:0">',"{headingText}","</div>","</tpl>","<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'before'); %}</tpl>",'<div id="{id}-bodyWrap" data-ref="bodyWrap" class="{baseCls}-bodyWrap"','<tpl if="bodyWrapAriaAttributes">','<tpl foreach="bodyWrapAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",">","{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",'<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}","</div>","<tpl if=\"hasTabGuard\">{% this.renderTabGuard(out, values, 'after'); %}</tpl>"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",titlePosition:0,headerConfigs:{glyph:1,icon:1,iconAlign:1,iconCls:1,title:1,titleAlign:1,titlePosition:1,titleRotation:1},beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titlePosition:null,titleRotation:null},animCollapse:Ext.enableFx,border:!0,closable:!1,closeAction:"destroy",closeToolText:"Close panel",collapsed:!1,collapsedCls:"collapsed",collapseFirst:!0,collapsible:void 0,collapseToolText:"Collapse panel",expandToolText:"Expand panel",constrain:!1,constrainHeader:!1,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:!0,frame:!1,frameHeader:!0,hideCollapseTool:!1,manageHeight:!0,maskElement:"el",minButtonWidth:75,preventHeader:!1,maintainTitlePosition:!1,shrinkWrapDock:!1,titleCollapse:void 0,baseCls:Ext.baseCSSPrefix+"panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:!0,defaultBindProperty:"title",addBodyCls:function(e){return(this.rendered?this.body:this.getProtoBody()).addCls(e),this},addTool:function(e){Ext.isArray(e)||(e=[e]);var t,i,n=this.header,r=e.length,o=this.tools;for(n&&n.isHeader||(n=null,o||(this.tools=o=[])),t=0;t<r;t++)"string"==typeof(i=e[t])||i.isTool||(i=Ext.apply({},i)),i.toolOwner=this,n?n.addTool(i):o.push(i);this.updateHeader()},addTools:Ext.emptyFn,getClosable:function(){return this.closable},setClosable:function(e){var t=this.tab;e=!!e,this.closable!==e&&(this.closable=e,t&&t.setClosable(e))},setCollapsible:function(e){var t=this.collapsible,i=this.collapseTool;(this.collapsible=e)&&!t?(this.updateCollapseTool(),(i=this.collapseTool)&&i.show()):!e&&t&&i&&i.hide()},addUIClsToElement:function(e){var t=this.callParent(arguments);return this.addBodyCls([Ext.baseCSSPrefix+e,this.baseCls+"-body-"+e,this.baseCls+"-body-"+this.ui+"-"+e]),t},afterCollapse:function(e){var t=this.ownerLayout;this.isCollapsingOrExpanding=0,this.updateCollapseTool(),e&&this.removeCls(Ext.baseCSSPrefix+"animating-size"),t&&t.afterCollapse(this,e),this.setHiddenDocked(),this.fireEvent("collapse",this)},afterExpand:function(e){var t=this.ownerLayout;this.isCollapsingOrExpanding=0,this.updateCollapseTool(),e&&this.removeCls(Ext.baseCSSPrefix+"animating-size"),t&&t.afterExpand(this,e),this.fireEvent("expand",this),this.fireHierarchyEvent("expand")},doDestroy:function(){var e=this;e.slideOutTask&&e.slideOutTask.cancel(),Ext.destroy(e.placeholder,e.ghostPanel,e.dd,e.accordionHeaderKeyNav,e.accordionBodyKeyNav,e.defaultButtonKeyNav),e.destroyDockedItems(),e.callParent()},beforeRender:function(){var e,t=this;t.getProtoBody(),t.callParent(),t.initTools(),(!t.preventHeader&&!1!==t.header||t.isViewportBorderChild)&&t.updateHeader(),t.afterHeaderInit=!0,t.collapsed&&(t.isPlaceHolderCollapse()?t.hidden||(t.setHiddenState(!0),t.preventCollapseFire=!0,t.placeholderCollapse(),delete t.preventCollapseFire,e=t.collapsed,t.collapsed=!1):(t.beginCollapse(),t.addClsWithUI(t.collapsedCls))),e&&(t.collapsed=e)},getMemento:function(e){if(e&&"string"==typeof e)return this[e+="Memento"]||(this[e]=new Ext.util.Memento(this))},beginCollapse:function(){var e,t=this,i=t.lastBox,n=t.rendered,r=t.getMemento("collapse"),o=t.getSizeModel(),a=t.header;r.capture(["height","minHeight","width","minWidth"]),i&&r.capture(t.restoreDimension(),i,"last."),t.collapsedVertical()?(o.width.shrinkWrap&&(t.width=n?t.getWidth():t.width||t.minWidth||100),delete t.height,t.minHeight=0):t.collapsedHorizontal()&&(o.height.shrinkWrap&&(t.height=n?t.getHeight():t.height||t.minHeight||100),delete t.width,t.minWidth=0),t.ownerCt&&t.ownerCt.getLayout().beginCollapse(t),t.isPlaceHolderCollapse()||!1===a||(a===(e=t.getReExpander())?(a.collapseImmune=!0,a.getInherited().collapseImmune=!0,a.addClsWithUI(t.getHeaderCollapsedClasses(a)),a.rendered&&a.updateFrame()):e.el&&(e.el.show(),e.hidden=!1)),t.resizer&&t.resizer.disable(),t.rendered&&(t.ariaEl.dom.setAttribute("aria-expanded",!1),t.isAccordionPanel&&t.body.dom.setAttribute("aria-hidden",!0))},beginDrag:function(){this.floatingDescendants&&this.floatingDescendants.hide()},beginExpand:function(){var e,t=this,i=t.lastBox,n=t.getMemento("collapse"),r=t.restoreDimension(),o=t.header;n&&(n.restore(["minHeight","minWidth",r]),i&&n.restore(r,!0,i,"last.")),t.ownerCt&&t.ownerCt.getLayout().beginExpand(t),t.isPlaceHolderCollapse()||!1===o||(o===(e=t.getReExpander())?(delete o.collapseImmune,delete o.getInherited().collapseImmune,o.removeClsWithUI(t.getHeaderCollapsedClasses(o)),o.rendered&&(o.expanding=!0,o.updateFrame(),delete o.expanding)):(e.hidden=!0,e.el.hide())),t.resizer&&t.resizer.enable(),t.rendered&&(t.ariaEl.dom.setAttribute("aria-expanded",!0),t.isAccordionPanel&&t.body.dom.setAttribute("aria-hidden",!1))},bridgeToolbars:function(){var e,r,t,o=this,i=[],a=o.minButtonWidth;function n(e,t,i,n){return Ext.isArray(e)?e={xtype:"toolbar",items:e}:e.isComponent||(e=Ext.apply({},e)),e.xtype||(e.xtype="toolbar"),e.dock=t,n&&(e.focusableContainer=!1),i&&(e.layout=Ext.apply({pack:{left:"start",center:"center"}[o.buttonAlign]||"end"},e.layout)),e}o.tbar&&(i.push(n(o.tbar,"top")),o.tbar=null),o.bbar&&(i.push(n(o.bbar,"bottom")),o.bbar=null),o.buttons&&(o.fbar=o.buttons,t=!(o.buttons=null)),o.fbar&&((e=n(o.fbar,"bottom",!0,t)).ui="footer",a&&(r=e.defaults,e.defaults=function(e){var t,i=r||{},n=!e.xtype||e.isButton;return n||(t=Ext.ClassManager.getByAlias("widget."+e.xtype))&&(n=t.prototype.isButton),!n||"minWidth"in i||(i=Ext.apply({minWidth:a},i)),i}),i.push(e),o.fbar=null),o.lbar&&(i.push(n(o.lbar,"left")),o.lbar=null),o.rbar&&(i.push(n(o.rbar,"right")),o.rbar=null),o.dockedItems?o.dockedItems.isMixedCollection?o.addDocked(i):(Ext.isArray(o.dockedItems)||(o.dockedItems=[o.dockedItems]),o.dockedItems=o.dockedItems.concat(i)):o.dockedItems=i},close:function(){!1!==this.fireEvent("beforeclose",this)&&this.doClose()},collapse:function(e,t){var i=this,n=e||i.collapseDirection,r=i.ownerCt,o=i.ownerLayout,a=i.rendered;return i.isCollapsingOrExpanding?i:(arguments.length<2&&(t=i.animCollapse),i.collapsed||!1===i.fireEvent("beforecollapse",i,e,t)||o&&o.onBeforeComponentCollapse&&!1===o.onBeforeComponentCollapse(i)?i:a&&r&&i.isPlaceHolderCollapse()?i.placeholderCollapse(e,t):(i.collapsed=n,a&&i.beginCollapse(),i.containsFocus&&i.collapseTool&&i.collapseTool.focus(),i.getInherited().collapsed=!0,i.fireHierarchyEvent("collapse"),a&&i.doCollapseExpand(1,t),i))},collapsedHorizontal:function(){var e=this.getCollapsed();return"left"===e||"right"===e},collapsedVertical:function(){var e=this.getCollapsed();return"top"===e||"bottom"===e},convertCollapseDir:function(e){return e.substr(0,1)},createGhost:function(e){var t=this,i=t.header,n=t.frame&&!t.alwaysFramed;return{xtype:"panel",hidden:!1,header:i?{titleAlign:i.getTitleAlign()}:null,ui:n?t.ui.replace(/-framed$/,""):t.ui,id:t.id+"-ghost",renderTo:Ext.getBody(),resizable:!1,draggable:!1,closable:!1,focusable:!1,floating:!0,alignOnScroll:!1,shadow:!1,frame:n,shim:t.shim,alwaysFramed:t.alwaysFramed,overlapHeader:t.overlapHeader,headerPosition:t.getHeaderPosition(),titleRotation:t.getTitleRotation(),baseCls:t.baseCls,getRefOwner:function(){return t.getRefOwner()},cls:t.baseCls+"-ghost "+(e||"")}},createReExpander:function(e,t){var i=this,n="left"===e,r="right"===e,o=n||r,a=i.ownerCt,s=i.header,l=Ext.apply({hideMode:"offsets",title:i.getTitle(),titleAlign:i.getTitleAlign(),titlePosition:i.getTitlePosition(),vertical:o,textCls:i.headerTextCls,icon:i.getIcon(),iconCls:i.getIconCls(),iconAlign:i.getIconAlign(),glyph:i.getGlyph(),baseCls:i.self.prototype.baseCls+"-header",ui:i.ui,frame:i.frame&&i.frameHeader,ignoreParentFrame:i.frame||i.overlapHeader,ignoreBorderManagement:i.frame||i.ignoreHeaderBorderManagement,indicateDrag:i.draggable,collapseImmune:!0,ariaRole:i.ariaRole,preventRefocus:!0,ownerCt:a&&"placeholder"===i.collapseMode?a:i,ownerLayout:i.componentLayout,forceOrientation:!0,margin:i.margin,defaultFocus:"tool[isDefaultExpandTool]"},t);return"mini"===i.collapseMode&&(o?l.width=1:l.height=1),s&&Ext.apply(l,{focusableContainer:s.focusableContainer,activeChildTabIndex:s.activeChildTabIndex,inactiveChildTabIndex:s.inactiveChildTabIndex,allowFocusingDisabledChildren:s.allowFocusingDisabledChildren}),i.hideCollapseTool||(!i.maintainTitlePosition&&(n||r&&i.isPlaceHolderCollapse())&&(l.titlePosition=1),l.tools=[{xtype:"tool",type:"expand-"+i.getOppositeDirection(e),isDefaultExpandTool:!0,uiCls:["top"],handler:i.toggleCollapse,scope:i,tooltip:i.expandToolText}]),(l=new Ext.panel.Header(l)).addClsWithUI(i.getHeaderCollapsedClasses(l)),l.expandTool=l.down("tool[isDefaultExpandTool=true]"),l},doClose:function(){this.fireEvent("close",this),this[this.closeAction]()},doCollapseExpand:function(e,t){var i=this.animCollapse,n=this.ownerLayout;return this.animCollapse=t,this.isCollapsingOrExpanding=e,t&&this.addCls(Ext.baseCSSPrefix+"animating-size"),n&&!t?n.onContentChange(this):this.updateLayout({isRoot:!0}),this.animCollapse=i,this},endDrag:function(){this.floatingDescendants&&this.floatingDescendants.show()},expand:function(e){var t=this,i=t.ownerLayout,n=t.rendered;return t.isCollapsingOrExpanding?t:(arguments.length||(e=t.animCollapse),t.collapsed||t.floatedFromCollapse?!1===t.fireEvent("beforeexpand",t,e)||i&&i.onBeforeComponentExpand&&!1===i.onBeforeComponentExpand(t)?t:(delete t.getInherited().collapsed,n&&t.isPlaceHolderCollapse()?t.placeholderExpand(e):(t.restoreHiddenDocked(),n&&t.beginExpand(),t.collapsed=!1,t.rendered&&t.doCollapseExpand(2,e),t)):t)},findReExpander:function(e){var t,i,n=Ext.Component,r=this.dockedItems.items,o=r.length;if("mini"!==this.collapseMode)switch(e){case n.DIRECTION_TOP:case n.DIRECTION_BOTTOM:for(i=0;i<o;i++)if(!(t=r[i]).hidden&&t.isHeader&&(!t.dock||"top"===t.dock||"bottom"===t.dock))return t;break;case n.DIRECTION_LEFT:case n.DIRECTION_RIGHT:for(i=0;i<o;i++)if(!(t=r[i]).hidden&&t.isHeader&&("left"===t.dock||"right"===t.dock))return t;break;default:throw new Error("Panel#findReExpander must be passed a valid collapseDirection")}},floatCollapsedPanel:function(){var e,t,i=this,n=i.placeholder,r=i.splitter,o=Ext.util.Region.from(n.getBox(!1,!0)),a=Ext.panel.Panel.floatCls,s=i.collapsed,l=i.ownerCt||i,d={mouseleave:i.onMouseLeaveFloated,mouseenter:i.onMouseEnterFloated,scope:i,destroyable:!0};if(!i.isSliding)if(i.el.hasCls(a))i.slideOutFloatedPanel();else if(i.isSliding=!0,n.el.hide(),n.hidden=!0,i.el.show(),i.setHiddenState(!1),i.collapsed=!1,l.updateLayout(),n.el.show(),n.hidden=!1,i.el.hide(),i.setHiddenState(!0),i.collapsed=s,l.updateLayout(),t=i.getBox(!1,!0),!1!==i.fireEvent("beginfloat",i)){switch(i.slideOutTask=i.slideOutTask||new Ext.util.DelayedTask(i.slideOutFloatedPanel,i),i.pointerLeaveListener=Ext.getDoc().on({mousedown:i.onFloatedPointerEvent,mousemove:i.onFloatedPointerEvent,scope:i,destroyable:!0}),i.placeholderListener||(i.placeholderListener=n.on({resize:i.onPlaceholderResize,scope:i,destroyable:!0})),i.phHoverListeners=n.el.on(d),i.elHoverListeners=i.el.on(d),i.el.addCls(a),i.floated=s,i.collapseTool&&i.collapseTool.el.hide(),r&&(o=o.union(r.getBox(!1,!0))),i.collapsed){case"top":i.width=o.width,i.setLocalXY(t.x,t.y+o.height);break;case"right":i.height=o.height,i.setLocalXY(t.x-o.width,t.y);break;case"bottom":i.width=o.width,i.setLocalXY(t.x,t.y-o.height);break;case"left":i.height=o.height,i.setLocalXY(t.x+o.width,t.y)}e=i.convertCollapseDir(i.collapsed),i.floatedFromCollapse=i.collapsed,i.collapsed=!1,i.setHiddenState(!1),i.el.slideIn(e,{preserveScroll:!0,duration:Ext.Number.from(i.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){i.isSliding=!1,i.fireEvent("endfloat",i),i.fireEvent("float",i)}}})}},onFloatedPointerEvent:function(e){this.owns(e)||this.placeholder.owns(e)||this.splitter&&this.splitter.owns(e)||this.floatCollapsedPanel&&this.el.getRegion().contains(e.getPoint())?this.slideOutTask.cancel():this.slideOutTask.delay(500)},onMouseEnterFloated:function(e){this.slideOutTask.cancel()},onMouseLeaveFloated:function(e){var t=e.getRelatedTarget();t&&(this.owns(t)||this.placeholder.owns(t))||this.slideOutTask.delay(500)},onPlaceholderResize:function(e,t,i){var n=this,r=n.splitter,o=n.getBox(!1,!0),a=Ext.util.Region.from(e.getBox(!1,!0));switch(r&&(a=a.union(r.getBox(!1,!0))),n.floated){case"top":n.width=t,n.setLocalY(a.y+a.height);break;case"right":n.height=i,n.setLocalX(a.x-o.width);break;case"bottom":n.width=t,n.setLocalY(a.y-o.height);break;case"left":n.height=i,n.setLocalX(a.x+a.width)}n.updateLayout({isRoot:!0})},getAnimationProps:function(){var e;return e=this.callParent(),"number"==typeof this.animCollapseDuration?e.duration=this.animCollapseDuration:"number"==typeof this.animCollapse&&(e.duration=this.animCollapse),e},getCollapsed:function(){return!0===this.collapsed?this.collapseDirection:this.collapsed},getCollapsedDockedItems:function(){return!1===this.header||("placeholder"===this.collapseMode?this.emptyArray:[this.getReExpander()])},getComponent:function(e){var t=this.callParent(arguments);return void 0!==t||Ext.isNumber(e)||(t=this.getDockedComponent(e)),t},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(e){var t,i=this.collapsedCls;return t=[i,i+"-"+e.getDockName()],this.border&&(!this.frame||this.frame&&Ext.supports.CSS3BorderRadius)&&t.push(i+"-border-"+e.getDockName()),t},getOppositeDirection:function(e){var t=Ext.Component;switch(e){case t.DIRECTION_TOP:return t.DIRECTION_BOTTOM;case t.DIRECTION_RIGHT:return t.DIRECTION_LEFT;case t.DIRECTION_BOTTOM:return t.DIRECTION_TOP;case t.DIRECTION_LEFT:return t.DIRECTION_RIGHT}},getPlaceholder:function(e){var n=this,t=e||n.collapseDirection,i=null,r=n.placeholder,o=n.floatable,a=n.titleCollapse;return r||((o||n.collapsible&&a)&&(i={click:{fn:function(e,t){var i=r.expandTool;i&&i.el.dom.contains(t)||n[!a&&o?"floatCollapsedPanel":"toggleCollapse"]()},element:"el",scope:n}}),n.placeholder=r=Ext.widget(n.createReExpander(t,{id:n.id+"-placeholder",listeners:i}))),r.placeholderFor||(r.isComponent||(n.placeholder=r=n.lookupComponent(r)),Ext.applyIf(r,{margin:n.margin,placeholderFor:n,synthetic:!0}),r.addCls([Ext.baseCSSPrefix+"region-collapsed-placeholder",Ext.baseCSSPrefix+"region-collapsed-"+t+"-placeholder",n.collapsedCls])),r},getProtoBody:function(){var e=this.protoBody;return e||(this.protoBody=e=new Ext.util.ProtoElement({cls:this.bodyCls,style:this.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:!0})),e},getReExpander:function(e){var t=this,i=e||t.collapseDirection,n=t.reExpander||t.findReExpander(i),r=t.titleCollapse,o=null;return t.expandDirection=t.getOppositeDirection(i),n||(r&&(o={click:{fn:t.toggleCollapse,element:"el",scope:t}}),t.reExpander=n=t.createReExpander(i,{dock:i,cls:Ext.baseCSSPrefix+"docked "+t.baseCls+"-"+t.ui+"-collapsed",isCollapsedExpander:!0,listeners:o}),t.dockedItems.insert(0,n)),n},getRefItems:function(e){var t,i=this.placeholder;return i&&i.isComponent?(t=[i],e&&i.getRefItems&&t.push.apply(t,i.getRefItems(e))):t=[],t.push.apply(t,this.getDockingRefItems(e,this.callParent([e]))),t},getState:function(){var e,t,i=this,n=i.callParent()||{},r=i.collapsed,o=i.floated;return o&&(i.collapsed=o),n=i.addPropertyToState(n,"collapsed"),o&&(i.collapsed=r),i.getCollapsed()&&(e=i.getMemento("collapse").data,n=i.addPropertyToState(n,"collapsed",e),t=i.isPlaceHolderCollapse(),i.collapsedVertical()?t?delete(n=i.addPropertyToState(n,"height")).width:(delete n.height,e&&(n=i.addPropertyToState(n,"height",e.height))):t?delete(n=i.addPropertyToState(n,"width")).height:(delete n.width,e&&(n=i.addPropertyToState(n,"width",e.width)))),n},applyState:function(e){var t,i={};e&&((t=e.collapsed)&&(i=this.getMemento("collapse"),Ext.Object.merge(i.data,t),e.collapsed=!0),this.callParent([e]))},ghost:function(e){var t,i,n,r,o,a,s=this,l=s.el,d=s.ghostPanel,u=s.getBox(),c=s.header;if(Ext.suspendLayouts(),d?d.el.show():(s.ghostPanel=d=Ext.widget(s.createGhost(e)),d.el.dom.removeAttribute("tabIndex")),d.setHiddenState(!1),d.setXY([u.x,u.y]),d.setSize(u.width,u.height),d.floatParent=s.floatParent,c&&!s.preventHeader&&s.lastHeaderGen!==c.items.generation){for(a=(i=(t=d.header).query("tool")).length;a--;)t.remove(i[a]);t.setTitlePosition(0),d.addTool(s.ghostTools()),d.setTitle(s.getTitle()),t.setTitlePosition(c.getTitlePosition()),t.setIconAlign(c.getIconAlign()),t.setTitleAlign(c.getTitleAlign()),(r=s.getIconCls())?d.setIconCls(r):(n=s.getIcon())?d.setIcon(n):(o=s.getGlyph())&&d.setGlyph(o),t.addCls(Ext.baseCSSPrefix+"header-ghost"),s.lastHeaderGen=c.items.generation}return Ext.resumeLayouts(!0),s.elVisMode=l.getVisibilityMode(),l.setVisibilityMode(Ext.Element.CLIP),l.hide(),d},ghostTools:function(){var e,t,i,n=[],r=this.header,o=r?r.query("tool[hidden=false]"):[];if(o.length)for(e=0,t=o.length;e<t;e++)i=o[e],n.push({type:i.type,focusable:!1});else n=[{type:"placeholder"}];return n},initBodyBorder:function(){this.frame&&this.bodyBorder&&(Ext.isNumber(this.bodyBorder)||(this.bodyBorder=1),this.getProtoBody().setStyle("border-width",this.unitizeBox(this.bodyBorder)))},initBodyStyles:function(){var e=this.getProtoBody();void 0!==this.bodyPadding&&(this.layout.managePadding?e.setStyle("padding",0):e.setStyle("padding",this.unitizeBox(!0===this.bodyPadding?5:this.bodyPadding))),this.initBodyBorder()},initBorderProps:function(){this.frame&&this.border&&void 0===this.bodyBorder&&(this.bodyBorder=!1),this.frame&&this.border&&(!1===this.bodyBorder||0===this.bodyBorder)&&(this.manageBodyBorders=!0)},initComponent:function(){var e=this;e.collapsible&&e.addStateEvents(["expand","collapse"]),e.unstyled&&e.setUI("plain"),e.frame&&e.setUI(e.ui+"-framed"),e.bridgeToolbars(),e.initBorderProps(),e.callParent(),e.collapseDirection=e.collapseDirection||e.getHeaderPosition()||Ext.Component.DIRECTION_TOP,"number"==typeof e.animCollapse&&(e.animCollapseDuration=e.animCollapse),e.hiddenOnCollapse=new Ext.dom.CompositeElement},initItems:function(){this.callParent(),this.initDockingItems()},initRenderData:function(){var e,t=this,i=t.bodyWrapAriaRole,n=t.bodyAriaRole;return e=t.callParent(),t.initBodyStyles(),t.protoBody.writeTo(e),delete t.protoBody,t.headingText&&(e.headingText=t.headingText,t.addChildEl("headingEl")),i&&(e.bodyWrapAriaAttributes={role:i},!t.ariaStaticRoles[i]&&t.bodyWrapAriaRenderAttributes&&Ext.apply(e.bodyWrapAriaAttributes,t.bodyWrapAriaRenderAttributes)),n&&(e.bodyAriaAttributes={role:n},!t.ariaStaticRoles[n]&&t.bodyAriaRenderAttributes&&Ext.apply(e.bodyAriaAttributes,t.bodyAriaRenderAttributes)),e},calculateConstrainedPosition:function(e,t,i,n){var r,o,a=this.header;return this.constrainHeader&&(r=a.lastBox,n?n=a.vertical?[r?r.width:n[0],n[1]]:[n[0],r?r.height:n[1]]:r&&(n=[r.width,r.height]),o=this.floatParent,e=e||this.constrainTo||(o?o.getTargetEl():null)||this.container||this.el.parent()),this.callParent([e,t,i,n])},initTools:function(){var e,t,i,n=this,r=n.tools,o=r&&r.length;if(n.tools=[],o)for(e=0;e<o;++e)"string"==typeof(i=r[e])||i.isTool||(i=Ext.apply({},i)),n.tools.push(i),i.toolOwner=n;!n.collapsible||n.hideCollapseTool||!1===n.header||n.preventHeader||(n.updateCollapseTool(),n.collapseFirst&&n.tools.unshift(n.collapseTool)),n.addTools(),n.pinnable&&n.initPinnable(),n.closable&&(n.addClsWithUI("closable"),t={xtype:"tool",type:"close",scope:n,handler:n.close,tooltip:n.closeToolText},(n.isAccordionPanel||n.disableCloseToolFocus)&&(t.focusable=!1,t.ariaRole="presentation"),n.addTool(t)),n.collapseTool&&!n.collapseFirst&&n.addTool(n.collapseTool)},isLayoutRoot:function(){return!!this.floatedFromCollapse||this.callParent()},isPlaceHolderCollapse:function(){return"placeholder"===this.collapseMode},isVisible:function(e){return this.collapsed&&this.placeholder?this.placeholder.isVisible(e):this.callParent(arguments)},onBoxReady:function(){var e,t=this;t.callParent(arguments),t.collapsed&&t.setHiddenDocked(),t.isAccordionPanel&&(t.ariaEl=t.header.titleCmp.el,t.ariaEl.dom.setAttribute("aria-expanded",!t.collapsed),t.ariaEl.dom.setAttribute("aria-controls",t.body.id),t.body.dom.setAttribute("aria-labelledby",t.header.titleCmp.id),t.body.dom.setAttribute("aria-hidden",!!t.collapsed),t.accordionHeaderKeyNav=new Ext.util.KeyNav({target:t.header.titleCmp.el,scope:t,left:t.navigateAccordionHeader,right:t.navigateAccordionHeader,up:t.navigateAccordionHeader,down:t.navigateAccordionHeader,home:t.navigateAccordionHeader,end:t.navigateAccordionHeader,space:t.toggleCollapse,enter:t.toggleCollapse,del:{alt:!0,fn:t.maybeClose}}),t.accordionBodyKeyNav=new Ext.util.KeyNav({target:t.bodyWrap,scope:t,up:{ctrl:!0,fn:t.navigateAccordionBody}})),t.defaultButton&&(e=t.defaultButtonTarget?t[t.defaultButtonTarget]:t.body,t.defaultButtonKeyNav=new Ext.util.KeyNav({target:e,scope:t,defaultEventAction:"stopEvent",enter:t.fireDefaultButton}))},onHide:function(e,t,i){var n=this,r=n.dd;n.floatedFromCollapse&&n.slideOutFloatedPanel(!0),n.draggable&&r&&r.endDrag(),n.collapsed&&n.placeholder?(n.splitter&&(Ext.suspendLayouts(),n.splitter.hide(),Ext.resumeLayouts()),n.placeholder.hide()):n.callParent([e,t,i])},onRemoved:function(e){this.placeholder&&!e&&this.ownerCt.remove(this.placeholder,!1),this.callParent(arguments)},onShow:function(){this.collapsed&&this.isPlaceHolderCollapse()?(this.splitter&&(Ext.suspendLayouts(),this.splitter.show(),Ext.resumeLayouts()),this.setHiddenState(!0),this.placeholderCollapse()):this.callParent(arguments)},placeholderCollapse:function(e,t){var i,n=this,r=n.ownerCt,o=e||n.collapseDirection,a=Ext.panel.Panel.floatCls,s=n.collapseTool,l=n.getPlaceholder(o);return(Ext.Component.layoutSuspendCount||n.isLayoutSuspended())&&(t=!1),n.fireEvent("beginfloat",n),n.isCollapsingOrExpanding=1,n.setHiddenState(!0),n.collapsed=o,l.rendered?(l.el.dom.parentNode!==n.el.dom.parentNode&&n.el.dom.parentNode.insertBefore(l.el.dom,n.el.dom),l.hidden=!1,l.setHiddenState(!1),l.el.show(),r.updateLayout()):r.insert(r.items.indexOf(n),l),n.rendered?(n.focusPlaceholderExpandTool=n.focusPlaceHolder=!1,s&&Ext.ComponentManager.getActiveComponent()===s?n.focusPlaceholderExpandTool=!0:n.containsFocus&&(n.focusPlaceHolder=!0),n.el.setVisibilityMode(n.placeholderCollapseHideMode),t?(n.el.addCls(a),l.el.hide(),i=n.convertCollapseDir(o),n.el.slideOut(i,{preserveScroll:!0,duration:Ext.Number.from(t,Ext.fx.Anim.prototype.duration),listeners:{scope:n,afteranimate:function(){var e=this.placeholder.el;this.el.removeCls(a),e.show(),this.ownerCt?(e.setStyle("display","none"),e.slideIn(i,{easing:"linear",duration:100,listeners:{afteranimate:this.doPlaceholderCollapse,scope:this}})):this.doPlaceholderCollapse()}}})):(n.el.hide(),n.doPlaceholderCollapse())):(n.isCollapsingOrExpanding=0,n.preventCollapseFire||n.fireEvent("collapse",n)),n},doPlaceholderCollapse:function(){var e,t=this,i=t.placeholder,n=i.expandTool;t.focusPlaceholderExpandTool&&n?n.focus():t.focusPlaceHolder&&i.focus(),t.focusPlaceholderExpandTool=!1,i.setHiddenState(!1),i.rendered&&((e=i.ariaEl.dom).setAttribute("aria-hidden",!1),e.setAttribute("aria-expanded",!1)),(e=t.ariaEl.dom).setAttribute("aria-hidden",!0),e.setAttribute("aria-expanded",!1),t.isCollapsingOrExpanding=0,t.fireEvent("collapse",t),t.fireEvent("endfloat",t)},placeholderExpand:function(e){var t,i,n=this,r=n.collapsed,o=n.placeholder.expandTool,a=Ext.panel.Panel.floatCls,s=n.ownerLayout?n.ownerLayout.centerRegion:null;return Ext.Component.layoutSuspendCount&&(e=!1),n.floatedFromCollapse&&(i=n.getPosition(!0),n.slideOutFloatedPanelBegin(),n.slideOutFloatedPanelEnd(),n.floated=!1),o&&Ext.ComponentManager.getActiveComponent()===o&&(n.focusHeaderCollapseTool=!0,o._ariaRole=o.ariaEl.dom.getAttribute("role"),o._ariaLabel=o.ariaEl.dom.getAttribute("aria-label"),o.ariaEl.dom.setAttribute("role","presentation"),o.ariaEl.dom.removeAttribute("aria-label")),e?(Ext.suspendLayouts(),n.placeholder.hide(),n.el.show(),n.collapsed=!1,n.setHiddenState(!1),s&&!i&&(s.hidden=!0),Ext.resumeLayouts(!0),s&&(s.hidden=!1),n.floatedFromCollapse||n.fireEvent("beginfloat",n),n.el.addCls(a),n.isCollapsingOrExpanding=2,i?(t=n.getXY(),n.setLocalXY(i[0],i[1]),n.setXY([t[0],t[1]],{duration:Ext.Number.from(e,Ext.fx.Anim.prototype.duration),listeners:{scope:n,afteranimate:function(){this.el.removeCls(a),this.isCollapsingOrExpanding=0,this.fireEvent("expand",this),this.fireEvent("endfloat",this)}}})):(n.el.hide(),n.placeholder.el.show(),n.placeholder.hidden=!1,n.setHiddenState(!1),n.el.slideIn(n.convertCollapseDir(r),{preserveScroll:!0,duration:Ext.Number.from(e,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:n.doPlaceholderExpand,scope:n}}))):(n.floated=n.collapsed=!1,n.doPlaceholderExpand(!0)),n},doPlaceholderExpand:function(e){var t=this,i=t.placeholder,n=t.collapseTool,r=i.expandTool;(e=!0===e)&&(Ext.suspendLayouts(),t.show()),t.el.removeCls(Ext.panel.Panel.floatCls),i.hide(),e?Ext.resumeLayouts(!0):t.updateLayout(),t.focusHeaderCollapseTool&&n&&n.focus(),t.focusHeaderCollapseTool=!1,i.ariaEl.dom.setAttribute("aria-expanded",!0),t.ariaEl.dom.setAttribute("aria-expanded",!0),r&&r._ariaRole&&(r.ariaEl.dom.setAttribute("role",r._ariaRole),r.ariaEl.dom.setAttribute("aria-label",r._ariaLabel),r._ariaRole=r._ariaLabel=null),t.isCollapsingOrExpanding=0,t.fireEvent("expand",t),t.fireEvent("endfloat",t)},remove:function(e,t){var i=this.dockedItems;return i&&i.contains(e)?this.removeDocked(e,t):this.callParent([e,t]),e},removeBodyCls:function(e){return(this.rendered?this.body:this.getProtoBody()).removeCls(e),this},removeUIClsFromElement:function(e){var t=this.callParent(arguments);return this.removeBodyCls([Ext.baseCSSPrefix+e,this.baseCls+"-body-"+e,this.baseCls+"-body-"+this.ui+"-"+e]),t},restoreDimension:function(){var e=this.collapseDirection;return"top"===e||"bottom"===e?"height":"width"},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,!0)},setBodyStyle:function(e,t){var i=this.rendered?this.body:this.getProtoBody();return Ext.isFunction(e)&&(e=e()),1===arguments.length?(Ext.isString(e)&&(e=Ext.Element.parseStyles(e)),i.setStyle(e)):i.setStyle(e,t),this},setBorder:function(e,t){if(!t){var i=this.header;e=e?!0===e?"1px":this.unitizeBox(e):0,i&&(i.isHeader?i.setBorder(e):i.border=e),this.rendered&&!1!==this.bodyBorder&&this.body.setStyle("border-width",e),this.updateLayout(),this.border=e}},setCollapsed:function(e){this[e?"collapse":"expand"]()},setDockedItemsVisibility:function(e,t){var i,n,r=this.getDockedItems(),o=r.length,a=0;for(!1!==this.header&&(n=this.getReExpander());a<o;a++)(i=r[a])&&i!==n&&i.el&&e.add(i.el);e.setStyle("visibility",t?"":"hidden"),e.clear()},setGlyph:function(e){this.setHeaderConfig(e,"glyph","setGlyph",!0)},setIcon:function(e){this.setHeaderConfig(e,"icon","setIcon",!0)},setIconCls:function(e){this.setHeaderConfig(e,"iconCls","setIconCls",!0)},setIconAlign:function(e){this.setHeaderConfig(e,"iconAlign","setIconAlign",!0)},setTitleAlign:function(e){this.setHeaderConfig(e,"titleAlign","setTitleAlign",!0)},setTitlePosition:function(e){this.setHeaderConfig(e,"titlePosition","setTitlePosition",!0)},setTitleRotation:function(e){this.setHeaderConfig(e,"titleRotation","setTitleRotation",!0)},setTitle:function(e){e!==this.title&&this.headingEl&&this.headingEl.setHtml(e),this.setHeaderConfig(e,"title","setTitle",!1)},setHeaderConfig:function(e,t,i,n){var r,o=this,a=o[t],s=o.header,l=o.placeholder,d=o.reExpander;e!==a&&(o[t]=e,s?s.isHeader?s[i](e):n&&(s[t]=e):(o.rendered||o.afterHeaderInit)&&o.updateHeader(),d&&d[i](e),l&&l[i]&&l[i](e),r=t.toLowerCase()+"change",o.hasListeners[r]&&o.fireEvent(r,o,e,a))},setHiddenDocked:function(){var e=new Ext.dom.CompositeElement;this.hiddenOnCollapse.add(this.body),e.add(this.body),this.setDockedItemsVisibility(e,!1)},setUI:function(e){this.callParent(arguments),this.header&&this.header.rendered&&this.header.setUI(e)},toggleCollapse:function(){return this.collapsed||this.floatedFromCollapse?this.expand():this.collapse()},updateCollapseTool:function(){var e,t=this,i=t.collapseTool;!i&&t.collapsible&&(t.collapseDirection=t.collapseDirection||t.getHeaderPosition()||"top",e={xtype:"tool",handler:t.toggleCollapse,scope:t},t.isAccordionPanel&&(e.focusable=!1,e.ariaRole="presentation"),t.collapseTool=t.expandTool=i=Ext.widget(e)),i&&(t.collapsed&&!t.isPlaceHolderCollapse()?(i.setType("expand-"+t.getOppositeDirection(t.collapseDirection)),i.setTooltip(t.expandToolText)):(i.setType("collapse-"+t.collapseDirection),i.setTooltip(t.collapseToolText)))},navigateAccordionHeader:function(e){var t;switch(e.getKey()){case e.UP:case e.LEFT:t=this.findAccordionSibling("prev");break;case e.DOWN:case e.RIGHT:t=this.findAccordionSibling("next");break;case e.HOME:t=this.findAccordionSibling("first");break;case e.END:t=this.findAccordionSibling("last");break;case e.DELETE:(t=this.findAccordionSibling("prev")||this.findAccordionSibling("next"))||(e.doNotClose=!0)}e.stopEvent(),t&&t!==this&&t.header.titleCmp.focus()},navigateAccordionBody:function(e){var t;e.getKey()===e.UP&&(t=this),e.stopEvent(),t&&t.header.titleCmp.focus()},findAccordionSibling:function(e,t){var i,n=this,r="[isAccordionPanel]";switch(e){case"prev":(i=n.prev(r))||(n.accordionWrapOver?i=n.ownerCt.child(r+":last"):t&&(i=n));break;case"next":(i=n.next(r))||(n.accordionWrapOver?i=n.ownerCt.child(r+":first"):t&&(i=n));break;case"first":i=n.ownerCt.child(r+":first");break;case"last":i=n.ownerCt.child(r+":last")}return i},fireDefaultButton:function(e){var t,i=this;return"TEXTAREA"===e.target.tagName||"true"===e.target.getAttribute("aria-multiline")||((t=(i.lookupReferenceHolder(!1)||i).lookupReference(i.defaultButton))&&t.click?(t.click(e),e.stopEvent(),!1):void(t?Ext.raise({msg:'Component referenced by defaultButton config "'+i.defaultButton+'" in '+i.xtype+" "+i.id+" does not have click() method",component:t}):Ext.raise({msg:'No component found for defaultButton reference "'+i.defaultButton+'" in '+i.xtype+" "+i.id,panel:i})))},maybeClose:function(e){this.closable&&(this.navigateAccordionHeader(e),e.doNotClose||this.close())},canFocus:function(e,t){return this.collapsed?!(!this.placeholder||!this.placeholder.canFocus(e,t)):this.mixins.focusable.canFocus.call(this,e,t)},focus:function(){var e=this.placeholder;this.collapsed&&e&&e.canFocus()?e.focus.apply(e,arguments):this.callParent(arguments)},onFocusEnter:function(e){var t=this.ariaEl.dom;this.callParent([e]),this.isAccordionPanel&&t&&t.setAttribute("aria-selected",!0)},onFocusLeave:function(e){var t=this.ariaEl.dom;this.callParent([e]),this.isAccordionPanel&&t&&t.setAttribute("aria-selected","false")},updateHeaderPosition:function(e){var t=this.header;t&&t.isHeader&&t.setDock(e)},unghost:function(e,t,i){var n=this.el,r=this.ghostPanel;r&&(n.show(),n.setVisibilityMode(this.elVisMode),!1!==e?!1!==t&&this.setPagePosition(r.getXY()):n.hide(),r.el.hide(),r.setHiddenState(!0))},updateHeader:function(e){var t,i,n=this,r=n.header,o=n.getTitle(),a=n.tools,s=n.getIcon(),l=n.getGlyph(),d=n.getIconCls(),u=l||s||d,c=n.ariaEl.dom,h=n.getHeaderPosition(),f="left"===h||"right"===h;Ext.isObject(r)||!1!==r&&(e||o||u||a&&a.length||n.collapsible&&!n.titleCollapse)?(r&&r.isHeader?(r.dockToEl=!0,r.show()):(Ext.isObject(r)&&n.syncHeaderConfigs(r),r=n.header=Ext.widget(Ext.merge({xtype:"header",title:o,titleAlign:n.getTitleAlign(),titlePosition:n.getTitlePosition(),vertical:f,dock:n.getHeaderPosition()||"top",dockToEl:!0,titleRotation:n.getTitleRotation(),textCls:n.headerTextCls,iconCls:d,iconAlign:n.getIconAlign(),icon:s,glyph:l,baseCls:n.baseCls+"-header",tools:a,ui:n.ui,id:n.id+"_header",overCls:n.headerOverCls,indicateDrag:n.draggable,frame:(n.frame||n.alwaysFramed)&&n.frameHeader,ignoreParentFrame:n.frame||n.overlapHeader,ignoreBorderManagement:n.frame||n.ignoreHeaderBorderManagement,isAccordionHeader:n.isAccordionPanel,ownerCt:n,synthetic:!0,listeners:n.collapsible&&n.titleCollapse?{click:n.toggleCollapse,scope:n}:null},n.header)),n.addDocked(r,0)),n.isAccordionPanel?c?(c.setAttribute("aria-labelledby",r.id+"-title"),c.removeAttribute("aria-label")):((i=n.ariaRenderAttributes||(n.ariaRenderAttributes={}))["aria-labelledby"]=r.id+"-title",delete i["aria-label"]):o?"tabpanel"!==n.ariaRole&&(c?(c.setAttribute("aria-labelledby",r.id+"-title-textEl"),c.removeAttribute("aria-label")):((i=n.ariaRenderAttributes||(n.ariaRenderAttributes={}))["aria-labelledby"]=r.id+"-title-textEl",delete i["aria-label"])):n.ariaRenderAttributes&&delete n.ariaRenderAttributes["aria-label"]):(r&&r.hide(),o=Ext.util.Format.stripTags(o),c?c.hasAttribute("aria-labelledby")||(o?c.setAttribute("aria-label",o):c.removeAttribute("aria-label")):(i=n.ariaRenderAttributes||(n.ariaRenderAttributes={}))["aria-labelledby"]||(o?i["aria-label"]=o:delete i["aria-label"])),n.isViewportBorderChild&&!n.hasOwnProperty("ariaRole")&&(n.ariaRole="region"),"region"!==n.ariaRole||o||Ext.ariaWarn(n,"Panel "+n.id+" is a region section of the application, but it does not have a title. Per WAI-ARIA, all regions should have a heading element that contains region's title."),o&&"region"===n.ariaRole?(t=n.headingEl)?t.setHtml(o):n.rendered?(n.headingEl=Ext.dom.Helper.insertFirst(n.el,{tag:"div",id:n.id+"-headingEl",role:"heading",class:Ext.baseCSSPrefix+"hidden-clip",style:"height:0",html:o},!0),c.removeAttribute("aria-label"),c.setAttribute("aria-labelledby",n.id+"-headingEl")):(n.headingText=n.title,(i=n.ariaRenderAttributes||(n.ariaRenderAttributes={}))["aria-labelledby"]=n.id+"-headingEl",delete i["aria-label"]):n.headingEl&&(n.headingEl.destroy(),n.headingEl=null)},statics:{floatCls:Ext.baseCSSPrefix+"border-region-slide-in"},privates:{addUIToElement:function(){this.callParent(arguments),this.addBodyCls(this.baseCls+"-body-"+this.ui)},applyTargetCls:function(e){this.getProtoBody().addCls(e)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.protoBody||this.frameBody||this.el},initDraggable:function(){this.simpleDrag?this.initSimpleDraggable():this.dd=new Ext.panel.DD(this,Ext.isBoolean(this.draggable)?null:this.draggable)},initResizable:function(e){this.callParent([e]),this.collapsed&&this.resizer.disable()},initSimpleDraggable:function(){var e=this,t=e.draggable;e.header||t.delegate||e.updateHeader(!0),(e.header||t.delegate)&&(t=Ext.apply({el:e.el,delegate:e.header&&e.header.el},t),(e.constrain||e.constrainHeader)&&(t.constrain=e.constrain,t.constrainDelegate=e.constrainHeader,t.constrainTo=e.constrainTo||e.container),t=e.dd=new Ext.util.ComponentDragger(e,t),e.relayEvents(t,["dragstart","drag","dragend"]))},removeUIFromElement:function(){this.callParent(arguments),this.removeBodyCls(this.baseCls+"-body-"+this.ui)},setupRenderTpl:function(e){this.callParent(arguments),this.setupDockingRenderTpl(e)},slideOutFloatedPanel:function(e){function t(){r.slideOutFloatedPanelEnd(),r.el.removeCls(Ext.baseCSSPrefix+"border-region-slide-in"),r.fireEvent("endfloat",r)}var i,n,r=this,o=r.el;if(!r.isSliding&&!r.destroyed){if(r.isSliding=!0,r.floated=!1,r.slideOutFloatedPanelBegin(),e)return o.hide(),t();"string"==typeof r.collapsed&&(i=r.convertCollapseDir(r.collapsed)),r.fireEvent("beginfloat",r),o.slideOut(i,{preserveScroll:!0,duration:Ext.Number.from(r.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:t}}),this.containsFocus&&(n=this.findFocusTarget())&&n.focus()}},slideOutFloatedPanelBegin:function(){this.collapsed=this.floatedFromCollapse,this.setHiddenState(!0),this.floatedFromCollapse=null,Ext.destroy(this.pointerLeaveListener,this.phHoverListeners,this.elHoverListeners)},slideOutFloatedPanelEnd:function(e){this.collapseTool&&this.collapseTool.el.show(),this.slideOutTask.cancel(),this.isSliding=!1,e||this.fireEvent("unfloat",this)},syncHeaderConfigs:function(e){var t,i;for(t in e)i=e[t],this.headerConfigs[t]&&void 0!==i&&(this[t]=i)}}},function(){var e=this.prototype;e.animCollapse=Ext.enableFx,e.placeholderCollapseHideMode=Ext.Element.VISIBILITY}),Ext.define("Ext.layout.container.Table",{extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.TableLayout",alias:"layout.table",type:"table",createsInnerCt:!0,targetCls:Ext.baseCSSPrefix+"table-layout-ct",tableCls:Ext.baseCSSPrefix+"table-layout",cellCls:Ext.baseCSSPrefix+"table-layout-cell",childEls:["table","tbody"],tableAttrs:null,getItemSizePolicy:function(e){return this.autoSizePolicy},initInheritedState:function(e,t){t.inShrinkWrapTable=!0},getHiddenItems:function(){var e,t,i=[],n=this.owner.items.items,r=n.length;for(e=0;e<r;++e)(t=n[e]).rendered&&t.hidden&&i.push(t);return i},renderChildren:function(){var e,t,i,n,r,o,a,s,l=this,d=l.getLayoutItems(),u=l.tbody.dom,c=u.rows,h=d.length,f=l.getHiddenItems();for(e=l.calculateCells(d),s=0;s<h;s++)if(i=(t=e[s]).rowIdx,n=t.cellIdx,r=d[s],(o=c[i])||(o=u.insertRow(i),l.trAttrs&&o.set(l.trAttrs)),a=Ext.get(o.cells[n]||o.insertCell(n)),r.rendered?l.isValidParent(r,a,i,n,u)||l.moveItem(r,a,0):l.renderItem(r,a,0),l.tdAttrs&&a.set(l.tdAttrs),r.tdAttrs&&a.set(r.tdAttrs),a.set({colSpan:r.colspan||1,rowSpan:r.rowspan||1,cls:l.cellCls+" "+(r.cellCls||"")}),!e[s+1]||e[s+1].rowIdx!==i)for(n++;o.cells[n];)o.deleteCell(n);for(i++;u.rows[i];)u.deleteRow(i);for(s=0,h=f.length;s<h;++s)l.ensureInDocument(f[s].getEl())},ensureInDocument:function(e){for(var t=e.dom.parentNode;t;){if("BODY"===t.tagName.toUpperCase())return;t=t.parentNode}Ext.getDetachedBody().appendChild(e,!0)},calculate:function(e){if(e.hasDomProp("containerChildrenSizeDone")){var t=e.targetContext,i=e.widthModel.shrinkWrap,n=e.heightModel.shrinkWrap,r=n||i,o=r&&this.table.dom,a=r&&t.getPaddingInfo();i&&e.setContentWidth(o.offsetWidth+a.width,!0),n&&e.setContentHeight(o.offsetHeight+a.height,!0)}else this.done=!1},calculateCells:function(e){var t,i,n,r=[],o=0,a=0,s=0,l=this.columns||1/0,d=[],u=e.length;for(i=0;i<u;i++){for(t=e[i];l<=a||0<d[a];)if(l<=a)for(o++,n=s=a=0;n<l;n++)0<d[n]&&d[n]--;else a++;for(r.push({rowIdx:o,cellIdx:s}),n=t.colspan||1;n;--n)d[a]=t.rowspan||1,++a;++s}return r},getRenderTree:function(){var e,t,i,n,r,o,a,s,l=this,d=l.getLayoutItems(),u=[],c=Ext.apply({tag:"table",id:l.owner.id+"-table","data-ref":"table",role:"presentation",cls:l.tableCls,cellspacing:0,cellpadding:0,cn:{tag:"tbody",id:l.owner.id+"-tbody","data-ref":"tbody",role:"presentation",cn:u}},l.tableAttrs),h=l.tdAttrs,f=d.length;for(a=l.calculateCells(d),s=0;s<f;s++)e=d[s],n=(t=a[s]).rowIdx,r=t.cellIdx,(i=u[n])||(i=u[n]={tag:"tr",role:"presentation",cn:[]},l.trAttrs&&Ext.apply(i,l.trAttrs)),o=i.cn[r]={tag:"td",role:"presentation"},h&&Ext.apply(o,h),Ext.apply(o,{colSpan:e.colspan||1,rowSpan:e.rowspan||1,cls:l.cellCls+" "+(e.cellCls||"")}),l.configureItem(e),o.cn=e.getRenderTree();return c},isValidParent:function(e,t,i,n){return 3===arguments.length?this.table.isAncestor(e.el):e.el.dom.parentNode===this.tbody.dom.rows[i].cells[n]},destroy:function(){var e,t,i,n;if(this.owner.rendered&&(e=this.getRenderTarget()))for(i=0,n=(t=e.query("."+this.cellCls,!1)).length;i<n;i++)t[i].destroy();this.callParent()}}),Ext.define("Ext.container.ButtonGroup",{extend:"Ext.panel.Panel",alias:"widget.buttongroup",alternateClassName:"Ext.ButtonGroup",requires:["Ext.layout.container.Table"],baseCls:Ext.baseCSSPrefix+"btn-group",layout:{type:"table"},defaultType:"button",frame:!0,frameHeader:!1,titleAlign:"center",noTitleCls:"notitle",bodyAriaRole:"toolbar",focusableContainerEl:"body",focusableContainer:!0,initComponent:function(){var e=this.columns;e&&(this.layout=Ext.apply({columns:e},this.layout)),this.title||this.addClsWithUI(this.noTitleCls),this.callParent()},onBeforeAdd:function(e){e.isButton&&(this.defaultButtonUI&&"default"===e.ui&&!e.hasOwnProperty("ui")?e.ui=this.defaultButtonUI:e.ui=e.ui+"-toolbar"),this.callParent(arguments)},beforeRender:function(){this.callParent(),this.afterHeaderInit&&!this.header&&this.title&&((this.bodyAriaRenderAttributes||(this.bodyAriaRenderAttributes={}))["aria-label"]=this.title)},updateHeader:function(e){var t,i,n=this,r=n.body;n.callParent([e]),(t=n.header)?r?(r.dom.setAttribute("aria-labelledby",t.id+"-title-textEl"),r.dom.removeAttribute("aria-label")):((i=n.bodyAriaRenderAttributes||(n.bodyAriaRenderAttributes={}))["aria-labelledby"]=t.id+"-title-textEl",delete i["aria-label"]):n.title&&(r?(r.dom.setAttribute("aria-label",n.title),r.dom.removeAttribute("aria-labelledby")):((i=n.bodyAriaRenderAttributes||(n.bodyAriaRenderAttributes={}))["aria-label"]=n.title,delete i["aria-labelledby"]))},privates:{applyDefaults:function(e){return Ext.isString(e)||(e=this.callParent(arguments)),e}}}),Ext.define("Ext.container.Monitor",{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,clearPropertiesOnDestroy:!1,clearPrototypeOnDestroy:!1,disabled:0,constructor:function(e){Ext.apply(this,e)},destroy:function(){this.unbind(),this.callParent()},bind:function(e){(this.target=e).on("beforedestroy",this.disable,this),this.onContainerAdd(e)},unbind:function(){var e=this.target;!e||e.destroying||e.destroyed||(this.onContainerRemove(e,e),e.un("beforedestroy",this.disable,this)),this.items=Ext.destroy(this.items)},disable:function(){++this.disabled},enable:function(){0<this.disabled&&--this.disabled},handleAdd:function(e,t){this.disabled||(Ext.ComponentQuery.is(t,this.selector)&&this.onItemAdd(t.ownerCt,t),t.isQueryable&&this.onContainerAdd(t))},onItemAdd:function(e,t){var i=this.items,n=this.addHandler;this.disabled||(n&&n.call(this.scope||t,t),i&&i.add(t)),t.clearPropertiesOnDestroy=t.clearPrototypeOnDestroy=!1},onItemRemove:function(e,t){var i=this.items,n=this.removeHandler;this.disabled||(n&&n.call(this.scope||t,t),i&&i.remove(t))},onContainerAdd:function(e,t){var i,n,r,o;if(e.isContainer&&e.on({scope:this,add:this.handleAdd,dockedadd:this.handleAdd,remove:this.handleRemove,dockedremove:this.handleRemove}),!0!==t)for(r=0,n=(i=e.query(this.selector)).length;r<n;++r)o=i[r],this.onItemAdd(o.ownerCt,o);for(r=0,n=(i=e.query(">container")).length;r<n;++r)this.onContainerAdd(i[r],!0);e.clearPropertiesOnDestroy=e.clearPrototypeOnDestroy=!1},handleRemove:function(e,t){this.disabled||(Ext.ComponentQuery.is(t,this.selector)&&this.onItemRemove(e,t),t.isQueryable&&this.onContainerRemove(e,t))},onContainerRemove:function(e,t){var i,n,r,o;if(!t.destroyed&&t.isContainer&&(this.removeCtListeners(t),!t.destroying)){for(n=0,r=(i=t.query(this.selector)).length;n<r;++n)o=i[n],this.onItemRemove(o.ownerCt,o);for(n=0,r=(i=t.query("container")).length;n<r;++n)this.removeCtListeners(i[n])}this.invalidateItems(!0)},removeCtListeners:function(e){e.un({scope:this,add:this.handleAdd,dockedadd:this.handleAdd,remove:this.handleRemove,dockedremove:this.handleRemove})},getItems:function(){var e=this.items;return e||(e=this.items=new Ext.util.MixedCollection).addAll(this.target.query(this.selector)),e},invalidateItems:function(e){var t=this.invalidateHandler;e&&t&&t.call(this.scope||this,this),this.items=Ext.destroy(this.items)}}),Ext.define("Ext.plugin.Viewport",{extend:"Ext.plugin.Abstract",requires:["Ext.Responsive"],alias:"plugin.viewport",setCmp:function(e){(this.cmp=e)&&!e.isViewport&&(this.decorate(e),e.renderConfigs&&e.flushRenderConfigs(),e.setupViewport())},destroy:function(){var e=this.cmp.el;this.callParent(),e&&(delete e.setHeight,delete e.setWidth)},statics:{decorate:function(e){Ext.applyIf(e.prototype||e,{ariaRole:"application",viewportCls:Ext.baseCSSPrefix+"viewport"}),Ext.override(e,{isViewport:!0,preserveElOnDestroy:!0,initComponent:function(){this.callParent(),this.setupViewport()},getSizeModel:function(){var e=Ext.layout.SizeModel.configured;return e.pairsByHeightOrdinal[e.ordinal]},handleViewportResize:function(){var e=Ext.dom.Element,t=e.getViewportWidth(),i=e.getViewportHeight();t===this.width&&i===this.height||this.setSize(t,i)},setupViewport:function(){var e=this,t=document.body;e.$responsiveId||(e.setResponsiveConfig(!0),Ext.mixin.Responsive.register(e),e.setupResponsiveContext()),t.id||(t.id=e.id),t.setAttribute("data-componentid",e.id),e.ariaStaticRoles[e.ariaRole]||t.setAttribute("role",e.ariaRole),t=e.el=Ext.getBody(),Ext.fly(document.documentElement).addCls(e.viewportCls),t.setHeight=t.setWidth=Ext.emptyFn,t.dom.scroll="no",e.allowDomMove=!1,e.renderTo=t,Ext.supports.Touch&&e.addMeta("apple-mobile-web-app-capable","yes"),Ext.scrollbar.size(),e.width=e.height=void 0,e.initialViewportHeight=Ext.Element.getViewportHeight(),e.initialViewportWidth=Ext.Element.getViewportWidth()},afterLayout:function(e){Ext.supports.Touch&&(document.body.scrollTop=0),this.callParent([e])},onRender:function(){var e=this,t=(e.getOverflowEl(),Ext.getBody());e.callParent(arguments),Ext.setViewportScroller(e.getScrollable()||{x:!1,y:!1,element:t}),e.getOverflowEl()!==t&&t.setStyle("overflow","hidden"),e.width=e.initialViewportWidth,e.height=e.initialViewportHeight,e.initialViewportWidth=e.initialViewportHeight=null},initInheritedState:function(e,t){var i=Ext.rootInheritedState;e!==i?this.initInheritedState(this.inheritedState=i,this.inheritedStateInner=Ext.Object.chain(i)):this.callParent([e,t])},doDestroy:function(){var e,t=Ext.rootInheritedState,i=this.scrollable;for(e in i&&(i.setConfig({x:!0,y:!0}),this.scrollable=null),t)"rtl"!==e&&delete t[e];delete this.el.setHeight,delete this.el.setWidth,this.removeUIFromElement(),this.el.removeCls(this.baseCls),Ext.fly(document.body.parentNode).removeCls(this.viewportCls),this.callParent()},addMeta:function(e,t){var i=document.createElement("meta");i.setAttribute("name",e),i.setAttribute("content",t),Ext.getHead().appendChild(i,!0)},privates:{applyTargetCls:function(e){this.el===this.getTargetEl()?this.el.addCls(e):this.callParent([e])},disableTabbing:function(){var e=this.el;e&&e.saveTabbableState({skipSelf:!0})},enableTabbing:function(){var e=this.el;e&&e.restoreTabbableState({skipSelf:!0})},updateResponsiveState:function(){this.handleViewportResize(),this.callParent()}}})}}},function(e){e.prototype.decorate=e.decorate}),Ext.define("Ext.container.Viewport",{extend:"Ext.container.Container",requires:["Ext.plugin.Viewport","Ext.Responsive"],alias:"widget.viewport",alternateClassName:"Ext.Viewport",ariaRole:"application",responsiveConfig:!0,privates:{updateResponsiveState:function(){this.handleViewportResize(),this.mixins.responsive.updateResponsiveState.call(this)}}},function(){Ext.plugin.Viewport.decorate(this)}),Ext.define("Ext.layout.container.Anchor",{extend:"Ext.layout.container.Auto",alternateClassName:"Ext.layout.AnchorLayout",alias:"layout.anchor",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:!0,setsItemSize:!0,beginLayoutCycle:function(e){var t,i,n,r,o,a=0;for(this.callParent(arguments),o=(n=e.childItems).length,r=0;r<o&&(!(t=(i=n[r]).target.anchorSpec)||(i.widthModel.calculated&&t.right&&(a|=1),i.heightModel.calculated&&t.bottom&&(a|=2),3!==a));++r);e.anchorDimensions=a,this.sanityCheck(e)},calculateItems:function(e,t){var i,n,r,o,a,s,l=e.childItems,d=l.length,u=t.gotHeight,c=t.gotWidth,h=t.height,f=t.width,g=(c?1:0)|(u?2:0),p=e.anchorDimensions;if(!p)return!0;for(a=0;a<d;a++)r=(n=l[a]).getMarginInfo(),i=n.target.anchorSpec,c&&n.widthModel.calculated&&(s=i.right(f)-r.width,s=this.adjustWidthAnchor(s,n),n.setWidth(s)),u&&n.heightModel.calculated&&(o=i.bottom(h)-r.height,o=this.adjustHeightAnchor(o,n),n.setHeight(o));return(g&p)===p},sanityCheck:function(e){var t,i,n,r,o,a=e.widthModel.shrinkWrap,s=e.heightModel.shrinkWrap,l=e.childItems;for(r=0,o=l.length;r<o;++r)(t=(i=(n=l[r]).target).anchorSpec)&&(n.widthModel.calculated&&t.right&&a&&Ext.log({level:"warn",msg:"Right anchor on "+i.id+" in shrinkWrap width container"}),n.heightModel.calculated&&t.bottom&&s&&Ext.log({level:"warn",msg:"Bottom anchor on "+i.id+" in shrinkWrap height container"}))},anchorFactory:{offset:function(t){return function(e){return e+t}},ratio:function(t){return function(e){return Math.floor(e*t)}},standard:function(t){return function(e){return e-t}}},parseAnchor:function(e,t,i){var n,r=this.anchorFactory;if(e&&"none"!==e){if(this.parseAnchorRE.test(e))return r.standard(i-t);if(-1!==e.indexOf("%"))return r.ratio(.01*parseFloat(e.replace("%","")));if(n=parseInt(e,10),!isNaN(n))return r.offset(n)}return null},adjustWidthAnchor:function(e,t){return e},adjustHeightAnchor:function(e,t){return e},configureItem:function(e){var t,i,n,r=this.owner,o=e.anchor;this.callParent(arguments),e.anchor||!e.items||Ext.isNumber(e.width)||(e.anchor=o=this.defaultAnchor),r.anchorSize?"number"==typeof r.anchorSize?i=r.anchorSize:(i=r.anchorSize.width,n=r.anchorSize.height):(i=r.initialConfig.width,n=r.initialConfig.height),o&&(t=o.split(" "),e.anchorSpec={right:this.parseAnchor(t[0],e.initialConfig.width,i),bottom:this.parseAnchor(t[1],e.initialConfig.height,n)})},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var t,i=e.anchorSpec,n="$",r=this.sizePolicy;return i&&(t=this.owner.getSizeModel(),i.right&&!t.width.shrinkWrap&&(r=r.r),i.bottom&&!t.height.shrinkWrap&&(n="b")),r[n]}}),Ext.define("Ext.dashboard.Panel",{extend:"Ext.panel.Panel",xtype:"dashboard-panel",cls:Ext.baseCSSPrefix+"dashboard-panel",anchor:"100%",layout:"fit",frame:!0,closable:!0,collapsible:!0,animCollapse:!0,titleCollapse:!0,stateful:!0,draggable:{moveOnDrag:!1},animateClose:!0,loadMask:!0,loadMessage:"Loading...",minHeight:90,resizable:!0,resizeHandles:"s",doClose:function(){this.animateClose?this.closing||(this.closing=!0,this.el.animate({opacity:0,callback:this.finishClose,scope:this})):this.finishClose()},finishClose:function(){var e=this.closeAction;this.closing=!1,this.fireEvent("close",this),Ext.suspendLayouts(),this[e](),Ext.resumeLayouts(!0),"hide"===e&&this.el.setOpacity(1)},afterRender:function(){this.callParent(),this.loading&&this.onViewBeforeLoad()},doCollapseExpand:function(e){this._expandCollapseRoot=this._isLayoutRoot,this._isLayoutRoot=!0,this.callParent(arguments)},afterExpand:function(){this._isLayoutRoot=this._expandCollapseRoot,this.callParent(arguments)},afterCollapse:function(){this._isLayoutRoot=this._expandCollapseRoot,this.callParent(arguments)},getLoadMask:function(){var e,t=this.rendered&&this.loadMask;return t&&!t.isComponent&&(e={target:this},!0===t?t=e:Ext.apply(e,t),this.loadMask=t=Ext.ComponentManager.create(e,"loadmask")),t||null},onAdd:function(e){this.callParent(arguments),e.on({beforeload:"onViewBeforeLoad",load:"onViewLoaded",scope:this})},onViewBeforeLoad:function(){var e;this.loading=!0,(e=this.getLoadMask())&&e.show()},onViewLoaded:function(){var e,t,i;this.loading=!1,(e=this.getLoadMask())&&e.hide(),(t=this.items.getAt(0)).getTitle&&(i=t.getTitle())&&this.setTitle(i)},setBox:function(e){this.setSize(e.width,e.height)},getState:function(){var e=this.callParent()||{};return e.collapsed||this.addPropertyToState(e,"height",this.rendered?this.getHeight():this.height||this.minHeight||100),e}}),Ext.define("Ext.dashboard.Column",{extend:"Ext.container.Container",xtype:"dashboard-column",requires:["Ext.layout.container.Anchor","Ext.dashboard.Panel"],layout:"anchor",isDashboardColumn:!0,defaultType:"dashboard-panel",cls:Ext.baseCSSPrefix+"dashboard-column",synthetic:!0,onRemove:function(e,t){var i,n,r,o,a=this,s=a.ownerCt,l=0;if(s&&0===a.items.getCount()&&(n=(i=Ext.Array.filter(s.query(">"+a.xtype+"[rowIndex="+a.rowIndex+"]"),function(e){return e!==a})).length,!a.destroying&&!a.destroyed)){if(s.remove(a),1===n)i[0].columnWidth=1;else{for(o=0;o<n;o++)l+=i[o].columnWidth||0;for(o=0;o<n;o++)r=i[o].columnWidth,i[o].columnWidth=Math.floor(r/l*100)/100}t&&s.updateLayout()}}}),Ext.define("Ext.layout.container.Column",{extend:"Ext.layout.container.Auto",alternateClassName:"Ext.layout.ColumnLayout",alias:"layout.column",type:"column",itemCls:Ext.baseCSSPrefix+"column",targetCls:Ext.baseCSSPrefix+"column-layout-ct",clearSide:"left",columnWidthSizePolicy:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},createsInnerCt:!0,manageOverflow:!0,setsItemSize:!0,needsItemSize:!0,isItemShrinkWrap:function(e){return!0},getItemSizePolicy:function(e,t){return e.columnWidth&&!(t=t||this.owner.getSizeModel()).width.shrinkWrap?this.columnWidthSizePolicy:this.autoSizePolicy},calculateItems:function(e,t){var i,n,r,o,a,s,l=this.columnCount,d=e.targetContext,u=e.childItems,c=u.length,h=0,f=t.gotWidth;if(!1===f)d.domBlock(this,"width"),i=!0;else{if(!f)return!0;n=t.width}for(r=0;r<c;++r)o=u[r],l&&(r%l?o.setProp("clear",null):o.setProp("clear",this.clearSide)),a=o.getMarginInfo().width,o.widthModel.calculated||("number"!=typeof(s=o.getProp("width"))&&(o.block(this,"width"),i=!0),h+=s+a);return i||(h=this.calculateItemSizeWithContent(n,h,u),e.setContentWidth(h+e.paddingContext.getPaddingInfo().width)),!i},calculateItemSizeWithContent:function(e,t,i){var n,r,o,a,s=i.length;for(e=e<t?0:e-t,a=0;a<s;++a)(r=i[a]).widthModel.calculated&&(n=r.marginInfo.width,o=r.target.columnWidth,o=Math.floor(o*e)-n,t+=(o=r.setWidth(o))+n);return t}}),Ext.define("Ext.dd.DragTracker",{uses:["Ext.util.Region"],mixins:{observable:"Ext.util.Observable"},active:!1,trackOver:!1,tolerance:5,autoStart:!1,constructor:function(e){var t=this;Ext.apply(t,e),t.dragRegion=new Ext.util.Region(0,0,0,0),t.el&&t.initEl(t.el),t.mixins.observable.constructor.call(t),t.disabled&&t.disable(),Ext.supports.Touch&&Ext.getWin().on({touchstart:"onWindowTouchStart",scope:t,capture:!0})},initEl:function(e){var t,i,n,r=this,o=r.delegate;r.el=e=Ext.get(e),o?o.isElement&&(n=r.handle=o):n=e,n&&n.addCls(Ext.baseCSSPrefix+"unselectable"),r.delegate=r.handle?void 0:r.delegate,Ext.supports.Touch&&(i=(t=Ext.Component.from(e))&&t.getScrollable())&&(t=i.getElement(),i=!(r.handle&&!t.contains(r.handle))&&(!(r.delegate&&!t.down(r.delegate))&&(i.getX()||i.getY()))),r.handle||(r.handle=e),r.handleListeners={scope:r,delegate:r.delegate,dragstart:r.onDragStart},i?(r.handleListeners.longpress=r.onMouseDown,r.handleListeners.mousedown={fn:r.onMouseDown,delegate:r.delegate,translate:!1},r.handleListeners.contextmenu=function(e){e.stopEvent()}):r.handleListeners.mousedown=r.onMouseDown,Ext.supports.TouchEvents||!r.trackOver&&!r.overCls||Ext.apply(r.handleListeners,{mouseover:r.onMouseOver,mouseout:r.onMouseOut}),r.mon(r.handle,r.handleListeners),r.keyNav=new Ext.util.KeyNav({target:e,up:r.onResizeKeyDown,left:r.onResizeKeyDown,right:r.onResizeKeyDown,down:r.onResizeKeyDown,scope:r})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.endDrag({}),Ext.destroy(this.keyNav),this.callParent()},onWindowTouchStart:function(e){this.mouseIsDown&&this.onMouseUp(e)},onMouseOver:function(e,t){var i,n,r,o,a,s=this;if(!s.disabled&&(e.within(e.target,!0,!0)||s.delegate)){if(i=s.handleCls,s.mouseIsOut=!1,i)for(r=0,o=s.handleEls.length;r<o;r++)a=(a=(n=s.handleEls[r]).delegateCls)||(n.delegateCls=[i,"-",n.region,"-over"].join("")),n.addCls([a,s.overCls]);s.fireEvent("mouseover",s,e,s.delegate?e.getTarget(s.delegate,t):s.handle)}},onMouseOut:function(e){var t,i,n;if(this.mouseIsDown)this.mouseIsOut=!0;else{if(this.handleCls)for(i=0,n=this.handleEls.length;i<n;i++)(t=this.handleEls[i]).removeCls([t.delegateCls,this.overCls]);this.fireEvent("mouseout",this,e)}},onMouseDown:function(e,t){var i=this,n=e.parentEvent||e;e.button||i.disabled||n.dragTracked||(i.dragTarget=i.delegate?t:i.handle.dom,i.startXY=i.lastXY=e.getXY(),i.startRegion=Ext.fly(i.dragTarget).getRegion(),!1!==i.fireEvent("mousedown",i,e)&&!1!==i.fireEvent("beforedragstart",i,e)&&!1!==i.onBeforeStart(e)&&(i.mouseIsDown=!0,n.dragTracked=!0,i.el.setCapture(),e.stopPropagation(),!1===i.preventDefault&&"touch"!==e.pointerType||e.preventDefault(),Ext.getDoc().on({scope:i,capture:!0,mouseup:i.onMouseUp,mousemove:i.onMouseMove,selectstart:i.stopSelect}),i.dragEnded=!1,i.tolerance?i.autoStart&&(i.timer=Ext.defer(i.triggerStart,!0===i.autoStart?1e3:i.autoStart,i,[e])):i.triggerStart()))},onMouseMove:function(e,t){var i=this,n=e.getXY(),r=i.startXY;if(e.stopPropagation(),!1!==i.preventDefault&&e.preventDefault(),!i.dragEnded){if(i.lastXY=n,!i.active){if(!(Math.max(Math.abs(r[0]-n[0]),Math.abs(r[1]-n[1]))>i.tolerance))return;i.triggerStart(e)}!1===i.fireEvent("mousemove",i,e)?i.onMouseUp(e):(i.onDrag(e),i.fireEvent("drag",i,e))}},onMouseUp:function(e){this.mouseIsDown=!1,this.mouseIsOut&&(this.mouseIsOut=!1,this.onMouseOut(e)),!1!==this.preventDefault&&e.preventDefault(),Ext.isIE&&document.releaseCapture&&document.releaseCapture(),this.fireEvent("mouseup",this,e),this.endDrag(e)},endDrag:function(e){var t=this,i=t.active;Ext.getDoc().un({mousemove:t.onMouseMove,mouseup:t.onMouseUp,selectstart:t.stopSelect,capture:!0,scope:t}),t.clearStart(),t.active=!1,t.dragEnded=!0,i?(t.onEnd(e),t.fireEvent("dragend",t,e)):t.onCancel(e),t._constrainRegion=null},triggerStart:function(e){this.clearStart(),this.active=!0,this.onStart(e),this.fireEvent("dragstart",this,e)},clearStart:function(){var e=this.timer;e&&(Ext.undefer(e),this.timer=null)},stopSelect:function(e){return e.stopEvent(),!1},onBeforeStart:function(e){},onStart:function(e){},onDrag:function(e){},onCancel:function(e){},onEnd:function(e){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var e=this;if(e.constrainTo){if(e.constrainTo instanceof Ext.util.Region)return e.constrainTo;e._constrainRegion||(e._constrainRegion=Ext.fly(e.constrainTo).getViewRegion())}else e._constrainRegion||(e._constrainRegion=e.getDragCt().getViewRegion());return e._constrainRegion},getXY:function(e){return e?this.constrainModes[e](this,this.lastXY):this.lastXY},getOffset:function(e){var t=this.getXY(e),i=this.startXY;return[t[0]-i[0],t[1]-i[1]]},onDragStart:function(e){e.stopPropagation()},constrainModes:{point:function(e,t){var i=e.dragRegion,n=e.getConstrainRegion();return n?(i.x=i.left=i[0]=i.right=t[0],i.y=i.top=i[1]=i.bottom=t[1],i.constrainTo(n),[i.left,i.top]):t},dragTarget:function(e,t){var i,n=e.startXY,r=e.startRegion.copy(),o=e.getConstrainRegion();return o&&(r.translateBy(t[0]-n[0],t[1]-n[1]),r.right>o.right&&(t[0]+=i=o.right-r.right,r.left+=i),r.left<o.left&&(t[0]+=o.left-r.left),r.bottom>o.bottom&&(t[1]+=i=o.bottom-r.bottom,r.top+=i),r.top<o.top&&(t[1]+=o.top-r.top)),t}}}),Ext.define("Ext.resizer.SplitterTracker",{extend:"Ext.dd.DragTracker",requires:["Ext.util.Region"],enabled:!0,overlayCls:Ext.baseCSSPrefix+"resizable-overlay",createDragOverlay:function(){var e,t=Ext.dom.Element;(e=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"})).unselectable(),e.setSize(t.getDocumentWidth(),t.getDocumentHeight()),e.show()},getPrevCmp:function(){return this.getSplitter().previousSibling(":not([hidden])")},getNextCmp:function(){return this.getSplitter().nextSibling(":not([hidden])")},onBeforeStart:function(e){var t,i=this.getPrevCmp(),n=this.getNextCmp(),r=this.getSplitter().collapseEl,o=e.getTarget();return!(!i||!n)&&((!r||o!==r.dom)&&(!n.collapsed&&!i.collapsed&&(this.prevBox=i.getEl().getBox(),this.nextBox=n.getEl().getBox(),this.constrainTo=t=this.calculateConstrainRegion(),t||!1)))},onMouseDown:function(e,t){this.callParent([e,t]),this.mouseIsDown&&this.getSplitter().el.dom===t&&Ext.dom.Element.maskIframes()},onMouseUp:function(e){this.callParent([e]),Ext.dom.Element.unmaskIframes()},onStart:function(e){var t=this.getSplitter();this.createDragOverlay(),t.addCls(t.baseCls+"-active")},onResizeKeyDown:function(e){var t,i=this,n=i.getSplitter(),r=e.getKey(),o="vertical"===n.orientation?0:1,a=r===e.UP||r===e.LEFT?-1:1;!i.active&&i.onBeforeStart(e)&&(Ext.fly(e.target).on("keyup",i.onResizeKeyUp,i),i.triggerStart(e),i.onMouseDown(e),i.startXY=n.getXY(),i.lastKeyDownXY=Ext.Array.slice(i.startXY),(t=i.easing=new Ext.fx.easing.Linear).setStartTime(Ext.Date.now()),t.setStartValue(1),t.setEndValue(4),t.setDuration(2e3)),i.active&&(i.lastKeyDownXY[o]=Math.round(i.lastKeyDownXY[o]+a*i.easing.getValue()),i.lastXY=i.lastKeyDownXY,n.setXY(i.getXY("dragTarget")))},onResizeKeyUp:function(e){this.onMouseUp(e)},calculateConstrainRegion:function(){var e,t,i,n=this.getSplitter(),r=n.getWidth(),o=n.defaultSplitMin,a=n.orientation,s=this.prevBox,l=this.getPrevCmp(),d=this.nextBox,u=this.getNextCmp();return t="vertical"===a?(i={prevCmp:l,nextCmp:u,prevBox:s,nextBox:d,defaultMin:o,splitWidth:r},e=new Ext.util.Region(s.y,this.getVertPrevConstrainRight(i),s.bottom,this.getVertPrevConstrainLeft(i)),new Ext.util.Region(d.y,this.getVertNextConstrainRight(i),d.bottom,this.getVertNextConstrainLeft(i))):(e=new Ext.util.Region(s.y+(l.minHeight||o),s.right,(l.maxHeight?s.y+l.maxHeight:d.bottom-(u.minHeight||o))+r,s.x),new Ext.util.Region((u.maxHeight?d.bottom-u.maxHeight:s.y+(l.minHeight||o))-r,d.right,d.bottom-(u.minHeight||o),d.x)),e.intersect(t)},performResize:function(e,t){for(var i,n,r=this.getSplitter(),o=r.orientation,a=this.getPrevCmp(),s=this.getNextCmp(),l=r.ownerCt,d=l.query(">[flex]"),u=d.length,c="vertical"===o,h=0,f=c?"width":"height";h<u;h++)i=d[h],n=c?i.getWidth():i.getHeight(),i.flex=n;t=c?t[0]:t[1],a&&(n=this.prevBox[f]+t,a.flex?a.flex=n:a[f]=n),s&&(n=this.nextBox[f]-t,s.flex?s.flex=n:s[f]=n),l.updateLayout()},endDrag:function(){this.overlay&&(this.overlay.destroy(),delete this.overlay),this.callParent(arguments)},onEnd:function(e){var t=this.getSplitter();t.removeCls(t.baseCls+"-active"),this.performResize(e,this.getResizeOffset())},onDrag:function(e){var t=this.getOffset("dragTarget"),i=this.getSplitter(),n=i.getEl();"vertical"===i.orientation?n.setX(this.startRegion.left+t[0]):n.setY(this.startRegion.top+t[1])},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(e){return(e.prevCmp.maxWidth?e.prevBox.x+e.prevCmp.maxWidth:e.nextBox.right-(e.nextCmp.minWidth||e.defaultMin))+e.splitWidth},getVertPrevConstrainLeft:function(e){return e.prevBox.x+(e.prevCmp.minWidth||e.defaultMin)},getVertNextConstrainRight:function(e){return e.nextBox.right-(e.nextCmp.minWidth||e.defaultMin)},getVertNextConstrainLeft:function(e){return(e.nextCmp.maxWidth?e.nextBox.right-e.nextCmp.maxWidth:e.prevBox.x+(e.prevBox.minWidth||e.defaultMin))-e.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}}),Ext.define("Ext.layout.container.ColumnSplitterTracker",{extend:"Ext.resizer.SplitterTracker",onStart:function(e){Ext.apply(this.getSplitter().el.dom.style,{top:0,left:0}),this.callParent(arguments)},endDrag:function(){this.callParent(arguments),this.getSplitter().el.dom.style.left=0},performResize:function(e,t){var i,n,r,o=this.getPrevCmp(),a=this.getNextCmp(),s=this.getSplitter().ownerCt,l=t[0];o&&a&&(o.width=i=this.prevBox.width+l,a.width=n=this.nextBox.width-l,r=(o.columnWidth+a.columnWidth)/(i+n),o.columnWidth=i*r,a.columnWidth=n*r),s.updateLayout()}}),Ext.define("Ext.layout.container.ColumnSplitter",{extend:"Ext.resizer.Splitter",xtype:"columnsplitter",requires:["Ext.layout.container.ColumnSplitterTracker"],isSplitter:!0,synthetic:!0,cls:Ext.baseCSSPrefix+"splitter-vertical",orientation:"vertical",collapseDirection:"left",trackerClass:"Ext.layout.container.ColumnSplitterTracker",width:7,height:1,getTrackerConfig:function(){var e=this.callParent();return e.xclass=this.trackerClass,e}}),Ext.define("Ext.layout.container.Dashboard",{extend:"Ext.layout.container.Column",alias:"layout.dashboard",requires:["Ext.layout.container.ColumnSplitter"],type:"dashboard",firstColumnCls:Ext.baseCSSPrefix+"dashboard-column-first",lastColumnCls:Ext.baseCSSPrefix+"dashboard-column-last",getSplitterConfig:function(){return{xtype:"columnsplitter"}},getColumns:function(e){var t=Ext.Array;return t.filter(t.from(e),function(e){return e.target&&!0!==e.target.isSplitter})},beginLayout:function(e){this.callParent([e]);var t,i,n,r,o,a,s,l=e.childItems,d=e.rows=[],u=l.length,c=2,h=0,f=0,g=this.owner.getMaxColumns();for(i=0;i<u;++i)h+=(o=(a=(t=l[i]).target)&&a.isSplitter)?0:1,(1<c+(s=o?0:a.columnWidth||1)||g&&g<h)&&(n&&(n.orphan=1,n.el.setHeight(0)),c=0,h=1,d.length&&(f=d.length-1,this.syncFirstLast(this.getColumns(d[f].items))),d.push(r={index:d.length,items:[],maxHeight:0})),c+=s,r.items.push(t),t.row=r,a.rowIndex=r.index,o&&t.el.setHeight(1),n=t;d.length&&this.syncFirstLast(this.getColumns(d[d.length-1].items))},beforeLayoutCycle:function(e){var t=this.owner.items;this.splitterGen!==t.generation&&(this.syncSplitters(),this.splitterGen=t.generation),this.callParent(arguments)},finishedLayout:function(e){var t,i,n,r,o,a=e.childItems,s=a.length;for(this.callParent([e]),n=0;n<s;n+=2)t=(r=(i=a[n]).target).lastBox,(o=i.row).maxHeight=Math.max(o.maxHeight,t.height),r.width=t.width;for(n=0;n<s;n++)r=(i=a[n]).target,i.orphan?r.el.setWidth(0):n%2==0?r.el.setMinHeight(i.row.maxHeight):r.el.setHeight(i.row.maxHeight)},syncSplitters:function(){for(var e,t=this.owner,i=t.items.items,n=i.length,r=!0,o=!1;0<n--;)e=i[n],o?e.isSplitter?o=!1:(r&&(r=!1,t.suspendLayouts()),t.add(n+1,this.getSplitterConfig())):e.isSplitter?(r&&(r=!1,t.suspendLayouts()),t.remove(e)):o=!0;for(;i.length&&(e=i[0]).isSplitter;)r&&(r=!1,t.suspendLayouts()),t.remove(e);r||t.resumeLayouts()},syncFirstLast:function(e){var t,i,n,r,o=this.firstColumnCls,a=this.lastColumnCls,s=[o,a];for(t=(e=Ext.Array.from(e)).length,i=0;i<t;++i)n=e[i].target,r=i===t-1,i?r?(n.addCls(a),n.removeCls(o)):n.removeCls(s):r?n.addCls(s):(n.addCls(o),n.removeCls(a))},calculateItemSizeWithContent:function(e,t,i){var n,r,o,a,s,l,d=0,u=0,c=i.length;for(e=e<t?0:e,a=0;a<c;a+=2)l=(r=i[a]).row.items.length,s=r.row.items.indexOf(r),n=r.marginInfo.width,o=r.target.columnWidth,o=Math.floor(o*e)-n,0===d&&s+1<l&&(d=i[a+1].getProp("width"),u=Math.ceil(d/2)),u&&(s+2<l&&(o-=u),0<s&&(o-=u)),t+=(o=r.setWidth(o))+n;return t}}),Ext.define("Ext.dd.DDTarget",{extend:"Ext.dd.DragDrop",constructor:function(e,t,i){e&&this.initTarget(e,t,i)},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}}),Ext.define("Ext.dd.ScrollManager",{singleton:!0,requires:["Ext.dd.DragDropManager"],vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:void 0,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var e=Ext.dd.DragDropManager;e.fireEvents=Ext.Function.createSequence(e.fireEvents,this.onFire,this),e.stopDrag=Ext.Function.createSequence(e.stopDrag,this.onStop,this),this.doScroll=this.doScroll.bind(this),this.ddmInstance=e,this.els={},this.dragEl=null,this.proc={}},onStop:function(e){var t=Ext.dd.ScrollManager;t.dragEl=null,t.clearProc()},triggerRefresh:function(){this.ddmInstance.dragCurrent&&this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)},doScroll:function(){var e=this;if(e.ddmInstance.dragCurrent){var t,i,n,r=e.proc,o=r.el,a=r.component,s=r.el.ddScrollConfig;t=s&&s.increment?s.increment:e.increment,n=function(){e.triggerRefresh()},(i=s&&"animate"in s?s.animate:e.animate)&&(!0===i?i={callback:n}:i.callback=i.callback?Ext.Function.createSequence(i.callback,n):n),a?(t*=e.dirTrans[r.dir],"up"===r.dir||"down"===r.dir?a.scrollBy(0,t,i):a.scrollBy(t,0,i)):o.scroll(r.dir,t,i),i||n()}},clearProc:function(){var e=this.proc;e.id&&Ext.uninterval(e.id),e.id=0,e.el=null,e.dir=""},startProc:function(e,t){var i,n,r=this.proc;this.clearProc(),r.el=e,r.dir=t,i=e.ddScrollConfig?e.ddScrollConfig.ddGroup:void 0,n=e.ddScrollConfig&&e.ddScrollConfig.frequency?e.ddScrollConfig.frequency:this.frequency,void 0!==i&&this.ddmInstance.dragCurrent.ddGroup!==i||(r.id=Ext.interval(this.doScroll,n))},onFire:function(e,t){var i,n,r,o,a,s,l,d,u,c=this;if(!t&&c.ddmInstance.dragCurrent){for(o in c.dragEl&&c.dragEl===c.ddmInstance.dragCurrent||(c.dragEl=c.ddmInstance.dragCurrent,c.refreshCache()),i=e.getPoint(),n=c.proc,r=c.els)if(s=(a=r[o]).getRegion(),l=a.ddScrollConfig||c,s&&s.contains(i)){if(!a.isScrollable()){if(!(u=(d=a.component&&a.component.ownerCt)&&d.getScrollerOwner&&d.getScrollerOwner()))continue;s=(a=u.getScrollable().getElement()).getRegion()}if(s.bottom-i.y<=l.vthresh)return void(n.el!==a&&c.startProc(a,"down"));if(s.right-i.x<=l.hthresh)return void(n.el!==a&&c.startProc(a,"right"));if(i.y-s.top<=l.vthresh)return void(n.el!==a&&c.startProc(a,"up"));if(i.x-s.left<=l.hthresh)return void(n.el!==a&&c.startProc(a,"left"))}c.clearProc()}},register:function(e){var t,i;if(Ext.isArray(e))for(t=0,i=e.length;t<i;t++)this.register(e[t]);else e=Ext.get(e),this.els[e.id]=e},unregister:function(e){var t,i;if(Ext.isArray(e))for(t=0,i=e.length;t<i;t++)this.unregister(e[t]);else e=Ext.get(e),delete this.els[e.id]},refreshCache:function(){var e,t=this.els;for(e in t)"object"==typeof t[e]&&(t[e]._region=t[e].getRegion())}}),Ext.define("Ext.dd.DropTarget",{extend:"Ext.dd.DDTarget",requires:["Ext.dd.ScrollManager"],constructor:function(e,t){this.el=Ext.get(e),Ext.apply(this,t),this.containerScroll&&Ext.dd.ScrollManager.register(this.el),this.callParent([this.el.dom,this.ddGroup||this.group,{isTarget:!0}])},containerScroll:!1,dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(e,t,i){return this.overClass&&this.el.addCls(this.overClass),this.dropAllowed},notifyOver:function(e,t,i){return this.dropAllowed},notifyOut:function(e,t,i){this.overClass&&this.el.removeCls(this.overClass)},notifyDrop:function(e,t,i){return this.overClass&&this.el.removeCls(this.overClass),!1},destroy:function(){this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el),this.callParent()}}),Ext.define("Ext.dashboard.DropZone",{extend:"Ext.dd.DropTarget",ddScrollConfig:{vthresh:75,hthresh:-1,animate:!0,increment:200},containerScroll:!0,overClass:Ext.baseCSSPrefix+"dashboard-dd-over",constructor:function(e,t){(this.dashboard=e).body.ddScrollConfig=this.ddScrollConfig,this.callParent([e.body,t])},getOverEvent:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f=this.dashboard,g=f.body,p=f.items.items,m=g.getBox(),x=p.length,y=t.getXY(),v=y[0]-m.x+g.getScrollLeft(),E=v,b=y[1]-m.y+g.getScrollTop(),C=0,S=0,w={columnIndex:0,column:null,dashboard:f,above:null,extensible:!1,beforeAfter:0,data:i,panel:i.panel,rawEvent:t,source:e,status:this.dropAllowed};for(o=0;o<x;o+=2){if(S!==(s=p[o]).rowIndex&&(E=v,0<(S=s.rowIndex)&&(b-=C,C=0)),l=s.lastBox.width,C<=(d=s.lastBox.height)&&(C=d),p[o+1]&&(l+=p[o+1].lastBox.width),t.within(s.el)){if(w.columnIndex=o,w.column=s,w.extensible=this.isRowExtensible(s.rowIndex),n=Math.min(80,.2*l),w.beforeAfter=n=w.extensible&&(E<n?-1:l-n<E?1:0),!n||!w.extensible)for(a=0,u=(c=s.items.items).length;a<u;++a){if(b<(r=(h=c[a]).el.getHeight())/2){w.above=h;break}b-=r}break}E-=l}return w},notifyOver:function(e,t,i){var n,r,o,a=this.dashboard,s=a.hasListeners,l=this.getOverEvent(e,t,i),d=l.column&&l.column.el,u=e.proxy,c=l.above,h=0;return i.lastOver=l,s.validatedrop&&!1===a.fireEvent("validatedrop",l)||s.beforedragover&&!1===a.fireEvent("beforedragover",l)||(n=e.panelProxy.getProxy(),u.getProxy().setWidth("auto"),d?(h=r=d.getWidth(),l.beforeAfter?(e.panelProxy.moveProxy(d.dom,d.dom.firstChild),h=r/2,n.setWidth(h)):(c?e.panelProxy.moveProxy(c.el.dom.parentNode,c.el.dom):e.panelProxy.moveProxy(d.dom,null),n.setWidth("auto")),n.setStyle({float:"none",clear:"none","margin-left":0<l.beforeAfter?r-h-d.getPadding("lr")+"px":"","margin-top":"7px"})):(o=a.body.getPadding("lr"),n.setStyle({float:"left",clear:"left",margin:"0 7px 0 7px"}),n.setWidth(a.body.getWidth()-o),e.panelProxy.moveProxy(a.body.dom.firstChild.firstChild,null)),this.scrollPos=a.body.getScroll(),s.dragover&&a.fireEvent("dragover",l)),l.status},isRowExtensible:function(e){var t,i=this.dashboard,n=i.getMaxColumns()||1;return t=i.query(">dashboard-column[rowIndex="+e+"]"),Ext.Array.from(t).length<n},notifyDrop:function(e,t,i){this.callParent(arguments);var n,r,o=this.dashboard,a=i.lastOver,s=a.panel,l=s.ownerCt,d=a.column,u=d?a.beforeAfter:1,c=l.items.indexOf(s),h=d?a.above?d.items.indexOf(a.above):d.items.getCount():0,f=o.hasListeners;if(l===d){if(1===l.items.getCount())return;if(!u&&(c<h&&--h,c===h))return}f.validatedrop&&!1===o.fireEvent("validatedrop",a)||f.beforedrop&&!1===o.fireEvent("beforedrop",a)||(Ext.suspendLayouts(),s.isMoving=!0,u&&((n=o.items.indexOf(d))<0?n=o.items.getCount():0<u&&++n,r=o.createColumn(),d?(r.columnWidth=d.columnWidth=d.columnWidth/2,delete d.width):r.columnWidth=1,d=o.insert(n,r),h=0),s.el.dom.style.display="",d.insert(h,s),s.isMoving=!1,d.updateLayout(),Ext.resumeLayouts(!0),f.drop&&o.fireEvent("drop",a))}}),Ext.define("Ext.dashboard.Part",{mixins:["Ext.mixin.Factoryable","Ext.mixin.Identifiable"],requires:["Ext.util.ObjectTemplate"],alias:"part.part",factoryConfig:{type:"part"},isPart:!0,_lastId:0,config:{id:null,dashboard:null,viewTemplate:{collapsed:"{collapsed}",columnIndex:"{columnIndex}",id:"{id}",title:"{title}",height:"{height}"}},viewTemplateOptions:{excludeProperties:{bind:1}},valueRe:/^[{][a-z]*[}]$/i,constructor:function(e){this.initConfig(e)},applyViewTemplate:function(e){return Ext.isObject(e)||Ext.raise("The viewTemplate for "+this.$className+" is not an Object"),Ext.util.ObjectTemplate.create(e,this.viewTemplateOptions)},displayForm:function(e,t,i,n){i.call(n||this,{})},createView:function(e){var t=this.getViewTemplate().apply(e);return t.dashboard=this.getDashboard(),t.part=this,t._partConfig=e,t}}),Ext.define("Ext.dashboard.Dashboard",{extend:"Ext.panel.Panel",xtype:"dashboard",requires:["Ext.layout.container.Dashboard","Ext.dashboard.DropZone","Ext.dashboard.Column","Ext.dashboard.Part"],isDashboard:!0,cls:Ext.baseCSSPrefix+"dashboard",bodyCls:Ext.baseCSSPrefix+"dashboard-body",defaultType:"dashboard-column",scrollable:!0,layout:{type:"dashboard"},stateful:!1,idSeed:1,config:{parts:null},renderConfig:{maxColumns:4},initComponent:function(){this.callParent(),this.addStateEvents("remove")},applyParts:function(e,t){var i,n;for(i in t=t||new Ext.util.Collection({decoder:Ext.Factory.part}),e)n=e[i],Ext.isString(n)&&(n={type:n}),n.id=i,n.dashboard=this,t.add(n);return t},getPart:function(e){return this.getParts().getByKey(e)},addNew:function(t,i,n){var r=this;r.getPart(t).displayForm(null,null,function(e){e.type=t,r.addView(e,i,n)})},addView:function(e,t,i){var n,r=this.query("dashboard-column"),o=r.length,a=t||0,s=e.id?e:this.createView(e),l=this.columnWidths;return o||(r=[n=this.add(0,this.createColumn({columnWidth:Ext.isArray(l)?l[0]:1}))],o=1),o<=a&&(a=o-1,i=1),!i&&(n=r[a])?n.add(s):(0<i&&++a,n=this.createColumn(),l&&(n.columnWidth=l[a]||(l[a]=1)),n.items||(n.items=[]),n.items.push(s),(n=this.add(n)).items.first())},createColumn:function(e){var t=this.cycleLayout;return Ext.apply({items:[],bubbleEvents:["add","childmove","resize"],listeners:{expand:t,collapse:t,scope:this}},e)},createView:function(e){var t=e.type,i=this.getPart(t).createView(e);return i.id||(i.id=this.id+"_"+t+this.idSeed++),i.bubbleEvents=Ext.Array.from(i.bubbleEvents).concat(["expand","collapse"]),i.stateful=this.stateful,i.listeners={removed:this.onItemRemoved,scope:this},i},initEvents:function(){this.callParent(),this.dd=new Ext.dashboard.DropZone(this,this.dropConfig)},cycleLayout:function(){this.updateLayout()},doDestroy:function(){this.dd&&Ext.destroy(this.dd),this.callParent()},applyState:function(e){delete e.items,this.callParent([e]);var t,i=e.columnWidths,n=this.items.items,r=n.length,o=i?i.length:0;if(o)for(this.columnWidths=[],t=0;t<r;++t)this.columnWidths.push(n[t].columnWidth=t<o?i[t]:1/r)},getState:function(){var e,t,i=[],n=this.items.items,r=this.callParent()||{},o=n.length;for(e=0;e<o;++e)(t=n[e]).isSplitter||i.push(t.columnWidth);return r.idSeed=this.idSeed,r.items=this.serializeItems(),i.length?r.columnWidths=this.columnWidths=i:delete r.columnWidths,r},initItems:function(){var e,t=this.defaultContent;this.stateful&&(t=(e=Ext.state.Manager.get(this.getStateId()))&&e.items||t),!this.items&&t&&(this.items=this.deserializeItems(t)),this.callParent()},deserializeItems:function(e){var t,i,n,r,o,a,s=e.length,l=[],d=this.columnWidths,u=this.getMaxColumns();for(r=0;r<s;++r)a=e[r],i=Math.min(a.columnIndex||0,u-1),delete a.columnIndex,(t=l[i])||(l[i]=t=this.createColumn(),(n=d&&d[i])&&(t.columnWidth=n)),o=this.createView(a),t.items.push(o);for(r=0,s=l.length;r<s;++r)(t=l[r]).columnWidth||(t.columnWidth=1/s);return l},serializeItem:function(e){return Ext.apply({type:e.part.id,id:e.id,columnIndex:e.columnIndex},e._partConfig)},serializeItems:function(){var e,t,i,n,r,o,a=this.items.items,s=a.length,l=[],d=0;for(i=0;i<s;++i)if(!(n=a[i]).isSplitter){for(r=0,o=(t=n.items.items).length;r<o;++r)(e=t[r]).columnIndex=d,l.push(this.serializeItem(e));++d}return l},onItemRemoved:function(e,t){e.stateful&&!e.isMoving&&Ext.state.Manager.clear(e.getStateId())}}),Ext.define("Ext.dd.DragZone",{extend:"Ext.dd.DragSource",constructor:function(e,t){var i;this.callParent([e,t]),(i=this.containerScroll)&&(e=this.scrollEl||e,e=Ext.get(e),Ext.isObject(i)&&(e.ddScrollConfig=i),Ext.dd.ScrollManager.register(e))},getDragData:function(e){return Ext.dd.Registry.getHandleFromEvent(e)},onInitDrag:function(e,t){return this.proxy.update(this.dragData.ddel.cloneNode(!0)),this.onStartDrag(e,t),!0},getRepairXY:function(e){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){this.containerScroll&&Ext.dd.ScrollManager.unregister(this.scrollEl||this.el),this.callParent()}}),Ext.define("Ext.dd.Registry",{singleton:!0,constructor:function(){this.elements={},this.handles={},this.autoIdSeed=0},getId:function(e,t){var i;return"string"==typeof e?e:((i=e.id)||!1===t||(i="extdd-"+ ++this.autoIdSeed,e.id=i),i)},register:function(e,t){var i,n,r;if(t=t||{},"string"==typeof e&&(e=document.getElementById(e)),t.ddel=e,!1!==(this.elements[this.getId(e)]=t).isHandle&&(this.handles[t.ddel.id]=t),t.handles)for(n=0,r=(i=t.handles).length;n<r;n++)this.handles[this.getId(i[n])]=t},unregister:function(e){var t,i,n,r=this.getId(e,!1),o=this.elements[r];if(o&&(delete this.elements[r],o.handles))for(i=0,n=(t=o.handles).length;i<n;i++)delete this.handles[this.getId(t[i],!1)]},getHandle:function(e){return"string"!=typeof e&&(e=e.id),this.handles[e]},getHandleFromEvent:function(e){var t=e.getTarget();return t?this.handles[t.id]:null},getTarget:function(e){return"string"!=typeof e&&(e=e.id),this.elements[e]},getTargetFromEvent:function(e){var t=e.getTarget();return t?this.elements[t.id]||this.handles[t.id]:null}}),Ext.define("Ext.dd.DropZone",{extend:"Ext.dd.DropTarget",requires:["Ext.dd.Registry"],getTargetFromEvent:function(e){return Ext.dd.Registry.getTargetFromEvent(e)},onNodeEnter:function(e,t,i,n){},onNodeOver:function(e,t,i,n){return this.dropAllowed},onNodeOut:function(e,t,i,n){},onNodeDrop:function(e,t,i,n){return!1},onContainerOver:function(e,t,i){return this.dropNotAllowed},onContainerDrop:function(e,t,i){return!1},notifyEnter:function(e,t,i){return this.callParent([e,t,i]),this.dropNotAllowed},notifyOver:function(e,t,i){var n=this,r=n.getTargetFromEvent(t);return r?(n.lastOverNode!==r&&(n.lastOverNode&&n.onNodeOut(n.lastOverNode,e,t,i),n.onNodeEnter(r,e,t,i),n.lastOverNode=r),n.onNodeOver(r,e,t,i)):(n.lastOverNode&&(n.onNodeOut(n.lastOverNode,e,t,i),n.lastOverNode=null),n.onContainerOver(e,t,i))},notifyOut:function(e,t,i){this.callParent([e,t,i]),this.lastOverNode&&(this.onNodeOut(this.lastOverNode,e,t,i),this.lastOverNode=null)},notifyDrop:function(e,t,i){var n=this.getTargetFromEvent(t),r=n?this.onNodeDrop(n,e,t,i):this.onContainerDrop(e,t,i);return this.lastOverNode&&(this.onNodeOut(this.lastOverNode,e,t,i),this.lastOverNode=null),r},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}}),Ext.define("Ext.dom.Layer",{extend:"Ext.dom.Element",alternateClassName:"Ext.Layer",isLayer:!0,constructor:function(e,t){e=e||{};var i,n,r,o,a=this,s=Ext.DomHelper,l=e.parentEl,d=l?Ext.getDom(l):document.body,u=e.hideMode,c=Ext.baseCSSPrefix+(e.fixed?"fixed-layer":"layer");t&&((i=Ext.getDom(t)).parentNode||d.appendChild(i)),i=i||s.append(d,e.dh||{tag:"div",cls:c}),e.id&&(i.id=e.id),(n=i.id)&&(r=Ext.cache[n])&&(delete Ext.cache[n],r.dom=null),this.callParent([i]),t&&a.addCls(c),e.preventSync&&(a.preventSync=!0),e.cls&&a.addCls(e.cls),a.constrain=!1!==e.constrain,u?a.setVisibilityMode(Ext.Element[u.toUpperCase()]):e.useDisplay?a.setVisibilityMode(Ext.Element.DISPLAY):a.setVisibilityMode(Ext.Element.VISIBILITY),e.shadow?(a.shadowOffset=e.shadowOffset||4,o={offset:a.shadowOffset,fixed:e.fixed},!0!==e.shadow&&(o.mode=e.shadow),a.enableShadow(o)):a.shadowOffset=0,e.shim&&a.enableShim({fixed:e.fixed}),!0===e.hidden?a.hide():!1===e.hidden&&a.show()}}),Ext.define("Ext.event.publisher.MouseEnterLeave",{extend:"Ext.event.publisher.Dom",type:"mouseEnterLeave"},function(e){var s={mouseover:"mouseenter",mouseout:"mouseleave"};Ext.supports.MouseEnterLeave||e.override({handledDomEvents:["mouseover","mouseout"],handledEvents:["mouseenter","mouseleave"],publishDelegatedDomEvent:function(e){var t,i,n,r,o,a;this.callParent([e]),t=e.getTarget(),(i=e.getRelatedTarget())&&Ext.fly(t).contains(i)||(n=t.id)&&(r=Ext.cache[n])&&(o=s[e.type],e=e.chain({type:o}),r.hasListeners[o]&&(a=(a=r.events[o])&&a.directs)&&(e.setCurrentTarget(r.dom),a.fire(e,e.target)))}}),e.instance=new e}),Ext.define("Ext.flash.Component",{extend:"Ext.Component",alternateClassName:"Ext.FlashComponent",alias:"widget.flash",flashVersion:"9.0.115",backgroundColor:"#ffffff",wmode:"opaque",swfWidth:"100%",swfHeight:"100%",expressInstall:!1,renderTpl:['<div id="{swfId}" role="application"></div>'],initComponent:function(){"swfobject"in window||Ext.raise("The SWFObject library is not loaded. Ext.flash.Component requires SWFObject version 2.2 or later: http://code.google.com/p/swfobject/"),this.url||Ext.raise('The "url" config is required for Ext.flash.Component'),this.callParent()},beforeRender:function(){this.callParent(),Ext.applyIf(this.renderData,{swfId:this.getSwfId()})},afterRender:function(){var e=this,t=Ext.apply({},e.flashParams),i=Ext.apply({},e.flashVars);e.callParent(),t=Ext.apply({allowScriptAccess:"always",bgcolor:e.backgroundColor,wmode:e.wmode},t),i=Ext.apply({allowedDomain:document.location.hostname},i),new swfobject.embedSWF(e.url,e.getSwfId(),e.swfWidth,e.swfHeight,e.flashVersion,e.expressInstall?e.statics.EXPRESS_INSTALL_URL:void 0,i,t,e.flashAttributes,e.swfCallback.bind(e))},swfCallback:function(e){e.success?(this.swf=Ext.get(e.ref),this.onSuccess(),this.fireEvent("success",this)):(this.onFailure(),this.fireEvent("failure",this))},getSwfId:function(){return this.swfId||(this.swfId="extswf"+this.getAutoId())},onSuccess:function(){this.swf.setStyle("visibility","inherit")},onFailure:Ext.emptyFn,doDestroy:function(){var e=this.swf;e&&(swfobject.removeSWF(this.getSwfId()),this.swf=Ext.destroy(e)),this.callParent()},statics:{EXPRESS_INSTALL_URL:"http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf"}}),Ext.define("Ext.form.action.Action",{alternateClassName:"Ext.form.Action",submitEmptyText:!0,constructor:function(e){var t;e&&Ext.apply(this,e),t=e.params,Ext.isString(t)&&(this.params=Ext.Object.fromQueryString(t))},run:Ext.emptyFn,onFailure:function(e){var t=this.form,i=t&&!t.destroying&&!t.destroyed;this.response=e,this.failureType=Ext.form.action.Action.CONNECT_FAILURE,i&&t.afterAction(this,!1)},processResponse:function(e){return!(this.response=e).responseText&&!e.responseXML||(this.result=this.handleResponse(e))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){return{success:this.onSuccess,failure:this.onFailure,scope:this,timeout:1e3*(this.timeout||this.form.timeout)}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}}),Ext.define("Ext.form.action.Load",{extend:"Ext.form.action.Action",requires:["Ext.data.Connection"],alternateClassName:"Ext.form.Action.Load",alias:"formaction.load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(e){var t=this.processResponse(e),i=this.form,n=i&&!i.destroying&&!i.destroyed;if(!0===t||!t.success||!t.data)return this.failureType=Ext.form.action.Action.LOAD_FAILURE,void(n&&i.afterAction(this,!1));n&&(i.clearInvalid(),i.setValues(t.data),i.afterAction(this,!0))},handleResponse:function(e){var t,i,n=this.form.reader;return n?(i=(t=n.read(e)).records&&t.records[0]?t.records[0].data:null,{success:t.success,data:i}):Ext.decode(e.responseText)}}),Ext.define("Ext.form.action.Submit",{extend:"Ext.form.action.Action",alternateClassName:"Ext.form.Action.Submit",alias:"formaction.submit",type:"submit",run:function(){var e=this.form;!1===this.clientValidation||e.isValid()?this.doSubmit():(this.failureType=Ext.form.action.Action.CLIENT_INVALID,e.afterAction(this,!1))},doSubmit:function(){var e,t=Ext.apply(this.createCallback(),{url:this.getUrl(),method:this.getMethod(),headers:this.headers}),i=this.form,n=this.jsonSubmit||i.jsonSubmit,r=n?"jsonData":"params";i.hasUpload()?(e=this.buildForm(),t.form=e.formEl,t.isUpload=!0):t[r]=this.getParams(n),Ext.Ajax.request(t),e&&this.cleanup(e)},cleanup:function(e){var t,i,n=e.formEl,r=e.uploadEls,o=e.uploadFields,a=o.length;for(t=0;t<a;++t)(i=o[t]).clearOnSubmit||i.restoreInput(r[t]);n&&Ext.removeNode(n)},getParams:function(e){var t,i=this.callParent();return t=this.form.getValues(!1,!1,!1!==this.submitEmptyText,e,!0),Ext.apply({},t,i)},buildForm:function(){var e,t,i,n,r,o,a,s,l,d=this,u=[],c=d.form,h=d.getParams(),f=[],g=[],p=c.getFields().items,m=p.length;for(i=0;i<m;++i)(n=p[i]).isFileUpload()&&f.push(n);for(r in h)if(h.hasOwnProperty(r))if(o=h[r],Ext.isArray(o))for(s=o.length,a=0;a<s;a++)u.push(d.getFieldConfig(r,o[a]));else u.push(d.getFieldConfig(r,o));for((e={tag:"form",role:"presentation",action:d.getUrl(),method:d.getMethod(),target:d.target?Ext.isString(d.target)?d.target:Ext.fly(d.target).dom.name:"_self",style:"display:none",cn:u}).target||Ext.raise("Invalid form target."),f.length&&(e.encoding=e.enctype="multipart/form-data"),t=Ext.DomHelper.append(Ext.getBody(),e),m=f.length,i=0;i<m;++i)l=f[i].extractFileInput(),t.appendChild(l),g.push(l);return{formEl:t,uploadFields:f,uploadEls:g}},getFieldConfig:function(e,t){return{tag:"input",type:"hidden",name:e,value:Ext.String.htmlEncode(t)}},onSuccess:function(e){var t=this.form,i=t&&!t.destroying&&!t.destroyed,n=!0,r=this.processResponse(e);!0===r||r.success||(r.errors&&i&&t.markInvalid(r.errors),this.failureType=Ext.form.action.Action.SERVER_INVALID,n=!1),i&&t.afterAction(this,n)},handleResponse:function(e){var t,i,n,r,o,a,s=this.form.errorReader;if(s){if(i=[],o=(t=s.read(e)).records)for(n=0,r=o.length;n<r;n++)i[n]=o[n].data;i.length<1&&(i=null),a={success:t.success,errors:i}}else try{a=Ext.decode(e.responseText)}catch(e){a={success:!1,errors:[]}}return a}}),Ext.define("Ext.form.action.StandardSubmit",{extend:"Ext.form.action.Submit",alias:"formaction.standardsubmit",doSubmit:function(){var e=this.buildForm();e.formEl.submit(),this.cleanup(e)}}),Ext.define("Ext.util.ComponentDragger",{extend:"Ext.dd.DragTracker",autoStart:500,constructor:function(e,t){this.comp=e,this.initialConstrainTo=t.constrainTo,this.callParent([t])},onStart:function(e){var t=this,i=t.comp;t.dragTarget=t.el,t.startRegion=t.el.getRegion(),t.startPosition=i.getXY(),i.ghost&&!i.liveDrag&&(t.proxy=i.ghost()),(t.constrain||t.constrainDelegate)&&(t.constrainTo=t.calculateConstrainRegion()),i.beginDrag&&i.beginDrag(),Ext.dom.Element.maskIframes()},calculateConstrainRegion:function(){var e,t,i=this.comp,n=this.initialConstrainTo||this.comp.el.dom.parentNode,r=i.constraintInsets,o=this.proxy?this.proxy.el:i.el,a=o.shadow,s=a&&!this.constrainDelegate&&i.constrainShadow&&!a.disabled?a.getShadowSize():0;return n=n instanceof Ext.util.Region?n.copy():Ext.fly(n).getConstrainRegion(),r&&(r=Ext.isObject(r)?r:Ext.Element.parseBox(r),n.adjust(r.top,r.right,r.bottom,r.left)),s&&n.adjust(s[0],-s[1],-s[2],s[3]),this.constrainDelegate&&(e=Ext.fly(this.handle).getRegion(),t=o.getRegion(),n.adjust(t.top-e.top,t.right-e.right,t.bottom-e.bottom,t.left-e.left)),n},onDrag:function(e){var t=this.proxy&&!this.comp.liveDrag?this.proxy:this.comp,i=this.getOffset(this.constrain||this.constrainDelegate?"dragTarget":null);t.setPagePosition(this.startPosition[0]+i[0],this.startPosition[1]+i[1])},onEnd:function(e){var t=this.comp;t.destroyed||t.destroying||(this.proxy&&!t.liveDrag&&t.unghost(),t.endDrag&&t.endDrag(),Ext.dom.Element.unmaskIframes())}}),Ext.define("Ext.window.Window",{extend:"Ext.panel.Panel",alias:"widget.window",alternateClassName:"Ext.Window",requires:["Ext.util.ComponentDragger","Ext.util.Region"],baseCls:Ext.baseCSSPrefix+"window",resizable:!0,draggable:!0,constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:50,minWidth:50,expandOnShow:!0,collapsible:!1,closable:!0,hidden:!0,autoRender:!0,hideMode:"offsets",floating:!0,alignOnScroll:!1,itemCls:Ext.baseCSSPrefix+"window-item",overlapHeader:!0,ignoreHeaderBorderManagement:!0,alwaysFramed:!0,isRootCfg:{isRoot:!0},isWindow:!0,ariaRole:"dialog",focusable:!0,tabGuard:!0,closeToolText:"Close dialog",keyMap:{scope:"this",ESC:"onEsc"},maskClickAction:"focus",disableCloseToolFocus:!0,initComponent:function(){this.frame=!1,this.callParent(),this.plain&&this.addClsWithUI("plain"),this.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var e;return(e=this.callParent()).tabIndex=-1,e},getFocusEl:function(){return this.getDefaultFocus()||this.el},getState:function(){var e,t=this.callParent()||{},i=!!this.maximized,n=this.ghostBox;return e=(t.maximized=i)?this.restorePos:n?[n.x,n.y]:this.getPosition(!0),Ext.apply(t,{size:i?this.restoreSize:this.getSize(),pos:e}),t},applyState:function(e){e&&(this.maximized=e.maximized,this.maximized?(this.hasSavedRestore=!0,this.restoreSize=e.size,this.restorePos=e.pos):Ext.apply(this,{width:e.size.width,height:e.size.height,x:e.pos[0],y:e.pos[1]}))},onRender:function(e,t){this.callParent(arguments),this.header&&this.header.on({scope:this,click:this.onHeaderClick}),this.maximizable&&this.header.on({scope:this,dblclick:this.toggleMaximize})},afterRender:function(){var e=this.header;this.maximized&&(this.maximized=!1,this.maximize(null,!0),e&&e.removeCls(e.indicateDragCls)),this.callParent(),this.initTabGuards()},onEsc:function(e){if(this.closable)return e.stopEvent(),this.close(),!1},doDestroy:function(){this.rendered&&(Ext.un("resize",this.onWindowResize,this),delete this.animateTarget,this.hide()),this.callParent()},addTools:function(){var e=[];this.callParent(),this.minimizable&&e.push({type:"minimize",handler:"minimize",scope:this}),this.maximizable&&e.push({type:"maximize",handler:"toggleMaximize",scope:this}),e.length&&this.addTool(e)},addTool:function(e){this.callParent([e]),this.rendered&&this.tabGuard&&this.initTabGuards()},add:function(){var e;return e=this.callParent(arguments),this.rendered&&this.tabGuard&&this.initTabGuards(),e},remove:function(){var e;return e=this.callParent(arguments),this.rendered&&this.tabGuard&&this.initTabGuards(),e},addDocked:function(){var e;return e=this.callParent(arguments),this.rendered&&this.tabGuard&&this.initTabGuards(),e},removeDocked:function(){var e;return e=this.callParent(arguments),this.rendered&&this.tabGuard&&this.initTabGuards(),e},onShow:function(){this.callParent(arguments),this.expandOnShow&&this.expand(!1),this.syncMonitorWindowResize(),this.rendered&&this.tabGuard&&this.initTabGuards()},doClose:function(){var e=this;e.hidden?(e.fireEvent("close",e),"destroy"!==e.closeAction||e.destroying||e.destroyed||e.destroy()):e.hide(e.animateTarget,e.doClose,e)},afterHide:function(){this.syncMonitorWindowResize(),this.callParent(arguments),!this.destroyed&&this.rendered&&this.tabGuard&&this.initTabGuards()},onWindowResize:function(){var e;this.destroyed||(this.maximized?this.fitContainer():(((e=this.getSizeModel()).width.natural||e.height.natural)&&this.updateLayout(),this.doConstrain()))},minimize:function(){return this.fireEvent("minimize",this),this},resumeHeaderLayout:function(e){this.header.resumeLayouts(e?this.isRootCfg:null)},afterCollapse:function(){var e=this.header,t=this.tools;e&&this.maximizable&&(e.suspendLayouts(),t.maximize.hide(),this.resumeHeaderLayout(!0)),this.resizer&&this.resizer.disable(),this.callParent(arguments)},afterExpand:function(){var e,t=this.header,i=this.tools;t&&(t.suspendLayouts(),this.maximizable&&(i.maximize.show(),e=!0),this.resumeHeaderLayout(e)),this.resizer&&this.resizer.enable(),this.callParent(arguments)},maximize:function(e,t){var i,n=this,r=n.header,o=n.tools,a=n.width,s=n.height;return n.maximized||n.maximizing||(n.maximizing=!0,n.expand(!1),n.hasSavedRestore||(n.restoreSize={width:a||null,height:s||null},n.restorePos=t?[n.x||0,n.y||0]:n.getPosition()),r&&(r.suspendLayouts(),o.maximize&&o.maximize.setType("restore"),n.collapseTool&&(n.collapseTool.hide(),i=!0),n.resumeHeaderLayout(i)),n.el.disableShadow(),n.dd&&(n.dd.disable(),r&&r.removeCls(r.indicateDragCls)),n.resizer&&n.resizer.disable(),n.el.addCls(Ext.baseCSSPrefix+"window-maximized"),n.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct"),n.syncMonitorWindowResize(),n.fitContainer(e=e||n.animateTarget?{callback:function(){n.maximizing=!1,n.maximized=!0,t||n.fireEvent("maximize",n)}}:null),e||(n.maximizing=!1,n.maximized=!0,t||n.fireEvent("maximize",n))),n},restore:function(e){var t,i=this,n=i.tools,r=i.header,o=i.restoreSize;return i.maximized&&(i.hasSavedRestore=null,i.removeCls(Ext.baseCSSPrefix+"window-maximized"),r&&(r.suspendLayouts(),n.maximize&&n.maximize.setType("maximize"),i.collapseTool&&(i.collapseTool.show(),t=!0),i.resumeHeaderLayout(t)),o.x=i.restorePos[0],o.y=i.restorePos[1],i.setBox(o,e=e||i.animateTarget?{callback:function(){i.el.enableShadow(null,!0),i.maximized=!1,i.fireEvent("restore",i)}}:null),i.restorePos=i.restoreSize=null,i.dd&&(i.dd.enable(),r&&r.addCls(r.indicateDragCls)),i.resizer&&i.resizer.enable(),i.container.removeCls(Ext.baseCSSPrefix+"window-maximized-ct"),i.syncMonitorWindowResize(),e||(i.el.enableShadow(null,!0),i.maximized=!1,i.fireEvent("restore",i))),i},syncMonitorWindowResize:function(){var e=this,t=e._monitoringResize,i=e.monitorResize||e.constrain||e.constrainHeader||e.maximized,n=e.hidden||e.destroying||e.destroyed;i&&!n?t||(Ext.on("resize",e.onWindowResize,e,{buffer:1}),e._monitoringResize=!0):t&&(Ext.un("resize",e.onWindowResize,e),e._monitoringResize=!1)},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var e=this.callParent(arguments);return e.xtype="window",e.focusOnToFront=!1,e},getDefaultFocus:function(){var e,t,i=this.defaultFocus;return void 0!==i&&(Ext.isNumber(i)?e=this.query("button")[i]:Ext.isString(i)?(t=i,Ext.validIdRe.test(t)&&(e=this.down(Ext.makeIdSelector(t))),e=e||this.down(t)):i.focus&&(e=i)),e},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(e,t){var i;e.el.contains(t.getTarget())&&(i=this.getDefaultFocus())&&i.focus()},initResizable:function(e){this.callParent([e]),(this.maximized||this.maximizing)&&this.resizer.disable()},initSimpleDraggable:function(){var e;this.callParent(),((e=this.dd)&&this.maximized||this.maximizing)&&e.disable()},onTabGuardFocusEnter:function(e,t){var i,n,r,o=this.el,a=this.tabGuardBeforeEl,s=this.tabGuardAfterEl,l=e.relatedTarget;(i=o.findTabbableElements({skipSelf:!0}))[0]===a.dom&&i.shift(),i[i.length-1]===s.dom&&i.pop(),0===i.length?r=o:n=l===o.dom?t===a.dom:o.contains(l)?!!e.forwardTab:t===a.dom,(r=r||(n?i[0]:i[i.length-1]))&&Ext.fly(r).focus(1===i.length?1:0)}}}),Ext.define("Ext.form.Labelable",{extend:"Ext.Mixin",requires:["Ext.XTemplate","Ext.overrides.dom.Element"],isLabelable:!0,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl","ariaErrorEl","ariaStatusEl","ariaHelpEl","labelTextEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"','<tpl if="inputId && !skipLabelForAttribute"> for="{inputId}"</tpl>'," {labelAttrTpl}>",'<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<span id="{id}-labelTextEl" data-ref="labelTextEl" class="{labelTextCls}">','<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","</span>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" role="presentation"',' class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}",'<tpl if="renderAriaElements">','<tpl if="ariaHelp">','<span id="{id}-ariaHelpEl" data-ref="ariaHelpEl"',' class="'+Ext.baseCSSPrefix+'hidden-offsets">',"{ariaHelp}","</span>","</tpl>",'<span id="{id}-ariaStatusEl" data-ref="ariaStatusEl" aria-hidden="true"',' class="'+Ext.baseCSSPrefix+'hidden-offsets">',"{ariaStatus}","</span>",'<span id="{id}-ariaErrorEl" data-ref="ariaErrorEl" aria-hidden="true" aria-live="assertive"',' class="'+Ext.baseCSSPrefix+'hidden-clip">',"</span>","</tpl>","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="presentation" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{tipAnchorTarget}">',"</div>","</div>","</tpl>",{disableFormats:!0}],activeErrorsTpl:void 0,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],ariaActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors" between=". ">{.}</tpl>',"</tpl>"],isFieldLabelable:!0,formItemCls:Ext.baseCSSPrefix+"form-item",labelCls:Ext.baseCSSPrefix+"form-item-label",topLabelCls:Ext.baseCSSPrefix+"form-item-label-top",rightLabelCls:Ext.baseCSSPrefix+"form-item-label-right",labelInnerCls:Ext.baseCSSPrefix+"form-item-label-inner",labelTextCls:Ext.baseCSSPrefix+"form-item-label-text",topLabelSideErrorCls:Ext.baseCSSPrefix+"form-item-label-top-side-error",errorMsgCls:Ext.baseCSSPrefix+"form-error-msg",errorWrapCls:Ext.baseCSSPrefix+"form-error-wrap",errorWrapSideCls:Ext.baseCSSPrefix+"form-error-wrap-side",errorWrapUnderCls:Ext.baseCSSPrefix+"form-error-wrap-under",errorWrapUnderSideLabelCls:Ext.baseCSSPrefix+"form-error-wrap-under-side-label",baseBodyCls:Ext.baseCSSPrefix+"form-item-body",invalidIconCls:Ext.baseCSSPrefix+"form-invalid-icon",invalidUnderCls:Ext.baseCSSPrefix+"form-invalid-under",noLabelCls:Ext.baseCSSPrefix+"form-item-no-label",fieldBodyCls:"",extraFieldBodyCls:"",invalidCls:Ext.baseCSSPrefix+"form-invalid",fieldLabel:void 0,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:!1,hideEmptyLabel:!0,preventMark:!1,autoFitErrors:!0,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:!0,ariaHelp:void 0,ariaErrorText:"Input error. {0}.",labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var e,t,i=this.tip;i||(e={id:"ext-form-error-tip",sticky:!0,ui:"form-invalid"},Ext.supports.Touch&&(e.dismissDelay=0,e.anchor="top",e.showDelay=0,e.showOnTap=!0,e.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.activeTarget.el).getWidth()}}),i=this.tip=Ext.create("Ext.tip.QuickTip",e),(t=Ext.apply({},i.tagConfig)).attribute="errorqtip",i.setTagConfig(t))},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var e=this,t=e.padding;t&&(e.padding=void 0,e.extraMargins=Ext.Element.parseBox(t)),Ext.isIE8&&(e.restoreDisplay=Ext.Function.createDelayed(e.doRestoreDisplay,0,e)),e.activeErrorsTpl||("title"===e.msgTarget?e.activeErrorsTpl=e.plaintextActiveErrorsTpl:e.activeErrorsTpl=e.htmlActiveErrorsTpl),e.addCls([e.formItemCls,e.formItemCls+"-"+e.ui]),e.lastActiveError="",e.enableBubble("errorchange")},trimLabelSeparator:function(){var e=this.labelSeparator,t=this.fieldLabel||"";return t.substr(t.length-1)===e?t.slice(0,-1):t},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(e){var t=this,i=t.labelSeparator,n=t.errorWrapEl,r="top"!==t.labelAlign,o=t.noLabelCls,a=t.errorWrapUnderSideLabelCls;e=e||"",t.fieldLabel=e,t.rendered&&(Ext.isEmpty(e)&&t.hideEmptyLabel?(t.addCls(o),r&&n&&n.removeCls(a)):(i&&(e=t.trimLabelSeparator()+i),t.labelTextEl.dom.innerHTML=e,t.removeCls(o),r&&n&&n.addCls(a)),t.updateLayout())},setHideLabel:function(e){e!==this.hideLabel&&(this.hideLabel=e,this.rendered&&(this[e?"addCls":"removeCls"](this.noLabelCls),this.updateLayout()))},setHideEmptyLabel:function(e){var t;e!==this.hideEmptyLabel&&(this.hideEmptyLabel=e,this.rendered&&!this.hideLabel&&(t=e&&!this.getFieldLabel(),this[t?"addCls":"removeCls"](this.noLabelCls),this.updateLayout()))},getInsertionRenderData:function(e,t){for(var i,n,r=t.length;r--;)(n=this[i=t[r]])&&"string"!=typeof n&&(n.isTemplate||(n=Ext.XTemplate.getTpl(this,i)),n=n.apply(e)),e[i]=n||"";return e},getLabelableRenderData:function(){var e,t,i=this,n=i.labelAlign,r="top"===n,o="right"===n,a="side"===i.msgTarget,s="under"===i.msgTarget,l=i.errorMsgCls,d=i.labelPad,u=i.labelWidth,c=i.labelClsExtra||"",h=a?i.errorWrapSideCls:i.errorWrapUnderCls,f="",g="",p=i.hasVisibleLabel(),m=i.autoFitErrors,x=i.defaultBodyWidth;return r?(c+=" "+i.topLabelCls,d&&(g="padding-bottom:"+d+"px;"),a&&!m&&(c+=" "+i.topLabelSideErrorCls)):(o&&(c+=" "+i.rightLabelCls),d&&(f+=i.getHorizontalPaddingStyle()+d+"px;"),f+="width:"+(u+(d||0))+"px;",g="width:"+u+"px"),p&&!r&&s&&(h+=" "+i.errorWrapUnderSideLabelCls),x&&(e="min-width:"+x+"px;max-width:"+x+"px;"),t={id:i.id,inputId:i.getInputId(),labelCls:i.labelCls,labelClsExtra:c,labelStyle:f+(i.labelStyle||""),labelInnerStyle:g,labelInnerCls:i.labelInnerCls,labelTextCls:i.labelTextCls,skipLabelForAttribute:!!i.skipLabelForAttribute,unselectableCls:Ext.Element.unselectableCls,bodyStyle:e,baseBodyCls:i.baseBodyCls,fieldBodyCls:i.fieldBodyCls,extraFieldBodyCls:i.extraFieldBodyCls,errorWrapCls:i.errorWrapCls,errorWrapExtraCls:h,renderError:a||s,invalidMsgCls:a?i.invalidIconCls:s?i.invalidUnderCls:"",errorMsgCls:l,growCls:i.grow?i.growCls:"",tipAnchorTarget:i.id+"-inputEl",errorWrapStyle:a&&!m?"visibility:hidden":"display:none",fieldLabel:i.getFieldLabel(),labelSeparator:i.labelSeparator,renderAriaElements:!!i.renderAriaElements,ariaStatus:""},i.ariaHelp&&(t.ariaHelp=Ext.String.htmlEncode(i.ariaHelp)),i.getInsertionRenderData(t,i.labelableInsertions),t},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){this.setFieldDefaults(this.getInherited().fieldDefaults),this.ownerLayout&&this.addCls(Ext.baseCSSPrefix+this.ownerLayout.type+"-form-item"),this.hasVisibleLabel()||this.addCls(this.noLabelCls)},onLabelRender:function(){var e,t,i={},n=Ext.Element,r=this.errorWrapEl;if(r&&r.setVisibilityMode("side"!==this.msgTarget||this.autoFitErrors?n.DISPLAY:n.VISIBILITY),this.extraMargins){for(t in e=this.el.getMargin())e.hasOwnProperty(t)&&(i["margin-"+t]=e[t]+this.extraMargins[t]+"px");this.el.setStyle(i)}},hasVisibleLabel:function(){return!this.hideLabel&&!(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return!!this.getActiveError()},setActiveError:function(e){this.setActiveErrors(e)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(e){var t,i,n,r,o,a,s=this,l=s.errorWrapEl,d=s.msgTarget,u="side"===d,c="qtip"===d,h=s.ariaErrorEl;e=Ext.Array.from(e),n=s.lookupTpl("activeErrorsTpl"),s.activeErrors=e,i=s.activeError=n.apply({fieldLabel:s.fieldLabel,errors:e,listCls:Ext.baseCSSPrefix+"list-plain"}),s.renderActiveError(),s.rendered&&(t=s.getActionEl(),u?s.errorEl.dom.setAttribute("data-errorqtip",i):c?t.dom.setAttribute("data-errorqtip",i):"title"===d&&t.dom.setAttribute("title",i),"title"!==d&&h&&(o=s.lookupTpl("ariaActiveErrorsTpl").apply({errors:e}),a=Ext.String.formatEncode(s.ariaErrorText,o,s.fieldLabel),h.dom.innerHTML!==a&&(h.dom.innerHTML=a),s.ariaStatusEl.dom.innerHTML=Ext.String.htmlEncode(o)),(u||c)&&Ext.form.Labelable.initTip(),s.msgTargets[d]||(r=Ext.get(d))&&(r.dom.innerHTML=i)),l&&(l.setVisible(0<e.length),u&&s.autoFitErrors&&s.labelEl.addCls(s.topLabelSideErrorCls),s.updateLayout())},unsetActiveError:function(){var e,t,i=this,n=i.errorWrapEl,r=i.ariaErrorEl,o=i.msgTarget,a=i.restoreDisplay;i.hasActiveError()&&(delete i.activeError,delete i.activeErrors,i.renderActiveError(),i.rendered&&(e=i.getActionEl(),"qtip"===o?e.dom.removeAttribute("data-errorqtip"):"title"===o&&e.dom.removeAttribute("title"),"title"!==o&&r&&(r.dom.innerHTML=i.ariaStatusEl.dom.innerHTML=""),i.msgTargets[o]||(t=Ext.get(o))&&(t.dom.innerHTML=""),n&&(n.hide(),"side"===o&&i.autoFitErrors&&i.labelEl.removeCls(i.topLabelSideErrorCls),i.updateLayout(),a&&(i.el.dom.style.display="block",i.restoreDisplay()))))},doRestoreDisplay:function(){var e=this.el;e&&e.dom&&(e.dom.style.display="")},renderActiveError:function(){var e=this,t=e.getActiveError(),i=!!t;t!==e.lastActiveError&&(e.lastActiveError=t,e.fireEvent("errorchange",e,t)),!e.rendered||e.destroyed||e.preventMark||(e.toggleInvalidCls(i),e.errorEl&&(e.errorEl.dom.innerHTML=t))},toggleInvalidCls:function(e){this.el[e?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(e){var t;for(t in e)this.hasOwnProperty(t)||(this[t]=e[t])}},function(){Ext.supports.Touch&&(this.prototype.msgTarget="side")}),Ext.define("Ext.form.field.Field",{mixinId:"field",isFormField:!0,config:{validation:null,validationField:null},disabled:!1,submitValue:!0,validateOnChange:!0,valuePublishEvent:"change",suspendCheckChange:0,dirty:!1,initField:function(){var e,t,i=this.valuePublishEvent;this.initValue();var n=this.name;if(n&&-1<Ext.Array.indexOf(["tagName","nodeName","children","childNodes"],n)&&Ext.log.warn('It is recommended to not use "'+n+'" as a field name, because it can cause naming collisions during form submission.'),Ext.isString(i))this.on(i,this.publishValue,this);else for(t=0,e=i.length;t<e;++t)this.on(i[t],this.publishValue,this)},initValue:function(){"value"in this&&(this.suspendCheckChange++,this.setValue(this.value),this.suspendCheckChange--),this.initialValue=this.originalValue=this.lastValue=this.getValue()},cleanupField:function(){delete this._ownerRecord},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(e){return this.value=e,this.checkChange(),this},isEqual:function(e,t){return String(e)===String(t)},isEqualAsString:function(e,t){return String(Ext.valueFrom(e,""))===String(Ext.valueFrom(t,""))},getSubmitData:function(){var e=null;return!this.disabled&&this.submitValue&&((e={})[this.getName()]=""+this.getValue()),e},getModelData:function(e,t){var i=null;return this.disabled||!this.submitValue&&t||((i={})[this.getFieldIdentifier()]=this.getValue()),i},reset:function(){this.beforeReset(),this.setValue(this.originalValue),this.clearInvalid(),delete this.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue(),this.checkDirty()},checkChange:function(){var e,t,i=this;i.suspendCheckChange||i.destroying||i.destroyed||(e=i.getValue(),t=i.lastValue,i.didValueChange(e,t)&&(i.lastValue=e,i.fireEvent("change",i,e,t),i.onChange(e,t)))},didValueChange:function(e,t){return!this.isEqual(e,t)},onChange:function(e){this.validateOnChange&&this.validate(),this.checkDirty()},publishValue:function(){this.rendered&&!this.getErrors().length&&this.publishState("value",this.getValue())},isDirty:function(){return!this.disabled&&!this.isEqual(this.getValue(),this.originalValue)},checkDirty:function(){var e=this.isDirty();e!==this.wasDirty&&(this.dirty=e,this.fireEvent("dirtychange",this,e),this.onDirtyChange(e),this.wasDirty=e)},onDirtyChange:Ext.emptyFn,getErrors:function(e){var t,i=[],n=this.getValidationField(),r=this.getValidation();return n&&!0!==(t=n.validate(e,null,null,this._ownerRecord))&&i.push(t),r&&!0!==r&&i.push(r),i},isValid:function(){return this.disabled||Ext.isEmpty(this.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(e){return e!==this.wasValid&&(this.wasValid=e,this.fireEvent("validitychange",this,e)),e},setValidationField:function(e,t){this.callParent([e]),this._ownerRecord=t},batchChanges:function(e){try{this.suspendCheckChange++,e()}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return!1},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(e,t){t&&this.validate()},privates:{resetToInitialValue:function(){var e=this.originalValue;this.originalValue=this.initialValue,this.reset(),this.originalValue=e}}}),Ext.define("Ext.form.field.Base",{extend:"Ext.Component",alternateClassName:["Ext.form.Field","Ext.form.BaseField"],xtype:"field",requires:["Ext.util.DelayedTask","Ext.XTemplate"],mixins:["Ext.form.Labelable","Ext.form.field.Field"],focusable:!0,shrinkWrap:!0,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',"<tpl if=\"ariaEl == 'inputEl'\">",'<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>',"</tpl>",'<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls} {fixCls}" autocomplete="off"/>',{disableFormats:!0}],defaultBindProperty:"value",autoEl:{role:"presentation"},subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:!0,invalidText:"The value in this field is invalid",fieldCls:Ext.baseCSSPrefix+"form-field",focusCls:"form-focus",dirtyCls:Ext.baseCSSPrefix+"form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:!0,readOnly:!1,readOnlyCls:Ext.baseCSSPrefix+"form-readonly",validateOnBlur:!0,validateOnFocusLeave:!1,hasFocus:!1,baseCls:Ext.baseCSSPrefix+"field",fieldBodyCls:Ext.baseCSSPrefix+"field-body",webkitBorderBoxBugCls:Ext.baseCSSPrefix+"webkit-border-box-bug",maskOnDisable:!1,stretchInputElFixed:!0,ariaEl:"inputEl",focusEl:"inputEl",renderAriaElements:!0,initComponent:function(){var e=this;e.callParent(),e.subTplData=e.subTplData||{},e.initLabelable(),e.initField(),e.initDefaultName(),e.validateOnFocusLeave&&(e.validateOnBlur=!1),e.readOnly&&e.addCls(e.readOnlyCls),e.addCls(Ext.baseCSSPrefix+"form-type-"+e.inputType),e.format&&e.formatText&&!e.ariaHelp&&(e.ariaHelp=Ext.String.format(e.formatText,e.format))},initDefaultName:function(){this.name||(this.name=this.getInputId())},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(e){var t,i,n,r=this,o=r.id,a=r.inputType,s=r.getInputId(),l=r.inputCls||"",d="";return Ext.supports.WebKitInputTableBoxModelBug&&(d+=r.webkitBorderBoxBugCls),t=Ext.apply({ui:r.ui,id:s,cmpId:o,name:r.name||s,disabled:r.disabled,readOnly:r.readOnly,value:r.getRawValue(),type:a,fieldCls:r.fieldCls,fieldStyle:r.getFieldStyle(),childElCls:e.childElCls,tabIdx:r.tabIndex,inputCls:l,typeCls:Ext.baseCSSPrefix+"form-"+(r.isTextInput?"text":a),fixCls:d,ariaEl:r.ariaEl},r.subTplData),r.ariaRole&&(i={},r.ariaStaticRoles[r.ariaRole]||(i["aria-hidden"]=!!r.hidden,i["aria-disabled"]=!!r.disabled,n={"aria-invalid":!1,"aria-readonly":!!r.readOnly},r.ariaLabel&&(i["aria-label"]=Ext.String.htmlEncode(r.ariaLabel)),(i=Ext.apply(i,r.getAriaAttributes()))["aria-describedby"]||(r.ariaHelp?n["aria-describedby"]=o+"-ariaStatusEl "+o+"-ariaHelpEl":n["aria-describedby"]=o+"-ariaStatusEl"),t.inputElAriaAttributes=n),"native"!==r.ariaRole&&(i.role=r.ariaRole),r.ariaLabel&&(i["aria-label"]=r.ariaLabel),r.format&&r.formatText&&!t.title&&(i.title=Ext.String.formatEncode(r.formatText,r.format)),t.ariaElAttributes=i),r.getInsertionRenderData(t,r.subTplInsertions),t},getSubTplMarkup:function(e){var t=this.getSubTplData(e),i=this.lookupTpl("preSubTpl"),n=this.lookupTpl("postSubTpl"),r="";return i&&(r+=i.apply(t)),r+=this.lookupTpl("fieldSubTpl").apply(t),n&&(r+=n.apply(t)),r},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},setFieldStyle:function(e){var t=this.inputEl;t&&t.applyStyles(e),this.fieldStyle=e},getFieldStyle:function(){var e=this.fieldStyle;return Ext.isObject(e)?Ext.DomHelper.generateStyles(e,null,!0):e||""},onRender:function(){this.callParent(arguments),this.mixins.labelable.self.initTip(),this.renderActiveError()},beforeBlur:function(e){this.validateOnBlur&&this.validate()},onFocusLeave:function(e){this.validateOnFocusLeave&&this.validate(),this.callParent([e]),this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return"file"===this.inputType},getSubmitData:function(){var e,t=null;return!this.disabled&&this.submitValue&&null!==(e=this.getSubmitValue())&&((t={})[this.getName()]=e),t},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var e=this.inputEl?this.inputEl.getValue():Ext.valueFrom(this.rawValue,"");return this.rawValue=e},setRawValue:function(e){var t=this,i=t.rawValue;return t.transformRawValue.$nullFn||(e=t.transformRawValue(e)),e=Ext.valueFrom(e,""),void 0!==i&&i===e||(t.rawValue=e,t.inputEl&&(t.bindChangeEvents(!1),t.inputEl.dom.value=e,t.bindChangeEvents(!0))),t.rendered&&t.reference&&t.publishState("rawValue",e),e},transformRawValue:Ext.identityFn,valueToRaw:function(e){return""+Ext.valueFrom(e,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var e=this.rawToValue(this.processRawValue(this.getRawValue()));return this.value=e},setValue:function(e){return this.setRawValue(this.valueToRaw(e)),this.mixins.field.setValue.call(this,e)},onBoxReady:function(){this.callParent(arguments),this.setReadOnlyOnBoxReady&&this.setReadOnly(this.readOnly)},onDisable:function(){var e=this.inputEl;this.callParent(),e&&(e.dom.disabled=!0,this.hasActiveError()&&(this.clearInvalid(),this.hadErrorOnDisable=!0)),!1===this.wasValid&&this.checkValidityChange(!0)},onEnable:function(){var e,t=this,i=t.inputEl,n=t.preventMark;t.callParent(),i&&(i.dom.disabled=!1),void 0!==t.wasValid&&(t.forceValidation=!0,t.preventMark=!t.hadErrorOnDisable,e=t.isValid(),t.forceValidation=!1,t.preventMark=n,t.checkValidityChange(e)),delete t.hadErrorOnDisable},setReadOnly:function(e){var t=this.inputEl,i=this.readOnly;this[(e=!!e)?"addCls":"removeCls"](this.readOnlyCls),this.readOnly=e,t?(t.dom.readOnly=e,t.dom.setAttribute("aria-readonly",e)):this.rendering&&(this.setReadOnlyOnBoxReady=!0),e!==i&&this.fireEvent("writeablechange",this,e)},fireKey:function(e,t){e.isSpecialKey()&&this.fireEvent("specialkey",this,e,t)},initEvents:function(){var e,t,i=this,n=i.inputEl,r=i.onFieldMutation,o=i.checkChangeEvents,a=o.length;if(n)for(i.mon(n,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",i.fireKey,i),e=0;e<a;++e)"propertychange"===(t=o[e])&&(i.usesPropertychange=!0),"textInput"===t&&(i.usesTextInput=!0),i.mon(n,t,r,i);i.callParent()},onFieldMutation:function(e){this.readOnly||"propertychange"===e.type&&this.ignoreChangeRe.test(e.browserEvent.propertyName)||this.startCheckChangeTask()},startCheckChangeTask:function(){var e=this.checkChangeTask;e||(this.checkChangeTask=e=new Ext.util.DelayedTask(this.doCheckChangeTask,this)),this.bindNotifyListener||(this.bindNotifyListener=Ext.on("beforebindnotify",this.onBeforeNotify,this,{destroyable:!0})),e.delay(this.checkChangeBuffer)},doCheckChangeTask:function(){var e=this.bindNotifyListener;e&&(e.destroy(),this.bindNotifyListener=null),this.checkChange()},publishValue:function(){this.rendered&&!this.getErrors().length&&this.publishState("value",this.getValue())},onDirtyChange:function(e){this[e?"addCls":"removeCls"](this.dirtyCls),this.rendered&&this.reference&&this.publishState("dirty",e)},isValid:function(){var e=this.disabled;return this.forceValidation||!e?this.validateValue(this.processRawValue(this.getRawValue())):e},validateValue:function(e){var t=this.getErrors(e),i=Ext.isEmpty(t);return this.preventMark||(i?this.clearInvalid():this.markInvalid(t)),i},markInvalid:function(e){var t,i=this.getActiveError();this.setActiveErrors(Ext.Array.from(e)),i!==(t=this.getActiveError())&&(this.setError(t),!this.ariaStaticRoles[this.ariaRole]&&this.inputEl&&this.inputEl.dom.setAttribute("aria-invalid",!0))},clearInvalid:function(){var e=this.hasActiveError();delete this.hadErrorOnDisable,this.unsetActiveError(),e&&(this.setError(""),!this.ariaStaticRoles[this.ariaRole]&&this.inputEl&&this.inputEl.dom.setAttribute("aria-invalid",!1))},setError:function(e){var t,i=this.msgTarget;this.rendered&&("title"===i||"qtip"===i?(t="qtip"===i?"data-errorqtip":"title",this.getActionEl().dom.setAttribute(t,e||"")):this.updateLayout())},renderActiveError:function(){var e=this.hasActiveError(),t=this.invalidCls+"-field";this.inputEl&&this.inputEl[e?"addCls":"removeCls"]([t,t+"-"+this.ui]),this.mixins.labelable.renderActiveError.call(this)},doDestroy:function(){var e=this.checkChangeTask;e&&e.cancel(),Ext.destroy(this.bindNotifyListener),this.cleanupField(),this.callParent()},privates:{applyBind:function(e,t){var i,n,r=t&&t.value;return(i=this.callParent([e,t]))&&(n=i.value,this.hasBindingValue=!!n,n!==r&&this.getInherited().modelValidation&&this.updateValueBinding(i)),i},applyRenderSelectors:function(){this.callParent(),this.inputEl||(this.inputEl=this.el.getById(this.getInputId()))},bindChangeEvents:function(e){var t=e?"resumeEvent":"suspendEvent",i=this.inputEl;this.usesPropertychange&&i[t]("propertychange"),this.usesTextInput&&i[t]("textInput")},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){return this.hasOwnProperty("renderTpl")||(this.renderTpl=this.lookupTpl("labelableRenderTpl")),this.callParent()},onBeforeNotify:function(){this.checkChangeTask.cancel(),this.checkChange()},updateValueBinding:function(e){var t=e.value,i=e.$fieldBinding;i&&(i.destroy(),e.$fieldBinding=null),t&&t.bindValidationField&&(this.fieldBinding=t.bindValidationField("setValidationField",this))}},deprecated:{5:{methods:{doComponentLayout:function(){this.bindChangeEvents(!1),this.callParent(arguments),this.bindChangeEvents(!0)}}}}}),Ext.define("Ext.layout.component.field.Text",{extend:"Ext.layout.component.Auto",alias:"layout.textfield",beginLayoutCycle:function(e,t){var i=e.target;e.el.toggleCls(i.heightedCls,!e.heightModel.shrinkWrap||null!=i.minHeight),this.callParent([e,t])}}),Ext.define("Ext.form.field.VTypes",function(){var t=/^[a-zA-Z_]+$/,i=/^[a-zA-Z0-9_]+$/,n=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,r=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:!0,alternateClassName:"Ext.form.VTypes",email:function(e){return n.test(e)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(e){return r.test(e)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(e){return t.test(e)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(e){return i.test(e)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}),Ext.define("Ext.form.trigger.Trigger",{alias:"trigger.trigger",requires:["Ext.util.ClickRepeater"],mixins:["Ext.mixin.Factoryable"],factoryConfig:{defaultType:"trigger"},repeatClick:!1,hidden:!1,hideOnReadOnly:void 0,tooltip:null,weight:0,preventMouseDown:!0,focusOnMousedown:!1,baseCls:Ext.baseCSSPrefix+"form-trigger",focusCls:Ext.baseCSSPrefix+"form-trigger-focus",overCls:Ext.baseCSSPrefix+"form-trigger-over",clickCls:Ext.baseCSSPrefix+"form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>','<tpl if="ariaRole"> role="{ariaRole}"<tpl else> role="presentation"</tpl>',">","{[values.$trigger.renderBody(values)]}","</div>"],constructor:function(e){var t,i=this;Ext.apply(i,e),i.compat4Mode&&(t=i.cls,i.focusCls=[i.focusCls,t+"-focus"],i.overCls=[i.overCls,t+"-over"],i.clickCls=[i.clickCls,t+"-click"]),i.validIdRe.test(i.id)||Ext.raise('Invalid trigger "id": "'+i.id+'"')},afterFieldRender:function(){var e=this.tooltip;this.initEvents(),e&&(this.tooltip=null,this.setTooltip(e))},destroy:function(){this.clickRepeater=this.el=Ext.destroy(this.clickRepeater,this.el),this.callParent()},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var e=this.el;this.hidden=!0,e&&e.hide()},initEvents:function(){var e=this,t=e.isFieldEnabled,i=e.getStateEl(),n=e.el;i.addClsOnOver(e.overCls,t,e),i.addClsOnClick(e.clickCls,t,e),e.repeatClick?e.clickRepeater=new Ext.util.ClickRepeater(n,{preventDefault:!0,handler:e.onClick,listeners:{mousedown:e.onClickRepeaterMouseDown,mouseup:e.onClickRepeaterMouseUp,scope:e},scope:e}):e.field.mon(n,{click:e.onClick,mousedown:e.onMouseDown,scope:e})},isFieldEnabled:function(){return!this.field.disabled},isVisible:function(){var e=this.field,t=!1;return!this.hidden&&e&&this.rendered&&!this.destroyed||(t=!0),!t},onClick:function(){var e=arguments,t=this.clickRepeater?e[1]:e[0],i=this.handler,n=this.field;i&&!n.readOnly&&this.isFieldEnabled()&&Ext.callback(this.handler,this.scope,[n,this,t],0,n)},resolveListenerScope:function(e){return this.field.resolveSatelliteListenerScope(this,e)},onMouseDown:function(e){"touch"===e.pointerType||this.field.containsFocus&&!this.focusOnMousedown||this.field.focus(),this.preventMouseDown&&e.preventDefault()},onClickRepeaterMouseDown:function(e,t){t.parentEvent&&"mousedown"!==t.parentEvent.type||this.field.inputEl.focus(),t.preventDefault()},onClickRepeaterMouseUp:function(e,t){var i=this.field;Ext.callback(this.endHandler,this.scope,[i,this,t],0,i)},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){(this.el=this.field.triggerWrap.selectNode("#"+this.domId,!1)).setVisibilityMode(Ext.Element.DISPLAY),this.rendered=!0},renderBody:function(e){var t=this.bodyTpl;return Ext.apply(e,this.getBodyRenderData()),t?Ext.XTemplate.getTpl(this,"bodyTpl").apply(e):""},renderTrigger:function(e){var t=this,i=t.width,n=t.hidden?"display:none;":"";return i&&(n+="width:"+i),Ext.XTemplate.getTpl(t,"renderTpl").apply({$trigger:t,fieldData:e,ui:e.ui,childElCls:e.childElCls,triggerId:t.domId=t.field.id+"-trigger-"+t.id,cls:t.cls,triggerStyle:n,extraCls:t.extraCls,baseCls:t.baseCls,ariaRole:t.ariaRole})},setHidden:function(e){e!==this.hidden&&this[e?"hide":"show"]()},setTooltip:function(e){var t=this.el;e!==this.tooltip&&(this.tooltip=e,t&&t.dom.setAttribute("data-qtip",Ext.htmlEncode(e)))},setVisible:function(e){this.setHidden(!e)},show:function(){var e=this.el;this.hidden=!1,e&&e.show()}}),Ext.define("Ext.form.field.Text",{extend:"Ext.form.field.Base",alias:"widget.textfield",alternateClassName:["Ext.form.TextField","Ext.form.Text"],requires:["Ext.layout.component.field.Text","Ext.form.field.VTypes","Ext.form.trigger.Trigger","Ext.util.TextMetrics"],componentLayout:"textfield",config:{hideTrigger:!1,autoHideInputMask:null,inputMask:null,triggers:void 0},renderConfig:{editable:!0},growMin:30,growMax:800,allowBlank:!0,validateBlank:!1,allowOnlyWhitespace:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyText:"",emptyCls:Ext.baseCSSPrefix+"form-empty-field",placeholderCoverCls:Ext.baseCSSPrefix+"placeholder-label",requiredCls:Ext.baseCSSPrefix+"form-required-field",ariaRole:"textbox",repeatTriggerClick:!1,triggerWrapCls:Ext.baseCSSPrefix+"form-trigger-wrap",triggerWrapFocusCls:Ext.baseCSSPrefix+"form-trigger-wrap-focus",triggerWrapInvalidCls:Ext.baseCSSPrefix+"form-trigger-wrap-invalid",fieldBodyCls:Ext.baseCSSPrefix+"form-text-field-body",inputWrapCls:Ext.baseCSSPrefix+"form-text-wrap",inputWrapFocusCls:Ext.baseCSSPrefix+"form-text-wrap-focus",inputWrapInvalidCls:Ext.baseCSSPrefix+"form-text-wrap-invalid",growCls:Ext.baseCSSPrefix+"form-text-grow",heightedCls:Ext.baseCSSPrefix+"form-text-heighted",emptyClsElements:null,needArrowKeys:!0,childEls:["triggerWrap","inputWrap","placeholderLabel"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap"',"<tpl if=\"ariaEl == 'triggerWrap'\">",'<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",' class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap"',' role="presentation" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:['<tpl if="!Ext.supports.Placeholder">','<label id="{cmpId}-placeholderLabel" data-ref="placeholderLabel" for="{id}" class="{placeholderCoverCls} {placeholderCoverCls}-{ui}">{placeholder}</label>',"</tpl>","</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var e=this,t=e.emptyCls;!1===e.allowOnlyWhitespace&&(e.allowBlank=!1),e.grow&&(e.liquidLayout=!1),e.size&&Ext.log.warn('Ext.form.field.Text "size" config was deprecated in Ext 5.0. Please specify a "width" or use a layout instead.'),e.size&&(e.defaultBodyWidth=6.5*e.size+20),e.onTrigger1Click||(e.onTrigger1Click=e.onTriggerClick),e.callParent(),e.readOnly&&e.setReadOnly(e.readOnly),e.fieldFocusCls=e.baseCls+"-focus",e.emptyUICls=t+" "+t+"-"+e.ui,e.addStateEvents("change")},initEvents:function(){var e=this,t=e.inputEl;e.callParent(),(e.maskRe||e.vtype&&!0!==e.disableKeyFilter&&(e.maskRe=Ext.form.field.VTypes[e.vtype+"Mask"]))&&e.mon(t,"keypress",e.filterKeys,e),e.enableKeyEvents&&e.mon(t,{scope:e,keyup:e.onKeyUp,keydown:e.onKeyDown,keypress:e.onKeyPress,paste:e.onPaste})},isEqual:function(e,t){return this.isEqualAsString(e,t)},onChange:function(e,t){var i=this.getInputMask();this.callParent([e,t]),this.autoSize(),i&&i.onChange(this,e,t)},getSubTplData:function(e){var t,i,n,r=this,o=r.getRawValue(),a=r.emptyText&&o.length<1,s=r.maxLength;return r.enforceMaxLength?s===Number.MAX_VALUE&&(s=void 0):s=void 0,r.emptyText&&(t=Ext.String.htmlEncode(r.emptyText)),(n=(i=Ext.apply(r.callParent([e]),{triggerWrapCls:r.triggerWrapCls,inputWrapCls:r.inputWrapCls,placeholderCoverCls:r.placeholderCoverCls,triggers:r.orderedTriggers,maxLength:s,readOnly:!r.editable||r.readOnly,placeholder:t,value:o,fieldCls:r.fieldCls+(r.allowBlank?"":" "+r.requiredCls)+(a?" "+r.emptyUICls:"")})).inputElAriaAttributes)&&(n["aria-required"]=!r.allowBlank),i},beforeRender:function(){(null!=this.height||null!=this.minHeight||this.ownerLayout&&this.ownerLayout.getItemSizePolicy(this,this.fakeSizeModel).setsHeight)&&this.protoEl.addCls(this.heightedCls),this.callParent()},onRender:function(){var e,t=this,i=t.getTriggers(),n=[];if(Ext.supports.FixedTableWidthBug&&(t.el._needsTableWidthFix=!0),t.callParent(),t.emptyClsElements=[t.inputEl],i){for(e in t.invokeTriggers("onFieldRender"),i)n.push(i[e].el);t.triggerEl=t.triggerCell=new Ext.CompositeElement(n,!0)}t.inputCell=t.inputWrap,t.refreshEmptyText()},onResize:function(e,t,i,n){this.rendered&&this.grow&&this.autoSize(),this.callParent([e,t,i,n])},afterRender:function(){this.callParent(),this.invokeTriggers("afterFieldRender")},onBoxReady:function(e,t){this.callParent([e,t]),this.liquidLayout||this.autoSize()},applyInputMask:function(e,t){var i=Ext.field,n=i&&i.InputMask;return e&&(n||Ext.raise("Missing Ext.field.InputMask (required to use inputMask)")),e?n.from(e,t):null},applyTriggers:function(e){var t,i,n,r,o,a=this,s=a.getHideTrigger(),l=a.readOnly,d=a.orderedTriggers=[],u=a.repeatTriggerClick;if(a.rendered&&Ext.raise("Cannot set triggers after field has already been rendered."),(a.triggerCls&&!e||a.trigger1Cls)&&Ext.log.warn("Ext.form.field.Text: 'triggerCls' and 'trigger<n>Cls' are deprecated.  Use 'triggers' instead."),!e)for(e={},a.triggerCls&&!a.trigger1Cls&&(a.trigger1Cls=a.triggerCls),o=1;r=a["trigger"+o+"Cls"];o++)e["trigger"+o]={cls:r,extraCls:Ext.baseCSSPrefix+"trigger-index-"+o,handler:"onTrigger"+o+"Click",compat4Mode:!0,scope:a};for(t in e)e.hasOwnProperty(t)&&((i=e[t]).field=a,i.id=t,(l&&!1!==i.hideOnReadOnly||s&&!1!==i.hidden)&&(i.hidden=!0),u&&!1!==i.repeatClick&&(i.repeatClick=!0),n=e[t]=Ext.form.trigger.Trigger.create(i),d.push(n));return Ext.sortByWeight(d),e},invokeTriggers:function(e,t){var i,n,r=this.getTriggers();if(r)for(i in r)r.hasOwnProperty(i)&&(n=r[i])[e].apply(n,t||[])},getTrigger:function(e){return this.getTriggers()[e]},updateMinHeight:function(e,t){this.callParent([e,t]),this.toggleCls(Ext.baseCSSPrefix+"has-min-height",!!e)},updateInputMask:function(e,t){t&&t.release(),e&&(this.enableKeyEvents=!0)},updateHideTrigger:function(e){this.invokeTriggers(e?"hide":"show")},updateEditable:function(e,t){this.setReadOnlyAttr(!e||this.readOnly)},setReadOnly:function(e){var t,i,n=this.getTriggers(),r=this.getHideTrigger();if(e=!!e,this.callParent([e]),this.rendered&&this.setReadOnlyAttr(e||!this.editable),n)for(i in n)!0!==(t=n[i]).hideOnReadOnly&&(!1===t.hideOnReadOnly||r)||t.setVisible(!e)},setReadOnlyAttr:function(e){var t="readonly",i=this.inputEl.dom;e?i.setAttribute(t,t):i.removeAttribute(t),this.ariaStaticRoles[this.ariaRole]||this.inputEl.dom.setAttribute("aria-readonly",!!e)},processRawValue:function(e){var t,i,n=this.stripCharsRe;return n&&(n.global||(t="g",t+=n.ignoreCase?"i":"",t+=n.multiline?"m":"",n=new RegExp(n.source,t)),(i=e.replace(n,""))!==e&&(this.setRawValue(i),this.lastValue===e&&(this.lastValue=i),e=i)),e},onDisable:function(){this.callParent(),Ext.isIE&&(this.inputEl.dom.unselectable="on")},onEnable:function(){this.callParent(),Ext.isIE&&(this.inputEl.dom.unselectable="")},onKeyDown:function(e){var t=this.getInputMask();t&&t.onKeyDown(this,this.getValue(),e),this.fireEvent("keydown",this,e)},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyPress:function(e){var t=this.getInputMask();t&&t.onKeyPress(this,this.getValue(),e),this.fireEvent("keypress",this,e)},onPaste:function(e){var t=this.getInputMask();t&&t.onPaste(this,this.getValue(),e),this.fireEvent("paste",this,e)},getEmptyText:function(){return this.emptyText},setEmptyText:function(e){var t=this.inputEl;return e=e||"",this.emptyText=e,this.rendered&&(Ext.supports.Placeholder&&!this.simulatePlaceholder?e?t.dom.setAttribute("placeholder",e):t.dom.removeAttribute("placeholder"):this.placeholderLabel.setHtml(e),this.refreshEmptyText()),this},afterFirstLayout:function(){var e;this.callParent(),Ext.isIE&&this.disabled&&(e=this.inputEl)&&(e.dom.unselectable="on")},toggleInvalidCls:function(e){var t=e?"addCls":"removeCls";this.callParent([e]),this.triggerWrap[t](this.triggerWrapInvalidCls),this.inputWrap[t](this.inputWrapInvalidCls)},onFieldMutation:function(e){this.refreshEmptyText(),this.callParent([e])},refreshEmptyText:function(){var e,t,i,n=this.inputEl,r=this.emptyClsElements;if(n)for(e=this.getValue(),t=!(n.dom.value||Ext.isArray(e)&&e.length),this.placeholderLabel&&this.placeholderLabel.setDisplayed(t),i=0;i<r.length;i++)r[i].toggleCls(this.emptyUICls,t)},setValue:function(e){return e=this.callParent([e]),this.refreshEmptyText(),e},onFocus:function(e){var t,i=this,n=i.inputEl.dom,r=i.getInputMask();i.callParent([e]),i.emptyText&&i.autoSize(),r&&r.onFocus(i,n.value),i.addCls(i.fieldFocusCls),i.triggerWrap.addCls(i.triggerWrapFocusCls),i.inputWrap.addCls(i.inputWrapFocusCls),i.invokeTriggers("onFieldFocus",[e]),i.selectOnFocus&&document.activeElement===n&&(t=n.value.length,Ext.asap(i.selectText,i,[0,t]))},onBlur:function(e){var t,i=this,n=i.inputEl.dom,r=i.getInputMask();i.callParent([e]),t=n&&n.value,i.removeCls(i.fieldFocusCls),i.triggerWrap.removeCls(i.triggerWrapFocusCls),i.inputWrap.removeCls(i.inputWrapFocusCls),i.invokeTriggers("onFieldBlur",[e]),r&&!1!==i.getAutoHideInputMask()&&r.onBlur(i,t)},filterKeys:function(e){var t;e.ctrlKey&&!e.altKey||e.isSpecialKey()||(t=String.fromCharCode(e.getCharCode()),this.maskRe.test(t)||e.stopEvent())},getState:function(){return this.addPropertyToState(this.callParent(),"value")},applyState:function(e){this.callParent([e]),e.hasOwnProperty("value")&&this.setValue(e.value)},getErrors:function(e){e=arguments.length?null==e?"":e:this.processRawValue(this.getRawValue());var t,i,n=this,r=n.callParent([e]),o=n.validator,a=n.vtype,s=Ext.form.field.VTypes,l=n.regex,d=Ext.String.format;if(Ext.isFunction(o)&&!0!==(t=o.call(n,e))&&r.push(t),(n.allowOnlyWhitespace?e:Ext.String.trim(e)).length<1){if(n.allowBlank||r.push(n.blankText),!n.validateBlank)return r;i=!0}return!i&&e.length<n.minLength&&r.push(d(n.minLengthText,n.minLength)),e.length>n.maxLength&&r.push(d(n.maxLengthText,n.maxLength)),a&&(s[a](e,n)||r.push(n.vtypeText||s[a+"Text"])),l&&!l.test(e)&&r.push(n.regexText||n.invalidText),r},getCaretPos:function(){return this.inputEl.getCaretPos()},setCaretPos:function(e){this.inputEl.setCaretPos(e)},getTextSelection:function(){return this.inputEl.getTextSelection()},selectText:function(e,t,i){var n=this;return Ext.defer(function(){!n.destroyed&&n.inputEl.isVisible(!0)&&n.inputEl.selectText(e,t,i)},Ext.isIE?10:0),n},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var e,t,i,n,r,o,a=this;if(a.grow&&a.rendered&&a.getSizeModel().width.auto){for(t in n=a.inputEl,e=a.getTriggers(),i=0,o=(o=Ext.util.Format.htmlEncode(a.getGrowWidth()||(a.hasFocus?"":a.emptyText)||"")).replace(/\s/g,"&nbsp;"),e)i+=e[t].el.getWidth();r=n.getTextWidth(o)+i+a.inputWrap.getBorderWidth("lr")+a.triggerWrap.getBorderWidth("lr")+n.getPadding("lr"),r=Math.min(Math.max(r,a.growMin),a.growMax),a.bodyEl.setWidth(r),a.updateLayout(),a.fireEvent("autosize",a,r)}},doDestroy:function(){this.invokeTriggers("destroy"),Ext.destroy(this.triggerRepeater),this.setInputMask(null),this.callParent()},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var e,t=this.getTriggers(),i=0;if(t&&this.rendered)for(e in t)t.hasOwnProperty(e)&&(i+=t[e].el.getWidth());return i}}}}},function(e){var t=Ext.layout.SizeModel.calculated;e.prototype.fakeSizeModel=t.pairsByHeightOrdinal[t.ordinal]}),Ext.define("Ext.form.field.TextArea",{extend:"Ext.form.field.Text",alias:["widget.textareafield","widget.textarea"],alternateClassName:"Ext.form.TextArea",requires:["Ext.XTemplate","Ext.util.DelayedTask"],fieldSubTpl:['<textarea id="{id}" data-ref="inputEl" rows="1" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls} {fixCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:!0}],growMin:60,growMax:1e3,growAppend:"\n-",enterIsSpecial:!1,preventScrollbars:!1,returnRe:/\r/g,inputCls:Ext.baseCSSPrefix+"form-textarea",extraFieldBodyCls:Ext.baseCSSPrefix+"form-textarea-body",ariaAttributes:{"aria-multiline":!0},constructor:function(e){this.callParent([e]),this.cols&&Ext.log.warn('Ext.form.field.TextArea "cols" config was removed in Ext 5.0. Please specify a "width" or use a layout instead.'),this.rows&&Ext.log.warn('Ext.form.field.TextArea "rows" config was removed in Ext 5.0. Please specify a "height" or use a layout instead.')},getSubTplData:function(e){var t=this.getFieldStyle(),i=this.callParent(arguments);return this.grow&&this.preventScrollbars&&(i.fieldStyle=(t||"")+";overflow:hidden;"),i},afterRender:function(){this.callParent(arguments),this.needsMaxCheck=this.enforceMaxLength&&this.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength,this.needsMaxCheck&&this.inputEl.on("paste",this.onPaste,this)},transformRawValue:function(e){return this.stripReturns(e)},getValue:function(){return this.stripReturns(this.callParent())},valueToRaw:function(e){return e=this.stripReturns(e),this.callParent([e])},stripReturns:function(e){return e&&"string"==typeof e&&(e=e.replace(this.returnRe,"")),e},onPaste:function(){this.pasteTask||(this.pasteTask=new Ext.util.DelayedTask(this.pasteCheck,this)),this.pasteTask.delay(1)},pasteCheck:function(){var e=this.getValue(),t=this.maxLength;e.length>t&&(e=e.substr(0,t),this.setValue(e))},fireKey:function(e){var t=e.getKey();e.isSpecialKey()&&(this.enterIsSpecial||t!==e.ENTER||e.hasModifier())&&this.fireEvent("specialkey",this,e),!this.needsMaxCheck||t===e.BACKSPACE||t===e.DELETE||e.isNavKeyPress()||this.isCutCopyPasteSelectAll(e,t)||this.getValue().length>=this.maxLength&&e.stopEvent()},isCutCopyPasteSelectAll:function(e,t){return!!e.ctrlKey&&(t===e.A||t===e.C||t===e.V||t===e.X)},autoSize:function(){var e,t,i,n,r,o=this;o.grow&&o.rendered&&o.getSizeModel().height.auto&&(n=(e=o.inputEl).getWidth(!0),r=Ext.util.Format.htmlEncode(e.dom.value)||"&#160;",r=(r+=o.growAppend).replace(/\n/g,"<br/>"),i=Ext.util.TextMetrics.measure(e,r,n).height+e.getPadding("tb")+o.inputWrap.getBorderWidth("tb")+o.triggerWrap.getBorderWidth("tb"),i=Math.min(Math.max(i,o.growMin),o.growMax),t=o.preventScrollbars||!o.growMax||i<o.growMax,e.setStyle("overflow-y",t?"hidden":"auto"),o.bodyEl.setHeight(i),o.updateLayout(),o.fireEvent("autosize",o,i))},doDestroy:function(){var e=this.pasteTask;e&&e.cancel(),this.callParent()}}),Ext.define("Ext.window.MessageBox",{extend:"Ext.window.Window",requires:["Ext.toolbar.Toolbar","Ext.form.field.Text","Ext.form.field.TextArea","Ext.button.Button","Ext.layout.container.Anchor","Ext.layout.container.HBox","Ext.ProgressBar"],alias:"widget.messagebox",OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:Ext.baseCSSPrefix+"message-box-info",WARNING:Ext.baseCSSPrefix+"message-box-warning",QUESTION:Ext.baseCSSPrefix+"message-box-question",ERROR:Ext.baseCSSPrefix+"message-box-error",hideMode:"offsets",closeAction:"hide",resizable:!1,scrollable:!0,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:!0,cls:[Ext.baseCSSPrefix+"message-box",Ext.baseCSSPrefix+"hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:!0,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],baseIconCls:Ext.baseCSSPrefix+"message-box-icon",ariaRole:"alertdialog",makeButton:function(e){var t=this.buttonIds[e];return new Ext.button.Button({handler:this.btnCallback,itemId:t,scope:this,text:this.buttonText[t],minWidth:75})},btnCallback:function(t,e){var i,n,r=this;!e||"keydown"!==e.type||e.isSpecialKey()?((r.cfg.prompt||r.cfg.multiline)&&(i=(n=r.cfg.multiline?r.textArea:r.textField).getValue(),n.reset()),r.hide(),r.userCallback(t.itemId,i,r.cfg)):e.getTarget(null,null,!0).on({keyup:function(e){r.btnCallback(t,e)},single:!0})},hide:function(){var e=this.cfg?this.cfg.cls:"";this.progressBar.reset(),e&&this.removeCls(e),this.callParent(arguments)},constructor:function(e){var t=this;t.callParent(arguments),t.minWidth=t.defaultMinWidth=t.minWidth||t.defaultMinWidth,t.maxWidth=t.defaultMaxWidth=t.maxWidth||t.defaultMaxWidth,t.minHeight=t.defaultMinHeight=t.minHeight||t.defaultMinHeight,t.maxHeight=t.defaultMaxHeight=t.maxHeight||t.defaultMaxHeight},initComponent:function(e){var t,i,n=this,r=n.id;for(n.title=n.title||"&#160;",n.iconCls=n.iconCls||"",n.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[n.iconComponent=new Ext.Component({cls:n.baseIconCls}),n.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[n.msg=new Ext.Component({id:r+"-msg",cls:n.baseCls+"-text"}),n.textField=new Ext.form.field.Text({id:r+"-textfield",enableKeyEvents:!0,ariaAttributes:{"aria-labelledby":n.msg.id},listeners:{keydown:n.onPromptKey,scope:n}}),n.textArea=new Ext.form.field.TextArea({id:r+"-textarea",height:75,ariaAttributes:{"aria-labelledby":n.msg.id}})]})]}),n.progressBar=new Ext.ProgressBar({id:r+"-progressbar",margin:"0 10 10 10"}),n.items=[n.topContainer,n.progressBar],n.msgButtons=[],t=0;t<4;t++)i=n.makeButton(t),n.msgButtons[i.itemId]=i,n.msgButtons.push(i);n.bottomTb=new Ext.toolbar.Toolbar({id:r+"-toolbar",ui:"footer",dock:"bottom",focusableContainer:!1,ariaRole:null,layout:{pack:{left:"start",right:"end"}[n.buttonAlign]||"center"},items:[n.msgButtons[0],n.msgButtons[1],n.msgButtons[2],n.msgButtons[3]]}),n.dockedItems=[n.bottomTb],n.on("close",n.onClose,n),n.callParent()},afterRender:function(){this.callParent(arguments),this.textField.labelEl.dom.removeAttribute("for"),this.textArea.labelEl.dom.removeAttribute("for")},onClose:function(){var e=this.msgButtons[3];e&&this.btnCallback(e)},onPromptKey:function(e,t){t.keyCode!==t.RETURN&&10!==t.keyCode||(this.msgButtons.ok.isVisible()?this.msgButtons.ok.handler.call(this,this.msgButtons.ok):this.msgButtons.yes.isVisible()&&this.msgButtons.yes.handler.call(this,this.msgButtons.yes))},reconfigure:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g=this,p=0,m=!0,x=g.buttonText,y=g.resizer,v=g.header,E=v&&!v.isHeader,b=e&&(e.message||e.msg),C=e.buttonTips;g.updateButtonText(),g.cfg=e=e||{},h=e.wait,e.width&&(r=e.width),e.height&&(o=e.height),g.minWidth=e.minWidth||g.defaultMinWidth,g.maxWidth=e.maxWidth||g.defaultMaxWidth,g.minHeight=e.minHeight||g.defaultMinHeight,g.maxHeight=e.maxHeight||g.defaultMaxHeight,"maskClickAction"in e?g.maskClickAction=e.maskClickAction:delete g.maskClickAction,y&&(n=y.resizeTracker,y.minWidth=n.minWidth=g.minWidth,y.maxWidth=n.maxWidth=g.maxWidth,y.minHeight=n.minHeight=g.minHeight,y.maxHeight=n.maxHeight=g.maxHeight),delete g.defaultFocus,e.defaultFocus&&(g.defaultFocus=e.defaultFocus),g.animateTarget=e.animateTarget||void 0,g.modal=!1!==e.modal,t=null!=e.title?e.title:E&&null!=v.title?v.title:g.title,i=null!=e.iconCls?e.iconCls:E&&null!=v.iconCls?v.iconCls:g.iconCls,g.setTitle(t),g.setIconCls(i),p=Ext.isObject(e.buttons)?(g.buttonText=e.buttons,0):(g.buttonText=e.buttonText||g.buttonText,Ext.isNumber(e.buttons)?e.buttons:0),Ext.each(g.buttonIds,function(e){g.msgButtons[e].setTooltip(C&&C[e]||null)}),p|=g.updateButtonText(),g.buttonText=x,Ext.suspendLayouts(),g.width=g.height=null,(r||o)&&(r&&g.setWidth(r),o&&g.setHeight(o)),g.rendered||g.render(Ext.getBody()),g.closable=!1!==e.closable&&!h,(v=g.header)&&((f=v.child("[type=close]"))&&f.setVisible(g.closable),e.title||g.closable||e.iconCls?v.show():v.hide()),g.liveDrag=!e.proxyDrag,g.userCallback=Ext.Function.bindCallback(e.callback||e.fn||Ext.emptyFn,e.scope||Ext.global),g.setIcon(e.icon),d=g.msg,b?(d.setHtml(b),d.show(),g.ariaEl.dom.setAttribute("aria-describedby",d.id)):(d.hide(),g.ariaEl.dom.removeAttribute("aria-describedby")),s=g.textArea,l=g.textField,e.prompt||e.multiline?(g.multiline=e.multiline,e.multiline?(s.setValue(e.value),s.setHeight(e.defaultTextHeight||g.defaultTextHeight),s.show(),l.hide(),g.defaultFocus=s):(l.setValue(e.value),s.hide(),l.show(),g.defaultFocus=l),g.ariaEl.dom.removeAttribute("aria-describedby")):(s.hide(),l.hide()),u=g.progressBar,e.progress||h?(u.show(),g.updateProgress(0,e.progressText),g.defaultFocus=u,h&&u.wait(!0===h?e.waitConfig:h)):u.hide(),c=g.msgButtons;for(a=0;a<4;a++)p&Math.pow(2,a)?(g.defaultFocus||(g.defaultFocus=c[a]),c[a].show(),m=!1):c[a].hide();m?g.bottomTb.hide():g.bottomTb.show(),Ext.resumeLayouts(!0)},updateButtonText:function(){var e,t,i=this.buttonText,n=0;for(e in i)i.hasOwnProperty(e)&&(t=this.msgButtons[e])&&(this.cfg&&this.cfg.buttonText&&(n|=Math.pow(2,Ext.Array.indexOf(this.buttonIds,e))),t.text!==i[e]&&t.setText(i[e]));return n},show:function(e){var t,i=this;return e=e||{},Ext.Component.layoutSuspendCount?Ext.on({resumelayouts:function(){i.show(e)},single:!0}):(i.reconfigure(e),e.cls&&i.addCls(e.cls),t=i.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])"),i.preventFocusOnActivate=!t.length,i.callParent(),i.closable&&!i.defaultFocus&&i.focus()),i},onShow:function(){this.callParent(arguments),this.center()},updateText:function(e){this.msg.setHtml(e)},setIcon:function(e,t,i){var n=this.iconComponent,r=this.messageIconCls;return r&&n.removeCls(r),e?(n.show(),(t||i)&&n.setSize(t||n.getWidth(),i||n.getHeight()),n.addCls(Ext.baseCSSPrefix+"dlg-icon"),n.addCls(this.messageIconCls=e)):(n.removeCls(Ext.baseCSSPrefix+"dlg-icon"),n.hide()),this},updateProgress:function(e,t,i){return this.progressBar.updateProgress(e,t),i&&this.updateText(i),this},onEsc:function(){!1!==this.closable&&this.callParent(arguments)},confirm:function(e,t,i,n){return Ext.isString(e)&&(e={title:e,icon:this.QUESTION,message:t,buttons:this.YESNO,callback:i,scope:n}),this.show(e)},prompt:function(e,t,i,n,r,o){return Ext.isString(e)&&(e={prompt:!0,title:e,minWidth:this.minPromptWidth,message:t,buttons:this.OKCANCEL,callback:i,scope:n,multiline:r,value:o}),this.show(e)},wait:function(e,t,i){return Ext.isString(e)&&(e={title:t,message:e,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:i}),this.show(e)},alert:function(e,t,i,n){return Ext.isString(e)&&(e={title:e,message:t,buttons:this.OK,fn:i,scope:n,minWidth:this.minWidth}),this.show(e)},progress:function(e,t,i){return Ext.isString(e)&&(e={title:e,message:t,progress:!0,progressText:i}),this.show(e)},privates:{syncHeaderConfigs:Ext.privateFn}},function(e){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new e})}),Ext.define("Ext.form.Basic",{extend:"Ext.util.Observable",alternateClassName:"Ext.form.BasicForm",requires:["Ext.util.MixedCollection","Ext.form.action.Load","Ext.form.action.Submit","Ext.form.action.StandardSubmit","Ext.window.MessageBox","Ext.data.ErrorCollection","Ext.util.DelayedTask"],taskDelay:10,constructor:function(e,t){var i,n=this;n.owner=e,n.fieldMonitors={validitychange:n.checkValidityDelay,enable:n.checkValidityDelay,disable:n.checkValidityDelay,dirtychange:n.checkDirtyDelay,errorchange:n.checkErrorDelay,scope:n},n.checkValidityTask=new Ext.util.DelayedTask(n.checkValidity,n),n.checkDirtyTask=new Ext.util.DelayedTask(n.checkDirty,n),n.checkErrorTask=new Ext.util.DelayedTask(n.checkError,n),n.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:n,addHandler:n.onFieldAdd,removeHandler:n.onFieldRemove,invalidateHandler:n.onMonitorInvalidate}),n.monitor.bind(e),Ext.apply(n,t),Ext.isString(n.paramOrder)&&(n.paramOrder=n.paramOrder.split(/[\s,|]/)),(i=n.reader)&&!i.isReader&&("string"==typeof i&&(i={type:i}),n.reader=Ext.createByAlias("reader."+i.type,i)),(i=n.errorReader)&&!i.isReader&&("string"==typeof i&&(i={type:i}),n.errorReader=Ext.createByAlias("reader."+i.type,i)),n.callParent()},initialize:function(){this.initialized=!0,this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:!1,waitTitle:"Please Wait...",trackResetOnLoad:!1,wasDirty:!1,destroy:function(){var e=this,t=e.monitor;Ext.undefer(e.actionTimer),t&&(t.unbind(),e.monitor=null),e.clearListeners(),e.checkValidityTask.cancel(),e.checkDirtyTask.cancel(),e.checkErrorTask.cancel(),e.checkValidityTask=e.checkDirtyTask=e.checkErrorTask=null,e.callParent()},onFieldAdd:function(e){e.on(this.fieldMonitors),this.onMonitorInvalidate()},onFieldRemove:function(e){e.un(this.fieldMonitors),this.onMonitorInvalidate()},onMonitorInvalidate:function(){this.initialized&&this.checkValidityDelay()},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var e=this._boundItems;return e&&0!==e.getCount()||(e=this._boundItems=new Ext.util.MixedCollection).addAll(this.owner.query("[formBind]")),e},hasInvalidField:function(){return!!this.getFields().findBy(function(e){var t,i=e.preventMark;return e.preventMark=!0,t=e.isValid(),e.preventMark=i,!t})},isValid:function(){var e;return Ext.suspendLayouts(),e=this.getFields().filterBy(function(e){return!e.validate()}),Ext.resumeLayouts(!0),e.length<1},checkValidity:function(){var e;this.destroyed||(e=!this.hasInvalidField())!==this.wasValid&&(this.onValidityChange(e),this.fireEvent("validitychange",this,e),this.wasValid=e)},checkValidityDelay:function(){var e=this.taskDelay;e?this.checkValidityTask.delay(e):this.checkValidity()},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var e=this.taskDelay;e?this.checkErrorTask.delay(e):this.checkError()},onValidityChange:function(e){var t,i,n,r,o=this.getBoundItems();if(o)for(n=(t=o.items).length,i=0;i<n;i++)(r=t[i]).disabled===e&&r.setDisabled(!e)},isDirty:function(){return!!this.getFields().findBy(function(e){return e.isDirty()})},checkDirtyDelay:function(){var e=this.taskDelay;e?this.checkDirtyTask.delay(e):this.checkDirty()},checkDirty:function(){var e;this.destroyed||(e=this.isDirty())!==this.wasDirty&&(this.fireEvent("dirtychange",this,e),this.wasDirty=e)},hasUpload:function(){return!!this.getFields().findBy(function(e){return e.isFileUpload()})},doAction:function(e,t){return Ext.isString(e)&&(e=Ext.ClassManager.instantiateByAlias("formaction."+e,Ext.apply({},t,{form:this}))),!1!==this.fireEvent("beforeaction",this,e)&&(this.beforeAction(e),this.actionTimer=Ext.defer(e.run,100,e)),this},submit:function(e){var t;return t=(e=e||{}).standardSubmit||this.standardSubmit?"standardsubmit":this.api?"directsubmit":"submit",this.doAction(t,e)},load:function(e){return this.doAction(this.api?"directload":"load",e)},updateRecord:function(e){if(!(e=e||this._record))return Ext.raise("A record is required."),this;for(var t,i=e.self.fields,n=this.getFieldValues(),r={},o=0,a=i.length;o<a;++o)t=i[o].name,n.hasOwnProperty(t)&&(r[t]=n[t]);return e.beginEdit(),e.set(r),e.endEdit(),this},loadRecord:function(e){return this._record=e,this.setValues(e.getData())},getRecord:function(){return this._record},beforeAction:function(e){var t,i,n,r=this,o=e.waitMsg,a=Ext.baseCSSPrefix+"mask-loading",s=r.getFields().items,l=s.length;for(t=0;t<l;t++)(i=s[t]).isFormField&&i.syncValue&&i.syncValue();o&&(!0===(n=r.waitMsgTarget)?r.owner.el.mask(o,a):n?(n=r.waitMsgTarget=Ext.get(n)).mask(o,a):(r.floatingAncestor=r.owner.up("[floating]"),r.floatingAncestor&&(r.savePreventFocusOnActivate=r.floatingAncestor.preventFocusOnActivate,r.floatingAncestor.preventFocusOnActivate=!0),Ext.MessageBox.wait(o,e.waitTitle||r.waitTitle)))},afterAction:function(e,t){var i,n=this,r=Ext.MessageBox;e.waitMsg&&(!0===(i=n.waitMsgTarget)?n.owner.el.unmask():i?i.unmask():r.hide()),n.floatingAncestor&&(n.floatingAncestor.preventFocusOnActivate=n.savePreventFocusOnActivate),t?(e.reset&&n.reset(),Ext.callback(e.success,e.scope||e,[n,e]),n.fireEvent("actioncomplete",n,e)):(Ext.callback(e.failure,e.scope||e,[n,e]),n.fireEvent("actionfailed",n,e))},findField:function(t){return this.getFields().findBy(function(e){return e.id===t||e.name===t||e.dataIndex===t})},markInvalid:function(e){var t,i,n,r,o=this;function a(e,t){var i=o.findField(e);i&&i.markInvalid(t)}if(Ext.isArray(e))for(i=e.length,t=0;t<i;t++)a((n=e[t]).id||n.field,n.msg||n.message);else if(e instanceof Ext.data.ErrorCollection)for(i=e.items.length,t=0;t<i;t++)a((n=e.items[t]).field,n.message);else for(r in e)e.hasOwnProperty(r)&&a(r,e[r]);return this},setValues:function(e){var t,i,n,r=this;function o(e,t){var i=r.findField(e);i&&(i.setValue(t),r.trackResetOnLoad&&i.resetOriginalValue())}if(Ext.suspendLayouts(),Ext.isArray(e))for(i=e.length,t=0;t<i;t++)o((n=e[t]).id,n.value);else Ext.iterate(e,o);return Ext.resumeLayouts(!0),this},getValues:function(e,t,i,n,r){var o,a,s,l,d,u,c={},h=this.getFields().items,f=h.length,g=Ext.isArray,p=n?"getModelData":"getSubmitData";for(u=0;u<f;u++)if(o=h[u],(!t||o.isDirty())&&(a=o[p](i,r),Ext.isObject(a)))for(d in a)a.hasOwnProperty(d)&&(s=a[d],i&&""===s&&(s=o.emptyText||""),o.isRadio?c[d]=c[d]||s:c.hasOwnProperty(d)?(g(l=c[d])||(l=c[d]=[l]),g(s)?c[d]=l.concat(s):l.push(s)):c[d]=s);return e&&(c=Ext.Object.toQueryString(c)),c},getFieldValues:function(e){return this.getValues(!1,e,!1,!0)},clearInvalid:function(){Ext.suspendLayouts();var e,t=this.getFields().items,i=t.length;for(e=0;e<i;e++)t[e].clearInvalid();return Ext.resumeLayouts(!0),this},reset:function(e){Ext.suspendLayouts();var t,i=this.getFields().items,n=i.length;for(t=0;t<n;t++)i[t].reset();return Ext.resumeLayouts(!0),!0===e&&delete this._record,this},applyToFields:function(e){var t,i=this.getFields().items,n=i.length;for(t=0;t<n;t++)Ext.apply(i[t],e);return this},applyIfToFields:function(e){var t,i=this.getFields().items,n=i.length;for(t=0;t<n;t++)Ext.applyIf(i[t],e);return this}}),Ext.define("Ext.layout.component.field.FieldContainer",{extend:"Ext.layout.component.Auto",alias:"layout.fieldcontainer",type:"fieldcontainer",waitForOuterHeightInDom:!0,waitForOuterWidthInDom:!0,beginLayout:function(e){var t=this.owner.containerEl;this.callParent([e]),e.hasRawContent=!0,t.setStyle("width",""),t.setStyle("height",""),e.containerElContext=e.getEl("containerEl")},calculateOwnerHeightFromContentHeight:function(e,t){return this.callParent([e,t])+this.getHeightAdjustment()},calculateOwnerWidthFromContentWidth:function(e,t){return this.callParent([e,t])+this.getWidthAdjustment()},measureContentHeight:function(e){return e.hasDomProp("containerLayoutDone")?this.callParent([e]):NaN},measureContentWidth:function(e){return e.hasDomProp("containerLayoutDone")?this.callParent([e]):NaN},publishInnerHeight:function(e,t){t-=this.getHeightAdjustment(),e.containerElContext.setHeight(t)},publishInnerWidth:function(e,t){t-=this.getWidthAdjustment(),e.containerElContext.setWidth(t)},privates:{getHeightAdjustment:function(){var e=this.owner,t=0;return"top"===e.labelAlign&&e.hasVisibleLabel()&&(t+=e.labelEl.getHeight()),"under"===e.msgTarget&&e.hasActiveError()&&(t+=e.errorWrapEl.getHeight()),t+e.bodyEl.getPadding("tb")},getWidthAdjustment:function(){var e=this.owner,t=0;return"top"!==e.labelAlign&&e.hasVisibleLabel()&&(t+=e.labelWidth+(e.labelPad||0)),"side"===e.msgTarget&&e.hasActiveError()&&(t+=e.errorWrapEl.getWidth()),t+e.bodyEl.getPadding("lr")}}}),Ext.define("Ext.form.FieldAncestor",{extend:"Ext.Mixin",requires:["Ext.container.Monitor"],mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{doDestroy:"onBeforeDestroy"}},initFieldAncestor:function(){this.monitor=new Ext.container.Monitor({scope:this,selector:"[isFormField]:not([excludeForm])",addHandler:this.onChildFieldAdd,removeHandler:this.onChildFieldRemove}),this.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(e){var t=e.fieldDefaults,i=this.fieldDefaults;i&&(e.fieldDefaults=t?Ext.apply(Ext.Object.chain(t),i):i)},onChildFieldAdd:function(e){this.mon(e,"errorchange",this.handleFieldErrorChange,this),this.mon(e,"validitychange",this.handleFieldValidityChange,this)},onChildFieldRemove:function(e){this.mun(e,"errorchange",this.handleFieldErrorChange,this),this.mun(e,"validitychange",this.handleFieldValidityChange,this)},initFieldDefaults:function(){this.fieldDefaults||(this.fieldDefaults={})},handleFieldValidityChange:function(e,t){e!==this&&(this.fireEvent("fieldvaliditychange",this,e,t),this.onFieldValidityChange(e,t))},handleFieldErrorChange:function(e,t){e!==this&&(this.fireEvent("fielderrorchange",this,e,t),this.onFieldErrorChange(e,t))},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor=Ext.destroy(this.monitor)}}),Ext.define("Ext.form.FieldContainer",{extend:"Ext.container.Container",alias:"widget.fieldcontainer",requires:["Ext.layout.component.field.FieldContainer"],mixins:{labelable:"Ext.form.Labelable",fieldAncestor:"Ext.form.FieldAncestor"},componentLayout:"fieldcontainer",componentCls:Ext.baseCSSPrefix+"form-fieldcontainer",shrinkWrap:!0,autoEl:{tag:"div",role:"presentation"},childEls:["containerEl"],combineLabels:!1,labelConnector:", ",combineErrors:!1,maskOnDisable:!1,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}"','<tpl if="ariaAttributes">','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",">","{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){this.initLabelable(),this.initFieldAncestor(),this.callParent(),this.initMonitor()},onAdd:function(e){e.isLabelable&&Ext.isGecko&&Ext.firefoxVersion<37&&"absolute"===this.layout.type&&!this.hideLabel&&"top"!==this.labelAlign&&(e.x+=this.labelWidth+this.labelPad),this.callParent(arguments),e.isLabelable&&this.combineLabels&&(e.oldHideLabel=e.hideLabel,e.hideLabel=!0),this.updateLabel()},onRemove:function(e,t){this.callParent(arguments),t||(e.isLabelable&&this.combineLabels&&(e.hideLabel=e.oldHideLabel),this.updateLabel())},initRenderData:function(){var e=this.callParent();return e.containerElCls=this.containerElCls,e=Ext.applyIf(e,this.getLabelableRenderData()),"top"!==this.labelAlign&&"under"!==this.msgTarget||(e.extraFieldBodyCls+=" "+Ext.baseCSSPrefix+"field-container-body-vertical"),e.tipAnchorTarget=this.id+"-containerEl",e},getFieldLabel:function(){var e=this.fieldLabel||"";return!e&&this.combineLabels&&(e=Ext.Array.map(this.query("[isFieldLabelable]"),function(e){return e.getFieldLabel()}).join(this.labelConnector)),e},getSubTplData:function(){var e=this.initRenderData();return Ext.apply(e,this.subTplData),e},getSubTplMarkup:function(e){var t=this.lookupTpl("fieldSubTpl");return t.renderContent||this.setupRenderTpl(t),t.apply(this.getSubTplData(e))},updateLabel:function(){this.labelEl&&this.setFieldLabel(this.getFieldLabel())},onFieldErrorChange:function(){if(this.combineErrors){var e=this.getActiveError(),t=Ext.Array.filter(this.query("[isFormField]"),function(e){return e.hasActiveError()}),i=this.getCombinedErrors(t);i?this.setActiveErrors(i):this.unsetActiveError(),e!==this.getActiveError()&&this.updateLayout()}},getCombinedErrors:function(e){var t,i,n,r,o,a,s,l=[],d=e.length;for(t=0;t<d;t++)for(o=(n=(i=e[t]).getActiveErrors()).length,r=0;r<o;r++)a=n[r],s=i.getFieldLabel(),l.push((s?s+": ":"")+a);return l},privates:{applyTargetCls:function(e){var t=this.containerElCls;this.containerElCls=t?t+" "+e:e},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){return this.hasOwnProperty("renderTpl")||(this.renderTpl=this.lookupTpl("labelableRenderTpl")),this.callParent()}}}),Ext.define("Ext.layout.container.CheckboxGroup",{extend:"Ext.layout.container.Container",alias:["layout.checkboxgroup"],autoFlex:!0,type:"checkboxgroup",createsInnerCt:!0,childEls:["innerCt"],renderTpl:'<table id="{ownerId}-innerCt" data-ref="innerCt" class="'+Ext.baseCSSPrefix+'table-plain" cellpadding="0"role="presentation" style="{tableStyle}"><tbody role="presentation"><tr role="presentation"><tpl for="columns"><td class="{parent.colCls}" valign="top" style="{style}" role="presentation">{% this.renderColumn(out,parent,xindex-1) %}</td></tpl></tr></tbody></table>',lastOwnerItemsGeneration:null,initLayout:function(){var e=this.owner;this.columnsArray=Ext.isArray(e.columns),this.autoColumns=!e.columns||"auto"===e.columns,this.autoColumns||(this.vertical=e.vertical||1===e.columns||1===e.columns.length),this.callParent()},beginLayout:function(e){var t,i,n,r,o,a=this.autoFlex,s=this.innerCt.dom.style,l=0,d=0;if(this.callParent(arguments),t=this.rowNodes[0].children,e.innerCtContext=e.getEl("innerCt",this),e.widthModel.shrinkWrap)s.tableLayout="auto",s.width="";else{if(i=t.length,this.columnsArray){for(n=0;n<i;n++)(r=this.owner.columns[n])<1&&(l+=r,d++);for(n=0;n<i;n++)o=(r=this.owner.columns[n])<1?r/l*100+"%":r+"px",t[n].style.width=o}else for(n=0;n<i;n++)o=a?1/i*100+"%":"",t[n].style.width=o,d++;d?d<i?(s.tableLayout="fixed",s.width="100%"):(s.tableLayout="auto",s.width=a?"100%":""):(s.tableLayout="fixed",s.width="")}},cacheElements:function(){this.callParent(),this.rowNodes=this.innerCt.query("tr",!0),this.tBodyNode=this.rowNodes[0].parentNode},calculate:function(e){var t,i,n,r,o,a;e.getDomProp("containerChildrenSizeDone")?(t=e.innerCtContext,i=e.widthModel.shrinkWrap,r=(n=e.heightModel.shrinkWrap)||i,o=t.el.dom,a=r&&t.getPaddingInfo(),i&&e.setContentWidth(o.offsetWidth+a.width,!0),n&&e.setContentHeight(o.offsetHeight+a.height,!0)):this.done=!1},doRenderColumn:function(e,t,i){var n,r,o,a,s,l=t.$layout,d=l.owner,u=t.columnCount,c=d.items.items,h=c.length;for(a=d.vertical?(r=i*(o=Math.ceil(h/u)),h=Math.min(h,r+o),1):(r=i,u);r<h;r+=a)n=c[r],l.configureItem(n),s=n.getRenderTree(),Ext.DomHelper.generateMarkup(s,e)},getColumnCount:function(){var e=this.owner,t=e.columns;return this.columnsArray?t.length:Ext.isNumber(t)?t:e.items.length},getItemSizePolicy:function(e){return this.autoSizePolicy},getRenderData:function(){var e,t,i,n,r=this.callParent(),o=this.owner,a=this.getColumnCount(),s=this.autoFlex,l=0,d=0;if(this.columnsArray)for(n=0;n<a;n++)(e=this.owner.columns[n])<1&&(l+=e,d++);for(r.colCls=o.groupCls,r.columnCount=a,r.columns=[],n=0;n<a;n++)t=r.columns[n]={},this.columnsArray?(i=(e=this.owner.columns[n])<1?e/l*100+"%":e+"px",t.style="width:"+i):(t.style="width:"+1/a*100+"%",d++);return r.tableStyle=d?d<a?"table-layout:fixed;width:100%":s?"table-layout:auto;width:100%":"table-layout:auto;":"table-layout:fixed;",r},isValidParent:Ext.returnTrue,setupRenderTpl:function(e){this.callParent(arguments),e.renderColumn=this.doRenderColumn},renderChildren:function(){var e=this.owner.items.generation;this.lastOwnerItemsGeneration!==e&&(this.lastOwnerItemsGeneration=e,this.renderItems(this.getLayoutItems()))},renderItems:function(e){var t,i,n,r,o,a,s=this,l=e.length;if(l){for(Ext.suspendLayouts(),i=s.autoColumns?(n=l,1):(n=s.columnsArray?s.owner.columns.length:s.owner.columns,Math.ceil(l/n)),a=0;a<l;a++)t=e[a],r=s.getRenderRowIndex(a,i,n),o=s.getRenderColumnIndex(a,i,n),t.rendered?s.isItemAtPosition(t,r,o)||s.moveItem(t,r,o):s.renderItem(t,r,o);s.pruneRows(i,n),Ext.resumeLayouts(!0)}},isItemAtPosition:function(e,t,i){return e.el.dom===this.getItemNodeAt(t,i)},getRenderColumnIndex:function(e,t,i){return this.vertical?Math.floor(e/t):e%i},getRenderRowIndex:function(e,t,i){return this.vertical?e%t:Math.floor(e/i)},getItemNodeAt:function(e,t){var i=this.getColumnNodeAt(e,t);return this.vertical?i.children[e]:i.children[0]},getRowNodeAt:function(e){var t;return e=this.vertical?0:e,(t=this.rowNodes[e])||((t=this.rowNodes[e]=document.createElement("tr")).role="presentation",this.tBodyNode.appendChild(t)),t},getColumnNodeAt:function(e,t,i){return(i=i||this.getRowNodeAt(e)).children[t]||Ext.fly(i).appendChild({tag:"td",cls:this.owner.groupCls,vAlign:"top",role:"presentation"},!0)},pruneRows:function(e,t){var i,n,r,o,a,s=this.tBodyNode.children;for(e=this.vertical?1:e;s.length>e;){for(n=s[s.length-1];n.children.length;)Ext.get(n.children[0]).destroy();n.parentNode.removeChild(n)}for(o=e-1;0<=o;o--){for(i=(n=s[o]).children;i.length>t;)r=i[i.length-1],Ext.get(r).destroy();if(0<o)for(a=i.length-1;0<=a&&0===(r=i[a]).children.length;a--)Ext.get(r).destroy()}},renderItem:function(e,t,i){var n,r;this.configureItem(e),r=this.vertical?t:0,n=Ext.get(this.getColumnNodeAt(t,i)),e.render(n,r)},moveItem:function(e,t,i){var n,r,o;r=this.vertical?t:0,o=(n=this.getColumnNodeAt(t,i)).children[r],n.insertBefore(e.el.dom,o||null)},destroy:function(){if(this.owner.rendered){var e,t,i,n=this.getRenderTarget();if(n)for(t=0,i=(e=n.query("."+this.owner.groupCls,!1)).length;t<i;t++)e[t].destroy()}this.callParent()}}),Ext.define("Ext.form.CheckboxManager",{extend:"Ext.util.MixedCollection",singleton:!0,getByName:function(t,i){return this.filterBy(function(e){return e.name===t&&e.getFormId()===i})}}),Ext.define("Ext.form.field.Checkbox",{extend:"Ext.form.field.Base",alias:["widget.checkboxfield","widget.checkbox"],alternateClassName:"Ext.form.Checkbox",requires:["Ext.XTemplate","Ext.form.CheckboxManager"],modelValue:!0,modelValueUnchecked:!1,stretchInputElFixed:!1,childEls:["boxLabelEl","innerWrapEl","displayEl"],fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" role="presentation"',' class="{wrapInnerCls}">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<span id="{cmpId}-displayEl" data-ref="displayEl" role="presentation" class="{fieldCls} {typeCls} ','{typeCls}-{ui} {inputCls} {inputCls}-{ui} {fixCls} {childElCls} {afterLabelCls}">','<input type="{inputType}" id="{id}" name="{inputName}" data-ref="inputEl" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="checked"> checked="checked"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{checkboxCls}" autocomplete="off" hidefocus="true" ','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',"/>","</span>",'<tpl if="!labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:!0,compiled:!0}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:!0,focusCls:"form-checkbox-focus",fieldBodyCls:Ext.baseCSSPrefix+"form-cb-wrap",checked:!1,checkedCls:Ext.baseCSSPrefix+"form-cb-checked",boxLabelCls:Ext.baseCSSPrefix+"form-cb-label",boxLabelAlign:"after",afterLabelCls:Ext.baseCSSPrefix+"form-cb-after",wrapInnerCls:Ext.baseCSSPrefix+"form-cb-wrap-inner",noBoxLabelCls:Ext.baseCSSPrefix+"form-cb-no-box-label",inputValue:"on",checkChangeEvents:[],changeEventName:"change",inputType:"checkbox",isTextInput:!1,ariaRole:"native",onRe:/^on$/i,inputCls:Ext.baseCSSPrefix+"form-cb",_checkboxCls:Ext.baseCSSPrefix+"form-cb-input",initComponent:function(){var e=this.value;void 0!==e&&(this.checked=this.isChecked(e,this.inputValue)),this.callParent(),this.getManager().add(this)},initDefaultName:Ext.emptyFn,initValue:function(){var e=!!this.checked;this.originalValue=this.initialValue=this.lastValue=e,this.setValue(e)},getElConfig:function(){return this.isChecked(this.rawValue,this.inputValue)&&this.addCls(this.checkedCls),this.fieldLabel||(this.skipLabelForAttribute=!0),this.callParent()},getModelData:function(){var e=this.callParent(arguments);return e&&(e[this.getName()]=this.checked?this.modelValue:this.modelValueUnchecked),e},getSubTplData:function(e){var t,i,n=this,r=n.boxLabel,o=n.boxLabelAlign,a="before"===o;return(i=(t=Ext.apply(n.callParent([e]),{inputType:n.inputType,checkboxCls:n._checkboxCls,disabled:n.readOnly||n.disabled,checked:!!n.checked,wrapInnerCls:n.wrapInnerCls,boxLabel:r,boxLabelCls:n.boxLabelCls,boxLabelAlign:o,labelAlignedBefore:a,afterLabelCls:a?n.afterLabelCls:"",noBoxLabelCls:r?"":n.noBoxLabelCls,inputName:n.name||n.id})).inputElAriaAttributes)&&delete i["aria-readonly"],t},initEvents:function(){var e=this;e.callParent(),e.inputEl.on(e.changeEventName,e.onChangeEvent,e,{delegated:!1}),Ext.isIE?e.bodyEl.on("mousedown",e.onBodyElMousedown,e):Ext.isMac&&(Ext.isGecko||Ext.isSafari)&&(e.boxLabelEl.on("mousedown",e.onBoxLabelOrInputMousedown,e),e.inputEl.on("mousedown",e.onBoxLabelOrInputMousedown,e))},setBoxLabel:function(e){this.boxLabel=e,this.rendered&&(this.boxLabelEl.setHtml(e),this.boxLabelEl[e?"removeCls":"addCls"](this.noBoxLabelCls),this.updateLayout())},onBodyElMousedown:function(e){e.target!==this.inputEl.dom&&e.preventDefault()},onBoxLabelOrInputMousedown:function(e){this.inputEl.focus(),e.preventDefault()},onChangeEvent:function(e){this.updateValueFromDom()},updateValueFromDom:function(){var e=this.inputEl&&this.inputEl.dom;e&&(this.checked=this.rawValue=this.value=e.checked,this.checkChange())},updateCheckedCls:function(e){e=null!=e?e:this.getValue(),this[e?"addCls":"removeCls"](this.checkedCls)},getRawValue:function(){var e=this.inputEl&&this.inputEl.dom;return e?e.checked:this.checked},getValue:function(){var e=this.inputEl&&this.inputEl.dom;return e?e.checked:this.checked},getSubmitValue:function(){var e=this.uncheckedValue,t=Ext.isDefined(e)?e:null;return this.getValue()?this.inputValue:t},isChecked:function(e,t){return!0===e||"true"===e||("on"===t||!t&&0!==t||!Ext.isString(e)&&!Ext.isNumber(e)?"1"===e||1===e||this.onRe.test(e):e==t)},setRawValue:function(e){var t=this,i=t.inputEl&&t.inputEl.dom,n=t.isChecked(e,t.inputValue);return i&&(t.duringSetRawValue=!0,i.checked=n,t.duringSetRawValue=!1,t.updateCheckedCls(n)),t.checked=t.rawValue=n,t.duringSetValue||(t.lastValue=n),n},setValue:function(e){var t,i,n,r;if(Ext.isArray(e))for(n=(t=this.getManager().getByName(this.name,this.getFormId()).items).length,i=0;i<n;++i)(r=t[i]).setValue(Ext.Array.contains(e,r.inputValue));else this.duringSetValue=!0,this.callParent(arguments),delete this.duringSetValue;return this},valueToRaw:Ext.identityFn,onChange:function(e,t){var i=this.handler;this.updateCheckedCls(e),i&&Ext.callback(i,this.scope,[this,e],0,this),this.callParent(arguments),this.reference&&this.publishState&&this.publishState("checked",e)},resetOriginalValue:function(e){var t,i,n;if(!e)for(i=(t=this.getManager().getByName(this.name,this.getFormId()).items).length,n=0;n<i;++n)t[n]!==this&&t[n].resetOriginalValue(!0);this.callParent()},doDestroy:function(){this.getManager().removeAtKey(this.id),this.callParent()},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var e=this.inputEl&&this.inputEl.dom;this.callParent(),e&&(e.disabled=this.readOnly)},setReadOnly:function(e){var t=this.inputEl&&this.inputEl.dom;t&&(t.disabled=!!e||this.disabled),this.callParent(arguments)},getFormId:function(){var e;return this.formId||(e=this.up("form"))&&(this.formId=e.id),this.formId},getFocusClsEl:function(){return this.displayEl}}),Ext.define("Ext.form.CheckboxGroup",{extend:"Ext.form.FieldContainer",xtype:"checkboxgroup",isCheckboxGroup:!0,mixins:{field:"Ext.form.field.Field"},requires:["Ext.layout.container.CheckboxGroup","Ext.form.field.Checkbox","Ext.form.field.Base"],columns:"auto",vertical:!1,allowBlank:!0,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",defaultBindProperty:"value",groupCls:Ext.baseCSSPrefix+"form-check-group",extraFieldBodyCls:Ext.baseCSSPrefix+"form-checkboxgroup-body",layout:"checkboxgroup",componentCls:Ext.baseCSSPrefix+"form-checkboxgroup",ariaRole:"group",ariaEl:"containerEl",skipLabelForAttribute:!0,ariaRenderAttributes:{"aria-invalid":!1},initComponent:function(){this.name=this.name||this.id,this.callParent(),this.initField()},initRenderData:function(){var e,t;return(e=this.callParent()).inputId=this.id+"-"+this.ariaEl,(t=e.ariaAttributes)&&(t["aria-labelledby"]||(t["aria-labelledby"]=this.id+"-labelTextEl")),e},initValue:function(){var e=this.value;this.originalValue=this.lastValue=e||this.getValue(),e&&this.setValue(e)},onAdd:function(e){var t,i,n;if(e.isCheckbox)null==e.name&&(e.name=this.name),this.mon(e,"change",this.checkChange,this);else if(e.isContainer)for(n=0,i=(t=e.items.items).length;n<i;n++)this.onAdd(t[n]);this.callParent(arguments)},onRemove:function(e){var t,i,n;if(e.isCheckbox)this.mun(e,"change",this.checkChange,this);else if(e.isContainer)for(n=0,i=(t=e.items.items).length;n<i;n++)this.onRemove(t[n]);this.callParent(arguments)},isEqual:function(e,t){var i=Ext.Object.toQueryString;return i(e)===i(t)},getErrors:function(){var e=[];return!this.allowBlank&&Ext.isEmpty(this.getChecked())&&e.push(this.blankText),e},getBoxes:function(e){return this.query("[isCheckbox]"+(e||""))},eachBox:function(e,t){Ext.Array.forEach(this.getBoxes(),e,t||this)},getChecked:function(){return this.getBoxes("[checked]")},isDirty:function(){var e,t=this.getBoxes(),i=t.length;for(e=0;e<i;e++)if(t[e].isDirty())return!0},setReadOnly:function(e){var t,i=this.getBoxes(),n=i.length;for(t=0;t<n;t++)i[t].setReadOnly(e);this.readOnly=e},reset:function(){var n=this,e=n.hasActiveError(),t=n.preventMark;n.preventMark=!0,n.batchChanges(function(){var e,t=n.getBoxes(),i=t.length;for(e=0;e<i;e++)t[e].reset()}),n.preventMark=t,n.unsetActiveError(),e&&n.updateLayout()},resetOriginalValue:function(){var e,t=this.getBoxes(),i=t.length;for(e=0;e<i;e++)t[e].resetOriginalValue();this.originalValue=this.getValue(),this.checkDirty()},setValue:function(e){var t,i,n,r,o=this.getBoxes(),a=o.length;return this.batchChanges(function(){for(Ext.suspendLayouts(),t=0;t<a;t++)i=o[t],n=i.getName(),r=!1,e&&(r=Ext.isArray(e[n])?Ext.Array.contains(e[n],i.inputValue):e[n]),i.setValue(r);Ext.resumeLayouts(!0)}),this},getValue:function(){var e,t,i,n,r,o={},a=this.getBoxes(),s=a.length;for(e=0;e<s;e++)i=(t=a[e]).getName(),n=t.inputValue,t.getValue()&&(o.hasOwnProperty(i)?(r=o[i],Ext.isArray(r)||(r=o[i]=[r]),r.push(n)):o[i]=n);return o},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var e,t,i;return this.disabled?t=!0:(e=this.getErrors(),t=Ext.isEmpty(e),i=this.wasValid,t?this.unsetActiveError():this.setActiveError(e)),t!==i&&(this.wasValid=t,this.fireEvent("validitychange",this,t),null==i&&t||this.updateLayout()),t}},function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid","setError"])}),Ext.define("Ext.form.FieldSet",{extend:"Ext.container.Container",alias:"widget.fieldset",mixins:{fieldAncestor:"Ext.form.FieldAncestor"},uses:["Ext.form.field.Checkbox","Ext.panel.Tool","Ext.layout.container.Anchor","Ext.layout.component.FieldSet"],checkboxUI:"default",collapsed:!1,toggleOnTitleClick:!0,baseCls:Ext.baseCSSPrefix+"fieldset",layout:"anchor",descriptionText:"{0} field set",expandText:"Expand field set",componentLayout:"fieldset",ariaRole:"group",focusable:!1,autoEl:"fieldset",checkbox:null,childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body {baseCls}-body-{ui} {bodyTargetCls}" ','role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>"],stateEvents:["collapse","expand"],maskOnDisable:!1,initComponent:function(){var e=this,t=e.baseCls;e.ariaRole&&!e.ariaLabel&&(e.ariaLabel=Ext.String.formatEncode(e.descriptionText,e.title||"")),e.ariaRenderAttributes=e.ariaRenderAttributes||{},e.ariaRenderAttributes["aria-expanded"]=!e.collapsed,e.initFieldAncestor(),e.callParent(),e.layout.managePadding=e.layout.manageOverflow=!1,e.collapsed&&(e.addCls(t+"-collapsed"),e.collapse()),(e.title||e.checkboxToggle||e.collapsible)&&(e.addTitleClasses(),e.legend=e.createLegendCt()),e.initMonitor()},initRenderData:function(){var e=this.callParent();return e.bodyTargetCls=this.bodyTargetCls,this.protoBody.writeTo(e),delete this.protoBody,e},doDestroy:function(){var e=this.legend;e&&(delete e.ownerCt,e.destroy(),this.legend=null),this.callParent()},getState:function(){var e=this.callParent();return e=this.addPropertyToState(e,"collapsed")},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return!0},collapsedVertical:function(){return!0},createLegendCt:function(){var e=this,t=[],i={baseCls:e.baseCls+"-header",layout:"container",ui:e.ui,id:e.id+"-legend",autoEl:"legend",ariaRole:null,items:t,ownerCt:e,shrinkWrap:!0,ownerLayout:e.componentLayout};return e.checkboxToggle?t.push(e.createCheckboxCmp()):e.collapsible&&t.push(e.createToggleCmp()),t.push(e.createTitleCmp()),new Ext.container.Container(i)},createTitleCmp:function(){var e=this,t={html:e.title,ui:e.ui,cls:e.baseCls+"-header-text",id:e.id+"-legendTitle",ariaRole:"presentation"};return e.collapsible&&e.toggleOnTitleClick&&(t.listeners={click:{element:"el",scope:e,fn:e.toggle}},t.cls+=" "+e.baseCls+"-header-text-collapsible"),e.titleCmp=new Ext.Component(t),e.titleCmp},createCheckboxCmp:function(){var e,t=this,i=t.baseCls+"-header-checkbox";return i+=" "+i+"-"+t.ui,t.checkboxCmp=e=new Ext.form.field.Checkbox(Ext.apply({hideEmptyLabel:!0,name:t.checkboxName||t.id+"-checkbox",cls:i,id:t.id+"-legendChk",ui:t.checkboxUI,checked:!t.collapsed,msgTarget:"none",listeners:{change:t.onCheckChange,scope:t},ariaLabel:t.expandText},t.checkbox)),e},createToggleCmp:function(){var e;return this.toggleCmp=e=new Ext.panel.Tool({cacheHeight:!1,cls:this.baseCls+"-header-tool-"+this.ui,type:"toggle",handler:this.toggle,id:this.id+"-legendToggle",scope:this,ariaRole:"checkbox",ariaLabel:this.expandText,ariaRenderAttributes:{"aria-checked":!this.collapsed}}),e},doRenderLegend:function(e,t){var i,n=t.$comp,r=n.legend;r&&(r.ownerLayout.configureItem(r),n.setLegendCollapseImmunity(r),i=r.getRenderTree(),Ext.DomHelper.generateMarkup(i,e))},getCollapsed:function(){return!!this.collapsed&&"top"},getCollapsedDockedItems:function(){var e=this.legend;return e?[e]:[]},setTitle:function(e){var t=this,i=t.legend;return t.title=e,t.ariaLabel=Ext.String.formatEncode(t.descriptionText,e||""),t.rendered?(i||(t.legend=i=t.createLegendCt(),t.addTitleClasses(),i.ownerLayout.configureItem(i),t.setLegendCollapseImmunity(i),i.render(t.el,0)),t.titleCmp.update(e),t.ariaEl.dom.setAttribute("aria-label",t.ariaLabel)):i?t.titleCmp.update(e):(t.addTitleClasses(),t.legend=t.createLegendCt()),t},addTitleClasses:function(){var e=this.title,t=this.baseCls;e&&this.addCls(t+"-with-title"),(e||this.checkboxToggle||this.collapsible)&&this.addCls(t+"-with-legend")},expand:function(){return this.setExpanded(!0)},collapse:function(){return this.setExpanded(!1)},setCollapsed:function(e){this.setExpanded(!e)},setExpanded:function(e){var t=this,i=t.checkboxCmp,n=t.toggleCmp,r=e?"expand":"collapse";return t.rendered&&!1===t.fireEvent("before"+r,t)||(e=!!e,i?i.setValue(e):n&&n.ariaEl.dom&&n.ariaEl.dom.setAttribute("aria-checked",e),e?t.removeCls(t.baseCls+"-collapsed"):t.addCls(t.baseCls+"-collapsed"),t.ariaEl.dom&&t.ariaEl.dom.setAttribute("aria-expanded",!!e),t.collapsed=!e,e?delete t.getInherited().collapsed:t.getInherited().collapsed=!0,t.rendered&&(t.updateLayout({isRoot:!1}),t.fireEvent(r,t))),t},getRefItems:function(e){var t=this.callParent(arguments),i=this.legend;return i&&(t.unshift(i),e&&t.unshift.apply(t,i.getRefItems(!0))),t},toggle:function(){this.setExpanded(!!this.collapsed)},privates:{applyTargetCls:function(e){this.bodyTargetCls=e},finishRender:function(){var e=this.legend;this.callParent(),e&&e.finishRender()},getProtoBody:function(){var e=this.protoBody;return e||(this.protoBody=e=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:!0})),e},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},initPadding:function(e){var t,i=this.getProtoBody(),n=this.padding;void 0!==n&&(Ext.isIE8&&(n=this.parseBox(n),(t=Ext.Element.parseBox(0)).top=n.top,n.top=0,i.setStyle("padding",this.unitizeBox(t))),e.setStyle("padding",this.unitizeBox(n)))},onCheckChange:function(e,t){this.setExpanded(t)},setLegendCollapseImmunity:function(e){e.collapseImmune=!0,e.getInherited().collapseImmune=!0},setupRenderTpl:function(e){this.callParent(arguments),e.renderLegend=this.doRenderLegend}}}),Ext.define("Ext.form.Label",{extend:"Ext.Component",alias:"widget.label",requires:["Ext.util.Format"],autoEl:"label",maskOnDisable:!1,getElConfig:function(){return this.html=this.text?Ext.util.Format.htmlEncode(this.text):this.html||"",Ext.apply(this.callParent(),{htmlFor:this.forId||""})},setText:function(e,t){return(t=!1!==t)?(this.text=e,delete this.html):(this.html=e,delete this.text),this.rendered&&(this.el.dom.innerHTML=!1!==t?Ext.util.Format.htmlEncode(e):e,this.updateLayout()),this}}),Ext.define("Ext.form.Panel",{extend:"Ext.panel.Panel",alias:"widget.form",alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],requires:["Ext.form.Basic","Ext.util.TaskRunner"],mixins:{fieldAncestor:"Ext.form.FieldAncestor"},layout:"anchor",bodyAriaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){this.frame&&(this.border=!1),this.initFieldAncestor(),this.callParent(),this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]),this.pollForChanges&&this.startPolling(this.pollInterval||500)},initItems:function(){this.callParent(),this.initMonitor(),this.form=this.createForm()},afterFirstLayout:function(){this.callParent(arguments),this.form.initialize()},createForm:function(){for(var e,t={},i=this.basicFormConfigs,n=i.length,r=0;r<n;++r)t[e=i[r]]=this[e];return new Ext.form.Basic(this,t)},getForm:function(){return this.form},loadRecord:function(e){return this.getForm().loadRecord(e)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(e){return this.getForm().updateRecord(e)},getValues:function(e,t,i,n){return this.getForm().getValues(e,t,i,n)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(e){return this.form.reset(e)},hasInvalidField:function(){return this.form.hasInvalidField()},doDestroy:function(){this.stopPolling(),this.form.destroy(),this.callParent()},load:function(e){this.form.load(e)},submit:function(e){this.form.submit(e)},startPolling:function(e){this.stopPolling(),this.pollTask=Ext.util.TaskManager.start({interval:e,run:this.checkChange,scope:this})},stopPolling:function(){var e=this.pollTask;e&&(Ext.util.TaskManager.stop(e,!0),this.pollTask=null)},checkChange:function(){var e,t=this.form.getFields().items,i=t.length;for(e=0;e<i;e++)t[e].checkChange()}}),Ext.define("Ext.form.RadioManager",{extend:"Ext.util.MixedCollection",singleton:!0,getByName:function(t,i){return this.filterBy(function(e){return e.name===t&&e.getFormId()===i})},getWithValue:function(t,i,n){return this.filterBy(function(e){return e.name===t&&e.inputValue==i&&e.getFormId()===n})},getChecked:function(t,i){return this.findBy(function(e){return e.name===t&&e.checked&&e.getFormId()===i})}}),Ext.define("Ext.form.field.Radio",{extend:"Ext.form.field.Checkbox",alias:["widget.radiofield","widget.radio"],alternateClassName:"Ext.form.Radio",requires:["Ext.form.RadioManager"],isRadio:!0,inputType:"radio",formId:null,modelValue:void 0,modelValueUnchecked:null,initComponent:function(){void 0===this.modelValue&&(this.modelValue=this.inputValue),this.callParent()},getGroupValue:function(){var e=this.getManager().getChecked(this.name,this.getFormId());return e?e.inputValue:null},onRemoved:function(){this.callParent(arguments),this.formId=null},setValue:function(e){var t;return Ext.isBoolean(e)?this.callParent(arguments):(t=this.getManager().getWithValue(this.name,e,this.getFormId()).getAt(0))&&t.setValue(!0),this},getSubmitValue:function(){return this.checked?this.inputValue:null},onChange:function(e,t){var i,n,r,o,a=this.ownerCt;if(this.callParent(arguments),!this.$groupChange){if(e)for(n=(o=this.getManager().getByName(this.name,this.getFormId()).items).length,i=0;i<n;i++)(r=o[i])!==this&&r.updateValueFromDom();a&&a.isRadioGroup&&a.simpleValue&&a.checkChange()}},getManager:function(){return Ext.form.RadioManager}}),Ext.define("Ext.form.RadioGroup",{extend:"Ext.form.CheckboxGroup",xtype:"radiogroup",isRadioGroup:!0,requires:["Ext.form.field.Radio"],allowBlank:!0,blankText:"You must select one item in this group",defaultType:"radiofield",local:!1,simpleValue:!1,defaultBindProperty:"value",groupCls:Ext.baseCSSPrefix+"form-radio-group",ariaRole:"radiogroup",initRenderData:function(){var e,t;return(t=(e=this.callParent()).ariaAttributes)&&(t["aria-required"]=!this.allowBlank,t["aria-invalid"]=!1),e},lookupComponent:function(e){var t=this.callParent([e]);return this.local&&(t.formId=this.getId()),t},getBoxes:function(e,t){return(t||this).query("[isRadio]"+(e||""))},checkChange:function(){var e,t;t="object"==typeof(e=this.getValue())&&Ext.Object.getKeys(e)[0],(this.simpleValue||t&&!Ext.isArray(e[t])||Ext.isObject(e)&&Ext.Object.isEmpty(e))&&this.callParent()},isEqual:function(e,t){return this.simpleValue?e===t:this.callParent([e,t])},getValue:function(){var e,t,i,n=this.items.items;if(this.simpleValue){for(e=n.length;0<e--;)if((t=n[e]).checked){i=t.inputValue;break}}else i=this.callParent();return i},setValue:function(e){var t,i,n,r,o,a,s,l=this.items;if(Ext.suspendLayouts(),this.simpleValue)for(o=0,a=l.length;o<a;++o)(i=l.items[o]).$groupChange=!0,i.setValue(i.inputValue===e),delete i.$groupChange;else if(Ext.isObject(e))for(s in n=(i=l.first())?i.getFormId():null,e)for(t=e[s],a=(r=Ext.form.RadioManager.getWithValue(s,t,n).items).length,o=0;o<a;++o)r[o].setValue(!0);return Ext.resumeLayouts(!0),this},markInvalid:function(e){var t=this.ariaEl.dom;this.callParent([e]),t&&t.setAttribute("aria-invalid",!0)},clearInvalid:function(){var e=this.ariaEl.dom;this.callParent(),e&&e.setAttribute("aria-invalid",!1)}},function(){Ext.isGecko&&this.override({onFocusEnter:function(e){var t,i,n,r=e.toComponent;if(r.isRadio)for(i=0,n=(t=r.getManager().getByName(r.name,r.getFormId()).items).length;i<n;i++)t[i].disableTabbing()},onFocusLeave:function(e){var t,i,n,r=e.fromComponent;if(r.isRadio)for(i=0,n=(t=r.getManager().getByName(r.name,r.getFormId()).items).length;i<n;i++)t[i].enableTabbing()}})}),Ext.define("Ext.form.action.DirectAction",{extend:"Ext.Mixin",mixinConfig:{id:"directaction"},resolveMethod:function(e){var t,i,n=this.form;return(t=Ext.direct.Manager.resolveApi(n.api,this))||Ext.raise("Cannot resolve Ext Direct API method for "+e+" action; form "+n.id+" has no api object defined"),(i=t[e])||Ext.raise("Cannot resolve Ext Direct API method for "+e+" action"),i}}),Ext.define("Ext.form.action.DirectLoad",{extend:"Ext.form.action.Load",alternateClassName:"Ext.form.Action.DirectLoad",alias:"formaction.directload",requires:["Ext.direct.Manager"],mixins:["Ext.form.action.DirectAction"],type:"directload",run:function(){var e,t,i=this.form,n=this.metadata||i.metadata,r=this.timeout||i.timeout;e=(t=this.resolveMethod("load")).directCfg.method.getArgs({params:this.getParams(),paramOrder:i.paramOrder,paramsAsHash:i.paramsAsHash,options:null!=r?{timeout:1e3*r}:null,metadata:n,callback:this.onComplete,scope:this}),t.apply(window,e)},processResponse:function(e){return this.result=e},onComplete:function(e){e?this.onSuccess(e):this.onFailure(null)}}),Ext.define("Ext.form.action.DirectSubmit",{extend:"Ext.form.action.Submit",alternateClassName:"Ext.form.Action.DirectSubmit",alias:"formaction.directsubmit",requires:["Ext.direct.Manager"],mixins:["Ext.form.action.DirectAction"],type:"directsubmit",doSubmit:function(){var e,t,i,n=this.form,r=this.metadata||n.metadata,o=this.timeout||n.timeout;e=this.resolveMethod("submit"),t=this.buildForm(),i=e.directCfg.method.getArgs({params:t.formEl,options:null!=o?{timeout:1e3*o}:null,metadata:r,callback:this.onComplete,scope:this}),e.apply(window,i),this.cleanup(t)},processResponse:function(e){return this.result=e},onComplete:function(e){e?this.onSuccess(e):this.onFailure(null)}}),Ext.define("Ext.form.field.Picker",{extend:"Ext.form.field.Text",alias:"widget.pickerfield",alternateClassName:"Ext.form.Picker",requires:["Ext.util.KeyNav"],config:{triggers:{picker:{handler:"onTriggerClick",scope:"this",focusOnMousedown:!0}}},renderConfig:{editable:!0},keyMap:{scope:"this",DOWN:"onDownArrow",ESC:"onEsc"},keyMapTarget:"inputEl",isPickerField:!0,matchFieldWidth:!0,pickerAlign:"tl-bl?",openCls:Ext.baseCSSPrefix+"pickerfield-open",isExpanded:!1,applyTriggers:function(e){var t=e.picker;return t.cls||(t.cls=this.triggerCls),this.callParent([e])},getSubTplData:function(e){var t,i;return t=this.callParent([e]),this.ariaStaticRoles[this.ariaRole]||(i=t.ariaElAttributes)&&(i["aria-haspopup"]=!0,i["aria-expanded"]=!1),t},initEvents:function(){this.callParent(),Ext.isGecko&&this.inputEl.dom.setAttribute("autocomplete","off")},updateEditable:function(e,t){e?this.inputEl.un("click",this.onInputElClick,this):this.inputEl.on("click",this.onInputElClick,this),this.callParent([e,t])},onEsc:function(e){Ext.isIE&&e.preventDefault(),this.isExpanded&&(this.collapse(),e.stopEvent())},onDownArrow:function(e){150<e.time-this.lastDownArrow&&delete this.lastDownArrow,this.isExpanded?!e.stopped&&e.time-this.lastDownArrow<150&&delete this.lastDownArrow:(e.stopEvent(),this.onTriggerClick(this,this.getPickerTrigger(),e),this.lastDownArrow=e.time)},expand:function(){var e,t,i,n=this;!n.rendered||n.isExpanded||n.destroyed||(e=n.bodyEl,t=n.getPicker(),i=Ext.getDoc(),t.setMaxHeight(t.initialConfig.maxHeight),n.matchFieldWidth&&t.setWidth(n.bodyEl.getWidth()),t.show(),n.isExpanded=!0,n.alignPicker(),e.addCls(n.openCls),n.ariaStaticRoles[n.ariaRole]||(n.ariaEl.dom.hasAttribute("aria-owns")||n.ariaEl.dom.setAttribute("aria-owns",t.listEl?t.listEl.id:t.el.id),n.ariaEl.dom.setAttribute("aria-expanded",!0)),n.touchListeners=i.on({translate:!1,touchstart:n.collapseIf,scope:n,delegated:!1,destroyable:!0}),n.scrollListeners=Ext.on({scroll:n.onGlobalScroll,scope:n,destroyable:!0}),Ext.on("resize",n.alignPicker,n,{buffer:1}),n.fireEvent("expand",n),n.onExpand())},onExpand:Ext.emptyFn,alignPicker:function(){var e;this.rendered&&!this.destroyed&&(e=this.getPicker()).isVisible()&&e.isFloating()&&this.doAlign()},doAlign:function(){var e,t,i=this.picker;i.el.alignTo(this.triggerWrap,this.pickerAlign,this.pickerOffset),e=i.floatParent?i.getOffsetsTo(i.floatParent.getTargetEl()):i.getXY(),i.x=e[0],i.y=e[1],t=i.el.getY()<this.inputEl.getY(),this.bodyEl[t?"addCls":"removeCls"](this.openCls+"-above"),i[t?"addCls":"removeCls"](i.baseCls+"-above")},collapse:function(){var e,t=this,i=t.openCls;!t.isExpanded||t.destroyed||t.destroying||((e=t.picker).hide(),t.isExpanded=!1,t.bodyEl.removeCls([i,i+"-above"]),e.el.removeCls(e.baseCls+"-above"),t.ariaStaticRoles[t.ariaRole]||t.ariaEl.dom.setAttribute("aria-expanded",!1),t.touchListeners.destroy(),t.scrollListeners.destroy(),Ext.un("resize",t.alignPicker,t),t.fireEvent("collapse",t),t.onCollapse())},onCollapse:Ext.emptyFn,collapseIf:function(e){this.destroyed||e.within(this.bodyEl,!1,!0)||this.owns(e.target)||Ext.fly(e.target).isFocusable()||this.collapse()},getPicker:function(){var e=this.picker;return e||(this.creatingPicker=!0,this.picker=e=this.createPicker(),delete(e.ownerCmp=this).creatingPicker),this.picker},onFocusLeave:function(e){this.collapse(),this.callParent([e])},getRefItems:function(){var e=[];return this.picker&&(e[0]=this.picker),e},getPickerTrigger:function(){return this.triggers&&this.triggers.picker},createPicker:Ext.emptyFn,onInputElClick:function(e){this.onTriggerClick(this,this.getPickerTrigger(),e)},onTriggerClick:function(e,t,i){this.readOnly||this.disabled||(this.isExpanded?this.collapse():this.expand())},doDestroy:function(){var e=this.picker;Ext.un("resize",this.alignPicker,this),Ext.destroy(this.keyNav,e),e&&(this.picker=e.pickerField=null),this.callParent()},privates:{onGlobalScroll:function(e){var t=e.getElement();!this.picker.owns(t)&&t.isAncestor(this.el)&&this.collapse()}}}),Ext.define("Ext.selection.Model",{extend:"Ext.mixin.Observable",alternateClassName:"Ext.AbstractSelectionModel",alias:"selection.abstract",requires:["Ext.util.Bag"],mixins:["Ext.util.StoreHolder","Ext.mixin.Factoryable"],factoryConfig:{defaultType:"dataviewmodel"},$configPrefixed:!1,$configStrict:!1,config:{store:null,selected:{}},isSelectionModel:!0,allowDeselect:void 0,toggleOnClick:!0,ordered:!1,selected:null,pruneRemoved:!0,suspendChange:0,ignoreRightMouseSelection:!1,constructor:function(e){this.modes={SINGLE:!0,SIMPLE:!0,MULTI:!0},this.callParent([e]),this.setSelectionMode(this.mode),"SINGLE"!==this.selectionMode&&(this.allowDeselect=!0)},updateStore:function(e,t){this.bindStore(e,!t)},applySelected:function(e){return e.isBag||e.isCollection||(e=new Ext.util[this.ordered?"Collection":"Bag"](Ext.apply({rootProperty:"data"},e))),e},getStoreListeners:function(){return{add:this.onStoreAdd,clear:this.onStoreClear,remove:this.onStoreRemove,update:this.onStoreUpdate,idchanged:this.onIdChanged,load:this.onStoreLoad,refresh:this.onStoreRefresh,pageadd:this.onPageAdd,pageremove:this.onPageRemove}},onBindStore:function(e,t,i){i||this.updateSelectedInstances(this.selected)},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){this.suspendChange&&--this.suspendChange},selectAll:function(e){var t=this.store.getRange(),i=this.getSelection().length;this.suspendChanges(),this.doSelect(t,!0,e),this.destroyed||(this.resumeChanges(),e||this.maybeFireSelectionChange(this.getSelection().length!==i))},deselectAll:function(e){var t,i,n,r=this.getSelection(),o={},a=this.store,s=r.length;for(t=0,i=r.length;t<i;t++)n=r[t],o[n.id]=a.indexOf(n);r=Ext.Array.sort(r,function(e,t){return o[e.id]<o[t.id]?-1:1}),this.suspendChanges(),this.doDeselect(r,e),this.destroyed||(this.resumeChanges(),e||this.maybeFireSelectionChange(this.getSelection().length!==s))},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(e){this.selectionStart=e},selectWithEvent:function(e,t){var i=this.isSelected(e),n=t.shiftKey;switch(this.selectionMode){case"MULTI":this.selectWithEventMulti(e,t,i);break;case"SIMPLE":this.selectWithEventSimple(e,t,i);break;case"SINGLE":this.selectWithEventSingle(e,t,i)}this.destroyed||n||(this.isSelected(e)?this.selectionStart=e:this.selectionStart=null)},vetoSelection:function(e){return!!e.stopSelection||("keydown"===e.type||0===e.button?"mousedown"===e.type:!(!this.ignoreRightMouseSelection&&!this.isSelected(e.record))||void 0)},onNavigate:function(e){if(e.record&&!this.vetoSelection(e.keyEvent)){this.onBeforeNavigate(e);var t,i=this,n=e.keyEvent,r=n.ctrlKey||e.ctrlKey,o=e.recordIndex,a=e.record,s=e.previousRecord,l=i.isSelected(a),d=i.selectionStart&&i.isSelected(e.previousRecord)?i.selectionStart:i.selectionStart=e.previousRecord,u=e.previousRecordIndex,c=n.getCharCode(),h=c===n.SPACE,f=e.record!==e.previousRecord;switch(t=c===n.UP||c===n.PAGE_UP||c===n.HOME||c===n.LEFT&&f?"up":c===n.DOWN||c===n.PAGE_DOWN||c===n.END||c===n.RIGHT&&f?"down":null,i.selectionMode){case"MULTI":i.setSelectionStart(e.selectionStart),c===n.A&&r?(i.selected.beginUpdate(),i.selectRange(0,i.store.getCount()-1),i.selected.endUpdate()):h?n.shiftKey?i.selectRange(d,a,r):l?i.allowDeselect&&i.doDeselect(a):i.doSelect(a,r):n.shiftKey&&d?("up"===t&&u<=o?i.deselectRange(s,o+1):"down"===t&&o<=u?i.deselectRange(s,o-1):d!==a&&i.selectRange(d,a,r),i.lastSelected=a):c?r||i.doSelect(a,!1):i.selectWithEvent(a,n);break;case"SIMPLE":c===n.A&&r?(i.selected.beginUpdate(),i.selectRange(0,i.store.getCount()-1),i.selected.endUpdate()):l?i.doDeselect(a):i.doSelect(a,!0);break;case"SINGLE":r||(t?i.doSelect(a,!1):!h&&c||i.selectWithEvent(a,n))}n.shiftKey||i.destroyed||!i.isSelected(a)||(i.selectionStart=a,i.selectionStartIdx=o)}},selectRange:function(e,t,i){var n,r,o,a,s,l,d,u=this,c=u.store,h=u.selected.items;if(!u.isLocked()){for(e=(n=u.normalizeRowRange(e,t))[0],t=n[1],a=[],r=e;r<=t;r++)u.isSelected(c.getAt(r))||a.push(c.getAt(r));if(!i){for(s=[],u.suspendChanges(),r=0,o=h.length;r<o;++r)d=h[r],((l=c.indexOf(d))<e||t<l)&&s.push(d);for(r=0,o=s.length;r<o&&(u.doDeselect(s[r]),!u.destroyed);++r);u.destroyed||u.resumeChanges()}u.destroyed||(a.length?u.doMultiSelect(a,!0):s&&u.maybeFireSelectionChange(0<s.length))}},deselectRange:function(e,t){var i,n,r,o,a=this.store;if(!this.isLocked()){for(e=(i=this.normalizeRowRange(e,t))[0],t=i[1],r=[],n=e;n<=t;n++)o=a.getAt(n),this.isSelected(o)&&r.push(o);r.length&&this.doDeselect(r)}},normalizeRowRange:function(e,t){var i,n=this.store;return Ext.isNumber(e)||(e=n.indexOf(e)),e=Math.max(0,e),Ext.isNumber(t)||(t=n.indexOf(t)),(t=Math.min(t,n.getCount()-1))<e&&(i=t,t=e,e=i),[e,t]},select:function(e,t,i){!Ext.isDefined(e)||Ext.isArray(e)&&!e.length||this.doSelect(e,t,i)},deselect:function(e,t){this.doDeselect(e,t)},doSelect:function(e,t,i){var n;if(!this.locked&&null!=e){if("number"==typeof e){if(!(n=this.store.getAt(e)))return;e=[n]}"SINGLE"===this.selectionMode?(e.isModel&&(e=[e]),e.length&&this.doSingleSelect(e[0],i)):this.doMultiSelect(e,t,i)}},doMultiSelect:function(e,t,i){var n,r,o,a,s,l=this,d=l.selected,u=!1;if(!l.locked){if(o=(e=Ext.isArray(e)?e:[e]).length,!t&&0<d.getCount()){if(n=l.deselectDuringSelect(e,i),l.destroyed)return;if(n[0])return void l.maybeFireSelectionChange(0<n[1]&&!i);u=0<n[1]}for(s=function(){d.getCount()||(l.selectionStart=a),i||d.add(a),u=!0},r=0;r<o;r++)if(a=e[r],!l.isSelected(a)&&(l.onSelectChange(a,!0,i,s),l.destroyed))return;l.lastSelected=a,i&&d.add(e),l.maybeFireSelectionChange(u&&!i)}},deselectDuringSelect:function(e,t){var i,n,r=this.selected.getRange(),o=r.length,a=0,s=!1;for(this.suspendChanges(),this.deselectingDuringSelect=!0,n=0;n<o;++n)if(i=r[n],Ext.Array.contains(e,i)||(this.doDeselect(i,t)?++a:s=!0),this.destroyed){s=!0,a=0;break}return this.deselectingDuringSelect=!1,this.destroyed||this.resumeChanges(),[s,a]},doDeselect:function(e,t){var i,n,r,o=this,a=o.selected,s=0,l=0,d=0;if(o.locked||!o.store)return!1;if("number"==typeof e){if(!(n=o.store.getAt(e)))return!1;e=[n]}else Ext.isArray(e)||(e=[e]);for(r=function(){++d,t||a.remove(n),n===o.selectionStart&&(o.selectionStart=null)},i=e.length,o.suspendChanges();s<i;s++)if(n=e[s],o.isSelected(n)&&(o.lastSelected===n&&(o.lastSelected=a.last()),++l,o.onSelectChange(n,!1,t,r),o.destroyed))return!1;return o.resumeChanges(),t&&a.remove(e),o.maybeFireSelectionChange(0<d&&!t),d===l},doSingleSelect:function(t,i){var e,n=this,r=!1,o=n.selected;n.locked||n.isSelected(t)||(e=function(){var e;if(o.getCount()){if(n.suspendChanges(),e=n.deselectDuringSelect([t],i),n.destroyed)return;if(n.resumeChanges(),e[0])return!1}n.lastSelected=t,o.getCount()||(n.selectionStart=t),o.add(t),r=!0},n.onSelectChange(t,!0,i,e),r&&!n.destroyed&&n.maybeFireSelectionChange(!i))},maybeFireSelectionChange:function(e){e&&!this.suspendChange&&this.fireEvent("selectionchange",this,this.getSelection())},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(e){e=e?e.toUpperCase():"SINGLE",this.selectionMode=this.modes[e]?e:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(e){this.locked=!!e},isRangeSelected:function(e,t){var i,n,r=this.store;for(e=(n=this.normalizeRowRange(e,t))[0],t=n[1],i=e;i<=t;i++)if(!this.isSelected(r.getAt(i)))return!1;return!0},isSelected:function(e){return e=Ext.isNumber(e)?this.store.getAt(e):e,!!this.selected&&this.selected.contains(e)},hasSelection:function(){var e=this.getSelected();return!(!e||!e.getCount())},refresh:function(){var e,t,i,n,r,o,a=this,s=a.store,l=[],d=a.getSelection(),u=d.length,c=a.getSelected();if(s&&(c.isCollection||c.isBag||c.isRows)&&c.getCount()){for((i=s.getData()).getSource&&(t=i.getSource())&&(i=t),a.refreshing=!0,c.beginUpdate(),a.suspendChanges(),o=0;o<u;o++)n=d[o],(r=i.get(n.getId()))?(r!==n&&(c.replace?c.replace(r):c.add(r)),a.lastSelected||(a.lastSelected=r)):a.pruneRemoved&&l.push(n);l.length&&(e=!0,c.remove(l)),a.resumeChanges(),e?c.endUpdate():c.updating--,a.refreshing=!1,a.maybeFireSelectionChange(e)}},clearSelections:function(){var e=this.getSelected();e&&e.clear(),this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){this.store.isLoading()&&!this.store.clearing||!this.hasSelection()||(this.clearSelections(),this.maybeFireSelectionChange(!0))},onStoreRemove:function(e,t,i,n){var r,o,a,s,l=t;if(this.selectionStart&&Ext.Array.contains(t,this.selectionStart)&&(this.selectionStart=null),!n&&!this.locked&&this.pruneRemoved){if(s=e.isMoving(null,!0))for(l=null,r=0,o=t.length;r<o;++r)s[(a=t[r]).id]||(l=l||[]).push(a);l&&this.deselect(l)}},onPageRemove:function(e,t,i){this.onStoreRemove(this.store,i)},onPageAdd:function(e,t,i){var n,r,o=i.length;for(n=0;n<o;n++)r=i[n],this.selected.get(r.id)&&this.selected.replace(r)},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){this.clearSelections(),this.bindStore(null),this.selected=Ext.destroy(this.selected),this.callParent()},onStoreUpdate:Ext.emptyFn,onIdChanged:function(e,t,i,n){this.selected.updateKey(t,i)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(e){var t,i,n,r,o,a,s=this,l=s.getStore(),d=s.lastSelected,u=0,c=s.pruneRemovedOnRefresh();if(!l||!l.isBufferedStore){if(i=(t=e.getRange()).length,d&&(s.lastSelected=l.getById(d.id),a=s.lastSelected!==d),s.refreshing=!0,l)for(n=0;n<i;++n)r=t[n],(o=l.getById(r.id))?o!==r&&e.add(o):c&&(e.remove(r),++u);else u=e.getCount(),e.removeAll();s.refreshing=!1,s.maybeFireSelectionChange(0<u),a&&s.fireEvent("lastselectedchanged",s,s.getSelection(),d)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(e,t,i,n){var r=t?"select":"deselect";!1!==(i||this.fireEvent("before"+r,this,e))&&!1!==n()&&(i||this.destroyed||this.fireEvent(r,this,e))},onEditorKey:Ext.emptyFn,beforeViewRender:function(e){Ext.Array.include(this.views||(this.views=[]),e)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(e){var t,i=this.view;return i&&(t=i.resolveSatelliteListenerScope(this,e)),t||this.callParent([e])},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,getLastSelected:function(){return this.lastSelected},selectWithEventMulti:function(e,t,i){var n,r,o,a=t.shiftKey,s=t.ctrlKey,l=a?this.getSelectionStart():null,d=this.getSelection(),u=d.length;if(a&&l)this.selectRange(l,e,s);else if(s&&i)this.allowDeselect&&this.doDeselect(e,!1);else if(s)this.doSelect(e,!0,!1);else if(i&&!a&&!s&&1<u){if(this.allowDeselect){for(n=[],r=0;r<u;++r)(o=d[r])!==e&&n.push(o);this.doDeselect(n)}}else i||this.doSelect(e,!1)},selectWithEventSimple:function(e,t,i){i?this.doDeselect(e):this.doSelect(e,!0)},selectWithEventSingle:function(e,t,i){var n=this.allowDeselect;n&&!t.ctrlKey&&(n=this.toggleOnClick),n&&i?this.doDeselect(e):this.doSelect(e,!1)}}}),Ext.define("Ext.selection.DataViewModel",{extend:"Ext.selection.Model",alias:"selection.dataviewmodel",requires:["Ext.util.KeyNav"],deselectOnContainerClick:!0,bindComponent:function(e){var t,i=this;i.view!==e&&(i.view&&(i.navigationModel=null,Ext.destroy(i.viewListeners,i.navigationListeners)),(i.view=e)&&((t=i.getViewListeners()).scope=i,t.destroyable=!0,i.navigationModel=e.getNavigationModel(),i.viewListeners=e.on(t),i.navigationListeners=i.navigationModel.on({navigate:i.onNavigate,scope:i,destroyable:!0})))},getViewListeners:function(){var e={};return e[this.view.triggerCtEvent]=this.onContainerClick,e},onUpdate:function(e){var t=this.view;t&&this.isSelected(e)&&t.onItemSelect(e)},onContainerClick:function(){this.deselectOnContainerClick&&this.deselectAll()},onSelectChange:function(e,t,i,n){var r=this.view,o=t?"select":"deselect",a=this.store.indexOf(e);!1!==(i||this.fireEvent("before"+o,this,e,a))&&!1!==n()&&(r&&!r.destroyed&&(t?r.onItemSelect(e):r.onItemDeselect(e)),i||this.destroyed||this.fireEvent(o,this,e,a))},destroy:function(){this.bindComponent(),Ext.destroy(this.keyNav),this.callParent()}}),Ext.define("Ext.view.NavigationModel",{alias:"view.navigation.default",mixins:["Ext.util.Observable","Ext.mixin.Factoryable","Ext.util.StoreHolder"],config:{store:null},focusCls:Ext.baseCSSPrefix+"view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(e){this.view!==e&&(this.view=e,this.bindView(e))},bindView:function(e){var t,i=e.dataSource;this.initKeyNav(e),i.isEmptyStore||this.setStore(i),(t=this.getViewListeners()).destroyable=!0,this.viewListeners=this.viewListeners||[],this.viewListeners.push(e.on(t))},updateStore:function(e){this.mixins.storeholder.bindStore.apply(this,[e])},getViewListeners:function(){return{containermousedown:this.onContainerMouseDown,itemmousedown:this.onItemMouseDown,itemclick:this.onItemClick,itemcontextmenu:this.onItemMouseDown,scope:this}},initKeyNav:function(e){var t=this;t.keyNav=new Ext.util.KeyNav({target:e,ignoreInputFields:!0,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:t.processViewEvent,up:t.onKeyUp,down:t.onKeyDown,right:t.onKeyRight,left:t.onKeyLeft,pageDown:t.onKeyPageDown,pageUp:t.onKeyPageUp,home:t.onKeyHome,end:t.onKeyEnd,space:t.onKeySpace,enter:t.onKeyEnter,A:{ctrl:!0,handler:t.onSelectAllKeyPress},scope:t})},processViewEvent:function(e,t,i,n,r){return r},addKeyBindings:function(e){this.keyNav.addBindings(e)},enable:function(){this.keyNav.enable(),this.disabled=!1},disable:function(){this.keyNav.disable(),this.disabled=!0},onContainerMouseDown:function(e,t){Ext.scrollbar.width()&&(e.el.getClientRegion().contains(t.getPoint())||(t.preventDefault(),e.lastFocused="scrollbar"))},onItemMouseDown:function(e,t,i,n,r){"touch"!==r.pointerType&&this.setPosition(n)},onItemClick:function(e,t,i,n,r){this.record===t?this.fireNavigateEvent(r):this.setPosition(n,r)},setPosition:function(e,t,i,n,r){var o,a,s=this,l=s.view,d=l.getSelectionModel(),u=l.dataSource;if(null!=e&&l.all.getCount()?"number"==typeof e?(a=Math.max(Math.min(e,u.getCount()-1),0),o=u.getAt(e)):e.isEntity?(o=u.getById(e.id),-1===(a=u.indexOf(o))&&(o=u.getAt(0),a=0)):e.tagName?(o=l.getRecord(e),a=u.indexOf(o)):o=a=null:s.record=s.recordIndex=null,o===s.record)return s.recordIndex=a,s.focusPosition(a);s.item&&s.item.removeCls(s.focusCls),s.previousRecordIndex=s.recordIndex,s.previousRecord=s.record,s.previousItem=s.item,s.recordIndex=a,s.record=o,n=n||s.record===s.lastFocused,o?s.focusPosition(s.recordIndex):r||(s.item=null),i||d.fireEvent("focuschange",d,s.previousRecord,s.record),!n&&t&&s.fireNavigateEvent(t)},focusPosition:function(e){var t=this;null!=e&&-1!==e?(e.isEntity&&(e=t.view.dataSource.indexOf(e)),t.item=t.view.all.item(e),t.item?(t.lastFocused=t.record,t.lastFocusedIndex=t.recordIndex,t.focusItem(t.item)):t.record=null):t.item=null},focusItem:function(e){e.addCls(this.focusCls),e.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){return-1===this.view.dataSource.indexOf(this.lastFocused)?null:this.lastFocused},onKeyUp:function(e){var t=this.recordIndex-1;t<0&&(t=this.view.all.getCount()-1),this.setPosition(t,e)},onKeyDown:function(e){var t=this.recordIndex+1;t>this.view.all.getCount()-1&&(t=0),this.setPosition(t,e)},onKeyRight:function(e){var t=this.recordIndex+1;t>this.view.all.getCount()-1&&(t=0),this.setPosition(t,e)},onKeyLeft:function(e){var t=this.recordIndex-1;t<0&&(t=this.view.all.getCount()-1),this.setPosition(t,e)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(e){this.setPosition(0,e)},onKeyEnd:function(e){this.setPosition(this.view.all.getCount()-1,e)},onKeySpace:function(e){this.fireNavigateEvent(e)},onKeyEnter:function(e){e.stopEvent(),e.view.fireEvent("itemclick",e.view,e.record,e.item,e.recordIndex,e)},onSelectAllKeyPress:function(e){this.fireNavigateEvent(e)},fireNavigateEvent:function(e){this.fireEvent("navigate",{navigationModel:this,keyEvent:e,previousRecordIndex:this.previousRecordIndex,previousRecord:this.previousRecord,previousItem:this.previousItem,recordIndex:this.recordIndex,record:this.record,item:this.item})},destroy:function(){this.setStore(null),Ext.destroy(this.viewListeners,this.keyNav),this.callParent()}}),Ext.define("Ext.view.AbstractView",{extend:"Ext.Component",requires:["Ext.LoadMask","Ext.CompositeElementLite","Ext.selection.DataViewModel","Ext.view.NavigationModel","Ext.util.CSS"],mixins:["Ext.util.StoreHolder"],isDataView:!0,inheritableStatics:{getRecord:function(e){return this.getBoundView(e).getRecord(e)},getBoundView:function(e){return Ext.getCmp(e.getAttribute("data-boundView"))}},defaultBindProperty:"store",renderBuffer:new Ext.dom.Fly(document.createElement("div")),statics:{updateDelay:Ext.platformTags.desktop?200:1e3,queueRecordChange:function(e,t,i,n,r){var o,a,s,l,d,u,c,h=this,f=h.changeQueue||(h.changeQueue={}),g=i.internalId;if(a=(o=f[g]||(f[g]={operation:n,record:i,data:{},views:[]})).data,Ext.Array.include(o.views,e),r&&(s=r.length)){for(l=0;l<s;l++)d=r[l],u=i.data[d],a.hasOwnProperty(d)?i.isEqual(a[d],u)&&(delete a[d],c=!0):a[d]=u;c&&!Ext.Object.getKeys(a).length&&delete f[g]}else Ext.apply(a,i.data);h.flushQueueTask||(h.flushQueueTask=new Ext.util.DelayedTask(Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(h.flushChangeQueue,h):h.flushChangeQueue.bind(h),h,null,!1)),h.flushTimer||(h.flushTimer=h.flushQueueTask.delay(Ext.view.AbstractView.updateDelay))},flushChangeQueue:function(){var e,t,i,n,r,o,a;if(Ext.isScrolling)return this.flushTimer=this.flushQueueTask.delay(1);for(r in this.flushTimer=null,i=this.changeQueue,this.changeQueue={},i)for(t=(e=(n=i[r]).views).length,o=0;o<t;o++)(a=e[o]).destroyed||a.handleUpdate(a.dataSource,n.record,n.operation,Ext.Object.getKeys(n.data))}},config:{store:"ext-empty-store",navigationModel:{type:"default"},selectionModel:{type:"dataviewmodel"}},publishes:["selection"],twoWayBindable:["selection"],selection:null,throttledUpdate:!1,deferInitialRefresh:!1,itemCls:Ext.baseCSSPrefix+"dataview-item",loadingText:"Loading...",loadMask:!0,loadingUseMsg:!0,selectedItemCls:Ext.baseCSSPrefix+"item-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,preserveScrollOnRefresh:!1,preserveScrollOnReload:!1,autoDestroyBoundStore:!0,ariaRole:"listbox",itemAriaRole:"option",last:!1,focusable:!0,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:!0,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(e){e&&e.selModel&&(e.selectionModel=e.selModel),this.callParent([e])},initComponent:function(){var e,t=this,i=Ext.isDefined,n=t.itemTpl,r={},o=t.selection;o&&(t.selection=null,t.setSelection(o)),n&&(Ext.isArray(n)?("string"!=typeof n[n.length-1]&&(r=(n=n.slice(0)).pop()),n=n.join("")):Ext.isObject(n)&&(r=Ext.apply(r,n.initialConfig),n=n.html),t.itemSelector||(t.itemSelector="."+t.itemCls),r.fn&&(r.baseFn=r.fn,delete r.fn,n="{%this.baseFn(out, values, parent, xindex, xcount, xkey)%}"),n=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',t.itemCls,n,t.itemAriaRole),t.tpl=new Ext.XTemplate(n,r)),i(t.tpl)&&i(t.itemSelector)||Ext.raise({sourceClass:"Ext.view.View",tpl:t.tpl,itemSelector:t.itemSelector,msg:"DataView requires both tpl and itemSelector configurations to be defined."}),t.callParent(),t.tpl=t.lookupTpl("tpl"),(i(t.overCls)||i(t.overClass))&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.view.View: Using the deprecated overCls or overClass configuration. Use overItemCls instead."),t.overItemCls=t.overCls||t.overClass,delete t.overCls,delete t.overClass),(i(t.selectedCls)||i(t.selectedClass))&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.view.View: Using the deprecated selectedCls or selectedClass configuration. Use selectedItemCls instead."),t.selectedItemCls=t.selectedCls||t.selectedClass,delete t.selectedCls,delete t.selectedClass),t.overItemCls&&(t.trackOver=!0),t.addCmpEvents(),e=t.store=Ext.data.StoreManager.lookup(t.store||"ext-empty-store"),t.dataSource||(t.dataSource=e),t.bindStore(e,!0),t.getNavigationModel().bindComponent(this),t.all||(t.all=new Ext.CompositeElementLite),t.scrollState={top:0,left:0},t.savedTabIndexAttribute="data-savedtabindex-"+t.id},getElConfig:function(){var e=this.mixins.renderable.getElConfig.call(this);return this.focusable&&(e.tabIndex=0),e},onRender:function(e,t){var i=this.loadMask;this.callParent([e,t]),i&&this.createMask(i)},beforeLayout:function(){this.callParent(),this.refreshNeeded&&!this.pendingRefresh&&(this.refreshCounter?this.refreshView():this.doFirstRefresh(this.dataSource))},onMaskBeforeShow:function(){var e=this.loadingHeight;e&&e>this.getHeight()&&(this.hasLoadingHeight=!0,this.oldMinHeight=this.minHeight,this.minHeight=e,this.updateLayout())},onMaskHide:function(){!this.destroying&&this.hasLoadingHeight&&(this.minHeight=this.oldMinHeight,this.updateLayout(),delete this.hasLoadingHeight)},beforeRender:function(){this.callParent(),this.getSelectionModel().beforeViewRender(this)},afterRender:function(){this.callParent(),this.focusable&&(this.focusEl=this.el)},getRefItems:function(){var e=this.loadMask,t=[];return e&&e.isComponent&&t.push(e),t},getSelection:function(){return this.getSelectionModel().getSelection()},setSelection:function(e){var t=this.selection;e!==t&&(this.selection=e,this.updateSelection(e,t))},updateSelection:function(e){var t;this.ignoreNextSelection||(this.ignoreNextSelection=!0,t=this.getSelectionModel(),e?t.select(e):t.deselectAll(),this.ignoreNextSelection=!1),this.publishState("selection",e)},updateBindSelection:function(e,t){var i=null;this.ignoreNextSelection||(this.ignoreNextSelection=!0,t.length&&(i=e.getLastSelected(),this.hasHadSelection=!0),this.hasHadSelection&&this.setSelection(i),this.ignoreNextSelection=!1)},applySelectionModel:function(e,t){var i,n,r=this,o=r.grid;return t?(t.destroyed||t.un({scope:r,selectionchange:r.updateBindSelection,lastselectedchanged:r.updateBindSelection}),Ext.destroy(r.selModelRelayer),e=Ext.Factory.selection(e)):e&&e.isSelectionModel?e.locked=r.disableSelection:(i=r.simpleSelect?"SIMPLE":r.multiSelect?"MULTI":"SINGLE","string"==typeof e&&(e={type:e}),e=Ext.Factory.selection(Ext.apply({allowDeselect:r.allowDeselect||r.multiSelect,mode:i,locked:r.disableSelection},e))),"SINGLE"!==e.mode&&((n=(o||r).ariaEl.dom)?n.setAttribute("aria-multiselectable",!0):o||((r.ariaRenderAttributes||(r.ariaRenderAttributes={}))["aria-multiselectable"]=!0)),r.selModelRelayer=r.relayEvents(e,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]),e.on({scope:r,lastselectedchanged:r.updateBindSelection,selectionchange:r.updateBindSelection}),e},updateSelectionModel:function(e){this.selModel=e},applyNavigationModel:function(e){return Ext.Factory.viewNavigation(e)},onFocusEnter:function(e){var t=this,i=t.getNavigationModel(),n=t.lastFocused;t.lastFocused=null,"scrollbar"!==n?(t.toggleChildrenTabbability(!1),!t.itemFocused&&t.all.getCount()&&(n=e.event.getTarget()===t.tabGuardEl?t.all.getCount()-1:i.getLastFocused(),i.setPosition(n||0,e.event,null,!n),t.itemFocused=null!=i.getPosition()),t.itemFocused&&(t.el.dom.setAttribute("tabIndex",-1),t.tabGuardEl&&t.tabGuardEl.setAttribute("tabIndex",-1)),t.callParent([e])):e.relatedTarget.focus()},onFocusLeave:function(e){this.itemFocused&&!this.refreshing&&(this.getNavigationModel().setPosition(null,e.event,null,!0),this.itemFocused=!1,this.el.dom.setAttribute("tabIndex",0),this.tabGuardEl&&this.tabGuardEl.setAttribute("tabIndex",0)),this.callParent([e])},cancelFocusTask:function(){var e=this.getFocusTask();e&&e.cancel()},onRemoved:function(e){this.callParent([e]),e||this.onFocusLeave({})},refresh:function(){var e,t,i,n,r=this,o=r.all,a=o.getCount(),s=r.refreshCounter,l=r.getSelectionModel(),d=s&&o.getCount()&&r.preserveScrollOnRefresh&&r.getScrollable(),u=r.bufferedRenderer;r.rendered&&!r.destroyed&&(r.hasListeners.beforerefresh&&!1===r.fireEvent("beforerefresh",r)||(r.refreshing=!0,i=r.saveFocusState(),e=r.getTargetEl(),t=r.getViewRange(),d&&((n=d.getPosition()).x||n.y||(n=null)),(s||r.emptyEl)&&r.clearViewEl(),s?r.refreshCounter++:r.refreshCounter=1,r.tpl.append(e,r.collectData(t,o.startIndex||0)),t.length<1?(r.addEmptyText(),o.clear()):(r.collectNodes(e.dom),r.updateIndexes(0)),i(),!1!==r.refreshSelmodelOnRefresh&&l.refresh(),r.refreshNeeded=!1,r.refreshSize(o.getCount()!==a),r.fireItemMutationEvent("refresh",r,t),d&&d.scrollTo(n),r.viewReady||(r.viewReady=!0,r.fireEvent("viewready",r)),r.refreshing=!1,u&&u.refreshSize(),r.cleanupData()),r.tabGuardEl||(r.tabGuardEl=r.el.createChild({cls:Ext.baseCSSPrefix+"tab-guard "+Ext.baseCSSPrefix+"tab-guard-after",tabIndex:"0"},null,!0)))},addEmptyText:function(){var e=this,t=e.getStore();e.emptyText&&!t.isLoading()&&(!e.deferEmptyText||1<e.refreshCounter||t.isLoaded())&&(e.emptyEl?Ext.fly(e.emptyEl).setHtml(e.emptyText):e.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",e.getTargetEl().dom,e.emptyText))},getEmptyText:function(){return this.emptyText},setEmptyText:function(e){return this.emptyText!==e&&(this.emptyText=e,this.refresh()),this},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(e){var t=this.getSizeModel();(t.height.shrinkWrap||t.width.shrinkWrap||e)&&this.updateLayout()},afterFirstLayout:function(e,t){var i=this.getScrollable();i&&(this.viewScrollListeners=i.on({scroll:this.onViewScroll,scrollend:this.onViewScrollEnd,scope:this,onFrame:!!Ext.global.requestAnimationFrame,destroyable:!0})),this.callParent([e,t])},clearViewEl:function(){var e,t,i,n=this.getTargetEl(),r=this.all,o=this.getStore(),a=this.getNodeContainer()===n;for(t=r.slice(),i=[],e=r.startIndex;e<=r.endIndex;e++)i.push(o.getByInternalId(r.item(e,!0).getAttribute("data-recordId")));this.fireItemMutationEvent("itemremove",i,r.startIndex||0,t,this),this.clearEmptyEl(),this.all.clear(!a),(n=a?n.dom:this.getNodeContainer())&&(n.innerHTML="")},clearEmptyEl:function(){var e=this.emptyEl;e&&Ext.removeNode(e),this.emptyEl=null},onViewScroll:function(e,t,i){this.destroyed||this.fireEvent("scroll",this,t,i)},onViewScrollEnd:function(e,t,i){this.destroyed||this.fireEvent("scrollend",this,t,i)},saveScrollState:function(){var e=this.scrollState;this.rendered&&(e.left=this.getScrollX(),e.top=this.getScrollY())},restoreScrollState:function(){var e=this.scrollState;this.rendered&&(this.setScrollX(e.left),this.setScrollY(e.top))},prepareData:function(e,t,i){var n,r,o;if(i)for(r in n=i.getAssociatedData())n.hasOwnProperty(r)&&(o||(e=Ext.Object.chain(e),o=!0),e[r]=n[r]);return e},collectData:function(e,t){for(var i,n=[],r=0,o=e.length;r<o;r++)i=e[r],n[r]=this.prepareData(i.data,t+r,i);return n},cleanupData:Ext.emptyFn,bufferRender:function(e,t){var i,n,r,o=this.renderBuffer,a=document.createDocumentFragment();for(this.tpl.overwrite(o,this.collectData(e,t)),r=0,n=(i=o.query(this.getItemSelector())).length;r<n;r++)a.appendChild(i[r]);return{fragment:a,children:i}},nodeContainerSelector:null,setItemsDraggable:function(e){var t="#"+this.id+" "+this.getItemSelector(),i=this.viewStyleSheet;e?(i=i||(Ext.view.AbstractView.prototype.viewStyleSheet=Ext.util.CSS.createStyleSheet("","AbstractView")),Ext.util.CSS.createRule(i,t,"touch-action: pinch-zoom double-tap-zoom;-ms-touch-action: pinch-zoom double-tap-zoom;-webkit-user-drag: none;")):i&&Ext.util.CSS.deleteRule(t)},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(e,t,i,n,r){r&&r.filtered||!this.getNode(t)||(this.throttledUpdate?this.statics().queueRecordChange(this,e,t,i,n):this.handleUpdate(e,t,i,n,r))},handleUpdate:function(e,t){var i,n,r=this,o=r.getSelectionModel();if(r.viewReady&&!r.refreshNeeded&&-1<(i=r.dataSource.indexOf(t))&&r.getNode(t))return n=r.bufferRender([t],i).children[0],r.all.replaceElement(i,n,!0),r.updateIndexes(i,i),o.onUpdate(t),r.refreshSizePending=!0,o.isSelected(t)&&r.onItemSelect(t),r.hasListeners.itemupdate&&r.fireEvent("itemupdate",t,i,n,r),n},onReplace:function(e,t,i,n){var r,o,a,s,l,d,u=this,c=u.all,h=u.getScrollable(),f=h&&h.getPosition().y,g=u.getSelectionModel(),p=t;u.rendered&&(o=(r=u.bufferRender(n,t,!0)).fragment,a=r.children,c.item(t)?c.item(t).insertSibling(o,"before",!0):u.appendNodes(o),c.insert(t,a),i.length&&(d=u.saveFocusState()),l=(t+=n.length)+i.length-1,s=c.removeRange(t,l,!0),h&&h.scrollTo(null,f),!1!==u.refreshSelmodelOnRefresh&&g.refresh(),u.updateIndexes(t),u.fireItemMutationEvent("itemremove",i,p,s,u),u.fireItemMutationEvent("itemadd",n,p,a,u),d(),u.refreshSize())},onAdd:function(e,t,i){var n,r=this,o=r.getSelectionModel();r.rendered&&!r.refreshNeeded&&(0===r.all.getCount()?(r.refresh(),n=r.all.slice()):(n=r.doAdd(t,i),!1!==r.refreshSelmodelOnRefresh&&o.refresh(),r.updateIndexes(i),r.refreshSizePending=!0),r.fireItemMutationEvent("itemadd",t,i,n,r))},appendNodes:function(e){var t=this.all,i=t.getCount();this.nodeContainerSelector?this.getNodeContainer().appendChild(e):t.item(i-1).insertSibling(e,"after")},doAdd:function(e,t){var i=this.bufferRender(e,t,!0),n=i.fragment,r=i.children,o=this.all,a=o.getCount(),s=o.startIndex||0,l=o.endIndex||a-1;return 0===a||l<t?this.appendNodes(n):t<=s?o.item(s).insertSibling(n,"before",!0):o.item(t).insertSibling(r,"before",!0),o.insert(t,r),r},onRemove:function(e,t,i){var n,r,o,a,s,l,d=this,u=d.all;if(d.rendered&&!d.refreshNeeded&&u.getCount()){if(0===d.dataSource.getCount())d.refresh();else{for(l=d.saveFocusState(),a=[],r=t.length-1;0<=r;--r)o=t[r],n=i+r,a&&(s=u.item(n),a[r]=s?s.dom:void 0),u.item(n)&&d.doRemove(o,n);d.fireItemMutationEvent("itemremove",t,i,a,d),l(),d.updateIndexes(i)}d.refreshSizePending=!0}},doRemove:function(e,t){this.all.removeElement(t,!0)},eventLifecycleMap:{refresh:"onViewRefresh",itemremove:"onItemRemove",itemadd:"onItemAdd"},fireItemMutationEvent:function(e){var t,i=this.ownerGrid;Ext.suspendLayouts(),i&&("refresh"!==e&&(t=this.lookupViewModel()),i[this.eventLifecycleMap[e]].apply(i,Ext.Array.slice(arguments,1))),this.fireEvent.apply(this,arguments),t&&t.notify(),Ext.resumeLayouts(!0)},saveFocusState:function(){var e=this,t=e.dataSource||e.store,i=e.getNavigationModel(),n=i.recordIndex,r=i.record,o=e.el.contains(Ext.Element.getActiveElement());return r?(o&&e.el.dom.focus(),function(){t.getCount()&&(n=Math.min(n,e.all.getCount()-1),i.setPosition(t.contains(r)?r:n,null,null,!0,!o))}):Ext.emptyFn},refreshNode:function(e){Ext.isNumber(e)&&(e=this.store.getAt(e)),this.onUpdate(this.dataSource,e)},updateIndexes:function(e,t){var i,n,r,o=this.all.elements,a=this.getViewRange(),s=this.getSelectionModel(),l=this.id;for(e=e||0,t=t||(0===t?0:o.length-1),r=e;r<=t;r++)i=o[r],n=a[r],i.setAttribute("data-recordIndex",r),i.setAttribute("data-recordId",n.internalId),i.setAttribute("data-boundView",l),s.getLastSelected()&&this[s.isSelected(n)?"onItemSelect":"onItemDeselect"](n)},bindStore:function(e,t){var i=this.getSelectionModel(),n=this.getNavigationModel();i&&!i.destroyed&&(i.bindStore(e,t),i.bindComponent(e?this:null)),this.mixins.storeholder.bindStore.apply(this,arguments),n&&!n.destroyed&&n.setStore(e),e&&this.componentLayoutCounter&&(this.blockRefresh?this.refreshNeeded=!0:this.doFirstRefresh(e,!t))},doFirstRefresh:function(e,t){this.deferInitialRefresh&&!t?Ext.defer(this.doFirstRefresh,1,this,[e,!0]):e&&!this.deferRefreshForLoad(e)&&this.refresh()},onUnbindStore:function(e){this.setMaskBind(null),this.dataSource===e&&(this.dataSource=null)},onBindStore:function(e,t){this.store.isBufferedStore&&(this.store.preserveScrollOnReload=this.preserveScrollOnReload),t&&t.isBufferedStore&&delete t.preserveScrollOnReload,this.setMaskBind(e),this.dataSource||(this.dataSource=e)},setMaskBind:function(e){var t=this.loadMask;this.rendered&&t&&e&&!t.bindStore&&(t=this.createMask()),t&&t.bindStore&&t.bindStore(e)},getStoreListeners:function(){return{refresh:this.onDataRefresh,replace:this.onReplace,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.onDataRefresh,beginupdate:this.onBeginUpdate,endupdate:this.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter,Ext.suspendLayouts()},onEndUpdate:function(){this.updateSuspendCounter&&--this.updateSuspendCounter,Ext.resumeLayouts(!0),this.refreshSizePending&&(this.refreshSize(!0),this.refreshSizePending=!1)},onDataRefresh:function(e){var t=this.preserveScrollOnRefresh;e.loadCount>=(this.lastRefreshLoadCount||0)&&(this.preserveScrollOnRefresh=this.preserveScrollOnReload),this.refreshView(),this.preserveScrollOnRefresh=t,this.lastRefreshLoadCount=e.loadCount},refreshView:function(e){var t=this.blockRefresh||!this.rendered||this.up("[collapsed],[isCollapsingOrExpanding=1],[hidden]"),i=this.bufferedRenderer;t?this.refreshNeeded=!0:i?i.refreshView(e):this.refresh()},findItemByChild:function(e){return Ext.fly(e).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(e){return e.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){for(var e=[],t=this.getSelectionModel().getSelection(),i=t.length,n=0;n<i;n++)e.push(this.getNode(t[n]));return e},getRecords:function(e){var t,i=[];for(t=0;t<e.length;t++)i.push(this.getRecord(e[t]));return i},getRecord:function(e){var t=Ext.getDom(e).getAttribute("data-recordId");return this.dataSource.getByInternalId(t)},isSelected:function(e){var t=this.getRecord(e);return this.getSelectionModel().isSelected(t)},select:function(e,t,i){this.getSelectionModel().select(e,t,i)},deselect:function(e,t){this.getSelectionModel().deselect(e,t)},getNode:function(e){var t;return this.rendered&&(e||0===e)&&(t=Ext.isString(e)?document.getElementById(e):e.isModel?this.getNodeByRecord(e):Ext.isNumber(e)?this.all.elements[e]:(e.target&&e.target.nodeType&&(e=e.target),Ext.fly(e).findParent(this.itemSelector,this.getTargetEl()))),t||null},getNodeByRecord:function(e){var t=this.store.indexOf(e);return this.all.elements[t]||null},getNodes:function(e,t){return void 0!==t&&t++,this.all.slice(e,t)},indexOf:function(e){return(e=this.getNode(e))||0===e?e.getAttribute("data-recordIndex")?Number(e.getAttribute("data-recordIndex")):this.all.indexOf(e):-1},doDestroy:function(){var e=this,t=e.updateSuspendCounter,i=e.tabGuardEl;for(e.viewScrollListeners&&e.viewScrollListeners.destroy(),e.all&&!e.all.destroyed&&e.all.clear(),i&&i.parentNode&&i.parentNode.removeChild(i),e.emptyEl=null,e.setItemsDraggable(!1),e.bindStore(null),e.selModelRelayer&&e.selModelRelayer.destroy(),Ext.destroy(e.navigationModel,e.selectionModel,e.loadMask);t--;)Ext.resumeLayouts(!0);e.callParent()},onItemSelect:function(e){var t=this.getNode(e);return t&&(Ext.fly(t).addCls(this.selectedItemCls),t.setAttribute("aria-selected","true")),t},onItemDeselect:function(e){var t=this.getNode(e);return t&&(Ext.fly(t).removeCls(this.selectedItemCls),t.setAttribute("aria-selected","false")),t},getItemSelector:function(){return this.itemSelector},addItemCls:function(e,t){var i=this.getNode(e);i&&Ext.fly(i).addCls(t)},removeItemCls:function(e,t){var i=this.getNode(e);i&&Ext.fly(i).removeCls(t)},setStore:function(e){this.store!==e&&(this.isConfiguring?this.store=e:this.bindStore(e,!1))},privates:{deferRefreshForLoad:function(e){return e.isLoading()},toggleChildrenTabbability:function(e){var t=this.getTargetEl();e?t.restoreTabbableState({skipSelf:!0}):t.saveTabbableState({skipSelf:!0,includeSaved:!1})},collectNodes:function(e){var t=this.all,i={role:this.itemAriaRole};t.fill(Ext.fly(e).query(this.getItemSelector()),t.startIndex||0),this.focusable&&(i.tabindex="-1"),t.set(i)},createMask:function(e){var t,i=this,n=i.getStore();return!n||n.isEmptyStore||n.loadsSynchronously()||(t={target:i,msg:i.loadingText,useMsg:i.loadingUseMsg,store:n},i.loadingCls&&(t.msgCls=i.loadingCls),Ext.isObject(e)&&(t=Ext.apply(t,e)),i.loadMask=new Ext.LoadMask(t),i.loadMask.on({scope:i,beforeshow:i.onMaskBeforeShow,hide:i.onMaskHide})),i.loadMask},getNodeContainer:function(){var e=this.getTargetEl(),t=this.nodeContainerSelector;return t?e.down(t,!0):e},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)}}},function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection().length},getSelectedRecords:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection()},select:function(e,t,i){Ext.global.console&&Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()");var n=this.getSelectionModel();return n.select.apply(n,arguments)},clearSelections:function(){return Ext.global.console&&Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()"),this.getSelectionModel().deselectAll()}})})}),Ext.define("Ext.view.View",{extend:"Ext.view.AbstractView",alternateClassName:"Ext.DataView",alias:"widget.dataview",inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,manageLayoutScroll:!1,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keyup:"KeyUp",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var e=this;e.callParent(),e.mon(e.el,{scope:e,click:e.handleEvent,longpress:e.handleEvent,mousedown:e.handleEvent,mouseup:e.handleEvent,dblclick:e.handleEvent,contextmenu:e.handleEvent,keydown:e.handleEvent,keyup:e.handleEvent,keypress:e.handleEvent,mouseover:e.handleMouseOver,mouseout:e.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(e){var t=this.getTargetSelector(),i=e.getTarget(t);this.destroyed||(i?this.mouseOverItem!==i&&this.el.contains(i)&&(this.mouseOverItem=e.item=i,e.newType="mouseenter",this.handleEvent(e)):this.handleEvent(e))},handleMouseOut:function(e){var t,i=this.getTargetSelector(),n=e.getTarget(i),r=e.getRelatedTarget(i);(n!==r||null===n&&null===r)&&(this.destroyed||(n&&(t=this.self.getBoundView(n))?(e.item=n,e.newType="mouseleave",t.handleEvent(e),t.mouseOverItem=null):this.handleEvent(e)))},handleEvent:function(e){var t=this.keyEventRe.test(e.type);e.isInputFieldEvent=Ext.fly(e.target).isInputField(),e.view=this,e.item=e.getTarget(this.itemSelector),e.item&&(e.record=this.getRecord(e.item)),!1===this.processUIEvent(e)||this.destroyed||this.processSpecialEvent(e),t&&!e.isInputFieldEvent&&(e.getKey()!==e.SPACE&&!e.isNavKeyPress(!0)||e.preventDefault()),e.view=null},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(e){if(Ext.getBody().isAncestor(e.target)){var t,i=this,n=e.item,r=i.self,o=r.EventMap,a=r.TouchEventMap,s=e.record,l=e.type,d=l;if(e.newType&&(d=e.newType),n){if(d=a[d]||d,t=e.recordIndex=i.indexInStore?i.indexInStore(s):i.indexOf(n),!s||!1===i.processItemEvent(s,n,t,e))return!1;if(!1===i["onBeforeItem"+o[d]](s,n,t,e)||!1===i.fireEvent("beforeitem"+d,i,s,n,t,e)||!1===i["onItem"+o[d]](s,n,t,e))return!1;i.fireEvent("item"+d,i,s,n,t,e)}else{if(l=a[l]||l,!1===i.processContainerEvent(e)||!1===i["onBeforeContainer"+o[l]](e)||!1===i.fireEvent("beforecontainer"+l,i,e)||!1===i["onContainer"+o[l]](e))return!1;i.fireEvent("container"+l,i,e)}return!0}},onItemMouseEnter:function(e,t,i,n){this.trackOver&&this.highlightItem(t)},onItemMouseLeave:function(e,t,i,n){this.trackOver&&this.clearHighlight()},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(e){var t=this,i=t.highlightedItem,n=t.overItemCls;i!==e&&(i&&(Ext.fly(i).removeCls(n),Ext.isIE8&&(t.repaintBorder(i),t.repaintBorder(i.nextSibling)),t.hasListeners.unhighlightitem&&t.fireEvent("unhighlightitem",t,i)),(t.highlightedItem=e)&&(Ext.fly(e).addCls(t.overItemCls),Ext.isIE8&&t.repaintBorder(e.nextSibling),t.hasListeners.highlightitem&&t.fireEvent("highlightitem",t,e)))},highlightItem:function(e){this.setHighlightedItem(e)},clearHighlight:function(){this.setHighlightedItem(void 0)},handleUpdate:function(e,t){var i,n,r;this.viewReady&&(i=this.getNode(t),n=this.callParent(arguments),(r=this.highlightedItem)&&r===i&&(delete this.highlightedItem,n&&this.highlightItem(n)))},refresh:function(){this.clearHighlight(),this.callParent(arguments)},focusNode:function(e){var t,i=Ext.fly(this.getNode(e)),n=this.el,r=0,o=0,a=n.getRegion();a.bottom=a.top+n.dom.clientHeight,a.right=a.left+n.dom.clientWidth,i&&((t=i.getRegion()).top<a.top?r=t.top-a.top:t.bottom>a.bottom&&(r=t.bottom-a.bottom),t.left<a.left?o=t.left-a.left:t.right>a.right&&(o=t.right-a.right),(o||r)&&this.scrollBy(o,r,!1),i.set({tabIndex:-1}),i.focus())},privates:{repaintBorder:function(e){var t=this.getNode(e);t&&(t.className=t.className)}}}),Ext.define("Ext.view.BoundListKeyNav",{extend:"Ext.view.NavigationModel",alias:"view.navigation.boundlist",navigateOnSpace:!0,initKeyNav:function(e){var t=this,i=e.pickerField;t.keyNav||(t.callParent([e]),t.keyNav.map.addBinding({key:Ext.event.Event.ESC,fn:t.onKeyEsc,scope:t})),i&&(i.rendered?t.fieldKeyNav=new Ext.util.KeyNav({disabled:!0,target:i.inputEl,forceKeyDown:!0,up:t.onKeyUp,down:t.onKeyDown,right:t.onKeyRight,left:t.onKeyLeft,pageDown:t.onKeyPageDown,pageUp:t.onKeyPageUp,home:t.onKeyHome,end:t.onKeyEnd,tab:t.onKeyTab,space:t.onKeySpace,enter:t.onKeyEnter,A:{ctrl:!0,handler:t.onSelectAllKeyPress},priority:1001,scope:t}):i.on("render",Ext.Function.bind(t.initKeyNav,t,[e],0),t,{single:!0}))},processViewEvent:function(e,t,i,n,r){return r.within(e.listWrap)?r:r.getKey()===r.ESC?(Ext.fly(r.target).isInputField()&&(r.target=r.target.parentNode),r):void 0},enable:function(){this.fieldKeyNav.enable(),this.callParent()},disable:function(){this.fieldKeyNav.disable(),this.callParent()},onItemMouseDown:function(e,t,i,n,r){this.callParent([e,t,i,n,r]),"mouse"===r.pointerType&&r.preventDefault()},onKeyUp:function(e){var t=this.view,i=t.all,n=t.highlightedItem,r=n?t.indexOf(n):-1,o=0<r?r-1:i.getCount()-1;this.setPosition(o),e.preventDefault()},onKeyDown:function(e){var t=this.view,i=t.all,n=t.highlightedItem,r=n?t.indexOf(n):-1,o=r<i.getCount()-1?r+1:0;this.setPosition(o),e.preventDefault()},onKeyLeft:Ext.returnTrue,onKeyRight:Ext.returnTrue,onKeyTab:function(e){var t=this.view,i=t.pickerField;return t.isVisible()&&(i.selectOnTab&&this.selectHighlighted(e),i.collapse&&i.collapse()),!0},onKeyEnter:function(e){var t=this.view,i=t.getSelectionModel(),n=t.pickerField,r=i.getCount();return e.stopEvent(),this.selectHighlighted(e),!n.multiSelect&&r===i.getCount()&&n.collapse&&n.collapse(),n.fireEvent("specialkey",n,e,{fromBoundList:!0}),!1},onKeySpace:function(){return this.navigateOnSpace&&this.callParent(arguments),!0},onKeyEsc:function(){this.view.pickerField&&this.view.pickerField.collapse()},focusItem:function(e){var t=this.view;"number"==typeof e&&(e=t.all.item(e)),e&&(e=e.dom,t.highlightItem(e),t.getScrollable().ensureVisible(e,{x:!1}))},selectHighlighted:function(e){var t,i=this.view,n=i.getSelectionModel(),r=this.recordIndex;i.all.getCount()&&(t=this.getRecord())&&(e.getKey()!==e.ENTER&&n.isSelected(t)||(n.selectWithEvent(t,e),i.store.data.contains(t)||this.setPosition(Math.min(r,i.store.getCount()-1))))},destroy:function(){this.fieldKeyNav=Ext.destroy(this.fieldKeyNav),this.callParent()}}),Ext.define("Ext.layout.component.BoundList",{extend:"Ext.layout.component.Auto",alias:"layout.boundlist",type:"component",beginLayout:function(e){var t=this.owner,i=t.pagingToolbar;this.scrollPos=t.listWrap.getScroll(),this.callParent(arguments),t.floating&&(e.savedXY=t.getXY(),t.setXY([0,-9999])),i&&(e.toolbarContext=e.context.getCmp(i)),e.listContext=e.getEl("listWrap")},beginLayoutCycle:function(e){var t=this.owner;this.callParent(arguments),e.heightModel.auto&&(t.el.setHeight("auto"),t.listWrap.setHeight("auto"))},getLayoutItems:function(){var e=this.owner.pagingToolbar;return e?[e]:[]},isValidParent:function(){return!0},finishedLayout:function(e){var t=e.savedXY,i=this.owner.listWrap,n=this.scrollPos;this.callParent(arguments),t&&this.owner.setXY(t),i.setScrollLeft(n.left),i.setScrollTop(n.top)},measureContentWidth:function(e){return this.owner.listWrap.getWidth()},measureContentHeight:function(e){return this.owner.listWrap.getHeight()},publishInnerHeight:function(e,t){var i=e.toolbarContext,n=0;i&&(n=i.getProp("height")),void 0===n?this.done=!1:e.listContext.setHeight(t-e.getFrameInfo().height-n)},calculateOwnerHeightFromContentHeight:function(e){var t=this.callParent(arguments),i=e.toolbarContext;return i&&(t+=i.getProp("height")),t}}),Ext.define("Ext.toolbar.Item",{extend:"Ext.Component",alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",requires:["Ext.toolbar.Toolbar"],enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.define("Ext.toolbar.TextItem",{extend:"Ext.toolbar.Item",alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",requires:["Ext.toolbar.Toolbar","Ext.XTemplate"],text:"",baseCls:Ext.baseCSSPrefix+"toolbar-text",ariaRole:null,beforeRender:function(){var e=this.text;this.callParent(),e&&(this.html=e)},setText:function(e){this.update(e)}}),Ext.define("Ext.form.trigger.Spinner",{extend:"Ext.form.trigger.Trigger",alias:"trigger.spinner",cls:Ext.baseCSSPrefix+"form-trigger-spinner",spinnerCls:Ext.baseCSSPrefix+"form-spinner",spinnerUpCls:Ext.baseCSSPrefix+"form-spinner-up",spinnerDownCls:Ext.baseCSSPrefix+"form-spinner-down",focusCls:Ext.baseCSSPrefix+"form-spinner-focus",overCls:Ext.baseCSSPrefix+"form-spinner-over",clickCls:Ext.baseCSSPrefix+"form-spinner-click",focusFieldOnClick:!0,vertical:!0,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',destroy:function(){this.spinnerEl&&(this.spinnerEl.destroy(),this.spinnerEl=this.upEl=this.downEl=null),this.callParent()},getBodyRenderData:function(){return{vertical:this.vertical,upDisabledCls:this.upEnabled?"":this.spinnerUpCls+"-disabled",downDisabledCls:this.downEnabled?"":this.spinnerDownCls+"-disabled",spinnerCls:this.spinnerCls,spinnerUpCls:this.spinnerUpCls,spinnerDownCls:this.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(){var e=this,t=arguments,i=e.clickRepeater?t[1]:t[0],n=e.field;n.readOnly||n.disabled||(e.upEl.contains(i.target)?Ext.callback(e.upHandler,e.scope,[n,e,i],0,n):e.downEl.contains(i.target)&&Ext.callback(e.downHandler,e.scope,[n,e,i],0,n)),n.inputEl.focus()},onFieldRender:function(){var e,t=this.vertical;this.callParent(),e=(this.spinnerEl=this.el.select("."+this.spinnerCls,!0)).elements,this.upEl=t?e[0]:e[1],this.downEl=t?e[1]:e[0]},setUpEnabled:function(e){this.upEl[e?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(e){this.downEl[e?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}}),Ext.define("Ext.form.field.Spinner",{extend:"Ext.form.field.Text",alias:"widget.spinnerfield",alternateClassName:"Ext.form.Spinner",requires:["Ext.form.trigger.Spinner","Ext.util.KeyNav"],config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",endHandler:"onSpinEnd",scope:"this"}}},spinUpEnabled:!0,spinDownEnabled:!0,keyNavEnabled:!0,mouseWheelEnabled:!0,repeatTriggerClick:!0,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(e){var t=e.spinner;return t.upEnabled=this.spinUpEnabled,t.downEnabled=this.spinDownEnabled,this.callParent([e])},onRender:function(){var e=this,t=e.getTrigger("spinner");e.callParent(),e.keyNavEnabled&&(e.spinnerKeyNav=new Ext.util.KeyNav({target:e.inputEl,scope:e,up:e.spinUp,down:e.spinDown}),e.inputEl.on({keyup:e.onInputElKeyUp,scope:e})),e.mouseWheelEnabled&&e.mon(e.bodyEl,"mousewheel",e.onMouseWheel,e),e.spinUpEl=t.upEl,e.spinDownEl=t.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){this.spinUpEnabled&&!this.disabled&&(this.fireEvent("spin",this,"up"),this.fireEvent("spinup",this),this.onSpinUp())},spinDown:function(){this.spinDownEnabled&&!this.disabled&&(this.fireEvent("spin",this,"down"),this.fireEvent("spindown",this),this.onSpinDown())},setSpinUpEnabled:function(e){this.spinUpEnabled!==(this.spinUpEnabled=e)&&this.rendered&&this.getTrigger("spinner").setUpEnabled(e)},setSpinDownEnabled:function(e){this.spinDownEnabled!==(this.spinDownEnabled=e)&&this.rendered&&this.getTrigger("spinner").setDownEnabled(e)},onMouseWheel:function(e){var t;this.hasFocus&&(0<(t=e.getWheelDelta())?this.spinUp():t<0&&this.spinDown(),e.stopEvent(),this.onSpinEnd())},onInputElKeyUp:function(e){e.keyCode!==e.UP&&e.keyCode!==e.DOWN||this.onSpinEnd()},doDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav"),this.callParent()}},function(e){function t(){this.destroying||this.destroyed||this.fireEvent("spinend",this)}t.$skipTimerCheck=!0,e.prototype.onSpinEnd=Ext.Function.createBuffered(t,100)}),Ext.define("Ext.form.field.Number",{extend:"Ext.form.field.Spinner",alias:"widget.numberfield",alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:!0,allowDecimals:!0,decimalSeparator:null,submitLocaleSeparator:!0,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:!1,initComponent:function(){null===this.decimalSeparator&&(this.decimalSeparator=Ext.util.Format.decimalSeparator),this.callParent(),this.setMinValue(this.minValue),this.setMaxValue(this.maxValue)},getSubTplData:function(e){var t,i,n,r=this.minValue,o=this.maxValue;return(i=(t=this.callParent([e])).inputElAriaAttributes)&&(r>Number.NEGATIVE_INFINITY&&(i["aria-valuemin"]=r),o<Number.MAX_VALUE&&(i["aria-valuemax"]=o),null!=(n=this.getValue())&&r<=n&&n<=o&&(i["aria-valuenow"]=n)),t},setValue:function(e){var t,i;return this.hasFocus&&(i=(t=this.getBind())&&t.value)&&i.syncing&&e===this.value?this:this.callParent([e])},getErrors:function(e){e=0<arguments.length?e:this.processRawValue(this.getRawValue());var t,i=this,n=i.callParent([e]),r=Ext.String.format;return e.length<1||(e=String(e).replace(i.decimalSeparator,"."),isNaN(e)&&n.push(r(i.nanText,e)),t=i.parseValue(e),0===i.minValue&&t<0?n.push(this.negativeText):t<i.minValue&&n.push(r(i.minText,i.minValue)),t>i.maxValue&&n.push(r(i.maxText,i.maxValue))),n},rawToValue:function(e){var t=this.fixPrecision(this.parseValue(e));return null===t&&(t=e||null),t},valueToRaw:function(e){var t=this.decimalSeparator;return e=this.parseValue(e),e=this.fixPrecision(e),e=Ext.isNumber(e)?e:parseFloat(String(e).replace(t,".")),e=isNaN(e)?"":String(e).replace(".",t)},getSubmitValue:function(){var e=this.callParent();return this.submitLocaleSeparator||(e=e.replace(this.decimalSeparator,".")),e},onChange:function(e){var t=this.ariaEl.dom;this.toggleSpinners(),this.callParent(arguments),t&&(Ext.isNumber(e)&&isFinite(e)?t.setAttribute("aria-valuenow",e):t.removeAttribute("aria-valuenow"))},toggleSpinners:function(){var e,t=this.getValue(),i=null===t;(this.spinUpEnabled||this.spinUpDisabledByToggle)&&(e=i||t<this.maxValue,this.setSpinUpEnabled(e,!0)),(this.spinDownEnabled||this.spinDownDisabledByToggle)&&(e=i||t>this.minValue,this.setSpinDownEnabled(e,!0))},setMinValue:function(e){var t,i,n=this,r=n.ariaEl.dom;n.minValue=t=Ext.Number.from(e,Number.NEGATIVE_INFINITY),n.toggleSpinners(),r&&(t>Number.NEGATIVE_INFINITY?r.setAttribute("aria-valuemin",t):r.removeAttribute("aria-valuemin")),!0!==n.disableKeyFilter&&(i=n.baseChars+"",n.allowExponential?i+=n.decimalSeparator+"e+-":(n.allowDecimals&&(i+=n.decimalSeparator),n.minValue<0&&(i+="-")),i=Ext.String.escapeRegex(i),n.maskRe=new RegExp("["+i+"]"),n.autoStripChars&&(n.stripCharsRe=new RegExp("[^"+i+"]","gi")))},setMaxValue:function(e){var t,i=this.ariaEl.dom;this.maxValue=t=Ext.Number.from(e,Number.MAX_VALUE),i&&(t<Number.MAX_VALUE?i.setAttribute("aria-valuemax",t):i.removeAttribute("aria-valuemax")),this.toggleSpinners()},parseValue:function(e){return e=parseFloat(String(e).replace(this.decimalSeparator,".")),isNaN(e)?null:e},fixPrecision:function(e){var t=isNaN(e),i=this.decimalPrecision;return t||!e?t?"":e:((!this.allowDecimals||i<=0)&&(i=0),parseFloat(Ext.Number.toFixed(parseFloat(e),i)))},onBlur:function(e){var t=this.rawToValue(this.getRawValue());Ext.isEmpty(t)||this.setValue(t),this.callParent([e])},setSpinUpEnabled:function(e,t){this.callParent(arguments),t?this.spinUpDisabledByToggle=!e:delete this.spinUpDisabledByToggle},onSpinUp:function(){this.readOnly||this.setSpinValue(Ext.Number.constrain(this.getValue()+this.step,this.minValue,this.maxValue))},setSpinDownEnabled:function(e,t){this.callParent(arguments),t?this.spinDownDisabledByToggle=!e:delete this.spinDownDisabledByToggle},onSpinDown:function(){this.readOnly||this.setSpinValue(Ext.Number.constrain(this.getValue()-this.step,this.minValue,this.maxValue))},setSpinValue:function(e){this.enforceMaxLength&&this.fixPrecision(e).toString().length>this.maxLength||this.setValue(e)}}),Ext.define("Ext.toolbar.Paging",{extend:"Ext.toolbar.Toolbar",xtype:"pagingtoolbar",alternateClassName:"Ext.PagingToolbar",requires:["Ext.toolbar.TextItem","Ext.form.field.Number"],mixins:["Ext.util.StoreHolder"],displayInfo:!1,prependButtons:!1,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,emptyPageData:{total:0,currentPage:0,pageCount:0,toRecord:0,fromRecord:0},defaultBindProperty:"store",_pagingToolbarCls:Ext.baseCSSPrefix+"grid-paging-toolbar",getPagingItems:function(){var e=this,t={scope:e,blur:e.onPagingBlur};return t[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=e.onPagingKeyDown,[{itemId:"first",tooltip:e.firstText,overflowText:e.firstText,iconCls:Ext.baseCSSPrefix+"tbar-page-first",disabled:!0,handler:e.moveFirst,scope:e},{itemId:"prev",tooltip:e.prevText,overflowText:e.prevText,iconCls:Ext.baseCSSPrefix+"tbar-page-prev",disabled:!0,handler:e.movePrevious,scope:e},"-",e.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:Ext.baseCSSPrefix+"tbar-page-number",allowDecimals:!1,minValue:1,hideTrigger:!0,enableKeyEvents:!0,keyNavEnabled:!1,selectOnFocus:!0,submitValue:!1,isFormField:!1,width:e.inputItemWidth,margin:"-1 2 3 2",listeners:t},{xtype:"tbtext",itemId:"afterTextItem",html:Ext.String.format(e.afterPageText,1)},"-",{itemId:"next",tooltip:e.nextText,overflowText:e.nextText,iconCls:Ext.baseCSSPrefix+"tbar-page-next",disabled:!0,handler:e.moveNext,scope:e},{itemId:"last",tooltip:e.lastText,overflowText:e.lastText,iconCls:Ext.baseCSSPrefix+"tbar-page-last",disabled:!0,handler:e.moveLast,scope:e},"-",{itemId:"refresh",tooltip:e.refreshText,overflowText:e.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",disabled:e.store.isLoading(),handler:e.doRefresh,scope:e}]},initComponent:function(){var e,t=this,i=t.items||t.buttons||[];t.bindStore(t.store||"ext-empty-store",!0),t.store&&!t.store.nextPage&&Ext.raise("Store is not compatible with this component (does not support paging)"),e=t.getPagingItems(),t.prependButtons?t.items=i.concat(e):t.items=e.concat(i),delete t.buttons,t.displayInfo&&(t.items.push("->"),t.items.push({xtype:"tbtext",itemId:"displayItem"})),t.callParent()},beforeRender:function(){this.callParent(arguments),this.updateBarInfo()},afterRender:function(){this.callParent(),this.el.addCls(this._pagingToolbarCls)},onAdded:function(e){var t,i,n=this.store,r=this._autoStore;void 0===r&&(this._autoStore=r=!(n&&!n.isEmptyStore)),r&&((t=this._storeChangeListener)&&(t.destroy(),t=null),(i=e&&e.store)&&(t=e.on({destroyable:!0,scope:this,storechange:"onOwnerStoreChange"})),this._storeChangeListener=t,this.onOwnerStoreChange(e,i)),this.callParent(arguments)},onOwnerStoreChange:function(e,t){this.setStore(t||Ext.getStore("ext-empty-store"))},updateBarInfo:function(){this.store.isLoading()||(this.calledInternal=!0,this.onLoad(),this.calledInternal=!1)},updateInfo:function(){var e,t=this.child("#displayItem"),i=this.store,n=this.getPageData();t&&(e=0===i.getCount()?this.emptyMsg:Ext.String.format(this.displayMsg,n.fromRecord,n.toRecord,n.total),t.setText(e))},onLoad:function(){var e,t,i,n,r,o,a=this;if(r=0===a.store.getCount())i=t=0,n=Ext.String.format(a.afterPageText,0);else{if(t=(e=a.getPageData()).currentPage,(i=e.pageCount)<t)return void(0<i?a.store.loadPage(i):a.getInputItem().reset());n=Ext.String.format(a.afterPageText,isNaN(i)?1:i)}Ext.suspendLayouts(),(o=a.child("#afterTextItem"))&&o.update(n),(o=a.getInputItem())&&o.setDisabled(r).setValue(t),a.setChildDisabled("#first",1===t||r),a.setChildDisabled("#prev",1===t||r),a.setChildDisabled("#next",t===i||r),a.setChildDisabled("#last",t===i||r),a.setChildDisabled("#refresh",!1),a.updateInfo(),Ext.resumeLayouts(!0),a.calledInternal||a.fireEvent("change",a,e||a.emptyPageData)},setChildDisabled:function(e,t){var i=this.child(e);i&&i.setDisabled(t)},getPageData:function(){var e=this.store,t=e.getTotalCount(),i=Math.ceil(t/e.pageSize),n=Math.min(e.currentPage*e.pageSize,t);return{total:t,currentPage:e.currentPage,pageCount:Ext.Number.isFinite(i)?i:1,fromRecord:(e.currentPage-1)*e.pageSize+1,toRecord:n||t}},onLoadError:function(){this.setChildDisabled("#refresh",!1)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(e){var t,i=this.getInputItem(),n=!1;return i&&(t=i.getValue(),n=parseInt(t,10),!t||isNaN(n))?(i.setValue(e.currentPage),!1):n},onPagingBlur:function(e){var t,i=this.getInputItem();i&&(t=this.getPageData().currentPage,i.setValue(t))},onPagingKeyDown:function(e,t){this.processKeyEvent(e,t)},processKeyEvent:function(e,t){var i,n=t.getKey(),r=this.getPageData(),o=t.shiftKey?10:1;n===t.RETURN?(t.stopEvent(),!1!==(i=this.readPageFromInput(r))&&(i=Math.min(Math.max(1,i),r.pageCount))!==r.currentPage&&!1!==this.fireEvent("beforechange",this,i)&&this.store.loadPage(i)):n===t.HOME||n===t.END?(t.stopEvent(),i=n===t.HOME?1:r.pageCount,e.setValue(i)):n!==t.UP&&n!==t.PAGE_UP&&n!==t.DOWN&&n!==t.PAGE_DOWN||(t.stopEvent(),(i=this.readPageFromInput(r))&&(n!==t.DOWN&&n!==t.PAGE_DOWN||(o*=-1),1<=(i+=o)&&i<=r.pageCount&&e.setValue(i)))},beforeLoad:function(){this.setChildDisabled("#refresh",!0)},moveFirst:function(){return!1!==this.fireEvent("beforechange",this,1)&&(this.store.loadPage(1),!0)},movePrevious:function(){var e=this.store,t=e.currentPage-1;return 0<t&&!1!==this.fireEvent("beforechange",this,t)&&(e.previousPage(),!0)},moveNext:function(){var e=this.store,t=this.getPageData().pageCount,i=e.currentPage+1;return i<=t&&!1!==this.fireEvent("beforechange",this,i)&&(e.nextPage(),!0)},moveLast:function(){var e=this.getPageData().pageCount;return!1!==this.fireEvent("beforechange",this,e)&&(this.store.loadPage(e),!0)},doRefresh:function(){var e=this.store,t=e.currentPage;return!1!==this.fireEvent("beforechange",this,t)&&(e.loadPage(t),!0)},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onBindStore:function(){this.rendered&&this.updateBarInfo()},doDestroy:function(){var e=this._storeChangeListener;e&&(e.destroy(),this._storeChangeListener=null),this.bindStore(null),this.callParent()}}),Ext.define("Ext.view.BoundList",{extend:"Ext.view.View",alias:"widget.boundlist",alternateClassName:"Ext.BoundList",requires:["Ext.view.BoundListKeyNav","Ext.layout.component.BoundList","Ext.toolbar.Paging"],mixins:["Ext.mixin.Queryable"],pageSize:0,baseCls:Ext.baseCSSPrefix+"boundlist",itemCls:Ext.baseCSSPrefix+"boundlist-item",listItemCls:"",shadow:!1,trackOver:!0,preserveScrollOnRefresh:!0,enableInitialSelection:!1,refreshSelmodelOnRefresh:!0,componentLayout:"boundlist",navigationModel:"boundlist",scrollable:!0,ariaEl:"listEl",tabIndex:-1,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap"',' class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="',Ext.baseCSSPrefix,'list-plain"','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',">","</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:!0}],focusOnToFront:!1,alignOnScroll:!1,initComponent:function(){var e=this,t=e.baseCls,i=e.itemCls;e.selectedItemCls=t+"-selected",e.trackOver&&(e.overItemCls=t+"-item-over"),e.itemSelector="."+i,e.floating&&e.addCls(t+"-floating"),e.tpl?e.tpl.isTemplate||(e.tpl=new Ext.XTemplate(e.tpl)):e.generateTpl(),e.pageSize&&(e.pagingToolbar=e.createPagingToolbar()),e.callParent()},generateTpl:function(){this.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+this.itemCls+'">'+this.getInnerTpl(this.displayField)+"</li>","</tpl>")},setDisplayField:function(e){this.displayField=e,this.generateTpl()},getRefOwner:function(){return this.pickerField||this.callParent()},getRefItems:function(){var e=this.callParent(),t=this.pagingToolbar;return t&&e.push(t),e},createPagingToolbar:function(){return new Ext.toolbar.Paging({id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:!1,ownerCt:this,ownerLayout:this.getComponentLayout()})},refresh:function(){var e=this.tpl;e.field=this.pickerField,e.store=this.store,this.callParent(),e.field=e.store=null,this.ariaStaticRoles[this.ariaRole]||this.refreshAriaAttributes()},refreshAriaAttributes:function(){var e,t,i,n,r,o,a,s,l=this.store,d=this.getSelectionModel();for(t=l.isFiltered()?l.getCount():l.getTotalCount()||l.getCount(),i=this.getNodes(),e=this.pickerField&&this.pickerField.multiSelect,a=0,s=i.length;a<s;a++)n=i[a],r=null,t!==s&&(r=this.getRecord(n),o=l.indexOf(r),n.setAttribute("aria-setsize",t),n.setAttribute("aria-posinset",o)),e&&(r=r||this.getRecord(n),n.setAttribute("aria-selected",d.isSelected(r)))},bindStore:function(e,t){var i=this.pagingToolbar;this.callParent(arguments),i&&i.bindStore(e,t)},getInnerTpl:function(e){return"{"+e+"}"},onShow:function(){var e=this.pickerField;this.callParent(),e&&e.rendered&&!e.hasFocus&&!Ext.isTouchMode()&&e.focus()},afterComponentLayout:function(e,t,i,n){var r=this.pickerField;this.callParent([e,t,i,n]),r&&r.alignPicker&&r.alignPicker()},onItemSelect:function(e){var t;return(t=this.callParent([e]))&&(this.ariaSelectable?t.setAttribute("aria-selected","true"):t.removeAttribute("aria-selected")),t},onItemDeselect:function(e){var t;return(t=this.callParent([e]))&&this.ariaSelectable&&(this.pickerField&&this.pickerField.multiSelect?t.setAttribute("aria-selected","false"):t.removeAttribute("aria-selected")),t},onItemClick:function(e){var t,i,n=this.pickerField;n&&(t=n.valueField,i=this.getSelectionModel().getSelection(),!n.multiSelect&&i.length&&(i=i[0])&&n.isEqual(e.get(t),i.get(t))&&n.collapse&&n.collapse())},onContainerClick:function(e){var t,i=this.pagingToolbar;return!(i&&i.rendered&&e.within(i.el))&&(!((Ext.isIE10||Ext.isIE11)&&(t=this.listWrap.getClientRegion(),!e.getPoint().isContainedBy(t)))&&void 0)},doDestroy:function(){this.pagingToolbar=Ext.destroy(this.pagingToolbar),this.callParent()},privates:{getNodeContainer:function(){return this.listEl},getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var e=this.pagingToolbar;this.callParent(arguments),e&&e.finishRender()}}}),Ext.define("Ext.form.field.ComboBox",{extend:"Ext.form.field.Picker",alternateClassName:"Ext.form.ComboBox",alias:["widget.combobox","widget.combo"],requires:["Ext.util.DelayedTask","Ext.view.BoundList","Ext.data.StoreManager"],mixins:["Ext.util.StoreHolder"],config:{filters:null,selection:null,valueNotFoundText:null,displayTpl:null,delimiter:", ",displayField:"text"},publishes:["selection"],twoWayBindable:["selection"],triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",hiddenName:"",collapseOnSelect:!1,hiddenDataCls:Ext.baseCSSPrefix+"hidden-display "+Ext.baseCSSPrefix+"form-data-hidden",ariaRole:"combobox",autoDestroyBoundStore:!0,childEls:{hiddenDataEl:!0},filtered:!1,afterRender:function(){this.callParent(arguments),this.setHiddenValue(this.value)},multiSelect:!1,triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:!0,autoLoadOnValue:!1,pageSize:0,anyMatch:!1,caseSensitive:!1,autoSelect:!0,autoSelectLast:!0,typeAhead:!1,typeAheadDelay:250,selectOnTab:!0,forceSelection:!1,growToLongestValue:!0,clearFilterOnBlur:!0,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:!0,clearValueOnEmpty:!0,newlineRe:/\r?\n/g,getGrowWidth:function(){var e,t,i,n,r,o,a,s=this.inputEl.dom.value;if(this.growToLongestValue)for(e=this.displayField,i=(t=this.store).data.length,r=n=0;r<i;r++)n<(a=(o=t.getAt(r).data[e]).length)&&(n=a,s=o);return s},initComponent:function(){var e,t,i=this,n=Ext.isDefined,r=i.store,o=i.transform;i.typeAhead&&i.multiSelect&&Ext.raise("typeAhead and multiSelect are mutually exclusive options -- please remove one of them."),i.typeAhead&&!i.editable&&Ext.raise("If typeAhead is enabled the combo must be editable: true -- please change one of those settings."),i.selectOnFocus&&!i.editable&&Ext.raise("If selectOnFocus is enabled the combo must be editable: true -- please change one of those settings."),"pinList"in i&&(i.collapseOnSelect=!i.pinList),o&&(e=Ext.getDom(o))&&(i.store||(r=Ext.Array.map(Ext.Array.from(e.options),function(e){return[e.value,e.text]})),i.name||(i.name=e.name),"value"in i||(i.value=e.value)),i.displayTpl&&!i.displayTpl.auto||i.setDisplayTpl(!1),i.bindStore(r||"ext-empty-store",!0,!0),t="local"===i.queryMode,n(i.queryDelay)||(i.queryDelay=t?10:500),n(i.minChars)||(i.minChars=t?0:4),i.callParent(),i.doQueryTask=new Ext.util.DelayedTask(i.doRawQuery,i),e&&(i.transformInPlace&&(i.render(e.parentNode,e),delete i.renderTo),Ext.removeNode(e))},initEvents:function(){this.callParent(),this.altArrowKeyNav=new Ext.util.KeyNav({target:this.inputEl,forceKeyDown:!0,priority:1002,scope:this,down:{alt:!0,handler:this.onAltDownArrow},up:{alt:!0,handler:this.onAltUpArrow}})},getSubTplData:function(e){var t,i,n=this.id;return t=this.callParent([e]),this.ariaStaticRoles[this.ariaRole]||(i=t.ariaElAttributes)&&(i["aria-owns"]=n+"-inputEl "+n+"-picker-listEl",i["aria-autocomplete"]="list"),t},getSubTplMarkup:function(e){var t="",i=this.callParent(arguments);return this.hiddenName&&(t='<div id="'+e.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+this.hiddenDataCls+'" role="presentation"></div>'),t+i},applyDisplayTpl:function(e){return e?e.isTemplate||(e=new Ext.XTemplate(e)):(e=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+this.getDisplayField()+'"]]}<tpl if="xindex < xcount">'+this.getDelimiter()+"</tpl></tpl>")).auto=!0,e},applyFilters:function(e,t){var i=this;return null===e||e.isFilterCollection?e:(e&&((t=t||this.getFilters()).beginUpdate(),t.splice(0,t.length,e),t.each(function(e){e.ownerId=i.id}),t.endUpdate()),t)},applyValueNotFoundText:function(e){var t=this.getDisplayField(),i=this.valueField,n=this.valueNotFoundRecord;return(n=n||(this.valueNotFoundRecord=new Ext.data.Model)).set(t,e),i&&t!==i&&n.set(i,e),e},updateDisplayField:function(e){(e&&!this.displayTpl||this.displayTpl.auto)&&this.setDisplayTpl(!1)},getFilters:function(e){var t=this.filters;return t||!1===e||(t=new Ext.util.FilterCollection,this.setFilters(t)),t},updateFilters:function(e,t){t&&t.un("endupdate","onEndUpdateFilters",this),e&&e.on("endupdate","onEndUpdateFilters",this),this.onEndUpdateFilters(e)},onEndUpdateFilters:function(t){var i,e,n=this,r=n.filtered,o=!!t&&0<t.length;(r||o)&&(n.filtered=o,i=[],(e=n.store.getFilters()).each(function(e){e.ownerId!==n.id||t.contains(e)||i.push(e)}),e.splice(0,i,t.items))},clearLocalFilter:function(){var e=this.queryFilter;e&&(this.queryFilter=null,this.changingFilters=!0,this.store.removeFilter(e,!0),this.changingFilters=!1)},completeEdit:function(e){this.callParent([e]),this.doQueryTask.cancel(),this.assertValue(),this.queryFilter&&"local"===this.queryMode&&this.clearFilterOnBlur&&this.clearLocalFilter()},onFocus:function(e){Ext.isTouchMode()&&this.getPicker().getEl().focus(),this.callParent([e]),"all"!==this.triggerAction&&this.queryFilter&&"local"===this.queryMode&&this.clearFilterOnBlur&&(delete this.lastQuery,this.doRawQuery())},onAltDownArrow:function(e){return e.stopEvent(),this.isExpanded||this.onDownArrow(e),!1},onAltUpArrow:function(e){return e.stopEvent(),this.isExpanded&&this.onEsc(e),!1},assertValue:function(){var e,t,i=this,n=i.getRawValue(),r=i.getDisplayValue(),o=i.lastSelectedRecords,a=!1,s=!1;i.forceSelection?i.multiSelect?n!==r&&i.setRawValue(r):((t=i.findRecordByDisplay(n))?i.getDisplayValue([i.getRecordDisplayData(t)])===r&&(a=!(t=null)):(i.displayTplData&&i.displayTplData.length&&(t=i.findRecordByValue(i.displayTplData[0][i.valueField])),t||!o||i.allowBlank&&!i.rawValue||(t=o[0],s=!0)),t?!s&&o&&o[0]===t||(i.select(t,!0),i.fireEvent("select",i,t)):a||(o&&delete i.lastSelectedRecords,i.setRawValue(""))):(e=i.getValue())&&e==n&&(t=i.findRecordByDisplay(e))&&t!==(o&&o[0])&&(i.select(t,!0),i.fireEvent("select",i,t)),i.collapse()},onTypeAhead:function(){var e,t,i,n=this.displayField,r=this.store.findRecord(n,this.getRawValue());r&&(t=(e=r.get(n)).length,0!==(i=this.getRawValue().length)&&i!==t&&(this.lastMutatedValue=e,this.setRawValue(e),this.selectText(i,e.length)))},resetToDefault:Ext.emptyFn,beforeReset:function(){this.callParent(),this.clearLocalFilter()},onUnbindStore:function(){var e=this.picker;this.queryFilter&&!this.store.destroyed&&this.clearLocalFilter(),e&&e.bindStore(null),this.pickerSelectionModel.destroy()},onBindStore:function(e,t){var i,n,r=this,o=r.picker;e&&(e.autoCreated&&(r.queryMode="local",r.valueField=r.displayField="field1",e.expanded||(r.displayField="field2"),r.getDisplayTpl().auto&&r.setDisplayTpl(null)),Ext.isDefined(r.valueField)||(r.valueField=r.displayField),(i={byValue:{rootProperty:"data",unique:!1}}).byValue.property=r.valueField,e.setExtraKeys(i),r.displayField===r.valueField?e.byText=e.byValue:(i.byText={rootProperty:"data",unique:!1},i.byText.property=r.displayField,e.setExtraKeys(i)),n={rootProperty:"data",extraKeys:{byInternalId:{property:"internalId"},byValue:{property:r.valueField,rootProperty:"data"}},listeners:{beginupdate:r.onValueCollectionBeginUpdate,endupdate:r.onValueCollectionEndUpdate,scope:r}},r.valueCollection=new Ext.util.Collection(n),r.pickerSelectionModel=new Ext.selection.DataViewModel({mode:r.multiSelect?"SIMPLE":"SINGLE",ordered:!0,deselectOnContainerClick:!1,enableInitialSelection:!1,pruneRemoved:!1,selected:r.valueCollection,store:e,listeners:{scope:r,lastselectedchanged:r.updateBindSelection}}),t||r.resetToDefault(),o&&(r.pickerSelectionModel.on({scope:r,beforeselect:r.onBeforeSelect,beforedeselect:r.onBeforeDeselect}),o.setSelectionModel(r.pickerSelectionModel),o.getStore()!==e&&o.bindStore(e)))},bindStore:function(e,t,i){var n=this.queryFilter;this.mixins.storeholder.bindStore.call(this,e,i),(e=this.getStore())&&n&&!t&&e.getFilters().add(n),i||!e||e.isEmptyStore||this.setValueOnData()},getStoreListeners:function(e){var t;if(!e.isEmptyStore)return t={datachanged:this.onDataChanged,load:this.onLoad,exception:this.onException,update:this.onStoreUpdate,remove:this.checkValueOnChange},e.getRemoteFilter()||(t.filterchange=this.checkValueOnChange),t},onDataChanged:function(){this.grow&&this.growToLongestValue&&this.autoSize()},checkValueOnChange:function(){var e=this;if(!e.destroying&&e.getStore().isLoaded()&&!e.multiSelect&&e.forceSelection&&!e.changingFilters&&!e.findRecordByValue(e.value)){if("local"!==e.queryMode&&(e.hasFocus||e.isPaging))return;e.setValue(null)}},onStoreUpdate:function(e,t){this.updateValue()},onException:function(){this.isPaging=!1,this.collapse()},onLoad:function(e,t,i){var n=!this.valueCollection.byValue.get(this.value);!i||!n||this.isPaging||e.lastOptions&&"rawQuery"in e.lastOptions||this.setValueOnData(),this.checkValueOnChange(),this.isPaging=!1},setValueOnData:function(){this.setValue(this.value),this.isExpanded&&this.getStore().getCount()&&this.doAutoSelect()},doRawQuery:function(){var e=this.inputEl.dom.value;this.multiSelect&&(e=e.split(this.delimiter).pop()),this.doQuery(e,!1,!0)},doQuery:function(e,t,i){var n,r=this,o=r.getStore().getFilters(),a=r.beforeQuery({lastQuery:r.lastQuery||"",query:e||"",rawQuery:i,forceAll:t,combo:r,cancel:!1});return!1===a||a.cancel?(r.startCheckChangeTask(),!1):(n=!!e&&(!r.queryFilter||r.queryFilter&&o.indexOf(r.queryFilter)<0),r.queryCaching&&!n&&a.query===r.lastQuery?(r.getPicker().refresh(),r.expand(),r.afterQuery(a)):(r.lastQuery=a.query,"local"===r.queryMode?r.doLocalQuery(a):r.doRemoteQuery(a)),!0)},beforeQuery:function(e){return!1===this.fireEvent("beforequery",e)?e.cancel=!0:e.cancel||e.query.length<this.minChars&&!e.forceAll&&(e.cancel=!0),e},doLocalQuery:function(e){var t,i=this,n=e.query,r=i.getStore(),o=n;if(i.clearLocalFilter(),n){if(i.enableRegEx)try{o=new RegExp(o)}catch(e){o=null}null!==o&&(i.changingFilters=!0,t=i.queryFilter=new Ext.util.Filter({id:i.id+"-filter",anyMatch:i.anyMatch,caseSensitive:i.caseSensitive,root:"data",property:i.displayField,value:o}),r.addFilter(t,!0),i.changingFilters=!1)}i.store.getCount()||i.getPicker().emptyText?(i.getPicker().refresh(),i.expand()):i.collapse(),i.afterQuery(e)},doRemoteQuery:function(e){function t(){i.destroyed||i.afterQuery(e)}var i=this;i.expand(),i.pageSize?i.loadPage(1,{rawQuery:e.rawQuery,callback:t}):i.store.load({params:i.getParams(e.query),rawQuery:e.rawQuery,callback:t})},afterQuery:function(e){this.store.getCount()&&(this.typeAhead&&this.doTypeAhead(e),e.rawQuery?this.picker&&!this.picker.getSelectionModel().hasSelection()&&this.doAutoSelect():this.doAutoSelect()),this.startCheckChangeTask()},loadPage:function(e,t){this.isPaging=!0,this.store.loadPage(e,Ext.apply({params:this.getParams(this.lastQuery)},t))},onPageChange:function(e,t){return this.loadPage(t),!1},getParams:function(e){var t={},i=this.queryParam;return i&&(t[i]=e),t},doAutoSelect:function(){var e,t,i=this.store,n=this.picker,r=0;n&&this.autoSelect&&0<i.getCount()&&(this.autoSelectLast&&(t=(e=n.getSelectionModel()).lastSelected)&&e.selected.length&&-1<i.indexOf(t)&&(r=t),n.getNavigationModel().setPosition(r))},doTypeAhead:function(e){this.typeAheadTask||(this.typeAheadTask=new Ext.util.DelayedTask(this.onTypeAhead,this)),(e.query.length>e.lastQuery.length||!Ext.String.startsWith(e.lastQuery,e.query))&&this.typeAheadTask.delay(this.typeAheadDelay)},onTriggerClick:function(e,t,i){var n,r=this;r.readOnly||r.disabled||(r.isExpanded?(r.collapse(),"mouse"!==i.pointerType&&t.getEl().focus()):i&&"keydown"===i.type&&i.altKey?(n=r.autoSelect,r.autoSelect=!1,r.expand(),r.autoSelect=n):"all"===r.triggerAction?r.doQuery(r.allQuery,!0):"last"===r.triggerAction?r.doQuery(r.lastQuery,!0):r.doQuery(r.getRawValue(),!1,!0))},onFieldMutation:function(e){var t=this,i=e.getKey(),n=i===e.BACKSPACE||i===e.DELETE,r=t.inputEl.dom.value,o=r.length;t.readOnly||r===t.lastMutatedValue&&!n||i===e.TAB||(t.lastMutatedValue=r,t.refreshEmptyText(),!o||"keyup"===e.type&&e.isSpecialKey()&&!n?(o||i&&!n||(++t.suspendCheckChange,t.multiSelect||(t.value=null,t.displayTplData=void 0),t.clearValueOnEmpty&&(t.valueCollection.beginUpdate(),t.pickerSelectionModel.deselectAll(),t.valueCollection.removeAll(),t.valueCollection.endUpdate()),t.collapse(),t.queryFilter&&t.clearLocalFilter(),t.lastQuery=null,--t.suspendCheckChange),t.callParent([e])):t.doQueryTask.delay(t.queryDelay))},doDestroy:function(){this.doQueryTask.cancel(),this.typeAheadTask&&(this.typeAheadTask.cancel(),this.typeAheadTask=null),this.bindStore(null),Ext.destroy(this.altArrowKeyNav,this.valueCollection),this.callParent()},onAdded:function(){this.callParent(arguments),this.picker&&(this.picker.ownerCt=this.up("[floating]"),this.picker.registerWithOwnerCt())},createPicker:function(){var e,t=this,i=Ext.apply({xtype:"boundlist",id:t.id+"-picker",pickerField:t,selectionModel:t.pickerSelectionModel,floating:!0,hidden:!0,store:t.getPickerStore(),displayField:t.displayField,preserveScrollOnRefresh:!0,pageSize:t.pageSize,tpl:t.tpl,ariaSelectable:t.ariaSelectable},t.listConfig,t.defaultListConfig);return e=t.picker=Ext.widget(i),t.pageSize&&e.pagingToolbar.on("beforechange",t.onPageChange,t),e.initialConfig.maxHeight||e.on({beforeshow:t.onBeforePickerShow,scope:t}),e.getSelectionModel().on({beforeselect:t.onBeforeSelect,beforedeselect:t.onBeforeDeselect,focuschange:t.onFocusChange,scope:t}),e.getNavigationModel().navigateOnSpace=!1,e},getPickerStore:function(){return this.store},onBeforePickerShow:function(e){var t=this.getPosition()[1]-Ext.getBody().getScroll().top,i=Ext.Element.getViewportHeight()-t-this.getHeight();e.maxHeight=Math.max(t,i)-5},onBeforeSelect:function(e,t,i){return this.fireEvent("beforeselect",this,t,i)},onBeforeDeselect:function(e,t,i){return this.fireEvent("beforedeselect",this,t,i)},onFocusChange:function(e,t,i){var n,r=this.picker,o=this.inputEl;i&&((n=r.getNodeByRecord(i))?(n.id||(n.id=Ext.id()),o.dom.setAttribute("aria-activedescendant",n.id)):o.dom.removeAttribute("aria-activedescendant"))},getSelection:function(){var e=this.getPicker().getSelectionModel();return e.getSelection().length?e.getLastSelected():null},updateSelection:function(e){var t;this.ignoreNextSelection||(this.ignoreNextSelection=!0,t=this.getPicker().getSelectionModel(),e?(t.select(e),this.hasHadSelection=!0):t.deselectAll(),this.ignoreNextSelection=!1)},updateBindSelection:function(e,t){var i=null;this.ignoreNextSelection||(this.ignoreNextSelection=!0,t.length&&(i=e.getLastSelected(),this.hasHadSelection=!0),this.hasHadSelection&&this.setSelection(i),this.ignoreNextSelection=!1)},onValueCollectionBeginUpdate:Ext.emptyFn,onValueCollectionEndUpdate:function(){var e=this,t=e.store,i=e.valueCollection.getRange(),n=i[0],r=i.length;e.updateBindSelection(e.pickerSelectionModel,i),e.isSelectionUpdating()||(Ext.suspendLayouts(),e.lastSelection=i,r&&(e.lastSelectedRecords=i),e.updateValue(),r&&(!e.multiSelect&&t.contains(n)||e.collapseOnSelect||!t.getCount())&&(e.updatingValue=!0,e.collapse(),e.updatingValue=!1),Ext.resumeLayouts(!0),e.suspendCheckChange||(e.multiSelect||(i=n),e.fireEvent("select",e,i)))},isSelectionUpdating:function(){var e=this.pickerSelectionModel;return e.deselectingDuringSelect||e.refreshing},onExpand:function(){var e,t=this.getPicker(),i=t.getNavigationModel();i&&i.enable(),this.doAutoSelect(),(e=t.highlightedItem)&&(e.id||(e.id=Ext.id()),this.inputEl.dom.setAttribute("aria-activedescendant",e.id))},onCollapse:function(){var e=this.getPicker().getNavigationModel();e&&e.disable(),this.updatingValue&&this.doQueryTask.cancel(),this.inputEl.dom.removeAttribute("aria-activedescendant")},select:function(e,t){var i,n=this.picker;e&&e.isModel&&!0===t&&n&&(i=!n.getSelectionModel().isSelected(e)),i||this.suspendEvent("select"),this.setValue(e),this.resumeEvent("select")},findRecord:function(e,t){var i=this.store,n=i.findExact(e,t);return-1!==n&&i.getAt(n)},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(e){var t=this.store.byValue.get(e),i=!1;return t&&(i=t[0]||t),i},findRecordByDisplay:function(e){var t=this.store.byText.get(e),i=!1;return t&&(i=t[0]||t),i},addValue:function(e){if(null!=e)return this.doSetValue(e,!0)},setValue:function(e){var t,i,n=this;if(n.getDisplayField()||n.getDisplayTpl()||Ext.error.raise("Combobox must have either displayField or displayTpl"),n.hasFocus){if((i=(t=n.getBind())&&t.value)&&i.syncing){if(Ext.isEmpty(e)&&Ext.isEmpty(n.value)||e===n.value)return n;if(Ext.isArray(e)&&Ext.isArray(n.value)&&Ext.Array.equals(e,n.value))return n}}else n.lastSelectedRecords=null;return null!=e?n.doSetValue(e):(n.suspendEvent("select"),n.valueCollection.beginUpdate(),n.pickerSelectionModel.deselectAll(),n.valueCollection.endUpdate(),n.resumeEvent("select")),n},setRawValue:function(e){this.callParent([e]),this.lastMutatedValue=e},doSetValue:function(e,t){var i,n,r,o,a,s,l,d=this,u=d.getStore(),c=u.getModel(),h=[],f=[],g=d.autoLoadOnValue,p=0<u.getCount()||u.isLoaded(),m=u.hasPendingLoad(),x=g&&!p&&!m,y=d.forceSelection,v=d.pickerSelectionModel,E=d.displayField,b=d.valueField,C=E===b,S=u.isEmptyStore,w=d.lastSelection;if(t&&!d.multiSelect&&Ext.raise("Cannot add values to non multiSelect ComboBox"),(m||x||!p||S)&&(e.isModel||(d.value=t?Ext.Array.from(d.value).concat(e):e,d.setHiddenValue(d.value),d.setRawValue(C?e:""),C&&!Ext.isEmpty(e)&&d.inputEl&&d.emptyText&&d.inputEl.removeCls(d.emptyUICls)),x&&!S&&u.load(),!e.isModel||S))return d;for(i=0,n=(e=t?Ext.Array.from(d.value).concat(e):Ext.Array.from(e)).length;i<n;i++)(r=l=e[i])&&r.isModel||(r=(r=d.findRecordByValue(s=r))||d.valueCollection.find(b,s)),r||(y?d.valueNotFoundRecord&&(r=d.valueNotFoundRecord):!r&&l&&(o={},Ext.isObject(l)?(o[E]=l[E],o[b]=l[b]):(o[E]=l,b&&E!==b&&(o[b]=l)),r=new c(o))),r&&(h.push(r),f.push(r.get(b)));if(w)if((n=w.length)===h.length)for(i=0;!a&&i<n;i++)-1===Ext.Array.indexOf(d.lastSelection,h[i])&&(a=!0);else a=!0;else a=h.length;return a?(d.suspendEvent("select"),d.valueCollection.beginUpdate(),h.length?v.select(h,!1):v.deselectAll(),d.valueCollection.endUpdate(),d.resumeEvent("select")):d.updateValue(),d},updateValue:function(){var e,t,i,n=this,r=n.valueCollection.getRange(),o=r.length,a=[],s=n.displayTplData||(n.displayTplData=[]),l=n.inputEl;for(e=s.length=0;e<o;e++)t=r[e],s.push(n.getRecordDisplayData(t)),t!==n.valueNotFoundRecord&&a.push(t.get(n.valueField));n.setHiddenValue(a),n.value=n.multiSelect?a:a[0],Ext.isDefined(n.value)||(n.value=void 0),n.displayTplData=s,i=n.getDisplayValue(),n.setRawValue(i),n.refreshEmptyText(),n.checkChange(),!n.lastSelectedRecords&&r.length&&(n.lastSelectedRecords=r),l&&n.typeAhead&&n.hasFocus&&n.selectText(i.length)},setHiddenValue:function(e){var t,i,n,r,o,a,s=this.hiddenName;if(this.hiddenDataEl&&s){for(e=Ext.Array.from(e),r=(n=(i=this.hiddenDataEl.dom).childNodes)[0],o=e.length,a=n.length,!r&&0<o&&(this.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:s})),a=1,r=i.firstChild);o<a;)i.removeChild(n[0]),--a;for(;a<o;)i.appendChild(r.cloneNode(!0)),++a;for(t=0;t<o;t++)n[t].value=e[t]}},getDisplayValue:function(e){var t;return e=e||this.displayTplData,(t=null==(t=this.getDisplayTpl().apply(e))?"":String(t)).replace(this.newlineRe,"")},getRecordDisplayData:function(e){return e.data},getValue:function(){var e=this,t=e.getStore(),i=e.picker,n=e.getRawValue(),r=e.value;return t.isEmptyStore||e.getDisplayValue()===n||(e.displayTplData=void 0,i&&(e.valueCollection.suspendEvents(),i.getSelectionModel().deselectAll(),e.valueCollection.resumeEvents(),e.lastSelection=null),r=t.isLoaded()&&(e.multiSelect||e.forceSelection)?e.value=void 0:e.value=n),e.value=null==r?null:r,e.value},getSubmitValue:function(){var e=this.getValue();return Ext.isEmpty(e)&&(e=""),e},isEqual:function(e,t){var i,n,r=Ext.Array.from;if(e=r(e),t=r(t),(n=e.length)!==t.length)return!1;for(i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0},clearValue:function(){this.setValue(null)}}),Ext.define("Ext.picker.Month",{extend:"Ext.Component",alias:"widget.monthpicker",alternateClassName:"Ext.MonthPicker",requires:["Ext.XTemplate","Ext.util.ClickRepeater","Ext.Date","Ext.button.Button"],isMonthPicker:!0,focusable:!0,childEls:["bodyEl","prevEl","nextEl","monthEl","yearEl","buttons"],renderTpl:['<div id="{id}-bodyEl" data-ref="bodyEl" class="{baseCls}-body">','<div id="{id}-monthEl" data-ref="monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner">{.}</a>',"</div>","</tpl>","</div>",'<div id="{id}-yearEl" data-ref="yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" hidefocus="on" role="button"></a>',"</div>",'<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" hidefocus="on" role="button"></a>',"</div>","</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button">{.}</a>',"</div>","</tpl>","</div>",'<div class="'+Ext.baseCSSPrefix+'clear"></div>','<tpl if="showButtons">','<div id="{id}-buttons" data-ref="buttons" class="{baseCls}-buttons">{%',"var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;","okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;","okBtn.ownerCt = cancelBtn.ownerCt = me;","Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);","Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);","%}</div>","</tpl>","</div>"],okText:"OK",cancelText:"Cancel",baseCls:Ext.baseCSSPrefix+"monthpicker",showButtons:!0,footerButtonUI:"default",measureWidth:35,measureMaxHeight:20,smallCls:Ext.baseCSSPrefix+"monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,alignOnScroll:!1,initComponent:function(){var e=this;e.selectedCls=e.baseCls+"-selected",e.small&&e.addCls(e.smallCls),e.setValue(e.value),e.activeYear=e.getYear((new Date).getFullYear()-4,-4),e.showButtons&&(e.okBtn=new Ext.button.Button({ui:e.footerButtonUI,text:e.okText,handler:e.onOkClick,scope:e}),e.cancelBtn=new Ext.button.Button({ui:e.footerButtonUI,text:e.cancelText,handler:e.onCancelClick,scope:e})),e.callParent()},beforeRender:function(){var e=0,t=[],i=Ext.Date.getShortMonthName,n=this.monthOffset,r=this.monthMargin,o="";for(this.padding&&!this.width&&this.cacheWidth(),this.callParent();e<n;++e)t.push(i(e),i(e+n));Ext.isDefined(r)&&(o="margin: 0 "+r+"px;"),Ext.apply(this.renderData,{months:t,years:this.getYears(),showButtons:this.showButtons,monthStyle:o})},cacheWidth:function(){var e=this.parseBox(this.padding),t=Ext.getBody().createChild({cls:this.baseCls+" "+this.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;",html:"&nbsp;"});this.self.prototype.width=t.getWidth()+e.left+e.right,t.destroy()},afterRender:function(){var e=this,t=e.bodyEl;e.callParent(),e.up("[floating=true]")&&e.el.on("mousedown",e.onElClick,e,{translate:!1}),t.on({scope:e,click:"onBodyClick",dblclick:"onBodyClick"}),e.years=t.select("."+e.baseCls+"-year a"),e.months=t.select("."+e.baseCls+"-month a"),e.backRepeater=new Ext.util.ClickRepeater(e.prevEl,{handler:Ext.Function.bind(e.adjustYear,e,[-e.totalYears])}),e.prevEl.addClsOnOver(e.baseCls+"-yearnav-prev-over"),e.nextRepeater=new Ext.util.ClickRepeater(e.nextEl,{handler:Ext.Function.bind(e.adjustYear,e,[e.totalYears])}),e.nextEl.addClsOnOver(e.baseCls+"-yearnav-next-over"),e.updateBody(),Ext.isDefined(e.monthMargin)||(Ext.picker.Month.prototype.monthMargin=e.calculateMonthMargin())},calculateMonthMargin:function(){for(var e=this.months,t=e.first().getMargin("l");t&&this.getLargest()>this.measureMaxHeight;)--t,e.setStyle("margin","0 "+t+"px");return t},getLargest:function(e){var i=0;return this.months.each(function(e){var t=e.getHeight();i<t&&(i=t)}),i},setValue:function(e){var t,i=this,n=i.activeYear;return e?Ext.isDate(e)?i.value=[e.getMonth(),e.getFullYear()]:i.value=[e[0],e[1]]:i.value=[null,null],i.rendered&&(null!==(t=i.value[1])&&(t<n||t>n+i.yearOffset)&&(i.activeYear=t-i.yearOffset+1),i.updateBody()),i},getValue:function(){return this.value},hasSelection:function(){var e=this.value;return null!==e[0]&&null!==e[1]},getYears:function(){for(var e=this.yearOffset,t=this.activeYear,i=t+e,n=t,r=[];n<i;++n)r.push(n,n+e);return r},updateBody:function(){var e,t,i,n,r,o=this.years,a=this.months,s=this.getYears(),l=this.selectedCls,d=this.getYear(null),u=this.value[0],c=this.monthOffset;if(this.rendered){for(o.removeCls(l),a.removeCls(l),n=(t=o.elements).length,i=0;i<n;i++)r=Ext.fly(t[i]),e=s[i],(r.dom.innerHTML=e)===d&&r.addCls(l);null!==u&&(u<c?u*=2:u=2*(u-c)+1,a.item(u).addCls(l))}},getYear:function(e,t){var i=this.value[1];return t=t||0,null===i?e:i+t},onElClick:function(e){e.stopEvent()},onBodyClick:function(e,t){var i="dblclick"===e.type;e.getTarget("."+this.baseCls+"-month")?(e.stopEvent(),this.onMonthClick(t,i)):e.getTarget("."+this.baseCls+"-year")&&(e.stopEvent(),this.onYearClick(t,i))},adjustYear:function(e){"number"!=typeof e&&(e=this.totalYears),this.activeYear+=e,this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(e,t){var i=this;i.value[0]=i.resolveOffset(i.months.indexOf(e),i.monthOffset),i.updateBody(),i.fireEvent("month"+(t?"dbl":"")+"click",i,i.value),i.fireEvent("select",i,i.value)},onYearClick:function(e,t){var i=this;i.value[1]=i.activeYear+i.resolveOffset(i.years.indexOf(e),i.yearOffset),i.updateBody(),i.fireEvent("year"+(t?"dbl":"")+"click",i,i.value),i.fireEvent("select",i,i.value)},resolveOffset:function(e,t){return e%2==0?e/2:t+Math.floor(e/2)},doDestroy:function(){Ext.destroy(this.backRepeater,this.nextRepeater,this.okBtn,this.cancelBtn),this.callParent()},privates:{finishRenderChildren:function(){this.callParent(arguments),this.showButtons&&(this.okBtn.finishRender(),this.cancelBtn.finishRender())}}}),Ext.define("Ext.picker.Date",{extend:"Ext.Component",alias:"widget.datepicker",alternateClassName:"Ext.DatePicker",requires:["Ext.XTemplate","Ext.button.Button","Ext.button.Split","Ext.util.ClickRepeater","Ext.util.KeyNav","Ext.fx.Manager","Ext.picker.Month"],todayText:"Today",ariaTitle:"Date Picker: {0}",ariaTitleDateFormat:"F d",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",ariaMinText:"This date is before the minimum date",maxText:"This date is after the maximum date",ariaMaxText:"This date is after the maximum date",disabledDaysText:"Disabled",ariaDisabledDaysText:"This day of week is disabled",disabledDatesText:"Disabled",ariaDisabledDatesText:"This date is disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",monthYearFormat:"F Y",showToday:!0,disableAnim:!1,baseCls:Ext.baseCSSPrefix+"datepicker",longDayFormat:"F d, Y",footerButtonUI:"default",isDatePicker:!0,alignOnScroll:!1,ariaRole:"region",focusable:!0,childEls:["innerEl","eventEl","prevEl","nextEl","middleBtnEl","footerEl"],border:!0,renderTpl:['<div id="{id}-innerEl" data-ref="innerEl" role="presentation">','<div class="{baseCls}-header">','<div id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-prev {baseCls}-arrow" role="presentation" title="{prevText}"></div>','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">{%this.renderMonthBtn(values, out)%}</div>','<div id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-next {baseCls}-arrow" role="presentation" title="{nextText}"></div>',"</div>",'<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" cellspacing="0" tabindex="0" aria-readonly="true">',"<thead>",'<tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr>","</thead>","<tbody>",'<tr role="row">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell">','<div hidefocus="on" class="{parent.baseCls}-date"></div>',"</td>","</tpl>","</tr>","</tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</tpl>",'<div id="{id}-todayText" class="'+Ext.baseCSSPrefix+'hidden-clip">{todayText}.</div>','<div id="{id}-ariaMinText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaMinText}.</div>','<div id="{id}-ariaMaxText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaMaxText}.</div>','<div id="{id}-ariaDisabledDaysText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaDisabledDaysText}.</div>','<div id="{id}-ariaDisabledDatesText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaDisabledDatesText}.</div>',"</div>",{firstInitial:function(e){return Ext.picker.Date.prototype.getDayInitial(e)},isEndOfWeek:function(e){return--e%7==0&&0!==e?'</tr><tr role="row">':""},renderTodayBtn:function(e,t){Ext.DomHelper.generateMarkup(e.$comp.todayBtn.getRenderTree(),t)},renderMonthBtn:function(e,t){Ext.DomHelper.generateMarkup(e.$comp.monthBtn.getRenderTree(),t)}}],initHour:12,numDays:42,initComponent:function(){var e=this,t=Ext.Date.clearTime;e.selectedCls=e.baseCls+"-selected",e.disabledCellCls=e.baseCls+"-disabled",e.prevCls=e.baseCls+"-prevday",e.activeCls=e.baseCls+"-active",e.cellCls=e.baseCls+"-cell",e.nextCls=e.baseCls+"-prevday",e.todayCls=e.baseCls+"-today",e.defaultValue=Ext.isDate(e.defaultValue)?e.defaultValue:new Date,e.format||(e.format=Ext.Date.defaultFormat),e.dayNames||(e.dayNames=Ext.Date.dayNames),null==e.startDay&&(e.startDay=Ext.Date.firstDayOfWeek),e.dayNames=e.dayNames.slice(e.startDay).concat(e.dayNames.slice(0,e.startDay)),e.callParent(),e.value=e.value?t(e.value,!0):t(e.defaultValue),e.initDisabledDays()},getRefOwner:function(){return this.pickerField||this.callParent()},getRefItems:function(){var e=[],t=this.monthBtn,i=this.todayBtn;return t&&e.push(t),i&&e.push(i),e},beforeRender:function(){var e=this,t=Ext.String.htmlEncode,i=new Array(e.numDays),n=Ext.Date.format(new Date,e.format);e.padding&&!e.width&&e.cacheWidth(),e.monthBtn=new Ext.button.Button({ownerCt:e,ownerLayout:e.getComponentLayout(),text:"",tooltip:e.monthYearText,tabIndex:-1,ariaRole:"presentation",showEmptyMenu:!1,menu:[],listeners:{click:e.doShowMonthPicker,scope:e}}),e.showToday&&(e.todayBtn=new Ext.button.Button({ui:e.footerButtonUI,ownerCt:e,ownerLayout:e.getComponentLayout(),text:Ext.String.format(e.todayText,n),tooltip:Ext.String.format(e.todayTip,n),tooltipType:"title",tabIndex:-1,ariaRole:"presentation",handler:e.selectToday,scope:e})),e.callParent(),Ext.applyIf(e,{renderData:{}}),Ext.apply(e.renderData,{dayNames:e.dayNames,showToday:e.showToday,prevText:t(e.prevText),nextText:t(e.nextText),todayText:t(e.todayText),ariaMinText:t(e.ariaMinText),ariaMaxText:t(e.ariaMaxText),ariaDisabledDaysText:t(e.ariaDisabledDaysText),ariaDisabledDatesText:t(e.ariaDisabledDatesText),days:i}),e.protoEl.unselectable()},cacheWidth:function(){var e=this.parseBox(this.padding),t=Ext.getBody().createChild({cls:this.baseCls+" "+this.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;"});this.self.prototype.width=t.getWidth()+e.left+e.right,t.destroy()},onRender:function(e,t){var i=this,n="div."+i.baseCls+"-date";i.callParent(arguments),i.cells=i.eventEl.select("tbody td"),i.textNodes=i.eventEl.query(n),i.eventEl.set({"aria-labelledby":i.monthBtn.id}),i.mon(i.eventEl,{scope:i,mousewheel:i.handleMouseWheel,click:{fn:i.handleDateClick,delegate:n}})},initEvents:function(){var e=this;e.callParent(),e.pickerField&&e.el.on("mousedown",e.onMouseDown,e),e.monthBtn.el.on("mousedown",e.onMouseDown,e),e.prevRepeater=new Ext.util.ClickRepeater({el:e.prevEl,handler:e.showPrevMonth,scope:e,mousedownStopEvent:!0}),e.nextRepeater=new Ext.util.ClickRepeater({el:e.nextEl,handler:e.showNextMonth,scope:e,mousedownStopEvent:!0}),e.keyNav=new Ext.util.KeyNav(Ext.apply({target:e.eventEl,scope:e,left:e.onLeftKey,right:e.onRightKey,up:e.onUpKey,down:e.onDownKey,pageUp:e.onPageUpKey,pageDown:e.onPageDownKey,home:e.onHomeKey,end:e.onEndKey,enter:e.onEnterKey,space:e.onSpaceKey,tab:function(e){return this.handleTabKey(e),!0}},e.keyNavConfig)),e.disabled&&e.syncDisabled(!0,!0),e.minDate&&e.minDate>e.value?e.value=e.minDate:e.maxDate&&e.maxDate<e.value&&(e.value=e.maxDate),e.update(e.value)},onMouseDown:function(e){e.preventDefault()},handleTabKey:function(e){var t=this,i=t.getSelectedDate(t.activeDate),n=t.handler;t.disabled||!i.dateValue||Ext.fly(i.parentNode).hasCls(t.disabledCellCls)?t.fireEventArgs("tabout",[t]):(t.setValue(new Date(i.dateValue)),t.fireEvent("select",t,t.value),n&&Ext.callback(n,t.scope,[t,t.value],null,t,t),t.pickerField&&t.pickerField.isEditorComponent&&e.preventDefault(),t.onSelect())},getSelectedDate:function(e){var t,i,n=e.getTime(),r=this.cells,o=this.selectedCls,a=r.elements,s=a.length;for(r.removeCls(o),i=0;i<s;i++)if((t=a[i].firstChild).dateValue===n)return t;return null},initDisabledDays:function(){var e,t,i,n,r=this.disabledDates,o="(?:";if(!this.disabledDatesRE&&r){for(e=r.length-1,i=r.length,t=0;t<i;t++)n=r[t],o+=Ext.isDate(n)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(n,this.format))+"$":n,t!==e&&(o+="|");this.disabledDatesRE=new RegExp(o+")")}},setDisabledDates:function(e){return Ext.isArray(e)?(this.disabledDates=e,this.disabledDatesRE=null):this.disabledDatesRE=e,this.initDisabledDays(),this.update(this.value,!0),this},setDisabledDays:function(e){return this.disabledDays=e,this.update(this.value,!0)},setMinDate:function(e){return this.minDate=e,this.update(this.value,!0)},setMaxDate:function(e){return this.maxDate=e,this.update(this.value,!0)},setValue:function(e){return this.value=Ext.Date.clearTime(e||this.defaultValue,!0),this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(e){return e.substr(0,1)},onEnable:function(){this.callParent(),this.syncDisabled(!1,!0),this.update(this.activeDate)},onShow:function(){this.callParent(),this.syncDisabled(!1),this.pickerField&&(this.startValue=this.pickerField.getValue())},onHide:function(){this.callParent(),this.syncDisabled(!0)},onDisable:function(){this.callParent(),this.syncDisabled(!0,!0)},getActive:function(){return this.activeDate||this.value},runAnimation:function(e){var t=this.monthPicker,i={duration:200,callback:function(){t.setVisible(!e)}};e?t.el.slideOut("t",i):t.el.slideIn("t",i)},hideMonthPicker:function(e){var t=this.monthPicker;return t&&t.isVisible()&&(this.focus(),this.shouldAnimate(e)?this.runAnimation(!0):t.hide()),this},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(e){var t,i=this.el;return this.rendered&&!this.disabled&&((t=this.createMonthPicker()).isVisible()||(t.setValue(this.getActive()),t.setSize(i.getSize()),t.floatParent=null,t.setPosition(-i.getBorderWidth("l"),-i.getBorderWidth("t")),this.shouldAnimate(e)?this.runAnimation(!1):t.show())),this},shouldAnimate:function(e){return Ext.isDefined(e)?e:!this.disableAnim},createMonthPicker:function(){var e=this,t=e.monthPicker;return t||(e.monthPicker=t=new Ext.picker.Month({renderTo:e.el,ownerCmp:e,floating:!0,padding:e.padding,shadow:!1,small:!1===e.showToday,footerButtonUI:e.footerButtonUI,listeners:{scope:e,cancelclick:e.onCancelClick,okclick:e.onOkClick,yeardblclick:e.onOkClick,monthdblclick:e.onOkClick}}),e.disableAnim||t.el.setStyle("display","none"),t.hide(),e.on("beforehide",e.doHideMonthPicker,e)),t},onLeftKey:function(e){e.ctrlKey?this.showPrevMonth():this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,-1)),e.preventDefault()},onRightKey:function(e){e.ctrlKey?this.showNextMonth():this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,1)),e.preventDefault()},onUpKey:function(e){e.ctrlKey?this.showNextYear():this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,-7)),e.preventDefault()},onDownKey:function(e){e.ctrlKey?this.showPrevYear():this.update(Ext.Date.add(this.activeDate,Ext.Date.DAY,7)),e.preventDefault()},onPageUpKey:function(e){e.ctrlKey?this.showPrevYear():this.showPrevMonth(),e.preventDefault()},onPageDownKey:function(e){e.ctrlKey?this.showNextYear():this.showNextMonth(),e.preventDefault()},onHomeKey:function(e){this.update(Ext.Date.getFirstDateOfMonth(this.activeDate)),e.preventDefault()},onEndKey:function(e){this.update(Ext.Date.getLastDateOfMonth(this.activeDate)),e.preventDefault()},onEnterKey:function(e){this.handleDateClick(e,this.activeCell.firstChild)},onSpaceKey:function(e){var t,i,n,r=this.pickerField;this.setValue(new Date(this.activeCell.firstChild.dateValue)),r&&(t=this.startValue,i=this.value,(n=r.getValue())&&t&&n.getTime()===i.getTime()?r.setValue(t):r.setValue(i)),e.preventDefault()},onOkClick:function(e,t){var i=t[0],n=t[1],r=new Date(n,i,this.getActive().getDate());r.getMonth()!==i&&(r=Ext.Date.getLastDateOfMonth(new Date(n,i,1))),this.setValue(r),this.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate),this.hideMonthPicker()},showPrevMonth:function(e){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(e){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(e){var t;e.stopEvent(),this.disabled||(0<(t=e.getWheelDelta())?this.showPrevMonth():t<0&&this.showNextMonth())},handleDateClick:function(e,t){var i=this,n=i.handler;e.stopEvent(),i.disabled||!t.dateValue||Ext.fly(t.parentNode).hasCls(i.disabledCellCls)||(i.setValue(new Date(t.dateValue)),i.fireEvent("select",i,i.value),n&&Ext.callback(n,i.scope,[i,i.value],null,i,i),i.onSelect())},onSelect:function(){this.hideOnSelect&&this.hide()},selectToday:function(){var e=this,t=e.todayBtn,i=e.handler;return t&&!t.disabled&&(e.setValue(Ext.Date.clearTime(new Date)),e.fireEvent("select",e,e.value),i&&Ext.callback(i,e.scope,[e,e.value],null,e,e),e.onSelect()),e},selectedUpdate:function(e){var t,i,n=this,r=e.getTime(),o=n.cells,a=n.selectedCls,s=o.getCount();for(n.eventEl.dom.setAttribute("aria-busy","true"),(i=n.activeCell)&&(Ext.fly(i).removeCls(a),i.setAttribute("aria-selected",!1)),t=0;t<s;t++)if(i=o.item(t),n.textNodes[t].dateValue===r){n.activeCell=i.dom,n.eventEl.dom.setAttribute("aria-activedescendant",i.dom.id),i.dom.setAttribute("aria-selected",!0),i.addCls(a),n.fireEvent("highlightitem",n,i);break}n.eventEl.dom.removeAttribute("aria-busy")},fullUpdate:function(e){var t,r,i,n,o,a,s,l,d,u=this,c=u.cells.elements,h=u.textNodes,f=u.disabledCellCls,g=Ext.Date,p=0,m=0,x=+g.clearTime(e,!0),y=+g.clearTime(new Date),v=u.minDate?g.clearTime(u.minDate,!0):Number.NEGATIVE_INFINITY,E=u.maxDate?g.clearTime(u.maxDate,!0):Number.POSITIVE_INFINITY,b=u.disabledDatesRE,C=u.disabledDatesText,S=!!u.disabledDays&&u.disabledDays.join(""),w=u.disabledDaysText,T=u.format,P=g.getDaysInMonth(e),k=g.getFirstDateOfMonth(e).getDay()-u.startDay,I=g.add(e,g.MONTH,-1),R=u.ariaTitleDateFormat;for(k<0&&(k+=7),P+=k,t=g.getDaysInMonth(I)-k,r=new Date(I.getFullYear(),I.getMonth(),t,u.initHour),u.showToday&&(i=(n=g.clearTime(new Date))<v||E<n||b&&T&&b.test(g.dateFormat(n,T))||S&&-1!==S.indexOf(n.getDay()),u.todayDisabled=i,u.disabled||u.todayBtn.setDisabled(i)),o=function(e,t){var i=c[e],n=[];i.hasAttribute("id")||i.setAttribute("id",u.id+"-cell-"+e),d=+g.clearTime(r,!0),i.firstChild.dateValue=d,i.setAttribute("aria-label",g.format(r,R)),i.removeAttribute("aria-describedby"),i.removeAttribute("data-qtip"),d==y&&(t+=" "+u.todayCls,n.push(u.id+"-todayText")),d==x?(u.activeCell=i,u.eventEl.dom.setAttribute("aria-activedescendant",i.id),i.setAttribute("aria-selected",!0),t+=" "+u.selectedCls,u.fireEvent("highlightitem",u,i)):i.setAttribute("aria-selected",!1),d<v?(t+=" "+f,n.push(u.id+"-ariaMinText"),i.setAttribute("data-qtip",u.minText)):E<d?(t+=" "+f,n.push(u.id+"-ariaMaxText"),i.setAttribute("data-qtip",u.maxText)):S&&-1!==S.indexOf(r.getDay())?(i.setAttribute("data-qtip",w),n.push(u.id+"-ariaDisabledDaysText"),t+=" "+f):b&&T&&(l=g.dateFormat(r,T),b.test(l)&&(i.setAttribute("data-qtip",C.replace("%0",l)),n.push(u.id+"-ariaDisabledDatesText"),t+=" "+f)),n.length&&i.setAttribute("aria-describedby",n.join(" ")),i.className=t+" "+u.cellCls},u.eventEl.dom.setAttribute("aria-busy","true");p<u.numDays;++p)s=p<k?(a=++t,u.prevCls):P<=p?(a=++m,u.nextCls):(a=p-k+1,u.activeCls),h[p].innerHTML=a,r.setDate(r.getDate()+1),o(p,s);u.eventEl.dom.removeAttribute("aria-busy"),u.monthBtn.setText(Ext.Date.format(e,u.monthYearFormat))},update:function(e,t){var i=this.activeDate;return this.rendered&&(this.activeDate=e,!t&&i&&this.el&&i.getMonth()===e.getMonth()&&i.getFullYear()===e.getFullYear()?this.selectedUpdate(e,i):this.fullUpdate(e,i)),this},doDestroy:function(){this.rendered&&Ext.destroy(this.keyNav,this.monthPicker,this.monthBtn,this.nextRepeater,this.prevRepeater,this.todayBtn,this.todayElSpan),this.callParent()},privates:{finishRenderChildren:function(){this.callParent(),this.monthBtn.finishRender(),this.showToday&&this.todayBtn.finishRender()},getFocusEl:function(){return this.eventEl},syncDisabled:function(e,t){var i=this.keyNav,n=this.todayBtn;i&&(i.setDisabled(e),this.prevRepeater.setDisabled(e),this.nextRepeater.setDisabled(e)),t&&n&&n.setDisabled(this.todayDisabled||e)}}}),Ext.define("Ext.form.field.Date",{extend:"Ext.form.field.Picker",alias:"widget.datefield",requires:["Ext.picker.Date"],alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",ariaFormat:"M j Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",ariaDisabledDaysText:"This day of week is disabled",disabledDatesText:"Disabled",ariaDisabledDatesText:"This date cannot be selected",minText:"The date in this field must be equal to or after {0}",ariaMinText:"The date must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",ariaMaxText:"The date must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",formatText:"Expected date format {0}.",triggerCls:Ext.baseCSSPrefix+"form-date-trigger",showToday:!0,useStrict:void 0,initTime:"12",initTimeFormat:"H",matchFieldWidth:!1,startDay:0,valuePublishEvent:["select","blur"],componentCls:Ext.baseCSSPrefix+"form-field-date",ariaRole:"combobox",rawDate:null,rawDateText:"",validateOnFocusLeave:!0,initComponent:function(){var e,t,i=Ext.isString;e=this.minValue,t=this.maxValue,i(e)&&(this.minValue=this.parseDate(e)),i(t)&&(this.maxValue=this.parseDate(t)),this.disabledDatesRE=null,this.initDisabledDays(),this.callParent()},getSubTplData:function(e){var t,i;return t=this.callParent([e]),this.ariaStaticRoles[this.ariaRole]||(i=t.ariaElAttributes)&&(i["aria-owns"]=this.id+"-inputEl "+this.id+"-picker-eventEl",i["aria-autocomplete"]="none"),t},initValue:function(){var e=this,t=e.value;Ext.isString(t)?(e.value=e.rawToValue(t),e.rawDate=e.value,e.rawDateText=e.parseDate(e.value)):(e.value=t||null,e.rawDate=e.value,e.rawDateText=e.value?e.parseDate(e.value):""),e.callParent()},initDisabledDays:function(){if(this.disabledDates){var e,t,i=this.disabledDates,n=i.length-1,r="(?:",o=i.length;for(e=0;e<o;e++)t=i[e],r+=Ext.isDate(t)?"^"+Ext.String.escapeRegex(t.dateFormat(this.format))+"$":t,e!==n&&(r+="|");this.disabledDatesRE=new RegExp(r+")")}},setDisabledDates:function(e){var t=this.picker;this.disabledDates=e,this.initDisabledDays(),t&&t.setDisabledDates(this.disabledDatesRE)},setDisabledDays:function(e){var t=this.picker;this.disabledDays=e,t&&t.setDisabledDays(e)},setMinValue:function(e){var t=this.picker,i=Ext.isString(e)?this.parseDate(e):e;this.minValue=i,t&&(t.minText=Ext.String.format(this.minText,this.formatDate(this.minValue)),t.setMinDate(i))},setMaxValue:function(e){var t=this.picker,i=Ext.isString(e)?this.parseDate(e):e;this.maxValue=i,t&&(t.maxText=Ext.String.format(this.maxText,this.formatDate(this.maxValue)),t.setMaxDate(i))},getErrors:function(e){e=0<arguments.length?e:this.formatDate(this.processRawValue(this.getRawValue()));var t,i,n,r,o=this,a=Ext.String.format,s=Ext.Date.clearTime,l=o.callParent([e]),d=o.disabledDays,u=o.disabledDatesRE,c=o.minValue,h=o.maxValue,f=d?d.length:0,g=0;if(null===e||e.length<1)return l;if(t=e,!(e=o.parseDate(e)))return l.push(a(o.invalidText,t,Ext.Date.unescapeFormat(o.format))),l;if(r=e.getTime(),c&&r<s(c).getTime()&&l.push(a(o.minText,o.formatDate(c))),h&&r>s(h).getTime()&&l.push(a(o.maxText,o.formatDate(h))),d)for(n=e.getDay();g<f;g++)if(n===d[g]){l.push(o.disabledDaysText);break}return i=o.formatDate(e),u&&u.test(i)&&l.push(a(o.disabledDatesText,i)),l},rawToValue:function(e){return e===this.rawDateText?this.rawDate:this.parseDate(e)||e||null},valueToRaw:function(e){return this.formatDate(this.parseDate(e))},setValue:function(e){var t,i=this,n=Ext.Date,r=i.lastValue;i.lastValue=i.rawDateText,i.lastDate=i.rawDate,Ext.isDate(e)?(t=i.rawDate=e,i.rawDateText=i.formatDate(e)):(t=i.rawDate=i.rawToValue(e),i.rawDateText=i.formatDate(e),t===e&&(t=i.rawDate=null,i.rawDateText="")),t&&!n.formatContainsHourInfo(i.format)&&(i.rawDate=n.clearTime(t,!0)),i.callParent(arguments),!i.destroyed&&i.didValueChange(i.rawDate,r)&&i.fireEvent("select",i,e)},checkChange:function(){var e,t,i,n=this;n.suspendCheckChange||(e=n.getRawValue(),t=n.lastValue,i=n.lastDate,!n.destroyed&&n.didValueChange(e,t)&&(n.rawDate=n.rawToValue(e),n.rawDateText=n.formatDate(e),n.lastValue=e,n.lastDate=n.rawDate,n.fireEvent("change",n,n.getValue(),i),n.onChange(e,t)))},safeParse:function(e,t){var i,n=Ext.Date,r=null,o=this.useStrict;return n.formatContainsHourInfo(t)?r=n.parse(e,t,o):(i=n.parse(e+" "+this.initTime,t+" "+this.initTimeFormat,o))&&(r=n.clearTime(i)),r},getSubmitValue:function(){var e=this.submitFormat||this.format,t=this.rawDate;return t?Ext.Date.format(t,e):""},getValue:function(){return this.rawDate||null},setRawValue:function(e){this.callParent([e]),this.rawDate=Ext.isDate(e)?e:this.rawToValue(e),this.rawDateText=this.formatDate(e)},parseDate:function(e){if(!e||Ext.isDate(e))return e;var t,i=this.safeParse(e,this.format),n=this.altFormats,r=this.altFormatsArray,o=0;if(!i&&n)for(t=(r=r||n.split("|")).length;o<t&&!i;++o)i=this.safeParse(e,r[o]);return i},formatDate:function(e,t){return Ext.isDate(e)?Ext.Date.dateFormat(e,t||this.format):e},createPicker:function(){var e=this,t=Ext.String.format;return new Ext.picker.Date({id:e.id+"-picker",pickerField:e,floating:!0,preventRefocus:!0,hidden:!0,minDate:e.minValue,maxDate:e.maxValue,disabledDatesRE:e.disabledDatesRE,disabledDatesText:e.disabledDatesText,ariaDisabledDatesText:e.ariaDisabledDatesText,disabledDays:e.disabledDays,disabledDaysText:e.disabledDaysText,ariaDisabledDaysText:e.ariaDisabledDaysText,format:e.format,showToday:e.showToday,startDay:e.startDay,minText:t(e.minText,e.formatDate(e.minValue)),ariaMinText:t(e.ariaMinText,e.formatDate(e.minValue,e.ariaFormat)),maxText:t(e.maxText,e.formatDate(e.maxValue)),ariaMaxText:t(e.ariaMaxText,e.formatDate(e.maxValue,e.ariaFormat)),listeners:{scope:e,select:e.onSelect,tabout:e.onTabOut},keyNavConfig:{esc:function(){e.inputEl.focus(),e.collapse()}}})},createInitialDate:function(e){var t=this.minValue,i=this.maxValue;return e=e||new Date,t&&e<t?e=t:i&&i<e&&(e=i),e},onSelect:function(e,t){this.setValue(t),this.rawDate=t,this.onTabOut(e)},onTabOut:function(e){this.inputEl.focus(),this.collapse()},onExpand:function(){var e=this.rawDate;this.picker.setValue(Ext.isDate(e)?e:this.createInitialDate())},onBlur:function(e){var t=this.rawToValue(this.getRawValue());""!==t&&!Ext.isDate(t)||this.setValue(t),this.callParent([e])}}),Ext.define("Ext.form.field.Display",{extend:"Ext.form.field.Base",alias:"widget.displayfield",alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],requires:["Ext.util.Format","Ext.XTemplate"],fieldSubTpl:['<div id="{id}" data-ref="inputEl" role="textbox" aria-readonly="true"',' aria-labelledby="{cmpId}-labelEl" {inputAttrTpl}',' tabindex="<tpl if="tabIdx != null">{tabIdx}<tpl else>-1</tpl>"','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {fieldCls}-{ui}">{value}</div>',{compiled:!0,disableFormats:!0}],ariaRole:void 0,focusable:!1,skipLabelForAttribute:!0,readOnly:!0,fieldCls:Ext.baseCSSPrefix+"form-display-field",fieldBodyCls:Ext.baseCSSPrefix+"form-display-field-body",htmlEncode:!1,noWrap:!1,validateOnChange:!1,initEvents:Ext.emptyFn,submitValue:!1,getValue:function(){return this.value},valueToRaw:function(e){return e||0===e||!1===e?e:""},isDirty:function(){return!1},isValid:Ext.returnTrue,validate:Ext.returnTrue,getRawValue:function(){return this.rawValue},setRawValue:function(e){return e=Ext.valueFrom(e,""),this.rawValue=e,this.rendered&&(this.inputEl.dom.innerHTML=this.getDisplayValue(),this.updateLayout()),e},getDisplayValue:function(){var e=this.getRawValue(),t=this.renderer;return t?Ext.callback(t,this.scope,[e,this],0,this):this.htmlEncode?Ext.util.Format.htmlEncode(e):e},getSubTplData:function(e){var t=this.callParent(arguments);return t.value=this.getDisplayValue(),t}}),Ext.define("Ext.form.field.FileButton",{extend:"Ext.button.Button",alias:"widget.filebutton",childEls:["fileInputEl"],inputCls:Ext.baseCSSPrefix+"form-file-input",cls:Ext.baseCSSPrefix+"form-file-btn",preventDefault:!1,tabIndex:void 0,useTabGuards:Ext.isIE||Ext.isEdge,promptCalled:!1,autoEl:{tag:"div",unselectable:"on"},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" unselectable="on" ','<tpl if="accept != null">accept="{accept}"</tpl>','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>',">"],keyMap:null,ariaEl:"fileInputEl",getAfterMarkup:function(e){return this.lookupTpl("afterTpl").apply(e)},getTemplateArgs:function(){var e;return(e=this.callParent()).inputCls=this.inputCls,e.inputName=this.inputName||this.id,e.tabIndex=null!=this.tabIndex?this.tabIndex:null,e.accept=this.accept||null,e.role=this.ariaRole,e},afterRender:function(){var e,t,i=this;i.callParent(arguments),e={scope:i,mousedown:i.handlePrompt,keydown:i.handlePrompt,change:i.fireChange,focus:i.onFileFocus,blur:i.onFileBlur,destroyable:!0},i.useTabGuards&&((t={tag:"span",role:"button","aria-hidden":"true","data-tabguard":"true",style:{height:0,width:0}}).tabIndex=null!=i.tabIndex?i.tabIndex:0,i.beforeInputGuard=i.el.createChild(t,i.fileInputEl),i.afterInputGuard=i.el.createChild(t),i.afterInputGuard.insertAfter(i.fileInputEl),i.beforeInputGuard.on("focus",i.onInputGuardFocus,i),i.afterInputGuard.on("focus",i.onInputGuardFocus,i),e.keydown=i.onFileInputKeydown),i.fileInputElListeners=i.fileInputEl.on(e)},doDestroy:function(){this.fileInputElListeners&&this.fileInputElListeners.destroy(),this.beforeInputGuard&&(this.beforeInputGuard.destroy(),this.beforeInputGuard=null),this.afterInputGuard&&(this.afterInputGuard.destroy(),this.afterInputGuard=null),this.callParent()},fireChange:function(e){this.fireEvent("change",this,e,this.fileInputEl.dom.value)},createFileInput:function(e){var t,i,n=this;(t=n.fileInputEl=n.el.createChild({name:n.inputName||n.id,id:e?void 0:n.id+"-fileInputEl",cls:n.inputCls+(n.getInherited().rtl?" "+Ext.baseCSSPrefix+"rtl":""),tag:"input",type:"file",size:1,unselectable:"on"},n.afterInputGuard)).dom.setAttribute("data-componentid",n.id),null!=n.tabIndex&&n.setTabIndex(n.tabIndex),n.accept&&t.dom.setAttribute("accept",n.accept),i={scope:n,change:n.fireChange,mousedown:n.handlePrompt,keydown:n.handlePrompt,focus:n.onFileFocus,blur:n.onFileBlur},n.useTabGuards&&(i.keydown=n.onFileInputKeydown),t.on(i)},handlePrompt:function(e){var t;"keydown"===e.type?(t=e.getKey(),this.promptCalled=!Ext.isIE&&t===e.ENTER||t===e.SPACE):this.promptCalled=!0},onFileFocus:function(e){var t=this.ownerCt;this.hasFocus||this.onFocus(e),t&&!t.hasFocus&&t.onFocus(e)},onFileBlur:function(e){var t=this.ownerCt;if(this.promptCalled)return this.promptCalled=!1,void e.preventDefault();this.hasFocus&&this.onBlur(e),t&&t.hasFocus&&t.onBlur(e)},onInputGuardFocus:function(e){this.fileInputEl.focus()},onFileInputKeydown:function(e){var t,i=e.getKey();return i===e.TAB?(t=e.shiftKey?this.beforeInputGuard:this.afterInputGuard)&&(t.suspendEvent("focus"),t.focus(),Ext.defer(function(){t.resumeEvent("focus")},1)):i!==e.ENTER&&i!==e.SPACE||this.handlePrompt(e),!0},reset:function(e){e&&this.fileInputEl.destroy(),this.createFileInput(!e),e&&(this.ariaEl=this.fileInputEl)},restoreInput:function(e){this.fileInputEl.destroy(),e=Ext.get(e),this.useTabGuards?e.insertBefore(this.afterInputGuard):this.el.appendChild(e),this.fileInputEl=e},onDisable:function(){this.callParent(),this.fileInputEl.dom.disabled=!0},onEnable:function(){this.callParent(),this.fileInputEl.dom.disabled=!1},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el},setTabIndex:function(e){var t=this;t.focusable&&(t.tabIndex=e,!t.rendered||t.destroying||t.destroyed||(t.useTabGuards?(t.fileInputEl.dom.setAttribute("tabIndex",-1),t.beforeInputGuard.dom.setAttribute("tabIndex",e),t.afterInputGuard.dom.setAttribute("tabIndex",e)):t.fileInputEl.dom.setAttribute("tabIndex",e)))}}}),Ext.define("Ext.form.trigger.Component",{extend:"Ext.form.trigger.Trigger",alias:"trigger.component",cls:Ext.baseCSSPrefix+"form-trigger-cmp",onFieldRender:function(){var e=this.component;this.callParent(),e.isComponent||e.isWidget||(e=Ext.widget(e)),(this.component=e).render(this.el)},destroy:function(){var e=this.component;(e.isComponent||e.isWidget)&&e.destroy(),this.component=null,this.callParent()}}),Ext.define("Ext.form.field.File",{extend:"Ext.form.field.Text",alias:["widget.filefield","widget.fileuploadfield"],alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],requires:["Ext.form.field.FileButton","Ext.form.trigger.Component"],emptyText:void 0,needArrowKeys:!1,triggers:{filebutton:{type:"component",hideOnReadOnly:!1,preventMouseDown:!1}},buttonText:"Browse...",buttonOnly:!1,buttonMargin:3,clearOnSubmit:!0,extraFieldBodyCls:Ext.baseCSSPrefix+"form-file-wrap",inputCls:Ext.baseCSSPrefix+"form-text-file",readOnly:!0,editable:!1,submitValue:!1,triggerNoEditCls:"",childEls:["browseButtonWrap"],applyTriggers:function(e){var t=this,i=(e||{}).filebutton;if(i)return i.component=Ext.apply({xtype:"filebutton",ownerCt:t,id:t.id+"-button",ui:t.ui,disabled:t.disabled,tabIndex:t.tabIndex,text:t.buttonText,style:t.buttonOnly?"":t.getButtonMarginProp()+t.buttonMargin+"px",accept:t.accept,inputName:t.getName(),listeners:{scope:t,change:t.onFileChange}},t.buttonConfig),t.callParent([e]);Ext.raise(t.$className+' requires a valid trigger config containing "filebutton" specification')},getSubTplData:function(e){var t=this.callParent([e]);return t.tabIdx=-1,t},onRender:function(){var e,t,i,n,r=this;r.callParent(arguments),(e=r.inputEl).dom.name="",e.on("focus",r.onInputFocus,r),e.on("mousedown",r.onInputMouseDown,r),n=r.getTrigger("filebutton"),t=r.button=n.component,r.fileInputEl=t.fileInputEl,i=t.el,r.buttonOnly&&(r.inputWrap.setDisplayed(!1),r.shrinkWrap=3),n.el.setWidth(i.getWidth()+i.getMargin("lr")),Ext.isIE8&&r.button.getEl().repaint()},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap" data-ref="browseButtonWrap" role="presentation"></td>'},onFileChange:function(e,t,i){this.duringFileSelect=!0,Ext.form.field.File.superclass.setValue.call(this,i),delete this.duringFileSelect},didValueChange:function(){return!!this.duringFileSelect},setEmptyText:Ext.emptyFn,setValue:Ext.emptyFn,reset:function(){var e=this.clearOnSubmit;this.rendered&&(this.button.reset(e),this.fileInputEl=this.button.fileInputEl,e&&(this.inputEl.dom.value="",Ext.form.field.File.superclass.setValue.call(this,null))),this.callParent()},onShow:function(){this.callParent(),this.button.updateLayout()},onDisable:function(){this.callParent(),this.button.disable()},onEnable:function(){this.callParent(),this.button.enable()},isFileUpload:Ext.returnTrue,extractFileInput:function(){var e;return this.rendered?(e=this.button.fileInputEl.dom,this.reset()):((e=document.createElement("input")).type="file",e.className=Ext.baseCSSPrefix+"hidden-display",e.name=this.getName()),e},restoreInput:function(e){var t;this.rendered&&((t=this.button).restoreInput(e),this.fileInputEl=t.fileInputEl)},doDestroy:function(){this.fileInputEl=this.button=null,this.callParent()},getButtonMarginProp:function(){return this.getInherited().rtl?"margin-right:":"margin-left:"},onInputFocus:function(e){this.selectOnFocus&&document.activeElement===this.inputEl.dom&&this.inputEl.dom.select(),this.focus(),Ext.isIE9m&&(this.fileInputEl.addCls(Ext.baseCSSPrefix+"position-relative"),this.fileInputEl.removeCls(Ext.baseCSSPrefix+"position-relative"))},onInputMouseDown:function(e){e.preventDefault(),this.focus()},privates:{getFocusEl:function(){return this.button},getFocusClsEl:Ext.privateFn}}),Ext.define("Ext.form.field.Hidden",{extend:"Ext.form.field.Base",alias:["widget.hiddenfield","widget.hidden"],alternateClassName:"Ext.form.Hidden",focusable:!1,inputType:"hidden",isTextInput:!1,hideLabel:!0,hidden:!0,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden",this.callParent()},isEqual:function(e,t){return this.isEqualAsString(e,t)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn}),Ext.define("Ext.tip.Tip",{extend:"Ext.panel.Panel",xtype:"tip",alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",constrainPosition:!0,autoRender:!0,hidden:!0,baseCls:Ext.baseCSSPrefix+"tip",focusOnToFront:!1,maskOnDisable:!1,closeAction:"hide",alwaysFramed:!0,frameHeader:!1,initComponent:function(){this.floating=Ext.apply({},{shadow:this.shadow},this.self.prototype.floating),this.callParent(arguments),this.constrain=this.constrain||this.constrainPosition},showAt:function(e){this.calledFromShowAt=!0,this.callParent(arguments),this.isVisible()&&this.doAlignment(this.getRegion().alignTo({target:new Ext.util.Point(e[0],e[1]),inside:this.constrainPosition?Ext.getBody().getRegion().adjust(5,-5,-5,5):null,align:"tl-tl",overlap:!0})),this.calledFromShowAt=0},doAlignment:function(e){var t=this.anchorEl,i=e.anchor;this.setPagePosition([e.x,e.y]),t&&(t.removeCls(this.anchorCls),i?(this.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+i.position,t.addCls(this.anchorCls),t.show(),1&i.align?(t.setTop(e.anchor.y-e.y),t.dom.style.left=""):(t.setLeft(e.anchor.x-e.x),t.dom.style.top="")):t.hide())},privates:{initDraggable:function(){this.draggable={el:this.getDragEl(),delegate:this.header.el,constrain:this,constrainTo:this.el.dom.parentNode},Ext.Component.prototype.initDraggable.call(this)}},ghost:void 0,unghost:void 0}),Ext.define("Ext.tip.ToolTip",{extend:"Ext.tip.Tip",alias:"widget.tooltip",alternateClassName:"Ext.ToolTip",requires:["Ext.util.Offset"],autoHide:!0,showDelay:500,hideDelay:200,dismissDelay:5e3,mouseOffset:[15,18],trackMouse:!1,anchorToTarget:!0,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1e3,defaultAlign:"bl-tl",checkNestedDelegates:!1,ariaRole:"tooltip",alwaysOnTop:!0,initComponent:function(){this.callParent(),this.setTarget(this.target),this.currentTarget=new Ext.dom.Fly},onRender:function(e,t){this.callParent(arguments),this.sticky&&this.el.dom.setAttribute("data-sticky",!0),this.anchorEl=this.el.createChild({role:"presentation",cls:Ext.baseCSSPrefix+"tip-anchor"})},show:function(){if(!this.currentTarget.dom&&this.target)return this.showBy(this.target);this.callParent()},setTarget:function(e){var t;this.targetListeners&&this.targetListeners.destroy(),e?(this.target=e=Ext.get(e.el||e),t={mouseover:"onTargetOver",mouseout:"onTargetOut",mousemove:"onMouseMove",tap:"onTargetTap",scope:this,destroyable:!0},this.targetListeners=e.on(t)):this.target=null},onMouseMove:function(e){var t=this,i=t.dismissDelay;t.pointerEvent=e,t.isVisible()&&t.currentTarget.contains(e.target)&&(i&&!1!==t.autoHide&&(t.clearTimer("dismiss"),t.dismissTimer=Ext.defer(t.hide,i,t)),t.trackMouse&&t.doAlignment(t.getAlignRegion()))},getAlignRegion:function(){var e,t,i,n=this,r=n.anchorEl,o=n.getAnchorAlign(),a=n.mouseOffset;return n.anchorSize||(r.addCls(Ext.baseCSSPrefix+"tip-anchor-top"),r.show(),n.anchorSize=new Ext.util.Offset(r.getWidth(!1,!0),r.getHeight(!1,!0)),r.removeCls(Ext.baseCSSPrefix+"tip-anchor-top"),r.hide()),(n.anchor||n.align)&&n.anchorToTarget&&!n.trackMouse?i=n.currentTarget.getRegion():(i=n.pointerEvent?n.pointerEvent.getPoint().adjust(-Math.abs(a[1]),Math.abs(a[0]),Math.abs(a[1]),-Math.abs(a[0])):new Ext.util.Point,n.anchor||(e=!0,o=0<a[0]?0<a[1]?"tl-br":"bl-tr":0<a[1]?"tr-bl":"br-tl")),t={align:n.convertPositionSpec(o),axisLock:n.axisLock,target:i,overlap:e,offset:n.targetOffset,inside:n.constrainPosition?n.constrainTo||Ext.getBody().getRegion().adjust(5,-5,-5,5):null},n.anchor&&(t.anchorSize=n.anchorSize),n.getRegion().alignTo(t)},fadeOut:function(){var e=this;e.el.fadeOut({duration:e.fadeOutDuration,callback:function(){e.hide(),e.el.setOpacity("")}})},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return this.defaultAlign}},onTargetTap:function(e){this.showOnTap&&"mouse"!==e.pointerType&&Ext.fly(e.target).isVisible(!0)&&this.onTargetOver(e)},onTargetOver:function(e){var t,i=this,n=i.delegate,r=i.currentTarget,o=e.relatedTarget||e.fromElement,a=i.hasListeners;if(!i.disabled){if(n){if(!this.checkNestedDelegates&&r.contains(e.target))return;if((t=e.getTarget(n))&&e.getRelatedTarget(n)===t)return}else{if(i.target.contains(o))return;t=i.target.dom}t?((a.beforeshow||a.show)&&i.isVisible()&&i.hide(),i.triggerElement=t,i.pointerEvent=e,r.attach(t),i.handleTargetOver(t,e)):r.dom&&i.handleTargetOut()}},handleTargetOver:function(e,t){"mouse"!==t.pointerType?this.showFromDelay():this.delayShow()},delayShow:function(){var e=this;e.clearTimer("hide"),e.hidden&&!e.showTimer?e.delegate&&Ext.Date.getElapsed(e.lastHidden)<e.quickShowInterval?e.showFromDelay():e.showTimer=Ext.defer(e.showFromDelay,"mouse"!==e.pointerEvent.pointerType?0:e.showDelay,e):e.hidden||!1===e.autoHide||e.showFromDelay()},showFromDelay:function(){var e=this;e.disabled||(e.fireEvent("hovertarget",e,e.currentTarget,e.currentTarget.dom),e.isVisible()?e.realignToTarget():(e.triggerElement=e.currentTarget.dom,e.fromDelayShow=!0,e.show(),e.fromDelayShow=!1))},onTargetOut:function(e){this.currentTarget.dom&&!this.currentTarget.contains(e.relatedTarget)&&this.handleTargetOut()},handleTargetOut:function(){this.showTimer&&this.clearTimer("show"),this.isVisible()&&this.autoHide&&this.delayHide()},delayHide:function(){this.hidden||this.hideTimer||(this.clearTimer("dismiss"),this.hideTimer=Ext.defer(this[this.hideAction],this.hideDelay,this))},hide:function(){this.currentTarget.detach(),this.clearTimer("dismiss"),this.lastHidden=new Date,this.anchorEl&&this.anchorEl.hide(),this.callParent(arguments),this.triggerElement=null},afterShow:function(){this.callParent(),this.realignToTarget()},realignToTarget:function(){var e=this;e.clearTimers(),e.calledFromShowAt||e.doAlignment(e.getAlignRegion()),e.dismissDelay&&!1!==e.autoHide&&(e.dismissTimer=Ext.defer(e.hide,e.dismissDelay,e))},showBy:function(e){var t=this;return t.align=t.defaultAlign,e.isEvent?(t.currentTarget.attach(e.target),t.pointerEvent=e):(t.currentTarget.attach(Ext.getDom(e.el||e)),t.triggerElement=t.currentTarget.dom),t.isVisible()?t.realignToTarget():t.show(),t},_timerNames:{},clearTimer:function(e){var t=this._timerNames,i=t[e]||(t[e]=e+"Timer"),n=this[i];n&&(Ext.undefer(n),this[i]=null,"show"===e&&this.isHidden()&&this.currentTarget.detach())},clearTimers:function(){this.clearTimer("show"),this.clearTimer("dismiss"),this.clearTimer("hide"),this.clearTimer("enable")},onShow:function(){this.callParent(),this.mousedownListener=Ext.on({mousedown:"onDocMouseDown",scope:this,destroyable:!0})},onHide:function(){this.callParent(),Ext.destroy(this.mousedownListener)},onDocMouseDown:function(e){var t=this,i=t.delegate;e.within(t.el.dom)?"mouse"!==e.pointerType&&t.allowOver&&t.clearTimer("dismiss"):t.closable||(!e.within(t.target)||i&&!e.getTarget(i)?(t.disable(),t.enableTimer=Ext.defer(t.enable,100,t)):t.delayHide())},doEnable:function(){this.destroyed||this.enable()},onDisable:function(){this.callParent(),this.clearTimers(),this.hide()},doDestroy:function(){this.clearTimers(),this.destroyMembers("mousedownListener","anchorEl"),this.callParent()},privates:{getTrackMouse:function(){return this.trackMouse},clipTo:function(e,t){var i;i=e.isRegion?e:(e.isComponent?e.el:Ext.fly(e)).getConstrainRegion(),this.callParent([i,t]),this.anchorEl.clipTo(i,t)}}}),Ext.define("Ext.tip.QuickTip",{extend:"Ext.tip.ToolTip",alias:"widget.quicktip",alternateClassName:"Ext.QuickTip",interceptTitles:!1,title:"&#160;",checkNestedDelegates:!0,tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},isQuickTip:!0,shrinkWrapDock:!0,initComponent:function(){var e=this;e.delegate=e.delegate.bind(e),e.target=e.target||Ext.getDoc(),e.targets=e.targets||{},e.header=e.header||{},e.header.focusableContainer=!1,e.callParent()},setTagConfig:function(e){this.tagConfig=Ext.apply({},e),delete this.tagConfig.attr},text:null,register:function(e){for(var t,i,n,r=Ext.isArray(e)?e:arguments,o=0,a=r.length;o<a;o++)if(t=(e=r[o]).target)if(Ext.isArray(t))for(i=0,n=t.length;i<n;i++)this.targets[Ext.id(t[i])]=e;else this.targets[Ext.id(t)]=e},unregister:function(e){delete this.targets[Ext.id(e)]},cancelShow:function(e){var t=this.currentTarget;e=Ext.getDom(e),this.isVisible()?t.dom===e&&this.hide():t.dom===e&&this.clearTimer("show")},delegate:function(e){var t=this.tagConfig,i=t.attr||(t.attr=t.namespace+t.attribute);return!!(e.getAttribute(i)||this.interceptTitles&&e.title)},getTipText:function(e){var t=e.title,i=this.tagConfig,n=i.attr||(i.attr=i.namespace+i.attribute);return this.interceptTitles&&t?(e.setAttribute(n,t),e.removeAttribute("title"),t):e.getAttribute(n)},onTargetOver:function(e){var t,i,n,r=this.currentTarget,o=e.target;if(o&&1===o.nodeType&&o!==document.documentElement&&o!==document.body){for(n in this.pointerEvent=e,t=this.targets)if(t.hasOwnProperty(n)&&(i=t[n],(o=Ext.getDom(i.target))&&Ext.fly(o).contains(e.target)&&!Ext.fly(o).contains(e.relatedTarget)))return r.attach(o),(this.activeTarget=i).el=r,this.anchor=i.anchor,void this.activateTarget();this.callParent([e])}},handleTargetOver:function(e,t){var i,n=this,r=n.currentTarget,o=n.tagConfig,a=o.namespace,s=n.getTipText(e,t);s&&(i=r.getAttribute(a+o.hide),n.activeTarget={el:r,text:s,width:+r.getAttribute(a+o.width)||null,autoHide:"user"!==i&&"false"!==i,title:r.getAttribute(a+o.title),cls:r.getAttribute(a+o.cls),align:r.getAttribute(a+o.align),showDelay:r.getAttribute(a+o.showDelay),hideAction:r.getAttribute(a+o.hideAction),alignTarget:r.getAttribute(a+o.anchorTarget)},n.initialConfig.hasOwnProperty("anchor")||(n.anchor=r.getAttribute(a+o.anchor)),n.anchor&&!n.initialConfig.hasOwnProperty("anchorTarget")&&(n.alignTarget=n.activeTarget.alignTarget||e),n.activateTarget())},activateTarget:function(){var e=this,t=e.activeTarget,i=t.showDelay,n=t.hideAction;e.isVisible()?(e.updateContent(),e.realignToTarget()):(t.showDelay&&(i=e.showDelay,e.showDelay=parseInt(t.showDelay,10)),e.delayShow(),t.showDelay&&(e.showDelay=i),(n=t.hideAction)?e.hideAction=n:delete e.hideAction)},getAnchorAlign:function(){var e=this.activeTarget;return e&&e.align||this.callParent()},getAlignRegion:function(){var e,t=this.activeTarget,i=this.currentTarget.dom;return t&&t.alignTarget&&this.anchor&&!this.initialConfig.hasOwnProperty("anchorTarget")&&this.currentTarget.attach(Ext.getDom(t.alignTarget)),this.anchorToTarget=!(!t.align&&!this.anchor),e=this.callParent(),this.currentTarget.attach(i),e},handleTargetOut:function(e){var t=this.activeTarget,i=this.autoHide,n=this.hideDelay;t&&!1!==i&&(this.autoHide=!0,t.hideDelay&&(this.hideDelay=parseInt(t.hideDelay,10)),this.callParent([e]),this.autoHide=i,this.hideDelay=n)},targetTextEmpty:function(){var e,t=this.activeTarget,i=this.tagConfig;return!(!t||!(e=t.el)||e.getAttribute(i.namespace+i.attribute)||this.targets[Ext.id(t.el.dom)])},show:function(){if(this.fromDelayShow&&this.targetTextEmpty())return this.activeTarget=null,void this.currentTarget.detach();this.callParent(arguments)},beforeShow:function(){this.updateContent(),this.callParent(arguments)},updateContent:function(){var e,t,i=this,n=i.activeTarget,r=i.header;n&&(i.suspendLayouts(),n.title?(i.setTitle(n.title),r.show()):r&&r.hide(),i.update(n.text),i.autoHide=n.autoHide,e=n.dismissDelay,i.dismissDelay=Ext.isNumber(e)?e:i.dismissDelay,(t=i.lastCls)&&(i.removeCls(t),delete i.lastCls),(t=n.cls)&&(i.addCls(t),i.lastCls=t),i.setWidth(n.width),i.align=n.align,i.resumeLayouts(!0))},hide:function(){this.activeTarget=null,this.callParent()}}),Ext.define("Ext.tip.QuickTipManager",{singleton:!0,alternateClassName:"Ext.QuickTips",requires:["Ext.tip.QuickTip"],disabled:!1,init:function(e,t){if(!this.tip){if(!Ext.isReady)return Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(e,t)}),!1;var i=Ext.apply({sticky:!0,disabled:this.disabled,id:"ext-quicktips-tip"},t),n=i.className,r=i.xtype;n?delete i.className:r&&(n="widget."+r,delete i.xtype),!1!==e&&(i.renderTo=document.body,"BODY"!==i.renderTo.tagName.toUpperCase()&&Ext.raise({sourceClass:"Ext.tip.QuickTipManager",sourceMethod:"init",msg:"Cannot init QuickTipManager: no document body"})),this.tip=Ext.create(n||"Ext.tip.QuickTip",i),this.tip.destroy=Ext.emptyFn,Ext.quickTipsActive=!0}},destroy:function(){var e=this.tip;e&&(delete e.destroy,e.destroy(),this.tip=null),Ext.quickTipsActive=!1},ddDisable:function(){var e=this.tip;e&&!this.disabled&&e.disable()},ddEnable:function(){var e=this.tip;e&&!this.disabled&&e.enable()},enable:function(){var e=this.tip;e&&e.enable(),this.disabled=!1},disable:function(){var e=this.tip;e&&e.disable(),this.disabled=!0},isEnabled:function(){var e=this.tip;return void 0!==e&&!e.disabled},getQuickTip:function(){return this.tip},register:function(){var e=this.tip;e.register.apply(e,arguments)},unregister:function(){var e=this.tip;e.unregister.apply(e,arguments)},tips:function(){var e=this.tip;e.register.apply(e,arguments)}}),Ext.define("Ext.picker.Color",{extend:"Ext.Component",requires:"Ext.XTemplate",alias:"widget.colorpicker",alternateClassName:"Ext.ColorPalette",focusable:!0,componentCls:Ext.baseCSSPrefix+"color-picker",selectedCls:Ext.baseCSSPrefix+"color-picker-selected",itemCls:Ext.baseCSSPrefix+"color-picker-item",value:null,clickEvent:"click",allowReselect:!1,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" role="button" class="color-{.} {parent.itemCls}" hidefocus="on">','<span class="{parent.itemCls}-inner" style="background:#{.}">&#160;</span>',"</a>","</tpl>"],initComponent:function(){this.callParent(arguments),this.handler&&this.on("select",this.handler,this.scope,!0)},initRenderData:function(){return Ext.apply(this.callParent(),{itemCls:this.itemCls,colors:this.colors})},onRender:function(){var e=this.clickEvent;this.callParent(arguments),this.mon(this.el,e,this.handleClick,this,{delegate:"a"}),"click"!==e&&this.mon(this.el,"click",Ext.emptyFn,this,{delegate:"a",stopEvent:!0})},afterRender:function(){var e;this.callParent(arguments),this.value&&(e=this.value,this.value=null,this.select(e,!0))},handleClick:function(e){var t;e.stopEvent(),this.disabled||(t=e.currentTarget.className.match(this.colorRe)[1],this.select(t.toUpperCase()))},select:function(e,t){var i,n,r=this,o=r.selectedCls,a=r.value;e=e.replace("#",""),r.rendered?e===a&&!r.allowReselect||(i=r.el,r.value&&(n=i.down("a.color-"+a,!0),Ext.fly(n).removeCls(o)),n=i.down("a.color-"+e,!0),Ext.fly(n).addCls(o),r.value=e,!0!==t&&r.fireEvent("select",r,e)):r.value=e},clear:function(){var e,t=this.value;t&&this.rendered&&(e=this.el.down("a.color-"+t,!0),Ext.fly(e).removeCls(this.selectedCls)),this.value=null},getValue:function(){return this.value||null}}),Ext.define("Ext.layout.component.field.HtmlEditor",{extend:"Ext.layout.component.field.FieldContainer",alias:["layout.htmleditor"],type:"htmleditor",naturalHeight:150,naturalWidth:300,beginLayout:function(e){var t,i=this.owner;Ext.isGecko&&(t=i.textareaEl.dom,this.lastValue=t.value,t.value=""),this.callParent(arguments),e.toolbarContext=e.context.getCmp(i.toolbar),e.inputCmpContext=e.context.getCmp(i.inputCmp),e.bodyCellContext=e.getEl("bodyEl"),e.textAreaContext=e.getEl("textareaEl"),e.iframeContext=e.getEl("iframeEl")},beginLayoutCycle:function(e){var t=e.widthModel,i=e.heightModel,n=this.owner,r=n.iframeEl,o=n.textareaEl,a=i.natural||i.shrinkWrap?this.naturalHeight:"";this.callParent(arguments),t.shrinkWrap?(r.setStyle("width",""),o.setStyle("width","")):t.natural&&e.bodyCellContext.setWidth(this.naturalWidth),r.setStyle("height",a),o.setStyle("height",a)},finishedLayout:function(){var e=this.owner;this.callParent(arguments),Ext.isGecko&&(e.textareaEl.dom.value=this.lastValue)}}),Ext.define("Ext.toolbar.Separator",{extend:"Ext.toolbar.Item",alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",requires:["Ext.toolbar.Toolbar"],baseCls:Ext.baseCSSPrefix+"toolbar-separator",ariaRole:"separator"}),Ext.define("Ext.layout.container.boxOverflow.Menu",{extend:"Ext.layout.container.boxOverflow.None",alternateClassName:"Ext.layout.boxOverflow.Menu",alias:["box.overflow.menu","box.overflow.Menu"],requires:["Ext.toolbar.Separator","Ext.button.Button"],noItemsMenuText:'<div class="'+Ext.baseCSSPrefix+'toolbar-no-items" role="menuitem">(None)</div>',menuCls:Ext.baseCSSPrefix+"box-menu",constructor:function(e){this.callParent([e]),this.menuItems=[]},beginLayout:function(e){this.callParent([e]),this.clearOverflow(e)},beginLayoutCycle:function(e,t){this.callParent([e,t]),t||(this.clearOverflow(e),this.layout.cacheChildItems(e))},onRemove:function(e){Ext.Array.remove(this.menuItems,e)},clearItem:function(e){var t=e.menu;e.isButton&&t&&e.setMenu(t,!1)},getSuffixConfig:function(){var e=this.layout,t=e.owner,i=t.id;return this.menu=new Ext.menu.Menu({listeners:{scope:this,beforeshow:this.beforeMenuShow}}),this.menuTrigger=new Ext.button.Button({id:i+"-menu-trigger",cls:this.menuCls+"-after "+Ext.baseCSSPrefix+"toolbar-item",plain:t.usePlainButtons,ownerCt:t,ownerLayout:e,iconCls:Ext.baseCSSPrefix+this.getOwnerType(t)+"-more-icon",ui:t.defaultButtonUI||"default",menu:this.menu,showEmptyMenu:!0,getSplitCls:function(){return""}}),this.menuTrigger.getRenderTree()},getOverflowCls:function(e){return this.menuCls+"-body-"+e},handleOverflow:function(e){var t=this.layout;return this.showTrigger(e),"vertical"!==t.direction&&this.menuTrigger.setLocalY((e.state.boxPlan.maxSize-this.menuTrigger[t.names.getHeight]())/2),{reservedSpace:this.triggerTotalWidth}},captureChildElements:function(){var e=this.menuTrigger,t=this.layout.names;e.rendering&&(e.finishRender(),this.triggerTotalWidth=e[t.getWidth]()+e.el.getMargin(t.parallelMargins))},clearOverflow:function(e){var t,i,n=this.menuItems,r=n.length,o=this.layout.owner,a=o._asLayoutRoot;for(o.suspendLayouts(),this.captureChildElements(),this.hideTrigger(),o.resumeLayouts(),i=0;i<r;i++)(t=n[i]).suspendLayouts(),t.show(),this.clearItem(t),t.resumeLayouts(a);n.length=0},showTrigger:function(e){var t,i,n,r,o,a=this.layout,s=a.owner,l=a.names,d=l.x,u=l.width,c=e.state.boxPlan.targetSize[u],h=e.childItems,f=this.menuTrigger,g=this.menuItems;for(f.suspendLayouts(),f.show(),f.resumeLayouts(this._asLayoutRoot),c-=this.triggerTotalWidth,s.suspendLayouts(),n=0,o=g.length;n<o;++n)this.clearItem(g[n]);for(n=g.length=0,o=h.length;n<o;n++)(r=(t=h[n]).props)[d]+r[u]>c&&(i=t.target,this.menuItems.push(i),i.hide());s.resumeLayouts()},hideTrigger:function(){var e=this.menuTrigger;e&&e.hide()},beforeMenuShow:function(e){function t(e,t){return e.isXType("buttongroup")&&!(t instanceof Ext.toolbar.Separator)}var i,n,r=this.menuItems,o=0,a=r.length;for(e.suspendLayouts(),e.removeAll(!1);o<a;o++)i=r[o],!o&&i instanceof Ext.toolbar.Separator||(n&&(t(i,n)||t(n,i))&&e.add("-"),this.addComponentToMenu(e,i),n=i);e.items.length<1&&e.add(this.noItemsMenuText),e.resumeLayouts()},createMenuConfig:function(e,t){var i=Ext.apply({},e.initialConfig),n=e.toggleGroup;return Ext.copy(i,e,["iconCls","icon","itemId","disabled","handler","scope","menu","tabIndex"]),Ext.applyIf(i,{hideOnClick:t,destroyMenu:!1,listeners:null}),i.text=e.overflowText||e.text,(i.masterComponent=e).isFormField?(i.value=e.getValue(),e instanceof Ext.form.field.Checkbox&&(i={xtype:"menucheckitem",group:e.isRadio?e.name+"_clone":void 0,text:e.boxLabel||e.fieldLabel,name:e.name,masterComponent:e,checked:e.getValue(),hideOnClick:!1,checkChangeDisabled:!0}),i.listeners={change:function(e,t,i){e.masterComponent.setValue(t)}},e.on("change",function(e,t,i){e.overflowClone.setValue(t)})):(n||e.enableToggle)&&Ext.apply(i,{hideOnClick:!1,group:n,checked:e.pressed,handler:function(e,t){e.masterComponent.onClick(t)}}),e.isButton&&!e.changeListenersAdded&&(e.on({textchange:this.onButtonAttrChange,iconchange:this.onButtonAttrChange,toggle:this.onButtonToggle}),e.changeListenersAdded=!0),e.on({enable:this.onComponentStatusChange,disable:this.onComponentStatusChange}),delete i.margin,delete i.ownerCt,delete i.xtype,delete i.id,delete i.itemId,i},onButtonAttrChange:function(e){var t=e.overflowClone;t.suspendLayouts(),t.setText(e.text),t.setIcon(e.icon),t.setIconCls(e.iconCls),t.resumeLayouts(!0)},onButtonToggle:function(e,t){e.overflowClone.checked!==t&&e.overflowClone.setChecked(t)},onComponentStatusChange:function(e){var t=e.overflowClone;t&&t.setDisabled(e.disabled)},addComponentToMenu:function(e,t){var i,n,r;if(!(t instanceof Ext.toolbar.Fill))if(t instanceof Ext.toolbar.Separator)e.add("-");else if(t.overflowClone)e.add(t.overflowClone);else if(t.isComponent)if(t.isXType("splitbutton"))t.overflowClone=e.add(this.createMenuConfig(t,!0));else if(t.isXType("button"))t.overflowClone=e.add(this.createMenuConfig(t,!t.menu));else if(t.isXType("buttongroup"))for(r=(n=t.items.items).length,i=0;i<r;i++)this.addComponentToMenu(e,n[i]);else t.isCheckbox?(t.overflowClone=e.add(this.createMenuConfig(t)),Ext.apply(t.overflowClone,{getValue:function(){return t.overflowClone.checked},setValue:function(){t.overflowClone.setChecked(t.getValue())}}),t.overflowClone.on("click",function(e){e.setChecked(!!e.masterComponent.isRadio||!e.checked),e.fireEvent("change",e,e.checked)})):t.overflowClone=e.add(Ext.create(Ext.getClassName(t),this.createMenuConfig(t)))},destroy:function(){Ext.destroy(this.menu,this.menuTrigger),this.callParent()}}),Ext.define("Ext.form.field.HtmlEditor",{extend:"Ext.form.FieldContainer",alias:"widget.htmleditor",alternateClassName:"Ext.form.HtmlEditor",requires:["Ext.tip.QuickTipManager","Ext.picker.Color","Ext.layout.container.VBox","Ext.toolbar.Item","Ext.toolbar.Toolbar","Ext.util.Format","Ext.layout.component.field.HtmlEditor","Ext.util.TaskManager","Ext.layout.container.boxOverflow.Menu"],mixins:{field:"Ext.form.field.Field"},focusable:!0,componentLayout:"htmleditor",textareaCls:Ext.baseCSSPrefix+"htmleditor-textarea",componentTpl:["{beforeTextAreaTpl}",'<textarea id="{id}-textareaEl" data-ref="textareaEl" name="{name}" tabindex="-1" {inputAttrTpl}',' class="{textareaCls}" autocomplete="off">',"{[Ext.util.Format.htmlEncode(values.value)]}","</textarea>","{afterTextAreaTpl}","{beforeIFrameTpl}",'<iframe id="{id}-iframeEl" data-ref="iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' src="{iframeSrc}" class="{iframeCls}"></iframe>',"{afterIFrameTpl}",{disableFormats:!0}],stretchInputElFixed:!0,subTplInsertions:["beforeTextAreaTpl","afterTextAreaTpl","beforeIFrameTpl","afterIFrameTpl","iframeAttrTpl","inputAttrTpl"],enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultValue:Ext.isOpera?"&#160;":"&#8203;",extraFieldBodyCls:Ext.baseCSSPrefix+"html-editor-wrap",defaultButtonUI:"default-toolbar",buttonDefaults:null,initialized:!1,activated:!1,sourceEditMode:!1,iframePad:3,hideMode:"offsets",layout:{type:"vbox",align:"stretch"},maskOnDisable:!0,containerElCls:Ext.baseCSSPrefix+"html-editor-container",reStripQuotes:/^['"]*|['"]*$/g,textAlignRE:/text-align:(.*?);/i,safariNonsenseRE:/\sclass="(?:Apple-style-span|Apple-tab-span|khtml-block-placeholder)"/gi,nonDigitsRE:/\D/g,initComponent:function(){this.items=[this.createToolbar(),this.createInputCmp()],null==this.value&&(this.value=""),this.callParent(arguments),this.initField()},createInputCmp:function(){return this.inputCmp=Ext.widget(this.getInputCmpCfg()),this.inputCmp},getInputCmpCfg:function(){var e=this.id+"-inputCmp",t={id:e,name:this.name,textareaCls:this.textareaCls+" "+Ext.baseCSSPrefix+"hidden",value:this.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,iframeCls:Ext.baseCSSPrefix+"htmleditor-iframe"};return this.getInsertionRenderData(t,this.subTplInsertions),{flex:1,xtype:"component",tpl:this.lookupTpl("componentTpl"),childEls:["iframeEl","textareaEl"],id:e,cls:Ext.baseCSSPrefix+"html-editor-input",data:t}},createToolbar:function(){return this.toolbar=Ext.widget(this.getToolbarCfg()),this.toolbar},getToolbarCfg:function(){var e,t,n,r=this,i=[],o=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),a=Ext.baseCSSPrefix;function s(e,t,i){return Ext.merge({itemId:e,cls:a+"btn-icon",iconCls:a+"edit-"+e,enableToggle:!1!==t,scope:r,handler:i||r.relayBtnCmd,clickEvent:"mousedown",tooltip:o?r.buttonTips[e]:n,overflowText:r.buttonTips[e].title||n,tabIndex:-1},r.buttonDefaults)}for(r.enableFont&&(t=Ext.widget("component",{itemId:"fontSelect",renderTpl:['<select id="{id}-selectEl" data-ref="selectEl" class="'+a+'font-select">',"</select>"],childEls:["selectEl"],afterRender:function(){r.fontSelect=this.selectEl,Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var e=this.selectEl;e&&(e.dom.disabled=!0),Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var e=this.selectEl;e&&(e.dom.disabled=!1),Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){r.win.focus(),r.relayCmd("fontName",r.fontSelect.dom.value),r.deferFocus()},element:"selectEl"}}),i.push(t,"-")),r.enableFormat&&i.push(s("bold"),s("italic"),s("underline")),r.enableFontSize&&i.push("-",s("increasefontsize",!1,r.adjustFont),s("decreasefontsize",!1,r.adjustFont)),r.enableColors&&i.push("-",Ext.merge({itemId:"forecolor",cls:a+"btn-icon",iconCls:a+"edit-forecolor",overflowText:r.buttonTips.forecolor.title,tooltip:o&&r.buttonTips.forecolor||n,tabIndex:-1,menu:Ext.widget("menu",{plain:!0,items:[{xtype:"colorpicker",allowReselect:!0,focus:Ext.emptyFn,value:"000000",plain:!0,clickEvent:"mousedown",handler:function(e,t){r.relayCmd("forecolor",Ext.isWebKit||Ext.isIE||Ext.isEdge?"#"+t:t),this.up("menu").hide()}}]})},r.buttonDefaults),Ext.merge({itemId:"backcolor",cls:a+"btn-icon",iconCls:a+"edit-backcolor",overflowText:r.buttonTips.backcolor.title,tooltip:o&&r.buttonTips.backcolor||n,tabIndex:-1,menu:Ext.widget("menu",{plain:!0,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:!0,allowReselect:!0,clickEvent:"mousedown",handler:function(e,t){Ext.isGecko?(r.execCmd("useCSS",!1),r.execCmd("hilitecolor","#"+t),r.execCmd("useCSS",!0),r.deferFocus()):r.relayCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE||Ext.isEdge||Ext.isOpera?"#"+t:t),this.up("menu").hide()}}]})},r.buttonDefaults)),r.enableAlignments&&i.push("-",s("justifyleft"),s("justifycenter"),s("justifyright")),r.enableLinks&&i.push("-",s("createlink",!1,r.createLink)),r.enableLists&&i.push("-",s("insertorderedlist"),s("insertunorderedlist")),r.enableSourceEdit&&i.push("-",s("sourceedit",!0,function(){r.toggleSourceEdit(!r.sourceEditMode)})),e=0;e<i.length;e++)"sourceedit"!==i[e].itemId&&(i[e].disabled=!0);return{xtype:"toolbar",defaultButtonUI:r.defaultButtonUI,cls:Ext.baseCSSPrefix+"html-editor-tb",enableOverflow:!0,items:i,listeners:{click:function(e){e.preventDefault()},element:"el"}}},getMaskTarget:function(){return Ext.isGecko?this.inputCmp.el:this.bodyEl},setReadOnly:function(e){var t,i=this.textareaEl,n=this.iframeEl;this.readOnly=e,i&&(i.dom.readOnly=e),this.initialized&&(t=this.getEditorBody(),Ext.isIE?(n.setDisplayed(!1),t.contentEditable=!e,n.setDisplayed(!0)):this.setDesignMode(!e),t&&(t.style.cursor=e?"default":"text"),this.disableItems(e))},getDocMarkup:function(){var e=this.iframeEl.getHeight()-2*this.iframePad;return Ext.String.format('<!DOCTYPE html><html><head><style type="text/css">'+(Ext.isOpera||Ext.isIE?"p{margin:0;}":"")+"body{border:0;margin:0;padding:{0}px;direction:"+(this.rtl?"rtl;":"ltr;")+(Ext.isIE8?Ext.emptyString:"min-")+"height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;background-color:white;"+(Ext.isIE?"":"font-size:12px;font-family:{2}")+"}</style></head><body></body></html>",this.iframePad,e,this.defaultFont)},getEditorBody:function(){var e=this.getDoc();return e&&e.body},getDoc:function(){return this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return this.iframeEl.dom.contentWindow||window.frames[this.iframeEl.dom.name]},initDefaultFont:function(){var e,t,i,n,r,o,a,s=0;if(!this.defaultFont){for(t=this.textareaEl.getStyle("font-family"),t=Ext.String.capitalize(t.split(",")[0]),e=Ext.Array.clone(this.fontFamilies),Ext.Array.include(e,t),e.sort(),this.defaultFont=t,i=this.down("#fontSelect").selectEl.dom,r=0,o=e.length;r<o;++r)a=(t=e[r]).toLowerCase(),n=new Option(t,a),t===this.defaultFont&&(s=r),n.style.fontFamily=a,Ext.isIE?i.add(n):i.options.add(n);i.options[s].selected=!0}},isEqual:function(e,t){return this.isEqualAsString(e,t)},afterRender:function(){var e=this,t=e.inputCmp;e.callParent(arguments),e.iframeEl=t.iframeEl,e.textareaEl=t.textareaEl,e.inputEl=e.iframeEl,e.enableFont&&e.initDefaultFont(),e.initPhase=0,e.initializeTask=Ext.TaskManager.start({run:e.initFrameDoc,scope:e,interval:10,duration:5e3})},initFrameDoc:function(){var e=this,t=e.getDoc();if(e.destroying||e.destroyed)return Ext.TaskManager.stop(e.initializeTask);switch(e.initPhase){case 0:t&&(e.win=e.getWin(),t.open(),t.write(e.getDocMarkup()),t.close(),e.initPhase++);break;case 1:!t.body&&"complete"!==t.readyState||(e.setDesignMode(!0),e.initPhase++);break;case 2:e.initEditor(),Ext.TaskManager.stop(e.initializeTask)}},setDesignMode:function(e){var t=this.getDoc();t&&(this.readOnly&&(e=!1),t.designMode=/on|true/i.test(String(e).toLowerCase())?"on":"off")},getDesignMode:function(){var e=this.getDoc();return e?String(e.designMode).toLowerCase():""},disableItems:function(e){var t,i,n=this.getToolbar().items.items,r=n.length;for(t=0;t<r;t++)"sourceedit"!==(i=n[t]).getItemId()&&i.setDisabled(e)},toggleSourceEdit:function(e){var t=this,i=t.iframeEl,n=t.textareaEl,r=Ext.baseCSSPrefix+"hidden",o=t.getToolbar().getComponent("sourceedit");Ext.isBoolean(e)||(e=!t.sourceEditMode),t.sourceEditMode=e,o.pressed!==e&&o.toggle(e),e?(t.disableItems(!0),t.syncValue(),i.addCls(r),n.removeCls(r),n.dom.removeAttribute("tabIndex"),n.focus(),t.inputEl=n):(t.initialized&&t.disableItems(t.readOnly),t.pushValue(),i.removeCls(r),n.addCls(r),n.dom.setAttribute("tabIndex",-1),t.deferFocus(),t.inputEl=i),t.fireEvent("editmodechange",t,e),t.updateLayout()},createLink:function(){var e=prompt(this.createLinkText,this.defaultLinkValue);e&&"http://"!==e&&this.relayCmd("createlink",e)},clearInvalid:Ext.emptyFn,setValue:function(e){var t=this.textareaEl;return null==e&&(e=""),this.value!==e&&(t&&(t.dom.value=e),this.pushValue(),!this.rendered&&this.inputCmp&&(this.inputCmp.data.value=e),this.mixins.field.setValue.call(this,e)),this},cleanHtml:function(e){return e=String(e),Ext.isWebKit&&(e=e.replace(this.safariNonsenseRE,"")),e.charCodeAt(0)===parseInt(this.defaultValue.replace(this.nonDigitsRE,""),10)&&(e=e.substring(1)),e},syncValue:function(){var e,t,i,n,r,o=this;o.initialized&&(i=(e=o.getEditorBody()).innerHTML,r=o.textareaEl.dom,Ext.isWebKit&&(n=e.style.cssText.match(o.textAlignRE))&&n[1]&&(i='<div style="'+n[0]+'">'+i+"</div>"),i=o.cleanHtml(i),!1!==o.fireEvent("beforesync",o,i)&&(Ext.isGecko&&""===r.value&&"<br>"===i&&(i=""),r.value!==i&&(r.value=i,t=!0),o.fireEvent("sync",o,i),t&&o.checkChange()))},getValue:function(){var e;return this.sourceEditMode||this.syncValue(),e=this.rendered?this.textareaEl.dom.value:this.value,this.value=e},pushValue:function(){var e,t=this;t.initialized&&(e=t.textareaEl.dom.value||"",!t.activated&&e.length<1&&(e=t.defaultValue),!1!==t.fireEvent("beforepush",t,e)&&(t.getEditorBody().innerHTML=e,Ext.isGecko&&(t.setDesignMode(!1),t.setDesignMode(!0)),t.fireEvent("push",t,e)))},focus:function(e,t){var i,n,r=this;return t?(r.focusTask||(r.focusTask=new Ext.util.DelayedTask(r.focus)),r.focusTask.delay(Ext.isNumber(t)?t:10,null,r,[e,!1])):(e&&(r.textareaEl&&r.textareaEl.dom&&(i=r.textareaEl.dom.value),i&&i.length&&r.execCmd("selectall",!0)),(n=r.getFocusEl())&&n.focus&&n.focus()),r},initEditor:function(){var e,t=this,i=t.getEditorBody(),n=t.textareaEl.getStyle(["font-size","font-family","background-image","background-repeat","background-color","color"]),r=t.getDoc(),o=Ext.get(r);if(n["background-attachment"]="fixed",i.bgProperties="fixed",Ext.DomHelper.applyStyles(i,n),o){try{o.clearListeners()}catch(e){}e=Ext.Function.createBuffered(t.updateToolbar,100,t),o.on({mousedown:e,dblclick:e,click:e,keyup:e,delegated:!1}),e=t.onRelayedEvent,o.on({mousedown:e,mousemove:e,mouseup:e,click:e,dblclick:e,delegated:!1,scope:t}),Ext.isGecko&&o.on("keypress",t.applyCommand,t),t.fixKeys&&o.on("keydown",t.fixKeys,t,{delegated:!1}),t.fixKeysAfter&&o.on("keyup",t.fixKeysAfter,t,{delegated:!1}),Ext.isIE9&&Ext.get(r.documentElement).on("focus",t.focus,t),Ext.isIE8&&(o.on("focusout",function(){t.savedSelection="None"!==r.selection.type?r.selection.createRange():null},t),o.on("focusin",function(){t.savedSelection&&t.savedSelection.select()},t)),Ext.getWin().on("unload",t.destroyEditor,t),t.initialized=!0,t.pushValue(),t.setReadOnly(t.readOnly),t.fireEvent("initialize",t)}},destroyEditor:function(){var e,t,i=this.initializeTask;if(i&&Ext.TaskManager.stop(i,!0),this.rendered&&(Ext.getWin().un("unload",this.destroyEditor,this),(e=this.getDoc())&&(Ext.get(e).destroy(),e.hasOwnProperty)))for(t in e)try{e.hasOwnProperty(t)&&delete e[t]}catch(e){}},doDestroy:function(){this.destroyEditor(),this.callParent()},onRelayedEvent:function(e){var t=this.iframeEl,i=Ext.fly(t).getTrueXY(),n=e.getXY(),r=e.getXY();e.xy=[i[0]+r[0],i[1]+r[1]],e.injectEvent(t),e.xy=n},onFirstFocus:function(){var e,t,i=this;if(i.activated=!0,i.disableItems(i.readOnly),Ext.isGecko){i.win.focus(),(e=i.win.getSelection()).focusNode&&!i.getValue().length&&((t=e.getRangeAt(0)).selectNodeContents(i.getEditorBody()),t.collapse(!0),i.deferFocus());try{i.execCmd("useCSS",!0),i.execCmd("styleWithCSS",!1)}catch(e){}}i.fireEvent("activate",i)},adjustFont:function(e){var t,i="increasefontsize"===e.getItemId()?1:-1,n=this.getDoc().queryCommandValue("FontSize")||"2",r=Ext.isString(n)&&-1!==n.indexOf("px");n=parseInt(n,10),n=r?(n=n<=10?1+i:n<=13?2+i:n<=16?3+i:n<=18?4+i:n<=24?5+i:6+i,Ext.Number.constrain(n,1,6)):((t=Ext.isSafari)&&(i*=2),Math.max(1,n+i)+(t?"px":0)),this.relayCmd("FontSize",n)},updateToolbar:function(){var e,i,n,r,o,t,a,s,l=this;if(!l.readOnly)if(l.activated){for(n=l.getToolbar().items.map,r=l.getDoc(),l.enableFont&&(t=r.queryCommandValue("fontName"),o=(t?t.split(",")[0].replace(l.reStripQuotes,""):l.defaultFont).toLowerCase(),a=l.fontSelect.dom,o===a.value&&o===t||(a.value=o)),l.enableFormat&&d("bold","italic","underline"),l.enableAlignments&&d("justifyleft","justifycenter","justifyright"),l.enableLists&&d("insertorderedlist","insertunorderedlist"),s=l.toolbar.query("menu"),e=0;e<s.length;e++)s[e].hide();l.syncValue()}else l.onFirstFocus();function d(){var t;for(e=0,i=arguments.length;e<i;e++){o=arguments[e];try{t=r.queryCommandState(o)}catch(e){t=!1}n[o].toggle(t)}}},relayBtnCmd:function(e){this.relayCmd(e.getItemId())},relayCmd:function(e,t){Ext.defer(function(){this.destroyed||(this.win.focus(),this.execCmd(e,t),this.updateToolbar())},10,this)},execCmd:function(e,t){this.getDoc().execCommand(e,!1,void 0===t?null:t),this.syncValue()},applyCommand:function(e){if(e.ctrlKey){var t,i=e.getCharCode();if(0<i){switch(i=String.fromCharCode(i)){case"b":t="bold";break;case"i":t="italic";break;case"u":t="underline"}t&&(this.win.focus(),this.execCmd(t),this.deferFocus(),e.preventDefault())}}},insertAtCursor:function(e){var t,i,n,r,o,a,s=this.getWin(),l=this.getDoc();if(this.activated){if(s.focus(),s.getSelection){if((t=s.getSelection()).getRangeAt&&t.rangeCount){for((i=t.getRangeAt(0)).deleteContents(),(n=l.createElement("div")).innerHTML=e,r=l.createDocumentFragment();o=n.firstChild;)a=r.appendChild(o);i.insertNode(r),a&&((i=i.cloneRange()).setStartAfter(a),i.collapse(!0),t.removeAllRanges(),t.addRange(i))}}else l.selection&&"Control"!==t.type&&((i=(t=l.selection).createRange()).collapse(!0),t.createRange().pasteHTML(e));this.deferFocus()}},fixKeys:Ext.isIE10m?function(e){var t,i=e.getKey(),n=this.getDoc(),r=this.readOnly;i===e.TAB&&(e.stopEvent(),r||(t=n.selection.createRange())&&(t.collapse&&(t.collapse(!0),t.pasteHTML("&#160;&#160;&#160;&#160;")),this.deferFocus()))}:Ext.isOpera?function(e){var t=e.getKey(),i=this.readOnly;t===e.TAB&&(e.stopEvent(),i||(this.win.focus(),this.execCmd("InsertHTML","&#160;&#160;&#160;&#160;"),this.deferFocus()))}:null,fixKeysAfter:Ext.isIE?function(e){var t,i=e.getKey(),n=this.getDoc();this.readOnly||i!==e.BACKSPACE&&i!==e.DELETE||"<p>&nbsp;</p>"!==(t=n.body.innerHTML)&&"<P>&nbsp;</P>"!==t||(n.body.innerHTML="")}:null,getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:Ext.baseCSSPrefix+"html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:Ext.baseCSSPrefix+"html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:Ext.baseCSSPrefix+"html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:Ext.baseCSSPrefix+"html-editor-tip"}},privates:{deferFocus:function(){this.focus(!1,!0)},getFocusEl:function(){return this.sourceEditMode?this.textareaEl:this.iframeEl}}}),Ext.define("Ext.view.TagKeyNav",{extend:"Ext.view.BoundListKeyNav",alias:"view.navigation.tagfield",onKeySpace:function(e){var t=this.view.pickerField;return!t.isExpanded||""!==t.inputEl.dom.value||(t.preventKeyUpEvent=!0,this.navigateOnSpace=!0,this.callParent([e]),e.stopEvent(),!1)}}),Ext.define("Ext.form.field.Tag",{extend:"Ext.form.field.ComboBox",xtype:"tagfield",requires:["Ext.selection.Model","Ext.data.Store","Ext.data.ChainedStore","Ext.view.TagKeyNav"],noWrap:!1,multiSelect:!0,delimiter:",",tipTpl:void 0,forceSelection:!0,createNewOnEnter:!1,createNewOnBlur:!1,encodeSubmitValue:!1,triggerOnClick:!0,stacked:!1,filterPickList:!1,clearOnBackspace:!0,grow:!0,growMin:!1,growMax:!1,simulatePlaceholder:!0,selectOnFocus:!0,ariaHelpText:"Use Up and Down arrows to view available values, Enter to select. Use Left and Right arrows to view selected values, Delete key to deselect.",ariaHelpTextEditable:"Use Up and Down arrows to view available values, Enter to select. Type and press Enter to create a new value. Use Left and Right arrows to view selected values, Delete key to deselect.",ariaSelectedText:"Selected {0}.",ariaDeselectedText:"{0} removed from selection.",ariaNoneSelectedText:"No value selected.",ariaSelectedListLabel:"Selected values",ariaAvailableListLabel:"Available values",fieldSubTpl:['<div id="{cmpId}-listWrapper" data-ref="listWrapper"'+(Ext.isGecko?' tabindex="-1"':""),'<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>',' class="'+Ext.baseCSSPrefix+'tagfield {fieldCls} {typeCls} {typeCls}-{ui}"<tpl if="wrapperStyle"> style="{wrapperStyle}"</tpl>>','<span id="{cmpId}-selectedText" data-ref="selectedText" aria-hidden="true" class="'+Ext.baseCSSPrefix+'hidden-clip"></span>','<ul id="{cmpId}-itemList" data-ref="itemList" role="presentation" class="'+Ext.baseCSSPrefix+'tagfield-list{itemListCls}">','<li id="{cmpId}-inputElCt" data-ref="inputElCt" role="presentation" class="'+Ext.baseCSSPrefix+'tagfield-input">','<input id="{cmpId}-inputEl" data-ref="inputEl" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx != null">tabindex="{tabIdx}" </tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>','class="'+Ext.baseCSSPrefix+'tagfield-input-field {inputElCls} {emptyCls} {fixCls}" autocomplete="off">',"</li>","</ul>",'<ul id="{cmpId}-ariaList" data-ref="ariaList" role="listbox"','<tpl if="ariaSelectedListLabel"> aria-label="{ariaSelectedListLabel}"</tpl>','<tpl if="multiSelect"> aria-multiselectable="true"</tpl>',' class="'+Ext.baseCSSPrefix+'tagfield-arialist">',"</ul>","</div>",{disableFormats:!0}],postSubTpl:['<label id="{cmpId}-placeholderLabel" data-ref="placeholderLabel" for="{cmpId}-inputEl" class="{placeholderCoverCls} {placeholderCoverCls}-{ui} {emptyCls}">{emptyText}</label>',"</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],extraFieldBodyCls:Ext.baseCSSPrefix+"tagfield-body",childEls:["listWrapper","itemList","inputEl","inputElCt","selectedText","ariaList"],clearValueOnEmpty:!1,ariaSelectable:!0,ariaEl:"listWrapper",notEditableCls:Ext.baseCSSPrefix+"not-editable",tagItemCls:Ext.baseCSSPrefix+"tagfield-item",tagItemTextCls:Ext.baseCSSPrefix+"tagfield-item-text",tagItemCloseCls:Ext.baseCSSPrefix+"tagfield-item-close",tagItemSelector:"."+Ext.baseCSSPrefix+"tagfield-item",tagItemCloseSelector:"."+Ext.baseCSSPrefix+"tagfield-item-close",tagSelectedCls:Ext.baseCSSPrefix+"tagfield-item-selected",initComponent:function(){var e=this,t=e.typeAhead,i=e.delimiter;t&&!e.editable&&Ext.raise("If typeAhead is enabled the combo must be editable: true -- please change one of those settings."),(e.createNewOnEnter||e.createNewOnBlur)&&(e.forceSelection=!1),e.typeAhead=!1,null==e.value&&(e.value=[]),e.selectionModel=new Ext.selection.Model({mode:"MULTI",onSelectChange:function(e,t,i,n){n()},listeners:{scope:e,selectionchange:e.onSelectionChange,focuschange:e.onFocusChange}}),e.ariaHelp||(e.ariaHelp=e.createNewOnEnter?e.ariaHelpTextEditable:e.ariaHelpText),e.callParent(),e.typeAhead=t,i&&e.multiSelect&&(e.delimiterRegexp=new RegExp(Ext.String.escapeRegex(i)))},initEvents:function(){var e=this,t=e.inputEl;e.callParent(arguments),e.enableKeyEvents||(t.on("keydown",e.onKeyDown,e),t.on("keyup",e.onKeyUp,e)),e.listWrapper.on({scope:e,click:e.onItemListClick,mousedown:e.onItemMouseDown})},createPicker:function(){var e;return e=Ext.apply({navigationModel:"tagfield"},this.defaultListConfig),this.ariaAvailableListLabel&&(e.ariaRenderAttributes={"aria-label":Ext.String.htmlEncode(this.ariaAvailableListLabel)}),this.defaultListConfig=e,this.callParent()},isValid:function(){var e=this.disabled;return this.forceValidation||!e?this.validateValue(this.getValue()):e},onBindStore:function(e){var t=this;t.callParent([e]),e&&(t.valueStore=new Ext.data.Store({model:e.getModel(),proxy:"memory",useModelWarning:!1}),t.selectionModel.bindStore(t.valueStore),t.filterPickList&&(t.listFilter=new Ext.util.Filter({scope:t,filterFn:t.filterPicked}),t.changingFilters=!0,e.filter(t.listFilter),t.changingFilters=!1))},filterPicked:function(e){return!this.valueCollection.contains(e)},onUnbindStore:function(e){var t=this.valueStore,i=this.picker;i&&i.bindStore(null),t&&(t.destroy(),this.valueStore=null),this.filterPickList&&!e.destroyed&&(this.changingFilters=!0,e.removeFilter(this.listFilter),this.changingFilters=!1),this.callParent(arguments)},clearInput:function(){var e,t=this.getValueRecords(),i=this.inputEl&&this.inputEl.dom.value;if(t.length&&i){if(e=t[t.length-1].get(this.displayField),!Ext.String.startsWith(e,i,!0))return;this.inputEl.dom.value="","local"===this.queryMode&&(this.clearLocalFilter(),this.getPicker().refresh())}this.syncInputWidth()},onValueCollectionEndUpdate:function(){var e=this,t=e.valueCollection.items,i=e.valueStore;e.isSelectionUpdating()||(e.filterPickList&&(e.changingFilters=!0,e.store.filter(e.listFilter),e.changingFilters=!1),e.callParent(),Ext.suspendLayouts(),i&&(i.suspendEvents(),i.loadRecords(t),i.resumeEvents()),e.refreshEmptyText(),e.clearInput(),Ext.resumeLayouts(!0),e.alignPicker())},checkValueOnDataChange:Ext.emptyFn,onSelectionChange:function(e,t){var i,n=this.inputEl;this.applyMultiselectItemMarkup(),this.applyAriaListMarkup(),this.applyAriaSelectedText(),n&&(0===t.length?n.dom.removeAttribute("aria-activedescendant"):(i=this.getAriaListNode(t[0]))&&n.dom.setAttribute("aria-activedescendant",i.id)),this.fireEvent("valueselectionchange",this,t)},onFocusChange:function(e,t,i){this.callParent([e,t,i]),this.fireEvent("valuefocuschange",this,t,i)},getAriaListNode:function(e){var t,i=this.ariaList;return i&&e&&(t=i.selectNode('[data-recordid="'+e.internalId+'"]')),t},doDestroy:function(){Ext.destroy(this.selectionModel),this.callParent()},getSubTplData:function(e){var t,i=this,n=i.id,r=i.callParent(arguments),o=i.emptyText,a=o&&r.value.length<1,s=i.growMin,l=i.growMax,d="";return r.value="",r.emptyText=a?o:"",r.itemListCls="",r.emptyCls=a?i.emptyUICls:"",i.grow?(Ext.isNumber(s)&&0<s&&(d+="min-height:"+s+"px;"),Ext.isNumber(l)&&0<l&&(d+="max-height:"+l+"px;")):d+="max-height: 1px;",r.wrapperStyle=d,!0===i.stacked&&(r.itemListCls+=" "+Ext.baseCSSPrefix+"tagfield-stacked"),i.multiSelect||(r.itemListCls+=" "+Ext.baseCSSPrefix+"tagfield-singleselect"),i.ariaStaticRoles[i.ariaRole]||(r.multiSelect=i.multiSelect,r.ariaSelectedListLabel=Ext.String.htmlEncode(i.ariaSelectedListLabel),(t=r.ariaElAttributes)&&(t["aria-owns"]=n+"-inputEl "+n+"-picker "+n+"-ariaList"),(t=r.inputElAriaAttributes)&&(t.role="textbox",t["aria-describedby"]=n+"-selectedText "+(t["aria-describedby"]||""))),r},onRender:function(e,t){this.callParent([e,t]),this.emptyClsElements.push(this.listWrapper,this.placeholderLabel)},afterRender:function(){var e=this.inputEl;this.emptyText&&Ext.supports.Placeholder&&e&&e.dom.removeAttribute("placeholder"),this.applyMultiselectItemMarkup(),this.applyAriaListMarkup(),this.applyAriaSelectedText(),this.callParent()},findRecord:function(e,t){var i=this.getStore().queryRecords(e,t);return!!i.length&&i[0]},getCursorPosition:function(){var e;return e=document.selection?((e=document.selection.createRange()).collapse(!0),e.moveStart("character",-this.inputEl.dom.value.length),e.text.length):this.inputEl.dom.selectionStart},hasSelectedText:function(){var e=this.inputEl.dom;return document.selection?document.selection.createRange().parentElement()===e:e.selectionStart!==e.selectionEnd},onKeyDown:function(e){var t,i,n,r,o,a,s=this,l=e.getKey(),d=s.inputEl,u=d&&d.dom.value,c=s.valueCollection,h=s.selectionModel,f=!1;if(!(s.destroyed||s.readOnly||s.disabled)&&s.editable){if(0<(t=c.getCount())&&""===u)if(i=0<h.getCount()?c.indexOf(h.getLastSelected()):-1,l===e.BACKSPACE&&s.clearOnBackspace||l===e.DELETE&&-1<i){if(-1<i){for(1<h.getCount()&&(i=-1),r=[],o=0,a=(n=h.getSelection()).length;o<a;o++)r.push(n[o].get(s.displayField));r=r.join(", ")}else r=(n=c.last()).get(s.displayField);c.remove(n),r&&(s.ariaErrorEl.dom.innerHTML=Ext.String.formatEncode(s.ariaDeselectedText,r)),h.clearSelections(),i===t-1?h.select(c.last()):-1<i?h.select(i):c.getCount()&&h.select(c.last()),f=!0}else l===e.RIGHT||l===e.LEFT?-1===i&&l===e.LEFT?(h.select(c.last()),f=!0):-1<i&&(l===e.RIGHT?i<t-1?(h.select(i+1,e.shiftKey),f=!0):e.shiftKey||(h.deselectAll(),f=!0):l===e.LEFT&&0<i&&(h.select(i-1,e.shiftKey),f=!0)):l===e.A&&e.ctrlKey&&(h.selectAll(),f=e.A);if(f)return s.preventKeyUpEvent=f,void e.stopEvent();s.isExpanded&&l===e.ENTER&&s.picker.highlightedItem&&(s.preventKeyUpEvent=!0),s.enableKeyEvents&&s.callParent(arguments),e.isSpecialKey()||e.hasModifier()||h.deselectAll()}},onKeyUp:function(e,t){var i=this,n=i.inputEl,r=n.dom.value,o=i.preventKeyUpEvent;if(i.preventKeyUpEvent)return e.stopEvent(),void(!0!==o&&e.getKey()!==o||delete i.preventKeyUpEvent);(i.multiSelect&&i.delimiterRegexp&&i.delimiterRegexp.test(r)||i.createNewOnEnter&&e.getKey()===e.ENTER)&&(i.createNewOnEnter&&r&&(i.ariaErrorEl.dom.innerHTML=Ext.String.formatEncode(i.ariaSelectedText,r)),r=Ext.Array.clean(r.split(i.delimiterRegexp)),n.dom.value="",i.setValue(i.valueStore.getRange().concat(r)),n.focus()),i.callParent([e,t])},onEsc:function(e){var t=this.selectionModel,i=this.isExpanded;this.callParent([e]),!i&&0<t.getCount()&&t.deselectAll(),e.stopEvent()},onTypeAhead:function(){var e,t,i,n=this.displayField,r=this.inputEl.dom,o=this.getStore().findRecord(n,r.value);o&&(t=(e=o.get(n)).length,0!==(i=r.value.length)&&i!==t&&(this.lastMutatedValue=e,r.value=e,this.syncInputWidth(),this.selectText(i,e.length)))},onItemListClick:function(e){var t=this,i=t.selectionModel,n=e.getTarget(t.tagItemSelector),r=!!n&&e.getTarget(t.tagItemCloseSelector);t.readOnly||t.disabled||(e.stopPropagation(),n?(r?(t.removeByListItemNode(n),0<t.valueStore.getCount()&&t.fireEvent("select",t,t.valueStore.getRange())):t.toggleSelectionByListItemNode(n,e.shiftKey),Ext.supports.TouchEvents||t.inputEl.focus()):(0<i.getCount()&&i.deselectAll(),t.inputEl.focus(),t.triggerOnClick&&t.onTriggerClick()))},onItemMouseDown:function(e){e.target!==this.inputEl.dom&&e.preventDefault()},getMultiSelectItemMarkup:function(){var t=this,e=t._getChildElCls&&t._getChildElCls()||"";return t.multiSelectItemTpl||(t.labelTpl||(t.labelTpl="{"+t.displayField+"}"),t.labelTpl=t.lookupTpl("labelTpl"),t.tipTpl&&(t.tipTpl=t.lookupTpl("tipTpl")),t.multiSelectItemTpl=new Ext.XTemplate(['<tpl for=".">','<li data-selectionIndex="{[xindex - 1]}" data-recordId="{internalId}" role="presentation" class="'+t.tagItemCls+e,'<tpl if="this.isSelected(values)">'," "+t.tagSelectedCls,"</tpl>","{%","values = values.data;","%}",t.tipTpl?'" data-qtip="{[this.getTip(values)]}">':'">','<div role="presentation" class="'+t.tagItemTextCls+'">{[this.getItemLabel(values)]}</div>','<div role="presentation" class="'+t.tagItemCloseCls+e+'"></div>',"</li>","</tpl>",{isSelected:function(e){return t.selectionModel.isSelected(e)},getItemLabel:function(e){return Ext.String.htmlEncode(t.labelTpl.apply(e))},getTip:function(e){return Ext.String.htmlEncode(t.tipTpl.apply(e))},strict:!0}])),t.multiSelectItemTpl.isTemplate||(t.multiSelectItemTpl=this.lookupTpl("multiSelectItemTpl")),t.multiSelectItemTpl.apply(t.valueCollection.getRange())},applyMultiselectItemMarkup:function(){var e=this.itemList;e&&(e.select("."+Ext.baseCSSPrefix+"tagfield-item").destroy(),this.inputElCt.insertHtml("beforeBegin",this.getMultiSelectItemMarkup()),this.autoSize())},getAriaListMarkup:function(){var e,t=this;return t.ariaListItemTpl||(t.ariaListItemTpl=new Ext.XTemplate(['<tpl for=".">','<li id="'+t.id+'-{internalId}" role="option"',' class="'+Ext.baseCSSPrefix+'tagfield-arialist-item"',' aria-selected="{[this.isPicked(values)]}"','  data-recordId="{internalId}"',">","{[this.getItemLabel(values.data)]}","</li>","</tpl>",{isPicked:function(e){return t.filterPicked(e)?"false":"true"},isSelected:function(e){return t.selectionModel.isSelected(e)?"true":"false"},getItemLabel:function(e){return Ext.String.htmlEncode(t.labelTpl.apply(e))},strict:!0}])),t.ariaListItemTpl.isTemplate||(t.ariaListtemTpl=t.lookupTpl("ariaListItemTpl")),e=t.valueCollection.getRange(),t.ariaListItemTpl.apply(e)},applyAriaListMarkup:function(){var e=this.ariaList;e&&(e.select("*").destroy(),e.insertHtml("afterBegin",this.getAriaListMarkup()))},getAriaSelectedText:function(e){var t=this;return t.ariaSelectedItemTpl||(t.ariaSelectedItemTpl=new Ext.XTemplate(['<tpl for="." between=", ">',"{[this.getItemLabel(values.data)]}","</tpl>",{getItemLabel:function(e){return Ext.String.htmlEncode(t.labelTpl.apply(e))},strict:!0}])),t.ariaSelectedItemTpl.isTemplate||(t.ariaSelectedItemTpl=t.lookupTpl("ariaSelectedItemTpl")),Ext.String.format(t.ariaSelectedText,t.ariaSelectedItemTpl.apply(e))},applyAriaSelectedText:function(){var e,t,i=this.selectedText;i&&(t=(e=this.valueCollection.getRange()).length?this.getAriaSelectedText(e):this.ariaNoneSelectedText,i.dom.innerHTML=Ext.String.htmlEncode(t))},getRecordByListItemNode:function(e){return this.valueCollection.items[Number(e.getAttribute("data-selectionIndex"))]},toggleSelectionByListItemNode:function(e,t){var i=this.getRecordByListItemNode(e),n=this.selectionModel;i&&(n.isSelected(i)?n.deselect(i):n.select(i,t))},removeByListItemNode:function(e){var t=this.getRecordByListItemNode(e);t&&this.pickerSelectionModel.deselect(t)},getDisplayValue:function(){return this.getRawValue()},getRawValue:function(){var e,t,i=this.getValueRecords(),n=[];for(e=0,t=i.length;e<t;e++)n.push(i[e].data[this.displayField]);return n.join(",")},setRawValue:function(e){},removeValue:function(e){var t,i,n,r=this.valueCollection,o=[];if(e){for(i=0,t=(e=Ext.Array.from(e)).length;i<t;++i)(n=e[i]).isModel||(n=r.byValue.get(n)),n&&o.push(n);this.valueCollection.beginUpdate(),this.pickerSelectionModel.deselect(o),this.valueCollection.endUpdate()}},getValue:function(){var e=this.callParent();return e=e&&Ext.Array.from(e)},setValue:function(e,t,i){var n,r,o,a,s,l,d=this,u=d.valueStore,c=d.valueField,h=[],f=d.store,g=d.autoLoadOnValue,p=0<f.getCount()||f.isLoaded(),m=f.hasPendingLoad(),x=g&&!p&&!m;if(Ext.isEmpty(e)?l=!(e=null):e=Ext.isString(e)&&d.multiSelect?e.split(d.delimiter):Ext.Array.from(e,!0),!l&&"remote"===d.queryMode&&!f.isEmptyStore&&!0!==i&&x){for(o=0,r=e.length;o<r;o++)(n=e[o])&&n.isModel||(-1<(a=u.findExact(c,n))?e[o]=u.getAt(a):((a=d.findRecord(c,n))||(d.forceSelection?h.push(n):((a={})[d.valueField]=n,a[d.displayField]=n,a=new(d.valueStore.getModel())(a))),a&&(e[o]=a)));if(h.length)return(s={})[d.valueParam||d.valueField]=h.join(d.delimiter),f.load({params:s,callback:function(){d.setValue(e,t,!0),d.autoSize(),d.lastQuery=!1}}),!1}if(!l&&!d.multiSelect&&0<e.length){for(o=e.length-1;0<=o;o--)if(e[o].isModel){e=e[o];break}Ext.isArray(e)&&(e=e[e.length-1])}return d.callParent([e,t])},updateValue:function(){var e,t=this,i=t.valueCollection.getRange(),n=i.length;for(e=0;e<n;e++)i[e]=i[e].get(t.valueField);t.setHiddenValue(i),t.value=t.multiSelect?i:i[0],Ext.isDefined(t.value)||(t.value=void 0),t.applyMultiselectItemMarkup(),t.applyAriaListMarkup(),t.applyAriaSelectedText(),t.checkChange()},getValueRecords:function(){return this.valueCollection.getRange()},getSubmitData:function(){var e=this.callParent(arguments);return this.multiSelect&&this.encodeSubmitValue&&e&&e[this.name]&&(e[this.name]=Ext.encode(e[this.name])),e},assertValue:function(){var e=this.inputEl.dom.value,t=!Ext.isEmpty(e)&&this.findRecordByDisplay(e),i=!1;t||this.forceSelection||!this.createNewOnBlur||Ext.isEmpty(e)?t&&(i=t):i=e,i&&this.addValue(i),this.inputEl.dom.value="",this.syncInputWidth(),this.collapse(),this.refreshEmptyText()},isEqual:function(e,t){var i,n,r=Ext.Array.from,o=this.valueField;if(e=r(e),t=r(t),(n=e.length)!==t.length)return!1;for(i=0;i<n;i++)if((e[i].isModel?e[i].get(o):e[i])!==(t[i].isModel?t[i].get(o):t[i]))return!1;return!0},onFocus:function(){var e=this.focusCls,t=this.itemList;e&&t&&t.addCls(e),this.callParent(arguments)},onBlur:function(){var e=this.focusCls,t=this.itemList;e&&t&&t.removeCls(e),this.callParent(arguments)},renderActiveError:function(){var e=this.invalidCls,t=this.itemList,i=this.hasActiveError();e&&t&&t[i?"addCls":"removeCls"](this.invalidCls+"-field"),this.callParent(arguments)},autoSize:function(){return this.grow&&this.rendered&&(this.autoSizing=!0,this.updateLayout()),this},afterComponentLayout:function(){var e;this.autoSizing&&(e=this.getHeight())!==this.lastInputHeight&&(this.isExpanded&&this.alignPicker(),this.fireEvent("autosize",this,e),this.lastInputHeight=e,this.autoSizing=!1)},onFieldMutation:function(e){this.callParent([e]),this.syncInputWidth(!0)},syncInputWidth:function(e){var t,i=this.inputEl,n=!(!i||!i.dom.value)||this.editable&&this.hasFocus;this.toggleCls(this.notEditableCls,!n),n&&(t=Ext.util.TextMetrics.measure(i,i.dom.value).width,t+=3,i.setWidth(t),e&&(this.listWrapper.dom.scrollTop=99999))}}),Ext.define("Ext.picker.Time",{extend:"Ext.view.BoundList",alias:"widget.timepicker",requires:["Ext.data.Store","Ext.Date"],config:{store:!0},statics:{createStore:function(e,t){var i,n,r=Ext.Date,o=r.clearTime,a=this.prototype.initDate,s=[];for(i=o(new Date(a[0],a[1],a[2])),n=r.add(o(new Date(a[0],a[1],a[2])),"mi",1439);i<=n;)s.push({disp:r.dateFormat(i,e),date:i}),i=r.add(i,"mi",t);return new Ext.data.Store({model:Ext.picker.Time.prototype.modelType,data:s})}},increment:15,format:"g:i A",displayField:"disp",initDate:[2008,0,1],componentCls:Ext.baseCSSPrefix+"timepicker",alignOnScroll:!1,loadMask:!1,initComponent:function(){var e=Ext.Date,t=e.clearTime,i=this.initDate;this.absMin=t(new Date(i[0],i[1],i[2])),this.absMax=e.add(t(new Date(i[0],i[1],i[2])),"mi",1439),this.updateList(),this.callParent()},setStore:function(e){this.store=!0===e?Ext.picker.Time.createStore(this.format,this.increment):e},setMinValue:function(e){this.minValue=e,this.updateList()},setMaxValue:function(e){this.maxValue=e,this.updateList()},normalizeDate:function(e){var t=this.initDate;return e.setFullYear(t[0],t[1],t[2]),e},updateList:function(){var i=this.normalizeDate(this.minValue||this.absMin),n=this.normalizeDate(this.maxValue||this.absMax),e=this.getStore().getFilters(),t=this.rangeFilter;e.beginUpdate(),t&&e.remove(t),t=this.rangeFilter=new Ext.util.Filter({filterFn:function(e){var t=e.get("date");return i<=t&&t<=n}}),e.add(t),e.endUpdate()}},function(){this.prototype.modelType=Ext.define(null,{extend:"Ext.data.Model",fields:["disp","date"]})}),Ext.define("Ext.form.field.Time",{extend:"Ext.form.field.ComboBox",alias:"widget.timefield",alternateClassName:["Ext.form.TimeField","Ext.form.Time"],requires:["Ext.form.field.Date","Ext.picker.Time","Ext.view.BoundListKeyNav","Ext.Date"],triggerCls:Ext.baseCSSPrefix+"form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",formatText:"Expected time format HH:MM space AM or PM",increment:15,pickerMaxHeight:300,selectOnTab:!0,snapToIncrement:!1,valuePublishEvent:["select","blur"],initDate:"1/1/2008",initDateParts:[2008,0,1],initDateFormat:"j/n/Y",queryMode:"local",displayField:"disp",valueField:"date",initComponent:function(){var e=this,t=e.minValue,i=e.maxValue;t&&e.setMinValue(t),i&&e.setMaxValue(i),e.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : this.formatDate(values["'+e.displayField+'"])]}<tpl if="xindex < xcount">'+e.delimiter+"</tpl></tpl>",{formatDate:e.formatDate.bind(e)}),e.store=Ext.picker.Time.createStore(e.format,e.increment),e.callParent(),e.getPicker()},afterQuery:function(e){this.callParent([e]),null===this.value&&this.getRawValue()&&this.validateOnChange&&this.validate()},isEqual:function(e,t){var i,n,r=Ext.Array.from,o=Ext.Date.isEqual;if(e=r(e),t=r(t),(n=e.length)!==t.length)return!1;for(i=0;i<n;i++)if(!(t[i]instanceof Date&&e[i]instanceof Date&&o(t[i],e[i])))return!1;return!0},setMinValue:function(e){var t=this.picker;this.setLimit(e,!0),t&&t.setMinValue(this.minValue)},setMaxValue:function(e){var t=this.picker;this.setLimit(e,!1),t&&t.setMaxValue(this.maxValue)},setLimit:function(e,t){var i,n;Ext.isString(e)?i=this.parseDate(e):Ext.isDate(e)&&(i=e),i?(n=this.getInitDate()).setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()):n=null,this[t?"minValue":"maxValue"]=n},getInitDate:function(e,t,i){var n=this.initDateParts;return new Date(n[0],n[1],n[2],e||0,t||0,i||0,0)},valueToRaw:function(e){return this.formatDate(this.parseDate(e))},getErrors:function(e){e=0<arguments.length?e:this.getRawValue();var t,i,n,r,o=this,a=Ext.String.format,s=o.callParent([e]),l=o.minValue,d=o.maxValue,u=o.displayTplData,c=o.getRawValue();if(u&&0<u.length)for(t=0,i=u.length;t<i;t++)r=(r=u[t]).date||r.disp,(n=o.parseDate(r))||s.push(a(o.invalidText,r,Ext.Date.unescapeFormat(o.format)));else c.length&&((n=o.parseDate(c))||s.push(a(o.invalidText,c,Ext.Date.unescapeFormat(o.format))));return s.length||(l&&n<l&&s.push(a(o.minText,o.formatDate(l))),d&&d<n&&s.push(a(o.maxText,o.formatDate(d)))),s},formatDate:function(e){var t,i,n=[];for(t=0,i=(e=Ext.Array.from(e)).length;t<i;t++)n.push(Ext.form.field.Date.prototype.formatDate.call(this,e[t]));return n.join(this.delimiter)},parseDate:function(e){var t,i=e,n=this.altFormats,r=this.altFormatsArray,o=0;if(e&&!Ext.isDate(e)&&!(i=this.safeParse(e,this.format))&&n)for(t=(r=r||n.split("|")).length;o<t&&!i;++o)i=this.safeParse(e,r[o]);return i&&this.snapToIncrement&&(i=new Date(Ext.Number.snap(i.getTime(),60*this.increment*1e3))),i},safeParse:function(e,t){var i,n=Ext.Date,r=null;return n.formatContainsDateInfo(t)?r=n.parse(e,t):(i=n.parse(this.initDate+" "+e,this.initDateFormat+" "+t))&&(r=i),r},getSubmitValue:function(){var e=this.submitFormat||this.format,t=this.getValue();return t?Ext.Date.format(t,e):null},createPicker:function(){return this.listConfig=Ext.apply({xtype:"timepicker",pickerField:this,cls:void 0,minValue:this.minValue,maxValue:this.maxValue,increment:this.increment,format:this.format,maxHeight:this.pickerMaxHeight},this.listConfig),this.callParent()},completeEdit:function(){var e=this.getValue();this.callParent(arguments),this.validateValue(e)&&this.setValue(e)},findRecordByValue:function(e){return"string"==typeof e&&(e=this.parseDate(e)),this.callParent([e])},rawToValue:function(e){var t,i,n,r;if(this.multiSelect){for(i=[],n=0,r=(t=Ext.Array.from(e)).length;n<r;n++)i.push(this.parseDate(t[n]));return i}return this.parseDate(e)},setValue:function(e){if(!this.creatingPicker)return this.getPicker(),Ext.isDate(e)&&(e=this.getInitDate(e.getHours(),e.getMinutes(),e.getSeconds())),this.callParent([e])},getValue:function(){return this.rawToValue(this.callParent(arguments))}}),Ext.define("Ext.form.field.Trigger",{extend:"Ext.form.field.Text",alias:["widget.triggerfield","widget.trigger"],alternateClassName:["Ext.form.TriggerField","Ext.form.TwinTriggerField","Ext.form.Trigger"],requires:["Ext.dom.Helper","Ext.util.ClickRepeater"],triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",inheritableStatics:{warnDeprecated:function(){Ext.log.warn("Ext.form.field.Trigger is deprecated. Use Ext.form.field.Text instead.")}},onClassExtended:function(){this.warnDeprecated()},constructor:function(e){this.self.warnDeprecated(),this.callParent([e])}}),Ext.define("Ext.grid.CellContext",{isCellContext:!0,generation:0,constructor:function(e){this.view=e},setPosition:function(e,t){if(1===arguments.length)if(e.length)t=e[0],e=e[1];else{if(e.isCellContext)return this.setAll(e.view,e.rowIdx,e.colIdx,e.record,e.column);e.view&&(this.view=e.view),t=e.column,e=e.row}return this.setRow(e),this.setColumn(t),this},setAll:function(e,t,i,n,r){return this.view=e,this.rowIdx=t,this.colIdx=i,this.record=n,this.column=r,this.generation++,this},setRow:function(e){var t,i=this,n=i.view.dataSource,r=i.record;return null!=e&&("number"==typeof e?(t=n.getCount(),e=e<0?Math.max(t+e,0):Math.max(Math.min(e,t-1),0),i.rowIdx=e,i.record=n.getAt(e)):e.isModel?(i.record=e,i.rowIdx=n.indexOf(e)):(e.tagName||e.isElement)&&(i.record=i.view.getRecord(e),i.rowIdx=i.record?i.record.isCollapsedPlaceholder?n.indexOfPlaceholder(i.record):n.indexOf(i.record):-1)),i.record!==r&&i.generation++,i},setColumn:function(e){var t=this.view.getVisibleColumnManager(),i=this.column;return null!=e&&("number"==typeof e?(this.colIdx=e,this.column=t.getHeaderAtIndex(e)):e.isHeader&&(this.column=e,this.colIdx=t.indexOf(e))),this.column!==i&&this.generation++,this},setView:function(e){this.view=e,this.refresh()},getCell:function(e){return this.view.getCellByPosition(this,e)},getRow:function(e){var t=this.view.getRow(this.record);return e?t:Ext.get(t)},getNode:function(e){var t=this.view.getNode(this.record);return e?t:Ext.get(t)},isEqual:function(e){return e&&e.isCellContext&&e.record===this.record&&e.column===this.column},clone:function(){var e=new this.self(this.view);return e.rowIdx=this.rowIdx,e.colIdx=this.colIdx,e.record=this.record,e.column=this.column,e},privates:{isFirstColumn:function(){var e=this.getCell(!0);if(e)return!e.previousSibling},isLastColumn:function(){var e=this.getCell(!0);if(e)return!e.nextSibling},isLastRenderedRow:function(){return this.view.all.endIndex===this.rowIdx},getLastColumnIndex:function(){var e=this.getRow(!0);return e?e.lastChild.cellIndex:-1},refresh:function(){var e=this,t=e.view.dataSource.indexOf(e.record),i=e.view.getVisibleColumnManager().indexOf(e.column);e.setRow(-1===t?e.rowIdx:e.record),e.setColumn(-1===i?e.colIdx:e.column)},navigate:function(e){var t=this,i=t.view.getVisibleColumnManager().getColumns();switch(e){case-1:for(;t.colIdx?t.colIdx--:t.colIdx=i.length-1,t.setColumn(t.colIdx),!t.getCell(!0););break;case 1:for(;t.colIdx>=i.length?t.colIdx=0:t.colIdx++,t.setColumn(t.colIdx),!t.getCell(!0););}}},statics:{compare:function(e,t){return e.rowIdx-t.rowIdx||e.colIdx-t.colIdx}}}),Ext.define("Ext.grid.CellEditor",{extend:"Ext.Editor",alias:"widget.celleditor",isCellEditor:!0,alignment:"l-l!",hideEl:!1,cls:Ext.baseCSSPrefix+"small-editor "+Ext.baseCSSPrefix+"grid-editor "+Ext.baseCSSPrefix+"grid-cell-editor",treeNodeSelector:"."+Ext.baseCSSPrefix+"tree-node-text",shim:!1,shadow:!1,floating:!0,alignOnScroll:!1,useBoundValue:!1,focusLeaveAction:"completeEdit",setGrid:function(e){this.grid=e},startEdit:function(e,t,i,n){this.context=this.editingPlugin.context,this.callParent([e,t,i,n])},onShow:function(){var e=this.boundEl.dom.querySelector(this.context.view.innerSelector);e&&(this.isForTree&&(e=e.querySelector(this.treeNodeSelector)),Ext.fly(e).hide()),this.callParent(arguments)},onFocusEnter:function(){var e=this.context,t=e.view;this.reattachToBody(),e.node=t.getNode(e.record),e.row=t.getRow(e.record),e.cell=e.getCell(!0),e.rowIdx=t.indexOf(e.row),this.realign(!0),this.callParent(arguments),this.focusEnterEvent=null},onFocusLeave:function(e){var t=this.context.view,i=Ext.fly(e.relatedTarget);!1!==this[this.focusLeaveAction]()?(delete this.focusLeaveAction,t.destroyed||!t.el.contains(i)||i.isAncestor(e.target)&&i!==t.el||i.up(t.getCellSelector(),t.el,!0)||this.context.grid.setActionableMode(!1,t.actionPosition),this.cacheElement(),Ext.container.Container.prototype.onFocusLeave.apply(this,arguments)):e.event.stopEvent()},completeEdit:function(e){var t=this.context;if(this.editing&&(t.value=this.field.value,!1===this.editingPlugin.validateEdit(t)))return t.cancel&&(t.value=this.originalValue,this.editingPlugin.cancelEdit()),!!t.cancel;this.callParent([e])},onEditComplete:function(e,t){var i,n=this,r=Ext.Element.getActiveElement(),o=n.context,a=o&&o.store;n.editing=!1,(i=n.boundEl=n.context.getCell())&&(n.restoreCell(),i.contains(r)&&i.dom!==r&&i.focus()),n.callParent(arguments),t?(n.editingPlugin.cancelEdit(n),e&&a&&a.isExpandingOrCollapsing&&n.cacheElement()):n.editingPlugin.onEditComplete(n,n.getValue(),n.startValue)},cacheElement:function(e){this.editing&&!e||this.destroyed||this.isDetaching||(this.isDetaching=!0,this.detachFromBody(),this.isDetaching=!1)},onHide:function(){this.cacheElement(!0),Ext.Editor.superclass.onHide.apply(this,arguments)},onSpecialKey:function(e,t,i){var n=t.getKey(),r=this.completeOnEnter&&n===t.ENTER&&(!i||!i.fromBoundList),o=this.cancelOnEsc&&n===t.ESC,a=this.editingPlugin.view;(r||o)&&(t.stopEvent(),o&&(this.focusLeaveAction="cancelEdit"),a.ownerGrid.setActionableMode(!1))},getRefOwner:function(){return this.column&&this.column.getView()},restoreCell:function(){var e=this.boundEl.dom.querySelector(this.context.view.innerSelector);e&&(this.isForTree&&(e=e.querySelector(this.treeNodeSelector)),Ext.fly(e).show())},afterRender:function(){var e=this.field;this.callParent(arguments),e.isCheckbox&&e.mon(e.inputEl,{mousedown:this.onCheckBoxMouseDown,click:this.onCheckBoxClick,scope:this})},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onCheckBoxClick:function(){delete this.completeEdit,this.field.focus(!1,10)},realign:function(e){var t,i=this.boundEl,n=i.dom.querySelector(this.context.view.innerSelector),r=n.firstChild,o=i.getWidth(),a=Ext.Array.clone(this.offsets),s=this.grid,l="",d=!r||3===r.nodeType&&!Ext.String.trim(l=r.data).length;this.isForTree&&(t=this.getTreeNodeOffset(n),o-=Math.abs(t),a[0]+=t),s.columnLines&&(o-=i.getBorderWidth("rl")),!0===e&&this.field.setWidth(o),d&&(n.innerHTML="X"),this.alignTo(i,this.alignment,a),d&&(n.firstChild.data=l)},getTreeNodeOffset:function(e){return Ext.fly(e.querySelector(this.treeNodeSelector)).getOffsetsTo(e)[0]}}),Ext.define("Ext.grid.ColumnComponentLayout",{extend:"Ext.layout.component.Auto",alias:"layout.columncomponent",type:"columncomponent",setWidthInDom:!0,_paddingReset:{paddingTop:"",paddingBottom:""},columnAutoCls:Ext.baseCSSPrefix+"column-header-text-container-auto",beginLayout:function(e){this.callParent(arguments),e.titleContext=e.getEl("titleEl")},beginLayoutCycle:function(e){var t=this.owner,i=e.widthModel.shrinkWrap;this.callParent(arguments),i&&t.el.setWidth(""),t.textContainerEl[i&&!t.isGroupHeader?"addCls":"removeCls"](this.columnAutoCls),t.titleEl.setStyle(this._paddingReset)},publishInnerHeight:function(e,t){var i,n=this.owner;if(n.getRootHeaderCt().hiddenHeaders)e.setProp("innerHeight",0);else if(!e.hasRawContent){if(n.headerWrap&&!e.hasDomProp("width"))return void(this.done=!1);i=t-e.getBorderInfo().height,e.setProp("innerHeight",i-n.titleEl.getHeight(),!1)}},measureContentHeight:function(e){return e.el.dom.offsetHeight},publishInnerWidth:function(e,t){e.hasRawContent||e.setProp("innerWidth",t-e.getBorderInfo().width,!1)},calculateOwnerHeightFromContentHeight:function(e,t){var i=this.callParent(arguments),n=this.owner;return e.hasRawContent?i:!n.headerWrap||e.hasDomProp("width")?t+n.titleEl.getHeight()+e.getBorderInfo().height:null},calculateOwnerWidthFromContentWidth:function(e,t){var i=this.owner,n=e.getPaddingInfo().width,r=this.getTriggerOffset(i,e);return(i.isGroupHeader?t:Math.max(t,i.textEl.getWidth()+e.titleContext.getPaddingInfo().width))+n+r},getTriggerOffset:function(e,t){var i=0;return t.widthModel.shrinkWrap&&!e.menuDisabled&&0===e.query(">:not([hidden])").length&&(i=e.getTriggerElWidth()),i}}),Ext.define("Ext.layout.container.Fit",{extend:"Ext.layout.container.Container",alternateClassName:["Ext.layout.FitLayout","Ext.layout.Fit"],alias:"layout.fit",itemCls:Ext.baseCSSPrefix+"fit-item",type:"fit",manageMargins:!0,sizePolicies:[{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}],getItemSizePolicy:function(e,t){var i=t||this.owner.getSizeModel(),n=(i.width.shrinkWrap?0:1)|(i.height.shrinkWrap?0:2);return this.sizePolicies[n]},beginLayoutCycle:function(e,t){var i,n,r,o,a,s,l,d,u,c=this.lastHeightModel&&this.lastHeightModel.calculated,h=this.lastWidthModel&&this.lastWidthModel.calculated,f=h||c,g=0,p=0;for(this.callParent(arguments),f&&"TD"!==e.targetContext.el.dom.tagName.toUpperCase()&&(f=h=c=!1),a=(n=e.childItems).length,r=0;r<a;++r)o=n[r],t&&(l=(i=o.target).minHeight,((d=i.minWidth)||l)&&(g<(l+=(s=o.marginInfo||o.getMarginInfo()).height)&&(g=l),p<(d+=s.height)&&(p=d))),f&&(u=o.el.dom.style,c&&(u.height=""),h&&(u.width=""));t&&(e.maxChildMinHeight=g,e.maxChildMinWidth=p),i=e.target,e.overflowX=!e.widthModel.shrinkWrap&&e.maxChildMinWidth&&i.scrollFlags.x||void 0,e.overflowY=!e.heightModel.shrinkWrap&&e.maxChildMinHeight&&i.scrollFlags.y||void 0},calculate:function(e){var t,i,n,r,o,a,s=e.childItems,l=s.length,d=this.getContainerSize(e),u={length:l,ownerContext:e,targetSize:d},c=e.widthModel.shrinkWrap,h=e.heightModel.shrinkWrap,f=e.overflowX,g=e.overflowY;if(e.state.info=u,(f||g)&&(t=this.getScrollbarsNeeded(f&&d.width,g&&d.height,e.maxChildMinWidth,e.maxChildMinHeight))&&(i=Ext.scrollbar.size(),1&t&&(d.height-=i.height),2&t&&(d.width-=i.width)),0<l)for(r=0;r<l;++r)u.index=r,this.fitItem(s[r],u);else u.contentWidth=u.contentHeight=0;(h||c)&&(n=e.targetContext.getPaddingInfo(),c&&(g&&!d.gotHeight?this.done=!1:(o=u.contentWidth+n.width,2&t&&(o+=i.width),e.setContentWidth(o)||(this.done=!1))),h&&(f&&!d.gotWidth?this.done=!1:(a=u.contentHeight+n.height,1&t&&(a+=i.height),e.setContentHeight(a)||(this.done=!1))))},fitItem:function(e,t){e.invalid?this.done=!1:(t.margins=e.getMarginInfo(),t.needed=t.got=0,this.fitItemWidth(e,t),this.fitItemHeight(e,t),t.got!==t.needed&&(this.done=!1))},fitItemWidth:function(e,t){var i,n;if(t.ownerContext.widthModel.shrinkWrap)n=e.getProp("width")+t.margins.width,i=t.contentWidth,t.contentWidth=void 0===i?n:Math.max(i,n);else if(e.widthModel.calculated){if(++t.needed,!t.targetSize.gotWidth)return;++t.got,this.setItemWidth(e,t)}this.positionItemX(e,t)},fitItemHeight:function(e,t){var i,n;if(t.ownerContext.heightModel.shrinkWrap)n=e.getProp("height")+t.margins.height,i=t.contentHeight,t.contentHeight=void 0===i?n:Math.max(i,n);else if(e.heightModel.calculated){if(++t.needed,!t.targetSize.gotHeight)return;++t.got,this.setItemHeight(e,t)}this.positionItemY(e,t)},positionItemX:function(e,t){var i=t.margins;(t.index||i.left)&&e.setProp("x",i.left),i.width&&t.ownerContext.widthModel.shrinkWrap&&e.setProp("margin-right",i.width)},positionItemY:function(e,t){var i=t.margins;(t.index||i.top)&&e.setProp("y",i.top),i.height&&t.ownerContext.heightModel.shrinkWrap&&e.setProp("margin-bottom",i.height)},setItemHeight:function(e,t){e.setHeight(t.targetSize.height-t.margins.height)},setItemWidth:function(e,t){e.setWidth(t.targetSize.width-t.margins.width)}}),Ext.define("Ext.panel.Table",{extend:"Ext.panel.Panel",xtype:"tablepanel",requires:["Ext.layout.container.Fit"],uses:["Ext.selection.RowModel","Ext.selection.CellModel","Ext.selection.CheckboxModel","Ext.grid.plugin.BufferedRenderer","Ext.grid.header.Container","Ext.grid.locking.Lockable","Ext.grid.NavigationModel","Ext.grid.RowContext","Ext.grid.CellContext"],extraBaseCls:Ext.baseCSSPrefix+"grid",extraBodyCls:Ext.baseCSSPrefix+"grid-body",actionableModeCls:Ext.baseCSSPrefix+"grid-actionable",noHeaderBordersCls:Ext.baseCSSPrefix+"no-header-borders",defaultBindProperty:"store",layout:"fit",manageLayoutScroll:!1,ariaRole:"presentation",config:{focused:null,headerBorders:!0,hideHeaders:null},publishes:["selection"],twoWayBindable:["selection"],selection:null,autoLoad:!1,variableRowHeight:!1,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:!1,viewType:null,deferRowRender:!1,sortableColumns:!0,multiColumnSort:!1,enableLocking:!1,scrollerOwner:!0,enableColumnMove:!0,sealedColumns:!1,enableColumnResize:!0,columnLines:!1,rowLines:!0,bufferedRenderer:!0,preciseHeight:!1,ownerGrid:null,colLinesCls:Ext.baseCSSPrefix+"grid-with-col-lines",rowLinesCls:Ext.baseCSSPrefix+"grid-with-row-lines",noRowLinesCls:Ext.baseCSSPrefix+"grid-no-row-lines",hiddenHeaderCtCls:Ext.baseCSSPrefix+"grid-header-ct-hidden",hiddenHeaderCls:Ext.baseCSSPrefix+"grid-header-hidden",resizeMarkerCls:Ext.baseCSSPrefix+"grid-resize-marker",emptyCls:Ext.baseCSSPrefix+"grid-empty",focusable:!0,constructor:function(e){var t,i=e&&e.ownerGrid;this.ownerGrid=i||this,this.actionables=i?i.actionables:[],this.callParent([e]),(t=this.store).trackStateChanges=!0,this.autoLoad&&(t.isEmptyStore||t.load())},registerActionable:function(e){Ext.Array.include(this.actionables,e)},initComponent:function(){this.verticalScroller&&Ext.raise("The verticalScroller config is not supported."),this.viewType||Ext.raise("You must specify a viewType config."),this.headers&&Ext.raise("The headers config is not supported. Please specify columns instead.");var e,t,i,n,r,o,a,s=this,l=s.columns||s.colModel||[],d=s.selection;if(d&&(s.selection=null,s.setSelection(d)),(e=s.store)&&Ext.isObject(e)&&!e.isStore&&!e.storeId&&(e=Ext.apply({autoDestroy:!0},e)),e=s.store=Ext.data.StoreManager.lookup(e||"ext-empty-store"),s.enableLocking=s.enableLocking||s.hasLockedColumns(l),s.plugins&&(s.plugins=s.constructPlugins()),s.columnLines&&s.addBodyCls(s.colLinesCls),s.addBodyCls(s.rowLines?s.rowLinesCls:s.noRowLinesCls),s.addBodyCls(s.extraBodyCls),s.enableLocking?(s.mixins.lockable||s.self.mixin("lockable",Ext.grid.locking.Lockable),s.injectLockable()):(l.isRootHeader?(s.headerCt=a=l,a.grid=s,a.forceFit=!!s.forceFit,l=[],s.columnManager=a.columnManager,s.visibleColumnManager=a.visibleColumnManager):(o={grid:s,$initParent:s,forceFit:s.forceFit,sortable:s.sortableColumns,enableColumnMove:s.enableColumnMove,enableColumnResize:s.enableColumnResize,columnLines:s.columnLines,sealed:s.sealedColumns},Ext.isObject(l)&&(Ext.apply(o,l),l=l.items,delete o.items),s.headerCt=a=new Ext.grid.header.Container(o)),Ext.isDefined(s.enableColumnHide)&&(a.enableColumnHide=s.enableColumnHide)),s.scrollTask=new Ext.util.DelayedTask(s.syncHorizontalScroll,s),s.cls=(s.cls||"")+" "+s.extraBaseCls,delete s.autoScroll,(r=s.plugins&&Ext.Array.findBy(s.plugins,function(e){return e.isBufferedRenderer}))&&(s.bufferedRenderer=r),!s.hasView){if(e.isBufferedStore&&!e.getRemoteSort())for(i=0,n=l.length;i<n;i++)l[i].sortable=!1;s.relayHeaderCtEvents(a),s.features=s.features||[],Ext.isArray(s.features)||(s.features=[s.features]),s.viewConfig=s.viewConfig||{},t=s.getView(),s.items=[t],s.hasView=!0,s.bindStore(e,!0),s.mon(t,{viewready:s.onViewReady,refresh:s.onRestoreHorzScroll,scope:s})}s.selModel=s.view.getSelectionModel(),s.selModel.on({scope:s,lastselectedchanged:s.updateBindSelection,selectionchange:s.updateBindSelection}),s.relayEvents(s.view,["beforeitemlongpress","beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemlongpress","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","rowclick","rowdblclick","rowcontextmenu","rowmousedown","rowmouseup","rowkeydown","beforeitemkeydown","itemkeydown","beforeitemkeyup","itemkeyup","beforeitemkeypress","itemkeypress","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","beforecontainerkeyup","beforecontainerkeypress","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","containerkeyup","containerkeypress","beforeselect","select","beforedeselect","deselect","beforerowexit"]),s.selModel.isSpreadsheetModel||s.relayEvents(s.view,["selectionchange"]),a&&(a.view=s.view,(s.dockedItems=Ext.Array.from(s.dockedItems,!0)).unshift(a),a.add(l)),s.columns=s.headerCt.getGridColumns(),s.callParent(),s.syncHeaderVisibility(),s.enableLocking&&s.afterInjectLockable(),s.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filteractivate","filterdeactivate","filterchange","groupchange"])},updateHideHeaders:function(e){this.isConfiguring||this.syncHeaderVisibility()},beforeRender:function(){var e,t=this,i=t.bufferedRenderer;t.lockable?t.getProtoBody().addCls(t.lockingBodyCls):(i&&t.getSizeModel().height.auto&&(i.isBufferedRenderer&&Ext.raise("Cannot use buffered rendering with auto height"),t.bufferedRenderer=i=!1),i&&!i.isBufferedRenderer&&(i={xclass:"Ext.grid.plugin.BufferedRenderer"},Ext.copy(i,t,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer",!0),t.bufferedRenderer=t.addPlugin(i)),(e=t.ariaRenderAttributes||(t.ariaRenderAttributes={}))["aria-readonly"]=!t.isEditable,e["aria-multiselectable"]="SINGLE"!==t.selModel.selectionMode),t.callParent(arguments)},beforeLayout:function(){var e=this.mixins.lockable;e&&e.beforeLayout.call(this),this.callParent()},onHide:function(e,t,i){this.getView().onOwnerGridHide(),this.callParent([e,t,i])},onShow:function(){this.callParent(),this.getView().onOwnerGridShow()},getHeaderContainer:function(){return this.getView().getHeaderCt()},getColumns:function(){return this.getColumnManager().getColumns()},getVisibleColumns:function(){return this.getVisibleColumnManager().getColumns()},getScrollable:function(){return this.scrollable||this.view.getScrollable()},focus:function(){var e=this.getView();if(!e.isVisible(!0))return!1;e.focus()},disableColumnHeaders:function(){this.headerCt.disable()},enableColumnHeaders:function(){this.headerCt.enable()},hasLockedColumns:function(e){var t,i,n;for(e.isRootHeader?e=e.items.items:Ext.isObject(e)&&(e=e.items),t=0,i=e.length;t<i;t++)if(!(n=e[t]).processed&&n.locked)return!0},relayHeaderCtEvents:function(e){this.relayEvents(e,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var e=this.callParent(),t=this.store.getState();return e=this.addPropertyToState(e,"columns",this.headerCt.getColumnsState()),t&&(e.storeState=t),e},applyState:function(e){var t=e.sort,i=e.storeState,n=this.store,r=e.columns=this.buildColumnHash(e.columns);this.callParent([e]),r&&this.headerCt.applyColumnsState(r,i),n.isEmptyStore||(t?n.getRemoteSort()?n.sort({property:t.property,direction:t.direction,root:t.root},null,!1):n.sort(t.property,t.direction):i&&n.applyState(i))},buildColumnHash:function(e){var t,i,n,r;if(e){for(r={},n=0,t=e.length;n<t;n++)(i=e[n]).index=n,i.columns&&(i.columns=this.buildColumnHash(i.columns)),r[i.id]=i;return r}},getStore:function(){return this.store},onViewRefresh:function(e,t){this.onItemsAdded(e,t,0)},onItemAdd:function(e,t,i,n){this.onItemsAdded(n,e,t)},onItemsAdded:function(e,t,i){var n,r,o,a,s=t.length,l=this.freeRowContexts,d=this.liveRowContexts||(this.liveRowContexts={});for(n=0;n<s;n++)(o=d[r=(a=t[n]).internalId])?o.attach(e):(o=(o=l&&l.shift())||new Ext.grid.RowContext({ownerGrid:this})).attach(e)&&(this.liveRowContexts[r]=o).setRecord(a,i+n)},onItemRemove:function(e,t,i,n){var r,o,a,s=this.freeRowContexts||(this.freeRowContexts=[]),l=this.liveRowContexts,d=i.length;for(r=0;r<d;r++)(a=l[o=i[r].getAttribute("data-recordId")])&&a.detach(n)&&(s.push(a),delete l[o])},createManagedWidget:function(e,t,i,n){return this.liveRowContexts[n.internalId].getWidget(e,t,i)},destroyManagedWidgets:function(e){var t,i,n,r=this.liveRowContexts,o=this.freeRowContexts,a=o&&o.length;for(i in r)(n=r[i].widgets)&&(Ext.destroy(n[e]),delete n[e]);for(t=0;t<a;t++)(n=o[t].widgets)&&(Ext.destroy(n[e]),delete n[e])},getManagedWidgets:function(e){var t,i=this.liveRowContexts,n=[];for(t in i)n.push(i[t].widgets[e]);return n},getView:function(){var e,t,i,n=this;return n.view||(e=(i=n.viewConfig).scroll||n.scroll,null==(t=n.scrollable)&&null==i.scrollable&&null!==e&&(!0===e||"both"===e?t=!0:!1===e||"none"===e?t=!1:"vertical"===e?t={x:!1,y:!0}:"horizontal"===e&&(t={x:!0,y:!1})),"scrollable"in(i=Ext.apply({grid:n,ownerGrid:n.ownerGrid,deferInitialRefresh:n.deferRowRender,variableRowHeight:n.variableRowHeight,preserveScrollOnRefresh:!0,trackOver:!1!==n.trackMouseOver,throttledUpdate:!0===n.throttledUpdate,xtype:n.viewType,store:n.store,headerCt:n.headerCt,columnLines:n.columnLines,rowLines:n.rowLines,navigationModel:"grid",features:n.features,panel:n,emptyText:n.emptyText||""},n.viewConfig))||"scroll"in i||"autoScroll"in i||null==t||(i.scrollable=t),i.$initParent=n,Ext.create(i),delete i.$initParent,n.view.emptyText&&(n.view.emptyText='<div class="'+n.emptyCls+'">'+n.view.emptyText+"</div>"),n.view.getComponentLayout().headerCt=n.headerCt,n.mon(n.view,{uievent:n.processEvent,scope:n}),n.hasListeners.viewcreated&&n.fireEvent("viewcreated",n,n.view)),n.view},getEmptyText:function(){return this.view.emptyText},setEmptyText:function(e){return this.emptyText=e,this.view.setEmptyText('<div class="'+this.emptyCls+'">'+e+"</div>"),this},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,applyScrollable:function(e){var t=this.view;return(t=t&&(t.normalView||t))&&t.setScrollable(e),e},processEvent:function(e,t,i,n,r,o,a,s){var l=o.position.column;if(l)return l.processEvent.apply(l,arguments)},ensureVisible:function(e,t){this.doEnsureVisible(e,t)},scrollByDeltaY:function(e,t){this.getView().scrollBy(null,e,t)},scrollByDeltaX:function(e,t){this.getView().scrollBy(e,null,t)},afterCollapse:function(){this.saveScrollPos(),this.callParent(arguments)},afterExpand:function(){this.callParent(arguments),this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:Ext.emptyFn,onHeaderMove:function(e,t,i,n,r){!1===this.optimizedColumnMove?this.view.refreshView():this.view.moveColumn(n,r,i),this.delayScroll()},onHeaderHide:function(e,t){var i=this.view;!e.childHideCount&&i.refreshCounter&&i.refreshView()},onHeaderShow:function(e,t){var i=this.view;i.refreshCounter&&i.refreshView()},onHeadersChanged:function(e,t){this.rendered&&!this.reconfiguring&&(this.view.refreshView(),this.delayScroll())},delayScroll:function(){var e=this.view;e&&this.scrollTask.delay(10,null,null,[e])},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){this.scrollXPos&&this.syncHorizontalScroll(this,!0)},getScrollerOwner:function(){var e=this;return this.scrollerOwner||(e=this.up("[scrollerOwner]")),e},getLhsMarker:function(){return this.lhsMarker||(this.lhsMarker=Ext.DomHelper.append(this.el,{role:"presentation",cls:this.resizeMarkerCls},!0))},getRhsMarker:function(){return this.rhsMarker||(this.rhsMarker=Ext.DomHelper.append(this.el,{role:"presentation",cls:this.resizeMarkerCls},!0))},getSelection:function(){return this.getSelectionModel().getSelection()},setSelection:function(e){var t=this.selection;e!==t&&(this.selection=e,this.updateSelection(e,t))},updateSelection:function(e){var t;this.ignoreNextSelection||(this.ignoreNextSelection=!0,t=this.getSelectionModel(),e?t.select(e):t.deselectAll(),this.ignoreNextSelection=!1),this.publishState("selection",e)},updateBindSelection:function(e,t){var i=0<t.length,n=null;this.hasHadSelection=this.hasHadSelection||i,this.ignoreNextSelection||(this.ignoreNextSelection=!0,i&&(n=e.getLastSelected()),this.hasHadSelection&&this.setSelection(n),this.ignoreNextSelection=!1)},updateFocused:function(e){this.getNavigationModel().setPosition(e)},updateHeaderBorders:function(e){this[e?"removeCls":"addCls"](this.noHeaderBordersCls)},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){return this.getView().getSelectionModel()},getScrollTarget:function(){var e=this.getScrollerOwner().query("tableview");return e[e.length-1]},syncHorizontalScroll:function(e,t){var i=this.view.getScrollX();t=!0===t,this.rendered&&(t||i!==this.scrollXPos)&&(t&&this.getScrollTarget().setScrollX(i),this.headerCt.setScrollX(i),this.scrollXPos=i)},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(e,t){var i=this,n=i.getView(),r=i.getStore();e?(i.store=e,n.store!==e&&n.bindStore(e,!1),i.mon(e,{load:i.onStoreLoad,scope:i}),i.storeRelayers=i.relayEvents(e,["filterchange","groupchange"]),!i.reconfiguring&&i.hasListeners.storechange&&e!==r&&i.fireEvent("storechange",i,e,r)):i.unbindStore()},unbindStore:function(){var e,t=this,i=t.store;i&&(i.trackStateChanges=!1,t.store=null,t.mun(i,{load:t.onStoreLoad,scope:t}),Ext.destroy(t.storeRelayers),(e=t.view).store?e.bindStore(null):!i.destroyed&&i.autoDestroy&&i.destroy(),!t.reconfiguring&&t.hasListeners.storechange&&t.fireEvent("storechange",t,null,i))},setColumns:function(e){(e.length||this.getColumnManager().getColumns().length)&&this.reconfigure(void 0,e)},setStore:function(e){this.reconfigure(e,void 0,!0),this.isVisible(!0)?!e||!this.autoLoad||e.isEmptyStore||e.loading||e.isLoaded()||e.load():this.globalShowListener||(this.globalShowListener=Ext.GlobalEvents.on({show:this.onGlobalShow,scope:this,destroyable:!0}))},onGlobalShow:function(e){var t=this.store;(e===this||e.isAncestor(this)&&this.isVisible(!0))&&(!t||!this.autoLoad||t.isEmptyStore||t.loading||t.isLoaded()||t.load(),Ext.destroy(this.globalShowListener))},reconfigure:function(e,t,i,n){var r,o,a,s,l,d,u,c,h=this,f=h.store,g=h.headerCt,p=h.lockable,m=g?g.items.getRange():h.columns,x=h.getView();1===arguments.length&&Ext.isArray(e)&&(t=e,e=null),t=t&&Ext.Array.slice(t),h.reconfiguring=!0,e?s=(e=Ext.StoreManager.lookup(e))&&e!==f:i&&(s=(e=Ext.StoreManager.lookup("ext-empty-store"))!==f),h.fireEvent("beforereconfigure",h,e,t,f,m),Ext.suspendLayouts(),h.rendered&&h.layoutCounter&&(r=h.getScrollable())&&r.scrollTo(0,0),p?h.reconfigureLockable(e,t,i):(o=x.blockRefresh,x.blockRefresh=!0,c=x.saveFocusState(),s&&(h.unbindStore(),h.bindStore(e)),t&&(delete h.scrollXPos,g.removeAll(),g.add(t),l=!0),g.onOwnerGridReconfigure(s,l),a=x.refreshCounter),h.stateful&&!1!==n&&(d=(u=h.getStateId())&&Ext.state.Manager.get(u))&&h.applyState(d),Ext.resumeLayouts(!0),h.reconfiguring=!1,p?h.afterReconfigureLockable():(x.blockRefresh=o,x.refreshCounter===a&&(x.refreshView(),c())),h.fireEvent("reconfigure",h,e,t,f,m),delete h.reconfiguring,s&&(h.fireEvent("storechange",h,e,f),!f.destroyed&&f.autoDestroy&&f.destroy())},doDestroy:function(){var e=this,t=e.scrollTask,i=e.view;i&&(i.destroying=!0),e.lockable&&e.destroyLockable(),t&&t.cancel(),Ext.destroy(e.rowContextParent,e.plugins,e.focusEnterLeaveListeners,e.freeRowContents,Ext.Object.getValues(e.liveRowContexts),e.lhsMarker,e.rhsMarker),e.callParent(),e.unbindStore()},getElementHeight:function(e){var t=this.preciseHeight&&e.getBoundingClientRect();return t?t.height||t.bottom-t.top:e.offsetHeight},getElementSize:function(e){var t=this.preciseHeight&&e.getBoundingClientRect();return{width:t?t.width||t.right-t.left:e.offsetWidth,height:t?t.height||t.bottom-t.top:e.offsetHeight}},privates:{initFocusableElement:function(){},doEnsureVisible:function(e,t){if(this.lockable)return this.ensureLockedVisible(e,t);"number"==typeof e||e.isEntity||(e=this.store.getById(e));var n,r,i,o,a,s,l,d,u,c,h,f,g=this,p=g.getView(),m=p.getNode(e),x=g.ownerGrid.lockable;t&&(n=t.callback,r=t.scope,i=t.animate,o=t.highlight,a=t.select,s=t.focus,d=t.column),g.deferredEnsureVisible&&g.deferredEnsureVisible.destroy(),p.componentLayoutCounter?("number"==typeof d&&(d=g.ownerGrid.getVisibleColumnManager().getColumns()[d]),m?(e.isEntity||(e=p.getRecord(m)),l=x?g.ownerGrid.getScrollable():p.getScrollable(),(n||a||s)&&(h=function(){c=new Ext.grid.CellContext(p).setPosition(e,d||0),a&&p.getSelectionModel().selectByPosition(c),s&&p.getNavigationModel().setPosition(c),Ext.callback(n,r||g,[!0,e,m])}),l&&(d&&(u=Ext.fly(m).selectNode(d.getCellSelector())),(f=x&&d?(l.ensureVisible(m,{x:!1}),p.getScrollable().ensureVisible(u||m,{animation:i,highlight:o})):l.ensureVisible(u||m,{animation:i,highlight:o,x:!!d}))&&h&&f.then(h))):p.bufferedRenderer?p.bufferedRenderer.scrollTo(e,{animate:i,highlight:o,select:a,focus:s,column:d,callback:function(e,t,i){Ext.callback(n,r||g,[!0,t,i])}}):Ext.callback(n,r||g,[!1,null])):g.deferredEnsureVisible=p.on({resize:g.doEnsureVisible,args:Ext.Array.slice(arguments),scope:g,single:!0,destroyable:!0})},getFocusEl:function(){return this.getView().getFocusEl()},getRowContextViewModelParent:function(){var e=this.lookupViewModel()||this.rowContextParent;return e||(this.rowContextParent=e=new Ext.app.ViewModel),e},handleWidgetViewChange:function(e,t){var i,n,r=this.liveRowContexts,o=this.freeRowContexts,a=o&&o.length;for(n in r)r[n].handleWidgetViewChange(e,t);for(i=0;i<a;i++)o[i].handleWidgetViewChange(e,t)},initInheritedState:function(e,t){e.inLockedGrid=!!this.isLocked,this.callParent([e,t])},setActionableMode:function(e,t){var i=this.ownerGrid;if(!i.destroying&&!1!==i.view.setActionableMode(e,t))return i.fireEvent("actionablemodechange",e),i[e?"addCls":"removeCls"](i.actionableModeCls),!0},getOverflowStyle:function(){return this.scrollFlags=this._scrollFlags.false.false,{overflowX:"hidden",overflowY:"hidden"}},getOverflowEl:function(){return null},shouldAutoHideHeaders:function(){var e,t,i=this.headerCt.items.items,n=i.length,r=!!n;for(t=0;r&&t<n;t++)(!(e=i[t]).isEmptyText(e.text,!0)||e.columns||e.isGroupHeader&&e.items.items.length)&&(r=!1);return r},syncHeaderVisibility:function(){var e,t,i=this.headerCt,n=this.hideHeaders;this.lockable?this.syncLockableHeaderVisibility():(null==n&&(n=this.shouldAutoHideHeaders()),t=0===i.height,i.rendered&&n===t||(i.setHeight(n?0:null),i.hiddenHeaders=n,i.toggleCls(this.hiddenHeaderCtCls,n),this.toggleCls(this.hiddenHeaderCls,n),n||(i.setScrollable({x:!1,y:!1}),(e=this.view.getScrollable())&&i.getScrollable().addPartner(e,"x"))))}}}),Ext.define("Ext.grid.ColumnLayout",{extend:"Ext.layout.container.HBox",alias:"layout.gridcolumn",type:"gridcolumn",requires:["Ext.panel.Table"],firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",initLayout:function(){this.callParent(),void 0===this.scrollbarWidth&&(this.self.prototype.scrollbarWidth=Ext.scrollbar.width())},beginLayout:function(e){var t,i,n=this.owner,r=this.firstHeaderCls,o=this.lastHeaderCls,a=[r,o],s=this.getVisibleItems(),l=s.length;for(this.callParent([e]),t=0;t<l;t++)i=s[t],1===l?i.addCls(a):0===t?(i.addCls(r),i.removeCls(o)):t===l-1?(i.removeCls(r),i.addCls(o)):i.removeCls(a);this.scrollbarWidth=0,n.isRootHeader&&!n.grid.isLocked&&this.determineScrollbarWidth(e),this.scrollbarWidth||(e.manageScrollbar=!1)},moveItemBefore:function(e,t){var i=e.ownerCt,n=t&&t.nextSibling();return e!==t&&i&&(i.remove(e,{destroy:!1,detach:!1}),t&&t.destroyed&&(t=n)),this.callParent([e,t])},determineScrollbarWidth:function(e){var t=this.owner.grid,i=t.reserveScrollbar,n=t.view.getScrollable(),r=!i&&n&&n.getY();e.manageScrollbar=r,t.ownerGrid.collapsed||!i&&!r||delete this.scrollbarWidth},calculate:function(e){var t,i,n,r,o,a,s,l=this.owner,d=l.grid,u=e.viewContext,c=e.state,h=e.context;if(this.callParent([e]),d&&l.isRootHeader&&c.parallelDone){if(t=u.lockingPartnerContext,d.forceFit&&!c.reflexed&&this.convertWidthsToFlexes(e))return this.cacheFlexes(e),this.done=!1,void e.invalidate({state:{reflexed:!0,scrollbarAdjustment:this.getScrollbarAdjustment(e)}});if(void 0===(i=c.columnsChanged)){for(i=!1,o=0,r=(n=e.target.getVisibleGridColumns()).length;o<r;o++)(a=h.getCmp(n[o])).lastBox&&a.props.width===a.lastBox.width||((i=i||[])[o]=a);c.columnsChanged=i,e.setProp("columnsChanged",i)}if(e.manageScrollbar&&this.getScrollbarAdjustment(e)){if(void 0===(s=u.getProp("viewOverflowY")))return void(this.done=!1);s||(t&&(t.invalidate(),t.headerContext.invalidate()),u.invalidate(),e.invalidate({state:{scrollbarAdjustment:0}}))}}},finishedLayout:function(e){this.callParent([e]),"rowgroup"===this.owner.ariaRole&&this.innerCt.dom.setAttribute("role","row"),e.props.columnsChanged=null},convertWidthsToFlexes:function(e){var t,i,n,r,o,a=0,s=this.sizeModels.calculated;for(i=(t=e.childItems).length,n=0;n<i;n++)o=(r=t[n]).target,a+=r.props.width,o.fixed||!1===o.resizable||(o.flex=e.childItems[n].flex=r.props.width,o.width=null,r.widthModel=s);return a!==e.props.width},getScrollbarAdjustment:function(e){var t=e.state,i=this.owner.grid,n=t.scrollbarAdjustment;return void 0===n&&(n=0,(i.reserveScrollbar||e.manageScrollbar&&!i.ownerGrid.getSizeModel().height.shrinkWrap)&&(n=this.scrollbarWidth),t.scrollbarAdjustment=n),n},getContainerSize:function(e){var t,i,n,r,o,a,s,l;return this.owner.isRootHeader?((l=this.callParent([e])).gotWidth&&(l.width-=this.getScrollbarAdjustment(e)),l):(n=e.paddingContext.getPaddingInfo(),t=i=0,e.widthModel.shrinkWrap||(++i,(r="number"==typeof(a=e.getProp("innerWidth")))&&(++t,(a-=n.width)<0&&(a=0))),e.heightModel.shrinkWrap||(++i,(o="number"==typeof(s=e.getProp("innerHeight")))&&(++t,(s-=n.height)<0&&(s=0))),{width:a,height:s,needed:i,got:t,gotAll:t===i,gotWidth:r,gotHeight:o})},publishInnerCtSize:function(e){var t=this.owner,i=0;return null!=e.peek("contentWidth")&&t.isRootHeader&&(i=-e.state.scrollbarAdjustment),this.callParent([e,i])},roundFlex:function(e){return Math.round(e)}}),Ext.define("Ext.grid.ColumnManager",{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(e,t,i){t.isRootHeader||t.isGroupHeader||Ext.raise("ColumnManager must be passed an instantiated HeaderContainer or group header"),this.headerCt=t,i&&(t.isRootHeader||t.isGroupHeader||Ext.raise("ColumnManager must be passed an instantiated HeaderContainer or group header"),this.secondHeaderCt=i),this.visibleOnly=!!e},getColumns:function(){return this.columns||this.cacheColumns(),this.columns},hasVariableRowHeight:function(){var e,t=this.getColumns(),i=t.length;if(null==this.variableRowHeight)for(this.variableRowHeight=!1,e=0;!this.variableRowHeight&&e<i;e++)this.variableRowHeight=!!t[e].variableRowHeight;return this.variableRowHeight},getHeaderIndex:function(e){return e.isGroupHeader&&(e=this.getHeaderColumns(e)[0]),Ext.Array.indexOf(this.getColumns(),e)},getHeaderAtIndex:function(e){return this.getColumns()[e]||null},getPreviousSibling:function(e){var t=this.getHeaderIndex(e),i=null;return 0<t&&(i=this.getColumns()[t-1]),i},getNextSibling:function(e){var t,i=this.getHeaderIndex(e);return-1!==i&&(t=this.getColumns()[i+1]),t||null},getFirst:function(){var e=this.getColumns();return 0<e.length?e[0]:null},getLast:function(){var e=this.getColumns(),t=e.length;return 0<t?e[t-1]:null},getHeaderByDataIndex:function(e){var t,i,n=this.getColumns(),r=n.length;if(Ext.isEmpty(e))return null;for(t=0;t<r;++t)if((i=n[t]).dataIndex===e)return i;return null},getHeaderById:function(e){var t,i,n=this.getColumns(),r=n.length;for(t=0;t<r;++t)if((i=n[t]).getItemId()===e)return i;return null},getVisibleHeaderClosestToIndex:function(e){var t=this.getHeaderAtIndex(e);return t&&t.hidden&&(t=t.next(":not([hidden])")||t.prev(":not([hidden])")),t},cacheColumns:function(){var e=this.getHeaderColumns(this.headerCt),t=this.secondHeaderCt;t&&(e=e.concat(this.getHeaderColumns(t))),this.columns=e},getHeaderColumns:function(e){var t=this.visibleOnly?e.getVisibleGridColumns():e.getGridColumns();return Ext.Array.clone(t)},invalidate:function(){var e=this.rootColumns;this.columns=this.variableRowHeight=null,e&&e.invalidate()},destroy:function(){this.columns=this.rootColumns=null,this.callParent()}},function(){this.createAlias("indexOf","getHeaderIndex")}),Ext.define("Ext.grid.NavigationModel",{extend:"Ext.view.NavigationModel",alias:"view.navigation.grid",focusCls:Ext.baseCSSPrefix+"grid-item-focused",getViewListeners:function(){return{focusmove:{element:"el",fn:this.onFocusMove},containermousedown:this.onContainerMouseDown,cellmousedown:this.onCellMouseDown,cellclick:this.onCellClick,itemmousedown:this.onItemMouseDown,itemclick:this.onItemClick,itemcontextmenu:this.onItemClick,scope:this}},initKeyNav:function(e){var t,i=this;i.keyNav||(i.keyNav=[],i.position=new Ext.grid.CellContext(e)),t=new Ext.util.KeyNav({target:e,ignoreInputFields:!0,eventName:Ext.supports.SpecialKeyDownRepeat?"itemkeydown":"itemkeypress",defaultEventAction:"stopEvent",processEvent:i.processViewEvent,up:i.onKeyUp,down:i.onKeyDown,right:i.onKeyRight,left:i.onKeyLeft,pageDown:i.onKeyPageDown,pageUp:i.onKeyPageUp,home:i.onKeyHome,end:i.onKeyEnd,space:i.onKeySpace,enter:i.onKeyEnter,esc:i.onKeyEsc,113:{ctrl:!1,shift:!1,alt:!1,handler:i.onKeyF2},tab:i.onKeyTab,A:{ctrl:!0,handler:i.onSelectAllKeyPress},scope:i}),i.keyNav.push(t),i.onKeyNavCreate(t)},onKeyNavCreate:Ext.emptyFn,addKeyBindings:function(e){var t,i=this.keyNav.length;for(t=0;t<i;t++)this.keyNav[t].addBindings(e)},enable:function(){var e,t=this.keyNav.length;for(e=0;e<t;e++)this.keyNav[e].enable();this.disabled=!1},disable:function(){var e,t=this.keyNav.length;for(e=0;e<t;e++)this.keyNav[e].disable();this.disabled=!0},processViewEvent:function(e,t,i,n,r){var o=r.getKey();return e.actionableMode?(this.map.ignoreInputFields=!1,o===r.TAB||o===r.ESC||o===r.F2?r:void 0):(this.map.ignoreInputFields=!0,o===r.TAB?null:r)},onContainerMouseDown:function(e,t){var i,n,r=new Ext.grid.CellContext(e);this.callParent([e,t]),i=e.lastFocused,(n=e.actionableMode&&e.actionPosition||i)&&"scrollbar"!==i&&(r.setPosition(n.record,n.column),t.position=r,this.attachClosestCell(t),this.position.isEqual(r)||this.setPosition(r,null,t))},onCellMouseDown:function(e,t,i,n,r,o,a){var s,l=Ext.Component.from(a,t),d=a.getTarget(this.isFocusableEl,t);e.actionableMode?(d=d||(s=Ext.ComponentManager.getActiveComponent())&&s!==e&&s.owns(a))?e.setActionableMode(!0,a.position):e.setActionableMode(!1,a.position):"touch"!==a.pointerType&&(!1!==a.position.column.cellFocusable?(d?(e.containsFocus||(e.containsFocus=!0,e.toggleChildrenTabbability(!1)),!1!==e.setActionableMode(!0,a.position)&&d.focus()):t.focus(),2===a.button&&this.fireNavigateEvent(a),l&&l.isFocusable&&l.isFocusable()&&(e.setActionableMode(!0,a.position),l.focus())):a.preventDefault(!0))},onCellClick:function(e,t,i,n,r,o,a){var s=this,l=Ext.Component.from(a,t),d=l&&l.isFocusable&&l.isFocusable();if(Ext.isIE10m||e.el.contains(Ext.Element.getActiveElement())||"touch"===a.pointerType)if(e.actionableMode)a.position.isEqual(e.actionPosition)||d||e.setActionableMode(!1,a.position),s.fireEvent("navigate",{view:e,navigationModel:s,keyEvent:a,previousPosition:s.previousPosition,previousRecordIndex:s.previousRecordIndex,previousRecord:s.previousRecord,previousItem:s.previousItem,previousCell:s.previousCell,previousColumnIndex:s.previousColumnIndex,previousColumn:s.previousColumn,position:a.position,recordIndex:a.position.rowIdx,record:a.position.record,selectionStart:s.selectionStart,item:a.item,cell:a.position.cellElement,columnIndex:a.position.colIdx,column:a.position.column});else if(s.position.isEqual(a.position)||d){if(Ext.isIE10m&&!s.record)return;s.fireNavigateEvent(a)}else!1!==a.position.column.cellFocusable?s.setPosition(a.position,null,a):a.preventDefault()},onFocusMove:function(e){var t,i,n,r=Ext.Component.from(e.delegatedTarget,null,"tableview"),o=e.target,a=Ext.fly(o).is(r.cellSelector);if(r){if(e.toElement===r.el.dom)return r.actionableMode=!1,r.onFocusEnter(e);!r.actionableMode&&a?(t=r.getRecord(o),i=r.getHeaderByCell(o),t&&i&&((n=new Ext.grid.CellContext(r).setPosition(t,i)).isEqual(this.position)||this.setPosition(n))):(r.actionableMode||r.activating)&&!a&&r.el.contains(e.target)&&r.el.dom!==e.target&&r.ownerGrid.fireEvent("cellactivate",r.ownerGrid,r.actionPosition)}},onItemMouseDown:function(e,t,i,n,r){var o;r.position.cellElement||"touch"===r.pointerType||(e.enableTextSelection||r.preventDefault(),this.attachClosestCell(r),this.position.isEqual(r.position)||this.setPosition(r.position,null,r),(o=e.getScrollable())&&o.restoreState())},onItemClick:function(e,t,i,n,r){r.position.cellElement||(this.attachClosestCell(r),"touch"===r.pointerType?this.setPosition(r.position,null,r):this.fireNavigateEvent(r))},attachClosestCell:function(e){var t,i,n,r,o,a=e.position;if(!a.cellElement)for(t=e.getX(),n=(i=a.view.getVisibleColumnManager().getColumns()).length,r=0;r<n;r++)if(t>=(o=i[r].getBox()).left&&t<o.right)return a.setColumn(i[r]),a.rowElement=a.getRow(!0),void(a.cellElement=a.getCell(!0))},deferSetPosition:function(e,t,i,n,r,o){var a=this.view.getFocusTask();return a.delay(e,this.setPosition,this,[t,i,n,r,o]),a},setPosition:function(e,t,i,n,r){var o,a,s,l,d,u,c,h,f,g,p=this,m=null==e&&null==t,x=null==p.record&&null==p.recordIndex&&null==p.item;if((o=e&&e.isCellContext?e.view:i&&i.view?i.view:p.lastFocused?p.lastFocused.view:p.view).cancelFocusTask(),!(o.destroyed||!o.refreshCounter||!o.ownerCt||m&&x)&&o.all.getCount()){if(s=o.getSelectionModel(),l=o.dataSource,g=(d=o.getVisibleColumnManager()).getColumns(),e&&e.isCellContext)h=e.record,u=e.rowIdx,f=g[c=Math.min(e.colIdx,g.length-1)],-1===l.indexOf(h)&&(a=o.getScrollable(),p.recordIndex=-1,a&&a.getPosition().y>=a.getMaxPosition().y-o.all.last(!0).offsetHeight&&e.rowIdx--,u=Math.min(e.rowIdx,l.getCount()-1),h=l.getAt(u));else{if(m)h=u=null;else if(null==t&&(t=p.lastFocused?p.lastFocused.column:0),"number"==typeof e)u=Math.max(Math.min(e,l.getCount()-1),0),h=l.getAt(e);else if(e.isEntity)h=e,u=l.indexOf(h);else if(e.tagName)h=o.getRecord(e),-1===(u=l.indexOf(h))&&(h=null);else{if(x)return;m=!0,h=u=null}h?(-1===u&&(p.recordIndex=-1,h=l.getAt(0),u=0,t=null),null==t?(f=p.column)||(f=g[c=0]):c="number"==typeof t?(f=g[t],t):(f=t,d.indexOf(t))):(m=!0,f=c=null)}if(f&&-1===d.indexOf(f)&&(f=g[c=-1===c?0:Math.min(c,g.length-1)]),o.actionableMode&&!m)return o.ownerGrid.setActionableMode(!1,new Ext.grid.CellContext(o).setPosition(h,f));if(u===p.recordIndex&&c===p.columnIndex&&o===p.position.view)return p.focusPosition(p.position);p.cell&&p.cell.removeCls(p.focusCls),p.previousRecordIndex=p.recordIndex,p.previousRecord=p.record,p.previousItem=p.item,p.previousCell=p.cell,p.previousColumn=p.column,p.previousColumnIndex=p.columnIndex,p.previousPosition=p.position.clone(),p.selectionStart=s.selectionStart,p.position.setAll(o,p.recordIndex=u,p.columnIndex=c,p.record=h,p.column=f),m?p.item=p.cell=null:p.focusPosition(p.position,r),n||(s.fireEvent("focuschange",s,p.previousRecord,p.record),o.fireEvent("rowfocus",p.record,p.item,p.recordIndex),o.fireEvent("cellfocus",p.record,p.cell,p.position)),i&&!r&&p.cell!==p.previousCell&&p.fireNavigateEvent(i)}},focusPosition:function(e){var t,i,n,r=this;r.item=r.cell=null,e&&e.record&&e.column&&(t=e.view,(i=e.rowElement?r.item=e.rowElement:t.getRowByRecord(e.record))?(r.cell=e.cellElement||Ext.fly(i).down(e.column.getCellSelector(),!0),r.cell?(r.cell=new Ext.dom.Fly(r.cell),t.lastFocused=r.lastFocused=r.position.clone(),(n=t.getScrollable())&&n.ensureVisible(r.cell),r.focusItem(r.cell),t.focusEl=r.cell):(r.position.setAll(),r.record=r.column=r.recordIndex=r.columnIndex=null)):(i=t.dataSource.indexOf(e.record),r.position.setAll(),r.record=r.column=r.recordIndex=r.columnIndex=null,-1!==i&&t.bufferedRenderer&&(r.lastKeyEvent=null,t.bufferedRenderer.scrollTo(i,!1,r.afterBufferedScrollTo,r))))},focusItem:function(e){e.addCls(this.focusCls),e.focus()},getCell:function(){return this.cell},getPosition:function(e){var t,i,n,r=this.position;if(r.record&&r.column){if(e)return r;if(-1===(t=(n=(i=r.view).dataSource).indexOf(r.record))&&(t=r.rowIdx,(r.record=n.getAt(t))||(t=-1)),-1!==t&&-1!==i.getVisibleColumnManager().indexOf(r.column))return r;r.setAll(),this.record=this.column=this.recordIndex=this.columnIndex=null}return null},getLastFocused:function(){var e,t=this.lastFocused;if(t&&t.record&&t.column&&-1!==(e=t.view).dataSource.indexOf(t.record)&&-1!==e.getVisibleColumnManager().indexOf(t.column))return t},onKeyTab:function(e){var t,i,n,r=!e.shiftKey,o=e.position.view;i=(t=o.findFocusPosition(e.target,e.position,r,e)).target,n=t.position,i?(this.actionPosition=n.view.actionPosition=n,Ext.fly(i).focus()):o.onRowExit(e,e.item,e.item[r?"nextSibling":"previousSibling"],r),e.preventDefault()},onKeyUp:function(e){var t=e.view.walkRecs(e.record,-1),i=this.getPosition();t&&(i.setRow(t),i.getCell(!0)||i.navigate(-1),this.setPosition(i,null,e))},onKeyDown:function(e){var t=e.record.isExpandingOrCollapsing?null:e.view.walkRecs(e.record,1),i=this.getPosition();t&&(i.setRow(t),i.getCell(!0)||i.navigate(-1),this.setPosition(i,null,e))},onKeyRight:function(e){var t=this.move("right",e);t&&this.setPosition(t,null,e)},onKeyLeft:function(e){var t=this.move("left",e);t&&this.setPosition(t,null,e)},onKeyEnter:function(e){var t=["cellclick",e.view,e.position.cellElement,e.position.colIdx,e.record,e.position.rowElement,e.recordIndex,e],i=e.position.getCell(!0);i&&(i.querySelector('[tabIndex="-1"]')||(e.stopEvent(),e.view.fireEvent.apply(e.view,t),t[0]="celldblclick",e.view.fireEvent.apply(e.view,t)),this.view.actionableMode||this.view.ownerGrid.setActionableMode(!0,this.getPosition()))},onKeyF2:function(e){var t=this.view.ownerGrid,i=t.actionableMode;t.setActionableMode(!i,i?null:this.getPosition())},onKeyEsc:function(e){var t=this.view.ownerGrid;if(!t.actionableMode)return!0;t.setActionableMode(!1)},move:function(e,t){var i=this.getPosition(),n=i,r=t.shiftKey&&("right"===e||"left"===e);if(i&&i.record)for(;n;)if((n=n.view.walkCells(n,e,r?this.vetoRowChange:null,this))&&n.getCell(!0)&&!1!==n.column.cellFocusable)return n;return null},vetoRowChange:function(e){return this.getPosition().record===e.record},onKeyPageDown:function(e){var t,i,n=e.view,r=this.getRowsVisible();r&&(n.bufferedRenderer?(t=Math.min(e.recordIndex+r,n.dataSource.getCount()-1),this.lastKeyEvent=e,n.bufferedRenderer.scrollTo(t,!1,this.afterBufferedScrollTo,this)):(i=n.walkRecs(e.record,r),this.setPosition(i,null,e)))},onKeyPageUp:function(e){var t,i,n=e.view,r=this.getRowsVisible();r&&(n.bufferedRenderer?(t=Math.max(e.recordIndex-r,0),this.lastKeyEvent=e,n.bufferedRenderer.scrollTo(t,!1,this.afterBufferedScrollTo,this)):(i=n.walkRecs(e.record,-r),this.setPosition(i,null,e)))},onKeyHome:function(e){var t=e.view;e.altKey?t.bufferedRenderer?(this.lastKeyEvent=e,t.bufferedRenderer.scrollTo(0,!1,this.afterBufferedScrollTo,this)):this.setPosition(t.walkRecs(e.record,-t.dataSource.indexOf(e.record)),null,e):this.setPosition(e.record,0,e)},afterBufferedScrollTo:function(e,t){this.setPosition(t,null,this.lastKeyEvent,null,!this.lastKeyEvent)},onKeyEnd:function(e){var t=e.view;e.altKey?t.bufferedRenderer?(this.lastKeyEvent=e,t.bufferedRenderer.scrollTo(t.store.getCount()-1,!1,this.afterBufferedScrollTo,this)):this.setPosition(t.walkRecs(e.record,t.dataSource.getCount()-1-t.dataSource.indexOf(e.record)),null,e):this.setPosition(e.record,e.view.getVisibleColumnManager().getColumns().length-1,e)},getRowsVisible:function(){var e,t,i=!1,n=this.view,r=n.all.first();return r&&(e=r.getHeight(),t=n.el.getHeight(),i=Math.floor(t/e)),i},fireNavigateEvent:function(e){var t=this;t.fireEvent("navigate",{view:t.position.view,navigationModel:t,keyEvent:e||new Ext.event.Event({}),previousPosition:t.previousPosition,previousRecordIndex:t.previousRecordIndex,previousRecord:t.previousRecord,previousItem:t.previousItem,previousCell:t.previousCell,previousColumnIndex:t.previousColumnIndex,previousColumn:t.previousColumn,position:t.position,recordIndex:t.recordIndex,record:t.record,selectionStart:t.selectionStart,item:t.item,cell:t.cell,columnIndex:t.columnIndex,column:t.column})},isFocusableEl:function(e){return Ext.fly(e).isFocusable()}}),Ext.define("Ext.view.TableLayout",{extend:"Ext.layout.component.Auto",alias:"layout.tableview",type:"tableview",beginLayout:function(e){var t,i=this.owner,n=i.ownerGrid,r=i.lockingPartner,o=e.lockingPartnerContext,a=e.context,s=n.getScrollable();t=r&&r.grid.isVisible()&&!(r.grid.collapsed||r.grid.floatedFromCollapse),e.doSyncRowHeights=t&&(n.syncRowHeight||n.syncRowHeightOnNextLayout),e.allowScrollX=s&&s.config&&s.config.x,this.columnFlusherId||(this.columnFlusherId=this.id+"-columns",this.rowHeightFlusherId=this.id+"-rows"),this.callParent([e]),t&&(!o&&r.componentLayout.isRunning()&&((o=e.lockingPartnerContext=a.getCmp(r)).lockingPartnerContext=e,o.lockingPartnerContext||(o.lockingPartnerContext=e)),e.doSyncRowHeights&&(o&&!o.rowHeightSynchronizer&&(o.rowHeightSynchronizer=o.target.syncRowHeightBegin()),e.rowHeightSynchronizer=this.owner.syncRowHeightBegin())),(e.headerContext=a.getCmp(this.headerCt)).viewContext=e},beginLayoutCycle:function(e,t){this.callParent([e,t]),e.syncRowHeights&&(e.target.syncRowHeightClear(e.rowHeightSynchronizer),e.syncRowHeights=!1)},calculate:function(e){var t,i,n,r,o,a,s,l,d,u,c=this,h=e.context,f=e.lockingPartnerContext,g=e.headerContext,p=e.ownerCtContext,m=e.state,x=c.owner,y=x.body.dom,v=g.getProp("columnsChanged");if(!(x.all.getCount()||y&&x.body.child("table",!0)))return e.setProp("viewOverflowY",!1),void c.callParent([e]);if(1===c.calcCount&&c.owner.bufferedRenderer&&c.owner.bufferedRenderer.beforeTableLayout(e),void 0!==v)if(!v||((i=m.columnFlusher)||h.queueFlush(m.columnFlusher=i={ownerContext:e,columnsChanged:v,layout:c,id:c.columnFlusherId,flush:c.flushColumnWidths},!0),i.flushed)){if(e.doSyncRowHeights){if(!(o=m.rowHeightFlusher)){if((r=m.rowHeights)||(m.rowHeights=r=e.rowHeightSynchronizer,c.owner.syncRowHeightMeasure(r),e.setProp("rowHeights",r)),!(n=f.getProp("rowHeights")))return void(c.done=!1);h.queueFlush(m.rowHeightFlusher=o={ownerContext:e,synchronizer:r,otherSynchronizer:n,layout:c,id:c.rowHeightFlusherId,flush:c.flushRowHeights},!0)}if(!o.flushed)return void(c.done=!1)}if(c.callParent([e]),!e.heightModel.shrinkWrap&&!p.heightModel.shrinkWrap){if(t=!0,!(s=p.target.layout.getContainerSize(p)).gotHeight)return void(c.done=!1);(a=y.offsetHeight)>s.height&&(l=!0)}u=Ext.scrollbar.height(),c.done&&e.allowScrollX&&u&&(x.lockingPartner||(d=!!x.isAutoTree||!!e.headerContext.state.boxPlan.tooNarrow,e.setProp("overflowX",d)),d&&a&&t&&(l=a+u>s.height)),!c.done&&null==l||e.setProp("viewOverflowY",!!l)}else c.done=!1;else c.done=!1},measureContentHeight:function(e){var t=this.owner,i=t.body.dom,n=t.emptyEl,r=0;return n&&(r+=n.offsetHeight),i&&(r+=i.offsetHeight),e.headerContext.state.boxPlan.tooNarrow&&(r+=Ext.scrollbar.height()),r},flushColumnWidths:function(){var e,t,i,n,r=this.layout,o=this.ownerContext,a=this.columnsChanged,s=o.target,l=a.length;if(o.state.columnFlusher===this){for(t=0;t<l;t++)(e=a[t])&&(i=e.props.width,s.body.select(s.getColumnSizerSelector(e.target)).setWidth(i),e.target.onCellsResized&&e.target.onCellsResized(i),(n=e.lastBox)&&(n.width=i));this.flushed=!0,r.pending||o.context.queueLayout(r)}},flushRowHeights:function(){var e=this.layout,t=this.ownerContext;t.state.rowHeightFlusher===this&&(t.target.syncRowHeightFinish(this.synchronizer,this.otherSynchronizer),this.flushed=!0,t.syncRowHeights=!0,e.pending||t.context.queueLayout(e))},finishedLayout:function(e){var t,i=this.owner.ownerGrid,n=Ext.fly(this.owner.getNodeContainer()),r=this.owner.getScrollable();if(this.callParent([e]),n&&n.setWidth(e.headerContext.props.contentWidth),(t=this.owner.bufferedRenderer)&&t.afterTableLayout(e),i&&(i.syncRowHeightOnNextLayout=!1),r&&!r.isScrolling){if(t&&(0===t.nextRefreshStartIndex||this.owner.hasVariableRowHeight()))return;r.restoreState()}},getLayoutItems:function(){return this.owner.getRefItems()},isValidParent:function(){return!0}}),Ext.define("Ext.grid.locking.RowSynchronizer",{constructor:function(e,t){var i;for(this.view=e,this.rowEl=t,this.els={},this.add("data",e.rowSelector),i=e.rowTpl;i;i=i.nextTpl)i.beginRowSync&&i.beginRowSync(this)},add:function(e,t){var i=Ext.fly(this.rowEl).down(t,!0);i&&(this.els[e]={el:i})},finish:function(e){var t,i,n,r,o=this.els,a=e.els,s=0,l=0;for(n in o)0<(i=(r=(t=a[n])?t.height:0)-o[n].height)?(s+=i,Ext.fly(o[n].el).setHeight(r)):l-=i;r=e.rowHeight+l,Ext.isIE9&&this.view.ownerGrid.rowLines&&r--,this.rowHeight+s<r&&Ext.fly(this.rowEl).setHeight(r)},measure:function(){var e,t=this.els,i=this.view.ownerGrid;for(e in this.rowHeight=i.getElementHeight(this.rowEl),t)t[e].height=i.getElementHeight(t[e].el)},reset:function(){var e,t=this.els;for(e in this.rowEl.style.height="",t)t[e].el.style.height=""}}),Ext.define("Ext.view.NodeCache",{requires:["Ext.dom.CompositeElementLite"],statics:{range:document.createRange&&document.createRange()},constructor:function(e){this.view=e,this.clear(),this.el=new Ext.dom.Fly},destroy:function(){this.destroyed||(this.el.destroy(),this.el=this.view=null,this.destroyed=!0),this.callParent()},clear:function(e){var t,i=this.elements,n=this.statics().range;if(this.count&&e)if(n&&Ext.getBody().contains(i[0]))n.setStartBefore(i[this.startIndex]),n.setEndAfter(i[this.endIndex]),n.deleteContents();else for(t in i)Ext.removeNode(i[t]);this.elements={},this.count=this.startIndex=0,this.endIndex=-1},fill:function(e,t,i){var n,r,o=this.elements={};for(i=i||0,t=t||0,n=0,r=e.length-i;n<r;n++)o[t+n]=e[n+i];return this.startIndex=t,this.endIndex=t+r-1,this.count=r,this},insert:function(e,t){var i,n=this,r=n.elements,o=t.length;if(n.count){if((e>n.endIndex+1||e+t.length<n.startIndex)&&Ext.raise("Discontiguous range would result from inserting "+t.length+" nodes at "+e),e<n.count)for(i=n.endIndex+o;e+o<=i;i--)r[i]=r[i-o],r[i].setAttribute("data-recordIndex",i);n.endIndex=n.endIndex+o}else n.startIndex=e,n.endIndex=e+o-1;for(i=0;i<o;i++,e++)r[e]=t[i],r[e].setAttribute("data-recordIndex",e);n.count+=o},invoke:function(e,t){var i,n;for(e=Ext.dom.Element.prototype[e],n=this.startIndex;n<=this.endIndex;n++)(i=this.item(n))&&e.apply(i,t);return this},item:function(e,t){var i=null;return this.elements[e]&&(i=t?this.elements[e]:this.el.attach(this.elements[e])),i},first:function(e){return this.item(this.startIndex,e)},last:function(e){return this.item(this.endIndex,e)},moveBlock:function(e){var t,i,n,r=this.elements;if(e){for(i=e<0?(n=this.startIndex-1,t=this.endIndex,1):(n=this.endIndex+1,t=this.startIndex,-1),this.startIndex+=e,this.endIndex+=e;(r[(n+=i)+e]=r[n]).setAttribute("data-recordIndex",n+e),(n<this.startIndex||n>this.endIndex)&&delete r[n],n!==t;);delete r[n]}},getCount:function(){return this.count},slice:function(e,t){var i,n=this.elements,r=[];for(t=t?Math.min(this.endIndex,t-1):this.endIndex,i=e||this.startIndex;i<=t;i++)r.push(n[i]);return r},replaceElement:function(e,t,i){var n=this.elements,r="number"==typeof e?e:this.indexOf(e);return-1<r&&(t=Ext.getDom(t),i&&((e=n[r]).parentNode.insertBefore(t,e),Ext.removeNode(e),t.setAttribute("data-recordIndex",r)),this.elements[r]=t),this},indexOf:function(e){var t,i=this.elements;for(e=Ext.getDom(e),t=this.startIndex;t<=this.endIndex;t++)if(i[t]===e)return t;return-1},clip:function(e,t){var i,n,r,o,a=this.elements,s=[];for(1===e?(i=this.startIndex,this.startIndex+=t):(this.endIndex-=t,i=this.endIndex+1),n=(o=i)+t-1;o<=n;o++)r=a[o],s.push(r),Ext.removeNode(r),delete a[o];this.count-=t,this.view.fireItemMutationEvent("itemremove",this.view.dataSource.getRange(i,n),i,s,this.view)},removeRange:function(e,t,i){var n,r,o,a,s=this.elements,l=[];for(t=null==t?this.endIndex+1:Math.min(this.endIndex+1,t+1),null==e&&(e=this.startIndex),o=t-e,r=e,a=t;r<=this.endIndex;r++,a++)n=s[r],r<t&&(l.push(n),i&&Ext.removeNode(n)),a<=this.endIndex?(n=s[r]=s[a]).setAttribute("data-recordIndex",r):delete s[r];return this.count-=o,this.endIndex-=o,l},removeElement:function(e,t){var i,n,r,o,a,s=this,l=s.elements,d=0;if(Ext.isArray(e)){for(i=e,e=[],r=i.length,d=0;d<r;d++)"number"!=typeof(n=i[d])&&(n=s.indexOf(n)),n>=s.startIndex&&n<=s.endIndex&&(e[e.length]=n);Ext.Array.sort(e),r=e.length}else{if(e<s.startIndex||e>s.endIndex)return;r=1,e=[e]}for(o=a=e[0],d=0;o<=s.endIndex;o++,a++)d<r&&o===e[d]&&(a++,d++,t&&Ext.removeNode(l[o])),a<=s.endIndex&&a>=s.startIndex?(l[o]=l[a]).setAttribute("data-recordIndex",o):delete l[o];s.endIndex-=r,s.count-=r},scroll:function(e,t,i){var n,r,o,a,s,l,d,u,c=this,h=c.view,f=h.store,g=c.elements,p=e.length,m=h.getNodeContainer(),x=c.statics().range;if(e.length||i){if(-1===t){if(i){if(d=[],u=[],l=c.endIndex-i+1,x)for(x.setStartBefore(g[l]),x.setEndAfter(g[c.endIndex]),x.deleteContents(),n=l;n<=c.endIndex;n++)r=g[n],delete g[n],d.push(f.getByInternalId(r.getAttribute("data-recordId"))),u.push(r);else for(n=l;n<=c.endIndex;n++)r=g[n],delete g[n],Ext.removeNode(r),d.push(f.getByInternalId(r.getAttribute("data-recordId"))),u.push(r);h.fireItemMutationEvent("itemremove",d,l,u,h),c.endIndex-=i}if(e.length){for(a=(s=h.bufferRender(e,c.startIndex-=p)).children,n=0;n<p;n++)g[c.startIndex+n]=a[n];m.insertBefore(s.fragment,m.firstChild),h.fireItemMutationEvent("itemadd",e,c.startIndex,a,h)}}else{if(i){if(d=[],u=[],o=c.startIndex+i,x)for(x.setStartBefore(g[c.startIndex]),x.setEndAfter(g[o-1]),x.deleteContents(),n=c.startIndex;n<o;n++)r=g[n],delete g[n],d.push(f.getByInternalId(r.getAttribute("data-recordId"))),u.push(r);else for(n=c.startIndex;n<o;n++)r=g[n],delete g[n],Ext.removeNode(r),d.push(f.getByInternalId(r.getAttribute("data-recordId"))),u.push(r);h.fireItemMutationEvent("itemremove",d,c.startIndex,u,h),c.startIndex=o}for(a=(s=h.bufferRender(e,c.endIndex+1)).children,n=0;n<p;n++)g[c.endIndex+=1]=a[n];m.appendChild(s.fragment),h.fireItemMutationEvent("itemadd",e,c.endIndex+1,a,h)}return c.count=c.endIndex-c.startIndex+1,a}},sumHeights:function(){var e,t=0,i=this.elements;for(e=this.startIndex;e<=this.endIndex;e++)t+=i[e].offsetHeight;return t}},function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)}),Ext.define("Ext.scroll.TableScroller",{extend:"Ext.scroll.Scroller",alias:"scroller.table",config:{lockingScroller:null},privates:{getEnsureVisibleXY:function(e,t){var i,n=this.getLockingScroller(),r=this.getPosition();return e&&e.element&&!e.isElement&&(e=(t=e).element),t=t||{},n&&(r.y=n.position.y),(i=Ext.fly(e).getScrollIntoViewXY(this.getElement(),r.x,r.y)).x=!1===t.x?r.x:i.x,n&&(i.y=!1===t.y?r.y:Ext.fly(e).getScrollIntoViewXY(n.getElement(),r.x,r.y).y),i},doScrollTo:function(e,t,i){var n,r,o;return null!=t&&(n=this.getLockingScroller())&&(r=n.doScrollTo(null,t,i),t=null),o=this.callParent([e,t,i]),r&&(o=Ext.Promise.all([o,r])),o},restoreState:function(){var e,t=this,i=t.getScrollElement(),n=t.getLockingScroller();i&&void 0!==(e=n?n.trackingScrollTop:t.trackingScrollTop)&&(t.restoreTimer||(t.restoreTimer=Ext.defer(function(){t.restoreTimer=null},50)),t.doScrollTo(t.trackingScrollLeft,e,!1))}}}),Ext.define("Ext.view.Table",{extend:"Ext.view.View",xtype:["tableview","gridview"],alternateClassName:"Ext.grid.View",requires:["Ext.grid.CellContext","Ext.view.TableLayout","Ext.grid.locking.RowSynchronizer","Ext.view.NodeCache","Ext.util.DelayedTask","Ext.util.MixedCollection","Ext.scroll.TableScroller"],mixins:["Ext.mixin.Queryable"],isTableView:!0,config:{selectionModel:{type:"rowmodel"}},inheritableStatics:{normalSideEvents:["deselect","select","beforedeselect","beforeselect","selectionchange"],events:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","cellkeydown","beforecellkeydown","cellmouseup","beforecellmouseup","cellmousedown","beforecellmousedown","cellcontextmenu","beforecellcontextmenu","celldblclick","beforecelldblclick","cellclick","beforecellclick","refresh","itemremove","itemadd","beforeitemupdate","itemupdate","viewready","beforerefresh","unhighlightitem","highlightitem","focuschange","containerkeydown","containercontextmenu","containerdblclick","containerclick","containermouseout","containermouseover","containermouseup","containermousedown","beforecontainerkeydown","beforecontainercontextmenu","beforecontainerdblclick","beforecontainerclick","beforecontainermouseout","beforecontainermouseover","beforecontainermouseup","beforecontainermousedown","itemkeydown","itemcontextmenu","itemdblclick","itemclick","itemmouseleave","itemmouseenter","itemmouseup","itemmousedown","rowclick","rowcontextmenu","rowdblclick","rowkeydown","rowmouseup","rowmousedown","rowkeydown","beforeitemkeydown","beforeitemcontextmenu","beforeitemdblclick","beforeitemclick","beforeitemmouseleave","beforeitemmouseenter","beforeitemmouseup","beforeitemmousedown","statesave","beforestatesave","staterestore","beforestaterestore","uievent","groupcollapse","groupexpand","scroll"]},scrollable:!0,componentLayout:"tableview",baseCls:Ext.baseCSSPrefix+"grid-view",unselectableCls:Ext.baseCSSPrefix+"unselectable",firstCls:Ext.baseCSSPrefix+"grid-cell-first",lastCls:Ext.baseCSSPrefix+"grid-cell-last",itemCls:Ext.baseCSSPrefix+"grid-item",selectedItemCls:Ext.baseCSSPrefix+"grid-item-selected",selectedCellCls:Ext.baseCSSPrefix+"grid-cell-selected",focusedItemCls:Ext.baseCSSPrefix+"grid-item-focused",overItemCls:Ext.baseCSSPrefix+"grid-item-over",altRowCls:Ext.baseCSSPrefix+"grid-item-alt",dirtyCls:Ext.baseCSSPrefix+"grid-dirty-cell",rowClsRe:new RegExp("(?:^|\\s*)"+Ext.baseCSSPrefix+"grid-item-alt(?:\\s+|$)","g"),cellRe:new RegExp(Ext.baseCSSPrefix+"grid-cell-([^\\s]+)(?:\\s|$)",""),positionBody:!0,positionCells:!1,stripeOnUpdate:null,actionableMode:!1,trackOver:!0,getRowClass:null,stripeRows:!0,markDirty:!0,ariaRole:"rowgroup",rowAriaRole:"row",cellAriaRole:"gridcell",usageBitMask:1,tpl:["{%","view = values.view;","if (!(columns = values.columns)) {","columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();","}","values.fullWidth = 0;","for (i = 0, len = columns.length; i < len; i++) {","column = columns[i];","values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);","}","tableCls=values.tableCls=[];","%}",'<div class="'+Ext.baseCSSPrefix+'grid-item-container" role="presentation" style="width:{fullWidth}px">',"{[view.renderTHead(values, out, parent)]}","{%","view.renderRows(values.rows, values.columns, values.viewStartIndex, out);","%}","{[view.renderTFoot(values, out, parent)]}","</div>","{% ","view = columns = column = null;","%}",{definitions:"var view, tableCls, columns, i, len, column;",priority:0}],outerRowTpl:['<table id="{rowId}" role="presentation" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellpadding="0" cellspacing="0" style="{itemStyle};width:0">',"{%","this.nextTpl.applyOut(values, out, parent)","%}","</table>",{priority:9999}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-row";',"%}",'<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}"',' role="{rowRole}" {rowAttr:attributes}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;','{% if(values.tdStyle){out.push(values.tdStyle);}%}"',"{% if (values.column.cellFocusable === false) {%}",' role="presentation"',"{% } else { %}",' role="{cellRole}" tabindex="-1"',"{% } %}",'  data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}" ','style="text-align:{align};','{% if (values.style) {out.push(values.style);} %}" ',"{cellInnerAttr:attributes}>{value}</div>","</td>",{priority:0}],refreshSelmodelOnRefresh:!1,scrollableType:"table",tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:[Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+"grid-td"]},constructor:function(e){e.grid.isTree&&(e.baseCls=Ext.baseCSSPrefix+"tree-view"),this.callParent([e])},hasVariableRowHeight:function(e){return this.variableRowHeight||this.store.isGrouped()||this.getVisibleColumnManager().hasVariableRowHeight()||!e&&this.lockingPartner&&this.lockingPartner.hasVariableRowHeight(!0)},initComponent:function(){var e=this;e.columnLines&&e.addCls(e.grid.colLinesCls),e.rowLines&&e.addCls(e.grid.rowLinesCls),e.body=new Ext.dom.Fly,e.body.id=e.id+"gridBody",e.trackOver||(e.overItemCls=null),((e.headerCt.view=e).grid.view=e).initFeatures(e.grid),e.itemSelector=e.getItemSelector(),e.all=new Ext.view.NodeCache(e),e.actionRowFly=new Ext.dom.Fly,e.callParent()},applySelectionModel:function(e,t){var i=this.ownerGrid,n=e.type,r=this.disableSelection||i.disableSelection,o=i.allowDeselect;return t||e&&e.isSelectionModel||(e=i.selModel||e),e&&(e.isSelectionModel?(e.allowDeselect=void 0!==o?o:e.allowDeselect,e.locked=r):("string"==typeof e?e={type:e}:e.type=i.selType||e.selType||e.type||n,e.mode||(i.simpleSelect?e.mode="SIMPLE":i.multiSelect&&(e.mode="MULTI")),e=Ext.Factory.selection(Ext.applyIf({allowDeselect:o,locked:r},e)))),e},updateSelectionModel:function(e,t){var i=this;t&&(t.un({scope:i,lastselectedchanged:i.updateBindSelection,selectionchange:i.updateBindSelection}),Ext.destroy(i.selModelRelayer)),i.selModelRelayer=i.relayEvents(e,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]),e.on({scope:i,lastselectedchanged:i.updateBindSelection,selectionchange:i.updateBindSelection}),i.selModel=e},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},moveColumn:function(e,t,i){var n,r,o,a,s,l,d,u,c=this,h=1<i,f=h&&document.createRange?document.createRange():null,g=h&&!f?document.createDocumentFragment():null,p=t,m=c.getGridColumns().length,x=m-1;if(u=(c.firstCls||c.lastCls)&&(0===t||t===m||0===e||e===x),c.rendered&&t!==e){for(n=0,a=(o=c.el.query(c.rowSelector)).length;n<a;n++){if(l=(s=o[n]).childNodes,u){if(1===l.length){Ext.fly(l[0]).addCls(c.firstCls),Ext.fly(l[0]).addCls(c.lastCls);continue}0===e?(Ext.fly(l[0]).removeCls(c.firstCls),Ext.fly(l[1]).addCls(c.firstCls)):e===x&&(Ext.fly(l[x]).removeCls(c.lastCls),Ext.fly(l[x-1]).addCls(c.lastCls)),0===t?(Ext.fly(l[0]).removeCls(c.firstCls),Ext.fly(l[e]).addCls(c.firstCls)):t===m&&(Ext.fly(l[x]).removeCls(c.lastCls),Ext.fly(l[e]).addCls(c.lastCls))}if(h){if(f)f.setStartBefore(l[e]),f.setEndAfter(l[e+i-1]),g=f.extractContents();else for(r=0;r<i;r++)g.appendChild(l[e]);s.insertBefore(g,l[p]||null)}else s.insertBefore(l[e],l[p]||null)}for(n=0,a=(d=c.el.query("colgroup")).length;n<a;n++)if(s=d[n],h){if(f)f.setStartBefore(s.childNodes[e]),f.setEndAfter(s.childNodes[e+i-1]),g=f.extractContents();else for(r=0;r<i;r++)g.appendChild(s.childNodes[e]);s.insertBefore(g,s.childNodes[p]||null)}else s.insertBefore(s.childNodes[e],s.childNodes[p]||null)}},scrollToTop:Ext.emptyFn,addElListener:function(e,t,i){this.mon(this,e,t,i,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(e){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(e)},getCell:function(e,t,i){var n,r=this.getRow(e);if(r)return"number"==typeof t&&(t=this.getHeaderAtIndex(t)),n=r.querySelector(t.getCellSelector()),i?Ext.get(n):n},getFeature:function(e){var t=this.featuresMC;if(t)return t.get(e)},findFeature:function(t){if(this.features)return Ext.Array.findBy(this.features,function(e){if(e.ftype===t)return!0})},initFeatures:function(e){var t,i,n,r,o=this;for(o.tpl=this.lookupTpl("tpl"),o.rowTpl=o.lookupTpl("rowTpl"),o.addRowTpl(o.lookupTpl("outerRowTpl")),o.cellTpl=o.lookupTpl("cellTpl"),o.featuresMC=new Ext.util.MixedCollection,n=0,r=(t=o.features=o.constructFeatures())?t.length:0;n<r;n++)(i=t[n]).view=o,i.grid=e,o.featuresMC.add(i),i.init(e)},renderTHead:function(e,t,i){var n,r,o=e.view.headerFns;if(o)for(r=0,n=o.length;r<n;++r)o[r].call(this,e,t,i)},addHeaderFn:function(e){var t=this.headerFns;(t=t||(this.headerFns=[])).push(e)},renderTFoot:function(e,t,i){var n,r,o=e.view.footerFns;if(o)for(r=0,n=o.length;r<n;++r)o[r].call(this,e,t,i)},addFooterFn:function(e){var t=this.footerFns;(t=t||(this.footerFns=[])).push(e)},addTpl:function(e){return this.insertTpl("tpl",e)},addRowTpl:function(e){return this.insertTpl("rowTpl",e)},addCellTpl:function(e){return this.insertTpl("cellTpl",e)},insertTpl:function(e,t){var i,n;for(t=t.isTemplate?Ext.Object.chain(t):new Ext.XTemplate("{%this.nextTpl.applyOut(values, out, parent);%}",t),i=this[e];t.priority<i.priority;i=i.nextTpl)n=i;return n?n.nextTpl=t:this[e]=t,t.nextTpl=i,t},tplApplyOut:function(e,t,i){this.before&&!1===this.before(e,t,i)||(this.nextTpl.applyOut(e,t,i),this.after&&this.after(e,t,i))},constructFeatures:function(){var e,t,i,n,r=this.features;if(r)for(t=[],i=0,n=r.length;i<n;i++)(e=r[i]).isFeature||(e=Ext.create("feature."+e.ftype,e)),t[i]=e;return t},beforeRender:function(){this.callParent(),this.enableTextSelection||this.protoEl.unselectable()},updateScrollable:function(e){var t=this.grid.ownerGrid;!t.lockable&&e.isScroller&&e!==t.scrollable&&(t.scrollable=e)},afterComponentLayout:function(e,t,i,n){var r=this.grid.ownerGrid;r.mixins.lockable&&r.syncLockableLayout(),this.callParent([e,t,i,n])},getElConfig:function(){var e=this.callParent();return delete e["aria-hidden"],delete e["aria-disabled"],e},onBindStore:function(e){var t=this.bufferedRenderer;t&&t.store!==e&&t.bindStore(e),this.all&&this.all.getCount()&&!this.grid.reconfiguring&&this.clearViewEl(!0),this.callParent(arguments)},onOwnerGridHide:function(){var e=this.getScrollable(),t=this.bufferedRederer;e&&e.suspendPartnerSync(),t&&t.disable()},onOwnerGridShow:function(){var e=this.getScrollable(),t=this.bufferedRederer;e&&e.resumePartnerSync(),t&&t.enable()},getStoreListeners:function(e){var t=this.callParent([e]),i=this.dataSource;return i&&i.isFeatureStore&&(delete t.add,delete t.remove),this.bufferedRenderer&&delete t.clear,t.beforepageremove=this.beforePageRemove,t},beforePageRemove:function(e,t){var i=this.all,n=e.getPageSize();if(i.startIndex>=(t-1)*n&&i.endIndex<=t*n-1)return e.get(t),!1},onViewScroll:function(e,t,i){this.destroyed||this.ignoreScroll||this.callParent([e,t,i])},createRowElement:function(e,t,i){var n,r=this.renderBuffer,o=this.collectData([e],t);return o.columns=i,this.tpl.overwrite(r,o),this.cleanupData(),n=r.dom.querySelector(this.getNodeContainerSelector()).firstChild,Ext.fly(n).saveTabbableState(this.saveTabOptions),n},bufferRender:function(e,t){var i,n=this.renderBuffer,r=document.createRange?document.createRange():null;if(this.tpl.overwrite(n,this.collectData(e,t)),this.cleanupData(),n.saveTabbableState(this.saveTabOptions),n=n.dom.querySelector(this.getNodeContainerSelector()),r)r.selectNodeContents(n),i=r.extractContents();else for(i=document.createDocumentFragment();n.firstChild;)i.appendChild(n.firstChild);return{fragment:i,children:Ext.Array.toArray(i.childNodes)}},collectData:function(e,t){var i=this.tableValues;return this.rowValues.view=this,i.view=this,i.rows=e,i.columns=null,i.viewStartIndex=t,i.tableStyle="width:"+this.headerCt.getTableWidth()+"px",i},cleanupData:function(){var e=this.tableValues;e.view=e.columns=e.rows=this.rowValues.view=null},refreshSize:function(e){var t,i=this,n=i.getBodySelector(),r=i.lockingPartner;i.actionableMode||(t=i.saveFocusState()),n&&i.body.attach(i.el.dom.querySelector(n)),i.hasLoadingHeight||(Ext.suspendLayouts(),i.callParent([e]),(e||i.hasVariableRowHeight()&&i.dataSource.getCount())&&i.grid.updateLayout(),Ext.resumeLayouts(!r||!r.grid.isVisible()||r.all.getCount()===i.all.getCount()),t&&t())},isLayoutRoot:function(){return!1},clearViewEl:function(e){var t;this.rendered&&(this.callParent(),e||(t=Ext.get(this.getNodeContainer()))&&t.dom!==this.getTargetEl().dom&&t.destroy())},getRefItems:function(e){var t,i,n,r,o,a=this.ownerGrid.liveRowContexts,s=!!this.isLockedView,l=this.callParent([e]);for(o in a)for(t=(n=a[o].getWidgets()).length,i=0;i<t;i++)s===(r=n[i]).$fromLocked&&(l[l.length]=r,e&&r.getRefItems&&l.push.apply(l,r.getRefItems(!0)));return l},getMaskTarget:function(){return this.ownerCt.body},statics:{getBoundView:function(e){return Ext.getCmp(e.getAttribute("data-boundView"))}},getRecord:function(e){if(!this.store.destroyed)return e.isModel?e:(e=this.getNode(e))?this.dataSource.getByInternalId(e.getAttribute("data-recordId")):void 0},indexOf:function(e){return(e=this.getNode(e))||0===e?this.all.indexOf(e):-1},indexInStore:function(e){return e?this.dataSource.indexOf(this.getRecord(e)):-1},indexOfRow:function(e){var t=this.dataSource;return e.isCollapsedPlaceholder?t.indexOfPlaceholder(e):t.indexOf(e)},renderRows:function(e,t,i,n){var r,o=this.rowValues,a=e.length;for(o.view=this,o.columns=t,o.rowRole=this.rowAriaRole,this.cellValues.cellRole=this.cellAriaRole,r=0;r<a;r++,i++)o.itemClasses.length=o.rowClasses.length=0,this.renderRow(e[r],i,n);o.view=o.columns=o.record=null},renderColumnSizer:function(e,t){var i,n,r,o=e.columns||this.getGridColumns(),a=o.length;for(t.push('<colgroup role="presentation">'),i=0;i<a;i++)r=(n=o[i]).cellWidth?n.cellWidth:Ext.grid.header.Container.prototype.defaultWidth,t.push('<col role="presentation" class="',Ext.baseCSSPrefix,"grid-cell-",o[i].getItemId(),'" style="width:'+r+'px">');t.push("</colgroup>")},renderRow:function(e,t,i){var n,r=this,o=-1===t,a=r.selectionModel,s=r.rowValues,l=s.itemClasses,d=s.rowClasses,u=r.itemCls,c=r.rowTpl;if(s.rowAttr={},s.record=e,s.recordId=e.internalId,s.recordIndex=r.store.indexOf(e),s.rowIndex=t,s.rowId=r.getRowId(e),s.itemCls=s.rowCls="",s.columns||(s.columns=r.ownerCt.getVisibleColumnManager().getColumns()),l.length=d.length=0,o||(l[0]=u,!r.ownerCt.disableSelection&&a.isRowSelected&&a.isRowSelected(e)&&l.push(r.selectedItemCls),r.stripeRows&&t%2!=0&&l.push(r.altRowCls),r.getRowClass&&(n=r.getRowClass(e,t,null,r.dataSource))&&d.push(n)),!i)return c.apply(s,r.tableValues);c.applyOut(s,i,r.tableValues)},renderCell:function(e,t,i,n,r,o){var a,s,l,d=this,u=e.renderer,c=d.selectionModel,h=d.cellValues,f=h.classes,g=t.data[e.dataIndex],p=d.cellTpl,m=e.enableTextSelection,x=d.navigationModel.getPosition();null==m&&(m=d.enableTextSelection),h.record=t,h.column=e,h.recordIndex=i,h.rowIndex=n,h.columnIndex=h.cellIndex=r,h.align=e.textAlign,h.innerCls=e.innerCls,h.tdCls=h.tdStyle=h.tdAttr=h.style="",h.unselectableAttr=m?"":'unselectable="on"',f[1]=e.getCellId(),l=2,u&&u.call?(a=4<u.length?d.ownerCt.columnManager.getHeaderIndex(e):r,s=u.call(e.usingDefaultRenderer?e:e.scope||d.ownerCt,g,h,t,i,a,d.dataSource,d),h.css&&(t.cssWarning=!0,h.tdCls+=" "+h.css,h.css=null),h.tdCls&&(f[l++]=h.tdCls)):s=g,h.value=null==s||0===s.length?e.emptyCellText:s,e.tdCls&&(f[l++]=e.tdCls),d.markDirty&&t.dirty&&t.isModified(e.dataIndex)&&(f[l++]=d.dirtyCls,e.dirtyTextElementId&&(h.tdAttr=(h.tdAttr?h.tdAttr+" ":"")+'aria-describedby="'+e.dirtyTextElementId+'"')),e.isFirstVisible&&(f[l++]=d.firstCls),e.isLastVisible&&(f[l++]=d.lastCls),m||(f[l++]=d.unselectableCls),c&&(c.isCellModel||c.isSpreadsheetModel)&&c.isCellSelected(d,i,e)&&(f[l++]=d.selectedCellCls),x&&x.record.id===t.id&&x.column===e&&(f[l++]=d.focusedItemCls),f.length=l,h.tdCls=f.join(" "),p.applyOut(h,o),h.column=h.record=null},getRow:function(e){var t=this.rowSelector;return!e&&0!==e||!this.rendered?null:Ext.isString(e)?(e=Ext.getDom(e))&&e.querySelectorAll(t)[0]:Ext.isNumber(e)?(e=this.all.item(e,!0))&&e.querySelectorAll(t)[0]:e.isModel?this.getRowByRecord(e):(e=Ext.fly(e.target||e)).is(this.itemSelector)?this.getRowFromItem(e):e.findParent(t,this.getTargetEl())},getRowId:function(e){return this.id+"-record-"+e.internalId},constructRowId:function(e){return this.id+"-record-"+e},getNodeById:function(e){return e=this.constructRowId(e),this.retrieveNode(e,!1)},getRowById:function(e){return e=this.constructRowId(e),this.retrieveNode(e,!0)},getNodeByRecord:function(e){return this.retrieveNode(this.getRowId(e),!1)},getRowByRecord:function(e){return this.retrieveNode(this.getRowId(e),!0)},getRowFromItem:function(e){var t,i=Ext.getDom(e).tBodies[0].childNodes,n=i.length;for(t=0;t<n;t++)if(Ext.fly(i[t]).is(this.rowSelector))return i[t]},retrieveNode:function(e,t){var i=this.el.getById(e,!0);return t&&i?i.querySelector(this.rowSelector,!0):i},updateIndexes:Ext.emptyFn,bodySelector:"div."+Ext.baseCSSPrefix+"grid-item-container",nodeContainerSelector:"div."+Ext.baseCSSPrefix+"grid-item-container",itemSelector:"table."+Ext.baseCSSPrefix+"grid-item",rowSelector:"tr."+Ext.baseCSSPrefix+"grid-row",cellSelector:"td."+Ext.baseCSSPrefix+"grid-cell",sizerSelector:"."+Ext.baseCSSPrefix+"grid-cell",innerSelector:"div."+Ext.baseCSSPrefix+"grid-cell-inner",getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(e){var t=this.sizerSelector+"-"+e.getItemId();return"td"+t+",col"+t},getItemSelector:function(){return this.itemSelector},getCellSelector:function(e){return e?e.getCellSelector():this.cellSelector},getCellInnerSelector:function(e){return this.getCellSelector(e)+" "+this.innerSelector},addRowCls:function(e,t){var i=this.getRow(e);i&&Ext.fly(i).addCls(t)},removeRowCls:function(e,t){var i=this.getRow(e);i&&Ext.fly(i).removeCls(t)},onRowSelect:function(e){var t;this.addItemCls(e,this.selectedItemCls),(t=this.getRow(e))&&t.setAttribute("aria-selected",!0),Ext.isIE8&&this.repaintBorder(e+1)},onRowDeselect:function(e){var t;this.removeItemCls(e,this.selectedItemCls),(t=this.getRow(e))&&t.removeAttribute("aria-selected"),Ext.isIE8&&this.repaintBorder(e+1)},onCellSelect:function(e){var t=this.getCellByPosition(e,!0);t&&(Ext.fly(t).addCls(this.selectedCellCls),t.setAttribute("aria-selected",!0))},onCellDeselect:function(e){var t=this.getCellByPosition(e,!0);t&&(Ext.fly(t).removeCls(this.selectedCellCls),t.removeAttribute("aria-selected"))},getCellInclusive:function(e,t){var i,n,r;return!!(e&&(n=this.getRow(e.row),(i=this.ownerCt.getColumnManager().getHeaderAtIndex(e.column))&&n))&&(r=n.querySelector(this.getCellSelector(i)),t?r:Ext.get(r))},getColumnByPosition:function(e){var t,i;return!!e&&((i=e.column)&&!i.destroyed&&i.isColumn?i:(t=e.view||this,i="number"==typeof i?i:e.colIdx,t.getVisibleColumnManager().getHeaderAtIndex(i)))},getCellByPosition:function(e,t){var i,n,r,o;return!!(e&&(n=(i=e.view||this).getRow(e.record||e.row),(r=i.getColumnByPosition(e))&&n))&&(o=n.querySelector(i.getCellSelector(r)),t?o:Ext.get(o))},onFocusEnter:function(e){var t,i,n,r=this,o=e.fromComponent,a=r.getNavigationModel();if(r.containsFocus)return Ext.Component.prototype.onFocusEnter.call(r,e);if(r.actionableMode){if(r.actionPosition)return r.el.dom.setAttribute("tabIndex","-1"),void(r.cellFocused=!0);r.ownerGrid.setActionableMode(!1)}if(e=e.event,!r.cellFocused&&r.all.getCount()&&r.dataSource.getCount())if((n=e.getTarget())===r.el.dom){if("scrollbar"===r.lastFocused)return void(e.relatedTarget&&e.relatedTarget.focus&&e.relatedTarget.focus());if(!(t=r.getDefaultFocusPosition(o)))return e.stopEvent(),void r.el.focus();n=null}else n===r.tabGuardEl?(t=new Ext.grid.CellContext(r).setPosition(r.all.endIndex,r.getVisibleColumnManager().getColumns().length-1),n=null):(i=e.getTarget(r.getCellSelector()))&&(n===i?(t=new Ext.grid.CellContext(r).setPosition(r.getRecord(n),r.getHeaderByCell(i)),n=null):n&&Ext.fly(n).isFocusable()&&r.el.contains(n)&&(t=new Ext.grid.CellContext(r).setPosition(r.getRecord(n),r.getHeaderByCell(i))));t&&(r.toggleChildrenTabbability(!1),n&&(t.target=n,r.ownerGrid.setActionableMode(!0,t)&&(t=null)),t&&a.setPosition(t,null,e,null,!0),r.cellFocused=r.el.contains(Ext.Element.getActiveElement()),r.cellFocused&&r.el.dom.setAttribute("tabIndex","-1")),Ext.Component.prototype.onFocusEnter.call(r,e)},onFocusLeave:function(e){var t,i=this;i.destroying||i.refreshing||(t=!i.lockingPartner||!e.toComponent||e.toComponent!==i.lockingPartner&&!i.lockingPartner.isAncestor(e.toComponent),i.cellFocused&&(t&&i.getNavigationModel().setPosition(null,null,e.event,null,!0),i.cellFocused=!1,i.focusEl=i.el,i.focusEl.dom.setAttribute("tabIndex",0)),t?i.ownerGrid.actionableMode&&(i.lastFocused=i.actionPosition,i.ownerGrid.setActionableMode(!1)):i.actionPosition=null,Ext.Component.prototype.onFocusLeave.call(i,e))},onRowFocus:function(e,t,i){t?(this.addItemCls(e,this.focusedItemCls),i||this.focusRow(e)):this.removeItemCls(e,this.focusedItemCls),Ext.isIE8&&this.repaintBorder(e+1)},focusRow:function(e,t){var i=this.getFocusTask();t?i.delay(Ext.isNumber(t)?t:10,this.focusRow,this,[e,!1]):(i.cancel(),this.isVisible(!0)&&this.getNavigationModel().setPosition(this.getRecord(e)))},focusNode:function(e,t){this.focusRow(e,t)},scrollRowIntoView:function(e,t){(e=this.getRow(e))&&this.scrollElIntoView(e,!1,t)},focusCell:function(e,t){var i=this.getFocusTask();t?i.delay(Ext.isNumber(t)?t:10,this.focusCell,this,[e,!1]):(i.cancel(),this.isVisible(!0)&&this.getCellByPosition(e)&&this.getNavigationModel().setPosition(e))},findFocusPosition:function(e,t,i,n){var r,o,a,s,l=t.cellElement,d=this.ownerGrid.actionables,u=d.length;for(r=t.clone(),a=(o=Ext.fly(l).findTabbableElements())[Ext.Array.indexOf(o,e)+(i?1:-1)];!a&&(l=l[i?"nextSibling":"previousSibling"]);){for(r.setColumn(this.getHeaderByCell(l)),s=0;s<u;s++)d[s].activateCell(r);(l=r.getCell(!0))&&(o=Ext.fly(l).findTabbableElements()).length&&(a=o[i?0:o.length-1])}return{target:a,position:r}},getDefaultFocusPosition:function(e){var t,i,n=this,r=n.dataSource,o=n.lastFocused,a=new Ext.grid.CellContext(n).setPosition(0,0);return e&&(e.isColumn&&!1!==e.cellFocusable?((o=o||a).setColumn(e),o.setView(e.getView())):e.isTableView&&e.lastFocused&&e.ownerGrid===n.ownerGrid&&(o=new Ext.grid.CellContext(n).setPosition(e.lastFocused.record,0))),o?(i=n.getScrollable(),r.contains(o.record)&&(!i||i.isInView(o.getRow(!0)).y)||o.setRow(r.getAt(Math.min(o.rowIdx,r.getCount()-1)))):(o=a,(t=n.el.dom.querySelector(n.getCellSelector()+'[tabIndex="-1"]'))?o.setPosition(n.getRecord(t),n.getHeaderByCell(t)):o=null),o},getLastFocused:function(){var e=this.lastFocused;if(e&&e.record&&e.column&&-1!==this.dataSource.indexOf(e.record)&&-1!==this.getVisibleColumnManager().indexOf(e.column)&&this.getNode(e.record))return e},scrollCellIntoView:function(e,t){e.isCellContext&&(e=this.getCellByPosition(e)),e&&this.scrollElIntoView(e,null,t)},scrollElIntoView:function(e,t,i){var n=this.getScrollable();n&&n.ensureVisible(e,{animation:i,x:t})},syncRowHeightBegin:function(){var e,t,i,n=this.all,r=n.count,o=[],a=Ext.grid.locking.RowSynchronizer;for(e=0,t=n.startIndex;e<r;e++,t++)o[e]=i=new a(this,n.elements[t]),i.reset();return o},syncRowHeightClear:function(e){var t,i=this.all.count;for(t=0;t<i;t++)e[t].reset()},syncRowHeightMeasure:function(e){var t,i=e.length;for(t=0;t<i;t++)e[t].measure()},syncRowHeightFinish:function(e,t){var i,n=e.length,r=this.bufferedRenderer;for(i=0;i<n;i++)e[i].finish(t[i]);r&&r.syncRowHeightsFinish()},refreshNode:function(e){Ext.isNumber(e)&&(e=this.store.getAt(e)),this.handleUpdate(this.dataSource,e,null,null,null,!0)},handleUpdate:function(e,t,i,n,r,o){var a,s,l,d,u,c,h,f,g,p,m,x,y,v,E,b,C,S,w,T,P=this,k=P.store.indexOf(t),I=P.rowTpl,R=P.markDirty,M=P.dirtyCls,A=[],D=P.variableRowHeight,F=0,L=P.ownerCt,O=P.cellFly||(P.self.prototype.cellFly=new Ext.dom.Fly);if(C=(i=i||Ext.data.Model.EDIT)!==Ext.data.Model.EDIT,P.viewReady){if(P.updatingRows=!0,a=P.getNodeByRecord(t)){if(t.isCollapsedPlaceholder)return void Ext.fly(a).syncContent(P.createRowElement(t,P.indexOfRow(t)));if(f=P.overItemCls,g=P.ownerCt.getVisibleColumnManager().getColumns(),o)A=g,F=1;else for(x=0,m=g.length;x<m;x++)(p=g[x]).preventUpdate?(v=a.querySelector(p.getCellSelector()))&&!C&&R&&(O.attach(v),t.isModified(p.dataIndex)?(O.addCls(M),p.dirtyTextElementId&&v.setAttribute("aria-describedby",p.dirtyTextElementId)):(O.removeCls(M),v.removeAttribute("aria-describedby"))):(y=P.shouldUpdateCell(t,p,n))&&(F|=y,A[A.length]=p,D=D||p.variableRowHeight);if(P.hasListeners.beforeitemupdate&&P.fireEvent("beforeitemupdate",t,k,a,A),P.getRowClass||!P.getRowFromItem(a)||1&F||1<a.tBodies[0].childNodes.length){if(w=a._extData,l=P.createRowElement(t,P.indexOfRow(t),A),Ext.fly(a,"_internal").hasCls(f)&&Ext.fly(l).addCls(f),Ext.isIE9m&&a.mergeAttributes)a.mergeAttributes(l,!0);else for(u=(d=l.attributes).length,h=0;h<u;h++)c=d[h].name,b=d[h].value,"id"!==c&&a.getAttribute(c)!==b&&a.setAttribute(c,b);for(w&&(w.isSynchronized=!1),g.length&&(s=P.getRow(a))&&P.updateColumns(s,l.querySelector(P.rowSelector),A,t);I&&(!I.syncContent||!1!==I.syncContent(a,l,n?A:null));)I=I.nextTpl}else for(x=0,m=A.length;x<m;x++)E=(p=A[x]).dataIndex,b=t.get(E),v=a.querySelector(p.getCellSelector()),O.attach(v),!C&&R&&(t.isModified(p.dataIndex)?(O.addCls(M),p.dirtyTextElementId&&v.setAttribute("aria-describedby",p.dirtyTextElementId)):(O.removeCls(M),v.removeAttribute("aria-describedby"))),S=p.usingDefaultRenderer?p:p.scope,p.updater?Ext.callback(p.updater,S,[v,b,t,P,P.dataSource],0,p,L):(p.renderer&&(b=Ext.callback(p.renderer,S,[b,null,t,0,0,P.dataSource,P],0,p,L)),b=(T=null==b||0===b.length)?p.emptyCellText:b,p.producesHTML||T?v.querySelector(P.innerSelector).innerHTML=b:v.querySelector(P.innerSelector).childNodes[0].data=b),P.highlightClass&&(Ext.fly(v).addCls(P.highlightClass),P.changedCells||(P.self.prototype.changedCells=[],P.prototype.clearChangedTask=new Ext.util.DelayedTask(P.clearChangedCells,P.prototype),P.clearChangedTask.delay(P.unhighlightDelay)),P.changedCells.push({cell:v,cls:P.highlightClass,expires:Ext.Date.now()+1e3}));C&&R&&!t.dirty&&Ext.fly(a,"_internal").select("."+M).removeCls(M).set({"aria-describedby":void 0}),D&&Ext.suspendLayouts(),P.hasListeners.itemupdate&&P.fireEvent("itemupdate",t,k,a,P),D&&(P.ownerGrid.updateLayout(),Ext.resumeLayouts(!0))}P.updatingRows=!1}},clearChangedCells:function(){var e,t,i=Ext.Date.now();for(t=this.changedCells.length;0<t&&(e=this.changedCells[0]).expires<=i;)Ext.fly(e.cell).removeCls(e.highlightClass),Ext.Array.erase(this.changedCells,0,1),t--;t&&this.clearChangedTask.delay(this.unhighlightDelay)},updateColumns:function(e,t,i,n){var r,o,a,s,l,d,u,c,h,f,g=this.getCellSelector(),p=i.length;if(e.mergeAttributes)e.mergeAttributes(t,!0);else for(o=(r=t.attributes).length,s=0;s<o;s++)a=r[s].name,f=r[s].value,"id"!==a&&e.getAttribute(a)!==f&&e.setAttribute(a,f);for((h=e._extData)&&(h.isSynchronized=!1),l=0;l<p;l++){for(d=i[l],g=this.getCellSelector(d),u=e.querySelector(g),o=(r=(c=t.querySelector(g)).attributes).length,s=0;s<o;s++)a=r[s].name,f=r[s].value,"id"!==a&&u.getAttribute(a)!==f&&u.setAttribute(a,f);(h=u._extData)&&(h.isSynchronized=!1),this.oldCellFly.attach(u.querySelector(this.innerSelector)).syncContent(c.querySelector(this.innerSelector)),n&&d.onItemAdd&&d.onItemAdd([n])}},shouldUpdateCell:function(e,t,i){return t.shouldUpdateCell(e,i)},refresh:function(){this.destroying||(this.getVisibleColumnManager().getColumns().length?(this.callParent(arguments),this.headerCt.setSortState()):(this.refreshCounter&&this.clearViewEl(!0),this.addEmptyText()))},processContainerEvent:function(e){var t=Ext.Component.from(e.target.parentNode);if(t&&t.up(this.ownerCt))return!1},processItemEvent:function(e,t,i,n){var r,o,a,s,l,d,u,c=this,h=c.self,f=h.EventMap,g=n.type,p=c.features,m=p.length,x=n.position=c.eventPosition||(c.eventPosition=new Ext.grid.CellContext);if(Ext.isIE&&"mouseup"===g&&!n.within(c.el))return!1;if(-1===c.indexInStore(t))return c.processSpecialEvent(n),"mouse"===n.pointerType&&n.preventDefault(),!1;if(d=x.rowElement=t.querySelector(c.rowSelector),u=n.getTarget(c.getCellSelector(),d),g=h.TouchEventMap[g]||g,u){if(!u.parentNode)return!1;o=(l=c.getHeaderByCell(u))?c.ownerCt.getColumnManager().getHeaderIndex(l):(l=u=null,-1)}else o=-1;if(x.setAll(c,i,l?c.getVisibleColumnManager().getHeaderIndex(l):-1,e,l),x.cellElement=u,!1===(a=c.fireEvent("uievent",g,c,u,i,o,n,e,d))||!1===c.callParent(arguments))return!1;for(r=0;r<m;++r)if((s=p[r]).wrapsItem&&!1===s.vetoEvent(e,d,i,n))return c.processSpecialEvent(n),!1;return u&&"mouseover"!==g&&"mouseout"!==g&&(a=!(!1===c["onBeforeCell"+f[g]](u,o,e,d,i,n)||!1===c.fireEvent("beforecell"+g,c,u,o,e,d,i,n)||!1===c["onCell"+f[g]](u,o,e,d,i,n)||!1===c.fireEvent("cell"+g,c,u,o,e,d,i,n))),!1!==a&&(a=c.fireEvent("row"+g,c,e,d,i,n)),a},processSpecialEvent:function(e){var t,i,n,r,o,a,s=this,l=s.features,d=l.length,u=e.type,c=s.ownerCt;if(s.callParent(arguments),"mouseover"!==u&&"mouseout"!==u){for(u=s.self.TouchEventMap[u]||u,t=0;t<d;t++)if((i=l[t]).hasFeatureEvent&&(r=e.getTarget(i.eventSelector,s.getTargetEl()))&&(n=i.eventPrefix,o=i.getFireEventArgs("before"+n+u,s,r,e),a=i.getFireEventArgs(n+u,s,r,e),!1===s.fireEvent.apply(s,o)||!1===c.fireEvent.apply(c,o)||!1===s.fireEvent.apply(s,a)||!1===c.fireEvent.apply(c,a)))return!1;return!0}},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyUp:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyUp:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(e){this.autoSizeColumn(e)},autoSizeColumn:function(e){if(Ext.isNumber(e)&&(e=this.getGridColumns()[e]),e){if(e.isGroupHeader)return void e.autoSize();delete e.flex,e.setWidth(this.getMaxContentWidth(e))}},getMaxContentWidth:function(e){var t,i,n=this.getHeaderCells(e),r=e.getWidth(),o=this.getColumnResizers(e),a=n.length,s=Math.max,l=0;for(0<a&&(Ext.supports.ScrollWidthInlinePaddingBug&&(l+=this.getCellPaddingAfter(n[0])),this.columnLines&&(l+=Ext.fly(n[0].parentNode).getBorderWidth("lr"))),t=0;t<o.length;t++)o[t].setWidth(1);for(e.textEl.setStyle({"text-overflow":"clip",display:"table-cell"}),i=e.textEl.dom.offsetWidth+e.titleEl.getPadding("lr"),e.textEl.setStyle({"text-overflow":"",display:""}),t=0;t<a;t++)i=s(i,n[t].scrollWidth);for(i=s((i+=l)+1,40),t=0;t<o.length;t++)o[t].setWidth(r);return i},getColumnResizers:function(e){var t,i,n=this.features||[],r=[this.body.select(this.getColumnSizerSelector(e))];for(i=0;i<n.length;i++)(t=n[i].columnSizer)&&r.push(t.select(this.getColumnSizerSelector(e)));return r},getHeaderCells:function(e){var t,i,n=this.features||[],r=this.el.query(e.getCellInnerSelector());for(i=0;i<n.length;i++)(t=n[i].columnSizer)&&(r=r.concat(t.query(e.getCellInnerSelector())));return r},getPositionByEvent:function(e){var t=e.getTarget(this.cellSelector),i=e.getTarget(this.itemSelector),n=this.getRecord(i),r=this.getHeaderByCell(t);return this.getPosition(n,r)},getHeaderByCell:function(e){return!!e&&this.ownerGrid.getVisibleColumnManager().getHeaderById(Ext.getDom(e).getAttribute("data-columnId"))},walkCells:function(e,t,i,n){var r=e.clone(),o=this.lockingPartner&&this.lockingPartner.grid.isVisible()?this.lockingPartner:null,a=e.rowIdx,s=this.dataSource.getCount()-1,l=this.ownerCt.getVisibleColumnManager().getColumns();switch(t.toLowerCase()){case"right":if(e.isLastColumn()){if(s<(a=o&&this.isLockedView?a:a+1))return!1;o&&(r.view=o),r.setPosition(a,0)}else r.navigate(1);break;case"left":if(e.isFirstColumn()){if((a=o&&this.isNormalView?a:a-1)<0)return!1;o&&(l=(r.view=o).getVisibleColumnManager().getColumns()),r.setPosition(a,l[l.length-1])}else r.navigate(-1);break;case"up":if(0===a)return!1;r.setRow(a-1);break;case"down":if(a===s)return!1;r.setRow(a+1)}return(!i||!0===i.call(n||this,r))&&r},walkRows:function(e,t){var i,n=this.dataSource,r=0,o=e,a=t<0?0:n.getCount()-1,s=a?1:-1,l=e;do{if(a?a<=l:l<=a)return o||a;l+=s,(i=Ext.fly(this.getRow(l)))&&i.isVisible(!0)&&(r+=s,o=l)}while(r!==t);return l},walkRecs:function(e,t){var i,n,r=this.dataSource,o=0,a=e,s=t<0?0:(r.isBufferedStore?r.getTotalCount():r.getCount())-1,l=s?1:-1,d=r.indexOf(e);do{if(s?s<=d:d<=s)return a;d+=l,!(n=r.getAt(d)).isCollapsedPlaceholder&&(i=Ext.fly(this.getNodeByRecord(n)))&&i.isVisible(!0)&&(o+=l,a=n)}while(o!==t);return a},getFirstVisibleRowIndex:function(){var e,t=this.indexOf(this.all.first())-1;e=this.dataSource.isBufferedStore?this.dataSource.getTotalCount():this.dataSource.getCount();do{if((t+=1)===e)return}while(!Ext.fly(this.getRow(t)).isVisible(!0));return t},getLastVisibleRowIndex:function(){var e=this.indexOf(this.all.last());do{if(-1===--e)return}while(!Ext.fly(this.getRow(e)).isVisible(!0));return e},getHeaderCt:function(){return this.headerCt},getPosition:function(e,t){return new Ext.grid.CellContext(this).setPosition(e,t)},doDestroy:function(){var e,t,i,n=this.featuresMC;if(this.bindStore(null),n)for(t=0,i=n.getCount();t<i;++t)(e=n.getAt(t))&&!e.destroyed&&e.destroy();this.all.destroy(),this.body.destroy(),this.actionRowFly.destroy(),this.callParent()},onReplace:function(e,t,i,n){var r,o=this.bufferedRenderer;this.rendered&&o?(r=this.saveFocusState(),o.onReplace(e,t,i,n),r()):this.callParent(arguments),this.setPendingStripe(t)},onResize:function(e,t,i,n){var r=this.bufferedRenderer;r&&r.onViewResize(this,e,t,i,n),this.callParent([e,t,i,n])},onAdd:function(e,t,i){var n=this.bufferedRenderer;this.addingRows=!0,this.rendered&&n&&(n.bodyTop||this.dataSource.getCount()+t.length>=n.viewSize)?n.onReplace(e,i,[],t):this.callParent(arguments),this.setPendingStripe(i),this.addingRows=!1},onRemove:function(e,t,i){var n,r=this.bufferedRenderer;this.rendered&&r&&this.dataSource.getCount()+t.length>=r.viewSize?(n=this.saveFocusState(),r.onReplace(e,i,t,[]),n()):this.callParent(arguments),this.actionPosition&&-1!==Ext.Array.indexOf(t,this.actionPosition.record)&&(this.actionPosition=null),this.setPendingStripe(i)},saveFocusState:function(){var t,i,n,r,o=this,a=o.dataSource,s=o.actionableMode,l=o.getNavigationModel(),d=s?o.actionPosition:l.getPosition(!0),e=Ext.fly(Ext.Element.getActiveElement()),u=d&&d.view===o&&Ext.fly(d.getCell(!0));return!o.skipSaveFocusState&&u&&u.contains(e)?(d=d.clone(),e.suspendFocusEvents(),s&&u.dom!==e.dom?(n=d.record,o.suspendActionableMode()):(s=!1,l.setPosition()),e.resumeFocusEvents(),!s&&a.isExpandingOrCollapsing?Ext.emptyFn:function(){var e;(a=o.dataSource).getCount()?(e=o.all,t=Math.min(Math.max(d.rowIdx,e.startIndex),e.endIndex),i=Math.min(d.colIdx,o.getVisibleColumnManager().getColumns().length-1),n=d.record,d=new Ext.grid.CellContext(o).setPosition(n&&a.contains(n)&&!n.isCollapsedPlaceholder?n:t,i),r=d.record,d.getCell(!0)&&(s&&n&&r&&n.getId()===r.getId()?o.resumeActionableMode(d):(s&&o.setActionableMode(!1),l.setPosition(d,null,null,null,!0),l.getPosition()||d.column.focus()))):d.column.focus()}):Ext.emptyFn},onDataRefresh:function(e){var t=this.ownerCt;t&&2===t.isCollapsingOrExpanding?t.on("expand",this.onDataRefresh,this,{single:!0}):this.callParent([e])},getViewRange:function(){return this.bufferedRenderer?this.bufferedRenderer.getViewRange():this.callParent()},setPendingStripe:function(e){var t=this.stripeOnUpdate;t=null===t?e:Math.min(t,e),this.stripeOnUpdate=t},onEndUpdate:function(){var e=this.stripeOnUpdate,t=this.all.startIndex;this.rendered&&(e||0===e)&&(e<t&&(e=t),this.doStripeRows(e),this.stripeOnUpdate=null),this.callParent(arguments)},doStripeRows:function(e,t){var i,n,r,o;if(this.rendered&&this.stripeRows)for(r=0,n=(i=this.getNodes(e,t)).length;r<n;r++)(o=i[r]).className=o.className.replace(this.rowClsRe," "),++e%2==0&&(o.className+=" "+this.altRowCls)},hasActiveFeature:function(){return this.isGrouping&&this.store.isGrouped()||this.isRowWrapped},getCellPaddingAfter:function(e){return Ext.fly(e).getPadding("r")},privates:{saveTabOptions:{skipSelf:!0,includeHidden:!0},collectNodes:function(e){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},setActionableMode:function(e,t){var i,n,r,o,a,s,l=this,d=l.getNavigationModel(),u=l.grid.actionables,c=u.length,h=!1;if(l.actionableMode===e&&(!e||t.isEqual(l.actionPosition)))return!1;if(e)return t&&(t.view===l||t.view===(o=l.lockingPartner)&&o.actionableMode)&&(h=l.activateCell(t)),h;for(i=Ext.fly(Ext.Element.getActiveElement()),l.el.contains(i)&&!Ext.fly(i).is(l.getCellSelector())&&(n=l.actionPosition&&l.actionPosition.record||l.getRecord(i),r=l.getHeaderByCell(i.findParent(l.getCellSelector())),a=t&&t.getCell(!0),t&&a||(a=(t=new Ext.grid.CellContext(l).setPosition(n||0,r||0)).getCell(!0)),Ext.fly(a).focus(),i=Ext.fly(Ext.Element.getActiveElement()),l.el.contains(i)&&i.is(l.getCellSelector())||(t=null)),s=0;s<c;s++)u[s].deactivate&&u[s].deactivate();if(l.actionRow&&l.actionRow.saveTabbableState({skipSelf:!0,includeSaved:!1}),l.destroyed)return!1;l.actionableMode=l.ownerGrid.actionableMode=!1,l.actionPosition=d.actionPosition=l.actionRow=null,t&&d.setPosition(t)},activateCell:function(e){var t,i,n,r,o,a,s,l=this,d=e.view!==l?l.lockingPartner:null,u=l.grid.actionables,c=u.length,h=l.getNavigationModel(),f=e.target;if(t=(e=e.clone()).record,e.view.grid.ensureVisible(t,{column:e.column}),n=l.all.item(e.rowIdx,!0),l.actionPosition&&(i=l.all.item(l.actionPosition.rowIdx,!0))&&n!==i&&Ext.fly(i).saveTabbableState({skipSelf:!0,includeSaved:!1}),l.activating=!0,!d){for(r=Ext.fly(e.getCell(!0)),l.actionPosition=e,o=0;o<c;o++)a=a||u[o].activateCell(e,null,!0);r=Ext.fly(e.getCell(!0))}if(d||r&&r.restoreTabbableState({skipSelf:!0}).length|(s=r.findTabbableElements()).length||a){for(o=0;o<c;o++)u[o].activateRow&&u[o].activateRow(n);if(d||s.length){if(Ext.fly(n).restoreTabbableState({skipSelf:!0}),d)return l.actionableMode=!0,l.actionPosition=null,!(l.activating=!1);if(s)return l.actionRow=l.actionRowFly.attach(n),l.actionableMode=l.ownerGrid.actionableMode=!0,h.setPosition(),h.actionPosition=l.actionPosition=e,f&&Ext.Array.contains(s,f)?Ext.fly(f).focus():Ext.fly(s[0]).focus(),!(l.activating=!1)}}l.activating=!1},suspendActionableMode:function(){var e,t=this.grid.actionables,i=t.length;for(e=0;e<i;e++)t[e].suspend()},resumeActionableMode:function(e){var t,i,n=this.grid.actionables,r=n.length;for(this.toggleChildrenTabbability(!1),t=0;t<r;t++)i=i||n[t].resume(e);i||this.activateCell(e)},onRowExit:function(e,t,i,n,r){var o,a=this,s=n?"nextSibling":"previousSibling",l=a.lockingPartner;if(l&&l.grid.isVisible()&&(o=a.all.indexOf(t),n?a.isNormalView&&o++:a.isLockedView&&o--,a.actionPosition=null,i=(a=l).all.item(o,!0)),a.hasListeners.beforerowexit&&!1===a.fireEvent("beforerowexit",a,e,t,i,n))return!1;a.findFirstActionableElement(e,i,s,n,r)},findFirstActionableElement:function(n,e,r,o,t){var i,a,s,l,d,u,c,h,f=this,g=f.getVisibleColumnManager().getColumns(),p=g.length,m=f.grid.actionables,x=m.length,y=new Ext.grid.CellContext(f);if(e){for(y.setRow(e),s=0;s<x;s++)m[s].activateRow&&m[s].activateRow(e);for(s=o?0:p-1;(o?s<p:-1<s)&&!a;s+=o?1:-1){for(d=g[s],y.setColumn(d),i=(e.dom||e).querySelector(y.column.getCellSelector()),l=0;l<x;l++)u=u||m[l].activateCell(y);(i=Ext.fly(y.getCell(!0)))&&(e=y.getNode(!0),i.restoreTabbableState({skipSelf:!0}),((c=i.findTabbableElements()).length||u)&&(h=f.actionRow&&f.actionRow.dom,f.actionRow=f.actionRowFly.attach(e),f.actionRow.restoreTabbableState({skipSelf:!0}),a=c[o?0:c.length-1]))}a?(f.actionPosition=f.getNavigationModel().actionPosition=y,Ext.fly(a).focus(Ext.asyncFocus?1:0),h&&e!==h&&Ext.fly(h).saveTabbableState({skipSelf:!0,includeSaved:!1})):f.onRowExit(n,e,f.all.item(y.rowIdx+(o?1:-1)),o,t)}else t?f.ownerGrid.setActionableMode(!1):f.grid.ensureVisible(o?0:f.dataSource.getCount()-1,{callback:function(e,t,i){e?f.findFirstActionableElement(n,i,r,o,!0):f.ownerGrid.setActionableMode(!1)}})},stretchHeight:function(e){var t,i=this,n=i.getScrollable(),r=i.stretchers;e&&i.tabGuardEl&&(r&&(r[0].style.marginTop=r[1].style.marginTop=i.el.dom.style.height=0),i.el.dom.style.height=n.constrainScrollRange(e)+"px",0<(t=e-i.el.dom.offsetHeight)&&(i.el.dom.style.height="",r=i.getStretchers(),0<(t=e-i.el.dom.offsetHeight)&&(r[0].style.marginTop=n.constrainScrollRange(t)+"px",0<(t=e-i.el.dom.offsetHeight)&&(r[1].style.marginTop=Math.min(t,n.maxSpacerMargin||0)+"px"))))},getStretchers:function(){var e,t=this.stretchers;return t?this.el.appendChild(t):(e={cls:"x-scroller-spacer",style:"position:relative"},t=this.stretchers=this.el.appendChild([e,e],!0)),t}}},function(e){e.prototype.oldCellFly=new Ext.dom.Fly}),Ext.define("Ext.grid.Panel",{extend:"Ext.panel.Table",alias:["widget.gridpanel","widget.grid"],alternateClassName:["Ext.list.ListView","Ext.ListView","Ext.grid.GridPanel"],requires:["Ext.view.Table"],viewType:"tableview",ariaRole:"grid",lockable:!1,rowLines:!0}),Ext.define("Ext.grid.RowContext",{constructor:function(e){Ext.apply(this,e),this.widgets={},this.usage=0},setRecord:function(e,t){var i=this.viewModel;this.record=e,this.recordIndex=t,i&&(i.set("record",e),i.set("recordIndex",t))},attach:function(e){var t=this.usage;return this.usage|=e.usageBitMask,!t},detach:function(e){var t,i,n,r,o=this.widgets,a=e.usageBitMask,s=this.viewModel;if(!(this.usage&a))return!1;for(r in this.usage&=~a,(i=!this.usage)&&(this.record=null,s&&(s.set("record"),s.set("recordIndex"))),o)n=o[r],e.isAncestor(n)&&((t=n.getFocusEl())&&(t.isTabbable(!0)&&t.saveTabbableState({includeHidden:!0}),t.blur()),n.rendered&&n.detachFromBody());return i},getWidget:function(e,t,i){var n,r=this,o=r.widgets||(r.widgets={}),a=r.ownerGrid,s=a.rowViewModel,l=r.viewModel;return!i.bind&&!s||l||("string"==typeof s&&(s={type:s}),r.viewModel=l=Ext.Factory.viewModel(Ext.merge({parent:a.getRowContextViewModelParent(),data:{record:r.record,recordIndex:r.recordIndex}},s))),(n=o[t])||((n=o[t]=Ext.widget(Ext.apply({ownerCmp:e,_rowContext:r,$vmParent:l||a.getRowContextViewModelParent(),initInheritedState:r.initInheritedStateHook,lookupViewModel:r.lookupViewModelHook},i))).$fromLocked=!!e.isLockedView,n.isWidget?n.initBindable():n.collectContainerElement=!0),n},getWidgets:function(){var e,t=this.widgets,i=[];for(e in t)i.push(t[e]);return i},handleWidgetViewChange:function(e,t){var i=this.widgets[t];i&&(i.ownerCmp=e,i.$fromLocked=!!e.isLockedView)},destroy:function(){var e,t,i=this.widgets;for(e in i)(t=i[e])._rowContext=null,t.destroy();Ext.destroy(this.viewModel),this.callParent()},privates:{initInheritedStateHook:function(e,t){var i=this.$vmParent;this.self.prototype.initInheritedState.call(this,e,t),!e.hasOwnProperty("viewModel")&&i&&(e.viewModel=i)},lookupViewModelHook:function(e){var t=e?null:this.getViewModel();return t=t||(this.$vmParent||null)}}}),Ext.define("Ext.grid.RowEditorButtons",{extend:"Ext.container.Container",alias:"widget.roweditorbuttons",frame:!0,shrinkWrap:!0,position:"bottom",ariaRole:"toolbar",constructor:function(e){var t=e.rowEditor,i=Ext.baseCSSPrefix,n=t.editingPlugin;e=Ext.apply({baseCls:i+"grid-row-editor-buttons",defaults:{xtype:"button",ui:t.buttonUI,scope:n,flex:1,minWidth:Ext.panel.Panel.prototype.minButtonWidth},items:[{cls:i+"row-editor-update-button",itemId:"update",handler:n.completeEdit,text:t.saveBtnText,disabled:t.updateButtonDisabled,listeners:{element:"el",keydown:this.onUpdateKeyDown,scope:this}},{cls:i+"row-editor-cancel-button",itemId:"cancel",handler:n.cancelEdit,text:t.cancelBtnText,listeners:{element:"el",keydown:this.onCancelKeyDown,scope:this}}]},e),this.callParent([e]),this.addClsWithUI(this.position)},onUpdateKeyDown:function(e){e.shiftKey&&e.getKey()===e.TAB&&(e.stopEvent(),this.rowEditor.child(":focusable:not([isButton]):last").focus(!1,!0))},onCancelKeyDown:function(e){e.shiftKey||e.getKey()!==e.TAB||(e.stopEvent(),this.rowEditor.child(":focusable").focus(!1,!0))},setButtonPosition:function(e){var t=this.rowEditor,i=t.getHeight(),n=t.body,r="",o="";this.removeClsWithUI(this.position),this.position=e,this.addClsWithUI(e),"top"===e?r=i-n.getBorderWidth("t")+"px":o=i-n.getBorderWidth("b")+"px",this.el.setStyle({top:o,bottom:r})},privates:{getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this.position},getFrameInfo:function(){var e=this.callParent();return e.top=!0,e}}}),Ext.define("Ext.grid.RowEditor",{extend:"Ext.form.Panel",alias:"widget.roweditor",requires:["Ext.tip.ToolTip","Ext.util.KeyNav","Ext.grid.RowEditorButtons"],saveBtnText:"Update",cancelBtnText:"Cancel",errorsText:"Errors",dirtyText:"You need to commit or cancel your changes",lastScrollLeft:0,lastScrollTop:0,border:!1,tabGuard:!0,_wrapCls:Ext.baseCSSPrefix+"grid-row-editor-wrap",errorCls:Ext.baseCSSPrefix+"grid-row-editor-errors-item",buttonUI:"default",hideMode:"offsets",defaultFocus:"field:canfocus",layout:{type:"hbox",align:"middle"},_cachedNode:!1,initComponent:function(){var e,t,i,n=this,r=n.editingPlugin.grid,o=Ext.container.Container;n.cls=Ext.baseCSSPrefix+"grid-editor "+Ext.baseCSSPrefix+"grid-row-editor",n.lockable=r.lockable,n.lockable?(n.items=[i=n.lockedColumnContainer=new o({$initParent:n,id:r.id+"-locked-editor-cells",scrollable:{x:!1,y:!1},layout:{type:"hbox",align:"middle"},margin:"0 1 0 0"}),t=n.normalColumnContainer=new o({$initParent:n,id:r.id+"-normal-editor-cells",scrollable:{x:!1,y:!1},layout:{type:"hbox",align:"middle"},flex:1})],delete i.$initParent,delete t.$initParent,i.getScrollable().addPartner(r.lockedGrid.view.getScrollable(),"x"),t.getScrollable().addPartner(r.normalGrid.view.getScrollable(),"x"),r.lockedGrid.on({collapse:n.onGridResize,expand:n.onGridResize,beginfloat:n.onBeginFloat,scope:n})):(n.setScrollable({x:!1,y:!1}),n.getScrollable().addPartner(r.view.getScrollable(),"x"),n.lockedColumnContainer=n.normalColumnContainer=n),n.callParent(),n.fields&&(n.addFieldsForColumn(n.fields,!0),n.insertColumnEditor(n.fields),delete n.fields),n.mon(Ext.GlobalEvents,{scope:n,show:n.repositionIfVisible}),(e=n.getForm()).trackResetOnLoad=!0,e.on("validitychange",n.onValidityChange,n),e.on("errorchange",n.onErrorChange,n)},onGridResize:function(){if(this.rendered){var e=this.getClientWidth(),t=this.editingPlugin.grid,i=t.body,n=this.getFloatingButtons();this.wrapEl.setLocalX(i.getOffsetsTo(t)[0]+i.getBorderWidth("l")-t.el.getBorderWidth("l")),this.setWidth(e),n.setLocalX((e-n.getWidth())/2),this.lockable&&this.lockedColumnContainer.setWidth(t.normalGrid.el.getLeft(!0))}},onBeginFloat:function(e){if(e.isSliding&&this.isVisible())return!1},syncAllFieldWidths:function(){var e,t,i=this.query("[isEditorComponent]"),n=i.length;for(this.preventReposition=!0,t=0;t<n;++t)(e=i[t].column).isVisible()&&this.onColumnShow(e);this.preventReposition=!1},syncFieldWidth:function(e){var t,i=e.getEditor();i._marginWidth=i._marginWidth||i.el.getMargin("lr"),t=Math.max(e.getWidth()-i._marginWidth,0),i.setWidth(t),"displayfield"===i.xtype&&(i.inputWidth=t)},onValidityChange:function(e,t){this.updateButton(t)},onErrorChange:function(){var e;this.errorSummary&&this.isVisible()&&(e=this.getForm().isValid(),this[e?"hideToolTip":"showToolTip"]())},updateButton:function(e){var t=this.floatingButtons;t?t.child("#update").setDisabled(!e):this.updateButtonDisabled=!e},afterRender:function(){var e=this,t=e.editingPlugin,i=t.grid;e.scroller=i.getScrollable(),e.callParent(arguments),e.scrollingView=i.lockable?i.normalGrid.view:i.view,e.scrollingViewEl=e.scrollingView.el,e.scroller.on("scroll",e.onViewScroll,e),e.mon(e.el,{click:Ext.emptyFn,stopPropagation:!0}),e.mon(i,"resize",e.onGridResize,e),e.lockable&&i.lockedGrid.view.on("resize","onGridResize",e),e.el.swallowEvent(["keypress","keydown"]),e.initKeyNav(),e.mon(t.view,{beforerefresh:e.onBeforeViewRefresh,refresh:e.onViewRefresh,itemremove:e.onViewItemRemove,scope:e}),e.syncAllFieldWidths(),e.floatingButtons&&e.body.dom.setAttribute("aria-owns",e.floatingButtons.id)},initKeyNav:function(){var e=this.editingPlugin;this.keyNav=new Ext.util.KeyNav({target:this.el,tab:{fn:this.onFieldTab,scope:this},enter:e.onEnterKey,esc:e.onEscKey,scope:e})},onBeforeViewRefresh:function(e){var t=e.el.dom;this.el.dom.parentNode===t&&t.removeChild(this.el.dom)},onViewRefresh:function(e){var t,i=this.context;this.completing||(i&&!i.column.destroyed&&(t=e.getRow(i.record))?e===i.column.getView()&&(i.row=t,i.view=e,this.reposition(),this.tooltip&&this.tooltip.isVisible()&&this.tooltip.setTarget(i.row)):this.editingPlugin.cancelEdit())},onViewItemRemove:function(e,t,i,n){var r,o,a,s=this,l=s.context;!n.refreshing&&l&&(r=(a=s.editingPlugin).grid.getStore(),o=s.editingPlugin.view,r.getById(s.getRecord().getId())&&!s._cachedNode?a.editing&&(s._cachedNode=!0,s.mon(o,{itemadd:s.onViewItemAdd,scope:s})):s._cachedNode||(s.activeField=null,s.editingPlugin.cancelEdit()))},onViewItemAdd:function(e,t,i,n){var r,o,a,s=this.editingPlugin;this._cachedNode&&this.context&&(r=s.view,-1!==(o=Ext.Array.indexOf(e,this.context.record))&&(a=e[o],this.context.node=a,this.context.row=r.getRow(a),this.context.cell=r.getCellByPosition(this.context,!0),this.clearCache()))},onViewScroll:function(){var e,t=this,i=t.editingPlugin.view.el,n=t.scrollingView,r=t.scroller.getPosition().y,o=n.getScrollX(),a=r!==t.lastScrollTop;t.lastScrollTop=r,t.lastScrollLeft=o,t.isVisible()&&((e=Ext.getDom(t.context.row))&&i.contains(e)?(t.getLocalY()&&t.setLocalY(0),a&&(t.context.row=e,t.reposition(null,!0),t.tooltip&&t.tooltip.isVisible()&&t.repositionTip())):(t.setLocalY(-400),t.floatingButtons.hide()))},onColumnResize:function(e,t){var i=this;i.rendered&&!i.editingPlugin.reconfiguring&&(i.onGridResize(),i.onViewScroll(),i.lockable?(i.lockedColumnContainer.getScrollable().syncWithPartners(),i.normalColumnContainer.getScrollable().syncWithPartners()):i.getScrollable().syncWithPartners(),e.isGroupHeader||(i.syncFieldWidth(e),i.repositionIfVisible()))},onColumnHide:function(e){this.editingPlugin.reconfiguring||e.isGroupHeader||(e.getEditor().hide(),this.repositionIfVisible())},onColumnShow:function(e){this.rendered&&!this.editingPlugin.reconfiguring&&!e.isGroupHeader&&e.getEditor&&(e.getEditor().show(),this.syncFieldWidth(e),this.preventReposition||this.repositionIfVisible())},onColumnMove:function(e,t,i){var n,r,o,a,s,l=e.isLocked()?this.lockedColumnContainer:this.normalColumnContainer;if(e.isGroupHeader){for(Ext.suspendLayouts(),s=(a=t<i)?1:0,r=0,o=(n=e.getGridColumns()).length;r<o;++r)i=(e=n[r]).getIndex(),a&&++s,this.setColumnEditor(e,i+s,l);Ext.resumeLayouts(!0)}else this.setColumnEditor(e,e.getIndex(),l)},setColumnEditor:function(e,t,i){this.addFieldsForColumn(e),i.insert(t,e.getEditor())},onColumnAdd:function(e,t){e.isGroupHeader&&(e=e.getGridColumns()),this.preventReposition=!0,this.addFieldsForColumn(e),this.insertColumnEditor(e,t),this.preventReposition=!1},insertColumnEditor:function(e,t){var i,n,r;if(Ext.isArray(e))for(r=0,n=e.length;r<n;r++)this.insertColumnEditor(e[r]);else e.getEditor&&(null==t&&(t=e.getIndex()),(e.isLocked()?this.lockedColumnContainer:this.normalColumnContainer).insert(t,i=e.getEditor()),i.on("focus",this.onFieldFocus,this),this.needsSyncFieldWidths=!0)},onFieldFocus:function(e){e.selectText&&e.selectText(e.inputEl.dom.value.length),this.activeField=e,this.context.setColumn(e.column),this.skipFocusScroll?this.skipFocusScroll=null:e.column.getView().getScrollable().ensureVisible(e.el)},onFieldTab:function(e){var t,i=this,n=i.activeField,r=i.context.rowIdx,o=!e.shiftKey,a=n[o?"nextNode":"previousNode"](":focusable");e.stopEvent(),a&&a.isDescendant(i)?a.focus():i.isDirty()&&!i.autoUpdate?i.floatingButtons.child("#update").focus():(t=i.view.dataSource.getCount(),(r+=o?1:-1)<0?r=t-1:t<=r&&(r=0),o?(a=i.down(":focusable:not([isButton]):first"),n.column.getView().getScrollable().ensureVisible(n.ownerCt.child(":focusable").el)):a=i.down(":focusable:not([isButton]):last"),i.tabGuardBeforeEl.focus(),i.editingPlugin.startEdit(r,a.column))},destroyColumnEditor:function(e){var t;e.hasEditor()&&(t=e.getEditor())&&t.destroy()},getFloatingButtons:function(){var e=this.floatingButtons;return e||this.destroying||this.destroyed||(this.floatingButtons=e=new Ext.grid.RowEditorButtons({ownerCmp:this,rowEditor:this,hidden:this.hidden})),e},repositionIfVisible:function(e){var t=this.view;(!e||e!==this&&e.el.isAncestor(t.el))&&this.isVisible()&&t.isVisible(!0)&&this.reposition()},isLayoutChild:function(e){return!1},getRefOwner:function(){return this.editingPlugin.grid},getRefItems:function(e){var t,i;return this.lockable?((t=[this.lockedColumnContainer]).push.apply(t,this.lockedColumnContainer.getRefItems(e)),t.push(this.normalColumnContainer),t.push.apply(t,this.normalColumnContainer.getRefItems(e))):t=this.callParent(arguments),(i=this.getFloatingButtons())&&t.push.apply(t,i.getRefItems(e)),t},reposition:function(e,t){var i,n,r,o,a=this,s=a.context,l=s&&s.row,d=a.wrapEl;l&&Ext.isElement(l)&&(r=a.syncButtonPosition(s),i=a.calculateLocalRowTop(l),n=a.calculateEditorTop(i),o=function(){a.syncEditorClip(),a.wrapAnim=null,t||(r&&a.scroller.scrollBy(0,r,!0),a.focusColumnField(s.column))},e?a.wrapAnim=d.addAnimation(Ext.applyIf({to:{top:n},duration:e.duration||125,callback:o},e)):(d.setLocalY(n),o()))},getScrollDelta:function(){var e,t,i,n=this.scroller.getElement().dom,r=this.context,o=this.body,a=0;if(r)if((a=Ext.fly(r.row).getOffsetsTo(n)[1])<0)a-=o.getBorderPadding().beforeY;else if(0<a){if(e=n.clientHeight,t=n.scrollHeight,i=this.getHeight()+this.floatingButtons.getHeight(),e===t&&e<i)return 0;0<(a=Math.max(a+i-e-o.getBorderWidth("b"),0))&&(a-=o.getBorderPadding().afterY)}return a},calculateLocalRowTop:function(e){var t=this.editingPlugin.grid;return Ext.fly(e).getOffsetsTo(t)[1]-t.el.getBorderWidth("t")+this.lastScrollTop},calculateEditorTop:function(e){var t=e-this.lastScrollTop;return this._buttonsOnTop?t-=this.body.dom.offsetHeight-this.context.row.offsetHeight-this.body.getBorderPadding().afterY:t-=this.body.getBorderPadding().beforeY,t},getClientWidth:function(){var e=this.editingPlugin.grid;return this.lockable?(e.lockedGrid.collapsed&&e.lockedGrid.placeholder||e.lockedGrid).getRegion().union(e.scrollBody.el.getClientRegion()).width:e.view.el.dom.clientWidth},getEditor:function(e){return Ext.isNumber(e)?this.query("[isEditorComponent]")[e]:e.isHeader&&!e.isGroupHeader?e.getEditor():void 0},addFieldsForColumn:function(e,t){var i,n,r,o;if(Ext.isArray(e))for(i=0,n=e.length;i<n;i++)this.addFieldsForColumn(e[i],t);else e.getEditor&&((r=e.getEditor(null,this.getDefaultFieldCfg())).preventRefocus=!0,"right"===e.align&&((o=r.fieldStyle)?(o=Ext.isObject(o)?Ext.apply({},o):Ext.dom.Element.parseStyles(o)).textAlign||o["text-align"]||(o.textAlign="right"):o="text-align:right",r.fieldStyle=o),"actioncolumn"===e.xtype&&(r.fieldCls+=" "+Ext.baseCSSPrefix+"form-action-col-field"),this.isVisible()&&this.context&&(r.is("displayfield")?this.renderColumnData(r,this.context.record,e):(r.suspendEvents(),r.setValue(this.context.record.get(e.dataIndex)),r.resumeEvents())),e.hidden?this.onColumnHide(e):e.rendered&&!t&&this.onColumnShow(e))},getDefaultFieldCfg:function(){return{xtype:"displayfield",skipLabelForAttribute:!0,getModelData:function(){return null}}},loadRecord:function(e){var t,i,n,r,o=this.getForm(),a=o.getFields().items,s=a.length;for(t=0;t<s;t++)(r=a[t]).suspendEvents(),r.resetToInitialValue();for(o.loadRecord(e),t=0;t<s;t++)a[t].resumeEvents();for(o.hasInvalidField()===o.wasValid&&delete o.wasValid,n=o.isValid(),this.errorSummary&&(n?this.hideToolTip():this.showToolTip()),this.updateButton(n),s=(i=this.query(">displayfield")).length,t=0;t<s;t++)this.renderColumnData(i[t],e)},renderColumnData:function(e,t,i){var n,r,o,a=this.editingPlugin.grid.headerCt,s=this.scrollingView,l=s.dataSource,d=i||e.column,u=t.get(d.dataIndex),c=d.editRenderer||d.renderer,h=d.usingDefaultRenderer&&!d.scope?d:d.scope;c&&(n={tdCls:"",style:""},r=l.indexOf(t),o=a.getHeaderIndex(d),u=c.call(h||a.ownerCt,u,n,t,r,o,l,s)),e.setRawValue(u)},beforeEdit:function(){var e,t=this;if(t.lockable&&t.editingPlugin.grid.lockedGrid.floatedFromCollapse)return!1;if(t.isVisible()&&(t.isDirty()||t.context.record.phantom))if(t.autoUpdate)t.editingPlugin.completeEdit();else if(t.autoCancel)t.editingPlugin.cancelEdit();else if(t.errorSummary)return(e=t.getScrollDelta())&&t.scrollingViewEl.scrollBy(0,e,!0),t.showToolTip(),!1},startEdit:function(e,t){var i,n=this,r=n.editingPlugin,o=r.grid,a=n.context=r.context,s=n.isVisible(),l=n.wrapEl,d=n.rendered;n._cachedNode&&n.clearCache(),Ext.suspendLayouts(),d||(n.width=n.getClientWidth(),n.render(o.el,o.el.dom.firstChild),(l=n.wrapEl=n.el.wrap()).setVisibilityMode(3),l.addCls(n._wrapCls),n.getFloatingButtons().render(l),n.onViewScroll()),n.setLocalY(0),a.grid.getSelectionModel().selectByPosition({row:e,column:t}),n.rendered&&n.formAriaLabel&&(i=Ext.String.formatEncode(n.formAriaLabel,n.formAriaLabelRowBase+a.rowIdx),n.body.dom.setAttribute("aria-label",i)),Ext.resumeLayouts(s),s?n.reposition(!0):(n.skipFocusScroll=!0,n.show()),n.onGridResize(),n.loadRecord(e),d||(n.lockable?(n.lockedColumnContainer.getScrollable().syncWithPartners(),n.normalColumnContainer.getScrollable().syncWithPartners()):n.getScrollable().syncWithPartners())},syncButtonPosition:function(e){var t=this,i=t.getScrollDelta(),n=t.getFloatingButtons(),r=i-(Math.max(0,t.scroller.getSize().y-t.scroller.getClientSize().y)-t.scroller.getPosition().y);return n.show(),0<r||0<e.rowIdx&&e.isLastRenderedRow()?(t._buttonsOnTop||(n.setButtonPosition("top"),t._buttonsOnTop=!0,t.layout.setAlign("bottom"),t.updateLayout()),i=0):!1!==t._buttonsOnTop?(n.setButtonPosition("bottom"),t._buttonsOnTop=!1,t.layout.setAlign("top"),t.updateLayout()):n.setButtonPosition(n.position),i},syncEditorClip:function(){var e=this.tooltip,t=this.scroller.getElement().getConstrainRegion();this.clipTo(t),this.floatingButtons.clipTo(t),e&&e.isVisible()&&e.clipTo(t,5)},focusColumnField:function(e){var t,i;e&&!e.destroyed&&(e.isVisible()&&(t=this.getEditor(e))&&t.isFocusable(!0)&&(i=!0,t.focus()),i||this.focusColumnField(e.next()))},cancelEdit:function(){var e,t=this.getForm(),i=t.getFields().items,n=i.length,r=this.context.record;for(this._cachedNode&&this.clearCache(),this.hide(),r&&r.phantom&&!r.modified&&this.removeUnmodified&&this.editingPlugin.grid.store.remove(r),t.clearInvalid(),e=0;e<n;e++)i[e].suspendEvents();for(t.reset(),e=0;e<n;e++)i[e].resumeEvents()},clearCache:function(){this.mun(this.editingPlugin.view,{itemadd:this.onViewItemAdd,scope:this}),this._cachedNode=!1},completeEdit:function(){var e=this.getForm();return!!e.isValid()&&(this.completing=!0,e.updateRecord(this.context.record),this.hide(),!(this.completing=!1))},onShow:function(){var e=this;e.wrapEl.show(),e.callParent(arguments),e.needsSyncFieldWidths&&(e.suspendLayouts(),e.preventReposition=!0,e.syncAllFieldWidths(),e.preventReposition=!1,e.resumeLayouts(!0)),delete e.needsSyncFieldWidths,e.rendered&&e.initTabGuards(!0),e.reposition()},onHide:function(){var e,t,i=this,n=i.context,r=Ext.Element.getActiveElement();i.context=null,(e=i.el.contains(r)&&i.activeField?i.activeField.column:n.column)&&!e.destroyed&&(t=new Ext.grid.CellContext(e.getView()).setPosition(n.record,e)).view.getNavigationModel().setPosition(t),i.activeField=null,i.wrapEl.hide(),i.callParent(arguments),i.rendered&&i.initTabGuards(!1),i.tooltip&&i.hideToolTip()},onResize:function(e,t){this.wrapEl.setSize(e,t)},isDirty:function(){return this.getForm().isDirty()},getToolTip:function(){var e=this.tooltip,t=this.editingPlugin.grid;return e||(this.tooltip=e=new Ext.tip.ToolTip({cls:Ext.baseCSSPrefix+"grid-row-editor-errors",title:this.errorsText,autoHide:!1,closable:!0,closeAction:"disable",anchor:"left",anchorToTarget:!0,targetOffset:[Ext.scrollbar.width(),0],constrainPosition:!0,constrainTo:document.body}),t.add(e),this.mon(t,{afterlayout:this.onGridLayout,scope:this})),e},hideToolTip:function(){var e=this.getToolTip();e.rendered&&e.disable()},showToolTip:function(e){var t=this.getToolTip();if(!e&&this.wrapAnim)return this.wrapAnim.on({afteranimate:this.showToolTip,scope:this,single:!0});t.update(this.getErrors()),this.repositionTip(),t.enable()},onGridLayout:function(){this.tooltip&&this.tooltip.isVisible()&&this.repositionTip()},repositionTip:function(){var e=this.getToolTip();e.isVisible()?e.realignToTarget():e.showBy(this.el),this.syncEditorClip()},getErrors:function(){var e,t,i,n=[],r=this.query(">[isFormField]"),o=r.length;for(e=0;e<o;e++)(t=(i=r[e]).getErrors()).length&&n.push(this.createErrorListItem(t[0],i.column.text));return n.length||this.autoCancel||!this.isDirty()||(n[0]=this.createErrorListItem(this.dirtyText)),'<ul class="'+Ext.baseCSSPrefix+'list-plain">'+n.join("")+"</ul>"},createErrorListItem:function(e,t){return e=t?t+": "+e:e,'<li class="'+this.errorCls+'">'+e+"</li>"},doDestroy:function(){var e=this;e.wrapAnim&&(Ext.fx.Manager.removeAnim(e.wrapAnim),e.wrapAnim=null),e.keyNav=e.floatingButtons=e.tooltip=Ext.destroy(e.keyNav,e.floatingButtons,e.tooltip,e.wrapEl),e.callParent()}}),Ext.define("Ext.grid.Scroller",{constructor:Ext.deprecated()}),Ext.define("Ext.view.DropZone",{extend:"Ext.dd.DropZone",indicatorCls:Ext.baseCSSPrefix+"grid-drop-indicator",indicatorHtml:['<div class="',Ext.baseCSSPrefix,'grid-drop-indicator-left" role="presentation"></div>','<div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-right" role="presentation"></div>'].join(""),constructor:function(e){Ext.apply(this,e),this.ddGroup||(this.ddGroup="view-dd-zone-"+this.view.id),this.callParent([this.view.el])},fireViewEvent:function(){var e;return this.lock(),e=this.view.fireEvent.apply(this.view,arguments),this.unlock(),e},getTargetFromEvent:function(e){var t,i,n,r,o,a=e.getTarget(this.view.getItemSelector());if(!a)for(t=e.getY(),r=0,o=(i=this.view.getNodes()).length;r<o;r++)if(n=i[r],t<=Ext.fly(n).getBox().bottom)return n;return a},getIndicator:function(){return this.indicator||(this.indicator=new Ext.Component({ariaRole:"presentation",html:this.indicatorHtml,cls:this.indicatorCls,ownerCt:this.view,floating:!0,alignOnScroll:!1,shadow:!1})),this.indicator},getPosition:function(e,t){var i=e.getXY()[1],n=Ext.fly(t).getRegion();return n.bottom-i>=(n.bottom-n.top)/2?"before":"after"},containsRecordAtOffset:function(e,t,i){if(!t)return!1;var n=this.view,r=n.indexOf(t),o=n.getNode(r+i),a=o?n.getRecord(o):null;return a&&Ext.Array.contains(e,a)},positionIndicator:function(e,t,i){var n,r,o,a,s=this,l=s.view,d=s.getPosition(i,e),u=l.getRecord(e),c=t.records;Ext.Array.contains(c,u)||("before"!==d||s.containsRecordAtOffset(c,u,-1))&&("after"!==d||s.containsRecordAtOffset(c,u,1))?s.invalidateDrop():(s.valid=!0,s.overRecord===u&&s.currentPosition===d||(a=((o=(r=s.view.getScrollable())&&r.getElement())&&o.isScrollable()?o:Ext.fly(l.getNodeContainer())).getY(),n=Ext.fly(e).getY()-a-1,"after"===d&&(n+=Ext.fly(e).getHeight()),s.getIndicator().setWidth(Ext.fly(l.el).getWidth()).showAt(0,n),s.overRecord=u,s.currentPosition=d))},invalidateDrop:function(){this.valid&&(this.valid=!1,this.getIndicator().hide())},onNodeOver:function(e,t,i,n){return Ext.Array.contains(n.records,this.view.getRecord(e))||this.positionIndicator(e,n,i),this.valid?this.dropAllowed:this.dropNotAllowed},notifyOut:function(e,t,i,n){this.callParent([e,t,i,n]),this.overRecord=this.currentPosition=null,this.valid=!1,this.indicator&&this.indicator.hide()},onContainerOver:function(e,t,i){var n=this.view;return n.dataSource.getCount()?this.positionIndicator(n.all.last(),i,t):(this.overRecord=this.currentPosition=null,this.getIndicator().setWidth(Ext.fly(n.el).getWidth()).showAt(0,0),this.valid=!0),this.dropAllowed},onContainerDrop:function(e,t,i){return this.onNodeDrop(e,null,t,i)},onNodeDrop:function(e,t,i,n){var r=this,o=!1,a=r.overRecord,s=r.currentPosition,l={wait:!1,processDrop:function(){r.invalidateDrop(),r.handleNodeDrop(n,a,s),o=!0,r.fireViewEvent("drop",e,n,a,s)},cancelDrop:function(){r.invalidateDrop(),o=!0}},d=!1;if(r.valid){if(d=r.fireViewEvent("beforedrop",e,n,a,s,l),l.wait)return;!1!==d&&(o||l.processDrop())}return d},destroy:function(){this.indicator=Ext.destroy(this.indicator),this.callParent()}}),Ext.define("Ext.grid.ViewDropZone",{extend:"Ext.view.DropZone",indicatorHtml:'<div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-left" role="presentation"></div><div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-right" role="presentation"></div>',indicatorCls:Ext.baseCSSPrefix+"grid-drop-indicator",handleNodeDrop:function(e,t,i){var n,r,o,a,s=this.view,l=s.getStore(),d=s!==e.view||1<e.records.length;if(e.copy)for(o=0,a=(r=e.records).length;o<a;o++)r[o]=r[o].copy();else d&&e.view.store.remove(e.records);t&&i?(n=l.indexOf(t),"before"!==i&&n++,l.insert(n,e.records)):l.add(e.records),d&&s.getSelectionModel().select(e.records),s.getNavigationModel().setPosition(e.records[0])}}),Ext.define("Ext.grid.plugin.HeaderResizer",{extend:"Ext.plugin.Abstract",alias:"plugin.gridheaderresizer",requires:["Ext.dd.DragTracker","Ext.util.Region"],disabled:!1,config:{dynamic:!1},colHeaderCls:Ext.baseCSSPrefix+"column-header",minColWidth:40,maxColWidth:1e3,eResizeCursor:"col-resize",init:function(e){(this.headerCt=e).on("render",this.afterHeaderRender,this,{single:this}),this.minColWidth||(this.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth)},destroy:function(){var e=this.tracker;e&&(e.destroy(),this.tracker=null),this.headerCt.un("render",this.afterHeaderRender,this),this.headerCt=null,this.callParent()},afterHeaderRender:function(){var e=this,t=e.headerCt,i=t.el;t.mon(i,"mousemove",e.onHeaderCtMouseMove,e),e.markerOwner=e.ownerGrid=e.headerCt.up("tablepanel").ownerGrid,e.tracker=new Ext.dd.DragTracker({disabled:e.disabled,onBeforeStart:e.onBeforeStart.bind(e),onStart:e.onStart.bind(e),onDrag:e.onDrag.bind(e),onEnd:e.onEnd.bind(e),onCancel:e.onCancel.bind(e),tolerance:3,autoStart:300,el:i}),t.setTouchAction({panX:!1})},onHeaderCtMouseMove:function(e){this.headerCt.dragging||this.disabled?this.activeHd&&(this.activeHd.el.dom.style.cursor="",delete this.activeHd):"touch"!==e.pointerType&&this.findActiveHeader(e)},findActiveHeader:function(e){var t,i,n,r,o=this.headerCt,a=e.getTarget("."+this.colHeaderCls,o.el,!0),s=this.ownerGrid,l=s.ownerLockable;if(this.activeHd=null,a){if((t=Ext.getCmp(a.id)).isAtEndEdge(e)){if(1===o.visibleColumnManager.getColumns().length&&o.forceFit)return;i=t}else t.isAtStartEdge(e)&&(n=o.visibleColumnManager.getColumns(),r=t.isGroupHeader?t.getGridColumns()[0]:t,(i=n[Ext.Array.indexOf(n,r)-1])||!l||s.isLocked||(i=(n=l.lockedGrid.headerCt.visibleColumnManager.getColumns())[n.length-1]));i?(i.isGroupHeader&&(i=(n=i.getGridColumns())[n.length-1]),i&&!i.fixed&&!1!==i.resizable&&(this.activeHd=i,t.el.dom.style.cursor=this.eResizeCursor,t.triggerEl&&(t.triggerEl.dom.style.cursor=this.eResizeCursor))):(t.el.dom.style.cursor="",t.triggerEl&&(t.triggerEl.dom.style.cursor=""))}return this.activeHd},onBeforeStart:function(e){var t=this;return t.dragHd=t.activeHd||"touch"===e.pointerType&&t.findActiveHeader(e),t.dragHd&&!t.headerCt.dragging?(e.claimGesture(),t.xDelta=t.dragHd.getX()+t.dragHd.getWidth()-t.tracker.getXY()[0],t.tracker.constrainTo=t.getConstrainRegion(),!0):t.headerCt.dragging=!1},onCancel:function(e){this.dragHd=this.activeHd=null,this.headerCt.dragging=!1},getConstrainRegion:function(){var e,t,i=this,n=i.dragHd.el,r=i.ownerGrid,o=r.getSizeModel().width,a=o.shrinkWrap?i.headerCt.getWidth()-i.headerCt.visibleColumnManager.getColumns().length*i.minColWidth:i.maxColWidth;return i.headerCt.forceFit?(e=i.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"))&&i.headerInSameGrid(e)&&(a=n.getWidth()+(e.getWidth()-i.minColWidth)):r.isLocked&&o.shrinkWrap&&(a=i.dragHd.up("[scrollerOwner]").getTargetEl().getWidth(!0)-r.getWidth()-(r.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*i.minColWidth+Ext.scrollbar.width())),(t=i.adjustConstrainRegion(n.getRegion(),0,0,0,i.minColWidth)).right=n.getX()+a,t},onStart:function(e){var t,i,n,r,o,a,s=this,l=s.dragHd,d=l.el.getWidth(),u=l.getRootHeaderCt();s.headerCt.dragging=!0,s.origWidth=d,s.dynamic||((n=s.markerOwner).frame&&n.resizable&&(s.gridOverflowSetting=n.el.dom.style.overflow,n.el.dom.style.overflow="hidden"),t=s.getLeftMarkerX(n),r=n.getLhsMarker(),o=n.getRhsMarker(),a=s.ownerGrid.body.getHeight()+u.getHeight(),i=u.getOffsetsTo(n)[1]-n.el.getBorderWidth("t"),r.dom.style.cursor=s.eResizeCursor,o.dom.style.cursor=s.eResizeCursor,r.setLocalY(i),o.setLocalY(i),r.setHeight(a),o.setHeight(a),s.setMarkerX(r,t),s.setMarkerX(o,t+d))},onDrag:function(e){this.dynamic?this.doResize():this.setMarkerX(this.getMovingMarker(this.markerOwner),this.calculateDragX(this.markerOwner))},getMovingMarker:function(e){return e.getRhsMarker()},onEnd:function(e){var t=this,i=t.markerOwner;t.headerCt.dragging=!1,t.dragHd&&(t.dynamic||("gridOverflowSetting"in t&&(i.el.dom.style.overflow=t.gridOverflowSetting),t.setMarkerX(i.getLhsMarker(),-9999),t.setMarkerX(i.getRhsMarker(),-9999)),t.doResize(),"touch"!==e.pointerType?(t.dragHd=null,t.activeHd.el.dom.style.cursor=t.eResizeCursor):t.dragHd=t.activeHd=null),t.headerCt.blockNextEvent()},doResize:function(){var e,t=this.dragHd,i=this.tracker.getOffset("point");t&&i[0]&&(t.flex&&delete t.flex,Ext.suspendLayouts(),this.adjustColumnWidth(i[0]-this.xDelta),this.headerCt.forceFit&&((e=t.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"))&&!this.headerInSameGrid(e)&&(e=null),e&&(delete e.flex,e.setWidth(e.getWidth()-i[0]))),Ext.resumeLayouts(!0))},headerInSameGrid:function(e){var t=this.dragHd.up("tablepanel");return!!e.up(t)},disable:function(){var e=this.tracker;this.disabled=!0,e&&e.disable()},enable:function(){var e=this.tracker;this.disabled=!1,e&&e.enable()},calculateDragX:function(e){return this.tracker.getXY("point")[0]+this.xDelta-e.getX()-e.el.getBorderWidth("l")},getLeftMarkerX:function(e){return this.dragHd.getX()-e.getX()-e.el.getBorderWidth("l")-1},setMarkerX:function(e,t){e.setLocalX(t)},adjustConstrainRegion:function(e,t,i,n,r){return e.adjust(t,i,n,r)},adjustColumnWidth:function(e){this.dragHd.setWidth(this.origWidth+e)}}),Ext.define("Ext.grid.header.DragZone",{extend:"Ext.dd.DragZone",colHeaderSelector:"."+Ext.baseCSSPrefix+"column-header",colInnerSelector:"."+Ext.baseCSSPrefix+"column-header-inner",maxProxyWidth:120,constructor:function(e){this.headerCt=e,this.ddGroup=this.getDDGroup(),this.autoGroup=!0,this.callParent([e.el]),this.proxy.el.addCls(Ext.baseCSSPrefix+"grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(e){if(e.getTarget(this.colInnerSelector)){var t,i,n=e.getTarget(this.colHeaderSelector);if(n&&(t=Ext.getCmp(n.id),!this.headerCt.dragging&&t.draggable&&!t.isAtStartEdge(e)&&!t.isAtEndEdge(e)))return(i=document.createElement("div")).role="presentation",i.innerHTML=t.text,{ddel:i,header:t}}return!1},onBeforeDrag:function(){return!(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=!0,this.headerCt.hideMenu(),this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=!1,this.callParent(arguments)},afterRepair:function(){this.callParent(),this.headerCt.dragging=!1},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}}),Ext.define("Ext.grid.header.DropZone",{extend:"Ext.dd.DropZone",colHeaderCls:Ext.baseCSSPrefix+"column-header",proxyOffsets:[-4,-9],constructor:function(e){this.headerCt=e,this.ddGroup=this.getDDGroup(),this.autoGroup=!0,this.callParent([e.el])},destroy:function(){Ext.destroy(this.topIndicator,this.bottomIndicator),this.callParent()},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(e){return e.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){return this.topIndicator||(this.topIndicator=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"col-move-top","data-sticky":!0,html:"&#160;"}),this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)),this.topIndicator},getBottomIndicator:function(){return this.bottomIndicator||(this.bottomIndicator=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"col-move-bottom","data-sticky":!0,html:"&#160;"})),this.bottomIndicator},getLocation:function(e,t){var i=e.getXY()[0],n=Ext.fly(t).getRegion();return{pos:n.right-i<=(n.right-n.left)/2?"after":"before",header:Ext.getCmp(t.id),node:t}},positionIndicator:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y=this,v=e.header,E=y.getLocation(i,t),b=E.header,C=E.pos;if(b!==y.lastTargetHeader||C!==y.lastDropPos){if(n=v.nextSibling("gridcolumn:not([hidden])"),r=v.previousSibling("gridcolumn:not([hidden])"),y.lastTargetHeader=b,y.lastDropPos=C,!b.draggable&&"before"===C&&0===b.getIndex())return!1;if(e.dropLocation=E,v!==b&&("before"===C&&n!==b||"after"===C&&r!==b)&&!b.isDescendantOf(v)){for(p=(g=Ext.dd.DragDropManager.getRelated(y)).length,m=0;m<p;m++)(x=g[m])!==y&&x.invalidateDrop&&x.invalidateDrop();y.valid=!0,o=y.getTopIndicator(),a=y.getBottomIndicator(),l="before"===C?(s="bc-tl","tc-bl"):(s="bc-tr","tc-br"),d=o.getAlignToXY(b.el,s),u=a.getAlignToXY(b.el,l),h=(c=y.headerCt.el).getX()-y.indicatorXOffset,f=c.getX()+c.getWidth(),d[0]=Ext.Number.constrain(d[0],h,f),u[0]=Ext.Number.constrain(u[0],h,f),o.setXY(d),a.setXY(u),o.show(),a.show()}else y.invalidateDrop()}},invalidateDrop:function(){this.valid=!1,this.hideIndicators()},onNodeOver:function(e,t,i,n){var r,o,a,s,l=n.header;return n.header.el.dom===e?r=!1:(n.isLock=n.isUnlock=n.crossPanel=!1,a=this.getLocation(i,e).header,(r=l.ownerCt===a.ownerCt)||l.ownerCt.isSealed()||a.ownerCt.isSealed()||(r=!0,(o=l.up("tablepanel"))!==(s=a.up("tablepanel"))&&(n.crossPanel=!0,n.isLock=s.isLocked&&!o.isLocked,n.isUnlock=!s.isLocked&&o.isLocked,(n.isUnlock&&!1===l.lockable||n.isLock&&!l.isLockable())&&(r=!1)))),r?this.positionIndicator(n,e,i):this.valid=!1,this.valid?this.dropAllowed:this.dropNotAllowed},hideIndicators:function(){this.getTopIndicator().hide(),this.getBottomIndicator().hide(),this.lastTargetHeader=this.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},getNestedHeader:function(e,t){var i,n=e.items;return e.isGroupHeader&&n.length&&(i=t?"last":"first",e=this.getNestedHeader(n[i](),t)),e},onNodeDrop:function(e,t,i,n){if(this.headerCt.blockNextEvent(),this.valid){var r,o,a,s,l=n.header,d=n.dropLocation,u=d.pos,c=d.header,h=l.ownerCt,f=h.getRootHeaderCt(),g=c.ownerCt,p=this.headerCt.visibleColumnManager,m=p.getHeaderIndex(l);n.isLock||n.isUnlock?(a=h.up("[scrollerOwner]"),r=g.items.indexOf(c),"after"===u&&r++,n.isLock?a.lock(l,r,g):a.unlock(l,r,g)):(r="after"===u?p.getHeaderIndex(this.getNestedHeader(c,1))+1:p.getHeaderIndex(this.getNestedHeader(c,0)),this.invalidateDrop(),s=l.getWidth(),Ext.suspendLayouts(),f.isDDMoveInGrid=!n.crossPanel,l.isGroupHeader&&c.isGroupHeader&&l.setNestedParent(c),"before"===u?g.moveBefore(l,c):g.moveAfter(l,c),0<=r&&(!c.isGroupHeader||c.items&&c.items.length)&&m!==r&&(o=l.isGroupHeader?l.query("gridcolumn:not([hidden]):not([isGroupHeader])").length:1,m<=r&&1<o&&(r-=o),g.getRootHeaderCt().grid.view.moveColumn(m,r,o)),f.fireEvent("columnmove",h,l,m,r),f.isDDMoveInGrid=!1,g.isGroupHeader&&!h.isGroupHeader?h!==g&&(l.savedFlex=l.flex,delete l.flex,l.width=s):h.isGroupHeader||l.savedFlex&&(l.flex=l.savedFlex,delete l.width),Ext.resumeLayouts(!0),this.headerCt.grid.floated&&this.headerCt.grid.updateLayout())}}}),Ext.define("Ext.grid.plugin.HeaderReorderer",{extend:"Ext.plugin.Abstract",alias:"plugin.gridheaderreorderer",requires:["Ext.grid.header.DragZone","Ext.grid.header.DropZone"],init:function(e){(this.headerCt=e).on({boxready:this.onHeaderCtRender,single:!0,scope:this})},destroy:function(){this.headerCt.un("boxready",this.onHeaderCtRender,this),Ext.destroy(this.dragZone,this.dropZone),this.headerCt=this.dragZone=this.dropZone=null,this.callParent()},onHeaderCtRender:function(e){this.dragZone=new Ext.grid.header.DragZone(this.headerCt),this.dropZone=new Ext.grid.header.DropZone(this.headerCt),this.disabled&&this.dragZone.disable(),e.setTouchAction({panX:!1})},enable:function(){this.disabled=!1,this.dragZone&&this.dragZone.enable()},disable:function(){this.disabled=!0,this.dragZone&&this.dragZone.disable()}}),Ext.define("Ext.grid.header.Container",{extend:"Ext.container.Container",alias:"widget.headercontainer",requires:["Ext.grid.ColumnLayout","Ext.grid.plugin.HeaderResizer","Ext.grid.plugin.HeaderReorderer","Ext.util.KeyNav"],uses:["Ext.grid.column.Column","Ext.grid.ColumnManager","Ext.menu.Menu","Ext.menu.CheckItem","Ext.menu.Separator"],border:!0,baseCls:Ext.baseCSSPrefix+"grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:Ext.baseCSSPrefix+"column-header-open",menuSortAscCls:Ext.baseCSSPrefix+"hmenu-sort-asc",menuSortDescCls:Ext.baseCSSPrefix+"hmenu-sort-desc",menuColsIcon:Ext.baseCSSPrefix+"cols-icon",blockEvents:!1,dragging:!1,sortOnClick:!0,focusableContainer:!1,childHideCount:0,sortable:!0,enableColumnHide:!0,initComponent:function(){var e=this;e.plugins=e.plugins||[],e.defaults=e.defaults||{},e.isColumn||(e.isRootHeader=!0,e.enableColumnResize&&(e.resizer=new Ext.grid.plugin.HeaderResizer,e.plugins.push(e.resizer)),e.enableColumnMove&&(e.reorderer=new Ext.grid.plugin.HeaderReorderer,e.plugins.push(e.reorderer))),e.isColumn&&!e.isGroupHeader?(e.items&&e.items.length||(e.isContainer=e.isFocusableContainer=!1,e.layout={type:"container",calculate:Ext.emptyFn}),e.hasOwnProperty("focusable")||(e.focusable=!0)):(e.layout=Ext.apply({type:"gridcolumn",align:"stretch"},e.initialConfig.layout),e.defaults.columnLines=e.columnLines,e.isRootHeader?(e.hiddenHeaders||(e.focusableContainer=!0,e.ariaRole="rowgroup"),e.columnManager=new Ext.grid.ColumnManager(!1,e),e.visibleColumnManager=new Ext.grid.ColumnManager(!0,e),e.grid&&(e.grid.columnManager=e.columnManager,e.grid.visibleColumnManager=e.visibleColumnManager)):(e.visibleColumnManager=new Ext.grid.ColumnManager(!0,e),e.columnManager=new Ext.grid.ColumnManager(!1,e))),e.menuTask=new Ext.util.DelayedTask(e.updateMenuDisabledState,e),e.callParent()},isNested:function(){return!!this.getRootHeaderCt().down("[isNestedParent]")},isNestedGroupHeader:function(){var e=this.getRefOwner().query(">:not([hidden])");return 1===e.length&&e[0]===this},isSealed:function(){return!(!this.sealed&&!this.getInherited().sealed)},maybeShowNestedGroupHeader:function(){var e,t=this.items;t&&1===t.length&&(e=t.getAt(0))&&e.hidden&&e.show()},setNestedParent:function(e){e.isNestedParent=!1,e.ownerCt.isNestedParent=!(1!==this.ownerCt.items.length||1!==e.ownerCt.items.length)},initEvents:function(){var e,t,i=this;i.callParent(),i.isColumn||i.isGroupHeader||(t={click:e=i.onHeaderCtEvent,dblclick:e,contextmenu:e,mousedown:i.onHeaderCtMouseDown,mouseover:i.onHeaderCtMouseOver,mouseout:i.onHeaderCtMouseOut,scope:i},Ext.supports.Touch&&(t.longpress=i.onHeaderCtLongPress),i.mon(i.el,t))},onHeaderCtEvent:function(e,t){var i,n,r,o=this.getHeaderElByEvent(e);this.longPressFired?this.longPressFired=!1:o&&!this.blockEvents&&(i=Ext.getCmp(o.id))&&(n=i[i.clickTargetName],(i.isGroupHeader||i.isContainer)&&!e.within(n)||("click"===e.type||"tap"===e.type?(r=i.onTitleElClick(e,n,this.sortOnClick))?this.onHeaderTriggerClick(r,e,"touch"===e.pointerType?r.el:r.triggerEl):this.onHeaderClick(i,e,t):"contextmenu"===e.type?this.onHeaderContextMenu(i,e,t):"dblclick"===e.type&&i.onTitleElDblClick(e,n.dom)))},blockNextEvent:function(){this.blockEvents=!0,this.unblockTimer||(this.unblockTimer=Ext.asap(this.unblockEvents,this))},unblockEvents:function(){this.blockEvents=this.unblockTimer=!1},onHeaderCtMouseDown:function(e,t){var i,n,r,o,a,s=Ext.Component.from(t);if(!e.defaultPrevented&&s!==this){if(s.isGroupHeader)for(i=s.getVisibleGridColumns(),o=this.getScrollable(),n=0,r=i.length;n<r;++n)if(a=i[n],o.doIsInView(a.el,!0).x){s=a;break}s.focus()}},onHeaderCtMouseOver:function(e,t){var i,n,r;e.within(this.el,!0)||(n=(i=e.getTarget("."+Ext.grid.column.Column.prototype.baseCls))&&Ext.getCmp(i.id))&&(r=n[n.clickTargetName],e.within(r)&&n.onTitleMouseOver(e,r.dom))},onHeaderCtMouseOut:function(e,t){var i,n,r="."+Ext.grid.column.Column.prototype.baseCls,o=e.getTarget(r),a=e.getRelatedTarget(r);o!==a&&(o&&(i=Ext.getCmp(o.id))&&(n=i[i.clickTargetName],i.onTitleMouseOut(e,n.dom)),a&&(i=Ext.getCmp(a.id))&&(n=i[i.clickTargetName],i.onTitleMouseOver(e,n.dom)))},onHeaderCtLongPress:function(e){var t,i=this.getHeaderElByEvent(e);i&&(t=Ext.getCmp(i.id))&&!t.menuDisabled&&(this.longPressFired=!0,this.showMenuBy(e,i,t))},getHeaderElByEvent:function(e){return e.getTarget("."+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){return!this.hiddenHeaders&&this.callParent()},getRootHeaderCt:function(){return this.isRootHeader?this:this.up("[isRootHeader]")},doDestroy:function(){var e=this;e.menu&&e.menu.un("hide",e.onMenuHide,e),Ext.unasap(e.unblockTimer),e.menuTask.cancel(),Ext.destroy(e.visibleColumnManager,e.columnManager,e.menu),e.callParent()},removeAll:function(e){this.suspendEvent("columnschanged"),this.callParent([e]),this.resumeEvent("columnschanged"),this.fireEvent("columnschanged",this)},applyColumnsState:function(e,t){if(e){var i,n,r,o,a=this.items.items,s=a.length,l=0,d=!1,u=[],c=[];for(this.purgeCache(),l=0;l<s;l++)(r=e[(n=a[l]).getStateId()])?(l!==(o=r.index)&&(d=!0),(u[o]=n).applyColumnState&&n.applyColumnState(r,t)):c.push({index:l,column:n});if(u=Ext.Array.clean(u),i=c.length)for(l=0;l<i;l++)(o=(r=c[l]).index)<u.length?(d=!0,Ext.Array.splice(u,o,0,r.column)):u.push(r.column);d&&(this.applyingState=!0,this.removeAll(!1),delete this.applyingState,this.add(u))}},getColumnsState:function(){var t,i=[];return this.items.each(function(e){(t=e.getColumnState&&e.getColumnState())&&i.push(t)}),i},onAdd:function(e){var t,i=e.getStateId();null!=i&&(this._usedIDs||(this._usedIDs={}),this._usedIDs[i]&&this._usedIDs[i]!==e&&Ext.log.warn(this.$className+" attempted to reuse an existing id: "+i),this._usedIDs[i]=e),this.callParent(arguments),t=this.getRootHeaderCt(),this.onHeadersChanged(e,t&&t.isDDMoveInGrid)},move:function(e,t){var i,n=this.items;e.isComponent?(i=e,e=n.indexOf(i)):i=n.getAt(e),i.visibleFromIdx=this.getRootHeaderCt().visibleColumnManager.indexOf(i),this.callParent(arguments)},onMove:function(e,t,i){var n,r=this.getRootHeaderCt(),o=r.visibleColumnManager,a=1;this.onHeadersChanged(e,!0),(n=o.indexOf(e))>=e.visibleFromIdx&&n++,this.callParent(arguments),e.isGroupHeader&&(a=e.visibleColumnManager.getColumns().length),r.onHeaderMoved(e,a,e.visibleFromIdx,n)},maybeContinueRemove:function(){return this.isGroupHeader&&!this.applyingState&&!this.isNestedParent&&this.ownerCt&&!this.items.getCount()},onRemove:function(e,t){var i=this,n=i.ownerCt;i.callParent([e,t]),i._usedIDs||(i._usedIDs={}),delete i._usedIDs[e.headerId],i.destroying||(i.getRootHeaderCt().isDDMoveInGrid||i.onHeadersChanged(e,!1),i.maybeContinueRemove()&&(e.rendered&&e.detachFromBody(),i.destroyAfterRemoving=!0,Ext.suspendLayouts(),n.remove(i,!1),Ext.resumeLayouts(!0)))},onHeadersChanged:function(e,t){var i,n=this.getRootHeaderCt();this.purgeHeaderCtCache(this),n&&(n.onColumnsChanged(),(i=n.ownerCt)&&!t&&i.onHeadersChanged(n,e))},onHeaderMoved:function(e,t,i,n){var r=this.ownerCt;this.rendered&&(r&&r.onHeaderMove&&r.onHeaderMove(this,e,t,i,n),this.fireEvent("columnmove",this,e,i,n))},onColumnsChanged:function(){var e,t,i=this.menu;this.rendered&&(this.fireEvent("columnschanged",this),i&&(e=i.child("#columnItemSeparator"),t=i.child("#columnItem"),e&&e.destroy(),t&&t.destroy()))},lookupComponent:function(e){var t=this.callParent(arguments);return t.isGroupHeader||void 0!==t.width||t.flex||(t.width=this.defaultWidth),t},setSortState:function(){var e,t,i,n=this.up("[store]").store,r=this.visibleColumnManager.getColumns(),o=r.length;for(e=0;e<o;e++)(i=(t=r[e]).getSorter())?n.getSorters().contains(i)||(i=null):i=n.getSorters().get(t.getSortParam()),t.setSortState(i)},getHeaderMenu:function(){var e,t=this.getMenu();return t&&(e=t.child("#columnItem"))?e.menu:null},onHeaderVisibilityChange:function(e,t){var i,n=this.getHeaderMenu();this.purgeHeaderCtCache(e.ownerCt),n&&((i=this.getMenuItemForHeader(n,e))&&i.setChecked(t,!0),n.isVisible()&&this.menuTask.delay(50))},updateMenuDisabledState:function(e){var t,i,n,r,o=this.query("gridcolumn:not([hidden])"),a=o.length;for(e=e||this.getMenu(),t=0;t<a;++t)i=o[t],(n=this.getMenuItemForHeader(e,i))&&(r=i.isHideable()?"enable":"disable",n.menu&&(r+="CheckChange"),n[r]())},getMenuItemForHeader:function(e,t){return t?e.down("menucheckitem[headerId="+t.id+"]"):null},onHeaderShow:function(e){var t=this.ownerCt,i=e.lastHiddenHeader;t&&(this.forceFit&&delete this.flex,i&&!e.query("[hidden=false]").length&&(i.show(),e.lastHiddenHeader=null),this.onHeaderVisibilityChange(e,!0),t.onHeaderShow(this,e),this.fireEvent("columnshow",this,e),this.fireEvent("columnschanged",this))},onHeaderHide:function(e){var t=this.ownerCt;t&&(this.onHeaderVisibilityChange(e,!1),t.onHeaderHide(this,e),this.fireEvent("columnhide",this,e),this.fireEvent("columnschanged",this))},onHeaderResize:function(e,t){var i=this.ownerCt;i&&i.onHeaderResize(this,e,t),this.fireEvent("columnresize",this,e,t)},onHeaderClick:function(e,t,i){var n,r=e.getView().getSelectionModel();return e.fireEvent("headerclick",this,e,t,i),!1!==(n=this.fireEvent("headerclick",this,e,t,i))&&r.onHeaderClick&&r.onHeaderClick(this,e,t),n},onHeaderContextMenu:function(e,t,i){e.fireEvent("headercontextmenu",this,e,t,i),this.fireEvent("headercontextmenu",this,e,t,i)},onHeaderTriggerClick:function(e,t,i){!1!==e.fireEvent("headertriggerclick",this,e,t,i)&&!1!==this.fireEvent("headertriggerclick",this,e,t,i)&&(e.activeMenu?t.pointerType?e.activeMenu.hide():e.activeMenu.focus():this.showMenuBy(t,i,e))},showMenuBy:function(e,t,i){var n,r=this.getMenu(),o=r.down("#ascItem"),a=r.down("#descItem");r.activeHeader=r.ownerCmp=i,i.setMenuActive(r),n=i.sortable?"enable":"disable",o&&o[n](),a&&a[n](),r.autoFocus=!e||e.keyCode,r.showBy(t,"tl-bl?"),r.isVisible()||this.onMenuHide(r)},hideMenu:function(){this.menu&&this.menu.hide()},onMenuHide:function(e){e.activeHeader.setMenuActive(!1)},purgeHeaderCtCache:function(e){for(;e;){if(e.purgeCache(),e.isRootHeader)return;e=e.ownerCt}},purgeCache:function(){var e=this.visibleColumnManager,t=this.columnManager;this.gridVisibleColumns=this.gridDataColumns=this.hideableColumns=null,e&&(e.invalidate(),t.invalidate())},getMenu:function(){var e=this,t=e.view&&e.view.ownerGrid;return e.menu||(e.menu=new Ext.menu.Menu({hideOnParentHide:!1,items:e.getMenuItems(),listeners:{beforeshow:e.beforeMenuShow,hide:e.onMenuHide,scope:e}}),e.fireEvent("menucreate",e,e.menu),t&&t.fireEvent("headermenucreate",t,e.menu,e)),e.menu},beforeMenuShow:function(e){var t,i;e.child("#columnItem")||(t=this.enableColumnHide?this.getColumnMenu(this):null,i=this.sortable?2:0,t&&t.length&&e.insert(i,[{itemId:"columnItemSeparator",xtype:"menuseparator"},{itemId:"columnItem",text:this.columnsText,iconCls:this.menuColsIcon,menu:{items:t},hideOnClick:!1}])),this.updateMenuDisabledState(this.menu)},getMenuItems:function(){var e=this,t=[],i=e.enableColumnHide?e.getColumnMenu(e):null;return e.sortable&&(t=[{itemId:"ascItem",text:e.sortAscText,iconCls:e.menuSortAscCls,handler:e.onSortAscClick,scope:e},{itemId:"descItem",text:e.sortDescText,iconCls:e.menuSortDescCls,handler:e.onSortDescClick,scope:e}]),i&&i.length&&(e.sortable&&t.push({itemId:"columnItemSeparator",xtype:"menuseparator"}),t.push({itemId:"columnItem",text:e.columnsText,iconCls:e.menuColsIcon,menu:i,hideOnClick:!1})),t},onSortAscClick:function(){this.getMenu().activeHeader.sort("ASC")},onSortDescClick:function(){this.getMenu().activeHeader.sort("DESC")},getColumnMenu:function(e){for(var t,i,n=[],r=0,o=e.query(">gridcolumn[hideable]"),a=o.length;r<a;r++)t=o[r],i=new Ext.menu.CheckItem({text:t.menuText||t.text,checked:!t.hidden,hideOnClick:!1,headerId:t.id,menu:t.isGroupHeader?this.getColumnMenu(t):void 0,checkHandler:this.onColumnCheckChange,scope:this}),n.push(i);return n.length?n:null},onColumnCheckChange:function(e,t){var i=Ext.getCmp(e.headerId);i.rendered?i[t?"show":"hide"]():i.hidden=!t},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var e,t=0,i=this.getVisibleGridColumns(),n=i.length;for(e=0;e<n;e++)t+=i[e].getCellWidth()||0;return t},getVisibleGridColumns:function(){var e,t,i,n,r,o;if(this.gridVisibleColumns)return this.gridVisibleColumns;for(e=this.getGridColumns(),t=this.getRootHeaderCt(),i=[],n=e.length,r=0;r<n;r++)(o=e[r]).hidden||o.isColumnHidden(t)||(i[i.length]=o);return this.gridVisibleColumns=i},isColumnHidden:function(e){for(var t=this.getRefOwner();t&&t!==e;){if(t.hidden)return!0;t=t.getRefOwner()}return!1},getGridColumns:function(e,t){if(!e&&this.gridDataColumns)return this.gridDataColumns;var i,n,r,o,a,s=e||[];if(t=t||this.hidden,this.items&&(i=this.items.items))for(n=0,r=i.length;n<r;n++)(o=i[n]).isGroupHeader?(o.visibleIndex=s.length,o.getGridColumns(s,t)):(o.hiddenAncestor=t,s.push(o));if(e||(this.gridDataColumns=s),!e&&r){for(n=0,r=s.length;n<r;n++)(o=s[n]).fullColumnIndex=n,o.isFirstVisible=o.isLastVisible=!1,o.hidden||o.hiddenAncestor||(a||(o.isFirstVisible=!0),a=o);a&&(a.isLastVisible=!0)}return s},getHideableColumns:function(){var e=this.hideableColumns;return e=e||(this.hideableColumns=this.query("[hideable]"))},getHeaderIndex:function(e){return this.columnManager||(this.columnManager=this.getRootHeaderCt().columnManager),this.columnManager.getHeaderIndex(e)},getHeaderAtIndex:function(e){return this.columnManager||(this.columnManager=this.getRootHeaderCt().columnManager),this.columnManager.getHeaderAtIndex(e)},getVisibleHeaderClosestToIndex:function(e){return this.visibleColumnManager||(this.visibleColumnManager=this.getRootHeaderCt().visibleColumnManager),this.visibleColumnManager.getVisibleHeaderClosestToIndex(e)},applyForceFit:function(t){var i,n,r,e,o,a=this.view,s=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,l=!1,d=Ext.grid.header.Container.prototype.defaultWidth,u=this.el.dom.clientWidth-(a.el.dom.scrollHeight>a.el.dom.clientHeight?Ext.scrollbar.width():0),c=0,h=this.getVisibleGridColumns(),f=t.hidden;Ext.suspendLayouts(),e=u-(h.length+1)*s,t.flex=null,f?(o=t.width||t.savedWidth||Math.floor(e/(h.length+1)),t.savedWidth=null):o=a.getMaxContentWidth(t),e<o?(t.width=e,l=!0):(t.width=o,u-=o+d,function(){for(n=0,i=h.length;n<i;n++)(r=h[n])!==t&&(r.flex=r.flex||r.width||r.getWidth(),c+=r.flex,r.width=null)}()),function(){var e;for(n=0,i=h.length;n<i;n++)e=(r=h[n])===t,l&&!e?(r.flex=s,r.width=null):e||(o=r.flex||d,r.flex=Math.max(Math.ceil(o/c*u),s),r.width=null),r.setWidth(r.width||r.flex)}(),Ext.resumeLayouts(!0)},autoSizeColumn:function(e){var t=this.view;t&&(t.autoSizeColumn(e),this.forceFit&&this.applyForceFit(e))},getRefItems:function(e){var t=this.callParent([e]);return this.menu&&t.push(this.menu),t},initInheritedState:function(e,t){this.sealed&&(e.sealed=!0),this.callParent([e,t])},privates:{beginChildHide:function(){++this.childHideCount},endChildHide:function(){--this.childHideCount},getFocusables:function(){return this.isRootHeader?this.getVisibleGridColumns():this.items.items},initFocusableContainerKeyNav:function(e){var t=this;t.focusableKeyNav||(t.focusableKeyNav=new Ext.util.KeyNav({target:e,scope:t,down:t.showHeaderMenu,left:t.onFocusableContainerLeftKey,right:t.onFocusableContainerRightKey,home:t.onHomeKey,end:t.onEndKey,space:t.onHeaderActivate,enter:t.onHeaderActivate}))},onHomeKey:function(e){return this.focusChild(null,!0,e)},onEndKey:function(e){return this.focusChild(null,!1,e)},showHeaderMenu:function(e){var t=this.getFocusableFromEvent(e);t&&t.isColumn&&t.triggerEl&&this.onHeaderTriggerClick(t,e,t.triggerEl)},onHeaderActivate:function(e){var t,i,n=this.getFocusableFromEvent(e);if(n&&n.isColumn)return t=n.getView(),n.sortable&&this.sortOnClick?(i=t.getNavigationModel().getLastFocused(),n.toggleSortState(),i&&t.ownerCt.ensureVisible(i.record)):e.getKey()===e.SPACE&&n.onTitleElClick(e,e.target,this.sortOnClick),this.onHeaderClick(n,e,n.el)},onOwnerGridReconfigure:function(e,t){!this.rendered||this.destroying||this.destroyed||(e||t)&&(Ext.Component.layoutSuspendCount?this.$initFocusableContainerAfterLayout=!0:this.initFocusableContainer())}}}),Ext.define("Ext.grid.column.Column",{extend:"Ext.grid.header.Container",xtype:"gridcolumn",requires:["Ext.grid.ColumnComponentLayout","Ext.grid.ColumnLayout","Ext.app.bind.Parser"],alternateClassName:"Ext.grid.Column",config:{triggerVisible:!1,sorter:null,align:"start"},baseCls:Ext.baseCSSPrefix+"column-header",hoverCls:Ext.baseCSSPrefix+"column-header-over",ariaRole:"columnheader",focusableContainer:!1,sortState:null,possibleSortStates:["ASC","DESC"],ariaSortStates:{ASC:"ascending",DESC:"descending"},childEls:["titleEl","triggerEl","textEl","textContainerEl","textInnerEl"],headerWrap:!1,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" role="presentation"','{tipMarkup}class="',Ext.baseCSSPrefix,'column-header-inner<tpl if="!$comp.isContainer"> ',Ext.baseCSSPrefix,"leaf-column-header</tpl>",'<tpl if="empty"> ',Ext.baseCSSPrefix,'column-header-inner-empty</tpl>">','<div id="{id}-textContainerEl" data-ref="textContainerEl" role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-container">','<div role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-wrapper">','<div id="{id}-textEl" data-ref="textEl" role="presentation" class="',Ext.baseCSSPrefix,"column-header-text",'{childElCls}">','<span id="{id}-textInnerEl" data-ref="textInnerEl" role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-inner">{text}</span>',"</div>","{%","values.$comp.afterText(out, values);","%}","</div>","</div>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" unselectable="on" class="',Ext.baseCSSPrefix,"column-header-trigger",'{childElCls}" style="{triggerStyle}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:" ",menuText:null,emptyCellText:" ",sortable:!0,resizable:!0,hideable:!0,menuDisabled:!1,renderer:!1,draggable:!0,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",dirtyText:"Cell value has been edited",producesHTML:!0,ignoreExport:!1,exportStyle:null,exportRenderer:!1,exportSummaryRenderer:!1,isHeader:!0,isColumn:!0,scrollable:!1,requiresMenu:!1,tabIndex:-1,ascSortCls:Ext.baseCSSPrefix+"column-header-sort-ASC",descSortCls:Ext.baseCSSPrefix+"column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:Ext.baseCSSPrefix+"group-sub-header",groupHeaderCls:Ext.baseCSSPrefix+"group-header",clickTargetName:"titleEl",detachOnRemove:!0,initResizable:Ext.emptyFn,rendererNames:{column:"renderer",edit:"editRenderer",summary:"summaryRenderer"},formatterNames:{column:"formatter",edit:"editFormatter",summary:"summaryFormatter"},initComponent:function(){var e=this;e.rendererScope||(e.rendererScope=e.scope),null!=e.header&&(e.text=e.header,e.header=null),e.cellWrap&&(e.tdCls=(e.tdCls||"")+" "+Ext.baseCSSPrefix+"wrap-cell"),null!=e.columns?(e.isGroupHeader=!0,e.ariaRole="presentation",e.dataIndex&&Ext.raise("Ext.grid.column.Column: Group header may not accept a dataIndex"),e.width&&e.width!==Ext.grid.header.Container.prototype.defaultWidth&&Ext.raise("Ext.grid.column.Column: Group header does not support setting explicit widths. A group header either shrinkwraps its children, or must be flexed."),e.items=e.columns,e.columns=null,e.cls=(e.cls||"")+" "+e.groupHeaderCls,e.sortable=e.resizable=!1,e.align="center"):e.flex&&(e.minWidth=e.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth),e.addCls(Ext.baseCSSPrefix+"column-header-align-"+e.getMappedAlignment(e.align)),e.setupRenderer(),e.setupRenderer("edit"),e.setupRenderer("summary"),e.callParent()},beforeLayout:function(){var e,t,i,n,r=this.items,o=0,a=this.flex;if(a&&this.isGroupHeader){for(Ext.isArray(r)||(r=r.items),e=r.length,t=0;!n&&t<e;t++)(i=r[t]).isColumn&&!i.hidden&&(++o,n=i.flex);!n&&o&&(this.savedFlex=a,this.flex=null)}this.callParent()},onAdded:function(e,t,i){this.callParent([e,t,i]),this.view=this.rootHeaderCt=this.cellSelector=this.visibleIndex=null,this.headerId||this.calculateHeaderId(),this.configureStateInfo()},_initSorterFn:function(e,t){var i=this.column,n=i.resolveListenerScope(),r=this.methodName,o=n&&n[r],a=0;return o?(this.setSorterFn(o),this.column=null,a=o.call(n,e,t)):n?Ext.raise('No such method "'+r+'" on '+n.$className):Ext.raise("Cannot resolve scope for column "+i.id),a},applySorter:function(e){var t,i=e?e.sorterFn:null;return"string"==typeof i?((t=new Ext.util.Sorter(Ext.applyIf({sorterFn:this._initSorterFn},e))).methodName=i,t.column=this):t=this.getRootHeaderCt().up("tablepanel").store.getData().getSorters().decodeSorter(e),t},updateAlign:function(e){this.textAlign=this.getMappedAlignment(e)},bindFormatter:function(t){var i=this;return function(e){return t(e,i.rendererScope||i.resolveListenerScope())}},bindRenderer:function(e){var t=this;return e in Ext.util.Format&&Ext.log.warn('Use "formatter" config instead of "renderer" to use Ext.util.Format to format cell values'),t.hasCustomRenderer=!0,function(){return Ext.callback(e,t.rendererScope,arguments,0,t)}},setupRenderer:function(e){var t,i,n,r,o,a=this;e=e||"column",t=a[a.formatterNames[e]],i=a[a.rendererNames[e]],n="column"===e,t?(t=(r=Ext.app.bind.Parser.fly(t)).compileFormat(),r.release(),a[a.formatterNames[e]]=null,a[a.rendererNames[e]]=a.bindFormatter(t)):i?("string"==typeof i&&(i=a[a.rendererNames[e]]=a.bindRenderer(i),o=!0),n&&(a.hasCustomRenderer=o||a.shouldFlagCustomRenderer(i))):n&&a.defaultRenderer&&(a.renderer=a.defaultRenderer,a.usingDefaultRenderer=!0)},getView:function(){var e;return this.view||(e=this.getRootHeaderCt())&&(this.view=e.view),this.view},onFocusLeave:function(e){this.callParent([e]),this.activeMenu&&this.activeMenu.hide()},initItems:function(){this.callParent(arguments),this.isGroupHeader&&(!this.config.hidden&&this.hasVisibleChildColumns()||this.hide())},hasVisibleChildColumns:function(){var e,t,i=this.items.items,n=i.length;for(e=0;e<n;++e)if((t=i[e]).isColumn&&!t.hidden)return!0;return!1},onAdd:function(e){e.isColumn&&(e.isSubHeader=!0,e.addCls(this.groupSubHeaderCls)),this.isGroupHeader&&this.hidden&&this.hasVisibleChildColumns()&&this.show(),this.callParent([e])},onRemove:function(e,t){e.isSubHeader&&(e.isSubHeader=!1,e.removeCls(this.groupSubHeaderCls)),this.callParent([e,t]),this.destroyed||this.destroying||this.hasVisibleChildColumns()||!this.ownerCt||this.ownerCt.isNested()||this.hide()},initRenderData:function(){var e="",t=this.tooltip,i=this.text,n="qtip"===this.tooltipType?"data-qtip":"title";return Ext.isEmpty(t)||(e=n+'="'+t+'" '),Ext.applyIf(this.callParent(arguments),{text:i,empty:this.isEmptyText(i),menuDisabled:this.menuDisabled,tipMarkup:e,triggerStyle:this.getTriggerVisible()?"display:block":""})},applyColumnState:function(e,t){var i,n,r,o=this,a=o.getSorter(),s=t&&t.sorters;if(!1!==o.getStateful()){if(a&&s&&(i=s.length))for(r=a.getId(),n=0;n<i;n++)if(s[n].id===r){a.setDirection(s[n].direction),s[n]=a;break}o.applyColumnsState(e.columns),null!=e.hidden&&(o.hidden=e.hidden),null!=e.locked&&(o.locked=e.locked),null!=e.sortable&&(o.sortable=e.sortable),null!=e.width?(o.flex=null,o.width=e.width):null!=e.flex&&(o.width=null,o.flex=e.flex)}},getColumnState:function(){var e=this.items.items,t={id:this.getStateId()};if(!1!==this.getStateful())return this.savePropsToState(["hidden","sortable","locked","flex","width"],t),this.isGroupHeader&&e&&e.length&&(t.columns=this.getColumnsState()),"width"in t&&delete t.flex,t},setText:function(e){var t;this.text=e,this.rendered&&(t=this.getView().ownerGrid,this.textInnerEl.setHtml(e),this.titleEl.toggleCls(Ext.baseCSSPrefix+"column-header-inner-empty",this.isEmptyText(e)),t.syncHeaderVisibility())},getIndex:function(){return!this.isGroupColumn&&this.getRootHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return null!=this.visibleIndex?this.visibleIndex:!this.isGroupColumn&&Ext.Array.indexOf(this.getRootHeaderCt().getVisibleGridColumns(),this)},getLabelChain:function(){for(var e,t=this,i=[];e=t.up("headercontainer");)e.text&&i.unshift(Ext.util.Format.stripTags(e.text)),t=e;return i},beforeRender:function(){var e,t=this,i=t.getRootHeaderCt(),n=t.isSortable(),r=[];t.textAlign=t.getMappedAlignment(t.getAlign()),t.callParent(),t.requiresMenu||n||t.groupable||t.lockable||!1!==i.grid.enableColumnHide&&i.getHideableColumns().length||(t.menuDisabled=!0),t.cellWrap&&(t.variableRowHeight=!0),(e=t.ariaRenderAttributes||(t.ariaRenderAttributes={}))["aria-readonly"]=!0,n&&(e["aria-sort"]=t.ariaSortStates[t.sortState]),t.isSubHeader&&(r=t.getLabelChain(),t.text&&r.push(Ext.util.Format.stripTags(t.text)),r.length&&(e["aria-label"]=r.join(" "))),t.protoEl.unselectable()},getTriggerElWidth:function(){var e=this.triggerEl,t=this.self.triggerElWidth;return e&&void 0===t&&(e.setStyle("display","block"),t=this.self.triggerElWidth=e.getWidth(),e.setStyle("display","")),t},afterComponentLayout:function(e,t,i,n){var r=this.getRootHeaderCt(),o=this.savedFlex;this.callParent([e,t,i,n]),r&&(null!=i||this.flex)&&e!==i&&r.onHeaderResize(this,e),o&&(this.flex=o,delete this.savedFlex)},doDestroy:function(){Ext.destroy(this.field,this.editor),this.callParent()},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(e){this.triggerEl&&this.onTitleElClick(e,this.triggerEl.dom||this.el.dom)},onEnterKey:function(e){this.onTitleElClick(e,this.el.dom)},onTitleElDblClick:function(e){var t,i,n;if(this.isAtStartEdge(e))(t=this.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])"))&&t.getRootHeaderCt()===this.getRootHeaderCt()&&t.autoSize();else if(this.isAtEndEdge(e)){if(this.isGroupHeader&&e.getPoint().isContainedBy(this.layout.innerCt))return void(i=this.query("gridcolumn:not([hidden]):not([isGroupHeader])"))[i.length-1].autoSize();if(1===(n=this.getRootHeaderCt()).visibleColumnManager.getColumns().length&&n.forceFit)return;this.autoSize()}},autoSize:function(){var e,t,i,n;if(this.resizable){if(this.isGroupHeader){for(t=(e=this.query("gridcolumn:not([hidden]):not([isGroupHeader])")).length,n=this.getRootHeaderCt(),Ext.suspendLayouts(),i=0;i<t;i++)n.autoSizeColumn(e[i]);return void Ext.resumeLayouts(!0)}this.getRootHeaderCt().autoSizeColumn(this)}},isEmptyText:function(e,t){return t?0===Ext.String.trim(e).length:null==e||""===e},onTitleElClick:function(e,t,i){var n,r,o,a,s=this;return"touch"===e.pointerType?(o=s.previousSibling(":not([hidden])"),s.menuDisabled||(a=parseInt(s.triggerEl.getStyle("width"),10),isNaN(a)&&(a=3*s.getHandleWidth(e)),s.isAtEndEdge(e,a)&&(n=s)),!n&&o&&!o.menuDisabled&&s.isAtStartEdge(e)&&(n=o)):n=(r=s.triggerEl)&&(e.target===r.dom||t===r||e.within(r))?s:null,!1!==i&&(e.getKey()||!n&&s.isSortZone(e))&&s.toggleSortState(),n},processEvent:function(e,t,i,n,r,o){return this.fireEvent.apply(this,arguments)},isSortable:function(){var e=this.getRootHeaderCt(),t=e?e.grid:null,i=this.sortable;return t&&!1===t.sortableColumns&&(i=!1),i},toggleSortState:function(){this.isSortable()&&this.sort()},sort:function(e){var t,i=this.up("tablepanel"),n=i.store,r=n.isSorted(),o=r&&n.getSorters(),a=this.getSorter(),s=o&&o.indexOf(a);Ext.suspendLayouts(),a?(t=a.getDirection(),e&&t===e&&r&&-1!==s||(r&&-1!==s||t===e||a.setDirection(e),n.sort(a,i.multiColumnSort?"multi":"replace"))):n.sort(this.getSortParam(),e,i.multiColumnSort?"multi":"replace"),Ext.resumeLayouts(!0)},getSortParam:function(){return this.dataIndex},setSortState:function(e){var t,i=this,n=e&&e.getDirection(),r=i.ascSortCls,o=i.descSortCls,a=i.getRootHeaderCt(),s=i.ariaEl.dom;switch(n){case"DESC":i.hasCls(o)||(i.addCls(o),i.sortState="DESC",t=!0),i.removeCls(r);break;case"ASC":i.hasCls(r)||(i.addCls(r),i.sortState="ASC",t=!0),i.removeCls(o);break;default:i.removeCls([r,o]),i.sortState=null}s&&(i.sortState?s.setAttribute("aria-sort",i.ariaSortStates[i.sortState]):s.removeAttribute("aria-sort")),t&&a.fireEvent("sortchange",a,i,n)},isHideable:function(){var e={hideCandidate:this,result:this.hideable};return e.result&&this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[e]),e.result},hasOtherMenuEnabledChildren:function(e){var t,i;return this.isXType("headercontainer")?(i=(t=this.query(">gridcolumn:not([hidden]):not([menuDisabled])")).length,Ext.Array.contains(t,e.hideCandidate)&&i--,!i&&void(e.hideCandidate=this)):e.result=!1},isLockable:function(){var e={result:!1!==this.lockable};return e.result&&this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[e]),e.result},isLocked:function(){return null==this.locked&&(this.locked=this.getInherited().inLockedGrid),this.locked},hasMultipleVisibleChildren:function(e){return this.isXType("headercontainer")?!(1<this.query(">gridcolumn:not([hidden])").length)&&void 0:e.result=!1},hide:function(){var e=this,t=e.getRootHeaderCt(),i=e.getRefOwner();return i.constructing?e.callParent():e.rendered&&!e.isVisible()||(t.forceFit&&(e.visibleSiblingCount=t.getVisibleGridColumns().length-1,e.flex&&(e.savedWidth=e.getWidth(),e.flex=null)),t.beginChildHide(),Ext.suspendLayouts(),i.isGroupHeader&&(e.isNestedGroupHeader()&&i.hide(),e.isSubHeader&&!e.isGroupHeader&&1===i.query(">gridcolumn:not([hidden])").length&&(i.lastHiddenHeader=e)),e.callParent(),t.endChildHide(),t.onHeaderHide(e),Ext.resumeLayouts(!0)),e},show:function(){var e=this,t=e.getRootHeaderCt(),i=e.getRefOwner();return e.isVisible()||(i.isGroupHeader&&(i.lastHiddenHeader=null),e.rendered&&t.forceFit&&t.applyForceFit(e),Ext.suspendLayouts(),e.isSubHeader&&i.hidden&&i.show(!1,!0),e.callParent(arguments),e.isGroupHeader&&e.maybeShowNestedGroupHeader(),(i=e.getRootHeaderCt())&&i.onHeaderShow(e),Ext.resumeLayouts(!0)),e},shouldUpdateCell:function(e,t){var i,n,r;if(!this.preventUpdate){if(this.hasCustomRenderer)return 1;if(!t)return 2;for(i=t.length,n=0;n<i;++n)if((r=t[n])===this.dataIndex||r===e.idProperty)return 2}},getCellWidth:function(){var e;return this.rendered&&this.componentLayout&&this.componentLayout.lastComponentSize?e=this.componentLayout.lastComponentSize.width:this.width?e=this.width:this.isColumn||(e=this.getTableWidth()),e},getCellId:function(){return Ext.baseCSSPrefix+"grid-cell-"+this.getItemId()},getCellSelector:function(){var e;return this.cellSelector||(e=this.getView(),this.cellSelector=(e?e.getCellSelector():"")+"."+this.getCellId()),this.cellSelector},getCellInnerSelector:function(){return this.getCellSelector()+" ."+Ext.baseCSSPrefix+"grid-cell-inner"},isAtStartEdge:function(e){var t=e.getXY()[0]-this.getX();return!(t<0&&0===this.getIndex())&&t<this.getHandleWidth(e)},isAtEndEdge:function(e,t){return this.getX()+this.getWidth()-e.getXY()[0]<=(t||this.getHandleWidth(e))},isSortZone:function(e){var t,i=!this.isAtStartEdge(e)&&!this.isAtEndEdge(e);return i&&(t=Ext.Component.from(e))&&(i=(t=t.focusable?t:t.up(":focusable"))===this),i},getHandleWidth:function(e){return"touch"===e.pointerType?10:4},setMenuActive:function(e){this.activeMenu=e,this.titleEl[e?"addCls":"removeCls"](this.headerOpenCls)},privates:{_alignMap:{start:"left",end:"right"},afterText:function(e,t){this.dirtyText&&(this.dirtyTextElementId=this.id+"-dirty-cell-text",e.push('<span id="'+this.dirtyTextElementId+'" class="'+Ext.baseCSSPrefix+'hidden-offsets">'+this.dirtyText+"</span>"))},calculateHeaderId:function(){var e,t,i,n,r,o;if(!this.headerId){if(!(e=this.up("tablepanel")))return;if(i=this.items.items)for(r=0,o=i.length;r<o;++r)(n=i[r]).isColumn&&n.calculateHeaderId();(t=e?e.ownerGrid:this.getRootHeaderCt()).headerCounter=(t.headerCounter||0)+1,this.headerId="h"+t.headerCounter}this.configureStateInfo()},getMappedAlignment:function(e){return this._alignMap[e]||e},configureStateInfo:function(){var e,t=this;t.stateId||(t.stateId=t.initialConfig.id||t.headerId),e=t.getSorter(),t.hasSetSorter||!e||e.initialConfig.id||(t.dataIndex||t.stateId)&&(e.setId((t.dataIndex||t.stateId)+"-sorter"),t.hasSetSorter=!0)},onLock:function(e){var t,i,n=this.items.items,r=n.length;for(t=0;t<r;++t)(i=n[t]).isColumn&&i.onLock(e)},onUnlock:function(e){var t,i,n=this.items.items,r=n.length;for(t=0;t<r;++t)(i=n[t]).isColumn&&i.onUnlock(e)},shouldFlagCustomRenderer:function(e){return 1<e.length}},deprecated:{5:{methods:{bindRenderer:function(t){return function(e){return Ext.util.Format[t](e)}}}}}}),Ext.define("Ext.grid.column.ActionProxy",{constructor:function(e,t,i){this.column=e,this.item=t,this.itemIndex=i},setHandler:function(e){this.item.handler=e},setDisabled:function(e){e?this.column.disableAction(this.itemIndex):this.column.enableAction(this.itemIndex)},setIconCls:function(e){this.item.iconCls=e,this.column.getView().refreshView()},setIconGlyph:function(e){this.item.glyph=e,this.column.getView().refreshView()},setHidden:function(e){this.item.hidden=e,this.column.getView().refreshView()},setVisible:function(e){this.setHidden(!e)},on:function(){return this.column.on.apply(this.column,arguments)}}),Ext.define("Ext.grid.column.Action",{extend:"Ext.grid.column.Column",alias:["widget.actioncolumn"],alternateClassName:"Ext.grid.ActionColumn",requires:["Ext.grid.column.ActionProxy","Ext.util.Format","Ext.Glyph"],stopSelection:!0,actionIdRe:new RegExp(Ext.baseCSSPrefix+"action-col-(\\d+)"),altText:"",menuText:"<i>Actions</i>",itemTabIndex:0,itemAriaRole:"button",maskOnDisable:!1,ignoreExport:!0,sortable:!1,innerCls:Ext.baseCSSPrefix+"grid-cell-inner-action-col",actionIconCls:Ext.baseCSSPrefix+"action-col-icon",constructor:function(e){var t,i,n,r,o=this,a=Ext.apply({},e),s=a.items||o.items||[o];for(o.origRenderer=a.renderer||o.renderer,o.origScope=a.scope||o.scope,o.renderer=o.scope=a.renderer=a.scope=null,a.items=null,o.callParent([a]),o.hasOwnProperty("isDisabled")&&(Ext.log.warn("[Ext.grid.column.Action] The isDisabled config is deprecated. Use isActionDisabled to avoid conflict with Ext.Component#isDisabled()."),o.isActionDisabled=o.isDisabled,delete o.isDisabled),i=0,n=(o.items=s).length;i<n;++i)(r=s[i]).substr&&"@"===r[0]&&(r=o.getAction(r.substr(1))),r.hasOwnProperty("isDisabled")&&(Ext.log.warn("[Ext.grid.column.Action] The isDisabled config is deprecated. Use isActionDisabled to avoid conflict with Ext.Component#isDisabled()."),r.isActionDisabled=r.isDisabled,delete r.isDisabled),r.isAction&&(s[i]=r.initialConfig,r.addComponent(new Ext.grid.column.ActionProxy(o,s[i],i))),r.getClass&&(t=!0);(o.origRenderer||t)&&(o.hasCustomRenderer=!0)},initComponent:function(){this.callParent(),this.sortable&&!this.dataIndex&&(this.sortable=!1)},defaultRenderer:function(e,t,i,n,r,o,a){var s,l,d,u,c,h,f,g,p,m,x=this,y=x.origScope||x,v=x.items,E=v.length;for(d=Ext.isFunction(x.origRenderer)&&x.origRenderer.apply(y,arguments)||"",t.tdCls+=" "+Ext.baseCSSPrefix+"action-col-cell",s=0;s<E;s++)f=(l=v[s]).icon,g=l.glyph,u=l.disabled||!!l.isActionDisabled&&Ext.callback(l.isActionDisabled,l.scope||x.origScope,[a,n,r,l,i],0,x),c=l.tooltip||(l.getTip?Ext.callback(l.getTip,l.scope||x.origScope,arguments,0,x):null),h=l.getAltText?Ext.callback(l.getAltText,l.scope||x.origScope,arguments,0,x):l.altText||x.altText,l.hasActionConfiguration||(l.stopSelection=x.stopSelection,l.disable=Ext.Function.bind(x.disableAction,x,[s],0),l.enable=Ext.Function.bind(x.enableAction,x,[s],0),l.hasActionConfiguration=!0),g=g&&Ext.Glyph.fly(g),d+="<"+(f?"img":"div")+("number"==typeof(p=l!==x&&void 0!==l.tabIndex?l.tabIndex:x.itemTabIndex)?' tabIndex="'+p+'"':"")+((m=l!==x&&void 0!==l.ariaRole?l.ariaRole:x.itemAriaRole)?' role="'+m+'"':' role="presentation"')+(f?' alt="'+h+'" src="'+l.icon+'"':"")+' class="'+x.actionIconCls+" "+Ext.baseCSSPrefix+"action-col-"+String(s)+" "+(u?x.disabledCls+" ":" ")+(l.hidden?Ext.baseCSSPrefix+"hidden-display ":"")+(l.getClass?Ext.callback(l.getClass,l.scope||x.origScope,arguments,void 0,x):l.iconCls||x.iconCls||"")+'"'+(c?' data-qtip="'+Ext.util.Format.htmlEncode(c)+'"':"")+(f?"/>":g?' style="font-family:'+g.fontFamily+'">'+g.character+"</div>":"></div>");return d},updater:function(e,t,i,n,r){var o={};Ext.fly(e).addCls(o.tdCls).down(this.getView().innerSelector,!0).innerHTML=this.defaultRenderer(t,o,i,null,null,r,n)},enableAction:function(e,t){e?Ext.isNumber(e)||(e=Ext.Array.indexOf(this.items,e)):e=0,this.items[e].disabled=!1,this.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+e).removeCls(this.disabledCls),t||this.fireEvent("enable",this)},disableAction:function(e,t){e?Ext.isNumber(e)||(e=Ext.Array.indexOf(this.items,e)):e=0,this.items[e].disabled=!0,this.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+e).addCls(this.disabledCls),t||this.fireEvent("disable",this)},doDestroy:function(){return this.renderer=this.items=null,this.callParent()},processEvent:function(e,t,i,n,r,o,a,s){var l,d,u,c,h=this,f=o.getTarget(),g="keydown"===e&&o.getKey(),p=Ext.fly(i);if(o.stopSelection=!g&&h.stopSelection,g&&(f===i||!p.contains(f))){if(1!==(f=p.query("."+h.actionIconCls,!0)).length)return;f=f[0]}if(f&&(l=f.className.match(h.actionIdRe))&&(u=(d=h.items[parseInt(l[1],10)]).disabled||!!d.isActionDisabled&&Ext.callback(d.isActionDisabled,d.scope||h.origScope,[t,n,r,d,a],0,h),d&&!u))if("mousedown"!==e||h.getView().actionableMode){if("click"===e||g===o.ENTER||g===o.SPACE){if(c=Ext.Element.getActiveElement(),Ext.callback(d.handler||h.handler,d.scope||h.origScope,[t,n,r,d,o,a,s],void 0,h),t.destroyed)return!1;if(o.position.getNode(!0)||o.position.refresh(),Ext.Element.getActiveElement()!==c)return!1}}else o.preventDefault();return h.callParent(arguments)},cascade:function(e,t){e.call(t||this,this)},getRefItems:function(){return[]},contains:function(){return!1},privates:{getFocusables:function(){return[]},shouldUpdateCell:function(){return 2}}}),Ext.define("Ext.grid.column.Boolean",{extend:"Ext.grid.column.Column",alias:["widget.booleancolumn"],alternateClassName:"Ext.grid.BooleanColumn",trueText:"true",falseText:"false",undefinedText:" ",defaultFilterType:"boolean",producesHTML:!1,defaultRenderer:function(e){return void 0===e?this.undefinedText:e&&"false"!==e?this.trueText:this.falseText},updater:function(e,t){Ext.fly(e).down(this.getView().innerSelector,!0).innerHTML=Ext.grid.column.Boolean.prototype.defaultRenderer.call(this,t)}}),Ext.define("Ext.grid.column.Check",{extend:"Ext.grid.column.Column",alternateClassName:["Ext.ux.CheckColumn","Ext.grid.column.CheckColumn"],alias:"widget.checkcolumn",isCheckColumn:!0,config:{headerCheckbox:!1},align:"center",triggerEvent:"click",invert:!1,ignoreExport:!0,stopSelection:!0,headerCheckedCls:Ext.baseCSSPrefix+"grid-hd-checker-on",headerCheckboxCls:Ext.baseCSSPrefix+"column-header-checkbox",checkboxCls:Ext.baseCSSPrefix+"grid-checkcolumn",checkboxCheckedCls:Ext.baseCSSPrefix+"grid-checkcolumn-checked",innerCls:Ext.baseCSSPrefix+"grid-checkcolumn-cell-inner",clickTargetName:"el",defaultFilterType:"boolean",checkboxAriaRole:"button",constructor:function(e){(this.scope=this).callParent([e])},afterComponentLayout:function(){var e=this;e.callParent(arguments),e.useAriaElements&&e.headerCheckbox&&e.updateHeaderAriaDescription(e.areAllChecked()),e.storeListeners||(e.updateHeaderState(),e.storeListeners=e.getView().dataSource.on({datachanged:e.onDataChanged,scope:e,destroyable:!0}))},onRemoved:function(){this.callParent(arguments),this.storeListeners=Ext.destroy(this.storeListeners)},onDataChanged:function(e,t){this.updateHeaderState()},updateHeaderCheckbox:function(e){var t=this,i=Ext.baseCSSPrefix+"column-header-checkbox";e?(t.addCls(i),t.sortable=!1,t.useAriaElements&&t.updateHeaderAriaDescription(t.areAllChecked())):(t.removeCls(i),t.useAriaElements&&t.ariaEl.dom&&t.ariaEl.dom.removeAttribute("aria-describedby")),t.updateHeaderState()},processEvent:function(e,t,i,n,r,o,a,s){var l,d,u=this,c="keydown"===e&&o.getKey(),h=e===u.triggerEvent,f=u.disabled;return o.stopSelection=!c&&u.stopSelection,f||!h&&c!==o.ENTER&&c!==o.SPACE?l=u.callParent(arguments):(d=!u.isRecordChecked(a),!1!==u.fireEvent("beforecheckchange",u,n,d,a,o)&&(u.setRecordCheck(a,n,d,i,o),h&&!t.actionableMode&&o.preventDefault(),u.hasListeners.checkchange&&u.fireEvent("checkchange",u,n,d,a,o))),l},onTitleElClick:function(e,t,i){if(this.disabled||!e.keyCode&&this.text&&!Ext.fly(e.target).hasCls(this.headerCheckboxCls))return this.callParent([e,t,i]);this.toggleAll(e)},toggleAll:function(e){var i=this,n=i.getView(),t=n.getStore(),r=!i.allChecked;!1!==i.fireEvent("beforeheadercheckchange",i,r,e)&&((i.hasListeners.checkchange||i.hasListeners.beforecheckchange)&&(e.position=new Ext.grid.CellContext(n)),t.each(function(e,t){i.setRecordCheck(e,t,r,n.getCell(e,i))}),i.setHeaderStatus(r,e),i.fireEvent("headercheckchange",i,r,e))},setHeaderStatus:function(e,t){this.allChecked!==e&&(this.allChecked=e,this.headerCheckbox&&(this[e?"addCls":"removeCls"](this.headerCheckedCls),this.useAriaElements&&this.updateHeaderAriaDescription(e)))},updateHeaderState:function(e){this.headerStateTimer||(this.headerStateTimer=Ext.raf(this.doUpdateHeaderState,this))},doUpdateHeaderState:function(e){this.headerStateTimer=null,!this.destroyed&&this.headerCheckbox&&this.setHeaderStatus(this.areAllChecked(),e)},onEnable:function(){this.callParent(arguments),this._setDisabled(!1)},onDisable:function(){this._setDisabled(!0)},_setDisabled:function(e){var t,i=this.disabledCls;t=this.up("tablepanel").el.select(this.getCellSelector()),e?t.addCls(i):t.removeCls(i)},defaultRenderer:function(e,t){var i=this,n=i.checkboxCls,r="";return i.invert&&(e=!e),i.disabled&&(t.tdCls+=" "+i.disabledCls),(r=e?(n+=" "+i.checkboxCheckedCls,i.checkedTooltip):i.tooltip)&&(t.tdAttr+=' data-qtip="'+Ext.htmlEncode(r)+'"'),i.useAriaElements&&(t.tdAttr+=' aria-describedby="'+i.id+"-cell-description"+(e?"":"-not")+'-selected"'),i.updateHeaderState(),'<span class="'+n+'" role="'+i.checkboxAriaRole+'"'+(i.ariaStaticRoles[i.checkboxAriaRole]?"":' tabIndex="0"')+"></span>"},isRecordChecked:function(e){var t=this.property;return t?e[t]:e.get(this.dataIndex)},areAllChecked:function(){var e,t,i,n=this.getView().getStore();if(!n.isBufferedStore&&0<n.getCount()){for(t=(e=n.getData().items).length,i=0;i<t;++i)if(!this.isRecordChecked(e[i]))return!1;return!0}},setRecordCheck:function(e,t,i,n){var r=this.property;(r?e[r]:e.get(this.dataIndex))!=i&&(r?(e[r]=i,this.updater(n,i)):e.set(this.dataIndex,i))},updater:function(e,t){var i;this.invert&&(t=!t),(i=t?this.checkedTooltip:this.tooltip)?e.setAttribute("data-qtip",i):e.removeAttribute("data-qtip"),this.useAriaElements&&this.updateCellAriaDescription(null,t,e),(e=Ext.fly(e))[this.disabled?"addCls":"removeCls"](this.disabledCls),Ext.fly(e.down(this.getView().innerSelector,!0).firstChild)[t?"addCls":"removeCls"](Ext.baseCSSPrefix+"grid-checkcolumn-checked"),this.updateHeaderState()},updateHeaderAriaDescription:function(e){this.useAriaElements&&this.ariaEl.dom&&this.ariaEl.dom.setAttribute("aria-describedby",this.id+"-header-description"+(e?"":"-not")+"-selected")},updateCellAriaDescription:function(e,t,i){this.useAriaElements&&(i=i||this.getView().getCell(e,this))&&i.setAttribute("aria-describedby",this.id+"-cell-description"+(t?"":"-not")+"-selected")},doDestroy:function(){Ext.unraf(this.headerStateTimer),this.callParent()},privates:{afterText:function(e,t){var i=this.id;e.push('<span role="presentation" class="',this.headerCheckboxCls,'"></span>'),this.useAriaElements&&e.push('<span id="'+i+'-header-description-selected" class="'+Ext.baseCSSPrefix+'hidden-offsets">'+this.headerDeselectText+'</span><span id="'+i+'-header-description-not-selected" class="'+Ext.baseCSSPrefix+'hidden-offsets">'+this.headerSelectText+'</span><span id="'+i+'-cell-description-selected" class="'+Ext.baseCSSPrefix+'hidden-offsets">'+this.rowDeselectText+'</span><span id="'+i+'-cell-description-not-selected" class="'+Ext.baseCSSPrefix+'hidden-offsets">'+this.rowSelectText+"</span>")}}}),Ext.define("Ext.grid.column.Date",{extend:"Ext.grid.column.Column",alias:["widget.datecolumn"],alternateClassName:"Ext.grid.DateColumn",requires:["Ext.Date"],isDateColumn:!0,defaultFilterType:"date",producesHTML:!1,initComponent:function(){this.format||(this.format=Ext.Date.defaultFormat),this.callParent(arguments)},defaultRenderer:function(e){return Ext.util.Format.date(e,this.format)},updater:function(e,t){Ext.fly(e).down(this.getView().innerSelector,!0).innerHTML=Ext.grid.column.Date.prototype.defaultRenderer.call(this,t)}}),Ext.define("Ext.grid.column.Number",{extend:"Ext.grid.column.Column",alias:["widget.numbercolumn"],alternateClassName:"Ext.grid.NumberColumn",requires:["Ext.util.Format"],defaultFilterType:"number",format:"0,000.00",producesHTML:!1,defaultRenderer:function(e){return Ext.util.Format.number(e,this.format)},updater:function(e,t){Ext.fly(e).down(this.getView().innerSelector,!0).innerHTML=Ext.grid.column.Number.prototype.defaultRenderer.call(this,t)}}),Ext.define("Ext.grid.column.RowNumberer",{extend:"Ext.grid.column.Column",alternateClassName:"Ext.grid.RowNumberer",alias:"widget.rownumberer",isRowNumberer:!0,text:"&#160;",width:30,sortable:!1,draggable:!1,autoLock:!0,lockable:!1,align:"right",producesHTML:!1,ignoreExport:!0,constructor:function(e){this.width=this.width,this.callParent(arguments),this.sortable=!1,this.scope=this},resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:"",cls:Ext.baseCSSPrefix+"row-numberer",tdCls:Ext.baseCSSPrefix+"grid-cell-row-numberer "+Ext.baseCSSPrefix+"grid-cell-special",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-row-numberer",rowspan:void 0,onAdded:function(){this.renumberRows=Ext.Function.createBuffered(this.renumberRows,1,this),this.callParent(arguments),this.storeListener=this.getView().on({itemadd:this.renumberRows,itemremove:this.renumberRows,destroyable:!0})},onRemoved:function(){this.callParent(arguments),this.storeListener&&(this.storeListener=this.storeListener.destroy()),this.renumberRows.timer&&Ext.undefer(this.renumberRows.timer),this.renumberRows=null,delete this.renumberRows},defaultRenderer:function(e,t,i,n,r,o,a){var s=this.rowspan,l=o.currentPage,d=i?a.store.indexOf(i):e-1;return t&&s&&(t.tdAttr='rowspan="'+s+'"'),1<l&&(d+=(l-1)*o.pageSize),d+1},updater:function(e,t,i,n,r){var o=e&&e.querySelector(this.getView().innerSelector);o&&(o.innerHTML=this.defaultRenderer(t,null,i,null,null,r,n))},renumberRows:function(){if(!this.destroying&&!this.destroyed)for(var e=this.getView(),t=e.dataSource,i=t.getCount(),n=new Ext.grid.CellContext(e).setColumn(this),r=this.getView().all,o=r.startIndex;o<=r.endIndex&&o<i;)n.setRow(o),this.updater(n.getCell(!0),++o,null,e,t)}}),Ext.define("Ext.grid.column.Template",{extend:"Ext.grid.column.Column",alias:["widget.templatecolumn"],alternateClassName:"Ext.grid.TemplateColumn",requires:["Ext.XTemplate"],initComponent:function(){this.tpl=!Ext.isPrimitive(this.tpl)&&this.tpl.compile?this.tpl:new Ext.XTemplate(this.tpl),this.hasCustomRenderer=!0,this.callParent()},defaultRenderer:function(e,t,i){var n=Ext.apply({},i.data,i.getAssociatedData());return this.tpl.apply(n)},updater:function(e,t){Ext.fly(e).down(this.getView().innerSelector,!0).innerHTML=Ext.grid.column.CheckColumn.prototype.defaultRenderer.call(this,t)}}),Ext.define("Ext.grid.column.Widget",{extend:"Ext.grid.column.Column",xtype:"widgetcolumn",mixins:["Ext.mixin.StyleCacher"],config:{defaultWidgetUI:{}},ignoreExport:!0,sortable:!1,onWidgetAttach:null,preventUpdate:!0,innerCls:Ext.baseCSSPrefix+"grid-widgetcolumn-cell-inner",stopSelection:!0,initComponent:function(){var e;this.callParent(),(e=this.widget)&&!e.isComponent||Ext.raise("column.Widget requires a widget configuration."),this.widget=e=Ext.apply({},e),e.ui||(e.ui=this.getDefaultWidgetUI()[e.xtype]||"default"),this.isFixedSize=Ext.isNumber(e.width)},processEvent:function(e,t,i,n,r,o,a,s){var l;this.stopSelection&&"click"===e&&(l=o.getTarget(t.innerSelector))&&l!==o.target&&(o.stopSelection=!0)},beforeRender:function(){var e,t=this.tdCls;e=Ext.widget(this.widget),this.bindDataIndex=this.dataIndex&&e.defaultBindProperty&&!e.bind,t=t?t+" ":"",this.tdCls=t+e.getTdCls(),this.setupViewListeners(this.getView()),this.callParent(),e.destroy()},afterRender:function(){var e=this.getView();this.callParent(),e&&e.viewReady&&!e.ownerGrid.reconfiguring&&this.onViewRefresh(e,e.getViewRange())},defaultRenderer:Ext.emptyFn,updater:function(e,t,i){this.updateWidget(i)},onCellsResized:function(e){var t,i,n=this.ownerGrid.getManagedWidgets(this.getId()),r=n.length,o=this.getView();if(!this.isFixedSize&&this.rendered&&o&&o.viewReady&&(i=o.getEl().down(this.getCellInnerSelector())))for(e-=parseInt(this.getCachedStyle(i,"padding-left"),10)+parseInt(this.getCachedStyle(i,"padding-right"),10),t=0;t<r;++t)n[t].ownerLayout=null,n[t].setWidth(e),n[t].ownerLayout=o.componentLayout},onAdded:function(){var e;this.callParent(arguments),this.ownerGrid=this.up("tablepanel").ownerGrid,this.ownerGrid.lockable&&(this.variableRowHeight=!0),(e=this.getView())&&this.setupViewListeners(e)},onRemoved:function(e){var t=this.viewListeners;t&&Ext.destroy(t),e&&this.ownerGrid.destroyManagedWidgets(this.getId()),this.callParent(arguments)},doDestroy:function(){this.ownerGrid.destroyManagedWidgets(this.getId()),this.callParent()},privates:{getWidget:function(e){var t=null;return e&&((t=this.ownerGrid.createManagedWidget(this.getView(),this.getId(),this.widget,e)).getWidgetRecord=this.widgetRecordDecorator,t.getWidgetColumn=this.widgetColumnDecorator,t.measurer=this,t.isLayoutChild=this.returnFalse),t},onItemAdd:function(e){var t,i,n,r,o,a,s,l=this,d=l.getView(),u=!!l.onWidgetAttach,c=l.dataIndex,h=l.isFixedSize,f=e.length;if(l.isVisible(!0))for(t=0;t<f;t++)(i=e[t]).isNonData||(n=d.getCell(i,l))&&(n=n.firstChild,h||s||!l.lastBox||(s=l.lastBox.width-parseInt(l.getCachedStyle(n,"padding-left"),10)-parseInt(l.getCachedStyle(n,"padding-right"),10)),(r=l.getWidget(i)).$widgetColumn=l,r.$widgetRecord=i,Ext.fly(n).empty(),r.defaultBindProperty&&c&&r.setConfig(r.defaultBindProperty,i.get(c)),(o=r.el||r.element)?(n.appendChild(o.dom),h||r.setWidth(s),r.reattachToBody()):(h||(r.width=s||100),r.render(n)),u&&Ext.callback(l.onWidgetAttach,l.scope,[l,r,i],0,l),(a=r.getFocusEl())&&(d.actionableMode?a.isTabbable()||a.restoreTabbableState():a.isTabbable()&&a.saveTabbableState()));else d.refreshNeeded=!0},onItemUpdate:function(e,t,i){this.updateWidget(e)},onLock:function(e){this.callParent([e]),this.resetView()},onUnlock:function(e){this.callParent([e]),this.resetView()},onViewRefresh:function(e,t){Ext.suspendLayouts(),this.onItemAdd(t),Ext.resumeLayouts(!0)},resetView:function(){var e=this.viewListeners;e&&Ext.destroy(e),this.setupViewListeners(this.getView()),this.ownerGrid.handleWidgetViewChange(this.getView(),this.getId())},returnFalse:function(){return!1},setupViewListeners:function(e){var t={refresh:this.onViewRefresh,itemadd:this.onItemAdd,scope:this,destroyable:!0};this.bindDataIndex&&(t.itemUpdate=this.onItemUpdate),this.viewListeners=e.on(t)},updateWidget:function(e){var t,i=this.dataIndex;this.rendered&&this.bindDataIndex&&(this.isVisible(!0)?(t=this.getWidget(e))&&t.setConfig(t.defaultBindProperty,e.get(i)):this.getView().refreshView())},widgetRecordDecorator:function(){return this.$widgetRecord},widgetColumnDecorator:function(){return this.$widgetColumn}}}),Ext.define("Ext.grid.feature.Feature",{extend:"Ext.util.Observable",alias:"feature.feature",wrapsItem:!1,isFeature:!0,disabled:!1,hasFeatureEvent:!0,eventPrefix:null,eventSelector:null,view:null,grid:null,columnSizer:null,constructor:function(e){this.initialConfig=e,this.callParent(arguments)},clone:function(){return new this.self(this.initialConfig)},init:Ext.emptyFn,getFireEventArgs:function(e,t,i,n){return[e,t,i,n]},vetoEvent:Ext.emptyFn,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}}),Ext.define("Ext.grid.feature.AbstractSummary",{extend:"Ext.grid.feature.Feature",alias:"feature.abstractsummary",summaryRowCls:Ext.baseCSSPrefix+"grid-row-summary",summaryRowSelector:"."+Ext.baseCSSPrefix+"grid-row-summary",summaryRowTpl:{fn:function(e,t,i){t.record.isSummary?this.summaryFeature.outputSummaryRecord(t.record,t,e,i):this.nextTpl.applyOut(t,e,i)},priority:1e3},showSummaryRow:!0,init:function(){var e=this;(e.view.summaryFeature=e).rowTpl=e.view.self.prototype.rowTpl,e.readDataOptions={recordCreator:e.readSummaryRecord.bind(e)},(e.view.addRowTpl(e.summaryRowTpl).summaryFeature=e).summaryData={},e.groupInfo={},e.summaryTableCls||(e.summaryTableCls=Ext.baseCSSPrefix+"grid-item"),e.hasOwnProperty("summaryRowCls")&&(e.summaryRowSelector="."+e.summaryRowCls)},bindStore:function(e,t){var i=t&&t.getProxy().getReader();this.readerListeners=Ext.destroy(this.readerListeners),i&&(this.remoteRoot||i.getSummaryRootProperty())&&(this.readerListeners=i.on({scope:this,destroyable:!0,rawdata:this.onReaderRawData}))},onReaderRawData:function(e){this.summaryRows=null,this.readerRawData=e},toggleSummaryRow:function(e,t){var i,n=this.showSummaryRow;e=null!=e?!!e:!this.showSummaryRow,(this.showSummaryRow=e)&&e!==n&&(this.updateSummaryRow=!0),this.lockingPartner?t||(this.lockingPartner.toggleSummaryRow(e,!0),i=!0):i=!0,i&&this.grid.ownerGrid.getView().refreshView()},createRenderer:function(i,n){var e=n.ownerGroup,r=e?this.summaryData[e]:this.summaryData,o=i.dataIndex||i.getItemId();return function(e,t){return i.summaryRenderer?i.summaryRenderer(n.data[o],r,o,t):n.data[o]}},outputSummaryRecord:function(e,t,i){var n,r,o=t.view,a=o.rowValues,s=t.columns||o.headerCt.getVisibleGridColumns(),l=s.length,d={view:o,record:e,rowStyle:"",rowClasses:[this.summaryRowCls,this.summaryItemCls],itemClasses:[],recordIndex:-1,rowId:o.getRowId(e),columns:s};for(n=0;n<l;n++)(r=s[n]).savedRenderer=r.renderer,r.summaryType||r.summaryRenderer?r.renderer=this.createRenderer(r,e):r.renderer=Ext.emptyFn;for(o.rowValues=d,o.self.prototype.rowTpl.applyOut(d,i,parent),o.rowValues=a,n=0;n<l;n++)(r=s[n]).renderer=r.savedRenderer,r.savedRenderer=null},getSummary:function(e,t,i,n){var r=!!n,o=r?n:e;if(t){if(Ext.isFunction(t))return r?o.aggregate(i,t):o.aggregate(t,null,!1,[i]);switch(t){case"count":return o.count();case"min":return o.min(i);case"max":return o.max(i);case"sum":return o.sum(i);case"average":return o.average(i);default:return""}}},getRawData:function(){var e=this.readerRawData;return e||this.view.getStore().getProxy().getReader().rawData},generateSummaryData:function(e){var t,i,n,r,o,a,s,l=this.summaryRows,d={},u={},c=this.remoteRoot;if(!l){if(!(n=this.getRawData()))return;t=(s=this.view.store).getProxy().getReader(),(i=Ext.apply({type:t.type},t.getConfig())).model=s.getModel().getSummaryModel(),c&&(i.summaryRootProperty=c),(l=(i=Ext.Factory.reader(i)).getSummaryRoot(n))&&(a=i.extractData(l,this.readDataOptions),this.summaryRows=l=a),i.destroy(),this.readerRawData=null}if(l)for(r=0,o=l.length;r<o;r++)d=l[r],e&&(u[d[e]]=d);return e?u:d},readSummaryRecord:function(e,t){var i=t.idProperty,n=null!=e[i];return e=new t(e).data,n||delete e[i],e},setSummaryData:function(e,t,i,n){var r=this.summaryData;n?(r[n]||(r[n]={}),r[n][t]=i):r[t]=i},destroy:function(){Ext.destroy(this.readerListeners),this.readerRawData=this.summaryRows=null,this.callParent()}}),Ext.define("Ext.grid.feature.GroupStore",{extend:"Ext.util.Observable",isStore:!0,defaultViewSize:100,isFeatureStore:!0,badGrouperKey:"[object Object]",constructor:function(e,t){this.callParent(),this.groupingFeature=e,this.bindStore(t),e.grid.isLocked||this.bindViewStoreListeners()},bindStore:function(e){var t=this;e&&t.store===e||(Ext.destroy(t.storeListeners),t.store=null),e&&(t.storeListeners=e.on({datachanged:t.onDataChanged,groupchange:t.onGroupChange,idchanged:t.onIdChanged,update:t.onUpdate,scope:t,destroyable:!0}),t.store=e,t.processStore(e))},bindViewStoreListeners:function(){var e=this.groupingFeature.view,t=e.getStoreListeners(this);t.scope=e,this.on(t)},each:function(e,t,i){this.store.each(e,t,i)},getGroupedRecords:function(e,t){var i,n,r,o,a,s,l=this.groupingFeature,d=e.getGroups(),u=d?d.length:0,c=e.getGroupField();if(!u)return e.getRange();for(r=0,s=[];r<u;r++){if(o=(i=d.getAt(r)).getGroupKey(),this.badGrouperKey===o&&(n=l.getGrouper(c)))return e.getGroups().remove(i),l.startCollapsed=t,e.group(n),null;a=l.getMetaGroup(i),t&&(a.isCollapsed=t),a.isCollapsed?s.push(a.placeholder):s.push.apply(s,i.items)}return s},processStore:function(e){var t,i,n,r=this.groupingFeature,o=this.data,a=!1;if(o||(this.data=o=new Ext.util.Collection({rootProperty:"data",extraKeys:{byInternalId:{property:"internalId",rootProperty:""}}})),e.getCount()){if(e.getId()===r.previousStoreId&&r.storeLoadCount===e.loadCount||(r.storeLoadCount=e.loadCount,r.previousStoreId=e.getId(),t=r.startCollapsed),n=this.getGroupedRecords(e,t)){for(a=(i=o.length)!==n.length;!a&&0<i--;)a=o.items[i]!==n[i];a&&(o.length&&o.clear(),n.length&&o.add(n))}}else o.length&&(o.clear(),a=!0);return a},isCollapsed:function(e){return this.groupingFeature.getCache()[e].isCollapsed},isLoading:function(){return!1},getData:function(){return this.data},getCount:function(){return this.data.getCount()},getTotalCount:function(){return this.data.getCount()},rangeCached:function(e,t){return t<this.getCount()},getRange:function(e,t,i){var n=this.data.getRange(e,Ext.isNumber(t)?t+1:t);return i&&i.callback&&i.callback.call(i.scope||this,n,e,t,i),n},getAt:function(e){return this.data.getAt(e)},getById:function(e){return this.store.getById(e)},getByInternalId:function(e){return this.store.getByInternalId(e)||this.data.byInternalId.get(e)},expandGroup:function(e){var t,i,n,r,o=this,a=o.groupingFeature,s=a.lockingPartner;"string"==typeof e&&(e=a.getGroup(e)),e&&(r=e.items,i=(t=a.getMetaGroup(e)).placeholder),r.length&&-1!==(n=o.data.indexOf(i))&&(t.isCollapsed=!1,s&&(s.getMetaGroup(e).isCollapsed=!1),o.isExpandingOrCollapsing=1,o.data.removeAt(n),o.data.insert(n,e.items),o.fireEvent("replace",o,n,[i],e.items),o.fireEvent("groupexpand",o,e),o.isExpandingOrCollapsing=0)},collapseGroup:function(e){var t,i,n,r,o=this,a=o.groupingFeature,s=a.lockingPartner;"string"==typeof e&&(e=a.getGroup(e)),e&&(r=e.items),r&&(n=r.length)&&-1!==(t=o.data.indexOf(r[0]))&&(a.getMetaGroup(e).isCollapsed=!0,s&&(s.getMetaGroup(e).isCollapsed=!0),o.isExpandingOrCollapsing=2,o.data.removeAt(t,n),o.data.insert(t,i=o.getGroupPlaceholder(e)),o.fireEvent("replace",o,t,r,[i]),o.fireEvent("groupcollapse",o,e),o.isExpandingOrCollapsing=0)},getGroupPlaceholder:function(e){var t=this.groupingFeature.getMetaGroup(e);if(!t.placeholder){var i,n=this.store,r=n.getModel(),o={},a=e.getGroupKey();o[n.getGroupField()]=a,(i=t.placeholder=new r(o,n.session,!0)).isNonData=i.isCollapsedPlaceholder=!0,i.groupKey=a}return t.placeholder},indexOf:function(e){var t=-1;return e&&!e.isCollapsedPlaceholder&&(t=this.data.indexOf(e)),t},contains:function(e){return-1<this.indexOf(e)},indexOfPlaceholder:function(e){return this.data.indexOf(e)},indexOfId:function(e){return this.data.indexOfKey(e)},indexOfTotal:function(e){return this.store.indexOf(e)},onIdChanged:function(e,t,i,n){this.data.updateKey(t,i)},onUpdate:function(e,t,i,n){var r,o,a,s,l,d=this,u=d.groupingFeature;if(e.isGrouped()){if(r=t.group=u.getGroup(t)){if(o=u.getMetaGroup(t),n&&Ext.Array.contains(n,u.getGroupField()))return d.onDataChanged(),void delete t.group;o.isCollapsed?d.fireEvent("update",d,o.placeholder):(Ext.suspendLayouts(),d.fireEvent("update",d,t,i,n),a=(l=r.items)[0],s=l[l.length-1],a!==t&&(a.group=r,d.fireEvent("update",d,a,"edit",n),delete a.group),s!==t&&s!==a&&u.showSummaryRow&&(s.group=r,d.fireEvent("update",d,s,"edit",n),delete s.group),Ext.resumeLayouts(!0))}delete t.group}else d.fireEvent("update",d,t,i,n)},onGroupChange:function(e,t){t||this.processStore(e),this.fireEvent("groupchange",e,t)},onDataChanged:function(){this.processStore(this.store)&&this.fireEvent("refresh",this)},destroy:function(){this.bindStore(null),Ext.destroy(this.data),this.groupingFeature=null,this.callParent()}}),Ext.define("Ext.grid.feature.Grouping",{extend:"Ext.grid.feature.Feature",alias:"feature.grouping",mixins:{summary:"Ext.grid.feature.AbstractSummary"},requires:["Ext.grid.feature.GroupStore"],eventPrefix:"group",eventSelector:"."+Ext.baseCSSPrefix+"grid-group-hd",refreshData:{},wrapsItem:!0,groupHeaderTpl:"{columnName}: {name}",depthToIndent:17,collapsedCls:Ext.baseCSSPrefix+"grid-group-collapsed",hdCollapsedCls:Ext.baseCSSPrefix+"grid-group-hd-collapsed",hdNotCollapsibleCls:Ext.baseCSSPrefix+"grid-group-hd-not-collapsible",collapsibleCls:Ext.baseCSSPrefix+"grid-group-hd-collapsible",ctCls:Ext.baseCSSPrefix+"group-hd-container",groupByText:"Group by this field",showGroupsText:"Show in groups",hideGroupedHeader:!1,startCollapsed:!1,enableGroupingMenu:!0,enableNoGroups:!0,collapsible:!0,groupers:null,expandTip:"Click to expand. CTRL key collapses all others",collapseTip:"Click to collapse. CTRL/click collapses all others",showSummaryRow:!1,outerTpl:["{%","if (!(this.groupingFeature.disabled || values.rows.length === 1 && values.rows[0].isSummary)) {","this.groupingFeature.setup(values.rows, values.view.rowValues);","}","this.nextTpl.applyOut(values, out, parent);","if (!(this.groupingFeature.disabled || values.rows.length === 1 && values.rows[0].isSummary)) {","this.groupingFeature.cleanup(values.rows, values.view.rowValues);","}","%}",{priority:200}],groupRowTpl:["{%","var me = this.groupingFeature,",'colspan = "colspan=" + values.columns.length;',"if (me.disabled || parent.rows.length === 1 && parent.rows[0].isSummary) {","values.needsWrap = false;","} else {","me.setupRowData(values.record, values.rowIndex, values);","}","%}",'<tpl if="needsWrap">','<tpl if="isFirstRow">',"{% values.view.renderColumnSizer(values, out); %}",'<tr data-boundView="{view.id}" data-recordId="{record.internalId:htmlEncode}" data-recordIndex="{[values.isCollapsedGroup ? -1 : values.recordIndex]}" class="{groupHeaderCls}">','<td class="{[me.ctCls]}" {[colspan]}>',"{%",'var groupTitleStyle = (!values.view.lockingPartner || (values.view.ownerCt === values.view.ownerCt.ownerLockable.lockedGrid) || (values.view.lockingPartner.headerCt.getVisibleGridColumns().length === 0)) ? "" : "visibility:hidden",','tooltip = "";',"if (me.collapsible) {","tooltip = Ext.String.format('data-qtip=\"{0}\"', values.isCollapsedGroup ? me.expandTip : me.collapseTip);","}","%}",'<div data-groupname="{groupName:htmlEncode}" class="',Ext.baseCSSPrefix,'grid-group-hd {collapsibleCls}" nottabindex="0" hidefocus="on" {ariaCellInnerAttr}>','<div class="',Ext.baseCSSPrefix,'grid-group-title" style="{[groupTitleStyle]}" {ariaGroupTitleAttr} {[tooltip]}>','{[values.groupHeaderTpl.apply(values.groupRenderInfo, parent) || "&#160;"]}',"</div>","</div>","</td>","</tr>","</tpl>",'<tpl if="!isCollapsedGroup">',"{%","values.itemClasses.length = 0;","this.nextTpl.applyOut(values, out, parent);","%}","</tpl>",'<tpl if="summaryRecord">',"{%me.outputSummaryRecord(values.summaryRecord, values, out, parent);%}","</tpl>","<tpl else>","{%this.nextTpl.applyOut(values, out, parent);%}","</tpl>",{priority:200,beginRowSync:function(e){var t=this.groupingFeature;e.add("header",t.eventSelector),e.add("summary",t.summaryRowSelector)},syncContent:function(e,t,i){e=Ext.fly(e,"syncDest"),t=Ext.fly(t,"syncSrc");var n=this.groupingFeature,r=e.down(n.eventSelector,!0),o=t.down(n.eventSelector,!0),a=e.down(n.summaryRowSelector,!0),s=t.down(n.summaryRowSelector,!0);r&&o&&Ext.fly(r).syncContent(o),a&&s&&(i?this.groupingFeature.view.updateColumns(a,s,i):Ext.fly(a).syncContent(s))}}],relayedEvents:["groupcollapse","groupexpand"],init:function(e){var t,i=this,n=i.view,r=i.gridStore=e.getStore();n.isGrouping=r.isGrouped(),i.mixins.summary.init.call(i),i.callParent([e]),n.headerCt.on({columnhide:i.onColumnHideShow,columnshow:i.onColumnHideShow,columnmove:i.onColumnMove,scope:i}),n.addTpl(Ext.XTemplate.getTpl(i,"outerTpl")).groupingFeature=i,n.addRowTpl(Ext.XTemplate.getTpl(i,"groupRowTpl")).groupingFeature=i,n.preserveScrollOnRefresh=!0,r.isBufferedStore?i.collapsible=!1:r.isEmptyStore||(t=i.createDataSource()),(e=e.ownerLockable||e).on("beforereconfigure",i.beforeReconfigure,i),n.isLockedView||(i.gridEventRelayers=e.relayEvents(n,i.relayedEvents)),n.on({afterrender:i.afterViewRender,scope:i,single:!0}),i.groupRenderInfo={},r.isEmptyStore||(t?t.on("groupchange",i.onGroupChange,i):i.setupStoreListeners(r),i.mixins.summary.bindStore.call(i,e,e.getStore()))},getGridStore:function(){return this.gridStore},indexOf:function(e){return e.isCollapsedPlaceholder?this.dataSource.indexOfPlaceholder(e):this.dataSource.indexOf(e)},indexOfPlaceholder:function(e){return this.dataSource.indexOfPlaceholder(e)},isInCollapsedGroup:function(e){var t,i=!1;return this.getGridStore().isGrouped()&&(t=this.getMetaGroup(e))&&(i=!(!t||!t.isCollapsed)),i},getCache:function(){var i,n=this.getId(),r={},e=this.getGridStore().getGroups();return e&&e.eachKey(function(e,t){i=t.$groupingContext||(t.$groupingContext={}),r[e]=i[n]}),r},invalidateCache:function(){var i,n=this.getId(),e=this.getGridStore().getGroups();e&&e.eachKey(function(e,t){(i=t.$groupingContext)&&(i[n]=null)})},vetoEvent:function(e,t,i,n){var r=!1;if("mouseover"!==n.type&&"mouseout"!==n.type&&"mouseenter"!==n.type&&"mouseleave"!==n.type&&n.getTarget(this.eventSelector)&&(r=!0),this.showSummaryRow&&!r&&n.getTarget(this.summaryRowSelector)&&(r=!0),r)return!1},enable:function(){var e,t=this.view,i=this.getGridStore(),n=this.hideGroupedHeader&&this.getGroupedHeader();t.isGrouping=!0,t.lockingPartner&&(t.lockingPartner.isGrouping=!0),this.callParent(),this.lastGrouper&&(i.group(this.lastGrouper),this.lastGrouper=null),n&&n.hide(),(e=this.view.headerCt.getMenu().down("#groupToggleMenuItem"))&&e.setChecked(!0,!0)},disable:function(){var e,t=this.view,i=this.getGridStore(),n=this.hideGroupedHeader&&this.getGroupedHeader(),r=i.getGrouper();t.isGrouping=!1,t.lockingPartner&&(t.lockingPartner.isGrouping=!1),this.callParent(),r&&(this.lastGrouper=r,i.clearGrouping()),n&&n.show(),(e=this.view.headerCt.getMenu().down("#groupToggleMenuItem"))&&(e.setChecked(!1,!0),e.disable())},afterViewRender:function(){var e=this;e.view.on({scope:e,groupmousedown:e.onGroupMousedown,groupclick:e.onGroupClick}),e.enableGroupingMenu&&e.injectGroupingMenu(),e.pruneGroupedHeader(),e.lastGrouper=e.getGridStore().getGrouper(),e.disabled&&e.disable()},injectGroupingMenu:function(){var e=this.view.headerCt;e.showMenuBy=Ext.Function.createInterceptor(e.showMenuBy,this.showMenuBy),e.getMenuItems=this.getMenuItems()},onColumnHideShow:function(e,t){var i,n,r,o=this.view,a=o.headerCt.getMenu(),s=a.activeHeader,l=a.down("#groupMenuItem"),d=this.grid.getVisibleColumnManager().getColumns().length;if(s&&l&&l[!1===s.groupable||!s.dataIndex||this.view.headerCt.getVisibleGridColumns().length<2?"disable":"enable"](),o.rendered&&d)for(r=0,n=(i=o.el.query("."+this.ctCls)).length;r<n;++r)i[r].colSpan=d},onColumnMove:function(){var e,t,i,n,r,o=this.view;if(o.getStore().isGrouped()){for(e in t=this.getCache(),Ext.suspendLayouts(),t)(i=this.getGroup(e))&&(n=i.first(),r=i.last(),this.getMetaGroup(i).isCollapsed&&(n=r=this.dataSource.getGroupPlaceholder(e)),o.refreshNode(n),this.showSummaryRow&&r!==n&&o.refreshNode(r));Ext.resumeLayouts(!0)}},showMenuBy:function(e,t,i){var n=this.getMenu(),r=n.down("#groupMenuItem"),o=!1===i.groupable||!i.dataIndex||this.view.headerCt.getVisibleGridColumns().length<2?"disable":"enable",a=n.down("#groupToggleMenuItem"),s=this.grid.getStore().isGrouped();r[o](),a&&(a.setChecked(s,!0),a[s?"enable":"disable"]())},getMenuItems:function(){var t=this,i=t.groupByText,n=t.disabled||!t.getGroupField(),r=t.showGroupsText,o=t.enableNoGroups,a=t.view.headerCt.getMenuItems;return function(){var e=a.call(this);return e.push("-",{iconCls:Ext.baseCSSPrefix+"group-by-icon",itemId:"groupMenuItem",text:i,handler:t.onGroupMenuItemClick,scope:t}),o&&e.push({itemId:"groupToggleMenuItem",text:r,checked:!n,checkHandler:t.onGroupToggleMenuItemClick,scope:t}),e}},onGroupMenuItemClick:function(e,t){var i=e.parentMenu.activeHeader,n=this.view,r=this.getGridStore();this.disabled&&(this.lastGrouper=null,this.block(),this.enable(),this.unblock()),n.isGrouping=!0,r.group(this.getGrouper(i.dataIndex)||i.dataIndex),this.pruneGroupedHeader()},block:function(e){this.blockRefresh=this.view.blockRefresh=!0,this.lockingPartner&&!e&&this.lockingPartner.block(!0)},unblock:function(e){this.blockRefresh=this.view.blockRefresh=!1,this.lockingPartner&&!e&&this.lockingPartner.unblock(!0)},onGroupToggleMenuItemClick:function(e,t){this[t?"enable":"disable"]()},pruneGroupedHeader:function(){var e=this.getGroupedHeader();this.hideGroupedHeader&&e&&(Ext.suspendLayouts(),this.prunedHeader&&this.prunedHeader!==e&&this.prunedHeader.show(),(this.prunedHeader=e).rendered&&e.hide(),Ext.resumeLayouts(!0))},getHeaderNode:function(e){var t,i,n,r,o=this.view.getEl();if(o)for(i=0,n=(t=o.query(this.eventSelector)).length;i<n;++i)if((r=t[i]).getAttribute("data-groupName")===e)return r},getGroup:function(e){var t,i,n=this.getGridStore(),r=e;return n.isGrouped()&&(e.isModel&&(e=e.get(n.getGroupField())),"string"!=typeof e&&(e=n.getGrouper().getGroupString(r)),i=n.isBufferedStore?(t=n.groups||(n.groups={}))[e]||(t[e]={getGroupKey:function(){return e}}):n.getGroups().getByKey(e)),i},getGrouper:function(t){var e=this.groupers;return e?Ext.Array.findBy(e,function(e){return e.property===t}):null},getGroupField:function(){return this.getGridStore().getGroupField()},getMetaGroup:function(e){var t,i,n,r,o,a,s,l,d=this.getId();return!e.isModel&&"string"!=typeof e||(e=this.getGroup(e)),e&&(i=e.getGroupKey(),(n=(l=e.$groupingContext||(e.$groupingContext={}))[d])||(r=(t=this.getGridStore()).getModel(),(o={})[this.getGroupField()]=i,(a=new r(o,t.session,!0)).isNonData=a.isCollapsedPlaceholder=!0,a.groupKey=i,(s=new Ext.data.Model(o)).isNonData=s.isSummary=!0,s.groupKey=i,n=l[d]={placeholder:a,isCollapsed:!1,lastGroup:null,lastGroupGeneration:null,lastFilterGeneration:null,aggregateRecord:s})),n},isExpanded:function(e){return!this.getMetaGroup(e).isCollapsed},expand:function(e,t){this.doCollapseExpand(!1,e,t)},expandAll:function(){var e,t=this.getCache(),i=this.lockingPartner;for(e in t)t.hasOwnProperty(e)&&(t[e].isCollapsed=!1);for(e in Ext.suspendLayouts(),this.dataSource.onDataChanged(),Ext.resumeLayouts(!0),t)t.hasOwnProperty(e)&&(this.afterCollapseExpand(!1,e),i&&i.afterCollapseExpand(!1,e))},collapse:function(e,t){this.doCollapseExpand(!0,e,t)},isAllCollapsed:function(){var e,t=this.getCache();for(e in t)if(t.hasOwnProperty(e)&&!t[e].isCollapsed)return!1;return!0},isAllExpanded:function(){var e,t=this.getCache();for(e in t)if(t.hasOwnProperty(e)&&t[e].isCollapsed)return!1;return!0},collapseAll:function(){var e,t=this.getCache(),i=this.lockingPartner;for(e in t)t.hasOwnProperty(e)&&(t[e].isCollapsed=!0);for(e in Ext.suspendLayouts(),this.dataSource.onDataChanged(),Ext.resumeLayouts(!0),t)t.hasOwnProperty(e)&&(this.afterCollapseExpand(!0,e),i&&i.afterCollapseExpand(!0,e))},doCollapseExpand:function(e,t,i){var n=this.lockingPartner,r=this.getGroup(t);!0===i&&(i={focus:!0}),this.getMetaGroup(r).isCollapsed!==e&&(this.isExpandingOrCollapsing=!0,Ext.suspendLayouts(),e?this.dataSource.collapseGroup(r):this.dataSource.expandGroup(r),Ext.resumeLayouts(!0),this.afterCollapseExpand(e,t,i),n&&(i&&i.focus&&((i=Ext.Object.chain(i)).focus=!1),n.afterCollapseExpand(e,t,i)),this.isExpandingOrCollapsing=!1)},afterCollapseExpand:function(e,t,i){var n,r,o=this.view;n=this.getHeaderNode(t),o.fireEvent(e?"groupcollapse":"groupexpand",o,n,t),i&&(r=e?(i.focus=!1,this.getMetaGroup(t).placeholder):this.getGroup(t).getAt(0),this.grid.ensureVisible(r,i))},onGroupChange:function(e,t){t?this.lastGrouper=t:this.view.ownerGrid.getView().refreshView()},getMenuItem:function(e){var t=this.view,i=t.headerCt.down("gridcolumn[dataIndex="+e+"]"),n=t.headerCt.getMenu();return i?n.down("menuitem[headerId="+i.id+"]"):null},onGroupKey:function(e,t){var i=this.getGroupName(t.target);i&&this.onGroupClick(this.view,t.target,i,t)},onGroupMousedown:function(e,t,i,n){n.preventDefault()},onGroupClick:function(e,t,i,n){var r,o,a;if(this.collapsible)if(r=this.getCache(),o=!this.isExpanded(i),n.ctrlKey){for(a in Ext.suspendLayouts(),r)a===i?o&&this.expand(i):r[a].isCollapsed||this.doCollapseExpand(!0,a,!1);Ext.resumeLayouts(!0)}else this[o?"expand":"collapse"](i)},setupRowData:function(e,t,i){var n,r,o,a,s,l=this,d=i.recordIndex,u=l.refreshData,c=l.groupRenderInfo,h=u.header,f=u.groupField,g=l.getGridStore(),p=l.view.dataSource.isBufferedStore,m=l.grid.columnManager.getHeaderByDataIndex(f),x=!(!m||!m.renderer),y=e.groupKey,v=e.isCollapsedPlaceholder&&Ext.isDefined(y)?l.getGroup(y):e.group;if(i.isCollapsedGroup=!1,i.summaryRecord=i.groupHeaderCls=null,u.doGrouping){if(n=g.getGrouper(),e.isCollapsedPlaceholder)return r=v.getGroupKey(),e=(s=v.items)[0],i.isFirstRow=i.isLastRow=!0,i.groupHeaderCls=l.hdCollapsedCls,i.isCollapsedGroup=i.needsWrap=!0,i.groupName=r,(i.groupRenderInfo=c).groupField=f,c.groupValue=e.get(f),c.name=c.renderedGroupValue=x?m.renderer(c.groupValue,{},e):r,c.columnName=h?h.text:f,i.collapsibleCls=l.collapsible?l.collapsibleCls:l.hdNotCollapsibleCls,c.rows=c.children=s,void(l.showSummaryRow&&(i.summaryRecord=u.summaryData[r]));r=n.getGroupString(e),v?(s=v.items,i.isFirstRow=e===s[0],i.isLastRow=e===s[s.length-1]):(i.isFirstRow=0===d,i.isFirstRow||(o=g.getAt(d-1))&&(i.isFirstRow=!o.isEqual(n.getGroupString(o),r)),i.isLastRow=d===(p?g.getTotalCount():g.getCount())-1,i.isLastRow||(a=g.getAt(d+1))&&(i.isLastRow=!a.isEqual(n.getGroupString(a),r))),i.isFirstRow&&(c.groupField=f,c.name=c.renderedGroupValue=x?m.renderer(e.get(f),{},e):r,c.groupValue=e.get(f),c.columnName=h?h.text:f,i.collapsibleCls=l.collapsible?l.collapsibleCls:l.hdNotCollapsibleCls,i.groupName=r,l.isExpanded(r)||(i.itemClasses.push(l.hdCollapsedCls),i.isCollapsedGroup=!0),c.rows=c.children=p?[]:l.getRecordGroup(e).items,i.groupRenderInfo=c),i.isLastRow&&l.showSummaryRow&&(i.summaryRecord=u.summaryData[r],i.itemClasses.push(Ext.baseCSSPrefix+"grid-group-last")),i.needsWrap=i.isFirstRow||i.summaryRecord}},setup:function(e,t){var i=this.refreshData,n=t.view,r=n.isGrouping=!this.disabled&&this.getGridStore().isGrouped(),o=n.bufferedRenderer;this.skippedRows=0,o&&(o.variableRowHeight=n.hasVariableRowHeight()||r),i.groupField=this.getGroupField(),i.header=this.getGroupedHeader(i.groupField),i.doGrouping=r,t.groupHeaderTpl=Ext.XTemplate.getTpl(this,"groupHeaderTpl"),r&&this.showSummaryRow&&(i.summaryData=this.generateSummaryData())},cleanup:function(e,t){var i=this.refreshData;t.groupRenderInfo=t.groupHeaderTpl=t.isFirstRow=null,i.groupField=i.header=i.summaryData=null},generateSummaryData:function(){var e,t,i,n,r,o,a,s=this,l=s.getGridStore(),d=l.getFilters(),u=l.getGroups().items,c=s.getGroupField(),h=s.lockingPartner,f=s.updateSummaryRow,g={},p=s.view.ownerCt,m=s.didColumnsChange();for((s.remoteRoot||l.getProxy().getReader().getSummaryRootProperty())&&(o=!!(a=s.mixins.summary.generateSummaryData.call(s,c))),e=0,t=u.length;e<t;++e)i=u[e],n=s.getMetaGroup(i),f||o||l.updating||s.grid.reconfiguring||m||s.didGroupChange(i,n,d)?(r=s.populateRecord(i,n,a),h&&p!==p.ownerLockable.normalGrid||(n.lastGroup=i,n.lastGroupGeneration=i.generation,n.lastFilterGeneration=d.generation)):r=n.aggregateRecord,g[i.getGroupKey()]=r;return s.updateSummaryRow=!1,g},getGroupName:function(e){var t,i,n=this.view,r=this.eventSelector;if((t=Ext.fly(e).findParent(r))||(i=Ext.fly(e).findParent(n.itemSelector))&&(t=i.down(r,!0)),t)return t.getAttribute("data-groupname")},getRecordGroup:function(e){var t=this.getGridStore();if(t.getGrouper())return t.getGroups().getItemGroup(e)},getGroupedHeader:function(e){var t,i,n=this.view.headerCt,r=this.lockingPartner;return(e=e||this.getGroupField())&&(t="[dataIndex="+e+"]",!(i=n.down(t))&&r&&(i=r.view.headerCt.down(t))),i||null},getFireEventArgs:function(e,t,i,n){return[e,t,i,this.getGroupName(i),n]},destroy:function(){var e=this,t=e.dataSource;Ext.destroy(e.gridEventRelayers),e.gridEventRelayers=null,e.storeListeners=Ext.destroy(e.storeListeners),e.view=e.prunedHeader=e.grid=e.dataSource=e.groupers=null,t&&!t.destroyed&&(t.bindStore(null),Ext.destroy(t)),e.callParent()},beforeReconfigure:function(e,t,i,n,r){var o,a=this,s=a.view,l=a.dataSource,d=s.bufferedRenderer;t&&t!==n&&(o=(a.gridStore=t).isBufferedStore,a.storeListeners&&Ext.destroy(a.storeListeners),n.isEmptyStore||o===n.isBufferedStore||Ext.raise("Cannot reconfigure grouping switching between buffered and non-buffered stores"),l||(o?(a.collapsible=!1,a.setupStoreListeners(t)):((l=a.createDataSource()).on("groupchange",a.onGroupChange,a),d&&d.bindStore(l))),o||(s.isGrouping=!!t.getGrouper(),l.bindStore(t)),a.mixins.summary.bindStore.call(a,e,t))},createDataSource:function(){var e,t=this.view,i=this.lockingPartner;return i&&i.dataSource?this.dataSource=t.dataSource=e=i.dataSource:this.dataSource=t.dataSource=e=new Ext.grid.feature.GroupStore(this,this.gridStore),e},populateRecord:function(e,t,i){var n,r,o,a,s,l,d=this.grid.ownerLockable?this.grid.ownerLockable.view:this.view,u=this.getGridStore(),c=t.aggregateRecord,h=d.headerCt.getGridColumns(),f=h.length,g=e.getGroupKey();if(c.beginEdit(),i)for(r in n=i[g])n.hasOwnProperty(r)&&r!==c.idProperty&&c.set(r,n[r]);for(o=0;o<f;++o)s=(a=h[o]).dataIndex||a.getItemId(),i?l=c.get(a.dataIndex):(l=this.getSummary(u,a.summaryType,s,e),c.set(s,l)),this.setSummaryData(c,a.getItemId(),l,g);return c.ownerGroup=g,c.endEdit(!0),c.commit(),c},privates:{didGroupChange:function(e,t,i){var n=!0;return e===t.lastGroup&&(n=t.lastGroupGeneration!==e.generation||t.lastFilterGeneration!==i.generation),n},didColumnsChange:function(){var e=this.view.headerCt.items.generation!==this.lastHeaderCtGeneration;return this.lastHeaderCtGeneration=this.view.headerCt.items.generation,e},setupStoreListeners:function(e){this.storeListeners=e.on({groupchange:this.onGroupChange,scope:this,destroyable:!0})}}}),Ext.define("Ext.grid.feature.GroupingSummary",{extend:"Ext.grid.feature.Grouping",alias:"feature.groupingsummary",showSummaryRow:!0}),Ext.define("Ext.grid.feature.RowBody",{extend:"Ext.grid.feature.Feature",alias:"feature.rowbody",rowBodyCls:Ext.baseCSSPrefix+"grid-row-body",innerSelector:"."+Ext.baseCSSPrefix+"grid-rowbody",rowBodyHiddenCls:Ext.baseCSSPrefix+"grid-row-body-hidden",rowBodyTdSelector:"td."+Ext.baseCSSPrefix+"grid-cell-rowbody",eventPrefix:"rowbody",eventSelector:"tr."+Ext.baseCSSPrefix+"grid-rowbody-tr",bodyBefore:!1,outerTpl:{fn:function(e,t,i){var n=this.rowBody,r=t.view,o=r.getVisibleColumnManager().getColumns(),a=r.rowValues,s=n.rowExpander&&n.rowExpander.expanderColumn;a.rowBodyColspan=o.length,a.rowBodyCls=n.rowBodyCls,a.rowIdCls=n.rowIdCls,s&&s.getView()===r?(r.grid.removeCls(Ext.baseCSSPrefix+"grid-hide-row-expander-spacer"),a.addSpacerCell=!0,--a.rowBodyColspan,a.spacerCellCls=Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+"grid-row-expander-spacer "+Ext.baseCSSPrefix+"grid-cell-special"):(r.grid.addCls(Ext.baseCSSPrefix+"grid-hide-row-expander-spacer"),a.addSpacerCell=!1),this.nextTpl.applyOut(t,e,i),a.rowBodyCls=a.rowBodyColspan=a.rowBody=null},priority:100},extraRowTpl:["{%","if(this.rowBody.bodyBefore) {","values.view.renderColumnSizer(values, out);","} else {","this.nextTpl.applyOut(values, out, parent);","}","values.view.rowBodyFeature.setupRowData(values.record, values.recordIndex, values);","%}",'<tr class="'+Ext.baseCSSPrefix+'grid-rowbody-tr {rowBodyCls} {rowIdCls}" {ariaRowAttr}>','<tpl if="addSpacerCell">','<td class="{spacerCellCls}"></td>',"</tpl>",'<td class="'+Ext.baseCSSPrefix+"grid-td "+Ext.baseCSSPrefix+'grid-cell-rowbody" colspan="{rowBodyColspan}" {ariaCellAttr}>','<div class="'+Ext.baseCSSPrefix+'grid-rowbody {rowBodyDivCls}" {ariaCellInnerAttr}>{rowBody}</div>',"</td>","</tr>","{%","if(this.rowBody.bodyBefore) {","this.nextTpl.applyOut(values, out, parent);","}","%}",{priority:100,beginRowSync:function(e){e.add("rowBody",this.owner.eventSelector)},syncContent:function(e,t,i){var n,r,o=this.rowBody;o.doSync&&(n=Ext.fly(e).down(o.eventSelector,!0))&&(r=Ext.fly(t).down(o.eventSelector,!0))&&Ext.fly(n).syncContent(r)}}],doSync:!0,init:function(e){var t=this.view=e.getView();!this.rowExpander&&e.findPlugin("rowexpander")&&Ext.raise("The RowBody feature shouldn't be manually added when the gridhas a RowExpander."),e.variableRowHeight=t.variableRowHeight=!0,t.rowBodyFeature=this,t.headerCt.on({columnschanged:this.onColumnsChanged,scope:this}),t.addTpl(this.outerTpl).rowBody=this,(t.addRowTpl(Ext.XTemplate.getTpl(this,"extraRowTpl")).rowBody=this).callParent(arguments)},getSelectedRow:function(e,t){var i=e.getNode(t);return i?Ext.fly(i).down(this.eventSelector):null},onColumnsChanged:function(e){var t,i,n,r,o=this.view;if(o.rendered)for(t=o.el.query(this.rowBodyTdSelector),i=e.getVisibleGridColumns().length,n=t.length,r=0;r<n;++r)t[r].setAttribute("colSpan",i)},setupRowData:function(e,t,i){this.getAdditionalData&&Ext.apply(i,this.getAdditionalData(e.data,t,e,i))}}),Ext.define("Ext.grid.feature.Summary",{extend:"Ext.grid.feature.AbstractSummary",alias:"feature.summary",dock:void 0,summaryItemCls:Ext.baseCSSPrefix+"grid-row-summary-item",dockedSummaryCls:Ext.baseCSSPrefix+"docked-summary",summaryRowCls:Ext.baseCSSPrefix+"grid-row-summary "+Ext.baseCSSPrefix+"grid-row-total",summaryRowSelector:"."+Ext.baseCSSPrefix+"grid-row-summary."+Ext.baseCSSPrefix+"grid-row-total",panelBodyCls:Ext.baseCSSPrefix+"summary-",hasFeatureEvent:!1,fullSummaryTpl:{fn:function(e,t,i){var n=this.summaryFeature,r=n.summaryRecord,o=t.view,a=o.bufferedRenderer;this.nextTpl.applyOut(t,e,i),!n.disabled&&n.showSummaryRow&&!o.addingRows&&o.store.isLast(t.record)&&(a&&!n.dock&&(a.variableRowHeight=!0),n.outputSummaryRecord(r&&r.isModel?r:n.createSummaryRecord(o),t,e,i))},priority:300,beginRowSync:function(e){e.add("fullSummary",this.summaryFeature.summaryRowSelector)},syncContent:function(e,t,i){e=Ext.fly(e,"syncDest"),t=Ext.fly(t,"syncSrc");var n=this.summaryFeature.summaryRowSelector,r=e.down(n,!0),o=t.down(n,!0);r&&o&&(i?this.summaryFeature.view.updateColumns(r,o,i):Ext.fly(r).syncContent(o))}},init:function(t){var i=this,n=i.view,r=i.dock;i.callParent([t]),r?(t.addBodyCls(i.panelBodyCls+r),t.headerCt.on({add:i.onStoreUpdate,afterlayout:i.onStoreUpdate,remove:i.onStoreUpdate,scope:i}),t.on({beforerender:function(){var e=[i.summaryTableCls];n.columnLines&&(e[e.length]=n.ownerCt.colLinesCls),i.summaryBar=t.addDocked({childEls:["innerCt","item"],renderTpl:['<div id="{id}-innerCt" data-ref="innerCt" role="presentation">','<table id="{id}-item" data-ref="item" cellPadding="0" cellSpacing="0" class="'+e.join(" ")+'">','<tr class="'+i.summaryRowCls+'"></tr>',"</table>","</div>"],scrollable:{x:!1,y:!1},hidden:!i.showSummaryRow,itemId:"summaryBar",cls:[i.dockedSummaryCls,i.dockedSummaryCls+"-"+r],xtype:"component",dock:r,weight:1e7})[0]},afterrender:function(){t.getView().getScrollable().addPartner(i.summaryBar.getScrollable(),"x"),i.onStoreUpdate(),i.columnSizer=i.summaryBar.el},single:!0})):t.bufferedRenderer?(i.wrapsItem=!0,n.addRowTpl(i.fullSummaryTpl).summaryFeature=i,n.on("refresh",i.onViewRefresh,i)):(i.wrapsItem=!1,i.view.addFooterFn(i.renderSummaryRow)),t.headerCt.on({afterlayout:i.afterHeaderCtLayout,scope:i}),t.ownerGrid.on({beforereconfigure:i.onBeforeReconfigure,columnmove:i.onStoreUpdate,scope:i}),i.bindStore(t,t.getStore())},onBeforeReconfigure:function(e,t){this.summaryRecord=null,t&&this.bindStore(e,t)},bindStore:function(e,t){Ext.destroy(this.storeListeners),this.storeListeners=t.on({scope:this,destroyable:!0,update:this.onStoreUpdate,datachanged:this.onStoreUpdate}),this.callParent([e,t])},renderSummaryRow:function(e,t,i){var n,r=e.view,o=r.findFeature("summary");o.disabled||!o.showSummaryRow||r.addingRows||r.updatingRows||(n=o.summaryRecord,t.push('<table cellpadding="0" cellspacing="0" class="'+o.summaryItemCls+'" style="table-layout: fixed; width: 100%;">'),o.outputSummaryRecord(n&&n.isModel?n:o.createSummaryRecord(r),e,t,i),t.push("</table>"))},toggleSummaryRow:function(e,t){var i=this.summaryBar;this.callParent([e,t]),i&&(i.setVisible(this.showSummaryRow),this.onViewScroll())},getSummaryBar:function(){return this.summaryBar},getSummaryRowPlaceholder:function(e){var t,i=this.summaryItemCls;return(t=Ext.fly(e.getNodeContainer()))?t.down("."+i,!0)||t.createChild({tag:"table",cellpadding:0,cellspacing:0,cls:i,style:"table-layout: fixed; width: 100%",children:[{tag:"tbody"}]},!1,!0):null},vetoEvent:function(e,t,i,n){return!n.getTarget(this.summaryRowSelector)},onViewScroll:function(){this.summaryBar.setScrollX(this.view.getScrollX())},onViewRefresh:function(e){var t;this.disabled||!this.showSummaryRow||e.all.getCount()||(t=this.createSummaryRecord(e),this.getSummaryRowPlaceholder(e).tBodies[0].appendChild(e.createRowElement(t,-1).querySelector(this.summaryRowSelector)))},createSummaryRecord:function(e){var t,i,n,r,o=e.headerCt.getGridColumns(),a=this.remoteRoot,s=this.summaryRecord||(this.summaryRecord=new Ext.data.Model({id:e.id+"-summary-record"})),l=o.length;if(s.beginEdit(),a)(r=this.generateSummaryData())&&s.set(r);else for(t=0;t<l;t++)n=(i=o[t]).dataIndex||i.getItemId(),r=this.getSummary(e.store,i.summaryType,n),s.set(n,r),this.setSummaryData(s,i.getItemId(),r);return s.endEdit(!0),s.commit(!0),s.isSummary=!0,s},onStoreUpdate:function(){var e,t,i,n,r=this.view,o=this.summaryRowSelector,a=this.dock;r.rendered&&(e=this.createSummaryRecord(r),(t=Ext.fly(r.createRowElement(e,-1)).down(o,!0))&&(a?(i=(n=this.summaryBar.item.dom.firstChild).firstChild,n.insertBefore(t,i),n.removeChild(i)):((n=(i=r.el.down(o,!0))&&i.parentNode)&&n.removeChild(i),(n=(n=r.getRow(r.all.last()))?n.parentElement:(n=this.getSummaryRowPlaceholder(r))&&n.tBodies&&n.tBodies[0])&&n.appendChild(t))))},afterHeaderCtLayout:function(e){var t,i,n,r,o,a,s=this.view,l=s.getVisibleColumnManager().getColumns(),d=l.length;if(this.showSummaryRow&&s.refreshCounter&&(this.dock?(n=this.summaryBar.el,o=e.getTableWidth(),a=this.summaryBar.innerCt,this.summaryBar.item.setWidth(o),e.tooNarrow&&(o+=Ext.scrollbar.width()),a.setWidth(o)):n=Ext.fly(Ext.fly(s.getNodeContainer()).down("."+this.summaryItemCls,!0)),n))for(t=0;t<d;t++)i=l[t],(r=n.down(s.getCellSelector(i),!0))&&Ext.fly(r).setWidth(i.width||(i.lastBox?i.lastBox.width:100))},destroy:function(){this.summaryRecord=this.storeListeners=Ext.destroy(this.storeListeners),this.callParent()}}),Ext.define("Ext.menu.Item",{extend:"Ext.Component",alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",isMenuItem:!0,mixins:["Ext.mixin.Queryable"],requires:["Ext.Glyph"],config:{glyph:null},activated:!1,activeCls:Ext.baseCSSPrefix+"menu-item-active",clickHideDelay:0,destroyMenu:!0,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",emptyText:" ",hideOnClick:!0,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:!0,ariaRole:"menuitem",ariaEl:"itemEl",baseCls:Ext.baseCSSPrefix+"menu-item",arrowCls:Ext.baseCSSPrefix+"menu-item-arrow",baseIconCls:Ext.baseCSSPrefix+"menu-item-icon",textCls:Ext.baseCSSPrefix+"menu-item-text",indentCls:Ext.baseCSSPrefix+"menu-item-indent",indentNoSeparatorCls:Ext.baseCSSPrefix+"menu-item-indent-no-separator",indentRightIconCls:Ext.baseCSSPrefix+"menu-item-indent-right-icon",indentRightArrowCls:Ext.baseCSSPrefix+"menu-item-indent-right-arrow",linkCls:Ext.baseCSSPrefix+"menu-item-link",linkHrefCls:Ext.baseCSSPrefix+"menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="ariaAttributes"> {$}="{.}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on" role="presentation">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph"><tpl if="glyphFontFamily">font-family:{glyphFontFamily};</tpl>">{glyph}<tpl else>"></tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',autoEl:{role:"presentation"},maskOnDisable:!1,iconAlign:"left",initComponent:function(){var e,t=this,i=t.cls?[t.cls]:[];t.hasOwnProperty("canActivate")&&(t.focusable=t.canActivate),t.plain&&i.push(Ext.baseCSSPrefix+"menu-item-plain"),i.length&&(t.cls=i.join(" ")),t.menu&&(e=t.menu,t.menu=null,t.setMenu(e)),t.callParent(arguments)},canFocus:function(){return this.focusable&&this.rendered&&!1!==this.canActivate&&!this.destroying&&!this.destroyed&&this.isVisible(!0)},onFocus:function(e){this.callParent([e]),this.plain||this.addCls(this.activeCls),this.activated=!0,this.hasListeners.activate&&this.fireEvent("activate",this)},onFocusLeave:function(e){this.callParent([e]),this.plain||this.removeCls(this.activeCls),this.doHideMenu(),this.activated=!1,this.hasListeners.deactivate&&this.fireEvent("deactivate",this)},doHideMenu:function(){var e=this.menu;this.cancelDeferExpand(),e&&e.isVisible()&&e.hide()},deferHideParentMenus:function(){var e;for(e=this.getRefOwner();e&&(e.isMenu&&e.floating||e.isMenuItem);e=e.getRefOwner())e.isMenu&&e.hide()},expandMenu:function(e,t){var i=this;!i.disabled&&i.activated&&i.menu&&(i.hideOnClick=!1,i.cancelDeferHide(),0===(t=null==t?i.menuExpandDelay:t)?i.doExpandMenu(e):(i.cancelDeferExpand(),i.expandMenuTimer=Ext.defer(i.doExpandMenu,t,i,[e])))},doExpandMenu:function(e){var t=this.menu;t.isVisible()?e&&"keydown"===e.type&&t.focus():((this.parentMenu.activeChild=t).ownerCmp=this,t.parentMenu=this.parentMenu,t.constrainTo=document.body,t.autoFocus=!e||!e.pointerType,t.showBy(this,this.menuAlign))},getRefItems:function(e){var t,i=this.menu;return i&&(t=i.getRefItems(e)).unshift(i),t||[]},getValue:function(){return this.value},hideMenu:function(e){this.menu&&(this.cancelDeferExpand(),this.hideMenuTimer=Ext.defer(this.doHideMenu,Ext.isNumber(e)?e:this.menuHideDelay,this))},onClick:function(e){var t,i,n=this,r=n.clickHideDelay,o=e.browserEvent;return!((!n.href||n.disabled)&&(e.stopEvent(),n.disabled))&&(n.disabled||n.handlingClick||(n.hideOnClick&&!n.menu&&(r?n.deferHideParentMenusTimer=Ext.defer(n.deferHideParentMenus,r,n):n.deferHideParentMenus()),t=n.fireEvent("click",n,e),n.destroyed||(!1!==t&&n.handler&&Ext.callback(n.handler,n.scope,[n,e],0,n),n.destroyed))?void 0:(i=Ext.isIE9m?!1===o.returnValue:!!o.defaultPrevented,n.href&&"click"!==e.type&&!i&&(n.handlingClick=!0,n.itemEl.dom.click(),n.handlingClick=!1),n.hideOnClick||n.hasFocus||n.focus(),t))},onRemoved:function(){this.activated&&this.parentMenu.activeItem===this&&this.parentMenu.deactivateActiveItem(),this.callParent(arguments),this.parentMenu=this.ownerCmp=null},doDestroy:function(){this.rendered&&this.clearTip(),this.cancelDeferExpand(),this.cancelDeferHide(),Ext.undefer(this.deferHideParentMenusTimer),this.setMenu(null),this.callParent()},beforeRender:function(){var e,t=this,i=t.glyph,n=!!(t.icon||t.iconCls||i),r=!!t.menu,o="right"===t.iconAlign&&!r,a=t.isMenuCheckItem,s=[],l=t.ownerCt,d=l.plain;t.plain&&(t.ariaEl="el"),t.callParent(),n&&r&&t.showCheckbox&&(n=!1),i&&(e=i.fontFamily,i=i.character),(!d||n&&!o||a)&&(l.showSeparator&&!d?s.push(t.indentCls):s.push(t.indentNoSeparatorCls)),r?s.push(t.indentRightArrowCls):n&&(o||a)&&s.push(t.indentRightIconCls),Ext.applyIf(t.renderData,{hasHref:!!t.href,href:t.href||"#",hrefTarget:t.hrefTarget,icon:t.icon,iconCls:t.iconCls,glyph:i,glyphCls:i?Ext.baseCSSPrefix+"menu-item-glyph":void 0,glyphFontFamily:e,hasIcon:n,hasMenu:r,indent:!d||n||a,isCheckItem:a,rightIcon:o,plain:t.plain,text:t.getDisplayText(),arrowCls:t.arrowCls,baseIconCls:t.baseIconCls,textCls:t.textCls,indentCls:s.join(" "),linkCls:t.linkCls,linkHrefCls:t.linkHrefCls,groupCls:t.group?t.groupCls:"",tabIndex:t.tabIndex})},onRender:function(){this.callParent(arguments),this.tooltip&&this.setTooltip(this.tooltip,!0)},getMenu:function(){return this.menu||null},setMenu:function(e,t){var i,n,r=this,o=r.menu,a=r.arrowEl,s=r.ariaEl.dom;o&&(o.ownerCmp=o.parentMenu=null,(!0===t||!1!==t&&r.destroyMenu)&&Ext.destroy(o),s?(s.removeAttribute("aria-haspopup"),s.removeAttribute("aria-owns")):(delete(i=r.ariaRenderAttributes||(r.ariaRenderAttributes={}))["aria-haspopup"],delete i["aria-owns"])),e?(n=e.isMenu,(e=r.menu=Ext.menu.Manager.get(e,{ownerCmp:r,focusOnToFront:!1})).setOwnerCmp(r,n),s?(s.setAttribute("aria-haspopup",!0),s.setAttribute("aria-owns",e.id)):((i=r.ariaRenderAttributes||(r.ariaRenderAttributes={}))["aria-haspopup"]=!0,i["aria-owns"]=e.id)):e=r.menu=null,e&&r.rendered&&!r.destroying&&a&&a[e?"addCls":"removeCls"](r.arrowCls)},setHandler:function(e,t){this.handler=e||null,this.scope=t},setIcon:function(e){var t=this.iconEl,i=this.icon;this.glyph&&this.setGlyph(null),t&&t.setStyle("background-image",e?"url("+e+")":""),this.icon=e,this.fireEvent("iconchange",this,i,e)},setIconCls:function(e){var t=this.iconEl,i=this.iconCls;this.glyph&&this.setGlyph(null),t&&(t.setStyle("background-image",""),this.iconCls&&t.removeCls(this.iconCls),e&&t.addCls(e)),this.iconCls=e,this.fireEvent("iconchange",this,i,e)},setText:function(e){var t=this.textEl||this.el,i=this.text;this.text=e,this.rendered&&(t.setHtml(this.getDisplayText()),this.updateLayout()),this.fireEvent("textchange",this,i,e)},getTipAttr:function(){return"qtip"===this.tooltipType?"data-qtip":"title"},clearTip:function(){Ext.quickTipsActive&&Ext.isObject(this.tooltip)&&Ext.tip.QuickTipManager.unregister(this.itemEl)},setTooltip:function(e,t){return this.rendered?(t||this.clearTip(),Ext.quickTipsActive&&Ext.isObject(e)?(Ext.tip.QuickTipManager.register(Ext.apply({target:this.itemEl.id},e)),this.tooltip=e):this.itemEl.dom.setAttribute(this.getTipAttr(),e)):this.tooltip=e,this},getFocusEl:function(){return this.plain?this.el:this.itemEl},getFocusClsEl:function(){return this.el},getDisplayText:function(){return this.text||this.emptyText},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)}},applyGlyph:function(e,t){return e&&(e.isGlyph||(e=new Ext.Glyph(e)),e.isEqual(t)&&(e=void 0)),e},updateGlyph:function(e,t){var i=this.iconEl;i&&(i.setStyle("background-image","none"),this.icon=null,e?(i.dom.innerHTML=e.character,i.setStyle(e.getStyle())):i.dom.innerHTML="")}}),Ext.define("Ext.menu.CheckItem",{extend:"Ext.menu.Item",alias:"widget.menucheckitem",checkedCls:Ext.baseCSSPrefix+"menu-item-checked",uncheckedCls:Ext.baseCSSPrefix+"menu-item-unchecked",groupCls:Ext.baseCSSPrefix+"menu-group-icon",hideOnClick:!1,checkChangeDisabled:!1,submenuText:"{0} submenu",ariaRole:"menuitemcheckbox",childEls:["checkEl"],defaultBindProperty:"checked",showCheckbox:!0,isMenuCheckItem:!0,checkboxCls:Ext.baseCSSPrefix+"menu-item-checkbox",initComponent:function(){var e=this.checked;this.checkedConfigure=e,this.checked=!!e,this.callParent(),this.group&&(Ext.menu.Manager.registerCheckable(this),!1!==this.initialConfig.hideOnClick&&(this.hideOnClick=!0))},beforeRender:function(){var e,t=this;t.callParent(),Ext.apply(t.renderData,{checkboxCls:t.checkboxCls,showCheckbox:t.showCheckbox}),(e=t.ariaRenderAttributes||(t.ariaRenderAttributes={}))["aria-checked"]=t.menu?"mixed":t.checked,t.menu&&(e["aria-label"]=Ext.String.formatEncode(t.submenuText,t.text))},afterRender:function(){var e=this;e.callParent(),e.checked=!e.checked,e.initial=!0,e.setChecked(!e.checked,!0),e.initial=!1,e.checkChangeDisabled&&e.disableCheckChange(),Ext.isGecko&&e.checkEl&&e.checkEl.on("mousedown",e.onMouseDownCheck)},disableCheckChange:function(){var e=this.checkEl;e&&e.addCls(this.disabledCls),Ext.isIE8&&this.rendered&&this.el.repaint(),this.checkChangeDisabled=!0},enableCheckChange:function(){var e=this.checkEl;e&&e.removeCls(this.disabledCls),this.checkChangeDisabled=!1},onMouseDownCheck:function(e){e.preventDefault()},onClick:function(e){var t=this;return!(!(t.disabled||t.checkChangeDisabled||t.checked&&t.group||t.menu&&"touch"===e.pointerType&&!t.checkEl.contains(e.target))&&(t.setChecked(!t.checked),"keydown"===e.type&&t.menu))&&t.callParent([e])},doDestroy:function(){Ext.menu.Manager.unregisterCheckable(this),this.callParent()},setText:function(e){var t=this.ariaEl.dom;this.callParent([e]),t&&this.menu&&t.setAttribute("aria-label",Ext.String.formatEncode(this.submenuText,e))},setChecked:function(e,t){var i=this,n=i.checkedCls,r=i.uncheckedCls,o=i.el,a=i.ariaEl.dom,s=i.checkedConfigure;i.checked===e||!t&&!1===i.fireEvent("beforecheckchange",i,e)||(o&&(e?(o.addCls(n),o.removeCls(r)):(o.addCls(r),o.removeCls(n))),a&&a.setAttribute("aria-checked",i.menu?"mixed":!!e),i.checked=e,i.checkedConfigure=e,Ext.menu.Manager.onCheckChange(i,e),i.initial&&null==s||i.publishState("checked",e),t||(Ext.callback(i.checkHandler,i.scope,[i,e],0,i),i.fireEvent("checkchange",i,e)))}}),Ext.define("Ext.menu.Separator",{extend:"Ext.menu.Item",alias:"widget.menuseparator",focusable:!1,canActivate:!1,hideOnClick:!1,plain:!0,separatorCls:Ext.baseCSSPrefix+"menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(){this.addCls(this.separatorCls),this.callParent()}}),Ext.define("Ext.menu.Menu",{extend:"Ext.panel.Panel",alias:"widget.menu",requires:["Ext.layout.container.VBox","Ext.menu.CheckItem","Ext.menu.Item","Ext.menu.Manager","Ext.menu.Separator"],defaultType:"menuitem",enableKeyNav:!0,allowOtherMenus:!1,ariaRole:"menu",floating:!0,constrain:!0,hidden:!0,hideMode:"visibility",ignoreParentClicks:!1,mouseLeaveDelay:50,isMenu:!0,showSeparator:!0,minWidth:void 0,defaultMinWidth:120,defaultAlign:"tl-bl?",focusOnToFront:!1,bringParentToFront:!1,alignOnScroll:!1,focusable:!0,tabIndex:-1,focusableContainer:!0,defaultFocus:":focusable",allowFocusingDisabledChildren:!0,menuClickBuffer:0,baseCls:Ext.baseCSSPrefix+"menu",_iconSeparatorCls:Ext.baseCSSPrefix+"menu-icon-separator",_itemCmpCls:Ext.baseCSSPrefix+"menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var e=this,t=[Ext.baseCSSPrefix+"menu"],i=e.bodyCls?[e.bodyCls]:[],n=!1!==e.floating,r={element:"el",click:e.onClick,mouseover:e.onMouseOver,scope:e};Ext.supports.Touch&&(r.pointerdown=e.onMouseOver),e.on(r),e.on({beforeshow:e.onBeforeShow,scope:e}),e.plain&&t.push(Ext.baseCSSPrefix+"menu-plain"),e.cls=t.join(" "),i.push(Ext.baseCSSPrefix+"menu-body",Ext.dom.Element.unselectableCls),e.bodyCls=i.join(" "),n?void 0===e.minWidth&&(e.minWidth=e.defaultMinWidth):(e.hidden=!!e.initialConfig.hidden,e.constrain=!1),e.callParent(),Ext.override(e.getLayout(),{configureItem:e.configureItem}),e.itemOverTask=new Ext.util.DelayedTask(e.handleItemOver,e)},initFloatConstrain:Ext.emptyFn,getInherited:function(){var e=this.callParent();return this.floating&&(e.hidden=this.hidden),e},beforeRender:function(){this.callParent(),this.getSizeModel().width.shrinkWrap||(this.layout.align="stretch"),this.floating&&(this.ariaRenderAttributes=this.ariaRenderAttributes||{},this.ariaRenderAttributes["aria-expanded"]=!!this.autoShow)},onBoxReady:function(e,t){var i=this,n=i._iconSeparatorCls,r=i.focusableKeyNav;r?r.map.addBinding([{key:Ext.event.Event.ESC,handler:i.onEscapeKey,scope:i},{key:/[\w]/,handler:i.onShortcutKey,scope:i,shift:!1,ctrl:!1,alt:!1}]):i.escapeKeyNav=new Ext.util.KeyNav({target:i.el,eventName:"keydown",scope:i,esc:i.onEscapeKey}),i.callParent([e,t]),i.showSeparator&&(i.iconSepEl=i.body.insertFirst({role:"presentation",cls:n+" "+n+"-"+i.ui,html:"&#160;"})),(Ext.supports.Touch||Ext.supports.MSPointerEvents||Ext.supports.PointerEvents)&&i.el.on({scope:i,click:i.preventClick,translate:!1}),i.mouseMonitor=i.el.monitorMouseLeave(i.mouseLeaveDelay,i.onMouseLeave,i)},onFocusEnter:function(e){var t;this.callParent([e]),this.mixins.focusablecontainer.onFocusEnter.call(this,e),this.floating&&((t=this.getInherited()).topmostFocusEvent||(t.topmostFocusEvent=e))},onFocusLeave:function(e){this.callParent([e]),this.lastFocusedChild=null,this.mixins.focusablecontainer.onFocusLeave.call(this,e),this.floating&&this.hide()},handleItemOver:function(e,t){t.containsFocus||"mouse"!==e.pointerType&&!t.isMenuItem||t.focus(),t.expandMenu&&t.expandMenu(e)},canActivateItem:function(e){return e&&e.isFocusable()},deactivateActiveItem:function(){var e=this.lastFocusedChild;e&&e.blur()},getItemFromEvent:function(e){for(var t=this.layout.getRenderTarget().dom,i=e.getTarget();i.parentNode!==t;)if(!(i=i.parentNode))return;return Ext.getCmp(i.id)},lookupComponent:function(e){return"string"==typeof e?e="@"===e[0]?this.callParent([e]):this.lookupItemFromString(e):Ext.isObject(e)&&(e=this.lookupItemFromObject(e)),e.dock||(e.minWidth=e.minWidth||this.minWidth),e},lookupItemFromObject:function(e){var t=this.defaultType;return e.isComponent||(!e.xtype&&Ext.isBoolean(e.checked)&&(t="menucheckitem"),e=Ext.ComponentManager.create(e,t)),e.isMenuItem&&(e.parentMenu=this),e},lookupItemFromString:function(e){return"separator"===e||"-"===e?new Ext.menu.Separator:new Ext.menu.Item({canActivate:!1,hideOnClick:!1,plain:!0,text:e})},configureItem:function(e){var t,i,n=this.owner,r=Ext.baseCSSPrefix,o=n.ui;e.isMenuItem?e.setUI(o):1<n.items.getCount()&&!e.rendered&&!e.dock&&(t=[i=n._itemCmpCls,i+"-"+o],n.plain||!1===e.indent&&"no-icon"!==e.iconCls||t.push(r+"menu-item-indent-"+o),e.rendered?e.el.addCls(t):e.cls=(e.cls||"")+" "+t.join(" "),e.$extraMenuCls=t),this.callParent(arguments)},onRemove:function(e){this.callParent([e]),!e.destroyed&&e.$extraMenuCls&&e.el.removeCls(e.$extraMenuCls)},onClick:function(e){var t,i,n="keydown"===e.type;if(this.disabled)e.stopEvent();else{if((t=this.getItemFromEvent(e))&&t.isMenuItem){if(t.menu&&this.ignoreParentClicks?e.stopEvent():i=t.onClick(e),this.destroyed)return;t.menu&&!1!==i&&n&&t.expandMenu(e,0)}t&&!t.disabled||(t=void 0),this.fireEvent("click",this,t,e)}},doDestroy:function(){var e=this;e.escapeKeyNav&&e.escapeKeyNav.destroy(),e.itemOverTask.cancel(),e.parentMenu=e.ownerCmp=e.escapeKeyNav=null,e.rendered&&(e.el.un(e.mouseMonitor),Ext.destroy(e.iconSepEl)),Ext.menu.Manager.onHide(e),e.callParent()},onMouseLeave:function(e){this.itemOverTask&&this.itemOverTask.cancel(),this.disabled||this.fireEvent("mouseleave",this,e)},onMouseOver:function(e){var t=this,i=e.getRelatedTarget(),n=!t.el.contains(i),r=t.getItemFromEvent(e),o=t.parentMenu,a=t.ownerCmp;n&&o&&(o.setActiveItem(a),a.cancelDeferHide(),o.mouseMonitor.mouseenter(),o.itemOverTask.cancel()),t.disabled||(r&&("touch"===e.pointerType?t.handleItemOver(e,r):t.itemOverTask.delay(t.expanded?t.mouseLeaveDelay:0,null,null,[e,r])),n&&t.fireEvent("mouseenter",t,e),t.fireEvent("mouseover",t,r,e))},setActiveItem:function(e){e&&e!==this.lastFocusedChild&&this.focusChild(e,1)},onEscapeKey:function(){this.floating&&this.hide()},onShortcutKey:function(e,t){var i=String.fromCharCode(t.getCharCode()),n=this.query(">[text]"),r=n.length,o=this.lastFocusedChild,a=Ext.Array.indexOf(n,o),s=a;if(0!==r)for(;;){if(++s===r&&(s=0),o=n[s],s===a)return;if(o.text&&o.text[0].toUpperCase()===i)return void o.focus()}},onBeforeShow:function(){if(Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer)return!1},beforeShow:function(){this.floating&&(this.hasFloatMenuParent()||this.allowOtherMenus||Ext.menu.Manager.hideAll()),this.callParent()},afterShow:function(e,t,i){var n=this,r=n.ariaEl.dom;n.callParent([e,t,i]),Ext.menu.Manager.onShow(n),n.parentMenu&&(n.parentMenu.expanded=!0),n.floating&&r&&r.setAttribute("aria-expanded",!0),n.floating&&(n.maxHeight=n.savedMaxHeight),n.autoFocus&&n.focus()},onHide:function(e,t,i){var n=this.ariaEl.dom;this.callParent([e,t,i]),this.lastHide=Ext.Date.now(),Ext.menu.Manager.onHide(this),this.parentMenu&&(this.parentMenu.expanded=!1),this.floating&&n&&n.setAttribute("aria-expanded",!1)},afterHide:function(e,t){this.callParent([e,t]),delete this.getInherited().topmostFocusEvent},preventClick:function(e){var t=this.getItemFromEvent(e);t&&t.isMenuItem&&!t.href&&e.preventDefault()},privates:{applyDefaults:function(e){return Ext.isString(e)||(e=this.callParent([e])),e},initFocusableElement:function(){var e=this.tabIndex,t=this.el;this.floating&&null!=e&&t&&t.dom&&(t.dom.setAttribute("tabIndex",e),t.dom.setAttribute("data-componentid",this.id))},processFocusableContainerKeyEvent:function(e){if(e.keyCode===e.ESC)e.target=this.el.dom;else{if(e.keyCode!==e.TAB||!Ext.fly(e.target).is("input[type=text],textarea"))return this.callParent([e]);e.preventDefault(),e.target=this.getItemFromEvent(e).el.dom,e.shiftKey?(e.shiftKey=!1,e.keyCode=e.UP):e.keyCode=e.DOWN}return e},onFocusableContainerTabKey:function(e){this.floating&&(e.shiftKey?e.preventDefault():this.focusEnterEvent=this.getInherited().topmostFocusEvent,this.hide())},onFocusableContainerEnterKey:function(e){this.onClick(e)},onFocusableContainerSpaceKey:function(e){this.onClick(e)},onFocusableContainerLeftKey:function(e){e.preventDefault(),this.parentMenu&&(this.ownerCmp.focus(),this.hide())},onFocusableContainerRightKey:function(e){var t=this.lastFocusedChild;e.preventDefault(),t&&t.expandMenu&&t.expandMenu(e,0)},hasFloatMenuParent:function(){return this.parentMenu||this.up("menu[floating=true]")},setOwnerCmp:function(e,t){this.parentMenu=e.isMenuItem?e:null,this.ownerCmp=e,this.registerWithOwnerCt(),delete this.hierarchicallyHidden,this.onInheritedAdd(e,t),this.containerOnAdded(e,t)}}}),Ext.define("Ext.grid.filters.filter.Base",{mixins:["Ext.mixin.Factoryable"],factoryConfig:{type:"grid.filter"},$configPrefixed:!1,$configStrict:!1,config:{itemDefaults:null,menuDefaults:{xtype:"menu"},updateBuffer:500,serializer:null},active:!1,type:"string",dataIndex:null,menu:null,isGridFilter:!0,defaultRoot:"data",filterIdPrefix:Ext.baseCSSPrefix+"gridfilter",constructor:function(e){var t,i=this;i.callParent([e]),i.initConfig(e),t=i.column,i.columnListeners=t.on("destroy",i.destroy,i,{destroyable:!0}),i.dataIndex=i.dataIndex||t.dataIndex,i.task=new Ext.util.DelayedTask(i.setValue,i)},destroy:function(){this.task&&(this.task.cancel(),this.task=null),this.columnListeners=this.columnListeners.destroy(),this.grid=this.menu=Ext.destroy(this.menu),this.callParent()},addStoreFilter:function(e){var t=this.getGridStore().getFilters(),i=t.indexOf(e),n=-1!==i?t.getAt(i):null;n&&Ext.util.Filter.isEqual(n,e)||t.add(e)},createFilter:function(e,t){var i=new Ext.util.Filter(this.getFilterConfig(e,t));return i.isGridFilter=!0,i},getFilterConfig:function(e,t){return e.id=this.getBaseIdPrefix(),e.property||(e.property=this.dataIndex),e.root||(e.root=this.defaultRoot),t&&(e.id+="-"+t),e.serializer=this.getSerializer(),e},createMenu:function(){this.menu=Ext.widget(this.getMenuConfig())},getActiveState:function(e,t){var i=e.active;return void 0!==i?i:void 0!==t},getBaseIdPrefix:function(){return this.filterIdPrefix+"-"+this.dataIndex},getMenuConfig:function(){return Ext.apply({},this.getMenuDefaults())},getGridStore:function(){return this.grid.getStore()},getStoreFilter:function(e){var t=this.getBaseIdPrefix();return e&&(t+="-"+e),this.getGridStore().getFilters().get(t)},onValueChange:function(e,t){var i,n=t.getKey(),r=this.updateBuffer;if(n!==t.TAB&&(e.isFormField||Ext.raise("`field` should be a form field instance."),e.isValid())){if(n===t.RETURN)return void this.menu.hide();if((i=this.getValue(e))===this.value)return;r?this.task.delay(r,null,null,[i]):this.setValue(i)}},preprocess:Ext.emptyFn,removeStoreFilter:function(e){this.getGridStore().getFilters().remove(e)},getValue:Ext.emptyFn,setActive:function(e){var t,i=this,n=i.owner.activeFilterMenuItem;i.active!==e&&(i.active=e,(t=i.getGridStore().getFilters()).beginUpdate(),e?i.activate():i.deactivate(),t.endUpdate(),n&&n.activeFilter===i&&n.setChecked(e),i.setColumnActive(e),i.grid.fireEventArgs(e?"filteractivate":"filterdeactivate",[i,i.column]))},setColumnActive:function(e){this.column[e?"addCls":"removeCls"](this.owner.filterCls)},showMenu:function(e){this.menu||this.createMenu(),e.activeFilter=this,e.setMenu(this.menu,!1),e.setChecked(this.active),e.setDisabled(!0===this.disabled),this.activate(!0)},updateStoreFilter:function(){this.getGridStore().getFilters().notify("endupdate")}}),Ext.define("Ext.grid.filters.filter.SingleFilter",{extend:"Ext.grid.filters.filter.Base",constructor:function(e){var t,i,n=this;n.callParent([e]),i=n.value,(t=n.getStoreFilter())?n.active=!0:(n.grid.stateful&&n.getGridStore().saveStatefulFilters&&(i=void 0),n.active=n.getActiveState(e,i),t=n.createFilter({operator:n.operator,value:i}),n.active&&n.addStoreFilter(t)),n.active&&n.setColumnActive(!0),n.filter=t},activate:function(e){e?this.activateMenu():this.addStoreFilter(this.filter)},deactivate:function(){this.removeStoreFilter(this.filter)},getValue:function(e){return e.getValue()},onFilterRemove:function(){this.menu&&!this.active||(this.active=!1)}}),Ext.define("Ext.grid.filters.filter.Boolean",{extend:"Ext.grid.filters.filter.SingleFilter",alias:"grid.filter.boolean",type:"boolean",operator:"==",defaultValue:!1,yesText:"Yes",noText:"No",updateBuffer:0,constructor:function(e){var t;this.callParent([e]),this.filter&&(t=this.filter.getValue(),Ext.isEmpty(t,!0)&&null!==this.defaultValue&&this.filter.setValue(!!this.defaultValue))},createMenu:function(e){var t=this,i=Ext.id(),n={scope:t,click:t.onClick},r=t.getItemDefaults();t.callParent(arguments),t.menu.add([Ext.apply({text:t.yesText,filterKey:1,group:i,checked:!!t.defaultValue,hideOnClick:!1,listeners:n},r),Ext.apply({text:t.noText,filterKey:0,group:i,checked:!t.defaultValue&&null!==t.defaultValue,hideOnClick:!1,listeners:n},r)])},onClick:function(e){this.setValue(!!e.filterKey)},setValue:function(e){this.filter.setValue(e),void 0!==e&&this.active?(this.value=e,this.updateStoreFilter()):this.setActive(!0)},activateMenu:Ext.emptyFn}),Ext.define("Ext.grid.filters.filter.TriFilter",{extend:"Ext.grid.filters.filter.Base",menuItems:["lt","gt","-","eq"],constructor:function(e){var t,i,n,r,o,a=this,s=!1,l={};if(a.callParent([e]),r=a.value,i=a.getStoreFilter("lt"),t=a.getStoreFilter("gt"),n=a.getStoreFilter("eq"),i||t||n?(s=a.active=!0,i&&a.onStateRestore(i),t&&a.onStateRestore(t),n&&a.onStateRestore(n)):(a.grid.stateful&&a.getGridStore().saveStatefulFilters&&(r=void 0),a.active=a.getActiveState(e,r)),l.lt=i||a.createFilter({operator:"lt",value:!s&&r&&Ext.isDefined(r.lt)?r.lt:null},"lt"),l.gt=t||a.createFilter({operator:"gt",value:!s&&r&&Ext.isDefined(r.gt)?r.gt:null},"gt"),l.eq=n||a.createFilter({operator:"eq",value:!s&&r&&Ext.isDefined(r.eq)?r.eq:null},"eq"),a.filter=l,a.active&&(a.setColumnActive(!0),!s))for(o in r)a.addStoreFilter(a.filter[o])},activate:function(e){var t,i,n,r,o,a=this.filter,s=this.fields;if(!this.preventFilterRemoval)for(n in a)t=a[n],i=s[n],!(r=t.getValue())&&0!==r||(i.isComponent?(i.setValue(r),void 0===o&&(o=this.owner.activeFilterMenuItem===i.up("menuitem")),o||i.up("menuitem").setChecked(!0,!0)):i.value=r,e||this.addStoreFilter(t))},deactivate:function(){var e,t,i,n=this.filter;if(this.countActiveFilters()&&!this.preventFilterRemoval){for(e in this.preventFilterRemoval=!0,n)!(i=(t=n[e]).getValue())&&0!==i||this.removeStoreFilter(t);this.preventFilterRemoval=!1}},countActiveFilters:function(){var e,t=this.filter,i=this.getGridStore().getFilters(),n=this.getBaseIdPrefix(),r=0;if(i.length)for(e in t)i.get(n+"-"+e)&&r++;return r},onFilterRemove:function(e){var t;!this.menu&&this.countActiveFilters()?this.active=!1:this.menu&&((t={})[e]=null,this.setValue(t))},onStateRestore:Ext.emptyFn,setValue:function(e){var t,i,n,r,o,a,s=this,l=s.filter,d=[],u=[],c=s.getGridStore().getFilters();if(!s.preventFilterRemoval){if(s.preventFilterRemoval=!0,"eq"in e?(!(n=l.lt.getValue())&&0!==n||u.push(l.lt),!(n=l.gt.getValue())&&0!==n||u.push(l.gt),(n=e.eq)||0===n?(d.push(l.eq),l.eq.setValue(n)):u.push(l.eq)):(!(n=l.eq.getValue())&&0!==n||u.push(l.eq),"lt"in e&&((n=e.lt)||0===n?(d.push(l.lt),l.lt.setValue(n)):u.push(l.lt)),"gt"in e&&((n=e.gt)||0===n?(d.push(l.gt),l.gt.setValue(n)):u.push(l.gt))),o=u.length,a=d.length,t=!!(s.countActiveFilters()+a-o),o||a||t!==s.active){if(c.beginUpdate(),o)for(r=0;r<o;r++)i=u[r],s.fields[i.getOperator()].setValue(null),i.setValue(null),s.removeStoreFilter(i);if(a)for(r=0;r<a;r++)s.addStoreFilter(d[r]);s.setActive(t),c.endUpdate()}s.preventFilterRemoval=!1}}}),Ext.define("Ext.grid.filters.filter.Date",{extend:"Ext.grid.filters.filter.TriFilter",alias:"grid.filter.date",uses:["Ext.picker.Date","Ext.menu.DatePicker"],type:"date",config:{fields:{lt:{text:"Before"},gt:{text:"After"},eq:{text:"On"}},pickerDefaults:{xtype:"datepicker",border:0},updateBuffer:0,dateFormat:void 0},itemDefaults:{xtype:"menucheckitem",selectOnFocus:!0,width:125,menu:{layout:"auto",plain:!0}},applyDateFormat:function(e){return e||Ext.Date.defaultFormat},createMenu:function(e){var t,i,n,r,o,a,s,l,d,u=this,c={scope:u,checkchange:u.onCheckChange},h=u.menuItems;for(u.callParent(arguments),i=u.getItemDefaults(),t=u.getFields(),n=Ext.apply({minDate:u.minDate,maxDate:u.maxDate,format:u.dateFormat,listeners:{scope:u,select:u.onMenuSelect}},u.getPickerDefaults()),u.fields={},r=0,o=h.length;r<o;r++)"-"!==(a=h[r])?(l={menu:{xtype:"datemenu",hideOnClick:!1,pickerCfg:Ext.apply({itemId:a},n)}},i&&Ext.merge(l,i),t&&Ext.merge(l,t[a]),s=u.menu.add(l),(d=u.fields[a]=s.down("datepicker")).filter=u.filter[a],d.filterKey=a,s.on(c)):u.menu.add(a)},getPicker:function(e){return this.fields[e]},onCheckChange:function(e,t){var i,n=e.down("datepicker").filter;!t&&n.getValue()&&((i={})[n.getOperator()]=null,this.setValue(i))},onFilterRemove:function(e){var t={};t[e]=null,this.setValue(t),this.fields[e].up("menuitem").setChecked(!1,!0)},onStateRestore:function(e){e.setSerializer(this.getSerializer()),e.setConvert(this.convertDateOnly)},getFilterConfig:function(e,t){return(e=this.callParent([e,t])).serializer=this.getSerializer(),e.convert=this.convertDateOnly,e},convertDateOnly:function(e){var t=null;return e&&(t=Ext.Date.clearTime(e,!0).getTime()),t},getSerializer:function(){var i=this;return function(e){var t=e.value;t&&(e.value=Ext.Date.format(t,i.getDateFormat()))}},onMenuSelect:function(e,t){var i=this.fields,n=this.filter,r=i[e.itemId],o=i.gt,a=i.lt,s=i.eq,l={};r.up("menuitem").setChecked(!0,!0),r===s?(a.up("menuitem").setChecked(!1,!0),o.up("menuitem").setChecked(!1,!0)):(s.up("menuitem").setChecked(!1,!0),r===o&&+a.value<+t?(a.up("menuitem").setChecked(!1,!0),null!=n.lt.getValue()&&(l.lt=null)):r===a&&+o.value>+t&&(o.up("menuitem").setChecked(!1,!0),null!=n.gt.getValue()&&(l.gt=null))),l[r.filterKey]=t,this.setValue(l),e.up("menu").hide()}}),Ext.define("Ext.grid.filters.filter.List",{extend:"Ext.grid.filters.filter.SingleFilter",alias:"grid.filter.list",type:"list",operator:"in",itemDefaults:{checked:!1,hideOnClick:!1},idField:"id",labelField:"text",labelIndex:null,loadingText:"Loading...",loadOnShow:!0,single:!1,plain:!0,gridStoreListenersCfg:{add:"onDataChanged",refresh:"onDataChanged",remove:"onDataChanged",update:"onDataChanged"},constructor:function(e){var t,i=this;i.callParent([e]),i.itemDefaults.checked&&Ext.raise("The itemDefaults.checked config is not supported, use the value config instead."),i.labelIndex=i.labelIndex||i.column.dataIndex,i.store&&(i.store=Ext.StoreManager.lookup(i.store)),i.store||i.options||(t=i.getGridStore(),null!=i.value&&i.active&&(i.gridStoreListeners=t.on(Ext.apply({scope:i,destroyable:!0},i.gridStoreListenersCfg))),i.gridListeners=i.grid.on({reconfigure:i.onReconfigure,scope:i,destroyable:!0}),i.inferOptionsFromGridStore=!0)},destroy:function(){var e=this.store,t=this.autoStore;e&&e.isStore&&(t||e.autoDestroy?e.destroy():e.un("load",this.bindMenuStore,this),this.store=null),Ext.destroy(this.gridStoreListeners,this.gridListeners),this.callParent()},activateMenu:function(){var e,t,i,n,r=this.filter.getValue();if(r&&r.length)for(t=0,i=(e=this.menu.items).length;t<i;t++)n=e.getAt(t),-1<Ext.Array.indexOf(r,n.value)&&n.setChecked(!0,!0)},bindMenuStore:function(e){this.grid.destroyed||this.preventFilterRemoval||(this.createListStore(e),this.createMenuItems(this.store),this.loaded=!0)},createListStore:function(e){var t,i,n,r,o,a=this,s=a.store,l=e.isStore,d=a.idField,u=a.labelField,c=!1;if(l)e!==a.getGridStore()?(c=!0,s=a.store=e):(a.autoStore=!0,t=a.getOptionsFromStore(e));else for(t=[],n=0,r=e.length;n<r;n++)switch(o=e[n],Ext.typeOf(o)){case"array":case"object":t.push(o);break;default:null!=o&&((i={})[d]=o,i[u]=o,t.push(i))}c||(s&&s.destroy(),s=a.store=new Ext.data.Store({fields:[d,u],data:t}),a.inferOptionsFromGridStore&!a.gridStoreListeners&&(a.gridStoreListeners=a.getGridStore().on(Ext.apply({scope:a,destroyable:!0},a.gridStoreListenersCfg))),a.loaded=!0),a.setStoreFilter(s)},createMenu:function(e){var t,i=this,n=i.getGridStore(),r=i.store,o=i.options;r&&(i.store=r=Ext.StoreManager.lookup(r)),i.callParent([e]),t=i.menu,r?r.getCount()?i.createMenuItems(r):(t.add({text:i.loadingText,iconCls:Ext.baseCSSPrefix+"mask-msg-text"}),t.on({show:i.show,scope:i}),r.on("load",i.bindMenuStore,i,{single:!0})):o?i.bindMenuStore(o):n.getCount()||n.isFiltered()?i.bindMenuStore(n):n.on("load",i.bindMenuStore,i,{single:!0})},createMenuItems:function(e){var t,i,n,r,o,a,s,l,d,u=this.menu,c=e.getCount(),h=Ext.Array.contains;if(c&&u){for(t=this.getItemDefaults(),u.suspendLayouts(),u.removeAll(!0),n=this.single?Ext.id():null,o=this.idField,s=this.labelField,d=[],l=0;l<c;l++)r=(i=e.getAt(l)).get(o),null==(a=i.get(s))||h(d,r)||(d.push(a),u.add(Ext.apply({text:a,group:n,value:r,checkHandler:this.onCheckChange,scope:this},t)));u.resumeLayouts(!0)}},getFilterConfig:function(e,t){var i=e.value;return Ext.isEmpty(i)?i=[]:Ext.isArray(i)||(i=[i]),e.value=i,this.callParent([e,t])},getOptionsFromStore:function(e){var t,i,n,r=e.getData(),o={},a=[],s=this.dataIndex,l=this.labelIndex;return e.isFiltered()&&!e.remoteFilter&&(r=r.getSource()),e.each(function(e){t=e.data,i=t[s],void 0===(n=t[l])&&(n=i),o[i]||(o[i]=1,a.push([i,n]))},null,{filtered:!0,collapsed:!0}),a},onCheckChange:function(){var e=this.updateBuffer;e?this.task.delay(e):this.setValue()},onDataChanged:function(e){this.preventDefault?this.preventDefault=!1:this.bindMenuStore(e)},onReconfigure:function(e,t){t&&this.bindMenuStore(t)},setActive:function(e){this.active!==e&&(this.preventDefault=!0,this.callParent([e]))},setStoreFilter:function(e){var t=this.value,i=this.filter;t&&(Ext.isArray(t)||(t=[t]),i.setValue(t)),this.active&&(this.preventFilterRemoval=!0,this.addStoreFilter(i),this.preventFilterRemoval=!1)},setValue:function(){var e,t,i,n=this.menu.items,r=[];for(this.preventDefault=!0,e=0,t=n.length;e<t;e++)(i=n.getAt(e)).checked&&r.push(i.value);Ext.Array.equals(r,this.filter.getValue())||(this.filter.setValue(r),(t=r.length)&&this.active?this.updateStoreFilter():this.setActive(!!t))},show:function(){var e=this.store;!this.loadOnShow||this.loaded||e.hasPendingLoad()||e.load()}}),Ext.define("Ext.grid.filters.filter.Number",{extend:"Ext.grid.filters.filter.TriFilter",alias:["grid.filter.number","grid.filter.numeric"],uses:["Ext.form.field.Number"],type:"number",config:{fields:{gt:{iconCls:Ext.baseCSSPrefix+"grid-filters-gt",margin:"0 0 3px 0"},lt:{iconCls:Ext.baseCSSPrefix+"grid-filters-lt",margin:"0 0 3px 0"},eq:{iconCls:Ext.baseCSSPrefix+"grid-filters-eq",margin:0}}},emptyText:"Enter Number...",itemDefaults:{xtype:"numberfield",enableKeyEvents:!0,hideEmptyLabel:!1,labelSeparator:"",labelWidth:29,selectOnFocus:!1},menuDefaults:{bodyPadding:3,showSeparator:!1},createMenu:function(){var e,t,i,n,r,o,a=this,s={scope:a,keyup:a.onValueChange,spin:{fn:a.onInputSpin,buffer:200},el:{click:a.stopFn}},l=a.getItemDefaults(),d=a.menuItems,u=a.getFields();for(a.callParent(),a.fields={},t=0,i=d.length;t<i;t++)"-"!==(n=d[t])?(e=u[n],o={labelClsExtra:Ext.baseCSSPrefix+"grid-filters-icon "+e.iconCls},l&&Ext.merge(o,l),Ext.merge(o,e),o.emptyText=o.emptyText||a.emptyText,delete o.iconCls,a.fields[n]=r=a.menu.add(o),r.filter=a.filter[n],r.filterKey=n,r.on(s)):a.menu.add(n)},getValue:function(e){var t={};return t[e.filterKey]=e.getValue(),t},onInputSpin:function(e,t){var i={};i[e.filterKey]=e.getValue(),this.setValue(i)},stopFn:function(e){e.stopPropagation()}}),Ext.define("Ext.grid.filters.filter.String",{extend:"Ext.grid.filters.filter.SingleFilter",alias:"grid.filter.string",type:"string",operator:"like",emptyText:"Enter Filter Text...",itemDefaults:{xtype:"textfield",enableKeyEvents:!0,hideEmptyLabel:!1,iconCls:Ext.baseCSSPrefix+"grid-filters-find",labelSeparator:"",labelWidth:29,margin:0,selectOnFocus:!0},menuDefaults:{bodyPadding:3,showSeparator:!1},createMenu:function(){var e;this.callParent(),!(e=Ext.apply({},this.getItemDefaults())).iconCls||"labelClsExtra"in e||(e.labelClsExtra=Ext.baseCSSPrefix+"grid-filters-icon "+e.iconCls),delete e.iconCls,e.emptyText=e.emptyText||this.emptyText,this.inputItem=this.menu.add(e),this.inputItem.on({scope:this,keyup:this.onValueChange,el:{click:function(e){e.stopPropagation()}}})},setValue:function(e){this.inputItem&&this.inputItem.setValue(e),this.filter.setValue(e),e&&this.active?(this.value=e,this.updateStoreFilter()):this.setActive(!!e)},activateMenu:function(){this.inputItem.setValue(this.filter.getValue())},createFilter:function(e,t){var i=this;return i.filterFn?new Ext.util.Filter({filterFn:function(e){return Ext.callback(i.filterFn,i.scope,[e,i.inputItem.getValue()])}}):i.callParent([e,t])}}),Ext.define("Ext.grid.filters.Filters",{extend:"Ext.plugin.Abstract",alias:"plugin.gridfilters",mixins:["Ext.util.StoreHolder"],requires:["Ext.grid.filters.filter.*"],id:"gridfilters",defaultFilterTypes:{boolean:"boolean",int:"number",date:"date",number:"number"},filterCls:Ext.baseCSSPrefix+"grid-filters-filtered-column",menuFilterText:"Filters",showMenu:!0,stateId:void 0,init:function(e){var t,i,n=this;Ext.Assert.falsey(n.grid),((n.grid=e).filters=n).grid.normalGrid&&(n.isLocked=!0),e.clearFilters=n.clearFilters.bind(n),t=e.store,i=e.headerCt,n.headerCtListeners=i.on({destroyable:!0,scope:n,add:n.onAdd,menucreate:n.onMenuCreate}),i.menu&&!i.menu.destroyed&&this.onMenuCreate(i,i.menu),n.gridListeners=e.on({destroyable:!0,scope:n,reconfigure:n.onReconfigure}),t.isEmptyStore||(n.bindStore(t),n.initColumns())},initColumns:function(){var e,t,i,n,r=this.grid,o=r.getStore(),a=r.columnManager.getColumns(),s=a.length;for(e=0;e<s;e++)(i=(t=a[e]).filter)&&!i.isGridFilter&&(n||(n=o.getFilters()).beginUpdate(),this.createColumnFilter(t));n&&n.endUpdate()},createColumnFilter:function(e){var t,i,n,r=e.filter,o={column:e,grid:this.grid,owner:this};Ext.isString(r)?o.type=r:Ext.apply(o,r),o.type||(n=(t=(i=this.store.getModel())&&i.getField(e.dataIndex))&&t.type,o.type=n&&this.defaultFilterTypes[n]||e.defaultFilterType||"string"),e.filter=Ext.Factory.gridFilter(o),e.menuDisabled||(e.requiresMenu=!0)},onAdd:function(e,t,i){var n=t.filter;n&&!n.isGridFilter&&this.createColumnFilter(t)},onMenuCreate:function(e,t){this.headerMenuListeners&&(Ext.destroy(this.headerMenuListeners),this.headerMenuListeners=null),this.headerMenuListeners=t.on({beforeshow:this.onMenuBeforeShow,destroyable:!0,scope:this})},onMenuBeforeShow:function(e){var t,i,n,r;this.showMenu&&(this.filterMenuItem||(this.filterMenuItem={}),r=(n=e.up("tablepanel")).id,(t=this.filterMenuItem[r])&&!t.destroyed||(t=this.createMenuItem(e,r)),this.activeFilterMenuItem=t,(i=this.getMenuFilter(n.headerCt))&&i.showMenu(t),t.setVisible(!!i),this.sep&&this.sep.setVisible(!!i))},createMenuItem:function(e,t){var i;return e.items.length&&(this.sep=e.add("-")),i=e.add({checked:!1,itemId:"filters",text:this.menuFilterText,listeners:{scope:this,checkchange:this.onCheckChange}}),this.filterMenuItem[t]=i},destroy:function(){var e,t=this.filterMenuItem;for(e in Ext.destroy(this.headerCtListeners,this.gridListeners,this.headerMenuListeners),this.bindStore(null),this.sep=Ext.destroy(this.sep),t)t[e].destroy();this.callParent()},onUnbindStore:function(e){e&&!e.destroyed&&e.getFilters().un("remove",this.onFilterRemove,this)},onBindStore:function(e,t,i){this.local=!e.getRemoteFilter(),e.getFilters().on("remove",this.onFilterRemove,this),this.grid.stateful&&!1!==e.initialConfig.statefulFilters&&(e.statefulFilters=!0)},onFilterRemove:function(e,t){var i,n,r,o,a=t.items.length,s=this.grid.columnManager;for(i=0;i<a;i++)if(n=t.items[i],r=s.getHeaderByDataIndex(n.getProperty())){if(!(o=r.filter)||!o.menu||-1===n.getId().indexOf(o.getBaseIdPrefix()))continue;o.preventFilterRemoval||o.onFilterRemove(n.getOperator())}},getMenuFilter:function(e){return e.getMenu().activeHeader.filter},onCheckChange:function(e,t){var i=this.isLocked?e.up("tablepanel"):this.grid;this.getMenuFilter(i.headerCt).setActive(t)},getHeaders:function(){return this.grid.view.headerCt.columnManager.getColumns()},isStateful:function(){return this.grid.stateful},addFilter:function(e){var t,i,n,r,o,a,s=this.grid,l=this.store,d=!1,u=!0;for(Ext.isArray(e)||(e=[e]),n=0,r=e.length;n<r;n++)t=(o=e[n]).dataIndex,(i=s.columnManager.getHeaderByDataIndex(t))&&(d=!0,o.value&&(u=!1),(a=i.filter)&&a.isGridFilter&&(a.deactivate(),a.destroy(),this.activeFilterMenuItem&&(this.activeFilterMenuItem.menu=null)),i.filter=o);d&&(l.suppressNextFilter=u,this.initColumns(),l.suppressNextFilter=!1)},addFilters:function(e){e&&this.addFilter(e)},clearFilters:function(){var e,t,i,n,r=this.grid,o=r.columnManager.getColumns(),a=r.store;for(t=0,i=o.length;t<i;t++)(e=o[t].filter)&&e.isGridFilter&&(n||(n=a.getFilters()).beginUpdate(),e.setActive(!1));n&&n.endUpdate()},onReconfigure:function(e,t,i,n){var r,o=this.filterMenuItem,a=n!==t;if(i)for(r in o)o[r].setMenu(null);t&&(n&&!n.destroyed&&a&&this.resetFilters(n),a&&(this.bindStore(t),this.applyFilters(t))),this.initColumns()},privates:{applyFilters:function(e){var t,i,n,r=this.grid.columnManager.getColumns(),o=r.length;for(t=0;t<o;t++)(i=r[t].filter)&&i.isGridFilter&&(n||(n=e.getFilters()).beginUpdate(),i.active&&i.activate());n&&n.endUpdate()},resetFilters:function(e){var t,i,n,r=e.getFilters();if(r){for(t=r.getCount()-1;0<=t;--t)(n=r.getAt(t)).isGridFilter&&(i||r.beginUpdate(),r.remove(n),i=!0);i&&r.endUpdate()}}}}),Ext.define("Ext.grid.locking.HeaderContainer",{extend:"Ext.grid.header.Container",requires:["Ext.grid.ColumnManager"],headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(e){var t=this,i=e.lockedGrid,n=e.normalGrid;t.lockable=e,t.callParent(),i.visibleColumnManager.rootColumns=n.visibleColumnManager.rootColumns=e.visibleColumnManager=t.visibleColumnManager=new Ext.grid.ColumnManager(!0,i.headerCt,n.headerCt),i.columnManager.rootColumns=n.columnManager.rootColumns=e.columnManager=t.columnManager=new Ext.grid.ColumnManager(!1,i.headerCt,n.headerCt),t.lockedEventRelayers=t.relayEvents(i.headerCt,t.headerCtRelayEvents),t.normalEventRelayers=t.relayEvents(n.headerCt,t.headerCtRelayEvents)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var e=this.lockable.lockedGrid.headerCt.getColumnsState(),t=this.lockable.normalGrid.headerCt.getColumnsState();return e.concat(t)},applyColumnsState:function(e,t){var i,n,r,o,a,s=this.lockable.lockedGrid,l=this.lockable.normalGrid,d=s.headerCt,u=this.lockable.normalGrid.headerCt,c=d.items.items.concat(u.items.items),h=c.length;for(i=0;i<h;i++)(n=e[(r=c[i]).getStateId()])&&(a=null!=n.locked&&!!r.locked!==n.locked,r.applyColumnState&&r.applyColumnState(n,t),a&&(r.locked?d:u).add(r));for(o=d.items.items.length,i=0;i<h;i++)(n=e[(r=c[i]).getStateId()])&&!r.locked&&(n.index=Math.max(0,n.index-o));d.applyColumnsState(e,t),u.applyColumnsState(e,t),s.getVisibleColumnManager().getColumns().length||s.hide(),l.getVisibleColumnManager().getColumns().length||l.hide()},disable:function(){var e=this.lockable;e.lockedGrid.headerCt.disable(),e.normalGrid.headerCt.disable()},enable:function(){var e=this.lockable;e.lockedGrid.headerCt.enable(),e.normalGrid.headerCt.enable()}}),Ext.define("Ext.grid.locking.View",{alternateClassName:"Ext.grid.LockingView",requires:["Ext.view.AbstractView","Ext.view.Table"],mixins:["Ext.util.Observable","Ext.util.StoreHolder","Ext.mixin.Focusable"],isLockingView:!0,loadMask:!0,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(e){var t,i,n=Ext,r=this;r.ownerGrid=e.ownerGrid,(r.ownerGrid.view=r).navigationModel="treepanel"===e.locked.xtype?new n.tree.NavigationModel(r):new n.grid.NavigationModel(r),e.locked.viewConfig.bindStore=e.normal.viewConfig.bindStore=r.subViewBindStore,e.normal.viewConfig.isNormalView=e.locked.viewConfig.isLockedView=!0,e.locked.viewConfig.navigationModel=e.normal.viewConfig.navigationModel=r.navigationModel,r.lockedGrid=r.ownerGrid.lockedGrid=n.ComponentManager.create(e.locked),r.lockedView=t=r.lockedGrid.getView(),r.selModel=e.normal.viewConfig.selModel=t.getSelectionModel(),r.lockedGrid.isTree&&(r.lockedView.animate=!1,e.normal.store=t.store,e.normal.viewConfig.stripeRows=r.lockedView.stripeRows,e.normal.rowLines=r.lockedGrid.rowLines),r.normalGrid=r.ownerGrid.normalGrid=n.ComponentManager.create(e.normal),t.lockingPartner=i=r.normalView=r.normalGrid.getView(),i.lockingPartner=t,Ext.override(r.normalGrid,{beforeRender:r.beforeNormalGridRender}),r.loadMask=void 0!==e.loadMask?e.loadMask:r.loadMask,r.mixins.observable.constructor.call(r),r.lockedViewEventRelayers=r.relayEvents(t,n.view.Table.events),r.normalViewEventRelayers=r.relayEvents(i,n.view.Table.events.concat(n.view.Table.normalSideEvents)),i.on({scope:r,itemmouseleave:r.onItemMouseLeave,itemmouseenter:r.onItemMouseEnter}),t.on({scope:r,itemmouseleave:r.onItemMouseLeave,itemmouseenter:r.onItemMouseEnter}),r.loadingText=i.loadingText,r.loadingCls=i.loadingCls,r.loadingUseMsg=i.loadingUseMsg,r.itemSelector=r.getItemSelector(),r.all=i.all,r.bindStore(i.dataSource,!0,"dataSource")},subViewBindStore:function(e,t){var i,n=this.ownerGrid;this.destroying||this.destroyed||n.destroying||n.destroyed||(this.isNormalView&&((i=this.getSelectionModel()).bindStore(e,t),i.bindComponent(this)),this.refreshNeeded=!0)},beforeNormalGridRender:function(){this.ownerGrid.lockedGrid.getHeader()&&!this.title&&(this.title=" "),this.callParent()},onPanelRender:function(e){var t=this,i=t.loadMask,n={target:t.ownerGrid,msg:t.loadingText,msgCls:t.loadingCls,useMsg:t.loadingUseMsg,store:t.ownerGrid.store};t.el=e,t.rendered=!0,t.fireEvent("render",t),i&&(Ext.isObject(i)&&(n=Ext.apply(n,i)),t.loadMask=new Ext.LoadMask(n))},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(e){return e.getView().getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getItemSelector:function(){return this.normalView.getItemSelector()},onItemMouseEnter:function(e,t){var i,n=this.lockedView,r=this.normalView;e.trackOver&&(e!==n&&(r=n),i=r.getNode(t),r.highlightItem(i))},onItemMouseLeave:function(e,t){var i=this.lockedView,n=this.normalView;e.trackOver&&(e!==i&&(n=i),n.clearHighlight())},relayFn:function(e,t){var i=this.lockedView;t=t||[],this.relayingOperation=!0,i[e].apply(i,t),(i=this.normalView)[e].apply(i,t),this.relayingOperation=!1},getSelectionModel:function(){return this.normalView.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(e){var t=this.lockedView,i=this.normalView;!i.componentLayoutCounter||t.blockRefresh&&i.blockRefresh||(Ext.suspendLayouts(),t.doFirstRefresh(e),i.doFirstRefresh(e),Ext.resumeLayouts(!0))},getStoreListeners:function(){return{priority:1e3,refresh:this.onDataRefresh,replace:this.onReplace,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.onDataRefresh,beginupdate:this.onBeginUpdate,endupdate:this.onEndUpdate}},onOwnerGridHide:function(){Ext.suspendLayouts(),this.relayFn("onOwnerGridHide",arguments),Ext.resumeLayouts(!0)},onOwnerGridShow:function(){Ext.suspendLayouts(),this.relayFn("onOwnerGridShow",arguments),Ext.resumeLayouts(!0)},onBeginUpdate:function(){Ext.suspendLayouts(),this.relayFn("onBeginUpdate",arguments),Ext.resumeLayouts(!0)},onEndUpdate:function(){Ext.suspendLayouts(),this.relayFn("onEndUpdate",arguments),Ext.resumeLayouts(!0)},onDataRefresh:function(){Ext.suspendLayouts(),this.relayFn("onDataRefresh",arguments),Ext.resumeLayouts(!0)},onReplace:function(){Ext.suspendLayouts(),this.relayFn("onReplace",arguments),Ext.resumeLayouts(!0)},onAdd:function(){Ext.suspendLayouts(),this.relayFn("onAdd",arguments),Ext.resumeLayouts(!0)},onRemove:function(){Ext.suspendLayouts(),this.relayFn("onRemove",arguments),Ext.resumeLayouts(!0)},setActionableMode:function(e,t){var i,n;if(e)return!!(t=t||this.getNavigationModel().getPosition())&&((t=t.clone()).view=n=t.column.getView(),!1!==(i=n.setActionableMode(e,t))&&n.lockingPartner.grid.isVisible()&&(n.lockingPartner.setActionableMode(e,t),n.lockingPartner.actionableMode||(n.setActionableMode(!1),i=!1)),i);this.relayFn("setActionableMode",[!1,t])},onUpdate:function(){Ext.suspendLayouts(),this.relayFn("onUpdate",arguments),Ext.resumeLayouts(!0)},refresh:function(){var e=this.lockedView,t=this.normalView;Ext.suspendLayouts(),e.clearViewEl(!0),t.clearViewEl(!0),t.refresh(),e.refresh(),Ext.resumeLayouts(!0)},refreshView:function(){var e=this.lockedView,t=this.normalView,i=t.all.startIndex;Ext.suspendLayouts(),e.clearViewEl(!0),t.clearViewEl(!0),t.refreshView(i),e.refreshView(i),Ext.resumeLayouts(!0)},setScrollable:function(e){Ext.suspendLayouts(),this.lockedView.setScrollable(e),e.isScroller&&(e=new Ext.scroll.Scroller(e.initialConfig)),this.normalView.setScrollable(e),Ext.resumeLayouts(!0)},getNode:function(e){return this.normalView.getNode(e)},getRow:function(e){return this.normalView.getRow(e)},getCell:function(e,t,i){var n=t.getView().getRow(e).querySelector(t.getCellSelector());return i?Ext.get(n):n},indexOf:function(e){var t=this.lockedView.indexOf(e);return t=t||this.normalView.indexOf(e)},focus:function(){var e=this.ownerGrid.down(">tablepanel:not(hidden)>tableview");e&&e.focus()},focusRow:function(e){var t=this.getNavigationModel().lastFocused;(t?t.view:this.normalView).focusRow(e)},focusCell:function(e){e.view.focusCell(e)},onRowFocus:function(){this.relayFn("onRowFocus",arguments)},cancelFocusTask:function(){this.lockedView.cancelFocusTask(),this.normalView.cancelFocusTask()},isVisible:function(e){return this.ownerGrid.isVisible(e)},getCellInclusive:function(e,t){var i=e.column,n=this.lockedGrid.getColumnManager().getColumns().length;return n<=i?((e=Ext.apply({},e)).column-=n,this.normalView.getCellInclusive(e,t)):this.lockedView.getCellInclusive(e,t)},getHeaderByCell:function(e){return!!e&&this.getVisibleColumnManager().getHeaderById(e.getAttribute("data-columnId"))},onRowSelect:function(){this.relayFn("onRowSelect",arguments)},onRowDeselect:function(){this.relayFn("onRowDeselect",arguments)},onCellSelect:function(e){e.column.getView().onCellSelect({record:e.record,column:e.column})},onCellDeselect:function(e){e.column.getView().onCellDeselect({record:e.record,column:e.column})},getCellByPosition:function(e,t){var i=e.view,n=e.column;return i===this&&(e=new Ext.grid.CellContext(n.getView()).setPosition(e.record,e.column)),i.getCellByPosition(e,t)},getRecord:function(e){var t=this.lockedView.getRecord(e);return t=t||this.normalView.getRecord(e)},scrollBy:function(){var e=this.ownerGrid.getScrollable();e.scrollBy.apply(e,arguments)},ensureVisible:function(){var e=this.normalView;e.ensureVisible.apply(e,arguments)},disable:function(){this.relayFn("disable",arguments)},enable:function(){this.relayFn("enable",arguments)},addElListener:function(){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){this.rendered=!1,this.bindStore(null,!1,"dataSource"),Ext.destroy(this.selModel,this.navigationModel,this.loadMask),this.lockedView.lockingPartner=this.normalView.lockingPartner=null,this.callParent()}},function(){this.borrow(Ext.Component,["up"]),this.borrow(Ext.view.AbstractView,["doFirstRefresh","applyFirstRefresh"]),this.borrow(Ext.view.Table,["cellSelector","selectedCellCls","selectedItemCls"])}),Ext.define("Ext.scroll.LockingScroller",{extend:"Ext.scroll.Scroller",alias:"scroller.locking",config:{lockedScroller:null,normalScroller:null},scrollTo:function(e,t,i){var n,r,o;return Ext.isObject(e)&&(n=e.lockedX)&&(r=this.getLockedScroller().scrollTo(n,null,i)),o=this.callParent([e,t,i]),r&&(o=Ext.Promise.all([o,r])),o},updateLockedScroller:function(e){e.on("scroll","onLockedScroll",this),e.setLockingScroller(this)},updateNormalScroller:function(e){e.on("scroll","onNormalScroll",this),e.setLockingScroller(this)},updateTouchAction:function(e,t){this.callParent([e,t]),this.getLockedScroller().setTouchAction(e),this.getNormalScroller().setTouchAction(e)},getPosition:function(){var e=this.callParent();return e.x=this.getNormalScroller().getPosition().x,e.lockedX=this.getLockedScroller().getPosition().x,e},privates:{updateSpacerXY:function(e){var t,i=this.getLockedScroller(),n=this.getNormalScroller(),r=i.component,o=n.component;t=e.y+(o.headerCt.tooNarrow||r.headerCt.tooNarrow?Ext.scrollbar.height():0),o.stretchHeight(t),r.stretchHeight(t),this.callParent([e])},doScrollTo:function(e,t,i){var n,r;return null!=e&&(r=this.getNormalScroller().scrollTo(e,null,i),e=null),n=this.callParent([e,t,i]),r&&(n=Ext.Promise.all([n,r])),n},onLockedScroll:function(e,t,i){this.position.lockedX=t},onNormalScroll:function(e,t,i){this.position.x=t},readPosition:function(e){return(e=(e=this.callParent([e]))||{}).x=this.getNormalScroller().getPosition().x,e}}}),Ext.define("Ext.grid.locking.Lockable",{alternateClassName:"Ext.grid.Lockable",requires:["Ext.grid.locking.View","Ext.grid.header.Container","Ext.grid.locking.HeaderContainer","Ext.view.Table","Ext.scroll.LockingScroller"],syncRowHeight:!0,headerCounter:0,lockedGridCls:Ext.baseCSSPrefix+"grid-inner-locked",normalGridCls:Ext.baseCSSPrefix+"grid-inner-normal",lockingBodyCls:Ext.baseCSSPrefix+"grid-locking-body",scrollContainerCls:Ext.baseCSSPrefix+"grid-scroll-container",scrollBodyCls:Ext.baseCSSPrefix+"grid-scroll-body",scrollbarClipperCls:Ext.baseCSSPrefix+"grid-scrollbar-clipper",scrollbarCls:Ext.baseCSSPrefix+"grid-scrollbar",scrollbarVisibleCls:Ext.baseCSSPrefix+"grid-scrollbar-visible",lockText:"Lock",unlockText:"Unlock",bothCfgCopy:["hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","multiColumnSort","columnLines","rowLines","variableRowHeight","numFromEdge","trailingBufferZone","leadingBufferZone","scrollToLoadBuffer","syncRowHeight"],normalCfgCopy:["scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(e){return this.subGridXType?this.subGridXType:e&&this.isXType("treepanel")?"treepanel":"gridpanel"},injectLockable:function(){this.focusable=!1,this.lockable=!0,this.hasView=!0;var e,t,i,n,r,o,a,s,l,d=this,u=d.store=Ext.StoreManager.lookup(d.store),c=d.lockedViewConfig,h=d.normalViewConfig,f=d.viewConfig,g=f&&f.loadMask,p=void 0!==g?g:d.loadMask,m=d.bufferedRenderer;for(e=d.constructLockableFeatures(),d.scrollable=new Ext.scroll.LockingScroller({component:d,x:!1,y:!0}),d.features=null,t=d.constructLockablePlugins(),d.plugins=t.topPlugins,i={id:d.id+"-locked",$initParent:d,isLocked:!0,bufferedRenderer:m,ownerGrid:d,ownerLockable:d,xtype:d.determineXTypeToCreate(!0),store:u,scrollerOwner:!1,animate:!1,border:!1,cls:d.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||this.ownerGrid.normalGrid.floatedFromCollapse},features:e.lockedFeatures,plugins:t.lockedPlugins},n={id:d.id+"-normal",$initParent:d,isLocked:!1,bufferedRenderer:m,ownerGrid:d,ownerLockable:d,xtype:d.determineXTypeToCreate(),store:u,reserveScrollbar:d.reserveScrollbar,scrollerOwner:!1,border:!1,cls:d.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||this.ownerGrid.lockedGrid.floatedFromCollapse},features:e.normalFeatures,plugins:t.normalPlugins},d.addCls(Ext.baseCSSPrefix+"grid-locked"),Ext.copy(n,d,d.bothCfgCopy,!0),Ext.copy(i,d,d.bothCfgCopy,!0),Ext.copy(n,d,d.normalCfgCopy,!0),Ext.copy(i,d,d.lockedCfgCopy,!0),Ext.apply(n,d.normalGridConfig),Ext.apply(i,d.lockedGridConfig),l=0;l<d.normalCfgCopy.length;l++)delete d[d.normalCfgCopy[l]];for(l=0;l<d.lockedCfgCopy.length;l++)delete d[d.lockedCfgCopy[l]];d.addStateEvents(["lockcolumn","unlockcolumn"]),r=d.processColumns(d.columns||[],i),i.columns=r.locked,i.columns.items.length||(i.hidden=!0),n.columns=r.normal,n.columns.items.length||(n.hidden=!0),n.flex=1,i.viewConfig=c=Ext.apply({usageBitMask:2},c),n.viewConfig=h=Ext.apply({},h),c.loadingUseMsg=!1,c.loadMask=!1,h.loadMask=!1,f&&f.id&&Ext.log.warn('id specified on Lockable viewConfig, it will be shared between both views: "'+f.id+'"'),Ext.applyIf(c,f),Ext.applyIf(h,f),d.layout===Ext.panel.Table.prototype.layout&&(d.layout={type:"hbox",align:"stretch"}),d.getLayout(),"border"===d.layout.type&&(d.split&&(i.split=d.split),i.region||(i.region="west"),n.region||(n.region="center"),d.addCls(Ext.baseCSSPrefix+"grid-locked-split")),d.layout instanceof Ext.layout.container.Box||(d.split=!1),d.view=new Ext.grid.locking.View({loadMask:p,locked:i,normal:n,ownerGrid:d}),d.view.relayEvents(d.scrollable,["scroll"]),i=d.lockedGrid,n=d.normalGrid,i.on({beginfloat:d.onBeginLockedFloat,endfloat:d.onEndLockedFloat,scope:d}),s=i.setWidth,i.setWidth=function(){i.shrinkWrapColumns=!1,s.apply(i,arguments)},i.getVisibleColumnManager().getColumns().length||i.hide(),n.getVisibleColumnManager().getColumns().length||n.hide(),o=i.headerCt,a=n.headerCt,d.headerCt=d.view.headerCt=new Ext.grid.locking.HeaderContainer(d),o.lockedCt=!0,o.lockableInjected=!0,a.lockableInjected=!0,o.on({add:d.delaySyncLockedWidth,remove:d.delaySyncLockedWidth,columnshow:d.delaySyncLockedWidth,columnhide:d.delaySyncLockedWidth,sortchange:d.onLockedHeaderSortChange,columnresize:d.delaySyncLockedWidth,scope:d}),a.on({add:d.delaySyncLockedWidth,remove:d.delaySyncLockedWidth,columnshow:d.delaySyncLockedWidth,columnhide:d.delaySyncLockedWidth,sortchange:d.onNormalHeaderSortChange,scope:d}),d.modifyHeaderCt(),d.items=[i],d.split&&(d.addCls(Ext.baseCSSPrefix+"grid-locked-split"),d.items[1]=Ext.apply({xtype:"splitter"},d.split)),d.items.push(n),d.relayHeaderCtEvents(o),d.relayHeaderCtEvents(a),d.storeRelayers=d.relayEvents(u,["filterchange","groupchange","beforeload","load"]),d.gridRelayers=d.relayEvents(n,["viewready"])},afterInjectLockable:function(){var e=this;e.maskElement="scrollContainer",e.disableOnRender&&e.on("afterrender",function(){e.unmask()},{single:!0}),delete e.lockedGrid.$initParent,delete e.normalGrid.$initParent},syncLockableHeaderVisibility:function(){var e=this.hideHeaders,t=this.lockedGrid,i=this.normalGrid;null===e&&(e=t.shouldAutoHideHeaders()&&i.shouldAutoHideHeaders()),t.hideHeaders=i.hideHeaders=e,t.syncHeaderVisibility(),i.syncHeaderVisibility()},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},onBeginLockedFloat:function(e){var t=e.getContentTarget().dom,i=this.lockedGrid.headerCt,n=this.normalGrid.headerCt,r=Math.max(n.getHeight(),i.getHeight());i.minHeight=r,n.minHeight=r,e.el.addCls(Ext.panel.Panel.floatCls),t.firstChild!==e.view.el.dom&&t.appendChild(e.view.el.dom),e.body.dom.scrollTop=this.getScrollable().getPosition().y},onEndLockedFloat:function(){var e=this.lockedGrid;e.collapsed?e.el.removeCls(Ext.panel.Panel.floatCls):this.lockedGrid.headerCt.minHeight=this.normalGrid.headerCt.minHeight=null,this.lockedScrollbarClipper.appendChild(e.view.el.dom),this.doSyncLockableLayout()},beforeLayout:function(){var e,t=this.lockedGrid,i=this.normalGrid;t&&i&&(t.getSizeModel().width.shrinkWrap&&(t.gridPanelBorderWidth=t.el.getBorderWidth("lr"),t.shrinkWrapColumns=!0),t.shrinkWrapColumns&&(e=t.headerCt.getTableWidth(),isNaN(e)&&Ext.raise("Locked columns in an unsized locked side do NOT support a flex width."),t.setWidth(e+t.gridPanelBorderWidth),t.shrinkWrapColumns=!0),this.scrollContainer||this.initScrollContainer(),this.lastScrollPos=Ext.clone(this.getScrollable().getPosition()),t.view.el.setStyle("margin-bottom",""),i.view.el.setStyle("margin-bottom",""))},syncLockableLayout:function(){this.afterLayoutListener||(this.afterLayoutListener=Ext.on({afterlayout:this.doSyncLockableLayout,scope:this,single:!0}))},doSyncLockableLayout:function(){var e,t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E,b,C=this,S=C.isCollapsingOrExpanding,w=C.lockedGrid,T=C.normalGrid;C.afterLayoutListener=null,S?2===S&&C.on("expand","doSyncLockableLayout",C,{single:!0}):w&&T&&(m=w.isVisible(!0)&&!w.collapsed,x=T.isVisible(!0),e=w.view.el,t=T.view.el,y=C.scrollBody.dom,i=m?w.body.getRegion(!0):new Ext.util.Region(0,0,0,0),n=x?T.body.getRegion(!0):new Ext.util.Region(0,0,0,0),o=(r=Ext.scrollbar.size()).width,a=E=r.height,s=x?n.width:0,l=m?x?n.x-i.x:i.width:0,u=T.headerCt.tooNarrow||w.headerCt.tooNarrow?a:0,c=n.height||i.height,h=C.lockedScrollbar,f=C.normalScrollbar,g=C.scrollbarVisibleCls,b=C.getScrollable(),Ext.supports.CannotScrollExactHeight&&(E+=1),u&&(e.setStyle("margin-bottom",-a+"px"),t.setStyle("margin-bottom",-a+"px"),c-=a,m&&w.view.body.dom&&C.lockedScrollbarScroller.setSize({x:w.headerCt.getTableWidth()}),T.view.body.dom&&C.normalScrollbarScroller.setSize({x:T.headerCt.getTableWidth()})),C.scrollBody.setHeight(c),e.dom.style.height=t.dom.style.height="",p=C.scrollable.getSize().y+u,T.view.stretchHeight(p),w.view.stretchHeight(p),(d=o&&y.scrollHeight>y.clientHeight)&&s&&(s-=o,t.setStyle("width",s+"px")),h.toggleCls(g,m&&!!u),f.toggleCls(g,!!u),C.normalScrollbarClipper.toggleCls(C.scrollbarClipperCls+"-floated",!!C.normalGrid.floatedFromCollapse),C.normalScrollbar.toggleCls(C.scrollbarCls+"-floated",!!C.normalGrid.floatedFromCollapse),C.lockedScrollbarClipper.toggleCls(C.scrollbarClipperCls+"-floated",!!C.lockedGrid.floatedFromCollapse),C.lockedScrollbar.toggleCls(C.scrollbarCls+"-floated",!!C.lockedGrid.floatedFromCollapse),h.setSize(C.lockedScrollbarClipper.dom.offsetWidth,E),f.setSize(s,E),C.setNormalScrollerX(l),v=m&&x?i.union(n):m?i:n,C.scrollContainer.setBox(v),C.onSyncLockableLayout(d,v.width),Ext.Object.equals(b.getPosition(),C.lastScrollPos)||b.scrollTo(C.lastScrollPos))},onSyncLockableLayout:Ext.emptyFn,setNormalScrollerX:function(e){this.normalScrollbar.setLocalX(e),this.normalScrollbarClipper.setLocalX(e)},getScrollExtraCls:function(){return""},initScrollContainer:function(){var e,t,i,n,r=this,o=r.getScrollExtraCls(),a=r.scrollContainer=r.body.insertFirst({cls:[r.scrollContainerCls,o]}),s=r.scrollBody=a.appendChild({cls:r.scrollBodyCls}),l=r.lockedScrollbar=a.appendChild({cls:[r.scrollbarCls,r.scrollbarCls+"-locked",o]}),d=r.normalScrollbar=a.appendChild({cls:[r.scrollbarCls,o]}),u=r.lockedGrid.view,c=r.normalGrid.view,h=u.getScrollable(),f=c.getScrollable(),g=Ext.scroll.Scroller;u.stretchHeight(0),c.stretchHeight(0),r.scrollable.setConfig({element:s,lockedScroller:h,normalScroller:f}),i=r.lockedScrollbarClipper=s.appendChild({cls:[r.scrollbarClipperCls,r.scrollbarClipperCls+"-locked",o]}),n=r.normalScrollbarClipper=s.appendChild({cls:[r.scrollbarClipperCls,o]}),i.appendChild(u.el),n.appendChild(c.el),u.ignoreDomPosition=!0,c.ignoreDomPosition=!0,e=r.lockedScrollbarScroller=new g({element:l,x:"scroll",y:!1,rtl:h.getRtl&&h.getRtl()}),t=r.normalScrollbarScroller=new g({element:d,x:"scroll",y:!1,rtl:f.getRtl&&f.getRtl()}),r.initScrollers(),e.addPartner(h,"x"),t.addPartner(f,"x"),r.view.onPanelRender(s)},initScrollers:Ext.emptyFn,processColumns:function(e,t){var i,n,r,o,a=new Ext.grid.header.Container({$initParent:this}),s=[],l=[],d={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:s},u={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:l},c={locked:d,normal:u};for(Ext.isObject(e)&&(Ext.applyIf(d,e),Ext.applyIf(u,e),delete(o=Ext.apply({},e)).items,Ext.apply(a,o),e=e.items),a.constructing=!0,i=0,n=e.length;i<n;++i)(r=e[i]).isComponent||delete(r=((r=a.applyDefaults(r)).$initParent=a).lookupComponent(r)).$initParent,r.processed=!0,r.locked||r.autoLock?s.push(r):l.push(r);return this.fireEvent("processcolumns",this,s,l),a.destroy(),c},ensureLockedVisible:function(e,t){var i=t&&t.column,n=this.lockedGrid,r=i?i.getView().ownerCt:n.isVisible()?n:this.normalGrid;r.ensureVisible.apply(r,arguments)},syncRowHeights:function(){if(!this.destroyed){var e,t=this.normalGrid.getView(),i=this.lockedGrid.getView(),n=t.syncRowHeightBegin(),r=i.syncRowHeightBegin();t.syncRowHeightMeasure(n),i.syncRowHeightMeasure(r),t.syncRowHeightFinish(n,r),i.syncRowHeightFinish(r,n),e=t.getScrollY(),i.setScrollY(e),this.syncRowHeightOnNextLayout=!1}},modifyHeaderCt:function(){var e=this;e.lockedGrid.headerCt.getMenuItems=e.getMenuItems(e.lockedGrid.headerCt.getMenuItems,!0),e.normalGrid.headerCt.getMenuItems=e.getMenuItems(e.normalGrid.headerCt.getMenuItems,!1),e.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(e.lockedGrid.headerCt.showMenuBy,e.showMenuBy),e.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(e.normalGrid.headerCt.showMenuBy,e.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(e,t,i){var n=this.getMenu(),r=n.down("#unlockItem"),o=n.down("#lockItem"),a=r.prev();!1===i.lockable?(a.hide(),r.hide(),o.hide()):(a.show(),r.show(),o.show(),r.initialConfig.disabled||r.setDisabled(!1===i.lockable),o.initialConfig.disabled||o.setDisabled(!i.isLockable()))},getMenuItems:function(t,i){var n=this.unlockText,r=this.lockText,o=Ext.baseCSSPrefix+"hmenu-unlock",a=Ext.baseCSSPrefix+"hmenu-lock",s=this.onUnlockMenuClick.bind(this),l=this.onLockMenuClick.bind(this);return function(){var e=t.call(this);return e.push("-",{itemId:"unlockItem",iconCls:o,text:n,handler:s,disabled:!i}),e.push({itemId:"lockItem",iconCls:a,text:r,handler:l,disabled:i}),e}},syncTaskDelay:1,delaySyncLockedWidth:function(){var e=this.syncLockedWidthTask||(this.syncLockedWidthTask=new Ext.util.DelayedTask(this.syncLockedWidth,this));this.reconfiguring||(Ext.Component.layoutSuspendCount&&0!==this.syncTaskDelay?e.delay(1):this.syncLockedWidth())},syncLockedWidth:function(){var e=this,t=e.rendered,i=e.lockedGrid,n=e.normalGrid,r=i.getVisibleColumnManager().getColumns().length,o=n.getVisibleColumnManager().getColumns().length,a=e.syncLockedWidthTask;if(a&&a.cancel(),!e.reconfiguring)return Ext.suspendLayouts(),o?(n.show(),r?("border"===e.layout.type?i.region=i.initialConfig.region:i.flex=i.initialConfig.flex,t&&i.shrinkWrapColumns&&!i.headerCt.forceFit&&(delete i.flex,i.width=i.headerCt.getTableWidth()+i.gridPanelBorderWidth,i.updateLayout()),i.addCls(e.lockedGridCls),i.show(),i.split&&(e.child("splitter").show(),e.addCls(Ext.baseCSSPrefix+"grid-locked-split"))):(i.hide(),t&&i.getView().clearViewEl(!0),i.split&&(e.child("splitter").hide(),e.removeCls(Ext.baseCSSPrefix+"grid-locked-split")))):(n.hide(),delete i.width,"border"===e.layout.type?(i.region="center",n.region="west"):i.flex=1,i.removeCls(e.lockedGridCls),i.show()),Ext.resumeLayouts(!0),{locked:!!r,normal:!!o}},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(e,t,i){var n,r,o=this.normalGrid,a=this.lockedGrid,s=o.view,l=a.view,d=s.getScrollable(),u=l.getScrollable(),c=o.headerCt;(e=e||c.getMenu().activeHeader).unlockedWidth=e.width,e.flex&&(e.lockedWidth?(e.width=e.lockedWidth,e.lockedWidth=null):e.width=e.lastBox.width,e.flex=null),i=i||a.headerCt,e.ownerCt&&!e.isLockable()||(Ext.suspendLayouts(),d&&(d.suspendPartnerSync(),u.suspendPartnerSync()),a.hidden&&(a.componentLayoutCounter||(a.height=o.lastBox.height,(r=l.bufferedRenderer)&&(r.rowHeight=s.bufferedRenderer.rowHeight,r.onViewResize(l,0,o.body.lastBox.height))),a.show()),a.reconfiguring=o.reconfiguring=!0,e.ownerCmp=e.ownerCt,e.locked=!0,Ext.isDefined(t)?i.insert(t,e):i.add(e),a.reconfiguring=o.reconfiguring=!1,e.ownerCmp=null,e.rootHeaderCt=null,e.view=l,n=this.syncLockedWidth(),o.getView().refreshNeeded=n.normal,a.getView().refreshNeeded=n.locked,e.onLock(e),this.fireEvent("lockcolumn",this,e),Ext.resumeLayouts(!0),d&&(d.resumePartnerSync(!0),u.resumePartnerSync()))},unlock:function(e,t,i){var n,r=this.normalGrid,o=this.lockedGrid,a=r.view,s=o.view,l=a.all.startIndex,d=o.headerCt;Ext.isDefined(t)||(t=0),(e=e||d.getMenu().activeHeader).lockedWidth=e.width,e.flex&&(e.unlockedWidth?(e.width=e.unlockedWidth,e.unlockedWidth=null):e.width=e.lastBox.width,e.flex=null),i=i||r.headerCt,Ext.suspendLayouts(),o.reconfiguring=r.reconfiguring=!0,e.ownerCmp=e.ownerCt,e.ownerCt&&e.ownerCt.remove(e,!1),e.locked=!1,i.insert(t,e),o.reconfiguring=r.reconfiguring=!1,e.ownerCmp=null,e.rootHeaderCt=null,e.view=a,(n=this.syncLockedWidth()).locked&&s.clearViewEl(!0),n.normal&&a.clearViewEl(!0),n.normal&&r.getView().refreshView(l),n.locked&&o.getView().refreshView(l),e.onUnlock(e),this.fireEvent("unlockcolumn",this,e),Ext.resumeLayouts(!0)},reconfigureLockable:function(e,t,i){var n,r,o,a=this,s=a.store,l=a.lockedGrid,d=a.normalGrid,u=l.view,c=d.view;!e&&i&&(e=Ext.StoreManager.lookup("ext-empty-store")),e&&e!==s&&(e=Ext.data.StoreManager.lookup(e),a.store=e,u.blockRefresh=c.blockRefresh=!0,l.bindStore(e),u.store=e,u.dataSource.isFeatureStore||(u.dataSource=e),u.bufferedRenderer&&u.bufferedRenderer.bindStore(e),d.bindStore(e),c.store=e,c.dataSource.isFeatureStore||(c.dataSource=e),c.bufferedRenderer&&c.bufferedRenderer.bindStore(e),a.view.store=e,(r=a.view.loadMask)&&r.isLoadMask&&r.bindStore(e),a.view.bindStore(c.dataSource,!1,"dataSource"),u.blockRefresh=c.blockRefresh=!1),t&&(l.reconfiguring=d.reconfiguring=!0,n=l.getVisibleColumnManager().getColumns().length,l.headerCt.removeAll(),d.headerCt.removeAll(),(o=(t=a.processColumns(t,l)).locked.items).length&&(n||(l.view.refreshNeeded=!0),l.headerCt.add(o)),d.headerCt.add(t.normal.items),l.reconfiguring=d.reconfiguring=!1,a.syncLockedWidth()),a.refreshCounter=c.refreshCounter},afterReconfigureLockable:function(){this.syncLockedWidth(),this.refreshCounter===this.normalGrid.getView().refreshCounter&&this.view.refreshView()},constructLockableFeatures:function(){var e,t,i,n,r,o,a=this.features;if(a)for(Ext.isArray(a)||(a=[a]),i=[],n=[],r=0,o=a.length;r<o;r++)switch((e=a[r]).isFeature||(e=Ext.create("feature."+e.ftype,e)),e.lockableScope){case"locked":i.push(e);break;case"normal":n.push(e);break;default:e.lockableScope="both",i.push(e),n.push(t=e.clone()),(t.lockingPartner=e).lockingPartner=t}return{normalFeatures:n,lockedFeatures:i}},constructLockablePlugins:function(){var e,t,i,n,r,o,a,s,l=this.plugins;if(l)for(Ext.isArray(l)||(l=[l]),n=[],r=[],o=[],a=0,s=l.length;a<s;a++)switch((e=l[a]).init?e.lockableScope:(e.ptype?Ext.ClassManager.getByAlias("plugin."+e.ptype):Ext.ClassManager.get(e.xclass)).prototype.lockableScope){case"both":r.push(i=e.clonePlugin()),o.push(t=e.clonePlugin()),(i.lockingPartner=t).lockingPartner=i,Ext.destroy(e);break;case"locked":r.push(e);break;case"normal":o.push(e);break;default:n.push(e)}return{topPlugins:n,normalPlugins:o,lockedPlugins:r}},destroyLockable:function(){var e=this,t=e.syncLockedWidthTask;t&&(t.cancel(),e.syncLockedWidthTask=null),e.lockedGrid&&e.lockedGrid.headerCt&&(e.lockedGrid.headerCt.showMenuBy=null),e.normalGrid&&e.normalGrid.headerCt&&(e.normalGrid.headerCt.showMenuBy=null),Ext.destroy(e.normalScrollbarClipper,e.lockedScrollbarClipper,e.normalScrollbar,e.lockedScrollbar,e.scrollBody,e.scrollContainer,e.normalScrollbarScroller,e.lockedScrollbarScroller,e.view,e.headerCt)}},function(){this.borrow(Ext.Component,["constructPlugin"])}),Ext.define("Ext.grid.plugin.BufferedRenderer",{extend:"Ext.plugin.Abstract",requires:["Ext.grid.locking.RowSynchronizer"],alias:"plugin.bufferedrenderer",isBufferedRenderer:!0,lockableScope:"both",numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:!0,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,scrollTop:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,loadId:0,init:function(e){var t=this,i=e.view,n={refresh:t.onViewRefresh,columnschanged:t.checkVariableRowHeight,scope:t,destroyable:!0},r={scroll:t.onViewScroll,scope:t},o=i.initialConfig;t.scroller=i.lockingPartner?i.ownerGrid.scrollable:i.getScrollable(),(e.isTree||e.ownerLockable&&e.ownerLockable.isTree)&&(i.blockRefresh=!1,o&&void 0===o.loadMask&&(i.loadMask=!0)),i.positionBody&&(n.refresh=t.onViewRefresh),t.grid=e,t.view=i,t.isRTL=i.getInherited().rtl,i.bufferedRenderer=t,i.preserveScrollOnRefresh=!0,i.animate=!1,t.bindStore(i.dataSource),i.hasOwnProperty("rowHeight")&&(t.rowHeight=i.rowHeight),t.position=0,t.viewListeners=i.on(n),t.scroller&&(t.scrollListeners=t.scroller.on(r))},checkVariableRowHeight:function(){var e=this.variableRowHeight;this.variableRowHeight=this.view.hasVariableRowHeight(),!!this.variableRowHeight!=!!e&&delete this.rowHeight},bindStore:function(e){var t=this,i=t.store;i&&i.isFeatureStore||(i&&t.unbindStore(),t.storeListeners=e.on({scope:t,groupchange:t.onStoreGroupChange,clear:t.onStoreClear,beforeload:t.onBeforeStoreLoad,load:t.onStoreLoad,destroyable:!0}),t.store=e,t.setBodyTop(t.position=t.scrollTop=0),delete t.viewSize,delete t.rowHeight,e.isBufferedStore&&e.setViewSize(t.viewSize))},unbindStore:function(){this.storeListeners.destroy(),this.storeListeners=this.store=null},onBeforeStoreLoad:function(e){var t=this,i=t.view;i&&i.refreshCounter&&(e.isTreeStore||i.preserveScrollOnReload?t.nextRefreshStartIndex=i.all.startIndex:0!==t.scrollTop&&(t.setBodyTop(t.bodyTop=t.scrollTop=t.position=t.scrollHeight=t.nextRefreshStartIndex=0),t.scroller.scrollTo(null,0)),t.lastScrollDirection=t.scrollOffset=null),t.disable()},onStoreLoad:function(){this.isStoreLoading=!0,this.enable()},onStoreClear:function(){var e=this,t=e.view;t.rendered&&!e.store.destroyed&&(0!==e.scrollTop&&(e.bodyTop=e.scrollTop=e.position=e.scrollHeight=0,e.nextRefreshStartIndex=null,e.scroller.scrollTo(null,0)),t.refresh(),e.lastScrollDirection=e.scrollOffset=null)},onStoreGroupChange:function(e){this.refreshSize()},onViewRefresh:function(e,t){var i,n=this,r=e.all;if(n.checkVariableRowHeight(),!e.componentLayoutCounter&&(e.headerCt.down("{flex}")||n.variableRowHeight))return e.on({boxready:Ext.Function.pass(n.onViewRefresh,[e,t],n),single:!0}),void(n.skipNextRefreshSize=!0);n.skipNextRefreshSize=!1,n.refreshing||(n.refreshSize(),n.scroller&&(n.scrollTop!==n.scroller.getPosition().y?n.onViewScroll():(n.hasOwnProperty("bodyTop")||(n.bodyTop=r.startIndex*n.rowHeight,n.scroller.scrollTo(null,n.bodyTop)),n.setBodyTop(n.bodyTop),(i=e.lastBox&&e.lastBox.height)&&r.getCount()&&(n.onViewResize(e,null,i),t&&r.getCount()!==t.length&&(t.length=0,t.push.apply(t,n.store.getRange(r.startIndex,r.endIndex)))))))},beforeTableLayout:function(e){var t,i=this.view.body.dom;i&&(t=this.grid.getElementSize(i),e.bodyHeight=t.height,e.bodyWidth=t.width)},afterTableLayout:function(e){var t,i=this,n=i.view;e.bodyHeight&&n.body.dom&&(delete i.rowHeight,i.refreshSize(),(t=i.grid.getElementHeight(n.body.dom))!==e.bodyHeight&&(i.onViewResize(n,null,n.el.lastBox.height),(t=i.bodyHeight)<e.bodyHeight&&(i.viewSize>=i.store.getCount()?i.setBodyTop(0):(i.bodyTop>i.scrollTop||i.bodyTop+t<i.scrollTop+i.viewClientHeight)&&i.setBodyTop(i.scrollTop-i.trailingBufferZone*i.rowHeight)),n.all.endIndex===n.dataSource.getCount()-1&&i.stretchView(n,i.scrollHeight=i.bodyTop+t-1)))},refreshSize:function(){var e=this.view,t=this.skipNextRefreshSize||Ext.Component.pendingLayouts&&Ext.Component.layoutSuspendCount||!e.body.dom;this.skipNextRefreshSize=!1,t||(this.bodyHeight=this.grid.getElementHeight(e.body.dom),this.scrollHeight=this.getScrollHeight(),this.stretchView(e,this.scrollHeight))},onViewResize:function(e,t,i,n,r){var o;this.refreshSize(),r&&i===r||(Ext.suspendLayouts(),this.viewClientHeight=i||e.el.dom.clientHeight,o=Math.ceil(i/Math.min(this.getThemeRowHeight(),this.rowHeight))+this.trailingBufferZone+this.leadingBufferZone,this.viewSize=this.setViewSize(o),Ext.resumeLayouts(!0))},stretchView:function(e,t){var i,n=this;n.scrollTop>t&&(i=null==n.nextRefreshStartIndex?n.bodyHeight:t-n.bodyHeight,n.position=n.scrollTop=Math.max(i,0),n.scroller.scrollTo(null,n.scrollTop)),n.bodyTop>t&&e.body.translate(null,n.bodyTop=n.position),e.getScrollable()&&n.refreshScroller(e,t)},refreshScroller:function(e,t){var i=e.getScrollable();i&&(i.setElementSize&&i.setElementSize(),i.setSize({x:e.headerCt.getTableWidth(),y:e.lockingPartner?null:t}),e.lockingPartner&&this.scroller.setSize({x:0,y:t}))},setViewSize:function(n,r){var o,e,t,i,a=this,s=a.store,l=a.view,d=l.all,u=d.getCount(),c=s.getCount(),h=a.view.lockingPartner&&a.view.lockingPartner.bufferedRenderer,f=0,g=Math.max(0,c-1),p=Ext.Number.sign(a.getFirstVisibleRowIndex()-d.startIndex-(d.endIndex-a.getLastVisibleRowIndex()));return h&&!r&&h.setViewSize(n,!0),(i=u-n)&&(a.scrollTop=a.scroller?a.scroller.getPosition().y:0,a.viewSize=n,s.isBufferedStore&&s.setViewSize(n),u&&(e=Math.max(0,Math.min(d.startIndex,c-n)),t=Math.min(e+n-1,g),e===d.startIndex&&t===d.endIndex?i<0&&a.handleViewScroll(p):(h&&h.disable(),i<0?n<c&&u<c?s.getRange(e,t,{callback:function(e,t,i){o=l.ownerGrid,i>d.endIndex&&d.scroll(Ext.Array.slice(e,d.endIndex+1,1/0),1,0),t<d.startIndex&&(f=d.first(!0),d.scroll(Ext.Array.slice(e,0,d.startIndex-t),-1,0),a.bodyTop-=f.offsetTop),a.setBodyTop(a.bodyTop),h&&!r&&(o.syncRowHeight||o.syncRowHeightOnNextLayout)&&(h.setViewSize(n,!0),o.syncRowHeights())}}):a.refreshView(0):(1===p&&(f=d.item(d.startIndex+i,!0).offsetTop),d.clip(p,i),a.setBodyTop(a.bodyTop+f)),h&&h.enable())),a.refreshSize()),n},getViewRange:function(){var e,t=this,i=t.view,n=i.all,r=n.getCount(),o=i.lockingPartner&&i.lockingPartner.all,a=t.store,s=0;return!t.hasOwnProperty("viewSize")&&t.ownerCt&&t.ownerCt.height&&(t.viewSize=Math.ceil(t.ownerCt.height/t.rowHeight)),a.data.getCount()?(e=!r&&o&&o.getCount()?(s=o.startIndex,Math.min(o.endIndex,s+t.viewSize-1,a.getCount()-1)):(r?s=n.startIndex:a.isBufferedStore&&(a.currentPage||(a.currentPage=1),s=n.startIndex=(a.currentPage-1)*(a.pageSize||1),a.currentPage=1),s+(t.viewSize||a.defaultViewSize)-1),a.getRange(s,e)):[]},onReplace:function(e,t,i,n){var r,o,a=this,s=a.scroller,l=a.view,d=l.all,u=d.getCount(),c=t+i.length-1,h=n.length-i.length,f=h*a.rowHeight;if(t>=d.startIndex+a.viewSize)a.refreshSize();else{if(u&&c<d.startIndex&&d.getCount()>=a.viewSize)return d.moveBlock(h),a.refreshSize(),r=d.startIndex,0<h&&(a.doNotMirror=!0,a.handleViewScroll(-1),a.doNotMirror=!1),d.startIndex===r?d.startIndex&&(a.setBodyTop(a.bodyTop+=f),l.suspendEvent("scroll"),l.scrollBy(0,f),l.resumeEvent("scroll"),a.position=a.scrollTop=a.scroller.getPosition().y):(l.suspendEvent("scroll"),l.scrollBy(0,(r-d.startIndex)*a.rowHeight),l.resumeEvent("scroll")),void l.refreshSize(d.getCount()!==u);if(u&&t>d.endIndex)return a.refreshSize(),0<h&&a.onRangeFetched(null,d.startIndex,Math.min(e.getCount(),d.startIndex+a.viewSize)-1),void l.refreshSize(d.getCount()!==u);if(t<d.startIndex&&c<=d.endIndex)return o=l.preserveScrollOnRefresh,l.preserveScrollOnRefresh=!1,a.refreshView(d.startIndex-i.length+n.length),void(l.preserveScrollOnRefresh=o);t<d.startIndex&&c<=d.endIndex&&f&&a.doVerticalScroll(s,a.scrollTop+=f,!0),a.refreshView(d.startIndex,f)}},doVerticalScroll:function(e,t,i){e&&(i&&e.suspendEvent("scroll"),e.scrollTo(null,this.position=t),i&&e.resumeEvent("scroll"))},scrollTo:function(n,r){var e,t,o,a,i,s,l,d,u=arguments,c=this,h=c.view,f=h.lockingPartner&&h.lockingPartner.grid.isVisible()&&h.lockingPartner.bufferedRenderer,g=c.store,p=g.getCount();if(void 0===r||r instanceof Object||(r={select:u[1],callback:u[2],scope:u[3]}),(i=h.dataSource.groupingFeature)&&i.collapsible)l=n.isEntity?n:h.store.getAt(Math.min(Math.max(n,0),h.store.getCount()-1)),s=i.getMetaGroup(l),n=s&&s.isCollapsed?i.isExpandingOrCollapsing||l===s.placeholder?(l=s.placeholder,i.indexOfPlaceholder(l)):(i.expand(i.getGroup(l).getGroupKey()),p=g.getCount(),i.indexOf(l)):i.indexOf(l);else if(n.isEntity){if(l=n,-1===(n=g.indexOf(l)))return void Ext.raise("Unknown record passed to BufferedRenderer#scrollTo")}else n=Math.min(Math.max(n,0),p-1),l=g.getAt(n);if(l&&(o=h.getNode(l)))return h.grid.ensureVisible(l,r),void c.onViewScroll();n<h.all.startIndex?(d=-1,e=Math.max(Math.min(n-Math.floor((c.leadingBufferZone+c.trailingBufferZone)/2),p-c.viewSize+1),0),t=Math.min(e+c.viewSize-1,p-1)):(d=1,t=Math.min(n+Math.floor((c.leadingBufferZone+c.trailingBufferZone)/2),p-1),e=Math.max(t-(c.viewSize-1),0)),a=Math.max(e*c.rowHeight,0),g.getRange(e,t,{callback:function(e,t,i){c.renderRange(t,i,!0),l=g.data.getRange(n,n+1)[0],o=h.getNode(l),h.body.translate(null,c.bodyTop=a),1===d&&h.hasVariableRowHeight()&&c.refreshSize(),f&&(f.renderRange(t,i,!0),c.syncRowHeights(),f.view.body.translate(null,f.bodyTop=a),1===d&&f.refreshSize()),o&&(h.grid.ensureVisible(l,r),c.scrollTop=c.position=c.scroller.getPosition().y,f&&(f.position=f.scrollTop=c.scrollTop))}})},onViewScroll:function(e,t,i){var n,r,o=this,a=o.view.body.dom,s=o.store.getCount();null==i&&(i=o.scroller.getPosition().y),o.scrollTop=i,a&&(o.disabled||s<o.viewSize||(r=0<(n=i-o.position)?1:-1,(20<=Math.abs(n)||r!==o.lastScrollDirection)&&(o.lastScrollDirection=r,o.handleViewScroll(o.lastScrollDirection,n))))},handleViewScroll:function(e,t){var i,n,r=this,o=r.view.all,a=r.store.getCount(),s=r.viewSize,l=a-1,d=Math.max(0,a-s);if(-1===e?o.startIndex&&r.topOfViewCloseToEdge()&&(i=Math.max(0,r.getLastVisibleRowIndex()+r.trailingBufferZone-s))>o.startIndex&&(i=Math.max(0,o.startIndex+Math.floor(t/r.rowHeight))):o.endIndex<l&&r.bottomOfViewCloseToEdge()&&(i=Math.max(0,Math.min(r.getFirstVisibleRowIndex()-r.trailingBufferZone,d))),null==i)r.position=r.scrollTop,r.loadId++;else if(n=Math.min(i+s-1,l),r.variableRowHeight&&n===o.endIndex&&n<l&&(n++,i++),i!==o.startIndex||n!==o.endIndex)return r.scroller.trackingScrollTop=r.scrollTop,r.renderRange(i,n),!0},bottomOfViewCloseToEdge:function(){var e=this;return e.variableRowHeight?e.bodyTop+e.bodyHeight<e.scrollTop+e.view.lastBox.height+e.numFromEdge*e.rowHeight:e.view.all.endIndex-e.getLastVisibleRowIndex()<e.numFromEdge},topOfViewCloseToEdge:function(){return this.variableRowHeight?this.bodyTop>this.scrollTop-this.numFromEdge*this.rowHeight:this.getFirstVisibleRowIndex()-this.view.all.startIndex<this.numFromEdge},refreshView:function(e,t){var i,n=this,r=n.viewSize,o=n.view,a=o.all,s=n.store,l=s.getCount(),d=Math.max(0,l-1),u=o.lockingPartner&&o.lockingPartner.all,c=n.bodyTop&&o.preserveScrollOnRefresh||t;if(!l)return n.doRefreshView([],0,0);l<r?(e=0,i=d,n.nextRefreshStartIndex=c?null:0):null==e&&!a.getCount()&&u&&u.getCount()?(e=u.startIndex,i=Math.min(u.endIndex,e+r-1,d)):(null==e&&(e=null==n.nextRefreshStartIndex||c?a.startIndex:n.nextRefreshStartIndex,n.nextRefreshStartIndex=null),e=Math.max(0,Math.min(e,d-r+1)),r<(i=Math.min(e+r-1,d))-e+1&&(e=i-r+1)),0===e&&-1===i?n.doRefreshView([],0,0):s.getRange(e,i,{callback:n.doRefreshView,scope:n})},doRefreshView:function(e,t,i){var n,r,o,a,s=this,l=s.view,d=s.scroller,u=l.all,c=u.startIndex,h=u.endIndex,f=u.getCount(),g=t!==u.startIndex&&!s.isStoreLoading,p=-1;if(s.isStoreLoading=!1,l.refreshing=s.refreshing=!0,l.refreshCounter){if(l.hasListeners.beforerefresh&&!1===l.fireEvent("beforerefresh",l))return l.refreshNeeded=l.refreshing=s.refreshing=!1;a=l.saveFocusState(),l.clearViewEl(!0),l.refreshCounter++,e.length?(l.doAdd(e,t),g&&(n=u.item(c,!0),r=u.item(h,!0),n?o=-n.offsetTop:r&&(o=u.last(!0).offsetTop-r.offsetTop),o?(p=Math.max(s.bodyTop+o,0),s.scrollTop=p?s.scrollTop+o:0):(p=t*s.rowHeight,s.scrollTop=Math.max(p+s.rowHeight*(p<s.bodyTop?s.leadingBufferZone:s.trailingBufferZone),0)))):(s.scrollTop=p=s.position=0,l.addEmptyText()),-1!==p&&(s.setBodyTop(p),s.doVerticalScroll(d,s.scrollTop,!0)),s.refreshSize(),l.refreshSize(u.getCount()!==f),l.fireItemMutationEvent("refresh",l,e),a(),l.preserveScrollOnRefresh&&a!==Ext.emptyFn&&s.doVerticalScroll(d,s.scrollTop,!0),l.headerCt.setSortState()}else l.refresh();l.getVisibleColumnManager().getColumns().length&&u.getCount()!==Math.min(s.store.getCount(),s.viewSize)&&Ext.raise("rendered block refreshed at "+u.getCount()+" rows while BufferedRenderer view size is "+s.viewSize),l.refreshNeeded=l.refreshing=s.refreshing=!1},renderRange:function(e,t,i){var n=this,r=n.view.all,o=n.store;r.startIndex===e&&r.endIndex===t||e===r.startIndex&&t===r.endIndex||(o.rangeCached(e,t)?(n.cancelLoad(),n.synchronousRender||i?n.onRangeFetched(null,e,t):(n.renderTask||(n.renderTask=new Ext.util.DelayedTask(n.onRangeFetched,n)),n.renderTask.delay(-1,null,null,[null,e,t]))):n.attemptLoad(e,t,n.scrollTop))},onRangeFetched:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m,x=this,y=x.view,v=x.scroller,E=y.el,b=y.all,C=0,S=!x.doNotMirror&&y.lockingPartner,w=S&&S.getVisibleColumnManager(),T=w&&w.getColumns().length,P=T&&S.bufferedRenderer,k=T&&S.all,I=x.variableRowHeight,R=T&&S.ownerCt.isVisible()&&(y.ownerGrid.syncRowHeight||y.ownerGrid.syncRowHeightOnNextLayout||P.variableRowHeight!==I);if(!y.destroyed){if(e)x.scrollTop=v.getPosition().y;else if(!(e=x.store.getRange(t,i)))return;if(r=Ext.fly(Ext.Element.getActiveElement()),E.contains(r)?o=y:S&&S.el.contains(r)&&(o=S),o&&r.suspendFocusEvents(),n=t*x.rowHeight,t<b.startIndex&&i>b.endIndex){for(g=b.startIndex-t,y.clearViewEl(!0),s=y.doAdd(e,t),y.fireItemMutationEvent("itemadd",e,t,s,y),P&&(S.clearViewEl(!0),c=S.doAdd(e,t),S.fireItemMutationEvent("itemadd",e,t,c,S),R&&(x.syncRowHeights(s,c),R=!1)),a=0;a<g;a++)C-=x.grid.getElementHeight(s[a]);l=x.bodyTop+C}else(d=x.teleported||t>b.endIndex||i<b.startIndex)&&(y.clearViewEl(!0),x.teleported=!1),b.getCount()?i>b.endIndex?(f=Math.max(t-b.startIndex,0),I&&(C=b.item(b.startIndex+f,!0).offsetTop),m=Ext.Array.slice(e,b.endIndex+1-t),s=b.scroll(m,1,f),P&&(c=k.scroll(m,1,f)),l=I?x.bodyTop+C:n):(f=Math.max(b.endIndex-i,0),u=b.startIndex,m=Ext.Array.slice(e,0,b.startIndex-t),s=b.scroll(m,-1,f),P&&(c=k.scroll(m,-1,f)),R&&(x.syncRowHeights(s,c),R=!1),I?(l=x.bodyTop-b.item(u,!0).offsetTop,b.startIndex?l<0&&(C=b.startIndex*x.rowHeight,x.doVerticalScroll(v,x.scrollTop+=C),l=x.bodyTop+C):l&&(x.doVerticalScroll(v,x.scrollTop-=l),l=0)):l=n):(s=y.doAdd(e,t),y.fireItemMutationEvent("itemadd",e,t,s,y),P&&(S.clearViewEl(!0),c=P.view.doAdd(e,t),S.fireItemMutationEvent("itemadd",e,t,c,S)),l=n,d&&I&&(p=x.scrollTop<x.position?x.leadingBufferZone:x.trailingBufferZone)<t&&(l=Math.max(x.scrollTop-b.item(b.startIndex+p-1,!0).offsetTop,0))),x.position=x.scrollTop;return o&&(r.resumeFocusEvents(),o.el.contains(r)||(h=o.actionableMode?o.actionPosition:o.lastFocused)&&h.column&&(o.renderingRows=!0,o.onFocusLeave({}),o.renderingRows=!1,x.getNewFocusTarget(h).focus())),l=Math.max(Math.floor(l),0),y.positionBody&&x.setBodyTop(l,!0),P?(P.scrollTop=x.scrollTop,P.bodyTop!==l&&P.setBodyTop(l,!0),R&&x.syncRowHeights(s,c)):I&&(delete x.rowHeight,x.refreshSize()),y.getVisibleColumnManager().getColumns().length&&b.getCount()!==Math.min(x.store.getCount(),x.viewSize)&&Ext.raise("rendered block refreshed at "+b.getCount()+" rows while BufferedRenderer view size is "+x.viewSize),s}},getNewFocusTarget:function(e){var t,i=e.view,n=i.grid,r=e.column,o=r.isHidden()||n.hideHeaders;return r.focusable&&!o?r:(t=r.el.findTabbableElements())&&t.length?t[0]:n.findFocusTarget()||i.el},syncRowHeights:function(e,t){var i,n,r=0,o=1,a=[],s=[],l=Ext.grid.locking.RowSynchronizer;for(e&&t&&(r=e.length,o=t.length),r!==o&&(e=this.view.all.slice(),t=this.view.lockingPartner.all.slice(),r=o=e.length),i=0;i<r;i++)a[i]=n=new l(this.view,e[i]),n.measure();for(i=0;i<o;i++)s[i]=n=new l(this.view.lockingPartner,t[i]),n.measure();for(i=0;i<r;i++)a[i].finish(s[i]),s[i].finish(a[i]);this.syncRowHeightsFinish()},syncRowHeightsFinish:function(){var e=this.view,t=e.lockingPartner.bufferedRenderer,i=e.ownerGrid,n=e.getScrollable();i.syncRowHeightOnNextLayout=!1,e.componentLayoutCounter&&(delete this.rowHeight,this.refreshSize(),delete t.rowHeight,t.refreshSize()),n&&n.restoreState()},setBodyTop:function(e,t){var i=this,n=i.view,r=n.all,o=i.store,a=n.body;a.dom&&(i.translateBody(a,e),i.variableRowHeight?(i.bodyHeight=i.grid.getElementHeight(a.dom),r.endIndex===o.getCount()-1?i.scrollHeight=e+i.bodyHeight-1:i.scrollHeight=i.getScrollHeight(),t||i.stretchView(n,i.scrollHeight)):i.bodyHeight=r.getCount()*i.rowHeight)},translateBody:function(e,t){e.translate(null,this.bodyTop=t)},getFirstVisibleRowIndex:function(e,t,i,n){var r,o,a=this,s=a.view.all,l=s.elements,d=a.viewClientHeight,u=a.bodyTop;if(s.getCount()&&a.variableRowHeight){if(arguments.length){if(e===t)return t;r=e+Math.floor((t-e)/2)}else{if(e=s.startIndex,t=s.endIndex,(n=(i=a.scrollTop)+d)<u||u+a.bodyHeight<i)return a.teleported=!0,Math.floor(a.scrollTop/a.rowHeight);r=e+Math.min(a.numFromEdge+(-1===a.lastScrollDirection?a.leadingBufferZone:a.trailingBufferZone),Math.floor((t-e)/2))}if((o=u+l[r].offsetTop)+a.grid.getElementHeight(l[r])<=i)return a.getFirstVisibleRowIndex(r+1,t,i,n);if(o<=i)return r;if(r!==e)return a.getFirstVisibleRowIndex(e,r-1,i,n)}return Math.floor(a.scrollTop/a.rowHeight)},getLastVisibleRowIndex:function(e,t,i,n){var r,o,a=this,s=a.view.all,l=s.elements,d=a.viewClientHeight,u=a.bodyTop;if(s.getCount()&&a.variableRowHeight){if(arguments.length){if(e===t)return t;r=e+Math.floor((t-e)/2)}else{if(e=s.startIndex,t=s.endIndex,(n=(i=a.scrollTop)+d)<u||u+a.bodyHeight<i)return a.teleported=!0,Math.floor(a.scrollTop/a.rowHeight)+Math.ceil(d/a.rowHeight);r=t-Math.min(a.numFromEdge+(1===a.lastScrollDirection?a.leadingBufferZone:a.trailingBufferZone),Math.floor((t-e)/2))}if(n<(o=u+l[r].offsetTop))return a.getLastVisibleRowIndex(e,r-1,i,n);if(n<=o+a.grid.getElementHeight(l[r]))return r;if(r!==t)return a.getLastVisibleRowIndex(r+1,t,i,n)}return Math.min(a.getFirstVisibleRowIndex()+Math.ceil(d/a.rowHeight),s.endIndex)},getScrollHeight:function(){var e,t,i,n,r=this,o=r.view.all,a=r.store.getCount(),s=o.getCount();return a?(r.hasOwnProperty("rowHeight")||(s?r.variableRowHeight?r.rowHeight=Math.floor(r.bodyHeight/s):(t=(e=o.first()).getHeight(),Ext.isIE8&&0<(i=e.getBorderWidth("b"))&&(t-=i),r.rowHeight=t):delete r.rowHeight),r.variableRowHeight?o.endIndex===a-1?n=r.bodyTop+r.bodyHeight-1:(n=Math.floor((a-s)*r.rowHeight)+r.bodyHeight,n+=r.bodyTop-o.startIndex*r.rowHeight):n=Math.floor(a*r.rowHeight),r.scrollHeight=n):0},getThemeRowHeight:function(){var e;return this.themeRowHeight||(e=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"theme-row-height-el"}),this.self.prototype.themeRowHeight=e.dom.offsetHeight,e.destroy()),this.themeRowHeight},attemptLoad:function(e,t,i){this.scrollToLoadBuffer?(this.loadTask||(this.loadTask=new Ext.util.DelayedTask),this.loadTask.delay(this.scrollToLoadBuffer,this.doAttemptLoad,this,[e,t,i])):this.doAttemptLoad(e,t,i)},cancelLoad:function(){this.loadTask&&this.loadTask.cancel()},doAttemptLoad:function(e,t,r){var o=this;o.destroyed||o.store.getRange(e,t,{loadId:++o.loadId,callback:function(e,t,i,n){n.loadId===o.loadId&&o.scrollTop===r&&o.onRangeFetched(e,t,i)},fireEvent:!1})},destroy:function(){this.cancelLoad(),this.store&&this.unbindStore(),Ext.destroy(this.viewListeners,this.stretcher,this.gridListeners,this.scrollListeners),this.callParent()}}),Ext.define("Ext.grid.plugin.Editing",{extend:"Ext.plugin.Abstract",alias:"editing.editing",requires:["Ext.grid.column.Column","Ext.util.KeyNav","Ext.form.field.Base","Ext.view.Table"],mixins:["Ext.mixin.Observable"],clicksToEdit:2,triggerEvent:void 0,relayedEvents:["beforeedit","edit","validateedit","canceledit"],defaultFieldUI:"default",defaultFieldXType:"textfield",editStyle:"",constructor:function(e){var i=this;i.callParent([e]),i.mixins.observable.constructor.call(i),i.on("edit",function(e,t){i.fireEvent("afteredit",e,t)})},init:function(e){var t=this,i=e.ownerLockable;t.grid=e,t.view=e.view,t.initEvents(),e.rendered?t.setup():t.mon(e,{beforereconfigure:t.onBeforeReconfigure,reconfigure:t.onReconfigure,scope:t,beforerender:{fn:t.onBeforeRender,single:!0,scope:t}}),e.editorEventRelayers=e.relayEvents(t,t.relayedEvents),i&&(i.editorEventRelayers=i.relayEvents(t,t.relayedEvents)),e.isEditable=!0,e.editingPlugin=e.view.editingPlugin=t},onBeforeReconfigure:function(){this.reconfiguring=!0},onReconfigure:function(){this.setup(),delete this.reconfiguring},onBeforeRender:function(){this.setup()},setup:function(){this.initFieldAccessors(this.grid.getTopLevelColumnManager().getColumns())},destroy:function(){var e=this.grid;Ext.destroy(this.keyNav),this.clearListeners(),e&&(e.ownerLockable&&(Ext.destroy(e.ownerLockable.editorEventRelayers),e.ownerLockable.editorEventRelayers=null),Ext.destroy(e.editorEventRelayers),e.editorEventRelayers=null,e.editingPlugin=e.view.editingPlugin=null),this.callParent()},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(e){e.isGroupHeader?e=e.getGridColumns():Ext.isArray(e)||(e=[e]);function t(e,t){return a.getColumnField(this,t)}function i(){return a.hasColumnField(this)}function n(e){a.setColumnField(this,e)}var r,o,a=this,s=e.length;for(r=0;r<s;r++)(o=e[r]).getEditor||(o.getEditor=t),o.hasEditor||(o.hasEditor=i),o.setEditor||(o.setEditor=n)},removeFieldAccessors:function(e){e.isGroupHeader?e=e.getGridColumns():Ext.isArray(e)||(e=[e]);var t,i,n=e.length;for(t=0;t<n;t++)(i=e[t]).getEditor=i.hasEditor=i.setEditor=i.field=i.editor=null},getColumnField:function(e,t){var i=e.field;return i&&i.isFormField||(i=e.field=this.createColumnField(e,t)),i&&"default"===i.ui&&!i.hasOwnProperty("ui")&&(i.ui=this.defaultFieldUI),i},hasColumnField:function(e){return!(!e.field||!e.field.isComponent)},setColumnField:function(e,t){e.field=t,e.field=this.createColumnField(e)},createColumnField:function(e,t){var i,n=e.field;return!n&&e.editor&&((n=e.editor=Ext.clone(e.editor)).field&&((n=n.field).editorCfg=e.editor,delete n.editorCfg.field),e.editor=null),!n&&t&&(n=t),n&&(i=e.dataIndex,n.isComponent?n.column=e:(n=Ext.isString(n)?{name:i,xtype:n,column:e}:Ext.apply({name:i,column:e},n),n=Ext.ComponentManager.create(n,this.defaultFieldXType)),n.dataIndex=i,n.isEditorComponent=!0,e.field=n),n},initEvents:function(){this.initEditTriggers(),this.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var e=this,t=e.view;"cellfocus"===e.triggerEvent?e.mon(t,"cellfocus",e.onCellFocus,e):"rowfocus"===e.triggerEvent?e.mon(t,"rowfocus",e.onRowFocus,e):(t.getSelectionModel().isCellModel&&(t.onCellFocus=e.beforeViewCellFocus.bind(e)),e.mon(t,e.triggerEvent||"cell"+(1===e.clicksToEdit?"click":"dblclick"),e.onCellClick,e)),e.initAddRemoveHeaderEvents(),e.view.getNavigationModel().addKeyBindings({esc:e.onEscKey,defaultEventAction:!1,scope:e})},beforeViewCellFocus:function(e){!this.view.selModel.keyNavigation&&this.editing&&this.isCellEditable&&this.isCellEditable(e.row,e.columnHeader)||this.view.focusCell.apply(this.view,arguments)},onRowFocus:function(e,t,i){this.startEdit(t,0)},onCellFocus:function(e,t,i){this.startEdit(i.row,i.column)},onCellClick:function(e,t,i,n,r,o,a){var s,l=e.ownerGrid,d=e.expanderSelector,u=e.ownerCt.getColumnManager().getHeaderAtIndex(i).getEditor(n);if(!this.shouldStartEdit(u)||d&&a.getTarget(d)){if(l.actionableMode&&e.owns(a.target)&&(s=Ext.Component.from(a,t))&&s.focusable)return;l.actionableMode&&l.setActionableMode(!1)}else l.setActionableMode(!0,a.position)},initAddRemoveHeaderEvents:function(){var e=this.grid.headerCt;this.mon(e,{scope:this,add:this.onColumnAdd,columnmove:this.onColumnMove,beforedestroy:this.beforeGridHeaderDestroy})},onColumnAdd:function(e,t){this.initFieldAccessors(t)},onColumnMove:Ext.emptyFn,onEscKey:function(e){var t;if(this.editing&&!((t=Ext.getCmp(e.getTarget().getAttribute("componentId")))&&t.isPickerField&&t.isExpanded))return e.stopEvent(),this.cancelEdit()},beforeEdit:Ext.emptyFn,shouldStartEdit:function(e){return!!e},getEditingContext:function(e,t,i,n){var r,o,a,s,l=this.grid,d=(n&&n.grid||l).visibleColumnManager,u=this.grid.lockable?this.grid:this.view;if(u.componentLayoutCounter){if(!this.disabled&&!this.grid.collapsed&&this.grid.view.isVisible(!0)&&(Ext.isNumber(t)&&(t=d.getHeaderAtIndex(Math.min(t,d.getColumns().length))),t&&(t.hidden&&(t=t.next(":not([hidden])")||t.prev(":not([hidden])")),l=(n=n||t.getView()).ownerCt,Ext.isNumber(e)?(o=Math.min(e,n.dataSource.getCount()-1),e=n.dataSource.getAt(o)):o=n.dataSource.indexOf(e),l.ensureVisible(e,{column:i?t:null}),(r=n.getRow(e))&&(a=n.getVisibleColumnManager().indexOf(t),e))))return(s=new Ext.grid.CellContext(n).setAll(n,o,a,e,t)).grid=l,s.store=n.dataSource,s.field=t.dataIndex,s.value=s.originalValue=e.get(t.dataIndex),s.row=r,s.node=n.getNode(e),s.cell=s.getCell(!0),s}else u.on({boxready:Ext.Function.bind(this.startEdit,this,[e,t]),single:!0})},cancelEdit:function(){this.editing=!1,this.fireEvent("canceledit",this,this.context)},completeEdit:function(){this.editing&&this.validateEdit()&&this.fireEvent("edit",this,this.context),this.context=null,this.editing=!1},validateEdit:function(e){return!1!==this.fireEvent("validateedit",this,e)&&!e.cancel}}),Ext.define("Ext.grid.plugin.CellEditing",{alias:"plugin.cellediting",extend:"Ext.grid.plugin.Editing",requires:["Ext.grid.CellEditor","Ext.util.DelayedTask"],restartEvent:null,cachedEditorValue:null,init:function(e){e.registerActionable(this),this.callParent(arguments),this.editors=new Ext.util.MixedCollection(!1,function(e){return e.editorId})},beforeGridHeaderDestroy:function(e){var t,i,n,r=this.grid.getColumnManager().getColumns(),o=r.length;for(t=0;t<o;t++)i=r[t],n=(n=this.editors.getByKey(i.getItemId()))||(i.editor||i.field),Ext.destroy(n),this.removeFieldAccessors(i)},onReconfigure:function(e,t,i){i&&this.destroyEditors(),this.callParent()},destroy:function(){this.destroyEditors(),this.restartEvent&&(this.restartEvent=this.cachedEditorValue=Ext.destroy(this.restartEvent)),this.callParent()},initCancelTriggers:function(){var e=this.grid;this.mon(e,{columnresize:this.cancelEdit,columnmove:this.cancelEdit,scope:this})},isCellEditable:function(e,t){var i=this.getEditingContext(e,t);if(i.view.isVisible(!0)&&i&&(t=i.column,e=i.record,t&&this.getEditor(e,t)))return!0},activateCell:function(e,t,i,n){var r,o,a,s,l,d,u,c,h=this,f=e.record,g=e.column,p=h.getActiveEditor(),m=h.view;if(n||null==h.restartEvent||(n=!0),n&&((u=h.suspendedEditor&&h.suspendedEditor.context.record)&&f&&u.getId()!==f.getId()&&(n=!1,h.suspendedEditor.cancelEdit(!0),h.suspendedEditor=h.cachedEditorValue=null),h.restartEvent=Ext.destroy(h.restartEvent)),(r=h.getEditingContext(f,g))&&g.getEditor(f)){if(p&&p.editing){if(m.actionPosition=null,o=r.generation,!1===p.completeEdit())return;r.generation===o&&r.refresh()}if(!t){if(o=r.generation,m.actionableMode&&(m.skipSaveFocusState=!0),c=!1===h.beforeEdit(r)||!1===h.fireEvent("beforeedit",h,r)||r.cancel,m.skipSaveFocusState=!1,c)return;r.generation===o&&r.refresh()}if(s=h.getEditor(f,g),r.cell!==r.getCell(!0)&&(r=h.getEditingContext(r.rowIdx,r.colIdx,null,r.view),e.setPosition(r)),s){if(a=Ext.get(r.cell),s.rendered){if((l=s.el.dom.parentNode)!==a.dom){try{l.removeChild(s.el.dom)}catch(e){}s.container&&s.container.dom!==a.dom&&s.container.collect(),(s.container=a).dom.appendChild(s.el.dom,a.dom.firstChild)}}else s.hidden=!0,s.render(a);return(d=r.record.get(r.column.dataIndex))!==r.originalValue&&(r.value=r.originalValue=d),h.setEditingContext(r),s.startEdit(a,r.value,i&&!Ext.isScrolling||!1,n),s.editing&&(h.setActiveEditor(s),h.setActiveRecord(r.record),h.setActiveColumn(r.column),h.editing=!0,h.scroll=e.view.el.getScroll()),s.editing}}},activateRow:Ext.emptyFn,deactivate:function(){var e,t,i,n=this,r=n.context,o=n.editors.items,a=o.length;for(t=0;t<a;t++){if(e=o[t],!r.view.renderingRows)return void(n.suspendedEditor&&!n.restartEvent&&(n.suspendedEditor.cancelEdit(!0),n.suspendedEditor=n.cachedEditorValue=null));n.suspendedEditor||(e.editing&&(n.suspendedEditor=e,n.cachedEditorValue=e.getValue(),i=function(){var e;n.suspendedEditor?(e=n.suspendedEditor.context,n.view.getNode(e.record)&&(n.view.ownerGrid.setActionableMode(!0,e),n.suspendedEditor=null)):(n.restartEvent=Ext.destroy(n.restartEvent),n.cachedEditorValue=null)},n.cancelEdit(e),n.restartEvent=n.view.on({itemadd:i,destroyable:!0})),e.cacheElement(!0))}},suspend:function(){var e=this.activeEditor;e&&e.editing&&(this.suspendedEditor=e,this.cachedEditorValue=e.field&&e.field.getValue(),this.suspendEvents(),e.suspendEvents(),e.cancelEdit(!0),e.resumeEvents(),this.resumeEvents())},resume:function(e){var t,i=this.activeEditor=this.suspendedEditor;return i&&(this.suspendEvents(),i.suspendEvents(),i.field&&null!=this.cachedEditorValue&&(i.field.setValue(this.cachedEditorValue),this.cachedEditorValue=null),t=this.activateCell(e,!0,!0,!0),i.resumeEvents(),this.resumeEvents(),this.suspendedEditor=null),t},startEdit:function(e,t){this.startEditByPosition(new Ext.grid.CellContext(this.view).setPosition(e,t))},completeEdit:function(e){var t=this.getActiveEditor();t&&t.completeEdit(e)},setEditingContext:function(e){this.context=e},setActiveEditor:function(e){this.activeEditor=e},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(e){this.activeColumn=e},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(e){this.activeRecord=e},getActiveRecord:function(){return this.activeRecord},getEditor:function(e,t){return this.getCachedEditor(t.getItemId(),e,t)},getCachedEditor:function(e,t,i){var n=this.editors,r=n.getByKey(e);if(!r){if(!(r=i.getEditor(t)))return!1;r instanceof Ext.grid.CellEditor||(r=Ext.widget(Ext.apply({xtype:"celleditor",floating:!0,editorId:e,field:r},r.editorCfg))),r.field.excludeForm=!0,r.column!==i&&(r.column=i).on("removed",this.onColumnRemoved,this),n.add(r)}return r.ownerCmp=this.grid.ownerGrid,i.isTreeColumn&&(r.isForTree=i.isTreeColumn,r.addCls(Ext.baseCSSPrefix+"tree-cell-editor")),r.setGrid(this.grid),r.editingPlugin=this,r.collectContainerElement=!0,r},onColumnRemoved:function(e){var t=this.context;t&&t.column===e&&this.cancelEdit(),e.un("removed",this.onColumnRemoved,this)},setColumnField:function(e,t){var i=this.editors.getByKey(e.getItemId());Ext.destroy(i,e.field),this.editors.removeAtKey(e.getItemId()),this.callParent(arguments)},getCell:function(e,t,i){return this.grid.getView().getCell(e,t,i)},onEditComplete:function(e,t,i){var n,r,o=e.context;n=o.view,r=o.record,o.value=t,r.isEqual(t,i)||(n.skipSaveFocusState=!0,r.set(o.column.dataIndex,t),n.skipSaveFocusState=!1,o.rowIdx=n.indexOf(r)),this.context===o&&(this.setActiveEditor(null),this.setActiveColumn(null),this.setActiveRecord(null),this.editing=!1),this.fireEvent("edit",this,o)},cancelEdit:function(e){var t=this.context;e&&e.isCellEditor?(this.context.value="editedValue"in e?e.editedValue:e.getValue(),this.callParent(arguments),e.context===t?(this.setActiveEditor(null),this.setActiveColumn(null),this.setActiveRecord(null)):this.editing=!0):(e=this.getActiveEditor())&&e.field&&e.cancelEdit()},startEditByPosition:function(e){var t,i=this,n=i.grid.getColumnManager(),r=i.getActiveEditor();if(e.isCellContext||(e=new Ext.grid.CellContext(i.view).setPosition(e.row,i.grid.getColumnManager().getColumns()[e.column])),t=n.getHeaderIndex(e.column),e.column=n.getVisibleHeaderClosestToIndex(t),i.grid.actionableMode){if(i.editing&&e.isEqual(i.context))return;r&&r.completeEdit()}if(!i.grid.actionableMode)return i.grid.setActionableMode(!0,e);i.activateCell(e)&&(i.activateRow(i.view.all.item(e.rowIdx,!0)),(r=i.getEditor(e.record,e.column))&&r.field.focus())},destroyEditors:function(){var e=this.editors;e&&(e.each(Ext.destroy,Ext),e.clear())}}),Ext.define("Ext.grid.plugin.Clipboard",{extend:"Ext.plugin.AbstractClipboard",alias:"plugin.clipboard",requires:["Ext.util.Format","Ext.util.TSV"],formats:{cell:{get:"getCells"},html:{get:"getCellData"},raw:{get:"getCellData",put:"putCellData"}},gridListeners:{render:"onCmpReady"},getCellData:function(e,t){var i,n,r,o,a,s,l,d,u,c=this.getCmp().getSelectionModel().getSelected(),h=[],f="raw"===e,g="text"===e;return c&&c.eachCell(function(e){s=e.column,u=e.column.getView(),l=e.record,s.ignoreExport||(a!==l&&(a=l,h.push(d=[])),o=s.dataIndex,f?r=l.data[o]:(i=(i=u.all.item(e.rowIdx))||Ext.fly(u.createRowElement(l,e.rowIdx)),n=i.dom.querySelector(s.getCellInnerSelector()),r=n.innerHTML,g&&(r=Ext.util.Format.stripTags(r))),d.push(r),t&&o&&l.set(o,null))}),Ext.util.TSV.encode(h,void 0,null)},getCells:function(e,t){var i,n,r,o,a=this.getCmp().getSelectionModel().getSelected(),s=[];return a&&a.eachCell(function(e){r=e.record,n!==r&&(n=r,s.push(o={model:r.self,fields:[]})),i=e.column.dataIndex,o.fields.push({name:i,value:r.data[i]}),t&&i&&r.set(i,null)}),s},getTextData:function(e,t){return this.getCellData(e,t)},putCellData:function(e,t){var i,n,r,o,a,s=Ext.util.TSV.decode(e,void 0,null),l=s.length,d=l?s[0].length:0,u=this.getCmp().getView(),c=u.dataSource.getCount()-1,h=u.getVisibleColumnManager().getColumns().length-1,f=u.getSelectionModel().getSelected(),g=u.getNavigationModel(),p=f.startCell||g.getPosition(),m={};for(!p&&f&&f.eachCell(function(e){return p=e,!1}),a=(p=p?new Ext.grid.CellContext(u).setPosition(p.record,p.column):new Ext.grid.CellContext(u).setPosition(0,0)).colIdx,n=0;n<l;n++){for(i=s[n],r=0;r<d;r++){if(o=p.column.dataIndex)switch(t){case"raw":case"text":m[o]=i[r]}if(p.colIdx===h)break;p.setColumn(p.colIdx+1)}if(p.record.set(m),p.rowIdx===c)break;p.setPosition(p.rowIdx+1,a)}},putTextData:function(e,t){this.putCellData(e,t)},getTarget:function(e){return e.body},privates:{validateAction:function(e){if(this.getCmp().getView().actionableMode)return!1}}}),Ext.define("Ext.grid.plugin.DragDrop",{extend:"Ext.plugin.Abstract",alias:"plugin.gridviewdragdrop",uses:["Ext.view.DragZone","Ext.grid.ViewDropZone"],dragText:"{0} selected row{1}",ddGroup:"GridDD",enableDrop:!0,enableDrag:!0,containerScroll:!1,init:function(e){Ext.applyIf(e,{copy:this.copy,allowCopy:this.allowCopy}),e.on("render",this.onViewRender,this,{single:!0})},destroy:function(){this.dragZone=this.dropZone=Ext.destroy(this.dragZone,this.dropZone),this.callParent()},enable:function(){this.dragZone&&this.dragZone.unlock(),this.dropZone&&this.dropZone.unlock(),this.callParent()},disable:function(){this.dragZone&&this.dragZone.lock(),this.dropZone&&this.dropZone.lock(),this.callParent()},onViewRender:function(e){var t=this,i=e.ownerCt.ownerGrid||e.ownerCt,n=t.dragZone||{};i.relayEvents(e,["beforedrop","drop"]),t.enableDrag&&(t.containerScroll&&(n.scrollEl=e.getEl(),n.containerScroll=!0),t.dragZone=new Ext.view.DragZone(Ext.apply({view:e,ddGroup:t.dragGroup||t.ddGroup,dragText:t.dragText},n))),t.enableDrop&&(t.dropZone=new Ext.grid.ViewDropZone(Ext.apply({view:e,ddGroup:t.dropGroup||t.ddGroup},t.dropZone)))}}),Ext.define("Ext.grid.plugin.RowEditing",{extend:"Ext.grid.plugin.Editing",alias:"plugin.rowediting",requires:["Ext.grid.RowEditor"],lockableScope:"top",editStyle:"row",autoCancel:!0,autoUpdate:!1,errorSummary:!0,formAriaLabel:"Editing row {0}",formAriaLabelRowBase:2,constructor:function(){var e=this;e.callParent(arguments),e.clicksToMoveEditor||(e.clicksToMoveEditor=e.clicksToEdit),e.autoCancel=!!e.autoCancel,e.autoUpdate=!!e.autoUpdate,e.autoUpdate&&(e.autoCancel=!1)},init:function(e){this.callParent([e]),e.lockedGrid?(e.lockedGrid.registerActionable(this),e.normalGrid.registerActionable(this)):e.registerActionable(this)},destroy:function(){Ext.destroy(this.editor),this.callParent()},onBeforeReconfigure:function(){this.callParent(arguments),this.cancelEdit()},onReconfigure:function(e,t,i){var n=this.editor;this.callParent(arguments),i&&n&&n.rendered&&(n.needsSyncFieldWidths=!0)},shouldStartEdit:function(e){return!0},startEdit:function(e,t){var i,n=this,r=n.getEditor();return Ext.isEmpty(t)&&(t=n.grid.getTopLevelVisibleColumnManager().getHeaderAtIndex(0)),!(!1===r.beforeEdit()||!(i=n.getEditingContext(e,t,!0))||!1===n.beforeEdit(i)||!1===n.fireEvent("beforeedit",n,i)||i.cancel)&&(n.context=i,n.lockingPartner&&n.lockingPartner.cancelEdit(),r.startEdit(i.record,i.column,i),n.editing=!0)},activateCell:function(e){if(!e.getCell(!0).querySelector('[tabIndex="-1"]'))return this.startEdit(e.record,e.column),!0},suspend:Ext.emptyFn,resume:Ext.emptyFn,onEnterKey:function(e){var t;!this.grid.ownerGrid.actionableMode&&this.editing&&((t=Ext.getCmp(e.getTarget().getAttribute("componentId")))&&t.isPickerField&&t.isExpanded||this.completeEdit())},cancelEdit:function(){return!this.editing||(this.getContextFieldValues(),this.getEditor().cancelEdit(),void this.callParent(arguments))},completeEdit:function(){var e=this.context;this.editing&&this.validateEdit(e)&&(this.editing=!1,this.fireEvent("edit",this,e))},validateEdit:function(){return this.getContextFieldValues(),this.callParent(arguments)&&this.getEditor().completeEdit()},getEditor:function(){return this.editor||(this.editor=this.initEditor()),this.editor},getContextFieldValues:function(){var e,t,i,n=this.editor,r=this.context,o=r.record,a={},s={},l=n.query(">[isFormField]"),d=l.length;for(e=0;e<d;e++)a[t=(i=l[e]).dataIndex]=i.getValue(),s[t]=o.get(t);Ext.apply(r,{newValues:a,originalValues:s})},initEditor:function(){return new Ext.grid.RowEditor(this.initEditorConfig())},initEditorConfig:function(){var e,t,i=this,n=i.grid,r=i.view,o=n.headerCt,a=["saveBtnText","cancelBtnText","errorsText","dirtyText"],s=a.length,l={autoCancel:i.autoCancel,autoUpdate:i.autoUpdate,removeUnmodified:i.removeUnmodified,errorSummary:i.errorSummary,formAriaLabel:i.formAriaLabel,formAriaLabelRowBase:i.formAriaLabelRowBase+(n.hideHeaders?-1:0),fields:o.getGridColumns(),hidden:!0,view:r,editingPlugin:i};for(e=0;e<s;e++)t=a[e],Ext.isDefined(i[t])&&(l[t]=i[t]);return l},initEditTriggers:function(){var e=this,t=e.view,i=1===e.clicksToMoveEditor?"click":"dblclick";e.callParent(arguments),e.clicksToMoveEditor!==e.clicksToEdit&&e.mon(t,"cell"+i,e.moveEditorByClick,e),t.on({render:function(){e.mon(e.grid.headerCt,{scope:e,columnresize:e.onColumnResize,columnhide:e.onColumnHide,columnshow:e.onColumnShow})},single:!0})},moveEditorByClick:function(){this.editing&&this.superclass.onCellClick.apply(this,arguments)},onColumnAdd:function(e,t,i){var n;t.isHeader&&(this.initFieldAccessors(t),(n=this.editor)&&n.onColumnAdd(t,i))},beforeGridHeaderDestroy:function(e){var t,i,n,r=this.grid.getColumnManager().getColumns(),o=r.length;for(t=0;t<o;t++)(i=r[t]).hasEditor&&(i.hasEditor()&&(n=i.getEditor())&&n.destroy(),this.removeFieldAccessors(i))},onColumnResize:function(e,t,i){var n;t.isHeader&&(n=this.getEditor())&&n.onColumnResize(t,i)},onColumnHide:function(e,t){var i=this.getEditor();i&&i.onColumnHide(t)},onColumnShow:function(e,t){var i=this.getEditor();i&&i.onColumnShow(t)},onColumnMove:function(e,t,i,n){var r=this.getEditor();this.initFieldAccessors(t),r&&r.onColumnMove(t,i,n)},setColumnField:function(e,t){var i=this.getEditor();i&&i.destroyColumnEditor(e),this.callParent(arguments),i&&i.insertColumnEditor(e)},createColumnField:function(e,t){var i,n,r=this.editor;return r&&(i=r.getDefaultFieldCfg()),(n=this.callParent([e,t||i]))&&(n.skipLabelForAttribute=!0,n.ariaAttributes=n.ariaAttributes||{},this.grid.hideHeaders?n.ariaAttributes["aria-label"]=e.text:n.ariaAttributes["aria-labelledby"]=e.id),n}}),Ext.define("Ext.grid.plugin.RowExpander",{extend:"Ext.plugin.Abstract",lockableScope:"top",requires:["Ext.grid.feature.RowBody"],alias:"plugin.rowexpander",columnWidth:24,rowBodyTpl:null,lockedTpl:null,expandOnDblClick:!0,selectRowOnExpand:!1,scrollIntoViewOnExpand:!0,headerWidth:24,bodyBefore:!1,rowBodyTrSelector:"."+Ext.baseCSSPrefix+"grid-rowbody-tr",rowBodyHiddenCls:Ext.baseCSSPrefix+"grid-row-body-hidden",rowCollapsedCls:Ext.baseCSSPrefix+"grid-row-collapsed",addCollapsedCls:{fn:function(e,t,i){var n=this.rowExpander;n.recordsExpanded[t.record.internalId]||t.itemClasses.push(n.rowCollapsedCls),this.nextTpl.applyOut(t,e,i)},syncRowHeights:function(e,t){this.rowExpander.syncRowHeights(e,t)},priority:2e4},setCmp:function(e){var t;this.callParent([e]),this.recordsExpanded={},this.rowBodyTpl||Ext.raise("The 'rowBodyTpl' config is required and is not defined."),this.rowBodyTpl=Ext.XTemplate.getTpl(this,"rowBodyTpl"),t=this.getFeatureConfig(e),e.features?e.features=Ext.Array.push(t,e.features):e.features=t},getFeatureConfig:function(e){var t=this,i=[],n={ftype:"rowbody",rowExpander:t,rowIdCls:t.rowIdCls,bodyBefore:t.bodyBefore,recordsExpanded:t.recordsExpanded,rowBodyHiddenCls:t.rowBodyHiddenCls,rowCollapsedCls:t.rowCollapsedCls,setupRowData:t.getRowBodyFeatureData,setup:t.setup};return i.push(Ext.apply({lockableScope:"normal",getRowBodyContents:t.getRowBodyContentsFn(t.rowBodyTpl)},n)),e.enableLocking&&i.push(Ext.apply({lockableScope:"locked",getRowBodyContents:t.lockedTpl?t.getRowBodyContentsFn(t.lockedTpl):function(){return""}},n)),i},getRowBodyContentsFn:function(t){var i=this;return function(e){return t.owner=i,t.applyTemplate(e.record.getData())}},init:function(e){var t,i,n,r=this,o=e.lockable&&e;o&&(r.lockedGrid=o.lockedGrid,r.normalGrid=o.normalGrid,i=r.lockedView=r.lockedGrid.getView(),n=r.normalView=r.normalGrid.getView()),r.callParent([e]),r.grid=e,t=r.view=e.getView(),o?(r.bindView(i),r.bindView(n),r.addExpander(r.lockedGrid.headerCt.items.getCount()?r.lockedGrid:r.normalGrid),i.addRowTpl(r.addCollapsedCls).rowExpander=n.addRowTpl(r.addCollapsedCls).rowExpander=i.rowExpander=n.rowExpander=r,o.mon(o,{processcolumns:r.onLockableProcessColumns,lockcolumn:r.onColumnLock,unlockcolumn:r.onColumnUnlock,scope:r})):(r.bindView(t),t.addRowTpl(r.addCollapsedCls).rowExpander=t.rowExpander=r,r.addExpander(e),e.on("beforereconfigure",r.beforeReconfigure,r))},onItemAdd:function(e,t,i){var n,r,o=this.grid.lockable,a=i.length;for(r=0;r<a;r++)if(!(n=e[r]).isNonData&&this.recordsExpanded[n.internalId])return void(o&&(this.grid.syncRowHeightOnNextLayout=!0))},beforeReconfigure:function(e,t,i,n,r){i&&(this.expanderColumn=new Ext.grid.column.Column(this.getHeaderConfig()),i.unshift(this.expanderColumn))},onLockableProcessColumns:function(e,t,i){this.addExpander(t.length?e.lockedGrid:e.normalGrid)},addExpander:function(e){var t=e.getSelectionModel(),i=t.injectCheckbox;this.expanderColumn=e.headerCt.insert(0,this.getHeaderConfig()),0!==i&&"first"!==i||(i=1),t.injectCheckbox=i},getRowBodyFeatureData:function(e,t,i){this.self.prototype.setupRowData.apply(this,arguments),i.rowBody=this.getRowBodyContents(i),i.rowBodyCls=this.recordsExpanded[e.internalId]?"":this.rowBodyHiddenCls},bindView:function(e){var t={itemkeydown:this.onKeyDown,scope:this};this.expandOnDblClick&&(t.itemdblclick=this.onDblClick),this.grid.lockable&&(t.itemadd=this.onItemAdd),e.on(t)},onKeyDown:function(e,t,i,n,r){var o,a=r.getKey();e.getNavigationModel().getPosition()&&(o=(i=Ext.fly(i)).hasCls(this.rowCollapsedCls),((107===a||187===a&&r.shiftKey)&&o||(109===a||189===a)&&!o)&&this.toggleRow(n,t))},onDblClick:function(e,t,i,n,r){this.toggleRow(n,t)},toggleRow:function(e,t){var i,n=this,r=n.normalView||n.view,o=r,a=r.getNode(e),s=Ext.fly(a),l=s.down(n.rowBodyTrSelector,!0),d=s.hasCls(n.rowCollapsedCls),u=d?"removeCls":"addCls",c=n.grid.lockable&&n.grid;s[u](n.rowCollapsedCls),Ext.fly(l)[u](n.rowBodyHiddenCls),n.recordsExpanded[t.internalId]=d,Ext.suspendLayouts(),c&&(o=c.getView(),n.lockedGrid.isVisible()&&((r=n.lockedView).lockingPartner.updateLayout(),(i=Ext.fly(r.getNode(e)))&&(i[u](n.rowCollapsedCls),l=i.down(n.rowBodyTrSelector,!0),Ext.fly(l)[u](n.rowBodyHiddenCls))),c.syncRowHeightOnNextLayout=!0),o.fireEvent(d?"expandbody":"collapsebody",a,t,l),r.refreshSize(!0),Ext.resumeLayouts(!0),n.scrollIntoViewOnExpand&&d&&n.grid.ensureVisible(e)},syncRowHeights:function(e,t){var i,n,r=Ext.fly(e).down(this.rowBodyTrSelector),o=Ext.fly(t).down(this.rowBodyTrSelector);o.isVisible()?(i=r.getHeight())!==(n=o.getHeight())&&(n<i?o.setHeight(i):r.setHeight(n)):r.dom.style.height=o.dom.style.height=""},onColumnUnlock:function(e,t){var i;1===(i=(e=e||this.grid).lockedGrid.visibleColumnManager.getColumns()).length&&(e.normalGrid.removeCls(Ext.baseCSSPrefix+"grid-hide-row-expander-spacer"),e.lockedGrid.addCls(Ext.baseCSSPrefix+"grid-hide-row-expander-spacer"),i[0]===this.expanderColumn?e.unlock(this.expanderColumn):e.lock(this.expanderColumn,0))},onColumnLock:function(e,t){e=e||this.grid,1===this.lockedGrid.visibleColumnManager.getColumns().length&&(this.lockedGrid.headerCt.insert(0,this.expanderColumn),e.normalGrid.addCls(Ext.baseCSSPrefix+"grid-hide-row-expander-spacer"),e.lockedGrid.removeCls(Ext.baseCSSPrefix+"grid-hide-row-expander-spacer"))},getHeaderConfig:function(){var d=this,e=d.grid.lockable&&d.grid;return{width:d.headerWidth,ignoreExport:!0,lockable:!1,autoLock:!0,sortable:!1,resizable:!1,draggable:!1,hideable:!1,menuDisabled:!0,tdCls:Ext.baseCSSPrefix+"grid-cell-special",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-row-expander",renderer:function(){return'<div class="'+Ext.baseCSSPrefix+'grid-row-expander" role="presentation" tabIndex="0"></div>'},processEvent:function(e,t,i,n,r,o,a){var s="touch"===o.pointerType,l=!!o.getTarget("."+Ext.baseCSSPrefix+"grid-row-expander");"click"===e&&l||"keydown"===e&&o.getKey()===o.SPACE?(s&&i.focus(),d.toggleRow(n,a,o),o.stopSelection=!d.selectRowOnExpand):"mousedown"===o.type&&!s&&l&&o.preventDefault()},isLocked:function(){return e&&(e.lockedGrid.isVisible()||this.locked)},editRenderer:function(){return"&#160;"}}}}),Ext.define("Ext.grid.plugin.RowWidget",{extend:"Ext.grid.plugin.RowExpander",alias:"plugin.rowwidget",mixins:["Ext.mixin.Identifiable","Ext.mixin.StyleCacher"],lockableScope:"top",config:{defaultWidgetUI:{}},widget:null,lockedWidget:null,addCollapsedCls:{fn:function(e,t,i){var n=this.rowExpander;n.recordsExpanded[t.record.internalId]||t.itemClasses.push(n.rowCollapsedCls),this.nextTpl.applyOut(t,e,i)},priority:2e4},setCmp:function(e){var t,i,n=this;n.rowIdCls=Ext.id(null,Ext.baseCSSPrefix+"rowwidget-"),n.recordsExpanded={},Ext.plugin.Abstract.prototype.setCmp.apply(n,arguments),(i=n.widget)&&!i.isComponent||Ext.raise("RowWidget requires a widget configuration."),n.widget=i=Ext.apply({},i),i.ui||(i.ui=n.getDefaultWidgetUI()[i.xtype]||"default"),e.enableLocking&&n.lockedWidget&&(n.lockedWidget=i=Ext.apply({},n.lockedWidget),i.ui||(i.ui=n.getDefaultWidgetUI()[i.xtype]||"default")),t=n.getFeatureConfig(e),e.features?e.features=Ext.Array.push(t,e.features):e.features=t},getFeatureConfig:function(e){var t=[],i={ftype:"rowbody",rowExpander:this,doSync:!1,rowIdCls:this.rowIdCls,bodyBefore:this.bodyBefore,recordsExpanded:this.recordsExpanded,rowBodyHiddenCls:this.rowBodyHiddenCls,rowCollapsedCls:this.rowCollapsedCls,setupRowData:this.setupRowData,setup:this.setup,onClick:Ext.emptyFn};return t.push(Ext.apply({lockableScope:"normal"},i)),e.enableLocking&&t.push(Ext.apply({lockableScope:"locked"},i)),t},setupRowData:function(e,t,i){var n=this.rowExpander;n.rowBodyFeature=this,i.rowBodyCls=n.recordsExpanded[e.internalId]?"":n.rowBodyHiddenCls},bindView:function(e){this.viewListeners=e.on({refresh:this.onViewRefresh,itemadd:this.onItemAdd,scope:this,destroyable:!0}),Ext.override(e,this.viewOverrides)},destroy:function(){var e=this,t=e.getId();e.viewListeners.destroy(),e.grid.lockable?(e.grid.destroyManagedWidgets(t+"-"+e.lockedView.getId()),e.grid.destroyManagedWidgets(t+"-"+e.normalView.getId())):e.grid.destroyManagedWidgets(t+"-"+e.view.getId()),e.callParent()},privates:{viewOverrides:{handleEvent:function(e){e.getTarget("."+this.rowExpander.rowIdCls,this.body)||this.callParent([e])},onFocusEnter:function(e){e.event.getTarget("."+this.rowExpander.rowIdCls,this.body)||this.callParent([e])},toggleChildrenTabbability:function(e){var t,i=this.getTargetEl(),n=this.all,r={skipSelf:!0},o={skipSelf:!0,includeSaved:!1};for(t=n.startIndex;t<=n.endIndex;t++)(i=Ext.fly(this.getRow(n.item(t))))&&(e?i.restoreTabbableState(r):i.saveTabbableState(o))}},destroyLiveWidget:function(e,t){t.destroy()},destroyFreeWidget:function(e){e.destroy()},onItemAdd:function(e,t,i,n){var r,o,a=i.length,s=this.grid.lockable;for(Ext.suspendLayouts(),r=0;r<a;r++)!(o=e[r]).isNonData&&this.recordsExpanded[o.internalId]&&(s&&(this.grid.syncRowHeightOnNextLayout=!0),this.addWidget(n,o));Ext.resumeLayouts(!0)},onViewRefresh:function(e,t){var i,n,r=e.all;for(Ext.suspendLayouts(),i=r.startIndex,n=0;i<=r.endIndex;i++,n++)this.recordsExpanded[t[n].internalId]&&this.addWidget(e,t[n]);Ext.resumeLayouts(!0)},returnFalse:function(){return!1},getWidget:function(e,t){var i,n;return t&&(n=this.grid.lockable&&e===this.lockedView?this.lockedWidget:this.widget)&&((i=this.grid.createManagedWidget(e,this.getId()+"-"+e.getId(),n,t)).measurer=this,i.ownerLayout=e.componentLayout),i},addWidget:function(e,t){var i,n,r,o,a=!!this.onWidgetAttach,s=this.isFixedSize;if(!t.isNonData&&this.recordsExpanded[t.internalId])return n=(i=Ext.fly(e.getNode(t).querySelector(this.rowBodyFeature.innerSelector))).getWidth(!0)-i.getPadding("lr"),(r=this.getWidget(e,t))&&(a&&Ext.callback(this.onWidgetAttach,this.scope,[this,r,t],0,this),(o=r.el||r.element)?(i.dom.appendChild(o.dom),s||r.width===n?r.updateLayout():r.setWidth(n),r.reattachToBody()):(s||(r.width=n),r.render(i)),r.updateLayout()),r},toggleRow:function(e,t){var i,n,r,o=this,a=o.normalView||o.view,s=a.getNode(e),l=Ext.fly(s),d=l.down(o.rowBodyTrSelector,!0),u=l.hasCls(o.rowCollapsedCls),c=u?"removeCls":"addCls",h=o.grid.lockable&&o.grid;l[c](o.rowCollapsedCls),Ext.fly(d)[c](o.rowBodyHiddenCls),Ext.suspendLayouts(),u?(o.recordsExpanded[t.internalId]=!0,r=(n=o.addWidget(a,t)).lookupViewModel()):(delete o.recordsExpanded[t.internalId],n=o.getWidget(a,t)),h&&h.lockedGrid.isVisible()&&(a=o.lockedView,(i=Ext.fly(a.getNode(e)))&&(i[c](o.rowCollapsedCls),d=i.down(o.rowBodyTrSelector,!0),Ext.fly(d)[c](o.rowBodyHiddenCls),n=u&&o.lockedWidget?[n,o.addWidget(a,t)]:[n,o.getWidget(a,t)]),h.syncRowHeightOnNextLayout=!0),o.view.fireEvent(u?"expandbody":"collapsebody",s,t,d,n),a.updateLayout(),r&&r.notify(),Ext.resumeLayouts(!0),o.scrollIntoViewOnExpand&&u&&o.grid.ensureVisible(e)}}}),Ext.define("Ext.grid.property.Grid",{extend:"Ext.grid.Panel",alias:"widget.propertygrid",alternateClassName:"Ext.grid.PropertyGrid",uses:["Ext.grid.plugin.CellEditing","Ext.grid.property.Store","Ext.grid.property.HeaderContainer","Ext.XTemplate","Ext.grid.CellEditor","Ext.form.field.Date","Ext.form.field.Text","Ext.form.field.Number","Ext.form.field.ComboBox"],valueField:"value",nameField:"name",inferTypes:!0,enableColumnMove:!1,columnLines:!0,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,gridCls:Ext.baseCSSPrefix+"property-grid",initComponent:function(){var e,i=this,t=!Ext.isIE;i.source=i.source||{},i.addCls(i.gridCls),i.plugins=i.plugins||[],i.plugins.push(new Ext.grid.plugin.CellEditing({clicksToEdit:i.clicksToEdit,startEdit:function(e,t){return this.self.prototype.startEdit.call(this,e,i.valueColumn)},getEditor:function(e,t){return this.getCachedEditor(e.get(i.nameField),e,t)}})),i.selModel={type:"cellmodel",onCellSelect:function(e){return e.column=i.valueColumn,e.colIdx=i.valueColumn.getVisibleIndex(),this.self.prototype.onCellSelect.call(this,e)}},i.sourceConfig=Ext.apply({},i.sourceConfig),i.store||(i.propStore=i.store=new Ext.grid.property.Store(i,i.source)),i.configure(i.sourceConfig),i.sortableColumns&&i.store.sort("name","ASC"),i.columns=new Ext.grid.property.HeaderContainer(i,i.store),i.callParent(),(e=i.getView()).walkCells=i.walkCells,e.getDefaultFocusPosition=i.getDefaultFocusPosition,i.editors={date:new Ext.grid.CellEditor({field:new Ext.form.field.Date({selectOnFocus:t})}),string:new Ext.grid.CellEditor({field:new Ext.form.field.Text({selectOnFocus:t})}),number:new Ext.grid.CellEditor({field:new Ext.form.field.Number({selectOnFocus:t})}),boolean:new Ext.grid.CellEditor({field:new Ext.form.field.ComboBox({editable:!1,store:[[!0,i.headerCt.trueText],[!1,i.headerCt.falseText]]})})},i.store.on("update",i.onUpdate,i)},configure:function(e){var t,i,n,r,o=this.store,a=0,s=this.store.getCount(),l=this.nameField,d=this.valueField;if(this.configureLegacy(e),this.inferTypes)for(;a<s;++a)t=(n=o.getAt(a)).get(l),this.getConfigProp(t,"type")||(i=n.get(d),r=Ext.isDate(i)?"date":Ext.isNumber(i)?"number":Ext.isBoolean(i)?"boolean":"string",this.setConfigProp(t,"type",r))},getConfigProp:function(e,t,i){var n,r=this.sourceConfig[e];return r&&(n=r[t]),n||i},setConfigProp:function(e,t,i){var n=this.sourceConfig,r=n[e];return r?r.__copied||(r=Ext.apply({__copied:!0},r),n[e]=r):r=n[e]={__copied:!0},r[t]=i},configureLegacy:function(e){this.copyLegacyObject(e,this.customRenderers,"renderer"),this.copyLegacyObject(e,this.customEditors,"editor"),this.copyLegacyObject(e,this.propertyNames,"displayName"),(this.customRenderers||this.customEditors||this.propertyNames)&&Ext.global.console&&Ext.global.console.warn&&Ext.global.console.warn(this.$className,'customRenderers, customEditors & propertyNames have been consolidated into a new config, see "sourceConfig". These configurations will be deprecated.')},copyLegacyObject:function(e,t,i){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]||(e[n]={}),e[n][i]=t[n])},onUpdate:function(e,t,i){var n,r;this.rendered&&i===Ext.data.Model.EDIT&&(n=t.get(this.valueField),r=t.modified.value,!1!==this.fireEvent("beforepropertychange",this.source,t.getId(),n,r)?(this.source&&(this.source[t.getId()]=n),t.commit(),this.fireEvent("propertychange",this.source,t.getId(),n,r)):t.reject())},walkCells:function(e,t,i,n,r,o){var a=this.ownerCt.valueColumn;return"left"===t?t="up":"right"===t&&(t="down"),(e=Ext.view.Table.prototype.walkCells.call(this,e,t,i,n,r,o)).column=a,e.colIdx=a.getVisibleIndex(),e},getDefaultFocusPosition:function(){return new Ext.grid.CellContext(this).setColumn(1)},getCellEditor:function(e,t){var i,n=e.get(this.nameField),r=e.get(this.valueField),o=this.getConfigProp(n,"editor"),a=this.getConfigProp(n,"type"),s=this.editors;if(o)o instanceof Ext.grid.CellEditor||(o instanceof Ext.form.field.Base||(o=Ext.ComponentManager.create(o,"textfield")),o=this.setConfigProp(n,"editor",new Ext.grid.CellEditor({field:o})));else if(a)switch(a){case"date":o=s.date;break;case"number":o=s.number;break;case"boolean":o=s[a];break;default:o=s.string}else o=Ext.isDate(r)?s.date:Ext.isNumber(r)?s.number:Ext.isBoolean(r)?s.boolean:s.string;return(i=o.field)&&"default"===i.ui&&!i.hasOwnProperty("ui")&&(i.ui=this.editingPlugin.defaultFieldUI),o.editorId=n,o.field.column=this.valueColumn,n&&(n=Ext.String.htmlEncode(n),i.rendered?i.inputEl.dom.setAttribute("aria-label",n):i.ariaLabel=n),o},doDestroy:function(){this.destroyEditors(this.editors),this.destroyEditors(this.customEditors),this.callParent()},destroyEditors:function(e){var t;for(t in e)e.hasOwnProperty(t)&&Ext.destroy(e[t])},setSource:function(e,t){this.source=e,void 0!==t&&(this.sourceConfig=Ext.apply({},t),this.configure(this.sourceConfig)),this.propStore.setSource(e)},getSource:function(){return this.propStore.getSource()},getProperty:function(e){return this.propStore.getProperty(e)},setProperty:function(e,t,i){this.propStore.setValue(e,t,i)},removeProperty:function(e){this.propStore.remove(e)}}),Ext.define("Ext.grid.property.HeaderContainer",{extend:"Ext.grid.header.Container",alternateClassName:"Ext.grid.PropertyColumnModel",nameWidth:115,nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",trueText:"true",falseText:"false",nameColumnCls:Ext.baseCSSPrefix+"grid-property-name",nameColumnInnerCls:Ext.baseCSSPrefix+"grid-cell-inner-property-name",constructor:function(e,t){var i=this;i.grid=e,i.store=t,i.callParent([{isRootHeader:!0,enableColumnResize:Ext.isDefined(e.enableColumnResize)?e.enableColumnResize:i.enableColumnResize,enableColumnMove:Ext.isDefined(e.enableColumnMove)?e.enableColumnMove:i.enableColumnMove,items:[{header:i.nameText,width:e.nameColumnWidth||i.nameWidth,sortable:e.sortableColumns,dataIndex:e.nameField,scope:i,renderer:i.renderProp,itemId:e.nameField,menuDisabled:!0,tdCls:i.nameColumnCls,innerCls:i.nameColumnInnerCls},{header:i.valueText,scope:i,renderer:i.renderCell,getEditor:i.getCellEditor.bind(i),sortable:e.sortableColumns,flex:1,fixed:!0,dataIndex:e.valueField,itemId:e.valueField,menuDisabled:!0}]}]),i.grid.valueColumn=i.items.getAt(1)},getCellEditor:function(e){return this.grid.getCellEditor(e,this)},renderProp:function(e){return this.getPropertyName(e)},renderCell:function(e,t,i){var n=this.grid,r=n.getConfigProp(i.get(n.nameField),"renderer"),o=e;return r?Ext.callback(r,null,arguments,0,this):(Ext.isDate(e)?o=this.renderDate(e):Ext.isBoolean(e)&&(o=this.renderBool(e)),Ext.util.Format.htmlEncode(o))},renderDate:Ext.util.Format.date,renderBool:function(e){return this[e?"trueText":"falseText"]},getPropertyName:function(e){return this.grid.getConfigProp(e,"displayName",e)}}),Ext.define("Ext.grid.property.Property",{extend:"Ext.data.Model",alternateClassName:"Ext.PropGridProperty",fields:[{name:"name",type:"string"},{name:"value"}],idProperty:"name",constructor:function(e,t){Ext.isObject(e)||(e={name:e,value:t}),this.callParent([e])}}),Ext.define("Ext.grid.property.Reader",{extend:"Ext.data.reader.Reader",successProperty:null,totalProperty:null,messageProperty:null,read:function(e){return this.readRecords(e)},readRecords:function(e){var t,i,n=this.getModel(),r={records:[],success:!0};for(i in e)e.hasOwnProperty(i)&&(t=e[i],this.isEditableValue(t)&&r.records.push(new n({name:i,value:t})));return r.total=r.count=r.records.length,new Ext.data.ResultSet(r)},isEditableValue:function(e){return Ext.isPrimitive(e)||Ext.isDate(e)||null===e}}),Ext.define("Ext.grid.property.Store",{extend:"Ext.data.Store",alternateClassName:"Ext.grid.PropertyStore",requires:["Ext.grid.property.Reader","Ext.data.proxy.Memory","Ext.grid.property.Property"],remoteSort:!0,constructor:function(e,t){this.grid=e,this.source=t,this.callParent([{data:t,model:Ext.grid.property.Property,proxy:this.getProxy()}])},getProxy:function(){var e=this.proxy;return e=e||(this.proxy=new Ext.data.proxy.Memory({model:Ext.grid.property.Property,reader:this.getReader()}))},getReader:function(){var e=this.reader;return e=e||(this.reader=new Ext.grid.property.Reader({model:Ext.grid.property.Property}))},setSource:function(e){var t=this;t.source=e,t.suspendEvents(),t.removeAll(),t.getProxy().setData(e),t.load(),t.resumeEvents(),t.fireEvent("datachanged",t),t.fireEvent("refresh",t)},getProperty:function(e){var t=Ext.isNumber(e)?this.getAt(e):this.getById(e),i=null;return t&&(i=t.get("value")),i},setValue:function(e,t,i){var n=this.getRec(e);n?(n.set("value",t),this.source[e]=t):i&&(this.source[e]=t,n=new Ext.grid.property.Property({name:e,value:t},e),this.add(n))},remove:function(e){var t=this.getRec(e);t&&(this.callParent([t]),delete this.source[e])},getRec:function(e){return this.getById(e)},getSource:function(){return this.source},doDestroy:function(){Ext.destroy(this.reader,this.proxy),this.callParent()}}),Ext.define("Ext.grid.selection.Selection",{constructor:function(e){e&&(e.isTableView||e.isLockingView)||Ext.raise("Selection must be created for a given TableView or LockingView"),this.view=e.ownerGrid.view}}),Ext.define("Ext.grid.selection.Cells",{extend:"Ext.grid.selection.Selection",type:"cells",isCells:!0,clone:function(){var e=new this.self(this.view);return this.startCell&&(e.startCell=this.startCell.clone(),e.endCell=this.endCell.clone()),e},contains:function(e){var t;return!(!e||!e.isCellContext)&&(!!(this.startCell&&(t=this.getRowRange(),e.rowIdx>=t[0]&&e.rowIdx<=t[1]))&&(t=this.getColumnRange(),e.colIdx>=t[0]&&e.colIdx<=t[1]))},eachRow:function(e,t){var i,n=this.getRowRange(),r=new Ext.grid.CellContext(this.view);for(i=n[0];i<=n[1];i++)if(r.setRow(i),!1===e.call(t||this,r.record))return},eachColumn:function(e,t){var i,n=this.getColumnRange(),r=new Ext.grid.CellContext(this.view);for(i=n[0];i<=n[1];i++)if(r.setColumn(i),!1===e.call(t||this,r.column,i))return},eachCell:function(e,t){var i,n,r=this.getRowRange(),o=this.getColumnRange(),a=new Ext.grid.CellContext(this.view);for(i=r[0];i<=r[1];i++)for(a.setRow(i),n=o[0];n<=o[1];n++)if(a.setColumn(n),!1===e.call(t||this,a,n,i))return},getFirstRowIndex:function(){return this.startCell?Math.min(this.startCell.rowIdx,this.endCell.rowIdx):0},getLastRowIndex:function(){return this.startCell?Math.max(this.startCell.rowIdx,this.endCell.rowIdx):-1},getFirstColumnIndex:function(){return this.startCell?Math.min(this.startCell.colIdx,this.endCell.colIdx):0},getLastColumnIndex:function(){return this.startCell?Math.max(this.startCell.colIdx,this.endCell.colIdx):-1},privates:{clear:function(){var t=this.view;t.getVisibleColumnManager().getColumns().length&&this.eachCell(function(e){t.onCellDeselect(e)}),this.startCell=this.endCell=null},setRangeStart:function(e,t){this.startCell=(this.endCell=e.clone()).clone(),this.view.onCellSelect(e)},setRangeEnd:function(e){var t,i,n,r,o,a,s,l,d=this.view,u=d.all,c=new Ext.grid.CellContext(d),h=d.getVisibleColumnManager().getColumns().length-1;for(this.endCell=e.clone(),t=this.getRange(),i=this.lastRange||t,n=Math.max(Math.min(t[0][1],i[0][1]),u.startIndex),r=Math.min(Math.max(t[1][1],i[1][1]),u.endIndex),o=Math.min(t[0][0],i[0][0]),a=Math.min(Math.max(t[1][0],i[1][0]),h),s=n;s<=r;s++)for(l=o;l<=a;l++)c.setPosition(s,l),s<t[0][1]||s>t[1][1]||l<t[0][0]||l>t[1][0]?d.onCellDeselect(c):d.onCellSelect(c);this.lastRange=t},extendRange:function(e){var t,i=this;e[e.type]<0?(t=i.endCell.clone().setPosition(i.getLastRowIndex(),i.getLastColumnIndex()),i.startCell=e.start.clone(),i.setRangeEnd(t),i.view.getNavigationModel().setPosition(e.start)):(i.startCell=i.startCell.setPosition(i.getFirstRowIndex(),i.getFirstColumnIndex()),i.setRangeEnd(e.end),i.view.getNavigationModel().setPosition(e.end))},reduceRange:function(e){var t;e[e.type]<0&&(t=e.end.clone(),this.startCell=e.start.clone(),this.setRangeEnd(t),this.view.getNavigationModel().setPosition(e.start))},getRange:function(){return[[this.getFirstColumnIndex(),this.getFirstRowIndex()],[this.getLastColumnIndex(),this.getLastRowIndex()]]},getRangeSize:function(){return this.getCount()},getCount:function(){var e=this.getRange();return(e[1][0]-e[0][0]+1)*(e[1][1]-e[0][1]+1)},selectAll:function(){var e=this.view;this.clear(),this.setRangeStart(new Ext.grid.CellContext(e).setPosition(0,0)),this.setRangeEnd(new Ext.grid.CellContext(e).setPosition(e.dataSource.getCount()-1,e.getVisibleColumnManager().getColumns().length-1))},isAllSelected:function(){var e=this.rangeStart,t=this.rangeEnd;return!(!e||e.colIdx||e.rowIdx)&&(t.colIdx===t.view.getVisibleColumnManager().getColumns().length-1&&t.rowIdx===t.view.dataSource.getCount-1)},getColumnRange:function(){return[this.getFirstColumnIndex(),this.getLastColumnIndex()]},getLastSelected:function(){return this.view.dataSource.getAt(this.endCell.rowIdx)},getRowRange:function(){return[this.getFirstRowIndex(),this.getLastRowIndex()]},onSelectionFinish:function(){var e=this;e.getCount()?e.view.getSelectionModel().onSelectionFinish(e,new Ext.grid.CellContext(e.view).setPosition(e.getFirstRowIndex(),e.getFirstColumnIndex()),new Ext.grid.CellContext(e.view).setPosition(e.getLastRowIndex(),e.getLastColumnIndex())):e.view.getSelectionModel().onSelectionFinish(e)}}}),Ext.define("Ext.grid.selection.Columns",{extend:"Ext.grid.selection.Selection",type:"columns",isColumns:!0,clone:function(){var e=new this.self(this.view),t=this.selectedColumns;return t&&(e.selectedColumns=Ext.Array.slice(t)),e},eachRow:function(e,t){var i=this.selectedColumns;i&&i.length&&this.view.dataSource.each(e,t||this)},eachColumn:function(e,t){var i,n,r=this.view,o=this.selectedColumns,a=new Ext.grid.CellContext(r);if(o)for(i=o.length,n=0;n<i;n++)if(a.setColumn(o[n]),!1===e.call(t||this,a.column,a.colIdx))return!1},eachCell:function(t,i){var n,r,o=this,e=o.view,a=o.selectedColumns,s=new Ext.grid.CellContext(e);a&&(n=a.length,e.dataSource.each(function(e){for(s.setRow(e),r=0;r<n;r++)if(s.setColumn(a[r]),!1===t.call(i||o,s,s.colIdx,s.rowIdx))return!1}))},contains:function(e){var t=this.selectedColumns;return!!(e&&e.isColumn&&t&&t.length)&&Ext.Array.contains(t,e)},getCount:function(){var e=this.selectedColumns;return e?e.length:0},getColumns:function(){return this.selectedColumns||[]},privates:{add:function(e){e.isColumn||Ext.raise("Column selection must be passed a grid Column header object"),Ext.Array.include(this.selectedColumns||(this.selectedColumns=[]),e),this.refreshColumns(e)},clear:function(){var e=this.selectedColumns;e&&e.length&&(this.selectedColumns=[],this.refreshColumns.apply(this,e)),this.setRangeStart(null)},setRangeStart:function(e){var t=this.getColumns();null!=(this.startColumn=e)&&(this.selectedColumns=[e],t.push(e),this.refreshColumns.apply(this,t))},setRangeEnd:function(e){var t,i=this.getColumns(),n=this.view.ownerGrid.getVisibleColumnManager(),r=n.getColumns(),o=n.indexOf(this.startColumn),a=n.indexOf(e);for(a<o&&(t=o,o=a,a=t),this.selectedColumns=[],t=o;t<=a;t++)this.selectedColumns.push(r[t]),i.push(r[t]);this.refreshColumns.apply(this,i)},isAllSelected:function(){var e=this.selectedColumns;return e&&e.length===this.view.ownerGrid.getVisibleColumnManager().getColumns().length},refreshColumns:function(e){var t,i,n=this.view,r=n.all,o=arguments,a=o.length,s=new Ext.grid.CellContext(n),l=[];if(n.rendered){for(i=0;i<a;i++)l[i]=this.contains(o[i]);for(t=r.startIndex;t<=r.endIndex;t++)for(s.setRow(t),i=0;i<a;i++)s.setColumn(o[i]),l[i]?n.onCellSelect(s):n.onCellDeselect(s)}},remove:function(e){e.isColumn||Ext.raise("Column selection must be passed a grid Column header object"),this.selectedColumns&&(Ext.Array.remove(this.selectedColumns,e),e.getView()&&e.isVisible()&&this.refreshColumns(e))},selectAll:function(){this.clear(),this.selectedColumns=this.view.getSelectionModel().lastContiguousColumnRange=this.view.getVisibleColumnManager().getColumns(),this.refreshColumns.apply(this,this.selectedColumns)},extendRange:function(e){var t,i=this.view.getVisibleColumnManager().getColumns();for(t=e.start.colIdx;t<=e.end.colIdx;t++)this.add(i[t])},reduceRange:function(e){var t,i=this.view.getVisibleColumnManager().getColumns(),n=e.start.colIdx,r=e.end.colIdx,o=Math.abs(n-r)+1;for(t=this.selectedColumns.length-o;0<t;t--)this.remove(i[r+t])},onSelectionFinish:function(){var e=this.getContiguousSelection();e?this.view.getSelectionModel().onSelectionFinish(this,new Ext.grid.CellContext(this.view).setPosition(0,e[0]),new Ext.grid.CellContext(this.view).setPosition(this.view.dataSource.getCount()-1,e[1])):this.view.getSelectionModel().onSelectionFinish(this)},getContiguousSelection:function(){var e,t=Ext.Array.sort(this.getColumns(),function(e,t){return e.getView().ownerGrid.getVisibleColumnManager().indexOf(e)-t.getView().ownerGrid.getVisibleColumnManager().indexOf(t)}),i=t.length;if(i){for(e=1;e<i;e++)if(t[e].getVisibleIndex()!==t[e-1].getVisibleIndex()+1)return!1;return[t[0],t[i-1]]}}}}),Ext.define("Ext.grid.selection.Replicator",{extend:"Ext.plugin.Abstract",alias:"plugin.selectionreplicator",init:function(e){this.gridListeners=e.on({beforeselectionextend:this.onBeforeSelectionExtend,scope:this,destroyable:!0})},onBeforeSelectionExtend:function(e,t,i){var n=this.columns=[];return t.eachColumn(function(e){n.push(e)}),this.replicateSelection(e,t,i)},replicateSelection:function(e,t,i){if(!i.columns&&!t.isColumns){var n,r,o,a,s,l,d,u,c,h,f,g,p,m,x=this.columns,y=t.getFirstRowIndex(),v=t.getLastRowIndex(),E=v-y+1,b=[];if(n=x.length,c=x[0].getView().dataSource,1==E)s=this.getColumnValues(t.view.dataSource.getAt(y));else for(s=new Array(n),(b=i.rows<0?[c.getAt(y+1),c.getAt(y)]:[c.getAt(v-1),c.getAt(v)])[0]=this.getColumnValues(b[0]),b[1]=this.getColumnValues(b[1]),o=0;o<n;o++)p=b[1][o],m=b[0][o],isNaN(p)||isNaN(m)||(s[o]=Number(p)-Number(m));if(u=i.rows<0?(l=i.end.rowIdx,d=i.start.rowIdx-1,-1):(l=i.start.rowIdx,d=i.end.rowIdx+1,1),1==E)for(r=l;r!==d;r+=u)for(h=c.getAt(r),o=0;o<n;o++)(a=x[o]).dataIndex&&h.set(a.dataIndex,s[o]);else for(r=l;r!==d;r+=u)for(h=c.getAt(r),f=this.getColumnValues(c.getAt(r-u)),o=0;o<n;o++)(a=x[o]).dataIndex&&(g=f[o],isNaN(g)||h.set(a.dataIndex,Ext.coerce(Number(g)+s[o],g)))}},getColumnValues:function(e){var t,i,n=this.columns,r=n.length,o=new Array(n.length);for(t=0;t<r;t++)(i=n[t]).dataIndex&&(o[t]=e.get(i.dataIndex));return o},destroy:function(){this.gridListeners=Ext.destroy(this.gridListeners),this.callParent()}}),Ext.define("Ext.grid.selection.Rows",{extend:"Ext.grid.selection.Selection",requires:["Ext.util.Collection"],type:"rows",isRows:!0,clone:function(){var e=new this.self(this.view);return this.selectedRecords&&(e.selectedRecords=this.selectedRecords.clone()),this.rangeStart&&(e.setRangeStart(this.rangeStart),e.setRangeEnd(this.rangeEnd)),e},addOne:function(e){var t;e.isModel||Ext.raise("Row selection must be passed a record"),(t=this.selectedRecords||(this.selectedRecords=this.createRecordCollection())).byInternalId.get(e.internalId)||(t.add(e),this.view.onRowSelect(e))},add:function(e){var t,i;if(e.isModel)this.addOne(e);else if(Ext.isArray(e))for(t=0,i=e.length;t<i;t++)this.addOne(e[t]);else Ext.raise("add must be called with a record or array of records")},removeOne:function(e){return e.isModel||Ext.raise("Row selection must be passed a record"),!(!this.selectedRecords||!this.selectedRecords.byInternalId.get(e.internalId))&&(this.selectedRecords.remove(e),this.view.onRowDeselect(e),!(this.allSelected=!1))},remove:function(e){var t,i,n=!0;if(e.isModel)return this.removeOne(e);if(Ext.isArray(e))for(t=0,i=e.length;t<i;t++)n&=this.removeOne(e[t]);else Ext.raise("remove must be called with a record or array of records");return n},contains:function(e){if(!e||!e.isModel)return!1;var t=!1,i=this.selectedRecords;return this.allSelected?(this.add(e),!0):(i&&(t=!!i.byInternalId.get(e.internalId)),t)},getCount:function(){var e=this.selectedRecords;return e&&e.length||0},getRecords:function(){var e=this.selectedRecords;return e?e.getRange():[]},selectAll:function(){var e=this.view.dataSource,t=e.isBufferedStore?e.getData().getCount():e.getCount();this.clear(),this.setRangeStart(0),this.setRangeEnd(t-1),this.addRange(),this.allSelected=!0},getFirstRowIndex:function(){return this.getCount()?this.view.dataSource.indexOf(this.selectedRecords.first()):0},getLastRowIndex:function(){return this.getCount()?this.view.dataSource.indexOf(this.selectedRecords.last()):-1},eachRow:function(e,t){var i=this.selectedRecords;i&&i.each(e,t||this)},eachColumn:function(e,t){var i,n=this.view.getVisibleColumnManager().getColumns(),r=n.length;if(this.selectedRecords)for(i=0;i<r;i++)if(!1===e.call(this||t,n[i],i))return},eachCell:function(t,i){var n,r,o,a,e,s,l=this,d=l.selectedRecords,u=l.view,c=u.ownerGrid.getVisibleColumnManager().getColumns(),h=!1;if(c&&(n=c.length,a=new Ext.grid.CellContext(u),d&&d.each(function(e){for(a.setRow(e),r=0;r<n;r++)if(a.setColumn(c[r]),!1===t.call(i||l,a,a.colIdx,a.rowIdx))return!(h=!0)}),!h)){if((e=l.getRange())[0]===e[1])return;l.view.dataSource.getRange(e[0],e[1],{forRender:!1,callback:function(e){for(s=e.length,r=0;!h&&r<s;r++)for(a.setRow(e[r]),o=0;!h&&o<n;o++)a.setColumn(c[o]),!1===t.call(i||l,a,a.colIdx,a.rowIdx)&&(h=!0)}})}},beginUpdate:function(){var e=this.selectedRecords;e&&e.beginUpdate()},endUpdate:function(){var e=this.selectedRecords;e&&e.endUpdate()},destroy:function(){this.selectedRecords=Ext.destroy(this.selectedRecords),this.callParent()},privates:{clear:function(){var t=this.view;this.allSelected=!1,this.selectedRecords&&(this.eachRow(function(e){t.onRowDeselect(e)}),this.selectedRecords.clear()),this.setRangeStart(null)},isAllSelected:function(){return!!this.allSelected},setRangeStart:function(e,t){this.allSelected=!1,this.rangeStart=this.rangeEnd=e,t||this.view.onRowSelect(e)},setRangeEnd:function(e,t){var i,n,r,o,a,s=this.view,l=s.dataSource,d=this.selectedRecords;for(this.rangeEnd=e,n=this.getRange(),r=this.lastRange||n,o=Math.min(n[0],r[0]),e=Math.max(n[1],r[1]);o<=e;o++)if(a=l.getAt(o),i=o<n[0]||o>n[1],!t&&i)d&&this.contains(a)&&d.remove(a),s.onRowDeselect(o);else{if(t&&i)continue;s.onRowSelect(o)}this.lastRange=n},extendRange:function(e){var t,i=this.view.dataSource;for(t=e.start.rowIdx;t<=e.end.rowIdx;t++)this.add(i.getAt(t))},getLastSelected:function(){var e=this.selectedRecords;return e&&e.last()},getRange:function(){var e=this.rangeStart,t=this.rangeEnd;return null==e?[0,-1]:e<=t?[e,t]:[t,e]},getRangeSize:function(){var e=this.getRange();return e[1]-e[0]+1},createRecordCollection:function(){var i=this.view.dataSource;return new Ext.util.Collection({rootProperty:"data",extraKeys:{byInternalId:{rootProperty:!1,property:"internalId"}},sorters:[function(e,t){return i.indexOf(e)-i.indexOf(t)}]})},addRange:function(){var e,t;null!=this.rangeStart&&(e=this.getRange(),t=this.selectedRecords||(this.selectedRecords=this.createRecordCollection()),this.view.dataSource.getRange(e[0],e[1],{forRender:!1,callback:function(e){t.add.apply(t,e)}}))},onSelectionFinish:function(){var e=this.getContiguousSelection();e?this.view.getSelectionModel().onSelectionFinish(this,new Ext.grid.CellContext(this.view).setPosition(e[0],0),new Ext.grid.CellContext(this.view).setPosition(e[1],this.view.getVisibleColumnManager().getColumns().length-1)):this.view.getSelectionModel().onSelectionFinish(this)},getContiguousSelection:function(){var e,t,i,n=this.view.dataSource;if(this.selectedRecords&&(t=(e=Ext.Array.sort(this.selectedRecords.getRange(),function(e,t){return n.indexOf(e)-n.indexOf(t)})).length)){for(i=1;i<t;i++)if(n.indexOf(e[i])!==n.indexOf(e[i-1])+1)return!1;return[n.indexOf(e[0]),n.indexOf(e[t-1])]}}}}),Ext.define("Ext.grid.selection.SelectionExtender",{extend:"Ext.dd.DragTracker",maskBox:{},constructor:function(e){e.view.rendered?this.initSelectionExtender(e):(this.view=e.view,e.view.on({render:this.initSelectionExtender,args:[e],scope:this}))},initSelectionExtender:function(e){var t=this,i=Ext.dom.Element.DISPLAY;t.el=e.view.el,t.handle=e.view.ownerGrid.body.createChild({cls:Ext.baseCSSPrefix+"ssm-extender-drag-handle",style:"display:none"}).setVisibilityMode(i),t.handle.on({contextmenu:function(e){e.stopEvent()}}),t.mask=t.el.createChild({cls:Ext.baseCSSPrefix+"ssm-extender-mask",style:"display:none"}).setVisibilityMode(i),t.superclass.constructor.call(t,e),t.mask.skipGarbageCollection=t.handle.skipGarbageCollection=!0,t.viewListeners=t.view.on({scroll:t.onViewScroll,scope:t,destroyable:!0}),t.gridListeners=t.view.ownerGrid.on({columnResize:t.alignHandle,scope:t,destroyable:!0}),t.extendX=!!(1&t.axes),t.extendY=!!(2&t.axes)},setHandle:function(e,t){var i=this;i.view.rendered?(i.firstPos=e,i.lastPos=t,e&&t&&e.getCell(!0)&&t.getCell(!0)?(i.curPos?i.curPos.setPosition(t):i.curPos=t.clone(),i.alignHandle()):i.disable()):i.view.on({render:i.initSelectionExtender,args:[e,t],scope:i})},alignHandle:function(){var e,t=this.firstPos&&this.firstPos.getCell(!0),i=this.lastPos&&this.lastPos.getCell(!0),n=this.handle;t&&i?(this.enable(),n.alignTo(i,"c-br"),e=this.isHandleWithinView(Ext.fly(i).up(".x-grid-view")),n.setVisible(e)):this.disable()},isHandleWithinView:function(e){var t=e.getBox(),i=this.handle.getBox();return t.left<=i.left&&t.right>=i.right-i.width},enable:function(){this.handle.show(),this.callParent()},disable:function(){this.handle.hide(),this.mask.hide(),this.callParent()},onDrag:function(e){e.target===this.mask.dom&&(this.mask.hide(),e.target=document.elementFromPoint.apply(document,e.getXY()),this.mask.show());var t=this,i=t.view,n=i.el.getY(),r=i.el.getX(),o=e.getTarget(t.view.getCellSelector()),a=t.scrollTask||(t.scrollTask=Ext.util.TaskManager.newTask({run:t.doAutoScroll,scope:t,interval:10})),s=t.scrollBy||(t.scrollBy=[]);if(!t.el.contains(e.target))return s[0]=s[1]=0,a.stop();t.lastXY[1]>n+i.el.getHeight(!0)-15?t.extendY&&(s[1]=3,a.start()):t.lastXY[1]<n+10?t.extendY&&(s[1]=-3,a.start()):t.lastXY[0]>r+i.el.getWidth(!0)-15?t.extendX&&(s[0]=3,a.start()):t.lastXY[0]<r+10?t.extendX&&(s[0]=-3,a.start()):(s[0]=s[1]=0,a.stop()),o&&o!==t.lastOverCell&&(t.lastOverCell=o,t.syncMaskOnCell(o))},doAutoScroll:function(){var e,t=this.view;t.scrollBy.apply(t,this.scrollBy),(e=(e=document.elementFromPoint.apply(document,this.lastXY))&&Ext.fly(e).up(t.cellSelector))&&e!==this.lastOverCell&&(this.lastOverCell=e,this.syncMaskOnCell(e))},onEnd:function(e){this.scrollTask&&this.scrollTask.stop(),this.extensionDescriptor&&(this.disable(),this.view.getSelectionModel().extendSelection(this.extensionDescriptor))},onViewScroll:function(){this.active&&this.lastOverCell&&this.syncMaskOnCell(this.lastOverCell),this.firstPos&&this.alignHandle()},syncMaskOnCell:function(e){var t,i=this,n=i.view,r=n.all,o=i.curPos,a=i.maskBox,s=i.firstPos.clone(),l=i.lastPos.clone(),d=i.firstPos.clone(),u=i.lastPos.clone(),c=!i.allowReduceSelection;s.setRow(Math.min(Math.max(s.rowIdx,r.startIndex),r.endIndex)),l.setRow(Math.min(Math.max(l.rowIdx,r.startIndex),r.endIndex)),i.selectionRegion=t=s.getCell().getRegion().union(l.getCell().getRegion()),o.setPosition(n.getRecord(e),n.getHeaderByCell(e)),e=Ext.fly(e),i.mask.dom.style.borderTopWidth=i.mask.dom.style.borderRightWidth=i.mask.dom.style.borderBottomWidth=i.mask.dom.style.borderLeftWidth="",o.rowIdx<i.firstPos.rowIdx&&i.extendY?(i.extensionDescriptor={type:"rows",start:d.setRow(o.rowIdx),end:u.setRow(i.firstPos.rowIdx-1),rows:o.rowIdx-i.firstPos.rowIdx,mousePosition:i.lastXY},i.mask.dom.style.borderBottomWidth="0",a.x=t.x,a.y=e.getY(),a.width=t.right-t.left,a.height=t.top-e.getY()):o.rowIdx>i.lastPos.rowIdx&&i.extendY?(i.extensionDescriptor={type:"rows",start:d.setRow(i.lastPos.rowIdx+1),end:u.setRow(o.rowIdx),rows:o.rowIdx-i.lastPos.rowIdx,mousePosition:i.lastXY},i.mask.dom.style.borderTopWidth="0",a.x=t.x,a.y=t.bottom,a.width=t.right-t.left,a.height=e.getRegion().bottom-t.bottom):!c&&o.rowIdx<i.lastPos.rowIdx&&i.extendY&&o.colIdx===i.lastPos.colIdx?(i.extensionDescriptor={type:"rows",start:d.setRow(i.firstPos.rowIdx),end:u.setRow(o.rowIdx),rows:-1,mousePosition:i.lastXY,reduce:!0},i.mask.dom.style.borderTopWidth="0",a.x=t.x,a.y=t.top,a.width=t.right-t.left,a.height=e.getRegion().bottom-t.top):o.colIdx<i.firstPos.colIdx&&i.extendX?(i.extensionDescriptor={type:"columns",start:d.setColumn(o.colIdx),end:u.setColumn(i.firstPos.colIdx-1),columns:o.colIdx-i.firstPos.colIdx,mousePosition:i.lastXY},i.mask.dom.style.borderRightWidth="0",a.x=e.getX(),a.y=t.top,a.width=t.left-e.getRegion().left,a.height=t.bottom-t.top):o.colIdx>i.lastPos.colIdx&&i.extendX?(i.extensionDescriptor={type:"columns",start:d.setColumn(i.lastPos.colIdx+1),end:u.setColumn(o.colIdx),columns:o.colIdx-i.lastPos.colIdx,mousePosition:i.lastXY},i.mask.dom.style.borderLeftWidth="0",a.x=t.right,a.y=t.top,a.width=e.getRegion().right-t.right,a.height=t.bottom-t.top):!c&&o.colIdx<i.lastPos.colIdx&&i.extendX?(i.extensionDescriptor={type:"columns",start:d.setColumn(i.firstPos.colIdx),end:u.setColumn(o.colIdx),columns:-1,mousePosition:i.lastXY,reduce:!0},i.mask.dom.style.borderLeftWidth="0",a.x=t.left,a.y=t.top,a.width=e.getRegion().right-t.left,a.height=t.bottom-t.top):i.extensionDescriptor=null,n.ownerGrid.hasListeners.selectionextenderdrag&&n.ownerGrid.fireEvent("selectionextenderdrag",n.ownerGrid,n.getSelectionModel().getSelected(),i.extensionDescriptor),i.extensionDescriptor?(i.mask.show(),i.mask.setBox(a)):i.mask.hide()},destroy:function(){Ext.destroy(this.gridListeners,this.viewListeners,this.mask,this.handle),this.callParent()}}),Ext.define("Ext.grid.selection.SpreadsheetModel",{extend:"Ext.selection.Model",requires:["Ext.grid.selection.Selection","Ext.grid.selection.Cells","Ext.grid.selection.Rows","Ext.grid.selection.Columns","Ext.grid.selection.SelectionExtender"],alias:"selection.spreadsheet",isSpreadsheetModel:!0,config:{columnSelect:{$value:!1,lazy:!0},cellSelect:{$value:!0,lazy:!0},rowSelect:{$value:!0,lazy:!0},dragSelect:{$value:!0,lazy:!0},selected:null,extensible:{$value:!0,lazy:!0},reducible:!0},checkboxSelect:!1,checkboxColumnIndex:0,showHeaderCheckbox:!0,checkColumnHeaderText:null,checkboxHeaderWidth:24,rowNumbererHeaderWidth:46,columnSelectCls:Ext.baseCSSPrefix+"ssm-column-select",rowNumbererHeaderCls:Ext.baseCSSPrefix+"ssm-row-numberer-hd",tdCls:Ext.baseCSSPrefix+"grid-cell-special "+Ext.baseCSSPrefix+"selmodel-column",bindComponent:function(e){var t,i,n,r=this;r.view!==e&&(r.view&&(r.navigationModel=null,Ext.destroy(r.viewListeners,r.navigationListeners)),(r.view=e)&&(r.getCellSelect(),(n=e.ownerGrid.lockedGrid)?(r.hasLockedHeader=!0,r.onViewCreated(n,n.getView())):e.grid.on({viewcreated:r.onViewCreated,scope:r,single:!0}),r.gridListeners=e.ownerGrid.on({columnschanged:r.onColumnsChanged,columnmove:r.onColumnMove,scope:r,destroyable:!0}),(i=r.getStoreListeners()).scope=r,i.destroyable=!0,r.storeListeners=r.store.on(i),(t=r.getViewListeners()).scope=r,t.destroyable=!0,r.viewListeners=e.on(t),r.navigationModel=e.getNavigationModel(),r.navigationListeners=r.navigationModel.on({navigate:r.onNavigate,scope:r,destroyable:!0}),r.getColumnSelect()&&e.ownerGrid.addCls(r.columnSelectCls),r.updateHeaderState()))},getCheckboxHeaderConfig:function(){var e=!1!==this.showHeaderCheckbox;return{xtype:"checkcolumn",isCheckerHd:e,headerCheckbox:e,ignoreExport:!0,text:this.checkColumnHeaderText,clickTargetName:"el",width:this.checkboxHeaderWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,tdCls:this.tdCls,cls:Ext.baseCSSPrefix+"selmodel-column",stopSelection:!1,editRenderer:this.editRenderer||this.renderEmpty,locked:this.hasLockedHeader,updateHeaderState:this.updateHeaderState.bind(this),toggleAll:Ext.emptyFn,setRecordCheck:Ext.emptyFn,isRecordChecked:Ext.emptyFn}},renderEmpty:function(){return" "},getStoreListeners:function(){var e=this.callParent();return e.priority=2e3,e.refresh=this.onStoreChanged,e.clear=this.onStoreChanged,e},onHeaderClick:function(e,t,i){var n=this,r=n.selected,o=!1;t===n.numbererColumn||t===n.checkColumn?(i.stopEvent(),r&&r.isAllSelected()?n.deselectAll():n.selectAll(),n.updateHeaderState(),n.lastColumnSelected=null):n.columnSelect&&(i.shiftKey&&r&&r.lastColumnSelected?(r.setRangeEnd(t),n.fireSelectionChange()):(o=n.isColumnSelected(t),r&&(i.ctrlKey?o&&(n.deselectColumn(t),n.selected.lastColumnSelected=null):(r.clear(),n.updateSelectionExtender())),o&&(i.ctrlKey||"touch"===i.pointerType)||(n.selectColumn(t,i.ctrlKey),(r=n.selected).lastColumnSelected=t,r.startColumn||(r.startColumn=t))),n.lastOverColumn=t)},selectByPosition:function(e){e=new Ext.grid.CellContext(this.view).setPosition(e.row,e.column),this.getCellSelect()?this.selectCells(e,e):this.getRowSelect()?this.select(e.record):this.getColumnSelect()&&this.selectColumn(e.column)},updateHeaderState:function(){var e,t=this.view.dataSource,i=this.views,n=this.selected,r=!1,o=this.checkColumn;t&&n&&n.isRows&&(e=t.getCount(),r=t.isBufferedStore?n.allSelected:0<e&&e===n.getCount()),i&&i.length&&o&&o.setHeaderStatus(r)},onBindStore:function(e,t,i){i||this.onStoreRefresh()},onBeforeReconfigure:function(e,t,i,n,r){var o=this.checkboxColumnIndex;i&&(Ext.suspendLayouts(),this.numbererColumn&&(this.numbererColumn.ownerCt.remove(this.numbererColumn,!1),i.unshift(this.numbererColumn)),this.checkColumn&&("first"===o?o=0:"last"===o&&(o=i.length),this.checkColumn.ownerCt.remove(this.checkColumn,!1),Ext.Array.insert(i,o,[this.checkColumn])),Ext.resumeLayouts())},getCellContext:function(e,t){return new Ext.grid.CellContext(this.view.ownerGrid.getView()).setPosition(e,t)},select:function(e,t,i){var n,r,o,a=this.selected,s=this.view,l=s.dataSource,d=!1;for(a&&a.isRows?t||a.clear():(this.resetSelection(!0),a=this.selected=new Ext.grid.selection.Rows(s)),Ext.isArray(e)||(e=[e]),n=e.length,r=0;r<n;r++)"number"==typeof(o=e[r])&&(o=l.getAt(o)),a.contains(o)||(a.add(o),d=!0);d&&(this.updateHeaderState(),i||this.fireSelectionChange())},deselect:function(e,t){var i,n,r,o=this.selected,a=this.view.dataSource,s=!1;if(o&&o.isRows)for(Ext.isArray(e)||(e=[e]),i=e.length,n=0;n<i;n++)"number"==typeof(r=e[n])&&(r=a.getAt(r)),o.remove(r),s=s||!0;s&&(this.updateHeaderState(),t||this.fireSelectionChange())},selectCells:function(e,t,i){var n,r=this.view.ownerGrid.view;e=e.isCellContext?e.clone():new Ext.grid.CellContext(r).setPosition(e),t=t.isCellContext?t.clone():new Ext.grid.CellContext(r).setPosition(t),this.resetSelection(!0),this.selected=n=new Ext.grid.selection.Cells(e.view),n.setRangeStart(e),n.setRangeEnd(t),i||this.fireSelectionChange()},selectAll:function(e){var t,i=this,n=i.selected,r=i.view;i.rowSelect?(n&&n.isRows||(i.resetSelection(!0),i.selected=n=new Ext.grid.selection.Rows(r)),t=!0):i.cellSelect?(n&&n.isCells||(i.resetSelection(!0),i.selected=n=new Ext.grid.selection.Cells(r)),t=!0):i.columnSelect&&(n&&n.isColumns||(i.resetSelection(!0),i.selected=n=new Ext.grid.selection.Columns(r)),t=!0),n&&(n.allSelected=!0),t&&(i.updateHeaderState(),n.selectAll(),e||i.fireSelectionChange())},deselectAll:function(e){var t=this.selected;t&&t.getCount()&&(t.clear(),t.allSelected=!1,this.updateHeaderState(),e||this.fireSelectionChange())},selectRows:function(e,t,i){var n,r=this.selected,o=r&&r.isRows,a=e.length;if(t&&o||this.resetSelection(!0),o||(this.selected=r=new Ext.grid.selection.Rows(this.view)),e.isEntity)r.add(e);else for(n=0;n<a;n++)r.add(e[n]);i||this.fireSelectionChange()},isSelected:function(e){return this.isRowSelected(e)},selectColumn:function(e,t,i){var n=this.selected,r=e.getView();n&&n.isColumns&&n.view===r.ownerGrid.view||(this.resetSelection(!0),this.selected=n=new Ext.grid.selection.Columns(r)),n.contains(e)||(t||n.clear(),n.add(e),this.updateHeaderState(),i||this.fireSelectionChange())},deselectColumn:function(e,t){var i=this.getSelected();i&&i.isColumns&&i.contains(e)&&(i.remove(e),this.updateHeaderState(),t||this.fireSelectionChange())},getSelection:function(){var e=this.selected;return e&&e.isRows?e.getRecords():[]},destroy:function(){var e=this,t=e.scrollEls;Ext.destroy(e.gridListeners,e.viewListeners,e.selected,e.navigationListeners,e.extensible),t&&Ext.dd.ScrollManager.unregister(t),e._onMouseUp&&!e._onMouseUp.destroyed&&(e.stopAutoScroller(),e._onMouseUp.destroy()),e.selected=e.gridListeners=e.viewListeners=e.selectionData=e.navigationListeners=e.scrollEls=null,e.callParent()},privates:{axesConfigs:{x:1,y:2,xy:3,both:3,true:3},getNumbererColumnConfig:function(){return{xtype:"rownumberer",width:this.rowNumbererHeaderWidth,editRenderer:this.renderEmpty,tdCls:this.rowNumbererTdCls,cls:this.rowNumbererHeaderCls,locked:this.hasLockedHeader}},getViewListeners:function(){return{refresh:this.onViewRefresh,keyup:{element:"el",fn:this.onViewKeyUp,scope:this}}},onViewKeyUp:function(e){var t=this.selected;e.keyCode===e.SHIFT&&t&&t.isRows&&t.getRangeSize()&&t.addRange()},onStoreChanged:function(){var e=this.selected;e&&(e.isCells?this.resetSelection():e.isRows&&(!1===this.pruneRemoved&&e.selectedRecords.length?this.refresh():this.resetSelection()))},onColumnsChanged:function(){var e=this.onViewChanged(this.view,!0);Ext.on("idle",e?this.fireSelectionChange:this.updateSelectionExtender,this,{single:!0})},onColumnMove:function(){this.updateSelectionExtender()},onViewRefresh:function(e){var t=this.onViewChanged(e);this[t?"fireSelectionChange":"updateSelectionExtender"]()},resetSelection:function(e){var t=this.selected;t&&(t.clear(),e||this.fireSelectionChange())},onViewChanged:function(i,e){var t,n,r,o,a,s=this,l=s.selected,d=i.store,u=!1;if(l)if(i=l.view,e)if(l.isCells)if(a=new Ext.grid.CellContext(i),t=l.getRowRange(),n=i.ownerGrid.getColumnManager().getColumns().length)for(o=t[0];o<=t[1];o++)for(a.setRow(o),r=0;r<n;r++)a.setColumn(r),a.column&&i.onCellDeselect(a),s.maybeClearSelection(a)&&(u=!0);else s.clearSelections(),u=!0;else l.isColumns&&(u=!1,l.eachColumn(function(e,t){e.isVisible()&&i.ownerGrid.isAncestor(e)||(s.remove(e),s.maybeClearSelection({column:e})&&(u=!0))}));else l.isRows&&d.isFiltered()&&l.eachRow(function(e){d.contains(e)||(this.remove(e),s.maybeClearSelection({rowIdx:i.indexOf(e)})&&(u=!0))});return u},onViewCreated:function(e,t){var i=this,n=t.ownerGrid,r=t.headerCt;n.lockable&&!t.isLockedView||(i.getRowSelect()&&i.getNumbererColumn(),i.checkboxSelect&&i.addCheckbox(t,!0),i.mon(t.ownerGrid,"beforereconfigure",i.onBeforeReconfigure,i)),r.sortOnClick=!i.getColumnSelect(),i.getDragSelect()&&t.on("render",i.onViewRender,i,{single:!0})},onViewRender:function(e){var t,i=e.getEl(),n=this.views,r=n.length;for(t=0;t<r;t++)n[t].headerCt.sortOnClick=!this.columnSelect;i.ddScrollConfig={vthresh:50,hthresh:50,frequency:300,increment:100},Ext.dd.ScrollManager.register(i),(this.scrollEls||(this.scrollEls=[])).push(i),e.on("cellmousedown",this.handleMouseDown,this),e.lockingPartner&&e.lockingPartner.on("cellmousedown",this.handleMouseDown,this)},handleMouseDown:function(e,t,i,n,r,o,a){var s,l,d,u=this,c=u.selected,h=a.position.column,f=!1;if(!a.button&&!a.altKey&&"touch"!==a.pointerType&&h){if(u.mousedownPosition=a.position.clone(),s=h===u.checkColumn)u.checkCellClicked=a.position.getCell(!0);else if(e.actionableMode)return;if(h===u.numbererColumn||s||!u.cellSelect)if(u.rowSelect)c&&(d=c.contains(n),a.shiftKey&&d?f=!0:a.shiftKey||a.ctrlKey||s||c.clear()),c&&c.isRows||(c&&c.clear(),c=u.selected=new Ext.grid.selection.Rows(e));else{if(!u.columnSelect)return!1;c&&(d=c.contains(u.mousedownPosition.column),a.shiftKey&&d?f=!0:a.shiftKey||a.ctrlKey||s||c.clear()),c&&c.isColumns||(c&&c.clear(),c=u.selected=new Ext.grid.selection.Columns(e))}else c&&(d=c.contains(u.getCellContext(n,i)),a.shiftKey&&d?f=!0:a.shiftKey||c.clear()),c&&c.isCells||(c&&c.clear(),c=u.selected=new Ext.grid.selection.Cells(e));if(l=f||!a.shiftKey,!f){if(a.shiftKey)return;u.lastOverRecord=u.lastOverColumn=null}u._onMouseUp=Ext.getBody().on("mouseup",u.onMouseUp,u,{single:!0,view:c.view,destroyable:!0}),l&&c.view.el.on("mousemove",u.onMouseMove,u,{view:c.view})}},onMouseMove:function(e,t,i){var n=this,r=i.view,o=e.getTarget(r.cellSelector),a=i.view.getHeaderByCell(o),s=n.selected;if(r.isLockingView&&(r=e.within(r.lockedView.el)?r.lockedView:r.normalView),n.checkCellClicked){if(o===n.checkCellClicked)return void(n.lastOverRecord||(n.lastOverRecord=r.getRecord(o.parentNode)));n.checkCellClicked=null,n.lastOverRecord&&(n.select(n.lastOverRecord),s.setRangeStart(n.store.indexOf(n.lastOverRecord)))}n.isDragging=!0,n.extensible&&n.extensible.disable(),a?n.changeSelectionRange(r,o,a,e):e.within(r.body.el)||n.scrollTowardsPointer(e,r.ownerGrid.view)},changeSelectionRange:function(e,t,i,n){var r,o,a,s,l,d=this,u=d.selected;d.stopAutoScroller(),r=e.getRecord(t.parentNode),o=d.store.indexOf(r),a=r!==d.lastOverRecord,s=i!==d.lastOverColumn,(a||s)&&(l=d.getCellContext(r,i)),u.isRows?a&&(d.lastOverRecord?u.setRangeEnd(o,n.ctrlKey):u.setRangeStart(o)):u.isCells?(a||s)&&(d.lastOverRecord?u.setRangeEnd(l):u.setRangeStart(l)):u.isColumns&&s&&(d.lastOverColumn?u.setRangeEnd(l.column):u.setRangeStart(l.column)),(a||s)&&e.getNavigationModel().setPosition(new Ext.grid.CellContext(i.getView()).setPosition(r,i)),d.lastOverColumn=i,d.lastOverRecord=r},scrollTowardsPointer:function(e,t){var i,n,r=t.el.getConstrainRegion(),o=e.getXY();i=this.scrollTask||(this.scrollTask=Ext.util.TaskManager.newTask({run:this.doAutoScroll,args:[e,t],scope:this,interval:10})),n=this.scrollBy||(this.scrollBy=[]),o[1]>r.bottom?(n[0]=0,n[1]=3,i.start()):o[1]<r.top?(n[0]=0,n[1]=-3,i.start()):o[0]>r.right?(n[0]=3,n[1]=0,i.start()):o[0]<r.left&&(n[0]=-3,n[1]=0,i.start())},doAutoScroll:function(e,t){var i,n,r,o=this,a=t.el.getConstrainRegion(),s=[];if(!o.destroyed&&(t.scrollBy&&t.scrollBy.apply(t,o.scrollBy),o.scrollBy[0]?s[0]=0<o.scrollBy[0]?a.right-5:a.left+5:s[0]=e.getX(),o.scrollBy[1]?s[1]=0<o.scrollBy[1]?a.bottom-5:a.top+5:s[1]=e.getY(),i=document.elementFromPoint.apply(document,s))){if(!(i=Ext.fly(i).up(t.cellSelector)))return void o.stopAutoScroller();n=t.getRecord(i.dom.parentNode),r=t.getHeaderByCell(i.dom),!i||n===o.lastOverRecord&&r===o.lastOverColumn||o.changeSelectionRange(t,i.dom,r,e)}},stopAutoScroller:function(){this.scrollTask&&(this.scrollBy[0]=this.scrollBy[1]=0,this.scrollTask.stop(),this.scrollTask=null)},onMouseUp:function(e,t,i){var n,r,o=this,a=i.view,s=o.lastOverRecord&&new Ext.grid.CellContext(a).setPosition(o.lastOverRecord,o.lastOverColumn),l=s&&!s.isEqual(o.mousedownPosition);o.checkCellClicked=null,o.stopAutoScroller(),a&&!a.destroyed&&(e.position||(n=e.getTarget(a.cellSelector))&&(r=a.getRecord(n))&&(e.position=new Ext.grid.CellContext(a).setPosition(r,a.getHeaderByCell(n))),e.position&&(l=!e.position.isEqual(o.mousedownPosition)),o.extensible&&l&&o.extensible.disable(),a.el.un("mousemove",o.onMouseMove,o),o.selected.isRows&&o.isDragging&&o.selected.addRange(),l&&o.fireSelectionChange()),o.isDragging=!1},addCheckbox:function(e,t){var i=this.checkboxColumnIndex,n=e.headerCt;!1!==i&&("first"===i?i=0:"last"===i&&(i=n.getColumnCount()),this.checkColumn=n.add(i,this.getCheckboxHeaderConfig())),!0!==t&&e.refresh()},onNavigate:function(e){var t,i,n,r=this,o=e.view&&e.view.ownerGrid.view,a=e.record,s=r.selected,l=o&&new Ext.grid.CellContext(o).setPosition(a,e.column),d=e.keyEvent,u=d.ctrlKey,c=d.shiftKey,h=d.getKey();if(l&&!d.stopSelection&&(!u||h!==d.UP&&h!==d.LEFT&&h!==d.RIGHT&&h!==d.DOWN)&&(!(s&&(s.isCells||s.isColumns&&!r.getRowSelect()&&!u)&&1<s.getCount()&&c&&"click"===d.type)||d.position.isEqual(r.mousedownPosition))&&(r.cellSelect||r.columnSelect||r.rowSelect)&&e.record&&"mousedown"!==d.type){if(u&&d.keyCode===d.A)return!s||s.getCount()<2?r.selectAll():r.deselectAll(),void r.updateHeaderState();c?l.column===r.numbererColumn||l.column===r.checkColumn||!r.cellSelect&&!r.columnSelect||s&&s.isRows?r.rowSelect&&(s&&s.isRows&&s.view===o||(r.resetSelection(!0),s=r.selected=new Ext.grid.selection.Rows(o)),s.getRangeSize()||(null==(i=e.previousRecordIndex)&&(i=(n=r.getLastSelected())?r.store.indexOf(n):0),s.setRangeStart(i)),s.setRangeEnd(e.recordIndex),s.addRange(),t=!0):r.cellSelect?(s&&s.isCells&&s.view===o||(r.resetSelection(!0),s=r.selected=new Ext.grid.selection.Cells(o)),s.getRangeSize()||s.setRangeStart(e.previousPosition||r.getCellContext(0,0)),s.setRangeEnd(l),t=!0):r.columnSelect&&(s&&s.isColumns&&s.view===o||(r.resetSelection(!0),s=r.selected=new Ext.grid.selection.Columns(o)),s.getCount()||s.setRangeStart(l.column),s.setRangeEnd(e.position.column),t=!0):l.column===r.numbererColumn||l.column===r.checkColumn||r.rowSelect&&!r.cellSelect?(s&&s.isRows&&s.view===o||(r.resetSelection(!0),s=r.selected=new Ext.grid.selection.Rows(o)),u||l.column===r.checkColumn?s.contains(a)?s.remove(a):s.add(a):(s.clear(),s.add(a),s.setRangeStart(l.rowIdx,!0)),t=!0):d.getTarget(r.view.getCellSelector())&&(r.cellSelect?(s&&s.isCells&&s.view===o?s.clear():(r.resetSelection(!0),r.selected=s=new Ext.grid.selection.Cells(o)),s.setRangeStart(l),t=!0):r.columnSelect&&(s&&s.isColumns&&s.view===o||(r.resetSelection(!0),r.selected=s=new Ext.grid.selection.Columns(o)),u?s.contains(l.column)?s.remove(l.column):s.add(l.column):s.setRangeStart(l.column),t=!0)),t&&(s.isRows&&r.updateHeaderState(),r.lastOverRecord=a,r.lastOverColumn=l.column,r.fireSelectionChange())}},maybeClearSelection:function(e){var t,i=this.selected,n=i.startCell,r=i.endCell,o=e.column,a=e.colIdx,s=e.rowIdx;return!n||n.column!==o&&n.colIdx!==a||n.rowIdx!==s||(i.startCell=t=null),!r||r.column!==o&&r.colIdx!==a||r.rowIdx!==s||(i.endCell=t=null),null===t},isRowSelected:function(e){var t=this.selected;return!(!t||!t.isRows)&&(e=Ext.isNumber(e)?this.store.getAt(e):e,t.contains(e))},isColumnSelected:function(e){var t=this.selected;return!(!t||!t.isColumns)&&t.contains(e)},isCellSelected:function(e,t,i){var n,r=this.selected;if(e=e.ownerGrid.view,r){if(r.isColumns)return"number"==typeof i&&(i=e.getVisibleColumnManager().getColumns()[i]),r.contains(i);if(r.isCells)return n=new Ext.grid.CellContext(e).setPosition({row:t,column:i}),r.contains(n)}return!1},applySelected:function(e){return e&&!(e.isRows||e.isCells||e.isColumns)&&Ext.raise("SpreadsheelModel#setSelected must be passed an instance of Ext.grid.selection.Selection"),e},updateSelected:function(e,t){var i,n,r,o,a;t&&t.clear(),e&&e.getCount()&&(i=e.view,e.isRows?e.eachRow(i.onRowSelect,i):e.isColumns?(n=e.getColumns(),(r=n.length)&&(a=new Ext.grid.CelContext(i),i.store.each(function(e){for(a.setRow(e),o=0;o<r;o++)a.setColumn(n[o]),i.onCellSelect(a)}))):e.isCells&&e.eachCell(i.onCellSelect,i))},getNumbererColumn:function(e){var t=this.numbererColumn,i=this.view;return t||(i.isNormalView&&(i=i.ownerGrid.lockedGrid),t=this.numbererColumn=i.headerCt.down("rownumberer")||i.headerCt.add(0,this.getNumbererColumnConfig())),t},updateRowSelect:function(e){var t=this,i=t.selected,n=t.view;n&&n.rendered&&(e?(t.checkColumn&&t.checkColumn.show(),t.getNumbererColumn().show()):(t.checkColumn&&t.checkColumn.hide(),t.numbererColumn&&t.numbererColumn.hide()),!e&&i&&i.isRows&&(i.clear(),t.fireSelectionChange()))},updateColumnSelect:function(e){var t,i=this.selected,n=this.views,r=n?n.length:0;for(t=0;t<r;t++)n[t].headerCt.sortOnClick=!e;!e&&i&&i.isColumns&&(i.clear(),this.fireSelectionChange()),e?this.view.ownerGrid.addCls(this.columnSelectCls):this.view.ownerGrid.removeCls(this.columnSelectCls)},updateCellSelect:function(e){var t=this.selected;!e&&t&&t.isCells&&(t.clear(),this.fireSelectionChange())},fireSelectionChange:function(){var e,t,i=this,n=i.selected,r=n.view,o=r.ownerGrid,a=r.dataSource;i.updateSelectionExtender(),n.isRows?(e=n.getRecords(),t=a.getTotalCount()||a.getCount(),i.selected.allSelected=!!(a.isBufferedStore?i.selected.allSelected:t&&e.length&&t===e.length),i.fireEvent("selectionchange",i,e)):n.isCells&&(i.selected.allSelected=!1,i.fireEvent("selectionchange",i,n.getCount()?i.store.getRange.apply(n.view.dataSource,n.getRowRange()):[])),o.fireEvent("selectionchange",o,n)},getLastSelected:function(){var e=this.selected;if(e.getLastSelected)return e.getLastSelected()},updateSelectionExtender:function(){var e=this.selected;e&&e.onSelectionFinish()},onSelectionFinish:function(e,t,i){var n=this.getExtensible();n&&n.setHandle(t,i)},applyExtensible:function(e){if(e)return(e=!0===e||"string"==typeof e?{axes:this.axesConfigs[e]}:Ext.Object.chain(e)).allowReduceSelection=this.getReducible(),e.view=this.selected.view,new Ext.grid.selection.SelectionExtender(e)},applyReducible:function(e){return!!e},updateReducible:function(e){var t=this.extensible;t&&(t.allowReduceSelection=e)},extendSelection:function(e){var t=this.selected,i=e.reduce?"reduce":"extend";!1!==this.view.ownerGrid.fireEvent("beforeselectionextend",this.view.ownerGrid,t,e)&&(t[i+"Range"](e),this.fireSelectionChange())},onIdChanged:function(e,t,i,n){var r=this.selected;r&&r.isRows&&r.selectedRecords&&r.selectedRecords.updateKey(t,i)},onPageAdd:function(e,t,i){var n,r,o=this.selected,a=i.length,s=o&&o.selectedRecords;if(s&&o.isRows)for(n=0;n<a;n++)r=i[n],s.get(r.id)?s.replace(r):o.allSelected&&s.add(r)},refresh:function(){var e=this.getSelected();e&&e.isRows&&this.callParent()},onStoreAdd:function(){var e=this.getSelected();e&&e.isRows&&(this.callParent(arguments),this.updateHeaderState())},onStoreClear:function(){this.resetSelection()},onStoreLoad:function(){var e=this.getSelected();e&&e.isRows&&(this.callParent(arguments),this.updateHeaderState())},onStoreRefresh:function(){var e=this.selected;e&&e.isRows&&e.selectedRecords&&this.updateSelectedInstances(e.selectedRecords),this.view&&this.updateHeaderState()},onPageRemove:function(e,t,i){var n=this.selected;n&&n.allSelected||this.onStoreRemove(this.store,i)},onStoreRemove:function(){var e=this.getSelected();e&&e.isRows&&this.callParent(arguments)}}},function(e){Ext.ClassManager.get("Ext.grid.column.RowNumberer")&&(e.prototype.rowNumbererTdCls=Ext.grid.column.RowNumberer.prototype.tdCls+" "+Ext.baseCSSPrefix+"ssm-row-numberer-cell")}),Ext.define("Ext.util.Queue",{constructor:function(){this.clear()},add:function(e,t){var i,n=this.getKey(e);return(i=this.map[n])?t&&(this.map[n]=e,this.items[Ext.Array.indexOf(this.items,i)]=e):(++this.length,this.items.push(e),this.map[n]=e),e},clear:function(){var e=this.items;return this.items=[],this.map={},this.length=0,e},contains:function(e){var t=this.getKey(e);return this.map.hasOwnProperty(t)},getCount:function(){return this.length},getKey:function(e){return e.id},remove:function(e){var t,i=this.getKey(e),n=this.items;return this.map[i]&&(t=Ext.Array.indexOf(n,e),Ext.Array.erase(n,t,1),delete this.map[i],--this.length),e}}),Ext.define("Ext.layout.ContextItem",{heightModel:null,widthModel:null,sizeModel:null,optOut:!1,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:!0,isContextItem:!0,isTopLevel:!1,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:!1,constructor:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g,p=this,m=Ext.layout.SizeModel.sizeModels,x=m.configured,y=m.shrinkWrap;Ext.apply(p,e),s=p.target,t=p.el,p.id=s.id,p.flushedProps={},p.props=o={},p.styles={},s.isComponent?(p.wrapsComponent=!0,p.framing=s.frameSize||null,p.isComponentChild=s.ownerLayout&&s.ownerLayout.isComponentLayout,i=s.lastBox,(n=s.ownerCt)&&(r=n.el&&p.context.items[n.el.id])&&(p.ownerCtContext=r),p.sizeModel=a=s.getSizeModel(r&&r.widthModel.pairsByHeightOrdinal[r.heightModel.ordinal]),p.widthModel=h=a.width,p.heightModel=f=a.height,i&&!1===i.invalid&&(u=s.width===(l=i.width),c=s.height===(d=i.height),h===y&&f===y?g=!0:h===x&&u&&(g=f===y||f===x&&c),g&&(p.optOut=!0,o.width=l,o.height=d))):i=t.lastBox,p.lastBox=i},init:function(e,t){var i,n,r,o,a,s,l,d,u=this,c=u.props,h=u.dirty,f=u.ownerCtContext,g=u.target.ownerLayout,p=!u.state,m=e||p,x=u.heightModel,y=u.widthModel,v=0;if(u.dirty=u.invalid=!1,u.props={},u.remainingChildDimensions=0,u.boxChildren&&(u.boxChildren.length=0),p||(u.clearAllBlocks("blocks"),u.clearAllBlocks("domBlocks")),!u.wrapsComponent)return m;if(s=u.target,u.state={},p)s.beforeLayout&&s.beforeLayout!==Ext.emptyFn&&s.beforeLayout(),!f&&(o=s.ownerCt)&&(f=u.context.items[o.el.id]),f?(u.ownerCtContext=f,u.isBoxParent=g&&g.isItemBoxParent(u)):u.isTopLevel=!0,u.frameBodyContext=u.getEl("frameBody");else for(f=u.ownerCtContext,u.isTopLevel=!f,n=0,r=(i=u.children).length;n<r;++n)i[n].init(!0);return u.hasRawContent=!(s.isContainer&&0<s.items.items.length),e?(u.widthModel=u.heightModel=null,a=s.getSizeModel(f&&f.widthModel.pairsByHeightOrdinal[f.heightModel.ordinal]),p&&(u.sizeModel=a),u.widthModel=a.width,u.heightModel=a.height,f&&!u.isComponentChild&&(g.needsItemSize||!s.liquidLayout?f.remainingChildDimensions+=2:(u.widthModel.calculated&&++f.remainingChildDimensions,u.heightModel.calculated&&++f.remainingChildDimensions))):c&&(u.recoverProp("x",c,h),u.recoverProp("y",c,h),u.widthModel.calculated?u.recoverProp("width",c,h):"width"in c&&++v,u.heightModel.calculated?u.recoverProp("height",c,h):"height"in c&&++v,f&&!u.isComponentChild&&(f.remainingChildDimensions+=v)),c&&g&&g.manageMargins&&(u.recoverProp("margin-top",c,h),u.recoverProp("margin-right",c,h),u.recoverProp("margin-bottom",c,h),u.recoverProp("margin-left",c,h)),t&&(l=t.heightModel,(d=t.widthModel)&&l&&y&&x&&y.shrinkWrap&&x.shrinkWrap&&d.constrainedMax&&l.constrainedMin&&(l=null),d&&(u.widthModel=d),l&&(u.heightModel=l),t.state&&Ext.apply(u.state,t.state)),m},initContinue:function(e){var t,i=this.ownerCtContext,n=this.target,r=this.widthModel,o=n.getInherited();return r.fixed?o.inShrinkWrapTable=!1:delete o.inShrinkWrapTable,e&&(i&&r.shrinkWrap?(t=i.isBoxParent?i:i.boxParent)&&t.addBoxChild(this):r.natural&&(this.boxParent=i)),e},initDone:function(e){var t=this.props,i=this.state;0===this.remainingChildDimensions&&(t.containerChildrenSizeDone=!0),e&&(t.containerLayoutDone=!0),this.boxChildren&&this.boxChildren.length&&this.widthModel.shrinkWrap&&(this.el.setWidth(1e4),i.blocks=(i.blocks||0)+1)},initAnimation:function(){var e=this.target,t=this.ownerCtContext;t&&t.isTopLevel?this.animatePolicy=e.ownerLayout.getAnimatePolicy(this):!t&&e.isCollapsingOrExpanding&&e.animCollapse&&(this.animatePolicy=e.componentLayout.getAnimatePolicy(this)),this.animatePolicy&&this.context.queueAnimation(this)},addBlock:function(e,t,i){var n=this[e]||(this[e]={}),r=n[i]||(n[i]={});r[t.id]||(++(r[t.id]=t).blockCount,++this.context.blockCount)},addBoxChild:function(e){var t,i=e.widthModel;e.boxParent=this,e.measuresBox=i.shrinkWrap?e.hasRawContent:i.natural,e.measuresBox&&((t=this.boxChildren)?t.push(e):this.boxChildren=[e])},addPositionStyles:function(e,t){var i=t.x,n=t.y,r=0;return void 0!==i&&(e[this.translateProps.x]=i+"px",++r),void 0!==n&&(e.top=n+"px",++r),r},addTrigger:function(e,t){var i=t?"domTriggers":"triggers",n=this[i]||(this[i]={}),r=this.context,o=r.currentLayout,a=n[e]||(n[e]={});a[o.id]||(++(a[o.id]=o).triggerCount,((a=r.triggers[t?"dom":"data"])[o.id]||(a[o.id]=[])).push({item:this,prop:e}),void 0!==this.props[e]&&(t&&this.dirty&&e in this.dirty||++o.firedTriggers))},boxChildMeasured:function(){var e=this.state;(e.boxesMeasured=(e.boxesMeasured||0)+1)===this.boxChildren.length&&(e.clearBoxWidth=1,++this.context.progressCount,this.markDirty())},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(e){var t=e.getStyles(e.borderNames,e.trblNames);return t.width=t.left+t.right,t.height=t.top+t.bottom,t},marginInfo:function(e){var t=e.getStyles(e.marginNames,e.trblNames);return t.width=t.left+t.right,t.height=t.top+t.bottom,t},paddingInfo:function(e){var t=(e.frameBodyContext||e).getStyles(e.paddingNames,e.trblNames);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}},checkCache:function(e){return this.cacheMissHandlers[e](this)},clearAllBlocks:function(e){var t,i=this[e];if(i)for(t in i)this.clearBlocks(e,t)},clearBlocks:function(e,t){var i,n,r,o=this[e],a=o&&o[t];if(a)for(r in delete o[t],i=this.context,a)n=a[r],--i.blockCount,--n.blockCount||n.pending||n.done||i.queueLayout(n)},block:function(e,t){this.addBlock("blocks",e,t)},domBlock:function(e,t){this.addBlock("domBlocks",e,t)},fireTriggers:function(e,t){var i,n,r=this[e],o=r&&r[t],a=this.context;if(o)for(n in o)++(i=o[n]).firedTriggers,i.done||i.blockCount||i.pending||a.queueLayout(i)},flush:function(){var e=this,t=e.dirty,i=e.state,n=e.el;e.dirtyCount=0,"attributes"in e&&(n.set(e.attributes),delete e.attributes),"innerHTML"in e&&(n.innerHTML=e.innerHTML,delete e.innerHTML),i&&i.clearBoxWidth&&(i.clearBoxWidth=0,e.el.setStyle("width",null),--i.blocks||e.context.queueItemLayouts(e)),t&&(delete e.dirty,e.writeProps(t,!0))},flushAnimations:function(){var t,e,i,n,r,o,a,s,l,d,u,c,h,f=this,g=f.previousSize;if(g){for(n=(i=(t=f.target).getAnimationProps()).duration,r=Ext.Object.getKeys(f.animatePolicy),o=Ext.apply({},{from:{},to:{},duration:n||Ext.fx.Anim.prototype.duration},i),s=a=0,l=r.length;s<l;s++)(u=g[d=r[s]])!==(c=f.peek(d))&&null!=c&&(d=f.translateProps[d]||d,o.from[d]=u,o.to[d]=c,++a);a?(1===f.isCollapsingOrExpanding?t.componentLayout.undoLayout(f):f.writeProps(o.from),f.el.animate(o),o=(e=Ext.fx.Manager.getFxQueue(f.el.id))[e.length-1],(t.$layoutAnim=o).on({afteranimate:function(){var e;delete t.$layoutAnim,t.destroying||t.destroyed||(1===(e=f.isCollapsingOrExpanding)?(t.componentLayout.redoLayout(f),t.afterCollapse(!0)):2===e&&t.afterExpand(!0),t.hasListeners.afterlayoutanimation&&t.fireEvent("afterlayoutanimation",t))}})):1===(h=f.isCollapsingOrExpanding)?t.afterCollapse(!0):2===h&&t.afterExpand(!0)}},getBorderInfo:function(){var e=this.borderInfo;return e||(this.borderInfo=e=this.checkCache("borderInfo")),e},getEl:function(e,t){var i,n,r;if(e){if(e.dom)n=e;else if(i=this.target,t&&(i=t),"function"==typeof(n=i[e])&&(n=n.call(i))===this.el)return this;n&&(r=this.context.getEl(this,n))}return r||null},getFrameInfo:function(){var e,t,i=this.frameInfo;return i||(e=this.framing,t=this.getBorderInfo(),this.frameInfo=i=e?{top:e.top+t.top,right:e.right+t.right,bottom:e.bottom+t.bottom,left:e.left+t.left,width:e.width+t.width,height:e.height+t.height}:t),i},getMarginInfo:function(){var e,t,i,n,r=this,o=r.marginInfo;return o||(r.wrapsComponent?(n=(i=(e=r.target).ownerLayout)?i.id:null,t=i&&i.manageMargins,(o=e.margin$)&&o.ownerId!==n&&(o=null),o||(o=r.parseMargins(e,e.margin)||r.checkCache("marginInfo"),t&&(r.setProp("margin-top",0),r.setProp("margin-right",0),r.setProp("margin-bottom",0),r.setProp("margin-left",0)),o.ownerId=n,e.margin$=o),o.width=o.left+o.right,o.height=o.top+o.bottom):o=r.checkCache("marginInfo"),r.marginInfo=o),o},clearMarginCache:function(){delete this.marginInfo,delete this.target.margin$},getPaddingInfo:function(){var e=this.paddingInfo;return e||(this.paddingInfo=e=this.checkCache("paddingInfo")),e},getProp:function(e){var t=this.props[e];return this.addTrigger(e),t},getDomProp:function(e){var t=this.dirty&&e in this.dirty?void 0:this.props[e];return this.addTrigger(e,!0),t},getStyle:function(e){var t,i,n=this.styles;return e in n?i=n[e]:(t=this.styleInfo[e],i=this.el.getStyle(e),t&&t.parseInt&&(i=parseInt(i,10)||0),n[e]=i),i},getStyles:function(e,t){var i,n,r,o,a,s,l,d,u=this.styles,c={},h=0,f=e.length;for(t=t||e,i=0;i<f;++i)(o=e[i])in u?(c[t[i]]=u[o],++h,i&&1===h&&(n=e.slice(0,i),r=t.slice(0,i))):h&&((n=n||[]).push(o),(r=r||[]).push(t[i]));if(h<f)for(n=n||e,r=r||t,s=this.styleInfo,l=this.el.getStyle(n),i=n.length;i--;)a=s[o=n[i]],d=l[o],a&&a.parseInt&&(d=parseInt(d,10)||0),c[r[i]]=d,u[o]=d;return c},hasProp:function(e){return null!=this.getProp(e)},hasDomProp:function(e){return null!=this.getDomProp(e)},invalidate:function(e){this.context.queueInvalidate(this,e)},markDirty:function(){1==++this.dirtyCount&&this.context.queueFlush(this)},onBoxMeasured:function(){var e=this.boxParent,t=this.state;e&&e.widthModel.shrinkWrap&&!t.boxMeasured&&this.measuresBox&&(t.boxMeasured=1,e.boxChildMeasured())},parseMargins:function(e,t){var i,n;return!0===t&&(t=5),"string"==(i=typeof t)||"number"==i?n=e.parseBox(t):t&&(n={top:0,right:0,bottom:0,left:0},t=t&&Ext.apply(n,e.parseBox(t))),n},peek:function(e){return this.props[e]},recalculateSizeModel:function(){var e,t=this.target,i=t.componentLayout,n=this.ownerCtContext,r=i.ownerContext;i.ownerContext=null,this.sizeModel=e=t.getSizeModel(n&&n.widthModel.pairsByHeightOrdinal[n.heightModel.ordinal]),this.widthModel=e.width,this.heightModel=e.height,r&&(i.ownerContext=this)},recoverProp:function(e,t,i){var n=this.props;e in t&&(n[e]=t[e],i&&e in i&&((this.dirty||(this.dirty={}))[e]=i[e]))},redo:function(e){var t,i,n;if(this.revertProps(this.props),e&&this.wrapsComponent){if(this.childItems)for(n=0,i=(t=this.childItems).length;n<i;n++)t[n].redo(e);for(n=0,i=(t=this.children).length;n<i;n++)t[n].redo()}},removeEl:function(e,t){var i,n;if(e){if(e.dom)n=e;else if(i=this.target,t&&(i=t),"function"==typeof(n=i[e])&&(n=n.call(i))===this.el)return this;n&&this.context.removeEl(n,this)}},revertProps:function(e){var t,i=this.flushedProps,n={};for(t in e)i.hasOwnProperty(t)&&(n[t]=e[t]);this.writeProps(n)},setAttribute:function(e,t){this.attributes||(this.attributes={}),this.attributes[e]=t,this.markDirty()},setBox:function(e){"left"in e&&this.setProp("x",e.left),"top"in e&&this.setProp("y",e.top),this.setSize(e.width,e.height)},setContentHeight:function(e,t){return!t&&this.hasRawContent?1:this.setProp("contentHeight",e)},setContentWidth:function(e,t){return!t&&this.hasRawContent?1:this.setProp("contentWidth",e)},setContentSize:function(e,t,i){return this.setContentWidth(e,i)+this.setContentHeight(t,i)===2},setProp:function(e,t,i){var n=this,r=typeof t;return"undefined"==r||"number"==r&&isNaN(t)?0:(n.props[e]===t||(n.props[e]=t,++n.context.progressCount,!1===i?(n.fireTriggers("domTriggers",e),n.clearBlocks("domBlocks",e)):n.styleInfo[e]&&(n.dirty||(n.dirty={}),n.dirty[e]=t,n.markDirty()),n.fireTriggers("triggers",e),n.clearBlocks("blocks",e)),1)},setHeight:function(e,t){var i,n,r,o,a=this,s=a.target,l=a.ownerCtContext;if(e<0&&(e=0),a.wrapsComponent){if(r=a.collapsedVert?0:s.minHeight||0,e=Ext.Number.constrain(e,r,s.maxHeight),o=a.props.height,!a.setProp("height",e,t))return NaN;l&&!a.isComponentChild&&isNaN(o)&&(--l.remainingChildDimensions||l.setProp("containerChildrenSizeDone",!0)),(i=a.frameBodyContext)&&(n=a.getFrameInfo(),i[a.el.vertical?"setWidth":"setHeight"](e-n.height,t))}else if(!a.setProp("height",e,t))return NaN;return e},setWidth:function(e,t){var i,n,r,o,a=this,s=a.target,l=a.ownerCtContext;if(e<0&&(e=0),a.wrapsComponent){if(r=a.collapsedHorz?0:s.minWidth||0,e=Ext.Number.constrain(e,r,s.maxWidth),o=a.props.width,!a.setProp("width",e,t))return NaN;l&&!a.isComponentChild&&isNaN(o)&&(--l.remainingChildDimensions||l.setProp("containerChildrenSizeDone",!0)),(i=a.frameBodyContext)&&(n=a.getFrameInfo(),i.setWidth(e-n.width,t))}else if(!a.setProp("width",e,t))return NaN;return e},setSize:function(e,t,i){this.setWidth(e,i),this.setHeight(t,i)},translateProps:{x:"left",y:"top"},undo:function(e){var t,i,n;if(this.revertProps(this.lastBox),e&&this.wrapsComponent){if(this.childItems)for(n=0,i=(t=this.childItems).length;n<i;n++)t[n].undo(e);for(n=0,i=(t=this.children).length;n<i;n++)t[n].undo()}},unsetProp:function(e){var t=this.dirty;delete this.props[e],t&&delete t[e]},writeProps:function(e,t){if(e&&"object"==typeof e){var i,n,r,o,a,s,l,d,u,c=this,h=c.el,f=c.target,g=c.styleInfo,p={},m=e.width,x=e.height,y=0;for(n in"displayed"in e&&h.setDisplayed(e.displayed),e)t&&(c.fireTriggers("domTriggers",n),c.clearBlocks("domBlocks",n),c.flushedProps[n]=1),(i=g[n])&&i.dom&&(i.suffix&&(r=parseInt(e[n],10))?p[n]=r+i.suffix:p[n]=e[n],++y);("x"in e||"y"in e)&&(f.isComponent?f.setPosition(e.x,e.y):y+=c.addPositionStyles(p,e)),"overflowX"in e&&(u=f.getScrollable())&&u.setX(e.overflowX),"overflowY"in e&&(u=u||f.getScrollable())&&u.setY(e.overflowY),c.wrapsComponent&&Ext.isIE9&&((o=void 0!==m&&c.hasOverflowY)||(a=void 0!==x&&c.hasOverflowX))&&(void 0===(s=c.isAbsolute)&&(s=!1,d=c.target.getTargetEl().getStyle("position"),c.isAbsolute=s="absolute"===d),s&&(l=Ext.scrollbar.size(),o&&(m=parseInt(m,10)+l.width,p.width=m+"px",++y),a&&(x=parseInt(x,10)+l.height,p.height=x+"px",++y))),y&&h.setStyle(p)}else Ext.Logger.warn("writeProps expected dirtyProps to be an object")},debugHooks:{$enabled:!1,addBlock:function(e,t,i){return(t.blockedBy||(t.blockedBy={}))[this.id+"."+i+("dom"===e.substring(0,3)?":dom":"")]=1,this.callParent(arguments)},addBoxChild:function(e){var t=this.callParent(arguments),i=this.boxChildren;return i&&1===i.length&&(this.context.boxParents||(this.context.boxParents=new Ext.util.MixedCollection)).add(this),t},addTrigger:function(e,t){var i,n=this.context.currentLayout;this.callParent(arguments),((i=this.context.triggersByLayoutId)[n.id]||(i[n.id]={}))[this.id+"."+e+(t?":dom":"")]={item:this,name:e}},checkAuthority:function(e){var t,i,n=this[e+"Model"],r=this.context.currentLayout;r===this.target.ownerLayout?t=n.calculated:r.isComponentLayout&&(t=this.isTopLevel||n.auto||n.configured),t||(i=this.context.getLayoutName(r),Ext.log(i+" cannot set "+e))},clearBlocks:function(e,t){var i,n=this[e],r=n&&n[t],o=this.id+"."+t+("dom"===e.substring(0,3)?":dom":"");if(r)for(i in r)delete r[i].blockedBy[o];return this.callParent(arguments)},getEl:function(e){var t=this.callParent(arguments);return t&&t!==this&&t.parent!==this&&Ext.raise({msg:"Got element from wrong component"}),t},init:function(){var e;return e=this.callParent(arguments),this.context.logOn.initItem&&Ext.log(this.id," consumers: content=",this.consumersContentWidth,"/",this.consumersContentHeight,", container=",this.consumersContainerWidth,"/",this.consumersContainerHeight,", size=",this.consumersWidth,"/",this.consumersHeight),e},invalidate:function(){return this.wrapsComponent?this.context.logOn.invalidate&&Ext.log("invalidate: ",this.id):Ext.raise({msg:"Cannot invalidate an element contextItem"}),this.callParent(arguments)},setProp:function(e,t,i){var n,r=this.context.currentLayout,o=this.context.getLayoutName(r),a=this.id+"."+e;return null!==t&&((n=this.setBy||(this.setBy={}))[e]?n[e]!==o&&Ext.log({level:"warn"},"BAD! ",a," set by ",n[e]," and ",o):n[e]=o),this.context.logOn.setProp&&(void 0===t||isNaN(t)||this.props[e]===t||Ext.log("set ",a," = ",t," (",i,")")),this.callParent(arguments)},setHeight:function(e,t,i){return!i&&this.wrapsComponent&&this.checkAuthority("height"),this.callParent(arguments)},setWidth:function(e,t,i){return!i&&this.wrapsComponent&&this.checkAuthority("width"),this.callParent(arguments)}}},function(){var e={dom:!0,parseInt:!0,suffix:"px"},t={dom:!0},i={dom:!1};this.prototype.styleInfo={containerChildrenSizeDone:i,containerLayoutDone:i,displayed:i,done:i,x:i,y:i,columnsChanged:i,rowHeights:i,viewOverflowY:i,overflowX:i,overflowY:i,left:e,top:e,right:e,bottom:e,width:e,height:e,"border-top-width":e,"border-right-width":e,"border-bottom-width":e,"border-left-width":e,"margin-top":e,"margin-right":e,"margin-bottom":e,"margin-left":e,"padding-top":e,"padding-right":e,"padding-bottom":e,"padding-left":e,"line-height":t,display:t,clear:t}}),Ext.define("Ext.layout.Context",{requires:["Ext.perf.Monitor","Ext.util.Queue","Ext.layout.ContextItem","Ext.layout.Layout","Ext.fx.Anim","Ext.fx.Manager"],remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(e){var t=this;Ext.apply(t,e),t.items={},t.layouts={},t.blockCount=0,t.cycleCount=0,t.flushCount=0,t.calcCount=0,t.animateQueue=t.newQueue(),t.completionQueue=t.newQueue(),t.finalizeQueue=t.newQueue(),t.finishQueue=t.newQueue(),t.flushQueue=t.newQueue(),t.invalidateData={},t.layoutQueue=t.newQueue(),t.invalidQueue=[],t.triggers={data:{},dom:{}}},callLayout:function(e,t){(this.currentLayout=e)[t](this.getCmp(e.owner))},cancelComponent:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f=e,g=!e.isComponent,p=g?f.length:1;for(n=0;n<p;++n){if(g&&(e=f[n]),i&&(e.ownerCt?(h=this.items[e.ownerCt.el.id])&&Ext.Array.remove(h.childItems,this.getCmp(e)):e.rendered&&this.removeEl(e.el)),!t&&(o=(d=this.invalidQueue).length))for(this.invalidQueue=l=[],r=0;r<o;++r)(c=(u=d[r]).item.target)===e||c.up(e)||l.push(u);s=e.componentLayout,this.cancelLayout(s),e.destroying||(s.getLayoutItems&&(a=s.getLayoutItems()).length&&this.cancelComponent(a,!0),e.isContainer&&!e.collapsed&&(s=e.layout,this.cancelLayout(s),(a=s.getVisibleItems()).length&&this.cancelComponent(a,!0)))}},cancelLayout:function(e){this.completionQueue.remove(e),this.finalizeQueue.remove(e),this.finishQueue.remove(e),this.layoutQueue.remove(e),e.running&&this.layoutDone(e),e.ownerContext=null},clearTriggers:function(e,t){var i,n,r,o=e.id,a=this.triggers[t?"dom":"data"],s=a&&a[o],l=s&&s.length||0;for(i=0;i<l;++i)n=(r=s[i]).item,delete(a=t?n.domTriggers:n.triggers)[r.prop][o]},flush:function(){var e,t=this.flushQueue.clear(),i=t.length;if(i)for(++this.flushCount,e=0;e<i;++e)t[e].flush()},flushAnimations:function(){var e,t=this.animateQueue.clear(),i=t.length;if(i){for(e=0;e<i;e++)!1!==t[e].target.animate&&t[e].flushAnimations();Ext.fx.Manager.runner()}},flushInvalidates:function(){var e,t,i,n,r=this.invalidQueue,o=r&&r.length;if(this.invalidQueue=[],o){for(t=[],n=0;n<o;++n)(e=(i=r[n]).item.target).container.isDetachedBody||(t.push(e),i.options&&(this.invalidateData[e.id]=i.options));this.invalidate(t,null)}},flushLayouts:function(e,t,i){var n,r,o=i?this[e].items:this[e].clear(),a=o.length;if(a){for(n=0;n<a;++n)(r=o[n]).running||this.callLayout(r,t);this.currentLayout=null}},getCmp:function(e){return this.getItem(e,e.el)},getEl:function(e,t){var i=this.getItem(t,t,e);return i.parent||((i.parent=e).children.length?e.children.push(i):e.children=[i]),i},getItem:function(e,t,i){var n=t.id,r=this.items;return r[n]||(r[n]=new Ext.layout.ContextItem({context:this,target:e,el:t,componentContext:i}))},handleFailure:function(){var e,t,i=this.layouts;for(t in Ext.failedLayouts=(Ext.failedLayouts||0)+1,i)e=i[t],i.hasOwnProperty(t)&&(e.running=!1,e.ownerContext=null);2!==Ext.devMode||this.pageAnalyzerMode?Ext.log.error("Layout run failed"):Ext.raise("Layout run failed")},invalidate:function(e,t){var i,n,r,o,a,s,l,d,u,c,h,f,g,p=this,m=!e.isComponent;for(o=0,d=m?e.length:1;o<d;++o)if((a=m?e[o]:e).rendered&&!a.hidden){if(n=a.ownerLayout,u=a.componentLayout,g=!1,n&&n.needsItemSize||!a.liquidLayout||(g=!0),(!g||n&&n.setsItemSize)&&(r=!(s=p.getCmp(a)).state,c=a.isContainer&&!a.collapsed?a.layout:null,h=p.invalidateData[s.id],delete p.invalidateData[s.id],f=s.init(t,h)),g)continue;h&&p.processInvalidate(h,s,"before"),u.beforeLayoutCycle&&u.beforeLayoutCycle(s),c&&c.beforeLayoutCycle&&c.beforeLayoutCycle(s),f=s.initContinue(f),i=!0,u.getLayoutItems&&(u.renderChildren(),(l=u.getLayoutItems()).length&&p.invalidate(l,!0)),c&&(i=!1,c.renderChildren(),(c.needsItemSize||c.activeItemCount)&&(l=c.getVisibleItems()).length&&p.invalidate(l,!0)),s.initDone(i),p.resetLayout(u,s,r),c&&p.resetLayout(c,s,r),s.initAnimation(),h&&p.processInvalidate(h,s,"after")}p.currentLayout=null},isDescendant:function(e,t){var i;if(e.isContainer)for(i=t.ownerCt;i;i=i.ownerCt)if(i===e)return!0;return!1},layoutDone:function(e){var t=e.ownerContext;e.running=!1,e.isComponentLayout?(t.measuresBox&&t.onBoxMeasured(),t.setProp("done",!0)):t.setProp("containerLayoutDone",!0),--this.remainingLayouts,++this.progressCount},newQueue:function(){return new Ext.util.Queue},processInvalidate:function(e,t,i){var n;e[i]&&(n=this.currentLayout,this.currentLayout=e.layout||null,e[i](t,e),this.currentLayout=n)},queueAnimation:function(e){this.animateQueue.add(e)},queueCompletion:function(e){this.completionQueue.add(e)},queueFinalize:function(e){this.finalizeQueue.add(e)},queueFlush:function(e,t){this.flushQueue.add(e,t)},chainFns:function(i,n,e){var r=this,o=i.layout,a=n.layout,s=i[e],l=n[e];return function(e){var t=r.currentLayout;s&&(r.currentLayout=o,s.call(i.scope||i,e,i)),r.currentLayout=a,l.call(n.scope||n,e,n),r.currentLayout=t}},purgeInvalidates:function(){var e,t,i,n,r,o,a=[],s=this.invalidQueue,l=s.length;for(e=0;e<l;++e){for(r=(n=s[e]).item.target,o=!0,t=a.length;t--;){if(i=a[t].item.target,r.isLayoutChild(i)){o=!1;break}i.isLayoutChild(r)&&Ext.Array.erase(a,t,1)}o&&a.push(n)}this.invalidQueue=a},queueInvalidate:function(e,t){var i,n,r,o,a,s=[],l=this.invalidQueue,d=l.length;for(e.isComponent?(i=e,(e=this.items[i.el.id])?e.recalculateSizeModel():e=this.getCmp(i)):i=e.target,e.invalid=!0;d--;){if(r=(n=l[d]).item.target,!i.isFloating&&i.up(r))return;if(r===i)return void((o=n.options)?t&&(t.widthModel&&(o.widthModel=t.widthModel),t.heightModel&&(o.heightModel=t.heightModel),(a=o.state)?t.state&&Ext.apply(a,t.state):o.state=t.state,t.before&&(o.before=this.chainFns(o,t,"before")),t.after&&(o.after=this.chainFns(o,t,"after"))):n.options=t);r.isLayoutChild(i)||s.push(n)}s.push({item:e,options:t}),this.invalidQueue=s},queueItemLayouts:function(e){var t=e.isComponent?e:e.target,i=t.componentLayout;i.pending||i.invalid||i.done||this.queueLayout(i),!(i=t.layout)||i.pending||i.invalid||i.done||t.collapsed||this.queueLayout(i)},queueLayout:function(e){this.layoutQueue.add(e),e.pending=!0},removeEl:function(e,t){var i=e.id,n=t?t.children:null,r=this.items;n&&Ext.Array.remove(n,r[i]),delete r[i]},resetLayout:function(e,t,i){(this.currentLayout=e).done=!1,e.pending=!0,e.firedTriggers=0,this.layoutQueue.add(e),i?((this.layouts[e.id]=e).running=!0,e.finishedLayout&&this.finishQueue.add(e),++this.remainingLayouts,++e.layoutCount,e.ownerContext=t,e.beginCount=0,e.blockCount=0,e.calcCount=0,e.triggerCount=0,e.initialized||e.initLayout(),e.beginLayout(t)):(++e.beginCount,e.running||(++this.remainingLayouts,e.running=!0,e.ownerContext=t,e.isComponentLayout&&t.unsetProp("done"),this.completionQueue.remove(e),this.finalizeQueue.remove(e))),e.beginLayoutCycle(t,i)},run:function(){var e=this,t=!1,i=e.cycleWatchDog;for(e.purgeInvalidates(),e.flushInvalidates(),Ext.layoutUpdates=(Ext.layoutUpdates||0)+1,e.state=1,e.totalCount=e.layoutQueue.getCount(),e.flush();(e.remainingLayouts||e.invalidQueue.length)&&i--;){if(e.invalidQueue.length&&e.flushInvalidates(),e.runCycle())t=!1;else if(t){if(!e.invalidQueue.length){e.state=2;break}}else e.flush(),t=!0,e.flushLayouts("completionQueue","completeLayout");e.remainingLayouts||e.invalidQueue.length||(e.flush(),e.flushLayouts("completionQueue","completeLayout"),e.flushLayouts("finalizeQueue","finalizeLayout"))}return e.runComplete()},runComplete:function(){return this.state=2,this.remainingLayouts?(this.handleFailure(),!1):(this.flush(),this.flushLayouts("finishQueue","finishedLayout",!0),this.flushLayouts("finishQueue","notifyOwner"),this.flush(),this.flushAnimations(),!0)},runCycle:function(){var e,t=this.layoutQueue.clear(),i=t.length;for(++this.cycleCount,e=this.progressCount=0;e<i;++e)this.runLayout(this.currentLayout=t[e]);return this.currentLayout=null,0<this.progressCount},runLayout:function(e){var t=this.getCmp(e.owner);e.pending=!1,t.state.blocks||(e.done=!0,++e.calcCount,++this.calcCount,e.calculate(t),e.done?(this.layoutDone(e),e.completeLayout&&this.queueCompletion(e),e.finalizeLayout&&this.queueFinalize(e)):e.pending||e.invalid||e.blockCount+e.triggerCount-e.firedTriggers||this.queueLayout(e))},setItemSize:function(e,t,i){var n,r=e,o=1;for(e.isComposite?(o=(r=e.elements).length,e=r[0]):e.dom||e.el||(o=r.length,e=r[0]),n=0;n<o;)this.get(e).setSize(t,i),e=r[++n]},debugHooks:{$enabled:!1,pageAnalyzerMode:!0,logOn:{0:0},cancelComponent:function(e){this.logOn.cancelComponent&&Ext.log("cancelCmp: ",e.id),this.callParent(arguments)},cancelLayout:function(e){this.logOn.cancelLayout&&Ext.log("cancelLayout: ",this.getLayoutName(e)),this.callParent(arguments)},callLayout:function(e,t){var i=this.accumByType[e.type],n=i&&i.enter();this.callParent(arguments),i&&n.leave()},checkRemainingLayouts:function(){var e,t,i=0;for(e in this.layouts)t=this.layouts[e],this.layouts.hasOwnProperty(e)&&t.running&&++i;this.remainingLayouts!==i&&Ext.raise({msg:"Bookkeeping error me.remainingLayouts"})},flush:function(){var e;return this.logOn.flush&&(e=this.flushQueue,Ext.log("--- Flush ",e&&e.getCount())),this.callParent(arguments)},flushInvalidates:function(){var e;return this.logOn.flushInvalidate&&Ext.log(">> flushInvalidates"),e=this.callParent(arguments),this.logOn.flushInvalidate&&Ext.log("<< flushInvalidates"),e},getCmp:function(e){var t=this.callParent(arguments);return t.wrapsComponent||Ext.raise({msg:e.id+" is not a component"}),t},getEl:function(e,t){var i=this.callParent(arguments);return i&&i.wrapsComponent&&Ext.raise({msg:e.id+"/"+t.id+" is a component (expected element)"}),i},getLayoutName:function(e){return e.owner.id+"<"+e.type+">"},layoutDone:function(e){var t=this.getLayoutName(e);this.logOn.layoutDone&&Ext.log("layoutDone: ",t," ( ",this.remainingLayouts," running)"),e.running||Ext.raise({msg:t+" is already done"}),this.remainingLayouts||Ext.raise({msg:t+" finished but no layouts are running"}),this.callParent(arguments)},layoutTreeHasFailures:function(e,r){var o=this;if(function e(t){var i,n,r=!t.done;if(t.done)for(i in o.layouts)o.layouts.hasOwnProperty(i)&&(n=o.layouts[i]).owner.ownerLayout===t&&e(n)&&(r=!0);return r}(e))return!0;return function e(t){var i,n;for(i in r[t.id]=1,o.layouts)o.layouts.hasOwnProperty(i)&&(n=o.layouts[i]).owner.ownerLayout===t&&e(n)}(e),!1},queueLayout:function(e){return(e.done||e.blockCount||e.pending)&&Ext.raise({msg:this.getLayoutName(e)+" should not be queued for layout"}),this.logOn.queueLayout&&Ext.log("Queue ",this.getLayoutName(e)),this.callParent(arguments)},reportLayoutResult:function(e,t){var i,n,r,o,a,s,l,d,u=this,c=e.owner,h=u.getCmp(c),f=[],g=[];for(i in t[e.id]=1,e.blockedBy)e.blockedBy.hasOwnProperty(i)&&f.push(e.blockedBy[i]);for(i in f.sort(),u.triggersByLayoutId[e.id])u.triggersByLayoutId[e.id].hasOwnProperty(i)&&(n=u.triggersByLayoutId[e.id][i],g.push({name:i,info:n}));if(g.sort(function(e,t){return e.name<t.name?-1:t.name<e.name?1:0}),Ext.log({indent:1},e.done?"++":"--",u.getLayoutName(e),h.isBoxParent?" [isBoxParent]":"",h.boxChildren?" - boxChildren: "+h.state.boxesMeasured+"/"+h.boxChildren.length:"",h.boxParent?" - boxParent: "+h.boxParent.id:""," - size: ",h.widthModel.name,"/",h.heightModel.name),!e.done||u.reportOnSuccess){if(f.length){for(++Ext.log.indent,Ext.log({indent:1},"blockedBy:  count=",e.blockCount),o=f.length,r=0;r<o;r++)Ext.log(f[r]);Ext.log.indent-=2}if(g.length){for(++Ext.log.indent,Ext.log({indent:1},"triggeredBy: count="+e.triggerCount),o=g.length,r=0;r<o;r++)l=(s=(d=n.info||n).item).setBy&&s.setBy[d.name]||"?",n=g[r],Ext.log(n.name," (",s.props[d.name],") dirty: ",!!s.dirty&&!!s.dirty[d.name],", setBy: ",l);Ext.log.indent-=2}}for(i in u.layouts)u.layouts.hasOwnProperty(i)&&((a=u.layouts[i]).done||a.owner.ownerLayout!==e||u.reportLayoutResult(a,t));for(i in u.layouts)u.layouts.hasOwnProperty(i)&&(a=u.layouts[i]).done&&a.owner.ownerLayout===e&&u.reportLayoutResult(a,t);--Ext.log.indent},resetLayout:function(e){var t,i=this,n=e.type,r=i.getLayoutName(e),o=i.accumByType[n];i.logOn.resetLayout&&Ext.log("resetLayout: ",r," ( ",i.remainingLayouts," running)"),i.state||(!o&&i.profileLayoutsByType&&(i.accumByType[n]=o=Ext.Perf.get("layout_"+e.type)),i.numByType[n]=(i.numByType[n]||0)+1),t=o&&o.enter(),i.callParent(arguments),o&&t.leave(),i.checkRemainingLayouts()},round:function(e){return Math.round(1e3*e)/1e3},run:function(){var e,t,i,n,r,o,a,s,l,d,u,c,h,f,g=this;if(g.accumByType={},g.calcsByType={},g.numByType={},g.timesByType={},g.triggersByLayoutId={},Ext.log.indentSize=3,Ext.log("==================== LAYOUT ===================="),t=Ext.perf.getTimestamp(),e=g.callParent(arguments),t=Ext.perf.getTimestamp()-t,g.logOn.boxParent&&g.boxParents)for(i in g.boxParents)if(g.boxParents.hasOwnProperty(i))for(s=(a=(o=g.boxParents[i]).boxChildren).length,Ext.log("boxParent: ",o.id),n=0;n<s;++n)Ext.log(" --\x3e ",a[n].id);for(i in e?Ext.log("----------------- SUCCESS -----------------"):Ext.log({level:"error"},"----------------- FAILURE -----------------"),g.layouts)g.layouts.hasOwnProperty(i)&&((r=g.layouts[i]).running&&Ext.log.error("Layout left running: ",g.getLayoutName(r)),r.ownerContext&&Ext.log.error("Layout left connected: ",g.getLayoutName(r)));if(!e||g.reportOnSuccess){for(i in l={},d=0,g.layouts)g.layouts.hasOwnProperty(i)&&(r=g.layouts[i],g.items[r.owner.el.id].isTopLevel&&(g.reportOnSuccess||g.layoutTreeHasFailures(r,l))&&g.reportLayoutResult(r,l));for(i in g.layouts)g.layouts.hasOwnProperty(i)&&(l[(r=g.layouts[i]).id]||(d||Ext.log("----- Unreported!! -----"),++d,g.reportLayoutResult(r,l)))}for(i in Ext.log("Cycles: ",g.cycleCount,", Flushes: ",g.flushCount,", Calculates: ",g.calcCount," in ",g.round(t)," msec"),Ext.log("Calculates by type:"),u=[],g.numByType)g.numByType.hasOwnProperty(i)&&(c=g.numByType[i],u.push({type:i,total:c,calcs:g.calcsByType[i],multiple:Math.round(g.calcsByType[i]/c*10)/10,calcTime:g.round(g.timesByType[i]),avgCalcTime:g.round(g.timesByType[i]/g.calcsByType[i])}));for(u.sort(function(e,t){return t.calcTime-e.calcTime}),h=u.length,n=0;n<h;n++)f=u[n],Ext.log(f.type,": ",f.total," in ",f.calcs," tries (",f.multiple,"x) at ",f.calcTime," msec (avg ",f.avgCalcTime," msec)");return e},runCycle:function(){return this.logOn.runCycle&&Ext.log(">>> Cycle ",this.cycleCount," (queue length: ",this.layoutQueue.length,")"),this.callParent(arguments)},runLayout:function(e){var t,i,n,r=e.type,o=this.accumByType[r];return this.logOn.calculate&&Ext.log("-- calculate ",this.getLayoutName(e)),t=o&&o.enter(),n=Ext.perf.getTimestamp(),i=this.callParent(arguments),n=Ext.perf.getTimestamp()-n,o&&t.leave(),this.calcsByType[r]=(this.calcsByType[r]||0)+1,this.timesByType[r]=(this.timesByType[r]||0)+n,i}}}),Ext.define("Ext.layout.component.Body",{extend:"Ext.layout.component.Auto",alias:"layout.body",type:"body",beginLayout:function(e){this.callParent(arguments),e.bodyContext=e.getEl("body")},beginLayoutCycle:function(e,t){var i=this.lastWidthModel,n=this.lastHeightModel,r=this.owner.body;this.callParent(arguments),i&&i.fixed&&e.widthModel.shrinkWrap&&r.setWidth(null),n&&n.fixed&&e.heightModel.shrinkWrap&&r.setHeight(null)},calculateOwnerHeightFromContentHeight:function(e,t){var i=this.callParent(arguments);return e.targetContext!==e&&(i+=e.getPaddingInfo().height),i},calculateOwnerWidthFromContentWidth:function(e,t){var i=this.callParent(arguments);return e.targetContext!==e&&(i+=e.getPaddingInfo().width),i},measureContentWidth:function(e){return e.bodyContext.setWidth(e.bodyContext.el.dom.offsetWidth,!1)},measureContentHeight:function(e){return e.bodyContext.setHeight(e.bodyContext.el.dom.offsetHeight,!1)},publishInnerHeight:function(e,t){var i=t-e.getFrameInfo().height;return e.targetContext!==e&&(i-=e.getPaddingInfo().height),e.bodyContext.setHeight(i,!e.heightModel.natural)},publishInnerWidth:function(e,t){var i=t-e.getFrameInfo().width;e.targetContext!==e&&(i-=e.getPaddingInfo().width),e.bodyContext.setWidth(i,!e.widthModel.natural)}}),Ext.define("Ext.layout.component.FieldSet",{extend:"Ext.layout.component.Body",alias:["layout.fieldset"],type:"fieldset",defaultCollapsedWidth:100,beforeLayoutCycle:function(e){e.target.collapsed&&(e.heightModel=this.sizeModels.shrinkWrap)},beginLayout:function(e){var t=this.owner.legend;this.callParent([e]),t&&(e.legendContext=e.context.getCmp(t))},beginLayoutCycle:function(e){var t,i=e.target;this.callParent(arguments),i.collapsed&&(e.setContentHeight(0),e.restoreMinHeight=i.minHeight,delete i.minHeight,e.widthModel.shrinkWrap&&(t=this.lastComponentSize,e.setContentWidth(t&&t.contentWidth||this.defaultCollapsedWidth)))},finishedLayout:function(e){var t=this.owner,i=e.restoreMinHeight;this.callParent(arguments),i&&(t.minHeight=i)},calculateOwnerWidthFromContentWidth:function(e,t){var i=e.legendContext;return i&&(t=Math.max(t,i.getProp("width"))),this.callParent([e,t])},calculateOwnerHeightFromContentHeight:function(e,t){var i=e.getBorderInfo(),n=e.legendContext;return e.getProp("contentHeight")+e.getPaddingInfo().height+(Ext.isIE8?e.bodyContext.getPaddingInfo().top:0)+(n?n.getProp("height"):i.top)+i.bottom},publishInnerHeight:function(e,t){var i=e.legendContext,n=0;i&&(n=i.getProp("height")),void 0===n?this.done=!1:this.callParent([e,t-n])},getLayoutItems:function(){var e=this.owner.legend;return e?[e]:[]}}),Ext.define("Ext.layout.container.Absolute",{alias:"layout.absolute",extend:"Ext.layout.container.Anchor",alternateClassName:"Ext.layout.AbsoluteLayout",targetCls:Ext.baseCSSPrefix+"abs-layout-ct",itemCls:Ext.baseCSSPrefix+"abs-layout-item",type:"absolute",adjustWidthAnchor:function(e,t){var i=this.targetPadding;return e-t.getStyle("left")+i.left},adjustHeightAnchor:function(e,t){var i=this.targetPadding;return e-t.getStyle("top")+i.top},isItemShrinkWrap:function(e){return!0},onContentChange:function(e,t){var i=!1;return e.anchor&&t&&t.show&&(i=this.callParent([e,t])),i},beginLayout:function(e){var t=this.getTarget();this.callParent([e]),t.dom!==document.body&&t.position(),this.targetPadding=e.targetContext.getPaddingInfo()},isItemBoxParent:function(e){return!0},calculateContentSize:function(e,t){var i,n,r,o,a,s,l,d=(t||0)|((e.widthModel.shrinkWrap?1:0)|(e.heightModel.shrinkWrap?2:0)),u=1&d||void 0,c=2&d||void 0,h=e.childItems,f=h.length,g=0,p=0,m=0,x=e.props;if(u&&(isNaN(x.contentWidth)?++m:u=void 0),c&&(isNaN(x.contentHeight)?++m:c=void 0),m){for(a=0;a<f;++a)if(n=(r=h[a]).target,o=c&&r.getProp("height"),l=u&&r.getProp("width"),o+=(s=r.getMarginInfo()).bottom,l+=s.right,g=Math.max(g,(n.y||0)+o),p=Math.max(p,(n.x||0)+l),isNaN(g)&&isNaN(p))return void(this.done=!1);(u||c)&&(i=e.targetContext.getPaddingInfo()),u&&!e.setContentWidth(p+i.width)&&(this.done=!1),c&&!e.setContentHeight(g+i.height)&&(this.done=!1)}}}),Ext.define("Ext.layout.container.Accordion",{extend:"Ext.layout.container.VBox",alias:"layout.accordion",type:"accordion",alternateClassName:"Ext.layout.AccordionLayout",targetCls:Ext.baseCSSPrefix+"accordion-layout-ct",itemCls:[Ext.baseCSSPrefix+"box-item",Ext.baseCSSPrefix+"accordion-item"],align:"stretch",enableSplitters:!1,fill:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:void 0,animate:!0,activeOnTop:!1,multi:!1,wrapOver:!0,panelCollapseMode:"header",defaultAnimatePolicy:{y:!0,height:!0},constructor:function(){this.callParent(arguments),this.animate?(this.animatePolicy={},this.animatePolicy[this.names.x]=!0,this.animatePolicy[this.names.width]=!0):this.animatePolicy=null},beforeRenderItems:function(e){var t,i,n=this,r=e.length,o=n.owner,a=n.collapseFirst,s=Ext.isDefined(a),l=n.getExpanded(!0)[0],d=n.multi;for(i=0;i<r;i++)(t=e[i]).rendered||(t.isAccordionPanel=!0,t.bodyAriaRole="tabpanel",t.accordionWrapOver=n.wrapOver,d&&!1===t.collapsible||(t.collapsible=!0),t.collapsible&&(s&&(t.collapseFirst=a),n.hideCollapseTool?(t.hideCollapseTool=n.hideCollapseTool,t.titleCollapse=!0):n.titleCollapse&&void 0===t.titleCollapse&&(t.titleCollapse=n.titleCollapse)),t.hideHeader=t.width=null,t.title=t.title||"&#160;",t.addBodyCls(Ext.baseCSSPrefix+"accordion-body"),d||(l?t.collapsed=l!==t:t.hasOwnProperty("collapsed")&&!1===t.collapsed?l=t:t.collapsed=!0,o.mon(t,"show",n.onComponentShow,n)),t.headerOverCls=Ext.baseCSSPrefix+"accordion-hd-over");n.processing||d||(l?n.activeOnTop&&(l.collapsed=!1,n.configureItem(l),0<o.items.indexOf(l)&&o.insert(0,l)):r&&(e[0].collapsed=!1))},getItemsRenderTree:function(e){return this.beforeRenderItems(e),this.callParent(arguments)},renderItems:function(e,t){this.beforeRenderItems(e),this.callParent(arguments)},configureItem:function(e){this.callParent(arguments),e.ignoreHeaderBorderManagement=!0,e.animCollapse=!1,this.fill&&(e.flex=1)},beginLayout:function(e){this.callParent(arguments),this.innerCt.dom.setAttribute("role","tablist"),this.innerCt.dom.setAttribute("aria-multiselectable",!0),this.updatePanelClasses(e)},updatePanelClasses:function(e){var t,i,n,r=e.visibleItems,o=r.length,a=!0;for(t=0;t<o;t++)(n=(i=r[t]).header).addCls(Ext.baseCSSPrefix+"accordion-hd"),a?n.removeCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded"):n.addCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded"),t+1===o&&i.collapsed?n.addCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed"):n.removeCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed"),a=i.collapsed},onBeforeComponentExpand:function(e){var t,i,n,r=this.owner,o=this.multi,a=!o&&!this.animate&&this.activeOnTop;this.processing||(this.processing=!0,i=r.deferLayouts,r.deferLayouts=!0,o||(t=this.getExpanded()[0])&&t!==e&&((n=t.$layoutAnim)&&n.jumpToEnd(),t.collapse()),a&&(Ext.suspendLayouts(),r.insert(0,e),Ext.resumeLayouts()),r.deferLayouts=i,this.processing=!1)},onBeforeComponentCollapse:function(e){var t,i,n=this.owner;if(1===this.owner.items.getCount())return!1;this.processing||(this.processing=!0,i=n.deferLayouts,n.deferLayouts=!0,t=e.next()||e.prev(),this.multi?1===this.getExpanded().length&&t.expand():t&&t.expand(),n.deferLayouts=i,this.processing=!1)},onComponentShow:function(e){this.onBeforeComponentExpand(e)},onAdd:function(e){this.callParent(arguments),"placeholder"===e.collapseMode&&(e.collapseMode=this.panelCollapseMode),e.collapseDirection=e.headerPosition,this.layoutCount&&!this.multi&&1<this.owner.items.getCount()&&(this.processing=!0,e.collapse(),this.processing=!1)},onRemove:function(e,t){var i;this.callParent(arguments),this.owner.destroying||this.multi||e.collapsed||(i=this.owner.items.first())&&i.expand()},getExpanded:function(e){for(var t,i=this.owner.items.items,n=i.length,r=0,o=[];r<n;++r)(t=i[r]).hidden||(e?t.hasOwnProperty("collapsed")&&!1===t.collapsed:!t.collapsed)&&o.push(t);return o},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn}),Ext.define("Ext.resizer.BorderSplitter",{extend:"Ext.resizer.Splitter",alias:"widget.bordersplitter",uses:["Ext.resizer.BorderSplitterTracker"],collapseTarget:null,getTrackerConfig:function(){var e=this.callParent();return e.xclass="Ext.resizer.BorderSplitterTracker",e},onTargetCollapse:function(e){this.callParent([e]),!1!==this.performCollapse&&"mini"===e.collapseMode&&e.addCls(e.baseCls+"-"+e.collapsedCls+"-mini")},onTargetExpand:function(e){this.callParent([e]),!1!==this.performCollapse&&"mini"===e.collapseMode&&e.removeCls(e.baseCls+"-"+e.collapsedCls+"-mini")}}),Ext.define("Ext.layout.container.Border",{extend:"Ext.layout.container.Container",alias:"layout.border",alternateClassName:"Ext.layout.BorderLayout",requires:["Ext.resizer.BorderSplitter","Ext.fx.Anim","Ext.layout.container.border.Region"],targetCls:Ext.baseCSSPrefix+"border-layout-ct",itemCls:[Ext.baseCSSPrefix+"border-item",Ext.baseCSSPrefix+"box-item"],type:"border",isBorderLayout:!0,padding:void 0,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:!0,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:!1,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:!0,panelCollapseAnimate:!0,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g=this.axisProps[i],p=!g.horizontal,m=g.sizeProp,x=0,y=e.childItems,v=y.length;for(r=0;r<v;++r)if(s=(o=y[r]).target,o.layoutPos={},s.region){if(o.region=l=s.region,o.isCenter=s.isCenter,o.isHorz=s.isHorz,o.isVert=s.isVert,o.weight=s.weight||this.regionWeights[l]||0,s.weight=o.weight,t[s.id]=o,s.isCenter){n=o,a=s.flex,e.centerRegion=n;continue}if(p!==o.isVert)continue;o.reverseWeighting=l===g.borderEnd,c=typeof(u=s[m]),s.collapsed||("string"==c&&(d=this.percentageRe.exec(u))?o.percentage=parseInt(d[1],10):s.flex&&(x+=o.flex=s.flex))}return n&&((f=(h=n.target).placeholderFor)?a||p!==f.collapsedVertical()||(a=0,n.collapseAxis=i):h.collapsed&&p===h.collapsedVertical()&&(a=0,n.collapseAxis=i)),null==a&&(a=1),x+=a,Ext.apply({before:p?"top":"left",totalFlex:x},g)},beginLayout:function(e){var t,i,n,r,o,a,s,l,d,u=this,c=u.getLayoutItems(),h=u.padding,f=typeof h,g=!1;for(e.heightModel.shrinkWrap&&Ext.raise("Border layout does not currently support shrinkWrap height. Please specify a height on component: "+u.owner.id+", or use a container layout that sets the component's height."),e.widthModel.shrinkWrap&&Ext.raise("Border layout does not currently support shrinkWrap width. Please specify a width on component: "+u.owner.id+", or use a container layout that sets the component's width."),h?"string"!=f&&"number"!=f||(h=Ext.util.Format.parseBox(h)):(h=e.getEl("getTargetEl").getPaddingInfo(),g=!0),e.outerPad=h,e.padOnContainer=g,r=0,n=c.length;r<n;++r)i=c[r],(a=u.getSplitterTarget(i))&&(s=void 0,l=!!i.hidden,a.split?l!==a.hidden&&(s=!a.hidden):a.isCollapsingOrExpanding&&(s=!!a.collapsed),s?i.show():!1===s&&i.hide());for(u.callParent(arguments),n=(c=e.childItems).length,o={},e.borderAxisHorz=u.beginAxis(e,o,"horz"),e.borderAxisVert=u.beginAxis(e,o,"vert"),r=0;r<n;++r)t=c[r],(a=u.getSplitterTarget(t.target))&&((d=o[a.id])||((d=e.getEl(a.el,u)).region=a.region),t.collapseTarget=a=d,t.weight=a.weight,t.reverseWeighting=a.reverseWeighting,(a.splitter=t).isHorz=a.isHorz,t.isVert=a.isVert);u.sortWeightedItems(c,"reverseWeighting"),u.setupSplitterNeighbors(c)},calculate:function(e){var t,i,n,r,o,a,s=this,l=s.getContainerSize(e),d=e.childItems,u=d.length,c=e.borderAxisHorz,h=e.borderAxisVert,f=e.outerPad,g=e.padOnContainer;for(c.begin=f[s.padOnContainerProp],h.begin=f.top,o=c.end=c.flexSpace=l.width+(g?f[s.padOnContainerProp]:-f[s.padNotOnContainerProp]),a=h.end=h.flexSpace=l.height+(g?f.top:-f.bottom),t=0;t<u;++t)n=(i=d[t]).getMarginInfo(),(i.isHorz||i.isCenter)&&(c.addUnflexed(n.width),o-=n.width),(i.isVert||i.isCenter)&&(h.addUnflexed(n.height),a-=n.height),i.flex||i.percentage||(i.isHorz||i.isCenter&&"horz"===i.collapseAxis?(r=i.getProp("width"),c.addUnflexed(r),i.collapseTarget&&(o-=r)):(i.isVert||i.isCenter&&"vert"===i.collapseAxis)&&(r=i.getProp("height"),h.addUnflexed(r),i.collapseTarget&&(a-=r)));for(t=0;t<u;++t)n=(i=d[t]).getMarginInfo(),i.percentage&&(i.isHorz?(r=Math.ceil(o*i.percentage/100),r=i.setWidth(r),c.addUnflexed(r)):i.isVert&&(r=Math.ceil(a*i.percentage/100),r=i.setHeight(r),h.addUnflexed(r)));for(t=0;t<u;++t)(i=d[t]).isCenter||(s.calculateChildAxis(i,c),s.calculateChildAxis(i,h));s.finishAxis(e,h)+s.finishAxis(e,c)<2?s.done=!1:s.finishPositions(d)},calculateChildAxis:function(e,t){var i,n,r,o,a,s=e.collapseTarget,l="set"+t.sizePropCap,d=t.sizeProp,u=e.getMarginInfo()[d];s?i=s.region:(i=e.region,r=e.flex),(n=i===t.borderBegin)||i===t.borderEnd?(a=r?(a=Math.ceil(t.flexSpace*(r/t.totalFlex)),e[l](a)):e.percentage?e.peek(d):e.getProp(d),a+=u,n?(o=t.begin,t.begin+=a):t.end=o=t.end-a):(e[l](t.end-t.begin-u),o=t.begin),e.layoutPos[t.posProp]=o},eachItem:function(e,t,i){var n,r=this.getLayoutItems(),o=0;for(Ext.isFunction(e)&&(i=t=e);o<r.length&&(n=r[o],e&&n.region!==e||!1!==t.call(i,n));o++);},finishAxis:function(e,t){var i=t.end-t.begin,n=e.centerRegion;return n&&(n["set"+t.sizePropCap](i-n.getMarginInfo()[t.sizeProp]),n.layoutPos[t.posProp]=t.begin),Ext.isNumber(i)?1:0},finishPositions:function(e){var t,i,n=e.length,r=this.horzPositionProp;for(t=0;t<n;++t)(i=e[t]).setProp("x",i.layoutPos.x+i.marginInfo[r]),i.setProp("y",i.layoutPos.y+i.marginInfo.top)},getLayoutItems:function(){for(var e,t,i=this.owner,n=i&&i.items&&i.items.items||[],r=n.length,o=[],a=0;a<r;a++)t=(e=n[a]).placeholderFor,!e.hidden&&(e.floated&&2!==e.isCollapsingOrExpanding||t&&2===t.isCollapsingOrExpanding)||o.push(e);return o},getPlaceholder:function(e){return e.getPlaceholder&&e.getPlaceholder()},getMaxWeight:function(e){return this.getMinMaxWeight(e)},getMinWeight:function(e){return this.getMinMaxWeight(e,!0)},getMinMaxWeight:function(e,t){var i=null;return this.eachItem(e,function(e){if(e.hasOwnProperty("weight")){if(null===i)return void(i=e.weight);(t&&e.weight<i||e.weight>i)&&(i=e.weight)}},this),i},getSplitterTarget:function(e){var t=e.collapseTarget;return t&&t.collapsed&&t.placeholder||t},isItemBoxParent:function(e){return!0},isItemShrinkWrap:function(e){return!0},insertSplitter:function(e,t,i,n){var r=e.region,o=Ext.apply({xtype:"bordersplitter",collapseTarget:e,id:e.id+"-splitter",hidden:i,canResize:!1!==e.splitterResize,splitterFor:e,synthetic:!0},n),a=t+("south"===r||"east"===r?0:1);"mini"===e.collapseMode&&(o.collapsedCls=e.collapsedCls),e.splitter=this.owner.add(a,o)},getMoveAfterIndex:function(e){var t=this.callParent(arguments);return e.splitter&&t++,t},moveItemBefore:function(e,t){var i;return t&&t.splitter&&("south"!==(i=t.region)&&"east"!==i||(t=t.splitter)),this.callParent([e,t])},onAdd:function(e,t){var i,n,r,o,a=this,s=e.placeholderFor,l=e.region;a.callParent(arguments),l?(Ext.apply(e,a.regionFlags[l]),a.owner.isViewport&&(e.isViewportBorderChild=!0),e.initBorderRegion&&e.initBorderRegion(),(i="center"===l)?(a.centerRegion&&Ext.raise("Cannot have multiple center regions in a BorderLayout."),a.centerRegion=e):(n=e.split,r=!!e.hidden,"object"==typeof n&&(o=n,n=!0),!e.isHorz&&!e.isVert||!n&&"mini"!==e.collapseMode||("mini"===e.collapseMode&&e.collapsed?r=!1:n||(r=!0),a.insertSplitter(e,t,r,o))),i||e.hasOwnProperty("collapseMode")||(e.collapseMode=a.panelCollapseMode),e.hasOwnProperty("animCollapse")||("placeholder"!==e.collapseMode?e.animCollapse=!1:e.animCollapse=a.panelCollapseAnimate),r&&e.placeholder&&e.placeholder.isVisible()&&a.owner.insert(t,e.placeholder)):s&&(Ext.apply(e,a.regionFlags[s.region]),e.region=s.region,e.weight=s.weight)},onDestroy:function(){this.centerRegion=null,this.callParent()},onRemove:function(e,t){var i,n=e.region,r=e.splitter,o=this.owner,a=o.destroying;n&&(e.isCenter&&(this.centerRegion=null),delete e.isCenter,delete e.isHorz,delete e.isVert,r&&!o.destroying&&o.doRemove(r,!0),delete e.splitter),this.callParent(arguments),a||t||!e.rendered||(i=e.getEl())&&(i.setStyle("top",""),i.setStyle(this.horzPositionProp,""))},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:!0,isHorz:!1,isVert:!1},north:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:"top"},south:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:"bottom"},west:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:"left"},east:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:"right"}},setupSplitterNeighbors:function(e){var t,i,n,r,o,a,s,l,d,u={},c=e.length,h=this.touchedRegions;for(t=0;t<c;++t)if(s=(a=e[t].target).region,a.isCenter)n=a;else if(s){for(i=0,r=(d=h[s]).length;i<r;++i)(o=u[d[i]])&&o.neighbors.push(a);(l=a.placeholderFor?a.placeholderFor.splitter:a.splitter)&&(l.neighbors=[]),u[s]=l}if(n)for(i=0,r=(d=h.center).length;i<r;++i)(o=u[d[i]])&&o.neighbors.push(n)},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(e){var t,i,n,r,o=this.sizePolicies;return e.isCenter?(r=e.placeholderFor)?r.collapsedVertical()?o.vert:o.horz:e.collapsed?e.collapsedVertical()?o.vert:o.horz:o.flexAll:(t=e.collapseTarget)?t.isVert?o.vert:o.horz:e.region?(n=e.isVert?(i=e.height,o.vert):(i=e.width,o.horz),e.flex||"string"==typeof i&&this.percentageRe.test(i)?o.flexAll:n):this.autoSizePolicy}},function(){var e={addUnflexed:function(e){this.flexSpace=Math.max(this.flexSpace-e,0)}},t=this.prototype.axisProps;Ext.apply(t.horz,e),Ext.apply(t.vert,e)}),Ext.define("Ext.layout.container.Card",{extend:"Ext.layout.container.Fit",alternateClassName:"Ext.layout.CardLayout",alias:"layout.card",type:"card",hideInactive:!0,deferredRender:!1,getRenderTree:function(){var e=this.getActiveItem();if(e){if(e.hasListeners.beforeactivate&&!1===e.fireEvent("beforeactivate",e)?e=this.activeItem=this.owner.activeItem=null:e.hasListeners.activate&&e.on({boxready:function(){e.fireEvent("activate",e)},single:!0}),!this.deferredRender)return this.callParent(arguments);if(e)return this.getItemsRenderTree([e])}},renderChildren:function(){var e=this.getActiveItem();this.deferredRender?e&&this.renderItems([e],this.getRenderTarget()):this.callParent()},isValidParent:function(e,t,i){var n=e.el?e.el.dom:Ext.getDom(e);return n&&n.parentNode===(t.dom||t)||!1},getActiveItem:function(){var e=void 0===this.activeItem?this.owner&&this.owner.activeItem:this.activeItem,t=this.parseActiveItem(e);return t&&-1!==this.owner.items.indexOf(t)&&(this.activeItem=t),null==t?null:this.activeItem||this.owner.activeItem},parseActiveItem:function(e){return e&&e.isComponent?e:"number"==typeof e||void 0===e?this.getLayoutItems()[e||0]:null===e?null:this.owner.getComponent(e)},configureItem:function(e){e.setHiddenState(e!==this.getActiveItem()),this.callParent(arguments)},onAdd:function(e,t){this.callParent([e,t]),this.setItemHideMode(e)},onRemove:function(e){this.callParent([e]),this.resetItemHideMode(e),e===this.activeItem&&(this.activeItem=void 0)},getAnimation:function(e,t){var i=(e||{}).cardSwitchAnimation;return!1!==i&&(i||t.cardSwitchAnimation)},getNext:function(){var e=arguments[0],t=this.getLayoutItems();return t[Ext.Array.indexOf(t,this.activeItem)+1]||!!e&&t[0]},next:function(){var e=arguments[0],t=arguments[1];return this.setActiveItem(this.getNext(t),e)},getPrev:function(){var e=arguments[0],t=this.getLayoutItems();return t[Ext.Array.indexOf(t,this.activeItem)-1]||!!e&&t[t.length-1]},prev:function(){var e=arguments[0],t=arguments[1];return this.setActiveItem(this.getPrev(t),e)},setActiveItem:function(e){var t,i=this,n=i.owner,r=i.activeItem,o=n.rendered;if(e=i.parseActiveItem(e),-1===n.items.indexOf(e)&&(n.items.items.length,Ext.suspendLayouts(),e=n.add(e),Ext.resumeLayouts()),e&&r!==e){if(!1===e.fireEvent("beforeactivate",e,r))return!1;if(r&&!1===r.fireEvent("beforedeactivate",r,e))return!1;if(o){if(Ext.suspendLayouts(),e.rendered||i.renderItem(e,i.getRenderTarget(),n.items.length),r&&i.hideInactive){if(t=r.el.contains(Ext.Element.getActiveElement()),r.hide(),!r.hidden)return!1;r.hiddenByLayout=!0,r.fireEvent("deactivate",r,e)}e.hidden&&e.show(),e.hidden?i.activeItem=e=null:(i.activeItem=e,t&&(e.defaultFocus||(e.defaultFocus=":focusable"),e.focus())),Ext.resumeLayouts(!0)}else i.activeItem=e;return e.fireEvent("activate",e,r),i.activeItem}return!1},resetItemHideMode:function(e){e.hideMode=e.originalHideMode,delete e.originalHideMode},setItemHideMode:function(e){e.originalHideMode=e.hideMode,e.hideMode="offsets"}}),Ext.define("Ext.layout.container.Center",{extend:"Ext.layout.container.Fit",alternateClassName:"Ext.ux.layout.Center",alias:["layout.center","layout.ux.center"],type:"center",percentRe:/^\d+(?:\.\d+)?%$/,itemCls:Ext.baseCSSPrefix+"center-layout-item",childEls:["targetEl"],renderTpl:['<div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div>'],targetElCls:Ext.baseCSSPrefix+"center-target",beginLayout:function(e){var t,i,n,r,o=this.percentRe;for(this.callParent([e]),n=0,i=(t=e.childItems).length;n<i;++n)r=t[n].target,o.test(r.width)&&r.getEl().setStyle("width",""),o.test(r.height)&&r.getEl().setStyle("height","");e.targetElContext=e.getEl("targetEl",this)},beginLayoutCycle:function(e,t){var i=this.targetEl;this.callParent([e,t]),i.setStyle("width",""),i.setStyle("height","")},getRenderData:function(){var e=this.callParent();return e.targetElCls=this.targetElCls,e},getRenderTarget:function(){return this.targetEl},getItemSizePolicy:function(e,t){var i=t||this.owner.getSizeModel(),n=this.percentRe,r=(i.width.shrinkWrap||!n.test(e.width)?0:1)|(i.height.shrinkWrap||!n.test(e.height)?0:2);return this.sizePolicies[r]},isItemShrinkWrap:function(e){return!0},calculate:function(e){var t,i=e.targetElContext;this.callParent([e]),t=e.state.info,e.widthModel.shrinkWrap&&i.setWidth(t.contentWidth),e.heightModel.shrinkWrap&&i.setHeight(t.contentHeight)},getPos:function(e,t,i){var n=i+"Model",r=e.props[i],o=0;return e[n].calculated||(r+=t.margins[i]),t.ownerContext[n].shrinkWrap||(o=Math.round((t.targetSize[i]-r)/2),isNaN(o)&&(this.done=!1)),Math.max(o,0)},positionItemX:function(e,t){var i=this.getPos(e,t,"width");e.setProp("x",i)},positionItemY:function(e,t){var i=this.getPos(e,t,"height");e.setProp("y",i)},setItemHeight:function(e,t){var i=parseFloat(e.target.height)/100;e.setHeight(Math.round((t.targetSize.height-t.margins.height)*i))},setItemWidth:function(e,t){var i=parseFloat(e.target.width)/100;e.setWidth(Math.round((t.targetSize.width-t.margins.width)*i))}}),Ext.define("Ext.layout.container.Form",{extend:"Ext.layout.container.Auto",alternateClassName:"Ext.layout.FormLayout",alias:"layout.form",type:"form",formWrapCls:Ext.baseCSSPrefix+"form-layout-wrap",formWrapAutoLabelCls:Ext.baseCSSPrefix+"form-layout-auto-label",formWrapSizedLabelCls:Ext.baseCSSPrefix+"form-layout-sized-label",formColGroupCls:Ext.baseCSSPrefix+"form-layout-colgroup",formColumnCls:Ext.baseCSSPrefix+"form-layout-column",formLabelColumnCls:Ext.baseCSSPrefix+"form-layout-label-column",childEls:["formWrap","labelColumn"],beforeBodyTpl:'<div id="{ownerId}-formWrap" data-ref="formWrap" class="{formWrapCls}"<tpl if="itemSpacing"> style="border-spacing:{itemSpacing}px"</tpl>><div class="{formColGroupCls}"><div id="{ownerId}-labelColumn" data-ref="labelColumn" class="{formColumnCls} {formLabelColumnCls}"<tpl if="labelWidth"> style="width:{labelWidth}"</tpl>></div><div class="{formColumnCls}"></div></div>',afterBodyTpl:"</div>",getRenderData:function(){var e=this.labelWidth,t=this.formWrapCls,i=this.callParent();return e?("number"==typeof e&&(e+="px"),i.labelWidth=e,t+=" "+this.formWrapSizedLabelCls):t+=" "+this.formWrapAutoLabelCls,i.formWrapCls=t,i.formColGroupCls=this.formColGroupCls,i.formColumnCls=this.formColumnCls,i.formLabelColumnCls=this.formLabelColumnCls,i},getRenderTarget:function(){return this.formWrap}}),Ext.define("Ext.menu.Bar",{extend:"Ext.menu.Menu",xtype:"menubar",isMenuBar:!0,defaultMenuAlign:"tl-bl?",floating:!1,constrain:!1,showSeparator:!1,allowOtherMenus:!0,ariaRole:"menubar",ui:"default-menubar",layout:{type:"hbox",align:"stretchmax",pack:"start",overflowHandler:"menu"},lookupComponent:function(e){return(e=this.callParent([e])).isMenuItem&&(e.menuAlign=this.defaultMenuAlign),e},privates:{onFocusableContainerLeftKey:function(e){e.preventDefault(),this.mixins.focusablecontainer.onFocusableContainerLeftKey.call(this,e)},onFocusableContainerRightKey:function(e){e.preventDefault(),this.mixins.focusablecontainer.onFocusableContainerRightKey.call(this,e)},onFocusableContainerUpKey:function(e){var t=this.lastFocusedChild;e.preventDefault(),t&&t.expandMenu&&t.expandMenu(e,0)},onFocusableContainerDownKey:function(e){var t=this.lastFocusedChild;e.preventDefault(),t&&t.expandMenu&&t.expandMenu(e,0)}}}),Ext.define("Ext.menu.ColorPicker",{extend:"Ext.menu.Menu",alias:"widget.colormenu",requires:["Ext.picker.Color"],hideOnClick:!0,pickerId:null,initComponent:function(){var e,t=this,i=Ext.apply({},t.initialConfig);delete i.listeners,delete(e=Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-color-item",margin:0,id:t.pickerId,xtype:"colorpicker"},i)).ownerCmp,Ext.apply(t,{plain:!0,showSeparator:!1,bodyPadding:0,items:[e]}),t.callParent(),t.picker=t.down("colorpicker"),t.relayEvents(t.picker,["select"]),t.hideOnClick&&t.on("select",t.hidePickerOnSelect,t)},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}}),Ext.define("Ext.menu.DatePicker",{extend:"Ext.menu.Menu",alias:"widget.datemenu",requires:["Ext.picker.Date"],ariaRole:"dialog",ariaLabel:"Date picker",hideOnClick:!0,pickerId:null,focusableContainer:!1,initComponent:function(){var e,t,i=this;t=i.pickerCfg?Ext.apply({cls:Ext.baseCSSPrefix+"menu-date-item",margin:0,border:!1,xtype:"datepicker"},i.pickerCfg):(delete(e=Ext.apply({},i.initialConfig)).listeners,Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-date-item",margin:0,border:!1,xtype:"datepicker"},e)),null!=i.pickerId&&null==t.id&&(t.id=i.pickerId),delete t.ownerCmp,Ext.apply(i,{showSeparator:!1,plain:!0,bodyPadding:0,items:[t]}),i.callParent(),i.picker=i.down("datepicker"),i.relayEvents(i.picker,["select"]),i.hideOnClick&&i.on("select",i.hidePickerOnSelect,i)},onEscapeKey:function(e){this.floating&&this.ownerCmp&&this.ownerCmp.focus&&(this.ownerCmp.focus(),this.hide())},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}}),Ext.define("Ext.panel.Pinnable",{extend:"Ext.Mixin",mixinId:"pinnable",pinnable:!0,pinnedTip:"Unpin this item",unpinnedTip:"Pin this item",initPinnable:function(){var e=this.isPinned();this.addTool(this.pinTool=Ext.widget({xtype:"tool",type:e?"unpin":"pin",callback:"togglePin",scope:this,tooltip:e?this.pinnedTip:this.unpinnedTip}))},isPinned:function(){return!this.floating},setPinned:function(e){var t;e!==this.isPinned()&&!(t=[this,e])!==this.fireEventArgs("beforepinchange",t)&&(this.updatePinned(e),this.fireEventArgs("pinchange",t))},togglePin:function(){this.setPinned(!this.isPinned())},updatePinned:function(e){var t=this.pinTool;t.setTooltip(e?this.pinnedTip:this.unpinnedTip),t.setType(e?"unpin":"pin")}}),Ext.define("Ext.plugin.LazyItems",{extend:"Ext.plugin.Abstract",alias:"plugin.lazyitems",init:function(e){this.callParent(arguments),this.items&&this.eagerInstantiation&&(this.items=e.prepareItems(this.items)),e.beforeRender=Ext.Function.createInterceptor(e.beforeRender,this.beforeComponentRender,this)},beforeComponentRender:function(){this.cmp.add(this.items),this.cmp.beforeComponentRender=null}}),Ext.define("Ext.plugin.Responsive",{extend:"Ext.plugin.Abstract",alias:"plugin.responsive",requires:["Ext.Responsive"],constructor:function(){this.callParent(arguments),Ext.log.warn('responsive plugin is deprecated; require "Ext.Responsive" instead')},id:"responsive"}),Ext.define("Ext.resizer.BorderSplitterTracker",{extend:"Ext.resizer.SplitterTracker",requires:["Ext.util.Region"],getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var e,t,i,n,r,o,a,s,l=this.splitter,d=l.collapseTarget,u=l.defaultSplitMin,c=l.vertical?"Width":"Height",h="min"+c,f="max"+c,g="get"+c,p=l.neighbors,m=p.length,x=d.el.getBox(),y=x.x,v=x.y,E=x.right,b=x.bottom,C=l.vertical?E-y:b-v;for(n=(d[h]||Math.min(C,u))-C,(r=d[f])?r-=C:r=1e9,s=C,e=0;e<m;++e)C=(t=p[e])[g](),null===(i=t[f])&&(i=void 0),o=C-i,a=C-(t[h]||Math.min(C,u)),isNaN(o)||n<o&&(n=o),a<r&&(r=a);return r-n<2?null:(x=new Ext.util.Region(v,E,b,y),this.constraintAdjusters[this.getCollapseDirection()](x,n,r,l),this.dragInfo={minRange:n,maxRange:r,targetSize:s},x)},constraintAdjusters:{left:function(e,t,i,n){e[0]=e.x=e.left=e.right+t,e.right+=i+n.getWidth()},top:function(e,t,i,n){e[1]=e.y=e.top=e.bottom+t,e.bottom+=i+n.getHeight()},bottom:function(e,t,i,n){e.bottom=e.top-t,e.top-=i+n.getHeight()},right:function(e,t,i,n){e.right=e.left-t,e[0]=e.x=e.left=e.x-i+n.getWidth()}},onBeforeStart:function(e){var t,i,n=this.splitter,r=n.collapseTarget,o=n.neighbors,a=o.length;if(r.collapsed)return!1;for(t=0;t<a;++t)if((i=o[t]).collapsed&&i.isHorz===r.isHorz)return!1;return!!(this.constrainTo=this.calculateConstrainRegion())},performResize:function(e,t){var i,n=this.splitter,r=n.getCollapseDirection(),o=n.collapseTarget,a=this.splitAdjusters[n.vertical?"horz":"vert"],s=t[a.index],l=this.dragInfo;"right"!==r&&"bottom"!==r||(s=-s),(s=Math.min(Math.max(l.minRange,s),l.maxRange))&&((i=n.ownerCt).suspendLayouts(),a.adjustTarget(o,l.targetSize,s),i.resumeLayouts(!0))},splitAdjusters:{horz:{index:0,adjustTarget:function(e,t,i){e.flex=null,e.setSize(t+i)}},vert:{index:1,adjustTarget:function(e,t,i){e.flex=null,e.setSize(void 0,t+i)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}}),Ext.define("Ext.resizer.Handle",{extend:"Ext.Component",handleCls:"",baseHandleCls:Ext.baseCSSPrefix+"resizable-handle",region:"",ariaRole:"presentation",beforeRender:function(){this.callParent(),this.protoEl.unselectable(),this.addCls(this.baseHandleCls,this.baseHandleCls+"-"+this.region,this.handleCls)}}),Ext.define("Ext.resizer.ResizeTracker",{extend:"Ext.dd.DragTracker",dynamic:!0,preserveRatio:!1,preventDefault:!1,constrainTo:null,proxyCls:Ext.baseCSSPrefix+"resizable-proxy",constructor:function(e){var t,i,n,r=this;e.el||(e.target.isComponent?r.el=e.target.getEl():r.el=e.target),this.callParent(arguments),r.preserveRatio&&r.minWidth&&r.minHeight&&((t=r.minWidth/r.el.getWidth())<(i=r.minHeight/r.el.getHeight())?r.minWidth=r.el.getWidth()*i:r.minHeight=r.el.getHeight()*t),r.throttle&&(n=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(r,arguments)},r.throttle),r.resize=function(e,t,i){i?Ext.resizer.ResizeTracker.prototype.resize.apply(r,arguments):n.apply(null,arguments)})},onBeforeStart:function(e){this.startBox=this.target.getBox()},getProxy:function(){var e=this;if(e.dynamic||e.proxy||(e.proxy=e.createProxy(e.target||e.el),e.hideProxy=!0),e.proxy)return e.proxy.show(),e.proxy},createProxy:function(e){var t,i=this.proxyCls;return(t=e.isComponent?e.getProxy().addCls(i):e.createProxy({tag:"div",role:"presentation",cls:i,id:e.id+"-rzproxy"},Ext.getBody())).removeCls(Ext.baseCSSPrefix+"proxy-el"),t},onStart:function(e){this.activeResizeHandle=Ext.get(this.getDragTarget().id),this.dynamic||this.resize(this.startBox)},onMouseDown:function(e,t){this.callParent([e,t]),Ext.dom.Element.maskIframes()},onMouseUp:function(e){this.callParent([e]),Ext.dom.Element.unmaskIframes()},onDrag:function(e){(this.dynamic||this.proxy)&&this.updateDimensions(e)},updateDimensions:function(e,t){var i,n,r,o,a,s,l,d,u=this,c=u.activeResizeHandle.region,h=u.getOffset(u.constrainTo?"dragTarget":null),f=u.startBox,g=0,p=0,m=0,x=0;switch(c=u.convertRegionName(c)){case"south":p=h[1],a=2;break;case"north":x=-(p=-h[1]),a=2;break;case"east":g=h[0],a=1;break;case"west":m=-(g=-h[0]),a=1;break;case"northeast":x=-(p=-h[1]),g=h[0],o=[f.x,f.y+f.height],a=3;break;case"southeast":p=h[1],g=h[0],o=[f.x,f.y],a=3;break;case"southwest":m=-(g=-h[0]),p=h[1],o=[f.x+f.width,f.y],a=3;break;case"northwest":x=-(p=-h[1]),m=-(g=-h[0]),o=[f.x+f.width,f.y+f.height],a=3}if(s={width:f.width+g,height:f.height+p,x:f.x+m,y:f.y+x},n=Ext.Number.snap(s.width,u.widthIncrement),r=Ext.Number.snap(s.height,u.heightIncrement),n!==s.width||r!==s.height){switch(c){case"northeast":case"north":s.y-=r-s.height;break;case"southwest":case"west":s.x-=n-s.width;break;case"northwest":s.x-=n-s.width,s.y-=r-s.height}s.width=n,s.height=r}s.width<u.minWidth||s.width>u.maxWidth?(s.width=Ext.Number.constrain(s.width,u.minWidth,u.maxWidth),m&&(s.x=f.x+(f.width-s.width))):u.lastX=s.x,s.height<u.minHeight||s.height>u.maxHeight?(s.height=Ext.Number.constrain(s.height,u.minHeight,u.maxHeight),x&&(s.y=f.y+(f.height-s.height))):u.lastY=s.y,(u.preserveRatio||e.shiftKey)&&(i=u.startBox.width/u.startBox.height,l=Math.min(Math.max(u.minHeight,s.width/i),u.maxHeight),d=Math.min(Math.max(u.minWidth,s.height*i),u.maxWidth),1===a?s.height=l:2===a?s.width=d:(i<Math.abs(o[0]-this.lastXY[0])/Math.abs(o[1]-this.lastXY[1])?s.height=l:s.width=d,"northeast"===c?s.y=f.y-(s.height-f.height):"northwest"===c?(s.y=f.y-(s.height-f.height),s.x=f.x-(s.width-f.width)):"southwest"===c&&(s.x=f.x-(s.width-f.width)))),u.setPosition=s.x!==u.startBox.x||s.y!==u.startBox.y,u.resize(s,t)},resize:function(e,t){var i,n=this.setPosition;(this.dynamic||!this.dynamic&&t)&&(n?this.target.setBox(e):this.target.setSize(e.width,e.height)),t||(i=this.getProxy())&&i!==this.target&&(n||this.hideProxy?i.setBox(e):i.setSize(e.width,e.height))},onEnd:function(e){this.updateDimensions(e,!0),this.proxy&&this.hideProxy&&this.proxy.hide()},convertRegionName:function(e){return e}}),Ext.define("Ext.resizer.Resizer",{alternateClassName:"Ext.Resizable",mixins:{observable:"Ext.util.Observable"},uses:["Ext.resizer.ResizeTracker","Ext.Component"],handleCls:Ext.baseCSSPrefix+"resizable-handle",overCls:Ext.baseCSSPrefix+"resizable-handle-over",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",wrappedCls:Ext.baseCSSPrefix+"resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:!0,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:1e4,maxWidth:1e4,pinned:!1,preserveRatio:!1,transparent:!1,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},touchActionMap:{n:{panY:!1},s:{panY:!1},e:{panX:!1},w:{panX:!1},se:{panX:!1,panY:!1},sw:{panX:!1,panY:!1},nw:{panX:!1,panY:!1},ne:{panX:!1,panY:!1}},ariaRole:"presentation",constructor:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g,p=this,m=Ext.dom.Element.unselectableCls,x=[];for((Ext.isString(e)||Ext.isElement(e)||e.dom)&&(t=e,(e=arguments[1]||{}).target=t),p.mixins.observable.constructor.call(p,e),(t=p.target)?t.isComponent?(t.addClsWithUI("resizable"),t.minWidth&&(p.minWidth=t.minWidth),t.minHeight&&(p.minHeight=t.minHeight),t.maxWidth&&(p.maxWidth=t.maxWidth),t.maxHeight&&(p.maxHeight=t.maxHeight),t.floating&&(p.hasOwnProperty("handles")||(p.handles="n ne e se s sw w nw")),p.el=t.getEl()):t=p.el=p.target=Ext.get(t):t=p.target=p.el=Ext.get(p.el),p.el.addCls(Ext.Component.prototype.borderBoxCls),Ext.isNumber(p.width)&&(p.width=Ext.Number.constrain(p.width,p.minWidth,p.maxWidth)),Ext.isNumber(p.height)&&(p.height=Ext.Number.constrain(p.height,p.minHeight,p.maxHeight)),null===p.width&&null===p.height||p.target.setSize(p.width,p.height),"TEXTAREA"!==(r=p.el.dom.tagName.toUpperCase())&&"IMG"!==r&&"TABLE"!==r&&!p.el.isStyle("display","table")||(p.originalTarget=p.target,h=t.isComponent?t.getEl():t,p.el.addCls(p.wrappedCls),p.target=p.el=p.el.wrap({role:"presentation",cls:p.wrapCls,id:p.el.id+"-rzwrap",style:h.getStyle(["margin-top","margin-bottom"])}),f=h.getPositioning(),p.el.setPositioning(f),h.clearPositioning(),l=h.getBox(),"absolute"!==f.position&&(l.x=0,l.y=0),p.el.setBox(l),h.setStyle("position","absolute"),p.isTargetWrapped=!0),p.el.position(),p.pinned&&p.el.addCls(p.pinnedCls),p.resizeTracker=new Ext.resizer.ResizeTracker({disabled:p.disabled,target:t,el:p.el,constrainTo:p.constrainTo,handleCls:p.handleCls,overCls:p.overCls,throttle:p.throttle,proxy:p.originalTarget?p.el:null,dynamic:!!p.originalTarget||p.dynamic,originalTarget:p.originalTarget,delegate:"."+p.handleCls,preserveRatio:p.preserveRatio,heightIncrement:p.heightIncrement,widthIncrement:p.widthIncrement,minHeight:p.minHeight,maxHeight:p.maxHeight,minWidth:p.minWidth,maxWidth:p.maxWidth}),p.resizeTracker.on({mousedown:p.onBeforeResize,drag:p.onResize,dragend:p.onResizeEnd,scope:p}),"all"===p.handles&&(p.handles="n s e w ne nw se sw"),u=p.handles=p.handles.split(p.delimiterRe),n=p.possiblePositions,o=u.length,i=p.handleCls+" "+p.handleCls+"-{0}",p.target.isComponent&&(i+=" "+(g=p.target.baseCls)+"-handle "+g+"-handle-{0}",Ext.supports.CSS3BorderRadius&&(i+=" "+g+"-handle-{0}-br")),a=0;a<o;a++)(d=u[a])&&n[d]&&((c=p[s=n[d]]=p.el.createChild({id:p.el.id+"-"+s+"-handle",cls:Ext.String.format(i,s)+" "+m,unselectable:"on",role:"presentation"})).region=s,p.transparent&&c.setOpacity(0),c.setTouchAction(p.touchActionMap[d]),x.push(c));p.resizeTracker.handleEls=x},disable:function(){this.disabled=!0,this.resizeTracker.disable()},enable:function(){this.disabled=!1,this.resizeTracker.enable()},onBeforeResize:function(e,t){return this.fireResizeEvent("beforeresize",e,t)},onResize:function(e,t){return this.fireResizeEvent("resizedrag",e,t)},onResizeEnd:function(e,t){return this.fireResizeEvent("resize",e,t)},fireResizeEvent:function(e,t,i){var n;if(this.hasListeners[e])return n=this.el.getBox(),this.fireEvent(e,this,n.width,n.height,i)},resizeTo:function(e,t){this.target.setSize(e,t),this.fireEvent("resize",this,e,t,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var e,t,i,n=this.handles,r=n.length,o=this.possiblePositions;for(this.resizeTracker.destroy(),this.isTargetWrapped&&this.target.destroy(),i=0;i<r;i++)(e=this[t=o[n[i]]])&&(e.destroy(),this[t]=null);this.callParent()}}),Ext.define("Ext.selection.CellModel",{extend:"Ext.selection.DataViewModel",alias:"selection.cellmodel",requires:["Ext.grid.CellContext"],isCellModel:!0,deselectOnContainerClick:!1,enableKeyNav:!0,preventWrap:!1,bindComponent:function(e){var t;this.view&&this.gridListeners&&this.gridListeners.destroy(),this.callParent([e]),e&&!1!==(t=e.grid||e.ownerCt).optimizedColumnMove&&(this.gridListeners=t.on({columnmove:this.onColumnMove,scope:this,destroyable:!0}))},getViewListeners:function(){var e=this.callParent();return e.refresh=this.onViewRefresh,e},getHeaderCt:function(){var e=this.navigationModel.getPosition();return(e?e.view:this.primaryView).headerCt},onNavigate:function(e){e.record&&!e.keyEvent.stopSelection&&this.setPosition(e.position)},selectWithEvent:function(e,t){this.select(e)},select:function(e,t,i){var n,r=this.getPosition(),o=this.view.store;!e&&0!==e||(e.isModel?e=-1!==(n=o.indexOf(e))?{row:n,column:r?r.column:0}:null:"number"==typeof e&&(e={row:e,column:0})),e?this.selectByPosition(e,i):this.deselect()},getCurrentPosition:function(){var e=this.selecting?this.nextSelection:this.selection;return e?{view:e.view,record:e.record,row:e.rowIdx,columnHeader:e.column,column:e.view.getColumnManager().indexOf(e.column)}:e},getPosition:function(){return(this.selecting?this.nextSelection:this.selection)||null},setCurrentPosition:function(e,t,i){return e&&!e.isCellContext&&(e=new Ext.grid.CellContext(this.view).setPosition({row:e.row,column:"number"==typeof e.column?this.view.getColumnManager().getColumns()[e.column]:e.column})),this.setPosition(e,t,i)},setPosition:function(e,t,i){var n=this,r=n.selection;return e=e&&(e.isCellContext?e.clone():new Ext.grid.CellContext(n.view).setPosition(e)),!i&&r&&(e&&e.record===r.record&&e.column===r.column&&e.view===r.view?e=null:n.onCellDeselect(n.selection,t)),e?(n.nextSelection=e,n.selecting=!0,n.onCellSelect(n.nextSelection,t),n.selecting=!1,n.selection=e):null},isCellSelected:function(e,t,i){var n,r=this.getPosition();if(r&&r.view===e)return(n=new Ext.grid.CellContext(e).setPosition({row:t,column:"number"==typeof i?e.getColumnManager().getColumns()[i]:i})).record===r.record&&n.column===r.column},onStoreRemove:function(e,t,i){var n=this.getPosition();this.callParent(arguments),n&&e.isMoving(n.record)||(n&&e.getCount()&&-1!==e.indexOf(n.record)?n.setRow(n.record):this.selection=null)},onStoreClear:function(){this.callParent(arguments),this.selection=null},onStoreAdd:function(){var e=this.getPosition();this.callParent(arguments),e?e.setRow(e.record):this.selection=null},updateSelectedInstances:function(e){var t=this.getPosition(),i=e.getAt(0);i&&t&&t.record.id===i.id&&t.setRow(i),this.callParent([e]),0===e.length&&i&&(this.selection=null)},onCellClick:function(e,t,i,n,r,o,a){-1!==o&&this.setPosition(a.position)},onCellSelect:function(e,t){e&&void 0!==e.rowIdx&&-1<e.rowIdx&&this.doSelect(e.record,!1,t)},onCellDeselect:function(e,t){e&&void 0!==e.rowIdx&&this.doDeselect(e.record,t)},onSelectChange:function(e,t,i,n){var r,o,a;o=t?(r=this.nextSelection,"select"):(r=this.selection,"deselect"),a=r.view||this.primaryView,!1!==(i||this.fireEvent("before"+o,this,e,r.rowIdx,r.colIdx))&&!1!==n()&&(t?a.onCellSelect(r):(a.onCellDeselect(r),delete this.selection),i||this.fireEvent(o,this,e,r.rowIdx,r.colIdx))},refresh:function(){var e,t=this.getPosition();t&&-1!==(e=this.store.indexOf(this.selected.last()))&&(t.rowIdx=e)},onColumnMove:function(e,t,i,n){var r=e.up("tablepanel");r&&this.onViewRefresh(r.view)},onUpdate:function(e){var t;this.isSelected(e)&&(t=this.selecting?this.nextSelection:this.selection,this.view.onCellSelect(t))},onViewRefresh:function(e){var t,i,n,r=this.getPosition(),o=e.headerCt;r&&r.view===e&&(i=r.record,(n=e.getColumnByPosition(r))&&!n.isDescendantOf(o)&&(n=o.queryById(n.id)||o.down('[text="'+n.text+'"]')||o.down('[dataIndex="'+n.dataIndex+'"]')),n&&i?-1!==e.store.indexOfId(i.getId())&&(t=new Ext.grid.CellContext(e).setPosition({row:i,column:n}),this.setPosition(t)):this.selection=null)},selectByPosition:function(e,t){this.setPosition(e,t)}}),Ext.define("Ext.selection.RowModel",{extend:"Ext.selection.DataViewModel",alias:"selection.rowmodel",requires:["Ext.grid.CellContext"],enableKeyNav:!0,isRowModel:!0,deselectOnContainerClick:!1,onUpdate:function(e){var t,i=this.view;i&&this.isSelected(e)&&(t=i.indexOf(e),i.onRowSelect(t),e===this.lastFocused&&i.onRowFocus(t,!0))},onSelectChange:function(e,t,i,n){var r,o,a=this.views||[this.view],s=a.length,l=this.store.indexOf(e),d=t?"select":"deselect";if(!1!==(i||this.fireEvent("before"+d,this,e,l))&&!1!==n()){for(r=0;r<s;r++)l=(o=a[r]).indexOf(e),-1!==o.indexOf(e)&&(t?o.onRowSelect(l,i):o.onRowDeselect(l,i));i||this.fireEvent(d,this,e,l)}},getCurrentPosition:function(){var e=this.selected.getAt(0);if(e)return new Ext.grid.CellContext(this.view).setPosition(this.store.indexOf(e),0)},selectByPosition:function(e,t){e.isCellContext||(e=new Ext.grid.CellContext(this.view).setPosition(e.row,e.column)),this.select(e.record,t)},selectNext:function(e,t){var i=this.store,n=this.getSelection(),r=n[n.length-1],o=this.view.indexOf(r)+1;return o!==i.getCount()&&0!==o&&(this.doSelect(o,e,t),!0)},selectPrevious:function(e,t){var i=this.getSelection()[0],n=this.view.indexOf(i)-1;return!(n<0)&&(this.doSelect(n,e,t),!0)},isRowSelected:function(e){return this.isSelected(e)},isCellSelected:function(e,t,i){return this.isSelected(t)},vetoSelection:function(e){var t=this.view.getNavigationModel(),i=e.getKey();return(i===e.RIGHT||i===e.LEFT)&&t.previousRecord===t.record||this.callParent([e])}}),Ext.define("Ext.selection.CheckboxModel",{alias:"selection.checkboxmodel",extend:"Ext.selection.RowModel",requires:["Ext.grid.column.Check"],mode:"MULTI",injectCheckbox:0,checkOnly:!1,locked:!1,showHeaderCheckbox:void 0,headerText:void 0,headerAriaLabel:"Row selector",headerSelectText:"Press Space to select all rows",headerDeselectText:"Press Space to deselect all rows",rowSelectText:"Press Space to select this row",rowDeselectText:"Press Space to deselect this row",allowDeselect:!0,headerWidth:24,checkerOnCls:Ext.baseCSSPrefix+"grid-hd-checker-on",tdCls:Ext.baseCSSPrefix+"grid-cell-special "+Ext.baseCSSPrefix+"selmodel-column",constructor:function(){this.callParent(arguments),"SINGLE"===this.mode&&(this.showHeaderCheckbox&&Ext.Error.raise("The header checkbox is not supported for SINGLE mode selection models."),this.showHeaderCheckbox=!1)},beforeViewRender:function(e){var t=this,i=e.grid.ownerLockable,n=t.locked||t.config&&t.config.locked;t.callParent(arguments),!1!==t.injectCheckbox&&(i&&!t.lockListeners&&(t.lockListeners=i.mon(i,{lockcolumn:t.onColumnLock,unlockcolumn:t.onColumnUnlock,scope:t,destroyable:!0})),(!i||e.isLockedView&&(t.hasLockedHeader()||n)||e.isNormalView&&!t.column)&&(t.addCheckbox(e),t.mon(e.ownerGrid,{beforereconfigure:t.onBeforeReconfigure,reconfigure:t.onReconfigure,scope:t})))},onColumnUnlock:function(e,t){var i=this.injectCheckbox,n=e.lockedGrid.visibleColumnManager.getColumns();1===n.length&&n[0]===this.column&&("first"===i?i=0:"last"===i&&(i=e.normalGrid.visibleColumnManager.getColumns().length),e.unlock(this.column,i))},onColumnLock:function(e,t){var i=this.injectCheckbox;1===e.lockedGrid.visibleColumnManager.getColumns().length&&("first"===i?i=0:"last"===i&&(i=e.lockedGrid.visibleColumnManager.getColumns().length),e.lock(this.column,i))},bindComponent:function(e){this.sortable=!1,this.callParent(arguments)},hasLockedHeader:function(){var e,t=this.view.ownerGrid.getVisibleColumnManager().getColumns(),i=t.length;for(e=0;e<i;e++)if(t[e].locked)return!0;return!1},addCheckbox:function(e){var t=this.injectCheckbox,i=e.headerCt;!1!==t&&("first"===t?t=0:"last"===t&&(t=i.getColumnCount()),Ext.suspendLayouts(),e.getStore().isBufferedStore&&(this.showHeaderCheckbox=!1),this.column=i.add(t,this.column||this.getHeaderConfig()),Ext.resumeLayouts())},onBeforeReconfigure:function(e,t,i,n,r){var o=this.column,a=o.ownerCt;i&&a&&a.remove(o,!1)},onReconfigure:function(e,t,i){i&&(e.lockable?e.lockedGrid.isVisible()?e.lock(this.column,0):e.unlock(this.column,0):this.addCheckbox(this.view),e.view.refreshView())},onHeaderClick:function(e,t,i){var n,r,o,a,s,l=this.store;if(!1!==this.showHeaderCheckbox&&t===this.column&&"SINGLE"!==this.mode)if(i.stopEvent(),t.el.hasCls(Ext.baseCSSPrefix+"grid-hd-checker-on")){for(n=[],r=0,o=(a=this.getSelection()).length;r<o;++r)s=a[r],-1<l.indexOf(s)&&n.push(s);0<n.length&&this.deselect(n)}else this.selectAll()},getHeaderConfig:function(){var e,t=this,i=!1!==t.showHeaderCheckbox,n=Ext.String.htmlEncode;return e={xtype:"checkcolumn",headerCheckbox:i,isCheckerHd:i,ignoreExport:!0,text:t.headerText,width:t.headerWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,checkOnly:t.checkOnly,checkboxAriaRole:"presentation",tdCls:Ext.baseCSSPrefix+"selmodel-checkbox "+t.tdCls,cls:Ext.baseCSSPrefix+"selmodel-column",editRenderer:t.editRenderer||t.renderEmpty,locked:t.hasLockedHeader(),processEvent:Ext.emptyFn,renderer:t.renderer||t.defaultRenderer,toggleAll:Ext.emptyFn,setRecordCheck:Ext.emptyFn,isRecordChecked:t.isRowSelected.bind(t)},t.checkOnly?(e.useAriaElements=!0,e.ariaLabel=n(t.headerAriaLabel),e.headerSelectText=n(t.headerSelectText),e.headerDeselectText=n(t.headerDeselectText),e.rowSelectText=n(t.rowSelectText),e.rowDeselectText=n(t.rowDeselectText)):e.ariaRole="presentation",e},toggleRecord:function(e,t,i,n){this[i?"select":"deselect"]([e],"SINGLE"!==this.mode)},renderEmpty:function(){return"&#160;"},refresh:function(){this.callParent(arguments),this.updateHeaderState()},selectByPosition:function(e,t){e.isCellContext||(e=new Ext.grid.CellContext(this.view).setPosition(e.row,e.column)),this.checkOnly&&e.column!==this.column||this.callParent([e,t])},onSelectChange:function(e,t){this.callParent(arguments),this.column&&this.column.updateCellAriaDescription(e,t),this.suspendChange||this.updateHeaderState()},onStoreLoad:function(){this.callParent(arguments),this.updateHeaderState()},onStoreAdd:function(){this.callParent(arguments),this.updateHeaderState()},onStoreRemove:function(){this.callParent(arguments),this.updateHeaderState()},onStoreRefresh:function(){this.callParent(arguments),this.updateHeaderState()},maybeFireSelectionChange:function(e){e&&!this.suspendChange&&this.updateHeaderState(),this.callParent(arguments)},resumeChanges:function(){this.callParent(),this.suspendChange||this.updateHeaderState()},updateHeaderState:function(){var e,t,i,n=this.store,r=n.getCount(),o=this.views,a=!1,s=0;if(!n.isBufferedStore&&0<r){for(a=!0,i=0,t=(e=this.selected).getCount();i<t;++i)-1<n.indexOfId(e.getAt(i).id)&&++s;a=r===s}o&&o.length&&this.column.setHeaderStatus(a)},vetoSelection:function(e){var t,i,n,r=this.column;return this.checkOnly&&(i=e.type===r.triggerEvent&&e.getTarget(this.column.getCellSelector()),n=e.getKey()===e.SPACE&&e.position.column===r,t=!(i||n)),t||this.callParent([e])},privates:{onBeforeNavigate:function(e){var t=e.keyEvent;"SINGLE"!==this.selectionMode&&(e.ctrlKey=e.ctrlKey||t.ctrlKey||t.type===this.column.triggerEvent&&!t.shiftKey||t.getKey()===t.SPACE)},selectWithEventMulti:function(e,t,i){t.shiftKey||t.ctrlKey||!t.getTarget(this.column.getCellSelector())?this.callParent([e,t,i]):i?this.doDeselect(e):this.doSelect(e,!0)}}},function(e){e.prototype.checkSelector="."+Ext.grid.column.Check.prototype.checkboxCls}),Ext.define("Ext.selection.TreeModel",{extend:"Ext.selection.RowModel",alias:"selection.treemodel",selectOnExpanderClick:!1,constructor:function(e){this.callParent([e]),this.pruneRemoved&&(this.pruneRemoved=!1,this.pruneRemovedNodes=!0)},getStoreListeners:function(){var e=this.callParent();return e.noderemove=this.onNodeRemove,e},onNodeRemove:function(e,t,i){if(!i){var n=[];this.gatherSelected(t,n),n.length&&this.deselect(n)}},pruneRemovedOnRefresh:function(){return this.pruneRemovedNodes},vetoSelection:function(e){var t=this.view;return!this.selectOnExpanderClick&&"click"===e.type&&e.getTarget(t.expanderSelector||t.lockingPartner&&t.lockingPartner.expanderSelector)||this.callParent([e])},privates:{gatherSelected:function(e,t){var i,n,r,o=e.childNodes;if(this.selected.containsKey(e.id)&&t.push(e),o)for(i=0,n=o.length;i<n;++i)r=o[i],this.gatherSelected(r,t)}}}),Ext.define("Ext.slider.Thumb",{requires:["Ext.dd.DragTracker","Ext.util.Format"],overCls:Ext.baseCSSPrefix+"slider-thumb-over",constructor:function(e){Ext.apply(this,e||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:!1}),null==this.id&&Ext.id(this,"ext-slider-thumb-"),this.callParent([e])},render:function(){this.el=this.slider.innerEl.insertFirst(this.getElConfig()),this.onRender()},onRender:function(){var e={};e[this.slider.vertical?"panY":"panX"]=!1,this.el.setTouchAction(e),this.disabled&&this.disable(),this.initEvents()},getElConfig:function(){var e=this.slider,t={};return t[e.vertical?"bottom":e.horizontalProp]=e.calculateThumbPosition(e.normalizeValue(this.value))+"%",{style:t,id:this.id,cls:this.cls,role:"presentation"}},move:function(e,t){var i,n,r,o=this.el,a=this.slider,s=a.vertical?"bottom":a.horizontalProp;e+="%",t?((i={})[s]=e,Ext.supports.GetPositionPercentage||((n={})[s]=o.dom.style[s]),r={target:o,duration:350,from:n,to:i,scope:this,callback:this.onAnimComplete},!0!==t&&Ext.apply(r,t),this.anim=new Ext.fx.Anim(r)):o.dom.style[s]=e},onAnimComplete:function(){this.anim=null},enable:function(){var e=this.el;this.disabled=!1,e&&e.removeCls(this.slider.disabledCls)},disable:function(){var e=this.el;this.disabled=!0,e&&e.addCls(this.slider.disabledCls)},initEvents:function(){var e=this;e.tracker=new Ext.dd.DragTracker({el:e.el,onBeforeStart:e.onBeforeDragStart.bind(e),onStart:e.onDragStart.bind(e),onDrag:e.onDrag.bind(e),onEnd:e.onDragEnd.bind(e),tolerance:3,autoStart:300}),e.el.hover(e.addOverCls,e.removeOverCls,e)},addOverCls:function(){this.disabled||this.el.addCls(this.overCls)},removeOverCls:function(){this.el.removeCls(this.overCls)},onBeforeDragStart:function(e){var t=this.el,i=this.tracker.getXY(),n=this.pointerOffset=t.getXY();return!this.disabled&&(n[0]+=Math.floor(t.getWidth()/2)-i[0],n[1]+=Math.floor(t.getHeight()/2)-i[1],this.slider.promoteThumb(this),!0)},onDragStart:function(e){var t=this.slider;t.onDragStart(this,e),this.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag"),this.dragging=this.slider.dragging=!0,this.dragStartValue=this.value,t.fireEvent("dragstart",t,e,this)},onDrag:function(e){var t,i,n=this.slider,r=this.index,o=this.getValueFromTracker();void 0!==o&&(this.constrain&&(t=n.thumbs[r+1],void 0!==(i=n.thumbs[r-1])&&o<=i.value&&(o=i.value),void 0!==t&&o>=t.value&&(o=t.value)),n.setValue(r,o,!1),n.fireEvent("drag",n,e,this))},getValueFromTracker:function(){var e,t=this.slider,i=this.tracker.getXY();if(i[0]+=this.pointerOffset[0],i[1]+=this.pointerOffset[1],null!=(e=t.getTrackpoint(i)))return t.reversePixelValue(e)},onDragEnd:function(e){var t=this.slider,i=this.value;t.onDragEnd(this,e),this.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag"),this.dragging=t.dragging=!1,t.fireEvent("dragend",t,e),this.dragStartValue!==i&&t.fireEvent("changecomplete",t,i,this)},destroy:function(){var e=this.anim;e&&e.end(),this.el=this.tracker=this.anim=Ext.destroy(this.el,this.tracker),this.callParent()}}),Ext.define("Ext.slider.Tip",{extend:"Ext.tip.Tip",alias:"widget.slidertip",offsets:null,align:null,position:"",minWidth:10,defaultVerticalPosition:"left",defaultHorizontalPosition:"top",isSliderTip:!0,init:function(e){var t,i,n=this;switch(n.position||(n.position=e.vertical?n.defaultVerticalPosition:n.defaultHorizontalPosition),n.position){case"top":i=[0,-10],t="b-t?";break;case"bottom":i=[0,10],t="t-b?";break;case"left":i=[-10,0],t="r-l?";break;case"right":i=[10,0],t="l-r?"}n.align||(n.align=t),n.offsets||(n.offsets=i),e.on({scope:n,dragstart:n.onSlide,drag:n.onSlide,dragend:n.hide,destroy:n.destroy})},onSlide:function(e,t,i){this.update(this.getText(i)),this.show(),this.el.alignTo(i.el,this.align,this.offsets)},getText:function(e){return String(e.value)}}),Ext.define("Ext.slider.Multi",{extend:"Ext.form.field.Base",alias:"widget.multislider",alternateClassName:"Ext.slider.MultiSlider",requires:["Ext.slider.Thumb","Ext.slider.Tip","Ext.Number","Ext.util.Format","Ext.Template"],vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,pageSize:10,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,dragging:!1,constrainThumbs:!0,useTips:!0,tipText:null,defaultBindProperty:"value",publishes:["value"],thumbPerValue:!1,ariaRole:"slider",focusable:!0,needArrowKeys:!0,tabIndex:0,skipLabelForAttribute:!0,focusCls:"slider-focus",childEls:["endEl","innerEl"],fieldSubTpl:['<div id="{id}" data-ref="inputEl" {inputAttrTpl}',' class="',Ext.baseCSSPrefix,"slider {fieldCls} {vertical}",'{childElCls}"','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl foreach="ariaElAttributes"> {$}="{.}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',">",'<div id="{cmpId}-endEl" data-ref="endEl" class="'+Ext.baseCSSPrefix+'slider-end" role="presentation">','<div id="{cmpId}-innerEl" data-ref="innerEl" class="'+Ext.baseCSSPrefix+'slider-inner" role="presentation">',"{%this.renderThumbs(out, values)%}","</div>","</div>","</div>",{renderThumbs:function(e,t){for(var i,n=t.$comp,r=0,o=n.thumbs,a=o.length;r<a;r++)(i=o[r].getElConfig()).id=n.id+"-thumb-"+r,Ext.DomHelper.generateMarkup(i,e)},disableFormats:!0}],horizontalProp:"left",initValue:function(){var e,t=Ext.valueFrom,i=this.thumbPerValue;e=t(this.values,[t(this.value,t(this.minValue,0))]),this.originalValue=e,this.initializingValues=!0,this.updateValues(e),this.initializingValues=!1,this.thumbPerValue=i},initComponent:function(){var e,t,i,n,r,o=this,a=o.tipText;if(o.thumbs=[],o.keyIncrement=Math.max(o.increment,o.keyIncrement),o.extraFieldBodyCls=Ext.baseCSSPrefix+"slider-ct-"+(o.vertical?"vert":"horz"),o.callParent(),o.useTips){for(e={},Ext.isObject(o.useTips)?Ext.apply(e,o.useTips):a&&(e.getText=a),"string"==typeof(a=e.getText)&&(e.getText=function(e){return Ext.callback(a,null,[e],0,o,o)}),n=(r=o.plugins=o.plugins||[]).length,i=0;i<n;i++)if(r[i].isSliderTip){t=!0;break}t||o.plugins.push(new Ext.slider.Tip(e))}},addThumb:function(e){var t=new Ext.slider.Thumb({ownerCt:this,value:e,slider:this,index:this.thumbs.length,constrain:this.constrainThumbs,disabled:!!this.readOnly});return this.thumbs.push(t),this.rendered&&t.render(),t},promoteThumb:function(e){var t,i=this.thumbStack||(this.thumbStack=Ext.Array.slice(this.thumbs)),n=i.length,r=1e4;for(i[0]!==e&&(Ext.Array.remove(i,e),i.unshift(e)),t=0;t<n;t++)i[t].el.setStyle("zIndex",r),r-=1e3},getSubTplData:function(e){var t,i,n=this;return(i=(t=Ext.apply(n.callParent([e]),{$comp:n,vertical:n.vertical?Ext.baseCSSPrefix+"slider-vert":Ext.baseCSSPrefix+"slider-horz",minValue:n.minValue,maxValue:n.maxValue,value:n.value,tabIdx:n.tabIndex,childElCls:""})).inputElAriaAttributes)&&(i["aria-labelledby"]||(i["aria-labelledby"]=n.id+"-labelEl"),i["aria-orientation"]=n.vertical?"vertical":"horizontal",i["aria-valuemin"]=n.minValue,i["aria-valuemax"]=n.maxValue,i["aria-valuenow"]=n.value),t},onRender:function(){var e,t=this.thumbs,i=t.length,n=0;for(this.callParent(arguments),n=0;n<i;n++)(e=t[n]).el=this.el.getById(this.id+"-thumb-"+n),e.onRender()},initEvents:function(){this.callParent(),this.mon(this.el,{scope:this,mousedown:this.onMouseDown,keydown:this.onKeyDown})},onDragStart:Ext.emptyFn,onDragEnd:Ext.emptyFn,getTrackpoint:function(e){var t,i,n,r=this.vertical,o=this.innerEl;return t=r?(n="top",o.getHeight()):(n=this.horizontalProp,o.getWidth()),e=this.transformTrackPoints(o.translatePoints(e)),i=Ext.Number.constrain(e[n],0,t),r?t-i:i},transformTrackPoints:Ext.identityFn,checkChange:Ext.emptyFn,onMouseDown:function(e){var t,i=!1,n=0,r=this.thumbs,o=r.length;if(!this.disabled){for(;!i&&n<o;n++)i=i||e.target===r[n].el.dom;this.focus(),this.clickToChange&&!i&&void 0!==(t=this.getTrackpoint(e.getXY()))&&this.onClickChange(t)}},onClickChange:function(e){var t,i;(t=this.getNearest(e)).disabled||(i=t.index,this.setValue(i,Ext.util.Format.round(this.reversePixelValue(e),this.decimalPrecision),void 0,!0))},getNearest:function(e){for(var t,i,n,r=this.reversePixelValue(e),o=this.getRange()+5,a=null,s=0,l=this.thumbs.length;s<l;s++)if(i=(t=this.thumbs[s]).value,n=Math.abs(i-r),Math.abs(n)<=o){if(a&&a.value==i&&r<i&&t.index>a.index)continue;a=t,o=n}return a},onKeyDown:function(e){var t,i,n=this,r=n.ariaEl.dom;if(t=e.getKey(),n.disabled||1!==n.thumbs.length)t!==e.TAB&&e.preventDefault();else{switch(t){case e.UP:case e.RIGHT:i=e.ctrlKey?n.maxValue:n.getValue(0)+n.keyIncrement;break;case e.DOWN:case e.LEFT:i=e.ctrlKey?n.minValue:n.getValue(0)-n.keyIncrement;break;case e.HOME:i=n.minValue;break;case e.END:i=n.maxValue;break;case e.PAGE_UP:i=n.getValue(0)+n.pageSize;break;case e.PAGE_DOWN:i=n.getValue(0)-n.pageSize}void 0!==i&&(e.stopEvent(),i=n.normalizeValue(i),n.setValue(0,i,void 0,!0),r&&r.setAttribute("aria-valuenow",i))}},normalizeValue:function(e){var t=this.zeroBasedSnapping?"snap":"snapInRange";return e=Ext.Number[t](e,this.increment,this.minValue,this.maxValue),e=Ext.util.Format.round(e,this.decimalPrecision),e=Ext.Number.constrain(e,this.minValue,this.maxValue)},setMinValue:function(e){var t,i=this.thumbs,n=i.length,r=this.ariaEl.dom;for(this.minValue=e,t=0;t<n;++t)i[t].value<e&&this.setValue(t,e,!1);r&&r.setAttribute("aria-valuemin",e),this.syncThumbs()},setMaxValue:function(e){var t,i=this.thumbs,n=i.length,r=this.ariaEl.dom;for(this.maxValue=e,t=0;t<n;++t)i[t].value>e&&this.setValue(t,e,!1);r&&r.setAttribute("aria-valuemax",e),this.syncThumbs()},setValue:function(e,t,i,n){var r,o=this,a=o.ariaEl.dom;return Ext.isArray(e)?o.updateValues(e,t):(r=o.thumbs[e],(t=o.normalizeValue(t))!==r.value&&!1!==o.fireEvent("beforechange",o,t,r.value,r,"update")&&(r.value=t,o.rendered&&(i=Ext.isDefined(i)?!1!==i&&i:o.animate,r.move(o.calculateThumbPosition(t),i),0===e&&a&&a.setAttribute("aria-valuenow",t),o.fireEvent("change",o,t,r,"update"),o.checkDirty(),n&&o.fireEvent("changecomplete",o,t,r)))),o},calculateThumbPosition:function(e){var t=(e-this.minValue)/this.getRange()*100;return isNaN(t)&&(t=0),t},getRatio:function(){var e=this.innerEl,t=this.vertical?e.getHeight():e.getWidth(),i=this.getRange();return 0===i?t:t/i},getRange:function(){return this.maxValue-this.minValue},reversePixelValue:function(e){return this.minValue+e/this.getRatio()},reversePercentageValue:function(e){return this.minValue+this.getRange()*(e/100)},onDisable:function(){var e,t,i,n=0,r=this.thumbs,o=r.length;for(this.callParent();n<o;n++)t=(e=r[n]).el,e.disable(),Ext.isIE&&(i=t.getXY(),t.hide(),this.innerEl.addCls(this.disabledCls).dom.disabled=!0,this.thumbHolder||(this.thumbHolder=this.endEl.createChild({role:"presentation",cls:Ext.baseCSSPrefix+"slider-thumb "+this.disabledCls})),this.thumbHolder.show().setXY(i))},onEnable:function(){var e,t,i=0,n=this.thumbs,r=n.length;for(this.callParent();i<r;i++)t=(e=n[i]).el,e.enable(),Ext.isIE&&(this.innerEl.removeCls(this.disabledCls).dom.disabled=!1,this.thumbHolder&&this.thumbHolder.hide(),t.show(),this.syncThumbs())},syncThumbs:function(){if(this.rendered)for(var e=this.thumbs,t=e.length,i=0;i<t;i++)e[i].move(this.calculateThumbPosition(e[i].value))},getValue:function(e){return Ext.isNumber(e)?this.thumbs[e].value:this.getValues()},getValues:function(){for(var e=[],t=0,i=this.thumbs,n=i.length;t<n;t++)e.push(i[t].value);return e},getSubmitValue:function(){return this.disabled||!this.submitValue?null:this.getValue()},reset:function(){var e=[].concat(this.originalValue);this.updateValues(e),this.clearInvalid(),delete this.wasValid},updateValues:function(e,t,i){var n,r,o,a,s,l=this,d=e.length,u=l.thumbs,c=u.length,h=[],f=l.initializingValues||i;for(n=0;n<d;n++)r=u[n],o=e[n],r?l.setValue(n,o,t):h.push(o);if(l.thumbPerValue||l.initializingValues){for(a=h.length,s=c-d,n=0;n<a;n++)o=h[n],!f&&!1===l.fireEvent("beforechange",l,o,null,null,"add")||(r=l.addThumb(l.normalizeValue(o)),f||l.fireEvent("change",l,o,r,"add"),l.checkDirty());for(n=0;n<s;n++)r=u[u.length-1],!f&&!1===l.fireEvent("beforechange",l,null,r.value,r,"remove")||(l.removeThumb(r),f||l.fireEvent("change",l,null,null,"remove"),l.checkDirty())}return l},removeThumb:function(e){var t,i=this.thumbs;Ext.isNumber(e)?e=i[t=e]:t=this.findThumbIndex(e),e&&Ext.isNumber(t)&&(i.splice(t,1),this.thumbStack=Ext.Array.slice(this.thumbs),Ext.destroy(e))},findThumbIndex:function(e){var t,i=this.thumbs,n=i.length,r=null;for(t=0;t<n;t++)if(i[t]===e){r=t;break}return r},setReadOnly:function(e){var t=this.thumbs,i=t.length,n=0;for(this.callParent(arguments),e=this.readOnly;n<i;++n)e?t[n].disable():t[n].enable()},doDestroy:function(){this.rendered&&Ext.destroy(this.thumbs),this.thumbHolder&&(this.thumbHolder.destroy(),this.thumbHolder=null),this.callParent()}}),Ext.define("Ext.slider.Single",{extend:"Ext.slider.Multi",alias:["widget.slider","widget.sliderfield"],alternateClassName:["Ext.Slider","Ext.form.SliderField","Ext.slider.SingleSlider","Ext.slider.Slider"],initComponent:function(){this.publishOnComplete&&(this.valuePublishEvent="changecomplete"),this.callParent()},publishOnComplete:!0,getValue:function(){return this.callParent([0])},setValue:function(e,t){var i=arguments,n=i.length;return(1===n||n<=3&&"number"!=typeof i[1])&&(i=Ext.toArray(i)).unshift(0),this.callParent(i)},getNearest:function(){return this.thumbs[0]}}),Ext.define("Ext.slider.Widget",{extend:"Ext.Widget",alias:"widget.sliderwidget",requires:["Ext.slider.Multi"],cachedConfig:{vertical:!1},config:{clickToChange:!0,ui:"widget",value:0,minValue:0,maxValue:100,publishOnComplete:!0,twoWayBindable:{value:1}},decimalPrecision:0,defaultBindProperty:"value",element:{reference:"element",cls:Ext.baseCSSPrefix+"slider",listeners:{mousedown:"onMouseDown",dragstart:"cancelDrag",drag:"cancelDrag",dragend:"cancelDrag"},children:[{reference:"endEl",cls:Ext.baseCSSPrefix+"slider-end",children:[{reference:"innerEl",cls:Ext.baseCSSPrefix+"slider-inner"}]}]},thumbCls:Ext.baseCSSPrefix+"slider-thumb",horizontalProp:"left",animateOnSetValue:void 0,applyValue:function(e){var t,i,n=this.animateOnSetValue;if(Ext.isArray(e))for(t=0,i=(e=Ext.Array.from(e)).length;t<i;++t)this.setThumbValue(t,e[t]=this.normalizeValue(e[t]),n,!0);else e=this.normalizeValue(e),this.setThumbValue(0,e,n,!0);return e},updateVertical:function(e,t){this.element.removeCls(Ext.baseCSSPrefix+"slider-"+(t?"vert":"horz")),this.element.addCls(Ext.baseCSSPrefix+"slider-"+(e?"vert":"horz"))},updateHeight:function(e,t){this.callParent([e,t]),this.endEl.dom.style.height=this.innerEl.dom.style.height="100%"},cancelDrag:function(e){e.stopPropagation()},getThumb:function(e){var t,i=(this.thumbs||(this.thumbs=[]))[e],n=this.getVertical()?"panY":"panX",r={};return i||((t={cls:this.thumbCls,style:{}})["data-thumbIndex"]=e,i=this.thumbs[e]=this.innerEl.createChild(t),r[n]=!1,i.setTouchAction(r)),i},getThumbPositionStyle:function(){return this.getVertical()?"bottom":this.horizontalProp},update:function(){var e,t=this.getValues(),i=t.length;for(e=0;e<i;e++)this.thumbs[e].dom.style[this.getThumbPositionStyle()]=this.calculateThumbPosition(t[e])+"%"},updateMaxValue:function(e){this.onRangeAdjustment(e,"min")},updateMinValue:function(e){this.onRangeAdjustment(e,"max")},onRangeAdjustment:function(e,t){var i,n=this._value;isNaN(n)||(i=Math[t](n,e)),void 0!==i&&this.setValue(i),this.update()},onMouseDown:function(e){var t,i,n=this,r=e.getXY();n.disabled||0!==e.button||(Ext.getDoc().on({scope:n,capture:!0,selectstart:n.stopSelect}),(t=e.getTarget("."+n.thumbCls,null,!0))?(n.animateOnSetValue=!1,n.promoteThumb(t),n.captureMouse(n.onMouseMove,n.onMouseUp,[t],1),(i=n.pointerOffset=t.getXY())[0]+=Math.floor(t.getWidth()/2)-r[0],i[1]+=Math.floor(t.getHeight()/2)-r[1]):n.getClickToChange()&&null!=(r=n.getTrackpoint(r))&&n.onClickChange(r))},onClickChange:function(e){var t,i,n;t=this.getNearest(e),i=parseInt(t.getAttribute("data-thumbIndex"),10),n=Ext.util.Format.round(this.reversePixelValue(e),this.decimalPrecision),i?this.setThumbValue(i,n,void 0,!0):this.setValue(n)},getNearest:function(e){for(var t,i,n,r=this.reversePixelValue(e),o=this.getRange()+5,a=null,s=this.thumbs,l=0,d=s.length;l<d;l++)i=(t=s[l]).value,n=Math.abs(i-r),Math.abs(n)<=o&&(a=t,o=n);return a},promoteThumb:function(e){var t,i=this.thumbStack||(this.thumbStack=Ext.Array.slice(this.thumbs)),n=i.length,r=1e4;for(i[0]!==e&&(Ext.Array.remove(i,e),i.unshift(e)),t=0;t<n;t++)i[t].el.setStyle("zIndex",r),r-=1e3},doMouseMove:function(e,t,i){var n,r,o,a=e.getXY();a[0]+=this.pointerOffset[0],a[1]+=this.pointerOffset[1],null!=(o=this.getTrackpoint(a))&&(n=Ext.util.Format.round(this.reversePixelValue(o),this.decimalPrecision),(r=parseInt(t.getAttribute("data-thumbIndex"),10))||!i&&this.getPublishOnComplete()?this.setThumbValue(r,n,!1,i):this.setValue(n))},onMouseMove:function(e,t){this.doMouseMove(e,t,!1)},onMouseUp:function(e,t){this.doMouseMove(e,t,!0),Ext.getDoc().un({scope:this,capture:!0,selectstart:this.stopSelect}),delete this.animateOnSetValue},stopSelect:function(e){return e.stopEvent(),!1},setThumbValue:function(e,t,i,n){var r,o,a,s,l=this;if(Ext.isArray(e)){for(i=t,a=0,o=(s=e).length;a<o;++a)l.setThumbValue(a,s[a],i,n);return l}return r=l.getThumb(e),(t=l.normalizeValue(t))!==r.value&&!1!==l.fireEvent("beforechange",l,t,r.value,r)&&(r.value=t,l.element.dom&&(l.element.set({"aria-valuenow":t,"aria-valuetext":t}),l.moveThumb(r,l.calculateThumbPosition(t),Ext.isDefined(i)?!1!==i:l.animate),l.fireEvent("change",l,t,r))),l},getValue:function(e){var t;return Ext.isNumber(e)?t=this.thumbs[e].value:1===(t=this.getValues()).length&&(t=t[0]),t},getValues:function(){for(var e=[],t=0,i=this.thumbs,n=i&&i.length;t<n;t++)e.push(this.thumbs[t].value);return e},moveThumb:function(e,t,i){var n,r,o=this.getThumbPositionStyle();t+="%",i?((n={})[o]=t,Ext.supports.GetPositionPercentage||((r={})[o]=e.dom.style[o]),new Ext.fx.Anim({target:e,duration:350,from:r,to:n})):e.dom.style[o]=t},normalizeValue:function(e){var t=this.zeroBasedSnapping?"snap":"snapInRange";return e=Ext.Number[t](e,this.increment,this.minValue,this.maxValue),e=Ext.util.Format.round(e,this.decimalPrecision),e=Ext.Number.constrain(e,this.minValue,this.maxValue)},getTrackpoint:function(e){var t,i,n,r=this.getVertical(),o=this.innerEl;return t=r?(n="top",o.getHeight()):(n=this.horizontalProp,o.getWidth()),e=this.transformTrackPoints(o.translatePoints(e)),i=Ext.Number.constrain(e[n],0,t),r?t-i:i},transformTrackPoints:Ext.identityFn,calculateThumbPosition:function(e){var t=(e-this.getMinValue())/this.getRange()*100;return isNaN(t)&&(t=0),t},getRatio:function(){var e=this.innerEl,t=this.getVertical()?e.getHeight():e.getWidth(),i=this.getRange();return 0===i?t:t/i},getRange:function(){return this.getMaxValue()-this.getMinValue()},reversePixelValue:function(e){return this.getMinValue()+e/this.getRatio()},captureMouse:function(e,t,i,n){var r,o=this;e=e&&Ext.Function.bind(e,o,i,n),t=t&&Ext.Function.bind(t,o,i,n),r={mousemove:e,mouseup:function(){Ext.getDoc().un(r),t&&t.apply(o,arguments)}},Ext.getDoc().on(r)},doDestroy:function(){Ext.destroy(this.thumbs),this.callParent()}}),Ext.define("Ext.state.CookieProvider",{extend:"Ext.state.Provider",constructor:function(e){this.path="/",this.expires=new Date(Ext.Date.now()+6048e5),this.domain=null,this.secure=!1,this.callParent(arguments),this.state=this.readCookies()},set:function(e,t){null!=t?(this.setCookie(e,t),this.callParent(arguments)):this.clear(e)},clear:function(e){this.clearCookie(e),this.callParent(arguments)},readCookies:function(){for(var e,t,i,n={},r=document.cookie+";",o=/\s?(.*?)=(.*?);/g,a=this.prefix,s=a.length;null!=(e=o.exec(r));)t=e[1],i=e[2],t&&t.substring(0,s)===a&&(n[t.substr(s)]=this.decodeValue(i));return n},setCookie:function(e,t){document.cookie=this.prefix+e+"="+this.encodeValue(t)+(null==this.expires?"":"; expires="+this.expires.toUTCString())+(null==this.path?"":"; path="+this.path)+(null==this.domain?"":"; domain="+this.domain)+(this.secure?"; secure":"")},clearCookie:function(e){document.cookie=this.prefix+e+"=null; expires=Thu, 01-Jan-1970 00:00:01 GMT"+(null==this.path?"":"; path="+this.path)+(null==this.domain?"":"; domain="+this.domain)+(this.secure?"; secure":"")}}),Ext.define("Ext.state.LocalStorageProvider",{extend:"Ext.state.Provider",requires:["Ext.util.LocalStorage"],alias:"state.localstorage",constructor:function(){this.callParent(arguments),this.store=this.getStorageObject(),this.store?this.state=this.readLocalStorage():this.state={}},readLocalStorage:function(){for(var e,t=this.store,i={},n=t.getKeys(),r=n.length;r--;)i[e=n[r]]=this.decodeValue(t.getItem(e));return i},set:function(e,t){this.clear(e),null!=t&&(this.store.setItem(e,this.encodeValue(t)),this.callParent(arguments))},clear:function(e){this.store.removeItem(e),this.callParent(arguments)},getStorageObject:function(){var e=this.prefix,t=e,i=t.length-1;return"-"===t.charAt(i)&&(t=t.substring(0,i)),new Ext.util.LocalStorage({id:t,prefix:e})}}),Ext.define("Ext.tab.Tab",{extend:"Ext.button.Button",alias:"widget.tab",isTab:!0,baseCls:Ext.baseCSSPrefix+"tab",closeElOverCls:Ext.baseCSSPrefix+"tab-close-btn-over",closeElPressedCls:Ext.baseCSSPrefix+"tab-close-btn-pressed",config:{rotation:"default",tabPosition:"top"},closable:!0,closeText:"removable",active:!1,childEls:["closeEl"],scale:!1,ariaRole:"tab",tabIndex:-1,keyMap:{scope:"this",DELETE:"onDeleteKey"},_btnWrapCls:Ext.baseCSSPrefix+"tab-wrap",_btnCls:Ext.baseCSSPrefix+"tab-button",_baseIconCls:Ext.baseCSSPrefix+"tab-icon-el",_glyphCls:Ext.baseCSSPrefix+"tab-glyph",_innerCls:Ext.baseCSSPrefix+"tab-inner",_textCls:Ext.baseCSSPrefix+"tab-text",_noTextCls:Ext.baseCSSPrefix+"tab-no-text",_hasIconCls:Ext.baseCSSPrefix+"tab-icon",_activeCls:Ext.baseCSSPrefix+"tab-active",_closableCls:Ext.baseCSSPrefix+"tab-closable",overCls:Ext.baseCSSPrefix+"tab-over",_pressedCls:Ext.baseCSSPrefix+"tab-pressed",_disabledCls:Ext.baseCSSPrefix+"tab-disabled",_rotateClasses:{1:Ext.baseCSSPrefix+"tab-rotate-right",2:Ext.baseCSSPrefix+"tab-rotate-left"},_positions:{top:{default:"top",0:"top",1:"left",2:"right"},right:{default:"top",0:"right",1:"top",2:"bottom"},bottom:{default:"bottom",0:"bottom",1:"right",2:"left"},left:{default:"top",0:"left",1:"bottom",2:"top"}},_defaultRotations:{top:0,right:1,bottom:0,left:2},initComponent:function(){this.closable&&Ext.ariaWarn(this,"Closable tabs can be confusing to users relying on Assistive Technologies such as Screen Readers, and are not recommended in accessible applications. Please consider setting "+this.title+" tab ("+this.id+") to closable: false."),this.card&&this.setCard(this.card),this.callParent(arguments)},getActualRotation:function(){var e=this.getRotation();return"default"!==e?e:this._defaultRotations[this.getTabPosition()]},updateRotation:function(){this.syncRotationAndPosition()},updateTabPosition:function(){this.syncRotationAndPosition()},syncRotationAndPosition:function(){var e=this,t=e._rotateClasses,i=e.getTabPosition(),n=e.getActualRotation(),r=e._rotateCls,o=e._rotateCls=t[n],a=e._positionCls,s=e._positionCls=e._positions[i][n];r!==o&&(r&&e.removeCls(r),o&&e.addCls(o)),a!==s&&(a&&e.removeClsWithUI(a),s&&e.addClsWithUI(s),e.rendered&&e.updateFrame()),e.rendered&&e.setElOrientation()},onAdded:function(e,t,i){this.callParent([e,t,i]),this.syncRotationAndPosition()},getTemplateArgs:function(){var e=this.callParent();return e.closable=this.closable,e.closeText=this.closeText,e},beforeRender:function(){var e=this,t=e.up("tabbar"),i=e.up("tabpanel");e.callParent(),e.ariaRenderAttributes=e.ariaRenderAttributes||{},e.active?(e.ariaRenderAttributes["aria-selected"]=!0,e.addCls(e._activeCls)):e.ariaRenderAttributes["aria-selected"]=!1,e.syncClosableCls(),e.minWidth||(e.minWidth=t?t.minTabWidth:e.minWidth,!e.minWidth&&i&&(e.minWidth=i.minTabWidth),e.minWidth&&e.iconCls&&(e.minWidth+=25)),e.maxWidth||(e.maxWidth=t?t.maxTabWidth:e.maxWidth,!e.maxWidth&&i&&(e.maxWidth=i.maxTabWidth))},onRender:function(){this.setElOrientation(),this.callParent(arguments),this.closable&&(this.closeEl.addClsOnOver(this.closeElOverCls),this.closeEl.addClsOnClick(this.closeElPressedCls))},setElOrientation:function(){var e=this.getActualRotation(),t=this.el;e?t.setVertical(1===e?90:270):t.setHorizontal()},enable:function(e){return this.callParent(arguments),this.removeCls(this._disabledCls),this},disable:function(e){return this.callParent(arguments),this.addCls(this._disabledCls),this},setClosable:function(e){e=!arguments.length||!!e,this.closable!==e&&(this.closable=e,this.card&&(this.card.closable=e),this.syncClosableCls(),this.rendered&&(this.syncClosableElements(),this.updateLayout()))},syncClosableElements:function(){var e=this,t=e.closeEl;e.closable?((t=t||(e.closeEl=e.btnWrap.insertSibling({tag:"span",id:e.id+"-closeEl",cls:e.baseCls+"-close-btn",html:e.closeText},"after"))).addClsOnOver(e.closeElOverCls),t.addClsOnClick(e.closeElPressedCls)):t&&(t.destroy(),delete e.closeEl)},syncClosableCls:function(){var e=this._closableCls;this.closable?this.addCls(e):this.removeCls(e)},setCard:function(e){var t=this;(t.card=e).iconAlign&&t.setIconAlign(e.iconAlign),e.textAlign&&t.setTextAlign(e.textAlign),t.setText(t.title||e.title),t.setIconCls(t.iconCls||e.iconCls),t.setIcon(t.icon||e.icon),t.setGlyph(t.glyph||e.glyph)},onCloseClick:function(){if(!1!==this.fireEvent("beforeclose",this))if(this.tabBar){if(!1===this.tabBar.closeTab(this))return}else this.fireClose()},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(e){if(this.tabBar)return this.tabBar.onClick(e,this.el),e.stopEvent(),!1},onDeleteKey:function(e){if(this.closable)return this.onCloseClick(),e.stopEvent(),!1},beforeClick:function(e){e||this.focus()},activate:function(e){var t=this,i=t.card,n=t.ariaEl.dom;t.active=!0,t.addCls(t._activeCls),n?n.setAttribute("aria-selected",!0):(t.ariaRenderAttributes=t.ariaRenderAttributes||{},t.ariaRenderAttributes["aria-selected"]=!0),i&&(i.ariaEl.dom?i.ariaEl.dom.setAttribute("aria-expanded",!0):(i.ariaRenderAttributes=i.ariaRenderAttributes||{},i.ariaRenderAttributes["aria-expanded"]=!0)),!0!==e&&t.fireEvent("activate",t)},deactivate:function(e){var t=this,i=t.card,n=t.ariaEl.dom;t.active=!1,t.removeCls(t._activeCls),n?n.setAttribute("aria-selected",!1):(t.ariaRenderAttributes=t.ariaRenderAttributes||{},t.ariaRenderAttributes["aria-selected"]=!1),i&&(i.ariaEl.dom?i.ariaEl.dom.setAttribute("aria-expanded",!1):(i.ariaRenderAttributes=i.ariaRenderAttributes||{},i.ariaRenderAttributes["aria-expanded"]=!1)),!0!==e&&t.fireEvent("deactivate",t)},privates:{getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this._positionCls},wrapPrimaryEl:function(e){Ext.Button.superclass.wrapPrimaryEl.call(this,e)}}}),Ext.define("Ext.tab.Bar",{extend:"Ext.panel.Bar",xtype:"tabbar",requires:["Ext.tab.Tab","Ext.util.Point","Ext.layout.component.Body"],baseCls:Ext.baseCSSPrefix+"tab-bar",componentLayout:"body",isTabBar:!0,config:{tabRotation:"default",tabStretchMax:!0,activateOnFocus:!0},defaultType:"tab",plain:!1,ensureActiveVisibleOnChange:!0,ariaRole:"tablist",focusableContainer:!0,childEls:["body","strip"],_stripCls:Ext.baseCSSPrefix+"tab-bar-strip",_baseBodyCls:Ext.baseCSSPrefix+"tab-bar-body",renderTpl:'<tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'before\'); %}</tpl><div id="{id}-body" data-ref="body" role="presentation" class="{baseBodyCls} {baseBodyCls}-{ui} {bodyCls} {bodyTargetCls}{childElCls}"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>{%this.renderContainer(out,values)%}</div><tpl if="hasTabGuard">{% this.renderTabGuard(out, values, \'after\'); %}</tpl><div id="{id}-strip" data-ref="strip" role="presentation" class="{stripCls} {stripCls}-{ui}{childElCls}"></div>',_reverseDockNames:{left:"right",right:"left"},_layoutAlign:{top:"end",right:"begin",bottom:"begin",left:"end"},initComponent:function(){var e=this,t=e.initialConfig.layout,i=t&&t.align,n=t&&t.overflowHandler;e.plain&&e.addCls(e.baseCls+"-plain"),e.layout=Ext.apply({align:i||(e.getTabStretchMax()?"stretchmax":e._layoutAlign[e.dock]),overflowHandler:n||"scroller"},e.layout),e.callParent(),e.on({click:e.onClick,element:"el",scope:e})},ensureTabVisible:function(e){var t=this.tabPanel,i=this.layout.overflowHandler;this.rendered&&i&&this.tooNarrow&&i.scrollToItem&&(!e&&0!==e||e.isTab||(Ext.isNumber(e)?e=this.items.getAt(e):e.isComponent&&t&&t.items.contains(e)&&(e=e.tab)),(e=e||this.activeTab)&&i.scrollToItem(e))},initRenderData:function(){return Ext.apply(this.callParent(),{bodyCls:this.bodyCls,baseBodyCls:this._baseBodyCls,bodyTargetCls:this.bodyTargetCls,stripCls:this._stripCls,dock:this.dock})},setDock:function(e){var t,i,n,r=this.items,o=this.ownerCt;if(r=r&&r.items)for(i=0,n=r.length;i<n;i++)(t=r[i]).isTab&&t.setTabPosition(e);this.rendered&&(this.resetItemMargins(),o&&o.isHeader&&o.resetItemMargins(),this.needsScroll=!0),this.callParent([e])},updateTabRotation:function(e){var t,i,n,r=this.items;if(r=r&&r.items)for(t=0,i=r.length;t<i;t++)(n=r[t]).isTab&&n.setRotation(e);this.rendered&&(this.resetItemMargins(),this.needsScroll=!0,this.updateLayout())},onRender:function(){var e=this.layout.overflowHandler;this.callParent(),Ext.isIE8&&this.vertical&&this.el.on({mousemove:this.onMouseMove,scope:this}),e&&"menu"===e.type&&e.menu.on("click","onOverflowMenuItemClick",this)},afterLayout:function(){this.adjustTabPositions(),this.callParent(arguments)},onAdd:function(e,t){var i=this.onTabContentChange;this.ensureActiveVisibleOnChange&&(e.barListeners=e.on({scope:this,destroyable:!0,glyphchange:i,iconchange:i,textchange:i})),this.callParent([e,t])},onAdded:function(e,t,i){e.isHeader&&this.addCls(e.baseCls+"-"+e.ui+"-tab-bar"),this.callParent([e,t,i])},onRemove:function(e,t){this.ensureActiveVisibleOnChange&&(t||e.barListeners.destroy(),e.barListeners=null),e===this.previousTab&&(this.previousTab=null),this.callParent([e,t])},onRemoved:function(e){var t=this.ownerCt;t.isHeader&&this.removeCls(t.baseCls+"-"+t.ui+"-tab-bar"),this.callParent([e])},onTabContentChange:function(e){e===this.activeTab&&this.ensureTabVisible(e)},afterComponentLayout:function(e){var t=this.needsScroll,i=this.layout.overflowHandler;this.callParent(arguments),i&&t&&this.tooNarrow&&i.scrollToItem&&i.scrollToItem(this.activeTab),delete this.needsScroll},onMouseMove:function(e){var t,i=this._overTab;e.getTarget("."+Ext.baseCSSPrefix+"box-scroller")||(t=this.getTabInfoFromPoint(e.getXY()).tab)!==i&&(i&&i.rendered&&(i.onMouseLeave(e),this._overTab=null),t?(t.onMouseEnter(e),(this._overTab=t).disabled||this.el.setStyle("cursor","pointer")):this.el.setStyle("cursor","default"))},onMouseLeave:function(e){var t=this._overTab;t&&t.rendered&&t.onMouseLeave(e)},getTabInfoFromPoint:function(e){for(var t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m=this.items.items,x=m.length,y=this.layout.innerCt,v=y.getXY(),E=new Ext.util.Point(e[0],e[1]),b=0;b<x;b++)if((t=(p=m[b]).lastBox)&&p.isTab&&(d=v[0]+t.x,u=v[1]-y.dom.scrollTop+t.y,c=t.width,h=t.height,new Ext.util.Region(u,d+c,u+h,d).contains(E))){(i=p.closeEl)&&(void 0===this._isTabReversed&&(this._isTabReversed=f=-1!==p.btnWrap.dom.currentStyle.filter.indexOf("rotation=2")),g=f?this._reverseDockNames[this.dock]:this.dock,s=i.getWidth(),l=i.getHeight(),o=(r=this.getCloseXY(i,d,u,c,h,s,l,g))[0],a=r[1],n=new Ext.util.Region(a,o+s,a+l,o).contains(E));break}return{tab:p,close:n}},getCloseXY:function(e,t,i,n,r,o,a,s){var l,d,u=e.getXY();return d="right"===s?(l=t+n-(u[1]-i+a),i+(u[0]-t)):(l=t+(u[1]-i),i+t+r-u[0]-o),[l,d]},closeTab:function(e){var t,i=e.card,n=this.tabPanel;if(i&&!1===i.fireEvent("beforeclose",i))return!1;if(t=this.findNextActivatable(e),Ext.suspendLayouts(),t&&(n?n.setActiveTab(t.card):this.setActiveTab(t),t.focus()),n&&i){if(delete e.ownerCt,i.fireEvent("close",i),n.remove(i),i.ownerCt===n)return e.ownerCt=this,Ext.resumeLayouts(!0),!1;e.fireClose(),this.remove(e)}Ext.resumeLayouts(!0)},findNextActivatable:function(e){var t,i=this.previousTab;return e.active&&1<this.items.getCount()&&(t=i&&i!==e&&!i.disabled?i:e.next("tab[disabled=false]")||e.prev("tab[disabled=false]")),t||this.activeTab},setActiveTab:function(e,t){var i=this;e.disabled||e===i.activeTab||(i.activeTab&&(i.activeTab.destroyed?i.previousTab=null:(i.previousTab=i.activeTab,i.activeTab.deactivate(),i.deactivateFocusable(i.activeTab))),e.activate(),i.activateFocusable(e),i.activeTab=e,i.needsScroll=!0,t||(i.fireEvent("change",i,e,e.card),i.updateLayout()))},privates:{adjustTabPositions:function(){var e,t,i,n,r,o=this.items.items,a=o.length;if(!Ext.isIE8)for(r=this._getTabAdjustProp();a--;)i=(e=o[a]).el,t=e.lastBox,1===(n=e.isTab?e.getActualRotation():0)&&e.isVisible()?i.setStyle(r,t.x+t.width+"px"):2===n&&e.isVisible()&&i.setStyle(r,t.x-t.height+"px")},applyTargetCls:function(e){this.bodyTargetCls=e},_getTabAdjustProp:function(){return"left"},getTargetEl:function(){return this.body||this.frameBody||this.el},onClick:function(e,t){var i,n,r,o;e.getTarget("."+Ext.baseCSSPrefix+"box-scroller")||((r=Ext.isIE8&&this.vertical?(n=(o=this.getTabInfoFromPoint(e.getXY())).tab,o.close):(n=(i=e.getTarget("."+Ext.tab.Tab.prototype.baseCls))&&Ext.getCmp(i.id))&&n.closeEl&&t===n.closeEl.dom)&&e.preventDefault(),n&&n.isDisabled&&!n.isDisabled()&&(n.beforeClick(r),n.closable&&r?n.onCloseClick():this.doActivateTab(n)))},onOverflowMenuItemClick:function(e,t,i,n){var r=t&&t.masterComponent,o=this.layout.overflowHandler;r&&!r.isDisabled()&&(this.doActivateTab(r),o.menuTrigger&&o.menuTrigger.focus())},doActivateTab:function(e){var t=this.tabPanel;t?e.disabled||t.setActiveTab(e.card):this.setActiveTab(e)},onFocusableContainerFocus:function(e){var t;(t=this.mixins.focusablecontainer.onFocusableContainerFocus.call(this,e))&&t.isTab&&this.doActivateTab(t)},onFocusableContainerFocusEnter:function(e){var t;(t=this.mixins.focusablecontainer.onFocusableContainerFocusEnter.call(this,e))&&t.isTab&&this.doActivateTab(t)},focusChild:function(e,t){var i;i=this.mixins.focusablecontainer.focusChild.call(this,e,t),this.activateOnFocus&&i&&i.isTab&&this.doActivateTab(i)}}}),Ext.define("Ext.tab.Panel",{extend:"Ext.panel.Panel",alias:"widget.tabpanel",alternateClassName:["Ext.TabPanel"],requires:["Ext.layout.container.Card","Ext.tab.Bar"],config:{tabBar:void 0,tabPosition:"top",tabRotation:"default",tabStretchMax:!0},removePanelHeader:!0,plain:!1,itemCls:Ext.baseCSSPrefix+"tabpanel-child",minTabWidth:void 0,maxTabWidth:void 0,deferredRender:!0,_defaultTabRotation:{top:0,right:1,bottom:0,left:2},initComponent:function(){var e,t=this,i=null!==t.activeTab?t.activeTab||0:null,n=t.dockedItems,r=t.header,o=t.tabBarHeaderPosition,a=t.getTabBar();t.layout=Ext.apply({type:"card",deferredRender:t.deferredRender,itemCls:t.itemCls,activeItem:i},t.layout),null!=o?(e=(r=t.header=Ext.apply({},r)).items=r.items?r.items.slice():[],r.itemPosition=o,e.push(a),r.hasTabBar=!0):((n=[].concat(t.dockedItems||[])).push(a),t.dockedItems=n),t.callParent(arguments),(i=t.activeTab=t.getComponent(i))&&a.setActiveTab(i.tab,!0)},onRender:function(){var e,t=this.items.items,i=t.length;for(this.callParent(arguments),e=0;e<i;++e)t[e].getBind()},setActiveTab:function(e){var t,i=this;return Ext.isObject(e)&&!e.isComponent||(e=i.getComponent(e)),t=i.getActiveTab(),e?(Ext.suspendLayouts(),e.isComponent||(e=i.add(e)),t===e||!1===i.fireEvent("beforetabchange",i,e,t)?(Ext.resumeLayouts(!0),t):(i.activeTab=e,i.layout.setActiveItem(e),(e=i.activeTab=i.layout.getActiveItem())&&e!==t?(i.tabBar.setActiveTab(e.tab),Ext.resumeLayouts(!0),t!==e&&i.fireEvent("tabchange",i,e,t)):Ext.resumeLayouts(!0),e)):t},setActiveItem:function(e){return this.setActiveTab(e)},getActiveTab:function(){var e=this.getComponent(this.activeTab);return e&&-1!==this.items.indexOf(e)?this.activeTab=e:this.activeTab=void 0,this.activeTab},applyTabBar:function(e){var t=null!=this.tabBarHeaderPosition?this.getHeaderPosition():this.getTabPosition();return new Ext.tab.Bar(Ext.apply({ui:this.ui,dock:t,tabRotation:this.getTabRotation(),vertical:"left"===t||"right"===t,plain:this.plain,tabStretchMax:this.getTabStretchMax(),tabPanel:this},e))},updateHeaderPosition:function(e,t){var i=this.getTabBar();i&&null!=this.tabBarHeaderPosition&&i.setDock(e),this.callParent([e,t])},updateTabPosition:function(e){var t=this.getTabBar();t&&null==this.tabBarHeaderPosition&&t.setDock(e)},updateTabRotation:function(e){var t=this.getTabBar();t&&t.setTabRotation(e)},onAdd:function(e,t){var i,n=this,r=Ext.apply({},e.tabConfig),o=n.getTabBar(),a={xtype:"tab",title:e.title,icon:e.icon,iconCls:e.iconCls,glyph:e.glyph,ui:o.ui,card:e,disabled:e.disabled,closable:e.closable,hidden:e.hidden&&!e.hiddenByLayout,tooltip:e.tooltip,tabBar:o,tabPosition:o.dock,rotation:o.getTabRotation()};void 0!==e.closeText&&(a.closeText=e.closeText),r=Ext.applyIf(r,a),e.tab=n.tabBar.insert(t,r),e.ariaRole="tabpanel",(i=e.ariaEl.dom)?i.setAttribute("aria-labelledby",e.tab.id):(e.ariaRenderAttributes=e.ariaRenderAttributes||{},e.ariaRenderAttributes["aria-labelledby"]=e.tab.id),e.on({scope:n,enable:n.onItemEnable,disable:n.onItemDisable,beforeshow:n.onItemBeforeShow,iconchange:n.onItemIconChange,iconclschange:n.onItemIconClsChange,glyphchange:n.onItemGlyphChange,titlechange:n.onItemTitleChange}),e.isPanel&&(n.removePanelHeader&&(e.rendered?e.header&&e.header.hide():e.header=!1),e.isPanel&&n.border&&e.setBorder(!1)),n.rendered&&e.getBind(),n.rendered&&n.loader&&void 0===n.activeTab&&null!==n.layout.activeItem&&n.setActiveTab(0)},onMove:function(e,t,i){var n=this.getTabBar();this.callParent([e,t,i]),n.items.indexOf(e.tab)!==i&&n.move(e.tab,i)},onItemEnable:function(e){e.tab.enable()},onItemDisable:function(e){e.tab.disable()},onItemBeforeShow:function(e){if(e!==this.activeTab)return this.setActiveTab(e),!1},onItemGlyphChange:function(e,t){e.tab.setGlyph(t)},onItemIconChange:function(e,t){e.tab.setIcon(t)},onItemIconClsChange:function(e,t){e.tab.setIconCls(t)},onItemTitleChange:function(e,t){e.tab.setText(t)},onRemove:function(e,t){var i=this;e.un({scope:i,enable:i.onItemEnable,disable:i.onItemDisable,beforeshow:i.onItemBeforeShow,iconchange:i.onItemIconChange,iconclschange:i.onItemIconClsChange,glyphchange:i.onItemGlyphChange,titlechange:i.onItemTitleChange}),e.tab&&!i.destroying&&e.tab.ownerCt===i.tabBar&&i.tabBar.remove(e.tab)},enable:function(){var e=null!==this.activeTab?this.activeTab||0:null,t=this.disabled;return this.callParent(arguments),t&&(e=e.isComponent?e:this.getComponent(e))&&this.getTabBar().setActiveTab(e.tab),this},privates:{doRemove:function(e,t){var i;Ext.suspendLayouts(),this.removingAll||this.destroying||1===this.items.getCount()?this.activeTab=null:e.tab&&-1!==(i=this.tabBar.items.indexOf(this.tabBar.findNextActivatable(e.tab)))&&this.setActiveTab(i),this.callParent([e,t]),Ext.resumeLayouts(),e.tab&&(delete e.tab.card,delete e.tab)}}}),Ext.define("Ext.toolbar.Breadcrumb",{extend:"Ext.container.Container",xtype:"breadcrumb",requires:["Ext.data.TreeStore","Ext.button.Split"],isBreadcrumb:!0,baseCls:Ext.baseCSSPrefix+"breadcrumb",layout:{type:"hbox",align:"middle"},config:{buttonUI:"plain-toolbar",displayField:"text",overflowHandler:null,showIcons:null,showMenuIcons:null,store:null,useSplitButtons:!0},renderConfig:{selection:"root"},publishes:["selection"],twoWayBindable:["selection"],_breadcrumbCls:Ext.baseCSSPrefix+"breadcrumb",_btnCls:Ext.baseCSSPrefix+"breadcrumb-btn",_folderIconCls:Ext.baseCSSPrefix+"breadcrumb-icon-folder",_leafIconCls:Ext.baseCSSPrefix+"breadcrumb-icon-leaf",focusableContainer:!0,initComponent:function(){var e=this,t=e.layout,i=e.getOverflowHandler();"string"==typeof t&&(t={type:t}),i&&(t.overflowHandler=i),e.layout=t,e.defaultButtonUI=e.getButtonUI(),e._buttons=[],e.addCls([e._breadcrumbCls,e._breadcrumbCls+"-"+e.ui]),e.callParent()},doDestroy:function(){Ext.destroy(this._buttons),this.setStore(null),this.callParent()},onRemove:function(e,t){this.callParent([e,t]),delete e._breadcrumbNodeId},afterComponentLayout:function(){var e=this.layout.overflowHandler;this.callParent(arguments),e&&this.tooNarrow&&e.scrollToItem&&e.scrollToItem(this.getSelection().get("depth"))},applySelection:function(e){return e=this.getStore()?"root"===e?this.getStore().getRoot():e:null},updateSelection:function(e,t){var i,n,r,o,a,s,l,d,u,c,h,f=this,g=f._buttons,p=[],m=Ext.ComponentQuery.query("[isCrumb]",f.getRefItems()).length,x=f._needsSync,y=f.getDisplayField();if(Ext.suspendLayouts(),e){for(a=(c=(s=e).get("depth"))+1,h=c;s&&(u=s.getId(),d=g[h],x||!d||d._breadcrumbNodeId!==u);)l=s.get(y),d?d.setText(l):d=g[h]=Ext.create({isCrumb:!0,xtype:f.getUseSplitButtons()?"splitbutton":"button",ui:f.getButtonUI(),componentCls:f._btnCls+" "+f._btnCls+"-"+f.ui,separateArrowStyling:!1,text:l,showEmptyMenu:!0,menu:{listeners:{click:"_onMenuClick",beforeshow:"_onMenuBeforeShow",scope:this}},handler:"_onButtonClick",scope:f}),!1!==(i=this.getShowIcons())&&(n=s.get("glyph"),o=s.get("icon"),r=s.get("iconCls"),n?(d.setGlyph(n),d.setIcon(null),d.setIconCls(r)):o?(d.setGlyph(null),d.setIconCls(null),d.setIcon(o)):r?(d.setGlyph(null),d.setIcon(null),d.setIconCls(r)):i?(d.setGlyph(null),d.setIcon(null),d.setIconCls((s.isLeaf()?f._leafIconCls:f._folderIconCls)+"-"+f.ui)):(d.setGlyph(null),d.setIcon(null),d.setIconCls(null))),d.setArrowVisible(s.hasChildNodes()),d._breadcrumbNodeId=s.getId(),s=s.parentNode,h--;if(m<a)p=g.slice(m,c+1),f.add(p);else for(h=m-1;a<=h;h--)f.remove(g[h],!1)}else for(h=0;h<g.length;h++)f.remove(g[h],!1);Ext.resumeLayouts(!0),f.fireEvent("selectionchange",f,e,t),f._shouldFireChangeEvent&&f.fireEvent("change",f,e,t),f._shouldFireChangeEvent=!0,f._needsSync=!1},applyUseSplitButtons:function(e,t){return this.rendered&&e!==t&&Ext.raise("Cannot reconfigure 'useSplitButtons' config of Ext.toolbar.Breadcrumb after initial render"),e},applyStore:function(e){return e=e&&Ext.data.StoreManager.lookup(e)},updateStore:function(e,t){this._needsSync=!0,e&&!this.isConfiguring&&this.setSelection(e.getRoot())},updateOverflowHandler:function(e){"menu"===e&&Ext.raise("Using Menu overflow with breadcrumb is not currently supported.")},privates:{_onButtonClick:function(e,t){this.getUseSplitButtons()&&this.setSelection(this.getStore().getNodeById(e._breadcrumbNodeId))},_onMenuClick:function(e,t,i){t&&(t=this.getStore().getNodeById(t._breadcrumbNodeId),this.setSelection(t),(t=this._buttons[t.getDepth()])&&t.focus())},_onMenuBeforeShow:function(e){var t,i,n,r,o,a,s,l,d,u=this.getStore().getNodeById(e.ownerCmp._breadcrumbNodeId),c=this.getDisplayField(),h=this.getShowMenuIcons();if(!u.hasChildNodes())return!1;for(r=[],o=0,l=(t=u.childNodes).length;o<l;o++)!(d={text:(i=t[o]).get(c),_breadcrumbNodeId:i.getId()})!==h&&(n=i.get("glyph"),a=i.get("icon"),s=i.get("iconCls"),n?(d.glyph=n,d.iconCls=s):a?d.icon=a:s?d.iconCls=s:h&&(d.iconCls=(i.isLeaf()?this._leafIconCls:this._folderIconCls)+"-"+this.ui)),r.push(d);e.removeAll(),e.add(r)}}}),Ext.define("Ext.toolbar.Fill",{extend:"Ext.Component",alias:"widget.tbfill",alternateClassName:"Ext.Toolbar.Fill",requires:["Ext.toolbar.Toolbar"],ariaRole:"presentation",isFill:!0,flex:1}),Ext.define("Ext.toolbar.Spacer",{extend:"Ext.Component",alias:"widget.tbspacer",alternateClassName:"Ext.Toolbar.Spacer",requires:["Ext.toolbar.Toolbar"],baseCls:Ext.baseCSSPrefix+"toolbar-spacer",ariaRole:"presentation"}),Ext.define("Ext.tree.Column",{extend:"Ext.grid.column.Column",alias:"widget.treecolumn",tdCls:Ext.baseCSSPrefix+"grid-cell-treecolumn",autoLock:!0,lockable:!1,draggable:!1,hideable:!1,iconCls:Ext.baseCSSPrefix+"tree-icon",checkboxCls:Ext.baseCSSPrefix+"tree-checkbox",elbowCls:Ext.baseCSSPrefix+"tree-elbow",expanderCls:Ext.baseCSSPrefix+"tree-expander",textCls:Ext.baseCSSPrefix+"tree-node-text",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-treecolumn",customIconCls:Ext.baseCSSPrefix+"tree-icon-custom",isTreeColumn:!0,cellTpl:['<tpl for="lines">','<div class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"></div>',"</tpl>",'<div class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"></div>','<tpl if="checked !== null">','<div role="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"></div>',"</tpl>",'<tpl if="glyph">','<span class="{baseIconCls}" ','<tpl if="glyphFontFamily">','style="font-family:{glyphFontFamily}"',"</tpl>",">{glyph}</span>","<tpl else>",'<tpl if="icon">','<img src="{blankUrl}"',"<tpl else>","<div","</tpl>",' role="presentation" class="{childCls} {baseIconCls} {customIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else><tpl if="expanded">parent-expanded<tpl else>parent</tpl></tpl> {iconCls}" ','<tpl if="icon">style="background-image:url({icon})"/><tpl else>></div></tpl>',"</tpl>",'<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>',"<tpl else>",'<span class="{textCls} {childCls}">{value}</span>',"</tpl>"],uiFields:{checked:1,icon:1,iconCls:1},rowFields:{expanded:1,loaded:1,expandable:1,leaf:1,loading:1,qtip:1,qtitle:1,cls:1},initComponent:function(){var e=this;e.rendererScope=e.scope,e.setupRenderer(),e.innerRenderer=e.renderer,e.renderer=e.treeRenderer,e.callParent(),e.scope=e},treeRenderer:function(e,t,i,n,r,o,a){var s,l=i.get("cls");return t&&l&&(t.tdCls+=" "+l),s=this.initTemplateRendererData(e,t,i,n,r,o,a),this.lookupTpl("cellTpl").apply(s)},initTemplateRendererData:function(e,t,i,n,r,o,a){for(var s,l,d,u=this,c=u.innerRenderer,h=i.data,f=i.parentNode,g=a.rootVisible,p=[];f&&(g||0<f.data.depth);)s=f.data,p[g?s.depth:s.depth-1]=f.isLastVisible()?0:1,f=f.parentNode;return t?t.iconCls=t.icon=t.glyph=null:t={},e=c?c.apply(u.rendererScope,arguments):e,(l=t.glyph||h.glyph)&&(d=(l=Ext.Glyph.fly(l)).fontFamily,l=l.character),{record:i,baseIconCls:u.iconCls,customIconCls:h.icon||h.iconCls?u.customIconCls:"",glyph:l,glyphFontFamily:d,iconCls:t.iconCls||h.iconCls,icon:t.icon||h.icon,checkboxCls:u.checkboxCls,checked:h.checked,elbowCls:u.elbowCls,expanderCls:u.expanderCls,textCls:u.textCls,leaf:h.leaf,expandable:i.isExpandable(),expanded:h.expanded,isLast:i.isLastVisible(),blankUrl:Ext.BLANK_IMAGE_URL,href:h.href,hrefTarget:h.hrefTarget,lines:p,metaData:t,childCls:u.getChildCls?u.getChildCls()+" ":"",value:e||o.defaultRootText}},shouldUpdateCell:function(e,t){var i,n,r=0;if(this.hasCustomRenderer)return 1;if(t)for(i=t.length;r<i;++r){if(n=t[r],this.rowFields[n])return 1;if(this.uiFields[n])return 2}return this.callParent([e,t])},privates:{shouldFlagCustomRenderer:function(){return this.hasCustomRenderer||this.innerRenderer&&1<this.innerRenderer.length}}}),Ext.define("Ext.tree.NavigationModel",{extend:"Ext.grid.NavigationModel",alias:"view.navigation.tree",initKeyNav:function(e){var t=this.view.ownerGrid.columns;this.isTreeGrid=t&&1<t.length,this.callParent([e]),this.view.grid.on({columnschanged:this.onColumnsChanged,scope:this})},onKeyNavCreate:function(e){var t=this.onAsterisk;e.map.addBinding([{key:"8",shift:!0,handler:t,scope:this},{key:Ext.event.Event.NUM_MULTIPLY,handler:t,scope:this}])},onColumnsChanged:function(){this.isTreeGrid=1<this.view.ownerGrid.getVisibleColumnManager().getColumns().length},onCellClick:function(e,t,i,n,r,o,a){return this.callParent([e,t,i,n,r,o,a]),!a.nodeToggled},onKeyLeft:function(e){var t=e.view,i=this.record;if(this.isTreeGrid&&!e.ctrlKey)return this.callParent([e]);e.position.column.isTreeColumn&&i.isExpanded()?t.collapse(i):!(i=i.parentNode)||i.isRoot()&&!t.rootVisible||this.setPosition(i,null,e)},onKeyRight:function(e){var t=this.record;if(this.isTreeGrid&&!e.ctrlKey)return this.callParent([e]);t.isLeaf()||(e.position.column.isTreeColumn&&!t.isExpanded()?e.view.expand(t):t.isExpanded()&&(t=t.childNodes[0])&&this.setPosition(t))},onKeyEnter:function(e){null!=this.record.data.checked?this.toggleCheck(e):this.callParent([e])},onKeySpace:function(e){null!=this.record.data.checked?this.toggleCheck(e):this.callParent([e])},toggleCheck:function(e){this.view.onCheckChange(e)},onAsterisk:function(e){this.view.ownerGrid.expandAll()}}),Ext.define("Ext.tree.View",{extend:"Ext.view.Table",alias:"widget.treeview",config:{selectionModel:{type:"treemodel"}},isTreeView:!0,loadingCls:Ext.baseCSSPrefix+"grid-tree-loading",expandedCls:Ext.baseCSSPrefix+"grid-tree-node-expanded",leafCls:Ext.baseCSSPrefix+"grid-tree-node-leaf",expanderSelector:"."+Ext.baseCSSPrefix+"tree-expander",checkboxSelector:"."+Ext.baseCSSPrefix+"tree-checkbox",expanderIconOverCls:Ext.baseCSSPrefix+"tree-expander-over",nodeAnimWrapCls:Ext.baseCSSPrefix+"tree-animator-wrap",loadMask:!1,rootVisible:!0,expandDuration:250,collapseDuration:250,toggleOnDblClick:!0,stripeRows:!1,treeRowTpl:["{%","this.processRowValues(values);","this.nextTpl.applyOut(values, out, parent);","%}",{priority:10,processRowValues:function(e){var t=e.record,i=e.view;e.rowAttr["data-qtip"]=t.get("qtip")||"",e.rowAttr["data-qtitle"]=t.get("qtitle")||"",e.rowAttr["aria-level"]=t.getDepth()+1,t.isLeaf()?e.rowClasses.push(i.leafCls):t.isExpanded()?(e.rowClasses.push(i.expandedCls),e.rowAttr["aria-expanded"]=!0):e.rowAttr["aria-expanded"]=!1,t.isLoading()&&e.rowClasses.push(i.loadingCls)}}],initComponent:function(){var e=this;e.bufferedRenderer?e.animate=!1:void 0===e.initialConfig.animate&&(e.animate=Ext.enableFx),e.store=e.panel.getStore(),e.onRootChange(e.store.getRoot()),e.animQueue={},e.animWraps={},e.callParent(),e.store.setRootVisible(e.rootVisible),e.addRowTpl(e.lookupTpl("treeRowTpl"))},onFillComplete:function(e,t,i){var n=this.store.indexOf(i[0]);t.triggerUIUpdate(),i.length&&-1!==n&&(this.onAdd(this.store,i,n),this.refreshPartner())},refreshPartner:function(){var e=this.lockingPartner;e&&e.refresh()},afterRender:function(){this.callParent(),this.el.on({scope:this,delegate:this.expanderSelector,mouseover:this.onExpanderMouseOver,mouseout:this.onExpanderMouseOut})},processUIEvent:function(e){return!e.getTarget("."+this.nodeAnimWrapCls,this.el)&&this.callParent([e])},setRootNode:function(e){this.node=e},getChecked:function(){var t=[];return this.node.cascade(function(e){e.get("checked")&&t.push(e)}),t},isItemChecked:function(e){return e.get("checked")},createAnimWrap:function(e,t){var i,n=this.getNode(e);return{record:e,node:n,el:i=Ext.fly(n).insertSibling({role:"presentation",tag:"div",cls:this.nodeAnimWrapCls},"after"),expanding:!1,collapsing:!1,animateEl:i,targetEl:i}},getAnimWrap:function(e,t){if(!this.animate)return null;var i=this.animWraps,n=i[e.internalId];if(!1!==t)for(;!n&&e;)(e=e.parentNode)&&(n=i[e.internalId]);return n},doAdd:function(e,t){var i,n,r,o,a,s,l=e[0].parentNode,d=this.all,u=this.getAnimWrap(l);return u&&u.expanding?(s=(a=this.bufferRender(e,t,!0)).children,l=u.record,o=(r=(n=u.targetEl).dom.childNodes).length,i=t-this.indexInStore(l)-1,!o||o<=i?n.appendChild(a.fragment,!0):Ext.fly(r[i]).insertSibling(s,"before",!0),d.insert(t,s),s):this.callParent([e,t])},onRemove:function(e,t,i){var n,r,o;if(this.viewReady){if(n=0===this.store.getCount(),this.bufferedRenderer)return this.callParent([e,t,i]);if(o=this.all.slice(i,i+t.length),n)this.refresh();else{for(i+=r=t.length-1;0<=r;--r,--i)this.doRemove(t[r],i);this.refreshSizePending=!0}this.fireItemMutationEvent("itemremove",t,i,o,this)}},doRemove:function(e,t){var i=this.all,n=this.getAnimWrap(e),r=i.item(t),o=r?r.dom:null;if(!o||!n||!n.collapsing)return this.callParent([e,t]);n.targetEl.dom.insertBefore(o,n.targetEl.dom.firstChild),i.removeElement(t)},onBeforeExpand:function(e,t,i){var n;this.rendered&&this.all.getCount()&&this.animate&&this.getNode(e)&&((n=this.getAnimWrap(e,!1))?n.collapsing&&n.targetEl.select(this.itemSelector).destroy():(n=this.animWraps[e.internalId]=this.createAnimWrap(e)).animateEl.setHeight(0),n.expanding=!0,n.collapsing=!1)},onExpand:function(e){var i,t,n,r=this,o=r.animQueue,a=e.getId(),s=r.getNode(e),l=s?r.indexOf(s):-1;if(r.singleExpand&&r.ensureSingleExpand(e),-1!==l){if(!(i=r.getAnimWrap(e,!1)))return e.isExpandingOrCollapsing=!1,void r.fireEvent("afteritemexpand",e,l,s);t=i.animateEl,n=i.targetEl,t.stopAnimation(),o[a]=!0,Ext.on("idle",function(){t.dom.style.height="0px"},null,{single:!0}),t.animate({from:{height:0},to:{height:n.dom.scrollHeight},duration:r.expandDuration,listeners:{afteranimate:function(){var e=n.dom.childNodes,t=Ext.Element.getActiveElement();e.length&&(n.contains(t)||(t=null),i.el.insertSibling(e,"before",!0),t&&Ext.fly(t).focus()),i.el.destroy(),o[a]=null,r.destroyed||(r.animWraps[i.record.internalId]=null)}},callback:function(){e.isExpandingOrCollapsing=!1,r.destroyed||r.refreshSize(!0),r.fireEvent("afteritemexpand",e,l,s)}})}},onBeforeCollapse:function(e,t,i,n,r){var o;this.rendered&&this.all.getCount()&&(this.animate?e.getTreeStore().isVisible(e)&&((o=this.getAnimWrap(e))?o.expanding&&o.targetEl.select(this.itemSelector).destroy():o=this.animWraps[e.internalId]=this.createAnimWrap(e,i),o.expanding=!1,o.collapsing=!0,o.callback=n,o.scope=r):(this.onCollapseCallback=n,this.onCollapseScope=r))},onCollapse:function(e){var t,i=this,n=i.animQueue,r=e.getId(),o=i.getNode(e),a=o?i.indexOf(o):-1,s=i.getAnimWrap(e);if(i.all.getCount()&&e.isVisible()){if(!s)return e.isExpandingOrCollapsing=!1,i.fireEvent("afteritemcollapse",e,a,o),Ext.callback(i.onCollapseCallback,i.onCollapseScope),void(i.onCollapseCallback=i.onCollapseScope=null);t=s.animateEl,n[r]=!0,t.stopAnimation(),t.animate({to:{height:0},duration:i.collapseDuration,listeners:{afteranimate:function(){s.el.destroy(),n[r]=null,i.destroyed||(i.animWraps[s.record.internalId]=null)}},callback:function(){e.isExpandingOrCollapsing=!1,i.destroyed||i.refreshSize(!0),i.fireEvent("afteritemcollapse",e,a,o),Ext.callback(s.callback,s.scope),s.callback=s.scope=null}})}},isAnimating:function(e){return!!this.animQueue[e.getId()]},expand:function(e,t,i,n){var r,o=!!this.animate;if(!o||!e.isExpandingOrCollapsing)return e.isLeaf()||(e.isExpandingOrCollapsing=o),Ext.suspendLayouts(),r=e.expand(t,i,n),Ext.resumeLayouts(!0),r},collapse:function(e,t,i,n){var r=!!this.animate;if(!r||!e.isExpandingOrCollapsing)return e.isLeaf()||(e.isExpandingOrCollapsing=r),e.collapse(t,i,n)},toggle:function(e,t,i,n){e.isExpanded()?this.collapse(e,t,i,n):this.expand(e,t,i,n)},onItemDblClick:function(e,t,i,n){var r=this.editingPlugin;this.callParent([e,t,i,n]),!this.toggleOnDblClick||!e.isExpandable()||r&&2===r.clicksToEdit||this.toggle(e)},onCellClick:function(e,t,i,n,r,o){var a=o.position.column;if(a.isTreeColumn)return o.getTarget(this.checkboxSelector,e)&&null!=i.get("checked")?(this.onCheckChange(o),a.stopSelection&&(o.stopSelection=!0)):o.getTarget(this.expanderSelector,e)&&i.isExpandable()&&(this.getNavigationModel().setPosition(o.position),this.toggle(i,o.ctrlKey),o.nodeToggled=!0),this.callParent([e,t,i,n,r,o])},onCheckChange:function(e){var t,i=e.record,n=i.get("checked");t=1===n||!n,this.setChecked(i,t,e)},setChecked:function(e,t,i,n){var r,o,a,s,l,d,u,c=this.checkPropagationFlags[this.ownerGrid.checkPropagation.toLowerCase()],h=e.data.checked,f=!!this.ownerGrid.triStateCheckbox&&1,g=(!n||!1!==n.propagateCheck)&&1&c,p=(!n||!1!==n.checkParent)&&2&c,m=0;if(!1!==this.fireEvent("beforecheckchange",e,h,i)){if(1!==t&&g){for(d=(l=e.childNodes).length,u=0;u<d;u++)this.setChecked(l[u],t,i,{checkParent:!1}),l[u].get("checked")===t&&m++;m!==d&&(t=!!m&&f)}if(e.get("checked")!==t&&(e.set("checked",t,n),this.fireEvent("checkchange",e,t,i),p&&(r=e.parentNode)&&null!=(o=r.data.checked))){if(d=(l=r.childNodes).length,t===f)o=f;else if(1===d)o=t;else{for(a=s=!1,u=0;!(a&&s)&u<d;u++)1===l[u].data.checked?a=s=!0:l[u].data.checked?a=!0:s=!0;o=a&&s?f:!!a}r.get("checked")!==o&&this.setChecked(r,o,i,{propagateCheck:!1})}}},onExpanderMouseOver:function(e){Ext.fly(e.getTarget(this.cellSelector,10)).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(e){Ext.fly(e.getTarget(this.cellSelector,10)).removeCls(this.expanderIconOverCls)},getStoreListeners:function(){return Ext.apply(this.callParent(),{rootchange:this.onRootChange,fillcomplete:this.onFillComplete})},onBindStore:function(e,t,i,n){var r=n&&n.getRootNode(),o=e&&e.getRootNode();this.callParent([e,t,i,n]),o!==r&&this.onRootChange(o,r)},onRootChange:function(e,t){var i=this.grid;t&&(this.rootListeners.destroy(),this.rootListeners=null),e&&(this.rootListeners=e.on({beforeexpand:this.onBeforeExpand,expand:this.onExpand,beforecollapse:this.onBeforeCollapse,collapse:this.onCollapse,destroyable:!0,scope:this}),i.addRelayers(e))},ensureSingleExpand:function(t){var e=t.parentNode;e&&e.eachChild(function(e){e!==t&&e.isExpanded()&&e.collapse()})},privates:{checkPropagationFlags:{none:0,down:1,up:2,both:3},deferRefreshForLoad:function(e){var t,i,n=this.callParent([e]);return n&&(i=(t=e.lastOptions)&&t.node)&&i!==e.getRoot()&&(n=!1),n}}}),Ext.define("Ext.tree.Panel",{extend:"Ext.panel.Table",alias:"widget.treepanel",alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],requires:["Ext.tree.View","Ext.selection.TreeModel","Ext.tree.Column","Ext.data.TreeStore","Ext.tree.NavigationModel"],viewType:"treeview",treeCls:Ext.baseCSSPrefix+"tree-panel",rowLines:!1,lines:!0,useArrows:!1,singleExpand:!1,ddConfig:{enableDrag:!0,enableDrop:!0},ariaRole:"treegrid",rootVisible:!0,displayField:"text",root:null,checkPropagation:"none",normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],isTree:!0,arrowCls:Ext.baseCSSPrefix+"tree-arrows",linesCls:Ext.baseCSSPrefix+"tree-lines",noLinesCls:Ext.baseCSSPrefix+"tree-no-lines",autoWidthCls:Ext.baseCSSPrefix+"autowidth-table",constructor:function(e){void 0===(e=e||{}).animate&&(e.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx),this.enableAnimations=e.animate,delete e.animate,this.callParent([e])},initComponent:function(){var e,t,i,n=this,r=[n.treeCls];n.useArrows&&(r.push(n.arrowCls),n.lines=!1),n.lines?r.push(n.linesCls):n.useArrows||r.push(n.noLinesCls),(e=n.applyStore(n.store)).getRoot()||e.setRoot({}),e.setRootVisible(n.rootVisible),n.columns||(n.isAutoTree=t=!0),n.viewConfig=Ext.apply({rootVisible:n.rootVisible,animate:n.enableAnimations,singleExpand:n.singleExpand,node:e.getRoot(),navigationModel:"tree",isAutoTree:t},n.viewConfig),t&&(n.addCls(n.autoWidthCls),n.columns=[{xtype:"treecolumn",text:!0===n.hideHeaders?"Name":null,flex:1,dataIndex:n.displayField}]),n.cls&&r.push(n.cls),n.cls=r.join(" "),n.callParent(),i=n.getView(),n.relayEvents(i,["beforecheckchange","checkchange","afteritemexpand","afteritemcollapse"])},applyStore:function(e){var t=this;return Ext.isString(e)?e=t.store=Ext.StoreMgr.lookup(e):e&&e.isStore?t.root&&((e=t.store=Ext.data.StoreManager.lookup(e)).setRoot(t.root),void 0!==t.folderSort&&(e.folderSort=t.folderSort,e.sort())):(e=Ext.apply({type:"tree",proxy:"memory"},e),t.root&&(e.root=t.root),t.fields?e.fields=t.fields:t.model&&(e.model=t.model),t.folderSort&&(e.folderSort=t.folderSort),e=t.store=Ext.StoreMgr.lookup(e)),e},setRoot:function(e){this.store.setRoot(e)},setStore:function(e){(e=this.applyStore(e)).getRoot()||e.setRoot({}),e.setRootVisible(this.rootVisible),this.enableLocking?this.reconfigure(e):(this.view&&this.view.setRootNode(e.getRootNode()),this.bindStore(e))},bindStore:function(e,t){var i=this,n=e.getRoot();i.callParent(arguments),e.singleExpand=i.singleExpand,i.storeListeners=i.mon(e,{destroyable:!0,rootchange:i.onRootChange,scope:i}),i.storeRelayers=i.relayEvents(e,["beforeload","load"]),i.rootVisible||e.autoLoad||n.isExpanded()||n.isLoading()||(n.isLoaded()?(n.data.expanded=!0,e.onNodeExpand(n,n.childNodes)):!1===e.autoLoad||e.hasPendingLoad()||(n.data.expanded=!1,n.expand())),e.ownerTree=i,t||i.view.setRootNode(n)},addRelayers:function(e){var t=this;t.rootRelayers&&(t.rootRelayers.destroy(),t.rootRelayers=null),t.rootRelayers=t.mon(e,{destroyable:!0,append:t.createRelayer("itemappend"),remove:t.createRelayer("itemremove"),move:t.createRelayer("itemmove",[0,4]),insert:t.createRelayer("iteminsert"),beforeappend:t.createRelayer("beforeitemappend"),beforeremove:t.createRelayer("beforeitemremove"),beforemove:t.createRelayer("beforeitemmove"),beforeinsert:t.createRelayer("beforeiteminsert"),expand:t.createRelayer("itemexpand",[0,1]),collapse:t.createRelayer("itemcollapse",[0,1]),beforeexpand:t.createRelayer("beforeitemexpand",[0,1]),beforecollapse:t.createRelayer("beforeitemcollapse",[0,1]),scope:t})},unbindStore:function(){var e=this.store;e&&(this.callParent(),Ext.destroy(this.storeListeners,this.storeRelayers,this.rootRelayers),delete e.ownerTree,e.singleExpand=null)},setRootNode:function(){return this.store.setRoot.apply(this.store,arguments)},getRootNode:function(){return this.store.getRoot()},onRootChange:function(e){this.view.setRootNode(e)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(e){return e.get("checked")},expandNode:function(e,t,i,n){return this.getView().expand(e,t,i,n||this)},collapseNode:function(e,t,i,n){return this.getView().collapse(e,t,i,n||this)},expandAll:function(e,t){var i=this.getRootNode();i&&(Ext.suspendLayouts(),i.expand(!0,e,t||this),Ext.resumeLayouts(!0))},collapseAll:function(e,t){var i=this.getRootNode(),n=this.getView();i&&(Ext.suspendLayouts(),t=t||this,n.rootVisible?i.collapse(!0,e,t):i.collapseChildren(!0,e,t),Ext.resumeLayouts(!0))},expandPath:function(e,t){var o,a,s,l,i,d,u,n,c,r=arguments,h=this,f=h.view,g=t&&t.field||h.store.model.idProperty,p=t&&t.separator||"/";return t&&"object"==typeof t?(g=t.field||h.store.model.idProperty,p=t.separator||"/",s=t.callback,l=t.scope,o=t.select,a=t.focus):(g=r[1]||h.store.model.idProperty,p=r[2]||"/",s=r[3],l=r[4]),Ext.isEmpty(e)?Ext.callback(s,l||h,[!1,null]):(n=!(u=e.split(p))[0],d=n?(i=h.getRootNode(),1):(i=h.store.findNode(g,u[0]),0),!i||n&&i.get(g)+""!==u[1]?Ext.callback(s,l||h,[!1,i]):(c=function(e){var t,i,n,r=this;if(++d===u.length)return o&&f.getSelectionModel().select(r),a&&f.getNavigationModel().setPosition(r,0),Ext.callback(s,l||h,[!0,r,f.getNode(r)]);for(i=0,t=e?e.length:0;i<t;i++)if(!(n=(r=e[i]).get(g))&&0!==n||(n=n.toString()),n===u[d])return r.expand(!1,c);r=this,Ext.callback(s,l||h,[!1,r,f.getNode(r)])},void i.expand(!1,c)))},ensureVisible:function(e,r){if(e.isEntity||"number"==typeof e)return this.callParent([e,r]);var o,a,t,i,s,n,l,d,u=this,c=r&&r.field||u.store.model.idProperty,h=r&&r.separator||"/";d=function(e,t,i,n){!n&&e&&t&&(n=t.findChild(c,s)),n?u.doEnsureVisible(n,r):Ext.callback(o,a||u,[!1,t])},r&&(o=r.callback,a=r.scope),i=!(t=e.split(h))[0],s=t.pop(),!t.length||i&&1===t.length?(n=u.store.findNode(c,s))?((l=n.parentNode)&&!l.isExpanded()&&l.expand(),d(!0,null,0,n)):Ext.callback(o,a||u,[!1,null]):u.expandPath(t.join(h),c,h,d)},selectPath:function(e,t,i,n,r){this.ensureVisible(e,{field:t,separator:i,select:!0,callback:n,scope:r})}}),Ext.define("Ext.view.DragZone",{extend:"Ext.dd.DragZone",containerScroll:!1,constructor:function(e){var t,i,n;Ext.apply(this,e),this.ddGroup||(this.ddGroup="view-dd-zone-"+this.view.id),(t=this.view).setItemsDraggable(!0),n=(i=t.ownerCt)?i.getTargetEl().dom:t.el.dom.parentNode,this.callParent([n]),this.ddel=document.createElement("div"),this.ddel.className=Ext.baseCSSPrefix+"grid-dd-wrap"},init:function(e,t,i){var n={itemmousedown:this.onItemMouseDown,scope:this};Ext.supports.Touch&&(n.itemlongpress=this.onItemLongPress,n.contextmenu={element:"el",fn:this.onViewContextMenu}),this.initTarget(e,t,i),this.view.mon(this.view,n)},onValidDrop:function(e,t,i){this.callParent([e,t,i]),e.el.contains(Ext.Element.getActiveElement())||e.el.focus()},onViewContextMenu:function(e){"mouse"!==e.pointerType&&e.preventDefault()},onItemMouseDown:function(e,t,i,n,r){"mouse"===r.pointerType&&this.onTriggerGesture(e,t,i,n,r)},onItemLongPress:function(e,t,i,n,r){"mouse"!==r.pointerType&&this.onTriggerGesture(e,t,i,n,r)},onTriggerGesture:function(e,t,i,n,r){var o;"touch"===r.pointerType&&"longpress"!==r.type||r.position&&r.position.isEqual(r.view.actionPosition)||this.isPreventDrag(r,t,i,n)||(o=e.getNavigationModel(),r.position?o.setPosition(r.position):o.setPosition(n),this.handleMouseDown(r))},isPreventDrag:function(e,t,i,n){return!!e.isInputFieldEvent},getDragData:function(e){var t=this.view,i=e.getTarget(t.getItemSelector());if(i)return{copy:t.copy||t.allowCopy&&e.ctrlKey,event:e,view:t,ddel:this.ddel,item:i,records:t.getSelectionModel().getSelection(),fromPosition:Ext.fly(i).getXY()}},onInitDrag:function(e,t){var i=this.dragData,n=i.view,r=n.getSelectionModel(),o=n.getRecord(i.item);return r.isSelected(o)||r.selectWithEvent(o,this.DDMInstance.mousedownEvent),i.records=r.getSelection(),Ext.fly(this.ddel).setHtml(this.getDragText()),this.proxy.update(this.ddel),this.onStartDrag(e,t),!0},getDragText:function(){var e=this.dragData.records.length;return Ext.String.format(this.dragText,e,1===e?"":"s")},getRepairXY:function(e,t){return!!t&&t.fromPosition}}),Ext.define("Ext.tree.ViewDragZone",{extend:"Ext.view.DragZone",isPreventDrag:function(e,t){return!1===t.get("allowDrag")||!!e.getTarget(this.view.expanderSelector)},getDragText:function(){var e=this.dragData.records,t=e.length,i=e[0].get(this.displayField),n="s",r=this.dragText;return/\{\d+\}/.test(r)&&1===t&&i?i:(i||(n=""),Ext.String.format(r,t,n))},afterRepair:function(){var e,t,i=this.view,n=i.selectedItemCls,r=this.dragData.records,o=r.length,a=Ext.fly;if(Ext.enableFx&&this.repairHighlight)for(e=0;e<o;e++)t=i.getNode(r[e]),a(t.firstChild).highlight(this.repairHighlightColor,{listeners:{beforeanimate:function(){i.isSelected(t)&&a(t).removeCls(n)},afteranimate:function(){i.isSelected(t)&&a(t).addCls(n)}}});this.dragging=!1}}),Ext.define("Ext.tree.ViewDropZone",{extend:"Ext.view.DropZone",allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,expandDelay:500,indicatorCls:Ext.baseCSSPrefix+"tree-ddindicator",expandNode:function(e){var t=this.view;this.expandProcId=!1,e.isLeaf()||e.isExpanded()||(t.expand(e),this.expandProcId=!1)},queueExpand:function(e){this.expandProcId=Ext.defer(this.expandNode,this.expandDelay,this,[e])},cancelExpand:function(){this.expandProcId=Ext.undefer(this.expandProcId)},getPosition:function(e,t){var i,n=this.view.getRecord(t),r=e.getY(),o=n.isLeaf(),a=!1,s=Ext.fly(t).getRegion();return n.isRoot()?"append":this.appendOnly?!o&&"append":(this.allowParentInserts||(a=n.hasChildNodes()&&n.isExpanded()),i=(s.bottom-s.top)/(o?2:3),r>=s.top&&r<s.top+i?"before":!a&&(o||r>=s.bottom-i&&r<=s.bottom)?"after":"append")},isValidDropPoint:function(e,t,i,n,r){if(!e||!r.item)return!1;var o,a,s=this.view,l=s.getRecord(e),d=r.records,u=d.length,c=d.length;if(!(l&&t&&u))return!1;for(o=0;o<c;o++)if((a=d[o]).isNode&&a.contains(l))return!1;return("append"!==t||!1!==l.get("allowDrop"))&&(("append"===t||!1!==l.parentNode.get("allowDrop"))&&(!Ext.Array.contains(d,l)&&!1!==s.fireEvent("nodedragover",l,t,r,n)))},onNodeOver:function(e,t,i,n){var r=this.getPosition(i,e),o=this.dropNotAllowed,a=this.view,s=a.getRecord(e),l=this.getIndicator(),d=0;return this.cancelExpand(),"append"!==r||this.expandProcId||Ext.Array.contains(n.records,s)||s.isLeaf()||s.isExpanded()||this.queueExpand(s),this.isValidDropPoint(e,r,t,i,n)?(this.valid=!0,this.currentPosition=r,this.overRecord=s,l.setWidth(Ext.fly(e).getWidth()),d=Ext.fly(e).getY()-Ext.fly(a.el).getY()-1,"before"===r?(o=s.isFirst()?Ext.baseCSSPrefix+"tree-drop-ok-above":Ext.baseCSSPrefix+"tree-drop-ok-between",l.showAt(0,d),t.proxy.show()):"after"===r?(o=s.isLast()?Ext.baseCSSPrefix+"tree-drop-ok-below":Ext.baseCSSPrefix+"tree-drop-ok-between",d+=Ext.fly(e).getHeight(),l.showAt(0,d),t.proxy.show()):(o=Ext.baseCSSPrefix+"tree-drop-ok-append",l.hide())):this.valid=!1,this.currentCls=o},onNodeOut:function(e,t,i,n){this.valid=!1,this.getIndicator().hide()},onContainerOver:function(e,t,i){return this.allowContainerDrops?this.dropAllowed:t.getTarget("."+this.indicatorCls)?this.currentCls:this.dropNotAllowed},onContainerDrop:function(e,t,i){this.allowContainerDrops&&(this.valid=!0,this.currentPosition="append",this.overRecord=this.view.store.getRoot(),this.onNodeDrop(this.overRecord,e,t,i))},notifyOut:function(){this.callParent(arguments),this.cancelExpand()},handleNodeDrop:function(i,n,e){var t,r,o,a,s,l,d,u,c=this,h=c.view,f=n?n.parentNode:h.panel.getRootNode(),g=h.store.getModel();if(i.copy)for(t=i.records,i.records=[],r=0,o=t.length;r<o;r++)(a=t[r]).isNode?i.records.push(a.copy(void 0,!0)):i.records.push(new g(Ext.apply({},a.data)));c.cancelExpand(),"before"===e?(s=f.insertBefore,l=[null,n],n=f):"after"===e?(l=n.nextSibling?(s=f.insertBefore,[null,n.nextSibling]):(s=f.appendChild,[null]),n=f):(n.isExpanded()||n.isLoading()||(d=!0),s=n.appendChild,l=[null]),u=function(){var e,t;for(Ext.suspendLayouts(),r=0,o=i.records.length;r<o;r++)(a=i.records[r]).isNode||(a=a.isModel?new g(a.data,a.getId()):new g(a),i.records[r]=a),l[0]=a,s.apply(n,l);if(c.sortOnDrop&&n.sort(n.getTreeStore().getSorters().sortFn),Ext.resumeLayouts(!0),a=i.records[0],h.ownerGrid.ensureVisible(a),h.getNavigationModel().setPosition(a),Ext.enableFx&&c.dropHighlight)for(e=c.dropHighlightColor,r=0;r<o;r++)(t=h.getNode(i.records[r]))&&Ext.fly(t).highlight(e)},d?n.expand(!1,u):n.isLoading()?n.on({expand:u,delay:1,single:!0}):u()}}),Ext.define("Ext.tree.plugin.TreeViewDragDrop",{extend:"Ext.plugin.Abstract",alias:"plugin.treeviewdragdrop",uses:["Ext.tree.ViewDragZone","Ext.tree.ViewDropZone"],dragText:"{0} selected node{1}",allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,ddGroup:"TreeDD",containerScroll:!1,expandDelay:1e3,enableDrop:!0,enableDrag:!0,nodeHighlightColor:"c3daf9",nodeHighlightOnDrop:Ext.enableFx,displayField:"text",init:function(e){Ext.applyIf(e,{copy:this.copy,allowCopy:this.allowCopy}),e.on("render",this.onViewRender,this,{single:!0})},destroy:function(){this.dragZone=this.dropZone=Ext.destroy(this.dragZone,this.dropZone),this.callParent()},onViewRender:function(e){var t,i=this;(e.ownerCt.ownerGrid||e.ownerCt).relayEvents(e,["beforedrop","drop"]),i.enableDrag&&(i.containerScroll&&(t=e.getEl()),i.dragZone=new Ext.tree.ViewDragZone(Ext.apply({view:e,ddGroup:i.dragGroup||i.ddGroup,dragText:i.dragText,displayField:i.displayField,repairHighlightColor:i.nodeHighlightColor,repairHighlight:i.nodeHighlightOnRepair,scrollEl:t},i.dragZone))),i.enableDrop&&(i.dropZone=new Ext.tree.ViewDropZone(Ext.apply({view:e,ddGroup:i.dropGroup||i.ddGroup,allowContainerDrops:i.allowContainerDrops,appendOnly:i.appendOnly,allowParentInserts:i.allowParentInserts,expandDelay:i.expandDelay,dropHighlightColor:i.nodeHighlightColor,dropHighlight:i.nodeHighlightOnDrop,sortOnDrop:i.sortOnDrop,containerScroll:i.containerScroll},i.dropZone)))}},function(){var e=this.prototype;e.nodeHighlightOnDrop=e.nodeHighlightOnRepair=Ext.enableFx}),Ext.define("Ext.view.MultiSelectorSearch",{extend:"Ext.panel.Panel",xtype:"multiselector-search",layout:"fit",floating:!0,alignOnScroll:!1,minWidth:200,minHeight:200,border:!0,keyMap:{scope:"this",ESC:"hide"},platformConfig:{desktop:{resizable:!0},"tablet && rtl":{resizable:{handles:"sw"}},"tablet && !rtl":{resizable:{handles:"se"}}},defaultListenerScope:!0,referenceHolder:!0,searchText:"Search...",initComponent:function(){var e,t,i,n,r=this,o=r.owner,a=r.makeItems();for(r.dockedItems=r.makeDockedItems(),r.items=a,n=Ext.data.StoreManager.lookup(r.store),e=a.length;e--;)if("grid"===(t=a[e]).xtype){t.store=n,t.isSearchGrid=!0,t.selModel=t.selModel||{type:"checkboxmodel",pruneRemoved:!1,listeners:{selectionchange:"onSelectionChange"}},Ext.merge(t,r.grid),t.columns||(t.hideHeaders=!0,t.columns=[{flex:1,dataIndex:r.field}]);break}if(r.callParent(),i=r.getOwnerStore().getRange(),!o.convertSelectionRecord.$nullFn)for(e=i.length;e--;)i[e]=o.convertSelectionRecord(i[e]);n.isLoading()||0===n.loadCount&&!n.getCount()?n.on("load",function(){r.destroyed||r.selectRecords(i)},null,{single:!0}):r.selectRecords(i)},getOwnerStore:function(){return this.owner.getStore()},afterShow:function(){var e;this.callParent(arguments),this.invocationEvent&&"touch"===this.invocationEvent.pointerType||(e=this.lookupReference("searchField"))&&e.focus(),this.invocationEvent=null},getSearchStore:function(){return this.lookupReference("searchGrid").getStore()},makeDockedItems:function(){return[{xtype:"textfield",reference:"searchField",dock:"top",hideFieldLabel:!0,emptyText:this.searchText,cls:Ext.baseCSSPrefix+"multiselector-search-input",triggers:{clear:{cls:Ext.baseCSSPrefix+"form-clear-trigger",handler:"onClearSearch",hidden:!0}},listeners:{specialKey:"onSpecialKey",change:{fn:"onSearchChange",buffer:300}}}]},onSpecialKey:function(e,t){t.getKey()===t.TAB&&t.shiftKey&&(t.preventDefault(),this.owner.searchTool.focus())},makeItems:function(){return[{xtype:"grid",reference:"searchGrid",trailingBufferZone:2,leadingBufferZone:2,viewConfig:{deferEmptyText:!1,emptyText:"No results."}}]},getMatchingRecords:function(e){var t,i,n,r=this.lookupReference("searchGrid").getStore(),o=[];for(t=0,n=(e=Ext.isArray(e)?e:[e]).length;t<n;t++)(i=r.getById(e[t].getId()))&&o.push(i);return o},selectRecords:function(e){var t=this.lookupReference("searchGrid");return e=this.getMatchingRecords(e),t.getSelectionModel().select(e)},deselectRecords:function(e){var t=this.lookupReference("searchGrid");return e=this.getMatchingRecords(e),t.getSelectionModel().deselect(e)},search:function(e){var t=this.searchFilter,i=this.getSearchStore().getFilters();e?(i.beginUpdate(),t?t.setValue(e):this.searchFilter=t=new Ext.util.Filter({id:"search",property:this.field,value:e}),i.add(t),i.endUpdate()):t&&i.remove(t)},privates:{onClearSearch:function(){var e=this.lookupReference("searchField");e.setValue(null),e.focus()},onSearchChange:function(e){var t=e.getValue();e.getTrigger("clear").setHidden(!t),this.search(t)},onSelectionChange:function(e,t){var i,n,r,o,a=this.owner,s=a.getStore().data,l=0,d={};for(n=t.length;n--;)d[r=(o=t[n]).id]=o,s.containsKey(r)||(i=i||[]).push(a.convertSearchRecord(o));for(n=s.length;n--;)d[(o=s.getAt(n)).id]||(l=l||[]).push(o);(i||l)&&s.splice(s.length,l,i)}}}),Ext.define("Ext.view.MultiSelector",{extend:"Ext.grid.Panel",xtype:"multiselector",config:{search:{xtype:"multiselector-search",width:200,height:200,store:{autoLoad:!0}}},fieldName:"name",fieldTitle:null,removeRowText:"✖",removeRowTip:"Remove this item",emptyText:"Nothing selected",addToolText:"Search for items to add",initComponent:function(){var e,t,i=this,n=i.emptyText,r=i.getStore(),o=i.getSearch(),a=i.fieldTitle;o||Ext.raise("The search configuration is required for the multi selector"),t=(e=o.store).isStore?e.getModel():e.model,r||(i.store={model:t}),n&&!i.viewConfig&&(i.viewConfig={deferEmptyText:!1,emptyText:n}),i.columns||(i.hideHeaders=!a,i.columns=[{text:a,dataIndex:i.fieldName,flex:1},i.makeRemoveRowColumn()]),i.callParent()},addTools:function(){this.addTool({type:"plus",tooltip:this.addToolText,callback:"onShowSearch",scope:this}),this.searchTool=this.tools[this.tools.length-1]},convertSearchRecord:Ext.identityFn,convertSelectionRecord:Ext.identityFn,makeRemoveRowColumn:function(){return{width:32,align:"center",menuDisabled:!0,tdCls:Ext.baseCSSPrefix+"multiselector-remove",processEvent:this.processRowEvent.bind(this),renderer:this.renderRemoveRow,updater:Ext.emptyFn,scope:this}},processRowEvent:function(e,t,i,n,r,o,a,s){var l=Ext.getBody();"click"!==o.type&&("keydown"!==o.type||o.keyCode!==o.SPACE&&o.keyCode!==o.ENTER)||(l.suspendFocusEvents(),this.store.remove(a),l.resumeFocusEvents(),this.searchPopup&&this.searchPopup.deselectRecords(a))},renderRemoveRow:function(){return'<span data-qtip="'+this.removeRowTip+'" role="button" tabIndex="0">'+this.removeRowText+"</span>"},onFocusLeave:function(e){this.onDismissSearch(),this.callParent([e])},afterComponentLayout:function(e,t,i,n){var r=this.searchPopup;this.callParent([e,t,i,n]),r&&r.isVisible()&&r.showBy(this,this.popupAlign)},privates:{popupAlign:"tl-tr?",onGlobalScroll:function(e){this.owns(e.getElement())||this.onDismissSearch()},onDismissSearch:function(e){var t=this.searchPopup;!t||e&&(t.owns(e.getTarget())||this.owns(e.getTarget()))||(this.scrollListeners.destroy(),this.touchListeners.destroy(),t.hide())},onShowSearch:function(e,t,i){var n=this,r=n.searchPopup,o=n.getStore();r||(r=Ext.merge({owner:n,field:n.fieldName,floating:!0,alignOnScroll:!1},n.getSearch()),n.searchPopup=r=n.add(r),o.getCount()&&r.selectRecords(o.getRange())),r.invocationEvent=i,r.showBy(n,n.popupAlign),i&&"touch"===i.pointerType||r.lookupReference("searchField").focus(),n.scrollListeners=Ext.on({scroll:"onGlobalScroll",scope:n,destroyable:!0}),n.touchListeners=Ext.getDoc().on({translate:!1,touchstart:n.onDismissSearch,scope:n,delegated:!1,destroyable:!0})}}}),Ext.define("Ext.window.Toast",{extend:"Ext.window.Window",xtype:"toast",isToast:!0,cls:Ext.baseCSSPrefix+"toast",bodyPadding:10,autoClose:!0,plain:!1,draggable:!1,resizable:!1,shadow:!1,focus:Ext.emptyFn,anchor:null,useXAxis:!1,align:"t",alwaysOnTop:!0,spacing:6,paddingX:30,paddingY:10,slideInAnimation:"easeIn",slideBackAnimation:"bounceOut",slideInDuration:500,slideBackDuration:500,hideDuration:500,autoCloseDelay:3e3,stickOnClick:!1,stickWhileHover:!0,closeOnMouseDown:!1,closable:!1,minHeight:1,focusable:!1,isHiding:!1,isFading:!1,destroyAfterHide:!1,closeOnMouseOut:!1,xPos:0,yPos:0,constructor:function(e){void 0===(e=e||{}).animate&&(e.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx),this.enableAnimations=e.animate,delete e.animate,this.callParent([e])},initComponent:function(){this.autoClose&&null==this.closable&&(this.closable=!1),this.updateAlignment(this.align),this.setAnchor(this.anchor),this.callParent()},onRender:function(){this.callParent(arguments),this.el.hover(this.onMouseEnter,this.onMouseLeave,this),this.closeOnMouseDown&&Ext.getDoc().on("mousedown",this.onDocumentMousedown,this)},alignmentProps:{br:{paddingFactorX:-1,paddingFactorY:-1,siblingAlignment:"br-br",anchorAlign:"tr-br"},bl:{paddingFactorX:1,paddingFactorY:-1,siblingAlignment:"bl-bl",anchorAlign:"tl-bl"},tr:{paddingFactorX:-1,paddingFactorY:1,siblingAlignment:"tr-tr",anchorAlign:"br-tr"},tl:{paddingFactorX:1,paddingFactorY:1,siblingAlignment:"tl-tl",anchorAlign:"bl-tl"},b:{paddingFactorX:0,paddingFactorY:-1,siblingAlignment:"b-b",useXAxis:0,anchorAlign:"t-b"},t:{paddingFactorX:0,paddingFactorY:1,siblingAlignment:"t-t",useXAxis:0,anchorAlign:"b-t"},l:{paddingFactorX:1,paddingFactorY:0,siblingAlignment:"l-l",useXAxis:1,anchorAlign:"r-l"},r:{paddingFactorX:-1,paddingFactorY:0,siblingAlignment:"r-r",useXAxis:1,anchorAlign:"l-r"},x:{br:{anchorAlign:"bl-br"},bl:{anchorAlign:"br-bl"},tr:{anchorAlign:"tl-tr"},tl:{anchorAlign:"tr-tl"}}},updateAlignment:function(e){var t=this.alignmentProps,i=t[e],n=t.x[e];n&&this.useXAxis&&Ext.applyIf(this,n),Ext.applyIf(this,i)},getXposAlignedToAnchor:function(){var e=this.align,t=this.anchor,i=t&&t.el,n=this.el,r=0;return i&&i.dom&&(this.useXAxis?"br"===e||"tr"===e||"r"===e?(r+=i.getAnchorXY("r")[0],r-=n.getWidth()+this.paddingX):(r+=i.getAnchorXY("l")[0],r+=this.paddingX):r=n.getLeft()),r},getYposAlignedToAnchor:function(){var e=this.align,t=this.anchor,i=t&&t.el,n=this.el,r=0;return i&&i.dom&&(this.useXAxis?r=n.getTop():"br"===e||"bl"===e||"b"===e?(r+=i.getAnchorXY("b")[1],r-=n.getHeight()+this.paddingY):(r+=i.getAnchorXY("t")[1],r+=this.paddingY)),r},getXposAlignedToSibling:function(e){var t=this.align,i=this.el;return this.useXAxis?"tl"===t||"bl"===t||"l"===t?e.xPos+e.el.getWidth()+e.spacing:e.xPos-i.getWidth()-this.spacing:i.getLeft()},getYposAlignedToSibling:function(e){var t=this.align,i=this.el;return this.useXAxis?i.getTop():"tr"===t||"tl"===t||"t"===t?e.yPos+e.el.getHeight()+e.spacing:e.yPos-i.getHeight()-e.spacing},getToasts:function(){var e=this.anchor,t=this.anchorAlign,i=e.activeToasts||(e.activeToasts={});return i[t]||(i[t]=[])},setAnchor:function(e){var t;this.anchor=e="string"==typeof e?Ext.getCmp(e):e,e||(t=Ext.window.Toast,this.anchor=t.bodyAnchor||(t.bodyAnchor={el:Ext.getBody()}))},beforeShow:function(){var e=this;e.stickOnClick&&e.body.on("click",function(){e.cancelAutoClose()}),e.autoClose&&(e.closeTask||(e.closeTask=new Ext.util.DelayedTask(e.doAutoClose,e))),e.el.setX(-1e4),e.el.setOpacity(1)},afterShow:function(){var e,t,i,n,r=this,o=r.el;r.callParent(arguments),(t=(i=(e=r.getToasts()).length)&&e[i-1])?(o.alignTo(t.el,r.siblingAlignment,[0,0]),r.xPos=r.getXposAlignedToSibling(t),r.yPos=r.getYposAlignedToSibling(t)):(o.alignTo(r.anchor.el,r.anchorAlign,[r.paddingX*r.paddingFactorX,r.paddingY*r.paddingFactorY],!1),r.xPos=r.getXposAlignedToAnchor(),r.yPos=r.getYposAlignedToAnchor()),Ext.Array.include(e,r),r.enableAnimations?(n=o.getXY(),o.animate({from:{x:n[0],y:n[1]},to:{x:r.xPos,y:r.yPos,opacity:1},easing:r.slideInAnimation,duration:r.slideInDuration,dynamic:!0,callback:r.afterPositioned,scope:r})):(r.setLocalXY(r.xPos,r.yPos),r.afterPositioned())},afterPositioned:function(){this.destroying||this.destroyed||!this.autoClose||this.closeTask.delay(this.autoCloseDelay)},onDocumentMousedown:function(e){this.isVisible()&&!this.owns(e.getTarget())&&this.hide()},slideBack:function(){var e=this,t=e.anchor,i=t&&t.el,n=e.el,r=e.getToasts(),o=Ext.Array.indexOf(r,e);!e.isHiding&&n&&n.dom&&i&&i.isVisible()&&(o?(e.xPos=e.getXposAlignedToSibling(r[o-1]),e.yPos=e.getYposAlignedToSibling(r[o-1])):(e.xPos=e.getXposAlignedToAnchor(),e.yPos=e.getYposAlignedToAnchor()),e.stopAnimation(),e.enableAnimations&&n.animate({to:{x:e.xPos,y:e.yPos},easing:e.slideBackAnimation,duration:e.slideBackDuration,dynamic:!0}))},update:function(){this.isVisible()&&(this.isHiding=!0,this.hide()),this.callParent(arguments),this.show()},cancelAutoClose:function(){var e=this.closeTask;e&&e.cancel()},doAutoClose:function(){this.stickWhileHover&&this.mouseIsOver?this.closeOnMouseOut=!0:this.close()},doDestroy:function(){this.removeFromAnchor(),this.cancelAutoClose(),this.callParent()},onMouseEnter:function(){this.mouseIsOver=!0},onMouseLeave:function(){this.mouseIsOver=!1,this.closeOnMouseOut&&(this.closeOnMouseOut=!1,this.close())},removeFromAnchor:function(){var e,t;if(this.anchor&&(e=this.getToasts(),-1!==(t=Ext.Array.indexOf(e,this))))for(Ext.Array.erase(e,t,1);t<e.length;t++)e[t].slideBack()},getFocusEl:Ext.emptyFn,hide:function(){var e=this,t=e.el;return e.cancelAutoClose(),e.isHiding?e.isFading||(e.callParent(arguments),e.isHiding=!1):(e.isHiding=!0,e.isFading=!0,e.cancelAutoClose(),t&&(!e.enableAnimations||e.destroying||e.destroyed?(e.isFading=!1,e.hide(e.animateTarget,e.doClose,e)):t.fadeOut({opacity:0,easing:"easeIn",duration:e.hideDuration,listeners:{scope:e,afteranimate:function(){this.isFading=!1,this.destroying||this.destroyed||this.hide(this.animateTarget,this.doClose,this)}}}))),e}},function(a){Ext.toast=function(e,t,i,n){var r,o=e;return Ext.isString(e)&&(o={title:t,html:e,iconCls:n},i&&(o.align=i)),(r=new a(o)).show(),r}}),Ext.define("Ext.calendar.EventBase",{extend:"Ext.Gadget",config:{defaultTitle:"(New Event)",endDate:null,mode:null,model:null,palette:null,resize:!1,startDate:null,title:"",touchAction:{panX:!1,panY:!1},view:null},cloneForProxy:function(){var e=new this.self(this.config);return e.el.unselectable(),e},updateModel:function(e){var t;e&&(this.setStartDate(e.getStartDate()),this.setEndDate(e.getEndDate()),this.setTitle(e.getTitle()),(t=this.element.dom).setAttribute("data-eventId",e.id),t.setAttribute("data-calendarId",e.getCalendarId()))},updateResize:function(e){this.toggleCls(this.$allowResizeCls,e)},privates:{$allowResizeCls:Ext.baseCSSPrefix+"calendar-event-resizable"}}),Ext.define("Ext.calendar.Event",{extend:"Ext.calendar.EventBase",xtype:"calendar-event",config:{timeFormat:"H:i"},smallSize:60,getElementConfig:function(){var e=this.callParent();return e.cls=Ext.baseCSSPrefix+"calendar-event",e.children=[{cls:Ext.baseCSSPrefix+"calendar-event-inner",reference:"innerElement",children:[{cls:Ext.baseCSSPrefix+"calendar-event-time",reference:"timeElement",children:[{tag:"span",reference:"startElement",cls:Ext.baseCSSPrefix+"calendar-event-time-start"},{tag:"span",html:" - ",reference:"separatorElement",cls:Ext.baseCSSPrefix+"calendar-event-time-separator"},{tag:"span",reference:"endElement",cls:Ext.baseCSSPrefix+"calendar-event-time-end"}]},{reference:"titleElement",tag:"span",cls:Ext.baseCSSPrefix+"calendar-event-title"},{cls:Ext.baseCSSPrefix+"calendar-event-resizer",reference:"resizerElement"}]}],e},updateEndDate:function(e){this.endElement.setText(this.displayDate(e)),this.calculateSize()},updateMode:function(e){this.addCls(this.modes[e]),"weekinline"!==e&&"weekspan"!==e||this.addCls(this.$inlineTitleCls)},updatePalette:function(e){var t=this.innerElement.dom.style,i=this.getMode();"weekspan"===i||"day"===i?(t.backgroundColor=e.primary,t.color=e.secondary,"day"===i&&(this.element.dom.style.borderColor=e.border)):t.color=e.primary},updateStartDate:function(e){this.startElement.setText(this.displayDate(e)),this.calculateSize()},updateTitle:function(e){e=e||this.getDefaultTitle(),this.titleElement.setText(e)},privates:{$inlineTitleCls:Ext.baseCSSPrefix+"calendar-event-inline-title",modes:{day:Ext.baseCSSPrefix+"calendar-event-day",weekspan:Ext.baseCSSPrefix+"calendar-event-week-span",weekinline:Ext.baseCSSPrefix+"calendar-event-week-inline"},calculateSize:function(){var e,t=this.getStartDate(),i=this.getEndDate(),n=this.getView().MS_TO_MINUTES,r="day"===this.getMode();(!r||t&&i)&&(e=!r||i-t<=this.smallSize*n,this.element.toggleCls(this.$inlineTitleCls,e))},displayDate:function(e){if(e)return e=this.getView().utcToLocal(e),Ext.Date.format(e,this.getTimeFormat())}}}),Ext.define("Ext.calendar.AbstractList",{extend:"Ext.view.View",updateNavigationModel:function(e,t){e.focusCls=""},onItemClick:function(e,t,i,n){this.callParent([e,t,i,n]),this.handleItemTap(e)}}),Ext.define("Ext.calendar.List",{extend:"Ext.calendar.AbstractList",xtype:"calendar-list",config:{enableToggle:!0},cls:Ext.baseCSSPrefix+"calendar-list",itemTpl:'<div class="<tpl if="hidden">'+Ext.baseCSSPrefix+'calendar-list-item-hidden</tpl>"><div class="'+Ext.baseCSSPrefix+'calendar-list-icon" style="background-color: {color};"></div><div class="'+Ext.baseCSSPrefix+'calendar-list-text">{title:htmlEncode}</div></div>',itemSelector:"."+Ext.baseCSSPrefix+"calendar-list-item",itemCls:Ext.baseCSSPrefix+"calendar-list-item",scrollable:!0,prepareData:function(e,t,i){return{id:i.id,editable:i.isEditable(),hidden:i.isHidden(),color:i.getBaseColor(),title:i.getTitle()}},handleItemTap:function(e){this.getEnableToggle()&&e.setHidden(!e.isHidden())}}),Ext.define("Ext.calendar.date.Range",{end:null,start:null,isRange:!0,statics:{fly:function(){var i=null;return function(e,t){return e.isRange?e:((i=i||new Ext.calendar.date.Range).start=e,i.end=t,i)}}()},constructor:function(e,t){this.start=e,this.end=t},clone:function(){var e=Ext.Date;return new this.self(e.clone(this.start),e.clone(this.end))},contains:function(e){return this.start<=e&&e<=this.end},containsRange:function(e,t){var i=this.self.fly(e,t);return i.start>=this.start&&i.end<=this.end},equals:function(e,t){var i;return!!e&&(i=this.self.fly(e,t),this.start.getTime()===i.start.getTime()&&this.end.getTime()===i.end.getTime())},getDuration:function(){return this.end.getTime()-this.start.getTime()},isContainedBy:function(e,t){return this.self.fly(e,t).containsRange(this)},overlaps:function(e,t){var i=this.self.fly(e,t);return i.start<this.end&&this.start<i.end}}),Ext.define("Ext.calendar.date.Util",{singleton:!0,clearTimeUtc:function(e,t){return t&&(e=Ext.Date.clone(e)),e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),e},privates:{getDefaultTimezoneOffset:function(){return(new Date).getTimezoneOffset()},getLocalNow:function(){return new Date},expandRange:function(e){var t=Ext.Date,i=e.start,n=e.end;return(i=t.clone(i)).setUTCHours(0),0!==n.getUTCHours()&&(n=t.clone(n)).setUTCHours(24),new Ext.calendar.date.Range(i,n)}}}),Ext.define("Ext.calendar.dd.WeeksProxy",{extend:"Ext.drag.proxy.Placeholder",alias:"drag.proxy.calendar-weeks",config:{titleTpl:'<tpl if="days &gt; 1">({days} days) </tpl>{title}',width:null},draggingCls:Ext.baseCSSPrefix+"calendar-event-dragging",applyTitleTpl:function(e){return e&&!e.isXTemplate&&(e=new Ext.XTemplate(e)),e},getElement:function(e){var t=e.view,i=e.widget.cloneForProxy(),n=i.element;return i.removeCls(t.$staticEventCls),i.addCls(this.draggingCls),i.addCls(this.placeholderCls),t.element.appendChild(n),i.setWidth(this.getWidth()),this.setTitle(i),this.clone=i,n},cleanup:function(){this.clone=Ext.destroy(this.clone),this.callParent()},privates:{setTitle:function(e){var t,i=this.getTitleTpl();i&&(t=e.getModel(),e.setTitle(i.apply({model:t,title:e.getTitle(),days:this.getSource().getView().getEventDaysSpanned(t)})))}}}),Ext.define("Ext.calendar.util.Dom",{singleton:!0,extractPositions:function(e,t){var i,n=e.length,r=[];for(i=0;i<n;++i)r.push(Ext.fly(e[i])[t]());return r},getIndexPosition:function(e,t){var i,n,r=e.length;if(t<e[0])i=0;else if(t>e[r-1])i=r-1;else for(n=r-1;0<=n;--n)if(t>e[n]){i=n;break}return i}}),Ext.define("Ext.calendar.dd.DaysAllDaySource",{extend:"Ext.drag.Source",requires:["Ext.calendar.dd.WeeksProxy","Ext.calendar.util.Dom"],activateOnLongPress:"touch",config:{proxy:{type:"calendar-weeks",width:200},view:null},describe:function(e){var t=this.getView(),i=t.getEvent(e.eventTarget);e.event=i,e.widget=t.getEventWidget(i),e.setData("calendar-event-allday",i),e.view=t},beforeDragStart:function(e){return this.getView().handleChangeStart("drag",e.event)},updateView:function(e){e&&(this.setHandle("."+e.$eventCls),this.setElement(e.allDayContent))},destroy:function(){this.setView(null),this.callParent()},privates:{setup:function(e){var t,i,n;this.callParent([e]),t=e.view,i=e.event,n=Ext.calendar.util.Dom.extractPositions(t.backgroundCells,"getX"),e.index=Ext.calendar.util.Dom.getIndexPosition(n,e.cursor.current.x),e.positions=n,e.span=t.getEventDaysSpanned(i)}}}),Ext.define("Ext.calendar.dd.DaysAllDayTarget",{extend:"Ext.drag.Target",requires:["Ext.calendar.util.Dom","Ext.calendar.date.Range"],config:{view:null},updateView:function(e){e&&this.setElement(e.allDayContent)},accepts:function(e){return Ext.Array.contains(e.types,"calendar-event-allday")},onDragMove:function(e){var t,i=e.view;e.valid&&(t=Ext.calendar.util.Dom.getIndexPosition(e.positions,e.cursor.current.x),i.selectRange(t,t+e.span-1)),this.callParent([e])},onDragLeave:function(e){this.getView().clearSelected(),this.callParent([e])},onDrop:function(e){var t=Ext.Date,i=e.view,n=e.event,r=Ext.calendar.util.Dom.getIndexPosition(e.positions,e.cursor.current.x),o=i.utcTimezoneOffset(t.add(i.dateInfo.full.start,t.DAY,r)),a=n.getStartDate(),s=o<a,l=t.diff(s?o:a,s?a:o,t.DAY);s&&(l=-l),i.handleChange("drop",n,new Ext.calendar.date.Range(t.add(n.getStartDate(),t.DAY,l),t.add(n.getEndDate(),t.DAY,l)),function(){i.clearSelected()}),this.callParent([e])},destroy:function(){this.setView(null),this.callParent()}}),Ext.define("Ext.calendar.dd.DaysProxy",{extend:"Ext.drag.proxy.Placeholder",alias:"drag.proxy.calendar-days",config:{cursorOffset:null},draggingCls:Ext.baseCSSPrefix+"calendar-event-dragging",getElement:function(e){var t=e.view,i=e.widget,n=i.cloneForProxy(),r=n.element,o=t.getEventColumn(0);return n.removeCls(t.$staticEventCls),n.addCls(this.draggingCls),n.setWidth(Ext.fly(o).getWidth()),n.setHeight(i.getHeight()),t.bodyWrap.appendChild(r),this.element=r,this.clone=n,e.widgetClone=n,r},cleanup:function(e){e&&e.deferCleanup||(this.clone=Ext.destroy(this.clone),this.callParent())}}),Ext.define("Ext.calendar.dd.DaysBodySource",{extend:"Ext.drag.Source",requires:["Ext.calendar.dd.DaysProxy","Ext.calendar.util.Dom"],activateOnLongPress:"touch",config:{proxy:{type:"calendar-days"},view:null},describe:function(e){var t=this.getView();e.event=t.getEvent(e.eventTarget),e.widget=t.getEventWidget(e.event),e.setData("calendar-event",e.event),e.view=t},beforeDragStart:function(e){var t=this.getView().$resizerCls;return!Ext.fly(e.eventTarget).hasCls(t)&&this.getView().handleChangeStart("drag",e.event)},updateView:function(e){e&&(this.setHandle("."+e.$eventCls),this.setElement(e.bodyWrap),this.setConstrain({snap:{x:this.snapX,y:this.snapY}}))},onDragStart:function(e){this.callParent([e]),e.widget.element.hide()},onDragEnd:function(e){var t;this.callParent([e]),(t=e.widget).destroyed||e.deferCleanup||t.element.show()},destroy:function(){this.setView(null),this.callParent()},privates:{startMarginName:"left",setup:function(e){var t,i,n,r=[];for(this.callParent([e]),i=(t=e.view).getVisibleDays(),n=0;n<i;++n)r.push(Ext.fly(t.getEventColumn(n)).getX());e.sizes={height:e.proxy.element.getHeight(),slotStyle:t.getSlotStyle(),margin:t.getEventStyle().margin,startPositions:r,startOffset:e.cursor.initial.y-e.widget.element.getY()}},snapX:function(e,t){var i=e.sizes,n=i.startPositions,r=Ext.calendar.util.Dom.getIndexPosition(n,t);return n[e.dayIndex=r]+i.margin[e.source.startMarginName]},snapY:function(e,t){var i=e.sizes,n=e.view,r=n.bodyTable.getY(),o=i.slotStyle.halfHeight,a=n.maxSlots,s=Math.max(0,t-i.startOffset-r);return t=r+i.margin.top+Ext.Number.roundToNearest(s,o),Math.min(t,r+a*o-i.height)}}}),Ext.define("Ext.calendar.dd.DaysBodyTarget",{extend:"Ext.drag.Target",config:{view:null},updateView:function(e){e&&this.setElement(e.bodyWrap)},accepts:function(e){return Ext.Array.contains(e.types,"calendar-event")},onDragMove:function(e){var t,i,n,r,o=e.sizes,a=e.view,s=e.event,l=Ext.Date;e.valid&&(t=Math.max(0,e.proxy.current.y-a.bodyTable.getY()),r=Math.floor(t/o.slotStyle.halfHeight),i=l.clone(a.dateInfo.visible.start),i=l.add(i,l.DAY,e.dayIndex||0),i=l.add(i,l.MINUTE,a.minimumEventMinutes*r,!0),n=l.add(i,l.MINUTE,s.getDuration(),!0),e.widgetClone.setStartDate(i),e.widgetClone.setEndDate(n),e.range=[i,n]),this.callParent([e])},onDrop:function(e){var t,i=this.getView(),n=e.source.getProxy();e.deferCleanup=!0,i.handleChange("drop",e.event,new Ext.calendar.date.Range(e.range[0],e.range[1]),function(){n.cleanup(),(t=e.widget).destroyed||t.element.show(),i.clearSelected()}),this.callParent([e])},destroy:function(){this.setView(null),this.callParent()}}),Ext.define("Ext.calendar.dd.WeeksSource",{extend:"Ext.drag.Source",requires:["Ext.calendar.dd.WeeksProxy"],activateOnLongPress:"touch",config:{proxy:{type:"calendar-weeks",width:200},view:null},describe:function(e){var t=this.getView();e.event=t.getEvent(e.eventTarget),e.widget=t.getEventWidget(e.eventTarget),e.setData("calendar-event",e.event),e.view=t},beforeDragStart:function(e){return this.getView().handleChangeStart("drag",e.event)},onDragStart:function(e){var t=e.view,i=e.cursor.current,n=t.getCellByPosition(i.x,i.y),r=e.event;e.span=t.getEventDaysSpanned(r),e.startDate=t.getDateFromCell(n),this.callParent([e])},updateView:function(e){e&&(this.setHandle("."+e.$eventCls),this.setElement(e.element))},destroy:function(){this.setView(null),this.callParent()}}),Ext.define("Ext.calendar.dd.WeeksTarget",{extend:"Ext.drag.Target",requires:["Ext.calendar.date.Range"],config:{view:null},updateView:function(e){e&&this.setElement(e.element)},accepts:function(e){return Ext.Array.contains(e.types,"calendar-event")},onDragMove:function(e){var t,i,n,r=Ext.Date,o=e.view,a=e.cursor.current,s=e.span;e.valid&&(t=o.getCellByPosition(a.x,a.y),i=o.getDateFromCell(t),n=r.add(i,r.DAY,s-1),o.selectRange(i,n)),this.callParent([e])},onDragLeave:function(e){this.getView().clearSelected(),this.callParent([e])},onDrop:function(e){var t,i=Ext.Date,n=e.cursor.current,r=e.view,o=r.getCellByPosition(n.x,n.y),a=e.event;t=this.calculateDifference(a,r.getDateFromCell(o),e.startDate),r.handleChange("drop",a,new Ext.calendar.date.Range(i.add(a.getStartDate(),i.DAY,t,!1),i.add(a.getEndDate(),i.DAY,t,!1)),function(){r.clearSelected()}),this.callParent([e])},destroy:function(){this.setView(null),this.callParent()},privates:{calculateDifference:function(e,t,i){var n,r,o=Ext.Date,a=e.getStartDate();return e.getAllDay()?n=(t=o.localToUtc(t))<a:(n=t<i,a=i),r=o.diff(n?t:a,n?a:t,o.DAY),n&&(r=-r),r}}}),Ext.define("Ext.calendar.form.CalendarPicker",{extend:"Ext.form.field.ComboBox",xtype:"calendar-calendar-picker",cls:Ext.baseCSSPrefix+"calendar-picker-field",listConfig:{cls:Ext.baseCSSPrefix+"calendar-picker-list",getInnerTpl:function(e){return'<div class="'+Ext.baseCSSPrefix+'calendar-picker-list-icon" style="background-color: {color};"></div><div class="'+Ext.baseCSSPrefix+'calendar-picker-list-text">{'+e+"}</div>"},prepareData:function(e,t,i){return{id:i.id,title:i.getTitle(),color:i.getBaseColor()}}},afterRender:function(){this.callParent(),this.updateValue()},updateValue:function(){var e,t;this.callParent(),t=this.valueCollection.first(),this.rendered&&((e=this.iconEl)||(this.iconEl=e=this.inputWrap.createChild({cls:Ext.baseCSSPrefix+"calendar-picker-field-icon"})),t?(e.setDisplayed(!0),e.setStyle("background-color",t.getBaseColor())):e.setDisplayed(!1))}}),Ext.define("Ext.calendar.form.AbstractForm",{extend:"Ext.window.Window",requires:["Ext.layout.container.Fit","Ext.layout.container.VBox","Ext.layout.container.HBox","Ext.form.Panel","Ext.form.field.Text","Ext.form.field.Date","Ext.form.field.Time","Ext.form.field.Checkbox","Ext.calendar.form.CalendarPicker"],layout:"fit",modal:!0,closable:!1,defaultListenerScope:!0,config:{calendarField:{xtype:"calendar-calendar-picker",fieldLabel:"Calendar",name:"calendarId",forceSelection:!0,editable:!1,queryMode:"local",displayField:"title",valueField:"id"},titleField:{xtype:"textfield",fieldLabel:"Title",name:"title",allowBlank:!1},fromContainer:{xtype:"fieldcontainer",fieldLabel:"From",layout:"hbox"},startDateField:{xtype:"datefield",itemId:"startDate",name:"startDate",allowBlank:!1},startTimeField:{xtype:"timefield",itemId:"startTime",name:"startTime",margin:"0 0 0 5"},toContainer:{xtype:"fieldcontainer",fieldLabel:"To",layout:"hbox"},endDateField:{xtype:"datefield",itemId:"endDate",name:"endDate",allowBlank:!1},endTimeField:{xtype:"timefield",itemId:"endTime",name:"endTime",margin:"0 0 0 5"},allDayField:{xtype:"checkbox",itemId:"allDay",name:"allDay",boxLabel:"All Day",hideEmptyLabel:!1,handler:"onAllDayChange"},descriptionField:{xtype:"textarea",fieldLabel:"Description",name:"description",flex:1},dropButton:{text:"Delete",handler:"onDropTap"},saveButton:{text:"Save",handler:"onSaveTap"},cancelButton:{text:"Cancel",handler:"onCancelTap"}},initComponent:function(){this.initForm(),this.fbar=this.generateButtons(),this.callParent(),this.form=this.items.first(),this.checkFields(),this.applyValues()},generateButtons:function(){var e=[],t=this.getDropButton();return t&&e.push(t),e.push({xtype:"component",flex:1},this.getSaveButton(),this.getCancelButton()),e},applyValues:function(){this.form.getForm().setValues(this.consumeEventData())},createItems:function(){var e=this,t=e.getCalendarField(),i=e.getFromContainer(),n=e.getToContainer();t.store||(t.store=e.getCalendarStore()),i.items||(i.items=[e.getStartDateField(),e.getStartTimeField()]),n.items||(n.items=[e.getEndDateField(),e.getEndTimeField()]),this.items=[{xtype:"form",border:!1,trackResetOnLoad:!0,layout:{type:"vbox",align:"stretch"},bodyPadding:10,items:[t,e.getTitleField(),i,n,e.getAllDayField(),e.getDescriptionField()]}]},privates:{checkFields:function(){var e=this.down("#allDay").checked;this.down("#startTime").setDisabled(e),this.down("#endTime").setDisabled(e)},onAllDayChange:function(){this.checkFields()},onCancelTap:function(){this.fireCancel()},onDropTap:function(){this.fireDrop()},onSaveTap:function(){var e=this.form,t=e.getForm().getFieldValues();e.isValid()&&(t.allDay=this.down("#allDay").checked,this.fireSave(this.produceEventData(t)))}}}),Ext.define("Ext.calendar.form.Base",{extend:"Ext.Mixin",requires:["Ext.data.ChainedStore"],config:{event:null,view:null},fireCancel:function(){this.fireEvent("cancel",this)},fireDrop:function(){this.fireEvent("drop",this)},fireSave:function(e){this.fireEvent("save",this,{data:e})},getCalendarStore:function(){return{type:"chained",autoDestroy:!0,source:this.getView().getStore(),filters:[{filterFn:function(e){return e.isEditable()}}]}}}),Ext.define("Ext.calendar.form.Form",{extend:"Ext.calendar.form.AbstractForm",mixins:["Ext.calendar.form.Base"],defaultStartTime:[9,0],defaultEndTime:[10,0],initForm:function(){this.createItems()},consumeEventData:function(){var e,t=Ext.Date,i=this.getView(),n=this.getEvent(),r=n.getStartDate(),o=n.getEndDate(),a=n.getAllDay(),s=a?t.utcToLocal(r):i.utcToLocal(r),l=a?t.utcToLocal(o):i.utcToLocal(o),d=a||s.getTime()===l.getTime(),u={calendarId:n.getCalendarId(),title:n.getTitle(),description:n.getDescription(),allDay:a,startDate:s,endDate:l};return d||(u.startTime=s,u.endTime=l),a&&(u.endDate=t.subtract(l,t.DAY,1)),this.setDefaultTime(u,"startTime",this.defaultStartTime),this.setDefaultTime(u,"endTime",this.defaultEndTime),u.calendarId||(e=i.getEditableCalendars()).length&&(u.calendarId=e[0].id),u},produceEventData:function(e){var t=Ext.Date,i=this.getView(),n=e.startTime,r=e.endTime,o=e.startDate,a=e.endDate,s=o.getFullYear(),l=o.getMonth(),d=o.getDate(),u=a.getFullYear(),c=a.getMonth(),h=a.getDate();return e.allDay?(o=t.utc(s,l,d),a=t.add(t.utc(u,c,h),t.DAY,1),delete e.startTime,delete e.endTime):(o=i.toUtcOffset(new Date(s,l,d,n.getHours(),n.getMinutes())),a=i.toUtcOffset(new Date(u,c,h,r.getHours(),r.getMinutes()))),e.startDate=o,e.endDate=a,e},privates:{setDefaultTime:function(e,t,i){e[t]||(e[t]=new Date(2010,0,1,i[0],i[1]))}}}),Ext.define("Ext.calendar.form.Add",{extend:"Ext.calendar.form.Form",xtype:"calendar-form-add",dropButton:null,title:"Add Event"}),Ext.define("Ext.calendar.form.Edit",{extend:"Ext.calendar.form.Form",xtype:"calendar-form-edit",title:"Edit Event"}),Ext.define("Ext.calendar.header.Base",{extend:"Ext.Gadget",mixins:["Ext.mixin.ConfigState"],alternateStateConfig:"compactOptions",config:{cellCls:"",compact:!1,compactOptions:null,format:"",value:null,visibleDays:null},baseCls:Ext.baseCSSPrefix+"calendar-header",constructor:function(e){this.callParent([e]),this.redrawCells()},updateCompact:function(e){var t=this.baseCls;this.element.toggleCls(t+"-compact",e),this.element.toggleCls(t+"-large",!e),this.toggleConfigState(e)},updateCompactOptions:function(){!this.isConfiguring&&this.getCompact()&&this.toggleConfigState()},updateFormat:function(){this.isConfiguring||this.setHeaderText(!0)},applyValue:function(e,t){return e&&t&&e-t==0&&(e=void 0),e},updateValue:function(){this.isConfiguring||this.setHeaderText()},updateVisibleDays:function(){this.isConfiguring||this.redrawCells()},getElementConfig:function(){return{tag:"table",cls:this.$tableCls,reference:"element",children:[{tag:"tbody",children:[{tag:"tr",reference:"row"}]}]}},privates:{domFormat:"Y-m-d",useDates:!0,$headerCls:Ext.baseCSSPrefix+"calendar-header-cell",$hiddenCls:Ext.baseCSSPrefix+"calendar-header-hidden-cell",$tableCls:Ext.baseCSSPrefix+"calendar-header-table",clearCells:function(e){var t=this.row.dom,i=t.childNodes;for(e=e||0;i.length>e;)t.removeChild(i[e])},createCells:function(){var e,t,i=this.row.dom,n=[],r=this.getCreateDays(),o=Ext.baseCSSPrefix+"unselectable "+this.$headerCls,a=this.getCellCls();for(a&&(o+=" "+a),t=0;t<r;++t)(e=document.createElement("td")).className=o,e.setAttribute("data-index",t),this.onCellCreate(e,t),i.appendChild(e),n.push(e);return n},getCreateDays:function(){return this.getVisibleDays()},onCellCreate:Ext.privateFn,redrawCells:function(){this.clearCells(),this.cells=this.createCells(),this.setHeaderText()},setHeaderText:function(){var e,t,i=Ext.Date,n=this.getValue(),r=this.getFormat(),o=this.domFormat,a=this.cells,s=a.length,l=this.useDates;if(n)for(n=i.clone(n),t=0;t<s;++t)e=a[t],l&&e.setAttribute("data-date",i.format(n,o)),e.setAttribute("data-day",n.getDay()),e.innerHTML=i.format(n,r),n=i.add(n,i.DAY,1)}}}),Ext.define("Ext.calendar.header.Days",{extend:"Ext.calendar.header.Base",xtype:"calendar-daysheader",format:"D m/d",compactOptions:{format:"d"},getElementConfig:function(){var e=this.callParent();return e.cls=this.$tableCls,delete e.reference,{cls:Ext.baseCSSPrefix+"calendar-header",reference:"element",children:[e]}},privates:{headerScrollOffsetName:"padding-right",$gutterCls:Ext.baseCSSPrefix+"calendar-header-gutter",createCells:function(){var e=this.row,t=this.callParent();return e.insertFirst({tag:"td",cls:this.$headerCls+" "+this.$gutterCls},!0),e.append({tag:"td",style:"display: none;"},!0),t},setOverflowWidth:function(e){this.element.setStyle(this.headerScrollOffsetName,e+"px")}}}),Ext.define("Ext.calendar.header.Weeks",{extend:"Ext.calendar.header.Base",xtype:"calendar-weeksheader",format:"D",privates:{useDates:!1,getCreateDays:function(){return Ext.Date.DAYS_IN_WEEK},onCellCreate:function(e,t){Ext.fly(e).toggleCls(this.$hiddenCls,t>=this.getVisibleDays())}}}),Ext.define("Ext.calendar.model.EventBase",{extend:"Ext.Mixin",requires:["Ext.calendar.date.Range"],inheritableStatics:{getDaysSpanned:function(e,t){var i=Ext.Date,n=0;for(e=i.clearTime(e,!0);e<t;)++n,e=i.add(e,i.DAY,1);return n},sort:function(e,t){return e.getStartDate().getTime()-t.getStartDate().getTime()||t.getDuration()-e.getDuration()||e.getTitle()-t.getTitle()}},containsRange:function(e,t){return this.getRange().containsRange(e,t)},getCalendar:function(){return this.calendar||null},getRange:function(){return new Ext.calendar.date.Range(this.getStartDate(),this.getEndDate())},isContainedByRange:function(e,t){return this.getRange().isContainedBy(e,t)},isSpan:function(){var e,t=Ext.Date,i=this.data.startTime;return!!this.getAllDay()||(i?(e=t.add(t.clearTime(t.clone(i)),t.DAY,1),t.diff(i,e,"mi")<this.getDuration()):1440<this.getDuration())},occursInRange:function(e,t){return this.getRange().overlaps(e,t)},setCalendar:function(e,t){t=!1!==t,this.calendar=e,this.setCalendarId(e?e.id:null,t)}}),Ext.define("Ext.calendar.model.Event",{extend:"Ext.data.Model",mixins:["Ext.calendar.model.EventBase"],requires:["Ext.data.field.String","Ext.data.field.Integer","Ext.data.field.Date","Ext.data.field.Boolean"],fields:[{name:"title",type:"string"},{name:"calendarId"},{name:"color",type:"string"},{name:"description",type:"string"},{name:"startDate",type:"date",dateFormat:"c"},{name:"endDate",type:"date",dateFormat:"c"},{name:"allDay",type:"boolean"},{name:"duration",type:"int",depends:["startDate","endDate"],calculate:function(e){var t=e.startDate,i=e.endDate,n=0;return i&&t&&(n=i.getTime()-t.getTime()),n/6e4}}],getAllDay:function(){return this.data.allDay},getCalendarId:function(){return this.data.calendarId},getColor:function(){return this.data.color},getDescription:function(){return this.data.description},getDuration:function(){return this.data.duration},getEndDate:function(){return this.data.endDate},getRange:function(){var e=this.range;return e||(this.range=e=new Ext.calendar.date.Range(this.getStartDate(),this.getEndDate())),e},getStartDate:function(){return this.data.startDate},getTitle:function(){return this.data.title},isEditable:function(){var e=this.getCalendar();return!e||e.isEditable()},setAllDay:function(e){this.set("allDay",e)},setCalendarId:function(e,t){t=!1!==t,this.set("calendarId",e,{dirty:t})},setColor:function(e){this.set("color",e)},setData:function(e){var t=e.duration;t?(delete(e=Ext.apply({},e)).duration,this.setDuration(t)):e.startDate&&e.endDate&&(this.range=null),this.set(e)},setDescription:function(e){this.set("description",e)},setDuration:function(e){var t=Ext.Date;this.range=null,this.set("endDate",t.add(this.data.startDate,t.MINUTE,e,!0))},setRange:function(e,t){var i=Ext.Date;e.isRange&&(t=e.end,e=e.start),this.range=null,this.set({startDate:i.clone(e),endDate:i.clone(t)})},setTitle:function(e){this.set("title",e)}}),Ext.define("Ext.calendar.store.Events",{extend:"Ext.data.Store",alias:"store.calendar-events",model:"Ext.calendar.model.Event",requires:["Ext.calendar.model.Event","Ext.calendar.date.Range"],config:{calendar:null,calendarParam:"calendar",dateFormat:"C",endParam:"endDate",prefetchMode:"month",startParam:"startDate"},remoteSort:!1,pageSize:0,sorters:[{direction:"ASC",sorterFn:function(e,t){return Ext.calendar.model.Event.sort(e,t)}}],prefetchSettings:{month:{unit:Ext.Date.MONTH,amount:2},week:{unit:Ext.Date.WEEK,amount:2},day:{unit:Ext.Date.DAY,amount:4}},constructor:function(e){this.requests={},this.callParent([e])},getInRange:function(e,t){var i,n,r=this.data.items,o=r.length,a=[];for(i=0;i<o;++i)(n=r[i]).occursInRange(e,t)&&a.push(n);return a},hasRangeCached:function(e){var t=this.range,i=!1;return t&&(i=t.full.containsRange(e)),i},setRange:function(e){var t,i,n,r,o,a=Ext.Date,s=Ext.calendar.date.Range,l=this.range,d=this.getPrefetchSetting(),u=0,c=!1;n=a.subtract(e.start,d.unit,d.amount,!0),r=a.add(e.end,d.unit,d.amount,!0),o={actual:e.clone(),full:new s(n,r)},this.compareRange(l,o)||l&&l.full.containsRange(o.full)||(this.hasRangeCached(e)?this.hasRangeCached(o.full)||(l.full.start>n&&(t=n,i=l.full.start,++u,c=!0),l.full.end<r&&(t=l.full.end,i=r,++u),1===u?this.prefetchRange(t,i,c,o):2===u?this.loadRange(n,r,o):Ext.raise("Should never be here.")):this.loadRange(o.full.start,o.full.end,o),this.requested=o)},onProxyLoad:function(e){e.wasSuccessful()&&(this.range=this.requested,this.requested=null),this.setCalendarFromLoad=!0,this.callParent([e]),this.setCalendarFromLoad=!1},onCollectionAdd:function(e,t){this.setRecordCalendar(this.getCalendar(),t.items,!this.setCalendarFromLoad),this.callParent([e,t])},onCollectionRemove:function(e,t){this.callParent([e,t]),this.isMoving||this.setRecordCalendar(null,t.items,!0)},privates:{isMoving:0,abortAll:function(){var e,t,i=this.requests;for(t in i)(e=i[t])&&!e.destroyed&&e.abort();this.requests={}},compareRange:function(e,t){return e&&t?e.full.equals(t.full)&&e.actual.equals(t.actual):(e||null)===(t||null)},getPrefetchSetting:function(){return this.prefetchSettings[this.getPrefetchMode()]},loadRange:function(e,t,i){var n=this.requested,r=new Ext.calendar.date.Range(e,t);n&&n.full.equals(r)||(this.abortAll(),this.load({params:this.setupParams(e,t),requested:i}))},onBeforeLoad:function(e){this.requests[e._internalId]=e},onPrefetch:function(e){var t,i,n=this,r=e.getRecords()||[],o=[],a=[],s=Ext.Array.toMap(r,"id"),l=n.getDataSource().getRange(),d=l.length,u=n.range.full.start,c=n.range.full.end;for(e.wasSuccessful()&&(n.range=n.requested,n.requested=null),delete n.requests[e._internalId],n.suspendEvents(),t=0;t<d;++t)s[(i=l[t]).id]||i.occursInRange(u,c)||o.push(i);for(t=0,d=r.length;t<d;++t)i=r[t],n.getById(i.id)||a.push(i);n.ignoreCollectionRemove=n.setCalendarFromLoad=!0,n.getData().splice(0,o,a),n.ignoreCollectionRemove=n.setCalendarFromLoad=!1,n.resumeEvents(),n.fireEvent("prefetch",n,a,o)},prefetch:function(e){var t;e=Ext.apply({internalScope:this,internalCallback:this.onPrefetch},e),this.setLoadOptions(e),t=this.createOperation("read",e),(this.requests[t._internalId]=t).execute()},prefetchRange:function(e,t,i,n){this.prefetch({params:this.setupParams(e,t),isLeading:i,newRequested:n})},setRecordCalendar:function(e,t,i){var n,r,o=t.length;for(n=0;n<o;++n)(r=t[n]).$moving=!0,r.setCalendar(e,i),delete r.$moving},setupParams:function(e,t){var i=Ext.Date,n=this.getDateFormat(),r={};return r[this.getCalendarParam()]=this.getCalendar().id,r[this.getStartParam()]=i.format(e,n),r[this.getEndParam()]=i.format(t,n),r}}}),Ext.define("Ext.calendar.theme.Theme",{singleton:!0,requires:["Ext.util.Color"],colors:["#F44336","#3F51B5","#4CAF50","#FF9800","#E91E63","#2196F3","#8BC34A","#FF5722","#673AB7","#009688","#FFC107","#607D8B"],lightColor:"#FFFFFF",darkColor:"#000000",generatePalette:function(e){var t,i,n=this.light,r=this.dark,o=this.lightColor,a=this.darkColor,s=e.getBrightness();return n||(this.light=n=Ext.util.Color.fromString(o),this.dark=r=Ext.util.Color.fromString(a)),t=Math.abs(n.getBrightness()-s),i=Math.abs(r.getBrightness()-s),{primary:e.toString(),secondary:i<t?o:a,border:e.createDarker(.2).toString()}},getBaseColor:function(e){var t,i=this.idMap,n=this.colors,r=e.id;return(t=i[r])||(t=n[this.current%n.length],i[r]=t,++this.current),t},getPalette:function(e){var t,i=this.colorMap,n=i[e];return n||(t=Ext.util.Color.fromString(e),i[e]=n=this.generatePalette(t)),n},privates:{colorMap:{},idMap:{},current:0,onIdChanged:function(e,t){var i=this.idMap,n=i[t];n&&(delete i[t],i[e]=n)}}}),Ext.define("Ext.calendar.model.CalendarBase",{extend:"Ext.Mixin",requires:["Ext.calendar.store.Events","Ext.calendar.theme.Theme"],config:{eventStoreDefaults:{type:"calendar-events",proxy:{type:"ajax"}}},events:function(){var e,t=this._eventStore;return t||(e=Ext.merge({calendar:this},this.config.eventStoreDefaults,this.eventStoreDefaults,this.get("eventCfg")),this._eventStore=t=Ext.Factory.store(this.getEventStoreConfig(e))),t},getBaseColor:function(){var e=this.getColor()||this.getAssignedColor();return e||(e=Ext.calendar.theme.Theme.getBaseColor(this),this.setAssignedColor(e)),e},isEditable:function(){return this.getEditable()},isHidden:function(){return this.getHidden()},privates:{onIdChanged:function(e,t){Ext.calendar.theme.Theme.onIdChanged(e,t)}}}),Ext.define("Ext.calendar.model.Calendar",{extend:"Ext.data.Model",mixins:["Ext.calendar.model.CalendarBase"],requires:["Ext.data.field.String","Ext.data.field.Boolean"],fields:[{name:"title",type:"string"},{name:"description",type:"string"},{name:"color",type:"string"},{name:"assignedColor",type:"string",persist:!1},{name:"hidden",type:"bool"},{name:"editable",type:"bool",defaultValue:!0},{name:"eventStore",type:"auto",persist:!1}],constructor:function(e,t){this.callParent([e,t]),this.getBaseColor()},getAssignedColor:function(){return this.data.assignedColor},getColor:function(){return this.data.color},getDescription:function(){return this.data.description},getEditable:function(){return this.data.editable},getEventStoreConfig:function(e){return Ext.merge(e,this.data.eventStore)},getHidden:function(){return this.data.hidden},getTitle:function(){return this.data.title},setAssignedColor:function(e){this.set("assignedColor",e)},setColor:function(e){this.set("color",e)},setDescription:function(e){this.set("description",e)},setEditable:function(e){this.set("editable",e)},setHidden:function(e){this.set("hidden",e)},setTitle:function(e){this.set("title",e)}}),Ext.define("Ext.calendar.panel.AbstractBase",{extend:"Ext.panel.Panel",requires:["Ext.layout.container.Fit"],layout:"fit",updateDayHeader:function(e){e&&this.addItem(e,"dockedItems","addDocked")},updateView:function(e){this.addItem(e,"items","add")},afterComponentLayout:function(e,t,i,n){this.callParent([e,t,i,n]),this.syncHeaders()},privates:{addItem:function(e,t,i){var n=this[t];n?n.isMixedCollection?this[i](e):(Ext.isArray(n)||(n=[n]),this[t]=n.concat(e)):this[t]=e},syncHeaders:function(){var e;this.syncHeaderSize&&(e=this.getDayHeader())&&e.setOverflowWidth&&e.setOverflowWidth(this.getView().scrollable.getScrollbarSize().width)}}}),Ext.define("Ext.calendar.panel.Base",{extend:"Ext.calendar.panel.AbstractBase",config:{dayHeader:null,eventRelayers:{view:{beforeeventadd:!0,beforeeventedit:!0,eventadd:!0,eventedit:!0,eventdrop:!0,eventtap:!0,validateeventadd:!0,validateeventedit:!0,validateeventdrop:!0,valuechange:!0}},view:null},platformConfig:{"!desktop":{compact:!0}},configExtractor:{view:{addForm:!0,compact:!0,compactOptions:!0,controlStoreRange:!0,editForm:!0,eventDefaults:!0,gestureNavigation:!0,store:!0,timezoneOffset:!0,value:!0}},twoWayBindable:{value:1},cls:[Ext.baseCSSPrefix+"calendar-base",Ext.baseCSSPrefix+"unselectable"],constructor:function(e){var t,i,n,r,o,a=Ext.Config,s=this.configExtractor,l={};for(t in e=Ext.apply({},e),this.extracted=l,s){for(i in n=s[t],l[t]=r={},e)i in n&&(!0===(o=n[i])&&(o=i),r[o]=e[i],delete e[i]);this.setupProxy(n,a.get(t).names.get)}this.callParent([e]),this.initRelayers()},onClassExtended:function(e,t,i){var n=t.configExtractor;n&&(delete t.configExtractor,e.prototype.configExtractor=Ext.merge({},e.prototype.configExtractor,n))},updateHighlightToday:Ext.emptyFn,getDisplayRange:function(){return this.getView().getDisplayRange()},getVisibleRange:function(){return this.getView().getVisibleRange()},moveNext:function(){this.getView().moveNext()},movePrevious:function(){this.getView().movePrevious()},navigate:function(e,t){this.getView().navigate(e,t)},showAddForm:function(e,t){this.getView().showAddForm(e,t)},showEditForm:function(e,t){this.getView().showEditForm(e,t)},applyDayHeader:function(e){return e&&(e=Ext.apply(this.extracted.dayHeader,e),e=Ext.create(e)),e},updateDayHeader:function(e,t){t&&t.destroy(),e&&this.getView().setHeader(e),this.callParent([e,t])},applyView:function(e){return e=e&&Ext.create(Ext.apply(this.extracted.view,e))},updateView:function(e,t){t&&t.destroy(),this.callParent([e,t])},privates:{calculateMoveNext:function(){return this.getView().calculateMoveNext()},calculateMovePrevious:function(){return this.getView().calculateMovePrevious()},createItemRelayer:function(i){var n=this;return function(e,t){return n.fireEvent(i,n,t)}},generateProxyMethod:function(e,t,i){var n=this,r=t.names.set,o=t.names.get,a=e.names.set,s=e.names.get;n[a]||(n[a]=function(e){var t=n[i]();t&&t[r](e)}),n[s]||(n[s]=function(){var e=n[i]();if(e)return e[o]()})},initRelayers:function(){var e,t,i,n,r,o=Ext.Config,a=this.getEventRelayers();for(e in a)for(n in t=a[e],i=this[o.get(e).names.get](),r=t.$prefix||"",t)i.on(n,this.createItemRelayer(r+n))},refreshEvents:function(){this.getView().refreshEvents()},setupProxy:function(e,t){var i,n,r,o,a=Ext.Config;for(i in e)o=e[i],r=a.get(i),n=!0===o?r:a.get(o),this.generateProxyMethod(r,n,t)}}}),Ext.define("Ext.calendar.store.EventSource",{extend:"Ext.data.Store",requires:["Ext.calendar.date.Range"],config:{source:null},sorters:[{direction:"ASC",sorterFn:function(e,t){return Ext.calendar.model.Event.sort(e,t)}}],trackRemoved:!1,constructor:function(e){this.calendarMap={},this.callParent([e])},createEvent:function(e){this.getSource()||Ext.raise("Cannot create event, no source specified."),this.getSource().first()||Ext.raise("Cannot create event, source is empty.");var t=new(this.getSource().first().events().getModel());return e&&t.setData(e),t},updateSource:function(e){this.sourceListeners=Ext.destroy(this.sourceListeners),e&&(this.sourceListeners=e.on({destroyable:!0,scope:this,add:"checkData",remove:"checkData",refresh:"checkData"}),this.checkData())},add:function(e){var t=this.getEventsForCalendar(e.getCalendarId());t?t.add(e):Ext.raise("Unknown calendar: "+e.getCalendarId())},move:function(e,t){var i,n=this.getEventsForCalendar(t),r=e.getCalendar();r&&(n.suspendAutoSync(),++n.isMoving),n.remove(e),r&&(--n.isMoving,n.resumeAutoSync(),e.unjoin(n),(i=n.removed)&&Ext.Array.remove(i,e),(n=this.getEventsForCalendar(r)).suspendAutoSync(),n.add(e),n.resumeAutoSync())},remove:function(e){var t=this.getEventsForCalendar(e.getCalendarId());t?t.remove(e):Ext.raise("Unknown calendar: "+e.getCalendarId())},hasRangeCached:function(e){var t,i,n=this.calendarMap,r=this.range;if(!r)return!1;for(t in n)if(i=!0,!this.getEventsForCalendar(n[t]).hasRangeCached(e))return!1;return!!i||r.containsRange(e)},setRange:function(e){var t,i,n,r,o,a=this,s=a.calendarMap,l=!0,d=!0;for(n in a.range=e.clone(),s)o=!0,t=(i=a.getEventsForCalendar(s[n])).hasRangeCached(e),d=d&&t,i.setRange(e),t||(r=r||[],i.on("load",function(e,t,i){Ext.Array.remove(r,e),l=l&&i,0===r.length&&a.doBulkLoad(l)},null,{single:!0}),r.push(i),a.activeLoad=!0);o&&d?a.checkData(!0):r&&a.fireEvent("beforeload",a)},doDestroy:function(){var e,t=this.calendarMap;for(e in t)this.untrackCalendar(t[e]);this.calendarMap=this.stores=null,this.setSource(null),this.callParent()},privates:{checkData:function(e){var t,i,n,r,o,a,s=this.calendarMap,l=Ext.apply({},s),d=this.getSource().getRange(),u=d.length,c=[],h=this.range;for(h&&(o=h.start,a=h.end),t=0;t<u;++t)l[i=(n=d[t]).getId()]&&(delete l[i],this.untrackCalendar(s[i])),this.trackCalendar(n),h&&(r=this.getEventsForCalendar(n)).getCount()&&Ext.Array.push(c,r.getInRange(o,a)),s[i]=n;for(i in l)this.untrackCalendar(l[i]),delete s[i];!0!==e&&h&&this.setRange(h),this.loadRecords(c)},doBulkLoad:function(e){var t,i,n=this.calendarMap,r=this.range,o=[];if(e){for(t in n)i=this.getEventsForCalendar(n[t]),Ext.Array.push(o,i.getInRange(r.start,r.end));this.loadRecords(o)}this.fireEvent("load",this,o,e),this.activeLoad=!1},fireChangeEvent:function(){return!1},getEventsForCalendar:function(e){var t=null;return e.isModel||(e=this.calendarMap[e]),e&&(t=e.events()),t},onEventStoreAdd:function(e,t){var i,n,r=this.range,o=t.length,a=[];for(i=0;i<o;++i)(n=t[i]).occursInRange(r.start,r.end)&&a.push(n);0<a.length&&this.getDataSource().add(a)},onEventStoreBeforeUpdate:function(e,t){t.$moving||(this.suspendEvents(),this.lastIndex=this.indexOf(t))},onEventStoreClear:function(e,t){var i;0<t.length&&(this.suspendEvents(),i=this.getDataSource().remove(t),this.resumeEvents(),i&&this.fireEvent("refresh",this))},onEventStorePrefetch:function(e,t,i){this.getDataSource().remove(i)},onEventStoreRefresh:function(){this.activeLoad||this.checkData()},onEventStoreRemove:function(e,t){this.getDataSource().remove(t)},onEventStoreUpdate:function(e,t,i,n,r){if(!t.$moving){var o=this,a=o.lastIndex,s=-1!==o.lastIndex,l=o.contains(t);o.resumeEvents(),s&&l?o.fireEvent("update",o,t,i,n,r):s&&!l?o.fireEvent("remove",o,[t],a,!1):!s&&l&&o.fireEvent("add",o,[t],o.indexOf(t))}},trackCalendar:function(e){var t=this.getEventsForCalendar(e);t.sourceListeners=t.on({destroyable:!0,scope:this,add:"onEventStoreAdd",beforeupdate:"onEventStoreBeforeUpdate",clear:"onEventStoreClear",prefetch:"onEventStorePrefetch",refresh:"onEventStoreRefresh",remove:"onEventStoreRemove",update:"onEventStoreUpdate"})},untrackCalendar:function(e){var t=this.getEventsForCalendar(e);t.sourceListeners=Ext.destroy(t.sourceListeners)}}}),Ext.define("Ext.calendar.store.Calendars",{extend:"Ext.data.Store",alias:"store.calendar-calendars",requires:["Ext.calendar.store.EventSource","Ext.calendar.model.Calendar"],config:{eventStoreDefaults:null},model:"Ext.calendar.model.Calendar",getEventSource:function(){var e=this.eventSource;return e||(this.eventSource=e=new Ext.calendar.store.EventSource({source:this})),e},onCollectionAdd:function(e,t){var i,n,r=this.getEventStoreDefaults(),o=t.items,a=o.length;if(this.callParent([e,t]),r)for(i=0;i<a;++i)(n=o[i]).hasOwnProperty("eventStoreDefaults")||(n.eventStoreDefaults=Ext.merge({},n.eventStoreDefaults,r))},doDestroy:function(){this.eventSource=Ext.destroy(this.eventSource),this.callParent()}}),Ext.define("Ext.calendar.view.Base",{extend:"Ext.Gadget",requires:["Ext.calendar.store.Calendars","Ext.calendar.theme.Theme","Ext.calendar.Event","Ext.Promise","Ext.calendar.date.Range","Ext.calendar.date.Util"],mixins:["Ext.mixin.ConfigState"],alternateStateConfig:"compactOptions",config:{addForm:{xtype:"calendar-form-add"},compact:!1,compactOptions:null,controlStoreRange:!0,editForm:{xtype:"calendar-form-edit"},eventDefaults:{xtype:"calendar-event"},gestureNavigation:!0,header:null,store:null,timezoneOffset:void 0,value:void 0},platformConfig:{"!desktop":{compact:!0}},twoWayBindable:{value:1},constructor:function(e){this.eventMap={},this.eventPool={},this.callParent([e])},getForm:function(){return this.form||null},moveNext:function(){this.setValue(this.calculateMoveNext())},movePrevious:function(){this.setValue(this.calculateMovePrevious())},navigate:function(e,t){var i=Ext.Date;0!==e&&this.setValue(i.add(this.getValue(),t||i.DAY,e,!0))},showAddForm:function(e,t){var i,n=Ext.Date;this.getAddForm()&&(e||(i=this.getDefaultCreateRange(),e=this.createModel({startDate:i.start,endDate:n.add(i.end,n.DAY,1),allDay:!0})),this.doShowForm(e,"add",this.createAddForm(),"onFormCreateSave",t))},showEditForm:function(e,t){this.getEditForm()&&this.doShowForm(e,"edit",this.createEditForm(),"onFormEditSave",t)},createAddForm:function(){return Ext.merge({view:this},this.getAddForm())},createEditForm:function(e){return Ext.merge({view:this},this.getEditForm())},getEventSource:function(){return this.eventSource},updateCompact:function(e){var t=this.baseCls,i=this.getHeader();this.toggleCls(Ext.baseCSSPrefix+"calendar-compact",e),this.toggleCls(t+"-compact",e),this.toggleCls(Ext.baseCSSPrefix+"calendar-large",!e),this.toggleCls(t+"-large",!e),i&&i.setCompact(e),this.toggleConfigState(e)},updateCompactOptions:function(){!this.isConfiguring&&this.getCompact()&&this.toggleConfigState(!0)},updateGestureNavigation:function(e){var t;Ext.supports.Touch&&(t=e?"on":"un",this.getBodyElement()[t]("swipe","onBodySwipe",this))},updateHeader:function(e,t){t&&t.destroy(),e&&(e.setCompact(this.getCompact()),this.refreshHeaders())},applyStore:function(e){return e=e&&Ext.StoreManager.lookup(e,"calendar-calendars")},updateStore:function(e,t){var i=this;i.eventSource=null,t&&(t.getAutoDestroy()?t.destroy():(t.getEventSource().un(i.getSourceListeners()),t.un(i.getStoreListeners()))),e&&(e.on(i.getStoreListeners()),i.eventSource=e.getEventSource(),i.eventSource.on(i.getSourceListeners()),i.isConfiguring||(i.onSourceAttach(),i.refreshEvents()))},applyTimezoneOffset:function(e){return this.autoOffset=!1,void 0===e&&(e=Ext.calendar.date.Util.getDefaultTimezoneOffset(),this.autoOffset=!0),e},applyValue:function(e,t){return e=Ext.Date.clearTime(e||Ext.calendar.date.Util.getLocalNow(),!0),t&&t.getTime()===e.getTime()&&(e=void 0),e},updateValue:function(e){this.isConfiguring||this.fireEvent("valuechange",this,{value:e})},doDestroy:function(){this.clearEvents(),this.form=Ext.destroy(this.form),this.setHeader(null),this.setStore(null),this.callParent()},privates:{$eventCls:Ext.baseCSSPrefix+"calendar-event",$eventInnerCls:Ext.baseCSSPrefix+"calendar-event-inner",$eventColorCls:Ext.baseCSSPrefix+"calendar-event-marker-color",$staticEventCls:Ext.baseCSSPrefix+"calendar-event-static",$tableCls:Ext.baseCSSPrefix+"calendar-table",eventRefreshSuspend:0,refreshCounter:0,forwardDirection:"left",backwardDirection:"right",dateInfo:null,calculateMove:function(e){var t=this.getMoveInterval(),i=this.getMoveBaseValue();return Ext.Date.add(i,t.unit,e*t.amount,!0)},calculateMoveNext:function(){return this.calculateMove(1)},calculateMovePrevious:function(){return this.calculateMove(-1)},clearEvents:function(){var e,t=this.eventMap;for(e in t)t[e].destroy();this.eventMap={}},createEvent:function(e,t,i){var n,r,o=Ext.apply({},this.getEventDefaults());return i?(r=this.getUtcNow(),t.startDate=r,t.endDate=r):t.palette=this.getEventPalette(e),(t=t||{}).model=e,t.view=this,n=Ext.widget(Ext.apply(t,o)),i||(this.eventMap[n.id]=n),n},createEvents:function(e,t){var i,n=e.length,r=[];for(i=0;i<n;++i)r.push(this.createEvent(e[i],Ext.apply({},t)));return r},createModel:function(e){return this.getEventSource().createEvent(e)},doRefresh:Ext.privateFn,doRefreshEvents:Ext.privateFn,doShowForm:function(r,o,e,a,s){var t,l=this;l.getStore()&&r.isEditable()&&!1!==l.fireEvent("beforeevent"+o,l,{event:r})&&(s=s||{},l.form=t=Ext.create(Ext.apply({event:r},e)),t.on({save:function(t,e){var i=e.data,n={event:r,data:i,validate:Ext.Promise.resolve(!0)};l.fireEvent("validateevent"+o,l,n),n.validate.then(function(e){!1!==e?(s.onSave&&s.onSave.call(s.scope||l,l,r,i),l[a](t,r,i),l.fireEvent("event"+o,l,{event:r,data:i})):l.onFormCancel(t)})},cancel:function(e,t){s.onCancel&&s.onCancel.call(s.scope||l,l,r),l.onFormCancel(e),l.fireEvent("event"+o+"cancel",l,{event:r})},close:function(e){s.onCancel&&s.onCancel.call(s.scope||l,l,r),l.onFormCancel(e)},drop:function(t){var e={event:r,validate:Ext.Promise.resolve(!0)};l.fireEvent("validateeventdrop",l,e),e.validate.then(function(e){!1!==e?(s.onDrop&&s.onDrop.call(s.scope||l,l,r),l.onFormDrop(t,r),l.fireEvent("eventdrop",l,{event:r})):l.onFormCancel(t)})}}),t.show())},getBodyElement:function(){return this.element},getCalendar:function(e){return this.getStore().getById(e)},getDaysSpanned:function(e,t,i){var n=Ext.Date;return i?n.diff(e,t,n.DAY):(e=this.utcToLocal(e),t=this.utcToLocal(t),Ext.calendar.model.Event.getDaysSpanned(e,t))},getDefaultCreateRange:function(){var e,t=Ext.calendar.date.Util.getLocalNow(),i=this.getDisplayRange();return t=this.toUtcOffset(Ext.Date.clearTime(t,!0)),e=i.contains(t)?Ext.Date.localToUtc(t):this.toUtcOffset(i.start),new Ext.calendar.date.Range(e,e)},getDefaultPalette:function(){var e,t,i=this.getStore(),n=Ext.calendar.theme.Theme;return i&&(e=i.first())&&(t=e.getBaseColor()),n.getPalette(t||n.colors[0])},getEditableCalendars:function(){var e,t=this.getStore();return t&&(e=Ext.Array.filter(t.getRange(),function(e){return e.isEditable()})),e||[]},getEvent:function(e){var t,i=this.$eventCls;return e.isEvent&&(e=e.target),Ext.fly(e).hasCls(i)||(e=Ext.fly(e).up("."+i,this.element,!0)),t=e.getAttribute("data-eventId"),this.getEventSource().getById(t)},getEventDaysSpanned:function(e){return this.getDaysSpanned(e.getStartDate(),e.getEndDate(),e.getAllDay())},getEventPalette:function(e){var t=e.getColor()||e.getCalendar().getBaseColor();return Ext.calendar.theme.Theme.getPalette(t)},getMoveBaseValue:function(){return this.getValue()},getMoveInteral:Ext.privateFn,getSourceListeners:function(){return{scope:this,add:"onSourceAdd",refresh:"onSourceRefresh",remove:"onSourceRemove",update:"onSourceUpdate"}},getStoreListeners:function(){return{scope:this,update:"onStoreUpdate"}},getUtcNow:function(){return Ext.Date.utcToLocal(new Date)},handleChange:function(t,i,n,e){var r=this,o={event:i,newRange:n.clone(),validate:Ext.Promise.resolve(!0)},a=e||Ext.emptyFn;r.fireEvent("validateevent"+t,r,o),o.validate.then(function(e){!1!==e?(a(!0),i.setRange(n),r.fireEvent("event"+t,r,{event:i,newRange:n.clone()})):a(!1)})},handleChangeStart:function(e,t){var i=t.isEditable();return i=i&&this.fireEvent("beforeevent"+e+"start",this,{event:t})},handleResize:Ext.privateFn,hasEditableCalendars:function(){return 0<this.getEditableCalendars().length},isEventHidden:function(e){var t=e.getCalendar();return!t||t.isHidden()},onBodySwipe:function(e){e.direction===this.forwardDirection?this.moveNext():e.direction===this.backwardDirection&&this.movePrevious()},onEventTap:function(e){this.fireEvent("eventtap",this,{event:e}),this.showEditForm(e)},onFormCreateSave:function(e,t,i){t.setData(i),t.setCalendar(this.getCalendar(t.getCalendarId())),this.getEventSource().add(t),this.form=Ext.destroy(e)},onFormEditSave:function(e,t,i){var n,r=t.getCalendar();this.suspendEventRefresh(),t.setData(i),n=t.getCalendarId(),r.id!==n&&(t.setCalendar(this.getCalendar(n)),this.getEventSource().move(t,r)),this.resumeEventRefresh(),this.refreshEvents(),this.form=Ext.destroy(e)},onFormDrop:function(e,t){this.getEventSource().remove(t),this.form=Ext.destroy(e)},onFormCancel:function(e){this.form=Ext.destroy(e)},onSourceAdd:function(){this.refreshEvents()},onSourceAttach:Ext.privateFn,onSourceRefresh:function(){this.refreshEvents()},onSourceRemove:function(){this.refreshEvents()},onSourceUpdate:function(){this.refreshEvents()},onStoreUpdate:function(){this.refreshEvents()},refresh:function(){this.isConfiguring||(++this.refreshCounter,this.doRefresh(),this.hasListeners.refresh&&this.fireEvent("refresh",this))},refreshEvents:function(){this.eventRefreshSuspend||this.isConfiguring||(this.refreshCounter||this.refresh(),this.doRefreshEvents())},refreshHeaders:Ext.privateFn,resumeEventRefresh:function(){--this.eventRefreshSuspend},setSourceRange:function(e){if(this.getControlStoreRange()){var t,i=this.getEventSource();i&&(e=Ext.calendar.date.Util.expandRange(e),t=i.hasRangeCached(e),i.setRange(e),t&&this.refreshEvents())}},suspendEventRefresh:function(){++this.eventRefreshSuspend},toUtcOffset:function(e){var t,i=Ext.Date,n=i.localToUtc(e),r=this.autoOffset,o=r?n.getTimezoneOffset():this.getTimezoneOffset();return r&&(t=e.getTimezoneOffset())!==o&&(o+=t-o),i.add(n,i.MINUTE,o,!1)},utcToLocal:function(e){var t=Ext.Date,i=this.getTimezoneOffset(),n=e.getTimezoneOffset();return this.autoOffset?t.clone(e):t.subtract(e,t.MINUTE,i-n,!0)},utcTimezoneOffset:function(e){var t=Ext.Date,i=this.autoOffset?e.getTimezoneOffset():this.getTimezoneOffset();return t.subtract(e,t.MINUTE,i,!0)}}}),Ext.define("Ext.overrides.calendar.view.Base",{override:"Ext.calendar.view.Base",constructor:function(e){this.callParent([e]),this.initialized=!0},render:function(e,t){this.callParent([e,t]),this.initialized&&!this.getRefOwner()&&this.refresh()},afterComponentLayout:function(e,t,i,n){this.callParent([e,t,i,n]),this.handleResize()},privates:{refreshEvents:function(){0!==this.element.dom.offsetHeight&&this.callParent()}}}),Ext.define("Ext.calendar.view.DaysRenderer",{end:null,start:null,view:null,constructor:function(e){var t,i;Ext.apply(this,e),i=(t=this.view).slotTicks,this.slots=(t.getEndTime()-t.getStartTime())*(60/i),this.offset=t.MS_TO_MINUTES*i,this.events=[]},addIf:function(e){var t,i,n=this.start,r=this.view,o=this.offset;!e.isSpan()&&e.isContainedByRange(n,this.end)&&(t=Math.max(0,(r.roundDate(e.getStartDate())-n)/o),i=Math.min(this.slots,(r.roundDate(e.getEndDate())-n)/o),this.events.push({event:e,start:t,end:i,len:i-t,colIdx:-1,overlaps:[],edgeWeight:-1,forwardPos:-1,backwardPos:-1}))},calculate:function(){var e,t,i,n,r=this.events;if(r.sort(this.sortEvents),e=this.buildColumns(r),this.constructOverlaps(e),n=e[0]){for(t=n.length,i=0;i<t;++i)this.calculateEdgeWeights(n[i]);for(i=0;i<t;++i)this.calculatePositions(n[i],0,0)}},hasEvents:function(){return 0<this.events.length},privates:{appendOverlappingEvents:function(e,t){this.doOverlap(e,t,e.overlaps)},buildColumns:function(e){var t,i,n,r,o,a=e.length,s=[];for(t=0;t<a;++t){for(o=-1,r=e[t],i=0,n=s.length;i<n;++i)if(!this.hasOverlappingEvents(r,s[i])){o=i;break}-1===o&&(s[o=s.length]=[]),s[o].push(r),r.colIdx=o}return s},calculateEdgeWeights:function(e){var t,i=e.overlaps,n=i.length,r=e.edgeWeight;if(-1===r){for(t=r=0;t<n;++t)r=Math.max(r,this.calculateEdgeWeights(i[t])+1);e.edgeWeight=r}return r},calculatePositions:function(e,t,i){var n,r,o,a,s=e.overlaps,l=s.length,d=t+1;if(-1===e.forwardPos)for(0===l?e.forwardPos=1:(s.sort(this.sortOverlaps),o=s[0],this.calculatePositions(o,d,i),e.forwardPos=o.backwardPos),a=(n=e.forwardPos)-i,e.backwardPos=n-a/d,r=1;r<l;++r)this.calculatePositions(s[r],0,n)},constructOverlaps:function(e){var t,i,n,r,o,a,s=e.length;for(i=0;i<s;++i)for(n=0,o=(t=e[i]).length;n<o;++n)for(a=t[n],r=i+1;r<s;++r)this.appendOverlappingEvents(a,e[r])},doOverlap:function(e,t,i){var n,r,o=t.length,a=!1;for(n=0;n<o;++n)if(r=t[n],this.overlaps(e,r)){if(!i)return!0;i.push(r),a=!0}return a},hasOverlappingEvents:function(e,t){return this.doOverlap(e,t)},overlaps:function(e,t){return e.start<t.end&&e.end>t.start},sortEvents:function(e,t){return Ext.calendar.model.EventBase.sort(e.event,t.event)},sortOverlaps:function(e,t){return t.edgeWeight-e.edgeWeight||(e.backwardPos||0)-(t.backwardPos||0)||Ext.calendar.model.EventBase.sort(e.event,t.event)}}}),Ext.define("Ext.calendar.view.Days",{extend:"Ext.calendar.view.Base",xtype:"calendar-daysview",requires:["Ext.calendar.view.DaysRenderer","Ext.calendar.Event","Ext.scroll.NativeScroller","Ext.calendar.util.Dom"],uses:["Ext.calendar.dd.DaysAllDaySource","Ext.calendar.dd.DaysAllDayTarget","Ext.calendar.dd.DaysBodySource","Ext.calendar.dd.DaysBodyTarget"],isDaysView:!0,baseCls:Ext.baseCSSPrefix+"calendar-days",cellOverflowScrollBug:Ext.isGecko||Ext.isIE11m||Ext.isEdge,config:{allowSelection:!0,compactOptions:{displayOverlap:!1,showNowMarker:!1,timeFormat:"g",timeRenderer:function(e,t,i){var n,r,o=Ext.Date,a="";return i&&(r=Ext.baseCSSPrefix+"calendar-days-time-ampm",(n=o.clone(this.baseDate)).setHours(e),a='<div class="'+r+'">'+Ext.Date.format(n,"a")+"</div>"),t+a}},displayOverlap:!0,draggable:!0,droppable:!0,endTime:20,resizeEvents:!0,showNowMarker:!0,startTime:8,timeFormat:"H:i",timeRenderer:null,visibleDays:4},constructor:function(e){var t=this;t.slotsPerHour=60/t.slotTicks,t.callParent([e]),t.scrollable=t.createScroller(),t.bodyTable.on("tap","handleEventTap",t,{delegate:"."+t.$eventCls}),t.allDayContent.on("tap","handleEventTap",t,{delegate:"."+t.$eventCls}),t.recalculate(),t.refreshHeaders()},getDisplayRange:function(){var e;return this.isConfiguring&&this.recalculate(),e=this.dateInfo.active,new Ext.calendar.date.Range(this.utcToLocal(e.start),this.utcToLocal(e.end))},getVisibleRange:function(){var e,t=Ext.Date;return this.isConfiguring&&this.recalculate(),e=this.dateInfo.active,new Ext.calendar.date.Range(t.clone(e.start),t.clone(e.end))},setTimeRange:function(e,t){this.isConfiguring=!0,this.setStartTime(e),this.setEndTime(t),this.isConfiguring=!1,this.suspendEventRefresh(),this.recalculate(),this.resumeEventRefresh(),this.refresh()},updateAllowSelection:function(e){var t=this;t.allDaySelectionListeners=t.selectionListeners=Ext.destroy(t.selectionListeners,t.allDaySelectionListeners),e&&(t.bodySelectionListeners=t.bodyTable.on({destroyable:!0,scope:t,touchstart:"onBodyTouchStart",touchmove:"onBodyTouchMove",touchend:"onBodyTouchEnd"}),t.allDaySelectionListeners=t.headerWrap.on({destroyable:!0,scope:t,touchstart:"onAllDayTouchStart",touchmove:"onAllDayTouchMove",touchend:"onAllDayTouchEnd"}))},updateDisplayOverlap:function(e){this.isConfiguring||this.refreshEvents()},applyDraggable:function(e){return e=e&&new Ext.calendar.dd.DaysBodySource},updateDraggable:function(e,t){t&&(t.destroy(),this.allDayDrag=Ext.destroy(this.allDayDrag)),e&&(e.setView(this),this.allDayDrag=new Ext.calendar.dd.DaysAllDaySource,this.allDayDrag.setView(this))},applyDroppable:function(e){return e&&!e.isInstance&&(e=new Ext.calendar.dd.DaysBodyTarget(e)),e},updateDroppable:function(e,t){t&&(t.destroy(),this.allDayDrop=Ext.destroy(this.allDayDrop)),e&&(e.setView(this),this.allDayDrop=new Ext.calendar.dd.DaysAllDayTarget,this.allDayDrop.setView(this))},updateEndTime:function(){this.calculateSlots(),this.isConfiguring||this.refresh()},updateResizeEvents:function(e){this.dragListeners=Ext.destroy(this.dragListeners),e&&(this.dragListeners=this.bodyTable.on({scope:this,dragstart:"onResizerDragStart",drag:"onResizerDrag",dragend:"onResizerDragEnd",destroyable:!0,delegate:"."+this.$resizerCls,priority:1001})),this.isConfiguring||this.destroying||this.refreshEvents()},updateShowNowMarker:function(e){var t=this.markerEl;Ext.uninterval(this.showNowInterval),this.showNowInterval=null,this.markerEl=null,t&&Ext.fly(t).remove(),e&&(this.isConfiguring||this.checkNowMarker(),this.showNowInterval=Ext.interval(this.checkNowMarker,3e5,this))},updateStartTime:function(){this.calculateSlots(),this.isConfiguring||this.refresh()},updateTimeFormat:function(){this.isConfiguring||this.updateTimeLabels()},updateTimeRenderer:function(){this.isConfiguring||this.updateTimeLabels()},updateTimezoneOffset:function(){this.isConfiguring||this.recalculate()},updateValue:function(e,t){this.isConfiguring||(this.recalculate(),this.refreshHeaders(),this.checkNowMarker(),this.refreshEvents()),this.callParent([e,t])},updateVisibleDays:function(){this.isConfiguring||(this.suspendEventRefresh(),this.recalculate(),this.resumeEventRefresh(),this.refresh())},getElementConfig:function(){var e=this.callParent(),t=[{tag:"table",cls:this.$tableCls+" "+this.$bodyTableCls,reference:"bodyTable",children:[{tag:"tbody",children:[{tag:"tr",reference:"timeRow",children:[{tag:"td",reference:"timeContainer",cls:this.$timeContainerCls}]}]}]}];return e.children=[{cls:Ext.baseCSSPrefix+"calendar-days-table-wrap",reference:"tableWrap",children:[{cls:Ext.baseCSSPrefix+"calendar-days-header-wrap",reference:"headerWrap",children:[{cls:Ext.baseCSSPrefix+"calendar-days-allday-background-wrap",reference:"allDayBackgroundWrap",children:[{tag:"table",cls:this.$tableCls+" "+Ext.baseCSSPrefix+"calendar-days-allday-background-table",children:[{tag:"tbody",children:[{tag:"tr",reference:"allDayBackgroundRow",children:[{tag:"td",cls:this.$headerGutterCls}]}]}]}]},{tag:"table",cls:this.$tableCls+" "+Ext.baseCSSPrefix+"calendar-days-allday-events",children:[{tag:"tbody",reference:"allDayContent",children:[{tag:"tr",reference:"allDayEmptyRow"}]}]}]},{cls:Ext.baseCSSPrefix+"calendar-days-body-row",children:[{cls:Ext.baseCSSPrefix+"calendar-days-body-cell",reference:this.cellOverflowScrollBug?null:"bodyWrap",children:this.cellOverflowScrollBug?[{cls:Ext.baseCSSPrefix+"calendar-days-body-wrap",reference:"bodyWrap",children:t}]:t}]}]}],e},doDestroy:function(){this.scrollable=Ext.destroy(this.scrollable),this.setAllowSelection(!1),this.setShowNowMarker(!1),this.setResizeEvents(!1),this.setDraggable(null),this.setDroppable(null),this.callParent()},privates:{$allDayBackgroundCls:Ext.baseCSSPrefix+"calendar-days-allday-background-cell",$allDayEmptyRowCls:Ext.baseCSSPrefix+"calendar-days-allday-empty-cell",$bodyCls:Ext.baseCSSPrefix+"calendar-days-body",$bodyTableCls:Ext.baseCSSPrefix+"calendar-days-body-table",$dayColumnCls:Ext.baseCSSPrefix+"calendar-days-day-column",$dayEventContainerCls:Ext.baseCSSPrefix+"calendar-days-day-event-container",$headerGutterCls:Ext.baseCSSPrefix+"calendar-days-header-gutter",$markerAltCls:Ext.baseCSSPrefix+"calendar-days-marker-alt",$markerCls:Ext.baseCSSPrefix+"calendar-days-marker",$nowMarkerCls:Ext.baseCSSPrefix+"calendar-days-now-marker",$resizerCls:Ext.baseCSSPrefix+"calendar-event-resizer",$resizingCls:Ext.baseCSSPrefix+"calendar-event-resizing",$selectionCls:Ext.baseCSSPrefix+"calendar-days-selection",$tableCls:Ext.baseCSSPrefix+"calendar-days-table",$timeCls:Ext.baseCSSPrefix+"calendar-days-time",$timeContainerCls:Ext.baseCSSPrefix+"calendar-days-time-ct",baseDate:new Date(2008,0,1),MS_TO_MINUTES:6e4,minimumEventMinutes:30,slotTicks:5,slotsPerHour:null,backPosName:"left",forwardPosName:"right",headerScrollOffsetName:"padding-right",calculateSlots:function(){this.maxSlots=2*(this.getEndTime()-this.getStartTime())},checkNowMarker:function(){this.getShowNowMarker()&&this.doCheckNowMarker()},clearAndPopulate:function(e,t,i){for(var n,r=e.dom.childNodes,o=t.length,a=i?0:1;r.length>a;)e.removeChild(r[a]);for(n=0;n<o;++n)e.appendChild(t[n],!0)},clearEvents:function(){var e,t;if(this.callParent(),e=this.allDayContent.dom)for(t=e.childNodes;1<t.length;)e.removeChild(t[0])},clearSelected:function(){this.selectRange(-1,-1)},constructAllDayEvents:function(e){var t,i,n,r,o,a,s,l,d,u,c=Ext.Date,h=e.length,f=this.getVisibleDays(),g=this.allDayEmptyRow.dom,p=this.allDayContent.dom;for(t=new Ext.calendar.view.WeeksRenderer({view:this,start:c.clone(this.dateInfo.full.start),days:f,index:0,maxEvents:null}),n=0;n<h;++n)i=e[n],!this.isEventHidden(i)&&i.isSpan()&&t.addIf(i);if(g.firstChild.className===this.$headerGutterCls&&g.removeChild(g.firstChild),t.hasEvents())for(t.calculate(),n=0,h=t.rows.length;n<h;++n){for(r=t.compress(n),d=document.createElement("tr"),o=0,l=r.length;o<l;++o)a=r[o],(u=document.createElement("td")).colSpan=a.len,a.isEmpty||((s=this.createEvent(a.event,{},!1)).addCls(this.$staticEventCls),u.appendChild(s.element.dom)),d.appendChild(u);p.insertBefore(d,g)}Ext.fly(p.firstChild).insertFirst({tag:"td",cls:this.$headerGutterCls,rowSpan:p.childNodes.length})},constructEvents:function(){var e,t,i,n,r,o=this,a=Ext.Date,s=o.getEventSource().getRange(),l=s.length,d=o.getVisibleDays(),u=a.clone(o.dateInfo.visible.start),c=u,h=o.getEndTime()-o.getStartTime();for(o.constructAllDayEvents(s),e=0;e<d;++e){for(c=a.add(u,a.HOUR,h,!0),n=document.createDocumentFragment(),i=new Ext.calendar.view.DaysRenderer({view:o,start:u,end:c}),t=0;t<l;++t)r=s[t],o.isEventHidden(r)||i.addIf(r);i.hasEvents()&&(i.calculate(),o.processDay(i,n)),o.getEventColumn(e).appendChild(n),u=a.add(u,a.DAY,1)}},createEvent:function(e,t,i){var n=!!e&&e.getAllDay();return(t=t||{}).mode=n?"weekspan":"day",n||(t.resize=this.getResizeEvents()),this.callParent([e,t,i])},createScroller:function(){return new Ext.scroll.NativeScroller({element:this.bodyWrap,x:!1,y:!0})},doCheckNowMarker:function(){var e,t,i=this,n=Ext.Date,r=i.markerEl,o=i.roundDate(Ext.calendar.date.Util.getLocalNow()),a=i.dateInfo.visible,s=i.utcToLocal(a.start),l=i.utcToLocal(a.end),d=i.getVisibleDays(),u=o.getFullYear(),c=o.getMonth(),h=o.getDate(),f=o.getHours(),g=o.getMinutes(),p=i.getStartTime(),m=i.getEndTime();if(r&&Ext.fly(r).remove(),i.markerEl=null,i.element.isVisible(!0)){if(s<=o&&o<l)for(t=0;t<d;++t){if(s.getFullYear()===u&&s.getMonth()===c&&s.getDate()===h){p<=f&&(f<m||f===m&&0===g)&&(s.setHours(p),e=n.diff(s,o,n.MINUTE)/i.slotTicks*i.getSlotStyle().minSlotHeight);break}s=n.add(s,n.DAY,1)}void 0!==e&&(i.markerEl=Ext.fly(i.getColumn(t)).createChild({cls:i.$nowMarkerCls,style:{top:e+"px"}},null,!0))}},doRecalculate:function(e){var t,i,n=Ext.Date,r=Ext.calendar.date.Range;return e=e||n.clone(this.getValue()),e=this.toUtcOffset(n.clearTime(e,!0)),t=n.add(e,n.DAY,this.getVisibleDays()),i=n.subtract(t,n.DAY,1),{full:new r(e,t),active:new r(e,i),visible:new r(n.add(e,n.HOUR,this.getStartTime(),!0),n.subtract(t,n.HOUR,24-this.getEndTime(),!0))}},doRefresh:function(){var e,t=this,i=t.timeContainer,n=t.allDayBackgroundRow;t.dateInfo||(t.suspendEventRefresh(),t.recalculate(),t.resumeEventRefresh()),i.dom.innerHTML="",i.appendChild(t.generateTimeElements(),!0),t.clearAndPopulate(t.allDayEmptyRow,t.generateAllDayCells(t.$allDayEmptyRowCls,"&#160;"),!0),t.clearAndPopulate(n,t.generateAllDayCells(t.$allDayBackgroundCls)),t.clearAndPopulate(t.timeRow,t.generateColumns()),e=Ext.Array.toArray(t.allDayBackgroundRow.dom.childNodes),t.backgroundCells=Ext.Array.slice(e,1),t.checkNowMarker(),t.refreshHeaders(),t.syncHeaderScroll(),t.refreshEvents()},doRefreshEvents:function(){var e=this.getEventSource();this.clearEvents(),e&&e.getCount()&&this.constructEvents()},generateAllDayCells:function(e,t){var i,n=[],r=this.getVisibleDays();for(i=0;i<r;++i)n.push({tag:"td",cls:e,html:t});return n},generateColumns:function(){var e,t,i,n,r=this.getVisibleDays(),o=this.getStartTime(),a=this.getEndTime(),s=[];for(t=0;t<r;++t){for(n=[],e={tag:"td",cls:this.$dayColumnCls,"data-index":t,children:[{cls:this.$dayEventContainerCls},{cls:this.$markerContainerCls,children:n}]},i=o;i<a;++i)n.push({cls:this.$markerCls,children:[{cls:this.$markerAltCls}]});s.push(e)}return s},generateTimeElements:function(){var e,t=this.generateTimeLabels(),i=t.length,n=[];for(e=0;e<i;++e)n.push({cls:this.$timeCls,html:t[e]});return n},generateTimeLabels:function(){var e,t,i,n,r,o=Ext.Date,a=o.clone(this.baseDate),s=this.getStartTime(),l=this.getEndTime(),d=this.getTimeFormat(),u=[],c=this.getTimeRenderer();for(n=s;n<l;++n)a.setHours(n),i=o.format(a,d),c&&(r=!1,n<12&&!e?r=e=!0:12<=n&&!t&&(r=t=!0),i=c.call(this,n,i,r)),u.push(i);return u},getBodyElement:function(){return this.bodyTable},getColumn:function(e){return this.getColumns()[e]},getColumns:function(){return this.bodyTable.query("."+this.$dayColumnCls)},getEventColumn:function(e){return Ext.fly(this.getColumn(e)).down("."+this.$dayEventContainerCls)},getEventStyle:function(){var e,t,i,n=this.eventStyle;return n||((t=(e=this.createEvent(null,{resize:!0},!0)).element).dom.style.visibility="hidden",this.getEventColumn(0).appendChild(t.dom),(i=t.getMargin()).height=i.top+i.bottom,this.eventStyle=n={margin:i,resizerWidth:Ext.fly(t.down("."+this.$resizerCls,!0)).getWidth()},e.destroy()),n},getEventWidget:function(e){var t,i,n=this.eventMap,r=e.id;for(t in n)if((i=n[t]).getModel().id===r)return i;return null},getMoveInterval:function(){return{unit:Ext.Date.DAY,amount:this.getVisibleDays()}},getSlotStyle:function(){var e,t=this.slotStyle;return t||(e=Ext.fly(this.bodyTable.down("."+this.$markerCls,!0)).getHeight(),this.slotStyle=t={hourHeight:e,halfHeight:e/2,minSlotHeight:e/this.slotsPerHour}),t},handleEventTap:function(e){var t=this.getEvent(e);t&&(e.preventDefault(),this.onEventTap(t))},handleResize:function(){this.slotStyle=null,this.callParent(),this.refreshEvents(),this.checkNowMarker(),this.syncHeaderScroll()},onAllDayTouchEnd:function(e){var t,i,n,r,o,a,s=Ext.Date,l=this.isAllDayCreating;l&&(t=l.initialIndex,i=Ext.calendar.util.Dom.getIndexPosition(l.positions,e.pageX),n=l.startDate,o=Math.abs(i-t),i<t?(r=n,n=s.subtract(r,s.DAY,o)):r=s.add(n,s.DAY,o),a=this.createModel({startDate:s.localToUtc(n),endDate:s.add(s.localToUtc(r),s.DAY,1),allDay:!0}),this.showAddForm(a,{scope:this,onSave:this.clearSelected,onCancel:this.clearSelected}),this.isAllDayCreating=null)},onAllDayTouchMove:function(e){var t,i,n=this.isAllDayCreating;n&&(t=n.initialIndex,i=Ext.calendar.util.Dom.getIndexPosition(n.positions,e.pageX),this.selectRange(t,i))},onAllDayTouchStart:function(e){var t,i,n=Ext.Date,r=this.utcToLocal(this.dateInfo.full.start);"touch"===e.pointerType||e.getTarget("."+this.$eventCls,this.headerWrap)||(t=Ext.calendar.util.Dom.extractPositions(this.backgroundCells,"getX"),i=Ext.calendar.util.Dom.getIndexPosition(t,e.pageX),this.isAllDayCreating={positions:t,initialIndex:i,startDate:n.add(r,n.DAY,i)},this.selectRange(i,i))},onBodyTouchEnd:function(e){var t,i,n,r,o,a=this.isBodyCreating;a&&((t=a.widget)&&(r=t.getStartDate(),o=t.getEndDate(),i=function(){t.destroy()},n=this.createModel({startDate:r,endDate:o}),this.showAddForm(n,{onSave:i,onCancel:i})),this.isBodyCreating=null)},onBodyTouchMove:function(e){var t,i,n,r,o,a,s,l,d=this,u=Ext.Date,c=d.isBodyCreating,h=d.minimumEventMinutes,f=d.getEventStyle().margin;c&&((i=c.widget)||(t=(i=d.createEvent(null,{},!0)).element,i.setPalette(d.getDefaultPalette()),i.addCls(d.$resizingCls),i.setWidth("100%"),t.setZIndex(999),d.getEventColumn(c.index).appendChild(t),c.widget=i),t=i.element,(n=d.slotFromPosition(e.getY()))<0||n>d.maxSlots||((r=c.startSlot)===n&&(n=r+1),a=n<r?(o=n,r):(o=r,n),t.setStyle({top:f.top+d.slotToPosition(o)+"px",marginTop:0,marginBottom:0}),i.setHeight((a-o)*d.getSlotStyle().halfHeight-f.bottom),s=u.clone(c.baseDate),s=u.add(s,u.MINUTE,o*h,!0),l=u.add(s,u.MINUTE,(a-o)*h,!0),i.setStartDate(s),i.setEndDate(l)))},onBodyTouchStart:function(e){var t,i,n,r=Ext.Date;"touch"===e.pointerType||e.getTarget("."+this.$eventCls,this.bodyTable)||(t=e.getTarget("."+this.$dayColumnCls))&&(i=parseInt(t.getAttribute("data-index"),10),n=r.add(this.dateInfo.visible.start,r.DAY,i),this.isBodyCreating={col:t,index:i,baseDate:n,startSlot:this.slotFromPosition(e.getY())})},onResizerDrag:function(e){if(this.resizing){var t,i=Ext.Date,n=this.resizing,r=n.event,o=n.widget,a=this.getSlotStyle().halfHeight,s=this.slotFromPosition(e.getY()),l=s*a-n.eventTop,d=n.startSlot,u=r.getStartDate(),c=this.minimumEventMinutes;e.stopEvent(),s<0||s>this.maxSlots||s<=d||(n.current=t=i.add(u,i.MINUTE,c*(s-d),!0),o.setHeight(l),o.setEndDate(t))}},onResizerDragEnd:function(){if(this.resizing){function e(e){o.destroyed||(o.element.setZIndex(n.oldZIndex),o.removeCls(t.$resizingCls)),e||(o.setHeight(a),o.setEndDate(s.getEndDate()))}var t=this,i=Ext.calendar.date.Range,n=t.resizing,r=n.current,o=n.widget,a=n.height,s=n.event;t.resizing=null,r?t.handleChange("resize",s,new i(s.getStartDate(),r),e):e()}},onResizerDragStart:function(e){var t,i,n,r=this.getEvent(e);e.stopEvent(),!1!==this.handleChangeStart("resize",r)&&(n=(i=(t=this.getEventWidget(r)).element).getTop(!0),this.resizing={height:t.getHeight(),event:r,eventTop:n,startSlot:this.slotFromPosition(n,!0),widget:t,oldZIndex:i.getZIndex()},t.addCls(this.$resizingCls),i.setZIndex(999))},onSourceAttach:function(){this.recalculate()},processDay:function(e,t){var i,n,r,o,a,s,l,d,u=e.events,c=u.length,h=this.getSlotStyle().minSlotHeight,f=this.getEventStyle(),g=f.margin,p=0,m=this.getDisplayOverlap();for(this.getResizeEvents()&&(p=f.resizerWidth+5),i=0;i<c;++i)s=(n=u[i]).forwardPos,l=n.backwardPos,m&&(s=Math.min(1,l+2*(s-l))),o=l,a=1-s,r=this.createEvent(n.event),(d={marginTop:0,marginBottom:0,top:n.start*h+g.top+"px",zIndex:n.colIdx+1})[this.backPosName]=100*o+"%",d[this.forwardPosName]=100*a+"%",m&&0<n.edgeWeight&&(d.marginRight=p+"px"),r.setStyle(d),r.setHeight(n.len*h-g.bottom),t.appendChild(r.element.dom)},recalculate:function(){var e=this.doRecalculate();this.dateInfo=e,this.setSourceRange(e.full)},refreshHeaders:function(){var e=this.getHeader(),t=this.dateInfo;e&&(e.setVisibleDays(this.getVisibleDays()),t&&e.setValue(this.utcToLocal(t.full.start)))},roundDate:function(e){return new Date(Ext.Number.roundToNearest(e.getTime(),this.slotTicks))},selectRange:function(e,t){var i,n=this.backgroundCells,r=n.length;for(t<e&&(i=e,e=t,t=i),i=0;i<r;++i)Ext.fly(n[i]).toggleCls(this.$selectionCls,e<=i&&i<=t)},slotFromPosition:function(e,t){var i=e-(t?0:this.bodyTable.getY());return Math.round(i/this.getSlotStyle().halfHeight)},slotToPosition:function(e){return e*this.getSlotStyle().halfHeight},syncHeaderScroll:function(){var e,t=this.scrollable,i=this.headerScrollOffsetName;t&&(e=t.getScrollbarSize().width+"px",this.headerWrap.setStyle(i,e),this.allDayBackgroundWrap.setStyle(i,e))},updateTimeLabels:function(){var e,t,i=this.generateTimeLabels(),n=this.timeContainer.dom.childNodes;for(i.length!==n.length&&Ext.raise("Number of generated times did not match"),t=0,e=i.length;t<e;++t)n[t].innerHTML=i[t]}}}),Ext.define("Ext.overrides.calendar.view.Days",{override:"Ext.calendar.view.Days",requires:["Ext.calendar.form.Edit","Ext.calendar.form.Add"],privates:{doRefresh:function(){this.setBodyWrapSize(),this.callParent(),this.updateLayout()},doRefreshEvents:function(){this.callParent(),this.setBodyWrapSize(),this.syncHeaderScroll(),this.fireEvent("eventrefresh",this,{})},setBodyWrapSize:function(){var e,t=this.tableWrap,i=this.bodyWrap;Ext.isIE10m&&(e=Ext.fly(t.dom.parentNode).getHeight(),t.setHeight(e),i.setHeight(e-this.headerWrap.getHeight()))}}}),Ext.define("Ext.calendar.panel.Days",{extend:"Ext.calendar.panel.Base",xtype:"calendar-days",requires:["Ext.calendar.header.Days","Ext.calendar.view.Days"],config:{dayHeader:{xtype:"calendar-daysheader"},eventRelayers:{view:{beforeeventdragstart:!0,validateeventdrop:!0,eventdrop:!0,beforeeventresizestart:!0,validateeventresize:!0,eventresize:!0}},view:{xtype:"calendar-daysview"}},configExtractor:{dayHeader:{dayHeaderFormat:"format"},view:{allowSelection:!0,displayOverlap:!0,draggable:!0,droppable:!0,endTime:!0,resizeEvents:!0,showNowMarker:!0,startTime:!0,timeFormat:!0,visibleDays:!0,highlightToday:!0}},setTimeRange:function(e,t){this.getView().setTimeRange(e,t)},privates:{syncHeaderSize:!0}}),Ext.define("Ext.overrides.calendar.panel.Days",{override:"Ext.calendar.panel.Days",updateView:function(e,t){this.callParent([e,t]),e.on("eventrefresh","onEventRefresh",this)},privates:{onEventRefresh:function(){this.syncHeaders()}}}),Ext.define("Ext.calendar.view.Day",{extend:"Ext.calendar.view.Days",xtype:"calendar-dayview",config:{compactOptions:{displayOverlap:!0},visibleDays:1},privates:{getMoveInterval:function(){return{unit:Ext.Date.DAY,amount:1}}}}),Ext.define("Ext.calendar.panel.Day",{extend:"Ext.calendar.panel.Days",xtype:"calendar-day",requires:["Ext.calendar.view.Day"],config:{view:{xtype:"calendar-dayview"}}}),Ext.define("Ext.calendar.view.WeeksRenderer",{days:null,index:null,maxEvents:null,overflow:!0,start:null,view:null,constructor:function(e){var t,i=this,n=Ext.Date;Ext.apply(i,e),t=i.start,i.end=n.add(t,n.DAY,i.days),i.utcStart=this.view.utcTimezoneOffset(t),i.utcEnd=this.view.utcTimezoneOffset(i.end),i.hasMaxEvents=null!==i.maxEvents,i.rows=[],i.events=[],i.seen={},i.overflows=[]},addIf:function(e){var t,i;i=e.getAllDay()?(t=this.utcStart,this.utcEnd):(t=this.start,this.end),e.occursInRange(t,i)&&this.events.push(e)},calculate:function(){var e,t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E,b,C,S=this,w=Ext.Date,T=S.view,P=S.seen,k=S.events,I=k.length,R=S.days,M=S.end,A=S.utcEnd,D=w.clone(S.start),F=w.clone(S.utcStart),L=S.maxEvents,O=S.hasMaxEvents,B=S.overflows,N=S.overflow?1:0,H=[];for(e=0;e<R;++e){for(a=w.add(D,w.DAY,1),o=S.view.utcTimezoneOffset(a),i=[],t=0;t<I;++t)s=(n=k[t]).id,h=(f=n.getAllDay())?(u=F,c=o,A):(u=D,c=a,M),n.occursInRange(u,c)&&(m=n.isSpan(),P[s]?m&&i.push({isPlaceholder:!0,event:n,id:s}):(d=1,m&&(d=h<(l=n.getEndDate())?R-e:T.getDaysSpanned(u,l,f)),P[s]=d,i.push({event:n,id:s})));if(r=i.length,i.sort(S.sortEvents),O){if(E={},B[e]=v=[],v.$map=E,0<e)for(b=B[e-1].$map,t=0;t<r;++t)b[s=(g=i[t]).id]&&(v.push(g.event),E[s]=!0,i.splice(t,1),y=!0,--t,--r);if(0<r)if(L<r){for(p=Math.max(0,L-N),t=0,x=(C=Ext.Array.splice(i,p)).length;t<x;++t)g=C[t],v.push(g.event),E[g.id]=!0;y=!0}else 0<N&&v.length&&r===L&&(g=i.pop(),v.push(g.event),E[g.id]=!0)}H.push(i),D=a,F=o}for(y&&0<L&&S.calculateOverflows(H,B),e=0;e<R;++e)for(r=(i=H[e]).length,t=0;t<r;++t)(g=i[t]).isPlaceholder||(n=g.event,S.addToRow(n,e,P[n.id]))},compress:function(e){for(var t,i=this.rows[e],n=[],r=this.days,o=0,a=0;a<r;)(t=i[a]).event?(0<o&&(n.push({isEmpty:!0,len:o}),o=0),n.push(t),a+=t.len):(++o,++a);return 0<o&&n.push({isEmpty:!0,len:o}),n},hasEvents:function(){return 0<this.events.length},privates:{addToRow:function(e,t,i){var n,r,o,a,s,l=this.rows,d=l.length,u=i+t;for(r=0;r<d;++r){for(a=l[r],o=t;o<u&&!a[o];++o);if(o===u){n=a,s=r;break}}n||(n=this.makeRow(),l.push(n),s=l.length-1),this.occupy(e,n,s,t,u-1)},calculateOverflows:function(e,t){var i,n,r,o,a,s=this.days,l=this.maxEvents;for(i=s-2;0<=i;--i)0<(r=(n=e[i]).length)&&0===t[i].length&&r===l&&(a=(o=n[r-1]).id,t[i+1].$map[a]&&(t[i].unshift(o.event),t[i].$map[a]=!0,n.length=r-1))},makeRow:function(){var e,t=[],i=this.days;for(e=0;e<i;++e)t[e]=0;return t},occupy:function(e,t,i,n,r){var o,a=r-n+1;for(o=n;o<=r;++o)t[o]=o!==n||{event:e,len:a,start:n,weekIdx:this.index,localIdx:i}},sortEvents:function(e,t){return e=e.event,(t=t.event).isSpan()-e.isSpan()||Ext.calendar.model.Event.sort(e,t)}}});Ext.define("Ext.calendar.view.Weeks",{extend:"Ext.calendar.view.Base",xtype:"calendar-weeksview",requires:["Ext.calendar.view.WeeksRenderer"],uses:["Ext.calendar.dd.WeeksSource","Ext.calendar.dd.WeeksTarget"],isWeeksView:!0,baseCls:Ext.baseCSSPrefix+"calendar-weeks",config:{addOnSelect:!0,allowSelection:!0,compactOptions:{overflowText:"+{0}",showOverflow:"top"},dayFormat:"j",draggable:!0,droppable:!0,firstDayOfWeek:void 0,overflowText:"+{0} more",showOverflow:"bottom",value:void 0,visibleDays:7,visibleWeeks:2,weekendDays:void 0},constructor:function(e){this.callParent([e]),this.el.on("tap","handleEventTap",this,{delegate:"."+this.$eventCls}),this.cellTable.on("click","onOverflowClick",this,{delegate:"."+this.$overflowCls}),this.recalculate(),this.refreshHeaders()},getDisplayRange:function(){var e;return this.isConfiguring&&this.recalculate(),e=this.dateInfo[this.displayRangeProp],new Ext.calendar.date.Range(this.utcToLocal(e.start),this.utcToLocal(e.end))},getVisibleRange:function(){var e,t=Ext.Date;return this.isConfiguring&&this.recalculate(),e=this.dateInfo.visible,new Ext.calendar.date.Range(t.clone(e.start),t.clone(e.end))},updateAllowSelection:function(e){this.selectionListeners=Ext.destroy(this.selectionListeners),e&&this.el.on({destroyable:!0,scope:this,touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",longpress:"onLongPress"})},updateDayFormat:function(e){this.isConfiguring||this.refresh()},updateDaysInWeek:function(){this.refresh()},applyDraggable:function(e){return e=e&&new Ext.calendar.dd.WeeksSource(e)},updateDraggable:function(e,t){t&&t.destroy(),e&&e.setView(this)},applyDroppable:function(e){return e=e&&new Ext.calendar.dd.WeeksTarget},updateDroppable:function(e,t){t&&t.destroy(),e&&e.setView(this)},applyFirstDayOfWeek:function(e){return"number"!=typeof e&&(e=Ext.Date.firstDayOfWeek),e},updateFirstDayOfWeek:function(e){this.isConfiguring||(this.recalculate(),this.refreshHeaders(),this.refresh())},updateShowOverflow:function(e,t){var i=Ext.baseCSSPrefix+"calendar-weeks-with-overflow-",n=this.element;t&&n.removeCls(i+t),e&&n.addCls(i+e),this.isConfiguring||this.refresh()},updateTimezoneOffset:function(){this.isConfiguring||this.recalculate()},updateValue:function(e,t){this.isConfiguring||(this.suspendEventRefresh(),this.recalculate(),this.resumeEventRefresh(),this.refreshHeaders(),this.refresh()),this.callParent([e,t])},updateVisibleDays:function(){this.isConfiguring||(this.recalculate(),this.refreshHeaders(),this.refresh())},updateVisibleWeeks:function(e){var t=this,i=t.cellTable;t.suspendEventRefresh(),t.recalculate(),t.resumeEventRefresh(),i.removeChild(i.dom.firstChild),i.createChild({tag:"tbody",children:t.generateCells(t.dateInfo.requiredWeeks,!0)},null,!0),t.cells=t.queryCells(),t.isConfiguring||t.refresh()},applyWeekendDays:function(e){return e||Ext.Date.weekendDays},updateWeekendDays:function(e){this.weekendDayMap=Ext.Array.toMap(e),this.refresh()},getElementConfig:function(){var e=this.callParent();return e.children=[{tag:"table",reference:"cellTable",cls:this.$tableCls+" "+Ext.baseCSSPrefix+"calendar-weeks-week-rows",children:[{tag:"tbody"}]}],e},doDestroy:function(){this.setAllowSelection(!1),this.setDraggable(null),this.setDroppable(null),this.callParent()},privates:{displayRangeProp:"visible",domFormat:"Y-m-d",eventGutter:5,maxDayMonth:new Date(2e3,0,1),sundayDay:new Date(2e3,9,1),startMarginName:"left",trackRanges:!1,$rowCls:Ext.baseCSSPrefix+"calendar-weeks-row",$cellCls:Ext.baseCSSPrefix+"calendar-weeks-cell",$weekendCls:Ext.baseCSSPrefix+"calendar-weeks-weekend-cell",$outsideCls:Ext.baseCSSPrefix+"calendar-weeks-outside-cell",$pastCls:Ext.baseCSSPrefix+"calendar-weeks-past-cell",$futureCls:Ext.baseCSSPrefix+"calendar-weeks-future-cell",$todayCls:Ext.baseCSSPrefix+"calendar-weeks-today-cell",$selectionCls:Ext.baseCSSPrefix+"calendar-weeks-selection",$dayTextCls:Ext.baseCSSPrefix+"calendar-weeks-day-text",$hiddenCellCls:Ext.baseCSSPrefix+"calendar-weeks-hidden-cell",$cellInnerCls:Ext.baseCSSPrefix+"calendar-weeks-cell-inner",$overflowCls:Ext.baseCSSPrefix+"calendar-weeks-overflow",$cellOverflowCls:Ext.baseCSSPrefix+"calendar-weeks-overflow-cell",$overflowPopupCls:Ext.baseCSSPrefix+"calendar-weeks-overflow-popup",clearSelected:function(){var e,t=this.cells,i=t.length;for(e=0;e<i;++e)Ext.fly(t[e]).removeCls(this.$selectionCls)},constructEvents:function(){var e,t,i,n,r,o=this,a=Ext.Date,s=Ext.Date.DAYS_IN_WEEK,l=o.getEventSource().getRange(),d=l.length,u=o.getVisibleDays(),c=o.dateInfo.requiredWeeks,h=a.clone(o.dateInfo.visible.start),f=o.getEventStyle().fullHeight,g=Math.floor(o.getDaySizes().heightForEvents/f),p="bottom"===o.getShowOverflow(),m=[];for(o.weeks=m,n=document.createDocumentFragment(),e=0;e<c;++e){for(i=new Ext.calendar.view.WeeksRenderer({view:o,start:h,days:u,index:e,overflow:p,maxEvents:g}),t=0;t<d;++t)r=l[t],o.isEventHidden(r)||i.addIf(r);i.hasEvents()&&i.calculate(),o.processWeek(i,n),m.push(i),h=a.add(h,a.DAY,s)}o.element.appendChild(n)},createEvent:function(e,t,i){var n=!e||e.isSpan();return t=Ext.apply({mode:n?"weekspan":"weekinline"},t),this.callParent([e,t,i])},doRecalculate:function(e){var t,i,n,r=Ext.Date,o=r.DAYS_IN_WEEK,a=this.getVisibleWeeks(),s=Ext.calendar.date.Range;return e=e||this.getValue(),i=((e=r.clearTime(e,!0)).getDay()+o-this.getFirstDayOfWeek())%o,t=this.toUtcOffset(e),{full:new s(e=r.subtract(t,r.DAY,i),n=r.add(e,r.DAY,a*o-(o-this.getVisibleDays()))),visible:new s(e,n),active:new s(e,r.subtract(n,r.DAY,1)),requiredWeeks:a}},doRefresh:function(){var e,t,i,n,r,o,a=this,s=Ext.Date,l=a.dateInfo,d=a.getDayFormat(),u=a.weekendDayMap,c=s.clearTime(Ext.calendar.date.Util.getLocalNow()),h=a.utcToLocal(l.visible.start),f=[],g=a.trackRanges,p=a.getVisibleDays(),m=Ext.Date.DAYS_IN_WEEK,x=c.getFullYear(),y=c.getMonth(),v=c.getDate();for(g&&(r=a.utcToLocal(l.month.start),o=a.utcToLocal(l.month.end)),i=0,t=(e=a.cells).length;i<t;++i)n=e[i],f.length=0,f.push(a.$cellCls),u[h.getDay()]&&f.push(a.$weekendCls),g&&(h<r?f.push(a.$pastCls,a.$outsideCls):o<h&&f.push(a.$futureCls,a.$outsideCls)),h.getFullYear()===x&&h.getMonth()===y&&h.getDate()===v&&(f.push(a.$todayCls),a.highlightToday&&f.push(a.$todayCellHighlightCls+"-weeks-day")),p<=i%m&&f.push(a.$hiddenCellCls),n.className=f.join(" "),n.setAttribute("data-date",s.format(h,a.domFormat)),n.firstChild.firstChild.innerHTML=s.format(h,d),h=s.add(h,s.DAY,1);a.refreshEvents()},doRefreshEvents:function(){var e=this.getEventSource();this.clearEvents(),this.hideOverflowPopup(),e&&e.getCount()&&this.constructEvents()},findIndex:function(e,t){for(var i=0,n=e.length;i<n&&!((t-=e[i])<=0);)++i;return i},generateCells:function(e,t){var i,n,r,o,a,s=Ext.Date.DAYS_IN_WEEK,l=[];for(t&&(i=100/e,Ext.isGecko&&(i=parseInt(i,10)),a={height:i+"%"}),n=0;n<e;++n){for(o=[],r=0;r<s;++r)o.push({tag:"td","data-index":r,cls:this.$cellCls,children:[{cls:this.$cellInnerCls,children:[{tag:"span",cls:this.$dayTextCls},{cls:this.$overflowCls}]}]});l.push({tag:"tr",cls:this.$rowCls,"data-week":n,children:o,style:a})}return l},getCell:function(e){var t,i,n=null,r=this.cells,o=r.length;for(Ext.isDate(e)&&(e=Ext.Date.format(e,this.domFormat)),t=0;t<o;++t)if((i=r[t]).getAttribute("data-date")===e){n=i;break}return n},getCellByPosition:function(e,t){var i,n,r,o;return i=this.getDaySizes(),n=this.element.getXY(),r=this.findIndex(i.widths,e-n[0]),o=this.findIndex(i.heights,t-n[1]),this.cells[o*Ext.Date.DAYS_IN_WEEK+r]},getCellFromEvent:function(e,t){var i,n;return!(i=e.getTarget("."+this.$cellCls,this.element))&&t&&(n=e.getXY(),i=this.getCellByPosition(n[0],n[1])),i},getDateFromCell:function(e){return Ext.Date.parse(e.getAttribute("data-date"),this.domFormat)},getDaySizes:function(){var e,t,i,n,r,o,a,s=this.daySizes,l=this.cells,d=this.getVisibleDays(),u=Number.MAX_VALUE;if(!this.daySizes){for(e=l[0],t=(i=Ext.fly(e.firstChild)).getPadding("tb")+Ext.fly(e.firstChild.firstChild).getHeight(),n=[],r=[],o=0;o<d;++o)i=Ext.fly(l[o]),n.push(i.getWidth()),a=i.getHeight(),r.push(a),a<u&&(u=a);this.daySizes=s={widths:n,heights:r,headerHeight:t,heightForEvents:Math.max(0,u-t-this.eventGutter)}}return s},getEventStyle:function(){var e,t,i,n,r=this.eventStyle;return r||((t=(e=this.createEvent(null,null,!0)).element).dom.style.visibility="hidden",this.element.appendChild(t),n=t.getHeight(),(i=t.getMargin()).height=i.top+i.bottom,i.width=i.left+i.right,this.eventStyle=r={margin:i,height:n,fullHeight:n+i.height},e.destroy()),r},getEventWidget:function(e){var t,i=this.$eventCls;return e.isEvent&&(e=e.target),Ext.fly(e).hasCls(i)||(e=Ext.fly(e).up("."+i,this.element,!0)),t=e.getAttribute("data-componentid"),this.eventMap[t]},getMoveBaseValue:function(){return this.utcToLocal(this.dateInfo.visible.start)},getMoveInterval:function(){var e=Ext.Date;return{unit:e.DAY,amount:e.DAYS_IN_WEEK*this.getVisibleWeeks()}},handleEventTap:function(e){var t=this.getEvent(e);t&&(this.hideOverflowPopup(),this.onEventTap(t))},handleResize:function(){this.callParent(),this.daySizes=null,this.hideOverflowPopup(),this.refreshEvents()},hideOverflowPopup:Ext.privateFn,maybeShowAddForm:function(e,t){var i,n=Ext.Date;this.getAddOnSelect()&&this.hasEditableCalendars()&&this.getAddForm()&&(i=this.createModel({allDay:!0,startDate:n.localToUtc(e),endDate:n.add(n.localToUtc(t),n.DAY,1)}),this.showAddForm(i,{scope:this,onSave:this.clearSelected,onCancel:this.clearSelected}))},onLongPress:function(e){var t,i=this.getCellFromEvent(e);i&&(t=this.getDateFromCell(i),this.fireEvent("select",this,{date:t}),this.maybeShowAddForm(t,t))},onOverflowClick:function(e){var t=this.getCellFromEvent(e),i=this.getDateFromCell(t),n=parseInt(t.parentNode.getAttribute("data-week"),10),r=parseInt(t.getAttribute("data-index"),10);this.showOverflowPopup(this.weeks[n].overflows[r],i,t)},onSourceAttach:function(){this.recalculate()},onTouchEnd:function(){var e,t,i,n=this,r=n.cells;n.isSelecting&&((e=n.selectedStartIndex)===(t=n.selectedEndIndex)?(e=t=n.getDateFromCell(r[e]),n.fireEvent("select",n,{date:e})):(t<e&&(i=t,t=e,e=i),e=n.getDateFromCell(r[e]),t=n.getDateFromCell(r[t]),n.fireEvent("selectrange",n,{range:new Ext.calendar.date.Range(e,t)})),n.maybeShowAddForm(e,t),n.isSelecting=!1)},onTouchMove:function(e){var t,i,n,r,o,a=this.selectedStartIndex,s=this.cells,l=s.length;if(this.isSelecting)for(r=this.getCellFromEvent(e,!0),a<(i=Ext.Array.indexOf(s,r))?t=i:i<a?(t=a,a=i,o=!0):t=a,this.selectedEndIndex=o?a:t,n=0;n<l;++n)Ext.fly(s[n]).toggleCls(this.$selectionCls,a<=n&&n<=t)},onTouchStart:function(e,t){var i,n=this.element;"touch"===e.pointerType||e.getTarget("."+this.$overflowCls,n)||e.getTarget("."+this.$overflowPopupCls,n)||(i=this.getCellFromEvent(e))&&(this.isSelecting=!0,this.selectedStartIndex=this.selectedEndIndex=Ext.Array.indexOf(this.cells,i),Ext.fly(i).addCls(this.$selectionCls))},positionEvent:function(e,t){var i,n=this.getDaySizes(),r=this.getEventStyle(),o=r.margin,a=n.widths,s=t.start,l=t.localIdx,d=t.weekIdx;i=n.headerHeight+r.height*l+(l+1)*o.height,e.setTop(this.positionSum(0,d,n.heights)+i),e.setLeft(this.positionSum(0,s,a)+o[this.startMarginName]),e.setWidth(this.positionSum(s,t.len,a)-o.width)},positionSum:function(e,t,i){var n,r=0,o=e+t;for(n=e;n<o;++n)r+=i[n];return r},processWeek:function(e,t){var i,n,r,o,a,s,l,d,u,c=e.rows,h=e.days,f=e.overflows,g=e.index*Ext.Date.DAYS_IN_WEEK,p=this.getShowOverflow(),m=this.cells,x=this.$cellOverflowCls,y=this.getOverflowText();if(c)for(r=0,u=c.length;r<u;++r)for(a=0,o=(n=e.compress(r)).length;a<o;++a)(s=n[a]).isEmpty||((l=this.createEvent(s.event).element).dom.style.margin="0",t.appendChild(l.dom),this.positionEvent(l,s));for(r=0;r<h;++r)d=m[g+r],(i=f&&f[r])&&i.length&&p?(Ext.fly(d).addCls(x),d.firstChild.lastChild.innerHTML=Ext.String.format(y,i.length)):Ext.fly(d).removeCls(x)},queryCells:function(){return this.element.query("."+this.$cellCls)},recalculate:function(){var e=this.doRecalculate();this.dateInfo=e,this.setSourceRange(e.visible)},refreshHeaders:function(){var e=this.getHeader(),t=this.dateInfo;e&&(e.setVisibleDays(this.getVisibleDays()),t&&e.setValue(this.utcToLocal(t.visible.start)))},selectRange:function(e,t){var i,n,r=Ext.Date,o=this.dateInfo.active,a=this.cells,s=a.length,l=!1;if(e<o.start&&(e=o.start),t>o.end&&(t=o.end),e=this.getCell(r.clearTime(e,!0)),t=this.getCell(r.clearTime(t,!0)),e&&t)for(i=0;i<s;++i)(n=a[i])===e&&(l=!0),Ext.fly(n).toggleCls(this.$selectionCls,l),n===t&&(l=!1)},showOverflowPopup:Ext.privateFn}}),Ext.define("Ext.overrides.calendar.view.Weeks",{override:"Ext.calendar.view.Weeks",requires:["Ext.calendar.form.Edit","Ext.calendar.form.Add"],doDestroy:function(){this.tip=Ext.destroy(this.tip),this.callParent()},privates:{doRefresh:function(){this.callParent(),this.updateLayout()},hideOverflowPopup:function(){var e=this.tip;e&&(e.hide(),e.removeAll())},showOverflowPopup:function(e,t,i){var n=this.tip;n||(this.tip=n=new Ext.tip.ToolTip({ui:"calendar-overflow",anchor:!0,renderTo:document.body,hidden:!0,autoHide:!1,cls:this.$overflowPopupCls,minWidth:200,defaultAlign:"tc-bc?"}),this.tip.el.on("tap","handleEventTap",this,{delegate:"."+this.$eventCls})),n.removeAll(),e=this.createEvents(e,{cls:this.$staticEventCls}),n.add(e),n.el.dom.setAttribute("data-date",Ext.Date.format(t,this.domFormat)),n.showBy(i)}}}),Ext.define("Ext.calendar.panel.Weeks",{extend:"Ext.calendar.panel.Base",xtype:"calendar-weeks",requires:["Ext.calendar.header.Weeks","Ext.calendar.view.Weeks"],config:{dayHeader:{xtype:"calendar-weeksheader"},eventRelayers:{view:{beforeeventdragstart:!0,validateeventdrop:!0,eventdrop:!0}},view:{xtype:"calendar-weeksview"}},configExtractor:{dayHeader:{dayHeaderFormat:"format"},view:{addOnSelect:!0,allowSelection:!0,dayFormat:!0,draggable:!0,droppable:!0,firstDayOfWeek:!0,overflowText:!0,showOverflow:!0,visibleDays:!0,visibleWeeks:!0,weekendDays:!0,highlightToday:!0}}}),Ext.define("Ext.calendar.view.Month",{extend:"Ext.calendar.view.Weeks",xtype:"calendar-monthview",config:{value:void 0,visibleWeeks:6},nextMonth:function(e){this.navigate(this.getNavigateValue(e),Ext.Date.MONTH)},nextYear:function(e){this.navigate(this.getNavigateValue(e),Ext.Date.YEAR)},previousMonth:function(e){this.navigate(-this.getNavigateValue(e),Ext.Date.MONTH)},previousYear:function(e){this.navigate(-this.getNavigateValue(e),Ext.Date.YEAR)},privates:{displayRangeProp:"month",maxWeeks:6,$rowClasses:[Ext.baseCSSPrefix+"calendar-month-4weeks",Ext.baseCSSPrefix+"calendar-month-5weeks",Ext.baseCSSPrefix+"calendar-month-6weeks"],$todayCellHighlightCls:Ext.baseCSSPrefix+"today-cell-highlight",trackRanges:!0,doRecalculate:function(e){var t,i,n,r,o,a,s=Ext.Date,l=s.DAYS_IN_WEEK,d=this.getFirstDayOfWeek(),u=this.maxWeeks,c=this.getVisibleWeeks(),h=this.getVisibleDays(),f=Ext.calendar.date.Range;return a=((e=s.getFirstDateOfMonth(e||this.getValue())).getDay()+l-d)%l,n=this.toUtcOffset(e),r=s.getLastDateOfMonth(e),o=this.toUtcOffset(r),null===c&&(h<=a&&(a=h-a),t=a+s.getDaysInMonth(e),u=Math.ceil(t/l)),i=l*u-(l-h),{full:new f(e=s.subtract(n,s.DAY,a),i=s.add(e,s.DAY,i)),visible:new f(e,i),active:new f(e,s.subtract(i,s.DAY,1)),month:new f(n,o),requiredWeeks:u}},doRefresh:function(){var e=this.$rowClasses,t=this.dateInfo.requiredWeeks;this.element.replaceCls(e,e[t-1-e.length]),this.callParent()},getMoveBaseValue:function(){return this.utcToLocal(this.dateInfo.month.start)},getMoveInterval:function(){return{unit:Ext.Date.MONTH,amount:1}},generateCells:function(){return this.callParent([this.maxWeeks,!1])},getNavigateValue:function(e){return e||0===e?e:1}}}),Ext.define("Ext.calendar.panel.Month",{extend:"Ext.calendar.panel.Weeks",xtype:"calendar-month",requires:["Ext.calendar.view.Month"],config:{view:{xtype:"calendar-monthview"}},autoSize:!1,nextMonth:function(e){this.getView().nextMonth(e)},nextYear:function(e){this.getView().nextYear(e)},previousMonth:function(e){this.getView().previousMonth(e)},previousYear:function(e){this.getView().previousYears(e)},updateHighlightToday:function(e){var t,i,n=this.getView(),r=n.getHeader();i=Ext.Date.format(new Date,r.domFormat),(t=n.element.selectNode('td[data-date="'+i+'"]',!1))&&t.toggleCls(n.$todayCellHighlightCls+"-weeks-day",e)}}),Ext.define("Ext.calendar.panel.AbstractPanel",{extend:"Ext.panel.Panel",requires:["Ext.layout.container.Border","Ext.button.Segmented","Ext.toolbar.Toolbar"],layout:"border",config:{createButton:{ui:"default-small"},sideBar:{region:"west",collapsible:!0}},items:[{xtype:"panel",reference:"mainContainer",region:"center",layout:"fit"}],initComponent:function(){var e;this.callParent(),e=this.lookup("mainContainer"),this.addSideBar({collapsed:this.getCompact()}),this.addTitleBar(),e.add(this.createView()),this.refreshCalTitle()},onRender:function(e,t){this.callParent([e,t]),this.body.unselectable()},updateCompact:function(e){this.isConfiguring||this.reconfigureItems()},updateCreateButtonPosition:function(){var e,t=this.sheet;this.isConfiguring||(e=t&&t.isVisible(),this.reconfigureItems(),e&&this.showSheet())},updateSwitcherPosition:function(){var e,t=this.sheet;this.isConfiguring||(e=t&&t.isVisible(),this.reconfigureItems(),e&&this.showSheet())},privates:{addSideBar:function(){var e=this.createSideBar();e&&this.add(e)},addTitleBar:function(){var e=this.createTitleBar();e&&this.lookup("mainContainer").addDocked(e)},createSideBar:function(e){var t=[];return"sideBar"===this.getCreateButtonPosition()&&t.push({xtype:"container",margin:"0 0 10 0",layout:{type:"hbox",pack:"center"},items:this.createCreateButton()}),t.push(this.createCalendarList()),"sideBar"===this.getSwitcherPosition()&&t.push(this.createSwitcher({vertical:!0})),e=Ext.merge({reference:"sideBar",layout:{type:"vbox",align:"stretch"}},e),this.createContainerWithChildren(e,this.getSideBar(),t)},createTitleBar:function(){var e=[];return"titleBar"===this.getCreateButtonPosition()&&e.push(this.createCreateButton({margin:"0 10 0 0"})),e.push(this.createTodayButton(),{xtype:"segmentedbutton",allowToggle:!1,items:[this.createPreviousButton(),this.createNextButton()]},this.createDateTitle()),"titleBar"===this.getSwitcherPosition()&&e.push({xtype:"component",flex:1},this.createSwitcher()),this.createContainerWithChildren({reference:"titleBar"},this.getTitleBar(),e)},onSwitcherChange:function(e,t){this.doSetView(t,!0)},reconfigureItems:function(){Ext.suspendLayouts(),Ext.destroy(this.lookup("titleBar"),this.lookup("sideBar")),this.addTitleBar(),this.addSideBar({collapsed:this.getCompact()}),this.refreshCalTitle(),Ext.resumeLayouts(!0)},setSwitcherValue:function(e){var t=this.lookup("switcher");t?t.setValue(e):this.setView(e,!0)}}}),Ext.define("Ext.calendar.view.Week",{extend:"Ext.calendar.view.Days",xtype:"calendar-weekview",config:{firstDayOfWeek:void 0,visibleDays:7},applyFirstDayOfWeek:function(e){return"number"!=typeof e&&(e=Ext.Date.firstDayOfWeek),e},updateFirstDayOfWeek:function(){this.isConfiguring||(this.recalculate(),this.refreshHeaders(),this.checkNowMarker())},privates:{doRecalculate:function(e){var t,i,n,r=Ext.Date,o=Ext.calendar.date.Range,a=r.DAYS_IN_WEEK;return e=e||this.getValue(),t=((e=r.clearTime(e,!0)).getDay()+a-this.getFirstDayOfWeek())%a,e=this.toUtcOffset(e),e=r.subtract(e,r.DAY,t),n=r.add(e,r.DAY,this.getVisibleDays()),i=r.subtract(n,r.DAY,1),{full:new o(e,n),active:new o(e,i),visible:new o(r.add(e,r.HOUR,this.getStartTime(),!0),r.subtract(n,r.HOUR,24-this.getEndTime(),!0))}},getMoveBaseValue:function(){return this.utcToLocal(this.dateInfo.full.start)},getMoveInterval:function(){var e=Ext.Date;return{unit:e.DAY,amount:e.DAYS_IN_WEEK}}}}),Ext.define("Ext.calendar.panel.Week",{extend:"Ext.calendar.panel.Days",xtype:"calendar-week",requires:["Ext.calendar.view.Week"],config:{view:{xtype:"calendar-weekview"}},configExtractor:{view:{firstDayOfWeek:!0}},$todayCellHighlightCls:Ext.baseCSSPrefix+"today-cell-highlight",updateDayHeader:function(e,t){this.callParent(arguments),this.updateHighlightToday(this.extracted.view.highlightToday)},updateHighlightToday:function(e){var t,i,n=this.getView().getHeader();i=Ext.Date.format(new Date,n.domFormat),(t=n.element.selectNode('td[data-date="'+i+'"]',!1))&&t.toggleCls(this.$todayCellHighlightCls+"-day",e)}}),Ext.define("Ext.calendar.view.Multi",{extend:"Ext.container.Container",xtype:"calendar-multiview",requires:["Ext.calendar.date.Util"],layout:"fit",platformConfig:{"!desktop":{compact:!0}},config:{compact:!1,compactOptions:null,store:null,timezoneOffset:void 0,value:void 0,views:null},defaultView:null,constructor:function(e){var t;this.callParent([e]),(t=this.defaultView)&&this.setView(t)},moveNext:function(){this.setValue(this.activeView.calculateMoveNext())},movePrevious:function(){this.setValue(this.activeView.calculateMovePrevious())},navigate:function(e,t){var i=Ext.Date;0!==e&&this.setValue(i.add(this.getValue(),t||i.DAY,e,!0))},setView:function(e){var t,i=this,n=i.activeView;n&&n.$key===e||(Ext.suspendLayouts(),n&&i.remove(n),(t=i.getViews()[e])||Ext.raise('Invalid view specified: "'+e+'".'),t.highlightToday=i.highlightToday,i.activeView=i.add(i.createView(t,e)),i.activeView.on("valuechange","onValueChange",i),i.recalculate(i.getValue()),Ext.resumeLayouts(!0))},updateHighlightToday:function(e){this.highlightToday=e,this.getActiveItem().updateHighlightToday(e)},updateCompact:function(e){this.setViewCfg("setCompact",e)},applyStore:function(e){return e=e&&Ext.StoreManager.lookup(e,"calendar-calendars")},updateStore:function(e){this.setViewCfg("setStore",e),this.isConfiguring||this.recalculate(this.getValue())},applyTimezoneOffset:function(e){return this.autoOffset=!1,void 0===e&&(e=Ext.calendar.date.Util.getDefaultTimezoneOffset(),this.autoOffset=!0),e},updateTimezoneOffset:function(e){this.setViewCfg("setTimezoneOffset",e)},applyValue:function(e,t){return e=Ext.Date.clearTime(e||Ext.calendar.date.Util.getLocalNow(),!0),t&&t.getTime()===e.getTime()&&(e=void 0),e},updateValue:function(e){this.isConfiguring||this.recalculate(e)},showAddForm:function(e,t){return this.activeView.showAddForm(e,t)},showEditForm:function(e,t){return this.activeView.showEditForm(e,t)},privates:{createView:function(e,t){return Ext.apply({$key:t,controlStoreRange:!1,compact:this.getCompact(),store:this.getStore(),timezoneOffset:this.autoOffset?void 0:this.getTimezoneOffset(),value:this.getValue()},e)},getActiveKey:function(){var e=this.activeView;return e?e.$key:""},onValueChange:function(e,t){this.setValue(t.value),this.fireEvent("valuechange",this,t)},recalculate:function(e){var t,i,n=this.activeView,r=this.getStore();n&&r&&(i=r.getEventSource(),t=Ext.calendar.date.Util.expandRange(n.getView().doRecalculate(e).full),i.setRange(t),n.setValue(e))},setViewCfg:function(e,t){var i;this.isConfiguring||(i=this.activeView)&&i[e](t)}}}),Ext.define("Ext.calendar.panel.Panel",{extend:"Ext.calendar.panel.AbstractPanel",xtype:"calendar",mixins:["Ext.mixin.ConfigState"],alternateStateConfig:"compactOptions",requires:["Ext.calendar.panel.Day","Ext.calendar.panel.Week","Ext.calendar.panel.Month","Ext.calendar.List","Ext.calendar.view.Multi","Ext.calendar.date.Util"],referenceHolder:!0,platformConfig:{"!desktop":{compact:!0}},config:{calendarList:{xtype:"calendar-list",reference:"list",flex:1},compact:!1,compactOptions:{},createButton:{xtype:"button",cls:Ext.baseCSSPrefix+"calendar-panel-create-button",text:"Create"},createButtonPosition:"sideBar",dateTitle:{xtype:"component",reference:"calTitle",cls:Ext.baseCSSPrefix+"calendar-panel-title",margin:"0 0 0 10"},highlightToday:!0,nextButton:{xtype:"button",text:">"},previousButton:{xtype:"button",text:"<"},sideBar:{xtype:"panel",cls:Ext.baseCSSPrefix+"calendar-sidebar"},store:null,switcher:{xtype:"segmentedbutton",reference:"switcher",cls:Ext.baseCSSPrefix+"calendar-panel-switcher",allowMultiple:!1},switcherPosition:"titleBar",timezoneOffset:void 0,titleBar:{xtype:"toolbar"},todayButton:{xtype:"button",text:"Today",margin:"0 10 0 0"},value:void 0,views:{day:{xtype:"calendar-day",titleTpl:'{start:date("l F d, Y")}',controlStoreRange:!1,label:"Day",weight:10,dayHeader:null},week:{xtype:"calendar-week",dayHeaderFormat:"D d",controlStoreRange:!1,titleTpl:'{start:date("j M")} - {end:date("j M Y")}',label:"Week",weight:20},month:{xtype:"calendar-month",titleTpl:'{start:date("F Y")}',label:"Month",weight:30}}},defaultView:"month",cls:Ext.baseCSSPrefix+"calendar-panel",moveNext:function(){this.getView().moveNext()},movePrevious:function(){this.getView().movePrevious()},navigate:function(e,t){this.getView().navigate(e,t)},setView:function(e){this.doSetView(e)},updateCompact:function(e,t){this.toggleCls(Ext.baseCSSPrefix+"compact",e),this.toggleConfigState(e),this.callParent([e,t]),this.setViewCfg("setCompact",e)},updateCompactOptions:function(){!this.isConfiguring&&this.getCompact()&&this.toggleConfigState(!0)},applyStore:function(e){return e=e&&Ext.StoreManager.lookup(e,"calendar-calendars")},updateStore:function(e){var t=this.lookup("list");this.setViewCfg("setStore",e),t&&t.setStore(e)},applyTimezoneOffset:function(e){return this.autoOffset=!1,void 0===e&&(e=Ext.calendar.date.Util.getDefaultTimezoneOffset(),this.autoOffset=!0),e},updateTimezoneOffset:function(e){this.setViewCfg("setTimezoneOffset",e)},applyValue:function(e,t){return e=Ext.Date.clearTime(e||Ext.calendar.date.Util.getLocalNow(),!0),t&&t.getTime()===e.getTime()&&(e=void 0),e},updateValue:function(e){this.setViewCfg("setValue",e),this.refreshCalTitle()},getValue:function(){var e=this.getView();return e?e.getValue():this.callParent()},getView:function(){return this.lookup("view")},privates:{weightStart:0,weightIncrement:10,createCalendarList:function(e){return Ext.apply({store:this.getStore()},this.getCalendarList())},createCreateButton:function(e){return e=e||{},e=Ext.apply(e,this.getCreateButton()),Ext.apply({handler:"onCreateTap",scope:this},e)},createContainerWithChildren:function(e,t,i){var n,r,o,a=(t=Ext.apply({},t)).items,s=this.weightStart,l=this.weightIncrement;if(a){for(Ext.isArray(a)||(a=[a]),r=0,n=(i=Ext.Array.clone(i)).length;r<n;++r)null==(o=i[r]).weight&&(i[r]=Ext.apply({weight:s},o)),s+=l;i=i.concat(a),Ext.Array.sort(i,this.weightSorter),delete t.items}return t.items=i,Ext.apply(t,e)},createDateTitle:function(e){return e=e||{},Ext.apply(e,this.getDateTitle())},createNextButton:function(){return Ext.apply({handler:"onNextTap",scope:this},this.getNextButton())},createPreviousButton:function(){return Ext.apply({handler:"onPrevTap",scope:this},this.getPreviousButton())},createSwitcher:function(e){var t=this.getView();return e=Ext.apply({value:t&&t.getActiveKey()||this.defaultView,listeners:{scope:this,change:"onSwitcherChange"},items:this.getSwitcherItems()},e),Ext.apply(e,this.getSwitcher())},createTodayButton:function(){return Ext.apply({handler:"onTodayTap",scope:this},this.getTodayButton())},createView:function(){return{xtype:"calendar-multiview",reference:"view",compact:this.getCompact(),defaultView:this.defaultView,store:this.getStore(),timezoneOffset:this.autoOffset?void 0:this.getTimezoneOffset(),value:this.getValue(),views:this.getViews(),highlightToday:this.getHighlightToday(),listeners:{scope:this,valuechange:"onValueChange"}}},doSetView:function(e,t){t?(this.getView().highlightToday=this.getHighlightToday(),this.getView().setView(e),this.refreshCalTitle()):this.setSwitcherValue(e)},updateHighlightToday:function(e){this.isConfiguring||this.getView().updateHighlightToday(e)},getSwitcherItems:function(){var e,t,i=this.getViews(),n=[];for(e in i)(t=i[e])&&n.push({text:t.label,value:e,weight:t.weight});return n.sort(this.weightSorter),n},onCreateTap:function(){this.getView().showAddForm()},onNextTap:function(){this.moveNext()},onPrevTap:function(){this.movePrevious()},onValueChange:function(e,t){this.setValue(t.value)},onTodayTap:function(){this.setValue(new Date)},refreshCalTitle:function(){var e,t=this.getView(),i=this.lookup("calTitle");t&&i&&(e=(t=t.activeView).lookupTpl("titleTpl"))&&i.setHtml(e.apply(t.getDisplayRange()))},setViewCfg:function(e,t){var i;this.isConfiguring||(i=this.getView())&&i[e](t)},weightSorter:function(e,t){return e.weight-t.weight}}}),Ext.define("Ext.calendar.theme.Palette",{primary:null,secondary:null,border:null,constructor:function(e){Ext.apply(this,e)}}),Ext.define("Ext.draw.ContainerBase",{extend:"Ext.panel.Panel",requires:["Ext.window.Window"],previewTitleText:"Chart Preview",previewAltText:"Chart preview",layout:"container",addElementListener:function(){var e=this,t=arguments;e.rendered?e.el.on.apply(e.el,t):e.on("render",function(){e.el.on.apply(e.el,t)})},removeElementListener:function(){this.rendered&&this.el.un.apply(this.el,arguments)},afterRender:function(){this.callParent(arguments),this.initAnimator()},getItems:function(){var e=this.items;return e&&e.isMixedCollection||this.initItems(),this.items},onRender:function(){this.callParent(arguments),this.element=this.el,this.bodyElement=this.body},setItems:function(e){return this.items=e},setSurfaceSize:function(e,t){this.resizeHandler({width:e,height:t}),this.renderFrame()},onResize:function(e,t,i,n){this.handleResize({width:e,height:t},!this.size)},preview:function(t){var e;if(Ext.isIE8)return!1;e="svg-markup"===(t=t||this.getImage()).type?{xtype:"container",html:t.data}:{xtype:"image",mode:"img",cls:Ext.baseCSSPrefix+"chart-image",alt:this.previewAltText,src:t.data,listeners:{afterrender:function(){var e,i=this,n=i.imgEl.dom,r="svg"===t.type?1:window.devicePixelRatio||1;n.naturalWidth&&n.naturalHeight?(e=i.getSize(),i.setWidth(Math.floor(e.width/r)),i.setHeight(Math.floor(e.height/r))):n.onload=function(){var e=n.naturalWidth,t=n.naturalHeight;i.setWidth(Math.floor(e/r)),i.setHeight(Math.floor(t/r))}}}},new Ext.window.Window({title:this.previewTitleText,closable:!0,renderTo:Ext.getBody(),autoShow:!0,maximizeable:!0,maximized:!0,border:!0,layout:{type:"hbox",pack:"center",align:"middle"},items:{xtype:"container",items:e}})},privates:{getTargetEl:function(){return this.bodyElement},reattachToBody:function(){this.pendingDetachSize&&this.handleResize(),this.pendingDetachSize=!1,this.callParent()}}}),Ext.define("Ext.draw.SurfaceBase",{extend:"Ext.Widget",getOwnerBody:function(){return this.ownerCt.body}}),Ext.define("Ext.draw.sprite.AnimationParser",function(){function n(e,t,i){return e+(t-e)*i}return{singleton:!0,attributeRe:/^url\(#([a-zA-Z-]+)\)$/,requires:["Ext.draw.Color"],color:{parseInitial:function(e,t){return Ext.isString(e)&&(e=Ext.util.Color.create(e)),Ext.isString(t)&&(t=Ext.util.Color.create(t)),e&&e.isColor&&t&&t.isColor?[[e.r,e.g,e.b,e.a],[t.r,t.g,t.b,t.a]]:[e||t,t||e]},compute:function(e,t,i){return Ext.isArray(e)&&Ext.isArray(t)?[n(e[0],t[0],i),n(e[1],t[1],i),n(e[2],t[2],i),n(e[3],t[3],i)]:t||e},serve:function(e){return Ext.util.Color.fly(e[0],e[1],e[2],e[3]).toString()}},number:{parse:function(e){return null===e?null:+e},compute:function(e,t,i){return Ext.isNumber(e)&&Ext.isNumber(t)?n(e,t,i):t||e}},angle:{parseInitial:function(e,t){return t-e>Math.PI?t-=2*Math.PI:t-e<-Math.PI&&(t+=2*Math.PI),[e,t]},compute:function(e,t,i){return Ext.isNumber(e)&&Ext.isNumber(t)?n(e,t,i):t||e}},path:{parseInitial:function(e,t){var i,n,r,o,a,s=e.toStripes(),l=t.toStripes(),d=s.length,u=l.length,c=l[u-1],h=[c[c.length-2],c[c.length-1]];for(i=d;i<u;i++)s.push(s[d-1].slice(0));for(i=u;i<d;i++)l.push(h.slice(0));for(a=s.length,l.path=t,l.temp=new Ext.draw.Path,i=0;i<a;i++){for(r=s[i],o=l[i],d=r.length,u=o.length,l.temp.commands.push("M"),n=u;n<d;n+=6)o.push(h[0],h[1],h[0],h[1],h[0],h[1]);for(h=[(c=l[l.length-1])[c.length-2],c[c.length-1]],n=d;n<u;n+=6)r.push(h[0],h[1],h[0],h[1],h[0],h[1]);for(i=0;i<o.length;i++)o[i]-=r[i];for(i=2;i<o.length;i+=6)l.temp.commands.push("C")}return[s,l]},compute:function(e,t,i){if(1<=i)return t.path;for(var n,r,o,a=0,s=e.length,l=0,d=t.temp.params,u=0;a<s;a++)for(r=e[a],o=t[a],n=r.length,l=0;l<n;l++)d[u++]=o[l]*i+r[l];return t.temp}},data:{compute:function(e,t,i,n){var r,o,a,s=e.length-1,l=t.length-1,d=Math.max(s,l);for(n&&n!==e||(n=[]),n.length=d+1,r=0;r<=d;r++)o=e[Math.min(r,s)],a=t[Math.min(r,l)],Ext.isNumber(o)?(Ext.isNumber(a)||(a=0),n[r]=o+(a-o)*i):n[r]=a;return n}},text:{compute:function(e,t,i){return e.substr(0,Math.round(e.length*(1-i)))+t.substr(Math.round(t.length*(1-i)))}},limited:"number",limited01:"number"}}),function(){if(!Ext.global.Float32Array){function e(e){var t,i;if("number"==typeof e)this.length=e;else if("length"in e)for(this.length=e.length,t=0,i=e.length;t<i;t++)this[t]=+e[t]}e.prototype=[],Ext.global.Float32Array=e}}(),Ext.define("Ext.draw.Draw",{singleton:!0,radian:Math.PI/180,pi2:2*Math.PI,reflectFn:function(e){return e},rad:function(e){return e%360*this.radian},degrees:function(e){return e/this.radian%360},isBBoxIntersect:function(e,t,i){return i=i||0,Math.max(e.x,t.x)-i>Math.min(e.x+e.width,t.x+t.width)||Math.max(e.y,t.y)-i>Math.min(e.y+e.height,t.y+t.height)},isPointInBBox:function(e,t,i){return!!i&&e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},naturalSpline:function(e){var t,i,n,r,o,a,s=e.length,l=0,d=new Float32Array(e.length),u=new Float32Array(3*e.length-2);for(d[0]=0,d[s-1]=0,t=1;t<s-1;t++)d[t]=e[t+1]+e[t-1]-2*e[t]-d[t-1],l=1/(4-l),d[t]*=l;for(t=s-2;0<t;t--)l=3.732050807568877+48.248711305964385/(-13.928203230275537+Math.pow(.07179676972449123,t)),d[t]-=d[t+1]*l;for(n=(a=e[0])-d[0],i=t=0;t<s-1;i+=3)o=a,r=n,n=(a=e[++t])-d[t],u[i]=o,u[i+1]=(n+2*r)/3,u[i+2]=(2*n+r)/3;return u[i]=a,u},spline:function(e){return this.naturalSpline(e)},cardinalToBezier:function(e,t,i,n,r){return[t,t+(i-e)/6*r,i-(n-t)/6*r,i]},cardinalSpline:function(e,t){var i,n,r=e.length,o=new Float32Array(3*r-2);for(void 0===t&&(t=.5),n=this.cardinalToBezier(e[0],e[0],e[1],e[2],t),o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],i=0;i<r-3;i++)n=this.cardinalToBezier(e[i],e[i+1],e[i+2],e[i+3],t),o[4+3*i]=n[1],o[4+3*i+1]=n[2],o[4+3*i+2]=n[3];return n=this.cardinalToBezier(e[r-3],e[r-2],e[r-1],e[r-1],t),o[4+3*i]=n[1],o[4+3*i+1]=n[2],o[4+3*i+2]=n[3],o},getAnchors:function(e,t,i,n,r,o,a){var s,l,d,u,c,h,f,g,p,m=Math.PI,x=m/2,y=Math.abs,v=Math.sin,E=Math.cos,b=Math.atan;return s=(i-e)/(a=a||4),l=(r-i)/a,t<=n&&o<=n||n<=t&&n<=o?d=u=x:(d=b((i-e)/y(n-t)),t<n&&(d=m-d),u=b((r-i)/y(n-o)),o<n&&(u=m-u)),x<(p=x-(d+u)%(2*m)/2)&&(p-=m),u+=p,c=i-s*v(d+=p),h=n+s*E(d),f=i+l*v(u),g=n+l*E(u),(t<n&&h<t||n<t&&t<h)&&(c+=y(t-h)*(c-i)/(h-n),h=t),(o<n&&g<o||n<o&&o<g)&&(f-=y(o-g)*(f-i)/(g-n),g=o),{x1:c,y1:h,x2:f,y2:g}},smooth:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f=e.length,g=[],p=[];for(c=0;c<f-1&&(n=e[c],r=t[c],0!==c||(d=n,u=r,g.push(d),p.push(u),1!==f));c++){if(o=e[c+1],a=t[c+1],s=e[c+2],l=t[c+2],!Ext.isNumber(s)||!Ext.isNumber(l)){g.push(d,o,o),p.push(u,a,a);break}h=this.getAnchors(n,r,o,a,s,l,i),g.push(d,h.x1,o),p.push(u,h.y1,a),d=h.x2,u=h.y2}return{smoothX:g,smoothY:p}},beginUpdateIOS:Ext.os.is.iOS?function(){this.iosUpdateEl=Ext.getBody().createChild({"data-sticky":!0,style:"position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; background: rgba(0,0,0,0.001); z-index: 100000"})}:Ext.emptyFn,endUpdateIOS:function(){this.iosUpdateEl=Ext.destroy(this.iosUpdateEl)}}),Ext.define("Ext.draw.gradient.Gradient",{requires:["Ext.draw.Color"],isGradient:!0,config:{stops:[]},applyStops:function(e){var t,i,n,r=[],o=e.length;for(t=0;t<o;t++)(n=(i=e[t]).color)&&n.isColor||(n=Ext.util.Color.fly(n||Ext.util.Color.NONE)),r.push({offset:Math.min(1,Math.max(0,"offset"in i?i.offset:i.position||0)),color:n.toString()});return r.sort(function(e,t){return e.offset-t.offset}),r},onClassExtended:function(e,t){!t.alias&&t.type&&(t.alias="gradient."+t.type)},constructor:function(e){this.initConfig(e)},generateGradient:Ext.emptyFn}),Ext.define("Ext.draw.gradient.GradientDefinition",{singleton:!0,urlStringRe:/^url\(#([\w-]+)\)$/,gradients:{},add:function(e){var t,i,n,r=this.gradients;for(t=0,i=e.length;t<i;t++)n=e[t],Ext.isString(n.id)&&(r[n.id]=n)},get:function(e){var t,i=this.gradients,n=e.match(this.urlStringRe);return n&&n[1]&&(t=i[n[1]])&&t||e}}),Ext.define("Ext.draw.sprite.AttributeParser",{singleton:!0,attributeRe:/^url\(#([a-zA-Z-]+)\)$/,requires:["Ext.draw.Color","Ext.draw.gradient.GradientDefinition"],default:Ext.identityFn,string:function(e){return String(e)},number:function(e){if(Ext.isNumber(+e))return e},angle:function(e){if(Ext.isNumber(e))return(e%=2*Math.PI)<-Math.PI?e+=2*Math.PI:e>=Math.PI&&(e-=2*Math.PI),e},data:function(e){return Ext.isArray(e)?e.slice():e instanceof Float32Array?new Float32Array(e):void 0},bool:function(e){return!!e},color:function(e){if(e&&e.isColor)return e.toString();if(e&&e.isGradient)return e;if(!e)return Ext.util.Color.NONE;if(Ext.isString(e)){if("url"!==e.substr(0,3))return Ext.util.Color.fly(e).toString();if(e=Ext.draw.gradient.GradientDefinition.get(e),Ext.isString(e))return e}return"linear"===e.type?Ext.create("Ext.draw.gradient.Linear",e):"radial"===e.type?Ext.create("Ext.draw.gradient.Radial",e):"pattern"===e.type?Ext.create("Ext.draw.gradient.Pattern",e):Ext.util.Color.NONE},limited:function(t,i){return function(e){return e=+e,Ext.isNumber(e)?Math.min(Math.max(e,t),i):void 0}},limited01:function(e){return e=+e,Ext.isNumber(e)?Math.min(Math.max(e,0),1):void 0},enums:function(){var e,t,i={},n=Array.prototype.slice.call(arguments,0);for(e=0,t=n.length;e<t;e++)i[n[e]]=!0;return function(e){return e in i?e:void 0}}}),Ext.define("Ext.draw.sprite.AttributeDefinition",{requires:["Ext.draw.sprite.AttributeParser","Ext.draw.sprite.AnimationParser"],config:{defaults:{$value:{},lazy:!0},aliases:{},animationProcessors:{},processors:{$value:{},lazy:!0},dirtyTriggers:{},triggers:{},updaters:{}},inheritableStatics:{processorFactoryRe:/^(\w+)\(([\w\-,]*)\)$/},spriteClass:null,constructor:function(e){this.initConfig(e)},applyDefaults:function(e,t){return t=Ext.apply(t||{},this.normalize(e))},applyAliases:function(e,t){return Ext.apply(t||{},e)},applyProcessors:function(e,t){this.getAnimationProcessors();var i,n,r,o,a=t||{},s=Ext.draw.sprite.AttributeParser,l=this.self.processorFactoryRe,d={};for(n in e)"string"==typeof(o=e[n])&&((r=o.match(l))?o=s[r[1]].apply(s,r[2].split(",")):s[o]&&(i=!0,o=s[d[n]=o])),Ext.isFunction(o)||Ext.raise(this.spriteClass.$className+": processor '"+n+"' has not been found."),a[n]=o;return i&&this.setAnimationProcessors(d),a},applyAnimationProcessors:function(e,t){var i,n,r=Ext.draw.sprite.AnimationParser;for(i in t=t||{},e)if("none"===(n=e[i]))t[i]=null;else if(!Ext.isString(n)||i in t)Ext.isObject(n)&&(t[i]=n);else if(n in r){for(;Ext.isString(r[n]);)n=r[n];t[i]=r[n]}return t},updateDirtyTriggers:function(e){this.setTriggers(e)},applyTriggers:function(e,t){var i;for(i in t=t||{},e)t[i]=e[i].split(",");return t},applyUpdaters:function(e,t){return Ext.apply(t||{},e)},batchedNormalize:function(e,t){if(!e)return{};var i,n,r,o,a,s,l,d,u,c=this.getProcessors(),h=this.getAliases(),f=e.translation||e.translate,g={};for(r in a="rotation"in e?e.rotation:"rotate"in e?e.rotate:void 0,void 0!==(s="scaling"in e?e.scaling:"scale"in e?e.scale:void 0)&&(Ext.isNumber(s)?(g.scalingX=s,g.scalingY=s):("x"in s&&(g.scalingX=s.x),"y"in s&&(g.scalingY=s.y),"centerX"in s&&(g.scalingCenterX=s.centerX),"centerY"in s&&(g.scalingCenterY=s.centerY))),void 0!==a&&(Ext.isNumber(a)?(a=Ext.draw.Draw.rad(a),g.rotationRads=a):("rads"in a?g.rotationRads=a.rads:"degrees"in a&&(Ext.isArray(a.degrees)?g.rotationRads=Ext.Array.map(a.degrees,function(e){return Ext.draw.Draw.rad(e)}):g.rotationRads=Ext.draw.Draw.rad(a.degrees)),"centerX"in a&&(g.rotationCenterX=a.centerX),"centerY"in a&&(g.rotationCenterY=a.centerY))),void 0!==f&&("x"in f&&(g.translationX=f.x),"y"in f&&(g.translationY=f.y)),"matrix"in e&&(u=(l=Ext.draw.Matrix.create(e.matrix)).split(),g.matrix=l,g.rotationRads=u.rotation,g.rotationCenterX=0,g.rotationCenterY=0,g.scalingX=u.scaleX,g.scalingY=u.scaleY,g.scalingCenterX=0,g.scalingCenterY=0,g.translationX=u.translateX,g.translationY=u.translateY),e)if(void 0!==(o=e[r]))if(Ext.isArray(o))if(r in h&&(r=h[r]),r in c)for(g[r]=[],i=0,n=o.length;i<n;i++)void 0!==(d=c[r].call(this,o[i]))&&(g[r][i]=d);else t&&(g[r]=o);else r in h&&(r=h[r]),r in c?void 0!==(o=c[r].call(this,o))&&(g[r]=o):t&&(g[r]=o);return g},normalize:function(e,t){if(!e)return{};var i,n,r,o,a,s,l=this.getProcessors(),d=this.getAliases(),u=e.translation||e.translate,c={};for(i in r="rotation"in e?e.rotation:"rotate"in e?e.rotate:void 0,o="scaling"in e?e.scaling:"scale"in e?e.scale:void 0,u&&("x"in u&&(c.translationX=u.x),"y"in u&&(c.translationY=u.y)),void 0!==o&&(Ext.isNumber(o)?(c.scalingX=o,c.scalingY=o):("x"in o&&(c.scalingX=o.x),"y"in o&&(c.scalingY=o.y),"centerX"in o&&(c.scalingCenterX=o.centerX),"centerY"in o&&(c.scalingCenterY=o.centerY))),void 0!==r&&(Ext.isNumber(r)?(r=Ext.draw.Draw.rad(r),c.rotationRads=r):("rads"in r?c.rotationRads=r.rads:"degrees"in r&&(c.rotationRads=Ext.draw.Draw.rad(r.degrees)),"centerX"in r&&(c.rotationCenterX=r.centerX),"centerY"in r&&(c.rotationCenterY=r.centerY))),"matrix"in e&&(s=(a=Ext.draw.Matrix.create(e.matrix)).split(),c.matrix=a,c.rotationRads=s.rotation,c.rotationCenterX=0,c.rotationCenterY=0,c.scalingX=s.scaleX,c.scalingY=s.scaleY,c.scalingCenterX=0,c.scalingCenterY=0,c.translationX=s.translateX,c.translationY=s.translateY),e)void 0!==(n=e[i])&&(i in d&&(i=d[i]),i in l?void 0!==(n=l[i].call(this,n))&&(c[i]=n):t&&(c[i]=n));return c},setBypassingNormalization:function(e,t,i){return t.pushDown(e,i)},set:function(e,t,i){return i=this.normalize(i),this.setBypassingNormalization(e,t,i)}}),Ext.define("Ext.draw.Matrix",{isMatrix:!0,statics:{createAffineMatrixFromTwoPair:function(e,t,i,n,r,o,a,s){var l=i-e,d=n-t,u=a-r,c=s-o,h=1/(l*l+d*d),f=l*u+d*c,g=u*d-l*c;return new this(f*h,-g*h,g*h,f*h,(-f*e-g*t)*h+r,(g*e-f*t)*h+o)},createPanZoomFromTwoPair:function(e,t,i,n,r,o,a,s){if(2===arguments.length)return this.createPanZoomFromTwoPair.apply(this,e.concat(t));var l=i-e,d=n-t,u=.5*(e+i),c=.5*(t+n),h=a-r,f=s-o,g=.5*(r+a),p=.5*(o+s),m=l*l+d*d,x=h*h+f*f,y=Math.sqrt(x/m);return new this(y,0,0,y,g-y*u,p-y*c)},fly:function(){function t(e){return i.elements=e,i}var i=null;return function(e){return(i=i||new Ext.draw.Matrix).elements=e,Ext.draw.Matrix.fly=t,i}}(),create:function(e){return e instanceof this?e:new this(e)}},constructor:function(e,t,i,n,r,o){e&&6===e.length?this.elements=e.slice():this.elements=void 0!==e?[e,t,i,n,r,o]:[1,0,0,1,0,0]},prepend:function(e,t,i,n,r,o){var a=this.elements,s=a[0],l=a[1],d=a[2],u=a[3],c=a[4],h=a[5];return a[0]=e*s+i*l,a[1]=t*s+n*l,a[2]=e*d+i*u,a[3]=t*d+n*u,a[4]=e*c+i*h+r,a[5]=t*c+n*h+o,this},prependMatrix:function(e){return this.prepend.apply(this,e.elements)},append:function(e,t,i,n,r,o){var a=this.elements,s=a[0],l=a[1],d=a[2],u=a[3],c=a[4],h=a[5];return a[0]=e*s+t*d,a[1]=e*l+t*u,a[2]=i*s+n*d,a[3]=i*l+n*u,a[4]=r*s+o*d+c,a[5]=r*l+o*u+h,this},appendMatrix:function(e){return this.append.apply(this,e.elements)},set:function(e,t,i,n,r,o){var a=this.elements;return a[0]=e,a[1]=t,a[2]=i,a[3]=n,a[4]=r,a[5]=o,this},inverse:function(e){var t=this.elements,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=1/(i*o-n*r);return i*=l,n*=l,r*=l,o*=l,e?(e.set(o,-n,-r,i,r*s-o*a,n*a-i*s),e):new Ext.draw.Matrix(o,-n,-r,i,r*s-o*a,n*a-i*s)},translate:function(e,t,i){return i?this.prepend(1,0,0,1,e,t):this.append(1,0,0,1,e,t)},scale:function(e,t,i,n,r){return null==t&&(t=e),void 0===i&&(i=0),void 0===n&&(n=0),r?this.prepend(e,0,0,t,i-i*e,n-n*t):this.append(e,0,0,t,i-i*e,n-n*t)},rotate:function(e,t,i,n){var r=Math.cos(e),o=Math.sin(e);return t=t||0,i=i||0,n?this.prepend(r,o,-o,r,t-r*t+i*o,i-r*i-t*o):this.append(r,o,-o,r,t-r*t+i*o,i-r*i-t*o)},rotateFromVector:function(e,t,i){var n=Math.sqrt(e*e+t*t),r=e/n,o=t/n;return i?this.prepend(r,o,-o,r,0,0):this.append(r,o,-o,r,0,0)},clone:function(){return new Ext.draw.Matrix(this.elements)},flipX:function(){return this.append(-1,0,0,1,0,0)},flipY:function(){return this.append(1,0,0,-1,0,0)},skewX:function(e){return this.append(1,0,Math.tan(e),1,0,0)},skewY:function(e){return this.append(1,Math.tan(e),0,1,0,0)},shearX:function(e){return this.append(1,0,e,1,0,0)},shearY:function(e){return this.append(1,e,0,1,0,0)},reset:function(){return this.set(1,0,0,1,0,0)},precisionCompensate:function(e,t){var i=this.elements,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],l=i[5],d=r*o-n*a;t.b=e*r/n,t.c=e*o/a,t.d=e,t.xx=n/e,t.yy=a/e,t.dx=(l*n*o-s*n*a)/d/e,t.dy=(s*r*a-l*n*a)/d/e},precisionCompensateRect:function(e,t){var i=this.elements,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],l=i[5],d=o/n;t.b=e*r/n,t.c=e*d,t.d=e*a/n,t.xx=n/e,t.yy=n/e,t.dx=(l*o-s*a)/(r*d-a)/e,t.dy=-(l*n-s*r)/(r*d-a)/e},x:function(e,t){var i=this.elements;return e*i[0]+t*i[2]+i[4]},y:function(e,t){var i=this.elements;return e*i[1]+t*i[3]+i[5]},get:function(e,t){return+this.elements[e+2*t].toFixed(4)},transformPoint:function(e){var t,i,n=this.elements;return i=e.isPoint?(t=e.x,e.y):(t=e[0],e[1]),[t*n[0]+i*n[2]+n[4],t*n[1]+i*n[3]+n[5]]},transformBBox:function(e,t,i){var n,r,o,a=this.elements,s=e.x,l=e.y,d=.5*e.width,u=.5*e.height,c=a[0],h=a[1],f=a[2],g=a[3],p=s+d,m=l+u;return r=t?(d-=t,u-=t,o=[Math.sqrt(a[0]*a[0]+a[2]*a[2]),Math.sqrt(a[1]*a[1]+a[3]*a[3])],n=Math.abs(d*c)+Math.abs(u*f)+Math.abs(o[0]*t),Math.abs(d*h)+Math.abs(u*g)+Math.abs(o[1]*t)):(n=Math.abs(d*c)+Math.abs(u*f),Math.abs(d*h)+Math.abs(u*g)),(i=i||{}).x=p*c+m*f+a[4]-n,i.y=p*h+m*g+a[5]-r,i.width=n+n,i.height=r+r,i},transformList:function(e){var t,i,n=this.elements,r=n[0],o=n[2],a=n[4],s=n[1],l=n[3],d=n[5],u=e.length;for(i=0;i<u;i++)t=e[i],e[i]=[t[0]*r+t[1]*o+a,t[0]*s+t[1]*l+d];return e},isIdentity:function(){var e=this.elements;return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]},isEqual:function(e){var t=e&&e.isMatrix?e.elements:e,i=this.elements;return i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]&&i[3]===t[3]&&i[4]===t[4]&&i[5]===t[5]},equals:function(e){return this.isEqual(e)},toArray:function(){var e=this.elements;return[e[0],e[2],e[4],e[1],e[3],e[5]]},toVerticalArray:function(){return this.elements.slice()},toString:function(){return[this.get(0,0),this.get(0,1),this.get(1,0),this.get(1,1),this.get(2,0),this.get(2,1)].join(",")},toContext:function(e){return e.transform.apply(e,this.elements),this},toSvg:function(){var e=this.elements;return"matrix("+e[0].toFixed(9)+","+e[1].toFixed(9)+","+e[2].toFixed(9)+","+e[3].toFixed(9)+","+e[4].toFixed(9)+","+e[5].toFixed(9)+")"},getScaleX:function(){var e=this.elements;return Math.sqrt(e[0]*e[0]+e[2]*e[2])},getScaleY:function(){var e=this.elements;return Math.sqrt(e[1]*e[1]+e[3]*e[3])},getXX:function(){return this.elements[0]},getXY:function(){return this.elements[1]},getYX:function(){return this.elements[2]},getYY:function(){return this.elements[3]},getDX:function(){return this.elements[4]},getDY:function(){return this.elements[5]},split:function(){var e=this.elements,t=e[0],i=e[1],n=e[3],r={translateX:e[4],translateY:e[5]};return r.rotate=r.rotation=Math.atan2(i,t),r.scaleX=t/Math.cos(r.rotate),r.scaleY=n/t*r.scaleX,r}},function(){function e(e,t,i){e[t]={get:function(){return this.elements[i]},set:function(e){this.elements[i]=e}}}if(Object.defineProperties){var t={};e(t,"a",0),e(t,"b",1),e(t,"c",2),e(t,"d",3),e(t,"e",4),e(t,"f",5),Object.defineProperties(this.prototype,t)}this.prototype.multiply=this.prototype.appendMatrix}),Ext.define("Ext.draw.modifier.Modifier",{isModifier:!0,mixins:{observable:"Ext.mixin.Observable"},config:{lower:null,upper:null,sprite:null},constructor:function(e){this.mixins.observable.constructor.call(this,e)},updateUpper:function(e){e&&e.setLower(this)},updateLower:function(e){e&&e.setUpper(this)},prepareAttributes:function(e){this._lower&&this._lower.prepareAttributes(e)},popUp:function(e,t){this._upper?this._upper.popUp(e,t):Ext.apply(e,t)},filterChanges:function(e,t,i){var n,r,o=e.targets;if(i)for(n in t)((r=t[n])!==e[n]||o&&r!==o[n])&&(i[n]=r);else for(n in t)(r=t[n])!==e[n]||o&&r!==o[n]||delete t[n];return i||t},pushDown:function(e,t){return this._lower?this._lower.pushDown(e,t):this.filterChanges(e,t)}}),Ext.define("Ext.draw.modifier.Target",{requires:["Ext.draw.Matrix"],extend:"Ext.draw.modifier.Modifier",alias:"modifier.target",statics:{uniqueId:0},prepareAttributes:function(e){this._lower&&this._lower.prepareAttributes(e),e.attributeId="attribute-"+Ext.draw.modifier.Target.uniqueId++,e.hasOwnProperty("canvasAttributes")||(e.bbox={plain:{dirty:!0},transform:{dirty:!0}},e.dirty=!0,e.pendingUpdaters={},e.canvasAttributes={},e.matrix=new Ext.draw.Matrix,e.inverseMatrix=new Ext.draw.Matrix)},applyChanges:function(e,t){Ext.apply(e,t);var i,n,r,o,a,s,l,d,u,c=this.getSprite(),h=e.pendingUpdaters,f=c.self.def.getTriggers();for(o in t)a=!0,(i=f[o])&&c.scheduleUpdaters(e,i,[o]),e.template&&t.removeFromInstance&&t.removeFromInstance[o]&&delete e[o];if(a){if(h.canvas)for(s=h.canvas,delete h.canvas,l=0,u=s.length;l<u;l++)o=s[l],e.canvasAttributes[o]=e[o];if(e.hasOwnProperty("children"))for(l=0,u=(n=e.children).length;l<u;l++){if(r=n[l],Ext.apply(r.pendingUpdaters,h),s)for(d=0;d<s.length;d++)o=s[d],r.canvasAttributes[o]=r[o];c.callUpdaters(r)}c.setDirty(!0),c.callUpdaters(e)}},popUp:function(e,t){this.applyChanges(e,t)},pushDown:function(e,t){return this._lower&&(t=this._lower.pushDown(e,t)),this.applyChanges(e,t),t}}),Ext.define("Ext.draw.TimingFunctions",function(){var e,t,i,n=Math.pow,r=Math.sin,o=Math.cos,a=Math.sqrt,s=Math.PI,l=["quad","cube","quart","quint"],d={pow:function(e,t){return n(e,t||6)},expo:function(e){return n(2,8*(e-1))},circ:function(e){return 1-a(1-e*e)},sine:function(e){return 1-r((1-e)*s/2)},back:function(e,t){return e*e*(((t=t||1.616)+1)*e-t)},bounce:function(e){var t,i;for(t=0,i=1;;t+=i,i/=2)if((7-4*t)/11<=e)return i*i-n((11-6*t-11*e)/4,2)},elastic:function(e,t){return n(2,10*--e)*o(20*e*s*(t||1)/3)}},u={};function c(t){return function(e){return n(e,t)}}function h(e,t){u[e+"In"]=function(e){return t(e)},u[e+"Out"]=function(e){return 1-t(1-e)},u[e+"InOut"]=function(e){return e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2}}for(i=0,t=l.length;i<t;++i)d[l[i]]=c(i+2);for(e in d)h(e,d[e]);return u.linear=Ext.identityFn,u.easeIn=u.quadIn,u.easeOut=u.quadOut,u.easeInOut=u.quadInOut,{singleton:!0,easingMap:u}},function(e){Ext.apply(e,e.easingMap)}),Ext.define("Ext.draw.Animator",{uses:["Ext.draw.Draw"],singleton:!0,frameCallbacks:{},frameCallbackId:0,scheduled:0,frameStartTimeOffset:Ext.now(),animations:[],running:!1,animationTime:function(){return Ext.AnimationQueue.frameStartTime-this.frameStartTimeOffset},add:function(e){this.contains(e)||(this.animations.push(e),this.ignite(),"fireEvent"in e&&e.fireEvent("animationstart",e))},remove:function(e){for(var t=this.animations,i=0,n=t.length;i<n;++i)if(t[i]===e)return t.splice(i,1),void("fireEvent"in e&&e.fireEvent("animationend",e))},contains:function(e){return-1<Ext.Array.indexOf(this.animations,e)},empty:function(){return 0===this.animations.length},idle:function(){return 0===this.scheduled&&0===this.animations.length},step:function(e){for(var t,i=this.animations,n=0,r=i.length;n<r;n++)(t=i[n]).step(e),t.animating||(i.splice(n,1),n--,r--,t.fireEvent&&t.fireEvent("animationend",t))},schedule:function(e,t){var i="frameCallback"+this.frameCallbackId++;return t=t||this,Ext.isString(e)&&(e=t[e]),Ext.draw.Animator.frameCallbacks[i]={fn:e,scope:t,once:!0},this.scheduled++,Ext.draw.Animator.ignite(),i},scheduleIf:function(e,t){var i,n,r=Ext.draw.Animator.frameCallbacks;for(n in t=t||this,Ext.isString(e)&&(e=t[e]),r)if((i=r[n]).once&&i.fn===e&&i.scope===t)return null;return this.schedule(e,t)},cancel:function(e){Ext.draw.Animator.frameCallbacks[e]&&Ext.draw.Animator.frameCallbacks[e].once&&(this.scheduled=Math.max(--this.scheduled,0),delete Ext.draw.Animator.frameCallbacks[e],Ext.draw.Draw.endUpdateIOS()),this.idle()&&this.extinguish()},clear:function(){this.animations.length=0,Ext.draw.Animator.frameCallbacks={},this.extinguish()},addFrameCallback:function(e,t){var i="frameCallback"+this.frameCallbackId++;return t=t||this,Ext.isString(e)&&(e=t[e]),Ext.draw.Animator.frameCallbacks[i]={fn:e,scope:t},i},removeFrameCallback:function(e){delete Ext.draw.Animator.frameCallbacks[e],this.idle()&&this.extinguish()},fireFrameCallbacks:function(){var e,t,i,n=this.frameCallbacks;for(e in n)t=(i=n[e]).fn,Ext.isString(t)&&(t=i.scope[t]),t.call(i.scope),n[e]&&i.once&&(this.scheduled=Math.max(--this.scheduled,0),delete n[e])},handleFrame:function(){this.step(this.animationTime()),this.fireFrameCallbacks(),this.idle()&&this.extinguish()},ignite:function(){this.running||(this.running=!0,Ext.AnimationQueue.start(this.handleFrame,this),Ext.draw.Draw.beginUpdateIOS())},extinguish:function(){this.running=!1,Ext.AnimationQueue.stop(this.handleFrame,this),Ext.draw.Draw.endUpdateIOS()}}),Ext.define("Ext.draw.modifier.Animation",{extend:"Ext.draw.modifier.Modifier",alias:"modifier.animation",requires:["Ext.draw.TimingFunctions","Ext.draw.Animator"],config:{easing:Ext.identityFn,duration:0,customEasings:{},customDurations:{}},constructor:function(e){this.anyAnimation=this.anySpecialAnimations=!1,this.animating=0,this.animatingPool=[],this.callParent([e])},prepareAttributes:function(e){e.hasOwnProperty("timers")||(e.animating=!1,e.timers={},e.targets=Ext.Object.chain(e),e.targets.prototype=e),this._lower&&this._lower.prepareAttributes(e.targets)},updateSprite:function(e){this.setConfig(e.config.animation)},updateDuration:function(e){this.anyAnimation=0<e},applyEasing:function(e){return"string"==typeof e&&(e=Ext.draw.TimingFunctions.easingMap[e]),e},applyCustomEasings:function(e,t){var i,n,r,o,a,s;for(n in t=t||{},e)for(i=!0,o=e[n],r=n.split(","),"string"==typeof o&&(o=Ext.draw.TimingFunctions.easingMap[o]),a=0,s=r.length;a<s;a++)t[r[a]]=o;return i&&(this.anySpecialAnimations=i),t},setEasingOn:function(e,t){var i,n,r={};for(i=0,n=(e=Ext.Array.from(e).slice()).length;i<n;i++)r[e[i]]=t;this.setCustomEasings(r)},clearEasingOn:function(e){var t,i;for(t=0,i=(e=Ext.Array.from(e,!0)).length;t<i;t++)delete this._customEasings[e[t]]},applyCustomDurations:function(e,t){var i,n,r,o,a,s;for(n in t=t||{},e)for(i=!0,r=e[n],a=0,s=(o=n.split(",")).length;a<s;a++)t[o[a]]=r;return i&&(this.anySpecialAnimations=i),t},setDurationOn:function(e,t){var i,n,r={};for(i=0,n=(e=Ext.Array.from(e).slice()).length;i<n;i++)r[e[i]]=t;this.setCustomDurations(r)},clearDurationOn:function(e){var t,i;for(t=0,i=(e=Ext.Array.from(e,!0)).length;t<i;t++)delete this._customDurations[e[t]]},setAnimating:function(e,t){var i,n=this.animatingPool;if(e.animating!==t)if(e.animating=t)n.push(e),0===this.animating&&Ext.draw.Animator.add(this),this.animating++;else{for(i=n.length;i--;)n[i]===e&&n.splice(i,1);this.animating=n.length}},setAttrs:function(e,t){var i,n,r,o,a,s,l,d,u=e.timers,c=this._sprite.self.def._animationProcessors,h=this._easing,f=this._duration,g=this._customDurations,p=this._customEasings,m=this.anySpecialAnimations,x=this.anyAnimation||m,y=e.targets,v=!1;if(!x){for(n in t)e[n]===t[n]?delete t[n]:e[n]=t[n],delete y[n],delete u[n];return t}for(n in t){if((r=t[n])!==(o=e[n])&&null!=o&&(a=c[n])){if(s=h,l=f,m&&(n in p&&(s=p[n]),n in g&&(l=g[n])),(o&&o.isGradient||r&&r.isGradient)&&(l=0),l){u[n]||(u[n]={}),(i=u[n]).start=0,i.easing=s,i.duration=l,i.compute=a.compute,i.serve=a.serve||Ext.identityFn,i.remove=t.removeFromInstance&&t.removeFromInstance[n],a.parseInitial?(d=a.parseInitial(o,r),i.source=d[0],i.target=d[1]):a.parse?(i.source=a.parse(o),i.target=a.parse(r)):(i.source=o,i.target=r),y[n]=r,delete t[n],v=!0;continue}delete y[n]}else delete y[n];delete u[n]}return v&&!e.animating&&this.setAnimating(e,!0),t},updateAttributes:function(e){if(!e.animating)return{};var t,i,n,r={},o=!1,a=e.timers,s=e.targets,l=Ext.draw.Animator.animationTime();if(e.lastUpdate===l)return null;for(t in a)1<=(n=(i=a[t]).start?(l-i.start)/i.duration:(i.start=l,0))?(r[t]=s[t],delete s[t],a[t].remove&&(r.removeFromInstance=r.removeFromInstance||{},r.removeFromInstance[t]=!0),delete a[t]):(r[t]=i.serve(i.compute(i.source,i.target,i.easing(n),e[t])),o=!0);return e.lastUpdate=l,this.setAnimating(e,o),r},pushDown:function(e,t){return t=this.callParent([e.targets,t]),this.setAttrs(e,t)},popUp:function(e,t){return e=e.prototype,t=this.setAttrs(e,t),this._upper?this._upper.popUp(e,t):Ext.apply(e,t)},step:function(e){for(var t,i,n=this.animatingPool.slice(),r=n.length,o=0;o<r;o++)t=n[o],(i=this.updateAttributes(t))&&this._upper&&this._upper.popUp(t,i)},stop:function(){var e,t,i=this.animatingPool;for(this.step(),e=0,t=i.length;e<t;e++)i[e].animating=!1;this.animatingPool.length=0,this.animating=0,Ext.draw.Animator.remove(this)},destroy:function(){Ext.draw.Animator.remove(this),this.callParent()}}),Ext.define("Ext.draw.modifier.Highlight",{extend:"Ext.draw.modifier.Modifier",alias:"modifier.highlight",config:{enabled:!1,style:null},preFx:!0,applyStyle:function(e,t){return t=t||{},this.getSprite()?Ext.apply(t,this.getSprite().self.def.normalize(e)):Ext.apply(t,e),t},prepareAttributes:function(e){e.hasOwnProperty("highlightOriginal")||(e.highlighted=!1,e.highlightOriginal=Ext.Object.chain(e),(e.highlightOriginal.prototype=e).highlightOriginal.removeFromInstance={}),this._lower&&this._lower.prepareAttributes(e.highlightOriginal)},updateSprite:function(e,t){var i,n=this.getStyle();e&&(i=e.self.def,n&&(this._style=i.normalize(n)),this.setStyle(e.config.highlight),i.setConfig({defaults:{highlighted:!1},processors:{highlighted:"bool"}})),this.setSprite(e)},filterChanges:function(e,t){var i,n=e.highlightOriginal,r=this.getStyle();if(e.highlighted)for(i in t)r.hasOwnProperty(i)&&(n[i]=t[i],delete t[i]);return t},pushDown:function(e,t){var i,n,r,o,a=this.getStyle(),s=e.highlightOriginal,l=s.removeFromInstance;if(t.hasOwnProperty("highlighted")){if(i=t.highlighted,delete t.highlighted,this._lower&&(t=this._lower.pushDown(s,t)),t=this.filterChanges(e,t),i!==e.highlighted){if(i)for(n in a)n in t?s[n]=t[n]:(r=e.template&&e.template.ownAttr)&&!e.prototype.hasOwnProperty(n)?(l[n]=!0,s[n]=r.targets[n]):((o=s.timers[n])&&o.remove&&(l[n]=!0),s[n]=e[n]),s[n]!==a[n]&&(t[n]=a[n]);else{for(n in a)n in t||(t[n]=s[n]),delete s[n];t.removeFromInstance=t.removeFromInstance||{},Ext.apply(t.removeFromInstance,l),s.removeFromInstance={}}t.highlighted=i}}else this._lower&&(t=this._lower.pushDown(s,t)),t=this.filterChanges(e,t);return t},popUp:function(e,t){t=this.filterChanges(e,t),this.callParent([e,t])}}),Ext.define("Ext.draw.sprite.Sprite",{alias:"sprite.sprite",mixins:{observable:"Ext.mixin.Observable"},requires:["Ext.draw.Draw","Ext.draw.gradient.Gradient","Ext.draw.sprite.AttributeDefinition","Ext.draw.modifier.Target","Ext.draw.modifier.Animation","Ext.draw.modifier.Highlight"],isSprite:!0,$configStrict:!1,statics:{debug:!1,defaultHitTestOptions:{fill:!0,stroke:!0}},inheritableStatics:{def:{processors:{debug:"default",strokeStyle:"color",fillStyle:"color",strokeOpacity:"limited01",fillOpacity:"limited01",lineWidth:"number",lineCap:"enums(butt,round,square)",lineJoin:"enums(round,bevel,miter)",lineDash:"data",lineDashOffset:"number",miterLimit:"number",shadowColor:"color",shadowOffsetX:"number",shadowOffsetY:"number",shadowBlur:"number",globalAlpha:"limited01",globalCompositeOperation:"enums(source-over,destination-over,source-in,destination-in,source-out,destination-out,source-atop,destination-atop,lighter,xor,copy)",hidden:"bool",transformFillStroke:"bool",zIndex:"number",translationX:"number",translationY:"number",rotationRads:"number",rotationCenterX:"number",rotationCenterY:"number",scalingX:"number",scalingY:"number",scalingCenterX:"number",scalingCenterY:"number",constrainGradients:"bool"},aliases:{stroke:"strokeStyle",fill:"fillStyle",color:"fillStyle","stroke-width":"lineWidth","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","text-anchor":"textAlign",opacity:"globalAlpha",translateX:"translationX",translateY:"translationY",rotateRads:"rotationRads",rotateCenterX:"rotationCenterX",rotateCenterY:"rotationCenterY",scaleX:"scalingX",scaleY:"scalingY",scaleCenterX:"scalingCenterX",scaleCenterY:"scalingCenterY"},defaults:{hidden:!1,zIndex:0,strokeStyle:"none",fillStyle:"none",lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowColor:"none",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,globalAlpha:1,strokeOpacity:1,fillOpacity:1,transformFillStroke:!1,translationX:0,translationY:0,rotationRads:0,rotationCenterX:null,rotationCenterY:null,scalingX:1,scalingY:1,scalingCenterX:null,scalingCenterY:null,constrainGradients:!1},triggers:{zIndex:"zIndex",globalAlpha:"canvas",globalCompositeOperation:"canvas",transformFillStroke:"canvas",strokeStyle:"canvas",fillStyle:"canvas",strokeOpacity:"canvas",fillOpacity:"canvas",lineWidth:"canvas",lineCap:"canvas",lineJoin:"canvas",lineDash:"canvas",lineDashOffset:"canvas",miterLimit:"canvas",shadowColor:"canvas",shadowOffsetX:"canvas",shadowOffsetY:"canvas",shadowBlur:"canvas",translationX:"transform",translationY:"transform",rotationRads:"transform",rotationCenterX:"transform",rotationCenterY:"transform",scalingX:"transform",scalingY:"transform",scalingCenterX:"transform",scalingCenterY:"transform",constrainGradients:"canvas"},updaters:{bbox:"bboxUpdater",zIndex:function(e){e.dirtyZIndex=!0},transform:function(e){e.dirtyTransform=!0,e.bbox.transform.dirty=!0}}}},config:{parent:null,surface:null},onClassExtended:function(e,t){var i,n=e.superclass.self.def.initialConfig,r=t.inheritableStatics&&t.inheritableStatics.def;r?(i=Ext.Object.merge({},n,r),e.def=new Ext.draw.sprite.AttributeDefinition(i),delete t.inheritableStatics.def):e.def=new Ext.draw.sprite.AttributeDefinition(n),e.def.spriteClass=e},constructor:function(e){if("Ext.draw.sprite.Sprite"===Ext.getClassName(this))throw"Ext.draw.sprite.Sprite is an abstract class";var t,i,n=this,r=n.self.def,o=r.getDefaults(),a=r.getProcessors();for(i in e=Ext.isObject(e)?e:{},n.id=e.id||Ext.id(null,"ext-sprite-"),n.attr={},n.mixins.observable.constructor.apply(n,arguments),t=Ext.Array.from(e.modifiers,!0),n.createModifiers(t),n.initializeAttributes(),n.setAttributes(o,!0),e)i in a&&n["get"+i.charAt(0).toUpperCase()+i.substr(1)]&&Ext.raise("The "+n.$className+" sprite has both a config and an attribute with the same name: "+i+".");n.setAttributes(e)},updateSurface:function(e,t){t&&t.remove(this)},getDirty:function(){return this.attr.dirty},setDirty:function(e){var t;(this.attr.dirty=e)&&(t=this.getParent())&&t.setDirty(!0)},addModifier:function(e,t){var i,n=this.modifiers,r=n.animation,o=n.target;return e instanceof Ext.draw.modifier.Modifier||(i="string"==typeof e?e:e.type)&&!n[i]&&(n[i]=e=Ext.factory(e,null,null,"modifier")),e.setSprite(this),e.preFx||e.config&&e.config.preFx?(r._lower&&r._lower.setUpper(e),e.setUpper(r)):(o._lower.setUpper(e),e.setUpper(o)),t&&this.initializeAttributes(),e},createModifiers:function(e){var t,i,n,r=Ext.draw.modifier,o=this.getInitialConfig().animation;for(this.modifiers=t={target:new r.Target({sprite:this}),animation:new r.Animation(Ext.apply({sprite:this},o))},t.animation.setUpper(t.target),i=0,n=e.length;i<n;i++)this.addModifier(e[i],!1);return t},getAnimation:function(){return this.modifiers.animation},setAnimation:function(e){this.isConfiguring||this.modifiers.animation.setConfig(e||{duration:0})},initializeAttributes:function(){this.modifiers.target.prepareAttributes(this.attr)},callUpdaters:function(e){var t,i,n,r,o=this.self.def.getUpdaters(),a=!1,s=!1;t=(e=e||this.attr).pendingUpdaters,this.callUpdaters=Ext.emptyFn;do{for(n in a=!1,t)a=!0,i=t[n],delete t[n],"string"==typeof(r=o[n])&&(r=this[r]),r&&r.call(this,e,i);s=s||a}while(a);delete this.callUpdaters,s&&this.setDirty(!0)},callUpdater:function(e,t,i){this.scheduleUpdater(e,t,i),this.callUpdaters(e)},scheduleUpdaters:function(e,t,i){var n,r,o;if(e=e||this.attr,i)for(r=0,o=t.length;r<o;r++)n=t[r],this.scheduleUpdater(e,n,i);else for(n in t)i=t[n],this.scheduleUpdater(e,n,i)},scheduleUpdater:function(e,t,i){var n;i=i||[],t in(n=(e=e||this.attr).pendingUpdaters)?i.length&&(n[t]=Ext.Array.merge(n[t],i)):n[t]=i},setAttributes:function(e,t,i){var n;this.destroyed&&Ext.Error.raise("Setting attributes of a destroyed sprite."),n=t?i?e:Ext.apply({},e):this.self.def.normalize(e),this.modifiers.target.pushDown(this.attr,n)},setAttributesBypassingNormalization:function(e,t){return this.setAttributes(e,!0,t)},bboxUpdater:function(e){var t=0!==e.rotationRads,i=1!==e.scalingX||1!==e.scalingY,n=null===e.rotationCenterX||null===e.rotationCenterY,r=null===e.scalingCenterX||null===e.scalingCenterY;e.bbox.plain.dirty=!0,e.bbox.transform.dirty=!0,(t&&n||i&&r)&&this.scheduleUpdater(e,"transform")},getBBox:function(e){var t=this.attr.bbox,i=t.plain,n=t.transform;return i.dirty&&(this.updatePlainBBox(i),i.dirty=!1),e?i:(this.applyTransformations(),n.dirty&&(this.updateTransformedBBox(n,i),n.dirty=!1),n)},updatePlainBBox:Ext.emptyFn,updateTransformedBBox:function(e,t){this.attr.matrix.transformBBox(t,0,e)},getBBoxCenter:function(e){var t=this.getBBox(e);return t?[t.x+.5*t.width,t.y+.5*t.height]:[0,0]},hide:function(){return this.attr.hidden=!0,this.setDirty(!0),this},show:function(){return this.attr.hidden=!1,this.setDirty(!0),this},useAttributes:function(e,t){this.applyTransformations(this.isSpriteInstance);var i,n=this.attr.canvasAttributes,r=n.strokeStyle,o=n.fillStyle,a=n.lineDash,s=n.lineDashOffset;for(i in r&&(r.isGradient?(e.strokeStyle="black",e.strokeGradient=r):e.strokeGradient=!1),o&&(o.isGradient?(e.fillStyle="black",e.fillGradient=o):e.fillGradient=!1),a&&e.setLineDash(a),Ext.isNumber(s)&&Ext.isNumber(e.lineDashOffset)&&(e.lineDashOffset=s),n)void 0!==n[i]&&n[i]!==e[i]&&(e[i]=n[i]);this.setGradientBBox(e,t)},setGradientBBox:function(e,t){var i=this.attr;i.constrainGradients?e.setGradientBBox({x:t[0],y:t[1],width:t[2],height:t[3]}):e.setGradientBBox(this.getBBox(i.transformFillStroke))},applyTransformations:function(e){if(e||this.attr.dirtyTransform){var t,i,n=this.attr,r=this.getBBoxCenter(!0),o=r[0],a=r[1],s=n.translationX,l=n.translationY,d=n.scalingX,u=null===n.scalingY?n.scalingX:n.scalingY,c=null===n.scalingCenterX?o:n.scalingCenterX,h=null===n.scalingCenterY?a:n.scalingCenterY,f=n.rotationRads,g=null===n.rotationCenterX?o:n.rotationCenterX,p=null===n.rotationCenterY?a:n.rotationCenterY,m=Math.cos(f),x=Math.sin(f);1===d&&1===u&&(h=c=0),0===f&&(p=g=0),t=c*(1-d)-g,i=h*(1-u)-p,n.matrix.elements=[m*d,x*d,-x*u,m*u,m*t-x*i+g+s,x*t+m*i+p+l],n.matrix.inverse(n.inverseMatrix),n.dirtyTransform=!1,n.bbox.transform.dirty=!0}},transform:function(e,t){var i,n=this.attr,r=n.matrix;return i=e&&e.isMatrix?e.elements:e,Ext.isArray(i)&&6===i.length||Ext.raise("An instance of Ext.draw.Matrix or an array of 6 numbers is expected."),r.prepend.apply(r,i.slice()),r.inverse(n.inverseMatrix),t&&this.updateTransformAttributes(),n.dirtyTransform=!1,n.bbox.transform.dirty=!0,this.setDirty(!0),this},updateTransformAttributes:function(){var e=this.attr,t=e.matrix.split();e.rotationRads=t.rotate,e.rotationCenterX=0,e.rotationCenterY=0,e.scalingX=t.scaleX,e.scalingY=t.scaleY,e.scalingCenterX=0,e.scalingCenterY=0,e.translationX=t.translateX,e.translationY=t.translateY},resetTransform:function(e){var t=this.attr;return t.matrix.reset(),t.inverseMatrix.reset(),e||this.updateTransformAttributes(),t.dirtyTransform=!1,t.bbox.transform.dirty=!0,this.setDirty(!0),this},setTransform:function(e,t){return this.resetTransform(!0),this.transform.call(this,e,t),this},preRender:Ext.emptyFn,render:Ext.emptyFn,renderBBox:function(e,t){var i=this.getBBox();t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(i.x+i.width,i.y),t.lineTo(i.x+i.width,i.y+i.height),t.lineTo(i.x,i.y+i.height),t.closePath(),t.strokeStyle="red",t.strokeOpacity=1,t.lineWidth=.5,t.stroke()},hitTest:function(e,t){var i,n,r;return this.isVisible()&&(i=e[0],n=e[1],(r=this.getBBox())&&i>=r.x&&i<=r.x+r.width&&n>=r.y&&n<=r.y+r.height)?{sprite:this}:null},isVisible:function(){var e=this.attr,t=this.getParent(),i=t&&(t.isSurface||t.isVisible())&&!e.hidden&&e.globalAlpha,n=Ext.util.Color.NONE,r=Ext.util.Color.RGBA_NONE,o=e.fillOpacity&&e.fillStyle!==n&&e.fillStyle!==r,a=e.strokeOpacity&&e.strokeStyle!==n&&e.strokeStyle!==r;return!!(i&&(o||a))},repaint:function(){var e=this.getSurface();e&&e.renderFrame()},remove:function(){var e=this.getSurface();return e&&e.isSurface?e.remove(this):null},destroy:function(){for(var e,t=this.modifiers.target;t;)t=(e=t)._lower,e.destroy();delete this.attr,this.remove(),!1!==this.fireEvent("beforedestroy",this)&&this.fireEvent("destroy",this),this.callParent()}},function(){this.def=new Ext.draw.sprite.AttributeDefinition(this.def),this.def.spriteClass=this}),Ext.define("Ext.draw.Path",{requires:["Ext.draw.Draw"],statics:{pathRe:/,?([achlmqrstvxz]),?/gi,pathRe2:/-/gi,pathSplitRe:/\s|,/g},svgString:"",constructor:function(e){this.commands=[],this.params=[],this.cursor=null,this.startX=0,this.startY=0,e&&this.fromSvgString(e)},clear:function(){this.params.length=0,this.commands.length=0,this.cursor=null,this.startX=0,this.startY=0,this.dirt()},dirt:function(){this.svgString=""},moveTo:function(e,t){this.cursor||(this.cursor=[e,t]),this.params.push(e,t),this.commands.push("M"),this.startX=e,this.startY=t,this.cursor[0]=e,this.cursor[1]=t,this.dirt()},lineTo:function(e,t){this.cursor?(this.params.push(e,t),this.commands.push("L")):(this.cursor=[e,t],this.params.push(e,t),this.commands.push("M")),this.cursor[0]=e,this.cursor[1]=t,this.dirt()},bezierCurveTo:function(e,t,i,n,r,o){this.cursor||this.moveTo(e,t),this.params.push(e,t,i,n,r,o),this.commands.push("C"),this.cursor[0]=r,this.cursor[1]=o,this.dirt()},quadraticCurveTo:function(e,t,i,n){this.cursor||this.moveTo(e,t),this.bezierCurveTo((2*e+this.cursor[0])/3,(2*t+this.cursor[1])/3,(2*e+i)/3,(2*t+n)/3,i,n)},closePath:function(){this.cursor&&(this.cursor=null,this.commands.push("Z"),this.dirt())},arcTo:function(e,t,i,n,r,o,a){var s=this;if(void 0===o&&(o=r),void 0===a&&(a=0),s.cursor)if(0!==r&&0!==o){i-=e,n-=t;var l,d,u,c,h,f,g,p,m,x,y=s.cursor[0]-e,v=s.cursor[1]-t,E=i*v-n*y,b=Math.sqrt(y*y+v*v),C=Math.sqrt(i*i+n*n);if(0!=E){o!==r?(x=(u=(l=Math.cos(a))/r)*y+(c=(d=Math.sin(a))/o)*v,v=(h=-d/r)*y+(f=l/o)*v,y=x,x=u*i+c*n,n=h*i+f*n,i=x):(y/=r,v/=o,i/=r,n/=o),p=y*C+i*b,m=v*C+n*b;var S=((p*=g=1/(Math.sin(.5*Math.asin(Math.abs(E)/(b*C)))*Math.sqrt(p*p+m*m)))*y+(m*=g)*v)/(y*y+v*v),w=(p*i+m*n)/(i*i+n*n),T=y*S-p,P=v*S-m,k=i*w-p,I=n*w-m,R=Math.atan2(P,T),M=Math.atan2(I,k);0<E?M<R&&(M+=2*Math.PI):R<M&&(R+=2*Math.PI),o!==r?(p=l*p*r-d*m*o+e,m=d*m*o+l*m*o+t,s.lineTo(l*r*T-d*o*P+p,d*r*T+l*o*P+m)):(p=p*r+e,m=m*o+t,s.lineTo(r*T+p,o*P+m)),s.ellipse(p,m,r,o,a,R,M,E<0)}else s.lineTo(e,t)}else s.lineTo(e,t);else s.moveTo(e,t)},ellipse:function(e,t,i,n,r,o,a,s){var l,d,u,c,h=this,f=h.params,g=f.length;if(a-o>=2*Math.PI)return h.ellipse(e,t,i,n,r,o,o+Math.PI,s),void h.ellipse(e,t,i,n,r,o+Math.PI,a,s);if(s)for(o<a&&(o+=2*Math.PI),l=h.approximateArc(f,e,t,i,n,r,a,o),u=g,c=f.length-2;u<c;u+=2,c-=2)d=f[u],f[u]=f[c],f[c]=d,d=f[u+1],f[u+1]=f[c+1],f[c+1]=d;else a<o&&(a+=2*Math.PI),l=h.approximateArc(f,e,t,i,n,r,o,a);for(h.cursor?(h.cursor[0]=f[f.length-2],h.cursor[1]=f[f.length-1],h.commands.push("L")):(h.cursor=[f[f.length-2],f[f.length-1]],h.commands.push("M")),u=2;u<l;u+=6)h.commands.push("C");h.dirt()},arc:function(e,t,i,n,r,o){this.ellipse(e,t,i,i,0,n,r,o)},rect:function(e,t,i,n){0!==i&&0!==n&&(this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath())},approximateArc:function(e,t,i,n,r,o,a,s){var l,d,u,c,h,f,g=Math.cos(o),p=Math.sin(o),m=Math.cos(a),x=Math.sin(a),y=g*m*n-p*x*r,v=-g*x*n-p*m*r,E=p*m*n+g*x*r,b=-p*x*n+g*m*r,C=Math.PI/2,S=2,w=y,T=v,P=E,k=b,I=.547443256150549;for((s-=a)<0&&(s+=2*Math.PI),e.push(y+t,E+i);C<=s;)e.push(w+T*I+t,P+k*I+i,w*I+T+t,P*I+k+i,T+t,k+i),S+=6,s-=C,l=w,w=T,T=-l,l=P,P=k,k=-l;return s&&(d=(.3294738052815987+.012120855841304373*s)*s,h=(u=Math.cos(s))+d*(c=Math.sin(s)),f=c-d*u,e.push(w+T*d+t,P+k*d+i,w*h+T*f+t,P*h+k*f+i,w*u+T*c+t,P*u+k*c+i),S+=6),S},arcSvg:function(e,t,i,n,r,o,a){e<0&&(e=-e),t<0&&(t=-t);var s,l,d=this.cursor[0],u=this.cursor[1],c=(d-o)/2,h=(u-a)/2,f=Math.cos(i),g=Math.sin(i),p=c*f+h*g,m=-c*g+h*f,x=p/e,y=m/t,v=x*x+y*y,E=.5*(d+o),b=.5*(u+a),C=0,S=0;1<=v?(e*=v=Math.sqrt(v),t*=v):(v=Math.sqrt(1/v-1),n===r&&(v=-v),E+=f*(C=v*e*y)-g*(S=-v*t*x),b+=g*C+f*S),s=Math.atan2((m-S)/t,(p-C)/e),l=Math.atan2((-m-S)/t,(-p-C)/e)-s,r?l<=0&&(l+=2*Math.PI):0<=l&&(l-=2*Math.PI),this.ellipse(E,b,e,t,i,s,s+l,1-r)},fromSvgString:function(e){if(e){var t,i,n,r,o,a=this,s={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0,A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},l="",d=0,u=0,c=!1;for(Ext.isString(e)?t=e.replace(Ext.draw.Path.pathRe," $1 ").replace(Ext.draw.Path.pathRe2," -").split(Ext.draw.Path.pathSplitRe):Ext.isArray(e)&&(t=e.join(",").split(Ext.draw.Path.pathSplitRe)),o=r=0;r<t.length;r++)""!==t[r]&&(t[o++]=t[r]);for(t.length=o,a.clear(),r=0;r<t.length;)switch(l=c,c=t[r],r++,c){case"M":for(a.moveTo(d=+t[r],u=+t[r+1]),r+=2;r<o&&!s.hasOwnProperty(t[r]);)a.lineTo(d=+t[r],u=+t[r+1]),r+=2;break;case"L":for(a.lineTo(d=+t[r],u=+t[r+1]),r+=2;r<o&&!s.hasOwnProperty(t[r]);)a.lineTo(d=+t[r],u=+t[r+1]),r+=2;break;case"A":for(;r<o&&!s.hasOwnProperty(t[r]);)a.arcSvg(+t[r],+t[r+1],t[r+2]*Math.PI/180,+t[r+3],+t[r+4],d=+t[r+5],u=+t[r+6]),r+=7;break;case"C":for(;r<o&&!s.hasOwnProperty(t[r]);)a.bezierCurveTo(+t[r],+t[r+1],i=+t[r+2],n=+t[r+3],d=+t[r+4],u=+t[r+5]),r+=6;break;case"Z":a.closePath();break;case"m":for(a.moveTo(d+=+t[r],u+=+t[r+1]),r+=2;r<o&&!s.hasOwnProperty(t[r]);)a.lineTo(d+=+t[r],u+=+t[r+1]),r+=2;break;case"l":for(a.lineTo(d+=+t[r],u+=+t[r+1]),r+=2;r<o&&!s.hasOwnProperty(t[r]);)a.lineTo(d+=+t[r],u+=+t[r+1]),r+=2;break;case"a":for(;r<o&&!s.hasOwnProperty(t[r]);)a.arcSvg(+t[r],+t[r+1],t[r+2]*Math.PI/180,+t[r+3],+t[r+4],d+=+t[r+5],u+=+t[r+6]),r+=7;break;case"c":for(;r<o&&!s.hasOwnProperty(t[r]);)a.bezierCurveTo(d+ +t[r],u+ +t[r+1],i=d+ +t[r+2],n=u+ +t[r+3],d+=+t[r+4],u+=+t[r+5]),r+=6;break;case"z":a.closePath();break;case"s":for("c"!==l&&"C"!==l&&"s"!==l&&"S"!==l&&(i=d,n=u);r<o&&!s.hasOwnProperty(t[r]);)a.bezierCurveTo(d+d-i,u+u-n,i=d+ +t[r],n=u+ +t[r+1],d+=+t[r+2],u+=+t[r+3]),r+=4;break;case"S":for("c"!==l&&"C"!==l&&"s"!==l&&"S"!==l&&(i=d,n=u);r<o&&!s.hasOwnProperty(t[r]);)a.bezierCurveTo(d+d-i,u+u-n,i=+t[r],n=+t[r+1],d=+t[r+2],u=+t[r+3]),r+=4;break;case"q":for(;r<o&&!s.hasOwnProperty(t[r]);)a.quadraticCurveTo(i=d+ +t[r],n=u+ +t[r+1],d+=+t[r+2],u+=+t[r+3]),r+=4;break;case"Q":for(;r<o&&!s.hasOwnProperty(t[r]);)a.quadraticCurveTo(i=+t[r],n=+t[r+1],d=+t[r+2],u=+t[r+3]),r+=4;break;case"t":for("q"!==l&&"Q"!==l&&"t"!==l&&"T"!==l&&(i=d,n=u);r<o&&!s.hasOwnProperty(t[r]);)a.quadraticCurveTo(i=d+d-i,n=u+u-n,d+=+t[r+1],u+=+t[r+2]),r+=2;break;case"T":for("q"!==l&&"Q"!==l&&"t"!==l&&"T"!==l&&(i=d,n=u);r<o&&!s.hasOwnProperty(t[r]);)a.quadraticCurveTo(i=d+d-i,n=u+u-n,d=+t[r+1],u=+t[r+2]),r+=2;break;case"h":for(;r<o&&!s.hasOwnProperty(t[r]);)a.lineTo(d+=+t[r],u),r++;break;case"H":for(;r<o&&!s.hasOwnProperty(t[r]);)a.lineTo(d=+t[r],u),r++;break;case"v":for(;r<o&&!s.hasOwnProperty(t[r]);)a.lineTo(d,u+=+t[r]),r++;break;case"V":for(;r<o&&!s.hasOwnProperty(t[r]);)a.lineTo(d,u=+t[r]),r++}}},clone:function(){var e=new Ext.draw.Path;return e.params=this.params.slice(0),e.commands=this.commands.slice(0),e.cursor=this.cursor?this.cursor.slice(0):null,e.startX=this.startX,e.startY=this.startY,e.svgString=this.svgString,e},transform:function(e){if(!e.isIdentity()){for(var t,i,n=e.getXX(),r=e.getYX(),o=e.getDX(),a=e.getXY(),s=e.getYY(),l=e.getDY(),d=this.params,u=0,c=d.length;u<c;u+=2)t=d[u],i=d[u+1],d[u]=t*n+i*r+o,d[u+1]=t*a+i*s+l;this.dirt()}},getDimension:function(e){if(e=e||{},!this.commands||!this.commands.length)return e.x=0,e.y=0,e.width=0,e.height=0,e;e.left=1/0,e.top=1/0,e.right=-1/0,e.bottom=-1/0;for(var t,i,n=0,r=0,o=this.commands,a=this.params,s=o.length;n<s;n++)switch(o[n]){case"M":case"L":t=a[r],i=a[r+1],e.left=Math.min(t,e.left),e.top=Math.min(i,e.top),e.right=Math.max(t,e.right),e.bottom=Math.max(i,e.bottom),r+=2;break;case"C":this.expandDimension(e,t,i,a[r],a[r+1],a[r+2],a[r+3],t=a[r+4],i=a[r+5]),r+=6}return e.x=e.left,e.y=e.top,e.width=e.right-e.left,e.height=e.bottom-e.top,e},getDimensionWithTransform:function(e,t){if(!this.commands||!this.commands.length)return(t=t||{}).x=0,t.y=0,t.width=0,t.height=0,t;t.left=1/0,t.top=1/0,t.right=-1/0,t.bottom=-1/0;for(var i,n,r=e.getXX(),o=e.getYX(),a=e.getDX(),s=e.getXY(),l=e.getYY(),d=e.getDY(),u=0,c=0,h=this.commands,f=this.params,g=h.length;u<g;u++)switch(h[u]){case"M":case"L":i=f[c]*r+f[c+1]*o+a,n=f[c]*s+f[c+1]*l+d,t.left=Math.min(i,t.left),t.top=Math.min(n,t.top),t.right=Math.max(i,t.right),t.bottom=Math.max(n,t.bottom),c+=2;break;case"C":this.expandDimension(t,i,n,f[c]*r+f[c+1]*o+a,f[c]*s+f[c+1]*l+d,f[c+2]*r+f[c+3]*o+a,f[c+2]*s+f[c+3]*l+d,i=f[c+4]*r+f[c+5]*o+a,n=f[c+4]*s+f[c+5]*l+d),c+=6}return(t=t||{}).x=t.left,t.y=t.top,t.width=t.right-t.left,t.height=t.bottom-t.top,t},expandDimension:function(e,t,i,n,r,o,a,s,l){var d=e.left,u=e.right,c=e.top,h=e.bottom,f=this.dim||(this.dim=[]);this.curveDimension(t,n,o,s,f),d=Math.min(d,f[0]),u=Math.max(u,f[1]),this.curveDimension(i,r,a,l,f),c=Math.min(c,f[0]),h=Math.max(h,f[1]),e.left=d,e.right=u,e.top=c,e.bottom=h},curveDimension:function(e,t,i,n,r){var o,a,s,l=3*(3*(t-i)-e+n),d=6*(e-2*t+i),u=-3*(e-t),c=Math.min(e,n),h=Math.max(e,n);if(0==l){if(0==d)return r[0]=c,void(r[1]=h);0<(o=-u/d)&&o<1&&(a=this.interpolate(e,t,i,n,o),c=Math.min(c,a),h=Math.max(h,a))}else 0<=(s=d*d-4*l*u)&&(0<(o=((s=Math.sqrt(s))-d)/2/l)&&o<1&&(a=this.interpolate(e,t,i,n,o),c=Math.min(c,a),h=Math.max(h,a)),0<s&&0<(o-=s/l)&&o<1&&(a=this.interpolate(e,t,i,n,o),c=Math.min(c,a),h=Math.max(h,a)));r[0]=c,r[1]=h},interpolate:function(e,t,i,n,r){var o;return 0===r?e:1===r?n:r*r*r*(n+(o=(1-r)/r)*(3*i+o*(3*t+o*e)))},fromStripes:function(e){var t,i,n,r=this,o=0,a=e.length;for(r.clear();o<a;o++)for(n=e[o],r.params.push.apply(r.params,n),r.commands.push("M"),t=2,i=n.length;t<i;t+=6)r.commands.push("C");r.cursor||(r.cursor=[]),r.cursor[0]=r.params[r.params.length-2],r.cursor[1]=r.params[r.params.length-1],r.dirt()},toStripes:function(e){var t,i,n,r,o,a,s,l,d,u=e||[],c=this.commands,h=this.params,f=c.length;for(d=l=0;l<f;l++)switch(c[l]){case"M":t=[a=r=h[d++],s=o=h[d++]],u.push(t);break;case"L":i=h[d++],n=h[d++],t.push((r+r+i)/3,(o+o+n)/3,(r+i+i)/3,(o+n+n)/3,r=i,o=n);break;case"C":t.push(h[d++],h[d++],h[d++],h[d++],r=h[d++],o=h[d++]);break;case"Z":i=a,n=s,t.push((r+r+i)/3,(o+o+n)/3,(r+i+i)/3,(o+n+n)/3,r=i,o=n)}return u},updateSvgString:function(){for(var e=[],t=this.commands,i=this.params,n=t.length,r=0,o=0;r<n;r++)switch(t[r]){case"M":e.push("M"+i[o]+","+i[o+1]),o+=2;break;case"L":e.push("L"+i[o]+","+i[o+1]),o+=2;break;case"C":e.push("C"+i[o]+","+i[o+1]+" "+i[o+2]+","+i[o+3]+" "+i[o+4]+","+i[o+5]),o+=6;break;case"Z":e.push("Z")}this.svgString=e.join("")},toString:function(){return this.svgString||this.updateSvgString(),this.svgString}}),Ext.define("Ext.draw.overrides.hittest.Path",{override:"Ext.draw.Path",rayOrigin:{x:-1e4,y:-1e4},isPointInPath:function(e,t){var i,n,r=this.commands,o=Ext.draw.PathUtil,a=this.rayOrigin,s=this.params,l=r.length,d=null,u=null,c=0,h=0,f=0;for(n=i=0;i<l;i++)switch(r[i]){case"M":null!==d&&o.linesIntersection(d,u,c,h,a.x,a.y,e,t)&&(f+=1),d=c=s[n],u=h=s[n+1],n+=2;break;case"L":o.linesIntersection(c,h,s[n],s[n+1],a.x,a.y,e,t)&&(f+=1),c=s[n],h=s[n+1],n+=2;break;case"C":f+=o.cubicLineIntersections(c,s[n],s[n+2],s[n+4],h,s[n+1],s[n+3],s[n+5],a.x,a.y,e,t).length,c=s[n+4],h=s[n+5],n+=6;break;case"Z":null!==d&&o.linesIntersection(d,u,c,h,a.x,a.y,e,t)&&(f+=1)}return f%2==1},isPointOnPath:function(e,t){var i,n,r=this.commands,o=Ext.draw.PathUtil,a=this.params,s=r.length,l=null,d=null,u=0,c=0;for(n=i=0;i<s;i++)switch(r[i]){case"M":if(null!==l&&o.pointOnLine(l,d,u,c,e,t))return!0;l=u=a[n],d=c=a[n+1],n+=2;break;case"L":if(o.pointOnLine(u,c,a[n],a[n+1],e,t))return!0;u=a[n],c=a[n+1],n+=2;break;case"C":if(o.pointOnCubic(u,a[n],a[n+2],a[n+4],c,a[n+1],a[n+3],a[n+5],e,t))return!0;u=a[n+4],c=a[n+5],n+=6;break;case"Z":if(null!==l&&o.pointOnLine(l,d,u,c,e,t))return!0}return!1},getSegmentIntersections:function(e,t,i,n,r,o,a,s){var l,d,u,c=arguments.length,h=Ext.draw.PathUtil,f=this.commands,g=this.params,p=f.length,m=null,x=null,y=0,v=0,E=[];for(d=l=0;l<p;l++)switch(f[l]){case"M":if(null!==m)switch(c){case 4:(u=h.linesIntersection(m,x,y,v,e,t,i,n))&&E.push(u);break;case 8:u=h.cubicLineIntersections(e,i,r,a,t,n,o,s,m,x,y,v),E.push.apply(E,u)}m=y=g[d],x=v=g[d+1],d+=2;break;case"L":switch(c){case 4:(u=h.linesIntersection(y,v,g[d],g[d+1],e,t,i,n))&&E.push(u);break;case 8:u=h.cubicLineIntersections(e,i,r,a,t,n,o,s,y,v,g[d],g[d+1]),E.push.apply(E,u)}y=g[d],v=g[d+1],d+=2;break;case"C":switch(c){case 4:u=h.cubicLineIntersections(y,g[d],g[d+2],g[d+4],v,g[d+1],g[d+3],g[d+5],e,t,i,n),E.push.apply(E,u);break;case 8:u=h.cubicsIntersections(y,g[d],g[d+2],g[d+4],v,g[d+1],g[d+3],g[d+5],e,i,r,a,t,n,o,s),E.push.apply(E,u)}y=g[d+4],v=g[d+5],d+=6;break;case"Z":if(null!==m)switch(c){case 4:(u=h.linesIntersection(m,x,y,v,e,t,i,n))&&E.push(u);break;case 8:u=h.cubicLineIntersections(e,i,r,a,t,n,o,s,m,x,y,v),E.push.apply(E,u)}}return E},getIntersections:function(e){var t,i,n,r=this.commands,o=this.params,a=r.length,s=null,l=null,d=0,u=0,c=[];for(i=t=0;t<a;t++)switch(r[t]){case"M":null!==s&&(n=e.getSegmentIntersections.call(e,s,l,d,u),c.push.apply(c,n)),s=d=o[i],l=u=o[i+1],i+=2;break;case"L":n=e.getSegmentIntersections.call(e,d,u,o[i],o[i+1]),c.push.apply(c,n),d=o[i],u=o[i+1],i+=2;break;case"C":n=e.getSegmentIntersections.call(e,d,u,o[i],o[i+1],o[i+2],o[i+3],o[i+4],o[i+5]),c.push.apply(c,n),d=o[i+4],u=o[i+5],i+=6;break;case"Z":null!==s&&(n=e.getSegmentIntersections.call(e,s,l,d,u),c.push.apply(c,n))}return c}}),Ext.define("Ext.draw.sprite.Path",{extend:"Ext.draw.sprite.Sprite",requires:["Ext.draw.Draw","Ext.draw.Path"],alias:["sprite.path","Ext.draw.Sprite"],type:"path",isPath:!0,inheritableStatics:{def:{processors:{path:function(e,t){return e instanceof Ext.draw.Path||(e=new Ext.draw.Path(e)),e}},aliases:{d:"path"},triggers:{path:"bbox"},updaters:{path:function(e){var t=e.path;t&&t.bindAttr===e||(((t=new Ext.draw.Path).bindAttr=e).path=t),t.clear(),this.updatePath(t,e),this.scheduleUpdater(e,"bbox",["path"])}}}},updatePlainBBox:function(e){this.attr.path&&this.attr.path.getDimension(e)},updateTransformedBBox:function(e){this.attr.path&&this.attr.path.getDimensionWithTransform(this.attr.matrix,e)},render:function(e,t){var i=this.attr.matrix,n=this.attr;if(n.path&&0!==n.path.params.length){i.toContext(t),t.appendPath(n.path),t.fillStroke(n);var r=n.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;r&&(r.bbox&&this.renderBBox(e,t),r.xray&&this.renderXRay(e,t))}},renderXRay:function(e,t){var i,n,r=this.attr,o=r.matrix,a=r.inverseMatrix,s=r.path,l=s.commands,d=s.params,u=l.length,c=2*Math.PI;for(o.toContext(t),t.beginPath(),n=i=0;i<u;i++)switch(l[i]){case"M":case"L":t.moveTo(d[n]-2,d[n+1]-2),t.rect(d[n]-2,d[n+1]-2,4,4),n+=2;break;case"C":t.moveTo(d[n]+2,d[n+1]),t.arc(d[n],d[n+1],2,0,c,!0),n+=2,t.moveTo(d[n]+2,d[n+1]),t.arc(d[n],d[n+1],2,0,c,!0),n+=2,t.moveTo(d[n]+4,d[n+1]),t.rect(d[n]-2,d[n+1]-2,4,4),n+=2}for(a.toContext(t),t.strokeStyle="black",t.strokeOpacity=1,t.lineWidth=1,t.stroke(),o.toContext(t),t.beginPath(),n=i=0;i<u;i++)switch(l[i]){case"M":case"L":t.moveTo(d[n],d[n+1]),n+=2;break;case"C":t.lineTo(d[n],d[n+1]),n+=2,t.moveTo(d[n],d[n+1]),n+=2,t.lineTo(d[n],d[n+1]),n+=2}a.toContext(t),t.lineWidth=.5,t.stroke()},updatePath:function(e,t){}}),Ext.define("Ext.draw.overrides.hittest.sprite.Path",{override:"Ext.draw.sprite.Path",requires:["Ext.draw.Color"],isPointInPath:function(e,t){var i,n,r,o=this.attr;return o.fillStyle===Ext.util.Color.RGBA_NONE?this.isPointOnPath(e,t):(i=o.path,o.matrix.isIdentity()||(n=i.params.slice(0),i.transform(o.matrix)),r=i.isPointInPath(e,t),n&&(i.params=n),r)},isPointOnPath:function(e,t){var i,n,r=this.attr,o=r.path;return r.matrix.isIdentity()||(i=o.params.slice(0),o.transform(r.matrix)),n=o.isPointOnPath(e,t),i&&(o.params=i),n},hitTest:function(e,t){var i,n=this.attr,r=n.path,o=n.matrix,a=e[0],s=e[1],l=null;return this.callParent([e,t])&&(t=t||Ext.draw.sprite.Sprite.defaultHitTestOptions,o.isIdentity()||(i=r.params.slice(0),r.transform(n.matrix)),t.fill&&t.stroke?n.fillStyle!==Ext.util.Color.NONE&&n.fillStyle!==Ext.util.Color.RGBA_NONE?r.isPointInPath(a,s)&&(l={sprite:this}):(r.isPointInPath(a,s)||r.isPointOnPath(a,s))&&(l={sprite:this}):t.stroke&&!t.fill?r.isPointOnPath(a,s)&&(l={sprite:this}):t.fill&&!t.stroke&&r.isPointInPath(a,s)&&(l={sprite:this}),i&&(r.params=i)),l},getIntersections:function(e){if(!e.isSprite||!e.isPath)return[];var t,i,n,r=this.attr,o=e.attr,a=r.path,s=o.path,l=r.matrix,d=o.matrix;return l.isIdentity()||(t=a.params.slice(0),a.transform(r.matrix)),d.isIdentity()||(i=s.params.slice(0),s.transform(o.matrix)),n=a.getIntersections(s),t&&(a.params=t),i&&(s.params=i),n}}),Ext.define("Ext.draw.sprite.Circle",{extend:"Ext.draw.sprite.Path",alias:"sprite.circle",type:"circle",inheritableStatics:{def:{processors:{cx:"number",cy:"number",r:"number"},aliases:{radius:"r",x:"cx",y:"cy",centerX:"cx",centerY:"cy"},defaults:{cx:0,cy:0,r:4},triggers:{cx:"path",cy:"path",r:"path"}}},updatePlainBBox:function(e){var t=this.attr,i=t.cx,n=t.cy,r=t.r;e.x=i-r,e.y=n-r,e.width=r+r,e.height=r+r},updateTransformedBBox:function(e){var t,i,n=this.attr,r=n.cx,o=n.cy,a=n.r,s=n.matrix;t=s.getScaleX()*a,i=s.getScaleY()*a,e.x=s.x(r,o)-t,e.y=s.y(r,o)-i,e.width=t+t,e.height=i+i},updatePath:function(e,t){e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!1)}}),Ext.define("Ext.draw.sprite.Arc",{extend:"Ext.draw.sprite.Circle",alias:"sprite.arc",type:"arc",inheritableStatics:{def:{processors:{startAngle:"number",endAngle:"number",anticlockwise:"bool"},aliases:{from:"startAngle",to:"endAngle",start:"startAngle",end:"endAngle"},defaults:{startAngle:0,endAngle:2*Math.PI,anticlockwise:!1},triggers:{startAngle:"path",endAngle:"path",anticlockwise:"path"}}},updatePath:function(e,t){e.arc(t.cx,t.cy,t.r,t.startAngle,t.endAngle,t.anticlockwise)}}),Ext.define("Ext.draw.sprite.Arrow",{extend:"Ext.draw.sprite.Path",alias:"sprite.arrow",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(e,t){var i=1.5*t.size,n=t.x-t.lineWidth/2,r=t.y;e.fromSvgString("M".concat(n-.7*i,",",r-.4*i,"l",[.6*i,0,0,.4*-i,i,.8*i,-i,.8*i,0,.4*-i,.6*-i,0],"z"))}}),Ext.define("Ext.draw.sprite.Composite",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.composite",type:"composite",isComposite:!0,config:{sprites:[]},constructor:function(e){this.sprites=[],this.map={},this.callParent([e])},addSprite:function(t){var i,e,n,r=0;if(Ext.isArray(t)){for(e=[];r<t.length;)e.push(this.addSprite(t[r++]));return e}return t&&t.type&&!t.isSprite&&(t=Ext.create("sprite."+t.type,t)),t&&t.isSprite&&!t.isComposite?(t.setSurface(null),t.setParent(this),i=this.attr,n=t.applyTransformations,t.applyTransformations=function(e){t.attr.dirtyTransform&&(i.dirtyTransform=!0,i.bbox.plain.dirty=!0,i.bbox.transform.dirty=!0),n.call(t,e)},this.sprites.push(t),this.map[t.id]=t.getId(),i.bbox.plain.dirty=!0,i.bbox.transform.dirty=!0,t):null},add:function(e){return this.addSprite(e)},removeSprite:function(e,t){var i,n;if(e){if(e.charAt&&(e=this.map[e]),!e||!e.isSprite)return null;if(e.destroyed||e.destroying)return e;if(i=e.getId(),n=this.map[i],delete this.map[i],t&&e.destroy(),!n)return e;e.setParent(null),Ext.Array.remove(this.sprites,e),this.dirtyZIndex=!0,this.setDirty(!0)}return e||null},addAll:function(e){var t=0;if(e.isSprite||e.type)this.add(e);else if(Ext.isArray(e))for(;t<e.length;)this.add(e[t++])},updatePlainBBox:function(e){var t,i,n,r,o=1/0,a=-1/0,s=1/0,l=-1/0;for(n=0,r=this.sprites.length;n<r;n++)(t=this.sprites[n]).applyTransformations(),o>(i=t.getBBox()).x&&(o=i.x),a<i.x+i.width&&(a=i.x+i.width),s>i.y&&(s=i.y),l<i.y+i.height&&(l=i.y+i.height);e.x=o,e.y=s,e.width=a-o,e.height=l-s},isVisible:function(){var e=this.attr,t=this.getParent();return!!(t&&(t.isSurface||t.isVisible())&&!e.hidden&&e.globalAlpha)},render:function(e,t,i){var n=this.attr,r=this.attr.matrix,o=this.sprites,a=o.length,s=0;for(r.toContext(t);s<a;s++)e.renderSprite(o[s],i);var l=n.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;l&&(n.inverseMatrix.toContext(t),l.bbox&&this.renderBBox(e,t))},destroy:function(){var e,t=this.sprites,i=t.length;for(e=0;e<i;e++)t[e].destroy();t.length=0,this.callParent()}}),Ext.define("Ext.draw.sprite.Cross",{extend:"Ext.draw.sprite.Path",alias:"sprite.cross",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(e,t){var i=t.size/1.7,n=t.x-t.lineWidth/2,r=t.y;e.fromSvgString("M".concat(n-i,",",r,"l",[-i,-i,i,-i,i,i,i,-i,i,i,-i,i,i,i,-i,i,-i,-i,-i,i,-i,-i,"z"]))}}),Ext.define("Ext.draw.sprite.Diamond",{extend:"Ext.draw.sprite.Path",alias:"sprite.diamond",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(e,t){var i=1.25*t.size,n=t.x-t.lineWidth/2,r=t.y;e.fromSvgString(["M",n,r-i,"l",i,i,-i,i,-i,-i,i,-i,"z"])}}),Ext.define("Ext.draw.sprite.Ellipse",{extend:"Ext.draw.sprite.Path",alias:"sprite.ellipse",type:"ellipse",inheritableStatics:{def:{processors:{cx:"number",cy:"number",rx:"number",ry:"number",axisRotation:"number"},aliases:{radius:"r",x:"cx",y:"cy",centerX:"cx",centerY:"cy",radiusX:"rx",radiusY:"ry"},defaults:{cx:0,cy:0,rx:1,ry:1,axisRotation:0},triggers:{cx:"path",cy:"path",rx:"path",ry:"path",axisRotation:"path"}}},updatePlainBBox:function(e){var t=this.attr,i=t.cx,n=t.cy,r=t.rx,o=t.ry;e.x=i-r,e.y=n-o,e.width=r+r,e.height=o+o},updateTransformedBBox:function(e){var t,i,n,r,o,a,s,l,d=this.attr,u=d.cx,c=d.cy,h=d.rx,f=d.ry/h,g=d.matrix.clone();g.append(1,0,0,f,0,c*(1-f)),t=g.getXX(),n=g.getYX(),o=g.getDX(),i=g.getXY(),r=g.getYY(),a=g.getDY(),s=Math.sqrt(t*t+n*n)*h,l=Math.sqrt(i*i+r*r)*h,e.x=u*t+c*n+o-s,e.y=u*i+c*r+a-l,e.width=s+s,e.height=l+l},updatePath:function(e,t){e.ellipse(t.cx,t.cy,t.rx,t.ry,t.axisRotation,0,2*Math.PI,!1)}}),Ext.define("Ext.draw.sprite.EllipticalArc",{extend:"Ext.draw.sprite.Ellipse",alias:"sprite.ellipticalArc",type:"ellipticalArc",inheritableStatics:{def:{processors:{startAngle:"number",endAngle:"number",anticlockwise:"bool"},aliases:{from:"startAngle",to:"endAngle",start:"startAngle",end:"endAngle"},defaults:{startAngle:0,endAngle:2*Math.PI,anticlockwise:!1},triggers:{startAngle:"path",endAngle:"path",anticlockwise:"path"}}},updatePath:function(e,t){e.ellipse(t.cx,t.cy,t.rx,t.ry,t.axisRotation,t.startAngle,t.endAngle,t.anticlockwise)}}),Ext.define("Ext.draw.sprite.Rect",{extend:"Ext.draw.sprite.Path",alias:"sprite.rect",type:"rect",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number",radius:"number"},aliases:{},triggers:{x:"path",y:"path",width:"path",height:"path",radius:"path"},defaults:{x:0,y:0,width:8,height:8,radius:0}}},updatePlainBBox:function(e){var t=this.attr;e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},updateTransformedBBox:function(e,t){this.attr.matrix.transformBBox(t,this.attr.radius,e)},updatePath:function(e,t){var i=t.x,n=t.y,r=t.width,o=t.height,a=Math.min(t.radius,.5*Math.abs(o),.5*Math.abs(r));0===a?e.rect(i,n,r,o):(e.moveTo(i+a,n),e.arcTo(i+r,n,i+r,n+o,a),e.arcTo(i+r,n+o,i,n+o,a),e.arcTo(i,n+o,i,n,a),e.arcTo(i,n,i+a,n,a),e.closePath())}}),Ext.define("Ext.draw.sprite.Image",{extend:"Ext.draw.sprite.Rect",alias:"sprite.image",type:"image",statics:{imageLoaders:{}},inheritableStatics:{def:{processors:{src:"string"},triggers:{src:"src"},updaters:{src:"updateSource"},defaults:{src:"",width:null,height:null}}},updateSurface:function(e){e&&this.updateSource(this.attr)},updateSource:function(e){var t,i,n=e.src,r=this.getSurface(),o=Ext.draw.sprite.Image.imageLoaders[n],a=e.width,s=e.height;r&&(o?(Ext.Array.include(o.pendingSprites,this),Ext.Array.include(o.pendingSurfaces,r)):(t=new Image,o=Ext.draw.sprite.Image.imageLoaders[n]={image:t,done:!1,pendingSprites:[this],pendingSurfaces:[r]},t.width=a,t.height=s,t.onload=function(){var e;if(!o.done){for(o.done=!0,i=0;i<o.pendingSprites.length;i++)(e=o.pendingSprites[i]).destroyed||e.setDirty(!0);for(i=0;i<o.pendingSurfaces.length;i++)(e=o.pendingSurfaces[i]).destroyed||e.renderFrame()}},t.src=n))},render:function(e,t){var i,n=this.attr,r=n.matrix,o=n.src,a=n.x,s=n.y,l=n.width,d=n.height,u=Ext.draw.sprite.Image.imageLoaders[o];u&&u.done&&(r.toContext(t),i=u.image,t.drawImage(i,a,s,l||(i.naturalWidth||i.width)/e.devicePixelRatio,d||(i.naturalHeight||i.height)/e.devicePixelRatio));var c=n.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;c&&c.bbox&&this.renderBBox(e,t)},isVisible:function(){var e=this.attr,t=this.getParent();return!!(t&&(t.isSurface||t.isVisible())&&!e.hidden&&e.globalAlpha)}}),Ext.define("Ext.draw.sprite.Instancing",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.instancing",type:"instancing",isInstancing:!0,config:{template:null,instances:null},instances:null,applyTemplate:function(e){var t;return Ext.isObject(e)?(e.isInstancing||e.isComposite)&&Ext.raise("Can't use an instancing or composite sprite as a template for an instancing sprite."):Ext.raise("A template of an instancing sprite must either be a sprite instance or a valid config object from which a template sprite will be created."),e.isSprite||(e.xclass||e.type||(e.type="circle"),e=Ext.create(e.xclass||"sprite."+e.type,e)),(t=e.getSurface())&&t.remove(e),e.setParent(this),e},updateTemplate:function(e,t){t&&delete t.ownAttr,e.setSurface(this.getSurface()),e.ownAttr=e.attr,this.clearAll(),this.setDirty(!0)},updateInstances:function(e){var t,i;if(this.clearAll(),Ext.isArray(e))for(t=0,i=e.length;t<i;t++)this.add(e[t])},updateSurface:function(e){var t=this.getTemplate();t&&!t.destroyed&&t.setSurface(e)},get:function(e){return this.instances[e]},getCount:function(){return this.instances.length},clearAll:function(){this.getTemplate().attr.children=this.instances=[],this.position=0},createInstance:function(e,t,i){return this.add(e,t,i)},add:function(e,t,i){var n=this.getTemplate(),r=n.attr,o=Ext.Object.chain(r);return n.modifiers.target.prepareAttributes(o),n.attr=o,n.setAttributes(e,t,i),o.template=n,this.instances.push(o),n.attr=r,this.position++,o},getBBox:function(){return null},getBBoxFor:function(e,t){var i,n=this.getTemplate(),r=n.attr;return n.attr=this.instances[e],i=n.getBBox(t),n.attr=r,i},isVisible:function(){var e=this.attr,t=this.getParent();return!!(t&&t.isSurface&&!e.hidden&&e.globalAlpha)},isInstanceVisible:function(e){var t=this.getTemplate(),i=t.attr,n=this.instances,r=!1;return!Ext.isNumber(e)||e<0||e>=n.length||!this.isVisible()||(t.attr=n[e],r=t.isVisible(point,options),t.attr=i),r},render:function(e,t,i){this.getTemplate()||Ext.raise("An instancing sprite must have a template.");var n,r=this.getTemplate(),o=e.getRect(),a=this.attr.matrix,s=r.attr,l=this.instances,d=this.position;for(a.toContext(t),r.preRender(e,t,i),r.useAttributes(t,o),r.isSpriteInstance=!0,n=0;n<d;n++)l[n].hidden||(t.save(),r.attr=l[n],r.useAttributes(t,o),r.render(e,t,i),t.restore());r.isSpriteInstance=!1,r.attr=s},setAttributesFor:function(e,t,i){var n=this.getTemplate(),r=n.attr,o=this.instances[e];o&&(n.attr=o,t=i?Ext.apply({},t):n.self.def.normalize(t),n.modifiers.target.pushDown(o,t),n.attr=r)},destroy:function(){var e=this.getTemplate();this.instances=null,e&&e.destroy(),this.callParent()}}),Ext.define("Ext.draw.overrides.hittest.sprite.Instancing",{override:"Ext.draw.sprite.Instancing",hitTest:function(e,t){var i=this.getTemplate(),n=i.attr,r=this.instances,o=r.length,a=0,s=null;if(!this.isVisible())return s;for(;a<o;a++)if(i.attr=r[a],s=i.hitTest(e,t))return s.isInstance=!0,s.template=s.sprite,s.sprite=this,s.instance=r[a],s.index=a,s;return i.attr=n,s}}),Ext.define("Ext.draw.sprite.Line",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.line",type:"line",inheritableStatics:{def:{processors:{fromX:"number",fromY:"number",toX:"number",toY:"number",crisp:"bool"},defaults:{fromX:0,fromY:0,toX:1,toY:1,crisp:!1,strokeStyle:"black"},aliases:{x1:"fromX",y1:"fromY",x2:"toX",y2:"toY"},triggers:{crisp:"bbox"}}},updateLineBBox:function(e,t,i,n,r,o){var a,s,l,d,u,c,h,f,g,p=this.attr,m=p.matrix,x=p.lineWidth/2;p.crisp&&(i=this.align(i),r=this.align(r),n=this.align(n),o=this.align(o)),t&&(i=(u=m.transformPoint([i,n]))[0],n=u[1],r=(u=m.transformPoint([r,o]))[0],o=u[1]),a=Math.min(i,r),l=Math.max(i,r),s=Math.min(n,o),d=Math.max(n,o),c=Math.atan2(l-a,d-s),h=Math.sin(c),a-=f=x*Math.cos(c),s-=g=x*h,l+=f,d+=g,e.x=a,e.y=s,e.width=l-a,e.height=d-s},updatePlainBBox:function(e){var t=this.attr;this.updateLineBBox(e,!1,t.fromX,t.fromY,t.toX,t.toY)},updateTransformedBBox:function(e,t){var i=this.attr;this.updateLineBBox(e,!0,i.fromX,i.fromY,i.toX,i.toY)},align:function(e){return Math.round(e)-.5},render:function(e,t){var i=this.attr;i.matrix.toContext(t),t.beginPath(),i.crisp?(t.moveTo(this.align(i.fromX),this.align(i.fromY)),t.lineTo(this.align(i.toX),this.align(i.toY))):(t.moveTo(i.fromX,i.fromY),t.lineTo(i.toX,i.toY)),t.stroke();var n=i.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;n&&(this.attr.inverseMatrix.toContext(t),n.bbox&&this.renderBBox(e,t))}}),Ext.define("Ext.draw.sprite.Plus",{extend:"Ext.draw.sprite.Path",alias:"sprite.plus",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(e,t){var i=t.size/1.3,n=t.x-t.lineWidth/2,r=t.y;e.fromSvgString("M".concat(n-i/2,",",r-i/2,"l",[0,-i,i,0,0,i,i,0,0,i,-i,0,0,i,-i,0,0,-i,-i,0,0,-i,"z"]))}}),Ext.define("Ext.draw.sprite.Sector",{extend:"Ext.draw.sprite.Path",alias:"sprite.sector",type:"sector",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",margin:"number"},aliases:{rho:"endRho"},triggers:{centerX:"path,bbox",centerY:"path,bbox",startAngle:"path,bbox",endAngle:"path,bbox",startRho:"path,bbox",endRho:"path,bbox",margin:"path,bbox"},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:0,startRho:0,endRho:150,margin:0,path:"M 0,0"}}},getMidAngle:function(){return this.midAngle||0},updatePath:function(e,t){var i=Math.min(t.startAngle,t.endAngle),n=Math.max(t.startAngle,t.endAngle),r=this.midAngle=.5*(i+n),o=Ext.Number.isEqual(Math.abs(n-i),Ext.draw.Draw.pi2,1e-10),a=t.margin,s=t.centerX,l=t.centerY,d=Math.min(t.startRho,t.endRho),u=Math.max(t.startRho,t.endRho);a&&(s+=a*Math.cos(r),l+=a*Math.sin(r)),o||(e.moveTo(s+d*Math.cos(i),l+d*Math.sin(i)),e.lineTo(s+u*Math.cos(i),l+u*Math.sin(i))),e.arc(s,l,u,i,n,!1),e[o?"moveTo":"lineTo"](s+d*Math.cos(n),l+d*Math.sin(n)),e.arc(s,l,d,n,i,!0)}}),Ext.define("Ext.draw.sprite.Square",{extend:"Ext.draw.sprite.Path",alias:"sprite.square",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"size"}}},updatePath:function(e,t){var i=1.2*t.size,n=2*i,r=t.x-t.lineWidth/2,o=t.y;e.fromSvgString("M".concat(r-i,",",o-i,"l",[n,0,0,n,-n,0,0,-n,"z"]))}}),Ext.define("Ext.draw.TextMeasurer",{singleton:!0,requires:["Ext.util.TextMetrics"],measureDiv:null,measureCache:{},precise:Ext.isIE8,measureDivTpl:{id:"ext-draw-text-measurer",tag:"div",style:{overflow:"hidden",position:"relative",float:"left",width:0,height:0},"data-sticky":!0,children:{tag:"div",style:{display:"block",position:"absolute",x:-1e5,y:-1e5,padding:0,margin:0,"z-index":-1e5,"white-space":"nowrap"}}},actualMeasureText:function(e,t){var i,n,r=Ext.draw.TextMeasurer,o=r.measureDiv;return o||(n=Ext.Element.create({"data-sticky":!0,style:{overflow:"hidden",position:"relative",float:"left",width:0,height:0}}),r.measureDiv=o=Ext.Element.create({style:{position:"absolute",x:1e5,y:1e5,"z-index":-1e5,"white-space":"nowrap",display:"block",padding:0,margin:0}}),Ext.getBody().appendChild(n),n.appendChild(o)),t&&o.setStyle({font:t,lineHeight:"normal"}),o.setText("("+e+")"),i=o.getSize(),o.setText("()"),i.width-=o.getSize().width,i},measureTextSingleLine:function(e,t){var i,n,r,o,a,s,l,d=0,u=0;if(this.precise)return this.preciseMeasureTextSingleLine(e,t);if(e=e.toString(),i=this.measureCache,r=e.split(""),i[t]||(i[t]={}),(i=i[t])[e])return i[e];for(a=0,s=r.length;a<s;a++)(n=i[o=r[a]])||(l=this.actualMeasureText(o,t),n=i[o]=l),d+=n.width,u=Math.max(u,n.height);return i[e]={width:d,height:u}},preciseMeasureTextSingleLine:function(e,t){var i;return e=e.toString(),(i=this.measureDiv||(this.measureDiv=Ext.getBody().createChild(this.measureDivTpl).down("div"))).setStyle({font:t||""}),Ext.util.TextMetrics.measure(i,e)},measureText:function(e,t){var i,n,r,o=e.split("\n"),a=o.length,s=0,l=0;if(1===a)return this.measureTextSingleLine(e,t);for(r=[],n=0;n<a;n++)i=this.measureTextSingleLine(o[n],t),r.push(i),s+=i.height,l=Math.max(l,i.width);return{width:l,height:s,sizes:r}}}),Ext.define("Ext.draw.sprite.Text",function(){var t={"xx-small":!0,"x-small":!0,small:!0,medium:!0,large:!0,"x-large":!0,"xx-large":!0},i={normal:!0,bold:!0,bolder:!0,lighter:!0,100:!0,200:!0,300:!0,400:!0,500:!0,600:!0,700:!0,800:!0,900:!0},n={start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},r={top:"top",hanging:"hanging",middle:"middle",center:"middle",alphabetic:"alphabetic",ideographic:"ideographic",bottom:"bottom"};return{extend:"Ext.draw.sprite.Sprite",requires:["Ext.draw.TextMeasurer","Ext.draw.Color"],alias:"sprite.text",type:"text",lineBreakRe:/\r?\n/g,statics:{debug:!1,fontSizes:t,fontWeights:i,textAlignments:n,textBaselines:r},inheritableStatics:{def:{animationProcessors:{text:"text"},processors:{x:"number",y:"number",text:"string",fontSize:function(e){return Ext.isNumber(+e)?e+"px":e.match(Ext.dom.Element.unitRe)||e in t?e:void 0},fontStyle:"enums(,italic,oblique)",fontVariant:"enums(,small-caps)",fontWeight:function(e){return e in i?String(e):""},fontFamily:"string",textAlign:function(e){return n[e]||"center"},textBaseline:function(e){return r[e]||"alphabetic"},debug:"default",font:"string"},aliases:{"font-size":"fontSize","font-family":"fontFamily","font-weight":"fontWeight","font-variant":"fontVariant","text-anchor":"textAlign","dominant-baseline":"textBaseline"},defaults:{fontStyle:"",fontVariant:"",fontWeight:"",fontSize:"10px",fontFamily:"sans-serif",font:"10px sans-serif",textBaseline:"alphabetic",textAlign:"start",strokeStyle:"rgba(0, 0, 0, 0)",fillStyle:"#000",x:0,y:0,text:""},triggers:{fontStyle:"fontX,bbox",fontVariant:"fontX,bbox",fontWeight:"fontX,bbox",fontSize:"fontX,bbox",fontFamily:"fontX,bbox",font:"font,bbox,canvas",textBaseline:"bbox",textAlign:"bbox",x:"bbox",y:"bbox",text:"bbox"},updaters:{fontX:"makeFontShorthand",font:"parseFontShorthand"}}},config:{preciseMeasurement:void 0},constructor:function(e){var t;if(e&&e.font)for(t in e=Ext.clone(e))"font"!==t&&0===t.indexOf("font")&&delete e[t];Ext.draw.sprite.Sprite.prototype.constructor.call(this,e)},fontValuesMap:{italic:"fontStyle",oblique:"fontStyle","small-caps":"fontVariant",bold:"fontWeight",bolder:"fontWeight",lighter:"fontWeight",100:"fontWeight",200:"fontWeight",300:"fontWeight",400:"fontWeight",500:"fontWeight",600:"fontWeight",700:"fontWeight",800:"fontWeight",900:"fontWeight","xx-small":"fontSize","x-small":"fontSize",small:"fontSize",medium:"fontSize",large:"fontSize","x-large":"fontSize","xx-large":"fontSize"},makeFontShorthand:function(e){var t=[];e.fontStyle&&t.push(e.fontStyle),e.fontVariant&&t.push(e.fontVariant),e.fontWeight&&t.push(e.fontWeight),e.fontSize&&t.push(e.fontSize),e.fontFamily&&t.push(e.fontFamily),this.setAttributes({font:t.join(" ")},!0)},parseFontShorthand:function(e){for(var t,i,n,r,o=e.font,a=o.length,s={},l=this.fontValuesMap,d=0;d<a&&-1!==t;){if((t=o.indexOf(" ",d))<0)n=o.substr(d);else{if(!(d<t))continue;n=o.substr(d,t-d)}if(0<(i=n.indexOf("/")))n=n.substr(0,i);else if(0===i)continue;if("normal"!==n&&"inherit"!==n)if(r=l[n])s[r]=n;else{if(!n.match(Ext.dom.Element.unitRe)){s.fontFamily=o.substr(d);break}s.fontSize=n}d=t+1}s.fontStyle||(s.fontStyle=""),s.fontVariant||(s.fontVariant=""),s.fontWeight||(s.fontWeight=""),this.setAttributes(s,!0)},fontProperties:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,fontFamily:!0},setAttributes:function(e,t,i){var n,r;if(e&&e.font){for(n in r={},e)n in this.fontProperties||(r[n]=e[n]);e=r}this.callParent([e,t,i])},getBBox:function(e){var t=this.attr.bbox.plain,i=this.getSurface();return t.dirty&&(this.updatePlainBBox(t),t.dirty=!1),i&&i.getInherited().rtl&&i.getFlipRtlText()&&this.updatePlainBBox(t,!0),this.callParent([e])},rtlAlignments:{start:"end",center:"center",end:"start"},updatePlainBBox:function(e,t){var i,n,r=this.attr,o=r.x,a=r.y,s=[],l=r.font,d=r.text,u=r.textBaseline,c=r.textAlign,h=this.getPreciseMeasurement();t&&this.oldSize?i=this.oldSize:(n=Ext.draw.TextMeasurer.precise,Ext.isBoolean(h)&&(Ext.draw.TextMeasurer.precise=h),i=this.oldSize=Ext.draw.TextMeasurer.measureText(d,l),Ext.draw.TextMeasurer.precise=n);var f,g,p=this.getSurface(),m=p&&p.getInherited().rtl||!1,x=m&&p.getFlipRtlText(),y=i.sizes,v=i.height,E=i.width,b=y?y.length:0,C=0;switch(u){case"hanging":case"top":break;case"ideographic":case"bottom":a-=v;break;case"alphabetic":a-=.8*v;break;case"middle":a-=.5*v}switch(x&&(o=(g=p.getRect())[2]-g[0]-o,c=this.rtlAlignments[c]),c){case"start":if(m)for(;C<b;C++)f=y[C].width,s.push(-(E-f));break;case"end":if(o-=E,m)break;for(;C<b;C++)f=y[C].width,s.push(E-f);break;case"center":for(o-=.5*E;C<b;C++)f=y[C].width,s.push((m?-1:1)*(E-f)*.5)}r.textAlignOffsets=s,e.x=o,e.y=a,e.width=E,e.height=v},setText:function(e){this.setAttributes({text:e},!0)},render:function(e,t,i){var n,r,o,a,s,l=this.attr,d=Ext.draw.Matrix.fly(l.matrix.elements.slice(0)),u=this.getBBox(!0),c=l.textAlignOffsets,h=Ext.util.Color.RGBA_NONE;if(0!==l.text.length){for(a=l.text.split(this.lineBreakRe),s=u.height/a.length,n=l.bbox.plain.x,r=l.bbox.plain.y+.78*s,d.toContext(t),e.getInherited().rtl&&(n+=l.bbox.plain.width),o=0;o<a.length;o++)t.fillStyle!==h&&t.fillText(a[o],n+(c[o]||0),r+s*o),t.strokeStyle!==h&&t.strokeText(a[o],n+(c[o]||0),r+s*o);var f=l.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;f&&(this.attr.inverseMatrix.toContext(t),f.bbox&&this.renderBBox(e,t))}}}}),Ext.define("Ext.draw.sprite.Tick",{extend:"Ext.draw.sprite.Line",alias:"sprite.tick",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"tick",y:"tick",size:"tick"},updaters:{tick:function(e){var t=1.5*e.size,i=e.lineWidth/2,n=e.x,r=e.y;this.setAttributes({fromX:n-i,fromY:r-t,toX:n-i,toY:r+t})}}}}}),Ext.define("Ext.draw.sprite.Triangle",{extend:"Ext.draw.sprite.Path",alias:"sprite.triangle",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(e,t){var i=2.2*t.size,n=t.x,r=t.y;e.fromSvgString("M".concat(n,",",r,"m0-",.48*i,"l",.5*i,",",.87*i,"-",i,",0z"))}}),Ext.define("Ext.draw.gradient.Linear",{extend:"Ext.draw.gradient.Gradient",requires:["Ext.draw.Color"],type:"linear",config:{degrees:0,radians:0},applyRadians:function(e,t){return Ext.isNumber(e)?e:t},applyDegrees:function(e,t){return Ext.isNumber(e)?e:t},updateRadians:function(e){this.setDegrees(Ext.draw.Draw.degrees(e))},updateDegrees:function(e){this.setRadians(Ext.draw.Draw.rad(e))},generateGradient:function(e,t){var i,n,r,o=this.getRadians(),a=Math.cos(o),s=Math.sin(o),l=t.width,d=t.height,u=t.x+.5*l,c=t.y+.5*d,h=this.getStops(),f=h.length;if(Ext.isNumber(u)&&Ext.isNumber(c)&&0<d&&0<l){for(n=Math.sqrt(d*d+l*l)*Math.abs(Math.cos(o-Math.atan(d/l)))/2,i=e.createLinearGradient(u+a*n,c+s*n,u-a*n,c-s*n),r=0;r<f;r++)i.addColorStop(h[r].offset,h[r].color);return i}return Ext.util.Color.NONE}}),Ext.define("Ext.draw.gradient.Radial",{extend:"Ext.draw.gradient.Gradient",type:"radial",config:{start:{x:0,y:0,r:0},end:{x:0,y:0,r:1}},applyStart:function(e,t){var i;return t?(i={x:t.x,y:t.y,r:t.r},"x"in e?i.x=e.x:"centerX"in e&&(i.x=e.centerX),"y"in e?i.y=e.y:"centerY"in e&&(i.y=e.centerY),"r"in e?i.r=e.r:"radius"in e&&(i.r=e.radius),i):e},applyEnd:function(e,t){var i;return t?(i={x:t.x,y:t.y,r:t.r},"x"in e?i.x=e.x:"centerX"in e&&(i.x=e.centerX),"y"in e?i.y=e.y:"centerY"in e&&(i.y=e.centerY),"r"in e?i.r=e.r:"radius"in e&&(i.r=e.radius),i):e},generateGradient:function(e,t){var i,n=this.getStart(),r=this.getEnd(),o=.5*t.width,a=.5*t.height,s=t.x+o,l=t.y+a,d=e.createRadialGradient(s+n.x*o,l+n.y*a,n.r*Math.max(o,a),s+r.x*o,l+r.y*a,r.r*Math.max(o,a)),u=this.getStops(),c=u.length;for(i=0;i<c;i++)d.addColorStop(u[i].offset,u[i].color);return d}}),Ext.define("Ext.draw.Surface",{extend:"Ext.draw.SurfaceBase",xtype:"surface",requires:["Ext.draw.sprite.*","Ext.draw.gradient.*","Ext.draw.sprite.AttributeDefinition","Ext.draw.Matrix","Ext.draw.Draw"],uses:["Ext.draw.engine.Canvas"],devicePixelRatio:window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,deprecated:{"5.1.0":{statics:{methods:{stableSort:function(e){return Ext.Array.sort(e,function(e,t){return e.attr.zIndex-t.attr.zIndex})}}}}},cls:Ext.baseCSSPrefix+"surface",config:{rect:null,background:null,items:[],dirty:!1,flipRtlText:!1},isSurface:!0,isPendingRenderFrame:!1,dirtyPredecessorCount:0,emptyRect:[0,0,0,0],constructor:function(e){this.predecessors=[],this.successors=[],this.map={},this.callParent([e]),this.matrix=new Ext.draw.Matrix,this.inverseMatrix=this.matrix.inverse()},roundPixel:function(e){return Math.round(this.devicePixelRatio*e)/this.devicePixelRatio},waitFor:function(e){var t=this.predecessors;Ext.Array.contains(t,e)||(t.push(e),e.successors.push(this),e.getDirty()&&this.dirtyPredecessorCount++)},updateDirty:function(e){for(var t,i=this.successors,n=i.length,r=0;r<n;r++)t=i[r],e?(t.dirtyPredecessorCount++,t.setDirty(!0)):(t.dirtyPredecessorCount--,0===t.dirtyPredecessorCount&&t.isPendingRenderFrame&&t.renderFrame())},applyBackground:function(e,t){return this.setDirty(!0),Ext.isString(e)&&(e={fillStyle:e}),Ext.factory(e,Ext.draw.sprite.Rect,t)},applyRect:function(e,t){return t&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]?t:Ext.isArray(e)?[e[0],e[1],e[2],e[3]]:Ext.isObject(e)?[e.x||e.left,e.y||e.top,e.width||e.right-e.left,e.height||e.bottom-e.top]:void 0},updateRect:function(e){var t=e[0],i=e[1],n=t+e[2],r=i+e[3],o=this.getBackground(),a=this.element;a.setLocalXY(Math.floor(t),Math.floor(i)),a.setSize(Math.ceil(n-Math.floor(t)),Math.ceil(r-Math.floor(i))),o&&o.setAttributes({x:0,y:0,width:Math.ceil(n-Math.floor(t)),height:Math.ceil(r-Math.floor(i))}),this.setDirty(!0)},resetTransform:function(){this.matrix.set(1,0,0,1,0,0),this.inverseMatrix.set(1,0,0,1,0,0),this.setDirty(!0)},get:function(e){return this.map[e]||this.getItems()[e]},add:function(){var e,t,i,n,r,o,a=Array.prototype.slice.call(arguments),s=Ext.isArray(a[0]),l=this.map,d=[];if(!(e=Ext.Array.clean(s?a[0]:a)).length)return d;for(r=0,o=e.length;r<o;r++)(t=e[r])&&!t.destroyed&&(i=null,t.isSprite&&!l[t.getId()]?i=t:l[t.id]||(i=this.createItem(t)),i&&(l[i.getId()]=i,d.push(i),(n=i.getSurface())&&n.isSurface&&n.remove(i),i.setParent(this),i.setSurface(this),this.onAdd(i)));return(e=this.getItems())&&e.push.apply(e,d),this.dirtyZIndex=!0,this.setDirty(!0),s||1!==d.length?d:d[0]},onAdd:Ext.emptyFn,remove:function(e,t){var i,n,r=this.clearing;if(e){if(e.charAt&&(e=this.map[e]),!e||!e.isSprite)return null;if(i=e.id,n=this.map[i],delete this.map[i],e.destroyed||e.destroying)return n&&!r&&Ext.Array.remove(this.getItems(),e),e;if(!n)return t&&e.destroy(),e;e.setParent(null),e.setSurface(null),t&&e.destroy(),r||(Ext.Array.remove(this.getItems(),e),this.dirtyZIndex=!0,this.setDirty(!0))}return e||null},removeAll:function(e){var t,i,n=this.getItems();for(this.clearing=!!e,i=n.length-1;0<=i;i--)t=n[i],e?t.destroy():(t.setParent(null),t.setSurface(null));this.clearing=!1,n.length=0,this.map={},this.dirtyZIndex=!0,this.destroying||this.setDirty(!0)},applyItems:function(e){return this.getItems()&&this.removeAll(!0),Ext.Array.from(this.add(e))},createItem:function(e){return Ext.create(e.xclass||"sprite."+e.type,e)},getBBox:function(e,t){var i,n,r,o=1/0,a=-1/0,s=1/0,l=-1/0;for(n=0,r=(e=Ext.Array.from(e)).length;n<r;n++)o>(i=e[n].getBBox(t)).x&&(o=i.x),a<i.x+i.width&&(a=i.x+i.width),s>i.y&&(s=i.y),l<i.y+i.height&&(l=i.y+i.height);return{x:o,y:s,width:a-o,height:l-s}},getEventXY:function(e){var t,i=this.getInherited().rtl,n=e.getXY(),r=this.getOwnerBody(),o=r.getXY(),a=this.getRect()||this.emptyRect,s=[];return i?(t=r.getWidth(),s[0]=o[0]-n[0]-a[0]+t):s[0]=n[0]-o[0]-a[0],s[1]=n[1]-o[1]-a[1],s},clear:Ext.emptyFn,orderByZIndex:function(){var e,t,i=this.getItems(),n=!1;if(this.getDirty()){for(e=0,t=i.length;e<t;e++)if(i[e].attr.dirtyZIndex){n=!0;break}for(n&&(Ext.Array.sort(i,function(e,t){return e.attr.zIndex-t.attr.zIndex}),this.setDirty(!0)),e=0,t=i.length;e<t;e++)i[e].attr.dirtyZIndex=!1}},repaint:function(){var e=this;e.repaint=Ext.emptyFn,Ext.defer(function(){delete e.repaint,e.element.repaint()},1)},renderFrame:function(){var e,t,i,n,r,o=this;if(o.element&&o.getDirty()&&o.getRect())if(0<o.dirtyPredecessorCount)o.isPendingRenderFrame=!0;else if(e=o.getBackground(),t=o.getItems(),o.orderByZIndex(),o.getDirty()){for(o.clear(),o.clearTransform(),e&&o.renderSprite(e),n=0,r=t.length;n<r;n++){if(i=t[n],!1===o.renderSprite(i))return;i.attr.textPositionCount=o.textPosition}o.setDirty(!1)}},renderSprite:Ext.emptyFn,clearTransform:Ext.emptyFn,destroy:function(){this.destroying=!0,this.removeAll(!0),this.destroying=!1,this.predecessors=this.successors=null,this.hasListeners.destroy&&this.fireEvent("destroy",this),this.callParent()}}),Ext.define("Ext.draw.overrides.hittest.Surface",{override:"Ext.draw.Surface",hitTest:function(e,t){var i,n,r,o=this.getItems();for(t=t||Ext.draw.sprite.Sprite.defaultHitTestOptions,i=o.length-1;0<=i;i--)if((n=o[i]).hitTest&&(r=n.hitTest(e,t)))return r;return null},hitTestEvent:function(e,t){var i=this.getEventXY(e);return this.hitTest(i,t)}}),Ext.define("Ext.draw.engine.SvgContext",{requires:["Ext.draw.Color"],toSave:["strokeOpacity","strokeStyle","fillOpacity","fillStyle","globalAlpha","lineWidth","lineCap","lineJoin","lineDash","lineDashOffset","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","globalCompositeOperation","position","fillGradient","strokeGradient"],strokeOpacity:1,strokeStyle:"none",fillOpacity:1,fillStyle:"none",lineDas:[],lineDashOffset:0,globalAlpha:1,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"none",globalCompositeOperation:"src",urlStringRe:/^url\(#([\w-]+)\)$/,constructor:function(e){this.surface=e,this.state=[],this.matrix=new Ext.draw.Matrix,this.path=null,this.clear()},clear:function(){this.group=this.surface.mainGroup,this.position=0,this.path=null},getElement:function(e){return this.surface.getSvgElement(this.group,e,this.position++)},save:function(){var e,t,i=this.toSave,n={},r=this.getElement("g");for(t=0;t<i.length;t++)(e=i[t])in this&&(n[e]=this[e]);return this.position=0,n.matrix=this.matrix.clone(),this.state.push(n),this.group=r},restore:function(){for(var e,t,i=this.toSave,n=this.state.pop(),r=this.group,o=r.dom.childNodes;o.length>this.position;)r.last().destroy();for(t=0;t<i.length;t++)(e=i[t])in n?this[e]=n[e]:delete this[e];this.setTransform.apply(this,n.matrix.elements),this.group=r.getParent()},transform:function(e,t,i,n,r,o){var a;this.path&&(a=Ext.draw.Matrix.fly([e,t,i,n,r,o]).inverse(),this.path.transform(a)),this.matrix.append(e,t,i,n,r,o)},setTransform:function(e,t,i,n,r,o){this.path&&this.path.transform(this.matrix),this.matrix.reset(),this.transform(e,t,i,n,r,o)},scale:function(e,t){this.transform(e,0,0,t,0,0)},rotate:function(e){var t=Math.cos(e),i=Math.sin(e),n=-Math.sin(e),r=Math.cos(e);this.transform(t,i,n,r,0,0)},translate:function(e,t){this.transform(1,0,0,1,e,t)},setGradientBBox:function(e){this.bbox=e},beginPath:function(){this.path=new Ext.draw.Path},moveTo:function(e,t){this.path||this.beginPath(),this.path.moveTo(e,t),this.path.element=null},lineTo:function(e,t){this.path||this.beginPath(),this.path.lineTo(e,t),this.path.element=null},rect:function(e,t,i,n){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath()},strokeRect:function(e,t,i,n){this.beginPath(),this.rect(e,t,i,n),this.stroke()},fillRect:function(e,t,i,n){this.beginPath(),this.rect(e,t,i,n),this.fill()},closePath:function(){this.path||this.beginPath(),this.path.closePath(),this.path.element=null},arcSvg:function(e,t,i,n,r,o,a){this.path||this.beginPath(),this.path.arcSvg(e,t,i,n,r,o,a),this.path.element=null},arc:function(e,t,i,n,r,o){this.path||this.beginPath(),this.path.arc(e,t,i,n,r,o),this.path.element=null},ellipse:function(e,t,i,n,r,o,a,s){this.path||this.beginPath(),this.path.ellipse(e,t,i,n,r,o,a,s),this.path.element=null},arcTo:function(e,t,i,n,r,o,a){this.path||this.beginPath(),this.path.arcTo(e,t,i,n,r,o,a),this.path.element=null},bezierCurveTo:function(e,t,i,n,r,o){this.path||this.beginPath(),this.path.bezierCurveTo(e,t,i,n,r,o),this.path.element=null},strokeText:function(e,t,i){var n,r;e=String(e),this.strokeStyle&&(n=this.getElement("text"),r=this.surface.getSvgElement(n,"tspan",0),this.surface.setElementAttributes(n,{x:t,y:i,transform:this.matrix.toSvg(),stroke:this.strokeStyle,fill:"none",opacity:this.globalAlpha,"stroke-opacity":this.strokeOpacity,style:"font: "+this.font,"stroke-dasharray":this.lineDash.join(","),"stroke-dashoffset":this.lineDashOffset}),this.lineDash.length&&this.surface.setElementAttributes(n,{"stroke-dasharray":this.lineDash.join(","),"stroke-dashoffset":this.lineDashOffset}),r.dom.firstChild&&r.dom.removeChild(r.dom.firstChild),this.surface.setElementAttributes(r,{"alignment-baseline":"alphabetic"}),r.dom.appendChild(document.createTextNode(Ext.String.htmlDecode(e))))},fillText:function(e,t,i){var n,r;e=String(e),this.fillStyle&&(n=this.getElement("text"),r=this.surface.getSvgElement(n,"tspan",0),this.surface.setElementAttributes(n,{x:t,y:i,transform:this.matrix.toSvg(),fill:this.fillStyle,opacity:this.globalAlpha,"fill-opacity":this.fillOpacity,style:"font: "+this.font}),r.dom.firstChild&&r.dom.removeChild(r.dom.firstChild),this.surface.setElementAttributes(r,{"alignment-baseline":"alphabetic"}),r.dom.appendChild(document.createTextNode(Ext.String.htmlDecode(e))))},drawImage:function(e,t,i,n,r,o,a,s,l){var d=this.getElement("image"),u=t,c=i,h=void 0===n?e.width:n,f=void 0===r?e.height:r,g=null;void 0!==l&&(g=t+" "+i+" "+n+" "+r,u=o,c=a,h=s,f=l),d.dom.setAttributeNS("http://www.w3.org/1999/xlink","href",e.src),this.surface.setElementAttributes(d,{viewBox:g,x:u,y:c,width:h,height:f,opacity:this.globalAlpha,transform:this.matrix.toSvg()})},fill:function(){var e,t,i,n,r,o=this;o.path&&o.fillStyle&&(t=o.fillGradient,i=o.path.element,n=o.bbox,i||(e=o.path.toString(),i=o.path.element=o.getElement("path"),o.surface.setElementAttributes(i,{d:e,transform:o.matrix.toSvg()})),r=t&&n?t.generateGradient(o,n):o.fillStyle,o.surface.setElementAttributes(i,{fill:r,"fill-opacity":o.fillOpacity*o.globalAlpha}))},stroke:function(){var e,t,i,n,r,o=this;if(o.path&&o.strokeStyle){if(t=o.strokeGradient,i=o.path.element,n=o.bbox,!i||!o.path.svgString){if(!(e=o.path.toString()))return;i=o.path.element=o.getElement("path"),o.surface.setElementAttributes(i,{fill:"none",d:e,transform:o.matrix.toSvg()})}r=t&&n?t.generateGradient(o,n):o.strokeStyle,o.surface.setElementAttributes(i,{stroke:r,"stroke-linecap":o.lineCap,"stroke-linejoin":o.lineJoin,"stroke-width":o.lineWidth,"stroke-opacity":o.strokeOpacity*o.globalAlpha,"stroke-dasharray":o.lineDash.join(","),"stroke-dashoffset":o.lineDashOffset}),o.lineDash.length&&o.surface.setElementAttributes(i,{"stroke-dasharray":o.lineDash.join(","),"stroke-dashoffset":o.lineDashOffset})}},fillStroke:function(e,t){var i=this.fillStyle,n=this.strokeStyle,r=this.fillOpacity,o=this.strokeOpacity;void 0===t&&(t=e.transformFillStroke),t||e.inverseMatrix.toContext(this),i&&0!==r&&this.fill(),n&&0!==o&&this.stroke()},appendPath:function(e){this.path=e.clone()},setLineDash:function(e){this.lineDash=e},getLineDash:function(){return this.lineDash},createLinearGradient:function(e,t,i,n){var r=this.surface.getNextDef("linearGradient");return this.surface.setElementAttributes(r,{x1:e,y1:t,x2:i,y2:n,gradientUnits:"userSpaceOnUse"}),new Ext.draw.engine.SvgContext.Gradient(this,this.surface,r)},createRadialGradient:function(e,t,i,n,r,o){var a=this.surface.getNextDef("radialGradient");return this.surface.setElementAttributes(a,{fx:e,fy:t,cx:n,cy:r,r:o,gradientUnits:"userSpaceOnUse"}),new Ext.draw.engine.SvgContext.Gradient(this,this.surface,a,i/o)}}),Ext.define("Ext.draw.engine.SvgContext.Gradient",{isGradient:!0,constructor:function(e,t,i,n){this.ctx=e,this.surface=t,this.element=i,this.position=0,this.compression=n||0},addColorStop:function(e,t){var i=this.surface.getSvgElement(this.element,"stop",this.position++),n=this.compression;this.surface.setElementAttributes(i,{offset:(100*((1-n)*e+n)).toFixed(2)+"%","stop-color":t,"stop-opacity":Ext.util.Color.fly(t).a.toFixed(15)})},toString:function(){for(var e=this.element.dom.childNodes;e.length>this.position;)Ext.fly(e[e.length-1]).destroy();return"url(#"+this.element.getId()+")"}}),Ext.define("Ext.draw.engine.Svg",{extend:"Ext.draw.Surface",requires:["Ext.draw.engine.SvgContext"],isSVG:!0,config:{highPrecision:!1},getElementConfig:function(){return{reference:"element",style:{position:"absolute"},children:[{reference:"bodyElement",style:{width:"100%",height:"100%",position:"relative"},children:[{tag:"svg",reference:"svgElement",namespace:"http://www.w3.org/2000/svg",width:"100%",height:"100%",version:1.1}]}]}},constructor:function(e){var t=this;t.callParent([e]),t.mainGroup=t.createSvgNode("g"),t.defsElement=t.createSvgNode("defs"),t.svgElement.appendChild(t.mainGroup),t.svgElement.appendChild(t.defsElement),t.ctx=new Ext.draw.engine.SvgContext(t)},createSvgNode:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg",e);return Ext.get(t)},getSvgElement:function(e,t,i){var n,r=e.dom.childNodes,o=r.length;if(i<o){if((n=r[i]).tagName===t)return Ext.get(n);Ext.destroy(n)}else o<i&&Ext.raise("Invalid position.");return n=Ext.get(this.createSvgNode(t)),0===i?e.insertFirst(n):n.insertAfter(Ext.fly(r[i-1])),n.cache={},n},setElementAttributes:function(e,t){var i,n,r=e.dom,o=e.cache;for(i in t)n=t[i],o[i]!==n&&(o[i]=n,r.setAttribute(i,n))},getNextDef:function(e){return this.getSvgElement(this.defsElement,e,this.defsPosition++)},clearTransform:function(){this.mainGroup.set({transform:this.matrix.toSvg()})},clear:function(){this.ctx.clear(),this.removeSurplusDefs(),this.defsPosition=0},removeSurplusDefs:function(){var e,t=this.defsElement,i=t.dom.childNodes;for(e=i.length-1;e>this.defsPosition;e--)t.removeChild(i[e])},renderSprite:function(e){var t=this.getRect(),i=this.ctx;return e.attr.hidden||0===e.attr.globalAlpha?(i.save(),void i.restore()):(e.element=i.save(),e.preRender(this),e.useAttributes(i,t),!1!==e.render(this,i,[0,0,t[2],t[3]])&&(e.setDirty(!1),void i.restore()))},toSVG:function(e,t){var i,n,r,o,a=Ext.getClassName(this);for(i='<svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" width="'+e.width+'" height="'+e.height+'">',o=0;o<t.length;o++)n=t[o],Ext.getClassName(n)===a&&(i+='<g transform="translate('+(r=n.getRect())[0]+","+r[1]+')">',i+=this.serializeNode(n.svgElement.dom),i+="</g>");return i+="</svg>"},b64EncodeUnicode:function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},flatten:function(e,t){var i='<?xml version="1.0" standalone="yes"?>';return i+=this.toSVG(e,t),{data:"data:image/svg+xml;base64,"+this.b64EncodeUnicode(i),type:"svg"}},serializeNode:function(e){var t,i,n,r,o="";if(e.nodeType===document.TEXT_NODE)return e.nodeValue;if(o+="<"+e.nodeName,e.attributes.length)for(t=0,i=e.attributes.length;t<i;t++)o+=" "+(n=e.attributes[t]).name+'="'+Ext.String.htmlEncode(n.value)+'"';if(o+=">",e.childNodes&&e.childNodes.length)for(t=0,i=e.childNodes.length;t<i;t++)r=e.childNodes[t],o+=this.serializeNode(r);return o+="</"+e.nodeName+">"},destroy:function(){this.ctx.destroy(),this.mainGroup.destroy(),this.defsElement.destroy(),delete this.mainGroup,delete this.defsElement,delete this.ctx,this.callParent()},remove:function(e,t){e&&e.element&&(e.element.destroy(),e.element=null),this.callParent(arguments)}}),Ext.draw||(Ext.draw={}),Ext.draw.engine||(Ext.draw.engine={}),Ext.draw.engine.excanvas=!0,document.createElement("canvas").getContext||function(){var B=Math,y=B.round,g=B.sin,p=B.cos,o=B.abs,a=B.sqrt,N=10,m=N/2;navigator.userAgent.match(/MSIE ([\d.]+)?/)[1];function i(){return this.context_||(this.context_=new F(this))}var r=Array.prototype.slice;function v(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function n(e,t,i){Ext.onReady(function(){e.namespaces[t]||e.namespaces.add(t,i,"#default#VML")})}function s(e){if(n(e,"g_vml_","urn:schemas-microsoft-com:vml"),n(e,"g_o_","urn:schemas-microsoft-com:office:office"),!e.styleSheets.ex_canvas_){var t=e.createStyleSheet();t.owningElement.id="ex_canvas_",t.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}s(document);var e={init:function(e){var t=e||document;t.createElement("canvas"),t.attachEvent("onreadystatechange",function(e,t,i){var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}(this.init_,this,t))},init_:function(e){for(var t=e.getElementsByTagName("canvas"),i=0;i<t.length;i++)this.initElement(t[i])},initElement:function(e){if(!e.getContext){e.getContext=i,s(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",l),e.attachEvent("onresize",d);var t=e.attributes;t.width&&t.width.specified?e.style.width=t.width.nodeValue+"px":e.width=e.clientWidth,t.height&&t.height.specified?e.style.height=t.height.nodeValue+"px":e.height=e.clientHeight}return e}};function l(e){var t=e.srcElement;switch(e.propertyName){case"width":t.getContext().clearRect(),t.style.width=t.attributes.width.nodeValue+"px",t.firstChild.style.width=t.clientWidth+"px";break;case"height":t.getContext().clearRect(),t.style.height=t.attributes.height.nodeValue+"px",t.firstChild.style.height=t.clientHeight+"px"}}function d(e){var t=e.srcElement;t.firstChild&&(t.firstChild.style.width=t.clientWidth+"px",t.firstChild.style.height=t.clientHeight+"px")}e.init();for(var u=[],t=0;t<16;t++)for(var c=0;c<16;c++)u[16*t+c]=t.toString(16)+c.toString(16);function h(){return[[1,0,0],[0,1,0],[0,0,1]]}function f(e,t){for(var i=h(),n=0;n<3;n++)for(var r=0;r<3;r++){for(var o=0,a=0;a<3;a++)o+=e[n][a]*t[a][r];i[n][r]=o}return i}function x(e,t){t.fillStyle=e.fillStyle,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.lineDash=e.lineDash,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.strokeStyle=e.strokeStyle,t.globalAlpha=e.globalAlpha,t.font=e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline,t.arcScaleX_=e.arcScaleX_,t.arcScaleY_=e.arcScaleY_,t.lineScale_=e.lineScale_}var E={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"};function b(e){var t=e.indexOf("(",3),i=e.indexOf(")",t+1),n=e.substring(t+1,i).split(",");return 4==n.length&&"a"==e.charAt(3)||(n[3]=1),n}function C(e){return parseFloat(e)/100}function S(e,t,i){return Math.min(i,Math.max(t,e))}function w(e,t,i){return i<0&&i++,1<i&&i--,6*i<1?e+6*(t-e)*i:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}var T={};function H(e){if(e in T)return T[e];var t=1;if("#"==(e=String(e)).charAt(0))r=e;else if(/^rgb/.test(e)){for(var i,n=b(e),r="#",o=0;o<3;o++)i=-1!=n[o].indexOf("%")?Math.floor(255*C(n[o])):+n[o],r+=u[S(i,0,255)];t=+n[3]}else if(/^hsl/.test(e)){r=function(e){var t,i,n,r,o,a;if((r=parseFloat(e[0])/360%360)<0&&r++,o=S(C(e[1]),0,1),a=S(C(e[2]),0,1),0==o)t=i=n=a;else{var s=a<.5?a*(1+o):a+o-a*o,l=2*a-s;t=w(l,s,r+1/3),i=w(l,s,r),n=w(l,s,r-1/3)}return"#"+u[Math.floor(255*t)]+u[Math.floor(255*i)]+u[Math.floor(255*n)]}(n=b(e)),t=n[3]}else r=E[e]||e;return T[e]={color:r,alpha:t}}var P="normal",k="normal",I="normal",R=10,M="sans-serif",A={};var D={butt:"flat",round:"round"};function F(e){this.m_=h(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineDash=[],this.lineCap="butt",this.miterLimit=+N,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic";var t="width:"+(this.canvas=e).clientWidth+"px;height:"+e.clientHeight+"px;overflow:hidden;position:absolute",i=e.ownerDocument.createElement("div");i.style.cssText=t,e.appendChild(i);var n=i.cloneNode(!1);n.style.backgroundColor="red",n.style.filter="alpha(opacity=0)",e.appendChild(n),this.element_=i,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}var L=F.prototype;function O(e,t,i,n){e.currentPath_.push({type:"bezierCurveTo",cp1x:t.x,cp1y:t.y,cp2x:i.x,cp2y:i.y,x:n.x,y:n.y}),e.currentX_=n.x,e.currentY_=n.y}function V(e,t){var i,n=H(e.strokeStyle),r=n.color,o=n.alpha*e.globalAlpha,a=e.lineScale_*e.lineWidth;a<1&&(o*=a),t.push("<g_vml_:stroke",' opacity="',o,'"',' joinstyle="',e.lineJoin,'"',' dashstyle="',e.lineDash.join(" "),'"',' miterlimit="',e.miterLimit,'"',' endcap="',(i=e.lineCap,D[i]||"square"),'"',' weight="',a,'px"',' color="',r,'" />')}function _(e,t,i,n){var r=e.fillStyle,o=e.arcScaleX_,a=e.arcScaleY_,s=n.x-i.x,l=n.y-i.y;if(r instanceof G){var d=0,u={x:0,y:0},c=0,h=1;if("gradient"==r.type_){var f=r.x0_/o,g=r.y0_/a,p=r.x1_/o,m=r.y1_/a,x=z(e,f,g),y=z(e,p,m),v=y.x-x.x,E=y.y-x.y;(d=180*Math.atan2(v,E)/Math.PI)<0&&(d+=360),d<1e-6&&(d=0)}else{u={x:((x=z(e,r.x0_,r.y0_)).x-i.x)/s,y:(x.y-i.y)/l},s/=o*N,l/=a*N;var b=B.max(s,l);c=2*r.r0_/b,h=2*r.r1_/b-c}var C=r.colors_;C.sort(function(e,t){return e.offset-t.offset});for(var S=C.length,w=C[0].color,T=C[S-1].color,P=C[0].alpha*e.globalAlpha,k=C[S-1].alpha*e.globalAlpha,I=[],R=0;R<S;R++){var M=C[R];I.push(M.offset*h+c+" "+M.color)}t.push('<g_vml_:fill type="',r.type_,'"',' method="none" focus="100%"',' color="',w,'"',' color2="',T,'"',' colors="',I.join(","),'"',' opacity="',k,'"',' g_o_:opacity2="',P,'"',' angle="',d,'"',' focusposition="',u.x,",",u.y,'" />')}else if(r instanceof X){if(s&&l){var A=-i.x,D=-i.y;t.push("<g_vml_:fill",' position="',A/s*o*o,",",D/l*a*a,'"',' type="tile"',' src="',r.src_,'" />')}}else{var F=H(e.fillStyle),L=F.color,O=F.alpha*e.globalAlpha;t.push('<g_vml_:fill color="',L,'" opacity="',O,'" />')}}function z(e,t,i){var n=e.m_;return{x:N*(t*n[0][0]+i*n[1][0]+n[2][0])-m,y:N*(t*n[0][1]+i*n[1][1]+n[2][1])-m}}function W(e,t,i){var n;if((n=t,isFinite(n[0][0])&&isFinite(n[0][1])&&isFinite(n[1][0])&&isFinite(n[1][1])&&isFinite(n[2][0])&&isFinite(n[2][1]))&&(e.m_=t,i)){var r=t[0][0]*t[1][1]-t[0][1]*t[1][0];e.lineScale_=a(o(r))}}function G(e){this.type_=e,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function X(e,t){switch(!function(e){e&&1==e.nodeType&&"IMG"==e.tagName||U("TYPE_MISMATCH_ERR");"complete"!=e.readyState&&U("INVALID_STATE_ERR")}(e),t){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=t;break;default:U("SYNTAX_ERR")}this.src_=e.src,this.width_=e.width,this.height_=e.height}function U(e){throw new Y(e)}function Y(e){this.code=this[e],this.message=e+": DOM Exception "+this.code}L.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},L.beginPath=function(){this.currentPath_=[]},L.moveTo=function(e,t){var i=z(this,e,t);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},L.lineTo=function(e,t){var i=z(this,e,t);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},L.bezierCurveTo=function(e,t,i,n,r,o){var a=z(this,r,o);O(this,z(this,e,t),z(this,i,n),a)},L.quadraticCurveTo=function(e,t,i,n){var r=z(this,e,t),o=z(this,i,n),a={x:this.currentX_+2/3*(r.x-this.currentX_),y:this.currentY_+2/3*(r.y-this.currentY_)};O(this,a,{x:a.x+(o.x-this.currentX_)/3,y:a.y+(o.y-this.currentY_)/3},o)},L.arc=function(e,t,i,n,r,o){i*=N;var a=o?"at":"wa",s=e+p(n)*i-m,l=t+g(n)*i-m,d=e+p(r)*i-m,u=t+g(r)*i-m;s!=d||o||(s+=.125);var c=z(this,e,t),h=z(this,s,l),f=z(this,d,u);this.currentPath_.push({type:a,x:c.x,y:c.y,radius:i,xStart:h.x,yStart:h.y,xEnd:f.x,yEnd:f.y})},L.rect=function(e,t,i,n){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath()},L.strokeRect=function(e,t,i,n){var r=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath(),this.stroke(),this.currentPath_=r},L.fillRect=function(e,t,i,n){var r=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath(),this.fill(),this.currentPath_=r},L.createLinearGradient=function(e,t,i,n){var r=new G("gradient");return r.x0_=e,r.y0_=t,r.x1_=i,r.y1_=n,r},L.createRadialGradient=function(e,t,i,n,r,o){var a=new G("gradientradial");return a.x0_=e,a.y0_=t,a.r0_=i,a.x1_=n,a.y1_=r,a.r1_=o,a},L.drawImage=function(e,t){var i,n,r,o,a,s,l,d,u=e.runtimeStyle.width,c=e.runtimeStyle.height;e.runtimeStyle.width="auto",e.runtimeStyle.height="auto";var h=e.width,f=e.height;if(e.runtimeStyle.width=u,e.runtimeStyle.height=c,3==arguments.length)i=t,n=arguments[2],a=s=0,l=r=h,d=o=f;else if(5==arguments.length)i=t,n=arguments[2],r=arguments[3],o=arguments[4],a=s=0,l=h,d=f;else{if(9!=arguments.length)throw Error("Invalid number of arguments");a=t,s=arguments[2],l=arguments[3],d=arguments[4],i=arguments[5],n=arguments[6],r=arguments[7],o=arguments[8]}var g=z(this,i,n),p=[],m=this.m_;p.push(" <g_vml_:group",' coordsize="',10*N,",",10*N,'"',' coordorigin="0,0"',' style="width:',y(10*m[0][0]),"px;height:",y(10*m[1][1]),"px;position:absolute;","top:",y(g.y/N),"px;left:",y(g.x/N),"px; rotation:",y(180*Math.atan(m[0][1]/m[1][1])/Math.PI),";"),p.push('" >','<g_vml_:image src="',e.src,'"',' style="width:',N*r,"px;"," height:",N*o,'px"',' cropleft="',a/h,'"',' croptop="',s/f,'"',' cropright="',(h-a-l)/h,'"',' cropbottom="',(f-s-d)/f,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",p.join(""))},L.setLineDash=function(e){1===e.length&&((e=e.slice())[1]=e[0]),this.lineDash=e},L.getLineDash=function(){return this.lineDash},L.stroke=function(e){var t=[];t.push("<g_vml_:shape",' filled="',!!e,'"',' style="position:absolute;width:',10,"px;height:",10,'px;left:0px;top:0px;"',' coordorigin="0,0"',' coordsize="',10*N,",",10*N,'"',' stroked="',!e,'"',' path="');for(var i={x:null,y:null},n={x:null,y:null},r=0;r<this.currentPath_.length;r++){var o=this.currentPath_[r];switch(o.type){case"moveTo":t.push(" m ",y(o.x),",",y(o.y));break;case"lineTo":t.push(" l ",y(o.x),",",y(o.y));break;case"close":t.push(" x "),o=null;break;case"bezierCurveTo":t.push(" c ",y(o.cp1x),",",y(o.cp1y),",",y(o.cp2x),",",y(o.cp2y),",",y(o.x),",",y(o.y));break;case"at":case"wa":t.push(" ",o.type," ",y(o.x-this.arcScaleX_*o.radius),",",y(o.y-this.arcScaleY_*o.radius)," ",y(o.x+this.arcScaleX_*o.radius),",",y(o.y+this.arcScaleY_*o.radius)," ",y(o.xStart),",",y(o.yStart)," ",y(o.xEnd),",",y(o.yEnd))}o&&((null==i.x||o.x<i.x)&&(i.x=o.x),(null==n.x||o.x>n.x)&&(n.x=o.x),(null==i.y||o.y<i.y)&&(i.y=o.y),(null==n.y||o.y>n.y)&&(n.y=o.y))}t.push(' ">'),e?_(this,t,i,n):V(this,t),t.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",t.join(""))},L.fill=function(){this.$stroke(!0)},L.closePath=function(){this.currentPath_.push({type:"close"})},L.save=function(){var e={};x(this,e),this.aStack_.push(e),this.mStack_.push(this.m_)},L.restore=function(){this.aStack_.length&&(x(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},L.translate=function(e,t){W(this,f([[1,0,0],[0,1,0],[e,t,1]],this.m_),!1)},L.rotate=function(e){var t=p(e),i=g(e);W(this,f([[t,i,0],[-i,t,0],[0,0,1]],this.m_),!1)},L.scale=function(e,t){this.arcScaleX_*=e,this.arcScaleY_*=t,W(this,f([[e,0,0],[0,t,0],[0,0,1]],this.m_),!0)},L.transform=function(e,t,i,n,r,o){W(this,f([[e,t,0],[i,n,0],[r,o,1]],this.m_),!0)},L.setTransform=function(e,t,i,n,r,o){W(this,[[e,t,0],[i,n,0],[r,o,1]],!0)},L.drawText_=function(e,t,i,n,r){var o,a=this.m_,s=0,l=1e3,d={x:0,y:0},u=[],c=function(e,t){var i={};for(var n in e)i[n]=e[n];var r=parseFloat(t.currentStyle.fontSize),o=parseFloat(e.size);return"number"==typeof e.size?i.size=e.size:-1!=e.size.indexOf("px")?i.size=o:-1!=e.size.indexOf("em")?i.size=r*o:-1!=e.size.indexOf("%")?i.size=r/100*o:-1!=e.size.indexOf("pt")?i.size=o/.75:i.size=r,i.size*=.981,i}(function(e){if(A[e])return A[e];var t=document.createElement("div").style;try{t.font=e}catch(e){}return A[e]={style:t.fontStyle||P,variant:t.fontVariant||k,weight:t.fontWeight||I,size:t.fontSize||R,family:t.fontFamily||M}}(this.font),this.element_),h=(o=c).style+" "+o.variant+" "+o.weight+" "+o.size+"px "+o.family,f=this.element_.currentStyle,g=this.textAlign.toLowerCase();switch(g){case"left":case"center":case"right":break;case"end":g="ltr"==f.direction?"right":"left";break;case"start":g="rtl"==f.direction?"right":"left";break;default:g="left"}switch(this.textBaseline){case"hanging":case"top":d.y=c.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":d.y=-c.size/3}switch(g){case"right":s=1e3,l=.05;break;case"center":s=l=500}var p=z(this,t+d.x,i+d.y);u.push('<g_vml_:line from="',-s,' 0" to="',l,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!r,'" stroked="',!!r,'" style="position:absolute;width:1px;height:1px;left:0px;top:0px;">'),r?V(this,u):_(this,u,{x:-s,y:0},{x:l,y:c.size});var m=a[0][0].toFixed(3)+","+a[1][0].toFixed(3)+","+a[0][1].toFixed(3)+","+a[1][1].toFixed(3)+",0,0",x=y(p.x/N)+","+y(p.y/N);u.push('<g_vml_:skew on="t" matrix="',m,'" ',' offset="',x,'" origin="',s,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',v(e),'" style="v-text-align:',g,";font:",v(h),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",u.join(""))},L.fillText=function(e,t,i,n){this.drawText_(e,t,i,n,!1)},L.strokeText=function(e,t,i,n){this.drawText_(e,t,i,n,!0)},L.measureText=function(e){if(!this.textMeasureEl_){this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild}var t=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(t.createTextNode(e)),{width:this.textMeasureEl_.offsetWidth}},L.clip=function(){},L.arcTo=function(){},L.createPattern=function(e,t){return new X(e,t)},G.prototype.addColorStop=function(e,t){t=H(t),this.colors_.push({offset:e,color:t.color,alpha:t.alpha})};var q=Y.prototype=new Error;q.INDEX_SIZE_ERR=1,q.DOMSTRING_SIZE_ERR=2,q.HIERARCHY_REQUEST_ERR=3,q.WRONG_DOCUMENT_ERR=4,q.INVALID_CHARACTER_ERR=5,q.NO_DATA_ALLOWED_ERR=6,q.NO_MODIFICATION_ALLOWED_ERR=7,q.NOT_FOUND_ERR=8,q.NOT_SUPPORTED_ERR=9,q.INUSE_ATTRIBUTE_ERR=10,q.INVALID_STATE_ERR=11,q.SYNTAX_ERR=12,q.INVALID_MODIFICATION_ERR=13,q.NAMESPACE_ERR=14,q.INVALID_ACCESS_ERR=15,q.VALIDATION_ERR=16,q.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=e,CanvasRenderingContext2D=F,CanvasGradient=G,CanvasPattern=X,DOMException=Y}(),Ext.define("Ext.draw.engine.Canvas",{extend:"Ext.draw.Surface",isCanvas:!0,requires:["Ext.draw.engine.excanvas","Ext.draw.Animator","Ext.draw.Color"],config:{highPrecision:!1},statics:{contextOverrides:{setGradientBBox:function(e){this.bbox=e},fill:function(){var e=this.fillStyle,t=this.fillGradient,i=this.fillOpacity,n=this.globalAlpha,r=this.bbox;e!==Ext.util.Color.RGBA_NONE&&0!==i&&(t&&r&&(this.fillStyle=t.generateGradient(this,r)),1!==i&&(this.globalAlpha=n*i),this.$fill(),1!==i&&(this.globalAlpha=n),t&&r&&(this.fillStyle=e))},stroke:function(){var e=this.strokeStyle,t=this.strokeGradient,i=this.strokeOpacity,n=this.globalAlpha,r=this.bbox;e!==Ext.util.Color.RGBA_NONE&&0!==i&&(t&&r&&(this.strokeStyle=t.generateGradient(this,r)),1!==i&&(this.globalAlpha=n*i),this.$stroke(),1!==i&&(this.globalAlpha=n),t&&r&&(this.strokeStyle=e))},fillStroke:function(e,t){var i=this.fillStyle,n=this.fillOpacity,r=this.strokeStyle,o=this.strokeOpacity,a=this.shadowColor,s=this.shadowBlur,l=Ext.util.Color.RGBA_NONE;void 0===t&&(t=e.transformFillStroke),t||e.inverseMatrix.toContext(this),i!==l&&0!==n&&(this.fill(),this.shadowColor=l,this.shadowBlur=0),r!==l&&0!==o&&this.stroke(),this.shadowColor=a,this.shadowBlur=s},setLineDash:function(e){this.$setLineDash&&this.$setLineDash(e)},getLineDash:function(){if(this.$getLineDash)return this.$getLineDash()},ellipse:function(e,t,i,n,r,o,a,s){var l=Math.cos(r),d=Math.sin(r);this.transform(l*i,d*i,-d*n,l*n,e,t),this.arc(0,0,1,o,a,s),this.transform(l/i,-d/n,d/i,l/n,-(l*e+d*t)/i,(d*e-l*t)/n)},appendPath:function(e){var t=0,i=0,n=e.commands,r=e.params,o=n.length;for(this.beginPath();t<o;t++)switch(n[t]){case"M":this.moveTo(r[i],r[i+1]),i+=2;break;case"L":this.lineTo(r[i],r[i+1]),i+=2;break;case"C":this.bezierCurveTo(r[i],r[i+1],r[i+2],r[i+3],r[i+4],r[i+5]),i+=6;break;case"Z":this.closePath()}},save:function(){for(var e,t=this.toSave,i=t.length,n=i&&{},r=0;r<i;r++)(e=t[r])in this&&(n[e]=this[e]);this.state.push(n),this.$save()},restore:function(){var e,t=this.state.pop();if(t)for(e in t)this[e]=t[e];this.$restore()}}},splitThreshold:3e3,toSave:["fillGradient","strokeGradient"],element:{reference:"element",children:[{reference:"bodyElement",style:{width:"100%",height:"100%",position:"relative"}}]},createCanvas:function(){var e,t,i,n;for(n in e=Ext.Element.create({tag:"canvas",cls:Ext.baseCSSPrefix+"surface-canvas"}),window.G_vmlCanvasManager&&(G_vmlCanvasManager.initElement(e.dom),this.isVML=!0),t=Ext.draw.engine.Canvas.contextOverrides,(i=e.dom.getContext("2d")).ellipse&&delete t.ellipse,i.state=[],i.toSave=this.toSave,t)i["$"+n]=i[n];Ext.apply(i,t),this.getHighPrecision()?this.enablePrecisionCompensation(i):this.disablePrecisionCompensation(i),this.bodyElement.appendChild(e),this.canvases.push(e),this.contexts.push(i)},updateHighPrecision:function(e){var t,i,n=this.contexts,r=n.length;for(t=0;t<r;t++)i=n[t],e?this.enablePrecisionCompensation(i):this.disablePrecisionCompensation(i)},precisionNames:["rect","fillRect","strokeRect","clearRect","moveTo","lineTo","arc","arcTo","save","restore","updatePrecisionCompensate","setTransform","transform","scale","translate","rotate","quadraticCurveTo","bezierCurveTo","createLinearGradient","createRadialGradient","fillText","strokeText","drawImage"],disablePrecisionCompensation:function(e){var t,i,n=Ext.draw.engine.Canvas.contextOverrides,r=this.precisionNames,o=r.length;for(t=0;t<o;t++)(i=r[t])in n||delete e[i];this.setDirty(!0)},enablePrecisionCompensation:function(e){var t=this,d=1,u=1,c=0,h=0,a=new Ext.draw.Matrix,i=[],n={},r=Ext.draw.engine.Canvas.contextOverrides,f=e.constructor.prototype,o={toSave:t.toSave,rect:function(e,t,i,n){return f.rect.call(this,e*d+c,t*u+h,i*d,n*u)},fillRect:function(e,t,i,n){this.updatePrecisionCompensateRect(),f.fillRect.call(this,e*d+c,t*u+h,i*d,n*u),this.updatePrecisionCompensate()},strokeRect:function(e,t,i,n){this.updatePrecisionCompensateRect(),f.strokeRect.call(this,e*d+c,t*u+h,i*d,n*u),this.updatePrecisionCompensate()},clearRect:function(e,t,i,n){return f.clearRect.call(this,e*d+c,t*u+h,i*d,n*u)},moveTo:function(e,t){return f.moveTo.call(this,e*d+c,t*u+h)},lineTo:function(e,t){return f.lineTo.call(this,e*d+c,t*u+h)},arc:function(e,t,i,n,r,o){this.updatePrecisionCompensateRect(),f.arc.call(this,e*d+c,t*d+h,i*d,n,r,o),this.updatePrecisionCompensate()},arcTo:function(e,t,i,n,r){this.updatePrecisionCompensateRect(),f.arcTo.call(this,e*d+c,t*u+h,i*d+c,n*u+h,r*d),this.updatePrecisionCompensate()},save:function(){i.push(a),a=a.clone(),r.save.call(this),f.save.call(this)},restore:function(){a=i.pop(),r.restore.call(this),f.restore.call(this),this.updatePrecisionCompensate()},updatePrecisionCompensate:function(){a.precisionCompensate(t.devicePixelRatio,n),d=n.xx,u=n.yy,c=n.dx,h=n.dy,f.setTransform.call(this,t.devicePixelRatio,n.b,n.c,n.d,0,0)},updatePrecisionCompensateRect:function(){a.precisionCompensateRect(t.devicePixelRatio,n),d=n.xx,u=n.yy,c=n.dx,h=n.dy,f.setTransform.call(this,t.devicePixelRatio,n.b,n.c,n.d,0,0)},setTransform:function(e,t,i,n,r,o){a.set(e,t,i,n,r,o),this.updatePrecisionCompensate()},transform:function(e,t,i,n,r,o){a.append(e,t,i,n,r,o),this.updatePrecisionCompensate()},scale:function(e,t){this.transform(e,0,0,t,0,0)},translate:function(e,t){this.transform(1,0,0,1,e,t)},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);this.transform(t,i,-i,t,0,0)},quadraticCurveTo:function(e,t,i,n){f.quadraticCurveTo.call(this,e*d+c,t*u+h,i*d+c,n*u+h)},bezierCurveTo:function(e,t,i,n,r,o){f.bezierCurveTo.call(this,e*d+c,t*u+h,i*d+c,n*u+h,r*d+c,o*u+h)},createLinearGradient:function(e,t,i,n){var r;return this.updatePrecisionCompensateRect(),r=f.createLinearGradient.call(this,e*d+c,t*u+h,i*d+c,n*u+h),this.updatePrecisionCompensate(),r},createRadialGradient:function(e,t,i,n,r,o){var a;return this.updatePrecisionCompensateRect(),a=f.createLinearGradient.call(this,e*d+c,t*d+h,i*d,n*d+c,r*d+h,o*d),this.updatePrecisionCompensate(),a},fillText:function(e,t,i,n){f.setTransform.apply(this,a.elements),void 0===n?f.fillText.call(this,e,t,i):f.fillText.call(this,e,t,i,n),this.updatePrecisionCompensate()},strokeText:function(e,t,i,n){f.setTransform.apply(this,a.elements),void 0===n?f.strokeText.call(this,e,t,i):f.strokeText.call(this,e,t,i,n),this.updatePrecisionCompensate()},fill:function(){var e=this.fillGradient,t=this.bbox;this.updatePrecisionCompensateRect(),e&&t&&(this.fillStyle=e.generateGradient(this,t)),f.fill.call(this),this.updatePrecisionCompensate()},stroke:function(){var e=this.strokeGradient,t=this.bbox;this.updatePrecisionCompensateRect(),e&&t&&(this.strokeStyle=e.generateGradient(this,t)),f.stroke.call(this),this.updatePrecisionCompensate()},drawImage:function(e,t,i,n,r,o,a,s,l){switch(arguments.length){case 3:return f.drawImage.call(this,e,t*d+c,i*u+h);case 5:return f.drawImage.call(this,e,t*d+c,i*u+h,n*d,r*u);case 9:return f.drawImage.call(this,e,t,i,n,r,o*d+c,a*u*h,s*d,l*u)}}};Ext.apply(e,o),this.setDirty(!0)},updateRect:function(e){this.callParent([e]);var t,i,n,r,o,a,s,l,d=this,u=Math.floor(e[0]),c=Math.floor(e[1]),h=Math.ceil(e[0]+e[2]),f=Math.ceil(e[1]+e[3]),g=d.devicePixelRatio,p=d.canvases,m=h-u,x=f-c,y=Math.round(d.splitThreshold/g),v=d.xSplits=Math.ceil(m/y),E=d.ySplits=Math.ceil(x/y);for(o=i=0;i<E;i++,o+=y)for(r=t=0;t<v;t++,r+=y)(n=i*v+t)>=p.length&&d.createCanvas(),(a=p[n].dom).style.left=r+"px",a.style.top=o+"px",(l=Math.min(y,x-o))*g!==a.height&&(a.height=l*g,a.style.height=l+"px"),(s=Math.min(y,m-r))*g!==a.width&&(a.width=s*g,a.style.width=s+"px"),d.applyDefaults(d.contexts[n]);for(d.activeCanvases=n=v*E;p.length>n;)p.pop().destroy();d.clear()},clearTransform:function(){var e,t,i,n=this.xSplits,r=this.ySplits,o=this.contexts,a=this.splitThreshold,s=this.devicePixelRatio;for(e=0;e<n;e++)for(t=0;t<r;t++)(i=o[t*n+e]).translate(-a*e,-a*t),i.scale(s,s),this.matrix.toContext(i)},renderSprite:function(e){for(var t,i,n,r,o,a,s,l,d,u,c,h=this.getRect(),f=this.matrix,g=e.getParent(),p=Ext.draw.Matrix.fly([1,0,0,1,0,0]),m=this.splitThreshold/this.devicePixelRatio,x=this.xSplits,y=this.ySplits,v=0,E=0,b=h[2],C=h[3];g&&g.isSprite;)p.prependMatrix(g.matrix||g.attr&&g.attr.matrix),g=g.getParent();if(p.prependMatrix(f),r=(r=e.getBBox())&&p.transformBBox(r),e.preRender(this),e.attr.hidden||0===e.attr.globalAlpha)e.setDirty(!1);else{for(i=u=0;u<y;u++,i+=m)for(t=d=0;d<x;d++,t+=m)if(c=u*x+d,n=this.contexts[c],s=(v=t)+(o=Math.min(m,b-t)),l=(E=i)+(a=Math.min(m,C-i)),!r||!(r.x>s||r.x+r.width<v||r.y>l||r.y+r.height<E)){if(n.save(),e.useAttributes(n,h),!1===e.render(this,n,[v,E,o,a]))return!1;n.restore()}e.setDirty(!1)}},flatten:function(e,t){var i,n,r,o,a,s,l=document.createElement("canvas"),d=Ext.getClassName(this),u=this.devicePixelRatio,c=l.getContext("2d");for(l.width=Math.ceil(e.width*u),l.height=Math.ceil(e.height*u),o=0;o<t.length;o++)if(i=t[o],Ext.getClassName(i)===d)for(r=i.getRect(),a=0;a<i.canvases.length;a++)s=(n=i.canvases[a]).getOffsetsTo(n.getParent()),c.drawImage(n.dom,(r[0]+s[0])*u,(r[1]+s[1])*u);return{data:l.toDataURL(),type:"png"}},applyDefaults:function(e){var t=Ext.util.Color.RGBA_NONE;e.strokeStyle=t,e.fillStyle=t,e.textAlign="start",e.textBaseline="alphabetic",e.miterLimit=1},clear:function(){var e,t,i,n=this.activeCanvases;for(e=0;e<n;e++)t=this.canvases[e].dom,(i=this.contexts[e]).setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height);this.setDirty(!0)},destroy:function(){var e,t=this.canvases,i=t.length;for(e=0;e<i;e++)this.contexts[e]=null,t[e].destroy(),t[e]=null;this.contexts=this.canvases=null,this.callParent()},privates:{initElement:function(){this.callParent(),this.canvases=[],this.contexts=[],this.activeCanvases=this.xSplits=this.ySplits=0}}},function(){var e=this.prototype,t=1e10;Ext.os.is.Android4&&Ext.browser.is.Chrome?t=3e3:Ext.is.iOS&&(t=2200),e.splitThreshold=t}),Ext.define("Ext.draw.Container",{extend:"Ext.draw.ContainerBase",alternateClassName:"Ext.draw.Component",xtype:"draw",defaultType:"surface",isDrawContainer:!0,requires:["Ext.draw.Surface","Ext.draw.engine.Svg","Ext.draw.engine.Canvas","Ext.draw.gradient.GradientDefinition"],engine:"Ext.draw.engine.Canvas",config:{cls:[Ext.baseCSSPrefix+"draw-container",Ext.baseCSSPrefix+"unselectable"],resizeHandler:null,sprites:null,gradients:[],downloadServerUrl:void 0,touchAction:{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1},surfaceZIndexes:{main:1}},defaultDownloadServerUrl:"http://svg.sencha.io",supportedFormats:["png","pdf","jpeg","gif"],supportedOptions:{version:Ext.isNumber,data:Ext.isString,format:function(e){return 0<=Ext.Array.indexOf(this.supportedFormats,e)},filename:Ext.isString,width:Ext.isNumber,height:Ext.isNumber,scale:Ext.isNumber,pdf:Ext.isObject,jpeg:Ext.isObject},initAnimator:function(){this.frameCallbackId=Ext.draw.Animator.addFrameCallback("renderFrame",this)},applyDownloadServerUrl:function(e){var t=this.defaultDownloadServerUrl;return e||(e=t,window.jasmine||Ext.log.warn("Using Sencha's download server could expose your data and pose a security risk. Please see Ext.draw.Container#download method docs for more info. (component id="+this.getId()+")")),e},applyGradients:function(e){var t,i,n,r,o=[];if(!Ext.isArray(e))return o;for(t=0,i=e.length;t<i;t++)n=e[t],Ext.isObject(n)&&("string"!=typeof n.type&&(n.type="linear"),n.angle&&(n.degrees=n.angle,delete n.angle),Ext.isObject(n.stops)&&(n.stops=function(e){var t,i=[];for(r in e)(t=e[r]).offset=r/100,i.push(t);return i}(n.stops)),o.push(n));return Ext.draw.gradient.GradientDefinition.add(o),o},applySprites:function(e){var t,i,n,r,o;if(e){for(t=[],r=0,o=(e=Ext.Array.from(e)).length;r<o;r++)(i=(n=e[r]).surface)&&i.isSurface||(Ext.isString(i)?(i=this.getSurface(i),delete n.surface):i=this.getSurface("main")),n=i.add(n),t.push(n);return t}},resizeDelay:500,resizeTimerId:0,lastResizeTime:null,size:null,handleResize:function(e,t){var i=this,n=i.element,r=i.getResizeHandler()||i.defaultResizeHandler,o=i.resizeDelay,a=i.lastResizeTime;n&&(e=e||n.getSize()).width&&e.height&&(i.size=e,i.stopResizeTimer(),!t&&a&&Ext.Date.now()-a<o?i.resizeTimerId=Ext.defer(i.handleResize,o,i,[e,!0]):(i.fireEvent("bodyresize",i,e),Ext.callback(r,null,[e],0,i),i.renderFrame(),i.lastResizeTime=Ext.Date.now()))},stopResizeTimer:function(){this.resizeTimerId&&(Ext.undefer(this.resizeTimerId),this.resizeTimerId=0)},defaultResizeHandler:function(t){this.getItems().each(function(e){e.setRect([0,0,t.width,t.height])})},getSurface:function(e,t){var i,n=this.getItems(),r=n.getCount(),o=this.getSurfaceZIndexes();return e=e||"main",t=t||e,i=this.createSurface(e),t in o&&i.element.setStyle("zIndex",o[t]),n.getCount()>r&&this.handleResize(null,!0),i},createSurface:function(e){var t=this.getItems();return e=this.getId()+"-"+(e||"main"),t.get(e)||this.add({xclass:this.engine,id:e})},renderFrame:function(){var e,t,i,n=this.getItems();for(e=0,t=n.length;e<t;e++)(i=n.items[e]).isSurface&&i.renderFrame()},getSurfaces:function(e){var t,i,n,r,o=Array.prototype.slice.call(this.items.items),a=this.getSurfaceZIndexes();if(e)for(i=1;i<o.length;i++){for(r=a[(n=o[i]).type],t=i-1;0<=t&&a[o[t].type]>r;)o[t+1]=o[t],t--;o[t+1]=n}return o},getImage:function(e){var t,i,n=this.bodyElement.getSize(),r=this.getSurfaces(!0),o=r[0];if((Ext.isIE||Ext.isEdge)&&o.isSVG)t={data:o.toSVG(n,r),type:"svg-markup"};else{if(t=o.flatten(n,r),"image"===e)return(i=new Image).src=t.data,t.data=i,t;if("stream"===e)return t.data=t.data.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),t}return t},download:function(e){var t,i,n,r=[];if(Ext.isIE8)return!1;for(i in(e=e||{}).version=2,e.data||(e.data=this.getImage().data),e)e.hasOwnProperty(i)&&(n=e[i],i in this.supportedOptions?this.supportedOptions[i].call(this,n)?r.push({tag:"input",type:"hidden",name:i,value:Ext.String.htmlEncode(Ext.isObject(n)?Ext.JSON.encode(n):n)}):Ext.log.error('Invalid value for image download option "'+i+'": '+n):Ext.log.error('Invalid image download option: "'+i+'"'));t=Ext.dom.Helper.markup({tag:"html",children:[{tag:"head"},{tag:"body",children:[{tag:"form",method:"POST",action:e.url||this.getDownloadServerUrl(),children:r},{tag:"script",type:"text/javascript",children:'document.getElementsByTagName("form")[0].submit();'}]}]}),window.open("","ImageDownload_"+Date.now()).document.write(t)},doDestroy:function(){var e=this.frameCallbackId;e&&Ext.draw.Animator.removeFrameCallback(e),this.stopResizeTimer(),this.callParent()}},function(){location.search.match("svg")?Ext.draw.Container.prototype.engine="Ext.draw.engine.Svg":(Ext.os.is.BlackBerry&&10===Ext.os.version.getMajor()||Ext.browser.is.AndroidStock4&&(1===Ext.os.version.getMinor()||2===Ext.os.version.getMinor()||3===Ext.os.version.getMinor()))&&(Ext.draw.Container.prototype.engine="Ext.draw.engine.Svg")}),Ext.define("Ext.chart.theme.BaseTheme",{defaultsDivCls:"x-component"}),Ext.define("Ext.chart.theme.Base",{extend:"Ext.chart.theme.BaseTheme",mixins:{factoryable:"Ext.mixin.Factoryable"},requires:["Ext.draw.Color"],factoryConfig:{type:"chart.theme"},isTheme:!0,isBase:!0,config:{baseColor:null,colors:void 0,gradients:null,chart:{defaults:{captions:{title:{docked:"top",padding:5,style:{textAlign:"center",fontFamily:"default",fontWeight:"500",fillStyle:"black",fontSize:"default*1.6"}},subtitle:{docked:"top",style:{textAlign:"center",fontFamily:"default",fontWeight:"normal",fillStyle:"black",fontSize:"default*1.3"}},credits:{docked:"bottom",padding:5,style:{textAlign:"left",fontFamily:"default",fontWeight:"lighter",fillStyle:"black",fontSize:"default"}}},background:"white"}},axis:{defaults:{label:{x:0,y:0,textBaseline:"middle",textAlign:"center",fontSize:"default",fontFamily:"default",fontWeight:"default",fillStyle:"black"},title:{fillStyle:"black",fontSize:"default*1.23",fontFamily:"default",fontWeight:"default"},style:{strokeStyle:"black"},grid:{strokeStyle:"rgb(221, 221, 221)"}},top:{style:{textPadding:5}},bottom:{style:{textPadding:5}}},series:{defaults:{label:{fillStyle:"black",strokeStyle:"none",fontFamily:"default",fontWeight:"default",fontSize:"default*1.077",textBaseline:"middle",textAlign:"center"},labelOverflowPadding:5}},sprites:{text:{fontSize:"default",fontWeight:"default",fontFamily:"default",fillStyle:"black"}},legend:{label:{fontSize:14,fontWeight:"default",fontFamily:"default",fillStyle:"black"},border:{lineWidth:1,radius:4,fillStyle:"none",strokeStyle:"gray"},background:"white"},seriesThemes:void 0,markerThemes:{type:["circle","cross","plus","square","triangle","diamond"]},useGradients:!1,background:null},colorDefaults:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],constructor:function(e){this.initConfig(e),this.resolveDefaults()},defaultRegEx:/^default([+\-/*]\d+(?:\.\d+)?)?$/,defaultOperators:{"*":function(e,t){return e*t},"+":function(e,t){return e+t},"-":function(e,t){return e-t}},resolveChartDefaults:function(){var e,t,i,n,r=Ext.clone(this.getChart());for(e in r)if("captions"in(i=r[e]))for(t in i.captions)(n=i.captions[t])&&this.replaceDefaults(n.style);this.setChart(r)},resolveDefaults:function(){var s=this;Ext.onInternalReady(function(){var e,t,i,n=Ext.clone(s.getSprites()),r=Ext.clone(s.getLegend()),o=Ext.clone(s.getAxis()),a=Ext.clone(s.getSeries());for(t in s.superclass.defaults||(e=Ext.getBody().createChild({tag:"div",cls:s.defaultsDivCls}),s.superclass.defaults={fontFamily:e.getStyle("fontFamily"),fontWeight:e.getStyle("fontWeight"),fontSize:parseFloat(e.getStyle("fontSize")),fontVariant:e.getStyle("fontVariant"),fontStyle:e.getStyle("fontStyle")},e.destroy()),s.resolveChartDefaults(),s.replaceDefaults(n.text),s.setSprites(n),s.replaceDefaults(r.label),s.setLegend(r),o)i=o[t],s.replaceDefaults(i.label),s.replaceDefaults(i.title);for(t in s.setAxis(o),a)i=a[t],s.replaceDefaults(i.label);s.setSeries(a)})},replaceDefaults:function(e){var t,i,n,r,o=this.superclass.defaults,a=this.defaultRegEx;if(Ext.isObject(e))for(t in o)(n=a.exec(e[t]))&&(i=o[t],(n=n[1])&&(r=this.defaultOperators[n.charAt(0)],i=Math.round(r(i,parseFloat(n.substr(1))))),e[t]=i)},applyBaseColor:function(e){var t,i;return e&&((i=(t=e.isColor?e:Ext.util.Color.fromString(e)).getHSL()[2])<.15?t=t.createLighter(.3):i<.3?t=t.createLighter(.15):.85<i?t=t.createDarker(.3):.7<i&&(t=t.createDarker(.15)),this.setColors([t.createDarker(.3).toString(),t.createDarker(.15).toString(),t.toString(),t.createLighter(.12).toString(),t.createLighter(.24).toString(),t.createLighter(.31).toString()])),e},applyColors:function(e){return e||this.colorDefaults},updateUseGradients:function(e){e&&this.updateGradients({type:"linear",degrees:90})},updateBackground:function(e){var t;e&&((t=this.getChart()).defaults.background=e,this.setChart(t))},updateGradients:function(e){var t,i,n,r,o,a=this.getColors(),s=[];if(Ext.isObject(e)){for(r=0,o=a&&a.length||0;r<o;r++)(i=Ext.util.Color.fromString(a[r]))&&(n=i.createLighter(.15).toString(),t=Ext.apply(Ext.Object.chain(e),{stops:[{offset:1,color:i.toString()},{offset:0,color:n.toString()}]}),s.push(t));this.setColors(s)}},applySeriesThemes:function(e){var t;return this.getBaseColor(),this.getUseGradients(),this.getGradients(),t=this.getColors(),e=e||{fillStyle:Ext.Array.clone(t),strokeStyle:Ext.Array.map(t,function(e){return Ext.util.Color.fromString(e.stops?e.stops[0].color:e).createDarker(.15).toString()})}}}),Ext.define("Ext.chart.theme.Default",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.default","chart.theme.Default","chart.theme.Base"]}),Ext.define("Ext.chart.Util",{singleton:!0,expandRange:function(e,t){var i,n,r=t.length,o=e[0],a=e[1];for(i=0;i<r;i++)null!=(n=t[i])&&isFinite(n)&&((n<o||!isFinite(o))&&(o=n),(a<n||!isFinite(a))&&(a=n));e[0]=o,e[1]=a},defaultRange:[0,1],validateRange:function(e,t,i){var n,r;return t=t||this.defaultRange.slice(),0===i||0<i||(i=.5),e&&2===e.length?((e=[e[0],e[1]])[0]||(e[0]=0),e[1]||(e[1]=0),i&&e[0]===e[1]&&(e=[e[0]-i,e[0]+i])[0]===e[1]?t:(n=isFinite(e[0]),r=isFinite(e[1]),n||r?(n&&!r?e[1]=e[0]+Ext.Number.sign(e[1])*(t[1]-t[0]):r&&!n&&(e[0]=e[1]+Ext.Number.sign(e[0])*(t[1]-t[0])),[Math.min(e[0],e[1]),Math.max(e[0],e[1])]):t)):t},applyAnimation:function(e,t){return e?!0===e&&(e={easing:"easeInOut",duration:500}):e={duration:0},t?Ext.apply({},e,t):e}}),Ext.define("Ext.chart.Markers",{extend:"Ext.draw.sprite.Instancing",isMarkers:!0,defaultCategory:"default",constructor:function(){this.callParent(arguments),this.categories={},this.revisions={}},destroy:function(){this.categories=null,this.revisions=null,this.callParent()},getMarkerFor:function(e,t){var i;if(e in this.categories&&t in(i=this.categories[e]))return this.get(i[t])},clear:function(e){(e=e||this.defaultCategory)in this.revisions?this.revisions[e]++:this.revisions[e]=1},clearAll:function(){this.callParent(),this.categories={},this.revisions={}},putMarkerFor:function(e,t,i,n,r){var o,a;e=e||this.defaultCategory,i in(o=this.categories[e]||(this.categories[e]={}))?this.setAttributesFor(o[i],t,n):(o[i]=this.getCount(),this.add(t,n)),(a=this.get(o[i]))&&(a.category=e,r||(a.revision=this.revisions[e]||(this.revisions[e]=1)))},getMarkerBBoxFor:function(e,t,i){var n;if(e in this.categories&&t in(n=this.categories[e]))return this.getBBoxFor(n[t],i)},getBBox:function(){return null},render:function(e,t,i){var n,r,o=e.getRect(),a=this.revisions,s=this.attr.matrix,l=this.getTemplate(),d=l.attr,u=this.instances.length;for(s.toContext(t),l.preRender(e,t,i),l.useAttributes(t,o),r=0;r<u;r++)(n=this.get(r)).hidden||n.revision!==a[n.category]||(t.save(),l.attr=n,l.useAttributes(t,o),l.render(e,t,i),t.restore());l.attr=d}}),Ext.define("Ext.chart.modifier.Callout",{extend:"Ext.draw.modifier.Modifier",alternateClassName:"Ext.chart.label.Callout",prepareAttributes:function(e){e.hasOwnProperty("calloutOriginal")||(e.calloutOriginal=Ext.Object.chain(e),e.calloutOriginal.prototype=e),this._lower&&this._lower.prepareAttributes(e.calloutOriginal)},setAttrs:function(e,t){var i,n,r,o,a,s,l,d,u,c=e.callout,h=e.calloutOriginal,f=e.bbox.plain,g=(f.width||0)+e.labelOverflowPadding,p=(f.height||0)+e.labelOverflowPadding;return"callout"in t&&(c=t.callout),("callout"in t||"calloutPlaceX"in t||"calloutPlaceY"in t||"x"in t||"y"in t)&&(r="rotationRads"in t?h.rotationRads=t.rotationRads:h.rotationRads,o="x"in t?h.x=t.x:h.x,a="y"in t?h.y=t.y:h.y,s="calloutPlaceX"in t?t.calloutPlaceX:e.calloutPlaceX,l="calloutPlaceY"in t?t.calloutPlaceY:e.calloutPlaceY,d="calloutVertical"in t?t.calloutVertical:e.calloutVertical,r%=2*Math.PI,Math.cos(r)<0&&(r=(r+Math.PI)%(2*Math.PI)),r>Math.PI&&(r-=2*Math.PI),d?(r=r*(1-c)-Math.PI/2*c,u=g,g=p,p=u):r*=1-c,t.rotationRads=r,t.x=o*(1-c)+s*c,t.y=a*(1-c)+l*c,i=s-o,n=l-a,Math.abs(n*g)>Math.abs(i*p)?0<n?(t.calloutEndX=t.x-p/2*(i/n)*c,t.calloutEndY=t.y-p/2*c):(t.calloutEndX=t.x+p/2*(i/n)*c,t.calloutEndY=t.y+p/2*c):0<i?(t.calloutEndX=t.x-g/2,t.calloutEndY=t.y-g/2*(n/i)*c):(t.calloutEndX=t.x+g/2,t.calloutEndY=t.y+g/2*(n/i)*c),t.calloutStartX&&t.calloutStartY?t.calloutHasLine=0<i&&t.calloutStartX<t.calloutEndX||i<=0&&t.calloutStartX>t.calloutEndX||0<n&&t.calloutStartY<t.calloutEndY||n<=0&&t.calloutStartY>t.calloutEndY:t.calloutHasLine=!0),t},pushDown:function(e,t){return t=this.callParent([e.calloutOriginal,t]),this.setAttrs(e,t)},popUp:function(e,t){return e=e.prototype,t=this.setAttrs(e,t),this._upper?this._upper.popUp(e,t):Ext.apply(e,t)}}),Ext.define("Ext.chart.sprite.Label",{extend:"Ext.draw.sprite.Text",alternateClassName:"Ext.chart.label.Label",requires:["Ext.chart.modifier.Callout"],inheritableStatics:{def:{processors:{callout:"limited01",calloutHasLine:"bool",calloutPlaceX:"number",calloutPlaceY:"number",calloutStartX:"number",calloutStartY:"number",calloutEndX:"number",calloutEndY:"number",calloutColor:"color",calloutWidth:"number",calloutVertical:"bool",labelOverflowPadding:"number",display:"enums(none,under,over,rotate,insideStart,insideEnd,inside,outside)",orientation:"enums(horizontal,vertical)",renderer:"default"},defaults:{callout:0,calloutHasLine:!0,calloutPlaceX:0,calloutPlaceY:0,calloutStartX:0,calloutStartY:0,calloutEndX:0,calloutEndY:0,calloutWidth:1,calloutVertical:!1,calloutColor:"black",labelOverflowPadding:5,display:"none",orientation:"",renderer:null},triggers:{callout:"transform",calloutPlaceX:"transform",calloutPlaceY:"transform",labelOverflowPadding:"transform",calloutRotation:"transform",display:"hidden"},updaters:{hidden:function(e){e.hidden="none"===e.display}}}},config:{animation:{customDurations:{callout:200}},field:null,calloutLine:!0,hideLessThan:20},applyCalloutLine:function(e){return e?Ext.apply({},e):e},createModifiers:function(){var e=this.callParent(arguments);e.callout=new Ext.chart.modifier.Callout({sprite:this}),e.animation.setUpper(e.callout),e.callout.setUpper(e.target)},render:function(e,t){var i=this,n=i.attr,r=n.calloutColor;t.save(),t.globalAlpha*=n.callout,0<t.globalAlpha&&n.calloutHasLine&&(r&&r.isGradient&&(r=r.getStops()[0].color),t.strokeStyle=r,t.fillStyle=r,t.lineWidth=n.calloutWidth,t.beginPath(),t.moveTo(i.attr.calloutStartX,i.attr.calloutStartY),t.lineTo(i.attr.calloutEndX,i.attr.calloutEndY),t.stroke(),t.beginPath(),t.arc(i.attr.calloutStartX,i.attr.calloutStartY,+n.calloutWidth,0,2*Math.PI,!0),t.fill(),t.beginPath(),t.arc(i.attr.calloutEndX,i.attr.calloutEndY,+n.calloutWidth,0,2*Math.PI,!0),t.fill()),t.restore(),Ext.draw.sprite.Text.prototype.render.apply(i,arguments)}}),Ext.define("Ext.chart.series.Series",{requires:["Ext.chart.Util","Ext.chart.Markers","Ext.chart.sprite.Label","Ext.tip.ToolTip"],mixins:["Ext.mixin.Observable","Ext.mixin.Bindable"],isSeries:!0,defaultBindProperty:"store",type:null,seriesType:"sprite",identifiablePrefix:"ext-line-",observableType:"series",darkerStrokeRatio:.15,config:{chart:null,title:null,renderer:null,showInLegend:!0,triggerAfterDraw:!1,theme:null,style:{},subStyle:{},themeStyle:{},colors:null,useDarkerStrokeColor:!0,store:null,label:null,labelOverflowPadding:null,showMarkers:!0,marker:null,markerSubStyle:null,itemInstancing:null,background:null,surface:null,overlaySurface:null,hidden:!1,highlight:!1,highlightCfg:{merge:function(e){return e},$value:{fillStyle:"yellow",strokeStyle:"red"}},animation:null,tooltip:null},directions:[],sprites:null,themeColorCount:function(){return 1},isStoreDependantColorCount:!1,themeMarkerCount:function(){return 0},getFields:function(e){var t,i,n=[],r=e.length;for(t=0;t<r;t++)i=this["get"+e[t]+"Field"](),Ext.isArray(i)?n.push.apply(n,i):n.push(i);return n},applyAnimation:function(e,t){return this.getChart().isSettingSeriesAnimation||(this.isUserAnimation=!0),Ext.chart.Util.applyAnimation(e,t)},updateAnimation:function(e){var t,i,n,r,o,a=this.getSprites();for(n=0,r=a.length;n<r;n++)(o=a[n]).isMarkerHolder&&((t=o.getMarker("items"))&&t.getTemplate().setAnimation(e),(i=o.getMarker("markers"))&&i.getTemplate().setAnimation(e)),o.setAnimation(e)},getAnimation:function(){var e=this.getChart();return e&&e.animationSuspendCount?{duration:0}:this.isUserAnimation?this.callParent():e.getAnimation()},updateTitle:function(){var e=this.getChart();e&&!e.isInitializing&&e.refreshLegendStore()},applyHighlight:function(e,t){var i=this.getHighlightCfg();return Ext.isObject(e)?e=Ext.merge({},i,e):!0===e&&(e=i),e&&(e.type="highlight"),e&&Ext.merge({},t,e)},updateHighlight:function(e){var t,i,n,r,o,a=this.sprites,s=this.getHighlightCfg();if(this.getStyle(),this.getMarker(),Ext.Object.isEmpty(e))Ext.Object.equals(s,this.defaultConfig.highlightCfg)||this.addItemHighlight();else for(this.addItemHighlight(),t=0,i=a.length;t<i;t++)(n=a[t]).isMarkerHolder&&((r=n.getMarker("items"))&&r.getTemplate().modifiers.highlight.setStyle(e),(o=n.getMarker("markers"))&&o.getTemplate().modifiers.highlight.setStyle(e))},updateHighlightCfg:function(e){this.isConfiguring||Ext.Object.equals(e,this.defaultConfig.highlightCfg)||this.addItemHighlight()},applyItemInstancing:function(e,t){return!e||!t||e.type&&e.type!==t.type||(e=Ext.merge({},t,e)),e&&!e.type&&(e=null),e},setAttributesForItem:function(e,t){var i,n=e&&e.sprite;if(n)if(n.isMarkerHolder&&"items"===e.category&&n.putMarker(e.category,t,e.index,!1,!0),n.isMarkerHolder&&"markers"===e.category)n.putMarker(e.category,t,e.index,!1,!0);else if(n.isInstancing)n.setAttributesFor(e.index,t);else if(Ext.isArray(n))for(i=0;i<n.length;i++)n[i].setAttributes(t);else n.setAttributes(t)},getBBoxForItem:function(e){var t=e&&e.sprite,i=null;return t&&(i=t.getMarker("items")&&"items"===e.category?t.getMarkerBBox(e.category,e.index):t instanceof Ext.draw.sprite.Instancing?t.getBBoxFor(e.index):t.getBBox()),i},dataRange:null,constructor:function(e){var t;(e=e||{}).tips&&(e=Ext.apply({tooltip:e.tips},e)),e.highlightCfg&&(e=Ext.apply({highlight:e.highlightCfg},e)),t="id"in e?e.id:"id"in this.config?this.config.id:this.getId(),this.setId(t),this.sprites=[],this.dataRange=[],this.mixins.observable.constructor.call(this,e),this.initBindable()},lookupViewModel:function(e){var t=this.getChart();return t?t.lookupViewModel(e):null},applyTooltip:function(e,t){var i=Ext.apply({xtype:"tooltip",renderer:Ext.emptyFn,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,hideDelay:200,mouseOffset:[20,20],trackMouse:!0},e);return Ext.create(i)},updateTooltip:function(){this.addItemHighlight()},addItemHighlight:function(){var e,t,i,n,r=this.getChart();if(r){for(e=r.getInteractions(),n=0;n<e.length;n++)if((t=e[n]).isItemHighlight||t.isItemEdit){i=!0;break}i||(e.push("itemhighlight"),r.setInteractions(e))}},showTooltip:function(e,t){var i=this.getTooltip();i&&(Ext.callback(i.renderer,i.scope,[i,e.record,e],0,this),i.showBy(t))},showTooltipAt:function(e,t,i){var n=this.getTooltip(),r=n.config.mouseOffset;n&&n.showAt&&(r&&(t+=r[0],i+=r[1]),Ext.callback(n.renderer,n.scope,[n,e.record,e],0,this),n.showAt([t,i]))},hideTooltip:function(e,t){var i=this.getTooltip();i&&(t?i.hide():i.delayHide())},applyStore:function(e){return e&&Ext.StoreManager.lookup(e)},getStore:function(){return this._store||this.getChart()&&this.getChart().getStore()},updateStore:function(e,t){var i,n,r,o,a=this.getChart(),s=a&&a.getStore();if((t=t||s)&&t!==e&&t.un({datachanged:"onDataChanged",update:"onDataChanged",scope:this}),e){for(e.on({datachanged:"onDataChanged",update:"onDataChanged",scope:this}),o=0,r=(i=this.getSprites()).length;o<r;o++)(n=i[o]).setStore&&n.setStore(e);this.onDataChanged()}this.fireEvent("storechange",this,e,t)},onStoreChange:function(e,t,i){this._store||this.updateStore(t,i)},defaultRange:[0,1],coordinate:function(e,t,i){var n,r,o,a,s=this,l=s.getStore(),d=s.getHidden(),u=l.getData().items,c=s["get"+e+"Axis"](),h=[NaN,NaN],f=s["fieldCategory"+e]||[e],g=s.getFields(f),p={},m=s.getSprites();if(m.length&&!Ext.isBoolean(d)||!d){for(n=0;n<f.length;n++)r=g[n],o=s.coordinateData(u,r,c),Ext.chart.Util.expandRange(h,o),p["data"+f[n]]=o;for(h=Ext.chart.Util.validateRange(h,s.defaultRange,0),s.dataRange[t]=h[0],s.dataRange[t+i]=h[1],p["dataMin"+e]=h[0],p["dataMax"+e]=h[1],c&&(a=c.getRange(!0),c.setBoundSeriesRange(a)),n=0;n<m.length;n++)m[n].setAttributes(p)}},coordinateData:function(e,t,i){var n,r,o=[],a=e.length,s=i&&i.getLayout();for(n=0;n<a;n++)r=e[n].data[t],Ext.isEmpty(r,!0)?o[n]=r:s?o[n]=s.getCoordFor(r,t,n,e):(r=+r,o[n]=Ext.isNumber(r)?r:n);return o},updateLabelData:function(){var e=this.getLabel();if(e){var t,i,n,r,o,a,s=this.getStore().getData().items,l=this.getSprites(),d=e.getTemplate(),u=Ext.Array.from(d.getField());if(l.length&&u.length)for(t=0;t<l.length;t++)if((o=l[t]).getField){for(r=[],a=o.getField(),Ext.Array.indexOf(u,a)<0&&(a=u[t]),i=0,n=s.length;i<n;i++)r.push(s[i].get(a));o.setAttributes({labels:r})}}},processData:function(){var e,t,i,n,r,o=this,a=o.directions;if(!o.isProcessingData&&o.getStore()){for(o.isProcessingData=!0,n=0,r=a.length;n<r;n++)(t=o["get"+(e=a[n])+"Axis"]())?t.processData(o):o[i="coordinate"+e]&&o[i]();o.updateLabelData(),o.isProcessingData=!1}},applyBackground:function(e){var t;return this.getChart()?((t=this.getSurface()).setBackground(e),t.getBackground()):e},updateChart:function(e,t){var i=this,n=i._store;t&&(t.un("axeschange","onAxesChange",i),i.clearSprites(),i.setSurface(null),i.setOverlaySurface(null),t.unregister(i),i.onChartDetached(t),n||i.updateStore(null)),e&&(i.setSurface(e.getSurface("series")),i.setOverlaySurface(e.getSurface("overlay")),e.on("axeschange","onAxesChange",i),e.getAxes()&&i.onAxesChange(e),i.onChartAttached(e),e.register(i),n||i.updateStore(e.getStore()))},onAxesChange:function(e,t){if(!e.destroying&&!e.destroyed){var i,n,r,o,a=e.getAxes(),s={},l={},d=!1,u=this.directions;for(r=0,o=u.length;r<o;r++)l[n=u[r]]=this.getFields(this["fieldCategory"+n]);for(r=0,o=a.length;r<o;r++)s[n=(i=a[r]).getDirection()]?s[n].push(i):s[n]=[i];for(r=0,o=u.length;r<o;r++)n=u[r],!t&&this["get"+n+"Axis"]()||s[n]&&(i=this.findMatchingAxis(s[n],l[n]))&&(this["set"+n+"Axis"](i),i.getNeedHighPrecision()&&(d=!0));this.getSurface().setHighPrecision(d)}},findMatchingAxis:function(e,t){var i,n,r,o;for(r=0;r<e.length;r++){if(!(n=(i=e[r]).getFields()).length)return i;if(t)for(o=0;o<t.length;o++)if(0<=Ext.Array.indexOf(n,t[o]))return i}},onChartDetached:function(e){this.fireEvent("chartdetached",e,this),e.un("storechange","onStoreChange",this)},onChartAttached:function(e){this.fireEvent("chartattached",e,this),e.on("storechange","onStoreChange",this),this.processData()},updateOverlaySurface:function(e){var t=this.getLabel();e&&t&&e.add(t)},getLabel:function(){return this.labelMarker},setLabel:function(e){var t,i=this.getChart(),n=this.labelMarker;!e&&n&&(n.getTemplate().destroy(),n.destroy(),this.labelMarker=n=null),e&&(n||((n=this.labelMarker=new Ext.chart.Markers({zIndex:10})).setTemplate(new Ext.chart.sprite.Label),this.getOverlaySurface().add(n)),(t=n.getTemplate()).setAttributes(e),t.setConfig(e),e.field&&t.setField(e.field),e.display&&n.setAttributes({hidden:"none"===e.display}),n.setDirty(!0)),this.updateLabelData(),!i||i.isInitializing||this.isConfiguring||i.redraw()},createItemInstancingSprite:function(e,t){var i,n,r=new Ext.chart.Markers,o=Ext.apply({modifiers:"highlight"},t),a=this.getStyle();return r.setAttributes({zIndex:Number.MAX_VALUE}),r.setTemplate(o),(i=r.getTemplate()).setAttributes(a),(n=i.getAnimation()).on("animationstart","onSpriteAnimationStart",this),n.on("animationend","onSpriteAnimationEnd",this),e.bindMarker("items",r),this.getSurface().add(r),r},getDefaultSpriteConfig:function(){return{type:this.seriesType,renderer:this.getRenderer()}},updateRenderer:function(e){var t=this.getChart();t&&t.isInitializing||this.sprites.length&&(this.sprites[0].setAttributes({renderer:e||null}),t&&!t.isInitializing&&t.redraw())},updateShowMarkers:function(e){var t=this.getSprite(),i=t&&t.getMarker("markers");i&&i.getTemplate().setAttributes({hidden:!e})},createSprite:function(){var e,t,i=this,n=i.getSurface(),r=i.getItemInstancing(),o=n.add(i.getDefaultSpriteConfig());return o.setAttributes(i.getStyle()),o.setSeries(i),r&&i.createItemInstancingSprite(o,r),o.isMarkerHolder&&(t=i.getLabel())&&t.getTemplate().getField()&&o.bindMarker("labels",t),o.setStore&&o.setStore(i.getStore()),(e=o.getAnimation()).on("animationstart","onSpriteAnimationStart",i),e.on("animationend","onSpriteAnimationEnd",i),i.sprites.push(o),o},getSprites:null,getSprite:function(){var e=this.getSprites();return e&&e[0]},withSprite:function(e){var t=this.getSprite();return t&&e(t)||void 0},forEachSprite:function(e){var t,i,n=this.getSprites();for(t=0,i=n.length;t<i;t++)e(n[t])},onDataChanged:function(){var e=this.getChart(),t=e&&e.getStore();this.getStore()!==t&&this.processData()},isXType:function(e){return"series"===e},getItemId:function(){return this.getId()},applyThemeStyle:function(e,t){var i,n;return n=(i=e&&e.subStyle&&e.subStyle.fillStyle)&&e.subStyle.strokeStyle,i&&!n&&(e.subStyle.strokeStyle=this.getStrokeColorsFromFillColors(i)),n=(i=e&&e.markerSubStyle&&e.markerSubStyle.fillStyle)&&e.markerSubStyle.strokeStyle,i&&!n&&(e.markerSubStyle.strokeStyle=this.getStrokeColorsFromFillColors(i)),Ext.apply(t||{},e)},applyStyle:function(e,t){return Ext.apply({},e,t)},applySubStyle:function(e,t){var i=Ext.ClassManager.getNameByAlias("sprite."+this.seriesType),n=Ext.ClassManager.get(i);return n&&n.def&&(e=n.def.batchedNormalize(e,!0)),Ext.merge({},t,e)},applyMarker:function(e,t){var i,n;return e&&(Ext.isObject(e)||(e={}),i=e.type||"circle",t&&i===t.type&&(e=Ext.merge({},t,e))),i&&(n=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+i))),n&&n.def?(e=n.def.normalize(e,!0)).type=i:(e=null,Ext.log.warn("Invalid series marker type: "+i)),e},updateMarker:function(e){var t,i,n,r,o,a=this.getSprites();for(r=0,o=a.length;r<o;r++)(t=a[r]).isMarkerHolder&&(i=t.getMarker("markers"),e?(i||(i=new Ext.chart.Markers,t.bindMarker("markers",i),this.getOverlaySurface().add(i)),n=Ext.Object.merge({modifiers:"highlight"},e),i.setTemplate(n),i.getTemplate().getAnimation().setCustomDurations({translationX:0,translationY:0})):i&&(t.releaseMarker("markers"),this.getOverlaySurface().remove(i,!0)),t.setDirty(!0));this.isConfiguring||(this.doUpdateStyles(),this.updateHighlight(this.getHighlight()))},applyMarkerSubStyle:function(e,t){var i=e&&e.type||t&&t.type||"circle",n=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+i));return n&&n.def&&(e=n.def.batchedNormalize(e,!0)),Ext.merge(t||{},e)},updateHidden:function(e){this.getColors(),this.getSubStyle(),this.setSubStyle({hidden:e}),this.processData(),this.doUpdateStyles(),Ext.isArray(e)||this.updateLegendStore(e)},updateLegendStore:function(e,t){var i,n=this.getChart(),r=n&&n.getLegendStore(),o=this.getId();r&&(1<arguments.length?-1!==(i=r.findBy(function(e){return e.get("series")===o&&e.get("index")===t}))&&(i=r.getAt(i)):i=r.findRecord("series",o),i&&i.get("disabled")!==e&&i.set("disabled",e))},setHiddenByIndex:function(e,t){Ext.isArray(this.getHidden())?(this.getHidden()[e]=t,this.updateHidden(this.getHidden()),this.updateLegendStore(t,e)):this.setHidden(t)},getStrokeColorsFromFillColors:function(e){var t=this.getUseDarkerStrokeColor(),i=Ext.isNumber(t)?t:this.darkerStrokeRatio;return t?Ext.Array.map(e,function(e){return e=Ext.isString(e)?e:e.stops[0].color,(e=Ext.util.Color.fromString(e)).createDarker(i).toString()}):Ext.Array.clone(e)},updateThemeColors:function(e){var t=this.getThemeStyle(),i={fillStyle:Ext.Array.clone(e),strokeStyle:this.getStrokeColorsFromFillColors(e)};t.subStyle=Ext.apply(t.subStyle||{},i),t.markerSubStyle=Ext.apply(t.markerSubStyle||{},i),this.doUpdateStyles(),this.isConfiguring||this.getChart().refreshLegendStore()},themeOnlyIfConfigured:{},updateTheme:function(e){var t,i,n,r,o,a,s=e.getSeries(),l=this.getInitialConfig(),d=this.defaultConfig,u=this.self.getConfigurator().configs,c=s.defaults,h=s[this.type],f=this.themeOnlyIfConfigured;for(t in s=Ext.merge({},c,h))if(i=s[t],a=u[t],null!=i&&a){if(o=l[t],n=Ext.isObject(i),r=o===d[t],n){if(r&&f[t])continue;i=Ext.merge({},i,o)}(r||n)&&this[a.names.set](i)}},updateChartColors:function(e){this.getColors()||this.updateThemeColors(e)},updateColors:function(e){var t;this.updateThemeColors(e),this.isConfiguring||(t=this.getChart())&&t.refreshLegendStore()},updateStyle:function(){this.doUpdateStyles()},updateSubStyle:function(){this.doUpdateStyles()},updateThemeStyle:function(){this.doUpdateStyles()},doUpdateStyles:function(){var e,t,i,n,r=this.sprites,o=this.getItemInstancing(),a=r&&r.length;this.getConfig("showMarkers",!0);for(n=0;n<a;n++)t=r[n],e=this.getStyleByIndex(n),o&&t.getMarker("items").getTemplate().setAttributes(e),t.setAttributes(e),(i=t.isMarkerHolder&&t.getMarker("markers"))&&i.getTemplate().setAttributes(this.getMarkerStyleByIndex(n))},getStyleWithTheme:function(){var e=this.getThemeStyle(),t=Ext.clone(this.getStyle());return e&&e.style&&Ext.applyIf(t,e.style),t},getSubStyleWithTheme:function(){var e=this.getThemeStyle(),t=Ext.clone(this.getSubStyle());return e&&e.subStyle&&Ext.applyIf(t,e.subStyle),t},getStyleByIndex:function(e){var t,i,n,r,o=this.getThemeStyle(),a={};return t=this.getStyle(),i=o&&o.style||{},n=this.styleDataForIndex(this.getSubStyle(),e),r=this.styleDataForIndex(o&&o.subStyle,e),Ext.apply(a,i),Ext.apply(a,r),Ext.apply(a,t),Ext.apply(a,n),a},getMarkerStyleByIndex:function(e){var t,i,n,r,o,a,s,l,d=this.getThemeStyle(),u={};return t=this.getStyle(),i=d&&d.style||{},(n=this.styleDataForIndex(this.getSubStyle(),e)).hasOwnProperty("hidden")&&(n.hidden=n.hidden||!this.getConfig("showMarkers",!0)),r=this.styleDataForIndex(d&&d.subStyle,e),o=this.getMarker(),a=d&&d.marker||{},s=this.getMarkerSubStyle(),l=this.styleDataForIndex(d&&d.markerSubStyle,e),Ext.apply(u,i),Ext.apply(u,r),Ext.apply(u,a),Ext.apply(u,l),Ext.apply(u,t),Ext.apply(u,n),Ext.apply(u,o),Ext.apply(u,s),u},styleDataForIndex:function(e,t){var i,n,r={};if(e)for(n in e)i=e[n],Ext.isArray(i)?r[n]=i[t%i.length]:r[n]=i;return r},getItemForPoint:Ext.emptyFn,getItemByIndex:function(e,t){var i=this.getSprites(),n=i&&i[0];if(n)return void 0===t&&n.isMarkerHolder?t=this.getItemInstancing()?"items":"markers":t&&""!==t&&"sprites"!==t||(n=i[e]),n?{series:this,category:t,index:e,record:this.getStore().getData().items[e],field:this.getYField(),sprite:n}:void 0},onSpriteAnimationStart:function(e){this.fireEvent("animationstart",this,e)},onSpriteAnimationEnd:function(e){this.fireEvent("animationend",this,e)},resolveListenerScope:function(e){var t,i=Ext._namedScopes[e],n=this.getChart();return i?i.isThis?t=this:i.isController?t=n?n.resolveListenerScope(e,!1):this:i.isSelf&&((t=n?n.resolveListenerScope(e,!1):this)!==n||n.getInheritedConfig("defaultListenerScope")||(t=this)):t=n?n.resolveListenerScope(e,!1):e||this,t},provideLegendInfo:function(e){var t=this.getSubStyleWithTheme(),i=t.fillStyle;Ext.isArray(i)&&(i=i[0]),e.push({name:this.getTitle()||this.getYField()||this.getId(),mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||t.strokeStyle||"black",disabled:this.getHidden(),series:this.getId(),index:0})},clearSprites:function(){var e,t,i,n=this.sprites;for(t=0,i=n.length;t<i;t++)(e=n[t])&&e.isSprite&&e.destroy();this.sprites=[]},destroy:function(){var e=this._store,t=this.getConfig("tooltip",!0);e&&e.getAutoDestroy()&&Ext.destroy(e),this.setChart(null),this.clearListeners(),t&&Ext.destroy(t),this.callParent()}}),Ext.define("Ext.chart.interactions.Abstract",{xtype:"interaction",mixins:{observable:"Ext.mixin.Observable"},config:{gestures:{tap:"onGesture"},chart:null,enabled:!0},throttleGap:0,stopAnimationBeforeSync:!1,constructor:function(e){var t;t="id"in(e=e||{})?e.id:"id"in this.config?this.config.id:this.getId(),this.setId(t),this.mixins.observable.constructor.call(this,e)},updateChart:function(e,t){t!==e&&(t&&(t.unregister(this),this.removeChartListener(t)),e&&(e.register(this),this.addChartListener()))},updateEnabled:function(e){var t=this.getChart();t&&(e?this.addChartListener():this.removeChartListener(t))},onGesture:Ext.emptyFn,getItemForEvent:function(e){var t=this.getChart(),i=t.getEventXY(e);return t.getItemForPoint(i[0],i[1])},getItemsForEvent:function(e){var t=this.getChart(),i=t.getEventXY(e);return t.getItemsForPoint(i[0],i[1])},addChartListener:function(){var e,o=this,t=o.getChart(),i=o.getGestures();if(o.getEnabled())for(e in o.listeners=o.listeners||{},i)n(e,i[e]);function n(n,r){t.addElementListener(n,o.listeners[n]=function(e){var t,i=o.getLocks();if(o.getEnabled()&&(!(n in i)||i[n]===o))return!1===(t=(Ext.isFunction(r)?r:o[r]).apply(this,arguments))&&e&&e.stopPropagation&&e.stopPropagation(),t},o)}},removeChartListener:function(e){var t,i,n,r=this,o=r.getGestures();if(r.listeners)for(t in o)i=t,(n=r.listeners[i])&&(e.removeElementListener(i,n),delete r.listeners[i])},lockEvents:function(){for(var e=this.getLocks(),t=Array.prototype.slice.call(arguments),i=t.length;i--;)e[t[i]]=this},unlockEvents:function(){for(var e=this.getLocks(),t=Array.prototype.slice.call(arguments),i=t.length;i--;)delete e[t[i]]},getLocks:function(){var e=this.getChart();return e.lockedEvents||(e.lockedEvents={})},doSync:function(){var e=this.getChart();this.syncTimer&&(Ext.undefer(this.syncTimer),this.syncTimer=null),this.stopAnimationBeforeSync&&e.animationSuspendCount++,e.redraw(),this.stopAnimationBeforeSync&&e.animationSuspendCount--,this.syncThrottle=Date.now()+this.throttleGap},sync:function(){var e=this;if(e.throttleGap&&Ext.frameStartTime<e.syncThrottle){if(e.syncTimer)return;e.syncTimer=Ext.defer(function(){e.doSync()},e.throttleGap)}else e.doSync()},getItemId:function(){return this.getId()},isXType:function(e){return"interaction"===e},destroy:function(){this.setChart(null),delete this.listeners,this.callParent()}},function(){Ext.os.is.Android4&&(this.prototype.throttleGap=40)}),Ext.define("Ext.chart.MarkerHolder",{extend:"Ext.Mixin",requires:["Ext.chart.Markers"],mixinConfig:{id:"markerHolder",after:{constructor:"constructor",preRender:"preRender"},before:{destroy:"destroy"}},isMarkerHolder:!0,surfaceMatrix:null,inverseSurfaceMatrix:null,deprecated:{6:{methods:{getBoundMarker:{message:"Please use the 'getMarker' method instead.",fn:function(e){var t=this.boundMarkers[e];return t?[t]:t}}}}},constructor:function(){this.boundMarkers={},this.cleanRedraw=!1},bindMarker:function(e,t){var i=this.boundMarkers;t&&t.isMarkers&&(i[e]&&i[e]===t&&Ext.log.warn(this.getId()," (MarkerHolder): the Markers instance '",t.getId(),"' is already bound under the name '",e,"'."),this.releaseMarker(e),(i[e]=t).on("destroy",this.onMarkerDestroy,this))},onMarkerDestroy:function(e){this.releaseMarker(e)},releaseMarker:function(e){var t,i=this.boundMarkers;if(e&&e.isMarkers){for(t in i)if(i[t]===e){delete i[t];break}}else e=i[t=e],delete i[t];return e||null},getMarker:function(e){return this.boundMarkers[e]||null},preRender:function(e,t,i){var n,r,o,a=this,s=a.getId(),l=a.boundMarkers,d=a.getParent();if(o=a.surfaceMatrix?a.surfaceMatrix.set(1,0,0,1,0,0):a.surfaceMatrix=new Ext.draw.Matrix,a.cleanRedraw=!a.attr.dirty,!a.cleanRedraw)for(n in l)(r=l[n])&&r.clear(s);for(;d&&d.attr&&d.attr.matrix;)o.prependMatrix(d.attr.matrix),d=d.getParent();o.prependMatrix(d.matrix),a.surfaceMatrix=o,a.inverseSurfaceMatrix=o.inverse(a.inverseSurfaceMatrix)},putMarker:function(e,t,i,n,r){var o=this.boundMarkers[e];o&&o.putMarkerFor(this.getId(),t,i,n,r)},getMarkerBBox:function(e,t,i){var n=this.boundMarkers[e];if(n)return n.getMarkerBBoxFor(this.getId(),t,i)},destroy:function(){var e,t=this.boundMarkers;for(e in t)t[e].destroy()}}),Ext.define("Ext.chart.axis.sprite.Axis",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.axis",type:"axis",mixins:{markerHolder:"Ext.chart.MarkerHolder"},requires:["Ext.draw.sprite.Text"],inheritableStatics:{def:{processors:{grid:"bool",axisLine:"bool",minorTicks:"bool",minorTickSize:"number",majorTicks:"bool",majorTickSize:"number",length:"number",startGap:"number",endGap:"number",dataMin:"number",dataMax:"number",visibleMin:"number",visibleMax:"number",position:"enums(left,right,top,bottom,angular,radial,gauge)",minStepSize:"number",estStepSize:"number",titleOffset:"number",textPadding:"number",min:"number",max:"number",centerX:"number",centerY:"number",radius:"number",totalAngle:"number",baseRotation:"number",data:"default",enlargeEstStepSizeByText:"bool"},defaults:{grid:!1,axisLine:!0,minorTicks:!1,minorTickSize:3,majorTicks:!0,majorTickSize:5,length:0,startGap:0,endGap:0,visibleMin:0,visibleMax:1,dataMin:0,dataMax:1,position:"",minStepSize:0,estStepSize:20,min:0,max:1,centerX:0,centerY:0,radius:1,baseRotation:0,data:null,titleOffset:0,textPadding:0,scalingCenterY:0,scalingCenterX:0,strokeStyle:"black",enlargeEstStepSizeByText:!1},triggers:{minorTickSize:"bbox",majorTickSize:"bbox",position:"bbox,layout",axisLine:"bbox,layout",minorTicks:"layout",min:"layout",max:"layout",length:"layout",minStepSize:"layout",estStepSize:"layout",data:"layout",dataMin:"layout",dataMax:"layout",visibleMin:"layout",visibleMax:"layout",enlargeEstStepSizeByText:"layout"},updaters:{layout:"layoutUpdater"}}},config:{label:null,labelOffset:10,layout:null,segmenter:null,renderer:null,layoutContext:null,axis:null},thickness:0,stepSize:0,getBBox:function(){return null},defaultRenderer:function(e){return this.segmenter.renderer(e,this)},layoutUpdater:function(){var e=this.getAxis().getChart();if(!e.isInitializing){var t=this.attr,i=this.getLayout(),n=e.getInherited().rtl,r=t.dataMax-t.dataMin,o=t.dataMin+r*t.visibleMin,a=t.dataMin+r*t.visibleMax,s=a-o,l=t.position,d={attr:t,segmenter:this.getSegmenter(),renderer:this.defaultRenderer};"left"===l||"right"===l?(t.translationX=0,t.translationY=a*t.length/s,t.scalingX=1,t.scalingY=-t.length/s,t.scalingCenterY=0,t.scalingCenterX=0,this.applyTransformations(!0)):"top"!==l&&"bottom"!==l||(t.translationX=n?t.length+o*t.length/s+1:-o*t.length/s,t.translationY=0,t.scalingX=(n?-1:1)*t.length/s,t.scalingY=1,t.scalingCenterY=0,t.scalingCenterX=0,this.applyTransformations(!0)),i&&(i.calculateLayout(d),this.setLayoutContext(d))}},iterate:function(e,t){var i,n,r,o,a,s,l,d,u=Ext.Array.some,c=Math.abs;if(e.getLabel){for(e.min<e.from&&t.call(this,e.min,e.getLabel(e.min),-1,e),i=0;i<=e.steps;i++)t.call(this,e.get(i),e.getLabel(i),i,e);e.max>e.to&&t.call(this,e.max,e.getLabel(e.max),e.steps+1,e)}else{if(a=(o=this.getAxis()).floatingAxes,s=[],l=(e.to-e.from)/(e.steps+1),o.getFloating())for(r in a)s.push(a[r]);for(d=function(t){return!s.length||u(s,function(e){return c(e-t)>l})},e.min<e.from&&d(e.min)&&t.call(this,e.min,e.min,-1,e),i=0;i<=e.steps;i++)d(n=e.get(i))&&t.call(this,n,n,i,e);e.max>e.to&&d(e.max)&&t.call(this,e.max,e.max,e.steps+1,e)}},renderTicks:function(r,o,e,a){var n,t=this,s=t.attr,i=s.position,l=s.matrix,d=.5*s.lineWidth,u=l.getXX(),c=l.getDX(),h=l.getYY(),f=l.getDY(),g=e.majorTicks,p=s.majorTickSize,m=e.minorTicks,x=s.minorTickSize;if(g)switch(i){case"right":function y(n){return function(e,t,i){e=r.roundPixel(e*h+f)+d,o.moveTo(0,e),o.lineTo(n,e)}}t.iterate(g,y(p)),m&&t.iterate(m,y(x));break;case"left":function v(n){return function(e,t,i){e=r.roundPixel(e*h+f)+d,o.moveTo(a[2]-n,e),o.lineTo(a[2],e)}}t.iterate(g,v(p)),m&&t.iterate(m,v(x));break;case"bottom":function E(n){return function(e,t,i){e=r.roundPixel(e*u+c)-d,o.moveTo(e,0),o.lineTo(e,n)}}t.iterate(g,E(p)),m&&t.iterate(m,E(x));break;case"top":function b(n){return function(e,t,i){e=r.roundPixel(e*u+c)-d,o.moveTo(e,a[3]),o.lineTo(e,a[3]-n)}}t.iterate(g,b(p)),m&&t.iterate(m,b(x));break;case"angular":t.iterate(g,function(e,t,i){e=e/(s.max+1)*Math.PI*2+s.baseRotation,o.moveTo(s.centerX+s.length*Math.cos(e),s.centerY+s.length*Math.sin(e)),o.lineTo(s.centerX+(s.length+p)*Math.cos(e),s.centerY+(s.length+p)*Math.sin(e))});break;case"gauge":n=t.getGaugeAngles(),t.iterate(g,function(e,t,i){e=(e-s.min)/(s.max-s.min)*s.totalAngle-s.totalAngle+n.start,o.moveTo(s.centerX+s.length*Math.cos(e),s.centerY+s.length*Math.sin(e)),o.lineTo(s.centerX+(s.length+p)*Math.cos(e),s.centerY+(s.length+p)*Math.sin(e))})}},renderLabels:function(n,e,r,t){var i,o,a,s,l,d,u,c,h,f=this,g=f.attr,p=.5*g.lineWidth,m=g.position,x=g.matrix,y=g.textPadding,v=x.getXX(),E=x.getDX(),b=x.getYY(),C=x.getDY(),S=0,w=r.majorTicks,T=Math.max(g.majorTickSize,g.minorTickSize)+g.lineWidth,P=Ext.draw.Draw.isBBoxIntersect,k=f.getLabel(),I=f.getLabelOffset(),R=null,M=0,A=0,D=r.segmenter,F=f.getRenderer(),L=f.getAxis(),O=L.getTitle(),B=O&&""!==O.attr.text&&O.getBBox(),N=null;if(w&&k&&!k.attr.hidden){switch(i=k.attr.font,e.font!==i&&(e.font=i),k.setAttributes({translationX:0,translationY:0},!0),k.applyTransformations(),o=k.attr.inverseMatrix.elements.slice(0),m){case"left":switch(d=B?B.x+B.width:0,k.attr.textAlign){case"start":u=n.roundPixel(d+E)-p;break;case"end":u=n.roundPixel(t[2]-T+E)-p;break;default:u=n.roundPixel(d+(t[2]-d-T)/2+E)-p}k.setAttributes({translationX:u},!0);break;case"right":switch(d=B?t[2]-B.x:0,k.attr.textAlign){case"start":u=n.roundPixel(T+E)+p;break;case"end":u=n.roundPixel(t[2]-d+E)+p;break;default:u=n.roundPixel(T+(t[2]-T-d)/2+E)+p}k.setAttributes({translationX:u},!0);break;case"top":d=B?B.y+B.height:0,k.setAttributes({translationY:n.roundPixel(d+(t[3]-d-T)/2)-p},!0);break;case"bottom":d=B?t[3]-B.y:0,k.setAttributes({translationY:n.roundPixel(T+(t[3]-T-d)/2)+p},!0);break;case"radial":k.setAttributes({translationX:g.centerX},!0);break;case"angular":case"gauge":k.setAttributes({translationY:g.centerY},!0)}if("left"===m||"right"===m?f.iterate(w,function(e,t,i){void 0!==t&&(l=F?Ext.callback(F,null,[L,t,r,R],0,L):D.renderer(t,r,R),R=t,k.setAttributes({text:String(l),translationY:n.roundPixel(e*b+C)},!0),k.applyTransformations(),S=Math.max(S,k.getBBox().width+T),s=Ext.draw.Matrix.fly(k.attr.matrix.elements.slice(0)),a=s.prepend.apply(s,o).transformBBox(k.getBBox(!0)),N&&!P(a,N,y)||(n.renderSprite(k),M+=(N=a).height,A++))}):"top"===m||"bottom"===m?f.iterate(w,function(e,t,i){void 0!==t&&(l=F?Ext.callback(F,null,[L,t,r,R],0,L):D.renderer(t,r,R),R=t,k.setAttributes({text:String(l),translationX:n.roundPixel(e*v+E)},!0),k.applyTransformations(),S=Math.max(S,k.getBBox().height+T),s=Ext.draw.Matrix.fly(k.attr.matrix.elements.slice(0)),a=s.prepend.apply(s,o).transformBBox(k.getBBox(!0)),N&&!P(a,N,y)||(n.renderSprite(k),M+=(N=a).width,A++))}):"radial"===m?f.iterate(w,function(e,t,i){if(void 0!==t&&(l=F?Ext.callback(F,null,[L,t,r,R],0,L):D.renderer(t,r,R),R=t,void 0!==l)){if(k.setAttributes({text:String(l),translationX:g.centerX-n.roundPixel(e)/g.max*g.length*Math.cos(g.baseRotation+Math.PI/2),translationY:g.centerY-n.roundPixel(e)/g.max*g.length*Math.sin(g.baseRotation+Math.PI/2)},!0),k.applyTransformations(),a=k.attr.matrix.transformBBox(k.getBBox(!0)),N&&!P(a,N))return;n.renderSprite(k),M+=(N=a).width,A++}}):"angular"===m?(I+=g.majorTickSize+.5*g.lineWidth,f.iterate(w,function(e,t,i){if(void 0!==t&&(l=F?Ext.callback(F,null,[L,t,r,R],0,L):D.renderer(t,r,R),R=t,S=Math.max(S,Math.max(g.majorTickSize,g.minorTickSize)+("butt"!==g.lineCap?.5*g.lineWidth:0)),void 0!==l)){if(h=e/(g.max+1)*Math.PI*2+g.baseRotation,k.setAttributes({text:String(l),translationX:g.centerX+(g.length+I)*Math.cos(h),translationY:g.centerY+(g.length+I)*Math.sin(h)},!0),k.applyTransformations(),a=k.attr.matrix.transformBBox(k.getBBox(!0)),N&&!P(a,N))return;n.renderSprite(k),M+=(N=a).width,A++}})):"gauge"===m&&(c=f.getGaugeAngles(),I+=g.majorTickSize+.5*g.lineWidth,f.iterate(w,function(e,t,i){if(void 0!==t&&(l=F?Ext.callback(F,null,[L,t,r,R],0,L):D.renderer(t,r,R),R=t,void 0!==l)){if(h=(e-g.min)/(g.max-g.min)*g.totalAngle-g.totalAngle+c.start,k.setAttributes({text:String(l),translationX:g.centerX+(g.length+I)*Math.cos(h),translationY:g.centerY+(g.length+I)*Math.sin(h)},!0),k.applyTransformations(),a=k.attr.matrix.transformBBox(k.getBBox(!0)),N&&!P(a,N))return;n.renderSprite(k),M+=(N=a).width,A++}})),g.enlargeEstStepSizeByText&&A&&(M/=A,M+=T,M*=2,g.estStepSize<M&&(g.estStepSize=M)),1<Math.abs(f.thickness-S))return f.thickness=S,g.bbox.plain.dirty=!0,g.bbox.transform.dirty=!0,f.doThicknessChanged(),!1}},renderAxisLine:function(e,t,i,n){var r,o,a=this.attr,s=.5*a.lineWidth,l=a.position;if(a.axisLine&&a.length)switch(l){case"left":r=e.roundPixel(n[2])-s,t.moveTo(r,-a.endGap),t.lineTo(r,a.length+a.startGap+1);break;case"right":t.moveTo(s,-a.endGap),t.lineTo(s,a.length+a.startGap+1);break;case"bottom":t.moveTo(-a.startGap,s),t.lineTo(a.length+a.endGap,s);break;case"top":r=e.roundPixel(n[3])-s,t.moveTo(-a.startGap,r),t.lineTo(a.length+a.endGap,r);break;case"angular":t.moveTo(a.centerX+a.length,a.centerY),t.arc(a.centerX,a.centerY,a.length,0,2*Math.PI,!0);break;case"gauge":o=this.getGaugeAngles(),t.moveTo(a.centerX+Math.cos(o.start)*a.length,a.centerY+Math.sin(o.start)*a.length),t.arc(a.centerX,a.centerY,a.length,o.start,o.end,!0)}},getGaugeAngles:function(){var e,t=this.attr.totalAngle;return e=t<=Math.PI?.5*(Math.PI-t):.5*-(2*Math.PI-t),{start:e=2*Math.PI-e,end:e-t}},renderGridLines:function(e,t,i,n){var r,o,a,s=this,l=s.getAxis(),d=s.attr,u=d.matrix,c=d.startGap,h=d.endGap,f=u.getXX(),g=u.getYY(),p=u.getDX(),m=u.getDY(),x=d.position,y=l.getGridAlignment(),v=i.majorTicks;d.grid&&v&&("left"===x||"right"===x?(a=d.min*g+m+h+c,s.iterate(v,function(e,t,i){r=e*g+m+h,s.putMarker(y+"-"+(i%2?"odd":"even"),{y:r,height:a-r},o=i,!0),a=r}),o++,r=0,s.putMarker(y+"-"+(o%2?"odd":"even"),{y:r,height:a-r},o,!0)):"top"===x||"bottom"===x?(a=d.min*f+p+c,c&&s.putMarker(y+"-even",{x:0,width:a},-1,!0),s.iterate(v,function(e,t,i){r=e*f+p+c,s.putMarker(y+"-"+(i%2?"odd":"even"),{x:r,width:a-r},o=i,!0),a=r}),o++,r=d.length+d.startGap+d.endGap,s.putMarker(y+"-"+(o%2?"odd":"even"),{x:r,width:a-r},o,!0)):"radial"===x?s.iterate(v,function(e,t,i){e&&(r=e/d.max*d.length,s.putMarker(y+"-"+(i%2?"odd":"even"),{scalingX:r,scalingY:r},i,!0),a=r)}):"angular"===x&&s.iterate(v,function(e,t,i){d.length&&(r=e/(d.max+1)*Math.PI*2+d.baseRotation,s.putMarker(y+"-"+(i%2?"odd":"even"),{rotationRads:r,rotationCenterX:0,rotationCenterY:0,scalingX:d.length,scalingY:d.length},i,!0),a=r)}))},renderLimits:function(e){var t=this.attr,i=this.getAxis(),n=Ext.Array.from(i.getLimits());if(n.length&&t.dataMin!==t.dataMax){var r,o,a,s,l,d,u,c,h,f=i.getChart().getInnerPadding(),g=i.limits.surface.getRect(),p=t.matrix,m=t.position,x=Ext.Object.chain,y=i.limits.titles;if(y.attr.hidden=!1,y.instances=[],y.position=0,"left"===m||"right"===m){for(d=0,u=n.length;d<u;d++)if((s=x(n[d])).line||(s.line={}),l=(l=Ext.isString(s.value)?i.getCoordFor(s.value):s.value)*p.getYY()+p.getDY(),s.line.y=l+f.top,s.line.strokeStyle=s.line.strokeStyle||t.strokeStyle,this.putMarker("horizontal-limit-lines",s.line,d,!0),s.line.title){switch(y.add(s.line.title),r=y.getBBoxFor(y.position-1),o=s.line.title.position||("left"===m?"start":"end")){case"start":c=10;break;case"end":c=g[2]-10;break;case"middle":c=g[2]/2}y.setAttributesFor(y.position-1,{x:c,y:s.line.y-r.height/2,textAlign:o,fillStyle:s.line.title.fillStyle||s.line.strokeStyle})}}else if("top"===m||"bottom"===m){for(d=0,u=n.length;d<u;d++)if((s=x(n[d])).line||(s.line={}),l=(l=Ext.isString(s.value)?i.getCoordFor(s.value):s.value)*p.getXX()+p.getDX(),s.line.x=l+f.left,s.line.strokeStyle=s.line.strokeStyle||t.strokeStyle,this.putMarker("vertical-limit-lines",s.line,d,!0),s.line.title){switch(y.add(s.line.title),r=y.getBBoxFor(y.position-1),o=s.line.title.position||("top"===m?"end":"start")){case"start":h=g[3]-r.width/2-10;break;case"end":h=r.width/2+10;break;case"middle":h=g[3]/2}y.setAttributesFor(y.position-1,{x:s.line.x+r.height/2,y:h,fillStyle:s.line.title.fillStyle||s.line.strokeStyle,rotationRads:Math.PI/2})}}else if("radial"===m)for(d=0,u=n.length;d<u;d++)(s=x(n[d])).line||(s.line={}),(l=Ext.isString(s.value)?i.getCoordFor(s.value):s.value)>t.max||(l=l/t.max*t.length,s.line.cx=t.centerX,s.line.cy=t.centerY,s.line.scalingX=l,s.line.scalingY=l,s.line.strokeStyle=s.line.strokeStyle||t.strokeStyle,this.putMarker("circular-limit-lines",s.line,d,!0),s.line.title&&(y.add(s.line.title),r=y.getBBoxFor(y.position-1),y.setAttributesFor(y.position-1,{x:t.centerX,y:t.centerY-l-r.height/2,fillStyle:s.line.title.fillStyle||s.line.strokeStyle})));else if("angular"===m)for(d=0,u=n.length;d<u;d++)(s=x(n[d])).line||(s.line={}),l=(l=Ext.isString(s.value)?i.getCoordFor(s.value):s.value)/(t.max+1)*Math.PI*2+t.baseRotation,s.line.translationX=t.centerX,s.line.translationY=t.centerY,s.line.rotationRads=l,s.line.rotationCenterX=0,s.line.rotationCenterY=0,s.line.scalingX=t.length,s.line.scalingY=t.length,s.line.strokeStyle=s.line.strokeStyle||t.strokeStyle,this.putMarker("radial-limit-lines",s.line,d,!0),s.line.title&&(y.add(s.line.title),r=y.getBBoxFor(y.position-1),a=l>-.5*Math.PI&&l<.5*Math.PI||l>1.5*Math.PI&&l<2*Math.PI?1:-1,y.setAttributesFor(y.position-1,{x:t.centerX+.5*t.length*Math.cos(l)+a*r.height/2*Math.sin(l),y:t.centerY+.5*t.length*Math.sin(l)-a*r.height/2*Math.cos(l),rotationRads:1==a?l:l-Math.PI,fillStyle:s.line.title.fillStyle||s.line.strokeStyle}))}else i.limits&&(i.limits.titles.attr.hidden=!0)},doThicknessChanged:function(){var e=this.getAxis();e&&e.onThicknessChanged()},render:function(e,t,i){var n=this.getLayoutContext();if(n){if(!1===this.renderLabels(e,t,n,i))return!1;t.beginPath(),this.renderTicks(e,t,n,i),this.renderAxisLine(e,t,n,i),this.renderGridLines(e,t,n,i),this.renderLimits(i),t.stroke()}}}),Ext.define("Ext.chart.axis.segmenter.Segmenter",{config:{axis:null},constructor:function(e){this.initConfig(e)},renderer:function(e,t){return String(e)},from:function(e){return e},diff:Ext.emptyFn,align:Ext.emptyFn,add:Ext.emptyFn,preferredStep:Ext.emptyFn}),Ext.define("Ext.chart.axis.segmenter.Names",{extend:"Ext.chart.axis.segmenter.Segmenter",alias:"segmenter.names",renderer:function(e,t){return e},diff:function(e,t,i){return Math.floor(t-e)},align:function(e,t,i){return Math.floor(e)},add:function(e,t,i){return e+t},preferredStep:function(e,t,i,n){return{unit:1,step:1}}}),Ext.define("Ext.chart.axis.segmenter.Numeric",{extend:"Ext.chart.axis.segmenter.Segmenter",alias:"segmenter.numeric",isNumeric:!0,renderer:function(e,t){return e.toFixed(Math.max(0,t.majorTicks.unit.fixes))},diff:function(e,t,i){return Math.floor((t-e)/i.scale)},align:function(e,t,i){var n=i.scale*t;return Math.floor(e/n)*n},add:function(e,t,i){return e+t*i.scale},preferredStep:function(e,t){var i=Math.floor(Math.log(t)*Math.LOG10E),n=Math.pow(10,i);return(t/=n)<2?t=2:t<5?t=5:t<10&&(t=10,i++),{unit:{fixes:-i,scale:n},step:t}},leadingZeros:function(e){return-Math.floor(Ext.Number.log10(Math.abs(e)))},exactStep:function(e,t){var i=this.leadingZeros(t);return{unit:{fixes:i+(t%Math.pow(10,i)==0?0:1),scale:t<1?t:1},step:t<1?1:t}},adjustByMajorUnit:function(e,t,i){var n,r,o=i[0],a=i[1],s=e*t;0!==(n=o*(r=1<(r=Math.max(1/(o||1),1/(s||1)))?r:1)%(s*r)/r)&&(i[0]=o-n+(o<0?-s:0)),0!==(n=a*(r=1<(r=Math.max(1/(a||1),1/(s||1)))?r:1)%(s*r)/r)&&(i[1]=a-n+(0<a?s:0))}}),Ext.define("Ext.chart.axis.segmenter.Time",{extend:"Ext.chart.axis.segmenter.Segmenter",alias:"segmenter.time",config:{step:null},renderer:function(e,t){var i=Ext.Date;switch(t.majorTicks.unit){case"y":return i.format(e,"Y");case"mo":return i.format(e,"Y-m");case"d":return i.format(e,"Y-m-d")}return i.format(e,"Y-m-d\nH:i:s")},from:function(e){return new Date(e)},diff:function(e,t,i){return isFinite(e)&&(e=new Date(e)),isFinite(t)&&(t=new Date(t)),Ext.Date.diff(e,t,i)},updateStep:function(){var e=this.getAxis();e&&!this.isConfiguring&&e.performLayout()},align:function(e,t,i){return"d"===i&&7<=t?((e=Ext.Date.align(e,"d",t)).setDate(e.getDate()-e.getDay()+1),e):Ext.Date.align(e,i,t)},add:function(e,t,i){return Ext.Date.add(new Date(e),i,t)},timeBuckets:[{unit:Ext.Date.YEAR,steps:[1,2,5,10,20,50,100,200,500]},{unit:Ext.Date.MONTH,steps:[1,3,6]},{unit:Ext.Date.DAY,steps:[1,7,14]},{unit:Ext.Date.HOUR,steps:[1,6,12]},{unit:Ext.Date.MINUTE,steps:[1,5,15,30]},{unit:Ext.Date.SECOND,steps:[1,5,15,30]},{unit:Ext.Date.MILLI,steps:[1,2,5,10,20,50,100,200,500]}],getTimeBucket:function(e,t){var i,n,r,o,a,s,l,d=this.timeBuckets;for(s=0;s<d.length;s++)if(i=d[s].unit,0<(n=this.diff(e,t,i))){for(r=d[s].steps,l=0;l<r.length&&!(n<=(o=r[l]));l++);a={unit:i,step:o};break}return a=a||{unit:Ext.Date.MILLI,step:1}},preferredStep:function(e,t){var i=this.getStep();return i||this.getTimeBucket(new Date(+e),new Date(+e+Math.ceil(t)))}}),Ext.define("Ext.chart.axis.layout.Layout",{mixins:{observable:"Ext.mixin.Observable"},config:{axis:null},constructor:function(e){this.mixins.observable.constructor.call(this,e)},processData:function(e){var t,i,n=this.getAxis(),r=n.getDirection(),o=n.boundSeries;if(e)e["coordinate"+r]();else for(t=0,i=o.length;t<i;t++)o[t]["coordinate"+r]()},calculateMajorTicks:function(e){var t=e.attr,i=t.max-t.min,n=i/Math.max(1,t.length)*(t.visibleMax-t.visibleMin),r=t.min+i*t.visibleMin,o=t.min+i*t.visibleMax,a=t.estStepSize*n,s=this.snapEnds(e,t.min,t.max,a);s&&(this.trimByRange(e,s,r,o),e.majorTicks=s)},calculateMinorTicks:function(e){this.snapMinorEnds&&(e.minorTicks=this.snapMinorEnds(e))},calculateLayout:function(e){var t=e.attr;if(0===t.length)return null;t.majorTicks&&(this.calculateMajorTicks(e),t.minorTicks&&this.calculateMinorTicks(e))},snapEnds:Ext.emptyFn,trimByRange:function(e,t,i,n){var r=e.segmenter,o=t.unit,a=r.diff(t.from,i,o),s=r.diff(t.from,n,o),l=Math.max(0,Math.ceil(a/t.step)),d=Math.min(t.steps,Math.floor(s/t.step));if(d<t.steps&&(t.to=r.add(t.from,d*t.step,o)),t.max>n&&(t.max=t.to),t.from<i)for(t.from=r.add(t.from,l*t.step,o);t.from<i;)l++,t.from=r.add(t.from,t.step,o);t.min<i&&(t.min=t.from),t.steps=d-l}}),Ext.define("Ext.chart.axis.layout.Discrete",{extend:"Ext.chart.axis.layout.Layout",alias:"axisLayout.discrete",isDiscrete:!0,processData:function(){var e,t,i,n=this.getAxis(),r=n.boundSeries,o=n.getDirection();for(this.labels=[],this.labelMap={},e=0,t=r.length;e<t;e++)(i=r[e])["get"+o+"Axis"]()===n&&i["coordinate"+o]();n.getSprites()[0].setAttributes({data:this.labels}),this.fireEvent("datachange",this.labels)},calculateLayout:function(e){e.data=this.labels,this.callParent([e])},calculateMajorTicks:function(e){var t,i=e.attr,n=e.data,r=i.max-i.min,o=i.min+r*i.visibleMin,a=i.min+r*i.visibleMax;(t=this.snapEnds(e,Math.max(0,i.min),Math.min(i.max,n.length-1),1))&&(this.trimByRange(e,t,o,a),e.majorTicks=t)},snapEnds:function(e,t,i,n){var r,o=e.data;return n=Math.ceil(n),{min:t,max:i,from:t,to:(r=Math.floor((i-t)/n))*n+t,step:n,steps:r,unit:1,getLabel:function(e){return o[this.from+this.step*e]},get:function(e){return this.from+this.step*e}}},trimByRange:function(e,t,i,n){var r=t.unit,o=Math.ceil((i-t.from)/r)*r,a=Math.floor((n-t.from)/r)*r,s=Math.max(0,Math.ceil(o/t.step)),l=Math.min(t.steps,Math.floor(a/t.step));if(l<t.steps&&(t.to=l),t.max>n&&(t.max=t.to),t.from<i&&0<t.step)for(t.from=t.from+s*t.step*r;t.from<i;)s++,t.from+=t.step*r;t.min<i&&(t.min=t.from),t.steps=l-s},getCoordFor:function(e,t,i,n){return this.labels.push(e),this.labels.length-1}}),Ext.define("Ext.chart.axis.layout.CombineByIndex",{extend:"Ext.chart.axis.layout.Discrete",alias:"axisLayout.combineByIndex",getCoordFor:function(e,t,i,n){var r=this.labels,o=i;return r[i]!==e&&(o=r.push(e)-1),o}}),Ext.define("Ext.chart.axis.layout.CombineDuplicate",{extend:"Ext.chart.axis.layout.Discrete",alias:"axisLayout.combineDuplicate",getCoordFor:function(e,t,i,n){var r;return e in this.labelMap?this.labelMap[e]:(r=this.labelMap[e]=this.labels.length,this.labels.push(e),r)}}),Ext.define("Ext.chart.axis.layout.Continuous",{extend:"Ext.chart.axis.layout.Layout",alias:"axisLayout.continuous",isContinuous:!0,config:{adjustMinimumByMajorUnit:!1,adjustMaximumByMajorUnit:!1},getCoordFor:function(e,t,i,n){return+e},snapEnds:function(e,t,i,n){var r,o=e.segmenter,a=this.getAxis(),s=!a.spriteAnimationCount,l=a.getMajorTickSteps(),d=l&&o.exactStep?o.exactStep(t,(i-t)/l):o.preferredStep(t,n),u=d.unit,c=d.step,h=o.diff(t,i,u),f=(l||h)+1;return r=l||s&&+o.add(t,h,u)===i?t:o.align(t,c,u),{min:o.from(t),max:o.from(i),from:r,to:o.add(r,f,u),step:c,steps:f,unit:u,get:function(e){return o.add(this.from,this.step*e,this.unit)}}},snapMinorEnds:function(e){var t=e.majorTicks,i=this.getAxis().getMinorTickSteps(),n=e.segmenter,r=t.min,o=t.max,a=t.from,s=t.unit,l=t.step/i,d=l*s.scale,u=a-r,c=Math.floor(u/d),h=c+Math.floor((o-t.to)/d)+1,f=t.steps*i+h;return{min:r,max:o,from:r+u%d,to:n.add(a,f*l,s),step:l,steps:f,unit:s,get:function(e){return e%i+c+1!==0?n.add(this.from,this.step*e,s):null}}}}),Ext.define("Ext.chart.axis.Axis",{xtype:"axis",mixins:{observable:"Ext.mixin.Observable"},requires:["Ext.chart.axis.sprite.Axis","Ext.chart.axis.segmenter.*","Ext.chart.axis.layout.*","Ext.chart.Util"],isAxis:!0,config:{position:"bottom",fields:[],label:void 0,grid:!1,limits:null,renderer:null,chart:null,style:null,margin:0,titleMargin:4,background:null,minimum:NaN,maximum:NaN,reconcileRange:!1,minZoom:1,maxZoom:1e4,layout:"continuous",segmenter:"numeric",hidden:!1,majorTickSteps:0,minorTickSteps:0,adjustByMajorUnit:!0,title:null,expandRangeBy:0,length:0,center:null,radius:null,totalAngle:Math.PI,rotation:null,visibleRange:[0,1],needHighPrecision:!1,linkedTo:null,floating:null},titleOffset:0,spriteAnimationCount:0,boundSeries:[],sprites:null,surface:null,range:null,defaultRange:[0,1],rangePadding:.5,xValues:[],yValues:[],masterAxis:null,applyRotation:function(e){var t=2*Math.PI;return(e%t+Math.PI)%t-Math.PI},updateRotation:function(e){var t=this.getSprites(),i=this.getPosition();!this.getHidden()&&"angular"===i&&t[0]&&t[0].setAttributes({baseRotation:e})},applyTitle:function(e,t){var i;return Ext.isString(e)&&(e={text:e}),t?t.setAttributes(e):(t=Ext.create("sprite.text",e),(i=this.getSurface())&&i.add(t)),t},getAdjustByMajorUnit:function(){return!this.getHidden()&&this.callParent()},applyFloating:function(e,t){return null===e?e={value:null,alongAxis:null}:Ext.isNumber(e)&&(e={value:e,alongAxis:null}),Ext.isObject(e)?(t&&t.alongAxis&&delete this.getChart().getAxis(t.alongAxis).floatingAxes[this.getId()],e):t},constructor:function(e){var t;this.sprites=[],this.labels=[],this.floatingAxes={},"angular"===(e=e||{}).position&&(e.style=e.style||{},e.style.estStepSize=1),t="id"in e?e.id:"id"in this.config?this.config.id:this.getId(),this.setId(t),this.mixins.observable.constructor.apply(this,arguments)},getAlignment:function(){switch(this.getPosition()){case"left":case"right":return"vertical";case"top":case"bottom":return"horizontal";case"radial":return"radial";case"angular":return"angular"}},getGridAlignment:function(){switch(this.getPosition()){case"left":case"right":return"horizontal";case"top":case"bottom":return"vertical";case"radial":return"circular";case"angular":return"radial"}},getSurface:function(){var e,t=this.getChart();return t&&!this.surface&&(e=this.surface=t.getSurface(this.getId(),"axis"),(this.gridSurface=t.getSurface("main")).waitFor(e),this.getGrid(),this.createLimits()),this.surface},createLimits:function(){var e,t=this.getChart(),i=this.getSprites()[0],n=this.getGridAlignment();this.getLimits()&&n&&(n=n.replace("3d",""),this.limits=e={surface:t.getSurface("overlay"),lines:new Ext.chart.Markers,titles:new Ext.draw.sprite.Instancing},e.lines.setTemplate({xclass:"grid."+n}),e.lines.getTemplate().setAttributes({strokeStyle:"black"},!0),e.surface.add(e.lines),i.bindMarker(n+"-limit-lines",this.limits.lines),this.limitTitleTpl=new Ext.draw.sprite.Text,e.titles.setTemplate(this.limitTitleTpl),e.surface.add(e.titles))},applyGrid:function(e){return!0===e?{}:e},updateGrid:function(e){var t,i,n,r=this,o=r.getChart(),a=r.gridSurface;o?(t=r.getSprites()[0],i=r.getGridAlignment(),e&&((n=r.gridSpriteEven)||((n=r.gridSpriteEven=new Ext.chart.Markers).setTemplate({xclass:"grid."+i}),a.add(n),t.bindMarker(i+"-even",n)),Ext.isObject(e)&&(n.getTemplate().setAttributes(e),Ext.isObject(e.even)&&n.getTemplate().setAttributes(e.even)),(n=r.gridSpriteOdd)||((n=r.gridSpriteOdd=new Ext.chart.Markers).setTemplate({xclass:"grid."+i}),a.add(n),t.bindMarker(i+"-odd",n)),Ext.isObject(e)&&(n.getTemplate().setAttributes(e),Ext.isObject(e.odd)&&n.getTemplate().setAttributes(e.odd)))):r.on({chartattached:Ext.bind(r.updateGrid,r,[e]),single:!0})},updateMinorTickSteps:function(e){var t,i=this.getSprites(),n=i&&i[0];n&&(n.setAttributes({minorTicks:!!e}),t=this.getSurface(),!this.isConfiguring&&t&&t.renderFrame())},getCoordFor:function(e,t,i,n){return this.getLayout().getCoordFor(e,t,i,n)},applyPosition:function(e){return e.toLowerCase()},applyLength:function(e,t){return 0<e?e:t},applyLabel:function(e,t){return t=t||new Ext.draw.sprite.Text({}),e&&(this.limitTitleTpl&&this.limitTitleTpl.setAttributes(e),t.setAttributes(e)),t},applyLayout:function(e,t){return(e=Ext.factory(e,null,t,"axisLayout")).setAxis(this),e},applySegmenter:function(e,t){return(e=Ext.factory(e,null,t,"segmenter")).setAxis(this),e},updateMinimum:function(){this.range=null},updateMaximum:function(){this.range=null},hideLabels:function(){this.getSprites()[0].setDirty(!0),this.setLabel({hidden:!0})},showLabels:function(){this.getSprites()[0].setDirty(!0),this.setLabel({hidden:!1})},renderFrame:function(){this.getSurface().renderFrame()},updateChart:function(e,t){var i,n=this;t&&(t.unregister(n),t.un("serieschange",n.onSeriesChange,n),n.linkAxis(),n.fireEvent("chartdetached",t,n)),e&&(e.on("serieschange",n.onSeriesChange,n),n.surface=null,i=n.getSurface(),n.getLabel().setSurface(i),i.add(n.getSprites()),i.add(n.getTitle()),e.register(n),n.fireEvent("chartattached",e,n))},applyBackground:function(e){return Ext.ClassManager.getByAlias("sprite.rect").def.normalize(e)},processData:function(){this.getLayout().processData(),this.range=null},getDirection:function(){return this.getChart().getDirectionForAxis(this.getPosition())},isSide:function(){var e=this.getPosition();return"left"===e||"right"===e},applyFields:function(e){return Ext.Array.from(e)},applyVisibleRange:function(e,t){var i;if(this.getChart(),e[0]>e[1]&&(i=e[0],e[0]=e[1],e[0]=i),e[1]===e[0]&&(e[1]+=1/this.getMaxZoom()),e[1]>e[0]+1?(e[0]=0,e[1]=1):e[0]<0?(e[1]-=e[0],e[0]=0):1<e[1]&&(e[0]-=e[1]-1,e[1]=1),!t||e[0]!==t[0]||e[1]!==t[1])return e},updateVisibleRange:function(e){this.fireEvent("visiblerangechange",this,e)},onSeriesChange:function(e){var t,i,n,r,o,a=e.getSeries(),s=[];if(a)for(n="get"+this.getDirection()+"Axis",r=0,o=a.length;r<o;r++)this===a[r][n]()&&s.push(a[r]);this.boundSeries=s,t=this.getLinkedTo(),(i=!Ext.isEmpty(t)&&e.getAxis(t))?this.linkAxis(i):this.getLayout().processData()},linkAxis:function(e){var t=this;function i(e,t,i){i.getLayout()[e]("datachange","onDataChange",t),i[e]("rangechange","onMasterAxisRangeChange",t)}t.masterAxis&&(t.masterAxis.destroyed||i("un",t,t.masterAxis),t.masterAxis=null),e&&(e.type!==this.type&&Ext.Error.raise("Linked axes must be of the same type."),i("on",t,e),t.onDataChange(e.getLayout().labels),t.onMasterAxisRangeChange(e,e.range),t.setStyle(Ext.apply({},t.config.style,e.config.style)),t.setTitle(Ext.apply({},t.config.title,e.config.title)),t.setLabel(Ext.apply({},t.config.label,e.config.label)),t.masterAxis=e)},onDataChange:function(e){this.getLayout().labels=e},onMasterAxisRangeChange:function(e,t){this.range=t},applyRange:function(e){return e?[null===e[0]?this.dataRange[0]:e[0],null===e[1]?this.dataRange[1]:e[1]]:this.dataRange.slice(0)},setBoundSeriesRange:function(e){var t,i,n,r,o,a=this.boundSeries,s={};for(s["range"+this.getDirection()]=e,i=0,o=a.length;i<o;i++)if(!0!==(t=a[i]).getHidden())for(n=t.getSprites(),r=0;r<n.length;r++)n[r].setAttributes(s)},getRange:function(e){var t,i,n=this,r=e?null:n.range,o=n.oldRange;return r||(n.masterAxis?r=n.masterAxis.range:(t=n.getMinimum(),i=n.getMaximum(),r=Ext.isNumber(t)&&Ext.isNumber(i)?[t,i]:n.calculateRange(),n.range=r)),!r||o&&r[0]===o[0]&&r[1]===o[1]||(n.fireEvent("rangechange",n,r,o),n.oldRange=r),r},isSingleDataPoint:function(e){return e[0]+this.rangePadding===0&&e[1]-this.rangePadding==0},calculateRange:function(){var e,t,i,n,r,o,a,s=this,l=s.boundSeries,d=s.getLayout(),u=s.getSegmenter(),c=s.getMinimum(),h=s.getMaximum(),f=s.getVisibleRange(),g="get"+s.getDirection()+"Range",p=s.getExpandRangeBy(),m=[NaN,NaN];for(r=0,o=l.length;r<o;r++)!0!==(n=l[r]).getHidden()&&(a=n[g]())&&Ext.chart.Util.expandRange(m,a);return m=Ext.chart.Util.validateRange(m,s.defaultRange,s.rangePadding),p&&!s.isSingleDataPoint(m)&&(m[0]-=p,m[1]+=p),isFinite(c)&&(m[0]=c),isFinite(h)&&(m[1]=h),m[0]=Ext.Number.correctFloat(m[0]),m[1]=Ext.Number.correctFloat(m[1]),s.range=m,s.getReconcileRange()&&s.reconcileRange(),m[0]!==m[1]&&s.getAdjustByMajorUnit()&&u.adjustByMajorUnit&&!s.getMajorTickSteps()&&((t=Ext.Object.chain(s.getSprites()[0].attr)).min=m[0],t.max=m[1],t.visibleMin=f[0],t.visibleMax=f[1],e={attr:t,segmenter:u},d.calculateLayout(e),(i=e.majorTicks)?(u.adjustByMajorUnit(i.step,i.unit.scale,m),t.min=m[0],t.max=m[1],e.majorTicks=null,d.calculateLayout(e),i=e.majorTicks,u.adjustByMajorUnit(i.step,i.unit.scale,m)):s.hasClearRangePending||(s.hasClearRangePending=!0,s.getChart().on("layout","clearRange",s))),m},clearRange:function(){this.hasClearRangePending=null,this.range=null},reconcileRange:function(){var e,t,i,n,r=this.getChart().getAxes(),o=this.getDirection();if(r)for(e=0,t=r.length;e<t;e++)n=(i=r[e]).getRange(),i!==this&&i.getDirection()===o&&n&&i.getReconcileRange()&&(n[0]<this.range[0]&&(this.range[0]=n[0]),n[1]>this.range[1]&&(this.range[1]=n[1]))},applyStyle:function(e,t){var i=Ext.ClassManager.getByAlias("sprite."+this.seriesType);return i&&i.def&&(e=i.def.normalize(e)),t=Ext.apply(t||{},e)},themeOnlyIfConfigured:{grid:!0},updateTheme:function(e){var t,i,n,r,o,a,s=e.getAxis(),l=this.getPosition(),d=this.getInitialConfig(),u=this.defaultConfig,c=this.self.getConfigurator().configs,h=s.defaults,f=s[l],g=this.themeOnlyIfConfigured;for(t in s=Ext.merge({},h,f))if(i=s[t],a=c[t],null!=i&&a){if(o=d[t],n=Ext.isObject(i),r=o===u[t],n){if(r&&g[t])continue;i=Ext.merge({},i,o)}(r||n)&&this[a.names.set](i)}},updateCenter:function(e){var t=this.getSprites()[0],i=e[0],n=e[1];t&&t.setAttributes({centerX:i,centerY:n}),this.gridSpriteEven&&this.gridSpriteEven.getTemplate().setAttributes({translationX:i,translationY:n,rotationCenterX:i,rotationCenterY:n}),this.gridSpriteOdd&&this.gridSpriteOdd.getTemplate().setAttributes({translationX:i,translationY:n,rotationCenterX:i,rotationCenterY:n})},getSprites:function(){if(this.getChart()){var e,t,i,n=this,r=n.getRange(),o=n.getPosition(),a=n.getChart().getAnimation(),s=n.getLength(),l=n.superclass;if(!1===a&&(a={duration:0}),t=Ext.applyIf({position:o,axis:n,length:s,grid:n.getGrid(),hidden:n.getHidden(),titleOffset:n.titleOffset,layout:n.getLayout(),segmenter:n.getSegmenter(),totalAngle:n.getTotalAngle(),label:n.getLabel()},n.getStyle()),r&&(t.min=r[0],t.max=r[1]),n.sprites.length)(e=n.sprites[0]).setAnimation(a),e.setAttributes(t);else{for(;!l.xtype;)l=l.superclass;(i=(e=Ext.create("sprite."+l.xtype,t)).getAnimation()).setCustomDurations({baseRotation:0}),i.on("animationstart","onAnimationStart",n),i.on("animationend","onAnimationEnd",n),e.setLayout(n.getLayout()),e.setSegmenter(n.getSegmenter()),e.setLabel(n.getLabel()),n.sprites.push(e),n.updateTitleSprite()}return n.getRenderer()&&e.setRenderer(n.getRenderer()),n.sprites}},performLayout:function(){if(!this.isConfiguring){var e=this.getSprites(),t=this.getSurface(),i=this.getChart(),n=e&&e[0];i&&t&&n&&(n.callUpdater(null,"layout"),i.scheduleLayout())}},updateTitleSprite:function(){var e,t,i,n,r,o,a,s=this,l=s.getLength();if(s.sprites[0]&&Ext.isNumber(l)&&(t=this.sprites[0].thickness,e=s.getSurface(),i=s.getTitle(),n=s.getPosition(),r=s.getMargin(),o=s.getTitleMargin(),a=e.roundPixel(l/2),i))switch(n){case"top":i.setAttributes({x:a,y:r+o/2,textBaseline:"top",textAlign:"center"},!0),i.applyTransformations(),s.titleOffset=i.getBBox().height+o;break;case"bottom":i.setAttributes({x:a,y:t+o/2,textBaseline:"top",textAlign:"center"},!0),i.applyTransformations(),s.titleOffset=i.getBBox().height+o;break;case"left":i.setAttributes({x:r+o/2,y:a,textBaseline:"top",textAlign:"center",rotationCenterX:r+o/2,rotationCenterY:a,rotationRads:-Math.PI/2},!0),i.applyTransformations(),s.titleOffset=i.getBBox().width+o;break;case"right":i.setAttributes({x:t-r+o/2,y:a,textBaseline:"bottom",textAlign:"center",rotationCenterX:t+o/2,rotationCenterY:a,rotationRads:Math.PI/2},!0),i.applyTransformations(),s.titleOffset=i.getBBox().width+o}},onThicknessChanged:function(){this.getChart().onThicknessChanged()},getThickness:function(){return this.getHidden()?0:(this.sprites[0]&&this.sprites[0].thickness||1)+this.titleOffset+this.getMargin()},onAnimationStart:function(){this.spriteAnimationCount++,1===this.spriteAnimationCount&&this.fireEvent("animationstart",this)},onAnimationEnd:function(){this.spriteAnimationCount--,0===this.spriteAnimationCount&&this.fireEvent("animationend",this)},getItemId:function(){return this.getId()},getAncestorIds:function(){return[this.getChart().getId()]},isXType:function(e){return"axis"===e},resolveListenerScope:function(e){var t,i=Ext._namedScopes[e],n=this.getChart();return i?i.isThis?t=this:i.isController?t=n?n.resolveListenerScope(e,!1):this:i.isSelf&&((t=n?n.resolveListenerScope(e,!1):this)!==n||n.getInheritedConfig("defaultListenerScope")||(t=this)):t=n?n.resolveListenerScope(e,!1):e||this,t},destroy:function(){this.setChart(null),this.surface.destroy(),this.surface=null,this.callParent()}}),Ext.define("Ext.chart.legend.LegendBase",{extend:"Ext.view.View",config:{tpl:['<div class="',Ext.baseCSSPrefix,'legend-inner">','<div class="',Ext.baseCSSPrefix,'legend-container">','<tpl for=".">','<div class="',Ext.baseCSSPrefix,'legend-item">',"<span ",'class="',Ext.baseCSSPrefix,"legend-item-marker {[ values.disabled ? Ext.baseCSSPrefix + 'legend-item-inactive' : '' ]}\" ",'style="background:{mark};">',"</span>{name}","</div>","</tpl>","</div>","</div>"],nodeContainerSelector:"div."+Ext.baseCSSPrefix+"legend-inner",itemSelector:"div."+Ext.baseCSSPrefix+"legend-item",docked:"bottom"},setDocked:function(e){var t=this,i=t.ownerCt;switch(t.docked=t.dock=e,e){case"top":case"bottom":t.addCls(t.horizontalCls),t.removeCls(t.verticalCls);break;case"left":case"right":t.addCls(t.verticalCls),t.removeCls(t.horizontalCls)}i&&i.setDock(e)},setStore:function(e){this.bindStore(e)},clearViewEl:function(){this.callParent(arguments),Ext.removeNode(this.getNodeContainer())},onItemClick:function(e,t,i,n){this.callParent(arguments),this.toggleItem(i)}}),Ext.define("Ext.chart.legend.Legend",{extend:"Ext.chart.legend.LegendBase",alternateClassName:"Ext.chart.Legend",xtype:"legend",alias:"legend.dom",type:"dom",isLegend:!0,isDomLegend:!0,config:{rect:null,toggleable:!0},baseCls:Ext.baseCSSPrefix+"legend",horizontalCls:Ext.baseCSSPrefix+"legend-horizontal",verticalCls:Ext.baseCSSPrefix+"legend-vertical",toggleItem:function(e){var t,i,n,r,o,a=0,s=!0;if(this.getToggleable()&&(i=this.getStore())){for(n=i.getCount(),o=0;o<n;o++)(r=i.getAt(o)).get("disabled")&&a++;s=1<n-a,(r=i.getAt(e))&&((t=r.get("disabled"))||s)&&r.set("disabled",!t)}},onResize:function(e,t,i,n){var r=this.chart;this.isConfiguring||r&&r.scheduleLayout()}}),Ext.define("Ext.chart.legend.sprite.Item",{extend:"Ext.draw.sprite.Composite",alias:"sprite.legenditem",type:"legenditem",isLegendItem:!0,requires:["Ext.draw.sprite.Text","Ext.draw.sprite.Circle"],inheritableStatics:{def:{processors:{enabled:"limited01",markerLabelGap:"number"},animationProcessors:{enabled:null,markerLabelGap:null},defaults:{enabled:!0,markerLabelGap:5},triggers:{enabled:"enabled",markerLabelGap:"layout"},updaters:{layout:"layoutUpdater",enabled:"enabledUpdater"}}},config:{label:{$value:{type:"text"},lazy:!0},marker:{$value:{type:"circle"},lazy:!0},legend:null,store:null,record:null,series:null},applyLabel:function(e,t){var i;return e&&(e.isSprite&&"text"===e.type?i=e:t&&e.type===t.type?(t.setConfig(e),i=t,this.scheduleUpdater(this.attr,"layout")):i=new Ext.draw.sprite.Text(e)),i},defaultMarkerSize:10,updateLabel:function(e,t){this.removeSprite(t),e.setAttributes({textBaseline:"middle"}),this.addSprite(e),this.scheduleUpdater(this.attr,"layout")},applyMarker:function(e){var t;return e&&(t=e.isSprite?e:this.createMarker(e)),t=this.resetMarker(t,e)},createMarker:function(e){return delete e.animation,"image"===e.type&&(delete e.width,delete e.height),Ext.create("sprite."+e.type,e)},resetMarker:function(e,t){var i,n,r=t.size||this.defaultMarkerSize;return e.setTransform([1,0,0,1,0,0],!0),"image"===t.type?e.setAttributes({width:r,height:r}):(i=e.getBBox(),n=r/Math.max(i.width,i.height),e.setAttributes({scalingX:n,scalingY:n})),e},updateMarker:function(e,t){this.removeSprite(t),this.addSprite(e),this.scheduleUpdater(this.attr,"layout")},updateSurface:function(e,t){this.callParent([e,t]),e&&this.scheduleUpdater(this.attr,"layout")},enabledUpdater:function(e){var t=this.getMarker();t&&t.setAttributes({globalAlpha:e.enabled?1:.3})},layoutUpdater:function(){var e,t,i,n=this.attr,r=this.getLabel(),o=this.getMarker();t=o.getBBox(),e=r.getBBox(),i=Math.max(t.height,e.height),o.transform([1,0,0,1,-t.x,-t.y+(i-t.height)/2],!0),r.transform([1,0,0,1,-e.x+t.width+n.markerLabelGap,-e.y+(i-e.height)/2],!0),this.bboxUpdater(n)}}),Ext.define("Ext.chart.legend.sprite.Border",{extend:"Ext.draw.sprite.Rect",alias:"sprite.legendborder",type:"legendborder",isLegendBorder:!0}),Ext.define("Ext.draw.PathUtil",function(){var P=Math.abs,x=Math.pow,y=Math.cos,v=Math.acos,E=Math.sqrt,b=Math.PI;return{singleton:!0,requires:["Ext.draw.overrides.hittest.Path","Ext.draw.overrides.hittest.sprite.Path"],cubicRoots:function(e){var t=e[0],i=e[1],n=e[2],r=e[3];if(0===t)return this.quadraticRoots(i,n,r);var o,a,s,l,d=i/t,u=n/t,c=r/t,h=(3*u-x(d,2))/9,f=(9*d*u-27*c-2*x(d,3))/54,g=x(h,3)+x(f,2),p=[],m=Ext.Number.sign;for(0<=g?(o=m(f+E(g))*x(P(f+E(g)),1/3),a=m(f-E(g))*x(P(f-E(g)),1/3),p[0]=-d/3+(o+a),p[1]=-d/3-(o+a)/2,p[2]=p[1],0!==P(E(3)*(o-a)/2)&&(p[1]=-1,p[2]=-1)):(s=v(f/E(-x(h,3))),p[0]=2*E(-h)*y(s/3)-d/3,p[1]=2*E(-h)*y((s+2*b)/3)-d/3,p[2]=2*E(-h)*y((s+4*b)/3)-d/3),l=0;l<3;l++)(p[l]<0||1<p[l])&&(p[l]=-1);return p},quadraticRoots:function(e,t,i){var n,r,o,a;if(0===e)return this.linearRoot(t,i);if(0==(n=t*t-4*e*i))o=[-t/(2*e)];else{if(!(0<n))return[];o=[(-t-(r=E(n)))/(2*e),(-t+r)/(2*e)]}for(a=0;a<o.length;a++)(o[a]<0||1<o[a])&&(o[a]=-1);return o},linearRoot:function(e,t){var i=-t/e;return 0===e||i<0||1<i?[]:[i]},bezierCoeffs:function(e,t,i,n){var r=[];return r[0]=3*t-e-3*i+n,r[1]=3*e-6*t+3*i,r[2]=-3*e+3*t,r[3]=e,r},cubicLineIntersections:function(e,t,i,n,r,o,a,s,l,d,u,c){var h,f,g,p,m,x,y,v,E=[],b=[],C=d-c,S=u-l,w=l*(c-d)-d*(u-l),T=this.bezierCoeffs(e,t,i,n),P=this.bezierCoeffs(r,o,a,s);for(E[0]=C*T[0]+S*P[0],E[1]=C*T[1]+S*P[1],E[2]=C*T[2]+S*P[2],E[3]=C*T[3]+S*P[3]+w,f=this.cubicRoots(E),h=0;h<f.length;h++)(p=f[h])<0||1<p||(x=(m=p*p)*p,y=T[0]*x+T[1]*m+T[2]*p+T[3],v=P[0]*x+P[1]*m+P[2]*p+P[3],(g=u-l!=0?(y-l)/(u-l):(v-d)/(c-d))<0||1<g||b.push([y,v]));return b},splitCubic:function(e,t,i,n,r){var o=r*r,a=r-1,s=a*a,l=r*o*n-3*o*a*i+3*r*s*t-a*s*e;return[[e,r*t-a*e,o*i-2*r*a*t+s*e,l],[l,o*n-2*r*a*i+s*t,r*n-a*i,n]]},cubicDimension:function(e,t,i,n){var r,o,a,s=3*(3*(t-i)-e+n),l=6*(e-2*t+i),d=-3*(e-t),u=Math.min(e,n),c=Math.max(e,n);if(0==s){if(0==l)return[u,c];0<(r=-d/l)&&r<1&&(o=this.interpolateCubic(e,t,i,n,r),u=Math.min(u,o),c=Math.max(c,o))}else 0<=(a=l*l-4*s*d)&&(0<(r=((a=E(a))-l)/2/s)&&r<1&&(o=this.interpolateCubic(e,t,i,n,r),u=Math.min(u,o),c=Math.max(c,o)),0<a&&0<(r-=a/s)&&r<1&&(o=this.interpolateCubic(e,t,i,n,r),u=Math.min(u,o),c=Math.max(c,o)));return[u,c]},interpolateCubic:function(e,t,i,n,r){var o;return 0===r?e:1===r?n:r*r*r*(n+(o=(1-r)/r)*(3*i+o*(3*t+o*e)))},cubicsIntersections:function(e,t,i,n,r,o,a,s,l,d,u,c,h,f,g,p){var m,x,y,v,E=this,b=E.cubicDimension(e,t,i,n),C=E.cubicDimension(r,o,a,s),S=E.cubicDimension(l,d,u,c),w=E.cubicDimension(h,f,g,p),T=[];return b[0]>S[1]||b[1]<S[0]||C[0]>w[1]||C[1]<w[0]?[]:P(r-o)<1&&P(a-s)<1&&P(e-n)<1&&P(t-i)<1&&P(h-f)<1&&P(g-p)<1&&P(l-c)<1&&P(d-u)<1?[[.5*(e+n),.5*(r+o)]]:(m=E.splitCubic(e,t,i,n,.5),x=E.splitCubic(r,o,a,s,.5),y=E.splitCubic(l,d,u,c,.5),v=E.splitCubic(h,f,g,p,.5),T.push.apply(T,E.cubicsIntersections.apply(E,m[0].concat(x[0],y[0],v[0]))),T.push.apply(T,E.cubicsIntersections.apply(E,m[0].concat(x[0],y[1],v[1]))),T.push.apply(T,E.cubicsIntersections.apply(E,m[1].concat(x[1],y[0],v[0]))),T.push.apply(T,E.cubicsIntersections.apply(E,m[1].concat(x[1],y[1],v[1]))),T)},linesIntersection:function(e,t,i,n,r,o,a,s){var l,d,u=(i-e)*(s-o)-(n-t)*(a-r);return 0==u?null:(d=((i-e)*(t-o)-(n-t)*(e-r))/u,0<=(l=((a-r)*(t-o)-(e-r)*(s-o))/u)&&l<=1&&0<=d&&d<=1?[e+l*(i-e),t+l*(n-t)]:null)},pointOnLine:function(e,t,i,n,r,o){var a,s;return P(i-e)<P(n-t)&&(s=e,e=t,t=s,s=i,i=n,n=s,s=r,r=o,o=s),!((a=(r-e)/(i-e))<0||1<a)&&P(t+a*(n-t)-o)<4},pointOnCubic:function(e,t,i,n,r,o,a,s,l,d){var u,c,h,f,g,p=this.bezierCoeffs(e,t,i,n),m=this.bezierCoeffs(r,o,a,s);for(p[3]-=l,m[3]-=d,h=this.cubicRoots(p),f=this.cubicRoots(m),u=0;u<h.length;u++)for(g=h[u],c=0;c<f.length;c++)if(0<=g&&g<=1&&P(g-f[c])<.05)return!0;return!1}}}),Ext.define("Ext.draw.overrides.hittest.All",{requires:["Ext.draw.PathUtil","Ext.draw.overrides.hittest.sprite.Instancing","Ext.draw.overrides.hittest.Surface"]}),Ext.define("Ext.chart.legend.SpriteLegend",{alias:"legend.sprite",type:"sprite",isLegend:!0,isSpriteLegend:!0,mixins:["Ext.mixin.Observable"],requires:["Ext.chart.legend.sprite.Item","Ext.chart.legend.sprite.Border","Ext.draw.overrides.hittest.All","Ext.draw.Animator"],config:{docked:"bottom",store:null,chart:null,surface:null,size:{width:0,height:0},toggleable:!0,padding:10,label:{preciseMeasurement:!0},marker:{},border:{$value:{type:"legendborder"},lazy:!0},background:null,hidden:!1},sprites:null,spriteZIndexes:{background:0,border:1,item:2},dockedValues:{left:!0,right:!0,top:!0,bottom:!0},constructor:function(e){this.oldSize={width:0,height:0},this.getId(),this.mixins.observable.constructor.call(this,e)},applyStore:function(e){return e&&Ext.StoreManager.lookup(e)},updateStore:function(e,t){var i=this;t&&(t.un("datachanged",i.onDataChanged,i),t.un("update",i.onDataUpdate,i)),e&&(e.on("datachanged",i.onDataChanged,i),e.on("update",i.onDataUpdate,i),i.onDataChanged(e)),i.performLayout()},applyDocked:function(e){return e in this.dockedValues||Ext.raise("Invalid 'docked' config value."),e},updateDocked:function(e){this.isTop="top"===e,this.isConfiguring||this.layoutChart()},updateHidden:function(e){var t;this.getChart(),(t=this.getSurface())&&t.setHidden(e),this.isConfiguring||this.layoutChart()},layoutChart:function(){var e;this.isConfiguring||(e=this.getChart())&&e.scheduleLayout()},computeRect:function(e){var t,i,n,r,o;if(this.getHidden())return null;switch(t=[0,0,0,0],i=this.getDocked(),r=(n=this.getSize()).height,o=n.width,i){case"top":t[1]=e[1],t[2]=e[2],t[3]=r,e[1]+=r,e[3]-=r;break;case"bottom":e[3]-=r,t[1]=e[3],t[2]=e[2],t[3]=r;break;case"left":e[0]+=o,e[2]-=o,t[2]=o,t[3]=e[3];break;case"right":e[2]-=o,t[0]=e[2],t[2]=o,t[3]=e[3]}return t},applyBorder:function(e){var t;return e&&(t=e.isSprite?e:Ext.create("sprite."+e.type,e)),t&&(t.isLegendBorder=!0,t.setAttributes({zIndex:this.spriteZIndexes.border})),t},updateBorder:function(e,t){var i=this.getSurface();this.borderSprite=null,i&&(t&&i.remove(t),e&&(this.borderSprite=i.add(e)))},scheduleLayout:function(){this.scheduledLayoutId||(this.scheduledLayoutId=Ext.draw.Animator.schedule("performLayout",this))},cancelLayout:function(){Ext.draw.Animator.cancel(this.scheduledLayoutId),this.scheduledLayoutId=null},performLayout:function(){var e,t,i=this,n=i.getSize(),r=i.getPadding(),o=i.getSprites(),a=i.getSurface(),s=i.getBackground(),l=a.getRect(),d=i.getStore(),u=o&&o.length||0;if(!a||!l||!d)return!1;i.cancelLayout();var c,h,f,g,p,m,x,y,v,E,b,C,S,w,T=i.getDocked(),P=l[2],k=l[3],I=i.borderSprite,R=[];for(e=0;e<u;e++)C=(t=o[e]).getBBox(),R.push(C);switch(C&&(b=C.height),T){case"bottom":case"top":if(!P)return!1;f=0;do{for(f++,e=g=p=m=0;e<u;e++)(C=R[e]).width>p&&(p=C.width,p=Math.min(p,P-4*r)),(e+1)%f==0&&(m+=p,p=0,g++);e%f!=0&&(m+=p,g++),E=(y=m+(g-1)*r)+4*r}while(P<E);v=b*f+(f-1)*r;break;case"right":case"left":if(!k)return!1;f=2*u;do{for(f=(f>>1)+f%2,e=g=p=x=m=0;e<u;e++)C=R[e],g||(x+=C.height),C.width>p&&(p=C.width),(e+1)%f==0&&(m+=p,p=0,g++);e%f!=0&&(m+=p,g++),E=(y=m+(g-1)*r)+4*r,v=x+(f-1)*r}while(k<v)}for(c=(P-y)/2,h=(k-v)/2,e=p=w=S=0;e<u;e++)t=o[e],C=R[e],t.setAttributes({translationX:c+S,translationY:h+w}),C.width>p&&(p=C.width),(e+1)%f==0?(S+=p+r,p=w=0):w+=C.height+r;return I&&I.setAttributes({hidden:!u,x:c-r,y:h-r,width:y+2*r,height:v+2*r}),n.width=I.attr.width+2*r,n.height=I.attr.height+2*r,n.width!==i.oldSize.width||n.height!==i.oldSize.height?(Ext.apply(i.oldSize,n),i.getChart().scheduleLayout(),!1):(s&&i.resizeBackground(a,s),a.renderFrame(),!0)},getSprites:function(){return this.updateSprites(),this.sprites},createSprite:function(e,t){var i,n,r,o=t.data,a=this.getChart().get(o.series),s=a.getMarker(),l=null;return e&&((i=a.getMarkerStyleByIndex(o.index)).fillStyle=o.mark,i.hidden=!1,s&&s.type&&(i.type=s.type),Ext.apply(i,this.getMarker()),i.surface=e,n=this.getLabel(),r={type:"legenditem",zIndex:this.spriteZIndexes.item,text:o.name,enabled:!o.disabled,marker:i,label:n,series:o.series,record:t},l=e.add(r)),l},updateSprites:function(){var e,t,i,n,r,o,a,s,l=this,d=l.getChart(),u=l.getStore(),c=l.getSurface();if(d&&u&&c){for(l.sprites=o=l.sprites||[],r=(t=u.getData().items).length,n=0;n<r;n++)e=t[n],(i=o[n])?l.updateSprite(i,e):(i=l.createSprite(c,e),c.add(i),o.push(i));for(a=Ext.Array.splice(o,n,o.length),n=0,r=a.length;n<r;n++)(i=a[n]).destroy();(s=l.getBorder())&&(l.borderSprite=s),l.updateTheme(d.getTheme())}},updateSprite:function(e,t){var i,n=t.data,r=this.getChart().get(n.series);e&&(e.getLabel().setAttributes({text:n.name}),e.setAttributes({enabled:!n.disabled}),e.setConfig({series:n.series,record:t}),(i=r.getMarkerStyleByIndex(n.index)).fillStyle=n.mark,i.hidden=!1,Ext.apply(i,this.getMarker()),e.getMarker().setAttributes({fillStyle:i.fillStyle,strokeStyle:i.strokeStyle}),e.layoutUpdater(e.attr))},updateChart:function(e,t){t&&this.setSurface(null),e&&this.setSurface(e.getSurface("legend"))},updateSurface:function(e,t){t&&(t.el.un("click","onClick",this),t.removeAll(!0)),e&&(e.isLegendSurface=!0,e.el.on("click","onClick",this))},onClick:function(e){var t,i,n=this.getChart(),r=this.getSurface();n&&n.hasFirstLayout&&r&&(i=r.getEventXY(e),(t=r.hitTest(i))&&t.sprite&&this.toggleItem(t.sprite))},applyBackground:function(e,t){var i,n=this.getChart(),r=this.getSurface();return(i=n.refreshBackground(r,e,t))&&i.setAttributes({zIndex:this.spriteZIndexes.background}),i},resizeBackground:function(e,t){var i=t.attr.width,n=t.attr.height,r=e.getRect();!r||i===r[2]&&n===r[3]||t.setAttributes({width:r[2],height:r[3]})},themeableConfigs:{background:!0},updateTheme:function(e){var t,i,n,r,o,a,s,l,d,u,c,h=this.getSurface().getItems(),f=e.getLegend(),g=this.getLabel(),p=this.self.getConfigurator().configs,m=this.themeableConfigs,x=this.themeOnlyIfConfigured,y=this.getInitialConfig(),v=this.defaultConfig;for(u=0,c=h.length;u<c;u++)if((a=h[u]).isLegendItem){if(s=f.label){for(l in d=null,s)l in g||((d=d||{})[l]=s[l]);d&&a.getLabel().setAttributes(d)}}else if(a.isLegendBorder&&(s=f.border)){for(l in d={},s)l in a.config||(d[l]=s[l]);a.setAttributes(d)}for(l in t=f.background,i=p.background,f)if(l in m&&(t=f[l],i=p[l],null!=t&&i)){if(o=y[l],n=Ext.isObject(t),r=o===v[l],n){if(r&&x[l])continue;t=Ext.merge({},t,o)}(r||n)&&this[i.names.set](t)}},onDataChanged:function(e){this.updateSprites(),this.scheduleLayout()},onDataUpdate:function(e,t){for(var i,n,r=this.sprites,o=r.length,a=0;a<o;a++)if((i=r[a]).getRecord()===t){n=i;break}n&&(this.updateSprite(n,t),this.scheduleLayout())},toggleItem:function(e){var t,i,n,r,o,a=0,s=!0;if(this.getToggleable()&&e.isLegendItem&&(t=this.getStore())){for(n=t.getCount(),i=0;i<n;i++)(r=t.getAt(i)).get("disabled")&&a++;s=1<n-a,(r=e.getRecord())&&((o=r.get("disabled"))||s)&&(r.set("disabled",!o),e.setAttributes({enabled:o}))}},destroy:function(){this.destroying=!0,this.cancelLayout(),this.setChart(null),this.callParent()}}),Ext.define("Ext.chart.Caption",{mixins:["Ext.mixin.Observable","Ext.mixin.Bindable"],isCaption:!0,config:{weight:0,text:"",align:"center",alignTo:"series",padding:0,hidden:!1,docked:"top",style:{fontSize:"14px",fontWeight:"bold",fontFamily:"Verdana, Aria, sans-serif"},chart:null,sprite:{type:"text",preciseMeasurement:!0,zIndex:10},debug:!1,rect:null},surfaceName:"caption",constructor:function(e){var t;t="id"in e?e.id:"id"in this.config?this.config.id:this.getId(),this.setId(t),this.mixins.observable.constructor.call(this,e),this.initBindable()},updateChart:function(){this.isConfiguring||this.setSprite({type:"text"})},applySprite:function(e){var t=this.getChart(),i=this.surface=t.getSurface(this.surfaceName);return this.rectSprite=i.add({type:"rect",fillStyle:"yellow",strokeStyle:"red"}),e&&i.add(e)},updateSprite:function(e,t){t&&t.destroy()},updateText:function(e){this.getSprite().setAttributes({text:e})},updateStyle:function(e){this.getSprite().setAttributes(e)},updateDebug:function(e){var t=this.getSprite();e&&!this.rectSprite&&(this.rectSprite=this.surface.add({type:"rect",fillStyle:"yellow",strokeStyle:"red"})),t&&t.setAttributes({debug:e?{bbox:!0}:null}),this.rectSprite&&this.rectSprite.setAttributes({hidden:!e}),this.isConfiguring||this.surface.renderFrame()},updateRect:function(e){this.rectSprite&&this.rectSprite.setAttributes({x:e[0],y:e[1],width:e[2],height:e[3]})},updateDocked:function(){var e=this.getChart();e&&!this.isConfiguring&&e.scheduleLayout()},computeRect:function(e,t){if(this.getHidden())return null;var i=[0,0,e[2],0],n=this.getDocked(),r=this.getPadding(),o=this.getSprite().getBBox().height+2*r;switch(n){case"top":i[1]=t.top,i[3]=o,e[1]+=o,e[3]-=o,t.top+=o;break;case"bottom":e[3]-=o,t.bottom-=o,i[1]=t.bottom,i[3]=o}this.setRect(i)},alignRect:function(e){var t=this.surface.getRect(),i=this.getRect();i[0]=e[0]-t[0],i[2]=e[2],this.setRect(i.slice())},performLayout:function(){var e,t,i=this.getRect(),n=i[0],r=i[1],o=i[2],a=i[3],s=this.getSprite(),l=s.attr.translationX,d=s.attr.translationY,u=s.getBBox();switch(this.getAlign()){case"left":e=n-u.x;break;case"right":e=n+o-(u.x+u.width);break;case"center":e=n+(o-u.width)/2-u.x}t=r+(a-u.height)/2-u.y,s.setAttributes({translationX:l+e,translationY:d+t})},destroy:function(){this.rectSprite&&this.rectSprite.destroy(),this.getSprite().destroy(),this.callParent()}}),Ext.define("Ext.chart.legend.store.Item",{extend:"Ext.data.Model",fields:["id","name","mark","disabled","series","index"]}),Ext.define("Ext.chart.legend.store.Store",{extend:"Ext.data.Store",requires:["Ext.chart.legend.store.Item"],model:"Ext.chart.legend.store.Item",isLegendStore:!0,config:{autoDestroy:!0}}),Ext.define("Ext.chart.AbstractChart",{extend:"Ext.draw.Container",requires:["Ext.chart.theme.Default","Ext.chart.series.Series","Ext.chart.interactions.Abstract","Ext.chart.axis.Axis","Ext.chart.Util","Ext.data.StoreManager","Ext.chart.legend.Legend","Ext.chart.legend.SpriteLegend","Ext.chart.Caption","Ext.chart.legend.store.Store","Ext.data.Store"],isChart:!0,defaultBindProperty:"store",config:{store:"ext-empty-store",theme:"default",captions:null,style:null,animation:!Ext.isIE8,series:[],axes:[],legend:null,colors:null,insetPadding:{top:10,left:10,right:10,bottom:10},background:null,interactions:[],mainRect:null,resizeHandler:null,highlightItem:null,surfaceZIndexes:{background:0,main:1,grid:2,series:3,axis:4,chart:5,caption:6,overlay:7,legend:8}},legendStore:null,animationSuspendCount:0,chartLayoutSuspendCount:0,chartLayoutCount:0,scheduledLayoutId:null,axisThicknessSuspendCount:0,isThicknessChanged:!1,constructor:function(e){var t=this;t.itemListeners={},t.surfaceMap={},t.chartComponents={},t.isInitializing=!0,t.suspendChartLayout(),t.animationSuspendCount++,t.callParent(arguments),t.isInitializing=!1,t.getSurface("main"),t.getSurface("chart").setFlipRtlText(t.getInherited().rtl),t.getSurface("overlay").waitFor(t.getSurface("series")),t.animationSuspendCount--,t.resumeChartLayout()},applyAnimation:function(e,t){return Ext.chart.Util.applyAnimation(e,t)},updateAnimation:function(){if(!this.isConfiguring){var e,t,i=this.getSeries(),n=i.length;for(this.isSettingSeriesAnimation=!0,e=0;e<n;e++)(t=i[e]).isUserAnimation&&!this.animationSuspendCount||t.setAnimation(t.getAnimation());this.isSettingSeriesAnimation=!1}},getAnimation:function(){return this.animationSuspendCount?{duration:0}:this.callParent()},suspendAnimation:function(){this.animationSuspendCount++,1===this.animationSuspendCount&&this.updateAnimation()},resumeAnimation:function(){this.animationSuspendCount--,0===this.animationSuspendCount&&this.updateAnimation()},applyInsetPadding:function(e,t){return Ext.isObject(e)?t?Ext.apply(t,e):e:Ext.util.Format.parseBox(e)},suspendChartLayout:function(){this.chartLayoutSuspendCount++,1===this.chartLayoutSuspendCount&&(this.scheduledLayoutId?(this.layoutInSuspension=!0,this.cancelChartLayout()):this.layoutInSuspension=!1)},resumeChartLayout:function(){this.chartLayoutSuspendCount--,0===this.chartLayoutSuspendCount&&this.layoutInSuspension&&this.scheduleLayout()},cancelChartLayout:function(){this.scheduledLayoutId&&(Ext.draw.Animator.cancel(this.scheduledLayoutId),this.scheduledLayoutId=null,this.checkLayoutEnd())},scheduleLayout:function(){this.allowSchedule()&&!this.scheduledLayoutId&&(this.scheduledLayoutId=Ext.draw.Animator.schedule("doScheduleLayout",this))},allowSchedule:function(){return!0},doScheduleLayout:function(){this.scheduledLayoutId=null,this.chartLayoutSuspendCount?this.layoutInSuspension=!0:this.performLayout()},suspendThicknessChanged:function(){this.axisThicknessSuspendCount++},resumeThicknessChanged:function(){0<this.axisThicknessSuspendCount&&(this.axisThicknessSuspendCount--,0===this.axisThicknessSuspendCount&&this.isThicknessChanged&&this.onThicknessChanged())},onThicknessChanged:function(){0===this.axisThicknessSuspendCount?(this.isThicknessChanged=!1,this.performLayout()):this.isThicknessChanged=!0},applySprites:function(e){var t=this.getSurface("chart");return e=Ext.Array.from(e),t.removeAll(!0),t.add(e),e},initItems:function(){var e,t,i,n=this.items;if(n&&!n.isMixedCollection)for(this.items=[],e=0,t=(n=Ext.Array.from(n)).length;e<t;e++)(i=n[e]).type?Ext.raise("To add custom sprites to the chart use the 'sprites' config."):this.items.push(i);this.callParent()},applyBackground:function(e,t){var i=this.getSurface("background");return this.refreshBackground(i,e,t)},refreshBackground:function(e,t,i){var n,r,o;return t&&(i&&(n=i.attr.width,r=i.attr.height,o=i.type===(t.type||"rect")),t.isSprite?i=t:"image"===t.type&&Ext.isString(t.src)?o?i.setAttributes({src:t.src}):(e.remove(i,!0),i=e.add(t)):o?i.setAttributes({fillStyle:t}):(e.remove(i,!0),i=e.add({type:"rect",fillStyle:t,animation:{customDurations:{x:0,y:0,width:0,height:0}}}))),n&&r&&i.setAttributes({width:n,height:r}),i.setAnimation(this.getAnimation()),i},defaultResizeHandler:function(e){return this.scheduleLayout(),!1},applyMainRect:function(e,t){return t?(this.getSeries(),this.getAxes(),e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]?t:e):e},register:function(e){var t=this.chartComponents,i=e.getId();void 0===i&&Ext.raise("Chart component id is undefined. Please ensure the component has an id."),i in t&&Ext.raise('Registering duplicate chart component id "'+i+'"'),t[i]=e},unregister:function(e){delete this.chartComponents[e.getId()]},get:function(e){return this.chartComponents[e]},getAxis:function(e){return e instanceof Ext.chart.axis.Axis?e:Ext.isNumber(e)?this.getAxes()[e]:Ext.isString(e)?this.get(e):void 0},getSurface:function(e,t){var i,n=this.surfaceMap;return e=e||"main",t=t||e,i=this.callParent([e,t]),n[t]||(n[t]=[]),Ext.Array.indexOf(n[t],i)<0&&(n[i.type=t].push(i),i.on("destroy",this.forgetSurface,this)),i},forgetSurface:function(e){var t,i,n=this.surfaceMap;n&&!this.destroying&&0<=(i=(t=n[e.type])?Ext.Array.indexOf(t,e):-1)&&t.splice(i,1)},applyAxes:function(e,t){var i,n,r,o,a,s,l,d,u,c={left:"right",right:"left"},h=[];for(this.animationSuspendCount++,this.getStore(),t||((t=[]).map={}),a=t.map,h.map={},l=0,u=(e=Ext.Array.from(e,!0)).length;l<u;l++)(i=e[l])&&(i instanceof Ext.chart.axis.Axis?(n=a[i.getId()],i.setChart(this)):(r=(i=Ext.Object.chain(i)).linkedTo,o=i.id,Ext.isNumber(r)?i=Ext.merge({},e[r],i):Ext.isString(r)&&Ext.Array.each(e,function(e){if(e.id===i.linkedTo)return i=Ext.merge({},e,i),!1}),i.id=o,(i.chart=this).getInherited().rtl&&(i.position=c[i.position]||i.position),o=i.getId&&i.getId()||i.id,i=Ext.factory(i,null,n=a[o],"axis")),i&&(h.push(i),h.map[i.getId()]=i));for(l in this.axesChangeSeries={},a)if(!h.map[l]&&(n=a[l])&&!n.destroyed){for(d=0,u=n.boundSeries.length;d<u;d++)s=n.boundSeries[d],this.axesChangeSeries[s.getId()]=s;n.destroy()}return this.animationSuspendCount--,h},updateAxes:function(e){var t,i,n,r=this.axesChangeSeries;for(t in r)r[t].onAxesChange(this,!0);for(i=0,n=e.length;i<n;i++)e[i].onSeriesChange(this);this.isConfiguring||this.destroying||this.scheduleLayout()},circularCopyArray:function(e,t,i){var n,r=[],o=e&&e.length;if(o)for(n=0;n<i;n++)r.push(e[(t+n)%o]);return r},circularCopyObject:function(e,t,i){var n,r,o={};if(i)for(n in e)e.hasOwnProperty(n)&&(r=e[n],Ext.isArray(r)?o[n]=this.circularCopyArray(r,t,i):o[n]=r);return o},getColors:function(){var e=this.config.colors,t=this.getTheme();return Ext.isArray(e)&&0<e.length&&(e=this.applyColors(e)),e||t&&t.getColors()},applyColors:function(e){return e=Ext.Array.map(e,function(e){return Ext.isString(e)?e:e.toString()})},updateColors:function(e){var t,i,n,r,o=this.getTheme(),a=e||o&&o.getColors(),s=0,l=this.getSeries(),d=l&&l.length;if(a.length)for(t=0;t<d;t++)r=(i=l[t]).themeColorCount(),n=this.circularCopyArray(a,s,r),s+=r,i.updateChartColors(n);this.isConfiguring||this.refreshLegendStore()},applyTheme:function(e){return e&&e.isTheme?e:Ext.Factory.chartTheme(e)},updateGradients:function(e){Ext.isEmpty(e)||this.updateTheme(this.getTheme())},updateTheme:function(e,t){var i,n=this.getAxes(),r=this.getSeries(),o=this.getColors();if(r){for(this.updateChartTheme(e),i=0;i<n.length;i++)n[i].updateTheme(e);for(i=0;i<r.length;i++)r[i].setTheme(e);this.updateSpriteTheme(e),this.updateColors(o),this.redraw(),this.fireEvent("themechange",this,e,t)}},themeOnlyIfConfigured:{captions:!0},updateChartTheme:function(e){var t,i,n,r,o,a,s=e.getChart(),l=this.getInitialConfig(),d=this.defaultConfig,u=this.self.getConfigurator().configs,c=s.defaults,h=s[this.xtype],f=this.themeOnlyIfConfigured;for(t in s=Ext.merge({},c,h))if(i=s[t],a=u[t],null!=i&&a){if(o=l[t],n=Ext.isObject(i),r=o===d[t],n){if(r&&f[t])continue;i=Ext.merge({},i,o)}(r||n)&&this[a.names.set](i)}},updateSpriteTheme:function(e){var t,i,n,r,o,a,s,l,d;for(this.getSprites(),t=this.getSurface("chart").getItems(),i=e.getSprites(),l=0,d=t.length;l<d;l++)if(r=i[(n=t[l]).type]){for(o in a={},s="text"===n.type,r)o in n.config||s&&0===o.indexOf("font")&&n.config.font||(a[o]=r[o]);n.setAttributes(a)}},addSeries:function(e){var t=this.getSeries();t=t.concat(Ext.Array.from(e)),this.setSeries(t)},removeSeries:function(e){var t,i,n,r=this.getSeries(),o=[],a={};for(t=0,i=(e=Ext.Array.from(e)).length;t<i;t++)"string"!=typeof(n=e[t])&&(n=n.getId()),a[n]=!0;for(t=0,i=r.length;t<i;t++)a[r[t].getId()]||o.push(r[t]);this.setSeries(o)},applySeries:function(e,t){var i,n,r,o,a,s=[];for(this.animationSuspendCount++,this.getAxes(),i=t?t.map:(t=[]).map={},s.map={},r=0,o=(e=Ext.Array.from(e,!0)).length;r<o;r++)(a=e[r])&&(n=i[a.getId&&a.getId()||a.id],a instanceof Ext.chart.series.Series?(n&&n!==a&&n.destroy(),a.setChart(this)):Ext.isObject(a)&&(a=n?(n.setConfig(a),n):(Ext.isString(a)&&(a={type:a}),a.chart=this,Ext.create(a.xclass||"series."+a.type,a))),s.push(a),s.map[a.getId()]=a);for(r in i)s.map[i[r].id]||i[r].destroy();return this.animationSuspendCount--,s},updateSeries:function(e,t){var i=this;i.destroying||(i.animationSuspendCount++,i.fireEvent("serieschange",i,e,t),Ext.isEmpty(e)||i.updateTheme(i.getTheme()),i.refreshLegendStore(),i.isConfiguring||i.destroying||i.scheduleLayout(),i.animationSuspendCount--)},defaultLegendType:"sprite",applyLegend:function(e,t){var i,n=null;return!t||t.destroyed||t.destroying||(this.legendStoreListeners&&this.legendStoreListeners.destroy(),this.legendStore&&this.legendStore.destroy(),t.destroy()),e&&(n=Ext.isBoolean(e)?Ext.create("legend."+this.defaultLegendType,{docked:"bottom",chart:this}):(e.docked=e.docked||"bottom",e.chart=this,i="legend."+(e.type||this.defaultLegendType),Ext.create(i,e))),n},updateLegend:function(e){this.destroyLegendStore(),e&&(this.getItems(),e.setStore(this.refreshLegendStore())),this.isConfiguring||this.scheduleLayout()},captionApplier:function(e,t){var i;return!t||t.destroyed||t.destroying||t.destroy(),e&&(e.chart=this,i=new Ext.chart.Caption(e)),i},applyCaptions:function(e,t){var i,n,r,o,a={};for(r in e)!(i=e[r])||i.length||i.text&&i.text.length?"string"==typeof i&&(i={text:i},this.getInitialConfig().captions[r]=i):i=null,n=t&&t[r],(i=this.captionApplier(i,n))&&(o=!0,a[r]=i);return o&&a},updateCaptions:function(){this.isConfiguring||this.scheduleLayout()},getLegendStore:function(){var e=this.legendStore;return e||(e=this.legendStore=new Ext.chart.legend.store.Store({chart:this}),this.legendStoreListeners=e.on({scope:this,update:"onLegendStoreUpdate",destroyable:!0})),e},destroyLegendStore:function(){var e=this.legendStore;!e||e.destroyed||e.destroying||e.destroy(),this.legendStore=null},refreshLegendStore:function(){var e,t,i,n,r,o=this.getLegendStore();if(o){for(i=[],n=0,r=(t=this.getSeries()).length;n<r;n++)(e=t[n]).getShowInLegend()&&e.provideLegendInfo(i);o.setData(i)}return o},onLegendStoreUpdate:function(e,t){var i;t&&(i=this.getSeries().map[t.get("series")])&&(i.setHiddenByIndex(t.get("index"),t.get("disabled")),this.redraw())},applyInteractions:function(e,t){var i,n,r,o,a=[];for(e=Ext.Array.from(e,!0),t||((t=[]).map={}),i=t.map,a.map={},r=0,o=e.length;r<o;r++)(n=(n=e[r])&&Ext.factory(n,null,i[n.getId&&n.getId()||n.id],"interaction"))&&(n.setChart(this),a.push(n),a.map[n.getId()]=n);for(r in i)a.map[r]||i[r].destroy();return a},getInteraction:function(e){var t,i,n=this.getInteractions(),r=n&&n.length,o=null;if(r)for(i=0;i<r;++i)if((t=n[i]).type===e){o=t;break}return o},applyStore:function(e){return e&&Ext.StoreManager.lookup(e)},updateStore:function(e,t){t&&!t.destroyed&&(t.un({datachanged:"onDataChanged",update:"onDataChanged",scope:this,order:"after"}),t.autoDestroy&&t.destroy()),e&&e.on({datachanged:"onDataChanged",update:"onDataChanged",scope:this,order:"after"}),this.fireEvent("storechange",this,e,t),this.onDataChanged()},redraw:function(){this.fireEvent("redraw",this)},performLayout:function(){if(this.destroying||this.destroyed)return Ext.raise("Attempting to lay out a dead chart: "+this.getId()),!1;var e,t=this,i=t.getLegend(),n=t.getChartRect(!0),r=t.getBackground(),o=!0;return t.cancelChartLayout(),t.fireEvent("beforelayout",t),r&&(t.getSurface("background").setRect(n.slice()),r.setAttributes({width:n[2],height:n[3]})),i&&i.isSpriteLegend&&!i.isTop&&(e=i.computeRect(n)),t.layoutCaptions(n),i&&i.isSpriteLegend&&i.isTop&&(e=i.computeRect(n)),e&&(t.getSurface("legend").setRect(e),o=i.performLayout()),t.getSurface("chart").setRect(n),o&&(t.hasFirstLayout=!0),o},layoutCaptions:function(e){var t,i,n,r,o,a=this.getCaptions(),s={left:0,top:0,right:e[2],bottom:e[3]};if(a){for(i in n=[],a)n.push(a[i]);for(n.sort(function(e,t){return e.getWeight()-t.getWeight()}),r=0,o=n.length;r<o;r++)t=n[r],r||this.getSurface(t.surfaceName).setRect(e.slice()),t.computeRect(e,s);this.captionList=n}},checkLayoutEnd:function(){this.chartLayoutCount||this.scheduledLayoutId||this.onLayoutEnd()},onLayoutEnd:function(){this.fireEvent("layout",this)},getChartRect:function(e){var t;return e&&(this.chartRect=null),this.chartRect?this.chartRect:(t=this.bodyElement.getSize(),this.chartRect=[0,0,t.width,t.height])},getEventXY:function(e){return this.getSurface("series").getEventXY(e)},getItemForPoint:function(e,t){var i,n,r=this.getSeries(),o=this.getMainRect(),a=r.length,s=1/0,l=null;if(!(this.hasFirstLayout&&o&&0<=e&&e<=o[2]&&0<=t&&t<=o[3]))return null;for(i=a-1;0<=i;i--)if(n=r[i].getItemForPoint(e,t)){if(!n.distance){l=n;break}n.distance<s&&(s=n.distance,l=n)}return l},getItemsForPoint:function(e,t){for(var i,n=this.getSeries(),r=n.length,o=this.hasFirstLayout?r-1:-1,a=[];0<=o;o--)!(i=n[o].getItemForPoint(e,t))||"items"!==i.category&&"markers"!==i.category||a.push(i);return a},onDataChanged:function(){var e,t,i,n,r=this;r.isInitializing||(e=r.getMainRect(),t=r.getStore(),i=r.getSeries(),n=r.getAxes(),t&&n&&i&&(e?(r.processData(),r.redraw()):r.on({redraw:r.onDataChanged,scope:r,single:!0})))},recordCount:0,processData:function(){for(var e,t=this.getStore().getCount(),i=this.getSeries(),n=i.length,r=!1,o=0;o<n;o++)(e=i[o]).processData(),!r&&e.isStoreDependantColorCount&&(r=!0);r&&t>this.recordCount&&(this.updateColors(this.getColors()),this.recordCount=t),this.isConfiguring||this.refreshLegendStore()},bindStore:function(e){this.setStore(e)},applyHighlightItem:function(e,t){if(!(e===t||Ext.isObject(e)&&Ext.isObject(t)&&(e.sprite&&(e.sprite[0]||e.sprite))===(t.sprite&&(t.sprite[0]||t.sprite))&&e.index===t.index))return e},updateHighlightItem:function(e,t){var i,n;t&&(n=t.series.getHighlight())&&t.series.setAttributesForItem(t,{highlighted:!1}),e&&(i=e.series.getHighlight())&&e.series.setAttributesForItem(e,{highlighted:!0}),(n||i)&&this.fireEvent("itemhighlight",this,e,t)},destroyChart:function(){this.setInteractions(null),this.setAxes(null),this.setSeries(null),this.setLegend(null),this.setStore(null),this.cancelChartLayout()},getRefItems:function(e){var t,i,n=this.getSeries(),r=this.getAxes(),o=this.getInteractions(),a=this.getLegend(),s=[];for(t=0,i=n.length;t<i;t++)s.push(n[t]),n[t].getRefItems&&s.push.apply(s,n[t].getRefItems(e));for(t=0,i=r.length;t<i;t++)s.push(r[t]),r[t].getRefItems&&s.push.apply(s,r[t].getRefItems(e));for(t=0,i=o.length;t<i;t++)s.push(o[t]),o[t].getRefItems&&s.push.apply(s,o[t].getRefItems(e));return a&&s.push(a),s}}),Ext.define("Ext.chart.overrides.AbstractChart",{override:"Ext.chart.AbstractChart",updateLegend:function(e,t){this.callParent([e,t]),e&&e.isDomLegend&&this.addDocked(e)},performLayout:function(){return this.isVisible(!0)?this.callParent():(this.cancelChartLayout(),!1)},afterComponentLayout:function(e,t,i,n){this.callParent([e,t,i,n]),this.hasFirstLayout?this.scheduleRedraw():this.scheduleLayout()},allowSchedule:function(){return this.rendered},scheduleRedraw:function(){var e=this.scheduleRedrawTask;e||(this.scheduleRedrawTask=e=new Ext.util.DelayedTask(this.redraw,this)),e.delay(100)},doDestroy:function(){var e=this.scheduleRedrawTask;e&&e.cancel(),this.destroyChart(),this.callParent()}}),Ext.define("Ext.chart.grid.HorizontalGrid",{extend:"Ext.draw.sprite.Sprite",alias:"grid.horizontal",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number"},defaults:{x:0,y:0,width:1,height:1,strokeStyle:"#DDD"}}},render:function(e,t,i){var n=this.attr,r=e.roundPixel(n.y),o=.5*t.lineWidth;t.beginPath(),t.rect(i[0]-e.matrix.getDX(),r+o,+i[2],n.height),t.fill(),t.beginPath(),t.moveTo(i[0]-e.matrix.getDX(),r+o),t.lineTo(i[0]+i[2]-e.matrix.getDX(),r+o),t.stroke()}}),Ext.define("Ext.chart.grid.VerticalGrid",{extend:"Ext.draw.sprite.Sprite",alias:"grid.vertical",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number"},defaults:{x:0,y:0,width:1,height:1,strokeStyle:"#DDD"}}},render:function(e,t,i){var n=this.attr,r=e.roundPixel(n.x),o=.5*t.lineWidth;t.beginPath(),t.rect(r-o,i[1]-e.matrix.getDY(),n.width,i[3]),t.fill(),t.beginPath(),t.moveTo(r-o,i[1]-e.matrix.getDY()),t.lineTo(r-o,i[1]+i[3]-e.matrix.getDY()),t.stroke()}}),Ext.define("Ext.chart.CartesianChart",{extend:"Ext.chart.AbstractChart",alternateClassName:"Ext.chart.Chart",requires:["Ext.chart.grid.HorizontalGrid","Ext.chart.grid.VerticalGrid"],xtype:["cartesian","chart"],isCartesian:!0,config:{flipXY:!1,innerRect:[0,0,1,1],innerPadding:{top:0,left:0,right:0,bottom:0}},applyInnerPadding:function(e,t){return Ext.isObject(e)?t?Ext.apply(t,e):e:Ext.util.Format.parseBox(e)},getDirectionForAxis:function(e){var t=this.getFlipXY();return"left"===e||"right"===e?t?"X":"Y":t?"Y":"X"},performLayout:function(){var e=this;if(!1!==e.callParent()){e.chartLayoutCount++,e.suspendAnimation();var t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x=e.getSurface("chart").getRect(),y=x[0],v=x[1],E=x[2],b=x[3],C=e.captionList,S=e.getAxes(),w=e.getSeries(),T=e.getInsetPadding(),P=e.getInnerPadding(),k=Ext.apply({},T),I=e.getInherited().rtl,R=e.getFlipXY();if(!(E<=0||b<=0)){for(e.suspendThicknessChanged(),g=0;g<S.length;g++){switch(n=(t=S[g]).getSurface(),h=(c=t.getFloating())?c.value:null,r=t.getThickness(),t.getPosition()){case"top":n.setRect([y,v+k.top+1,E,r]);break;case"bottom":n.setRect([y,v+b-(k.bottom+r),E,r]);break;case"left":n.setRect([y+k.left,v,r,b]);break;case"right":n.setRect([y+E-(k.right+r),v,r,b])}null===h&&(k[t.getPosition()]+=r)}if(E-=k.left+k.right,b-=k.top+k.bottom,s=[y+k.left,v+k.top,E,b],k.left+=P.left,k.top+=P.top,k.right+=P.right,k.bottom+=P.bottom,l=E-P.left-P.right,d=b-P.top-P.bottom,e.setInnerRect([k.left,k.top,l,d]),!(l<=0||d<=0)){for(e.setMainRect(s),e.getSurface().setRect(s),g=0,p=e.surfaceMap.grid&&e.surfaceMap.grid.length;g<p;g++)(a=e.surfaceMap.grid[g]).setRect(s),a.matrix.set(1,0,0,1,P.left,P.top),a.matrix.inverse(a.inverseMatrix);for(g=0;g<S.length;g++){switch((t=S[g]).getRange(!0),u=(f=(n=t.getSurface()).matrix).elements,t.getPosition()){case"top":case"bottom":u[4]=k.left,t.setLength(l);break;case"left":case"right":u[5]=k.top,t.setLength(d)}t.updateTitleSprite(),f.inverse(n.inverseMatrix)}for(g=0,p=w.length;g<p;g++)(o=(i=w[g]).getSurface()).setRect(s),R?I?o.matrix.set(0,-1,-1,0,P.left+l,P.top+d):o.matrix.set(0,-1,1,0,P.left,P.top+d):o.matrix.set(1,0,0,-1,P.left,P.top+d),o.matrix.inverse(o.inverseMatrix),i.getOverlaySurface().setRect(s);if(C)for(g=0,p=C.length;g<p;g++)"series"===(m=C[g]).getAlignTo()&&m.alignRect(s),m.performLayout();e.afterChartLayout(),e.redraw(),e.resumeAnimation(),e.resumeThicknessChanged(),e.chartLayoutCount--,e.checkLayoutEnd()}}}},afterChartLayout:Ext.emptyFn,refloatAxes:function(){var e,t,i,n,r,o,a,s,l,d=this.getAxes(),u=d&&d.length||0,c=this.getChartRect(),h=this.getInsetPadding(),f=this.getInnerPadding(),g=c[2]-h.left-h.right,p=c[3]-h.top-h.bottom;for(l=0;l<u;l++)if(null!==(r=(n=(e=d[l]).getFloating())?n.value:null)){if(i=(t=e.getSurface()).getRect()){switch(i=i.slice(),(o=this.getAxis(n.alongAxis))?(s="horizontal"===o.getAlignment(),Ext.isString(r)&&(r=o.getCoordFor(r)),o.floatingAxes[e.getId()]=r,a=o.getSprites()[0].attr.matrix,s?(r=r*a.getXX()+a.getDX(),e.floatingAtCoord=r+f.left+f.right):(r=r*a.getYY()+a.getDY(),e.floatingAtCoord=r+f.top+f.bottom)):(s="horizontal"===e.getAlignment(),e.floatingAtCoord=s?r+f.top+f.bottom:r+f.left+f.right,r=t.roundPixel(.01*r*(s?p:g))),e.getPosition()){case"top":i[1]=h.top+f.top+r-i[3]+1;break;case"bottom":i[1]=h.top+f.top+(o?r:p-r);break;case"left":i[0]=h.left+f.left+r-i[2];break;case"right":i[0]=h.left+f.left+(o?r:g-r)-1}t.setRect(i)}}else e.floatingAtCoord=null},redraw:function(){var e,t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E=this.getSeries(),b=this.getAxes(),C=this.getMainRect(),S=this.getInnerPadding(),w=this.getFlipXY();if(C){for(e=C[2]-S.left-S.right,t=C[3]-S.top-S.bottom,s=0;s<E.length;s++)for(n=(c=(x=E[s]).getXAxis())?(g=c.getVisibleRange(),[(n=c.getRange())[0]+(n[1]-n[0])*g[0],n[0]+(n[1]-n[0])*g[1]]):x.getXRange(),r=(h=x.getYAxis())?(g=h.getVisibleRange(),[(r=h.getRange())[0]+(r[1]-r[0])*g[0],r[0]+(r[1]-r[0])*g[1]]):x.getYRange(),a={visibleMinX:n[0],visibleMaxX:n[1],visibleMinY:r[0],visibleMaxY:r[1],innerWidth:e,innerHeight:t,flipXY:w},l=0,d=(i=x.getSprites()).length;l<d;l++)(p=(y=i[l]).attr.zIndex)<1e3&&(p+=100*(s+1)+1e3,y.attr.zIndex=p,(v=y.getMarker("items"))&&((m=v.attr.zIndex)===Number.MAX_VALUE?v.attr.zIndex=p:m<1e3&&(v.attr.zIndex=p+m))),y.setAttributes(a,!0);for(s=0;s<b.length;s++)for(o=(u=b[s]).isSide(),i=u.getSprites(),f=u.getRange(),g=u.getVisibleRange(),a={dataMin:f[0],dataMax:f[1],visibleMin:g[0],visibleMax:g[1]},o?(a.length=t,a.startGap=S.bottom,a.endGap=S.top):(a.length=e,a.startGap=S.left,a.endGap=S.right),l=0,d=i.length;l<d;l++)i[l].setAttributes(a,!0);this.renderFrame(),this.callParent()}},renderFrame:function(){this.refloatAxes(),this.callParent()}}),Ext.define("Ext.chart.grid.CircularGrid",{extend:"Ext.draw.sprite.Circle",alias:"grid.circular",inheritableStatics:{def:{defaults:{r:1,strokeStyle:"#DDD"}}}}),Ext.define("Ext.chart.grid.RadialGrid",{extend:"Ext.draw.sprite.Path",alias:"grid.radial",inheritableStatics:{def:{processors:{startRadius:"number",endRadius:"number"},defaults:{startRadius:0,endRadius:1,scalingCenterX:0,scalingCenterY:0,strokeStyle:"#DDD"},triggers:{startRadius:"path,bbox",endRadius:"path,bbox"}}},render:function(){this.callParent(arguments)},updatePath:function(e,t){var i=t.startRadius,n=t.endRadius;e.moveTo(i,0),e.lineTo(n,0)}}),Ext.define("Ext.chart.PolarChart",{extend:"Ext.chart.AbstractChart",requires:["Ext.chart.grid.CircularGrid","Ext.chart.grid.RadialGrid"],xtype:"polar",isPolar:!0,config:{center:[0,0],radius:0,innerPadding:0},getDirectionForAxis:function(e){return"radial"===e?"Y":"X"},updateCenter:function(e){var t,i,n=this.getAxes(),r=this.getSeries();for(t=0,i=n.length;t<i;t++)n[t].setCenter(e);for(t=0,i=r.length;t<i;t++)r[t].setCenter(e)},applyInnerPadding:function(e,t){return Ext.isNumber(e)?e:t},updateInnerPadding:function(){this.isConfiguring||this.performLayout()},doSetSurfaceRect:function(e,t){var i=this.getMainRect();e.setRect(t),e.matrix.set(1,0,0,1,i[0]-t[0],i[1]-t[1]),e.inverseMatrix.set(1,0,0,1,t[0]-i[0],t[1]-i[1])},applyAxes:function(e,t){var i,n,r,o=Ext.Array.from(this.config.series)[0];if(o&&"radar"===o.type&&e&&e.length){for(i=0,n=e.length;i<n;i++)if("angular"===e[i].position){r=!0;break}r||e.push({type:"category",position:"angular",fields:o.xField||o.angleField,style:{estStepSize:1},grid:!0})}return this.callParent([e,t])},performLayout:function(){var e=this,t=!0;try{if(e.chartLayoutCount++,e.suspendAnimation(),!1===this.callParent())return void(t=!1);e.suspendThicknessChanged();var i,n,r,o,a,s,l,d,u,c,h,f,g=e.getSurface("chart").getRect(),p=e.getInsetPadding(),m=e.getInnerPadding(),x=Ext.apply({},p),y=Math.max(1,g[2]-g[0]-p.left-p.right),v=Math.max(1,g[3]-g[1]-p.top-p.bottom),E=[g[0]+p.left,g[1]+p.top,y+g[0],v+g[1]],b=e.getSeries(),C=y-2*m,S=v-2*m,w=[.5*(g[0]+C)+m,.5*(g[1]+S)+m],T=.5*Math.min(C,S),P=e.getAxes(),k=[],I=[],R=T-m,M=e.surfaceMap.grid,A=e.captionList;if(e.setMainRect(E),e.doSetSurfaceRect(e.getSurface(),E),M)for(i=0,n=M.length;i<n;i++)e.doSetSurfaceRect(M[i],g);for(i=0,n=P.length;i<n;i++)switch((u=P[i]).getPosition()){case"angular":k.push(u);break;case"radial":I.push(u)}for(i=0,n=k.length;i<n;i++){for(l in(o=(u=k[i]).getFloating())&&o.value,e.doSetSurfaceRect(u.getSurface(),g),c=u.getThickness(),x)x[l]+=c;for(l in y=g[2]-x.left-x.right,v=g[3]-x.top-x.bottom,r=.5*Math.min(y,v),0===i&&(R=r-m),u.setMinimum(0),u.setLength(r),u.getSprites(),h=.5*u.sprites[0].attr.lineWidth,x)x[l]+=h}for(i=0,n=I.length;i<n;i++)u=I[i],e.doSetSurfaceRect(u.getSurface(),g),u.setMinimum(0),u.setLength(R),u.getSprites();for(i=0,n=b.length;i<n;i++)"gauge"!==(d=b[i]).type||a?d.setRadius(R):a=d,e.doSetSurfaceRect(d.getSurface(),E);if(e.doSetSurfaceRect(e.getSurface("overlay"),g),a?(a.setRect(E),s=a.getRadius()-m,e.setRadius(s),e.setCenter(a.getCenter()),a.setRadius(s),P.length&&"gauge"===P[0].getPosition()&&(u=P[0],e.doSetSurfaceRect(u.getSurface(),g),u.setTotalAngle(a.getTotalAngle()),u.setLength(s))):(e.setRadius(T),e.setCenter(w)),A)for(i=0,n=A.length;i<n;i++)"series"===(f=A[i]).getAlignTo()&&f.alignRect(E),f.performLayout();e.redraw()}finally{e.resumeAnimation(),t&&e.resumeThicknessChanged(),e.chartLayoutCount--,e.checkLayoutEnd()}},refloatAxes:function(){var e,t,i,n,r,o,a,s=this.getAxes(),l=this.getMainRect();if(l)for(a=.5*Math.min(l[2],l[3]),n=0,r=s.length;n<r;n++)null!==(t=(e=(o=s[n]).getFloating())?e.value:null)&&(i=this.getAxis(e.alongAxis),"angular"===o.getPosition()?(t=i?i.getLength()*t/i.getRange()[1]:.01*t*a,o.sprites[0].setAttributes({length:t},!0)):(t=i?(Ext.isString(t)&&(t=i.getCoordFor(t)),t/(i.getRange()[1]+1)*Math.PI*2-1.5*Math.PI+o.getRotation()):Ext.draw.Draw.rad(t),o.sprites[0].setAttributes({baseRotation:t},!0)))},redraw:function(){var e,t,i=this.getAxes(),n=this.getSeries();for(e=0,t=i.length;e<t;e++)i[e].getSprites();for(e=0,t=n.length;e<t;e++)n[e].getSprites();this.renderFrame(),this.callParent()},renderFrame:function(){this.refloatAxes(),this.callParent()}}),Ext.define("Ext.chart.SpaceFillingChart",{extend:"Ext.chart.AbstractChart",xtype:"spacefilling",config:{},performLayout:function(){var e=this;try{if(e.chartLayoutCount++,e.suspendAnimation(),!1===e.callParent())return;var t,i,n,r=e.getSurface("chart").getRect(),o=e.getInsetPadding(),a=r[2]-o.left-o.right,s=r[3]-o.top-o.bottom,l=[o.left,o.top,a,s],d=e.getSeries();for(e.getSurface().setRect(l),e.setMainRect(l),i=0,n=d.length;i<n;i++)(t=d[i]).getSurface().setRect(l),t.setRect&&t.setRect(l),t.getOverlaySurface().setRect(r);e.redraw()}finally{e.resumeAnimation(),e.chartLayoutCount--,e.checkLayoutEnd()}},redraw:function(){var e,t,i=this.getSeries();for(e=0,t=i.length;e<t;e++)i[e].getSprites();this.renderFrame(),this.callParent()}}),Ext.define("Ext.chart.axis.sprite.Axis3D",{extend:"Ext.chart.axis.sprite.Axis",alias:"sprite.axis3d",type:"axis3d",inheritableStatics:{def:{processors:{depth:"number"},defaults:{depth:0},triggers:{depth:"layout"}}},config:{animation:{customDurations:{depth:0}}},layoutUpdater:function(){var e=this.getAxis().getChart();if(!e.isInitializing){var t=this.attr,i=this.getLayout(),n=i.isDiscrete?0:t.depth,r=e.getInherited().rtl,o=t.dataMin+(t.dataMax-t.dataMin)*t.visibleMin,a=t.dataMin+(t.dataMax-t.dataMin)*t.visibleMax,s={attr:t,segmenter:this.getSegmenter(),renderer:this.defaultRenderer};"left"===t.position||"right"===t.position?(t.translationX=0,t.translationY=a*(t.length-n)/(a-o)+n,t.scalingX=1,t.scalingY=(-t.length+n)/(a-o),t.scalingCenterY=0,t.scalingCenterX=0,this.applyTransformations(!0)):"top"!==t.position&&"bottom"!==t.position||(t.translationX=r?t.length+o*t.length/(a-o)+1:-o*t.length/(a-o),t.translationY=0,t.scalingX=(r?-1:1)*(t.length-n)/(a-o),t.scalingY=1,t.scalingCenterY=0,t.scalingCenterX=0,this.applyTransformations(!0)),i&&(i.calculateLayout(s),this.setLayoutContext(s))}},renderAxisLine:function(e,t,i,n){var r,o,a=this.attr,s=.5*a.lineWidth,l=this.getLayout().isDiscrete?0:a.depth,d=a.position;if(a.axisLine&&a.length)switch(d){case"left":r=e.roundPixel(n[2])-s,t.moveTo(r,-a.endGap+l),t.lineTo(r,a.length+a.startGap);break;case"right":t.moveTo(s,-a.endGap),t.lineTo(s,a.length+a.startGap);break;case"bottom":t.moveTo(-a.startGap,s),t.lineTo(a.length-l+a.endGap,s);break;case"top":r=e.roundPixel(n[3])-s,t.moveTo(-a.startGap,r),t.lineTo(a.length+a.endGap,r);break;case"angular":t.moveTo(a.centerX+a.length,a.centerY),t.arc(a.centerX,a.centerY,a.length,0,2*Math.PI,!0);break;case"gauge":o=this.getGaugeAngles(),t.moveTo(a.centerX+Math.cos(o.start)*a.length,a.centerY+Math.sin(o.start)*a.length),t.arc(a.centerX,a.centerY,a.length,o.start,o.end,!0)}}}),Ext.define("Ext.chart.axis.Axis3D",{extend:"Ext.chart.axis.Axis",xtype:"axis3d",requires:["Ext.chart.axis.sprite.Axis3D"],config:{depth:0},onSeriesChange:function(e){var i,n=this,r="depthchange",o="onSeriesDepthChange";function t(e){var t=n.boundSeries;for(i=0;i<t.length;i++)t[i][e](r,o,n)}t("un"),n.callParent(arguments),t("on")},onSeriesDepthChange:function(e,t){var i,n,r=t,o=this.boundSeries;if(t>this.getDepth())r=t;else for(i=0;i<o.length;i++)(n=o[i])!==e&&n.getDepth&&r<(t=n.getDepth())&&(r=t);this.setDepth(r)},updateDepth:function(e){var t=this.getSprites(),i={depth:e};t&&t.length&&t[0].setAttributes(i),this.gridSpriteEven&&this.gridSpriteOdd&&(this.gridSpriteEven.getTemplate().setAttributes(i),this.gridSpriteOdd.getTemplate().setAttributes(i))},getGridAlignment:function(){switch(this.getPosition()){case"left":case"right":return"horizontal3d";case"top":case"bottom":return"vertical3d"}}}),Ext.define("Ext.chart.axis.Category",{requires:["Ext.chart.axis.layout.CombineDuplicate","Ext.chart.axis.segmenter.Names"],extend:"Ext.chart.axis.Axis",alias:"axis.category",type:"category",isCategory:!0,config:{layout:"combineDuplicate",segmenter:"names"}}),Ext.define("Ext.chart.axis.Category3D",{requires:["Ext.chart.axis.layout.CombineDuplicate","Ext.chart.axis.segmenter.Names"],extend:"Ext.chart.axis.Axis3D",alias:"axis.category3d",type:"category3d",config:{layout:"combineDuplicate",segmenter:"names"}}),Ext.define("Ext.chart.axis.Numeric",{extend:"Ext.chart.axis.Axis",type:"numeric",alias:["axis.numeric","axis.radial"],requires:["Ext.chart.axis.layout.Continuous","Ext.chart.axis.segmenter.Numeric"],config:{layout:"continuous",segmenter:"numeric",aggregator:"double"}}),Ext.define("Ext.chart.axis.Numeric3D",{extend:"Ext.chart.axis.Axis3D",alias:["axis.numeric3d"],type:"numeric3d",requires:["Ext.chart.axis.layout.Continuous","Ext.chart.axis.segmenter.Numeric"],config:{layout:"continuous",segmenter:"numeric",aggregator:"double"}}),Ext.define("Ext.chart.axis.Time",{extend:"Ext.chart.axis.Numeric",alias:"axis.time",type:"time",requires:["Ext.chart.axis.layout.Continuous","Ext.chart.axis.segmenter.Time"],config:{dateFormat:null,fromDate:null,toDate:null,layout:"continuous",segmenter:"time",aggregator:"time"},updateDateFormat:function(i){var e=this.getRenderer();e&&!e.isDefault||((e=function(e,t){return Ext.Date.format(new Date(t),i)}).isDefault=!0,this.setRenderer(e),this.performLayout())},updateRenderer:function(e){var t=this.getDateFormat();e?this.performLayout():t&&this.updateDateFormat(t)},updateFromDate:function(e){this.setMinimum(+e)},updateToDate:function(e){this.setMaximum(+e)},getCoordFor:function(e){return Ext.isString(e)&&(e=new Date(e)),+e}}),Ext.define("Ext.chart.axis.Time3D",{extend:"Ext.chart.axis.Numeric3D",alias:"axis.time3d",type:"time3d",requires:["Ext.chart.axis.layout.Continuous","Ext.chart.axis.segmenter.Time"],config:{dateFormat:null,fromDate:null,toDate:null,layout:"continuous",segmenter:"time",aggregator:"time"},updateDateFormat:function(i){this.setRenderer(function(e,t){return Ext.Date.format(new Date(t),i)})},updateFromDate:function(e){this.setMinimum(+e)},updateToDate:function(e){this.setMaximum(+e)},getCoordFor:function(e){return Ext.isString(e)&&(e=new Date(e)),+e}}),Ext.define("Ext.chart.grid.HorizontalGrid3D",{extend:"Ext.chart.grid.HorizontalGrid",alias:"grid.horizontal3d",inheritableStatics:{def:{processors:{depth:"number"},defaults:{depth:0}}},render:function(e,t,i){var n,r,o=this.attr,a=e.roundPixel(o.x),s=e.roundPixel(o.y),l=e.matrix.getDX(),d=.5*t.lineWidth,u=o.height,c=o.depth;s<=i[1]||(n=i[0]+c-l,r=s+d-c,t.beginPath(),t.rect(n,r,i[2],u),t.fill(),t.beginPath(),t.moveTo(n,r),t.lineTo(n+i[2],r),t.stroke(),n=i[0]+a-l,r=s+d,t.beginPath(),t.moveTo(n,r),t.lineTo(n+c,r-c),t.lineTo(n+c,r-c+u),t.lineTo(n,r+u),t.closePath(),t.fill(),t.beginPath(),t.moveTo(n,r),t.lineTo(n+c,r-c),t.stroke())}}),Ext.define("Ext.chart.grid.VerticalGrid3D",{extend:"Ext.chart.grid.VerticalGrid",alias:"grid.vertical3d",inheritableStatics:{def:{processors:{depth:"number"},defaults:{depth:0}}},render:function(e,t,i){var n,r,o=this.attr,a=e.roundPixel(o.x),s=e.matrix.getDY(),l=.5*t.lineWidth,d=o.width,u=o.depth;a>=i[2]||(n=a-l+u,r=i[1]-u-s,t.beginPath(),t.rect(n,r,d,i[3]),t.fill(),t.beginPath(),t.moveTo(n,r),t.lineTo(n,r+i[3]),t.stroke(),n=a-l,r=i[3],t.beginPath(),t.moveTo(n,r),t.lineTo(n+u,r-u),t.lineTo(n+u+d,r-u),t.lineTo(n+d,r),t.closePath(),t.fill(),n=a-l,r=i[3],t.beginPath(),t.moveTo(n,r),t.lineTo(n+u,r-u),t.stroke())}}),Ext.define("Ext.chart.interactions.CrossZoom",{extend:"Ext.chart.interactions.Abstract",type:"crosszoom",alias:"interaction.crosszoom",isCrossZoom:!0,config:{axes:!0,gestures:{dragstart:"onGestureStart",drag:"onGesture",dragend:"onGestureEnd",dblclick:"onDoubleTap"},undoButton:{}},stopAnimationBeforeSync:!1,zoomAnimationInProgress:!1,constructor:function(){this.callParent(arguments),this.zoomHistory=[]},applyAxes:function(e){var i={};return!0===e?{top:{},right:{},bottom:{},left:{}}:(Ext.isArray(e)?(i={},Ext.each(e,function(e){i[e]={}})):Ext.isObject(e)&&Ext.iterate(e,function(e,t){!0===t?i[e]={}:!1!==t&&(i[e]=t)}),i)},applyUndoButton:function(e,t){var i=this;if(t&&t.destroy(),e)return Ext.create("Ext.Button",Ext.apply({cls:[],text:"Undo Zoom",disabled:!0,handler:function(){i.undoZoom()}},e))},getSurface:function(){return this.getChart()&&this.getChart().getSurface("overlay")},setSeriesOpacity:function(e){var t=this.getChart()&&this.getChart().getSurface("series");t&&t.element.setStyle("opacity",e)},onGestureStart:function(e){var t=this,i=t.getChart(),n=t.getSurface(),r=i.getInnerRect(),o=i.getInnerPadding(),a=o.left,s=a+r[2],l=o.top,d=l+r[3],u=i.getEventXY(e),c=u[0],h=u[1];if(e.claimGesture(),!t.zoomAnimationInProgress)return a<c&&c<s&&l<h&&h<d?(t.gestureEvent="drag",t.lockEvents(t.gestureEvent),t.startX=c,t.startY=h,t.selectionRect=n.add({type:"rect",globalAlpha:.5,fillStyle:"rgba(80,80,140,0.5)",strokeStyle:"rgba(80,80,140,1)",lineWidth:2,x:c,y:h,width:0,height:0,zIndex:1e4}),t.setSeriesOpacity(.8),!1):void 0},onGesture:function(e){var t=this;if(!t.zoomAnimationInProgress&&t.getLocks()[t.gestureEvent]===t){var i=t.getChart(),n=t.getSurface(),r=i.getInnerRect(),o=i.getInnerPadding(),a=o.left,s=a+r[2],l=o.top,d=l+r[3],u=i.getEventXY(e),c=u[0],h=u[1];return c<a?c=a:s<c&&(c=s),h<l?h=l:d<h&&(h=d),t.selectionRect.setAttributes({width:c-t.startX,height:h-t.startY}),Math.abs(t.startX-c)<11||Math.abs(t.startY-h)<11?t.selectionRect.setAttributes({globalAlpha:.5}):t.selectionRect.setAttributes({globalAlpha:1}),n.renderFrame(),!1}},onGestureEnd:function(e){var t=this;if(!t.zoomAnimationInProgress&&t.getLocks()[t.gestureEvent]===t){var i=t.getChart(),n=t.getSurface(),r=i.getInnerRect(),o=i.getInnerPadding(),a=o.left,s=a+r[2],l=o.top,d=l+r[3],u=r[2],c=r[3],h=i.getEventXY(e),f=h[0],g=h[1];f<a?f=a:s<f&&(f=s),g<l?g=l:d<g&&(g=d),Math.abs(t.startX-f)<11||Math.abs(t.startY-g)<11?n.remove(t.selectionRect):(t.zoomBy([Math.min(t.startX,f)/u,1-Math.max(t.startY,g)/c,Math.max(t.startX,f)/u,1-Math.min(t.startY,g)/c]),t.selectionRect.setAttributes({x:Math.min(t.startX,f),y:Math.min(t.startY,g),width:Math.abs(t.startX-f),height:Math.abs(t.startY-g)}),t.selectionRect.setAnimation(i.getAnimation()||{duration:0}),t.selectionRect.setAttributes({globalAlpha:0,x:0,y:0,width:u,height:c}),t.zoomAnimationInProgress=!0,i.suspendThicknessChanged(),t.selectionRect.getAnimation().on("animationend",function(){i.resumeThicknessChanged(),n.remove(t.selectionRect),t.selectionRect=null,t.zoomAnimationInProgress=!1})),n.renderFrame(),t.sync(),t.unlockEvents(t.gestureEvent),t.setSeriesOpacity(1),t.zoomAnimationInProgress||(n.remove(t.selectionRect),t.selectionRect=null)}},zoomBy:function(e){var t,i,n,r,o,a,s,l=this.getAxes(),d=this.getChart(),u=d.getAxes(),c={};for(d.getInherited().rtl&&(n=1-(e=e.slice())[0],r=1-e[2],e[0]=Math.min(n,r),e[2]=Math.max(n,r)),s=0;s<u.length;s++)(t=l[(i=u[s]).getPosition()])&&!1!==t.allowZoom&&(o=i.isSide(),a=i.getVisibleRange(),c[i.getId()]=a.slice(0),o?i.setVisibleRange([(a[1]-a[0])*e[1]+a[0],(a[1]-a[0])*e[3]+a[0]]):i.setVisibleRange([(a[1]-a[0])*e[0]+a[0],(a[1]-a[0])*e[2]+a[0]]));this.zoomHistory.push(c),this.getUndoButton().setDisabled(!1)},undoZoom:function(){var e,t,i=this.zoomHistory.pop(),n=this.getChart().getAxes();if(i)for(t=0;t<n.length;t++)i[(e=n[t]).getId()]&&e.setVisibleRange(i[e.getId()]);this.getUndoButton().setDisabled(0===this.zoomHistory.length),this.sync()},onDoubleTap:function(e){this.undoZoom()},destroy:function(){this.setUndoButton(null),this.callParent()}}),Ext.define("Ext.chart.interactions.Crosshair",{extend:"Ext.chart.interactions.Abstract",requires:["Ext.chart.grid.HorizontalGrid","Ext.chart.grid.VerticalGrid","Ext.chart.CartesianChart","Ext.chart.axis.layout.Discrete"],type:"crosshair",alias:"interaction.crosshair",config:{axes:{top:{label:{},rect:{}},right:{label:{},rect:{}},bottom:{label:{},rect:{}},left:{label:{},rect:{}}},lines:{horizontal:{strokeStyle:"black",lineDash:[5,5]},vertical:{strokeStyle:"black",lineDash:[5,5]}},gesture:"drag"},applyAxes:function(e,t){return Ext.merge(t||{},e)},applyLines:function(e,t){return Ext.merge(t||{},e)},updateChart:function(e){e&&!e.isCartesian&&Ext.raise("Crosshair interaction can only be used on cartesian charts."),this.callParent(arguments)},getGestures:function(){var e={},t=this.getGesture();return e[t]="onGesture",e[t+"start"]="onGestureStart",e[t+"end"]="onGestureEnd",e[t+"cancel"]="onGestureCancel",e},onGestureStart:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E,b,C=this,S=C.getChart(),w=S.getTheme().getAxis(),T=S.getSurface("overlay"),P=S.getInnerRect(),k=P[2],I=P[3],R=S.getEventXY(e),M=R[0],A=R[1],D=S.getAxes(),F=C.getAxes(),L=C.getLines();if(e.claimGesture(),0<M&&M<k&&0<A&&A<I){for(C.lockEvents(C.getGesture()),v=Ext.apply({xclass:"Ext.chart.grid.HorizontalGrid",x:0,y:A,width:k},L.horizontal),E=Ext.apply({xclass:"Ext.chart.grid.VerticalGrid",x:M,y:0,height:I},L.vertical),C.axesLabels=C.axesLabels||{},b=0;b<D.length;b++)r=(n=(i=D[b]).getSurface()).getRect(),f=i.getSprites()[0],o=r[2],a=r[3],s=i.getPosition(),l=i.getAlignment(),y=(x=i.getTitle())&&""!==x.attr.text&&x.getBBox(),m=(p=(g=f.attr).axisLine?g.lineWidth:0)/2,h=Math.max(g.majorTickSize,g.minorTickSize)+p,(d=C.axesLabels[s]=n.add({type:"composite"})).labelRect=d.addSprite(Ext.apply({type:"rect",fillStyle:"white",x:"right"===s?p:0,y:"bottom"===s?p:0,width:o-p-("vertical"===l&&y?y.width:0),height:a-p-("horizontal"===l&&y?y.height:0),translationX:"left"===s&&y?y.width:0,translationY:"top"===s&&y?y.height:0},F.rect||F[s].rect)),"vertical"!==l||E.strokeStyle||(E.strokeStyle=g.strokeStyle),"horizontal"!==l||v.strokeStyle||(v.strokeStyle=g.strokeStyle),t=Ext.merge({},w.defaults,w[s]),u=Ext.apply({},i.config.label,t.label),c=F.label||F[s].label,d.labelText=d.addSprite(Ext.apply(u,c,{type:"text",x:C.calculateLabelTextPoint(!1,s,h,y,o,m),y:C.calculateLabelTextPoint(!0,s,h,y,a,m)}));return C.horizontalLine=T.add(v),C.verticalLine=T.add(E),!1}},onGesture:function(e){if(this.getLocks()[this.getGesture()]===this){var t,i,n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E=this.getChart(),b=E.getSurface("overlay"),C=Ext.Array.slice(E.getInnerRect()),S=E.getInnerPadding(),w=S.left,T=S.top,P=C[2],k=C[3],I=E.getEventXY(e),R=I[0],M=I[1],A=E.getAxes();for(R<0?R=0:P<R&&(R=P),M<0?M=0:k<M&&(M=k),R+=w,M+=T,v=0;v<A.length;v++)i=(t=A[v]).getPosition(),n=t.getAlignment(),r=t.getSurface(),a=(o=t.getSprites()[0]).attr.matrix,c=2*o.attr.textPadding,d=this.axesLabels[i],s=o.getLayoutContext(),l=t.getSegmenter(),d&&("vertical"===n?(f=a.getYY(),x=(M-(p=a.getDY())-T)/f,x=t.getLayout()instanceof Ext.chart.axis.layout.Discrete?(M=Math.round(x)*f+p+T,x=l.from(Math.round(x)),o.attr.data[x]):l.from(x),y=l.renderer(x,s),d.setAttributes({translationY:M-T}),d.labelText.setAttributes({text:y}),u=d.labelText.getBBox(),d.labelRect.setAttributes({height:u.height+c,y:-(u.height+c)/2})):(h=a.getXX(),m=(R-(g=a.getDX())-w)/h,m=t.getLayout()instanceof Ext.chart.axis.layout.Discrete?(R=Math.round(m)*h+g+w,m=l.from(Math.round(m)),o.attr.data[m]):l.from(m),y=l.renderer(m,s),d.setAttributes({translationX:R-w}),d.labelText.setAttributes({text:y}),u=d.labelText.getBBox(),d.labelRect.setAttributes({width:u.width+c,x:-(u.width+c)/2})),r.renderFrame());return this.horizontalLine.setAttributes({y:M,strokeStyle:o.attr.strokeStyle}),this.verticalLine.setAttributes({x:R,strokeStyle:o.attr.strokeStyle}),b.renderFrame(),!1}},onGestureEnd:function(e){var t,i,n,r,o,a=this.getChart(),s=a.getSurface("overlay"),l=a.getAxes();for(s.remove(this.verticalLine),s.remove(this.horizontalLine),o=0;o<l.length;o++)i=(t=l[o]).getPosition(),n=t.getSurface(),(r=this.axesLabels[i])&&(delete this.axesLabels[i],n.remove(r)),n.renderFrame();s.renderFrame(),this.unlockEvents(this.getGesture())},onGestureCancel:function(e){this.onGestureEnd(e)},privates:{vertMap:{top:"start",bottom:"end"},horzMap:{left:"start",right:"end"},calculateLabelTextPoint:function(e,t,i,n,r,o){var a,s,l;switch(t=e?(l="y",s="height",this.vertMap[t]):(l="x",s="width",this.horzMap[t])){case"start":return(a=n?n[l]+n[s]:0)+(r-a-i)/2-o;case"end":return i+(r-i-(a=n?r-n[l]:0))/2+o;default:return 0}}}}),Ext.define("Ext.chart.interactions.ItemHighlight",{extend:"Ext.chart.interactions.Abstract",type:"itemhighlight",alias:"interaction.itemhighlight",isItemHighlight:!0,config:{gestures:{tap:"onTapGesture",mousemove:"onMouseMoveGesture",mousedown:"onMouseDownGesture",mouseup:"onMouseUpGesture",mouseleave:"onMouseUpGesture"},sticky:!1,multiTooltips:!1},constructor:function(e){this.callParent([e]),this.stickyHighlightItem=null,this.tooltipItems=[]},destroy:function(){this.stickyHighlightItem=this.tooltipItems=null,this.callParent()},onMouseMoveGesture:function(e){var t,i,n,r,o,a,s,l,d,u=this,c=u.tooltipItems,h="mouse"===e.pointerType,f=[];if(u.getSticky())return!0;if(h&&u.stickyHighlightItem&&(u.stickyHighlightItem=null,u.highlight(null)),u.isDragging)c.length&&h&&(u.hideTooltips(c),c.length=0);else if(!u.stickyHighlightItem){for(a=0,s=(n=u.getMultiTooltips()?u.getItemsForEvent(e):(t=u.getItemForEvent(e))?[t]:[]).length;a<s;a++)t=n[a],0===a&&t!==u.getChart().getHighlightItem()&&(u.highlight(t),u.sync()),(r=t.series.getTooltip())&&f.push(r);if(h)if(n.length){for(a=0,s=n.length;a<s;a++)if(r=(t=n[a]).series.getTooltip()){for(l=0,d=c.length;l<d;l++)i=c[l],Ext.Array.contains(n,i)||(o=i.series.getTooltip(),Ext.Array.contains(f,o)||i.series.hideTooltip(i,!0));r.getTrackMouse()?t.series.showTooltip(t,e):u.showUntracked(t)}u.tooltipItems=n}else u.hideTooltips(c),c.length=0;return!1}},highlight:function(e){this.getChart().setHighlightItem(e)},showTooltip:function(e,t){t.series.showTooltip(t,e),Ext.Array.include(this.tooltipItems,t)},showUntracked:function(e){var t,i,n,r,o=e.sprite.getMarker(e.category);o&&(n=(t=o.getSurface()).matrix.elements[3]<0,i=t.element.getXY(),r=Ext.clone(o.getBBoxFor(e.index)),n&&(r=(t.getInherited().rtl?t.inverseMatrix.clone().flipX().translate(e.sprite.attr.innerWidth,0,!0):t.inverseMatrix).transformBBox(r)),r.x+=i[0],r.y+=i[1],e.series.showTooltipAt(e,r.x+.5*r.width,r.y+.5*r.height))},onMouseDownGesture:function(){this.isDragging=!0},onMouseUpGesture:function(){this.isDragging=!1},isSameItem:function(e,t){return e&&t&&e.series===t.series&&e.field===t.field&&e.index===t.index},onTapGesture:function(e){var t;"mouse"===e.pointerType&&!this.getSticky()||(t=this.getItemForEvent(e),this.isSameItem(this.stickyHighlightItem,t)&&(t=null),this.stickyHighlightItem=t,this.highlight(t))},privates:{hideTooltips:function(e,t){var i,n,r;for(n=0,r=(e=Ext.isArray(e)?e:[e]).length;n<r;n++)(i=e[n])&&i.series&&!i.series.destroyed&&i.series.hideTooltip(i,t)}}}),Ext.define("Ext.chart.interactions.ItemEdit",{extend:"Ext.chart.interactions.ItemHighlight",requires:["Ext.tip.ToolTip"],type:"itemedit",alias:"interaction.itemedit",isItemEdit:!0,config:{style:null,renderer:null,tooltip:!0,gestures:{dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},cursors:{ewResize:"ew-resize",nsResize:"ns-resize",move:"move"}},item:null,applyTooltip:function(e){var t;return e&&(t=Ext.apply({},e,{renderer:this.defaultTooltipRenderer,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,trackMouse:!0,mouseOffset:[20,20]}),e=new Ext.tip.ToolTip(t)),e},defaultTooltipRenderer:function(e,t,i,n){var r=[];i.xField&&r.push(i.xField+": "+i.xValue),i.yField&&r.push(i.yField+": "+i.yValue),e.setHtml(r.join("<br>"))},onDragStart:function(e){var t=this.getChart(),i=t.getHighlightItem();if(e.claimGesture(),i)return t.fireEvent("beginitemedit",t,this,this.item=i),!1},onDrag:function(e){var t=this.getChart().getHighlightItem(),i=t&&t.sprite.type;if(t)switch(i){case"barSeries":return this.onDragBar(e);case"scatterSeries":return this.onDragScatter(e)}},highlight:function(e){var t=this.getChart(),i=t.getFlipXY(),n=this.getCursors(),r=e&&e.sprite.type,o=t.el.dom.style;if(this.callParent([e]),e)switch(r){case"barSeries":o.cursor=i?n.ewResize:n.nsResize;break;case"scatterSeries":o.cursor=n.move}else t.el.dom.style.cursor="default"},onDragBar:function(e){var t,i,n,r,o=this.getChart(),a=o.getInherited().rtl,s=o.isCartesian&&o.getFlipXY(),l=o.getHighlightItem(),d=l.sprite.getMarker("items").getMarkerFor(l.sprite.getId(),l.index),u=l.sprite.getSurface(),c=u.getRect(),h=u.getEventXY(e),f=l.sprite.attr.matrix,g=this.getRenderer();r=s?a?c[2]-h[0]:h[0]:c[3]-h[1],t={x:d.x,y:r,width:d.width,height:d.height+(d.y-r),radius:d.radius,fillStyle:"none",lineDash:[4,4],zIndex:100},Ext.apply(t,this.getStyle()),Ext.isArray(l.series.getYField())&&(r=r-d.y-d.height),this.target={index:l.index,yField:l.field,yValue:(r-f.getDY())/f.getYY()},n=[o,{target:this.target,style:t,item:l}],(i=Ext.callback(g,null,n,0,o))&&Ext.apply(t,i),l.sprite.putMarker("items",t,"itemedit"),this.showTooltip(e,this.target,l),u.renderFrame()},onDragScatter:function(e){var t,i,n,r,o,a,s,l=this.getChart(),d=l.getInherited().rtl,u=l.isCartesian&&l.getFlipXY(),c=l.getHighlightItem(),h=c.sprite.getMarker("markers").getMarkerFor(c.sprite.getId(),c.index),f=c.sprite.getSurface(),g=f.getRect(),p=f.getEventXY(e),m=c.sprite.attr.matrix,x=c.series.getXAxis(),y=x&&x.getLayout().isContinuous,v=this.getRenderer();o=u?d?g[2]-p[0]:p[0]:g[3]-p[1],r=y?u?g[3]-p[1]:p[0]:h.translationX,s=y?(a=p[0],p[1]):u?(a=p[0],h.translationY):(a=h.translationX,p[1]),t={translationX:a,translationY:s,scalingX:h.scalingX,scalingY:h.scalingY,r:h.r,fillStyle:"none",lineDash:[4,4],zIndex:100},Ext.apply(t,this.getStyle()),this.target={index:c.index,yField:c.field,yValue:(o-m.getDY())/m.getYY()},y&&Ext.apply(this.target,{xField:c.series.getXField(),xValue:(r-m.getDX())/m.getXX()}),n=[l,{target:this.target,style:t,item:c}],(i=Ext.callback(v,null,n,0,l))&&Ext.apply(t,i),c.sprite.putMarker("markers",t,"itemedit"),this.showTooltip(e,this.target,c),f.renderFrame()},showTooltip:function(e,t,i){var n,r,o=this.getTooltip();o&&"modern"!==Ext.toolkit&&(n=o.config,r=this.getChart(),Ext.callback(n.renderer,null,[o,i,t,e],0,r),o.pointerEvent=e,o.isVisible()?o.realignToTarget():o.show())},hideTooltip:function(){var e=this.getTooltip();e&&"modern"!==Ext.toolkit&&e.hide()},onDragEnd:function(e){var t,i=this,n=i.target,r=i.getChart(),o=r.getStore();n&&(t=o.getAt(n.index),n.yField&&t.set(n.yField,n.yValue,{convert:!1}),n.xField&&t.set(n.xField,n.xValue,{convert:!1}),(n.yField||n.xField)&&i.getChart().onDataChanged(),i.target=null),i.hideTooltip(),i.item&&r.fireEvent("enditemedit",r,i,i.item,n),i.highlight(i.item=null)},destroy:function(){var e=this.getConfig("tooltip",!0);Ext.destroy(e),this.callParent()}}),Ext.define("Ext.chart.interactions.PanZoom",{extend:"Ext.chart.interactions.Abstract",type:"panzoom",alias:"interaction.panzoom",requires:["Ext.draw.Animator"],config:{axes:{top:{},right:{},bottom:{},left:{}},minZoom:null,maxZoom:null,showOverflowArrows:!0,panGesture:"drag",zoomGesture:"pinch",zoomOnPanGesture:null,zoomOnPan:!1,doubleTapReset:!1,modeToggleButton:{xtype:"segmentedbutton",width:200,defaults:{ui:"default-toolbar"},cls:Ext.baseCSSPrefix+"panzoom-toggle",items:[{text:"Pan",value:"pan"},{text:"Zoom",value:"zoom"}]},hideLabelInGesture:!1},stopAnimationBeforeSync:!0,applyAxes:function(e,t){return Ext.merge(t||{},e)},updateZoomOnPan:function(e){this.getModeToggleButton().setValue(e?"zoom":"pan")},updateZoomOnPanGesture:function(e){this.setZoomOnPan(e)},getZoomOnPanGesture:function(){return this.getZoomOnPan()},applyModeToggleButton:function(e,t){return Ext.factory(e,"Ext.button.Segmented",t)},updateModeToggleButton:function(e){e&&e.on("change","onModeToggleChange",this)},onModeToggleChange:function(e,t){this.setZoomOnPan("zoom"===t)},getGestures:function(){var e={},t=this.getPanGesture(),i=this.getZoomGesture();return e[i]="onZoomGestureMove",e[i+"start"]="onZoomGestureStart",e[i+"end"]="onZoomGestureEnd",e[t]="onPanGestureMove",e[t+"start"]="onPanGestureStart",e[t+"end"]="onPanGestureEnd",e.doubletap="onDoubleTap",e},onDoubleTap:function(e){var t,i,n,r;if(this.getDoubleTapReset()){for(n=0,r=(i=(t=this.getChart()).getAxes()).length;n<r;n++)i[n].setVisibleRange([0,1]);t.redraw()}},onPanGestureStart:function(e){var t,i,n;if(!e||!e.touches||e.touches.length<2)return i=(t=this.getChart()).getInnerRect(),n=t.element.getXY(),e.claimGesture(),t.suspendAnimation(),this.startX=e.getX()-n[0]-i[0],this.startY=e.getY()-n[1]-i[1],this.oldVisibleRanges=null,this.hideLabels(),t.suspendThicknessChanged(),this.lockEvents(this.getPanGesture()),!1},onPanGestureMove:function(e){var t,i,n,r=this,o="mouse"===e.pointerType&&r.getZoomOnPan();if(r.getLocks()[r.getPanGesture()]===r)return i=(t=r.getChart()).getInnerRect(),n=t.element.getXY(),o?r.transformAxesBy(r.getZoomableAxes(e),0,0,(e.getX()-n[0]-i[0])/r.startX,r.startY/(e.getY()-n[1]-i[1])):r.transformAxesBy(r.getPannableAxes(e),e.getX()-n[0]-i[0]-r.startX,e.getY()-n[1]-i[1]-r.startY,1,1),r.sync(),!1},onPanGestureEnd:function(e){var t,i=this.getPanGesture();if(this.getLocks()[i]===this)return(t=this.getChart()).resumeThicknessChanged(),this.showLabels(),this.sync(),this.unlockEvents(i),t.resumeAnimation(),!1},onZoomGestureStart:function(e){if(e.touches&&2===e.touches.length){var t=this.getChart(),i=t.element.getXY(),n=t.getInnerRect(),r=i[0]+n[0],o=i[1]+n[1],a=[e.touches[0].point.x-r,e.touches[0].point.y-o,e.touches[1].point.x-r,e.touches[1].point.y-o],s=Math.max(44,Math.abs(a[2]-a[0])),l=Math.max(44,Math.abs(a[3]-a[1]));return e.claimGesture(),t.suspendAnimation(),t.suspendThicknessChanged(),this.lastZoomDistances=[s,l],this.lastPoints=a,this.oldVisibleRanges=null,this.hideLabels(),this.lockEvents(this.getZoomGesture()),!1}},onZoomGestureMove:function(e){if(this.getLocks()[this.getZoomGesture()]===this){var t=this.getChart(),i=t.getInnerRect(),n=t.element.getXY(),r=n[0]+i[0],o=n[1]+i[1],a=Math.abs,s=this.lastPoints,l=[e.touches[0].point.x-r,e.touches[0].point.y-o,e.touches[1].point.x-r,e.touches[1].point.y-o],d=Math.max(44,a(l[2]-l[0])),u=Math.max(44,a(l[3]-l[1])),c=this.lastZoomDistances||[d,u],h=d/c[0],f=u/c[1];return this.transformAxesBy(this.getZoomableAxes(e),i[2]*(h-1)/2+l[2]-s[2]*h,i[3]*(f-1)/2+l[3]-s[3]*f,h,f),this.sync(),!1}},onZoomGestureEnd:function(e){var t,i=this.getZoomGesture();if(this.getLocks()[i]===this)return(t=this.getChart()).resumeThicknessChanged(),this.showLabels(),this.sync(),this.unlockEvents(i),t.resumeAnimation(),!1},hideLabels:function(){this.getHideLabelInGesture()&&this.eachInteractiveAxes(function(e){e.hideLabels()})},showLabels:function(){this.getHideLabelInGesture()&&this.eachInteractiveAxes(function(e){e.showLabels()})},isEventOnAxis:function(e,t){var i=t.getSurface().getRect();return i[0]<=e.getX()&&e.getX()<=i[0]+i[2]&&i[1]<=e.getY()&&e.getY()<=i[1]+i[3]},getPannableAxes:function(e){var t,i,n=this.getAxes(),r=this.getChart().getAxes(),o=r.length,a=[],s=!1;if(e)for(t=0;t<o;t++)if(this.isEventOnAxis(e,r[t])){s=!0;break}for(t=0;t<o;t++)!(i=n[r[t].getPosition()])||!1===i.allowPan||s&&!this.isEventOnAxis(e,r[t])||a.push(r[t]);return a},getZoomableAxes:function(e){var t,i,n,r=this.getAxes(),o=this.getChart().getAxes(),a=[],s=o.length,l=!1;if(e)for(t=0;t<s;t++)if(this.isEventOnAxis(e,o[t])){l=!0;break}for(t=0;t<s;t++)!(n=r[(i=o[t]).getPosition()])||!1===n.allowZoom||l&&!this.isEventOnAxis(e,i)||a.push(i);return a},eachInteractiveAxes:function(e){var t,i=this.getAxes(),n=this.getChart().getAxes();for(t=0;t<n.length;t++)if(i[n[t].getPosition()]&&!1===e.call(this,n[t]))return},transformAxesBy:function(e,t,i,n,r){var o,a,s=this.getChart().getInnerRect(),l=this.getAxes(),d=this.oldVisibleRanges,u=!1;if(d||(this.oldVisibleRanges=d={},this.eachInteractiveAxes(function(e){d[e.getId()]=e.getVisibleRange()})),s){for(a=0;a<e.length;a++)o=l[e[a].getPosition()],u=this.transformAxisBy(e[a],d[e[a].getId()],t,i,n,r,this.minZoom||o.minZoom,this.maxZoom||o.maxZoom)||u;return u}},transformAxisBy:function(e,t,i,n,r,o,a,s){var l,d,u,c,h,f=t[1]-t[0],g=e.getVisibleRange(),p=a||this.getMinZoom()||e.config.minZoom,m=s||this.getMaxZoom()||e.config.maxZoom,x=this.getChart().getInnerRect();if(x&&(h=(u=e.isSide())?x[3]:x[2],c=u?-n:i,(f/=u?o:r)<0&&(f=-f),1<f*p&&(f=1),f*m<1&&(f=1/m),l=t[0],d=t[1],f!==(g=g[1]-g[0])||1!==g))return e.setVisibleRange([.5*(t[0]+t[1]-f)-c/h*f,.5*(t[0]+t[1]+f)-c/h*f]),1e-10<Math.abs(l-e.getVisibleRange()[0])||1e-10<Math.abs(d-e.getVisibleRange()[1])},destroy:function(){this.setModeToggleButton(null),this.callParent()}}),Ext.define("Ext.chart.interactions.Rotate",{extend:"Ext.chart.interactions.Abstract",type:"rotate",alternateClassName:"Ext.chart.interactions.RotatePie3D",alias:["interaction.rotate","interaction.rotatePie3d"],config:{gesture:"rotate",gestures:{dragstart:"onGestureStart",drag:"onGesture",dragend:"onGestureEnd"},rotation:0},oldRotations:null,getAngle:function(e){var t=this.getChart(),i=t.getEventXY(e),n=t.getCenter();return Math.atan2(i[1]-n[1],i[0]-n[0])},onGestureStart:function(e){return e.claimGesture(),this.lockEvents("drag"),this.angle=this.getAngle(e),this.oldRotations={},this.getChart().suspendAnimation(),this.fireEvent("rotatestart",this,this.getRotation()),!1},onGesture:function(e){var t=this.getAngle(e)-this.angle;if(this.getLocks().drag===this)return this.doRotateTo(t,!0),!1},doRotateTo:function(e,t){var i,n,r,o,a,s,l,d=this.getChart(),u=d.getAxes(),c=d.getSeries(),h=this.oldRotations;for(s=0,l=u.length;s<l;s++)n=h[a=(r=u[s]).getId()]||(h[a]=r.getRotation()),i=e+(t?n:0),r.setRotation(i);for(s=0,l=c.length;s<l;s++)n=h[a=(o=c[s]).getId()]||(h[a]=o.getRotation()),i=Ext.draw.Draw.degrees(e+(t?n:0)),o.setRotation(i);this.setRotation(i),this.fireEvent("rotate",this,this.getRotation()),this.sync()},rotateTo:function(e,t,i){var n=this.getChart();i||n.suspendAnimation(),this.doRotateTo(e,t,i),this.oldRotations={},i||n.resumeAnimation()},onGestureEnd:function(e){var t=this;if(t.getLocks().drag===t)return t.onGesture(e),t.unlockEvents("drag"),t.getChart().resumeAnimation(),t.fireEvent("rotateend",t,t.getRotation()),t.fireEvent("rotationEnd",t,t.getRotation()),!1}}),Ext.define("Ext.chart.navigator.ContainerBase",{extend:"Ext.panel.Panel"}),Ext.define("Ext.chart.navigator.NavigatorBase",{extend:"Ext.chart.CartesianChart",onRender:function(){this.callParent(),this.setupEvents()},setDocked:function(e){var t=this.getNavigatorContainer();return"top"!==e&&"bottom"!==e&&Ext.raise("Can only dock to 'top' or 'bottom'."),e!==this.dock&&(t&&t.moveDocked?t.moveDocked(this,e):this.dock=e),this},getDocked:function(){return this.dock}}),Ext.define("Ext.chart.navigator.sprite.RangeMask",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.rangemask",inheritableStatics:{def:{processors:{min:"limited01",max:"limited01",thumbOpacity:"limited01"},defaults:{min:0,max:1,lineWidth:2,miterLimit:1,strokeStyle:"#787878",thumbOpacity:1}}},getBBox:function(e){var t=this.attr,i=t.bbox;return i.plain={x:0,y:0,width:1,height:1},e?i.plain:i.transform||(i.transform=t.matrix.transformBBox(i.plain))},renderThumb:function(e,t,i,n){var r=this.shapeSprite,o=this.textureSprite,a={opacity:this.attr.thumbOpacity,translationX:i,translationY:n};r||(r=this.shapeSprite=new Ext.draw.sprite.Rect({x:-9.5,y:-9.5,width:19,height:19,radius:4,lineWidth:1,fillStyle:{type:"linear",degrees:90,stops:[{offset:0,color:"#EEE"},{offset:1,color:"#FFF"}]},strokeStyle:"#999"}),o=this.textureSprite=new Ext.draw.sprite.Path({path:"M -4, -5, -4, 5 M 0, -5, 0, 5 M 4, -5, 4, 5",strokeStyle:{type:"linear",degrees:90,stops:[{offset:0,color:"#CCC"},{offset:1,color:"#BBB"}]},lineWidth:2})),t.save(),r.setAttributes(a),r.applyTransformations(),o.setAttributes(a),o.applyTransformations(),r.useAttributes(t),r.render(e,t),o.useAttributes(t),o.render(e,t),t.restore()},render:function(e,t){var i=this.attr,n=i.matrix.elements,r=n[0],o=n[3],a=n[4],s=n[5],l=i.min*r+a,d=i.max*r+a,u=Math.round(.5*o+s);t.beginPath(),t.moveTo(a,s),t.lineTo(r+a,s),t.lineTo(r+a,o+s),t.lineTo(a,o+s),t.lineTo(a,s),t.moveTo(l,s),t.lineTo(l,o+s),t.lineTo(d,o+s),t.lineTo(d,s),t.lineTo(l,s),t.fillStroke(i,!0),this.renderThumb(e,t,Math.round(l),u),this.renderThumb(e,t,Math.round(d),u)}}),Ext.define("Ext.chart.navigator.Navigator",{extend:"Ext.chart.navigator.NavigatorBase",isNavigator:!0,requires:["Ext.chart.navigator.sprite.RangeMask"],config:{docked:"bottom",span:"series",insetPadding:0,innerPadding:0,navigatorContainer:null,axis:null,tolerance:20,minimum:.8,maximum:1,thumbGap:30,autoHideThumbs:!0,width:"100%",height:75},dragType:null,constructor:function(e){var t,i;t=[(e=e||{}).minimum||.8,e.maximum||1],this.callParent([e]),(i=this.overlaySurface).element.setStyle({zIndex:100}),this.rangeMask=i.add({type:"rangemask",min:t[0],max:t[1],fillStyle:"rgba(0, 0, 0, .25)"}),this.onDragEnd(),this.rangeMask.setAnimation({duration:500,customDurations:{min:0,max:0,translationX:0,translationY:0,scalingX:0,scalingY:0,scalingCenterX:0,scalingCenterY:0,fillStyle:0,strokeStyle:0}}),this.setVisibleRange(t)},createSurface:function(e){var t=this.callParent([e]);return"overlay"===e&&(this.overlaySurface=t),t},applyAxis:function(e){return this.getNavigatorContainer().getChart().getAxis(e)},updateAxis:function(e,t){var i="visiblerangechange",n="onAxisVisibleRangeChange";t&&t.un(i,n,this),e&&e.on(i,n,this),this.axis=e},getAxis:function(){return this.axis},onAxisVisibleRangeChange:function(e,t){this.setVisibleRange(t)},updateNavigatorContainer:function(e){var t,i,n,r,o=this,a=o.chart,s=o.chart=e&&e.getChart(),l=s&&s.getSeries(),d=o.chartLegendStore,u=[],c="onChartLegendStoreUpdate";for(a&&(a.un("layout","afterBoundChartLayout",o),a.un("themechange","onChartThemeChange",o),a.un("storechange","onChartStoreChange",o)),s.on("layout","afterBoundChartLayout",o),r=0;r<l.length;r++)t=l[r],n=o.getSeriesConfig(t),((i=Ext.create("series."+n.type,n)).parentSeries=t).navigatorSeries=i,u.push(i);d&&(d.un("update",c,o),o.chartLegendStore=null),s&&(o.setStore(s.getStore()),o.chartLegendStore=d=s.getLegendStore(),d&&d.on("update",c,o),s.on("themechange","onChartThemeChange",o),s.on("storechange","onChartStoreChange",o),o.onChartThemeChange(s,s.getTheme())),o.setSeries(u)},onChartThemeChange:function(e,t){this.setTheme(t)},onChartStoreChange:function(e,t){this.setStore(t)},addCustomStyle:function(e,t,i){var n,r;return t=t||{},i=i||{},e.style=e.style||{},e.subStyle=e.subStyle||{},n=t&&(t.fillStyle||t.fill),r=t&&(t.strokeStyle||t.stroke),n&&(e.style.fillStyle=n),r&&(e.style.strokeStyle=r),n=i&&(i.fillStyle||i.fill),r=i&&(i.strokeStyle||i.stroke),n&&(e.subStyle.fillStyle=n),r&&(e.subStyle.strokeStyle=r),e},getSeriesConfig:function(e){var t,i=e.getStyle();return e.isLine?t=this.addCustomStyle({type:"line",fill:!0,xField:e.getXField(),yField:e.getYField(),smooth:e.getSmooth()},i):e.isCandleStick?t=this.addCustomStyle({type:"line",fill:!0,xField:e.getXField(),yField:e.getCloseField()},i.raiseStyle):e.isArea||e.isBar?t=this.addCustomStyle({type:"area",xField:e.getXField(),yField:e.getYField()},i,e.getSubStyle()):Ext.raise("Navigator only works with 'line', 'bar', 'candlestick' and 'area' series."),t.style.fillOpacity=.2,t},onChartLegendStoreUpdate:function(e,t){var i,n=this.chart;n&&t&&(i=n.getSeries().map[t.get("series")])&&i.navigatorSeries&&(i.navigatorSeries.setHiddenByIndex(t.get("index"),t.get("disabled")),this.redraw())},setupEvents:function(){this.overlaySurface.element.on({scope:this,drag:"onDrag",dragstart:"onDragStart",dragend:"onDragEnd",dragcancel:"onDragEnd",mousemove:"onMouseMove"})},onMouseMove:function(e){var t=this.overlaySurface.element,i=t.dom.style;switch(this.getDragType(e.pageX-t.getXY()[0])){case"min":case"max":i.cursor="ew-resize";break;case"pan":i.cursor="move";break;default:i.cursor="default"}},getDragType:function(e){var t,i=this.getTolerance(),n=this.overlaySurface.element.getSize().width,r=this.rangeMask,o=n*r.attr.min,a=n*r.attr.max;return o+i<e&&e<a-i?t="pan":e<=o+i&&o-i<e?t="min":a-i<=e&&e<a+i&&(t="max"),t},onDragStart:function(e){var t,i;this.dragType||e&&e.touches&&1<e.touches.length||(t=e.touches[0].pageX-this.overlaySurface.element.getXY()[0],i=this.getDragType(t),this.rangeMask.attr.thumbOpacity=1,i&&(this.dragType=i,this.touchId=e.touches[0].identifier,this.dragX=t))},onDrag:function(e){if(e.touch.identifier===this.touchId){var t=this.overlaySurface.element,i=t.getSize().width,n=e.touches[0].pageX-t.getXY()[0],r=this.getThumbGap()/i,o=this.rangeMask,a=o.attr.min,s=o.attr.max,l=s-a,d=this.dragType,u=(n-this.dragX)/i;if("pan"===d)s+=u,(a+=u)<0&&(a=0,s=l),1<s&&(a=(s=1)-l);else if("min"===d)(a+=u)<0&&(a=0),s-r<a&&(a=s-r);else{if("max"!==d)return;1<(s+=u)&&(s=1),s<a+r&&(s=a+r)}this.dragX=n,this.setVisibleRange([a,s])}},onDragEnd:function(){var e=this.getAutoHideThumbs();this.dragType=null,e&&this.rangeMask.setAttributes({thumbOpacity:0})},updateMinimum:function(e){this.isConfiguring||this.setVisibleRange([e,this.getMaximum()])},updateMaximum:function(e){this.isConfiguring||this.setVisibleRange([this.getMinimum(),e])},getMinimum:function(){return this.rangeMask.attr.min},getMaximum:function(){return this.rangeMask.attr.max},setVisibleRange:function(e){var t=this.chart;this.axis.setVisibleRange(e),this.rangeMask.setAttributes({min:e[0],max:e[1]}),this.getSurface("overlay").renderFrame(),t.suspendAnimation(),t.redraw(),t.resumeAnimation()},afterBoundChartLayout:function(){var e="series"===this.getSpan(),t=this.chart.getMainRect(),i=this.element.getSize();t&&e&&(this.setInsetPadding({left:t[0],right:i.width-t[2]-t[0],top:0,bottom:0}),this.performLayout())},afterChartLayout:function(){var e=this.overlaySurface.element.getSize();this.rangeMask.setAttributes({scalingCenterX:0,scalingCenterY:0,scalingX:e.width,scalingY:e.height})},doDestroy:function(){var e=this.chart;e&&!e.destroyed&&e.un("layout","afterBoundChartLayout",this),this.callParent()}}),Ext.define("Ext.chart.navigator.Container",{extend:"Ext.chart.navigator.ContainerBase",requires:["Ext.chart.CartesianChart","Ext.chart.navigator.Navigator"],xtype:"chartnavigator",config:{chart:null,navigator:{}},layout:"fit",applyChart:function(e,t){return t&&t.destroy(),e&&(e.isCartesian&&Ext.raise("Only cartesian charts are supported."),e.isChart||(e.$initParent=this,delete(e=new Ext.chart.CartesianChart(e)).$initParent)),e},legendStore:null,surfaceRects:null,updateChart:function(e,t){e&&(this.legendStore=e.getLegendStore(),!this.items&&this.initItems&&this.initItems(),this.add(e))},applyNavigator:function(e,t){var i;return t&&t.destroy(),e&&(e.navigatorContainer=e.parent=this,i=new Ext.chart.navigator.Navigator(e)),i},preview:function(){this.getNavigator().preview(this.getImage())},download:function(e){(e=e||{}).data=this.getImage().data,this.getNavigator().download(e)},setVisibleRange:function(e){this.getNavigator().setVisibleRange(e)},getImage:function(e){var t,i,n,r,o=this.getChart(),a=this.getNavigator(),s=a.getDocked(),l=o.bodyElement.getSize(),d=a.bodyElement.getSize(),u=o.getSurfaces(!0),c=a.getSurfaces(!0),h={width:l.width,height:l.height+d.height};if("top"===s?this.shiftSurfaces(u,0,d.height):this.shiftSurfaces(c,0,l.height),r=(n=u.concat(c))[0],(Ext.isIE||Ext.isEdge)&&r.isSVG)t={data:r.toSVG(h,n),type:"svg-markup"};else{if(t=r.flatten(h,n),"image"===e)return(i=new Image).src=t.data,t.data=i,t;if("stream"===e)return t.data=t.data.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),t}return this.unshiftSurfaces(n),t},shiftSurfaces:function(e,t,i){var n,r=e.length,o=0;for(this.surfaceRects={};o<r;o++)n=e[o],this.shiftSurface(n,t,i)},shiftSurface:function(e,t,i){var n=e.getRect();this.surfaceRects[e.getId()]=n.slice(),n[0]+=t,n[1]+=i},unshiftSurfaces:function(e){var t,i,n,r=this.surfaceRects,o=e.length,a=0;if(r)for(;a<o;a++)i=(t=e[a]).getRect(),(n=r[t.getId()])&&(i[0]=n[0],i[1]=n[1]);this.surfaceRects=null}}),Ext.define("Ext.chart.plugin.ItemEvents",{extend:"Ext.plugin.Abstract",alias:"plugin.chartitemevents",moveEvents:!1,mouseMoveEvents:{mousemove:!0,mouseover:!0,mouseout:!0},itemMouseMoveEvents:{itemmousemove:!0,itemmouseover:!0,itemmouseout:!0},init:function(e){var t="handleEvent";(this.chart=e).addElementListener({click:t,tap:t,dblclick:t,mousedown:t,mousemove:t,mouseup:t,mouseover:t,mouseout:t,priority:1001,scope:this})},hasItemMouseMoveListeners:function(){var e,t=this.chart.hasListeners;for(e in this.itemMouseMoveEvents)if(e in t)return!0;return!1},handleEvent:function(e){var t,i,n=this.chart,r=e.type in this.mouseMoveEvents,o=this.lastItem;r&&!this.hasItemMouseMoveListeners()&&!this.moveEvents||(t=n.getEventXY(e),i=n.getItemForPoint(t[0],t[1]),r&&!Ext.Object.equals(i,o)&&(o&&(n.fireEvent("itemmouseout",n,o,e),o.series.fireEvent("itemmouseout",o.series,o,e)),i&&(n.fireEvent("itemmouseover",n,i,e),i.series.fireEvent("itemmouseover",i.series,i,e))),i&&(n.fireEvent("item"+e.type,n,i,e),i.series.fireEvent("item"+e.type,i.series,i,e)),this.lastItem=i)}}),Ext.define("Ext.chart.series.Cartesian",{extend:"Ext.chart.series.Series",config:{xField:null,yField:null,xAxis:null,yAxis:null},directions:["X","Y"],fieldCategoryX:["X"],fieldCategoryY:["Y"],applyXAxis:function(e,t){return this.getChart().getAxis(e)||t},applyYAxis:function(e,t){return this.getChart().getAxis(e)||t},updateXAxis:function(e){e.processData(this)},updateYAxis:function(e){e.processData(this)},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},getItemForPoint:function(e,t){var i,n=this.getSprites()[0],r=this.getStore();return n&&!this.getHidden()&&(i=n.getNearestDataPoint(e,t)),i?{series:this,sprite:n,category:this.getItemInstancing()?"items":"markers",index:i.index,record:r.getData().items[i.index],field:this.getYField(),distance:i.distance}:null},createSprite:function(){var e=this.callParent(),t=this.getChart(),i=this.getXAxis();return e.setAttributes({flipXY:t.getFlipXY(),xAxis:i}),e.setAggregator&&i&&i.getAggregator&&(i.getAggregator?e.setAggregator({strategy:i.getAggregator()}):e.setAggregator({})),e},getSprites:function(){var e=this.getChart(),t=this.sprites;return e?(t.length||this.createSprite(),t):Ext.emptyArray},getXRange:function(){return[this.dataRange[0],this.dataRange[2]]},getYRange:function(){return[this.dataRange[1],this.dataRange[3]]}}),Ext.define("Ext.chart.series.StackedCartesian",{extend:"Ext.chart.series.Cartesian",config:{stacked:!0,splitStacks:!0,fullStack:!1,fullStackTotal:100,hidden:[]},reversedSpriteZOrder:!0,spriteAnimationCount:0,themeColorCount:function(){var e=this.getYField();return Ext.isArray(e)?e.length:1},updateStacked:function(){this.processData()},updateSplitStacks:function(){this.processData()},coordinateY:function(){return this.coordinateStacked("Y",1,2)},coordinateStacked:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g=this,p=g.getStore().getData().items,m=p.length,x=g["get"+e+"Axis"](),y=g.getHidden(),v=g.getSplitStacks(),E=g.getFullStack(),b=g.getFullStackTotal(),C=[0,0],S=g["fieldCategory"+e],w=[],T=[],P=[],k=g.getStacked(),I=g.getSprites(),R=[];if(I.length){for(r=0;r<S.length;r++){for(c=S[r],l=(s=g.getFields([c])).length,o=0;o<m;o++)w[o]=0,T[o]=0,P[o]=0;for(o=0;o<l;o++)y[o]||(R[o]=g.coordinateData(p,s[o],x));if(k&&E)for(d=[],v&&(u=[]),o=0;o<m;o++)for(d[o]=0,v&&(u[o]=0),a=0;a<l;a++)(h=R[a])&&(0<=(h=h[o])||!v?d[o]+=h:h<0&&(u[o]+=h));for(o=0;o<l;o++)if(f={},y[o])f["dataStart"+c]=w,f["data"+c]=w,I[o].setAttributes(f);else{if(h=R[o],k){for(n=[],a=0;a<m;a++)h[a]||(h[a]=0),0<=h[a]||!v?(E&&d[a]&&(h[a]*=b/d[a]),w[a]=T[a],T[a]+=h[a],n[a]=T[a]):(E&&u[a]&&(h[a]*=b/u[a]),w[a]=P[a],P[a]+=h[a],n[a]=P[a]);f["dataStart"+c]=w,f["data"+c]=n,Ext.chart.Util.expandRange(C,w),Ext.chart.Util.expandRange(C,n)}else f["dataStart"+c]=w,f["data"+c]=h,Ext.chart.Util.expandRange(C,h);I[o].setAttributes(f)}}for(C=Ext.chart.Util.validateRange(C,g.defaultRange),g.dataRange[t]=C[0],g.dataRange[t+i]=C[1],(f={})["dataMin"+e]=C[0],f["dataMax"+e]=C[1],r=0;r<I.length;r++)I[r].setAttributes(f)}},getFields:function(e){var t,i,n=[],r=e.length;for(t=0;t<r;t++)i=this["get"+e[t]+"Field"](),Ext.isArray(i)?n.push.apply(n,i):n.push(i);return n},updateLabelOverflowPadding:function(e){var t;this.isConfiguring||(t=this.getLabel())&&t.setAttributes({labelOverflowPadding:e})},updateLabelData:function(){var e=this.getLabel();e&&e.setAttributes({labelOverflowPadding:this.getLabelOverflowPadding()}),this.callParent()},getSprites:function(){var e,t,i=this,n=i.getChart(),r=i.getFields(i.fieldCategoryY),o=i.getItemInstancing(),a=i.sprites,s=i.getHidden(),l=!1,d=r.length;if(!n)return[];for(e=0;e<d;e++)(t=a[e])||((t=i.createSprite()).setAttributes({zIndex:(i.reversedSpriteZOrder?-1:1)*e}),t.setField(r[e]),l=!0,s.push(!1),o?t.getMarker("items").getTemplate().setAttributes(i.getStyleByIndex(e)):t.setAttributes(i.getStyleByIndex(e)));return l&&i.updateHidden(s),a},getItemForPoint:function(e,t){var i,n,r,o,a=this.getSprites(),s=this.getStore(),l=this.getHidden(),d=1/0,u=null,c=-1,h=-1;for(r=0,o=a.length;r<o;r++)l[r]||(i=a[r].getNearestDataPoint(e,t))&&i.distance<d&&(d=i.distance,h=i.index,c=r);return-1<c&&(n=this.getYField(),u={series:this,sprite:a[c],category:this.getItemInstancing()?"items":"markers",index:h,record:s.getData().items[h],field:"string"==typeof n?n:n[c],distance:d}),u},provideLegendInfo:function(e){var t,i,n,r,o=this.getSprites(),a=this.getTitle(),s=this.getYField(),l=this.getHidden(),d=1===o.length;for(n=0;n<o.length;n++)i=(t=this.getStyleByIndex(n)).fillStyle,a&&(Ext.isArray(a)?r=a[n]:d&&(r=a)),a&&r||(r=Ext.isArray(s)?s[n]:this.getId()),e.push({name:r,mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||t.strokeStyle||"black",disabled:l[n],series:this.getId(),index:n})},onSpriteAnimationStart:function(e){this.spriteAnimationCount++,1===this.spriteAnimationCount&&this.fireEvent("animationstart")},onSpriteAnimationEnd:function(e){this.spriteAnimationCount--,0===this.spriteAnimationCount&&this.fireEvent("animationend")}}),Ext.define("Ext.chart.series.sprite.Series",{extend:"Ext.draw.sprite.Sprite",mixins:{markerHolder:"Ext.chart.MarkerHolder"},inheritableStatics:{def:{processors:{dataMinX:"number",dataMaxX:"number",dataMinY:"number",dataMaxY:"number",rangeX:"data",rangeY:"data",dataX:"data",dataY:"data",labels:"default",labelOverflowPadding:"number"},defaults:{dataMinX:0,dataMaxX:1,dataMinY:0,dataMaxY:1,rangeX:null,rangeY:null,dataX:null,dataY:null,labels:null,labelOverflowPadding:10},triggers:{dataX:"bbox",dataY:"bbox",dataMinX:"bbox",dataMaxX:"bbox",dataMinY:"bbox",dataMaxY:"bbox"}}},config:{store:null,series:null,field:null}}),Ext.define("Ext.chart.series.sprite.Cartesian",{extend:"Ext.chart.series.sprite.Series",inheritableStatics:{def:{processors:{selectionTolerance:"number",flipXY:"bool",renderer:"default",visibleMinX:"number",visibleMinY:"number",visibleMaxX:"number",visibleMaxY:"number",innerWidth:"number",innerHeight:"number"},defaults:{selectionTolerance:20,flipXY:!1,renderer:null,transformFillStroke:!1,visibleMinX:0,visibleMinY:0,visibleMaxX:1,visibleMaxY:1,innerWidth:1,innerHeight:1},triggers:{dataX:"dataX,bbox",dataY:"dataY,bbox",visibleMinX:"panzoom",visibleMinY:"panzoom",visibleMaxX:"panzoom",visibleMaxY:"panzoom",innerWidth:"panzoom",innerHeight:"panzoom"},updaters:{dataX:function(e){this.processDataX(),this.scheduleUpdater(e,"dataY",["dataY"])},dataY:function(){this.processDataY()},panzoom:function(e){var t=e.visibleMaxX-e.visibleMinX,i=e.visibleMaxY-e.visibleMinY,n=e.flipXY?e.innerHeight:e.innerWidth,r=e.flipXY?e.innerWidth:e.innerHeight,o=this.getSurface(),a=!!o&&o.getInherited().rtl;e.scalingCenterX=0,e.scalingCenterY=0,e.scalingX=n/t,e.scalingY=r/i,e.translationX=-e.visibleMinX*e.scalingX,e.translationY=-e.visibleMinY*e.scalingY,a&&!e.flipXY&&(e.scalingX*=-1,e.translationX*=-1,e.translationX+=n),this.applyTransformations(!0)}}}},processDataY:Ext.emptyFn,processDataX:Ext.emptyFn,updatePlainBBox:function(e){var t=this.attr;e.x=t.dataMinX,e.y=t.dataMinY,e.width=t.dataMaxX-t.dataMinX,e.height=t.dataMaxY-t.dataMinY},binarySearch:function(e){var t,i,n=this.attr.dataX,r=0,o=n.length;if(e<=n[0])return r;if(e>=n[o-1])return o-1;for(;r+1<o;){if((i=n[t=r+o>>1])===e)return t;i<e?r=t:o=t}return r},render:function(e,t,i){var n,r=this.attr,o=r.inverseMatrix.clone();o.appendMatrix(e.inverseMatrix),null!==r.dataX&&void 0!==r.dataX&&null!==r.dataY&&void 0!==r.dataY&&(o.getXX()*o.getYX()||o.getXY()*o.getYY()?Ext.Logger.warn("Cartesian Series sprite does not support rotation/sheering"):(n=(n=o.transformList([[i[0]-1,i[3]+1],[i[0]+i[2]+1,-1]]))[0].concat(n[1]),this.renderClipped(e,t,n,i)))},renderClipped:Ext.emptyFn,getIndexNearPoint:function(e,t){var i=this.getNearestDataPoint(e,t);return i?i.index:-1},getNearestDataPoint:function(e,t){var i,n,r,o,a,s,l,d,u,c=this.attr,h=this.getSeries(),f=this.getSurface(),g=this.boundMarkers.items,p=c.matrix,m=c.dataX,x=c.dataY,y=c.selectionTolerance,v=1/0,E=-1,b=null;if(g){for(s=m.length,d=h.reversedSpriteZOrder?(a=s-1,l=-1):(a=0,l=s,1);a!==l;a+=d)if(u=this.getMarkerBBox("items",a),o=f.inverseMatrix.transformPoint([e,t]),Ext.draw.Draw.isPointInBBox(o[0],o[1],u)){E=a,v=0;break}}else for(a=0,s=m.length;a<s;a++)o=p.transformPoint([m[a],x[a]]),n=e-(o=f.matrix.transformPoint(o))[0],r=t-o[1],i=Math.sqrt(n*n+r*r),y&&y<i||i<v&&(v=i,E=a);return-1<E&&(b={index:E,distance:v}),b}}),Ext.define("Ext.chart.series.sprite.StackedCartesian",{extend:"Ext.chart.series.sprite.Cartesian",inheritableStatics:{def:{processors:{groupCount:"number",groupOffset:"number",dataStartY:"data"},defaults:{selectionTolerance:20,groupCount:1,groupOffset:0,dataStartY:null},triggers:{dataStartY:"dataY,bbox"}}}}),Ext.define("Ext.chart.series.sprite.Area",{alias:"sprite.areaSeries",extend:"Ext.chart.series.sprite.StackedCartesian",inheritableStatics:{def:{processors:{step:"bool"},defaults:{selectionTolerance:0,step:!1}}},renderClipped:function(e,t,i){var n,r,o,a,s,l,d,u,c=this.getStore(),h=this.getSeries(),f=this.attr,g=f.dataX,p=f.dataY,m=f.dataStartY,x=f.matrix,y=x.elements[0],v=x.elements[4],E=x.elements[3],b=x.elements[5],C=this.surfaceMatrix,S={},w=Math.min(i[0],i[2]),T=Math.max(i[0],i[2]),P=Math.max(0,this.binarySearch(w)),k=Math.min(g.length-1,this.binarySearch(T)+1),I=f.renderer,R={store:c};if(t.beginPath(),l=g[P]*y+v,d=p[P]*E+b,t.moveTo(l,d),f.step)for(s=d,o=P;o<=k;o++)n=g[o]*y+v,r=p[o]*E+b,t.lineTo(n,s),t.lineTo(n,s=r);else for(o=P;o<=k;o++)n=g[o]*y+v,r=p[o]*E+b,t.lineTo(n,r);if(m)if(f.step)for(a=g[k]*y+v,o=k;P<=o;o--)n=g[o]*y+v,r=m[o]*E+b,t.lineTo(a,r),t.lineTo(a=n,r);else for(o=k;P<=o;o--)n=g[o]*y+v,r=m[o]*E+b,t.lineTo(n,r);else t.lineTo(g[k]*y+v,r),t.lineTo(g[k]*y+v,b),t.lineTo(l,b),t.lineTo(l,p[o]*E+b);if(f.transformFillStroke&&f.matrix.toContext(t),t.fill(),f.transformFillStroke&&f.inverseMatrix.toContext(t),t.beginPath(),t.moveTo(l,d),f.step)for(o=P;o<=k;o++)n=g[o]*y+v,r=p[o]*E+b,t.lineTo(n,s),t.lineTo(n,s=r),S.translationX=C.x(n,r),S.translationY=C.y(n,r),I&&(u=Ext.callback(I,null,[this,S,R,o],0,h),Ext.apply(S,u)),this.putMarker("markers",S,o,!I);else for(o=P;o<=k;o++)n=g[o]*y+v,r=p[o]*E+b,t.lineTo(n,r),S.translationX=C.x(n,r),S.translationY=C.y(n,r),I&&(u=Ext.callback(I,null,[this,S,R,o],0,h),Ext.apply(S,u)),this.putMarker("markers",S,o,!I);f.transformFillStroke&&f.matrix.toContext(t),t.stroke()}}),Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.StackedCartesian",alias:"series.area",type:"area",seriesType:"areaSeries",isArea:!0,requires:["Ext.chart.series.sprite.Area"],config:{splitStacks:!1}}),Ext.define("Ext.chart.series.sprite.Bar",{alias:"sprite.barSeries",extend:"Ext.chart.series.sprite.StackedCartesian",inheritableStatics:{def:{processors:{minBarWidth:"number",maxBarWidth:"number",minGapWidth:"number",radius:"number",inGroupGapWidth:"number"},defaults:{minBarWidth:2,maxBarWidth:100,minGapWidth:5,inGroupGapWidth:3,radius:0}}},drawLabel:function(e,t,i,n,r,o){var a,s,l,d,u,c,h,f,g,p=this,m=p.attr,x=p.getMarker("labels"),y=x.getTemplate(),v=p.labelCfg||(p.labelCfg={}),E=p.surfaceMatrix,b=m.labelOverflowPadding,C=y.attr.display,S=y.attr.orientation,w="horizontal"===S&&m.flipXY||"vertical"===S&&!m.flipXY||!S,T=y.getCalloutLine();switch(v.x=E.x(t,n),v.y=E.y(t,n),d=T?T.length:0,m.flipXY?v.rotationRads=0:v.rotationRads=.5*-Math.PI,v.calloutVertical=!m.flipXY,S){case"horizontal":v.rotationRads=0,v.calloutVertical=!1;break;case"vertical":v.rotationRads=.5*-Math.PI,v.calloutVertical=!0}v.text=e,y.attr.renderer&&(x.get(r)||x.putMarkerFor("labels",{},r),h=[e,x,v,{store:p.getStore()},r],"string"==typeof(u=Ext.callback(y.attr.renderer,null,h,0,p.getSeries()))?v.text=u:"object"==typeof u&&("text"in u&&(v.text=u.text),c=!0)),(l=p.getMarkerBBox("labels",r,!0))||(p.putMarker("labels",v,r),l=p.getMarkerBBox("labels",r,!0)),s=0<d?d:0===d?(w?l.width:l.height)/2:(w?l.width:l.height)/2+b,f=2*b,n<i&&(s=-s,f=-f),a=w?"insideStart"===C?i+s:n-s:"insideStart"===C?i+f:n-f,v.x=E.x(t,a),v.y=E.y(t,a),g=this.getCalloutYPos(C,i,n,s,o),v.calloutStartX=E.x(t,g.start),v.calloutStartY=E.y(t,g.start),v.calloutPlaceX=E.x(t,g.place),v.calloutPlaceY=E.y(t,g.place),v.calloutColor=T&&T.color||p.attr.fillStyle,T?T.width&&(v.calloutWidth=T.width):v.calloutColor="none",v.callout=+(Math.abs(n-i)<=Math.abs(2*s)||"outside"===C),c&&Ext.apply(v,u),p.putMarker("labels",v,r)},callOutObj:{start:0,place:0},getCalloutYPos:function(e,t,i,n,r){var o=this.callOutObj,a="insideStart"===e,s=a?t:i,l=a?t-n:i+n,d=l+2*n;return this.fromSelf||a||!(d<=r[1]||d>=r[3])?(o.start=s,o.place=l):(this.fromSelf=!0,o=this.getCalloutYPos("insideStart",t,i,n,r),delete this.fromSelf),o},drawBar:function(e,t,i,n,r,o,a,s){var l,d={},u=this.attr.renderer;d.x=n,d.y=r,d.width=o-n,d.height=a-r,d.radius=this.attr.radius,u&&(l=Ext.callback(u,null,[this,d,{store:this.getStore()},s],0,this.getSeries()),Ext.apply(d,l)),this.putMarker("items",d,s,!u)},renderClipped:function(e,t,i,n){if(!this.cleanRedraw){var r,o,a,s,l,d,u,c,h=this.attr,f=h.dataX,g=h.dataY,p=h.labels,m=h.dataStartY,x=h.groupCount,y=h.groupOffset-.5*(x-1),v=h.inGroupGapWidth,E=t.lineWidth,b=h.matrix,C=b.elements[0],S=b.elements[3],w=b.elements[4],T=e.roundPixel(b.elements[5])-1,P=Math.abs(C)-h.minGapWidth,k=(Math.min(P,h.maxBarWidth)-v*(x-1))/x,I=e.roundPixel(Math.max(h.minBarWidth,k)),R=this.surfaceMatrix,M=.5*h.lineWidth,A=Math.min(i[0],i[2]),D=Math.max(i[0],i[2]),F=Math.max(0,Math.floor(A)),L=Math.min(f.length-1,Math.ceil(D)),O=p&&this.getMarker("labels");for(l=F;l<=L;l++)u=m?m[l]:0,c=g[l],d=f[l]*C+w+y*(I+v),r=e.roundPixel(d-I/2)+M,s=e.roundPixel(c*S+T+E),o=e.roundPixel(d+I/2)-M,a=e.roundPixel(u*S+T+E),this.drawBar(t,e,i,r,s-M,o,a-M,l),O&&null!=p[l]&&this.drawLabel(p[l],d,a,s,l,n),this.putMarker("markers",{translationX:R.x(d,s),translationY:R.y(d,s)},l,!0)}}}),Ext.define("Ext.chart.series.Bar",{extend:"Ext.chart.series.StackedCartesian",alias:"series.bar",type:"bar",seriesType:"barSeries",isBar:!0,requires:["Ext.chart.series.sprite.Bar","Ext.draw.sprite.Rect"],config:{itemInstancing:{type:"rect",animation:{customDurations:{x:0,y:0,width:0,height:0,radius:0}}}},getItemForPoint:function(e,t){var i,n;if(this.getSprites().length)return n=(i=this.getChart()).getInnerPadding(),e+=i.getInherited().rtl?n.right:-n.left,t+=n.bottom,this.callParent(arguments)},updateXAxis:function(e){this.is3D||e.isCategory||Ext.raise("'bar' series should be used with a 'category' axis. Please refer to the bar series docs."),e.setExpandRangeBy(.5),this.callParent(arguments)},updateHidden:function(e){this.callParent(arguments),this.updateStacked()},updateStacked:function(e){var t,i,n={},r=this.getSprites(),o=r.length,a=[];for(i=0;i<o;i++)r[i].attr.hidden||a.push(r[i]);if(t=a.length,this.getStacked())for(n.groupCount=1,i=n.groupOffset=0;i<t;i++)a[i].setAttributes(n);else for(n.groupCount=t,i=0;i<t;i++)a[n.groupOffset=i].setAttributes(n);this.callParent(arguments)}}),Ext.define("Ext.chart.series.sprite.Bar3D",{extend:"Ext.chart.series.sprite.Bar",alias:"sprite.bar3dSeries",requires:["Ext.draw.gradient.Linear"],inheritableStatics:{def:{processors:{depthWidthRatio:"number",saturationFactor:"number",brightnessFactor:"number",colorSpread:"number"},defaults:{depthWidthRatio:1/3,saturationFactor:1,brightnessFactor:1,colorSpread:1,transformFillStroke:!0},triggers:{groupCount:"panzoom"},updaters:{panzoom:function(e){var t=e.visibleMaxX-e.visibleMinX,i=e.visibleMaxY-e.visibleMinY,n=e.flipXY?e.innerHeight:e.innerWidth,r=e.flipXY?e.innerWidth:e.innerHeight,o=this.getSurface(),a=!!o&&o.getInherited().rtl;a&&!e.flipXY?e.translationX=n+e.visibleMinX*n/t:e.translationX=-e.visibleMinX*n/t,e.translationY=-e.visibleMinY*(r-this.depth)/i,e.scalingX=(a&&!e.flipXY?-1:1)*n/t,e.scalingY=(r-this.depth)/i,e.scalingCenterX=0,e.scalingCenterY=0,this.applyTransformations(!0)}}}},config:{showStroke:!1},depth:0,drawBar:function(e,t,i,n,r,o,a,s){var l,d,u,c,h=this.attr,f={},g=h.renderer;f.x=.5*(n+o),f.y=r,f.width=.75*(o-n),f.height=a-r,f.depth=d=f.width*h.depthWidthRatio,f.orientation=h.flipXY?"horizontal":"vertical",f.saturationFactor=h.saturationFactor,f.brightnessFactor=h.brightnessFactor,f.colorSpread=h.colorSpread,d!==this.depth&&(this.depth=d,(u=this.getSeries()).fireEvent("depthchange",u,d)),g&&(c=[this,f,{store:this.getStore()},s],l=Ext.callback(g,null,c,0,this.getSeries()),Ext.apply(f,l)),this.putMarker("items",f,s,!g)}}),Ext.define("Ext.chart.sprite.Bar3D",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.bar3d",type:"bar3d",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number",depth:"number",orientation:"enums(vertical,horizontal)",showStroke:"bool",saturationFactor:"number",brightnessFactor:"number",colorSpread:"number"},triggers:{x:"bbox",y:"bbox",width:"bbox",height:"bbox",depth:"bbox",orientation:"bbox"},defaults:{x:0,y:0,width:8,height:8,depth:8,orientation:"vertical",showStroke:!1,saturationFactor:1,brightnessFactor:1,colorSpread:1,lineJoin:"bevel"}}},constructor:function(e){this.callParent([e]),this.topGradient=new Ext.draw.gradient.Linear({}),this.rightGradient=new Ext.draw.gradient.Linear({}),this.frontGradient=new Ext.draw.gradient.Linear({})},updatePlainBBox:function(e){var t=this.attr,i=t.x,n=t.y,r=t.width,o=t.height,a=t.depth;e.x=i-.5*r,e.width=r+a,0<o?(e.y=n,e.height=o+a):(e.y=n+a,e.height=o-a)},render:function(e,t){var i,n,r,o=this,a=o.attr,s=a.x,l=a.y,d=l+a.height,u=l<d,c=.5*a.width,h=a.depth,f="horizontal"===a.orientation,g=a.globalAlpha<1,p=a.fillStyle,m=Ext.util.Color.create(p.isGradient?p.getStops()[0].color:p),x=a.saturationFactor,y=a.brightnessFactor,v=a.colorSpread,E=m.getHSV(),b={};a.showStroke||(t.strokeStyle=Ext.util.Color.RGBA_NONE),u&&(r=l,l=d,d=r),o.topGradient.setDegrees(f?0:80),o.topGradient.setStops([{offset:0,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*x,0,1),Ext.Number.constrain((.5+.1*v)*y,0,1))},{offset:1,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*x,0,1),Ext.Number.constrain((.5-.11*v)*y,0,1))}]),o.rightGradient.setDegrees(f?45:90),o.rightGradient.setStops([{offset:0,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*x,0,1),Ext.Number.constrain((.5-.14*v)*y,0,1))},{offset:1,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*(1+.4*v)*x,0,1),Ext.Number.constrain((.5-.32*v)*y,0,1))}]),f?o.frontGradient.setDegrees(0):o.frontGradient.setRadians(Math.atan2(l-d,2*c)),o.frontGradient.setStops([{offset:0,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*(1-.1*v)*x,0,1),Ext.Number.constrain((.5+.1*v)*y,0,1))},{offset:1,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*(1+.1*v)*x,0,1),Ext.Number.constrain((.5-.23*v)*y,0,1))}]),(g||u)&&(t.beginPath(),t.moveTo(s-c,d),t.lineTo(s-c+h,d+h),t.lineTo(s+c+h,d+h),t.lineTo(s+c,d),t.closePath(),b.x=s-c,b.y=l,b.width=c+h,b.height=h,t.fillStyle=(f?o.rightGradient:o.topGradient).generateGradient(t,b),t.fillStroke(a)),g&&(t.beginPath(),t.moveTo(s-c,l),t.lineTo(s-c+h,l+h),t.lineTo(s-c+h,d+h),t.lineTo(s-c,d),t.closePath(),b.x=s+c,b.y=d,b.width=h,b.height=l+h-d,t.fillStyle=(f?o.topGradient:o.rightGradient).generateGradient(t,b),t.fillStroke(a)),n=e.roundPixel(l),t.beginPath(),t.moveTo(s-c,n),t.lineTo(s-c+h,l+h),t.lineTo(s+c+h,l+h),t.lineTo(s+c,n),t.closePath(),b.x=s-c,b.y=l,b.width=c+h,b.height=h,t.fillStyle=(f?o.rightGradient:o.topGradient).generateGradient(t,b),t.fillStroke(a),i=e.roundPixel(s+c),t.beginPath(),t.moveTo(i,e.roundPixel(l)),t.lineTo(s+c+h,l+h),t.lineTo(s+c+h,d+h),t.lineTo(i,d),t.closePath(),b.x=s+c,b.y=d,b.width=h,b.height=l+h-d,t.fillStyle=(f?o.topGradient:o.rightGradient).generateGradient(t,b),t.fillStroke(a),i=e.roundPixel(s+c),n=e.roundPixel(l),t.beginPath(),t.moveTo(s-c,d),t.lineTo(s-c,n),t.lineTo(i,n),t.lineTo(i,d),t.closePath(),b.x=s-c,b.y=d,b.width=2*c,b.height=l-d,t.fillStyle=o.frontGradient.generateGradient(t,b),t.fillStroke(a)}}),Ext.define("Ext.chart.series.Bar3D",{extend:"Ext.chart.series.Bar",requires:["Ext.chart.series.sprite.Bar3D","Ext.chart.sprite.Bar3D"],alias:"series.bar3d",type:"bar3d",seriesType:"bar3dSeries",is3D:!0,config:{itemInstancing:{type:"bar3d",animation:{customDurations:{x:0,y:0,width:0,height:0,depth:0}}},highlightCfg:{opacity:.8}},reversedSpriteZOrder:!1,updateXAxis:function(e,t){"category3d"!==e.type&&Ext.raise("'bar3d' series should be used with a 'category3d' axis. Please refer to the 'bar3d' series docs."),this.callParent([e,t])},getDepth:function(){var e=this.getSprites()[0];return e&&e.depth||0}}),Ext.define("Ext.chart.series.sprite.BoxPlot",{alias:"sprite.boxplotSeries",extend:"Ext.chart.series.sprite.Cartesian",inheritableStatics:{def:{processors:{dataLow:"data",dataQ1:"data",dataQ3:"data",dataHigh:"data",minBoxWidth:"number",maxBoxWidth:"number",minGapWidth:"number"},aliases:{dataMedian:"dataY"},defaults:{minBoxWidth:2,maxBoxWidth:40,minGapWidth:5}}},renderClipped:function(e,t,i){if(!this.cleanRedraw){var n,r,o,a,s,l,d,u,c,h=this.attr,f=this.getSeries(),g=h.renderer,p={store:this.getStore()},m={},x=h.dataX,y=h.dataLow,v=h.dataQ1,E=h.dataY,b=h.dataQ3,C=h.dataHigh,S=Math.min(i[0],i[2]),w=Math.max(i[0],i[2]),T=Math.max(0,Math.floor(S)),P=Math.min(x.length-1,Math.ceil(w)),k=h.matrix,I=k.elements[0],R=k.elements[3],M=k.elements[4],A=k.elements[5],D=Math.abs(I)-h.minGapWidth,F=Math.min(D,h.maxBoxWidth),L=Math.round(Math.max(h.minBoxWidth,F));for(g&&(d=[this,m,p]),c=T;c<=P;c++)n=x[c]*I+M,r=y[c]*R+A,o=v[c]*R+A,a=E[c]*R+A,s=b[c]*R+A,l=C[c]*R+A,m.x=n,m.low=r,m.q1=o,m.median=a,m.q3=s,m.high=l,m.boxWidth=L,g&&(d[3]=c,u=Ext.callback(g,null,d,0,f),Ext.apply(m,u)),this.putMarker("items",m,c,!g)}}}),Ext.define("Ext.chart.sprite.BoxPlot",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.boxplot",type:"boxplot",inheritableStatics:{def:{processors:{x:"number",low:"number",q1:"number",median:"number",q3:"number",high:"number",boxWidth:"number",whiskerWidth:"number",crisp:"bool"},triggers:{x:"bbox",low:"bbox",high:"bbox",boxWidth:"bbox",whiskerWidth:"bbox",crisp:"bbox"},defaults:{x:0,low:-20,q1:-10,median:0,q3:10,high:20,boxWidth:12,whiskerWidth:.5,crisp:!0,fillStyle:"#ccc",strokeStyle:"#000"}}},updatePlainBBox:function(e){var t=this.attr,i=t.lineWidth/2,n=t.x-t.boxWidth/2-i,r=t.high-i,o=t.boxWidth+t.lineWidth,a=t.low-t.high+t.lineWidth;e.x=n,e.y=r,e.width=o,e.height=a},render:function(e,t){var i=this.attr;i.matrix.toContext(t),i.crisp?this.crispRender(e,t):this.softRender(e,t);var n=i.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;n&&(this.attr.inverseMatrix.toContext(t),n.bbox&&this.renderBBox(e,t))},softRender:function(e,t){var i=this.attr,n=i.x,r=i.low,o=i.q1,a=i.median,s=i.q3,l=i.high,d=i.boxWidth/2,u=i.boxWidth*i.whiskerWidth/2,c=t.getLineDash();t.setLineDash([]),t.beginPath(),t.moveTo(n-d,s),t.lineTo(n+d,s),t.lineTo(n+d,o),t.lineTo(n-d,o),t.closePath(),t.fillStroke(i,!0),t.setLineDash(c),t.beginPath(),t.moveTo(n,s),t.lineTo(n,l),t.moveTo(n,o),t.lineTo(n,r),t.stroke(),t.setLineDash([]),t.beginPath(),t.moveTo(n-u,r),t.lineTo(n+u,r),t.moveTo(n-d,a),t.lineTo(n+d,a),t.moveTo(n-u,l),t.lineTo(n+u,l),t.stroke()},alignLine:function(e,t){return t=t||this.attr.lineWidth,e=Math.round(e),t%2==1&&(e-=.5),e},crispRender:function(e,t){var i=this.attr,n=i.x,r=this.alignLine(i.low),o=this.alignLine(i.q1),a=this.alignLine(i.median),s=this.alignLine(i.q3),l=this.alignLine(i.high),d=i.boxWidth/2,u=i.boxWidth*i.whiskerWidth/2,c=this.alignLine(n),h=this.alignLine(n-d),f=this.alignLine(n+d),g=c+Math.round(-u),p=c+Math.round(u),m=t.getLineDash();t.setLineDash([]),t.beginPath(),t.moveTo(h,s),t.lineTo(f,s),t.lineTo(f,o),t.lineTo(h,o),t.closePath(),t.fillStroke(i,!0),t.setLineDash(m),t.beginPath(),t.moveTo(c,s),t.lineTo(c,l),t.moveTo(c,o),t.lineTo(c,r),t.stroke(),t.setLineDash([]),t.beginPath(),t.moveTo(g,r),t.lineTo(p,r),t.moveTo(h,a),t.lineTo(f,a),t.moveTo(g,l),t.lineTo(p,l),t.stroke()}}),Ext.define("Ext.chart.series.BoxPlot",{extend:"Ext.chart.series.Cartesian",alias:"series.boxplot",type:"boxplot",seriesType:"boxplotSeries",isBoxPlot:!0,requires:["Ext.chart.series.sprite.BoxPlot","Ext.chart.sprite.BoxPlot"],config:{itemInstancing:{type:"boxplot",animation:{customDurations:{x:0,low:0,q1:0,median:0,q3:0,high:0}}},lowField:"low",q1Field:"q1",medianField:"median",q3Field:"q3",highField:"high"},fieldCategoryY:["Low","Q1","Median","Q3","High"],updateXAxis:function(e){e.setExpandRangeBy(.5),this.callParent(arguments)}}),Ext.define("Ext.draw.LimitedCache",{config:{limit:40,feeder:function(){return 0},scope:null},cache:null,constructor:function(e){this.cache={},this.cache.list=[],this.cache.tail=0,this.initConfig(e)},get:function(e){var t=this.cache,i=this.getLimit(),n=this.getFeeder(),r=this.getScope()||this;return t[e]||(t.list[t.tail]&&delete t[t.list[t.tail].cacheId],t[e]=t.list[t.tail]={value:n.apply(r,Array.prototype.slice.call(arguments,1)),cacheId:e},t.tail++,t.tail===i&&(t.tail=0)),t[e].value},clear:function(){this.cache={},this.cache.list=[],this.cache.tail=0}}),Ext.define("Ext.draw.SegmentTree",{config:{strategy:"double"},time:function(e,t,i,n,r,o,a){var s,l,d,u,c,h,f=0,g=new Date(i[e.startIdx[0]]),p=new Date(i[e.endIdx[t-1]]),m=Ext.Date,x=[[m.MILLI,1,"ms1",null],[m.MILLI,2,"ms2","ms1"],[m.MILLI,5,"ms5","ms1"],[m.MILLI,10,"ms10","ms5"],[m.MILLI,50,"ms50","ms10"],[m.MILLI,100,"ms100","ms50"],[m.MILLI,500,"ms500","ms100"],[m.SECOND,1,"s1","ms500"],[m.SECOND,10,"s10","s1"],[m.SECOND,30,"s30","s10"],[m.MINUTE,1,"mi1","s10"],[m.MINUTE,5,"mi5","mi1"],[m.MINUTE,10,"mi10","mi5"],[m.MINUTE,30,"mi30","mi10"],[m.HOUR,1,"h1","mi30"],[m.HOUR,6,"h6","h1"],[m.HOUR,12,"h12","h6"],[m.DAY,1,"d1","h12"],[m.DAY,7,"d7","d1"],[m.MONTH,1,"mo1","d1"],[m.MONTH,3,"mo3","mo1"],[m.MONTH,6,"mo6","mo3"],[m.YEAR,1,"y1","mo3"],[m.YEAR,5,"y5","y1"],[m.YEAR,10,"y10","y5"],[m.YEAR,100,"y100","y10"]],y=f,v=t,E=e.startIdx,b=e.endIdx,C=e.minIdx,S=e.maxIdx,w=e.open,T=e.close,P=e.minX,k=e.minY,I=e.maxX,R=e.maxY;for(d=0;f+1<t&&d<x.length;d++)if(g=new Date(i[E[0]]),u=x[d],g=m.align(g,u[0],u[1]),!(m.diff(g,p,u[0])>2*i.length*u[1])){for(l=u[3]&&e.map["time_"+u[3]]?(s=e.map["time_"+u[3]][0],e.map["time_"+u[3]][1]):(s=y,v),h=g,E[f=t]=E[s],b[t]=b[s],C[t]=C[s],S[t]=S[s],w[t]=w[s],T[t]=T[s],P[t]=P[s],k[t]=k[s],I[t]=I[s],R[t]=R[s],h=Ext.Date.add(h,u[0],u[1]),c=s+1;c<l;c++)i[b[c]]<+h?(b[t]=b[c],T[t]=T[c],R[c]>R[t]&&(R[t]=R[c],I[t]=I[c],S[t]=S[c]),k[c]<k[t]&&(k[t]=k[c],P[t]=P[c],C[t]=C[c])):(E[++t]=E[c],b[t]=b[c],C[t]=C[c],S[t]=S[c],w[t]=w[c],T[t]=T[c],P[t]=P[c],k[t]=k[c],I[t]=I[c],R[t]=R[c],h=Ext.Date.add(h,u[0],u[1]));f<t&&(e.map["time_"+u[2]]=[f,t])}},double:function(e,t,i,n,r,o,a){for(var s,l,d,u,c,h,f,g,p,m,x,y,v=0,E=1;v+1<t;){for(s=v,v=t,E+=E,l=s;l<v;l+=2)y=l===v-1?(d=e.startIdx[l],u=e.endIdx[l],c=e.minIdx[l],h=e.maxIdx[l],f=e.open[l],g=e.close[l],p=e.minX[l],m=e.minY[l],x=e.maxX[l],e.maxY[l]):(d=e.startIdx[l],u=e.endIdx[l+1],f=e.open[l],g=e.close[l],m=e.minY[l]<=e.minY[l+1]?(c=e.minIdx[l],p=e.minX[l],e.minY[l]):(c=e.minIdx[l+1],p=e.minX[l+1],e.minY[l+1]),e.maxY[l]>=e.maxY[l+1]?(h=e.maxIdx[l],x=e.maxX[l],e.maxY[l]):(h=e.maxIdx[l+1],x=e.maxX[l+1],e.maxY[l+1])),e.startIdx[t]=d,e.endIdx[t]=u,e.minIdx[t]=c,e.maxIdx[t]=h,e.open[t]=f,e.close[t]=g,e.minX[t]=p,e.minY[t]=m,e.maxX[t]=x,e.maxY[t]=y,t++;e.map["double_"+E]=[v,t]}},none:Ext.emptyFn,aggregateData:function(e,t,i,n,r){var o,a,s=e.length,l=[],d=[],u=[],c=[],h=[],f=[],g=[],p=[],m=[],x=[],y={startIdx:l,endIdx:d,minIdx:u,maxIdx:c,open:h,minX:f,minY:g,maxX:p,maxY:m,close:x},v=1/0,E=-1/0;for(o=0;o<s;o++)a=e[o],h[c[u[d[l[o]=o]=o]=o]=o]=t[o],f[o]=a,g[o]=n[o],p[o]=a,m[o]=i[o],x[o]=r[o],a<v&&(v=a),E<a&&(E=a);return y.map={original:[0,s]},y.range=Math.abs(E-v),s&&this[this.getStrategy()](y,s,e,t,i,n,r),y},binarySearch:function(e,t,i,n,r){var o,a,s=this.dataX;if(n<=s[e[0]])return t;if(n>=s[e[i-1]])return i-1;for(;t+1<i;){if((a=s[e[o=t+i>>1]])===n)return o;a<n?t=o:i=o}return r?t:i},constructor:function(e){this.initConfig(e)},setData:function(e,t,i,n,r){i||(r=n=i=t),this.dataX=e,this.dataOpen=t,this.dataHigh=i,this.dataLow=n,this.dataClose=r,e.length===i.length&&e.length===n.length&&(this.cache=this.aggregateData(e,t,i,n,r))},getAggregation:function(e,t,i){if(!this.cache)return null;var n,r,o,a,s=1/0,l=this.cache,d=l.range,u=l.map,c=u.original;for(n in u)0!=(o=(r=u[n])[1]-r[0]-1)&&i<=(a=d/o)&&a<s&&(c=r,s=a);return{data:l,start:Math.max(this.binarySearch(l.startIdx,c[0],c[1],e,!0),c[0]),end:Math.min(this.binarySearch(l.endIdx,c[0],c[1],t,!1)+1,c[1])}}}),Ext.define("Ext.chart.series.sprite.Aggregative",{extend:"Ext.chart.series.sprite.Cartesian",requires:["Ext.draw.LimitedCache","Ext.draw.SegmentTree"],inheritableStatics:{def:{processors:{dataHigh:"data",dataLow:"data",dataClose:"data"},aliases:{dataOpen:"dataY"},defaults:{dataHigh:null,dataLow:null,dataClose:null}}},config:{aggregator:{}},applyAggregator:function(e,t){return Ext.factory(e,Ext.draw.SegmentTree,t)},constructor:function(){this.callParent(arguments)},processDataY:function(){var e,t=this.attr,i=t.dataHigh,n=t.dataLow,r=t.dataClose,o=t.dataY;this.callParent(arguments),t.dataX&&o&&0<o.length&&(e=this.getAggregator(),i?e.setData(t.dataX,t.dataY,i,n,r):e.setData(t.dataX,t.dataY))},getGapWidth:function(){return 1},renderClipped:function(e,t,i,n){var r=Math.min(i[0],i[2]),o=Math.max(i[0],i[2]),a=this.getAggregator(),s=a&&a.getAggregation(r,o,(o-r)/n[2]*this.getGapWidth());s&&(this.dataStart=s.data.startIdx[s.start],this.dataEnd=s.data.endIdx[s.end-1],this.renderAggregates(s.data,s.start,s.end,e,t,i,n))}}),Ext.define("Ext.chart.series.sprite.CandleStick",{alias:"sprite.candlestickSeries",extend:"Ext.chart.series.sprite.Aggregative",inheritableStatics:{def:{processors:{raiseStyle:function(e,t){return Ext.merge({},t||{},e)},dropStyle:function(e,t){return Ext.merge({},t||{},e)},barWidth:"number",padding:"number",ohlcType:"enums(candlestick,ohlc)"},defaults:{raiseStyle:{strokeStyle:"green",fillStyle:"green"},dropStyle:{strokeStyle:"red",fillStyle:"red"},barWidth:15,padding:3,lineJoin:"miter",miterLimit:5,ohlcType:"candlestick"},triggers:{raiseStyle:"raiseStyle",dropStyle:"dropStyle"},updaters:{raiseStyle:function(){var e=this.raiseTemplate;e&&e.setAttributes(this.attr.raiseStyle)},dropStyle:function(){var e=this.dropTemplate;e&&e.setAttributes(this.attr.dropStyle)}}}},candlestick:function(e,t,i,n,r,o,a){var s=Math.min(t,r),l=Math.max(t,r);e.moveTo(o,n),e.lineTo(o,s),e.moveTo(o+a,l),e.lineTo(o+a,s),e.lineTo(o-a,s),e.lineTo(o-a,l),e.closePath(),e.moveTo(o,i),e.lineTo(o,l)},ohlc:function(e,t,i,n,r,o,a){e.moveTo(o,i),e.lineTo(o,n),e.moveTo(o,t),e.lineTo(o-a,t),e.moveTo(o,r),e.lineTo(o+a,r)},constructor:function(){var e=Ext.draw.sprite.Rect;this.callParent(arguments),this.raiseTemplate=new e({parent:this}),this.dropTemplate=new e({parent:this})},getGapWidth:function(){var e=this.attr;return e.barWidth+e.padding},renderAggregates:function(e,t,i,n,r,o){var a,s,l,d,u,c,h,f,g,p=this,m=p.attr,x=m.ohlcType,y=p.getSeries(),v=m.matrix,E=v.getXX(),b=v.getYY(),C=v.getDX(),S=v.getDY(),w=Math.round(.5*m.barWidth),T=m.dataX,P=e.open,k=e.close,I=e.maxY,R=e.minY,M=e.startIdx,A=m.lineWidth*n.devicePixelRatio/2,D=m.renderer,F=D&&{};for(p.rendererData=p.rendererData||{store:p.getStore()},A-=Math.floor(A),r.save(),(g=p.raiseTemplate).useAttributes(r,o),D||r.beginPath(),f=t;f<i;f++)P[f]<=k[f]&&(l=Math.round(P[f]*b+S)+A,d=Math.round(I[f]*b+S)+A,u=Math.round(R[f]*b+S)+A,c=Math.round(k[f]*b+S)+A,h=Math.round(T[M[f]]*E+C)+A,D&&(r.save(),r.beginPath(),F.open=l,F.high=d,F.low=u,F.close=c,F.mid=h,F.halfWidth=w,a=[p,F,p.rendererData,f],s=Ext.callback(D,null,a,0,y),Ext.apply(r,s)),p[x](r,l,d,u,c,h,w),D&&(r.fillStroke(g.attr),r.restore()));for(D||r.fillStroke(g.attr),r.restore(),r.save(),(g=p.dropTemplate).useAttributes(r,o),D||r.beginPath(),f=t;f<i;f++)P[f]>k[f]&&(l=Math.round(P[f]*b+S)+A,d=Math.round(I[f]*b+S)+A,u=Math.round(R[f]*b+S)+A,c=Math.round(k[f]*b+S)+A,h=Math.round(T[M[f]]*E+C)+A,D&&(r.save(),r.beginPath(),F.open=l,F.high=d,F.low=u,F.close=c,F.mid=h,F.halfWidth=w,a=[p,F,p.rendererData,f],s=Ext.callback(D,null,a,0,p.getSeries()),Ext.apply(r,s)),p[x](r,l,d,u,c,h,w),D&&(r.fillStroke(g.attr),r.restore()));D||r.fillStroke(g.attr),r.restore()}}),Ext.define("Ext.chart.series.CandleStick",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.series.sprite.CandleStick"],alias:"series.candlestick",type:"candlestick",seriesType:"candlestickSeries",isCandleStick:!0,config:{openField:null,highField:null,lowField:null,closeField:null},fieldCategoryY:["Open","High","Low","Close"],themeColorCount:function(){return 2}}),Ext.define("Ext.chart.series.Polar",{extend:"Ext.chart.series.Series",config:{rotation:0,radius:null,center:[0,0],offsetX:0,offsetY:0,showInLegend:!0,xField:null,yField:null,angleField:null,radiusField:null,xAxis:null,yAxis:null},directions:["X","Y"],fieldCategoryX:["X"],fieldCategoryY:["Y"],deprecatedConfigs:{field:"angleField",lengthField:"radiusField"},constructor:function(e){var t,i=this.self.getConfigurator().configs;if(e)for(t in this.deprecatedConfigs)t in e&&!(e in i)&&Ext.raise("'"+t+"' config has been deprecated. Please use the '"+this.deprecatedConfigs[t]+"' config instead.");this.callParent([e])},getXField:function(){return this.getAngleField()},updateXField:function(e){this.setAngleField(e)},getYField:function(){return this.getRadiusField()},updateYField:function(e){this.setRadiusField(e)},applyXAxis:function(e,t){return this.getChart().getAxis(e)||t},applyYAxis:function(e,t){return this.getChart().getAxis(e)||t},getXRange:function(){return[this.dataRange[0],this.dataRange[2]]},getYRange:function(){return[this.dataRange[1],this.dataRange[3]]},themeColorCount:function(){var e=this.getStore();return e&&e.getCount()||0},isStoreDependantColorCount:!0,getDefaultSpriteConfig:function(){return{type:this.seriesType,renderer:this.getRenderer(),centerX:0,centerY:0,rotationCenterX:0,rotationCenterY:0}},applyRotation:function(e){return Ext.draw.sprite.AttributeParser.angle(Ext.draw.Draw.rad(e))},updateRotation:function(e){var t=this.getSprites();t&&t[0]&&t[0].setAttributes({baseRotation:e})}}),Ext.define("Ext.chart.series.Gauge",{alias:"series.gauge",extend:"Ext.chart.series.Polar",type:"gauge",seriesType:"pieslice",requires:["Ext.draw.sprite.Sector"],config:{needle:!1,needleLength:90,needleWidth:4,donut:30,showInLegend:!1,value:null,colors:null,sectors:null,minimum:0,maximum:100,rotation:0,totalAngle:Math.PI/2,rect:[0,0,1,1],center:[.5,.75],radius:.5,wholeDisk:!1},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},updateNeedle:function(e){var t=this.getSprites(),i=this.valueToAngle(this.getValue());t&&t.length&&(t[0].setAttributes({startAngle:e?i:0,endAngle:i,strokeOpacity:e?1:0,lineWidth:e?this.getNeedleWidth():0}),this.doUpdateStyles())},themeColorCount:function(){var e=this.getStore();return(e&&e.getCount()||0)+(this.getNeedle()?0:1)},updateColors:function(e,t){var i,n=this.getSectors(),r=n&&n.length,o=this.getSprites(),a=Ext.Array.clone(e),s=e&&e.length;if(s&&e[0]){for(i=0;i<r;i++)a[i+1]=n[i].color||a[i+1]||e[i%s];o.length&&o[0].setAttributes({strokeStyle:a[0]}),this.setSubStyle({fillStyle:a,strokeStyle:a}),this.doUpdateStyles()}},updateRect:function(e){var t,i,n,r=this.getWholeDisk()?Math.PI:this.getTotalAngle()/2,o=this.getDonut()/100;i=r<=Math.PI/2?(t=2*Math.sin(r),1-o*Math.cos(r)):(t=2,1-Math.cos(r)),n=Math.min(e[2]/t,e[3]/i),this.setRadius(n),this.setCenter([e[2]/2,n+(e[3]-i*n)/2])},updateCenter:function(e){this.setStyle({centerX:e[0],centerY:e[1],rotationCenterX:e[0],rotationCenterY:e[1]}),this.doUpdateStyles()},updateRotation:function(e){this.setStyle({rotationRads:e-(this.getTotalAngle()+Math.PI)/2}),this.doUpdateStyles()},doUpdateShape:function(e,t){var i,n=this.getSectors(),r=n&&n.length||0;for(i=[e*(this.getNeedleLength()/100),e];r--;)i.push(e);this.setSubStyle({endRho:i,startRho:e/100*t}),this.doUpdateStyles()},updateRadius:function(e){var t=this.getDonut();this.doUpdateShape(e,t)},updateDonut:function(e){var t=this.getRadius();this.doUpdateShape(t,e)},valueToAngle:function(e){return e=this.applyValue(e),this.getTotalAngle()*(e-this.getMinimum())/(this.getMaximum()-this.getMinimum())},applyValue:function(e){return Math.min(this.getMaximum(),Math.max(e,this.getMinimum()))},updateValue:function(e){var t=this.getNeedle(),i=this.valueToAngle(e),n=this.getSprites();n[0].getRendererData().value=e,n[0].setAttributes({startAngle:t?i:0,endAngle:i}),this.doUpdateStyles()},processData:function(){var e,t,i,n,r,o,a,s=this.getStore(),l=s&&s.first();l&&(o=this.getXField())&&(a=l.get(o)),(i=this.getXAxis())&&(n=i.getMinimum(),r=i.getMaximum(),t=(e=i.getSprites()[0].getAnimation()).getDuration(),e.setDuration(0),Ext.isNumber(n)?this.setMinimum(n):i.setMinimum(this.getMinimum()),Ext.isNumber(r)?this.setMaximum(r):i.setMaximum(this.getMaximum()),e.setDuration(t)),Ext.isNumber(a)||(a=this.getMinimum()),this.setValue(a)},getDefaultSpriteConfig:function(){return{type:this.seriesType,renderer:this.getRenderer(),animation:{customDurations:{translationX:0,translationY:0,rotationCenterX:0,rotationCenterY:0,centerX:0,centerY:0,startRho:0,endRho:0,baseRotation:0}}}},normalizeSectors:function(e){var t,i,n,r,o=this,a=e&&e.length||0;if(a)for(t=0;t<a;t++)"number"==typeof(i=e[t])?(e[t]={start:0<t?e[t-1].end:o.getMinimum(),end:Math.min(i,o.getMaximum())},t===a-1&&e[t].end<o.getMaximum()&&(e[t+1]={start:e[t].end,end:o.getMaximum()})):(n="number"==typeof i.start?Math.max(i.start,o.getMinimum()):0<t?e[t-1].end:o.getMinimum(),r="number"==typeof i.end?Math.min(i.end,o.getMaximum()):o.getMaximum(),e[t].start=n,e[t].end=r);else e=[{start:o.getMinimum(),end:o.getMaximum()}];return e},getSprites:function(){var e,t,i=this,n=i.getStore(),r=i.getValue(),o=i.getLabel();if(!n&&!Ext.isNumber(r))return Ext.emptyArray;var a,s,l,d,u=i.getChart(),c=i.getAnimation()||u&&u.getAnimation(),h=i.sprites,f=0,g=[];if(h&&h.length)return h[0].setAnimation(c),h;for(d={store:n,field:i.getXField(),angleField:i.getXField(),value:r,series:i},i.needleSprite=a=i.createSprite(),a.setAttributes({zIndex:10},!0),a.setRendererData(d),a.setRendererIndex(f++),g.push(i.getNeedleWidth()),o&&o.getTemplate().setField(!0),e=0,t=(s=i.normalizeSectors(i.getSectors())).length;e<t;e++)l={startAngle:i.valueToAngle(s[e].start),endAngle:i.valueToAngle(s[e].end),label:s[e].label,fillStyle:s[e].color,strokeOpacity:0,doCallout:!1,labelOverflowPadding:-1},Ext.apply(l,s[e].style),(a=i.createSprite()).setRendererData(d),a.setRendererIndex(f++),a.setAttributes(l,!0),g.push(l.lineWidth);return i.setSubStyle({lineWidth:g}),i.doUpdateStyles(),h},doUpdateStyles:function(){this.callParent(),this.sprites.length&&this.needleSprite.setAttributes({startRho:this.getNeedle()?0:this.getRadius()/100*this.getDonut()})}}),Ext.define("Ext.chart.series.sprite.Line",{alias:"sprite.lineSeries",extend:"Ext.chart.series.sprite.Aggregative",inheritableStatics:{def:{processors:{curve:"default",fillArea:"bool",nullStyle:"enums(gap,connect,origin)",preciseStroke:"bool",xAxis:"default",yCap:"default"},defaults:{curve:{type:"linear"},nullStyle:"connect",fillArea:!1,preciseStroke:!0,xAxis:null,yCap:Math.pow(2,20),yJump:50},triggers:{dataX:"dataX,bbox,curve",dataY:"dataY,bbox,curve",curve:"curve"},updaters:{curve:"curveUpdater"}}},list:null,curveUpdater:function(e){var t=e.dataX,i=e.dataY,n=e.curve,r=t&&i&&2<t.length&&2<i.length,o=n.type;r&&("natural"===o?(this.smoothX=Ext.draw.Draw.naturalSpline(t),this.smoothY=Ext.draw.Draw.naturalSpline(i)):"cardinal"===o?(this.smoothX=Ext.draw.Draw.cardinalSpline(t,n.tension),this.smoothY=Ext.draw.Draw.cardinalSpline(i,n.tension)):r=!1),r||(delete this.smoothX,delete this.smoothY)},updatePlainBBox:function(e){var t=this.attr,i=Math.min(0,t.dataMinY),n=Math.max(0,t.dataMaxY);e.x=t.dataMinX,e.y=i,e.width=t.dataMaxX-t.dataMinX,e.height=n-i},drawStrip:function(e,t){var i,n;for(e.moveTo(t[0],t[1]),i=2,n=t.length;i<n;i+=2)e.lineTo(t[i],t[i+1])},drawStraightStroke:function(e,t,i,n,r,o){var a,s,l,d,u,c,h,f,g,p,m,x,y,v,E,b,C,S,w,T,P=this.attr,k=P.nullStyle,I="connect"===k,R="origin"===k,M=P.renderer,A="step-after"===P.curve.type,D=!0,F=r.length,L={type:"line",smooth:!1,step:A},O=[];for(t.beginPath(),T=3;T<F;T+=3)b=r[T-3],C=r[T-2],v=r[T],E=r[T+1],S=r[T+3],w=r[T+4],d=Ext.isNumber(b),u=Ext.isNumber(v),c=Ext.isNumber(S),h=d&&Ext.isNumber(C),f=u&&Ext.isNumber(E),g=c&&Ext.isNumber(w),R&&(!h&&d&&(C=o,h=!0),!f&&u&&(E=o,f=!0),!g&&c&&(w=o,g=!0)),M&&(L.x=v,L.y=E,L.x0=b,L.y0=C,s=[this,L,this.rendererData,i+T/3],a=Ext.callback(M,null,s,0,this.getSeries())),p&&I&&h&&m&&(x=m[0],y=m[1],D&&(t.beginPath(),t.moveTo(x,y),O.push(x,y),l=x,D=!1),A&&(t.lineTo(b,y),O.push(b,y)),t.lineTo(b,C),O.push(b,C),p=!(m=[b,C])),I&&m&&f&&!h&&(b=m[0],C=m[1],h=!0),f&&(m=[v,E]),h&&f?(D&&(t.beginPath(),t.moveTo(b,C),O.push(b,C),l=b,D=!1),A&&(t.lineTo(v,C),O.push(v,C)),t.lineTo(v,E),O.push(v,E),!a&&g||(t.save(),Ext.apply(t,a),a=null,P.fillArea&&(t.lineTo(v,o),t.lineTo(l,o),t.closePath(),t.fill()),t.beginPath(),this.drawStrip(t,O),O=[],t.stroke(),t.restore(),t.beginPath(),D=!0)):p=!0},calculateScale:function(e,t){for(var i=0,n=e;n<t&&0<e;)n+=e>>++i;return Math.pow(2,0<i?i-1:i)},drawSmoothStroke:function(e,t,i,n,r,o){var a,s,l,d,u,c,h,f,g,p,m,x,y=this.attr,v=y.step,E=y.matrix,b=y.renderer,C=E.getXX(),S=E.getYY(),w=E.getDX(),T=E.getDY(),P=this.smoothX,k=this.smoothY,I=this.calculateScale(y.dataX.length,n),R={type:"line",smooth:!0,step:v};for(t.beginPath(),t.moveTo(P[3*i]*C+w,k[3*i]*S+T),g=0,p=3*i+1;g<r.length-3;g+=3,p+=3*I)a=P[p]*C+w,s=k[p]*S+T,l=P[p+1]*C+w,d=k[p+1]*S+T,u=e.roundPixel(r[g+3]),c=r[g+4],h=e.roundPixel(r[g]),f=r[g+1],b&&(R.x0=h,R.y0=f,R.cx1=a,R.cy1=s,R.cx2=l,R.cy2=d,R.x=u,R.y=c,x=[this,R,this.rendererData,i+g/3+1],m=Ext.callback(b,null,x,0,this.getSeries()),t.save(),Ext.apply(t,m)),y.fillArea&&(t.moveTo(h,f),t.bezierCurveTo(a,s,l,d,u,c),t.lineTo(u,o),t.lineTo(h,o),t.lineTo(h,f),t.closePath(),t.fill(),t.beginPath()),t.moveTo(h,f),t.bezierCurveTo(a,s,l,d,u,c),t.stroke(),t.moveTo(h,f),t.closePath(),b&&t.restore(),t.beginPath(),t.moveTo(u,c);t.beginPath()},drawLabel:function(e,t,i,n,r){var o,a,s,l,d,u,c,h=this,f=h.attr,g=h.getMarker("labels"),p=g.getTemplate(),m=h.labelCfg||(h.labelCfg={}),x=h.surfaceMatrix,y=f.labelOverflowPadding;switch(m.x=x.x(t,i),m.y=x.y(t,i),f.flipXY?m.rotationRads=.5*Math.PI:m.rotationRads=0,m.text=e,p.attr.renderer&&(u=[e,g,m,h.rendererData,n],"string"==typeof(d=Ext.callback(p.attr.renderer,null,u,0,h.getSeries()))?m.text=d:"object"==typeof d&&("text"in d&&(m.text=d.text),c=!0)),(l=h.getMarkerBBox("labels",n,!0))||(h.putMarker("labels",m,n),l=h.getMarkerBBox("labels",n,!0)),s=l.height/2,o=t,p.attr.display){case"under":a=i-s-y;break;case"rotate":o+=y,a=i-y,m.rotationRads=-Math.PI/4;break;default:a=i+s+y}m.x=x.x(o,a),m.y=x.y(o,a),c&&Ext.apply(m,d),h.putMarker("labels",m,n)},drawMarker:function(e,t,i){var n,r,o=this.attr.renderer,a=this.surfaceMatrix,s={};o&&this.getMarker("markers")&&(s.type="marker",s.x=e,s.y=t,r=[this,s,this.rendererData,i],(n=Ext.callback(o,null,r,0,this.getSeries()))&&Ext.apply(s,n)),s.translationX=a.x(e,t),s.translationY=a.y(e,t),delete s.x,delete s.y,this.putMarker("markers",s,i,!o)},drawStroke:function(e,t,i,n,r,o){this.smoothX&&this.smoothY?this.drawSmoothStroke(e,t,i,n,r,o):this.drawStraightStroke(e,t,i,n,r,o)},renderAggregates:function(e,t,i,n,r,o,a){var s,l,d,u,c,h,f,g,p,m,x,y,v,E,b,C,S,w,T=this,P=T.attr,k=P.dataX,I=P.dataY,R=P.labels,M=P.xAxis,A=P.yCap,D=P.smooth&&T.smoothX&&T.smoothY,F=R&&T.getMarker("labels"),L=T.getMarker("markers"),O=P.matrix,B=n.devicePixelRatio,N=O.getXX(),H=O.getYY(),V=O.getDX(),_=O.getDY(),z=T.list||(T.list=[]),W=e.minX,G=e.maxX,X=e.minY,U=e.maxY,Y=e.startIdx,q=!0;for(T.rendererData={store:T.getStore()},z.length=0,p=t;p<i;p++)x=W[p],y=G[p],v=X[p],E=U[p],s=Ext.isNumber(x),d=Ext.isNumber(v),l=Ext.isNumber(y),u=Ext.isNumber(E),x<y?(z.push(s?x*N+V:null,d?v*H+_:null,Y[p]),z.push(l?y*N+V:null,u?E*H+_:null,Y[p])):y<x?(z.push(l?y*N+V:null,u?E*H+_:null,Y[p]),z.push(s?x*N+V:null,d?v*H+_:null,Y[p])):z.push(l?y*N+V:null,u?E*H+_:null,Y[p]);if(z.length){for(p=0;p<z.length;p+=3)f=z[p],g=z[p+1],Ext.isNumber(f)&&Ext.isNumber(g)?(A<g?g=A:g<-A&&(g=-A),z[p+1]=g,m=z[p+2],L&&T.drawMarker(f,g,m),F&&R[m]&&T.drawLabel(R[m],f,g,m,a)):q=!1;T.isContinuousLine=q,D&&!q&&Ext.raise("Line smoothing in only supported for gapless data, where all data points are finite numbers."),c=M?(h="vertical"===M.getAlignment(),Ext.isNumber(M.floatingAtCoord)?(h?a[2]:a[3])-M.floatingAtCoord:h?a[0]:a[1]):P.flipXY?a[0]:a[1],P.preciseStroke?(P.fillArea&&r.fill(),P.transformFillStroke&&P.inverseMatrix.toContext(r),T.drawStroke(n,r,t,i,z,c),P.transformFillStroke&&P.matrix.toContext(r),r.stroke()):(T.drawStroke(n,r,t,i,z,c),q&&D&&P.fillArea&&!P.renderer&&(b=k[k.length-1]*N+V+B,C=I[I.length-1]*H+_,S=k[0]*N+V-B,w=I[0]*H+_,r.lineTo(b,C),r.lineTo(b,c-P.lineWidth),r.lineTo(S,c-P.lineWidth),r.lineTo(S,w)),P.transformFillStroke&&P.matrix.toContext(r),P.fillArea?r.fillStroke(P,!0):r.stroke(!0))}}}),Ext.define("Ext.chart.series.Line",{extend:"Ext.chart.series.Cartesian",alias:"series.line",type:"line",seriesType:"lineSeries",isLine:!0,requires:["Ext.chart.series.sprite.Line"],config:{selectionTolerance:20,curve:{type:"linear"},smooth:null,step:null,nullStyle:"gap",fill:void 0,aggregator:{strategy:"double"}},themeMarkerCount:function(){return 1},getDefaultSpriteConfig:function(){var e,t=this.callParent(arguments),i=Ext.apply({},this.getStyle()),n=!1;return void 0!==this.config.fill?this.config.fill&&(n=!0,void 0===i.fillStyle&&(void 0===i.strokeStyle?(e=this.getStyleWithTheme(),i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle):i.fillStyle=i.strokeStyle)):i.fillStyle&&(n=!0),n||delete i.fillStyle,i=Ext.apply(t||{},i),Ext.apply(i,{fillArea:n,selectionTolerance:this.config.selectionTolerance})},updateFill:function(t){this.withSprite(function(e){return e.setAttributes({fillArea:t})})},updateCurve:function(t){this.withSprite(function(e){return e.setAttributes({curve:t})})},getCurve:function(){return this.withSprite(function(e){return e.attr.curve})},updateNullStyle:function(t){this.withSprite(function(e){return e.setAttributes({nullStyle:t})})},updateSmooth:function(e){this.setCurve({type:e?"natural":"linear"})},updateStep:function(e){this.setCurve({type:e?"step-after":"linear"})}}),Ext.define("Ext.chart.series.sprite.PieSlice",{extend:"Ext.draw.sprite.Sector",mixins:{markerHolder:"Ext.chart.MarkerHolder"},alias:"sprite.pieslice",inheritableStatics:{def:{processors:{doCallout:"bool",label:"string",rotateLabels:"bool",labelOverflowPadding:"number",renderer:"default"},defaults:{doCallout:!0,rotateLabels:!0,label:"",labelOverflowPadding:10,renderer:null}}},config:{rendererData:null,rendererIndex:0,series:null},setGradientBBox:function(e,t){var i=this.attr;if((i.fillStyle&&i.fillStyle.isGradient||i.strokeStyle&&i.strokeStyle.isGradient)&&!i.constrainGradients){var n=this.getMidAngle(),r=i.margin,o=i.centerX,a=i.centerY,s=i.endRho,l=i.matrix,d=l.getScaleX()*s,u=l.getScaleY()*s,c={width:d+d,height:u+u};r&&(o+=r*Math.cos(n),a+=r*Math.sin(n)),c.x=l.x(o,a)-d,c.y=l.y(o,a)-u,e.setGradientBBox(c)}else this.callParent([e,t])},render:function(e,t,i){var n,r=this,o=r.attr,a={};o.renderer&&(a={type:"sector",centerX:o.centerX,centerY:o.centerY,margin:o.margin,startAngle:Math.min(o.startAngle,o.endAngle),endAngle:Math.max(o.startAngle,o.endAngle),startRho:Math.min(o.startRho,o.endRho),endRho:Math.max(o.startRho,o.endRho)},n=Ext.callback(o.renderer,null,[r,a,r.getRendererData(),r.getRendererIndex()],0,r.getSeries()),r.setAttributes(n),r.useAttributes(t,i)),r.callParent([e,t,i]),o.label&&r.getMarker("labels")&&r.placeLabel()},placeLabel:function(){var e,t,i,n,r,o,a=this,s=a.attr,l=s.attributeId,d=Math.min(s.startAngle,s.endAngle),u=Math.max(s.startAngle,s.endAngle),c=.5*(d+u),h=s.margin,f=s.centerX,g=s.centerY,p=Math.sin(c),m=Math.cos(c),x=Math.min(s.startRho,s.endRho)+h,y=Math.max(s.startRho,s.endRho)+h,v=.5*(x+y),E=a.surfaceMatrix,b=a.labelCfg||(a.labelCfg={}),C=a.getMarker("labels"),S=C.getTemplate(),w=S.getHideLessThan(),T=S.getCalloutLine();if(o=T?T.length||40:0,E.appendMatrix(s.matrix),b.text=s.label,t=f+m*v,i=g+p*v,b.x=E.x(t,i),b.y=E.y(t,i),t=f+m*y,i=g+p*y,b.calloutStartX=E.x(t,i),b.calloutStartY=E.y(t,i),t=f+m*(y+o),i=g+p*(y+o),b.calloutPlaceX=E.x(t,i),b.calloutPlaceY=E.y(t,i),s.rotateLabels)switch(S.attr.orientation){case"horizontal":b.rotationRads=c+Math.atan2(E.y(1,0)-E.y(0,0),E.x(1,0)-E.x(0,0))+Math.PI/2;break;case"vertical":b.rotationRads=c+Math.atan2(E.y(1,0)-E.y(0,0),E.x(1,0)-E.x(0,0))}else b.rotationRads=0,Ext.log.warn("'series.style.rotateLabels' config is deprecated. Use 'series.label.orientation' config instead.");b.calloutColor=T&&T.color||a.attr.fillStyle,T?T.width&&(b.calloutWidth=T.width):b.calloutColor="none",b.globalAlpha=s.globalAlpha*s.fillOpacity,"none"!==S.display&&(b.hidden=s.startAngle==s.endAngle),S.attr.renderer&&(r=[a.attr.label,C,b,a.getRendererData(),a.getRendererIndex()],"string"==typeof(n=Ext.callback(S.attr.renderer,null,r,0,a.getSeries()))?b.text=n:Ext.apply(b,n)),a.putMarker("labels",b,l),(e=a.getMarkerBBox("labels",l,!0))&&(s.doCallout&&(w<(u-d)*y||s.highlighted)?"outside"===S.attr.display?a.putMarker("labels",{callout:1},l):"inside"===S.attr.display?a.putMarker("labels",{callout:0},l):a.putMarker("labels",{callout:1-a.sliceContainsLabel(s,e)},l):a.putMarker("labels",{globalAlpha:a.sliceContainsLabel(s,e)},l))},sliceContainsLabel:function(e,t){var i,n,r,o,a=e.labelOverflowPadding,s=(e.endRho+e.startRho)/2,l=s+(t.width+a)/2,d=s-(t.width+a)/2;return a<0?1:t.width+2*a>e.endRho-e.startRho?0:(n=Math.sqrt(e.endRho*e.endRho-l*l),r=Math.sqrt(e.endRho*e.endRho-d*d),o=(i=Math.abs(e.endAngle-e.startAngle))>Math.PI/2?d:Math.abs(Math.tan(i/2))*d,t.height+2*a>2*Math.min(n,r,o)?0:1)}}),Ext.define("Ext.chart.series.Pie",{extend:"Ext.chart.series.Polar",requires:["Ext.chart.series.sprite.PieSlice"],type:"pie",alias:"series.pie",seriesType:"pieslice",isPie:!0,config:{donut:0,rotation:0,clockwise:!0,totalAngle:2*Math.PI,hidden:[],radiusFactor:100,highlightCfg:{margin:20},style:{}},directions:["X"],applyLabel:function(e,t){return Ext.isObject(e)&&!Ext.isString(e.orientation)&&Ext.apply(e=Ext.Object.chain(e),{orientation:"vertical"}),e},updateLabelData:function(){var e,t,i,n,r=this.getStore().getData().items,o=this.getSprites(),a=this.getLabel(),s=a&&a.getTemplate().getField(),l=this.getHidden();if(o.length&&s){for(i=[],e=0,t=r.length;e<t;e++)i.push(r[e].get(s));for(e=0,t=o.length;e<t;e++)(n=o[e]).setAttributes({label:i[e]}),n.putMarker("labels",{hidden:l[e]},n.attr.attributeId)}},coordinateX:function(){var e,t,i,n,r,o,a=this.getStore().getData().items,s=a.length,l=this.getXField(),d=this.getYField(),u=0,c=0,h=this.getHidden(),f=[],g=0,p=this.getTotalAngle(),m=this.getClockwise()?1:-1,x=this.getSprites();if(x){for(n=0;n<s;n++)e=Math.abs(Number(a[n].get(l)))||0,i=d&&Math.abs(Number(a[n].get(d)))||0,h[n]||(u+=e,c<i&&(c=i)),f[n]=u,n>=h.length&&(h[n]=!1);for(h.length=s,this.maxY=c,0!==u&&(t=p/u),n=0;n<s;n++)x[n].setAttributes({startAngle:g,endAngle:g=t?m*f[n]*t:0,globalAlpha:1});if(s<x.length){for(n=s;n<x.length;n++)(o=(r=x[n]).getMarker("labels"))&&(o.clear(r.getId()),r.releaseMarker("labels")),r.destroy();x.length=s}for(n=s;n<x.length;n++)x[n].setAttributes({startAngle:p,endAngle:p,globalAlpha:0})}},updateCenter:function(e){this.setStyle({translationX:e[0]+this.getOffsetX(),translationY:e[1]+this.getOffsetY()}),this.doUpdateStyles()},updateRadius:function(e){this.setStyle({startRho:e*this.getDonut()*.01,endRho:e*this.getRadiusFactor()*.01}),this.doUpdateStyles()},getStyleByIndex:function(e){var t,i,n,r=this.getStore().getAt(e),o=this.getYField(),a=this.getRadius(),s={};return r&&(n=o&&Math.abs(Number(r.get(o)))||0,t=a*this.getDonut()*.01,i=a*this.getRadiusFactor()*.01,(s=this.callParent([e])).startRho=t,s.endRho=this.maxY?t+(i-t)*n/this.maxY:i),s},updateDonut:function(e){var t=this.getRadius();this.setStyle({startRho:t*e*.01,endRho:t*this.getRadiusFactor()*.01}),this.doUpdateStyles()},rotationOffset:-Math.PI/2,updateRotation:function(e){this.setStyle({rotationRads:e+this.rotationOffset}),this.doUpdateStyles()},updateTotalAngle:function(e){this.processData()},getSprites:function(){var e=this,t=e.getChart(),i=e.getStore();if(!t||!i)return Ext.emptyArray;e.getColors(),e.getSubStyle();var n,r,o,a=i.getData().items.length,s=e.getAnimation()||t&&t.getAnimation(),l=e.sprites,d=!1,u=0,c=e.getLabel(),h=c&&c.getTemplate();for(o={store:i,field:e.getXField(),angleField:e.getXField(),radiusField:e.getYField(),series:e},r=0;r<a;r++)(n=l[r])||(n=e.createSprite(),e.getHighlight()&&(n.config.highlight=e.getHighlight(),n.addModifier("highlight",!0)),h&&h.getField()&&(h.setAttributes({labelOverflowPadding:e.getLabelOverflowPadding()}),h.getAnimation().setCustomDurations({callout:200})),n.setAttributes(e.getStyleByIndex(r)),n.setRendererData(o),d=!0),n.setRendererIndex(u++),n.setAnimation(s);return d&&e.doUpdateStyles(),e.sprites},betweenAngle:function(e,t,i){var n=2*Math.PI,r=this.rotationOffset;return t!==i&&(this.getClockwise()?(t+=r,i+=r):(e*=-1,t*=-1,i*=-1,t-=r,i-=r),e-=t,i-=t,e%=n,i%=n,e+=n,i+=n,(e%=n)<(i%=n)||Ext.Number.isEqual(i,0,1e-8))},getItemByIndex:function(e,t){return t=t||"sprites",this.callParent([e,t])},getItemForAngle:function(e){var t,i,n,r,o,a,s=this.getSprites();for(e%=2*Math.PI;e<0;)e+=2*Math.PI;if(s)for(n=(i=this.getStore()).getData().items,r=this.getHidden(),o=0,a=i.getCount();o<a;o++)if(!r[o]&&(t=s[o].attr).startAngle<=e&&t.endAngle>=e)return{series:this,sprite:s[o],index:o,record:n[o],field:this.getXField()};return null},getItemForPoint:function(e,t){var i,n,r,o,a=this,s=a.getSprites(),l=a.getCenter(),d=a.getOffsetX(),u=a.getOffsetY(),c=e-l[0]+d,h=t-l[1]+u,f=a.getStore(),g=a.getDonut(),p=f.getData().items,m=Math.atan2(h,c)-a.getRotation(),x=Math.sqrt(c*c+h*h),y=a.getRadius()*g*.01,v=a.getHidden(),E=null;for(i=0,n=p.length;i<n;i++)if(!v[i]){if(!(o=s[i]))break;if(x>=y+(r=o.attr).margin&&x<=r.endRho+r.margin&&a.betweenAngle(m,r.startAngle,r.endAngle)){E={series:a,sprite:s[i],index:i,record:p[i],field:a.getXField()};break}}return E},provideLegendInfo:function(e){var t,i,n,r,o,a,s,l=this.getStore();if(l)for(t=l.getData().items,i=this.getLabel().getTemplate().getField(),n=this.getXField(),r=this.getHidden(),o=0;o<t.length;o++)s=(a=this.getStyleByIndex(o)).fillStyle,Ext.isObject(s)&&(s=s.stops&&s.stops[0].color),e.push({name:i?String(t[o].get(i)):n+" "+o,mark:s||a.strokeStyle||"black",disabled:r[o],series:this.getId(),index:o})}}),Ext.define("Ext.chart.series.sprite.Pie3DPart",{extend:"Ext.draw.sprite.Path",mixins:{markerHolder:"Ext.chart.MarkerHolder"},alias:"sprite.pie3dPart",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",margin:"number",thickness:"number",bevelWidth:"number",distortion:"number",baseColor:"color",colorSpread:"number",baseRotation:"number",part:"enums(top,bottom,start,end,innerFront,innerBack,outerFront,outerBack)",label:"string"},aliases:{rho:"endRho"},triggers:{centerX:"path,bbox",centerY:"path,bbox",startAngle:"path,partZIndex",endAngle:"path,partZIndex",startRho:"path",endRho:"path,bbox",margin:"path,bbox",thickness:"path",distortion:"path",baseRotation:"path,partZIndex",baseColor:"partZIndex,partColor",colorSpread:"partColor",part:"path,partZIndex",globalAlpha:"canvas,alpha",fillOpacity:"canvas,alpha"},defaults:{centerX:0,centerY:0,startAngle:2*Math.PI,endAngle:2*Math.PI,startRho:0,endRho:150,margin:0,thickness:35,distortion:.5,baseRotation:0,baseColor:"white",colorSpread:.5,miterLimit:1,bevelWidth:5,strokeOpacity:0,part:"top",label:""},updaters:{alpha:"alphaUpdater",partColor:"partColorUpdater",partZIndex:"partZIndexUpdater"}}},config:{renderer:null,rendererData:null,rendererIndex:0,series:null},bevelParams:[],constructor:function(e){this.callParent([e]),this.bevelGradient=new Ext.draw.gradient.Linear({stops:[{offset:0,color:"rgba(255,255,255,0)"},{offset:.7,color:"rgba(255,255,255,0.6)"},{offset:1,color:"rgba(255,255,255,0)"}]})},updateRenderer:function(){this.setDirty(!0)},updateRendererData:function(){this.setDirty(!0)},updateRendererIndex:function(){this.setDirty(!0)},alphaUpdater:function(e){var t=e.globalAlpha,i=e.fillOpacity,n=this.oldOpacity,r=this.oldFillOpacity;(t===n||1!==t&&1!==n)&&(i===r||1!==i&&1!==r)||(this.scheduleUpdater(e,"path",["globalAlpha"]),this.oldOpacity=t,this.oldFillOpacity=i)},partColorUpdater:function(e){var t,i=Ext.util.Color.fly(e.baseColor),n=i.toString(),r=e.colorSpread;switch(e.part){case"top":t=new Ext.draw.gradient.Radial({start:{x:0,y:0,r:0},end:{x:0,y:0,r:1},stops:[{offset:0,color:i.createLighter(.1*r)},{offset:1,color:i.createDarker(.1*r)}]});break;case"bottom":t=new Ext.draw.gradient.Radial({start:{x:0,y:0,r:0},end:{x:0,y:0,r:1},stops:[{offset:0,color:i.createDarker(.2*r)},{offset:1,color:i.toString()}]});break;case"outerFront":case"outerBack":t=new Ext.draw.gradient.Linear({stops:[{offset:0,color:i.createDarker(.15*r).toString()},{offset:.3,color:n},{offset:.8,color:i.createLighter(.2*r).toString()},{offset:1,color:i.createDarker(.25*r).toString()}]});break;case"start":case"end":t=new Ext.draw.gradient.Linear({stops:[{offset:0,color:i.createDarker(.1*r).toString()},{offset:1,color:i.createLighter(.2*r).toString()}]});break;case"innerFront":case"innerBack":t=new Ext.draw.gradient.Linear({stops:[{offset:0,color:i.createDarker(.1*r).toString()},{offset:.2,color:i.createLighter(.2*r).toString()},{offset:.7,color:n},{offset:1,color:i.createDarker(.1*r).toString()}]})}e.fillStyle=t,e.canvasAttributes.fillStyle=t},partZIndexUpdater:function(e){var t,i=Ext.draw.sprite.AttributeParser.angle,n=e.baseRotation,r=e.startAngle,o=e.endAngle;switch(e.part){case"top":e.zIndex=6;break;case"outerFront":r=i(r+n),o=i(o+n),t=0<=r&&o<0?Math.sin(r):r<=0&&0<o?Math.sin(o):0<=r&&0<o?o<r?0:Math.max(Math.sin(r),Math.sin(o)):1,e.zIndex=4+t;break;case"outerBack":e.zIndex=1;break;case"start":e.zIndex=4+Math.sin(i(r+n));break;case"end":e.zIndex=4+Math.sin(i(o+n));break;case"innerFront":e.zIndex=2;break;case"innerBack":e.zIndex=4+Math.sin(i((r+o)/2+n));break;case"bottom":e.zIndex=0}e.dirtyZIndex=!0},updatePlainBBox:function(e){var t,i,n,r,o,a,s=this.attr,l=s.part,d=s.baseRotation,u=s.centerX,c=s.centerY;if("start"===l?i=s.startAngle+d:"end"===l&&(i=s.endAngle+d),Ext.isNumber(i))return o=Math.sin(i),a=Math.cos(i),n=Math.min(u+a*s.startRho,u+a*s.endRho),r=c+o*s.startRho*s.distortion,e.x=n,e.y=r,e.width=a*(s.endRho-s.startRho),void(e.height=s.thickness+o*(s.endRho-s.startRho)*2);t="innerFront"===l||"innerBack"===l?s.startRho:s.endRho,e.width=2*t,e.height=t*s.distortion*2+s.thickness,e.x=s.centerX-t,e.y=s.centerY-t*s.distortion},updateTransformedBBox:function(e){return"start"===this.attr.part||"end"===this.attr.part?this.callParent(arguments):this.updatePlainBBox(e)},updatePath:function(e){this.attr.globalAlpha&&(this.attr.endAngle<this.attr.startAngle||this[this.attr.part+"Renderer"](e))},render:function(e,t,i){var n,r,o=this,a=o.getRenderer(),s=o.attr,l=s.part;s.globalAlpha&&!Ext.Number.isEqual(s.startAngle,s.endAngle,1e-8)&&(a&&(n={type:"pie3dPart",part:s.part,margin:s.margin,distortion:s.distortion,centerX:s.centerX,centerY:s.centerY,baseRotation:s.baseRotation,startAngle:s.startAngle,endAngle:s.endAngle,startRho:s.startRho,endRho:s.endRho},(r=Ext.callback(a,null,[o,n,o.getRendererData(),o.getRendererIndex()],0,o.getSeries()))&&(r.part&&(r.part=l),o.setAttributes(r),o.useAttributes(t,i))),o.callParent([e,t]),o.bevelRenderer(e,t),s.label&&o.getMarker("labels")&&o.placeLabel())},placeLabel:function(){var e,t,i,n,r=this.attr,o=r.attributeId,a=r.margin,s=r.distortion,l=r.centerX,d=r.centerY,u=r.baseRotation,c=(r.startAngle+u+(r.endAngle+u))/2,h=r.startRho+a,f=r.endRho+a,g=(h+f)/2,p=Math.sin(c),m=Math.cos(c),x=this.surfaceMatrix,y=this.getMarker("labels"),v=y.getTemplate(),E=v.getCalloutLine(),b=E&&E.length||40,C={};x.appendMatrix(r.matrix),C.text=r.label,i=l+m*g,n=d+p*g*s,C.x=x.x(i,n),C.y=x.y(i,n),i=l+m*f,n=d+p*f*s,C.calloutStartX=x.x(i,n),C.calloutStartY=x.y(i,n),i=l+m*(f+b),n=d+p*(f+b)*s,C.calloutPlaceX=x.x(i,n),C.calloutPlaceY=x.y(i,n),C.calloutWidth=2,v.attr.renderer&&(e=[this.attr.label,y,C,this.getRendererData(),this.getRendererIndex()],"string"==typeof(t=Ext.callback(v.attr.renderer,null,e,0,this.getSeries()))?C.text=t:Ext.apply(C,t)),this.putMarker("labels",C,o),this.putMarker("labels",{callout:1},o)},bevelRenderer:function(e,t){var i,n=this.attr,r=n.bevelWidth,o=this.bevelParams;for(i=0;i<o.length;i++)t.beginPath(),t.ellipse.apply(t,o[i]),t.save(),t.lineWidth=r,t.strokeOpacity=r?1:0,t.strokeGradient=this.bevelGradient,t.stroke(n),t.restore()},lidRenderer:function(e,t){var i=this.attr,n=i.margin,r=i.distortion,o=i.centerX,a=i.centerY,s=i.baseRotation,l=i.startAngle+s,d=i.endAngle+s,u=(l+d)/2,c=i.startRho,h=i.endRho,f=Math.sin(d),g=Math.cos(d);o+=Math.cos(u)*n,a+=Math.sin(u)*n*r,e.ellipse(o,a+t,c,c*r,0,l,d,!1),e.lineTo(o+g*h,a+t+f*h*r),e.ellipse(o,a+t,h,h*r,0,d,l,!0),e.closePath()},topRenderer:function(e){this.lidRenderer(e,0)},bottomRenderer:function(e){var t=this.attr,i=Ext.util.Color.RGBA_NONE;(t.globalAlpha<1||t.fillOpacity<1||t.shadowColor!==i)&&this.lidRenderer(e,t.thickness)},sideRenderer:function(e,t){var i,n=this.attr,r=n.margin,o=n.centerX,a=n.centerY,s=n.distortion,l=n.baseRotation,d=n.startAngle+l,u=n.endAngle+l,c=!n.startAngle&&Ext.Number.isEqual(2*Math.PI,n.endAngle,1e-7),h=n.thickness,f=n.startRho,g=n.endRho,p="start"===t&&d||"end"===t&&u,m=Math.sin(p),x=Math.cos(p),y=n.globalAlpha<1;("start"===t&&x<0||"end"===t&&0<x||y)&&!c&&(i=(d+u)/2,o+=Math.cos(i)*r,a+=Math.sin(i)*r*s,e.moveTo(o+x*f,a+m*f*s),e.lineTo(o+x*g,a+m*g*s),e.lineTo(o+x*g,a+m*g*s+h),e.lineTo(o+x*f,a+m*f*s+h),e.closePath())},startRenderer:function(e){this.sideRenderer(e,"start")},endRenderer:function(e){this.sideRenderer(e,"end")},rimRenderer:function(e,t,i,n){var r,o,a,s=this,l=s.attr,d=l.margin,u=l.centerX,c=l.centerY,h=l.distortion,f=l.baseRotation,g=Ext.draw.sprite.AttributeParser.angle,p=l.startAngle+f,m=l.endAngle+f,x=g((p+m)/2),y=l.thickness,v=l.globalAlpha<1;function E(){e.ellipse(u,c+y,t,t*h,0,Math.PI,p,!0),e.lineTo(u+Math.cos(p)*t,c+Math.sin(p)*t*h),a=[u,c,t,t*h,0,p,Math.PI,!1],i||s.bevelParams.push(a),e.ellipse.apply(e,a),e.closePath()}function b(){e.ellipse(u,c+y,t,t*h,0,0,m,!1),e.lineTo(u+Math.cos(m)*t,c+Math.sin(m)*t*h),a=[u,c,t,t*h,0,m,0,!0],i||s.bevelParams.push(a),e.ellipse.apply(e,a),e.closePath()}function C(){e.ellipse(u,c+y,t,t*h,0,Math.PI,m,!1),e.lineTo(u+Math.cos(m)*t,c+Math.sin(m)*t*h),a=[u,c,t,t*h,0,m,Math.PI,!0],i&&s.bevelParams.push(a),e.ellipse.apply(e,a),e.closePath()}function S(){e.ellipse(u,c+y,t,t*h,0,p,0,!1),e.lineTo(u+t,c),a=[u,c,t,t*h,0,0,p,!0],i&&s.bevelParams.push(a),e.ellipse.apply(e,a),e.closePath()}s.bevelParams=[],p=g(p),m=g(m),u+=Math.cos(x)*d,c+=Math.sin(x)*d*h,r=0<=p&&0<=m,o=p<=0&&m<=0,n?i&&!v||(0<=p&&m<0?E():p<=0&&0<m?b():p<=0&&m<0?m<p&&(e.ellipse(u,c+y,t,t*h,0,0,Math.PI,!1),e.lineTo(u-t,c),a=[u,c,t,t*h,0,Math.PI,0,!0],i||s.bevelParams.push(a),e.ellipse.apply(e,a),e.closePath()):m<p?(E(),b()):(a=[u,c,t,t*h,0,p,m,!1],(r&&!i||o&&i)&&s.bevelParams.push(a),e.ellipse.apply(e,a),e.lineTo(u+Math.cos(m)*t,c+Math.sin(m)*t*h+y),e.ellipse(u,c+y,t,t*h,0,m,p,!0),e.closePath())):(i||v)&&(0<=p&&m<0?C():p<=0&&0<m?S():p<=0&&m<0?m<p?(C(),S()):(e.ellipse(u,c+y,t,t*h,0,p,m,!1),e.lineTo(u+Math.cos(m)*t,c+Math.sin(m)*t*h),a=[u,c,t,t*h,0,m,p,!0],i&&s.bevelParams.push(a),e.ellipse.apply(e,a),e.closePath()):m<p&&(e.ellipse(u,c+y,t,t*h,0,-Math.PI,0,!1),e.lineTo(u+t,c),a=[u,c,t,t*h,0,0,-Math.PI,!0],i&&s.bevelParams.push(a),e.ellipse.apply(e,a),e.closePath()))},innerFrontRenderer:function(e){this.rimRenderer(e,this.attr.startRho,!0,!0)},innerBackRenderer:function(e){this.rimRenderer(e,this.attr.startRho,!0,!1)},outerFrontRenderer:function(e){this.rimRenderer(e,this.attr.endRho,!1,!0)},outerBackRenderer:function(e){this.rimRenderer(e,this.attr.endRho,!1,!1)}}),Ext.define("Ext.chart.series.Pie3D",{extend:"Ext.chart.series.Polar",requires:["Ext.chart.series.sprite.Pie3DPart","Ext.draw.PathUtil"],type:"pie3d",seriesType:"pie3d",alias:"series.pie3d",is3D:!0,config:{rect:[0,0,0,0],thickness:35,distortion:.5,donut:0,hidden:[],highlightCfg:{margin:20},shadow:!1},rotationOffset:-Math.PI/2,setField:function(e){return this.setXField(e)},getField:function(){return this.getXField()},updateRotation:function(e){var t={baseRotation:e+this.rotationOffset};this.forEachSprite(function(e){e.setAttributes(t)})},updateColors:function(e){var t;this.setSubStyle({baseColor:e}),this.isConfiguring||(t=this.getChart())&&t.refreshLegendStore()},applyShadow:function(e){return!0===e?e={shadowColor:"rgba(0,0,0,0.8)",shadowBlur:30}:Ext.isObject(e)||(e={shadowColor:Ext.util.Color.RGBA_NONE}),e},updateShadow:function(e){var t,i,n=this.getSprites(),r=this.spritesPerSlice,o=n&&n.length;for(t=1;t<o;t+=r)"bottom"===(i=n[t]).attr.part&&i.setAttributes(e)},getStyleByIndex:function(e){var t=this.callParent([e]),i=this.getStyle(),n=t.fillStyle||t.fill||t.color,r=i.strokeStyle||i.stroke;return n&&(t.baseColor=n,delete t.fillStyle,delete t.fill,delete t.color),r&&(t.strokeStyle=r),t},doUpdateStyles:function(){for(var e,t,i=this.getSprites(),n=this.spritesPerSlice,r=i&&i.length,o=0,a=0;o<r;o+=n,a++)for(t=this.getStyleByIndex(a),e=0;e<n;e++)i[o+e].setAttributes(t)},coordinateX:function(){var e,t,i,n,r,o,a=this,s=a.getStore().getData().items,l=s.length,d=a.getXField(),u=a.getAnimation(),c=a.getRotation(),h=a.getHidden(),f=a.getSprites(!0),g=f.length,p=a.spritesPerSlice,m=a.getCenter(),x=a.getOffsetX(),y=a.getOffsetY(),v=a.getRadius(),E=a.getThickness(),b=a.getDistortion(),C=a.getRenderer(),S=a.getRendererData(),w=(a.getHighlight(),0),T=2*Math.PI,P=[],k=0;for(r=0;r<l;r++)e=Math.abs(+s[r].get(d))||0,h[r]||(k+=e),P[r]=k,r>=h.length&&(h[r]=!1);if(0!==k){for(t=2*Math.PI/k,r=0;r<l;r++)P[r]*=t;for(r=0;r<l;r++){for(n=this.getStyleByIndex(r),o=0;o<p;o++)(i=f[r*p+o]).setAnimation(u),i.setAttributes({centerX:m[0]+x,centerY:m[1]+y-E/2,endRho:v,startRho:v*a.getDonut()/100,baseRotation:c+a.rotationOffset,startAngle:w,endAngle:P[r]-1e-10,thickness:E,distortion:b,globalAlpha:1}),i.setAttributes(n),i.setConfig({renderer:C,rendererData:S,rendererIndex:r});w=P[r]}for(r*=p;r<g;r++)(i=f[r]).setAnimation(u),i.setAttributes({startAngle:T,endAngle:T,globalAlpha:0,baseRotation:c+a.rotationOffset})}},updateHighlight:function(t,e){this.callParent([t,e]),this.forEachSprite(function(e){t&&(e.modifiers.highlight?e.modifiers.highlight.setConfig(t):(e.config.highlight=t,e.addModifier(t,!0)))})},updateLabelData:function(){var e,t,i,n,r,o=this.getStore().getData().items,a=this.getSprites(),s=this.getLabel(),l=s&&s.getTemplate().getField(),d=this.getHidden(),u=this.spritesPerSlice,c="labels";if(a.length){if(l)for(t=[],r=0,e=o.length;r<e;r++)t.push(o[r].get(l));for(r=n=0,e=a.length;n<e;n+=u,r++)i=a[n],s?(i.getMarker(c)||i.bindMarker(c,s),t&&i.setAttributes({label:t[r]}),i.putMarker(c,{hidden:d[r]},i.attr.attributeId)):i.releaseMarker(c)}},applyRadius:function(){var e,t=this.getChart(),i=t.getInnerPadding(),n=t.getMainRect()||[0,0,1,1],r=n[2]-2*i,o=n[3]-2*i-this.getThickness(),a=r/2;return e=o/2<a*this.getDistortion()?o/(2*this.getDistortion()):a,Math.max(e,0)},forEachSprite:function(e){var t,i=this.sprites,n=i.length;for(t=0;t<n;t++)e(i[t],Math.floor(t/this.spritesPerSlice))},updateRadius:function(t){var i;this.getChart(),i=this.getDonut(),this.forEachSprite(function(e){e.setAttributes({endRho:t,startRho:t*i/100})})},updateDonut:function(t){var i;this.getChart(),i=this.getRadius(),this.forEachSprite(function(e){e.setAttributes({startRho:i*t/100})})},updateCenter:function(t){var i,n,r;this.getChart(),i=this.getOffsetX(),n=this.getOffsetY(),r=this.getThickness(),this.forEachSprite(function(e){e.setAttributes({centerX:t[0]+i,centerY:t[1]+n-r/2})})},updateThickness:function(t){var i,n;this.getChart(),this.setRadius(),i=this.getCenter(),n=this.getOffsetY(),this.forEachSprite(function(e){e.setAttributes({thickness:t,centerY:i[1]+n-t/2})})},updateDistortion:function(t){this.getChart(),this.setRadius(),this.forEachSprite(function(e){e.setAttributes({distortion:t})})},updateOffsetX:function(t){var i;this.getChart(),i=this.getCenter(),this.forEachSprite(function(e){e.setAttributes({centerX:i[0]+t})})},updateOffsetY:function(t){var i,n;this.getChart(),i=this.getCenter(),n=this.getThickness(),this.forEachSprite(function(e){e.setAttributes({centerY:i[1]+t-n/2})})},updateAnimation:function(t){this.getChart(),this.forEachSprite(function(e){e.setAnimation(t)})},updateRenderer:function(i){var n;this.getChart(),n=this.getRendererData(),this.forEachSprite(function(e,t){e.setConfig({renderer:i,rendererData:n,rendererIndex:t})})},getRendererData:function(){return{store:this.getStore(),angleField:this.getXField(),radiusField:this.getYField(),series:this}},getSprites:function(e){var t=this.getStore(),i=this.sprites;if(!t)return Ext.emptyArray;if(i&&!e)return i;var n,r,o,a=this.getSurface(),s=t.getData().items,l=this.spritesPerSlice,d=this.partNames.length,u=s.length;for(r=0;r<u;r++)if(!i[r*l])for(o=0;o<d;o++)(n=a.add({type:"pie3dPart",part:this.partNames[o],series:this})).getAnimation().setDurationOn("baseRotation",0),i.push(n);return i},betweenAngle:function(e,t,i){var n=2*Math.PI,r=this.rotationOffset;return i+=r,e-=t+=r,i-=t,e%=n,i%=n,e+=n,i+=n,(e%=n)<(i%=n)||0===i},getItemForPoint:function(e,t){var i,n,r,o,a,s=this.getSprites(),l=this.spritesPerSlice,d=null;if(!s)return d;for(i=this.getStore().getData().items,n=this.getHidden(),r=0,o=i.length;r<o;r++)if(!n[r]&&s[a=r*l].hitTest([e,t])){d={series:this,sprite:s.slice(a,a+l),index:r,record:i[r],category:"sprites",field:this.getXField()};break}return d},provideLegendInfo:function(e){var t,i,n,r,o,a,s=this.getStore();if(s)for(t=s.getData().items,i=this.getLabel().getTemplate().getField(),n=this.getField(),r=this.getHidden(),a=0;a<t.length;a++)o=this.getStyleByIndex(a).baseColor,e.push({name:i?String(t[a].get(i)):n+" "+a,mark:o||"black",disabled:r[a],series:this.getId(),index:a})}},function(){var e=this.prototype,t=Ext.chart.series.sprite.Pie3DPart.def.getInitialConfig().processors.part;e.partNames=t.replace(/^enums\(|\)/g,"").split(","),e.spritesPerSlice=e.partNames.length}),Ext.define("Ext.chart.series.sprite.Polar",{extend:"Ext.chart.series.sprite.Series",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",baseRotation:"number"},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:Math.PI,startRho:0,endRho:150,baseRotation:0},triggers:{centerX:"bbox",centerY:"bbox",startAngle:"bbox",endAngle:"bbox",startRho:"bbox",endRho:"bbox",baseRotation:"bbox"}}},updatePlainBBox:function(e){var t=this.attr;e.x=t.centerX-t.endRho,e.y=t.centerY+t.endRho,e.width=2*t.endRho,e.height=2*t.endRho}}),Ext.define("Ext.chart.series.sprite.Radar",{alias:"sprite.radar",extend:"Ext.chart.series.sprite.Polar",getDataPointXY:function(e){var t,i,n,r,o,a=this.attr,s=a.centerX,l=a.centerY,d=a.matrix,u=a.dataMinX,c=a.dataMaxX,h=a.dataX,f=a.dataY,g=a.endRho,p=a.startRho,m=a.baseRotation;return o=a.rangeY?a.rangeY[1]:a.dataMaxY,i=(h[e]-u)/(c-u+1)*2*Math.PI+m,t=f[e]/o*(g-p)+p,n=s+Math.cos(i)*t,r=l+Math.sin(i)*t,[d.x(n,r),d.y(n,r)]},render:function(e,t){var i,n,r,o,a=this.attr,s=a.dataX.length,l=this.surfaceMatrix,d={};for(t.beginPath(),i=0;i<s;i++)n=(o=this.getDataPointXY(i))[0],r=o[1],0===i&&t.moveTo(n,r),t.lineTo(n,r),d.translationX=l.x(n,r),d.translationY=l.y(n,r),this.putMarker("markers",d,i,!0);t.closePath(),t.fillStroke(a)}}),Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Polar",type:"radar",seriesType:"radar",alias:"series.radar",requires:["Ext.chart.series.sprite.Radar"],themeColorCount:function(){return 1},isStoreDependantColorCount:!1,themeMarkerCount:function(){return 1},updateAngularAxis:function(e){e.processData(this)},updateRadialAxis:function(e){e.processData(this)},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},updateCenter:function(e){this.setStyle({translationX:e[0]+this.getOffsetX(),translationY:e[1]+this.getOffsetY()}),this.doUpdateStyles()},updateRadius:function(e){this.setStyle({endRho:e}),this.doUpdateStyles()},updateRotation:function(e){var t,i,n=this.getChart().getAxes();for(t=0,i=n.length;t<i;t++)n[t].setRotation(e);this.setStyle({rotationRads:e}),this.doUpdateStyles()},updateTotalAngle:function(e){this.processData()},getItemForPoint:function(e,t){var i,n,r,o,a,s=this.sprites&&this.sprites[0],l=s.attr.dataX.length,d=this.getStore(),u=this.getMarker();if(this.getHidden())return null;if(s&&u)for(a=s.getMarker("markers"),r=0;r<l;r++)if(i=.25*((o=a.getBBoxFor(r)).width+o.height),n=s.getDataPointXY(r),Math.abs(n[0]-e)<i&&Math.abs(n[1]-t)<i)return{series:this,sprite:s,index:r,category:"markers",record:d.getData().items[r],field:this.getYField()};return this.callParent(arguments)},getDefaultSpriteConfig:function(){var e=this.callParent(),t={customDurations:{translationX:0,translationY:0,rotationRads:0,dataMinX:0,dataMaxX:0}};return e.animation?Ext.apply(e.animation,t):e.animation=t,e},getSprites:function(){var e=this.getChart(),t=this.sprites;return e?(t.length||this.createSprite(),t):Ext.emptyArray},provideLegendInfo:function(e){var t=this.getSubStyleWithTheme(),i=t.fillStyle;Ext.isArray(i)&&(i=i[0]),e.push({name:this.getTitle()||this.getYField()||this.getId(),mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||t.strokeStyle||"black",disabled:this.getHidden(),series:this.getId(),index:0})}}),Ext.define("Ext.chart.series.sprite.Scatter",{alias:"sprite.scatterSeries",extend:"Ext.chart.series.sprite.Cartesian",renderClipped:function(e,t,i,n){if(!this.cleanRedraw){var r,o,a,s,l,d,u,c,h,f=this.attr,g=f.dataX,p=f.dataY,m=f.labels,x=this.getSeries(),y=m&&this.getMarker("labels"),v=this.surfaceMatrix,E=this.attr.matrix,b=E.getXX(),C=E.getYY(),S=E.getDX(),w=E.getDY(),T={},P=e.getInherited().rtl&&!f.flipXY?-1:1;for(d=f.flipXY?(a=n[1]-b*P,s=n[1]+n[3]+b*P,l=n[0]-C,n[0]+n[2]+C):(a=n[0]-b*P,s=n[0]+n[2]+b*P,l=n[1]-C,n[1]+n[3]+C),h=0;h<g.length;h++)u=g[h],c=(c=p[h])*C+w,a<=(u=u*b+S)&&u<=s&&l<=c&&c<=d&&(f.renderer?(o=[this,T={type:"markers",translationX:v.x(u,c),translationY:v.y(u,c)},{store:this.getStore()},h],r=Ext.callback(f.renderer,null,o,0,x),T=Ext.apply(T,r)):(T.translationX=v.x(u,c),T.translationY=v.y(u,c)),this.putMarker("markers",T,h,!f.renderer),y&&m[h]&&this.drawLabel(m[h],u,c,h,n))}},drawLabel:function(e,t,i,n,r){var o,a,s,l,d,u,c=this,h=c.attr,f=c.getMarker("labels"),g=f.getTemplate(),p=c.labelCfg||(c.labelCfg={}),m=c.surfaceMatrix,x=h.labelOverflowPadding,y=h.flipXY;switch(p.text=e,(l=c.getMarkerBBox("labels",n,!0))||(c.putMarker("labels",p,n),l=c.getMarkerBBox("labels",n,!0)),p.rotationRads=y?.5*Math.PI:0,s=l.height/2,o=t,g.attr.display){case"under":a=i-s-x;break;case"rotate":o+=x,a=i-x,p.rotationRads=-Math.PI/4;break;default:a=i+s+x}p.x=m.x(o,a),p.y=m.y(o,a),g.attr.renderer&&(u=[e,f,p,{store:c.getStore()},n],"string"==typeof(d=Ext.callback(g.attr.renderer,null,u,0,c.getSeries()))?p.text=d:Ext.apply(p,d)),c.putMarker("labels",p,n)}}),Ext.define("Ext.chart.series.Scatter",{extend:"Ext.chart.series.Cartesian",alias:"series.scatter",type:"scatter",seriesType:"scatterSeries",requires:["Ext.chart.series.sprite.Scatter"],config:{itemInstancing:null,marker:!0},themeMarkerCount:function(){return 1},provideLegendInfo:function(e){var t=this.getMarkerStyleByIndex(0),i=t.fillStyle;e.push({name:this.getTitle()||this.getYField()||this.getId(),mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||t.strokeStyle||"black",disabled:this.getHidden(),series:this.getId(),index:0})}}),Ext.define("Ext.chart.theme.Blue",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.blue","chart.theme.Blue"],config:{baseColor:"#4d7fe6"}}),Ext.define("Ext.chart.theme.BlueGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.blue-gradients","chart.theme.Blue:gradients"],config:{baseColor:"#4d7fe6",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category1",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category1","chart.theme.Category1"],config:{colors:["#f0a50a","#c20024","#2044ba","#810065","#7eae29"]}}),Ext.define("Ext.chart.theme.Category1Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category1-gradients","chart.theme.Category1:gradients"],config:{colors:["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category2",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category2","chart.theme.Category2"],config:{colors:["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"]}}),Ext.define("Ext.chart.theme.Category2Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category2-gradients","chart.theme.Category2:gradients"],config:{colors:["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category3",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category3","chart.theme.Category3"],config:{colors:["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"]}}),Ext.define("Ext.chart.theme.Category3Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category3-gradients","chart.theme.Category3:gradients"],config:{colors:["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category4",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category4","chart.theme.Category4"],config:{colors:["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"]}}),Ext.define("Ext.chart.theme.Category4Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category4-gradients","chart.theme.Category4:gradients"],config:{colors:["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category5",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category5","chart.theme.Category5"],config:{colors:["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"]}}),Ext.define("Ext.chart.theme.Category5Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category5-gradients","chart.theme.Category5:gradients"],config:{colors:["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category6",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category6","chart.theme.Category6"],config:{colors:["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]}}),Ext.define("Ext.chart.theme.Category6Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category6-gradients","chart.theme.Category6:gradients"],config:{colors:["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.DefaultGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.default-gradients","chart.theme.Base:gradients"],config:{gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Green",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.green","chart.theme.Green"],config:{baseColor:"#b1da5a"}}),Ext.define("Ext.chart.theme.GreenGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.green-gradients","chart.theme.Green:gradients"],config:{baseColor:"#b1da5a",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Midnight",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.midnight","chart.theme.Midnight"],config:{colors:["#a837ff","#4ac0f2","#ff4d35","#ff8809","#61c102","#ff37ea"],chart:{defaults:{captions:{title:{docked:"top",padding:5,style:{textAlign:"center",fontFamily:"default",fontWeight:"bold",fillStyle:"rgb(224, 224, 227)",fontSize:"default*1.6"}},subtitle:{docked:"top",style:{textAlign:"center",fontFamily:"default",fontWeight:"normal",fillStyle:"rgb(224, 224, 227)",fontSize:"default*1.3"}},credits:{docked:"bottom",padding:5,style:{textAlign:"left",fontFamily:"default",fontWeight:"lighter",fillStyle:"rgb(224, 224, 227)",fontSize:"default"}}},background:"rgb(52, 52, 53)"}},axis:{defaults:{style:{strokeStyle:"rgb(224, 224, 227)"},label:{fillStyle:"rgb(224, 224, 227)"},title:{fillStyle:"rgb(224, 224, 227)"},grid:{strokeStyle:"rgb(112, 112, 115)"}}},series:{defaults:{label:{fillStyle:"rgb(224, 224, 227)"}}},sprites:{text:{fillStyle:"rgb(224, 224, 227)"}},legend:{label:{fillStyle:"white"},border:{lineWidth:2,fillStyle:"rgba(255, 255, 255, 0.3)",strokeStyle:"rgb(150, 150, 150)"},background:"rgb(52, 52, 53)"}}}),Ext.define("Ext.chart.theme.Muted",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.muted","chart.theme.Muted"],config:{colors:["#8ca640","#974144","#4091ba","#8e658e","#3b8d8b","#b86465","#d2af69","#6e8852","#3dcc7e","#a6bed1","#cbaa4b","#998baa"]}}),Ext.define("Ext.chart.theme.Purple",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.purple","chart.theme.Purple"],config:{baseColor:"#da5abd"}}),Ext.define("Ext.chart.theme.PurpleGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.purple-gradients","chart.theme.Purple:gradients"],config:{baseColor:"#da5abd",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Red",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.red","chart.theme.Red"],config:{baseColor:"#e84b67"}}),Ext.define("Ext.chart.theme.RedGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.red-gradients","chart.theme.Red:gradients"],config:{baseColor:"#e84b67",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Sky",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.sky","chart.theme.Sky"],config:{baseColor:"#4ce0e7"}}),Ext.define("Ext.chart.theme.SkyGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.sky-gradients","chart.theme.Sky:gradients"],config:{baseColor:"#4ce0e7",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Yellow",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.yellow","chart.theme.Yellow"],config:{baseColor:"#fec935"}}),Ext.define("Ext.chart.theme.YellowGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.yellow-gradients","chart.theme.Yellow:gradients"],config:{baseColor:"#fec935",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.series.Series",{config:{}}),Ext.define("Ext.chart.theme.series.Area",{extend:"Ext.chart.theme.series.Series",config:{}}),Ext.define("Ext.chart.theme.series.Bar",{extend:"Ext.chart.theme.series.Series",config:{}}),Ext.define("Ext.chart.theme.series.Bar3D",{extend:"Ext.chart.theme.series.Series",config:{}}),Ext.define("Ext.chart.theme.series.BoxPlot",{extend:"Ext.chart.theme.series.Series",config:{}}),Ext.define("Ext.chart.theme.series.CandleStick",{extend:"Ext.chart.theme.series.Series",config:{}}),Ext.define("Ext.chart.theme.series.Line",{extend:"Ext.chart.theme.series.Series",config:{}}),Ext.define("Ext.chart.theme.series.Pie",{extend:"Ext.chart.theme.series.Series",config:{}}),Ext.define("Ext.chart.theme.series.Pie3D",{extend:"Ext.chart.theme.series.Series",config:{}}),Ext.define("Ext.draw.Point",{requires:["Ext.draw.Draw","Ext.draw.Matrix"],isPoint:!0,x:0,y:0,length:0,angle:0,angleUnits:"degrees",statics:{fly:function(){var i=null;return function(e,t){return(i=i||new Ext.draw.Point).constructor(e,t),i}}()},constructor:function(e,t){"number"==typeof e?(this.x=e,this.y="number"==typeof t?t:e):Ext.isArray(e)?(this.x=e[0],this.y=e[1]):e&&(this.x=e.x,this.y=e.y),this.calculatePolar()},calculateCartesian:function(){var e=this.length,t=this.angle;"degrees"===this.angleUnits&&(t=Ext.draw.Draw.rad(t)),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e},calculatePolar:function(){var e=this.x,t=this.y;this.length=Math.sqrt(e*e+t*t),this.angle=Math.atan2(t,e),"degrees"===this.angleUnits&&(this.angle=Ext.draw.Draw.degrees(this.angle))},setX:function(e){this.x=e,this.calculatePolar()},setY:function(e){this.y=e,this.calculatePolar()},set:function(e,t){this.constructor(e,t)},setAngle:function(e){this.angle=e,this.calculateCartesian()},setLength:function(e){this.length=e,this.calculateCartesian()},setPolar:function(e,t){this.angle=e,this.length=t,this.calculateCartesian()},clone:function(){return new Ext.draw.Point(this.x,this.y)},add:function(e,t){var i=Ext.draw.Point.fly(e,t);return new Ext.draw.Point(this.x+i.x,this.y+i.y)},sub:function(e,t){var i=Ext.draw.Point.fly(e,t);return new Ext.draw.Point(this.x-i.x,this.y-i.y)},mul:function(e){return new Ext.draw.Point(this.x*e,this.y*e)},div:function(e){return new Ext.draw.Point(this.x/e,this.y/e)},dot:function(e,t){var i=Ext.draw.Point.fly(e,t);return this.x*i.x+this.y*i.y},equals:function(e,t){var i=Ext.draw.Point.fly(e,t);return this.x===i.x&&this.y===i.y},rotate:function(e,t){var i,n,r,o,a;return"degrees"===this.angleUnits&&(e=Ext.draw.Draw.rad(e),i=Math.sin(e),n=Math.cos(e)),o=t?(r=t.x,t.y):r=0,a=Ext.draw.Matrix.fly([n,i,-i,n,r-n*r+o*i,o-n*o+r*-i]).transformPoint(this),new Ext.draw.Point(a)},transform:function(e){return e&&e.isMatrix?new Ext.draw.Point(e.transformPoint(this)):6===arguments.length?new Ext.draw.Point(Ext.draw.Matrix.fly(arguments).transformPoint(this)):void Ext.raise("Invalid parameters.")},round:function(){return new Ext.draw.Point(Math.round(this.x),Math.round(this.y))},ceil:function(){return new Ext.draw.Point(Math.ceil(this.x),Math.ceil(this.y))},floor:function(){return new Ext.draw.Point(Math.floor(this.x),Math.floor(this.y))},abs:function(e,t){return new Ext.draw.Point(Math.abs(this.x),Math.abs(this.y))},normalize:function(e){var t=this.x,i=this.y,n=(e||1)/Math.sqrt(t*t+i*i);return new Ext.draw.Point(t*n,i*n)},getDistanceToLine:function(e,t){var i,n;return 4===arguments.length&&(e=new Ext.draw.Point(e,t),t=new Ext.draw.Point(arguments[2],arguments[3])),i=t.sub(e).normalize(),(n=e.sub(this)).sub(i.mul(n.dot(i)))},isZero:function(){return 0===this.x&&0===this.y},isNumber:function(){return Ext.isNumber(this.x)&&Ext.isNumber(this.y)}}),Ext.define("Ext.draw.plugin.SpriteEvents",{extend:"Ext.plugin.Abstract",alias:"plugin.spriteevents",requires:["Ext.draw.overrides.hittest.All"],mouseMoveEvents:{mousemove:!0,mouseover:!0,mouseout:!0},spriteMouseMoveEvents:{spritemousemove:!0,spritemouseover:!0,spritemouseout:!0},init:function(e){var t="handleEvent";(this.drawContainer=e).addElementListener({click:t,dblclick:t,mousedown:t,mousemove:t,mouseup:t,mouseover:t,mouseout:t,priority:1001,scope:this})},hasSpriteMouseMoveListeners:function(){var e,t=this.drawContainer.hasListeners;for(e in this.spriteMouseMoveEvents)if(e in t)return!0;return!1},hitTestEvent:function(e){var t,i,n=this.drawContainer.getItems();for(i=n.length-1;0<=i;i--)if(t=n.get(i).hitTestEvent(e))return t;return null},handleEvent:function(e){var t,i=this.drawContainer,n=e.type in this.mouseMoveEvents,r=this.lastSprite;n&&!this.hasSpriteMouseMoveListeners()||(t=this.hitTestEvent(e),n&&!Ext.Object.equals(t,r)&&(r&&i.fireEvent("spritemouseout",r,e),t&&i.fireEvent("spritemouseover",t,e)),t&&i.fireEvent("sprite"+e.type,t,e),this.lastSprite=t)}}),Ext.define("Ext.chart.interactions.ItemInfo",{extend:"Ext.chart.interactions.Abstract",type:"iteminfo",alias:"interaction.iteminfo",config:{extjsGestures:{start:{event:"click",handler:"onInfoGesture"},move:{event:"mousemove",handler:"onInfoGesture"},end:{event:"mouseleave",handler:"onInfoGesture"}}},item:null,onInfoGesture:function(e,t){var i=this.getItemForEvent(e),n=i&&i.series.tooltip;return n&&n.onMouseMove.call(n,e),i!==this.item&&(i?i.series.showTip(i):this.item.series.hideTip(this.item),this.item=i),!1}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})}(this,function(_){"use strict";var s=function(e,t){return e<t?-1:t<e?1:t<=e?0:NaN},w=function(o){var i;return 1===o.length&&(i=o,o=function(e,t){return s(i(e),t)}),{left:function(e,t,i,n){for(null==i&&(i=0),null==n&&(n=e.length);i<n;){var r=i+n>>>1;o(e[r],t)<0?i=1+r:n=r}return i},right:function(e,t,i,n){for(null==i&&(i=0),null==n&&(n=e.length);i<n;){var r=i+n>>>1;0<o(e[r],t)?n=r:i=1+r}return i}}};var e=w(s),p=e.right,t=e.left;function u(e,t){return[e,t]}function d(e){return null===e?NaN:+e}function n(e,t){var i,n,r=e.length,o=0,a=0,s=-1,l=0;if(null==t)for(;++s<r;)isNaN(i=d(e[s]))||(a+=(n=i-o)*(i-(o+=n/++l)));else for(;++s<r;)isNaN(i=d(t(e[s],s,e)))||(a+=(n=i-o)*(i-(o+=n/++l)));if(1<l)return a/(l-1)}function r(e,t){var i=n(e,t);return i?Math.sqrt(i):i}function i(e,t){var i,n,r,o=-1,a=e.length;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n<=n){i=r=n;break}for(;++o<a;)null!=(n=e[o])&&(n<i&&(i=n),r<n&&(r=n))}else{for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n<=n){i=r=n;break}for(;++o<a;)null!=(n=t(e[o],o,e))&&(n<i&&(i=n),r<n&&(r=n))}return[i,r]}function o(e){return function(){return e}}function a(e){return e}var l=Array.prototype,c=l.slice,h=l.map,T=function(e,t,i){e=+e,t=+t,i=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+i;for(var n=-1,r=0|Math.max(0,Math.ceil((t-e)/i)),o=new Array(r);++n<r;)o[n]=e+n*i;return o},f=Math.sqrt(50),g=Math.sqrt(10),m=Math.sqrt(2),x=function(e,t,i){var n=P(e,t,i);return T(Math.ceil(e/n)*n,Math.floor(t/n)*n+n/2,n)};function P(e,t,i){var n=Math.abs(t-e)/Math.max(0,i),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),o=n/r;return f<=o?r*=10:g<=o?r*=5:m<=o&&(r*=2),t<e?-r:r}function y(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function v(e,t){var i,n,r=-1,o=e.length;if(null==t){for(;++r<o;)if(null!=(n=e[r])&&n<=n){i=n;break}for(;++r<o;)null!=(n=e[r])&&n<i&&(i=n)}else{for(;++r<o;)if(null!=(n=t(e[r],r,e))&&n<=n){i=n;break}for(;++r<o;)null!=(n=t(e[r],r,e))&&n<i&&(i=n)}return i}function E(e){if(!(r=e.length))return[];for(var t=-1,i=v(e,C),n=new Array(i);++t<i;)for(var r,o=-1,a=n[t]=new Array(r);++o<r;)a[o]=e[o][t];return n}var b=function(e,t,i){if(null==i&&(i=d),n=e.length){if((t=+t)<=0||n<2)return+i(e[0],0,e);if(1<=t)return+i(e[n-1],n-1,e);var n,r=(n-1)*t,o=Math.floor(r),a=+i(e[o],o,e);return a+(+i(e[o+1],o+1,e)-a)*(r-o)}},k=function(e){for(var t,i,n,r=e.length,o=-1,a=0;++o<r;)a+=e[o].length;for(i=new Array(a);0<=--r;)for(t=(n=e[r]).length;0<=--t;)i[--a]=n[t];return i};function C(e){return e.length}var I=Array.prototype.slice,R=function(e){return e},M=1,A=2,D=3,F=4,L=1e-6;function O(e){return"translate("+e+",0)"}function B(e){return"translate(0,"+e+")"}function N(){return!this.__axis}function S(p,m){var x,y=[],v=null,E=null,b=6,C=6,S=3,w=p===M||p===F?-1:1,T=p===F||p===A?(x="x","y"):(x="y","x"),P=p===M||p===D?O:B;function t(e){var t=null==v?m.ticks?m.ticks.apply(m,y):m.domain():v,i=null==E?m.tickFormat?m.tickFormat.apply(m,y):R:E,n=Math.max(b,0)+S,r=m.range(),o=r[0]+.5,a=r[r.length-1]+.5,s=(m.bandwidth?function(t){var i=t.bandwidth()/2;return t.round()&&(i=Math.round(i)),function(e){return t(e)+i}}:R)(m.copy()),l=e.selection?e.selection():e,d=l.selectAll(".domain").data([null]),u=l.selectAll(".tick").data(t,m).order(),c=u.exit(),h=u.enter().append("g").attr("class","tick"),f=u.select("line"),g=u.select("text");d=d.merge(d.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),u=u.merge(h),f=f.merge(h.append("line").attr("stroke","#000").attr(x+"2",w*b).attr(T+"1",.5).attr(T+"2",.5)),g=g.merge(h.append("text").attr("fill","#000").attr(x,w*n).attr(T,.5).attr("dy",p===M?"0em":p===D?"0.71em":"0.32em")),e!==l&&(d=d.transition(e),u=u.transition(e),f=f.transition(e),g=g.transition(e),c=c.transition(e).attr("opacity",L).attr("transform",function(e){return isFinite(e=s(e))?P(e):this.getAttribute("transform")}),h.attr("opacity",L).attr("transform",function(e){var t=this.parentNode.__axis;return P(t&&isFinite(t=t(e))?t:s(e))})),c.remove(),d.attr("d",p===F||p==A?"M"+w*C+","+o+"H0.5V"+a+"H"+w*C:"M"+o+","+w*C+"V0.5H"+a+"V"+w*C),u.attr("opacity",1).attr("transform",function(e){return P(s(e))}),f.attr(x+"2",w*b),g.attr(x,w*n).text(i),l.filter(N).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",p===A?"start":p===F?"end":"middle"),l.each(function(){this.__axis=s})}return t.scale=function(e){return arguments.length?(m=e,t):m},t.ticks=function(){return y=I.call(arguments),t},t.tickArguments=function(e){return arguments.length?(y=null==e?[]:I.call(e),t):y.slice()},t.tickValues=function(e){return arguments.length?(v=null==e?null:I.call(e),t):v&&v.slice()},t.tickFormat=function(e){return arguments.length?(E=e,t):E},t.tickSize=function(e){return arguments.length?(b=C=+e,t):b},t.tickSizeInner=function(e){return arguments.length?(b=+e,t):b},t.tickSizeOuter=function(e){return arguments.length?(C=+e,t):C},t.tickPadding=function(e){return arguments.length?(S=+e,t):S},t}var H={value:function(){}};function z(){for(var e,t=0,i=arguments.length,n={};t<i;++t){if(!(e=arguments[t]+"")||e in n)throw new Error("illegal type: "+e);n[e]=[]}return new V(n)}function V(e){this._=e}function W(e,t){for(var i,n=0,r=e.length;n<r;++n)if((i=e[n]).name===t)return i.value}function G(e,t,i){for(var n=0,r=e.length;n<r;++n)if(e[n].name===t){e[n]=H,e=e.slice(0,n).concat(e.slice(n+1));break}return null!=i&&e.push({name:t,value:i}),e}V.prototype=z.prototype={constructor:V,on:function(e,t){var i,n,r=this._,o=(n=r,(e+"").trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");if(0<=i&&(t=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=o[a]).type)r[i]=G(r[i],e.name,t);else if(null==t)for(i in r)r[i]=G(r[i],e.name,null);return this}for(;++a<s;)if((i=(e=o[a]).type)&&(i=W(r[i],e.name)))return i},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new V(e)},call:function(e,t){if(0<(i=arguments.length-2))for(var i,n,r=new Array(i),o=0;o<i;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,i=(n=this._[e]).length;o<i;++o)n[o].value.apply(t,r)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],r=0,o=n.length;r<o;++r)n[r].value.apply(t,i)}};function X(e){var t=e+="",i=t.indexOf(":");return 0<=i&&"xmlns"!==(t=e.slice(0,i))&&(e=e.slice(i+1)),Y.hasOwnProperty(t)?{space:Y[t],local:e}:e}var U="http://www.w3.org/1999/xhtml",Y={svg:"http://www.w3.org/2000/svg",xhtml:U,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function q(e){var t=X(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(i){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===U&&e.documentElement.namespaceURI===U?e.createElement(i):e.createElementNS(t,i)}})(t)}var K=0;function $(){return new j}function j(){this._="@"+(++K).toString(36)}j.prototype=$.prototype={constructor:j,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var Q=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var Z=document.documentElement;if(!Z.matches){var J=Z.webkitMatchesSelector||Z.msMatchesSelector||Z.mozMatchesSelector||Z.oMatchesSelector;Q=function(e){return function(){return J.call(this,e)}}}}var ee=Q,te={};_.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(te={mouseenter:"mouseover",mouseleave:"mouseout"}));function ie(i,e,t){return i=ne(i,e,t),function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||i.call(this,e)}}function ne(i,n,r){return function(e){var t=_.event;_.event=e;try{i.call(this,this.__data__,n,r)}finally{_.event=t}}}function re(o){return function(){var e=this.__on;if(e){for(var t,i=0,n=-1,r=e.length;i<r;++i)t=e[i],o.type&&t.type!==o.type||t.name!==o.name?e[++n]=t:this.removeEventListener(t.type,t.listener,t.capture);++n?e.length=n:delete this.__on}}}function oe(l,d,u){var c=te.hasOwnProperty(l.type)?ie:ne;return function(e,t,i){var n,r=this.__on,o=c(d,t,i);if(r)for(var a=0,s=r.length;a<s;++a)if((n=r[a]).type===l.type&&n.name===l.name)return this.removeEventListener(n.type,n.listener,n.capture),this.addEventListener(n.type,n.listener=o,n.capture=u),void(n.value=d);this.addEventListener(l.type,o,u),n={type:l.type,name:l.name,value:d,listener:o,capture:u},r?r.push(n):this.__on=[n]}}function ae(e,t,i,n){var r=_.event;e.sourceEvent=_.event,_.event=e;try{return t.apply(i,n)}finally{_.event=r}}function se(){for(var e,t=_.event;e=t.sourceEvent;)t=e;return t}function le(e,t){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}var de=function(e){var t=se();return t.changedTouches&&(t=t.changedTouches[0]),le(e,t)};function ue(){}function ce(e){return null==e?ue:function(){return this.querySelector(e)}}function he(){return[]}function fe(e){return null==e?he:function(){return this.querySelectorAll(e)}}function ge(e){return new Array(e.length)}function pe(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}pe.prototype={constructor:pe,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function me(e,t,i,n,r,o){for(var a,s=0,l=t.length,d=o.length;s<d;++s)(a=t[s])?(a.__data__=o[s],n[s]=a):i[s]=new pe(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function xe(e,t,i,n,r,o,a){var s,l,d,u={},c=t.length,h=o.length,f=new Array(c);for(s=0;s<c;++s)(l=t[s])&&(f[s]=d="$"+a.call(l,l.__data__,s,t),d in u?r[s]=l:u[d]=l);for(s=0;s<h;++s)(l=u[d="$"+a.call(e,o[s],s,o)])?((n[s]=l).__data__=o[s],u[d]=null):i[s]=new pe(e,o[s]);for(s=0;s<c;++s)(l=t[s])&&u[f[s]]===l&&(r[s]=l)}function ye(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}var ve=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Ee(e){return e.trim().split(/^|\s+/)}function be(e){return e.classList||new Ce(e)}function Ce(e){this._node=e,this._names=Ee(e.getAttribute("class")||"")}function Se(e,t){for(var i=be(e),n=-1,r=t.length;++n<r;)i.add(t[n])}function we(e,t){for(var i=be(e),n=-1,r=t.length;++n<r;)i.remove(t[n])}Ce.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};function Te(){this.textContent=""}function Pe(){this.innerHTML=""}function ke(){this.nextSibling&&this.parentNode.appendChild(this)}function Ie(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Re(){return null}function Me(){var e=this.parentNode;e&&e.removeChild(this)}function Ae(e,t,i){var n=ve(e),r=n.CustomEvent;r?r=new r(t,i):(r=n.document.createEvent("Event"),i?(r.initEvent(t,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}var De=[null];function Fe(e,t){this._groups=e,this._parents=t}function Le(){return new Fe([[document.documentElement]],De)}Fe.prototype=Le.prototype={constructor:Fe,select:function(e){"function"!=typeof e&&(e=ce(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var o,a,s=t[r],l=s.length,d=n[r]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),d[u]=a);return new Fe(n,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=fe(e));for(var t=this._groups,i=t.length,n=[],r=[],o=0;o<i;++o)for(var a,s=t[o],l=s.length,d=0;d<l;++d)(a=s[d])&&(n.push(e.call(a,a.__data__,d,s)),r.push(a));return new Fe(n,r)},filter:function(e){"function"!=typeof e&&(e=ee(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var o,a=t[r],s=a.length,l=n[r]=[],d=0;d<s;++d)(o=a[d])&&e.call(o,o.__data__,d,a)&&l.push(o);return new Fe(n,this._parents)},data:function(e,t){if(!e)return g=new Array(this.size()),u=-1,this.each(function(e){g[++u]=e}),g;var i,n=t?xe:me,r=this._parents,o=this._groups;"function"!=typeof e&&(i=e,e=function(){return i});for(var a=o.length,s=new Array(a),l=new Array(a),d=new Array(a),u=0;u<a;++u){var c=r[u],h=o[u],f=h.length,g=e.call(c,c&&c.__data__,u,r),p=g.length,m=l[u]=new Array(p),x=s[u]=new Array(p);n(c,h,m,x,d[u]=new Array(f),g,t);for(var y,v,E=0,b=0;E<p;++E)if(y=m[E]){for(b<=E&&(b=E+1);!(v=x[b])&&++b<p;);y._next=v||null}}return(s=new Fe(s,r))._enter=l,s._exit=d,s},enter:function(){return new Fe(this._enter||this._groups.map(ge),this._parents)},exit:function(){return new Fe(this._exit||this._groups.map(ge),this._parents)},merge:function(e){for(var t=this._groups,i=e._groups,n=t.length,r=i.length,o=Math.min(n,r),a=new Array(n),s=0;s<o;++s)for(var l,d=t[s],u=i[s],c=d.length,h=a[s]=new Array(c),f=0;f<c;++f)(l=d[f]||u[f])&&(h[f]=l);for(;s<n;++s)a[s]=t[s];return new Fe(a,this._parents)},order:function(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var n,r=e[t],o=r.length-1,a=r[o];0<=--o;)(n=r[o])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},sort:function(i){function e(e,t){return e&&t?i(e.__data__,t.__data__):!e-!t}i=i||ye;for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o){for(var a,s=t[o],l=s.length,d=r[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(d[u]=a);d.sort(e)}return new Fe(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],r=0,o=n.length;r<o;++r){var a=n[r];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var r,o=t[i],a=0,s=o.length;a<s;++a)(r=o[a])&&e.call(r,r.__data__,a,o);return this},attr:function(e,t){var i=X(e);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((null==t?i.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?i.local?function(t,i){return function(){var e=i.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,i){return function(){var e=i.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:i.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(i,t))},style:function(e,t,i){var n;return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(t,i,n){return function(){var e=i.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,n)}}:function(e,t,i){return function(){this.style.setProperty(e,t,i)}})(e,t,null==i?"":i)):ve(n=this.node()).getComputedStyle(n,null).getPropertyValue(e)},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(t,i){return function(){var e=i.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var i=Ee(e+"");if(arguments.length<2){for(var n=be(this.node()),r=-1,o=i.length;++r<o;)if(!n.contains(i[r]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?Se:we)(this,e)}}:t?function(e){return function(){Se(this,e)}}:function(e){return function(){we(this,e)}})(i,t))},text:function(e){return arguments.length?this.each(null==e?Te:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Pe:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(ke)},lower:function(){return this.each(Ie)},append:function(e){var t="function"==typeof e?e:q(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var i="function"==typeof e?e:q(e),n=null==t?Re:"function"==typeof t?t:ce(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function(){return this.each(Me)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,i){var n,r,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return 0<=i&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}}),a=o.length;if(!(arguments.length<2)){for(s=t?oe:re,null==i&&(i=!1),n=0;n<a;++n)this.each(s(o[n],t,i));return this}var s=this.node().__on;if(s)for(var l,d=0,u=s.length;d<u;++d)for(n=0,l=s[d];n<a;++n)if((r=o[n]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return Ae(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return Ae(this,e,t)}})(e,t))}};function Oe(e,t,i){arguments.length<3&&(i=t,t=se().changedTouches);for(var n,r=0,o=t?t.length:0;r<o;++r)if((n=t[r]).identifier===i)return le(e,n);return null}var Be=function(e){return"string"==typeof e?new Fe([[document.querySelector(e)]],[document.documentElement]):new Fe([[e]],De)};function Ne(){_.event.stopImmediatePropagation()}var He=function(){_.event.preventDefault(),_.event.stopImmediatePropagation()},Ve=function(e){var t=e.document.documentElement,i=Be(e).on("dragstart.drag",He,!0);"onselectstart"in t?i.on("selectstart.drag",He,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")};function _e(e,t){var i=e.document.documentElement,n=Be(e).on("dragstart.drag",null);t&&(n.on("click.drag",He,!0),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in i?n.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}function ze(e){return function(){return e}}function We(e,t,i,n,r,o,a,s,l,d){this.target=e,this.type=t,this.subject=i,this.identifier=n,this.active=r,this.x=o,this.y=a,this.dx=s,this.dy=l,this._=d}function Ge(){return!_.event.button}function Xe(){return this.parentNode}function Ue(e){return null==e?{x:_.event.x,y:_.event.y}:e}We.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ye(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function qe(e,t){var i=Object.create(e.prototype);for(var n in t)i[n]=t[n];return i}function Ke(){}var $e="\\s*([+-]?\\d+)\\s*",je="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ze=/^#([0-9a-f]{3})$/,Je=/^#([0-9a-f]{6})$/,et=new RegExp("^rgb\\("+[$e,$e,$e]+"\\)$"),tt=new RegExp("^rgb\\("+[Qe,Qe,Qe]+"\\)$"),it=new RegExp("^rgba\\("+[$e,$e,$e,je]+"\\)$"),nt=new RegExp("^rgba\\("+[Qe,Qe,Qe,je]+"\\)$"),rt=new RegExp("^hsl\\("+[je,Qe,Qe]+"\\)$"),ot=new RegExp("^hsla\\("+[je,Qe,Qe,je]+"\\)$"),at={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function st(e){var t;return e=(e+"").trim().toLowerCase(),(t=Ze.exec(e))?new ht((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=Je.exec(e))?lt(parseInt(t[1],16)):(t=et.exec(e))?new ht(t[1],t[2],t[3],1):(t=tt.exec(e))?new ht(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=it.exec(e))?dt(t[1],t[2],t[3],t[4]):(t=nt.exec(e))?dt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=rt.exec(e))?ft(t[1],t[2]/100,t[3]/100,1):(t=ot.exec(e))?ft(t[1],t[2]/100,t[3]/100,t[4]):at.hasOwnProperty(e)?lt(at[e]):"transparent"===e?new ht(NaN,NaN,NaN,0):null}function lt(e){return new ht(e>>16&255,e>>8&255,255&e,1)}function dt(e,t,i,n){return n<=0&&(e=t=i=NaN),new ht(e,t,i,n)}function ut(e){return e instanceof Ke||(e=st(e)),e?new ht((e=e.rgb()).r,e.g,e.b,e.opacity):new ht}function ct(e,t,i,n){return 1===arguments.length?ut(e):new ht(e,t,i,null==n?1:n)}function ht(e,t,i,n){this.r=+e,this.g=+t,this.b=+i,this.opacity=+n}function ft(e,t,i,n){return n<=0?e=t=i=NaN:i<=0||1<=i?e=t=NaN:t<=0&&(e=NaN),new pt(e,t,i,n)}function gt(e,t,i,n){return 1===arguments.length?function(e){if(e instanceof pt)return new pt(e.h,e.s,e.l,e.opacity);if(e instanceof Ke||(e=st(e)),!e)return new pt;if(e instanceof pt)return e;var t=(e=e.rgb()).r/255,i=e.g/255,n=e.b/255,r=Math.min(t,i,n),o=Math.max(t,i,n),a=NaN,s=o-r,l=(o+r)/2;return s?(a=t===o?(i-n)/s+6*(i<n):i===o?(n-t)/s+2:(t-i)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=0<l&&l<1?0:a,new pt(a,s,l,e.opacity)}(e):new pt(e,t,i,null==n?1:n)}function pt(e,t,i,n){this.h=+e,this.s=+t,this.l=+i,this.opacity=+n}function mt(e,t,i){return 255*(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)}Ye(Ke,st,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Ye(ht,ct,qe(Ke,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),Ye(pt,gt,qe(Ke,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new pt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new pt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*t,r=2*i-n;return new ht(mt(240<=e?e-240:120+e,r,n),mt(e,r,n),mt(e<120?240+e:e-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var xt=Math.PI/180,yt=180/Math.PI,vt=.95047,Et=1,bt=1.08883,Ct=4/29,St=6/29*3*(6/29),wt=6/29*(6/29)*(6/29);function Tt(e){if(e instanceof kt)return new kt(e.l,e.a,e.b,e.opacity);if(e instanceof Ft){var t=e.h*xt;return new kt(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof ht||(e=ut(e));var i=At(e.r),n=At(e.g),r=At(e.b),o=It((.4124564*i+.3575761*n+.1804375*r)/vt),a=It((.2126729*i+.7151522*n+.072175*r)/Et);return new kt(116*a-16,500*(o-a),200*(a-It((.0193339*i+.119192*n+.9503041*r)/bt)),e.opacity)}function Pt(e,t,i,n){return 1===arguments.length?Tt(e):new kt(e,t,i,null==n?1:n)}function kt(e,t,i,n){this.l=+e,this.a=+t,this.b=+i,this.opacity=+n}function It(e){return wt<e?Math.pow(e,1/3):e/St+Ct}function Rt(e){return 6/29<e?e*e*e:St*(e-Ct)}function Mt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function At(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Dt(e,t,i,n){return 1===arguments.length?function(e){if(e instanceof Ft)return new Ft(e.h,e.c,e.l,e.opacity);e instanceof kt||(e=Tt(e));var t=Math.atan2(e.b,e.a)*yt;return new Ft(t<0?360+t:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new Ft(e,t,i,null==n?1:n)}function Ft(e,t,i,n){this.h=+e,this.c=+t,this.l=+i,this.opacity=+n}Ye(kt,Pt,qe(Ke,{brighter:function(e){return new kt(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new kt(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,i=isNaN(this.b)?e:e-this.b/200;return e=Et*Rt(e),new ht(Mt(3.2404542*(t=vt*Rt(t))-1.5371385*e-.4985314*(i=bt*Rt(i))),Mt(-.969266*t+1.8760108*e+.041556*i),Mt(.0556434*t-.2040259*e+1.0572252*i),this.opacity)}})),Ye(Ft,Dt,qe(Ke,{brighter:function(e){return new Ft(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Ft(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Tt(this).rgb()}}));var Lt=-.29227,Ot=-.90649,Bt=1.97294,Nt=Bt*Ot,Ht=1.78277*Bt,Vt=1.78277*Lt- -.14861*Ot;function _t(e,t,i,n){return 1===arguments.length?function(e){if(e instanceof zt)return new zt(e.h,e.s,e.l,e.opacity);e instanceof ht||(e=ut(e));var t=e.r/255,i=e.g/255,n=e.b/255,r=(Vt*n+Nt*t-Ht*i)/(Vt+Nt-Ht),o=n-r,a=(Bt*(i-r)-Lt*o)/Ot,s=Math.sqrt(a*a+o*o)/(Bt*r*(1-r)),l=s?Math.atan2(a,o)*yt-120:NaN;return new zt(l<0?l+360:l,s,r,e.opacity)}(e):new zt(e,t,i,null==n?1:n)}function zt(e,t,i,n){this.h=+e,this.s=+t,this.l=+i,this.opacity=+n}function Wt(e,t,i,n,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*i+(1+3*e+3*o-3*a)*n+a*r)/6}Ye(zt,_t,qe(Ke,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new zt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new zt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*xt,t=+this.l,i=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),r=Math.sin(e);return new ht(255*(t+i*(-.14861*n+1.78277*r)),255*(t+i*(Lt*n+Ot*r)),255*(t+Bt*n*i),this.opacity)}}));function Gt(a){var s=a.length-1;return function(e){var t=e<=0?e=0:1<=e?s-(e=1):Math.floor(e*s),i=a[t],n=a[t+1],r=0<t?a[t-1]:2*i-n,o=t<s-1?a[t+2]:2*n-i;return Wt((e-t/s)*s,r,i,n,o)}}function Xt(a){var s=a.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*s),i=a[(t+s-1)%s],n=a[t%s],r=a[(t+1)%s],o=a[(t+2)%s];return Wt((e-t/s)*s,i,n,r,o)}}var Ut=function(e){return function(){return e}};function Yt(t,i){return function(e){return t+e*i}}function qt(e,t){var i=t-e;return i?Yt(e,180<i||i<-180?i-360*Math.round(i/360):i):Ut(isNaN(e)?t:e)}function Kt(o){return 1==(o=+o)?$t:function(e,t){return t-e?(i=e,n=t,r=o,i=Math.pow(i,r),n=Math.pow(n,r)-i,r=1/r,function(e){return Math.pow(i+e*n,r)}):Ut(isNaN(e)?t:e);var i,n,r}}function $t(e,t){var i=t-e;return i?Yt(e,i):Ut(isNaN(e)?t:e)}var jt=function e(t){var a=Kt(t);function i(t,e){var i=a((t=ct(t)).r,(e=ct(e)).r),n=a(t.g,e.g),r=a(t.b,e.b),o=$t(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=n(e),t.b=r(e),t.opacity=o(e),t+""}}return i.gamma=e,i}(1);function Qt(s){return function(e){var t,i,n=e.length,r=new Array(n),o=new Array(n),a=new Array(n);for(t=0;t<n;++t)i=ct(e[t]),r[t]=i.r||0,o[t]=i.g||0,a[t]=i.b||0;return r=s(r),o=s(o),a=s(a),i.opacity=1,function(e){return i.r=r(e),i.g=o(e),i.b=a(e),i+""}}}function Zt(e,t){var i,n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(n),a=new Array(n);for(i=0;i<r;++i)o[i]=hi(e[i],t[i]);for(;i<n;++i)a[i]=t[i];return function(e){for(i=0;i<r;++i)a[i]=o[i](e);return a}}function Jt(t,i){var n=new Date;return i-=t=+t,function(e){return n.setTime(t+i*e),n}}function ei(e,t){var i,n={},r={};for(i in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)i in e?n[i]=hi(e[i],t[i]):r[i]=t[i];return function(e){for(i in n)r[i]=n[i](e);return r}}var ti=Qt(Gt),ii=Qt(Xt),ni=function(t,i){return i-=t=+t,function(e){return t+i*e}},ri=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oi=new RegExp(ri.source,"g");function ai(e,n){var t,i,r,o,a,s=ri.lastIndex=oi.lastIndex=0,l=-1,d=[],u=[];for(e+="",n+="";(t=ri.exec(e))&&(i=oi.exec(n));)(r=i.index)>s&&(r=n.slice(s,r),d[l]?d[l]+=r:d[++l]=r),(t=t[0])===(i=i[0])?d[l]?d[l]+=i:d[++l]=i:(d[++l]=null,u.push({i:l,x:ni(t,i)})),s=oi.lastIndex;return s<n.length&&(r=n.slice(s),d[l]?d[l]+=r:d[++l]=r),d.length<2?u[0]?(a=u[0].x,function(e){return a(e)+""}):(o=n,function(){return o}):(n=u.length,function(e){for(var t,i=0;i<n;++i)d[(t=u[i]).i]=t.x(e);return d.join("")})}function si(e,t,i,n,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*i+t*n)&&(i-=e*l,n-=t*l),(s=Math.sqrt(i*i+n*n))&&(i/=s,n/=s,l/=s),e*n<t*i&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*gi,skewX:Math.atan(l)*gi,scaleX:a,scaleY:s}}var li,di,ui,ci,hi=function(e,t){var i,n=typeof t;return null==t||"boolean"==n?Ut(t):("number"==n?ni:"string"==n?(i=st(t))?(t=i,jt):ai:t instanceof st?jt:t instanceof Date?Jt:Array.isArray(t)?Zt:isNaN(t)?ei:ni)(e,t)},fi=function(t,i){return i-=t=+t,function(e){return Math.round(t+i*e)}},gi=180/Math.PI,pi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mi(h,f,g,p){function m(e){return e.length?e.pop()+" ":""}return function(e,t){var i,n,r,o,a,s,l,d,u=[],c=[];return e=h(e),t=h(t),function(e,t,i,n,r,o){if(e!==i||t!==n){var a=r.push("translate(",null,f,null,g);o.push({i:a-4,x:ni(e,i)},{i:a-2,x:ni(t,n)})}else(i||n)&&r.push("translate("+i+f+n+g)}(e.translateX,e.translateY,t.translateX,t.translateY,u,c),i=e.rotate,n=t.rotate,r=u,o=c,i!==n?(180<i-n?n+=360:180<n-i&&(i+=360),o.push({i:r.push(m(r)+"rotate(",null,p)-2,x:ni(i,n)})):n&&r.push(m(r)+"rotate("+n+p),a=e.skewX,s=t.skewX,l=u,d=c,a!==s?d.push({i:l.push(m(l)+"skewX(",null,p)-2,x:ni(a,s)}):s&&l.push(m(l)+"skewX("+s+p),function(e,t,i,n,r,o){if(e!==i||t!==n){var a=r.push(m(r)+"scale(",null,",",null,")");o.push({i:a-4,x:ni(e,i)},{i:a-2,x:ni(t,n)})}else 1===i&&1===n||r.push(m(r)+"scale("+i+","+n+")")}(e.scaleX,e.scaleY,t.scaleX,t.scaleY,u,c),e=t=null,function(e){for(var t,i=-1,n=c.length;++i<n;)u[(t=c[i]).i]=t.x(e);return u.join("")}}}var xi=mi(function(e){return"none"===e?pi:(li||(li=document.createElement("DIV"),di=document.documentElement,ui=document.defaultView),li.style.transform=e,e=ui.getComputedStyle(di.appendChild(li),null).getPropertyValue("transform"),di.removeChild(li),e=e.slice(7,-1).split(","),si(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),yi=mi(function(e){return null==e?pi:((ci=ci||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",e),(e=ci.transform.baseVal.consolidate())?(e=e.matrix,si(e.a,e.b,e.c,e.d,e.e,e.f)):pi)},", ",")",")"),vi=Math.SQRT2;function Ei(e){return((e=Math.exp(e))+1/e)/2}function bi(e,t){var i,a,s=e[0],l=e[1],d=e[2],n=t[0],r=t[1],o=t[2],u=n-s,c=r-l,h=u*u+c*c;if(h<1e-12)a=Math.log(o/d)/vi,i=function(e){return[s+e*u,l+e*c,d*Math.exp(vi*e*a)]};else{var f=Math.sqrt(h),g=(o*o-d*d+4*h)/(2*d*2*f),p=(o*o-d*d-4*h)/(2*o*2*f),m=Math.log(Math.sqrt(g*g+1)-g),x=Math.log(Math.sqrt(p*p+1)-p);a=(x-m)/vi,i=function(e){var t,i,n=e*a,r=Ei(m),o=d/(2*f)*(r*(i=vi*n+m,((i=Math.exp(2*i))-1)/(i+1))-(t=m,((t=Math.exp(t))-1/t)/2));return[s+o*u,l+o*c,d*r/Ei(vi*n+m)]}}return i.duration=1e3*a,i}function Ci(a){return function(t,e){var i=a((t=gt(t)).h,(e=gt(e)).h),n=$t(t.s,e.s),r=$t(t.l,e.l),o=$t(t.opacity,e.opacity);return function(e){return t.h=i(e),t.s=n(e),t.l=r(e),t.opacity=o(e),t+""}}}var Si=Ci(qt),wi=Ci($t);function Ti(a){return function(t,e){var i=a((t=Dt(t)).h,(e=Dt(e)).h),n=$t(t.c,e.c),r=$t(t.l,e.l),o=$t(t.opacity,e.opacity);return function(e){return t.h=i(e),t.c=n(e),t.l=r(e),t.opacity=o(e),t+""}}}var Pi=Ti(qt),ki=Ti($t);function Ii(s){return function e(a){function t(t,e){var i=s((t=_t(t)).h,(e=_t(e)).h),n=$t(t.s,e.s),r=$t(t.l,e.l),o=$t(t.opacity,e.opacity);return function(e){return t.h=i(e),t.s=n(e),t.l=r(Math.pow(e,a)),t.opacity=o(e),t+""}}return a=+a,t.gamma=e,t}(1)}var Ri,Mi,Ai=Ii(qt),Di=Ii($t),Fi=0,Li=0,Oi=0,Bi=1e3,Ni=0,Hi=0,Vi=0,_i="object"==typeof performance&&performance.now?performance:Date,zi="function"==typeof requestAnimationFrame?requestAnimationFrame:function(e){setTimeout(e,17)};function Wi(){return Hi||(zi(Gi),Hi=_i.now()+Vi)}function Gi(){Hi=0}function Xi(){this._call=this._time=this._next=null}function Ui(e,t,i){var n=new Xi;return n.restart(e,t,i),n}function Yi(){Wi(),++Fi;for(var e,t=Ri;t;)0<=(e=Hi-t._time)&&t._call.call(null,e),t=t._next;--Fi}function qi(){Hi=(Ni=_i.now())+Vi,Fi=Li=0;try{Yi()}finally{Fi=0,function(){var e,t,i=Ri,n=1/0;for(;i;)i=i._call?(n>i._time&&(n=i._time),(e=i)._next):(t=i._next,i._next=null,e?e._next=t:Ri=t);Mi=e,$i(n)}(),Hi=0}}function Ki(){var e=_i.now(),t=e-Ni;Bi<t&&(Vi-=t,Ni=e)}function $i(e){if(!Fi){Li=Li&&clearTimeout(Li);var t=e-Hi;24<t?(e<1/0&&(Li=setTimeout(qi,t)),Oi=Oi&&clearInterval(Oi)):(Oi||(Ni=Hi,Oi=setInterval(Ki,Bi)),Fi=1,zi(qi))}}Xi.prototype=Ui.prototype={constructor:Xi,restart:function(e,t,i){if("function"!=typeof e)throw new TypeError("callback is not a function");i=(null==i?Wi():+i)+(null==t?0:+t),this._next||Mi===this||(Mi?Mi._next=this:Ri=this,Mi=this),this._call=e,this._time=i,$i()},stop:function(){this._call&&(this._call=null,this._time=1/0,$i())}};function ji(t,i,e){var n=new Xi;return i=null==i?0:+i,n.restart(function(e){n.stop(),t(e+i)},i,e),n}function Qi(e,t,i,n,r,o){var a,s,l,d,u,c=e.__transition;if(c){if(i in c)return}else e.__transition={};function h(e){var t,i,n,r;if(1!==l.state)return g();for(t in u)if((r=u[t]).name===l.name){if(3===r.state)return ji(h);4===r.state?(r.state=6,r.timer.stop(),r.on.call("interrupt",a,a.__data__,r.index,r.group),delete u[t]):+t<s&&(r.state=6,r.timer.stop(),delete u[t])}if(ji(function(){3===l.state&&(l.state=4,l.timer.restart(f,l.delay,l.time),f(e))}),l.state=tn,l.on.call("start",a,a.__data__,l.index,l.group),l.state===tn){for(l.state=3,d=new Array(n=l.tween.length),t=0,i=-1;t<n;++t)(r=l.tween[t].value.call(a,a.__data__,l.index,l.group))&&(d[++i]=r);d.length=i+1}}function f(e){for(var t=e<l.duration?l.ease.call(null,e/l.duration):(l.timer.restart(g),l.state=5,1),i=-1,n=d.length;++i<n;)d[i].call(null,t);5===l.state&&(l.on.call("end",a,a.__data__,l.index,l.group),g())}function g(){for(var e in l.state=6,l.timer.stop(),delete u[s],u)return;delete a.__transition}a=e,s=i,l={name:t,index:n,group:r,on:Zi,tween:Ji,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:en},((u=a.__transition)[s]=l).timer=Ui(function(e){l.state=1,l.timer.restart(h,l.delay,l.time),l.delay<=e&&h(e-l.delay)},0,l.time)}var Zi=z("start","end","interrupt"),Ji=[],en=0,tn=2;function nn(e,t){var i=e.__transition;if(!i||!(i=i[t])||i.state>en)throw new Error("too late");return i}function rn(e,t){var i=e.__transition;if(!i||!(i=i[t])||i.state>tn)throw new Error("too late");return i}function on(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("too late");return i}var an=function(e,t){var i,n,r,o=e.__transition,a=!0;if(o){for(r in t=null==t?null:t+"",o)(i=o[r]).name===t?(n=i.state>tn&&i.state<5,i.state=6,i.timer.stop(),n&&i.on.call("interrupt",e,e.__data__,i.index,i.group),delete o[r]):a=!1;a&&delete e.__transition}};function sn(e,t,i){var n=e._id;return e.each(function(){var e=rn(this,n);(e.value||(e.value={}))[t]=i.apply(this,arguments)}),function(e){return on(e,n).value[t]}}function ln(e,t){var i;return("number"==typeof t?ni:t instanceof st?jt:(i=st(t))?(t=i,jt):ai)(e,t)}function dn(i,n,r){var o,a,s=(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return 0<=t&&(e=e.slice(0,t)),!e||"start"===e})?nn:rn;return function(){var e=s(this,i),t=e.on;t!==o&&(a=(o=t).copy()).on(n,r),e.on=a}}var un=Le.prototype.constructor;var cn=0;function hn(e,t,i,n){this._groups=e,this._parents=t,this._name=i,this._id=n}function fn(e){return Le().transition(e)}function gn(){return++cn}var pn=Le.prototype;function mn(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function xn(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}hn.prototype=fn.prototype={constructor:hn,select:function(e){var t=this._name,i=this._id;"function"!=typeof e&&(e=ce(e));for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a)for(var s,l,d=n[a],u=d.length,c=o[a]=new Array(u),h=0;h<u;++h)(s=d[h])&&(l=e.call(s,s.__data__,h,d))&&("__data__"in s&&(l.__data__=s.__data__),c[h]=l,Qi(c[h],t,i,h,c,on(s,i)));return new hn(o,this._parents,t,i)},selectAll:function(e){var t=this._name,i=this._id;"function"!=typeof e&&(e=fe(e));for(var n=this._groups,r=n.length,o=[],a=[],s=0;s<r;++s)for(var l,d=n[s],u=d.length,c=0;c<u;++c)if(l=d[c]){for(var h,f=e.call(l,l.__data__,c,d),g=on(l,i),p=0,m=f.length;p<m;++p)(h=f[p])&&Qi(h,t,i,p,f,g);o.push(f),a.push(l)}return new hn(o,a,t,i)},filter:function(e){"function"!=typeof e&&(e=ee(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var o,a=t[r],s=a.length,l=n[r]=[],d=0;d<s;++d)(o=a[d])&&e.call(o,o.__data__,d,a)&&l.push(o);return new hn(n,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,n=t.length,r=i.length,o=Math.min(n,r),a=new Array(n),s=0;s<o;++s)for(var l,d=t[s],u=i[s],c=d.length,h=a[s]=new Array(c),f=0;f<c;++f)(l=d[f]||u[f])&&(h[f]=l);for(;s<n;++s)a[s]=t[s];return new hn(a,this._parents,this._name,this._id)},selection:function(){return new un(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,i=gn(),n=this._groups,r=n.length,o=0;o<r;++o)for(var a,s=n[o],l=s.length,d=0;d<l;++d)if(a=s[d]){var u=on(a,t);Qi(a,e,i,d,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new hn(n,this._parents,e,i)},call:pn.call,nodes:pn.nodes,node:pn.node,size:pn.size,empty:pn.empty,each:pn.each,on:function(e,t){var i=this._id;return arguments.length<2?on(this.node(),i).on.on(e):this.each(dn(i,e,t))},attr:function(e,t){var i=X(e),n="transform"===i?yi:ln;return this.attrTween(e,"function"==typeof t?(i.local?function(i,n,r){var o,a,s;return function(){var e,t=r(this);if(null!=t)return(e=this.getAttributeNS(i.space,i.local))===t?null:e===o&&t===a?s:s=n(o=e,a=t);this.removeAttributeNS(i.space,i.local)}}:function(i,n,r){var o,a,s;return function(){var e,t=r(this);if(null!=t)return(e=this.getAttribute(i))===t?null:e===o&&t===a?s:s=n(o=e,a=t);this.removeAttribute(i)}})(i,n,sn(this,"attr."+e,t)):null==t?(i.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(i):(i.local?function(t,i,n){var r,o;return function(){var e=this.getAttributeNS(t.space,t.local);return e===n?null:e===r?o:o=i(r=e,n)}}:function(t,i,n){var r,o;return function(){var e=this.getAttribute(t);return e===n?null:e===r?o:o=i(r=e,n)}})(i,n,t+""))},attrTween:function(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;var n=X(e);return this.tween(i,(n.local?function(n,e){function t(){var t=this,i=e.apply(t,arguments);return i&&function(e){t.setAttributeNS(n.space,n.local,i(e))}}return t._value=e,t}:function(n,e){function t(){var t=this,i=e.apply(t,arguments);return i&&function(e){t.setAttribute(n,i(e))}}return t._value=e,t})(n,t))},style:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E="transform"==(e+="")?xi:ln;return null==t?this.styleTween(e,(p=e,m=E,function(){var e=ve(this).getComputedStyle(this,null),t=e.getPropertyValue(p),i=(this.style.removeProperty(p),e.getPropertyValue(p));return t===i?null:t===x&&i===y?v:v=m(x=t,y=i)})).on("end.style."+e,(g=e,function(){this.style.removeProperty(g)})):this.styleTween(e,"function"==typeof t?(d=E,u=sn(this,"style."+(l=e),t),function(){var e=ve(this).getComputedStyle(this,null),t=e.getPropertyValue(l),i=u(this);return null==i&&(this.style.removeProperty(l),i=e.getPropertyValue(l)),t===i?null:t===c&&i===h?f:f=d(c=t,h=i)}):(n=e,r=E,o=t+"",function(){var e=ve(this).getComputedStyle(this,null).getPropertyValue(n);return e===o?null:e===a?s:s=r(a=e,o)}),i)},styleTween:function(e,t,i){var n,r,o,a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==t)return this.tween(a,null);if("function"!=typeof t)throw new Error;return this.tween(a,(n=e,o=null==i?"":i,s._value=r=t,s));function s(){var t=this,i=r.apply(t,arguments);return i&&function(e){t.style.setProperty(n,i(e),o)}}},text:function(e){return this.tween("text","function"==typeof e?(i=sn(this,"text",e),function(){var e=i(this);this.textContent=null==e?"":e}):(t=null==e?"":e+"",function(){this.textContent=t}));var t,i},remove:function(){return this.on("end.remove",(i=this._id,function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==i)return;e&&e.removeChild(this)}));var i},tween:function(e,t){var i=this._id;if(e+="",arguments.length<2){for(var n,r=on(this.node(),i).tween,o=0,a=r.length;o<a;++o)if((n=r[o]).name===e)return n.value;return null}return this.each((null==t?function(r,o){var a,s;return function(){var e=rn(this,r),t=e.tween;if(t!==a)for(var i=0,n=(s=a=t).length;i<n;++i)if(s[i].name===o){(s=s.slice()).splice(i,1);break}e.tween=s}}:function(o,a,s){var l,d;if("function"!=typeof s)throw new Error;return function(){var e=rn(this,o),t=e.tween;if(t!==l){d=(l=t).slice();for(var i={name:a,value:s},n=0,r=d.length;n<r;++n)if(d[n].name===a){d[n]=i;break}n===r&&d.push(i)}e.tween=d}})(i,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){nn(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){nn(this,e).delay=t}})(t,e)):on(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){rn(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){rn(this,e).duration=t}})(t,e)):on(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){rn(this,e).ease=t}}(t,e)):on(this.node(),t).ease}};var yn=function e(t){function i(e){return Math.pow(e,t)}return t=+t,i.exponent=e,i}(3),vn=function e(t){function i(e){return 1-Math.pow(1-e,t)}return t=+t,i.exponent=e,i}(3),En=function e(t){function i(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,i.exponent=e,i}(3),bn=Math.PI,Cn=bn/2;function Sn(e){return(1-Math.cos(bn*e))/2}function wn(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function Tn(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var Pn=4/11,kn=6/11,In=8/11,Rn=.75,Mn=9/11,An=10/11,Dn=.9375,Fn=21/22,Ln=63/64,On=1/Pn/Pn;function Bn(e){return(e=+e)<Pn?On*e*e:e<In?On*(e-=kn)*e+Rn:e<An?On*(e-=Mn)*e+Dn:On*(e-=Fn)*e+Ln}var Nn=function e(t){function i(e){return e*e*((t+1)*e-t)}return t=+t,i.overshoot=e,i}(1.70158),Hn=function e(t){function i(e){return--e*e*((t+1)*e+t)+1}return t=+t,i.overshoot=e,i}(1.70158),Vn=function e(t){function i(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,i.overshoot=e,i}(1.70158),_n=2*Math.PI,zn=function t(i,n){var r=Math.asin(1/(i=Math.max(1,i)))*(n/=_n);function e(e){return i*Math.pow(2,10*--e)*Math.sin((r-e)/n)}return e.amplitude=function(e){return t(e,n*_n)},e.period=function(e){return t(i,e)},e}(1,.3),Wn=function t(i,n){var r=Math.asin(1/(i=Math.max(1,i)))*(n/=_n);function e(e){return 1-i*Math.pow(2,-10*(e=+e))*Math.sin((e+r)/n)}return e.amplitude=function(e){return t(e,n*_n)},e.period=function(e){return t(i,e)},e}(1,.3),Gn=function t(i,n){var r=Math.asin(1/(i=Math.max(1,i)))*(n/=_n);function e(e){return((e=2*e-1)<0?i*Math.pow(2,10*e)*Math.sin((r-e)/n):2-i*Math.pow(2,-10*e)*Math.sin((r+e)/n))/2}return e.amplitude=function(e){return t(e,n*_n)},e.period=function(e){return t(i,e)},e}(1,.3),Xn={time:null,delay:0,duration:250,ease:xn};function Un(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))return Xn.time=Wi(),Xn;return i}Le.prototype.interrupt=function(e){return this.each(function(){an(this,e)})},Le.prototype.transition=function(e){var t,i;e=e instanceof hn?(t=e._id,e._name):(t=gn(),(i=Xn).time=Wi(),null==e?null:e+"");for(var n=this._groups,r=n.length,o=0;o<r;++o)for(var a,s=n[o],l=s.length,d=0;d<l;++d)(a=s[d])&&Qi(a,e,t,d,s,i||Un(a,t));return new hn(n,this._parents,e,t)};var Yn=[null],qn=function(e){return function(){return e}},Kn=function(e,t,i){this.target=e,this.type=t,this.selection=i};function $n(){_.event.stopImmediatePropagation()}var jn=function(){_.event.preventDefault(),_.event.stopImmediatePropagation()},Qn={name:"drag"},Zn={name:"space"},Jn={name:"handle"},er={name:"center"},tr={name:"x",handles:["e","w"].map(dr),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ir={name:"y",handles:["n","s"].map(dr),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},nr={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(dr),input:function(e){return e},output:function(e){return e}},rr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},or={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ar={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},sr={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},lr={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function dr(e){return{type:e}}function ur(){return!_.event.button}function cr(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function hr(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function fr(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function gr(O){var B,t=cr,N=ur,i=z(r,"start","brush","end"),n=6;function r(e){var t=e.property("__brush",s).selectAll(".overlay").data([dr("overlay")]);t.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",rr.overlay).merge(t).each(function(){var e=hr(this).extent;Be(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),e.selectAll(".selection").data([dr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",rr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(O.handles,function(e){return e.type});i.exit().remove(),i.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return rr[e.type]}),e.each(H).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",a)}function H(){var e=Be(this),t=hr(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-n/2:t[0][0]-n/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-n/2:t[0][1]-n/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+n:n}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+n:n})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function V(e,t){return e.__brush.emitter||new o(e,t)}function o(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function a(){if(_.event.touches){if(_.event.changedTouches.length<_.event.touches.length)return jn()}else if(B)return;if(N.apply(this,arguments)){var t,i,n,r,o,a,s,l,d,u,c,h,f,g=this,p=_.event.target.__data__.type,m="selection"===(_.event.metaKey?p="overlay":p)?Qn:_.event.altKey?er:Jn,x=O===ir?null:sr[p],y=O===tr?null:lr[p],v=hr(g),e=v.extent,E=v.selection,b=e[0][0],C=e[0][1],S=e[1][0],w=e[1][1],T=x&&y&&_.event.shiftKey,P=de(g),k=P,I=V(g,arguments).beforestart();"overlay"===p?v.selection=E=[[t=O===ir?b:P[0],n=O===tr?C:P[1]],[o=O===ir?S:t,s=O===tr?w:n]]:(t=E[0][0],n=E[0][1],o=E[1][0],s=E[1][1]),i=t,r=n,a=o,l=s;var R=Be(g).attr("pointer-events","none"),M=R.selectAll(".overlay").attr("cursor",rr[p]);if(_.event.touches)R.on("touchmove.brush",D,!0).on("touchend.brush touchcancel.brush",L,!0);else{var A=Be(_.event.view).on("keydown.brush",function(){switch(_.event.keyCode){case 16:T=x&&y;break;case 18:m===Jn&&(x&&(o=a-d*x,t=i+d*x),y&&(s=l-u*y,n=r+u*y),m=er,F());break;case 32:m!==Jn&&m!==er||(x<0?o=a-d:0<x&&(t=i-d),y<0?s=l-u:0<y&&(n=r-u),m=Zn,M.attr("cursor",rr.selection),F());break;default:return}jn()},!0).on("keyup.brush",function(){switch(_.event.keyCode){case 16:T&&(h=f=T=!1,F());break;case 18:m===er&&(x<0?o=a:0<x&&(t=i),y<0?s=l:0<y&&(n=r),m=Jn,F());break;case 32:m===Zn&&(m=_.event.altKey?(x&&(o=a-d*x,t=i+d*x),y&&(s=l-u*y,n=r+u*y),er):(x<0?o=a:0<x&&(t=i),y<0?s=l:0<y&&(n=r),Jn),M.attr("cursor",rr[p]),F());break;default:return}jn()},!0).on("mousemove.brush",D,!0).on("mouseup.brush",L,!0);Ve(_.event.view)}$n(),an(g),H.call(g),I.start()}function D(){var e=de(g);!T||h||f||(Math.abs(e[0]-k[0])>Math.abs(e[1]-k[1])?f=!0:h=!0),k=e,c=!0,jn(),F()}function F(){var e;switch(d=k[0]-P[0],u=k[1]-P[1],m){case Zn:case Qn:x&&(d=Math.max(b-t,Math.min(S-o,d)),i=t+d,a=o+d),y&&(u=Math.max(C-n,Math.min(w-s,u)),r=n+u,l=s+u);break;case Jn:x<0?(d=Math.max(b-t,Math.min(S-t,d)),i=t+d,a=o):0<x&&(d=Math.max(b-o,Math.min(S-o,d)),i=t,a=o+d),y<0?(u=Math.max(C-n,Math.min(w-n,u)),r=n+u,l=s):0<y&&(u=Math.max(C-s,Math.min(w-s,u)),r=n,l=s+u);break;case er:x&&(i=Math.max(b,Math.min(S,t-d*x)),a=Math.max(b,Math.min(S,o+d*x))),y&&(r=Math.max(C,Math.min(w,n-u*y)),l=Math.max(C,Math.min(w,s+u*y)))}a<i&&(x*=-1,e=t,t=o,o=e,e=i,i=a,a=e,p in or&&M.attr("cursor",rr[p=or[p]])),l<r&&(y*=-1,e=n,n=s,s=e,e=r,r=l,l=e,p in ar&&M.attr("cursor",rr[p=ar[p]])),v.selection&&(E=v.selection),h&&(i=E[0][0],a=E[1][0]),f&&(r=E[0][1],l=E[1][1]),E[0][0]===i&&E[0][1]===r&&E[1][0]===a&&E[1][1]===l||(v.selection=[[i,r],[a,l]],H.call(g),I.brush())}function L(){if($n(),_.event.touches){if(_.event.touches.length)return;B&&clearTimeout(B),B=setTimeout(function(){B=null},500),R.on("touchmove.brush touchend.brush touchcancel.brush",null)}else _e(_.event.view,c),A.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);R.attr("pointer-events","all"),M.attr("cursor",rr.overlay),v.selection&&(E=v.selection),fr(E)&&(v.selection=null,H.call(g)),I.end()}}function s(){var e=this.__brush||{selection:null};return e.extent=t.apply(this,arguments),e.dim=O,e}return r.move=function(e,s){e.selection?e.on("start.brush",function(){V(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){V(this,arguments).end()}).tween("brush",function(){var t=this,i=t.__brush,n=V(t,arguments),e=i.selection,r=O.input("function"==typeof s?s.apply(this,arguments):s,i.extent),o=hi(e,r);function a(e){i.selection=1===e&&fr(r)?null:o(e),H.call(t),n.brush()}return e&&r?a:a(1)}):e.each(function(){var e=arguments,t=this.__brush,i=O.input("function"==typeof s?s.apply(this,e):s,t.extent),n=V(this,e).beforestart();an(this),t.selection=null==i||fr(i)?null:i,H.call(this),n.start().brush().end()})},o.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){ae(new Kn(r,e,O.output(this.state.selection)),i.apply,i,[e,this.that,this.args])}},r.extent=function(e){return arguments.length?(t="function"==typeof e?e:qn([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),r):t},r.filter=function(e){return arguments.length?(N="function"==typeof e?e:qn(!!e),r):N},r.handleSize=function(e){return arguments.length?(n=+e,r):n},r.on=function(){var e=i.on.apply(i,arguments);return e===i?r:e},r}var pr=Math.cos,mr=Math.sin,xr=Math.PI,yr=xr/2,vr=2*xr,Er=Math.max;function br(e){return function(){return e}}var Cr=Array.prototype.slice,Sr=Math.PI,wr=2*Sr,Tr=wr-1e-6;function Pr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function kr(){return new Pr}function Ir(e){return e.source}function Rr(e){return e.target}function Mr(e){return e.radius}function Ar(e){return e.startAngle}function Dr(e){return e.endAngle}Pr.prototype=kr.prototype={constructor:Pr,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,i,n){this._+="Q"+ +e+","+ +t+","+(this._x1=+i)+","+(this._y1=+n)},bezierCurveTo:function(e,t,i,n,r,o){this._+="C"+ +e+","+ +t+","+ +i+","+ +n+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(e,t,i,n,r){e=+e,t=+t,i=+i,n=+n,r=+r;var o=this._x1,a=this._y1,s=i-e,l=n-t,d=o-e,u=a-t,c=d*d+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(1e-6<c)if(1e-6<Math.abs(u*s-l*d)&&r){var h=i-o,f=n-a,g=s*s+l*l,p=h*h+f*f,m=Math.sqrt(g),x=Math.sqrt(c),y=r*Math.tan((Sr-Math.acos((g+c-p)/(2*m*x)))/2),v=y/x,E=y/m;1e-6<Math.abs(v-1)&&(this._+="L"+(e+v*d)+","+(t+v*u)),this._+="A"+r+","+r+",0,0,"+ +(d*f<u*h)+","+(this._x1=e+E*s)+","+(this._y1=t+E*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,i,n,r,o){e=+e,t=+t;var a=(i=+i)*Math.cos(n),s=i*Math.sin(n),l=e+a,d=t+s,u=1^o,c=o?n-r:r-n;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+l+","+d:(1e-6<Math.abs(this._x1-l)||1e-6<Math.abs(this._y1-d))&&(this._+="L"+l+","+d),i&&(c<0&&(c=c%wr+wr),Tr<c?this._+="A"+i+","+i+",0,1,"+u+","+(e-a)+","+(t-s)+"A"+i+","+i+",0,1,"+u+","+(this._x1=l)+","+(this._y1=d):1e-6<c&&(this._+="A"+i+","+i+",0,"+ +(Sr<=c)+","+u+","+(this._x1=e+i*Math.cos(r))+","+(this._y1=t+i*Math.sin(r))))},rect:function(e,t,i,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +i+"v"+ +n+"h"+-i+"Z"},toString:function(){return this._}};function Fr(){}function Lr(e,t){var i=new Fr;if(e instanceof Fr)e.each(function(e,t){i.set(t,e)});else if(Array.isArray(e)){var n,r=-1,o=e.length;if(null==t)for(;++r<o;)i.set(r,e[r]);else for(;++r<o;)i.set(t(n=e[r],r,e),n)}else if(e)for(var a in e)i.set(a,e[a]);return i}Fr.prototype=Lr.prototype={constructor:Fr,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};function Or(){return{}}function Br(e,t,i){e[t]=i}function Nr(){return Lr()}function Hr(e,t,i){e.set(t,i)}function Vr(){}var _r=Lr.prototype;function zr(e,t){var i=new Vr;if(e instanceof Vr)e.each(function(e){i.add(e)});else if(e){var n=-1,r=e.length;if(null==t)for(;++n<r;)i.add(e[n]);else for(;++n<r;)i.add(t(e[n],n,e))}return i}Vr.prototype=zr.prototype={constructor:Vr,has:_r.has,add:function(e){return this["$"+(e+="")]=e,this},remove:_r.remove,clear:_r.clear,values:_r.keys,size:_r.size,empty:_r.empty,each:_r.each};function Wr(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function Gr(o){var t=new RegExp('["'+o+"\n\r]"),h=o.charCodeAt(0);function i(r,e){var t,o,a={},s={},i=[],l=r.length,d=0,n=0;function u(){if(l<=d)return s;if(o)return o=!1,a;var e,t=d;if(34===r.charCodeAt(t)){for(var i=t;i++<l;)if(34===r.charCodeAt(i)){if(34!==r.charCodeAt(i+1))break;++i}return d=i+2,13===(e=r.charCodeAt(i+1))?(o=!0,10===r.charCodeAt(i+2)&&++d):10===e&&(o=!0),r.slice(t+1,i).replace(/""/g,'"')}for(;d<l;){var n=1;if(10===(e=r.charCodeAt(d++)))o=!0;else if(13===e)o=!0,10===r.charCodeAt(d)&&(++d,++n);else if(e!==h)continue;return r.slice(t,d-n)}return r.slice(t)}for(;(t=u())!==s;){for(var c=[];t!==a&&t!==s;)c.push(t),t=u();e&&null==(c=e(c,n++))||i.push(c)}return i}function n(e){return e.map(a).join(o)}function a(e){return null==e?"":t.test(e+="")?'"'+e.replace(/\"/g,'""')+'"':e}return{parse:function(e,o){var a,s,t=i(e,function(e,t){if(a)return a(e,t-1);var i,n,r;s=e,a=o?(n=o,r=Wr(i=e),function(e,t){return n(r(e),t,i)}):Wr(e)});return t.columns=s,t},parseRows:i,format:function(e,i){var t,n,r;return null==i&&(t=e,n=Object.create(null),r=[],t.forEach(function(e){for(var t in e)t in n||r.push(n[t]=t)}),i=r),[i.map(a).join(o)].concat(e.map(function(t){return i.map(function(e){return a(t[e])}).join(o)})).join("\n")},formatRows:function(e){return e.map(n).join("\n")}}}function Xr(e){return function(){return e}}function Ur(){return 1e-6*(Math.random()-.5)}var Yr=Gr(","),qr=Yr.parse,Kr=Yr.parseRows,$r=Yr.format,jr=Yr.formatRows,Qr=Gr("\t"),Zr=Qr.parse,Jr=Qr.parseRows,eo=Qr.format,to=Qr.formatRows;function io(e,t,i,n){if(isNaN(t)||isNaN(i))return e;var r,o,a,s,l,d,u,c,h,f=e._root,g={data:n},p=e._x0,m=e._y0,x=e._x1,y=e._y1;if(!f)return e._root=g,e;for(;f.length;)if((d=t>=(o=(p+x)/2))?p=o:x=o,(u=i>=(a=(m+y)/2))?m=a:y=a,!(f=(r=f)[c=u<<1|d]))return r[c]=g,e;if(s=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===s&&i===l)return g.next=f,r?r[c]=g:e._root=g,e;for(;r=r?r[c]=new Array(4):e._root=new Array(4),(d=t>=(o=(p+x)/2))?p=o:x=o,(u=i>=(a=(m+y)/2))?m=a:y=a,(c=u<<1|d)==(h=(a<=l)<<1|o<=s););return r[h]=f,r[c]=g,e}function no(e,t,i,n,r){this.node=e,this.x0=t,this.y0=i,this.x1=n,this.y1=r}function ro(e){return e[0]}function oo(e){return e[1]}function ao(e,t,i){var n=new so(null==t?ro:t,null==i?oo:i,NaN,NaN,NaN,NaN);return null==e?n:n.addAll(e)}function so(e,t,i,n,r,o){this._x=e,this._y=t,this._x0=i,this._y0=n,this._x1=r,this._y1=o,this._root=void 0}function lo(e){for(var t={data:e.data},i=t;e=e.next;)i=i.next={data:e.data};return t}var uo=ao.prototype=so.prototype;function co(e){return e.x+e.vx}function ho(e){return e.y+e.vy}uo.copy=function(){var e,t,i=new so(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return i;if(!n.length)return i._root=lo(n),i;for(e=[{source:n,target:i._root=new Array(4)}];n=e.pop();)for(var r=0;r<4;++r)(t=n.source[r])&&(t.length?e.push({source:t,target:n.target[r]=new Array(4)}):n.target[r]=lo(t));return i},uo.add=function(e){var t=+this._x.call(null,e),i=+this._y.call(null,e);return io(this.cover(t,i),t,i,e)},uo.addAll=function(e){var t,i,n,r,o=e.length,a=new Array(o),s=new Array(o),l=1/0,d=1/0,u=-1/0,c=-1/0;for(i=0;i<o;++i)isNaN(n=+this._x.call(null,t=e[i]))||isNaN(r=+this._y.call(null,t))||((a[i]=n)<l&&(l=n),u<n&&(u=n),(s[i]=r)<d&&(d=r),c<r&&(c=r));for(u<l&&(l=this._x0,u=this._x1),c<d&&(d=this._y0,c=this._y1),this.cover(l,d).cover(u,c),i=0;i<o;++i)io(this,a[i],s[i],e[i]);return this},uo.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var i=this._x0,n=this._y0,r=this._x1,o=this._y1;if(isNaN(i))r=(i=Math.floor(e))+1,o=(n=Math.floor(t))+1;else{if(!(e<i||r<e||t<n||o<t))return this;var a,s,l=r-i,d=this._root;switch(s=(t<(n+o)/2)<<1|e<(i+r)/2){case 0:for(;(a=new Array(4))[s]=d,d=a,o=n+(l*=2),(r=i+l)<e||o<t;);break;case 1:for(;(a=new Array(4))[s]=d,d=a,o=n+(l*=2),e<(i=r-l)||o<t;);break;case 2:for(;(a=new Array(4))[s]=d,d=a,n=o-(l*=2),(r=i+l)<e||t<n;);break;case 3:for(;(a=new Array(4))[s]=d,d=a,n=o-(l*=2),e<(i=r-l)||t<n;);}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=n,this._x1=r,this._y1=o,this},uo.data=function(){var t=[];return this.visit(function(e){if(!e.length)for(;t.push(e.data),e=e.next;);}),t},uo.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},uo.find=function(e,t,i){var n,r,o,a,s,l,d,u=this._x0,c=this._y0,h=this._x1,f=this._y1,g=[],p=this._root;for(p&&g.push(new no(p,u,c,h,f)),null==i?i=1/0:(u=e-i,c=t-i,h=e+i,f=t+i,i*=i);l=g.pop();)if(!(!(p=l.node)||(r=l.x0)>h||(o=l.y0)>f||(a=l.x1)<u||(s=l.y1)<c))if(p.length){var m=(r+a)/2,x=(o+s)/2;g.push(new no(p[3],m,x,a,s),new no(p[2],r,x,m,s),new no(p[1],m,o,a,x),new no(p[0],r,o,m,x)),(d=(x<=t)<<1|m<=e)&&(l=g[g.length-1],g[g.length-1]=g[g.length-1-d],g[g.length-1-d]=l)}else{var y=e-this._x.call(null,p.data),v=t-this._y.call(null,p.data),E=y*y+v*v;if(E<i){var b=Math.sqrt(i=E);u=e-b,c=t-b,h=e+b,f=t+b,n=p.data}}return n},uo.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,i,n,r,o,a,s,l,d,u,c,h,f=this._root,g=this._x0,p=this._y0,m=this._x1,x=this._y1;if(!f)return this;if(f.length)for(;;){if((d=o>=(s=(g+m)/2))?g=s:m=s,(u=a>=(l=(p+x)/2))?p=l:x=l,!(f=(t=f)[c=u<<1|d]))return this;if(!f.length)break;(t[c+1&3]||t[c+2&3]||t[c+3&3])&&(i=t,h=c)}for(;f.data!==e;)if(!(f=(n=f).next))return this;return(r=f.next)&&delete f.next,n?r?n.next=r:delete n.next:t?(r?t[c]=r:delete t[c],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(i?i[h]=f:this._root=f)):this._root=r,this},uo.removeAll=function(e){for(var t=0,i=e.length;t<i;++t)this.remove(e[t]);return this},uo.root=function(){return this._root},uo.size=function(){var t=0;return this.visit(function(e){if(!e.length)for(;++t,e=e.next;);}),t},uo.visit=function(e){var t,i,n,r,o,a,s=[],l=this._root;for(l&&s.push(new no(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,n=t.x0,r=t.y0,o=t.x1,a=t.y1)&&l.length){var d=(n+o)/2,u=(r+a)/2;(i=l[3])&&s.push(new no(i,d,u,o,a)),(i=l[2])&&s.push(new no(i,n,u,d,a)),(i=l[1])&&s.push(new no(i,d,r,o,u)),(i=l[0])&&s.push(new no(i,n,r,d,u))}return this},uo.visitAfter=function(e){var t,i=[],n=[];for(this._root&&i.push(new no(this._root,this._x0,this._y0,this._x1,this._y1));t=i.pop();){var r=t.node;if(r.length){var o,a=t.x0,s=t.y0,l=t.x1,d=t.y1,u=(a+l)/2,c=(s+d)/2;(o=r[0])&&i.push(new no(o,a,s,u,c)),(o=r[1])&&i.push(new no(o,u,s,l,c)),(o=r[2])&&i.push(new no(o,a,c,u,d)),(o=r[3])&&i.push(new no(o,u,c,l,d))}n.push(t)}for(;t=n.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},uo.x=function(e){return arguments.length?(this._x=e,this):this._x},uo.y=function(e){return arguments.length?(this._y=e,this):this._y};function fo(e){return e.index}function go(e,t){var i=e.get(t);if(!i)throw new Error("missing: "+t);return i}function po(e){return e.x}function mo(e){return e.y}function xo(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,n=e.slice(0,i);return[1<n.length?n[0]+n.slice(2):n,+e.slice(i+1)]}function yo(e){return(e=xo(Math.abs(e)))?e[1]:NaN}function vo(e,t){var i=xo(e,t);if(!i)return e+"";var n=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}var Eo,bo=Math.PI*(3-Math.sqrt(5)),Co={"":function(e,t){e:for(var i,n=(e=e.toPrecision(t)).length,r=1,o=-1;r<n;++r)switch(e[r]){case".":o=i=r;break;case"0":0===o&&(o=r),i=r;break;case"e":break e;default:0<o&&(o=0)}return 0<o?e.slice(0,o)+e.slice(i+1):e},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return vo(100*e,t)},r:vo,s:function(e,t){var i=xo(e,t);if(!i)return e+"";var n=i[0],r=i[1],o=r-(Eo=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=n.length;return o===a?n:a<o?n+new Array(o-a+1).join("0"):0<o?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+xo(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},So=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function wo(e){return new To(e)}function To(e){if(!(t=So.exec(e)))throw new Error("invalid format: "+e);var t,i=t[1]||" ",n=t[2]||">",r=t[3]||"-",o=t[4]||"",a=!!t[5],s=t[6]&&+t[6],l=!!t[7],d=t[8]&&+t[8].slice(1),u=t[9]||"";"n"===u?(l=!0,u="g"):Co[u]||(u=""),(a||"0"===i&&"="===n)&&(a=!0,i="0",n="="),this.fill=i,this.align=n,this.sign=r,this.symbol=o,this.zero=a,this.width=s,this.comma=l,this.precision=d,this.type=u}wo.prototype=To.prototype,To.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};function Po(e){return e}function ko(e){var t,s,l,b=e.grouping&&e.thousands?(s=e.grouping,l=e.thousands,function(e,t){for(var i=e.length,n=[],r=0,o=s[0],a=0;0<i&&0<o&&(t<a+o+1&&(o=Math.max(1,t-a)),n.push(e.substring(i-=o,i+o)),!((a+=o+1)>t));)o=s[r=(r+1)%s.length];return n.reverse().join(l)}):Po,n=e.currency,C=e.decimal,S=e.numerals?(t=e.numerals,function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}):Po;function a(e){var d=(e=wo(e)).fill,u=e.align,c=e.sign,t=e.symbol,h=e.zero,f=e.width,g=e.comma,p=e.precision,m=e.type,x="$"===t?n[0]:"#"===t&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===t?n[1]:/[%p]/.test(m)?"%":"",v=Co[m],E=!m||/[defgprs%]/.test(m);function i(e){var t,i,n,r=x,o=y;if("c"===m)o=v(e)+o,e="";else{var a=(e=+e)<0;if(e=v(Math.abs(e),p),a&&0==+e&&(a=!1),r=(a?"("===c?c:"-":"-"===c||"("===c?"":c)+r,o=o+("s"===m?Ro[8+Eo/3]:"")+(a&&"("===c?")":""),E)for(t=-1,i=e.length;++t<i;)if((n=e.charCodeAt(t))<48||57<n){o=(46===n?C+e.slice(t+1):e.slice(t))+o,e=e.slice(0,t);break}}g&&!h&&(e=b(e,1/0));var s=r.length+e.length+o.length,l=s<f?new Array(f-s+1).join(d):"";switch(g&&h&&(e=b(l+e,l.length?f-o.length:1/0),l=""),u){case"<":e=r+e+o+l;break;case"=":e=r+l+e+o;break;case"^":e=l.slice(0,s=l.length>>1)+r+e+o+l.slice(s);break;default:e=l+r+e+o}return S(e)}return p=null==p?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),i.toString=function(){return e+""},i}return{format:a,formatPrefix:function(e,t){var i=a(((e=wo(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(yo(t)/3))),r=Math.pow(10,-n),o=Ro[8+n/3];return function(e){return i(r*e)+o}}}}var Io,Ro=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Mo(e){return Io=ko(e),_.format=Io.format,_.formatPrefix=Io.formatPrefix,Io}Mo({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function Ao(e){return Math.max(0,-yo(Math.abs(e)))}function Do(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(yo(t)/3)))-yo(Math.abs(e)))}function Fo(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yo(t)-yo(e))+1}function Lo(){return new Oo}function Oo(){this.reset()}Oo.prototype={constructor:Oo,reset:function(){this.s=this.t=0},add:function(e){No(Bo,e,this.t),No(this,Bo.s,this.s),this.s?this.t+=Bo.t:this.s=Bo.t},valueOf:function(){return this.s}};var Bo=new Oo;function No(e,t,i){var n=e.s=t+i,r=n-t,o=n-r;e.t=t-o+(i-r)}var Ho=1e-6,Vo=Math.PI,_o=Vo/2,zo=Vo/4,Wo=2*Vo,Go=180/Vo,Xo=Vo/180,Uo=Math.abs,Yo=Math.atan,qo=Math.atan2,Ko=Math.cos,$o=Math.ceil,jo=Math.exp,Qo=Math.log,Zo=Math.pow,Jo=Math.sin,ea=Math.sign||function(e){return 0<e?1:e<0?-1:0},ta=Math.sqrt,ia=Math.tan;function na(e){return 1<e?0:e<-1?Vo:Math.acos(e)}function ra(e){return 1<e?_o:e<-1?-_o:Math.asin(e)}function oa(e){return(e=Jo(e/2))*e}function aa(){}function sa(e,t){e&&da.hasOwnProperty(e.type)&&da[e.type](e,t)}var la={Feature:function(e,t){sa(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,n=-1,r=i.length;++n<r;)sa(i[n].geometry,t)}},da={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)e=i[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){ua(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)ua(i[n],t,0)},Polygon:function(e,t){ca(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)ca(i[n],t)},GeometryCollection:function(e,t){for(var i=e.geometries,n=-1,r=i.length;++n<r;)sa(i[n],t)}};function ua(e,t,i){var n,r=-1,o=e.length-i;for(t.lineStart();++r<o;)n=e[r],t.point(n[0],n[1],n[2]);t.lineEnd()}function ca(e,t){var i=-1,n=e.length;for(t.polygonStart();++i<n;)ua(e[i],t,1);t.polygonEnd()}var ha,fa,ga,pa,ma,xa=function(e,t){e&&la.hasOwnProperty(e.type)?la[e.type](e,t):sa(e,t)},ya=Lo(),va=Lo(),Ea={point:aa,lineStart:aa,lineEnd:aa,polygonStart:function(){ya.reset(),Ea.lineStart=ba,Ea.lineEnd=Ca},polygonEnd:function(){var e=+ya;va.add(e<0?Wo+e:e),this.lineStart=this.lineEnd=this.point=aa},sphere:function(){va.add(Wo)}};function ba(){Ea.point=Sa}function Ca(){wa(ha,fa)}function Sa(e,t){Ea.point=wa,ha=e,fa=t,ga=e*=Xo,pa=Ko(t=(t*=Xo)/2+zo),ma=Jo(t)}function wa(e,t){var i=(e*=Xo)-ga,n=0<=i?1:-1,r=n*i,o=Ko(t=(t*=Xo)/2+zo),a=Jo(t),s=ma*a,l=pa*o+s*Ko(r),d=s*n*Jo(r);ya.add(qo(d,l)),ga=e,pa=o,ma=a}var Ta,Pa,ka,Ia,Ra,Ma,Aa,Da;function Fa(e){return[qo(e[1],e[0]),ra(e[2])]}function La(e){var t=e[0],i=e[1],n=Ko(i);return[n*Ko(t),n*Jo(t),Jo(i)]}function Oa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ba(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Na(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ha(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Va(e){var t=ta(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var _a,za,Wa=Lo(),Ga={point:Xa,lineStart:Ya,lineEnd:qa,polygonStart:function(){Ga.point=Ka,Ga.lineStart=$a,Ga.lineEnd=ja,Wa.reset(),Ea.polygonStart()},polygonEnd:function(){Ea.polygonEnd(),Ga.point=Xa,Ga.lineStart=Ya,Ga.lineEnd=qa,ya<0?(Ta=-(ka=180),Pa=-(Ia=90)):Ho<Wa?Ia=90:Wa<-Ho&&(Pa=-90),za[0]=Ta,za[1]=ka}};function Xa(e,t){_a.push(za=[Ta=e,ka=e]),t<Pa&&(Pa=t),Ia<t&&(Ia=t)}function Ua(e,t){var i=La([e*Xo,t*Xo]);if(Da){var n=Ba(Da,i),r=Ba([n[1],-n[0],0],n);Va(r),r=Fa(r);var o,a=e-Ra,s=0<a?1:-1,l=r[0]*Go*s,d=180<Uo(a);d^(s*Ra<l&&l<s*e)?(o=r[1]*Go,Ia<o&&(Ia=o)):d^(s*Ra<(l=(l+360)%360-180)&&l<s*e)?(o=-r[1]*Go)<Pa&&(Pa=o):(t<Pa&&(Pa=t),Ia<t&&(Ia=t)),d?e<Ra?Qa(Ta,e)>Qa(Ta,ka)&&(ka=e):Qa(e,ka)>Qa(Ta,ka)&&(Ta=e):Ta<=ka?(e<Ta&&(Ta=e),ka<e&&(ka=e)):Ra<e?Qa(Ta,e)>Qa(Ta,ka)&&(ka=e):Qa(e,ka)>Qa(Ta,ka)&&(Ta=e)}else _a.push(za=[Ta=e,ka=e]);t<Pa&&(Pa=t),Ia<t&&(Ia=t),Da=i,Ra=e}function Ya(){Ga.point=Ua}function qa(){za[0]=Ta,za[1]=ka,Ga.point=Xa,Da=null}function Ka(e,t){if(Da){var i=e-Ra;Wa.add(180<Uo(i)?i+(0<i?360:-360):i)}else Ma=e,Aa=t;Ea.point(e,t),Ua(e,t)}function $a(){Ea.lineStart()}function ja(){Ka(Ma,Aa),Ea.lineEnd(),Uo(Wa)>Ho&&(Ta=-(ka=180)),za[0]=Ta,za[1]=ka,Da=null}function Qa(e,t){return(t-=e)<0?t+360:t}function Za(e,t){return e[0]-t[0]}function Ja(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var es,ts,is,ns,rs,os,as,ss,ls,ds,us,cs,hs,fs,gs,ps,ms={sphere:aa,point:xs,lineStart:vs,lineEnd:Cs,polygonStart:function(){ms.lineStart=Ss,ms.lineEnd=ws},polygonEnd:function(){ms.lineStart=vs,ms.lineEnd=Cs}};function xs(e,t){e*=Xo;var i=Ko(t*=Xo);ys(i*Ko(e),i*Jo(e),Jo(t))}function ys(e,t,i){is+=(e-is)/++es,ns+=(t-ns)/es,rs+=(i-rs)/es}function vs(){ms.point=Es}function Es(e,t){e*=Xo;var i=Ko(t*=Xo);fs=i*Ko(e),gs=i*Jo(e),ps=Jo(t),ms.point=bs,ys(fs,gs,ps)}function bs(e,t){e*=Xo;var i=Ko(t*=Xo),n=i*Ko(e),r=i*Jo(e),o=Jo(t),a=qo(ta((a=gs*o-ps*r)*a+(a=ps*n-fs*o)*a+(a=fs*r-gs*n)*a),fs*n+gs*r+ps*o);ts+=a,os+=a*(fs+(fs=n)),as+=a*(gs+(gs=r)),ss+=a*(ps+(ps=o)),ys(fs,gs,ps)}function Cs(){ms.point=xs}function Ss(){ms.point=Ts}function ws(){Ps(cs,hs),ms.point=xs}function Ts(e,t){cs=e,hs=t,e*=Xo,t*=Xo,ms.point=Ps;var i=Ko(t);fs=i*Ko(e),gs=i*Jo(e),ps=Jo(t),ys(fs,gs,ps)}function Ps(e,t){e*=Xo;var i=Ko(t*=Xo),n=i*Ko(e),r=i*Jo(e),o=Jo(t),a=gs*o-ps*r,s=ps*n-fs*o,l=fs*r-gs*n,d=ta(a*a+s*s+l*l),u=ra(d),c=d&&-u/d;ls+=c*a,ds+=c*s,us+=c*l,ts+=u,os+=u*(fs+(fs=n)),as+=u*(gs+(gs=r)),ss+=u*(ps+(ps=o)),ys(fs,gs,ps)}function ks(e){return function(){return e}}var Is=function(i,n){function e(e,t){return e=i(e,t),n(e[0],e[1])}return i.invert&&n.invert&&(e.invert=function(e,t){return(e=n.invert(e,t))&&i.invert(e[0],e[1])}),e};function Rs(e,t){return[Vo<e?e-Wo:e<-Vo?e+Wo:e,t]}function Ms(e,t,i){return(e%=Wo)?t||i?Is(Ds(e),Fs(t,i)):Ds(e):t||i?Fs(t,i):Rs}function As(i){return function(e,t){return[Vo<(e+=i)?e-Wo:e<-Vo?e+Wo:e,t]}}function Ds(e){var t=As(e);return t.invert=As(-e),t}function Fs(e,t){var s=Ko(e),l=Jo(e),d=Ko(t),u=Jo(t);function i(e,t){var i=Ko(t),n=Ko(e)*i,r=Jo(e)*i,o=Jo(t),a=o*s+n*l;return[qo(r*d-a*u,n*s-o*l),ra(a*d+r*u)]}return i.invert=function(e,t){var i=Ko(t),n=Ko(e)*i,r=Jo(e)*i,o=Jo(t),a=o*d-r*u;return[qo(r*d+o*u,n*s+a*l),ra(a*s-n*l)]},i}Rs.invert=Rs;function Ls(t){function e(e){return(e=t(e[0]*Xo,e[1]*Xo))[0]*=Go,e[1]*=Go,e}return t=Ms(t[0]*Xo,t[1]*Xo,2<t.length?t[2]*Xo:0),e.invert=function(e){return(e=t.invert(e[0]*Xo,e[1]*Xo))[0]*=Go,e[1]*=Go,e},e}function Os(e,t,i,n,r,o){if(i){var a=Ko(t),s=Jo(t),l=n*i;null==r?(r=t+n*Wo,o=t-l/2):(r=Bs(a,r),o=Bs(a,o),(0<n?r<o:o<r)&&(r+=n*Wo));for(var d,u=r;0<n?o<u:u<o;u-=l)d=Fa([a,-s*Ko(u),-s*Jo(u)]),e.point(d[0],d[1])}}function Bs(e,t){(t=La(t))[0]-=e,Va(t);var i=na(-t[1]);return((-t[2]<0?-i:i)+Wo-Ho)%Wo}function Ns(e,t){return Uo(e[0]-t[0])<Ho&&Uo(e[1]-t[1])<Ho}var Hs=function(){var i,t=[];return{point:function(e,t){i.push([e,t])},lineStart:function(){t.push(i=[])},lineEnd:aa,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],i=null,e}}},Vs=function(e,t,i,n,r,o){var a,s=e[0],l=e[1],d=0,u=1,c=t[0]-s,h=t[1]-l;if(a=i-s,c||!(0<a)){if(a/=c,c<0){if(a<d)return;a<u&&(u=a)}else if(0<c){if(u<a)return;d<a&&(d=a)}if(a=r-s,c||!(a<0)){if(a/=c,c<0){if(u<a)return;d<a&&(d=a)}else if(0<c){if(a<d)return;a<u&&(u=a)}if(a=n-l,h||!(0<a)){if(a/=h,h<0){if(a<d)return;a<u&&(u=a)}else if(0<h){if(u<a)return;d<a&&(d=a)}if(a=o-l,h||!(a<0)){if(a/=h,h<0){if(u<a)return;d<a&&(d=a)}else if(0<h){if(a<d)return;a<u&&(u=a)}return 0<d&&(e[0]=s+d*c,e[1]=l+d*h),u<1&&(t[0]=s+u*c,t[1]=l+u*h),!0}}}}};function _s(e,t,i,n){this.x=e,this.z=t,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}var zs=function(e,t,i,n,o){var a,r,s=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,i,n=e[0],r=e[t];if(Ns(n,r)){for(o.lineStart(),a=0;a<t;++a)o.point((n=e[a])[0],n[1]);o.lineEnd()}else s.push(i=new _s(n,e,null,!0)),l.push(i.o=new _s(n,null,i,!1)),s.push(i=new _s(r,e,null,!1)),l.push(i.o=new _s(r,null,i,!0))}}),s.length){for(l.sort(t),Ws(s),Ws(l),a=0,r=l.length;a<r;++a)l[a].e=i=!i;for(var d,u,c=s[0];;){for(var h=c,f=!0;h.v;)if((h=h.n)===c)return;d=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(a=0,r=d.length;a<r;++a)o.point((u=d[a])[0],u[1]);else n(h.x,h.n.x,1,o);h=h.n}else{if(f)for(d=h.p.z,a=d.length-1;0<=a;--a)o.point((u=d[a])[0],u[1]);else n(h.x,h.p.x,-1,o);h=h.p}d=(h=h.o).z,f=!f}while(!h.v);o.lineEnd()}}};function Ws(e){if(t=e.length){for(var t,i,n=0,r=e[0];++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}var Gs=1e9,Xs=-Gs;function Us(x,y,v,E){function b(e,t){return x<=e&&e<=v&&y<=t&&t<=E}function C(e,t,i,n){var r=0,o=0;if(null==e||(r=a(e,i))!==(o=a(t,i))||s(e,t)<0^0<i)for(;n.point(0===r||3===r?x:v,1<r?E:y),(r=(r+i+4)%4)!==o;);else n.point(t[0],t[1])}function a(e,t){return Uo(e[0]-x)<Ho?0<t?0:3:Uo(e[0]-v)<Ho?0<t?2:1:Uo(e[1]-y)<Ho?0<t?1:0:0<t?3:2}function S(e,t){return s(e.x,t.x)}function s(e,t){var i=a(e,1),n=a(t,1);return i!==n?i-n:0===i?t[1]-e[1]:1===i?e[0]-t[0]:2===i?e[1]-t[1]:t[0]-e[0]}return function(n){var r,c,o,a,s,l,d,u,h,f,g,p=n,e=Hs(),t={point:i,lineStart:function(){t.point=m,c&&c.push(o=[]);f=!0,h=!1,d=u=NaN},lineEnd:function(){r&&(m(a,s),l&&h&&e.rejoin(),r.push(e.result()));t.point=i,h&&p.lineEnd()},polygonStart:function(){p=e,r=[],c=[],g=!0},polygonEnd:function(){var e=function(){for(var e=0,t=0,i=c.length;t<i;++t)for(var n,r,o=c[t],a=1,s=o.length,l=o[0],d=l[0],u=l[1];a<s;++a)n=d,r=u,l=o[a],d=l[0],u=l[1],r<=E?E<u&&(u-r)*(x-n)<(d-n)*(E-r)&&++e:u<=E&&(d-n)*(E-r)<(u-r)*(x-n)&&--e;return e}(),t=g&&e,i=(r=k(r)).length;(t||i)&&(n.polygonStart(),t&&(n.lineStart(),C(null,null,1,n),n.lineEnd()),i&&zs(r,S,e,C,n),n.polygonEnd());p=n,r=c=o=null}};function i(e,t){b(e,t)&&p.point(e,t)}function m(e,t){var i=b(e,t);if(c&&o.push([e,t]),f)a=e,s=t,f=!1,(l=i)&&(p.lineStart(),p.point(e,t));else if(i&&h)p.point(e,t);else{var n=[d=Math.max(Xs,Math.min(Gs,d)),u=Math.max(Xs,Math.min(Gs,u))],r=[e=Math.max(Xs,Math.min(Gs,e)),t=Math.max(Xs,Math.min(Gs,t))];Vs(n,r,x,y,v,E)?(h||(p.lineStart(),p.point(n[0],n[1])),p.point(r[0],r[1]),i||p.lineEnd(),g=!1):i&&(p.lineStart(),p.point(e,t),g=!1)}d=e,u=t,h=i}return t}}function Ys(e,t){var i=t[0],n=t[1],r=[Jo(i),-Ko(i),0],o=0,a=0;js.reset();for(var s=0,l=e.length;s<l;++s)if(u=(d=e[s]).length)for(var d,u,c=d[u-1],h=c[0],f=c[1]/2+zo,g=Jo(f),p=Ko(f),m=0;m<u;++m,h=y,g=E,p=b,c=x){var x=d[m],y=x[0],v=x[1]/2+zo,E=Jo(v),b=Ko(v),C=y-h,S=0<=C?1:-1,w=S*C,T=Vo<w,P=g*E;if(js.add(qo(P*S*Jo(w),p*b+P*Ko(w))),o+=T?C+S*Wo:C,T^i<=h^i<=y){var k=Ba(La(c),La(x));Va(k);var I=Ba(r,k);Va(I);var R=(T^0<=C?-1:1)*ra(I[2]);(R<n||n===R&&(k[0]||k[1]))&&(a+=T^0<=C?1:-1)}}return(o<-Ho||o<Ho&&js<-Ho)^1&a}var qs,Ks,$s,js=Lo(),Qs=Lo(),Zs={sphere:aa,point:aa,lineStart:function(){Zs.point=el,Zs.lineEnd=Js},lineEnd:aa,polygonStart:aa,polygonEnd:aa};function Js(){Zs.point=Zs.lineEnd=aa}function el(e,t){qs=e*=Xo,Ks=Jo(t*=Xo),$s=Ko(t),Zs.point=tl}function tl(e,t){e*=Xo;var i=Jo(t*=Xo),n=Ko(t),r=Uo(e-qs),o=Ko(r),a=n*Jo(r),s=$s*i-Ks*n*o,l=Ks*i+$s*n*o;Qs.add(qo(ta(a*a+s*s),l)),qs=e,Ks=i,$s=n}function il(e){return Qs.reset(),xa(e,Zs),+Qs}function nl(e,t){return rl[0]=e,rl[1]=t,il(ol)}var rl=[null,null],ol={type:"LineString",coordinates:rl},al={Feature:function(e,t){return ll(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,n=-1,r=i.length;++n<r;)if(ll(i[n].geometry,t))return!0;return!1}},sl={Sphere:function(){return!0},Point:function(e,t){return dl(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)if(dl(i[n],t))return!0;return!1},LineString:function(e,t){return ul(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)if(ul(i[n],t))return!0;return!1},Polygon:function(e,t){return cl(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)if(cl(i[n],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,n=-1,r=i.length;++n<r;)if(ll(i[n],t))return!0;return!1}};function ll(e,t){return!(!e||!sl.hasOwnProperty(e.type))&&sl[e.type](e,t)}function dl(e,t){return 0===nl(e,t)}function ul(e,t){var i=nl(e[0],e[1]);return nl(e[0],t)+nl(t,e[1])<=i+Ho}function cl(e,t){return!!Ys(e.map(hl),fl(t))}function hl(e){return(e=e.map(fl)).pop(),e}function fl(e){return[e[0]*Xo,e[1]*Xo]}function gl(e,t,i){var n=T(e,t-Ho,i).concat(t);return function(t){return n.map(function(e){return[t,e]})}}function pl(e,t,i){var n=T(e,t-Ho,i).concat(t);return function(t){return n.map(function(e){return[e,t]})}}function ml(){var t,i,n,r,o,a,s,l,d,u,c,h,f=10,g=f,p=90,m=360,x=2.5;function y(){return{type:"MultiLineString",coordinates:e()}}function e(){return T($o(r/p)*p,n,p).map(c).concat(T($o(l/m)*m,s,m).map(h)).concat(T($o(i/f)*f,t,f).filter(function(e){return Uo(e%p)>Ho}).map(d)).concat(T($o(a/g)*g,o,g).filter(function(e){return Uo(e%m)>Ho}).map(u))}return y.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(h(s).slice(1),c(n).reverse().slice(1),h(l).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],l=+e[0][1],s=+e[1][1],n<r&&(e=r,r=n,n=e),s<l&&(e=l,l=s,s=e),y.precision(x)):[[r,l],[n,s]]},y.extentMinor=function(e){return arguments.length?(i=+e[0][0],t=+e[1][0],a=+e[0][1],o=+e[1][1],t<i&&(e=i,i=t,t=e),o<a&&(e=a,a=o,o=e),y.precision(x)):[[i,a],[t,o]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(p=+e[0],m=+e[1],y):[p,m]},y.stepMinor=function(e){return arguments.length?(f=+e[0],g=+e[1],y):[f,g]},y.precision=function(e){return arguments.length?(x=+e,d=gl(a,o,90),u=pl(i,t,x),c=gl(l,s,90),h=pl(r,n,x),y):x},y.extentMajor([[-180,-90+Ho],[180,90-Ho]]).extentMinor([[-180,-80-Ho],[180,80+Ho]])}var xl,yl,vl,El,bl=function(e){return e},Cl=Lo(),Sl=Lo(),wl={point:aa,lineStart:aa,lineEnd:aa,polygonStart:function(){wl.lineStart=Tl,wl.lineEnd=Il},polygonEnd:function(){wl.lineStart=wl.lineEnd=wl.point=aa,Cl.add(Uo(Sl)),Sl.reset()},result:function(){var e=Cl/2;return Cl.reset(),e}};function Tl(){wl.point=Pl}function Pl(e,t){wl.point=kl,xl=vl=e,yl=El=t}function kl(e,t){Sl.add(El*e-vl*t),vl=e,El=t}function Il(){kl(xl,yl)}var Rl=1/0,Ml=Rl,Al=-Rl,Dl=Al,Fl={point:function(e,t){e<Rl&&(Rl=e);Al<e&&(Al=e);t<Ml&&(Ml=t);Dl<t&&(Dl=t)},lineStart:aa,lineEnd:aa,polygonStart:aa,polygonEnd:aa,result:function(){var e=[[Rl,Ml],[Al,Dl]];return Al=Dl=-(Ml=Rl=1/0),e}};var Ll,Ol,Bl,Nl,Hl=0,Vl=0,_l=0,zl=0,Wl=0,Gl=0,Xl=0,Ul=0,Yl=0,ql={point:Kl,lineStart:$l,lineEnd:Zl,polygonStart:function(){ql.lineStart=Jl,ql.lineEnd=ed},polygonEnd:function(){ql.point=Kl,ql.lineStart=$l,ql.lineEnd=Zl},result:function(){var e=Yl?[Xl/Yl,Ul/Yl]:Gl?[zl/Gl,Wl/Gl]:_l?[Hl/_l,Vl/_l]:[NaN,NaN];return Hl=Vl=_l=zl=Wl=Gl=Xl=Ul=Yl=0,e}};function Kl(e,t){Hl+=e,Vl+=t,++_l}function $l(){ql.point=jl}function jl(e,t){ql.point=Ql,Kl(Bl=e,Nl=t)}function Ql(e,t){var i=e-Bl,n=t-Nl,r=ta(i*i+n*n);zl+=r*(Bl+e)/2,Wl+=r*(Nl+t)/2,Gl+=r,Kl(Bl=e,Nl=t)}function Zl(){ql.point=Kl}function Jl(){ql.point=td}function ed(){id(Ll,Ol)}function td(e,t){ql.point=id,Kl(Ll=Bl=e,Ol=Nl=t)}function id(e,t){var i=e-Bl,n=t-Nl,r=ta(i*i+n*n);zl+=r*(Bl+e)/2,Wl+=r*(Nl+t)/2,Gl+=r,Xl+=(r=Nl*e-Bl*t)*(Bl+e),Ul+=r*(Nl+t),Yl+=3*r,Kl(Bl=e,Nl=t)}function nd(e){this._context=e}nd.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Wo)}},result:aa};var rd,od,ad,sd,ld,dd=Lo(),ud={point:aa,lineStart:function(){ud.point=cd},lineEnd:function(){rd&&hd(od,ad),ud.point=aa},polygonStart:function(){rd=!0},polygonEnd:function(){rd=null},result:function(){var e=+dd;return dd.reset(),e}};function cd(e,t){ud.point=hd,od=sd=e,ad=ld=t}function hd(e,t){sd-=e,ld-=t,dd.add(ta(sd*sd+ld*ld)),sd=e,ld=t}function fd(){this._string=[]}function gd(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}fd.prototype={_circle:gd(4.5),pointRadius:function(e){return this._circle=gd(e),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}}};function pd(y,v,E,b){return function(n,s){var l,d,u,r=v(s),t=n.invert(b[0],b[1]),c=Hs(),h=v(c),f=!1,i={point:o,lineStart:a,lineEnd:g,polygonStart:function(){i.point=p,i.lineStart=m,i.lineEnd=x,d=[],l=[]},polygonEnd:function(){i.point=o,i.lineStart=a,i.lineEnd=g,d=k(d);var e=Ys(l,t);d.length?(f||(s.polygonStart(),f=!0),zs(d,xd,e,E,s)):e&&(f||(s.polygonStart(),f=!0),s.lineStart(),E(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),d=l=null},sphere:function(){s.polygonStart(),s.lineStart(),E(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function o(e,t){var i=n(e,t);y(e=i[0],t=i[1])&&s.point(e,t)}function e(e,t){var i=n(e,t);r.point(i[0],i[1])}function a(){i.point=e,r.lineStart()}function g(){i.point=o,r.lineEnd()}function p(e,t){u.push([e,t]);var i=n(e,t);h.point(i[0],i[1])}function m(){h.lineStart(),u=[]}function x(){p(u[0][0],u[0][1]),h.lineEnd();var e,t,i,n,r=h.clean(),o=c.result(),a=o.length;if(u.pop(),l.push(u),u=null,a)if(1&r){if(0<(t=(i=o[0]).length-1)){for(f||(s.polygonStart(),f=!0),s.lineStart(),e=0;e<t;++e)s.point((n=i[e])[0],n[1]);s.lineEnd()}}else 1<a&&2&r&&o.push(o.pop().concat(o.shift())),d.push(o.filter(md))}return i}}function md(e){return 1<e.length}function xd(e,t){return((e=e.x)[0]<0?e[1]-_o-Ho:_o-e[1])-((t=t.x)[0]<0?t[1]-_o-Ho:_o-t[1])}var yd=pd(function(){return 1},function(c){var h,f=NaN,g=NaN,p=NaN;return{lineStart:function(){c.lineStart(),h=1},point:function(e,t){var i,n,r,o,a,s,l,d=0<e?Vo:-Vo,u=Uo(e-f);Uo(u-Vo)<Ho?(c.point(f,g=0<(g+t)/2?_o:-_o),c.point(p,g),c.lineEnd(),c.lineStart(),c.point(d,g),c.point(e,g),h=0):p!==d&&Vo<=u&&(Uo(f-p)<Ho&&(f-=p*Ho),Uo(e-d)<Ho&&(e-=d*Ho),n=g,o=t,l=Jo((i=f)-(r=e)),g=Uo(l)>Ho?Yo((Jo(n)*(s=Ko(o))*Jo(r)-Jo(o)*(a=Ko(n))*Jo(i))/(a*s*l)):(n+o)/2,c.point(p,g),c.lineEnd(),c.lineStart(),c.point(d,g),h=0),c.point(f=e,g=t),p=d},lineEnd:function(){c.lineEnd(),f=g=NaN},clean:function(){return 2-h}}},function(e,t,i,n){var r;if(null==e)r=i*_o,n.point(-Vo,r),n.point(0,r),n.point(Vo,r),n.point(Vo,0),n.point(Vo,-r),n.point(0,-r),n.point(-Vo,-r),n.point(-Vo,0),n.point(-Vo,r);else if(Uo(e[0]-t[0])>Ho){var o=e[0]<t[0]?Vo:-Vo;r=i*o/2,n.point(-o,r),n.point(0,r),n.point(o,r)}else n.point(t[0],t[1])},[-Vo,-_o]);var vd=function(r,o){var P=Ko(r),f=0<P,g=Uo(P)>Ho;function p(e,t){return Ko(e)*Ko(t)>P}function m(e,t,i){var n=[1,0,0],r=Ba(La(e),La(t)),o=Oa(r,r),a=r[0],s=o-a*a;if(!s)return!i&&e;var l=P*o/s,d=-P*a/s,u=Ba(n,r),c=Ha(n,l);Na(c,Ha(r,d));var h=u,f=Oa(c,h),g=Oa(h,h),p=f*f-g*(Oa(c,c)-1);if(!(p<0)){var m=ta(p),x=Ha(h,(-f-m)/g);if(Na(x,c),x=Fa(x),!i)return x;var y,v=e[0],E=t[0],b=e[1],C=t[1];E<v&&(y=v,v=E,E=y);var S=E-v,w=Uo(S-Vo)<Ho;if(!w&&C<b&&(y=b,b=C,C=y),w||S<Ho?w?0<b+C^x[1]<(Uo(x[0]-v)<Ho?b:C):b<=x[1]&&x[1]<=C:Vo<S^(v<=x[0]&&x[0]<=E)){var T=Ha(h,(-f+m)/g);return Na(T,c),[x,Fa(T)]}}}function x(e,t){var i=f?r:Vo-r,n=0;return e<-i?n|=1:i<e&&(n|=2),t<-i?n|=4:i<t&&(n|=8),n}return pd(p,function(s){var l,d,u,c,h;return{lineStart:function(){c=u=!1,h=1},point:function(e,t){var i,n=[e,t],r=p(e,t),o=f?r?0:x(e,t):r?x(e+(e<0?Vo:-Vo),t):0;if(!l&&(c=u=r)&&s.lineStart(),r!==u&&(i=m(l,n),(Ns(l,i)||Ns(n,i))&&(n[0]+=Ho,n[1]+=Ho,r=p(n[0],n[1]))),r!==u)h=0,r?(s.lineStart(),i=m(n,l),s.point(i[0],i[1])):(i=m(l,n),s.point(i[0],i[1]),s.lineEnd()),l=i;else if(g&&l&&f^r){var a;o&d||!(a=m(n,l,!0))||(h=0,f?(s.lineStart(),s.point(a[0][0],a[0][1]),s.point(a[1][0],a[1][1]),s.lineEnd()):(s.point(a[1][0],a[1][1]),s.lineEnd(),s.lineStart(),s.point(a[0][0],a[0][1])))}!r||l&&Ns(l,n)||s.point(n[0],n[1]),l=n,u=r,d=o},lineEnd:function(){u&&s.lineEnd(),l=null},clean:function(){return h|(c&&u)<<1}}},function(e,t,i,n){Os(n,r,o,i,e,t)},f?[0,-r]:[-Vo,r-Vo])};function Ed(n){return function(e){var t=new bd;for(var i in n)t[i]=n[i];return t.stream=e,t}}function bd(){}function Cd(e,t,i){var n=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=o&&e.clipExtent(null),xa(i,e.stream(Fl));var a=Fl.result(),s=Math.min(n/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),l=+t[0][0]+(n-s*(a[1][0]+a[0][0]))/2,d=+t[0][1]+(r-s*(a[1][1]+a[0][1]))/2;return null!=o&&e.clipExtent(o),e.scale(150*s).translate([l,d])}function Sd(e,t,i){return Cd(e,[[0,0],t],i)}bd.prototype={constructor:bd,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var wd=Ko(30*Xo),Td=function(e,t){return+t?(R=e,M=t,function(r){var i,n,o,a,s,l,d,u,c,h,f,g,p={point:e,lineStart:t,lineEnd:x,polygonStart:function(){r.polygonStart(),p.lineStart=y},polygonEnd:function(){r.polygonEnd(),p.lineStart=t}};function e(e,t){e=R(e,t),r.point(e[0],e[1])}function t(){u=NaN,p.point=m,r.lineStart()}function m(e,t){var i=La([e,t]),n=R(e,t);A(u,c,d,h,f,g,u=n[0],c=n[1],d=e,h=i[0],f=i[1],g=i[2],16,r),r.point(u,c)}function x(){p.point=e,r.lineEnd()}function y(){t(),p.point=v,p.lineEnd=E}function v(e,t){m(i=e,t),n=u,o=c,a=h,s=f,l=g,p.point=m}function E(){A(u,c,d,h,f,g,n,o,i,a,s,l,16,r),(p.lineEnd=x)()}return p}):(i=e,Ed({point:function(e,t){e=i(e,t),this.stream.point(e[0],e[1])}}));var i,R,M;function A(e,t,i,n,r,o,a,s,l,d,u,c,h,f){var g=a-e,p=s-t,m=g*g+p*p;if(4*M<m&&h--){var x=n+d,y=r+u,v=o+c,E=ta(x*x+y*y+v*v),b=ra(v/=E),C=Uo(Uo(v)-1)<Ho||Uo(i-l)<Ho?(i+l)/2:qo(y,x),S=R(C,b),w=S[0],T=S[1],P=w-e,k=T-t,I=p*P-g*k;(M<I*I/m||.3<Uo((g*P+p*k)/m-.5)||n*d+r*u+o*c<wd)&&(A(e,t,i,n,r,o,w,T,C,x/=E,y/=E,v,h,f),f.point(w,T),A(w,T,C,x,y,v,a,s,l,d,u,c,h,f))}}};var Pd=Ed({point:function(e,t){this.stream.point(e*Xo,t*Xo)}});function kd(e){return Id(function(){return e})()}function Id(e){var i,n,r,t,o,a,s,l,d,u,c=150,h=480,f=250,g=0,p=0,m=0,x=0,y=0,v=null,E=yd,b=null,C=bl,S=.5,w=Td(k,S);function T(e){return[(e=o(e[0]*Xo,e[1]*Xo))[0]*c+n,r-e[1]*c]}function P(e){return(e=o.invert((e[0]-n)/c,(r-e[1])/c))&&[e[0]*Go,e[1]*Go]}function k(e,t){return[(e=i(e,t))[0]*c+n,r-e[1]*c]}function I(){o=Is(t=Ms(m,x,y),i);var e=i(g,p);return n=h-e[0]*c,r=f+e[1]*c,R()}function R(){return d=u=null,T}return T.stream=function(e){return d&&u===e?d:d=Pd(E(t,w(C(u=e))))},T.clipAngle=function(e){return arguments.length?(E=+e?vd(v=e*Xo,6*Xo):(v=null,yd),R()):v*Go},T.clipExtent=function(e){return arguments.length?(C=null==e?(b=a=s=l=null,bl):Us(b=+e[0][0],a=+e[0][1],s=+e[1][0],l=+e[1][1]),R()):null==b?null:[[b,a],[s,l]]},T.scale=function(e){return arguments.length?(c=+e,I()):c},T.translate=function(e){return arguments.length?(h=+e[0],f=+e[1],I()):[h,f]},T.center=function(e){return arguments.length?(g=e[0]%360*Xo,p=e[1]%360*Xo,I()):[g*Go,p*Go]},T.rotate=function(e){return arguments.length?(m=e[0]%360*Xo,x=e[1]%360*Xo,y=2<e.length?e[2]%360*Xo:0,I()):[m*Go,x*Go,y*Go]},T.precision=function(e){return arguments.length?(w=Td(k,S=e*e),R()):ta(S)},T.fitExtent=function(e,t){return Cd(T,e,t)},T.fitSize=function(e,t){return Sd(T,e,t)},function(){return i=e.apply(this,arguments),T.invert=i.invert&&P,I()}}function Rd(e){var t=0,i=Vo/3,n=Id(e),r=n(t,i);return r.parallels=function(e){return arguments.length?n(t=e[0]*Xo,i=e[1]*Xo):[t*Go,i*Go]},r}function Md(e,t){var i,n=Jo(e),r=(n+Jo(t))/2;if(Uo(r)<Ho)return i=Ko(e),o.invert=function(e,t){return[e/i,ra(t*i)]},o;function o(e,t){return[e*i,Jo(t)/i]}var a=1+n*(2*r-n),s=ta(a)/r;function l(e,t){var i=ta(a-2*r*Jo(t))/r;return[i*Jo(e*=r),s-i*Ko(e)]}return l.invert=function(e,t){var i=s-t;return[qo(e,Uo(i))/r*ea(i),ra((a-(e*e+i*i)*r*r)/(2*r))]},l}function Ad(){return Rd(Md).scale(155.424).center([0,33.6442])}function Dd(){return Ad().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Fd(o){return function(e,t){var i=Ko(e),n=Ko(t),r=o(i*n);return[r*n*Jo(e),r*Jo(t)]}}function Ld(a){return function(e,t){var i=ta(e*e+t*t),n=a(i),r=Jo(n),o=Ko(n);return[qo(e*r,i*o),ra(i&&t*r/i)]}}var Od=Fd(function(e){return ta(2/(1+e))});Od.invert=Ld(function(e){return 2*ra(e/2)});var Bd=Fd(function(e){return(e=na(e))&&e/Jo(e)});Bd.invert=Ld(function(e){return e});function Nd(e,t){return[e,Qo(ia((_o+t)/2))]}Nd.invert=function(e,t){return[e,2*Yo(jo(t))-_o]};function Hd(i){var n,r,o,a=kd(i),t=a.center,s=a.scale,l=a.translate,d=a.clipExtent,u=null;function c(){var e=Vo*s(),t=a(Ls(a.rotate()).invert([0,0]));return d(null==u?[[t[0]-e,t[1]-e],[t[0]+e,t[1]+e]]:i===Nd?[[Math.max(t[0]-e,u),n],[Math.min(t[0]+e,r),o]]:[[u,Math.max(t[1]-e,n)],[r,Math.min(t[1]+e,o)]])}return a.scale=function(e){return arguments.length?(s(e),c()):s()},a.translate=function(e){return arguments.length?(l(e),c()):l()},a.center=function(e){return arguments.length?(t(e),c()):t()},a.clipExtent=function(e){return arguments.length?(null==e?u=n=r=o=null:(u=+e[0][0],n=+e[0][1],r=+e[1][0],o=+e[1][1]),c()):null==u?null:[[u,n],[r,o]]},c()}function Vd(e){return ia((_o+e)/2)}function _d(e,t){var i=Ko(e),r=e===t?Jo(e):Qo(i/Ko(t))/Qo(Vd(t)/Vd(e)),o=i*Zo(Vd(e),r)/r;if(!r)return Nd;function n(e,t){0<o?t<-_o+Ho&&(t=-_o+Ho):_o-Ho<t&&(t=_o-Ho);var i=o/Zo(Vd(t),r);return[i*Jo(r*e),o-i*Ko(r*e)]}return n.invert=function(e,t){var i=o-t,n=ea(r)*ta(e*e+i*i);return[qo(e,Uo(i))/r*ea(i),2*Yo(Zo(o/n,1/r))-_o]},n}function zd(e,t){return[e,t]}zd.invert=zd;function Wd(e,t){var i=Ko(e),r=e===t?Jo(e):(i-Ko(t))/(t-e),o=i/r+e;if(Uo(r)<Ho)return zd;function n(e,t){var i=o-t,n=r*e;return[i*Jo(n),o-i*Ko(n)]}return n.invert=function(e,t){var i=o-t;return[qo(e,Uo(i))/r*ea(i),o-ea(r)*ta(e*e+i*i)]},n}function Gd(e,t){var i=Ko(t),n=Ko(e)*i;return[i*Jo(e)/n,Jo(t)/n]}Gd.invert=Ld(Yo);function Xd(i,n,r,o){return 1===i&&1===n&&0===r&&0===o?bl:Ed({point:function(e,t){this.stream.point(e*i+r,t*n+o)}})}function Ud(e,t){return[Ko(t)*Jo(e),Jo(t)]}Ud.invert=Ld(ra);function Yd(e,t){var i=Ko(t),n=1+Ko(e)*i;return[i*Jo(e)/n,Jo(t)/n]}Yd.invert=Ld(function(e){return 2*Yo(e)});function qd(e,t){return[Qo(ia((_o+t)/2)),-e]}qd.invert=function(e,t){return[-t,2*Yo(jo(e))-_o]};function Kd(e,t){return e.parent===t.parent?1:2}function $d(e,t){return e+t.x}function jd(e,t){return Math.max(e,t.y)}function Qd(e){var t=0,i=e.children,n=i&&i.length;if(n)for(;0<=--n;)t+=i[n].value;else t=1;e.value=t}function Zd(e,t){var i,n,r,o,a,s=new iu(e),l=+e.value&&(s.value=e.value),d=[s];for(null==t&&(t=Jd);i=d.pop();)if(l&&(i.value=+i.data.value),(r=t(i.data))&&(a=r.length))for(i.children=new Array(a),o=a-1;0<=o;--o)d.push(n=i.children[o]=new iu(r[o])),n.parent=i,n.depth=i.depth+1;return s.eachBefore(tu)}function Jd(e){return e.children}function eu(e){e.data=e.data.data}function tu(e){for(var t=0;e.height=t,(e=e.parent)&&e.height<++t;);}function iu(e){this.data=e,this.depth=this.height=0,this.parent=null}function nu(e){this._=e,this.next=null}iu.prototype=Zd.prototype={constructor:iu,count:function(){return this.eachAfter(Qd)},each:function(e){var t,i,n,r,o=this,a=[o];do{for(t=a.reverse(),a=[];o=t.pop();)if(e(o),i=o.children)for(n=0,r=i.length;n<r;++n)a.push(i[n])}while(a.length);return this},eachAfter:function(e){for(var t,i,n,r=this,o=[r],a=[];r=o.pop();)if(a.push(r),t=r.children)for(i=0,n=t.length;i<n;++i)o.push(t[i]);for(;r=a.pop();)e(r);return this},eachBefore:function(e){for(var t,i,n=this,r=[n];n=r.pop();)if(e(n),t=n.children)for(i=t.length-1;0<=i;--i)r.push(t[i]);return this},sum:function(r){return this.eachAfter(function(e){for(var t=+r(e.data)||0,i=e.children,n=i&&i.length;0<=--n;)t+=i[n].value;e.value=t})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(e){for(var t=this,i=function(e,t){if(e===t)return e;var i=e.ancestors(),n=t.ancestors(),r=null;e=i.pop(),t=n.pop();for(;e===t;)r=e,e=i.pop(),t=n.pop();return r}(t,e),n=[t];t!==i;)t=t.parent,n.push(t);for(var r=n.length;e!==i;)n.splice(r,0,e),e=e.parent;return n},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,i=[];return t.each(function(e){e!==t&&i.push({source:e.parent,target:e})}),i},copy:function(){return Zd(this).eachBefore(eu)}};var ru=function(e){return function e(t,i){var n,r,o,a=null,s=t.head;switch(i.length){case 1:$=i[0],n={x:$.x,y:$.y,r:$.r};break;case 2:N=i[0],H=i[1],V=N.x,_=N.y,z=N.r,W=H.x,G=H.y,X=H.r,U=W-V,Y=G-_,q=X-z,K=Math.sqrt(U*U+Y*Y),n={x:(V+W+U/K*q)/2,y:(_+G+Y/K*q)/2,r:(K+z+X)/2};break;case 3:l=i[0],d=i[1],u=i[2],c=l.x,h=l.y,f=l.r,g=d.x,p=d.y,m=d.r,x=u.x,y=u.y,v=u.r,F=(M=((T=2*(h-y))*(C=2*(m-f))-(b=2*(h-p))*(P=2*(v-f)))/(I=(w=2*(c-x))*b-(E=2*(c-g))*T))*M+(D=(E*P-w*C)/I)*D-1,O=(R=(b*(k=c*c+h*h-f*f-x*x-y*y+v*v)-T*(S=c*c+h*h-f*f-g*g-p*p+m*m))/I-c)*R+(A=(w*S-E*k)/I-h)*A-f*f,B=(-(L=2*(R*M+A*D+f))-Math.sqrt(L*L-4*F*O))/(2*F),n={x:R+M*B+c,y:A+D*B+h,r:B}}var l,d,u,c,h,f,g,p,m,x,y,v,E,b,C,S,w,T,P,k,I,R,M,A,D,F,L,O,B;var N,H,V,_,z,W,G,X,U,Y,q,K;var $;for(;s;)o=s._,r=s.next,n&&(j=n,0,Z=(Q=o).x-j.x,J=Q.y-j.y,ee=j.r-Q.r,Z*Z+J*J<ee*ee+1e-6)?a=s:(a?(t.tail=a).next=null:t.head=t.tail=null,i.push(o),n=e(t,i),i.pop(),t.head?(s.next=t.head,t.head=s):(s.next=null,t.head=t.tail=s),(a=t.tail).next=r),s=r;var j,Q,Z,J,ee;t.tail=a;return n}(function(e){for(var t=(e=e.slice()).length,i=null,n=i;t;){var r=new nu(e[t-1]);n=n?n.next=r:i=r,e[void 0]=e[--t]}return{head:i,tail:n}}(e),[])};function ou(e,t,i){var n=e.x,r=e.y,o=t.r+i.r,a=e.r+i.r,s=t.x-n,l=t.y-r,d=s*s+l*l;if(d){var u=.5+((a*=a)-(o*=o))/(2*d),c=Math.sqrt(Math.max(0,2*o*(a+d)-(a-=d)*a-o*o))/(2*d);i.x=n+u*s+c*l,i.y=r+u*l-c*s}else i.x=n+a,i.y=r}function au(e,t){var i=t.x-e.x,n=t.y-e.y,r=e.r+t.r;return i*i+n*n<r*r-1e-6}function su(e,t,i){var n=e._,r=e.next._,o=n.r+r.r,a=(n.x*r.r+r.x*n.r)/o-t,s=(n.y*r.r+r.y*n.r)/o-i;return a*a+s*s}function lu(e){this._=e,this.next=null,this.previous=null}function du(e){if(!(r=e.length))return 0;var t,i,n,r;if((t=e[0]).x=0,t.y=0,!(1<r))return t.r;if(i=e[1],t.x=-i.r,i.x=t.r,i.y=0,!(2<r))return t.r+i.r;ou(i,t,n=e[2]);var o,a,s,l,d,u,c,h=t.r*t.r,f=i.r*i.r,g=n.r*n.r,p=h+f+g,m=h*t.x+f*i.x+g*n.x,x=h*t.y+f*i.y+g*n.y;t=new lu(t),i=new lu(i),n=new lu(n),t.next=n.previous=i,i.next=t.previous=n,n.next=i.previous=t;e:for(s=3;s<r;++s){ou(t._,i._,n=e[s]),n=new lu(n),l=i.next,d=t.previous,u=i._.r,c=t._.r;do{if(u<=c){if(au(l._,n._)){i=l,(t.next=i).previous=t,--s;continue e}u+=l._.r,l=l.next}else{if(au(d._,n._)){((t=d).next=i).previous=t,--s;continue e}c+=d._.r,d=d.previous}}while(l!==d.next);for(n.previous=t,n.next=i,t.next=i.previous=i=n,p+=g=n._.r*n._.r,h=su(t,o=(m+=g*n._.x)/p,a=(x+=g*n._.y)/p);(n=n.next)!==i;)(g=su(n,o,a))<h&&(t=n,h=g);i=t.next}for(t=[i._],n=i;(n=n.next)!==i;)t.push(n._);for(n=ru(t),s=0;s<r;++s)(t=e[s]).x-=n.x,t.y-=n.y;return n.r}function uu(e){if("function"!=typeof e)throw new Error;return e}function cu(){return 0}function hu(e){return function(){return e}}function fu(e){return Math.sqrt(e.value)}function gu(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function pu(a,s){return function(e){if(t=e.children){var t,i,n,r=t.length,o=a(e)*s||0;if(o)for(i=0;i<r;++i)t[i].r+=o;if(n=du(t),o)for(i=0;i<r;++i)t[i].r-=o;e.r=n+o}}}function mu(i){return function(e){var t=e.parent;e.r*=i,t&&(e.x=t.x+i*e.x,e.y=t.y+i*e.y)}}function xu(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}var yu=function(e,t,i,n,r){for(var o,a=e.children,s=-1,l=a.length,d=e.value&&(n-t)/e.value;++s<l;)(o=a[s]).y0=i,o.y1=r,o.x0=t,o.x1=t+=o.value*d},vu={depth:-1},Eu={};function bu(e){return e.id}function Cu(e){return e.parentId}function Su(e,t){return e.parent===t.parent?1:2}function wu(e){var t=e.children;return t?t[0]:e.t}function Tu(e){var t=e.children;return t?t[t.length-1]:e.t}function Pu(e,t){this._=e,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Pu.prototype=Object.create(iu.prototype);var ku=function(e,t,i,n,r){for(var o,a=e.children,s=-1,l=a.length,d=e.value&&(r-i)/e.value;++s<l;)(o=a[s]).x0=t,o.x1=n,o.y0=i,o.y1=i+=o.value*d},Iu=(1+Math.sqrt(5))/2;function Ru(e,t,i,n,r,o){for(var a,s,l,d,u,c,h,f,g,p,m,x=[],y=t.children,v=0,E=0,b=y.length,C=t.value;v<b;){for(l=r-i,d=o-n;!(u=y[E++].value)&&E<b;);for(c=h=u,m=u*u*(p=Math.max(d/l,l/d)/(C*e)),g=Math.max(h/m,m/c);E<b;++E){if(u+=s=y[E].value,s<c&&(c=s),h<s&&(h=s),m=u*u*p,g<(f=Math.max(h/m,m/c))){u-=s;break}g=f}x.push(a={value:u,dice:l<d,children:y.slice(v,E)}),a.dice?yu(a,i,n,r,C?n+=d*u/C:o):ku(a,i,n,C?i+=l*u/C:r,o),C-=u,v=E}return x}var Mu=function t(o){function e(e,t,i,n,r){Ru(o,e,t,i,n,r)}return e.ratio=function(e){return t(1<(e=+e)?e:1)},e}(Iu),Au=function t(f){function e(e,t,i,n,r){if((o=e._squarify)&&o.ratio===f)for(var o,a,s,l,d,u=-1,c=o.length,h=e.value;++u<c;){for(s=(a=o[u]).children,l=a.value=0,d=s.length;l<d;++l)a.value+=s[l].value;a.dice?yu(a,t,i,n,i+=(r-i)*a.value/h):ku(a,t,i,t+=(n-t)*a.value/h,r),h-=a.value}else e._squarify=o=Ru(f,e,t,i,n,r),o.ratio=f}return e.ratio=function(e){return t(1<(e=+e)?e:1)},e}(Iu);function Du(e,t){return e[0]-t[0]||e[1]-t[1]}function Fu(e){for(var t,i,n,r=e.length,o=[0,1],a=2,s=2;s<r;++s){for(;1<a&&(t=e[o[a-2]],i=e[o[a-1]],n=e[s],(i[0]-t[0])*(n[1]-t[1])-(i[1]-t[1])*(n[0]-t[0])<=0);)--a;o[a++]=s}return o.slice(0,a)}var Lu=[].slice,Ou={};function Bu(e){if(!(1<=e))throw new Error;this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Nu(t){if(!t._start)try{!function(e){for(;e._start=e._waiting&&e._active<e._size;){var t=e._ended+e._active,i=e._tasks[t],n=i.length-1,r=i[n];i[n]=Hu(e,t),--e._waiting,++e._active,i=r.apply(null,i),e._tasks[t]&&(e._tasks[t]=i||Ou)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])Vu(t,e);else if(!t._data)throw e}}function Hu(i,n){return function(e,t){i._tasks[n]&&(--i._active,++i._ended,(i._tasks[n]=null)==i._error&&(null!=e?Vu(i,e):(i._data[n]=t,(i._waiting?Nu:_u)(i))))}}function Vu(e,t){var i,n=e._tasks.length;for(e._error=t,e._data=void 0,e._waiting=NaN;0<=--n;)if((i=e._tasks[n])&&(e._tasks[n]=null,i.abort))try{i.abort()}catch(t){}e._active=NaN,_u(e)}function _u(e){if(!e._active&&e._call){var t=e._data;e._data=void 0,e._call(e._error,t)}}function zu(e){return new Bu(arguments.length?+e:1/0)}Bu.prototype=zu.prototype={constructor:Bu,defer:function(e){if("function"!=typeof e||this._call)throw new Error;if(null!=this._error)return this;var t=Lu.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),Nu(this),this},abort:function(){return null==this._error&&Vu(this,new Error("abort")),this},await:function(i){if("function"!=typeof i||this._call)throw new Error;return this._call=function(e,t){i.apply(null,[e].concat(t))},_u(this),this},awaitAll:function(e){if("function"!=typeof e||this._call)throw new Error;return this._call=e,_u(this),this}};function Wu(t,i){var n,r;return t=null==t?0:+t,i=null==i?1:+i,function(){var e;if(null!=n)e=n,n=null;else for(;n=2*Math.random()-1,e=2*Math.random()-1,!(r=n*n+e*e)||1<r;);return t+i*e*Math.sqrt(-2*Math.log(r)/r)}}function Gu(i){return function(){for(var e=0,t=0;t<i;++t)e+=Math.random();return e}}function Xu(r,e){var o,a,s,l,d=z("beforesend","progress","load","error"),u=Lr(),c=new XMLHttpRequest,h=null,f=null,g=0;function t(e){var t,i,n,r=c.status;if(!r&&((n=(i=c).responseType)&&"text"!==n?i.response:i.responseText)||200<=r&&r<300||304===r){if(s)try{t=s.call(o,c)}catch(e){return void d.call("error",o,e)}else t=c;d.call("load",o,t)}else d.call("error",o,e)}if("undefined"==typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(r)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=t:c.onreadystatechange=function(e){3<c.readyState&&t(e)},c.onprogress=function(e){d.call("progress",o,e)},o={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u.get(e):(null==t?u.remove(e):u.set(e,t+""),o)},mimeType:function(e){return arguments.length?(a=null==e?null:e+"",o):a},responseType:function(e){return arguments.length?(l=e,o):l},timeout:function(e){return arguments.length?(g=+e,o):g},user:function(e){return arguments.length<1?h:(h=null==e?null:e+"",o)},password:function(e){return arguments.length<1?f:(f=null==e?null:e+"",o)},response:function(e){return s=e,o},get:function(e,t){return o.send("GET",e,t)},post:function(e,t){return o.send("POST",e,t)},send:function(e,t,i){var n;return c.open(e,r,!0,h,f),null==a||u.has("accept")||u.set("accept",a+",*/*"),c.setRequestHeader&&u.each(function(e,t){c.setRequestHeader(t,e)}),null!=a&&c.overrideMimeType&&c.overrideMimeType(a),null!=l&&(c.responseType=l),0<g&&(c.timeout=g),null==i&&"function"==typeof t&&(i=t,t=null),null!=i&&1===i.length&&(n=i,i=function(e,t){n(null==e?t:null)}),null!=i&&o.on("error",i).on("load",function(e){i(null,e)}),d.call("beforesend",o,c),c.send(null==t?null:t),o},abort:function(){return c.abort(),o},on:function(){var e=d.on.apply(d,arguments);return e===d?o:e}},null==e)return o;if("function"!=typeof e)throw new Error("invalid callback: "+e);return o.get(e)}function Uu(n,r){return function(e,t){var i=Xu(e).mimeType(n).response(r);if(null==t)return i;if("function"!=typeof t)throw new Error("invalid callback: "+t);return i.get(t)}}function Yu(i,o){return function(e,n,t){arguments.length<3&&(t=n,n=null);var r=Xu(e).mimeType(i);return r.row=function(e){return arguments.length?r.response((t=o,i=n=e,function(e){return t(e.responseText,i)})):n;var t,i},r.row(n),t?r.get(t):r}}var qu=Uu("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),Ku=Uu("application/json",function(e){return JSON.parse(e.responseText)}),$u=Uu("text/plain",function(e){return e.responseText}),ju=Uu("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t});var Qu=Yu("text/csv",qr),Zu=Yu("text/tab-separated-values",Zr),Ju=Array.prototype,ec=Ju.map,tc=Ju.slice,ic={name:"implicit"};function nc(n){var o=Lr(),a=[],r=ic;function s(e){var t=e+"",i=o.get(t);if(!i){if(r!==ic)return r;o.set(t,i=a.push(e))}return n[(i-1)%n.length]}return n=null==n?[]:tc.call(n),s.domain=function(e){if(!arguments.length)return a.slice();a=[],o=Lr();for(var t,i,n=-1,r=e.length;++n<r;)o.has(i=(t=e[n])+"")||o.set(i,a.push(t));return s},s.range=function(e){return arguments.length?(n=tc.call(e),s):n.slice()},s.unknown=function(e){return arguments.length?(r=e,s):r},s.copy=function(){return nc().domain(a).range(n).unknown(r)},s}function rc(){var o,a,e=nc().unknown(void 0),s=e.domain,l=e.range,d=[0,1],u=!1,c=0,h=0,f=.5;function t(){var e=s().length,t=d[1]<d[0],i=d[+t],n=d[1-t];o=(n-i)/Math.max(1,e-c+2*h),u&&(o=Math.floor(o)),i+=(n-i-o*(e-c))*f,a=o*(1-c),u&&(i=Math.round(i),a=Math.round(a));var r=T(e).map(function(e){return i+o*e});return l(t?r.reverse():r)}return delete e.unknown,e.domain=function(e){return arguments.length?(s(e),t()):s()},e.range=function(e){return arguments.length?(d=[+e[0],+e[1]],t()):d.slice()},e.rangeRound=function(e){return d=[+e[0],+e[1]],u=!0,t()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(e){return arguments.length?(u=!!e,t()):u},e.padding=function(e){return arguments.length?(c=h=Math.max(0,Math.min(1,e)),t()):c},e.paddingInner=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},e.paddingOuter=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h},e.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),t()):f},e.copy=function(){return rc().domain(s()).range(d).round(u).paddingInner(c).paddingOuter(h).align(f)},t()}var oc=function(e){return function(){return e}},ac=function(e){return+e},sc=[0,1];function lc(t,i){return(i-=t=+t)?function(e){return(e-t)/i}:oc(i)}function dc(e,t,i,n){var r=e[0],o=e[1],a=t[0],s=t[1];return a=o<r?(r=i(o,r),n(s,a)):(r=i(r,o),n(a,s)),function(e){return a(r(e))}}function uc(i,e,t,n){var r=Math.min(i.length,e.length)-1,o=new Array(r),a=new Array(r),s=-1;for(i[r]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++s<r;)o[s]=t(i[s],i[s+1]),a[s]=n(e[s],e[s+1]);return function(e){var t=p(i,e,1,r)-1;return a[t](o[t](e))}}function cc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function hc(t,i){var n,o,a,s=sc,l=sc,d=hi,u=!1;function r(){return n=2<Math.min(s.length,l.length)?uc:dc,o=a=null,e}function e(e){return(o=o||n(s,l,u?(r=t,function(t,i){var n=r(t=+t,i=+i);return function(e){return e<=t?0:i<=e?1:n(e)}}):t,d))(+e);var r}return e.invert=function(e){return(a=a||n(l,s,lc,u?(r=i,function(t,i){var n=r(t=+t,i=+i);return function(e){return e<=0?t:1<=e?i:n(e)}}):i))(+e);var r},e.domain=function(e){return arguments.length?(s=ec.call(e,ac),r()):s.slice()},e.range=function(e){return arguments.length?(l=tc.call(e),r()):l.slice()},e.rangeRound=function(e){return l=tc.call(e),d=fi,r()},e.clamp=function(e){return arguments.length?(u=!!e,r()):u},e.interpolate=function(e){return arguments.length?(d=e,r()):d},r()}var fc=function(e,t,i){var n,r=e[0],o=e[e.length-1],a=P(r,o,null==t?10:t);switch((i=wo(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(r),Math.abs(o));return null!=i.precision||isNaN(n=Do(a,s))||(i.precision=n),_.formatPrefix(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(n=Fo(a,Math.max(Math.abs(r),Math.abs(o))))||(i.precision=n-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(n=Ao(a))||(i.precision=n-2*("%"===i.type))}return _.format(i)};function gc(s){var l=s.domain;return s.ticks=function(e){var t=l();return x(t[0],t[t.length-1],null==e?10:e)},s.tickFormat=function(e,t){return fc(l(),e,t)},s.nice=function(e){var t=l(),i=t.length-1,n=null==e?10:e,r=t[0],o=t[i],a=P(r,o,n);return a&&(a=P(Math.floor(r/a)*a,Math.ceil(o/a)*a,n),t[0]=Math.floor(r/a)*a,t[i]=Math.ceil(o/a)*a,l(t)),s},s}var pc=function(e,t){var i,n=0,r=(e=e.slice()).length-1,o=e[n],a=e[r];return a<o&&(i=n,n=r,r=i,i=o,o=a,a=i),e[n]=t.floor(o),e[r]=t.ceil(a),e};function mc(t,i){return(i=Math.log(i/t))?function(e){return Math.log(e/t)/i}:oc(i)}function xc(t,i){return t<0?function(e){return-Math.pow(-i,e)*Math.pow(-t,1-e)}:function(e){return Math.pow(i,e)*Math.pow(t,1-e)}}function yc(e){return isFinite(e)?+("1e"+e):e<0?0:e}function vc(t){return 10===t?yc:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Ec(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function bc(t){return function(e){return-t(-e)}}function Cc(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function Sc(){var n=1,e=hc(function(t,i){return(i=Cc(i,n)-(t=Cc(t,n)))?function(e){return(Cc(e,n)-t)/i}:oc(i)},function(t,i){return i=Cc(i,n)-(t=Cc(t,n)),function(e){return Cc(t+i*e,1/n)}}),t=e.domain;return e.exponent=function(e){return arguments.length?(n=+e,t(t())):n},e.copy=function(){return cc(e,Sc().exponent(n))},gc(e)}var wc=new Date,Tc=new Date;function Pc(r,o,i,n){function a(e){return r(e=new Date(+e)),e}return(a.floor=a).ceil=function(e){return r(e=new Date(e-1)),o(e,1),r(e),e},a.round=function(e){var t=a(e),i=a.ceil(e);return e-t<i-e?t:i},a.offset=function(e,t){return o(e=new Date(+e),null==t?1:Math.floor(t)),e},a.range=function(e,t,i){var n=[];if(e=a.ceil(e),i=null==i?1:Math.floor(i),!(e<t&&0<i))return n;for(;n.push(new Date(+e)),o(e,i),r(e),e<t;);return n},a.filter=function(i){return Pc(function(e){if(e<=e)for(;r(e),!i(e);)e.setTime(e-1)},function(e,t){if(e<=e)for(;0<=--t;)for(;o(e,1),!i(e););})},i&&(a.count=function(e,t){return wc.setTime(+e),Tc.setTime(+t),r(wc),r(Tc),Math.floor(i(wc,Tc))},a.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?a.filter(n?function(e){return n(e)%t==0}:function(e){return a.count(0,e)%t==0}):a:null}),a}var kc=Pc(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});kc.every=function(i){return i=Math.floor(i),isFinite(i)&&0<i?1<i?Pc(function(e){e.setTime(Math.floor(e/i)*i)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i}):kc:null};var Ic=kc.range,Rc=Pc(function(e){e.setTime(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),Mc=Rc.range,Ac=Pc(function(e){e.setTime(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),Dc=Ac.range,Fc=Pc(function(e){var t=6e4*e.getTimezoneOffset()%36e5;t<0&&(t+=36e5),e.setTime(36e5*Math.floor((e-t)/36e5)+t)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),Lc=Fc.range,Oc=Pc(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),Bc=Oc.range;function Nc(t){return Pc(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var Hc=Nc(0),Vc=Nc(1),_c=Nc(2),zc=Nc(3),Wc=Nc(4),Gc=Nc(5),Xc=Nc(6),Uc=Hc.range,Yc=Vc.range,qc=_c.range,Kc=zc.range,$c=Wc.range,jc=Gc.range,Qc=Xc.range,Zc=Pc(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),Jc=Zc.range,eh=Pc(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});eh.every=function(i){return isFinite(i=Math.floor(i))&&0<i?Pc(function(e){e.setFullYear(Math.floor(e.getFullYear()/i)*i),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*i)}):null};var th=eh.range,ih=Pc(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),nh=ih.range,rh=Pc(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),oh=rh.range,ah=Pc(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),sh=ah.range;function lh(t){return Pc(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var dh=lh(0),uh=lh(1),ch=lh(2),hh=lh(3),fh=lh(4),gh=lh(5),ph=lh(6),mh=dh.range,xh=uh.range,yh=ch.range,vh=hh.range,Eh=fh.range,bh=gh.range,Ch=ph.range,Sh=Pc(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),wh=Sh.range,Th=Pc(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Th.every=function(i){return isFinite(i=Math.floor(i))&&0<i?Pc(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/i)*i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*i)}):null};var Ph=Th.range;function kh(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ih(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Rh(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Mh(e){var n=e.dateTime,r=e.date,o=e.time,t=e.periods,i=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,d=Hh(t),u=Vh(t),c=Hh(i),h=Vh(i),f=Hh(a),g=Vh(a),p=Hh(s),m=Vh(s),x=Hh(l),y=Vh(l),v={a:function(e){return a[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:ef,e:ef,H:tf,I:nf,j:rf,L:of,m:af,M:sf,p:function(e){return t[+(12<=e.getHours())]},S:lf,U:df,w:uf,W:cf,x:null,X:null,y:hf,Y:ff,Z:gf,"%":Rf},E={a:function(e){return a[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:pf,e:pf,H:mf,I:xf,j:yf,L:vf,m:Ef,M:bf,p:function(e){return t[+(12<=e.getUTCHours())]},S:Cf,U:Sf,w:wf,W:Tf,x:null,X:null,y:Pf,Y:kf,Z:If,"%":Rf},b={a:function(e,t,i){var n=f.exec(t.slice(i));return n?(e.w=g[n[0].toLowerCase()],i+n[0].length):-1},A:function(e,t,i){var n=c.exec(t.slice(i));return n?(e.w=h[n[0].toLowerCase()],i+n[0].length):-1},b:function(e,t,i){var n=x.exec(t.slice(i));return n?(e.m=y[n[0].toLowerCase()],i+n[0].length):-1},B:function(e,t,i){var n=p.exec(t.slice(i));return n?(e.m=m[n[0].toLowerCase()],i+n[0].length):-1},c:function(e,t,i){return w(e,n,t,i)},d:qh,e:qh,H:$h,I:$h,j:Kh,L:Zh,m:Yh,M:jh,p:function(e,t,i){var n=d.exec(t.slice(i));return n?(e.p=u[n[0].toLowerCase()],i+n[0].length):-1},S:Qh,U:zh,w:_h,W:Wh,x:function(e,t,i){return w(e,r,t,i)},X:function(e,t,i){return w(e,o,t,i)},y:Xh,Y:Gh,Z:Uh,"%":Jh};function C(l,d){return function(e){var t,i,n,r=[],o=-1,a=0,s=l.length;for(e instanceof Date||(e=new Date(+e));++o<s;)37===l.charCodeAt(o)&&(r.push(l.slice(a,o)),null!=(i=Dh[t=l.charAt(++o)])?t=l.charAt(++o):i="e"===t?" ":"0",(n=d[t])&&(t=n(e,i)),r.push(t),a=o+1);return r.push(l.slice(a,o)),r.join("")}}function S(n,r){return function(e){var t=Rh(1900);if(w(t,n,e+="",0)!=e.length)return null;if("p"in t&&(t.H=t.H%12+12*t.p),"W"in t||"U"in t){"w"in t||(t.w="W"in t?1:0);var i="Z"in t?Ih(Rh(t.y)).getUTCDay():r(Rh(t.y)).getDay();t.m=0,t.d="W"in t?(t.w+6)%7+7*t.W-(i+5)%7:t.w+7*t.U-(i+6)%7}return"Z"in t?(t.H+=t.Z/100|0,t.M+=t.Z%100,Ih(t)):r(t)}}function w(e,t,i,n){for(var r,o,a=0,s=t.length,l=i.length;a<s;){if(l<=n)return-1;if(37===(r=t.charCodeAt(a++))){if(r=t.charAt(a++),!(o=b[r in Dh?t.charAt(a++):r])||(n=o(e,i,n))<0)return-1}else if(r!=i.charCodeAt(n++))return-1}return n}return v.x=C(r,v),v.X=C(o,v),v.c=C(n,v),E.x=C(r,E),E.X=C(o,E),E.c=C(n,E),{format:function(e){var t=C(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",kh);return t.toString=function(){return e},t},utcFormat:function(e){var t=C(e+="",E);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e,Ih);return t.toString=function(){return e},t}}}var Ah,Dh={"-":"",_:" ",0:"0"},Fh=/^\s*\d+/,Lh=/^%/,Oh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function Bh(e,t,i){var n=e<0?"-":"",r=(n?-e:e)+"",o=r.length;return n+(o<i?new Array(i-o+1).join(t)+r:r)}function Nh(e){return e.replace(Oh,"\\$&")}function Hh(e){return new RegExp("^(?:"+e.map(Nh).join("|")+")","i")}function Vh(e){for(var t={},i=-1,n=e.length;++i<n;)t[e[i].toLowerCase()]=i;return t}function _h(e,t,i){var n=Fh.exec(t.slice(i,i+1));return n?(e.w=+n[0],i+n[0].length):-1}function zh(e,t,i){var n=Fh.exec(t.slice(i));return n?(e.U=+n[0],i+n[0].length):-1}function Wh(e,t,i){var n=Fh.exec(t.slice(i));return n?(e.W=+n[0],i+n[0].length):-1}function Gh(e,t,i){var n=Fh.exec(t.slice(i,i+4));return n?(e.y=+n[0],i+n[0].length):-1}function Xh(e,t,i){var n=Fh.exec(t.slice(i,i+2));return n?(e.y=+n[0]+(68<+n[0]?1900:2e3),i+n[0].length):-1}function Uh(e,t,i){var n=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(i,i+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function Yh(e,t,i){var n=Fh.exec(t.slice(i,i+2));return n?(e.m=n[0]-1,i+n[0].length):-1}function qh(e,t,i){var n=Fh.exec(t.slice(i,i+2));return n?(e.d=+n[0],i+n[0].length):-1}function Kh(e,t,i){var n=Fh.exec(t.slice(i,i+3));return n?(e.m=0,e.d=+n[0],i+n[0].length):-1}function $h(e,t,i){var n=Fh.exec(t.slice(i,i+2));return n?(e.H=+n[0],i+n[0].length):-1}function jh(e,t,i){var n=Fh.exec(t.slice(i,i+2));return n?(e.M=+n[0],i+n[0].length):-1}function Qh(e,t,i){var n=Fh.exec(t.slice(i,i+2));return n?(e.S=+n[0],i+n[0].length):-1}function Zh(e,t,i){var n=Fh.exec(t.slice(i,i+3));return n?(e.L=+n[0],i+n[0].length):-1}function Jh(e,t,i){var n=Lh.exec(t.slice(i,i+1));return n?i+n[0].length:-1}function ef(e,t){return Bh(e.getDate(),t,2)}function tf(e,t){return Bh(e.getHours(),t,2)}function nf(e,t){return Bh(e.getHours()%12||12,t,2)}function rf(e,t){return Bh(1+Oc.count(eh(e),e),t,3)}function of(e,t){return Bh(e.getMilliseconds(),t,3)}function af(e,t){return Bh(e.getMonth()+1,t,2)}function sf(e,t){return Bh(e.getMinutes(),t,2)}function lf(e,t){return Bh(e.getSeconds(),t,2)}function df(e,t){return Bh(Hc.count(eh(e),e),t,2)}function uf(e){return e.getDay()}function cf(e,t){return Bh(Vc.count(eh(e),e),t,2)}function hf(e,t){return Bh(e.getFullYear()%100,t,2)}function ff(e,t){return Bh(e.getFullYear()%1e4,t,4)}function gf(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+Bh(t/60|0,"0",2)+Bh(t%60,"0",2)}function pf(e,t){return Bh(e.getUTCDate(),t,2)}function mf(e,t){return Bh(e.getUTCHours(),t,2)}function xf(e,t){return Bh(e.getUTCHours()%12||12,t,2)}function yf(e,t){return Bh(1+ah.count(Th(e),e),t,3)}function vf(e,t){return Bh(e.getUTCMilliseconds(),t,3)}function Ef(e,t){return Bh(e.getUTCMonth()+1,t,2)}function bf(e,t){return Bh(e.getUTCMinutes(),t,2)}function Cf(e,t){return Bh(e.getUTCSeconds(),t,2)}function Sf(e,t){return Bh(dh.count(Th(e),e),t,2)}function wf(e){return e.getUTCDay()}function Tf(e,t){return Bh(uh.count(Th(e),e),t,2)}function Pf(e,t){return Bh(e.getUTCFullYear()%100,t,2)}function kf(e,t){return Bh(e.getUTCFullYear()%1e4,t,4)}function If(){return"+0000"}function Rf(){return"%"}function Mf(e){return Ah=Mh(e),_.timeFormat=Ah.format,_.timeParse=Ah.parse,_.utcFormat=Ah.utcFormat,_.utcParse=Ah.utcParse,Ah}Mf({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Af="%Y-%m-%dT%H:%M:%S.%LZ";var Df=Date.prototype.toISOString?function(e){return e.toISOString()}:_.utcFormat(Af);var Ff=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:_.utcParse(Af),Lf=1e3,Of=60*Lf,Bf=60*Of,Nf=24*Bf,Hf=7*Nf,Vf=30*Nf,_f=365*Nf;function zf(e){return new Date(e)}function Wf(e){return e instanceof Date?+e:+new Date(+e)}function Gf(a,t,i,n,r,o,s,l,d){var u=hc(lc,ni),c=u.invert,h=u.domain,f=d(".%L"),g=d(":%S"),p=d("%I:%M"),m=d("%I %p"),x=d("%a %d"),y=d("%b %d"),v=d("%B"),E=d("%Y"),b=[[s,1,Lf],[s,5,5*Lf],[s,15,15*Lf],[s,30,30*Lf],[o,1,Of],[o,5,5*Of],[o,15,15*Of],[o,30,30*Of],[r,1,Bf],[r,3,3*Bf],[r,6,6*Bf],[r,12,12*Bf],[n,1,Nf],[n,2,2*Nf],[i,1,Hf],[t,1,Vf],[t,3,3*Vf],[a,1,_f]];function C(e){return(s(e)<e?f:o(e)<e?g:r(e)<e?p:n(e)<e?m:t(e)<e?i(e)<e?x:y:a(e)<e?v:E)(e)}function S(e,t,i,n){if(null==e&&(e=10),"number"==typeof e){var r=Math.abs(i-t)/e,o=w(function(e){return e[2]}).right(b,r);e=o===b.length?(n=P(t/_f,i/_f,e),a):o?(n=(o=b[r/b[o-1][2]<b[o][2]/r?o-1:o])[1],o[0]):(n=P(t,i,e),l)}return null==n?e:e.every(n)}return u.invert=function(e){return new Date(c(e))},u.domain=function(e){return arguments.length?h(ec.call(e,Wf)):h().map(zf)},u.ticks=function(e,t){var i,n=h(),r=n[0],o=n[n.length-1],a=o<r;return a&&(i=r,r=o,o=i),i=(i=S(e,r,o,t))?i.range(r,o+1):[],a?i.reverse():i},u.tickFormat=function(e,t){return null==t?C:d(t)},u.nice=function(e,t){var i=h();return(e=S(e,i[0],i[i.length-1],t))?h(pc(i,e)):u},u.copy=function(){return cc(u,Gf(a,t,i,n,r,o,s,l,d))},u}function Xf(e){return e.match(/.{6}/g).map(function(e){return"#"+e})}var Uf=Xf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Yf=Xf("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),qf=Xf("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Kf=Xf("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),$f=Di(_t(300,.5,0),_t(-240,.5,1)),jf=Di(_t(-100,.75,.35),_t(80,1.5,.8)),Qf=Di(_t(260,.75,.35),_t(80,1.5,.8)),Zf=_t();function Jf(t){var i=t.length;return function(e){return t[Math.max(0,Math.min(i-1,Math.floor(e*i)))]}}var eg=Jf(Xf("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),tg=Jf(Xf("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ig=Jf(Xf("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ng=Jf(Xf("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function rg(e){return function(){return e}}var og=Math.abs,ag=Math.atan2,sg=Math.cos,lg=Math.max,dg=Math.min,ug=Math.sin,cg=Math.sqrt,hg=1e-12,fg=Math.PI,gg=fg/2,pg=2*fg;function mg(e){return 1<=e?gg:e<=-1?-gg:Math.asin(e)}function xg(e){return e.innerRadius}function yg(e){return e.outerRadius}function vg(e){return e.startAngle}function Eg(e){return e.endAngle}function bg(e){return e&&e.padAngle}function Cg(e,t,i,n,r,o,a){var s=e-i,l=t-n,d=(a?o:-o)/cg(s*s+l*l),u=d*l,c=-d*s,h=e+u,f=t+c,g=i+u,p=n+c,m=(h+g)/2,x=(f+p)/2,y=g-h,v=p-f,E=y*y+v*v,b=r-o,C=h*p-g*f,S=(v<0?-1:1)*cg(lg(0,b*b*E-C*C)),w=(C*v-y*S)/E,T=(-C*y-v*S)/E,P=(C*v+y*S)/E,k=(-C*y+v*S)/E,I=w-m,R=T-x,M=P-m,A=k-x;return M*M+A*A<I*I+R*R&&(w=P,T=k),{cx:w,cy:T,x01:-u,y01:-c,x11:w*(r/b-1),y11:T*(r/b-1)}}function Sg(e){this._context=e}Sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};function wg(e){return new Sg(e)}function Tg(e){return e[0]}function Pg(e){return e[1]}function kg(){var a=Tg,s=Pg,l=rg(!0),d=null,u=wg,c=null;function t(e){var t,i,n,r=e.length,o=!1;for(null==d&&(c=u(n=kr())),t=0;t<=r;++t)!(t<r&&l(i=e[t],t,e))===o&&((o=!o)?c.lineStart():c.lineEnd()),o&&c.point(+a(i,t,e),+s(i,t,e));if(n)return c=null,n+""||null}return t.x=function(e){return arguments.length?(a="function"==typeof e?e:rg(+e),t):a},t.y=function(e){return arguments.length?(s="function"==typeof e?e:rg(+e),t):s},t.defined=function(e){return arguments.length?(l="function"==typeof e?e:rg(!!e),t):l},t.curve=function(e){return arguments.length?(u=e,null!=d&&(c=u(d)),t):u},t.context=function(e){return arguments.length?(null==e?d=c=null:c=u(d=e),t):d},t}function Ig(){var u=Tg,c=null,h=rg(0),f=Pg,g=rg(!0),p=null,m=wg,x=null;function t(e){var t,i,n,r,o,a=e.length,s=!1,l=new Array(a),d=new Array(a);for(null==p&&(x=m(o=kr())),t=0;t<=a;++t){if(!(t<a&&g(r=e[t],t,e))===s)if(s=!s)i=t,x.areaStart(),x.lineStart();else{for(x.lineEnd(),x.lineStart(),n=t-1;i<=n;--n)x.point(l[n],d[n]);x.lineEnd(),x.areaEnd()}s&&(l[t]=+u(r,t,e),d[t]=+h(r,t,e),x.point(c?+c(r,t,e):l[t],f?+f(r,t,e):d[t]))}if(o)return x=null,o+""||null}function e(){return kg().defined(g).curve(m).context(p)}return t.x=function(e){return arguments.length?(u="function"==typeof e?e:rg(+e),c=null,t):u},t.x0=function(e){return arguments.length?(u="function"==typeof e?e:rg(+e),t):u},t.x1=function(e){return arguments.length?(c=null==e?null:"function"==typeof e?e:rg(+e),t):c},t.y=function(e){return arguments.length?(h="function"==typeof e?e:rg(+e),f=null,t):h},t.y0=function(e){return arguments.length?(h="function"==typeof e?e:rg(+e),t):h},t.y1=function(e){return arguments.length?(f=null==e?null:"function"==typeof e?e:rg(+e),t):f},t.lineX0=t.lineY0=function(){return e().x(u).y(h)},t.lineY1=function(){return e().x(u).y(f)},t.lineX1=function(){return e().x(c).y(h)},t.defined=function(e){return arguments.length?(g="function"==typeof e?e:rg(!!e),t):g},t.curve=function(e){return arguments.length?(m=e,null!=p&&(x=m(p)),t):m},t.context=function(e){return arguments.length?(null==e?p=x=null:x=m(p=e),t):p},t}function Rg(e,t){return t<e?-1:e<t?1:e<=t?0:NaN}function Mg(e){return e}var Ag=Fg(wg);function Dg(e){this._curve=e}function Fg(t){function e(e){return new Dg(t(e))}return e._curve=t,e}function Lg(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(Fg(e)):t()._curve},e}Dg.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function Og(){}var Bg={draw:function(e,t){var i=Math.sqrt(t/fg);e.moveTo(i,0),e.arc(0,0,i,0,pg)}},Ng={draw:function(e,t){var i=Math.sqrt(t/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}},Hg=Math.sqrt(1/3),Vg=2*Hg,_g={draw:function(e,t){var i=Math.sqrt(t/Vg),n=i*Hg;e.moveTo(0,-i),e.lineTo(n,0),e.lineTo(0,i),e.lineTo(-n,0),e.closePath()}},zg=Math.sin(fg/10)/Math.sin(7*fg/10),Wg=Math.sin(pg/10)*zg,Gg=-Math.cos(pg/10)*zg,Xg={draw:function(e,t){var i=Math.sqrt(.8908130915292852*t),n=Wg*i,r=Gg*i;e.moveTo(0,-i),e.lineTo(n,r);for(var o=1;o<5;++o){var a=pg*o/5,s=Math.cos(a),l=Math.sin(a);e.lineTo(l*i,-s*i),e.lineTo(s*n-l*r,l*n+s*r)}e.closePath()}},Ug={draw:function(e,t){var i=Math.sqrt(t),n=-i/2;e.rect(n,n,i,i)}},Yg=Math.sqrt(3),qg={draw:function(e,t){var i=-Math.sqrt(t/(3*Yg));e.moveTo(0,2*i),e.lineTo(-Yg*i,-i),e.lineTo(Yg*i,-i),e.closePath()}},Kg=Math.sqrt(3)/2,$g=1/Math.sqrt(12),jg=3*($g/2+1),Qg={draw:function(e,t){var i=Math.sqrt(t/jg),n=i/2,r=i*$g,o=n,a=i*$g+i,s=-o,l=a;e.moveTo(n,r),e.lineTo(o,a),e.lineTo(s,l),e.lineTo(-.5*n-Kg*r,Kg*n+-.5*r),e.lineTo(-.5*o-Kg*a,Kg*o+-.5*a),e.lineTo(-.5*s-Kg*l,Kg*s+-.5*l),e.lineTo(-.5*n+Kg*r,-.5*r-Kg*n),e.lineTo(-.5*o+Kg*a,-.5*a-Kg*o),e.lineTo(-.5*s+Kg*l,-.5*l-Kg*s),e.closePath()}},Zg=[Bg,Ng,_g,Ug,Xg,qg,Qg];function Jg(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function ep(e){this._context=e}ep.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Jg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jg(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tp(e){this._context=e}tp.prototype={areaStart:Og,areaEnd:Og,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Jg(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ip(e){this._context=e}ip.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,n):this._context.moveTo(i,n);break;case 3:this._point=4;default:Jg(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function np(e,t){this._basis=new ep(e),this._beta=t}np.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,i=e.length-1;if(0<i)for(var n,r=e[0],o=t[0],a=e[i]-r,s=t[i]-o,l=-1;++l<=i;)n=l/i,this._basis.point(this._beta*e[l]+(1-this._beta)*(r+n*a),this._beta*t[l]+(1-this._beta)*(o+n*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var rp=function t(i){function e(e){return 1===i?new ep(e):new np(e,i)}return e.beta=function(e){return t(+e)},e}(.85);function op(e,t,i){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-i),e._x2,e._y2)}function ap(e,t){this._context=e,this._k=(1-t)/6}ap.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:op(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:op(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var sp=function t(i){function e(e){return new ap(e,i)}return e.tension=function(e){return t(+e)},e}(0);function lp(e,t){this._context=e,this._k=(1-t)/6}lp.prototype={areaStart:Og,areaEnd:Og,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:op(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var dp=function t(i){function e(e){return new lp(e,i)}return e.tension=function(e){return t(+e)},e}(0);function up(e,t){this._context=e,this._k=(1-t)/6}up.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:op(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cp=function t(i){function e(e){return new up(e,i)}return e.tension=function(e){return t(+e)},e}(0);function hp(e,t,i){var n=e._x1,r=e._y1,o=e._x2,a=e._y2;if(e._l01_a>hg){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>hg){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*d+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*d+e._y1*e._l23_2a-i*e._l12_2a)/u}e._context.bezierCurveTo(n,r,o,a,e._x2,e._y2)}function fp(e,t){this._context=e,this._alpha=t}fp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:hp(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var gp=function t(i){function e(e){return i?new fp(e,i):new ap(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);function pp(e,t){this._context=e,this._alpha=t}pp.prototype={areaStart:Og,areaEnd:Og,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:hp(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var mp=function t(i){function e(e){return i?new pp(e,i):new lp(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);function xp(e,t){this._context=e,this._alpha=t}xp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hp(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var yp=function t(i){function e(e){return i?new xp(e,i):new up(e,0)}return e.alpha=function(e){return t(+e)},e}(.5);function vp(e){this._context=e}vp.prototype={areaStart:Og,areaEnd:Og,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ep(e){return e<0?-1:1}function bp(e,t,i){var n=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(n||r<0&&-0),a=(i-e._y1)/(r||n<0&&-0),s=(o*r+a*n)/(n+r);return(Ep(o)+Ep(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Cp(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function Sp(e,t,i){var n=e._x0,r=e._y0,o=e._x1,a=e._y1,s=(o-n)/3;e._context.bezierCurveTo(n+s,r+s*t,o-s,a-s*i,o,a)}function wp(e){this._context=e}function Tp(e){this._context=new Pp(e)}function Pp(e){this._context=e}function kp(e){this._context=e}function Ip(e){var t,i,n=e.length-1,r=new Array(n),o=new Array(n),a=new Array(n);for(o[r[0]=0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/o[t-1],o[t]-=i,a[t]-=i*a[t-1];for(r[n-1]=a[n-1]/o[n-1],t=n-2;0<=t;--t)r[t]=(a[t]-r[t+1])/o[t];for(o[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}wp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sp(this,this._t0,Cp(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Sp(this,Cp(this,i=bp(this,e,t)),i);break;default:Sp(this,this._t0,i=bp(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}},(Tp.prototype=Object.create(wp.prototype)).point=function(e,t){wp.prototype.point.call(this,t,e)},Pp.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,n,r,o){this._context.bezierCurveTo(t,e,n,i,o,r)}},kp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===i)this._context.lineTo(e[1],t[1]);else for(var n=Ip(e),r=Ip(t),o=0,a=1;a<i;++o,++a)this._context.bezierCurveTo(n[0][o],r[0][o],n[1][o],r[1][o],e[a],t[a]);(this._line||0!==this._line&&1===i)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Rp(e,t){this._context=e,this._t=t}Rp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}}this._x=e,this._y=t}};function Mp(e,t){if(1<(n=e.length))for(var i,n,r=1,o=e[t[0]],a=o.length;r<n;++r){i=o,o=e[t[r]];for(var s=0;s<a;++s)o[s][1]+=o[s][0]=isNaN(i[s][1])?i[s][0]:i[s][1]}}function Ap(e){for(var t=e.length,i=new Array(t);0<=--t;)i[t]=t;return i}var Dp=Array.prototype.slice;function Fp(e,t){return e[t]}function Lp(e){var i=e.map(Op);return Ap(e).sort(function(e,t){return i[e]-i[t]})}function Op(e){for(var t,i=0,n=-1,r=e.length;++n<r;)(t=+e[n][1])&&(i+=t);return i}function Bp(e){return function(){return e}}function Np(e){return e[0]}function Hp(e){return e[1]}function Vp(){this._=null}function _p(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function zp(e,t){var i=t,n=t.R,r=i.U;r?r.L===i?r.L=n:r.R=n:e._=n,n.U=r,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function Wp(e,t){var i=t,n=t.L,r=i.U;r?r.L===i?r.L=n:r.R=n:e._=n,n.U=r,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function Gp(e){for(;e.L;)e=e.L;return e}function Xp(e,t,i,n){var r=[null,null],o=hm.push(r)-1;return r.left=e,r.right=t,i&&Yp(r,e,t,i),n&&Yp(r,t,e,n),um[e.index].halfedges.push(o),um[t.index].halfedges.push(o),r}function Up(e,t,i){var n=[t,i];return n.left=e,n}function Yp(e,t,i,n){e[0]||e[1]?e.left===i?e[1]=n:e[0]=n:(e[0]=n,e.left=t,e.right=i)}function qp(e,t,i,n,r){var o,a=e[0],s=e[1],l=a[0],d=a[1],u=0,c=1,h=s[0]-l,f=s[1]-d;if(o=t-l,h||!(0<o)){if(o/=h,h<0){if(o<u)return;o<c&&(c=o)}else if(0<h){if(c<o)return;u<o&&(u=o)}if(o=n-l,h||!(o<0)){if(o/=h,h<0){if(c<o)return;u<o&&(u=o)}else if(0<h){if(o<u)return;o<c&&(c=o)}if(o=i-d,f||!(0<o)){if(o/=f,f<0){if(o<u)return;o<c&&(c=o)}else if(0<f){if(c<o)return;u<o&&(u=o)}if(o=r-d,f||!(o<0)){if(o/=f,f<0){if(c<o)return;u<o&&(u=o)}else if(0<f){if(o<u)return;o<c&&(c=o)}return 0<u||c<1?(0<u&&(e[0]=[l+u*h,d+u*f]),c<1&&(e[1]=[l+c*h,d+c*f]),1):1}}}}}function Kp(e,t,i,n,r){var o=e[1];if(o)return 1;var a,s,l=e[0],d=e.left,u=e.right,c=d[0],h=d[1],f=u[0],g=u[1],p=(c+f)/2,m=(h+g)/2;if(g===h){if(p<t||n<=p)return;if(f<c){if(l){if(l[1]>=r)return}else l=[p,i];o=[p,r]}else{if(l){if(l[1]<i)return}else l=[p,r];o=[p,i]}}else if(s=m-(a=(c-f)/(g-h))*p,a<-1||1<a)if(f<c){if(l){if(l[1]>=r)return}else l=[(i-s)/a,i];o=[(r-s)/a,r]}else{if(l){if(l[1]<i)return}else l=[(r-s)/a,r];o=[(i-s)/a,i]}else if(h<g){if(l){if(l[0]>=n)return}else l=[t,a*t+s];o=[n,a*n+s]}else{if(l){if(l[0]<t)return}else l=[n,a*n+s];o=[t,a*t+s]}return e[0]=l,e[1]=o,1}function $p(e,t){return t[+(t.left!==e.site)]}Vp.prototype={constructor:Vp,insert:function(e,t){var i,n,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;i=e}else i=this._?(e=Gp(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=i,t.C=!0,e=t;i&&i.C;)i===(n=i.U).L?(r=n.R)&&r.C?(i.C=r.C=!1,n.C=!0,e=n):(e===i.R&&(zp(this,i),i=(e=i).U),i.C=!1,n.C=!0,Wp(this,n)):(r=n.L)&&r.C?(i.C=r.C=!1,n.C=!0,e=n):(e===i.L&&(Wp(this,i),i=(e=i).U),i.C=!1,n.C=!0,zp(this,n)),i=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,i,n,r=e.U,o=e.L,a=e.R;if(i=o?a?Gp(a):o:a,r?r.L===e?r.L=i:r.R=i:this._=i,o&&a?(n=i.C,i.C=e.C,((i.L=o).U=i)!==a?(r=i.U,i.U=e.U,e=i.R,r.L=e,(i.R=a).U=i):(i.U=r,e=(r=i).R)):(n=e.C,e=i),e&&(e.U=r),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,zp(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Wp(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,zp(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,Wp(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,zp(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,Wp(this,r),e=this._;break}t.C=!0,r=(e=r).U}while(!e.C);e&&(e.C=!1)}}};var jp,Qp=[];function Zp(){_p(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jp(e){var t=e.P,i=e.N;if(t&&i){var n=t.site,r=e.site,o=i.site;if(n!==o){var a=r[0],s=r[1],l=n[0]-a,d=n[1]-s,u=o[0]-a,c=o[1]-s,h=2*(l*c-d*u);if(!(-gm<=h)){var f=l*l+d*d,g=u*u+c*c,p=(c*f-d*g)/h,m=(l*g-u*f)/h,x=Qp.pop()||new Zp;x.arc=e,x.site=r,x.x=p+a,x.y=(x.cy=m+s)+Math.sqrt(p*p+m*m),e.circle=x;for(var y=null,v=cm._;v;)if(x.y<v.y||x.y===v.y&&x.x<=v.x){if(!v.L){y=v.P;break}v=v.L}else{if(!v.R){y=v;break}v=v.R}cm.insert(y,x),y||(jp=x)}}}}function em(e){var t=e.circle;t&&(t.P||(jp=t.N),cm.remove(t),Qp.push(t),_p(t),e.circle=null)}var tm=[];function im(){_p(this),this.edge=this.site=this.circle=null}function nm(e){var t=tm.pop()||new im;return t.site=e,t}function rm(e){em(e),dm.remove(e),tm.push(e),_p(e)}function om(e){var t=e.circle,i=t.x,n=t.cy,r=[i,n],o=e.P,a=e.N,s=[e];rm(e);for(var l=o;l.circle&&Math.abs(i-l.circle.x)<fm&&Math.abs(n-l.circle.cy)<fm;)o=l.P,s.unshift(l),rm(l),l=o;s.unshift(l),em(l);for(var d=a;d.circle&&Math.abs(i-d.circle.x)<fm&&Math.abs(n-d.circle.cy)<fm;)a=d.N,s.push(d),rm(d),d=a;s.push(d),em(d);var u,c=s.length;for(u=1;u<c;++u)d=s[u],l=s[u-1],Yp(d.edge,l.site,d.site,r);l=s[0],(d=s[c-1]).edge=Xp(l.site,d.site,null,r),Jp(l),Jp(d)}function am(e){for(var t,i,n,r,o,a=e[0],s=e[1],l=dm._;l;)if(n=sm(l,s)-a,fm<n)l=l.L;else{if(r=a-lm(l,s),!(fm<r)){-fm<n?(t=l.P,i=l):-fm<r?i=(t=l).N:t=i=l;break}if(!l.R){t=l;break}l=l.R}um[(o=e).index]={site:o,halfedges:[]};var d=nm(e);if(dm.insert(t,d),t||i){if(t===i)return em(t),i=nm(t.site),dm.insert(d,i),d.edge=i.edge=Xp(t.site,d.site),Jp(t),void Jp(i);if(i){em(t),em(i);var u=t.site,c=u[0],h=u[1],f=e[0]-c,g=e[1]-h,p=i.site,m=p[0]-c,x=p[1]-h,y=2*(f*x-g*m),v=f*f+g*g,E=m*m+x*x,b=[(x*v-g*E)/y+c,(f*E-m*v)/y+h];Yp(i.edge,u,p,b),d.edge=Xp(u,e,null,b),i.edge=Xp(e,p,null,b),Jp(t),Jp(i)}else d.edge=Xp(t.site,d.site)}}function sm(e,t){var i=e.site,n=i[0],r=i[1],o=r-t;if(!o)return n;var a=e.P;if(!a)return-1/0;var s=(i=a.site)[0],l=i[1],d=l-t;if(!d)return s;var u=s-n,c=1/o-1/d,h=u/d;return c?(-h+Math.sqrt(h*h-2*c*(u*u/(-2*d)-l+d/2+r-o/2)))/c+n:(n+s)/2}function lm(e,t){var i=e.N;if(i)return sm(i,t);var n=e.site;return n[1]===t?n[0]:1/0}var dm,um,cm,hm,fm=1e-6,gm=1e-12;function pm(e,t){return t[1]-e[1]||t[0]-e[0]}function mm(e,t){var i,n,r,o=e.sort(pm).pop();for(hm=[],um=new Array(e.length),dm=new Vp,cm=new Vp;;)if(r=jp,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===i&&o[1]===n||(am(o),i=o[0],n=o[1]),o=e.pop();else{if(!r)break;om(r.arc)}if(!function(){for(var e,t,i,n,r=0,o=um.length;r<o;++r)if((e=um[r])&&(n=(t=e.halfedges).length)){var a=new Array(n),s=new Array(n);for(i=0;i<n;++i)a[i]=i,s[i]=(l=e,d=hm[t[i]],h=c=void 0,u=l.site,c=d.left,h=d.right,u===h&&(h=c,c=u),h?Math.atan2(h[1]-c[1],h[0]-c[0]):(h=u===c?(c=d[1],d[0]):(c=d[0],d[1]),Math.atan2(c[0]-h[0],h[1]-c[1])));for(a.sort(function(e,t){return s[t]-s[e]}),i=0;i<n;++i)s[i]=t[a[i]];for(i=0;i<n;++i)t[i]=s[i]}var l,d,u,c,h}(),t){var a=+t[0][0],s=+t[0][1],l=+t[1][0],d=+t[1][1];!function(e,t,i,n){for(var r,o=hm.length;o--;)Kp(r=hm[o],e,t,i,n)&&qp(r,e,t,i,n)&&(Math.abs(r[0][0]-r[1][0])>fm||Math.abs(r[0][1]-r[1][1])>fm)||delete hm[o]}(a,s,l,d),function(e,t,i,n){var r,o,a,s,l,d,u,c,h,f,g,p,m,x,y=um.length,v=!0;for(r=0;r<y;++r)if(o=um[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)hm[l[s]]||l.splice(s,1);for(s=0,d=l.length;s<d;)m=o,g=(f=(x=hm[l[s]])[+(x.left===m.site)])[0],p=f[1],c=(u=$p(o,hm[l[++s%d]]))[0],h=u[1],(Math.abs(g-c)>fm||Math.abs(p-h)>fm)&&(l.splice(s,0,hm.push(Up(a,f,Math.abs(g-e)<fm&&fm<n-p?[e,Math.abs(c-e)<fm?h:n]:Math.abs(p-n)<fm&&fm<i-g?[Math.abs(h-n)<fm?c:i,n]:Math.abs(g-i)<fm&&fm<p-t?[i,Math.abs(c-i)<fm?h:t]:Math.abs(p-t)<fm&&fm<g-e?[Math.abs(h-t)<fm?c:e,t]:null))-1),++d);d&&(v=!1)}if(v){var E,b,C,S=1/0;for(r=0,v=null;r<y;++r)(o=um[r])&&(C=(E=(a=o.site)[0]-e)*E+(b=a[1]-t)*b)<S&&(S=C,v=o);if(v){var w=[e,t],T=[e,n],P=[i,n],k=[i,t];v.halfedges.push(hm.push(Up(a=v.site,w,T))-1,hm.push(Up(a,T,P))-1,hm.push(Up(a,P,k))-1,hm.push(Up(a,k,w))-1)}}for(r=0;r<y;++r)(o=um[r])&&(o.halfedges.length||delete um[r])}(a,s,l,d)}this.edges=hm,this.cells=um,dm=cm=hm=um=null}mm.prototype={constructor:mm,polygons:function(){var i=this.edges;return this.cells.map(function(t){var e=t.halfedges.map(function(e){return $p(t,i[e])});return e.data=t.site.data,e})},triangles:function(){var h=[],f=this.edges;return this.cells.forEach(function(e,t){if(n=(i=e.halfedges).length)for(var i,n,r,o,a,s,l=e.site,d=-1,u=f[i[n-1]],c=u.left===l?u.right:u.left;++d<n;)r=c,c=(u=f[i[d]]).left===l?u.right:u.left,r&&c&&t<r.index&&t<c.index&&(a=r,s=c,((o=l)[0]-s[0])*(a[1]-o[1])-(o[0]-a[0])*(s[1]-o[1])<0)&&h.push([l.data,r.data,c.data])}),h},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(a,s,e){for(var t,l,d=this,u=d._found||0,i=d.cells.length;!(l=d.cells[u]);)if(++u>=i)return null;for(var n=a-l.site[0],r=s-l.site[1],c=n*n+r*r;l=d.cells[t=u],u=null,l.halfedges.forEach(function(e){var t=d.edges[e],i=t.left;if(i!==l.site&&i||(i=t.right)){var n=a-i[0],r=s-i[1],o=n*n+r*r;o<c&&(c=o,u=i.index)}}),null!==u;);return d._found=t,null==e||c<=e*e?l.site:null}};function xm(e){return function(){return e}}function ym(e,t,i){this.target=e,this.type=t,this.transform=i}function vm(e,t,i){this.k=e,this.x=t,this.y=i}vm.prototype={constructor:vm,scale:function(e){return 1===e?this:new vm(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new vm(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Em=new vm(1,0,0);function bm(e){return e.__zoom||Em}function Cm(){_.event.stopImmediatePropagation()}bm.prototype=vm.prototype;function Sm(){_.event.preventDefault(),_.event.stopImmediatePropagation()}function wm(){return!_.event.button}function Tm(){var e,t,i=this;return t=i instanceof SVGElement?(e=(i=i.ownerSVGElement||i).width.baseVal.value,i.height.baseVal.value):(e=i.clientWidth,i.clientHeight),[[0,0],[e,t]]}function Pm(){return this.__zoom||Em}_.version="4.7.4",_.bisect=p,_.bisectRight=p,_.bisectLeft=t,_.ascending=s,_.bisector=w,_.cross=function(e,t,i){var n,r,o,a,s=e.length,l=t.length,d=new Array(s*l);for(null==i&&(i=u),n=o=0;n<s;++n)for(a=e[n],r=0;r<l;++r,++o)d[o]=i(a,t[r]);return d},_.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},_.deviation=r,_.extent=i,_.histogram=function(){var h=a,f=i,g=y;function t(e){var t,i,n=e.length,r=new Array(n);for(t=0;t<n;++t)r[t]=h(e[t],t,e);var o=f(r),a=o[0],s=o[1],l=g(r,a,s);Array.isArray(l)||(l=x(a,s,l));for(var d=l.length;l[0]<=a;)l.shift(),--d;for(;l[d-1]>=s;)l.pop(),--d;var u,c=new Array(d+1);for(t=0;t<=d;++t)(u=c[t]=[]).x0=0<t?l[t-1]:a,u.x1=t<d?l[t]:s;for(t=0;t<n;++t)a<=(i=r[t])&&i<=s&&c[p(l,i,0,d)].push(e[t]);return c}return t.value=function(e){return arguments.length?(h="function"==typeof e?e:o(e),t):h},t.domain=function(e){return arguments.length?(f="function"==typeof e?e:o([e[0],e[1]]),t):f},t.thresholds=function(e){return arguments.length?(g="function"==typeof e?e:Array.isArray(e)?o(c.call(e)):o(e),t):g},t},_.thresholdFreedmanDiaconis=function(e,t,i){return e=h.call(e,d).sort(s),Math.ceil((i-t)/(2*(b(e,.75)-b(e,.25))*Math.pow(e.length,-1/3)))},_.thresholdScott=function(e,t,i){return Math.ceil((i-t)/(3.5*r(e)*Math.pow(e.length,-1/3)))},_.thresholdSturges=y,_.max=function(e,t){var i,n,r=-1,o=e.length;if(null==t){for(;++r<o;)if(null!=(n=e[r])&&n<=n){i=n;break}for(;++r<o;)null!=(n=e[r])&&i<n&&(i=n)}else{for(;++r<o;)if(null!=(n=t(e[r],r,e))&&n<=n){i=n;break}for(;++r<o;)null!=(n=t(e[r],r,e))&&i<n&&(i=n)}return i},_.mean=function(e,t){var i,n=0,r=e.length,o=-1,a=r;if(null==t)for(;++o<r;)isNaN(i=d(e[o]))?--a:n+=i;else for(;++o<r;)isNaN(i=d(t(e[o],o,e)))?--a:n+=i;if(a)return n/a},_.median=function(e,t){var i,n=[],r=e.length,o=-1;if(null==t)for(;++o<r;)isNaN(i=d(e[o]))||n.push(i);else for(;++o<r;)isNaN(i=d(t(e[o],o,e)))||n.push(i);return b(n.sort(s),.5)},_.merge=k,_.min=v,_.pairs=function(e,t){null==t&&(t=u);for(var i=0,n=e.length-1,r=e[0],o=new Array(n<0?0:n);i<n;)o[i]=t(r,r=e[++i]);return o},_.permute=function(e,t){for(var i=t.length,n=new Array(i);i--;)n[i]=e[t[i]];return n},_.quantile=b,_.range=T,_.scan=function(e,t){if(i=e.length){var i,n,r=0,o=0,a=e[o];for(t=t||s;++r<i;)(t(n=e[r],a)<0||0!==t(a,a))&&(a=n,o=r);return 0===t(a,a)?o:void 0}},_.shuffle=function(e,t,i){for(var n,r,o=(null==i?e.length:i)-(t=null==t?0:+t);o;)r=Math.random()*o--|0,n=e[o+t],e[o+t]=e[r+t],e[r+t]=n;return e},_.sum=function(e,t){var i,n=0,r=e.length,o=-1;if(null==t)for(;++o<r;)(i=+e[o])&&(n+=i);else for(;++o<r;)(i=+t(e[o],o,e))&&(n+=i);return n},_.ticks=x,_.tickStep=P,_.transpose=E,_.variance=n,_.zip=function(){return E(arguments)},_.axisTop=function(e){return S(M,e)},_.axisRight=function(e){return S(A,e)},_.axisBottom=function(e){return S(D,e)},_.axisLeft=function(e){return S(F,e)},_.brush=function(){return gr(nr)},_.brushX=function(){return gr(tr)},_.brushY=function(){return gr(ir)},_.brushSelection=function(e){var t=e.__brush;return t?t.dim.output(t.selection):null},_.chord=function(){var b=0,C=null,S=null,w=null;function t(n){var e,t,i,r,o,a,s=n.length,l=[],d=T(s),u=[],c=[],h=c.groups=new Array(s),f=new Array(s*s);for(e=0,o=-1;++o<s;){for(t=0,a=-1;++a<s;)t+=n[o][a];l.push(t),u.push(T(s)),e+=t}for(C&&d.sort(function(e,t){return C(l[e],l[t])}),S&&u.forEach(function(e,i){e.sort(function(e,t){return S(n[i][e],n[i][t])})}),r=(e=Er(0,vr-b*s)/e)?b:vr/s,t=0,o=-1;++o<s;){for(i=t,a=-1;++a<s;){var g=d[o],p=u[g][a],m=n[g][p],x=t,y=t+=m*e;f[p*s+g]={index:g,subindex:p,startAngle:x,endAngle:y,value:m}}h[g]={index:g,startAngle:i,endAngle:t,value:l[g]},t+=r}for(o=-1;++o<s;)for(a=o-1;++a<s;){var v=f[a*s+o],E=f[o*s+a];(v.value||E.value)&&c.push(v.value<E.value?{source:E,target:v}:{source:v,target:E})}return w?c.sort(w):c}return t.padAngle=function(e){return arguments.length?(b=Er(0,e),t):b},t.sortGroups=function(e){return arguments.length?(C=e,t):C},t.sortSubgroups=function(e){return arguments.length?(S=e,t):S},t.sortChords=function(e){return arguments.length?(null==e?w=null:(w=function(e,t){return i(e.source.value+e.target.value,t.source.value+t.target.value)})._=i=e,t):w&&w._;var i},t},_.ribbon=function(){var h=Ir,f=Rr,g=Mr,p=Ar,m=Dr,x=null;function t(){var e,t=Cr.call(arguments),i=h.apply(this,t),n=f.apply(this,t),r=+g.apply(this,(t[0]=i,t)),o=p.apply(this,t)-yr,a=m.apply(this,t)-yr,s=r*pr(o),l=r*mr(o),d=+g.apply(this,(t[0]=n,t)),u=p.apply(this,t)-yr,c=m.apply(this,t)-yr;if((x=x||(e=kr())).moveTo(s,l),x.arc(0,0,r,o,a),o==u&&a==c||(x.quadraticCurveTo(0,0,d*pr(u),d*mr(u)),x.arc(0,0,d,u,c)),x.quadraticCurveTo(0,0,s,l),x.closePath(),e)return x=null,e+""||null}return t.radius=function(e){return arguments.length?(g="function"==typeof e?e:br(+e),t):g},t.startAngle=function(e){return arguments.length?(p="function"==typeof e?e:br(+e),t):p},t.endAngle=function(e){return arguments.length?(m="function"==typeof e?e:br(+e),t):m},t.source=function(e){return arguments.length?(h=e,t):h},t.target=function(e){return arguments.length?(f=e,t):f},t.context=function(e){return arguments.length?(x=null==e?null:e,t):x},t},_.nest=function(){var h,f,t,g=[],a=[];function p(e,i,n,r){if(i>=g.length)return null!=f?f(e):null!=h?e.sort(h):e;for(var t,o,a,s=-1,l=e.length,d=g[i++],u=Lr(),c=n();++s<l;)(a=u.get(t=d(o=e[s])+""))?a.push(o):u.set(t,[o]);return u.each(function(e,t){r(c,t,p(e,i,n,r))}),c}return t={object:function(e){return p(e,0,Or,Br)},map:function(e){return p(e,0,Nr,Hr)},entries:function(e){return function i(e,n){if(++n>g.length)return e;var r,o=a[n-1];return null!=f&&n>=g.length?r=e.entries():(r=[],e.each(function(e,t){r.push({key:t,values:i(e,n)})})),null!=o?r.sort(function(e,t){return o(e.key,t.key)}):r}(p(e,0,Nr,Hr),0)},key:function(e){return g.push(e),t},sortKeys:function(e){return a[g.length-1]=e,t},sortValues:function(e){return h=e,t},rollup:function(e){return f=e,t}}},_.set=zr,_.map=Lr,_.keys=function(e){var t=[];for(var i in e)t.push(i);return t},_.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},_.entries=function(e){var t=[];for(var i in e)t.push({key:i,value:e[i]});return t},_.color=st,_.rgb=ct,_.hsl=gt,_.lab=Pt,_.hcl=Dt,_.cubehelix=_t,_.dispatch=z,_.drag=function(){var t,r,o=Ge,a=Xe,i=Ue,g={},n=z("start","drag","end"),p=0;function m(e){e.on("mousedown.drag",s).on("touchstart.drag",u).on("touchmove.drag",c).on("touchend.drag touchcancel.drag",h).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function s(){if(!r&&o.apply(this,arguments)){var e=f("mouse",a.apply(this,arguments),de,this,arguments);e&&(Be(_.event.view).on("mousemove.drag",l,!0).on("mouseup.drag",d,!0),Ve(_.event.view),Ne(),t=!1,e("start"))}}function l(){He(),t=!0,g.mouse("drag")}function d(){Be(_.event.view).on("mousemove.drag mouseup.drag",null),_e(_.event.view,t),He(),g.mouse("end")}function u(){if(o.apply(this,arguments)){var e,t,i=_.event.changedTouches,n=a.apply(this,arguments),r=i.length;for(e=0;e<r;++e)(t=f(i[e].identifier,n,Oe,this,arguments))&&(Ne(),t("start"))}}function c(){var e,t,i=_.event.changedTouches,n=i.length;for(e=0;e<n;++e)(t=g[i[e].identifier])&&(He(),t("drag"))}function h(){var e,t,i=_.event.changedTouches,n=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),e=0;e<n;++e)(t=g[i[e].identifier])&&(Ne(),t("end"))}function f(r,o,a,s,l){var d,u,c,h=a(o,r),f=n.copy();if(ae(new We(m,"beforestart",d,r,p,h[0],h[1],0,0,f),function(){return null!=(_.event.subject=d=i.apply(s,l))&&(u=d.x-h[0]||0,c=d.y-h[1]||0,!0)}))return function e(t){var i,n=h;switch(t){case"start":g[r]=e,i=p++;break;case"end":delete g[r],--p;case"drag":h=a(o,r),i=p}ae(new We(m,t,d,r,i,h[0]+u,h[1]+c,h[0]-n[0],h[1]-n[1],f),f.apply,f,[t,s,l])}}return m.filter=function(e){return arguments.length?(o="function"==typeof e?e:ze(!!e),m):o},m.container=function(e){return arguments.length?(a="function"==typeof e?e:ze(e),m):a},m.subject=function(e){return arguments.length?(i="function"==typeof e?e:ze(e),m):i},m.on=function(){var e=n.on.apply(n,arguments);return e===n?m:e},m},_.dragDisable=Ve,_.dragEnable=_e,_.dsvFormat=Gr,_.csvParse=qr,_.csvParseRows=Kr,_.csvFormat=$r,_.csvFormatRows=jr,_.tsvParse=Zr,_.tsvParseRows=Jr,_.tsvFormat=eo,_.tsvFormatRows=to,_.easeLinear=function(e){return+e},_.easeQuad=mn,_.easeQuadIn=function(e){return e*e},_.easeQuadOut=function(e){return e*(2-e)},_.easeQuadInOut=mn,_.easeCubic=xn,_.easeCubicIn=function(e){return e*e*e},_.easeCubicOut=function(e){return--e*e*e+1},_.easeCubicInOut=xn,_.easePoly=En,_.easePolyIn=yn,_.easePolyOut=vn,_.easePolyInOut=En,_.easeSin=Sn,_.easeSinIn=function(e){return 1-Math.cos(e*Cn)},_.easeSinOut=function(e){return Math.sin(e*Cn)},_.easeSinInOut=Sn,_.easeExp=wn,_.easeExpIn=function(e){return Math.pow(2,10*e-10)},_.easeExpOut=function(e){return 1-Math.pow(2,-10*e)},_.easeExpInOut=wn,_.easeCircle=Tn,_.easeCircleIn=function(e){return 1-Math.sqrt(1-e*e)},_.easeCircleOut=function(e){return Math.sqrt(1- --e*e)},_.easeCircleInOut=Tn,_.easeBounce=Bn,_.easeBounceIn=function(e){return 1-Bn(1-e)},_.easeBounceOut=Bn,_.easeBounceInOut=function(e){return((e*=2)<=1?1-Bn(1-e):Bn(e-1)+1)/2},_.easeBack=Vn,_.easeBackIn=Nn,_.easeBackOut=Hn,_.easeBackInOut=Vn,_.easeElastic=Wn,_.easeElasticIn=zn,_.easeElasticOut=Wn,_.easeElasticInOut=Gn,_.forceCenter=function(o,a){var s;function t(){var e,t,i=s.length,n=0,r=0;for(e=0;e<i;++e)n+=(t=s[e]).x,r+=t.y;for(n=n/i-o,r=r/i-a,e=0;e<i;++e)(t=s[e]).x-=n,t.y-=r}return null==o&&(o=0),null==a&&(a=0),t.initialize=function(e){s=e},t.x=function(e){return arguments.length?(o=+e,t):o},t.y=function(e){return arguments.length?(a=+e,t):a},t},_.forceCollide=function(n){var o,a,m=1,s=1;function t(){for(var e,t,c,h,f,g,p,i=o.length,n=0;n<s;++n)for(t=ao(o,co,ho).visitAfter(l),e=0;e<i;++e)c=o[e],g=a[c.index],p=g*g,h=c.x+c.vx,f=c.y+c.vy,t.visit(r);function r(e,t,i,n,r){var o=e.data,a=e.r,s=g+a;if(!o)return h+s<t||n<h-s||f+s<i||r<f-s;if(o.index>c.index){var l=h-o.x-o.vx,d=f-o.y-o.vy,u=l*l+d*d;u<s*s&&(0===l&&(u+=(l=Ur())*l),0===d&&(u+=(d=Ur())*d),u=(s-(u=Math.sqrt(u)))/u*m,c.vx+=(l*=u)*(s=(a*=a)/(p+a)),c.vy+=(d*=u)*s,o.vx-=l*(s=1-s),o.vy-=d*s)}}}function l(e){if(e.data)return e.r=a[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function i(){if(o){var e,t,i=o.length;for(a=new Array(i),e=0;e<i;++e)t=o[e],a[t.index]=+n(t,e,o)}}return"function"!=typeof n&&(n=Xr(null==n?1:+n)),t.initialize=function(e){o=e,i()},t.iterations=function(e){return arguments.length?(s=+e,t):s},t.strength=function(e){return arguments.length?(m=+e,t):m},t.radius=function(e){return arguments.length?(n="function"==typeof e?e:Xr(+e),i(),t):n},t},_.forceLink=function(c){var h,f,o,a,g,s=fo,i=function(e){return 1/Math.min(a[e.source.index],a[e.target.index])},n=Xr(30),p=1;function t(e){for(var t=0,i=c.length;t<p;++t)for(var n,r,o,a,s,l,d,u=0;u<i;++u)r=(n=c[u]).source,a=(o=n.target).x+o.vx-r.x-r.vx||Ur(),s=o.y+o.vy-r.y-r.vy||Ur(),a*=l=((l=Math.sqrt(a*a+s*s))-f[u])/l*e*h[u],s*=l,o.vx-=a*(d=g[u]),o.vy-=s*d,r.vx+=a*(d=1-d),r.vy+=s*d}function r(){if(o){var e,t,i=o.length,n=c.length,r=Lr(o,s);for(e=0,a=new Array(i);e<n;++e)(t=c[e]).index=e,"object"!=typeof t.source&&(t.source=go(r,t.source)),"object"!=typeof t.target&&(t.target=go(r,t.target)),a[t.source.index]=(a[t.source.index]||0)+1,a[t.target.index]=(a[t.target.index]||0)+1;for(e=0,g=new Array(n);e<n;++e)t=c[e],g[e]=a[t.source.index]/(a[t.source.index]+a[t.target.index]);h=new Array(n),l(),f=new Array(n),d()}}function l(){if(o)for(var e=0,t=c.length;e<t;++e)h[e]=+i(c[e],e,c)}function d(){if(o)for(var e=0,t=c.length;e<t;++e)f[e]=+n(c[e],e,c)}return null==c&&(c=[]),t.initialize=function(e){o=e,r()},t.links=function(e){return arguments.length?(c=e,r(),t):c},t.id=function(e){return arguments.length?(s=e,t):s},t.iterations=function(e){return arguments.length?(p=+e,t):p},t.strength=function(e){return arguments.length?(i="function"==typeof e?e:Xr(+e),l(),t):i},t.distance=function(e){return arguments.length?(n="function"==typeof e?e:Xr(+e),d(),t):n},t},_.forceManyBody=function(){var r,l,d,u,n=Xr(-30),c=1,h=1/0,f=.81;function t(e){var t,i=r.length,n=ao(r,po,mo).visitAfter(o);for(d=e,t=0;t<i;++t)l=r[t],n.visit(a)}function i(){if(r){var e,t,i=r.length;for(u=new Array(i),e=0;e<i;++e)t=r[e],u[t.index]=+n(t,e,r)}}function o(e){var t,i,n,r,o,a=0;if(e.length){for(n=r=o=0;o<4;++o)(t=e[o])&&(i=t.value)&&(a+=i,n+=i*t.x,r+=i*t.y);e.x=n/a,e.y=r/a}else for((t=e).x=t.data.x,t.y=t.data.y;a+=u[t.data.index],t=t.next;);e.value=a}function a(e,t,i,n){if(!e.value)return!0;var r=e.x-l.x,o=e.y-l.y,a=n-t,s=r*r+o*o;if(a*a/f<s)return s<h&&(0===r&&(s+=(r=Ur())*r),0===o&&(s+=(o=Ur())*o),s<c&&(s=Math.sqrt(c*s)),l.vx+=r*e.value*d/s,l.vy+=o*e.value*d/s),!0;if(!(e.length||h<=s))for(e.data===l&&!e.next||(0===r&&(s+=(r=Ur())*r),0===o&&(s+=(o=Ur())*o),s<c&&(s=Math.sqrt(c*s)));e.data!==l&&(a=u[e.data.index]*d/s,l.vx+=r*a,l.vy+=o*a),e=e.next;);}return t.initialize=function(e){r=e,i()},t.strength=function(e){return arguments.length?(n="function"==typeof e?e:Xr(+e),i(),t):n},t.distanceMin=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.distanceMax=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t.theta=function(e){return arguments.length?(f=e*e,t):Math.sqrt(f)},t},_.forceSimulation=function(u){var i,n=1,t=.001,r=1-Math.pow(t,1/300),o=0,a=.6,s=Lr(),e=Ui(d),l=z("tick","end");function d(){c(),l.call("tick",i),n<t&&(e.stop(),l.call("end",i))}function c(){var e,t,i=u.length;for(n+=(o-n)*r,s.each(function(e){e(n)}),e=0;e<i;++e)null==(t=u[e]).fx?t.x+=t.vx*=a:(t.x=t.fx,t.vx=0),null==t.fy?t.y+=t.vy*=a:(t.y=t.fy,t.vy=0)}function h(){for(var e,t=0,i=u.length;t<i;++t){if((e=u[t]).index=t,isNaN(e.x)||isNaN(e.y)){var n=10*Math.sqrt(t),r=t*bo;e.x=n*Math.cos(r),e.y=n*Math.sin(r)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function f(e){return e.initialize&&e.initialize(u),e}return null==u&&(u=[]),h(),i={tick:c,restart:function(){return e.restart(d),i},stop:function(){return e.stop(),i},nodes:function(e){return arguments.length?(u=e,h(),s.each(f),i):u},alpha:function(e){return arguments.length?(n=+e,i):n},alphaMin:function(e){return arguments.length?(t=+e,i):t},alphaDecay:function(e){return arguments.length?(r=+e,i):+r},alphaTarget:function(e){return arguments.length?(o=+e,i):o},velocityDecay:function(e){return arguments.length?(a=1-e,i):1-a},force:function(e,t){return 1<arguments.length?(null==t?s.remove(e):s.set(e,f(t)),i):s.get(e)},find:function(e,t,i){var n,r,o,a,s,l=0,d=u.length;for(null==i?i=1/0:i*=i,l=0;l<d;++l)(o=(n=e-(a=u[l]).x)*n+(r=t-a.y)*r)<i&&(s=a,i=o);return s},on:function(e,t){return 1<arguments.length?(l.on(e,t),i):l.on(e)}}},_.forceX=function(i){var r,o,a,n=Xr(.1);function t(e){for(var t,i=0,n=r.length;i<n;++i)(t=r[i]).vx+=(a[i]-t.x)*o[i]*e}function s(){if(r){var e,t=r.length;for(o=new Array(t),a=new Array(t),e=0;e<t;++e)o[e]=isNaN(a[e]=+i(r[e],e,r))?0:+n(r[e],e,r)}}return"function"!=typeof i&&(i=Xr(null==i?0:+i)),t.initialize=function(e){r=e,s()},t.strength=function(e){return arguments.length?(n="function"==typeof e?e:Xr(+e),s(),t):n},t.x=function(e){return arguments.length?(i="function"==typeof e?e:Xr(+e),s(),t):i},t},_.forceY=function(i){var r,o,a,n=Xr(.1);function t(e){for(var t,i=0,n=r.length;i<n;++i)(t=r[i]).vy+=(a[i]-t.y)*o[i]*e}function s(){if(r){var e,t=r.length;for(o=new Array(t),a=new Array(t),e=0;e<t;++e)o[e]=isNaN(a[e]=+i(r[e],e,r))?0:+n(r[e],e,r)}}return"function"!=typeof i&&(i=Xr(null==i?0:+i)),t.initialize=function(e){r=e,s()},t.strength=function(e){return arguments.length?(n="function"==typeof e?e:Xr(+e),s(),t):n},t.y=function(e){return arguments.length?(i="function"==typeof e?e:Xr(+e),s(),t):i},t},_.formatDefaultLocale=Mo,_.formatLocale=ko,_.formatSpecifier=wo,_.precisionFixed=Ao,_.precisionPrefix=Do,_.precisionRound=Fo,_.geoArea=function(e){return va.reset(),xa(e,Ea),2*va},_.geoBounds=function(e){var t,i,n,r,o,a,s;if(Ia=ka=-(Ta=Pa=1/0),_a=[],xa(e,Ga),i=_a.length){for(_a.sort(Za),t=1,o=[n=_a[0]];t<i;++t)Ja(n,(r=_a[t])[0])||Ja(n,r[1])?(Qa(n[0],r[1])>Qa(n[0],n[1])&&(n[1]=r[1]),Qa(r[0],n[1])>Qa(n[0],n[1])&&(n[0]=r[0])):o.push(n=r);for(a=-1/0,t=0,n=o[i=o.length-1];t<=i;n=r,++t)r=o[t],(s=Qa(n[1],r[0]))>a&&(a=s,Ta=r[0],ka=n[1])}return _a=za=null,Ta===1/0||Pa===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ta,Pa],[ka,Ia]]},_.geoCentroid=function(e){es=ts=is=ns=rs=os=as=ss=ls=ds=us=0,xa(e,ms);var t=ls,i=ds,n=us,r=t*t+i*i+n*n;return r<1e-12&&(t=os,i=as,n=ss,ts<Ho&&(t=is,i=ns,n=rs),(r=t*t+i*i+n*n)<1e-12)?[NaN,NaN]:[qo(i,t)*Go,ra(n/ta(r))*Go]},_.geoCircle=function(){var n,r,o=ks([0,0]),a=ks(90),s=ks(6),l={point:function(e,t){n.push(e=r(e,t)),e[0]*=Go,e[1]*=Go}};function t(){var e=o.apply(this,arguments),t=a.apply(this,arguments)*Xo,i=s.apply(this,arguments)*Xo;return n=[],r=Ms(-e[0]*Xo,-e[1]*Xo,0).invert,Os(l,t,i,1),e={type:"Polygon",coordinates:[n]},n=r=null,e}return t.center=function(e){return arguments.length?(o="function"==typeof e?e:ks([+e[0],+e[1]]),t):o},t.radius=function(e){return arguments.length?(a="function"==typeof e?e:ks(+e),t):a},t.precision=function(e){return arguments.length?(s="function"==typeof e?e:ks(+e),t):s},t},_.geoClipExtent=function(){var t,i,n,r=0,o=0,a=960,s=500;return n={stream:function(e){return t&&i===e?t:t=Us(r,o,a,s)(i=e)},extent:function(e){return arguments.length?(r=+e[0][0],o=+e[0][1],a=+e[1][0],s=+e[1][1],t=i=null,n):[[r,o],[a,s]]}}},_.geoContains=function(e,t){return(e&&al.hasOwnProperty(e.type)?al[e.type]:ll)(e,t)},_.geoDistance=nl,_.geoGraticule=ml,_.geoGraticule10=function(){return ml()()},_.geoInterpolate=function(e,t){var i=e[0]*Xo,n=e[1]*Xo,r=t[0]*Xo,o=t[1]*Xo,a=Ko(n),s=Jo(n),l=Ko(o),d=Jo(o),u=a*Ko(i),c=a*Jo(i),h=l*Ko(r),f=l*Jo(r),g=2*ra(ta(oa(o-n)+a*l*oa(r-i))),p=Jo(g),m=g?function(e){var t=Jo(e*=g)/p,i=Jo(g-e)/p,n=i*u+t*h,r=i*c+t*f,o=i*s+t*d;return[qo(r,n)*Go,qo(o,ta(n*n+r*r))*Go]}:function(){return[i*Go,n*Go]};return m.distance=g,m},_.geoLength=il,_.geoPath=function(t,i){var n,r,o=4.5;function a(e){return e&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),xa(e,n(r))),r.result()}return a.area=function(e){return xa(e,n(wl)),wl.result()},a.measure=function(e){return xa(e,n(ud)),ud.result()},a.bounds=function(e){return xa(e,n(Fl)),Fl.result()},a.centroid=function(e){return xa(e,n(ql)),ql.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,bl):(t=e).stream,a):t},a.context=function(e){return arguments.length?(r=null==e?(i=null,new fd):new nd(i=e),"function"!=typeof o&&r.pointRadius(o),a):i},a.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(r.pointRadius(+e),+e),a):o},a.projection(t).context(i)},_.geoAlbers=Dd,_.geoAlbersUsa=function(){var t,i,r,o,a,n,s=Dd(),l=Ad().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=Ad().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){n=[e,t]}};function c(e){var t=e[0],i=e[1];return n=null,r.point(t,i),n||(o.point(t,i),n)||(a.point(t,i),n)}function h(){return t=i=null,c}return c.invert=function(e){var t=s.scale(),i=s.translate(),n=(e[0]-i[0])/t,r=(e[1]-i[1])/t;return(.12<=r&&r<.234&&-.425<=n&&n<-.214?l:.166<=r&&r<.234&&-.214<=n&&n<-.115?d:s).invert(e)},c.stream=function(e){return t&&i===e?t:(n=[s.stream(i=e),l.stream(e),d.stream(e)],r=n.length,t={point:function(e,t){for(var i=-1;++i<r;)n[i].point(e,t)},sphere:function(){for(var e=-1;++e<r;)n[e].sphere()},lineStart:function(){for(var e=-1;++e<r;)n[e].lineStart()},lineEnd:function(){for(var e=-1;++e<r;)n[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<r;)n[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<r;)n[e].polygonEnd()}});var n,r},c.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),d.precision(e),h()):s.precision()},c.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),d.scale(e),c.translate(s.translate())):s.scale()},c.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),i=+e[0],n=+e[1];return r=s.translate(e).clipExtent([[i-.455*t,n-.238*t],[i+.455*t,n+.238*t]]).stream(u),o=l.translate([i-.307*t,n+.201*t]).clipExtent([[i-.425*t+Ho,n+.12*t+Ho],[i-.214*t-Ho,n+.234*t-Ho]]).stream(u),a=d.translate([i-.205*t,n+.212*t]).clipExtent([[i-.214*t+Ho,n+.166*t+Ho],[i-.115*t-Ho,n+.234*t-Ho]]).stream(u),h()},c.fitExtent=function(e,t){return Cd(c,e,t)},c.fitSize=function(e,t){return Sd(c,e,t)},c.scale(1070)},_.geoAzimuthalEqualArea=function(){return kd(Od).scale(124.75).clipAngle(179.999)},_.geoAzimuthalEqualAreaRaw=Od,_.geoAzimuthalEquidistant=function(){return kd(Bd).scale(79.4188).clipAngle(179.999)},_.geoAzimuthalEquidistantRaw=Bd,_.geoConicConformal=function(){return Rd(_d).scale(109.5).parallels([30,30])},_.geoConicConformalRaw=_d,_.geoConicEqualArea=Ad,_.geoConicEqualAreaRaw=Md,_.geoConicEquidistant=function(){return Rd(Wd).scale(131.154).center([0,13.9389])},_.geoConicEquidistantRaw=Wd,_.geoEquirectangular=function(){return kd(zd).scale(152.63)},_.geoEquirectangularRaw=zd,_.geoGnomonic=function(){return kd(Gd).scale(144.049).clipAngle(60)},_.geoGnomonicRaw=Gd,_.geoIdentity=function(){var t,i,n,r,o,a,s=1,l=0,d=0,u=1,c=1,h=bl,f=null,g=bl;function p(){return r=o=null,a}return a={stream:function(e){return r&&o===e?r:r=h(g(o=e))},clipExtent:function(e){return arguments.length?(g=null==e?(f=t=i=n=null,bl):Us(f=+e[0][0],t=+e[0][1],i=+e[1][0],n=+e[1][1]),p()):null==f?null:[[f,t],[i,n]]},scale:function(e){return arguments.length?(h=Xd((s=+e)*u,s*c,l,d),p()):s},translate:function(e){return arguments.length?(h=Xd(s*u,s*c,l=+e[0],d=+e[1]),p()):[l,d]},reflectX:function(e){return arguments.length?(h=Xd(s*(u=e?-1:1),s*c,l,d),p()):u<0},reflectY:function(e){return arguments.length?(h=Xd(s*u,s*(c=e?-1:1),l,d),p()):c<0},fitExtent:function(e,t){return Cd(a,e,t)},fitSize:function(e,t){return Sd(a,e,t)}}},_.geoProjection=kd,_.geoProjectionMutator=Id,_.geoMercator=function(){return Hd(Nd).scale(961/Wo)},_.geoMercatorRaw=Nd,_.geoOrthographic=function(){return kd(Ud).scale(249.5).clipAngle(90+Ho)},_.geoOrthographicRaw=Ud,_.geoStereographic=function(){return kd(Yd).scale(250).clipAngle(142)},_.geoStereographicRaw=Yd,_.geoTransverseMercator=function(){var e=Hd(qd),t=e.center,i=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?i([e[0],e[1],2<e.length?e[2]+90:90]):[(e=i())[0],e[1],e[2]-90]},i([0,0,90]).scale(159.155)},_.geoTransverseMercatorRaw=qd,_.geoRotation=Ls,_.geoStream=xa,_.geoTransform=function(e){return{stream:Ed(e)}},_.cluster=function(){var s=Kd,l=1,d=1,u=!1;function t(t){var n,r=0;t.eachAfter(function(e){var t,i=e.children;i?(e.x=(t=i).reduce($d,0)/t.length,e.y=1+i.reduce(jd,0)):(e.x=n?r+=s(e,n):0,e.y=0,n=e)});var e=function(e){for(var t;t=e.children;)e=t[0];return e}(t),i=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(t),o=e.x-s(e,i)/2,a=i.x+s(i,e)/2;return t.eachAfter(u?function(e){e.x=(e.x-t.x)*l,e.y=(t.y-e.y)*d}:function(e){e.x=(e.x-o)/(a-o)*l,e.y=(1-(t.y?e.y/t.y:1))*d})}return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(u=!1,l=+e[0],d=+e[1],t):u?null:[l,d]},t.nodeSize=function(e){return arguments.length?(u=!0,l=+e[0],d=+e[1],t):u?[l,d]:null},t},_.hierarchy=Zd,_.pack=function(){var i=null,t=1,n=1,r=cu;function o(e){return e.x=t/2,e.y=n/2,i?e.eachBefore(gu(i)).eachAfter(pu(r,.5)).eachBefore(mu(1)):e.eachBefore(gu(fu)).eachAfter(pu(cu,1)).eachAfter(pu(r,e.r/Math.min(t,n))).eachBefore(mu(Math.min(t,n)/(2*e.r))),e}return o.radius=function(e){return arguments.length?(i=null==(t=e)?null:uu(t),o):i;var t},o.size=function(e){return arguments.length?(t=+e[0],n=+e[1],o):[t,n]},o.padding=function(e){return arguments.length?(r="function"==typeof e?e:hu(+e),o):r},o},_.packSiblings=function(e){return du(e),e},_.packEnclose=ru,_.partition=function(){var i=1,n=1,s=0,r=!1;function t(e){var o,a,t=e.height+1;return e.x0=e.y0=s,e.x1=i,e.y1=n/t,e.eachBefore((o=n,a=t,function(e){e.children&&yu(e,e.x0,o*(e.depth+1)/a,e.x1,o*(e.depth+2)/a);var t=e.x0,i=e.y0,n=e.x1-s,r=e.y1-s;n<t&&(t=n=(t+n)/2),r<i&&(i=r=(i+r)/2),e.x0=t,e.y0=i,e.x1=n,e.y1=r})),r&&e.eachBefore(xu),e}return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],n=+e[1],t):[i,n]},t.padding=function(e){return arguments.length?(s=+e,t):s},t},_.stratify=function(){var c=bu,h=Cu;function t(e){var t,i,n,r,o,a,s,l=e.length,d=new Array(l),u={};for(i=0;i<l;++i)t=e[i],o=d[i]=new iu(t),null!=(a=c(t,i,e))&&(a+="")&&(u[s="$"+(o.id=a)]=s in u?Eu:o);for(i=0;i<l;++i)if(o=d[i],null!=(a=h(e[i],i,e))&&(a+="")){if(!(r=u["$"+a]))throw new Error("missing: "+a);if(r===Eu)throw new Error("ambiguous: "+a);r.children?r.children.push(o):r.children=[o],o.parent=r}else{if(n)throw new Error("multiple roots");n=o}if(!n)throw new Error("no root");if(n.parent=vu,n.eachBefore(function(e){e.depth=e.parent.depth+1,--l}).eachBefore(tu),n.parent=null,0<l)throw new Error("cycle");return n}return t.id=function(e){return arguments.length?(c=uu(e),t):c},t.parentId=function(e){return arguments.length?(h=uu(e),t):h},t},_.tree=function(){var v=Su,d=1,u=1,c=null;function t(e){var t=function(e){for(var t,i,n,r,o,a=new Pu(e,0),s=[a];t=s.pop();)if(n=t._.children)for(t.children=new Array(o=n.length),r=o-1;0<=r;--r)s.push(i=t.children[r]=new Pu(n[r],r)),i.parent=t;return(a.parent=new Pu(null,0)).children=[a],a}(e);if(t.eachAfter(h),t.parent.m=-t.z,t.eachBefore(f),c)e.eachBefore(g);else{var i=e,n=e,r=e;e.eachBefore(function(e){e.x<i.x&&(i=e),e.x>n.x&&(n=e),e.depth>r.depth&&(r=e)});var o=i===n?1:v(i,n)/2,a=o-i.x,s=d/(n.x+o+a),l=u/(r.depth||1);e.eachBefore(function(e){e.x=(e.x+a)*s,e.y=e.depth*l})}return e}function h(e){var t=e.children,i=e.parent.children,n=e.i?i[e.i-1]:null;if(t){!function(e){for(var t,i=0,n=0,r=e.children,o=r.length;0<=--o;)(t=r[o]).z+=i,t.m+=i,i+=t.s+(n+=t.c)}(e);var r=(t[0].z+t[t.length-1].z)/2;n?(e.z=n.z+v(e._,n._),e.m=e.z-r):e.z=r}else n&&(e.z=n.z+v(e._,n._));e.parent.A=function(e,t,i){if(t){for(var n,r=e,o=e,a=t,s=r.parent.children[0],l=r.m,d=o.m,u=a.m,c=s.m;a=Tu(a),r=wu(r),a&&r;)s=wu(s),(o=Tu(o)).a=e,0<(n=a.z+u-r.z-l+v(a._,r._))&&(x=e,y=i,h=(m=a).a.parent===x.parent?m.a:y,p=(g=n)/((f=e).i-h.i),f.c-=p,f.s+=g,h.c+=p,f.z+=g,f.m+=g,l+=n,d+=n),u+=a.m,l+=r.m,c+=s.m,d+=o.m;a&&!Tu(o)&&(o.t=a,o.m+=u-d),r&&!wu(s)&&(s.t=r,s.m+=l-c,i=e)}var h,f,g,p;var m,x,y;return i}(e,n,e.parent.A||i[0])}function f(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function g(e){e.x*=d,e.y=e.depth*u}return t.separation=function(e){return arguments.length?(v=e,t):v},t.size=function(e){return arguments.length?(c=!1,d=+e[0],u=+e[1],t):c?null:[d,u]},t.nodeSize=function(e){return arguments.length?(c=!0,d=+e[0],u=+e[1],t):c?[d,u]:null},t},_.treemap=function(){var a=Mu,t=!1,i=1,n=1,s=[0],l=cu,d=cu,u=cu,c=cu,h=cu;function r(e){return e.x0=e.y0=0,e.x1=i,e.y1=n,e.eachBefore(o),s=[0],t&&e.eachBefore(xu),e}function o(e){var t=s[e.depth],i=e.x0+t,n=e.y0+t,r=e.x1-t,o=e.y1-t;r<i&&(i=r=(i+r)/2),o<n&&(n=o=(n+o)/2),e.x0=i,e.y0=n,e.x1=r,e.y1=o,e.children&&(t=s[e.depth+1]=l(e)/2,i+=h(e)-t,n+=d(e)-t,(r-=u(e)-t)<i&&(i=r=(i+r)/2),(o-=c(e)-t)<n&&(n=o=(n+o)/2),a(e,i,n,r,o))}return r.round=function(e){return arguments.length?(t=!!e,r):t},r.size=function(e){return arguments.length?(i=+e[0],n=+e[1],r):[i,n]},r.tile=function(e){return arguments.length?(a=uu(e),r):a},r.padding=function(e){return arguments.length?r.paddingInner(e).paddingOuter(e):r.paddingInner()},r.paddingInner=function(e){return arguments.length?(l="function"==typeof e?e:hu(+e),r):l},r.paddingOuter=function(e){return arguments.length?r.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):r.paddingTop()},r.paddingTop=function(e){return arguments.length?(d="function"==typeof e?e:hu(+e),r):d},r.paddingRight=function(e){return arguments.length?(u="function"==typeof e?e:hu(+e),r):u},r.paddingBottom=function(e){return arguments.length?(c="function"==typeof e?e:hu(+e),r):c},r.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:hu(+e),r):h},r},_.treemapBinary=function(e,t,i,n,r){var o,a,y=e.children,s=y.length,v=new Array(s+1);for(v[0]=a=o=0;o<s;++o)v[o+1]=a+=y[o].value;!function e(t,i,n,r,o,a,s){if(i-1<=t){var l=y[t];return l.x0=r,l.y0=o,l.x1=a,void(l.y1=s)}var d=v[t],u=n/2+d,c=t+1,h=i-1;for(;c<h;){var f=c+h>>>1;v[f]<u?c=1+f:h=f}u-v[c-1]<v[c]-u&&t+1<c&&--c;var g=v[c]-d,p=n-g;if(s-o<a-r){var m=(r*p+a*g)/n;e(t,c,g,r,o,m,s),e(c,i,p,m,o,a,s)}else{var x=(o*p+s*g)/n;e(t,c,g,r,o,a,x),e(c,i,p,r,x,a,s)}}(0,s,e.value,t,i,n,r)},_.treemapDice=yu,_.treemapSlice=ku,_.treemapSliceDice=function(e,t,i,n,r){(1&e.depth?ku:yu)(e,t,i,n,r)},_.treemapSquarify=Mu,_.treemapResquarify=Au,_.interpolate=hi,_.interpolateArray=Zt,_.interpolateBasis=Gt,_.interpolateBasisClosed=Xt,_.interpolateDate=Jt,_.interpolateNumber=ni,_.interpolateObject=ei,_.interpolateRound=fi,_.interpolateString=ai,_.interpolateTransformCss=xi,_.interpolateTransformSvg=yi,_.interpolateZoom=bi,_.interpolateRgb=jt,_.interpolateRgbBasis=ti,_.interpolateRgbBasisClosed=ii,_.interpolateHsl=Si,_.interpolateHslLong=wi,_.interpolateLab=function(t,e){var i=$t((t=Pt(t)).l,(e=Pt(e)).l),n=$t(t.a,e.a),r=$t(t.b,e.b),o=$t(t.opacity,e.opacity);return function(e){return t.l=i(e),t.a=n(e),t.b=r(e),t.opacity=o(e),t+""}},_.interpolateHcl=Pi,_.interpolateHclLong=ki,_.interpolateCubehelix=Ai,_.interpolateCubehelixLong=Di,_.quantize=function(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e(n/(t-1));return i},_.path=kr,_.polygonArea=function(e){for(var t,i=-1,n=e.length,r=e[n-1],o=0;++i<n;)t=r,r=e[i],o+=t[1]*r[0]-t[0]*r[1];return o/2},_.polygonCentroid=function(e){for(var t,i,n=-1,r=e.length,o=0,a=0,s=e[r-1],l=0;++n<r;)t=s,s=e[n],l+=i=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*i,a+=(t[1]+s[1])*i;return[o/(l*=3),a/l]},_.polygonHull=function(e){if((i=e.length)<3)return null;var t,i,n=new Array(i),r=new Array(i);for(t=0;t<i;++t)n[t]=[+e[t][0],+e[t][1],t];for(n.sort(Du),t=0;t<i;++t)r[t]=[n[t][0],-n[t][1]];var o=Fu(n),a=Fu(r),s=a[0]===o[0],l=a[a.length-1]===o[o.length-1],d=[];for(t=o.length-1;0<=t;--t)d.push(e[n[o[t]][2]]);for(t=+s;t<a.length-l;++t)d.push(e[n[a[t]][2]]);return d},_.polygonContains=function(e,t){for(var i,n,r=e.length,o=e[r-1],a=t[0],s=t[1],l=o[0],d=o[1],u=!1,c=0;c<r;++c)i=(o=e[c])[0],s<(n=o[1])!=s<d&&a<(l-i)*(s-n)/(d-n)+i&&(u=!u),l=i,d=n;return u},_.polygonLength=function(e){for(var t,i,n=-1,r=e.length,o=e[r-1],a=o[0],s=o[1],l=0;++n<r;)t=a,i=s,t-=a=(o=e[n])[0],i-=s=o[1],l+=Math.sqrt(t*t+i*i);return l},_.quadtree=ao,_.queue=zu,_.randomUniform=function(e,t){return e=null==e?0:+e,t=null==t?1:+t,1===arguments.length?(t=e,e=0):t-=e,function(){return Math.random()*t+e}},_.randomNormal=Wu,_.randomLogNormal=function(){var e=Wu.apply(this,arguments);return function(){return Math.exp(e())}},_.randomBates=function(e){var t=Gu(e);return function(){return t()/e}},_.randomIrwinHall=Gu,_.randomExponential=function(e){return function(){return-Math.log(1-Math.random())/e}},_.request=Xu,_.html=qu,_.json=Ku,_.text=$u,_.xml=ju,_.csv=Qu,_.tsv=Zu,_.scaleBand=rc,_.scalePoint=function(){return function e(t){var i=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(i())},t}(rc().paddingInner(1))},_.scaleIdentity=function e(){var t=[0,1];function i(e){return+e}return(i.invert=i).domain=i.range=function(e){return arguments.length?(t=ec.call(e,ac),i):t.slice()},i.copy=function(){return e().domain(t)},gc(i)},_.scaleLinear=function e(){var t=hc(lc,ni);return t.copy=function(){return cc(t,e())},gc(t)},_.scaleLog=function e(){var t=hc(mc,xc).domain([1,10]),h=t.domain,f=10,g=Ec(10),p=vc(10);function i(){return g=Ec(f),p=vc(f),h()[0]<0&&(g=bc(g),p=bc(p)),t}return t.base=function(e){return arguments.length?(f=+e,i()):f},t.domain=function(e){return arguments.length?(h(e),i()):h()},t.ticks=function(e){var t,i=h(),n=i[0],r=i[i.length-1];(t=r<n)&&(l=n,n=r,r=l);var o,a,s,l=g(n),d=g(r),u=null==e?10:+e,c=[];if(!(f%1)&&d-l<u){if(l=Math.round(l)-1,d=Math.round(d)+1,0<n){for(;l<d;++l)for(a=1,o=p(l);a<f;++a)if(!((s=o*a)<n)){if(r<s)break;c.push(s)}}else for(;l<d;++l)for(a=f-1,o=p(l);1<=a;--a)if(!((s=o*a)<n)){if(r<s)break;c.push(s)}}else c=x(l,d,Math.min(d-l,u)).map(p);return t?c.reverse():c},t.tickFormat=function(e,i){if(null==i&&(i=10===f?".0e":","),"function"!=typeof i&&(i=_.format(i)),e===1/0)return i;null==e&&(e=10);var n=Math.max(1,f*e/t.ticks().length);return function(e){var t=e/p(Math.round(g(e)));return t*f<f-.5&&(t*=f),t<=n?i(e):""}},t.nice=function(){return h(pc(h(),{floor:function(e){return p(Math.floor(g(e)))},ceil:function(e){return p(Math.ceil(g(e)))}}))},t.copy=function(){return cc(t,e().base(f))},t},_.scaleOrdinal=nc,_.scaleImplicit=ic,_.scalePow=Sc,_.scaleSqrt=function(){return Sc().exponent(.5)},_.scaleQuantile=function e(){var r=[],i=[],n=[];function o(){var e=0,t=Math.max(1,i.length);for(n=new Array(t-1);++e<t;)n[e-1]=b(r,e/t);return a}function a(e){if(!isNaN(e=+e))return i[p(n,e)]}return a.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:[0<t?n[t-1]:r[0],t<n.length?n[t]:r[r.length-1]]},a.domain=function(e){if(!arguments.length)return r.slice();r=[];for(var t,i=0,n=e.length;i<n;++i)null==(t=e[i])||isNaN(t=+t)||r.push(t);return r.sort(s),o()},a.range=function(e){return arguments.length?(i=tc.call(e),o()):i.slice()},a.quantiles=function(){return n.slice()},a.copy=function(){return e().domain(r).range(i)},a},_.scaleQuantize=function e(){var i=0,n=1,r=1,o=[.5],a=[0,1];function t(e){if(e<=e)return a[p(o,e,0,r)]}function s(){var e=-1;for(o=new Array(r);++e<r;)o[e]=((e+1)*n-(e-r)*i)/(r+1);return t}return t.domain=function(e){return arguments.length?(i=+e[0],n=+e[1],s()):[i,n]},t.range=function(e){return arguments.length?(r=(a=tc.call(e)).length-1,s()):a.slice()},t.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[i,o[0]]:r<=t?[o[r-1],n]:[o[t-1],o[t]]},t.copy=function(){return e().domain([i,n]).range(a)},gc(t)},_.scaleThreshold=function e(){var i=[.5],n=[0,1],t=1;function r(e){if(e<=e)return n[p(i,e,0,t)]}return r.domain=function(e){return arguments.length?(i=tc.call(e),t=Math.min(i.length,n.length-1),r):i.slice()},r.range=function(e){return arguments.length?(n=tc.call(e),t=Math.min(i.length,n.length-1),r):n.slice()},r.invertExtent=function(e){var t=n.indexOf(e);return[i[t-1],i[t]]},r.copy=function(){return e().domain(i).range(n)},r},_.scaleTime=function(){return Gf(eh,Zc,Hc,Oc,Fc,Ac,Rc,kc,_.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},_.scaleUtc=function(){return Gf(Th,Sh,dh,ah,rh,ih,Rc,kc,_.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},_.schemeCategory10=Uf,_.schemeCategory20b=Yf,_.schemeCategory20c=qf,_.schemeCategory20=Kf,_.interpolateCubehelixDefault=$f,_.interpolateRainbow=function(e){(e<0||1<e)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Zf.h=360*e-100,Zf.s=1.5-1.5*t,Zf.l=.8-.9*t,Zf+""},_.interpolateWarm=jf,_.interpolateCool=Qf,_.interpolateViridis=eg,_.interpolateMagma=tg,_.interpolateInferno=ig,_.interpolatePlasma=ng,_.scaleSequential=function e(i){var n=0,r=1,o=!1;function t(e){var t=(e-n)/(r-n);return i(o?Math.max(0,Math.min(1,t)):t)}return t.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.clamp=function(e){return arguments.length?(o=!!e,t):o},t.interpolator=function(e){return arguments.length?(i=e,t):i},t.copy=function(){return e(i).domain([n,r]).clamp(o)},gc(t)},_.creator=q,_.local=$,_.matcher=ee,_.mouse=de,_.namespace=X,_.namespaces=Y,_.select=Be,_.selectAll=function(e){return"string"==typeof e?new Fe([document.querySelectorAll(e)],[document.documentElement]):new Fe([null==e?[]:e],De)},_.selection=Le,_.selector=ce,_.selectorAll=fe,_.touch=Oe,_.touches=function(e,t){null==t&&(t=se().touches);for(var i=0,n=t?t.length:0,r=new Array(n);i<n;++i)r[i]=le(e,t[i]);return r},_.window=ve,_.customEvent=ae,_.arc=function(){var K=xg,$=yg,j=rg(0),Q=null,Z=vg,J=Eg,ee=bg,te=null;function t(){var e,t,i,n,r,o,a,s,l,d,u,c,h=+K.apply(this,arguments),f=+$.apply(this,arguments),g=Z.apply(this,arguments)-gg,p=J.apply(this,arguments)-gg,m=og(p-g),x=g<p;if(te=te||(e=kr()),f<h&&(t=f,f=h,h=t),hg<f)if(pg-hg<m)te.moveTo(f*sg(g),f*ug(g)),te.arc(0,0,f,g,p,!x),hg<h&&(te.moveTo(h*sg(p),h*ug(p)),te.arc(0,0,h,p,g,x));else{var y,v,E=g,b=p,C=g,S=p,w=m,T=m,P=ee.apply(this,arguments)/2,k=hg<P&&(Q?+Q.apply(this,arguments):cg(h*h+f*f)),I=dg(og(f-h)/2,+j.apply(this,arguments)),R=I,M=I;if(hg<k){var A=mg(k/h*ug(P)),D=mg(k/f*ug(P));(w-=2*A)>hg?(C+=A*=x?1:-1,S-=A):(w=0,C=S=(g+p)/2),(T-=2*D)>hg?(E+=D*=x?1:-1,b-=D):(T=0,E=b=(g+p)/2)}var F=f*sg(E),L=f*ug(E),O=h*sg(S),B=h*ug(S);if(hg<I){var N=f*sg(b),H=f*ug(b),V=h*sg(C),_=h*ug(C);if(m<fg){var z=hg<w?[(n=F)+(c=((d=O-(o=N))*((r=L)-(a=H))-(u=B-a)*(n-o))/(u*(s=V-n)-d*(l=_-r)))*s,r+c*l]:[O,B],W=F-z[0],G=L-z[1],X=N-z[0],U=H-z[1],Y=1/ug((1<(i=(W*X+G*U)/(cg(W*W+G*G)*cg(X*X+U*U)))?0:i<-1?fg:Math.acos(i))/2),q=cg(z[0]*z[0]+z[1]*z[1]);R=dg(I,(h-q)/(Y-1)),M=dg(I,(f-q)/(1+Y))}}hg<T?hg<M?(y=Cg(V,_,F,L,f,M,x),v=Cg(N,H,O,B,f,M,x),te.moveTo(y.cx+y.x01,y.cy+y.y01),M<I?te.arc(y.cx,y.cy,M,ag(y.y01,y.x01),ag(v.y01,v.x01),!x):(te.arc(y.cx,y.cy,M,ag(y.y01,y.x01),ag(y.y11,y.x11),!x),te.arc(0,0,f,ag(y.cy+y.y11,y.cx+y.x11),ag(v.cy+v.y11,v.cx+v.x11),!x),te.arc(v.cx,v.cy,M,ag(v.y11,v.x11),ag(v.y01,v.x01),!x))):(te.moveTo(F,L),te.arc(0,0,f,E,b,!x)):te.moveTo(F,L),hg<h&&hg<w?hg<R?(y=Cg(O,B,N,H,h,-R,x),v=Cg(F,L,V,_,h,-R,x),te.lineTo(y.cx+y.x01,y.cy+y.y01),R<I?te.arc(y.cx,y.cy,R,ag(y.y01,y.x01),ag(v.y01,v.x01),!x):(te.arc(y.cx,y.cy,R,ag(y.y01,y.x01),ag(y.y11,y.x11),!x),te.arc(0,0,h,ag(y.cy+y.y11,y.cx+y.x11),ag(v.cy+v.y11,v.cx+v.x11),x),te.arc(v.cx,v.cy,R,ag(v.y11,v.x11),ag(v.y01,v.x01),!x))):te.arc(0,0,h,S,C,x):te.lineTo(O,B)}else te.moveTo(0,0);if(te.closePath(),e)return te=null,e+""||null}return t.centroid=function(){var e=(+K.apply(this,arguments)+ +$.apply(this,arguments))/2,t=(+Z.apply(this,arguments)+ +J.apply(this,arguments))/2-fg/2;return[sg(t)*e,ug(t)*e]},t.innerRadius=function(e){return arguments.length?(K="function"==typeof e?e:rg(+e),t):K},t.outerRadius=function(e){return arguments.length?($="function"==typeof e?e:rg(+e),t):$},t.cornerRadius=function(e){return arguments.length?(j="function"==typeof e?e:rg(+e),t):j},t.padRadius=function(e){return arguments.length?(Q=null==e?null:"function"==typeof e?e:rg(+e),t):Q},t.startAngle=function(e){return arguments.length?(Z="function"==typeof e?e:rg(+e),t):Z},t.endAngle=function(e){return arguments.length?(J="function"==typeof e?e:rg(+e),t):J},t.padAngle=function(e){return arguments.length?(ee="function"==typeof e?e:rg(+e),t):ee},t.context=function(e){return arguments.length?(te=null==e?null:e,t):te},t},_.area=Ig,_.line=kg,_.pie=function(){var g=Mg,p=Rg,m=null,x=rg(0),y=rg(pg),v=rg(0);function t(i){var e,t,n,r,o,a=i.length,s=0,l=new Array(a),d=new Array(a),u=+x.apply(this,arguments),c=Math.min(pg,Math.max(-pg,y.apply(this,arguments)-u)),h=Math.min(Math.abs(c)/a,v.apply(this,arguments)),f=h*(c<0?-1:1);for(e=0;e<a;++e)0<(o=d[l[e]=e]=+g(i[e],e,i))&&(s+=o);for(null!=p?l.sort(function(e,t){return p(d[e],d[t])}):null!=m&&l.sort(function(e,t){return m(i[e],i[t])}),e=0,n=s?(c-a*f)/s:0;e<a;++e,u=r)t=l[e],r=u+(0<(o=d[t])?o*n:0)+f,d[t]={data:i[t],index:e,value:o,startAngle:u,endAngle:r,padAngle:h};return d}return t.value=function(e){return arguments.length?(g="function"==typeof e?e:rg(+e),t):g},t.sortValues=function(e){return arguments.length?(p=e,m=null,t):p},t.sort=function(e){return arguments.length?(m=e,p=null,t):m},t.startAngle=function(e){return arguments.length?(x="function"==typeof e?e:rg(+e),t):x},t.endAngle=function(e){return arguments.length?(y="function"==typeof e?e:rg(+e),t):y},t.padAngle=function(e){return arguments.length?(v="function"==typeof e?e:rg(+e),t):v},t},_.radialArea=function(){var e=Ig().curve(Ag),t=e.curve,i=e.lineX0,n=e.lineX1,r=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return Lg(i())},delete e.lineX0,e.lineEndAngle=function(){return Lg(n())},delete e.lineX1,e.lineInnerRadius=function(){return Lg(r())},delete e.lineY0,e.lineOuterRadius=function(){return Lg(o())},delete e.lineY1,e.curve=function(e){return arguments.length?t(Fg(e)):t()._curve},e},_.radialLine=function(){return Lg(kg().curve(Ag))},_.symbol=function(){var t=rg(Bg),i=rg(64),n=null;function r(){var e;if(n=n||(e=kr()),t.apply(this,arguments).draw(n,+i.apply(this,arguments)),e)return n=null,e+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:rg(e),r):t},r.size=function(e){return arguments.length?(i="function"==typeof e?e:rg(+e),r):i},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r},_.symbols=Zg,_.symbolCircle=Bg,_.symbolCross=Ng,_.symbolDiamond=_g,_.symbolSquare=Ug,_.symbolStar=Xg,_.symbolTriangle=qg,_.symbolWye=Qg,_.curveBasisClosed=function(e){return new tp(e)},_.curveBasisOpen=function(e){return new ip(e)},_.curveBasis=function(e){return new ep(e)},_.curveBundle=rp,_.curveCardinalClosed=dp,_.curveCardinalOpen=cp,_.curveCardinal=sp,_.curveCatmullRomClosed=mp,_.curveCatmullRomOpen=yp,_.curveCatmullRom=gp,_.curveLinearClosed=function(e){return new vp(e)},_.curveLinear=wg,_.curveMonotoneX=function(e){return new wp(e)},_.curveMonotoneY=function(e){return new Tp(e)},_.curveNatural=function(e){return new kp(e)},_.curveStep=function(e){return new Rp(e,.5)},_.curveStepAfter=function(e){return new Rp(e,1)},_.curveStepBefore=function(e){return new Rp(e,0)},_.stack=function(){var c=rg([]),h=Ap,f=Mp,g=Fp;function t(e){var t,i,n=c.apply(this,arguments),r=e.length,o=n.length,a=new Array(o);for(t=0;t<o;++t){for(var s,l=n[t],d=a[t]=new Array(r),u=0;u<r;++u)d[u]=s=[0,+g(e[u],l,u,e)],s.data=e[u];d.key=l}for(t=0,i=h(a);t<o;++t)a[i[t]].index=t;return f(a,i),a}return t.keys=function(e){return arguments.length?(c="function"==typeof e?e:rg(Dp.call(e)),t):c},t.value=function(e){return arguments.length?(g="function"==typeof e?e:rg(+e),t):g},t.order=function(e){return arguments.length?(h=null==e?Ap:"function"==typeof e?e:rg(Dp.call(e)),t):h},t.offset=function(e){return arguments.length?(f=null==e?Mp:e,t):f},t},_.stackOffsetExpand=function(e,t){if(0<(n=e.length)){for(var i,n,r,o=0,a=e[0].length;o<a;++o){for(r=i=0;i<n;++i)r+=e[i][o][1]||0;if(r)for(i=0;i<n;++i)e[i][o][1]/=r}Mp(e,t)}},_.stackOffsetNone=Mp,_.stackOffsetSilhouette=function(e,t){if(0<(i=e.length)){for(var i,n=0,r=e[t[0]],o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=e[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}Mp(e,t)}},_.stackOffsetWiggle=function(e,t){if(0<(r=e.length)&&0<(n=(i=e[t[0]]).length)){for(var i,n,r,o=0,a=1;a<n;++a){for(var s=0,l=0,d=0;s<r;++s){for(var u=e[t[s]],c=u[a][1]||0,h=(c-(u[a-1][1]||0))/2,f=0;f<s;++f){var g=e[t[f]];h+=(g[a][1]||0)-(g[a-1][1]||0)}l+=c,d+=h*c}i[a-1][1]+=i[a-1][0]=o,l&&(o-=d/l)}i[a-1][1]+=i[a-1][0]=o,Mp(e,t)}},_.stackOrderAscending=Lp,_.stackOrderDescending=function(e){return Lp(e).reverse()},_.stackOrderInsideOut=function(e){var t,i,n=e.length,r=e.map(Op),o=Ap(e).sort(function(e,t){return r[t]-r[e]}),a=0,s=0,l=[],d=[];for(t=0;t<n;++t)i=o[t],a<s?(a+=r[i],l.push(i)):(s+=r[i],d.push(i));return d.reverse().concat(l)},_.stackOrderNone=Ap,_.stackOrderReverse=function(e){return Ap(e).reverse()},_.timeInterval=Pc,_.timeMillisecond=kc,_.timeMilliseconds=Ic,_.utcMillisecond=kc,_.utcMilliseconds=Ic,_.timeSecond=Rc,_.timeSeconds=Mc,_.utcSecond=Rc,_.utcSeconds=Mc,_.timeMinute=Ac,_.timeMinutes=Dc,_.timeHour=Fc,_.timeHours=Lc,_.timeDay=Oc,_.timeDays=Bc,_.timeWeek=Hc,_.timeWeeks=Uc,_.timeSunday=Hc,_.timeSundays=Uc,_.timeMonday=Vc,_.timeMondays=Yc,_.timeTuesday=_c,_.timeTuesdays=qc,_.timeWednesday=zc,_.timeWednesdays=Kc,_.timeThursday=Wc,_.timeThursdays=$c,_.timeFriday=Gc,_.timeFridays=jc,_.timeSaturday=Xc,_.timeSaturdays=Qc,_.timeMonth=Zc,_.timeMonths=Jc,_.timeYear=eh,_.timeYears=th,_.utcMinute=ih,_.utcMinutes=nh,_.utcHour=rh,_.utcHours=oh,_.utcDay=ah,_.utcDays=sh,_.utcWeek=dh,_.utcWeeks=mh,_.utcSunday=dh,_.utcSundays=mh,_.utcMonday=uh,_.utcMondays=xh,_.utcTuesday=ch,_.utcTuesdays=yh,_.utcWednesday=hh,_.utcWednesdays=vh,_.utcThursday=fh,_.utcThursdays=Eh,_.utcFriday=gh,_.utcFridays=bh,_.utcSaturday=ph,_.utcSaturdays=Ch,_.utcMonth=Sh,_.utcMonths=wh,_.utcYear=Th,_.utcYears=Ph,_.timeFormatDefaultLocale=Mf,_.timeFormatLocale=Mh,_.isoFormat=Df,_.isoParse=Ff,_.now=Wi,_.timer=Ui,_.timerFlush=Yi,_.timeout=ji,_.interval=function(i,n,r){var o=new Xi,a=n;return null==n?o.restart(i,n,r):(n=+n,r=null==r?Wi():+r,o.restart(function e(t){t+=a,o.restart(e,a+=n,r),i(t)},n,r)),o},_.transition=fn,_.active=function(e,t){var i,n,r=e.__transition;if(r)for(n in t=null==t?null:t+"",r)if(1<(i=r[n]).state&&i.name===t)return new hn([[e]],Yn,t,+n);return null},_.interrupt=an,_.voronoi=function(){var r=Np,o=Hp,t=null;function i(n){return new mm(n.map(function(e,t){var i=[Math.round(r(e,t,n)/fm)*fm,Math.round(o(e,t,n)/fm)*fm];return i.index=t,i.data=e,i}),t)}return i.polygons=function(e){return i(e).polygons()},i.links=function(e){return i(e).links()},i.triangles=function(e){return i(e).triangles()},i.x=function(e){return arguments.length?(r="function"==typeof e?e:Bp(+e),i):r},i.y=function(e){return arguments.length?(o="function"==typeof e?e:Bp(+e),i):o},i.extent=function(e){return arguments.length?(t=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],i):t&&[[t[0][0],t[0][1]],[t[1][0],t[1][1]]]},i.size=function(e){return arguments.length?(t=null==e?null:[[0,0],[+e[0],+e[1]]],i):t&&[t[1][0]-t[0][0],t[1][1]-t[0][1]]},i},_.zoom=function(){var f,o,s=wm,u=Tm,r=0,a=1/0,l=-a,d=a,c=l,h=d,g=250,p=bi,m=[],t=z("start","zoom","end"),x=500,y=150;function v(e){e.on("wheel.zoom",i).on("mousedown.zoom",n).on("dblclick.zoom",k).on("touchstart.zoom",I).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",Pm)}function E(e,t){return(t=Math.max(r,Math.min(a,t)))===e.k?e:new vm(t,e.x,e.y)}function b(e,t,i){var n=t[0]-i[0]*e.k,r=t[1]-i[1]*e.k;return n===e.x&&r===e.y?e:new vm(e.k,n,r)}function C(e,t){var i=e.invertX(t[0][0])-l,n=e.invertX(t[1][0])-d,r=e.invertY(t[0][1])-c,o=e.invertY(t[1][1])-h;return e.translate(i<n?(i+n)/2:Math.min(0,i)||Math.max(0,n),r<o?(r+o)/2:Math.min(0,r)||Math.max(0,o))}function S(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,l,d){e.on("start.zoom",function(){T(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).end()}).tween("zoom",function(){var e=arguments,n=T(this,e),t=u.apply(this,e),r=d||S(t),o=Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1]),i=this.__zoom,a="function"==typeof l?l.apply(this,e):l,s=p(i.invert(r).concat(o/i.k),a.invert(r).concat(o/a.k));return function(e){if(1===e)e=a;else{var t=s(e),i=o/t[2];e=new vm(i,r[0]-t[0]*i,r[1]-t[1]*i)}n.zoom(null,e)}})}function T(e,t){for(var i,n=0,r=m.length;n<r;++n)if((i=m[n]).that===e)return i;return new P(e,t)}function P(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=u.apply(e,t)}function i(){if(s.apply(this,arguments)){var e=T(this,arguments),t=this.__zoom,i=Math.max(r,Math.min(a,t.k*Math.pow(2,-_.event.deltaY*(_.event.deltaMode?120:1)/500))),n=de(this);if(e.wheel)e.mouse[0][0]===n[0]&&e.mouse[0][1]===n[1]||(e.mouse[1]=t.invert(e.mouse[0]=n)),clearTimeout(e.wheel);else{if(t.k===i)return;e.mouse=[n,t.invert(n)],an(this),e.start()}Sm(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},y),e.zoom("mouse",C(b(E(t,i),e.mouse[0],e.mouse[1]),e.extent))}}function n(){if(!o&&s.apply(this,arguments)){var e=T(this,arguments),t=Be(_.event.view).on("mousemove.zoom",function(){Sm(),e.moved=!0,e.zoom("mouse",C(b(e.that.__zoom,e.mouse[0]=de(e.that),e.mouse[1]),e.extent))},!0).on("mouseup.zoom",function(){t.on("mousemove.zoom mouseup.zoom",null),_e(_.event.view,e.moved),Sm(),e.end()},!0),i=de(this);Ve(_.event.view),Cm(),e.mouse=[i,this.__zoom.invert(i)],an(this),e.start()}}function k(){if(s.apply(this,arguments)){var e=this.__zoom,t=de(this),i=e.invert(t),n=C(b(E(e,e.k*(_.event.shiftKey?.5:2)),t,i),u.apply(this,arguments));Sm(),0<g?Be(this).transition().duration(g).call(w,n,t):Be(this).call(v.transform,n)}}function I(){if(s.apply(this,arguments)){var e,t,i,n,r=T(this,arguments),o=_.event.changedTouches,a=o.length;for(Cm(),t=0;t<a;++t)i=o[t],n=[n=Oe(this,o,i.identifier),this.__zoom.invert(n),i.identifier],r.touch0?r.touch1||(r.touch1=n):(r.touch0=n,e=!0);if(f&&(f=clearTimeout(f),!r.touch1))return r.end(),void((n=Be(this).on("dblclick.zoom"))&&n.apply(this,arguments));e&&(f=setTimeout(function(){f=null},x),an(this),r.start())}}function R(){var e,t,i,n,r=T(this,arguments),o=_.event.changedTouches,a=o.length;for(Sm(),f=f&&clearTimeout(f),e=0;e<a;++e)t=o[e],i=Oe(this,o,t.identifier),r.touch0&&r.touch0[2]===t.identifier?r.touch0[0]=i:r.touch1&&r.touch1[2]===t.identifier&&(r.touch1[0]=i);if(t=r.that.__zoom,r.touch1){var s=r.touch0[0],l=r.touch0[1],d=r.touch1[0],u=r.touch1[1],c=(c=d[0]-s[0])*c+(c=d[1]-s[1])*c,h=(h=u[0]-l[0])*h+(h=u[1]-l[1])*h;t=E(t,Math.sqrt(c/h)),i=[(s[0]+d[0])/2,(s[1]+d[1])/2],n=[(l[0]+u[0])/2,(l[1]+u[1])/2]}else{if(!r.touch0)return;i=r.touch0[0],n=r.touch0[1]}r.zoom("touch",C(b(t,i,n),r.extent))}function M(){var e,t,i=T(this,arguments),n=_.event.changedTouches,r=n.length;for(Cm(),o&&clearTimeout(o),o=setTimeout(function(){o=null},x),e=0;e<r;++e)t=n[e],i.touch0&&i.touch0[2]===t.identifier?delete i.touch0:i.touch1&&i.touch1[2]===t.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):i.end()}return v.transform=function(e,t){var i=e.selection?e.selection():e;i.property("__zoom",Pm),e!==i?w(e,t):i.interrupt().each(function(){T(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},v.scaleBy=function(e,t){v.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)})},v.scaleTo=function(e,r){v.transform(e,function(){var e=u.apply(this,arguments),t=this.__zoom,i=S(e),n=t.invert(i);return C(b(E(t,"function"==typeof r?r.apply(this,arguments):r),i,n),e)})},v.translateBy=function(e,t,i){v.transform(e,function(){return C(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof i?i.apply(this,arguments):i),u.apply(this,arguments))})},P.prototype={start:function(){return 1==++this.active&&(this.index=m.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(m.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){ae(new ym(v,e,this.that.__zoom),t.apply,t,[e,this.that,this.args])}},v.filter=function(e){return arguments.length?(s="function"==typeof e?e:xm(!!e),v):s},v.extent=function(e){return arguments.length?(u="function"==typeof e?e:xm([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),v):u},v.scaleExtent=function(e){return arguments.length?(r=+e[0],a=+e[1],v):[r,a]},v.translateExtent=function(e){return arguments.length?(l=+e[0][0],d=+e[1][0],c=+e[0][1],h=+e[1][1],v):[[l,c],[d,h]]},v.duration=function(e){return arguments.length?(g=+e,v):g},v.interpolate=function(e){return arguments.length?(p=e,v):p},v.on=function(){var e=t.on.apply(t,arguments);return e===t?v:e},v},_.zoomTransform=bm,_.zoomIdentity=Em,Object.defineProperty(_,"__esModule",{value:!0})}),Ext.define("Ext.d3.ComponentBase",{extend:"Ext.Widget",onElementResize:function(e,t){this.handleResize(t)},destroy:function(){this.hasListeners.destroy&&this.fireEvent("destroy",this),this.callParent()}}),Ext.namespace("Ext.d3.lib").d3=!0,Ext.define("Ext.d3.Component",{extend:"Ext.d3.ComponentBase",requires:["Ext.d3.lib.d3"],isD3:!0,config:{store:null,componentCls:"",interactions:[],transitions:{none:{name:void 0,duration:0,ease:Ext.identityFn}},touchAction:{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1}},baseCls:Ext.baseCSSPrefix+"d3",defaultBindProperty:"store",isInitializing:!0,refreshDelay:100,resizeDelay:250,resizeTimerId:0,size:null,d3Components:null,constructor:function(e){this.d3Components={},this.callParent(arguments),this.isInitializing=!1,this.on("resize","onElementResize",this)},destroy:function(){this.resizeTimerId&&clearTimeout(this.resizeTimerId),this.un("resize","onElementResize",this),this.setInteractions(),this.callParent()},updateComponentCls:function(e,t){var i=this.baseCls,n=this.element;e&&Ext.isString(e)&&(n.addCls(e,i),t&&n.removeCls(t,i))},register:function(e){var t=this.d3Components,i=e.getId();void 0===i&&Ext.raise("Attempting to register a component with no ID."),i in t&&Ext.raise('Component with ID "'+i+'" is already registered.'),t[i]=e},unregister:function(e){delete this.d3Components[e.getId()]},applyInteractions:function(e,t){t||((t=[]).map={});var i,n,r,o,a=[],s=t.map;for(a.map={},i=0,n=(e=Ext.Array.from(e,!0)).length;i<n;i++)(r=e[i])&&(r.isInteraction?o=r.getId():(o=r.id,r.element=this.element),(r=Ext.factory(r,null,s[o],"d3.interaction"))&&(r.setComponent(this),this.addInteraction(r),a.push(r),a.map[r.getId()]=r));for(i in s)a.map[i]||(r=s[i]).destroy();return a},applyTransitions:function(e){var t,i,n,r={};for(t in e)!0===(i=e[t])&&Ext.raise("'true' is not a valid transition value (should be an object or 'false')."),r[t]=i=Ext.apply({},i||e.none),"string"==typeof(n=i.ease)&&(i.ease=d3["ease"+n.charAt(0).toUpperCase()+n.substr(1)]),"name"in i||(i.name=this.getId()+"-"+t);return r},createTransition:function(e,t){var i=this.getTransitions()[e];return i||Ext.raise('No transition named "'+e+'"'),(t=t||d3).transition(i.name).ease(i.ease).duration(i.duration)},panZoom:null,onPanZoom:Ext.emptyFn,getContentRect:Ext.emptyFn,getViewportRect:Ext.emptyFn,addInteraction:function(e){e.isPanZoom&&(e.setContentRect(this.getContentRect.bind(this)),e.setViewportRect(this.getViewportRect.bind(this)),(this.panZoom=e).on("panzoom",this.onPanZoom,this)),e.on("destroy",this.onInteractionDestroy,this)},removeInteraction:function(e){e.isPanZoom&&(e.setContentRect(null),e.setViewportRect(null),this.panZoom=null,e.un("panzoom",this.onPanZoom,this))},onInteractionDestroy:function(e){e.un("destroy",this.onInteractionDestroy,this),this.removeInteraction(e)},applyStore:function(e){return e&&Ext.StoreManager.lookup(e)},updateStore:function(e,t){var i,n={datachanged:"onDataChange",buffer:this.refreshDelay,scope:this,order:"after"};t&&(t.un(n),t.getAutoDestroy()&&t.destroy()),e&&(e.on(n),e.isTreeStore&&((i=e.getRoot()).isExpanded()||(e.suspendEvent("datachanged"),i.on({expand:function(){e.resumeEvent("datachanged"),e.fireEvent("datachanged",e)},single:!0})))),this.onDataChange(e)},onDataChange:function(e){this.isInitializing||this.processDataChange(e)},onDataUpdate:function(e,t,i,n,r){this.isInitializing||this.processDataUpdate(e,t,i,n,r)},onDataLoad:function(e,t,i,n){this.processDataLoad(e,t,i,n)},processDataChange:Ext.emptyFn,processDataUpdate:Ext.emptyFn,processDataLoad:Ext.emptyFn,maskEl:null,showMask:function(e){this.maskEl?(this.maskEl.dom.firstChild.textContent=e,this.maskEl.setStyle("display","flex")):this.maskEl=this.element.createChild({style:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,bottom:0,right:0,background:"rgba(0,0,0,0.5)"},children:[{html:e,style:{background:"rgba(0,0,0,0.8)",color:"white",fontWeight:"bold",borderRadius:"10px",padding:"10px"}}]})},hideMask:function(){this.maskEl&&this.maskEl.setStyle("display","none")},handleResize:function(e,t){var i=this,n=i.element;(e=e||n&&n.getSize())&&e.width&&e.height&&(clearTimeout(i.resizeTimerId),t?(i.resizeTimerId=0,i.resizeHandler(e),i.panZoom&&i.panZoom.updateIndicator&&i.panZoom.updateIndicator(),i.size=e):i.resizeTimerId=Ext.defer(i.handleResize,i.resizeDelay,i,[e,!0]))},resizeHandler:Ext.emptyFn,toLocalXY:function(e,t){var i=e.getXY(),n=t?t.getXY():this.element.getXY();return[i[0]-n[0],i[1]-n[1]]}}),Ext.define("Ext.d3.svg.Svg",{extend:"Ext.d3.Component",xtype:["d3-svg","d3"],isSvg:!0,config:{padding:{top:0,left:0,right:0,bottom:0},clipScene:!1},defaultCls:{wrapper:Ext.baseCSSPrefix+"d3-wrapper",scene:Ext.baseCSSPrefix+"d3-scene",hidden:Ext.baseCSSPrefix+"d3-hidden",invisible:Ext.baseCSSPrefix+"d3-invisible"},defs:null,wrapper:null,wrapperClipRect:null,wrapperClipId:"wrapper-clip",scene:null,sceneRect:null,svg:null,onClassExtended:function(e,t){Ext.applyIf(t.defaultCls,e.superclass.defaultCls)},applyPadding:function(e,t){return Ext.isObject(e)?t?Ext.apply(t,e):e:Ext.util.Format.parseBox(e)},getSvg:function(){return this.svg||(this.svg=d3.select(this.element.dom).append("svg").attr("version","1.1"))},resizeHandler:function(e){var t,i=this,n=i.getSvg(),r=i.getPadding(),o=i.getInherited().rtl,a=i.getWrapper(),s=i.getWrapperClipRect(),l=i.getScene(),d=e&&e.width,u=e&&e.height;d&&u&&(n.attr("width",d).attr("height",u),(t=i.sceneRect||(i.sceneRect={})).x=o?r.right:r.left,t.y=r.top,t.width=d-r.left-r.right,t.height=u-r.top-r.bottom,a.attr("transform","translate("+t.x+","+t.y+")"),s.attr("width",t.width).attr("height",t.height),i.onSceneResize(l,t),i.fireEvent("sceneresize",i,l,t))},updatePadding:function(){this.isConfiguring||this.resizeHandler(this.getSize())},getSceneRect:function(){return this.sceneRect},getContentRect:function(){return this.scene&&this.scene.node().getBBox()},getViewportRect:function(){return this.sceneRect},scaleRe:/scale\((.+),(.+)\)/i,alignContentTransitionName:null,alignMap:{c:"cc",t:"ct",b:"cb",l:"lc",r:"rc",lc:"lc",cl:"lc",rc:"rc",cr:"rc",ct:"ct",tc:"ct",cb:"cb",bc:"cb",rt:"rt",tr:"rt",rb:"rb",br:"rb",lt:"lt",tl:"lt",lb:"lb",bl:"lb"},alignContent:function(e,t){var i,n,r,o,a,s,l,d,u=this,c="",h=1,f=1,g=u.getSceneRect(),p=u.getContentRect(),m=u.scene.interrupt(u.alignContentTransitionName);if(g&&p){switch((o=m.attr("transform"))&&(a=o.match(u.scaleRe))&&(c=a[0],h=a[1],f=a[2]),(s=u.alignMap[e])||Ext.raise("Invalid content align options."),l=s[0],d=s[1],l){case"c":i=g.width/2-(p.x+p.width/2)*h;break;case"l":i=-p.x*h;break;case"r":i=g.width-(p.x+p.width)*h}switch(d){case"c":n=g.height/2-(p.y+p.height/2)*f;break;case"t":n=-p.y*f;break;case"b":n=g.height-(p.y+p.height)*f}}Ext.isNumber(i)&&Ext.isNumber(n)&&(r=[i,n],t&&("string"==typeof t&&(t=u.createTransition(t)),u.alignContentTransitionName=t._name,m=m.transition(t)),m.attr("transform","translate("+r+")"+c),u.panZoom&&u.panZoom.setPanZoomSilently(r))},onSceneResize:Ext.emptyFn,getScene:function(){var e=this.getWrapper(),t=this.scene;return t||(this.scene=t=e.append("g").classed(this.defaultCls.scene,!0),this.setupScene(t),this.fireEvent("scenesetup",this,t)),t},clearScene:function(){var e=this.scene,t=this.defs;if(e)for((e=e.node()).removeAttribute("transform");e.firstChild;)e.removeChild(e.firstChild);if(t)for(t=t.node();t.firstChild;)t.removeChild(t.firstChild)},showScene:function(){var e=this.scene;e&&e.classed(this.defaultCls.invisible,!1)},hideScene:function(){var e=this.scene;e&&e.classed(this.defaultCls.invisible,!0)},setupScene:Ext.emptyFn,onPanZoom:function(e,t,i){this.scene.attr("transform","translate("+i+")scale("+t+")")},removeInteraction:function(e){e.isPanZoom&&this.scene.attr("transform",null),this.callParent([e])},getWrapper:function(){var e=this.wrapper;return e=e||(this.wrapper=this.getSvg().append("g").classed(this.defaultCls.wrapper,!0))},getWrapperClipRect:function(){var e=this.wrapperClipRect;return e=e||(this.wrapperClipRect=this.getDefs().append("clipPath").attr("id",this.wrapperClipId).append("rect").attr("fill","white"))},updateClipScene:function(e){this.getWrapper().attr("clip-path",e?"url(#"+this.wrapperClipId+")":"")},getDefs:function(){var e=this.defs;return e=e||(this.defs=this.getSvg().append("defs"))},destroy:function(){this.getSvg().remove(),this.callParent()}}),Ext.define("Ext.d3.Helpers",{singleton:!0,makeScale:function(e){var t,i,n=e.type;return n||Ext.raise("The type of scale is not specified."),t=n.charAt(0).toUpperCase()+n.substr(1),i=this.make("scale"+t,e),"nice"in e&&i.nice&&i.nice(this.eval(e.nice)),i._type=n,i},makeAxis:function(e){var t,i,n=e.orient;return n||Ext.raise('The position of the axis ("orient" property) is not specified.'),t=n.charAt(0).toUpperCase()+n.substr(1),(i=this.make("axis"+t,e))._type=n,i},make:function(e,t){return this.configure(d3[e](),t)},configure:function(e,t){var i,n,r;for(i in t)(n="$"===i.charAt(0))&&(i=i.substr(1)),"function"==typeof e[i]&&(n?(r=t["$"+i].map(function(e){return"string"!=typeof e||e.search("d3.")||(e=new Function("return "+e)()),e}),e[i].apply(e,r),n=!1):(r=this.eval(t[i]),e[i](r)));return e},eval:function(e){return"string"!=typeof e||e.search("d3.")||(e=new Function("return "+e)()),e},isBBoxable:function(e){return!Ext.isFirefox||!e||(e instanceof Element&&(e=d3.select(e)),document.contains(e.node())&&"none"!==e.style("display")&&"hidden"!==e.attr("visibility"))},getBBox:function(e){if("none"!==e.style("display"))return e.node().getBBox()},setDominantBaseline:function(e,t){e.setAttribute("dominant-baseline",t),this.fakeDominantBaseline(e,t),Ext.isSafari&&"text-after-edge"===t&&e.setAttribute("baseline-shift","super")},noDominantBaseline:function(){return Ext.isIE||Ext.isEdge},fakeDominantBaselineMap:{alphabetic:"0em",ideographic:"-.24em",hanging:".72em",mathematical:".46em",middle:".22em",central:".33em","text-after-edge":"-.26em","text-before-edge":".91em"},fakeDominantBaseline:function(e,t,i){var n;(i||this.noDominantBaseline())&&(n=this.fakeDominantBaselineMap[t])&&e.setAttribute("dy",n)},fakeDominantBaselines:function(e){var t,i,n,r,o,a,s=this.fakeDominantBaselineMap;if(this.noDominantBaseline())if(1<arguments.length){if(t=e,i=arguments[1],r=document.querySelectorAll(t),n=s[i])for(o=0,a=r.length;o<a;o++)r[o].setAttribute("dy",n)}else for(t in e)if(n=s[i=e[t]])for(o=0,a=(r=document.querySelectorAll(t)).length;o<a;o++)r[o].setAttribute("dy",n)},unitMath:function(e,t,i){var n=parseFloat(e),r=e.substr(n.toString().length);switch(t){case"*":n*=i;break;case"+":n+=i;break;case"/":n/=i;break;case"-":n-=i}return n.toString()+r},getLinkId:function(e){var t=e.search("#");return e.substr(t,e.length-t-1)},alignRect:function(e,t,i,n,r){var o,a,s;if(n&&i){switch(e){case"center":o=n.width/2-(i.x+i.width/2);break;case"left":o=-i.x;break;case"right":o=n.width-(i.x+i.width);break;default:Ext.raise("Invalid value. Valid `x` values are: center, left, right.")}switch(t){case"center":a=n.height/2-(i.y+i.height/2);break;case"top":a=-i.y;break;case"bottom":a=n.height-(i.y+i.height);break;default:Ext.raise("Invalid value. Valid `y` values are: center, top, bottom.")}}Ext.isNumber(o)&&Ext.isNumber(a)&&(s=[o+=n.x,a+=n.y],r.attr("transform","translate("+s+")"))},commasRe:/,+/g,getTransformComponent:function(e,t){var i,n,r,o,a=e.indexOf(t);if(0<=a&&(i=e.indexOf("(",a)+1,n=e.indexOf(")",i),0<=i&&0<=n&&(r=(r=(r=e.substr(i,n-i)).replace(" ",",")).replace(this.commasRe,","))),r)return 1<(o=r.split(",")).length?[parseFloat(o[0]),parseFloat(o[1])]:[parseFloat(o[0])]},parseTransform:function(e){var t=this.getTransformComponent(e,"scale"),i=this.getTransformComponent(e,"rotate"),n=this.getTransformComponent(e,"translate");return t?t.length<2&&t.push(t[0]):t=[0,0],i=i?i[0]:0,n?n.length<2&&n.push(0):n=[0,0],{scale:t,rotate:i,translate:n}}}),Ext.define("Ext.d3.mixin.Detached",{extend:"Ext.Mixin",detached:null,constructor:function(e){this.detached=d3.select("body").append("svg").remove().attr("version","1.1")},getDetached:function(){return this.detached},isDetached:function(e){return e&&e.node().parentElement===this.detached.node()},attach:function(e,t){e instanceof d3.selection&&(e=e.node()),e instanceof SVGElement||Ext.raise("The `parent` must either be a D3 selection or an SVG element."),t instanceof d3.selection?e.appendChild(t.node()):t instanceof SVGElement?e.appendChild(t):Ext.raise("The `child` must either be a D3 selection or an SVG element.")},detach:function(e){this.attach(this.detached,e)},destroy:function(){var e=this.detached.node();e&&e.parentNode&&e.parentNode.removeChild(e),this.callParent()}}),Ext.define("Ext.d3.axis.Axis",{requires:["Ext.d3.Helpers"],mixins:{observable:"Ext.mixin.Observable",detached:"Ext.d3.mixin.Detached"},config:{axis:{orient:"top"},scale:{type:"linear"},title:null,parent:null,component:null},defaultCls:{self:Ext.baseCSSPrefix+"d3-axis",title:Ext.baseCSSPrefix+"d3-axis-title"},title:null,group:null,domain:null,constructor:function(e){var t,i=this;t="id"in(e=e||{})?e.id:"id"in i.config?i.config.id:i.getId(),i.setId(t),i.mixins.detached.constructor.call(i,e),i.group=i.getDetached().append("g").classed(i.defaultCls.self,!0).attr("id",i.getId()),i.mixins.observable.constructor.call(i,e)},getGroup:function(){return this.group},getBox:function(){return this.group.node().getBBox()},applyScale:function(e,t){var i=this.getAxis();return e&&(Ext.isFunction(e)||(e=Ext.d3.Helpers.makeScale(e)),i&&i.scale(e)),e||t},applyAxis:function(e,t){var i=this.getScale();return e&&(Ext.isFunction(e)||(e=Ext.d3.Helpers.makeAxis(e)),i&&e.scale(i)),e||t},updateParent:function(e){e?(this.attach(e,this.group),this.render()):this.detach(this.group)},updateTitle:function(e){var t=this;e?(t.title?t.isDetached(t.title)&&t.attach(t.group,t.title):t.title=t.group.append("text").classed(t.defaultCls.title,!0),t.title.text(e.text||""),t.title.attr(e.attr),t.positionTitle(e)):t.title&&t.detach(t.title)},getAxisLine:function(){var e=this.domain;return(e=e||this.group.select("path.domain")).empty()?null:this.domain=e},getTicksBBox:function(){var e,t,i,n,r,o=this.group;return(n=o.selectAll(".tick")).size()&&(t=o.append("g"),i=t.node(),e=o.node(),n.each(function(){i.appendChild(this)}),r=i.getBBox(),n.each(function(){e.appendChild(this)}),t.remove()),r},positionTitle:function(e){var t,i,n,r,o,a,s=this.title,l=this.getAxis(),d=this.getAxisLine(),u=l._type,c="left"===u||"right"===u,h=Ext.d3.Helpers,f="text-before-edge",g="text-after-edge",p=0,m=0;if(d&&s&&Ext.d3.Helpers.isBBoxable(this.getParent())){switch(e=e||this.getTitle(),o=d.node().getBBox(),a=this.getTicksBBox(),t=e.alignment||"middle",r="outside"===(e.position||"outside"),i=e.padding||"0.5em",t){case"start":case"left":n="start",c?m=o.y+o.height:p=o.x;break;case"end":case"right":n="end",c?m=o.y:p=o.x+o.width;break;case"middle":case"center":n="middle",c?m=o.y+o.height/2:p=o.x+o.width/2}switch(u){case"top":r&&(s.attr("y",a?a.y:0),i=h.unitMath(i,"*",-1)),h.setDominantBaseline(s.node(),r?g:f),s.attr("text-anchor",n).attr("x",p);break;case"bottom":r?s.attr("y",a?a.y+a.height:0):i=h.unitMath(i,"*",-1),h.setDominantBaseline(s.node(),r?f:g),s.attr("text-anchor",n).attr("x",p);break;case"left":r&&(p=a?a.x:0,i=h.unitMath(i,"*",-1)),h.setDominantBaseline(s.node(),r?g:f),s.attr("text-anchor",n).attr("transform","translate("+p+", "+m+")rotate(-90)");break;case"right":r?p=a?a.x+a.width:0:i=h.unitMath(i,"*",-1),h.setDominantBaseline(s.node(),r?f:g),s.attr("text-anchor",n).attr("transform","translate("+p+", "+m+")rotate(-90)")}s.attr("dy",i)}},render:function(e){var t=this.getAxis(),i=t._type,n=this.getScale();n.domain().length&&n.range().length&&(e?this.group.transition(e).call(t):this.group.call(t),this.group.attr("data-orient",i),this.positionTitle())},destroy:function(){this.mixins.detached.destroy.call(this)}}),Ext.define("Ext.d3.axis.Data",{extend:"Ext.d3.axis.Axis",config:{field:null,step:null},applyAxis:function(e,t){var i=this.getComponent().getInherited().rtl;return e&&i&&("left"===(e=Ext.Object.chain(e)).orient?e.orient="right":"right"===e.orient&&(e.orient="left")),this.callParent([e,t])}}),Ext.define("Ext.d3.axis.Color",{requires:["Ext.d3.Helpers"],mixins:{observable:"Ext.mixin.Observable"},isColorAxis:!0,config:{scale:{merge:function(e,t){return e&&e.type&&t&&t.type===e.type&&(e=Ext.Object.merge(t,e)),e},$value:{type:"linear",range:["white","maroon"]}},field:null,processor:null,minimum:null,maximum:null},constructor:function(e){this.mixins.observable.constructor.call(this,e)},applyScale:function(e,t){return e&&(Ext.isFunction(e)||(this.isUserSetDomain=!!e.domain,e=Ext.d3.Helpers.makeScale(e))),e||t},updateScale:function(e){this.scale=e},updateField:function(e){this.field=e},updateProcessor:function(e){this.processor=e},getColor:function(e){var t=this.scale,i=this.field,n=this.processor;return n?n(this,t,e,i):e&&e.data&&e.data.isModel&&i?t(e.data.data[i]):t(e)},updateMinimum:function(){this.setDomain()},updateMaximum:function(){this.setDomain()},findDataDomain:function(e){var t,i=this.field,n=d3.min(e,function(e){return e.data[i]}),r=d3.max(e,function(e){return e.data[i]});return i&&(t=Ext.isNumber(n)&&Ext.isNumber(r)?[n,r]:e.map(function(e){return e.data[i]}).sort().filter(function(e,t,i){return!t||e!==i[t-1]})),t},setDomainFromData:function(e){this.isUserSetDomain||this.setDomain(this.findDataDomain(e))},setDomain:function(e){var t,i,n,r,o=this.getScale(),a=o.range().length,s=this.getMinimum(),l=this.getMaximum();if(o&&!this.isUserSetDomain){if(e=(e=e||o.domain()).slice(),Ext.isNumber(s)&&(e[0]=s),Ext.isNumber(l)&&(e[e.length-1]=l),o.ticks&&e.length!==a){for(i=e[0],t=((n=e[e.length-1])-i)/(a-1),e=[],r=0;r<a-1;r++)e.push(i+r*t);e.push(n)}o.domain(e),this.fireEvent("scalechange",this,o)}}}),Ext.define("Ext.d3.legend.Legend",{mixins:{observable:"Ext.mixin.Observable",detached:"Ext.d3.mixin.Detached"},config:{docked:"bottom",padding:30,hidden:!1,component:null},defaultCls:{self:Ext.baseCSSPrefix+"d3-legend",item:Ext.baseCSSPrefix+"d3-legend-item",label:Ext.baseCSSPrefix+"d3-legend-label",hidden:Ext.baseCSSPrefix+"d3-hidden"},constructor:function(e){this.mixins.detached.constructor.call(this,e),this.group=this.getDetached().append("g").classed(this.defaultCls.self,!0),this.mixins.observable.constructor.call(this,e)},getGroup:function(){return this.group},applyDocked:function(e){return this.getComponent().getInherited().rtl&&("left"===e?e="right":"right"===e&&(e="left")),e},getBox:function(){var e=this.getHidden(),t=this.getDocked(),i=this.getPadding(),n=this.group.node().getBBox(),r=this.box||(this.box={});if(e)return{x:0,y:0,width:0,height:0};switch(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height,t){case"right":r.x-=i;case"left":r.width+=i;break;case"bottom":r.y-=i;case"top":r.height+=i}return r},updateHidden:function(e){this[e?"hide":"show"]()},show:function(){this.group.classed(this.defaultCls.hidden,!1),this.setHidden(!1),this.fireEvent("show",this)},hide:function(){this.group.classed(this.defaultCls.hidden,!0),this.setHidden(!0),this.fireEvent("hide",this)},updateComponent:function(e,t){t&&this.detach(this.group),e&&this.attach(e.getScene(),this.group)},destroy:function(){this.mixins.detached.destroy.call(this)}}),Ext.define("Ext.d3.legend.Color",{extend:"Ext.d3.legend.Legend",requires:["Ext.d3.Helpers"],config:{axis:null,items:{count:5,slice:null,reverse:!1,size:{x:30,y:30}}},getScale:function(){return this.getAxis().getScale()},updateAxis:function(e,t){t&&t.un("scalechange",this.onScaleChange,this),e&&e.on("scalechange",this.onScaleChange,this)},onScaleChange:function(e,t){this.renderItems()},updateItems:function(){this.isConfiguring||this.renderItems()},renderItems:function(){var e,t,i=this.getScale(),n=this.getItems(),r=this.getRenderedItems();0<n.count&&i.ticks?(e=i.ticks(n.count),n.slice&&(e=e.slice.apply(e,n.slice)),n.reverse&&(e=e.reverse())):e=i.domain(),e&&(t=r.data(e),this.onAddItems(t.enter()),this.onUpdateItems(t),this.onRemoveItems(t.exit()))},getRenderedItems:function(){return this.group.selectAll("."+this.defaultCls.item)},onAddItems:function(e){(e=e.append("g").classed(this.defaultCls.item,!0)).append("rect"),e.append("text"),this.onUpdateItems(e)},onUpdateItems:function(e){var t,i,n=this.getItems(),r=this.getDocked(),o=this.getScale();switch(t=e.select("rect").attr("width",n.size.x).attr("height",n.size.y).style("fill",o),i=e.select("text").each(function(){Ext.d3.Helpers.setDominantBaseline(this,"middle")}).attr("text-anchor","middle").text(String),r){case"left":case"right":t.attr("transform",function(e,t){return"translate(0,"+t*n.size.y+")"}),i.attr("x",n.size.x+10).attr("y",function(e,t){return(t+.5)*n.size.y}).attr("dx",10);break;case"top":case"bottom":t.attr("transform",function(e,t){return"translate("+t*n.size.x+",0)"}),i.attr("x",function(e,t){return(t+.5)*n.size.x}).attr("y",n.size.y).attr("dy","1em")}},onRemoveItems:function(e){e.remove()}}),Ext.define("Ext.d3.mixin.ToolTip",{extend:"Ext.Mixin",mixinConfig:{id:"d3tooltip",before:{destroy:"destroyTooltip"}},requires:["Ext.tip.ToolTip"],config:{tooltip:null},applyTooltip:function(e,t){return Ext.destroy(t),e&&(e=new Ext.tip.ToolTip(Ext.merge({renderer:Ext.emptyFn,target:this.el,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,trackMouse:!0,showOnTap:!0},e))).on("hovertarget","onTargetHover",this),e},onTargetHover:function(e,t){t.dom&&Ext.callback(e.renderer,e.scope,[this,e,t.dom.__data__,t],0,this)},destroyTooltip:function(){this.setTooltip(null)}}),Ext.define("Ext.d3.HeatMap",{extend:"Ext.d3.svg.Svg",xtype:"d3-heatmap",requires:["Ext.d3.axis.Data","Ext.d3.axis.Color","Ext.d3.legend.Color","Ext.d3.Helpers"],mixins:["Ext.d3.mixin.ToolTip"],config:{componentCls:"heatmap",xAxis:{axis:{orient:"bottom"},scale:{type:"linear"}},yAxis:{axis:{orient:"left"},scale:{type:"linear"}},colorAxis:{},legend:!1,tiles:null,labels:!0,transitions:{layout:{duration:500,ease:"cubicInOut",delay:10}}},data:null,tiles:null,tilesGroup:null,tilesRect:null,legendRect:null,defaultCls:{tiles:Ext.baseCSSPrefix+"d3-tiles",tile:Ext.baseCSSPrefix+"d3-tile"},constructor:function(e){this.callParent([e]),this.mixins.d3tooltip.constructor.call(this,e)},applyTooltip:function(e,t){return e&&(e.delegate="g."+this.defaultCls.tile),this.mixins.d3tooltip.applyTooltip.call(this,e,t)},updateTooltip:null,applyAxis:function(e,t){return(e=e&&new Ext.d3.axis.Data(Ext.merge({parent:this.getScene(),component:this},e)))||t},updateAxis:function(e,t){this.isConfiguring||(this.processData(),this.renderScene())},applyXAxis:function(e,t){return this.applyAxis(e,t)},updateXAxis:function(){this.updateAxis()},applyYAxis:function(e,t){return this.applyAxis(e,t)},updateYAxis:function(){this.updateAxis()},applyLegend:function(e,t){return e&&(e.axis=this.getColorAxis(),e=new Ext.d3.legend.Color(Ext.merge({component:this},e))),e||t},updateLegend:function(e,t){var i={show:"onLegendVisibility",hide:"onLegendVisibility",scope:this};t&&t.un(i),e&&e.on(i),this.isConfiguring||this.performLayout()},onLegendVisibility:function(){this.performLayout()},applyColorAxis:function(e,t){return(e=e&&new Ext.d3.axis.Color(e))||t},updateColorAxis:function(){this.isConfiguring||(this.processData(),this.renderScene())},getStoreData:function(e){return e?e.getData().items:[]},processData:function(e){var t=this.data=this.getStoreData(e||this.getStore()),i=this.getXAxis(),n=this.getYAxis(),r=this.getColorAxis(),o=i.getScale(),a=n.getScale(),s=i.getField(),l=n.getField(),d=i.getStep(),u=n.getStep();this.setDomainFromData(t,s,o,d),this.setDomainFromData(t,l,a,u),r.setDomainFromData(t)},setDomainFromData:function(e,t,i,n){var r,o;i.bandwidth?(o=e.map(function(e){return e.data[t]}).filter(function(e,t,i){return i.indexOf(e)===t}),i.domain(o)):(r=d3.extent(e,function(e){return e.data[t]}),i.domain([+r[0],+r[1]+n]))},isDataProcessed:!1,processDataChange:function(e){this.processData(e),this.isDataProcessed=!0,this.isConfiguring||this.performLayout()},onSceneResize:function(e,t){this.callParent([e,t]),this.isDataProcessed||this.processData(),this.isOldSize=!1,this.performLayout(t)},performLayout:function(e){if(e=e||this.getSceneRect()){this.showScene();var t,i,n,r,o,a,s=this.getLegend(),l=this.getXAxis(),d=this.getYAxis(),u=l.getGroup(),c=d.getGroup(),h=l.getAxis(),f=d.getAxis(),g=l.getScale(),p=d.getScale(),m=this.getInherited().rtl;if(o={x:0,y:0,width:e.width,height:e.height},this.tilesRect=r=Ext.Object.chain(o),s){switch(i=s.getBox(),n=s.getDocked(),this.legendRect=t=Ext.Object.chain(o),n){case"right":r.width-=i.width,t.width=i.width,t.x=e.width-i.width;break;case"left":r.width-=i.width,t.width=i.width,r.x+=i.width;break;case"bottom":r.height-=i.height,t.height=i.height,t.y=e.height-i.height;break;case"top":r.height-=i.height,t.height=i.height,r.y+=i.height}Ext.d3.Helpers.alignRect("center","center",i,t,s.getGroup())}a=[r.x,r.x+r.width],m&&a.reverse(),g.range(a),p.range([r.y+r.height,r.y]),u.attr("transform","translate(0,"+("top"===h._type?r.y:r.y+r.height)+")"),c.attr("transform","translate("+("left"===f._type?r.x:r.x+r.width)+",0)"),this.renderScene()}},setupScene:function(e){this.callParent([e]),this.tilesGroup=e.append("g").classed(this.defaultCls.tiles,!0),this.hideScene()},getRenderedTiles:function(){return this.tilesGroup.selectAll("."+this.defaultCls.tile)},renderScene:function(e){var t,i,n=this,r=n.getXAxis(),o=n.getYAxis(),a=r.getField(),s=o.getField(),l=n.hasFirstRender&&n.isOldSize?"layout":"none";e=e||n.data||n.getStoreData(n.getStore()),t=n.getRenderedTiles().data(e,function(e){var t=e.data[a],i=e.data[s];return t instanceof Date&&(t=+t),i instanceof Date&&(i=+i),String(t)+"-"+String(i)}),n.layoutTransition=n.createTransition(l).on("end",function(){n.layoutTransition=null}),i=n.onAddTiles(t.enter()),n.onUpdateTiles(t.merge(i)),n.onRemoveTiles(t.exit()),r.render(),o.render(),n.hasFirstRender=!0,n.isOldSize=!0},onAddTiles:function(e){var t,i,n,r,o=this.getTiles(),a=this.getLabels();if(e.empty())return e;if(i=(t=e.append("g").classed(this.defaultCls.tile,!0)).append("rect").attr("fill","white"),o){for(r in o.attr)i.attr(r,o.attr[r]);if(t.classed(o.cls,!!o.cls),a){for(r in n=t.append("text").attr("opacity",0),a.attr)n.attr(r,a.attr[r]);n.classed(a.cls,!!a.cls),Ext.d3.Helpers.noDominantBaseline()&&n.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,"central",!0)})}}return t},onUpdateTiles:function(e){function t(e,t){return t*m}var i=this.getInherited().rtl,n=this.getXAxis(),r=this.getYAxis(),o=this.getColorAxis(),a=n.getScale(),s=r.getScale(),l=o.getScale(),d=n.getStep(),u=r.getStep(),c=a.bandwidth?a.bandwidth():a(d)-a(0),h=s.bandwidth?s.bandwidth():s(u)-s(0),f=n.getField(),g=r.getField(),p=o.getField(),m=this.hasFirstRender&&this.isOldSize&&this.getTransitions().layout.delay||0,x=this.layoutTransition;e.select("rect").transition(x).delay(t).attr("x",function(e){var t=a(e.data[f]);return i&&!a.bandwidth&&(t+=c),t+.5}).attr("y",function(e){var t=s(e.data[g]);return s.bandwidth||(t+=h),t+.5}).attrTween("width",function(){var t=+this.getAttribute("width"),i=Math.abs(c);return function(e){return Math.max(t*(1-e)+i*e,0)}}).attrTween("height",function(){var t=+this.getAttribute("height"),i=Math.abs(h);return function(e){return Math.max(t*(1-e)+i*e,0)}}).style("fill",function(e){return l(e.data[p])}),e.select("text").text(function(e){return e.data[p]}).transition(x).delay(t).attr("opacity",1).attr("x",function(e){return a(e.data[f])+c/2}).attr("y",function(e){return s(e.data[g])+h/2}).on("end",function(){this.removeAttribute("opacity")})},onRemoveTiles:function(e){e.remove()},destroy:function(){var e=this.getXAxis(),t=this.getYAxis(),i=this.getColorAxis(),n=this.getLegend();Ext.destroy(e,t,i,n),this.callParent()}}),Ext.define("Ext.d3.canvas.HiDPI",{singleton:!0,relFontSizeRegEx:/(^[0-9])*(\d+(?:\.\d+)?)(px|%|em|pt)/,absFontSizeRegEx:/(xx-small)|(x-small)|(small)|(medium)|(large)|(x-large)|(xx-large)/,fillStroke:function(e,l,t){var i,n=e.font,r=n!==e.$oldFont,o=e.shadowOffsetX,a=e.shadowOffsetY,s=e.lineDashOffset,d=e.lineWidth;r?(i=(i=n.replace(this.relFontSizeRegEx,function(e,t,i){return parseFloat(i)*l})).replace(this.absFontSizeRegEx,function(e,t,i,n,r,o,a,s){return t?9*l+"px":i?10*l+"px":n?13*l+"px":r?16*l+"px":o?18*l+"px":a?24*l+"px":s?32*l+"px":void 0}),e.font=i,e.$oldFont=n,e.$scaledFont=i):e.font=e.$scaledFont,e.shadowOffsetX=o*l,e.shadowOffsetY=a*l,e.lineDashOffset=s*l,e.lineWidth=d*l,3<arguments.length?e[t].apply(e,Array.prototype.slice.call(arguments,3)):e[t](),e.font=n,e.shadowOffsetX=o,e.shadowOffsetY=a,e.lineDashOffset=s,e.lineWidth=d},getOverrides:function(){var r=this,u=r.getDevicePixelRatio();return this.overrides||(this.overrides={fill:function(){r.fillStroke(this,u,"$fill")},stroke:function(){r.fillStroke(this,u,"$stroke")},moveTo:function(e,t){this.$moveTo(e*u,t*u)},lineTo:function(e,t){this.$lineTo(e*u,t*u)},quadraticCurveTo:function(e,t,i,n){this.$quadraticCurveTo(e*u,t*u,i*u,n*u)},bezierCurveTo:function(e,t,i,n,r,o){this.$bezierCurveTo(e*u,t*u,i*u,n*u,r*u,o*u)},arcTo:function(e,t,i,n,r){this.$arcTo(e*u,t*u,i*u,n*u,r*u)},arc:function(e,t,i,n,r,o){this.$arc(e*u,t*u,i*u,n,r,o)},rect:function(e,t,i,n){this.$rect(e*u,t*u,i*u,n*u)},clearRect:function(e,t,i,n){this.$clearRect(e*u,t*u,i*u,n*u)},fillRect:function(e,t,i,n){r.fillStroke(this,u,"$fillRect",e*u,t*u,i*u,n*u)},strokeRect:function(e,t,i,n){r.fillStroke(this,u,"$strokeRect",e*u,t*u,i*u,n*u)},translate:function(e,t){this.$translate(e*u,t*u)},transform:function(e,t,i,n,r,o){this.$transform(e,t,i,n,r*u,o*u)},setTransform:function(e,t,i,n,r,o){this.$setTransform(e,t,i,n,r*u,o*u)},isPointInPath:function(e,t,i,n){var r=arguments.length;return 3<r?this.$isPointInPath(e,t*u,i*u,n):2<r?this.$isPointInPath(e*u,t*u,i):this.$isPointInPath(e*u,t*u)},isPointInStroke:function(e,t,i){return 2<arguments.length?this.$isPointInStroke(e,t*u,i*u):this.$isPointInStroke(e*u,t*u)},drawImage:function(e,t,i,n,r,o,a,s,l){var d=arguments.length;5<d?this.$drawImage(e,t,i,n,r,o*u,a*u,s*u,l*u):3<d?this.$drawImage(e,t*u,i*u,n*u,r*u):this.$drawImage(e,t*u,i*u)},putImageData:function(e,t,i,n,r,o,a){this.$putImageData(e,t*u,i*u,n,r,o,a)},setLineDash:function(e){e instanceof Array||(e=Array.prototype.slice.call(e)),this.$setLineDash(e.map(function(e){return e*u}))},fillText:function(e,t,i,n){this.$fillText(e,t*u,i*u,n*u)},strokeText:function(e,t,i,n){this.$strokeText(e,t*u,i*u,n*u)},measureText:function(e){var t=this.$measureText(e);return t.width*=u,t},createLinearGradient:function(e,t,i,n){return this.$createLinearGradient(e*u,t*u,i*u,n*u)},createRadialGradient:function(e,t,i,n,r,o){return this.$createRadialGradient(e*u,t*u,i*u,n*u,r*u,o*u)}})},getDevicePixelRatio:function(e){return e?e.$devicePixelRatio||1:window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1},applyOverrides:function(e){var t,i=e.getContext("2d"),n=this.getDevicePixelRatio(),r=this.getOverrides();if(!e.$devicePixelRatio&&1!==n){for(t in r)i["$"+t]=i[t];Ext.apply(i,r),e.$devicePixelRatio=n}return e},setSize:function(e,t,i){var n=this.getDevicePixelRatio(e);return e.width=Math.round(t*n),e.height=Math.round(i*n),e.style.width=Math.round(t)+"px",e.style.height=Math.round(i)+"px",e}}),Ext.define("Ext.d3.canvas.Canvas",{extend:"Ext.d3.Component",xtype:"d3-canvas",isCanvas:!0,config:{hdpi:!0},requires:["Ext.d3.canvas.HiDPI"],template:[{tag:"canvas",reference:"canvasElement",style:{position:"absolute"}}],canvas:null,context2D:null,renderScene:null,getCanvas:function(){var e=this.canvas;return e||(e=this.canvasElement.dom,this.getHdpi()&&(e=Ext.d3.canvas.HiDPI.applyOverrides(e)),this.canvas=e,this.context2D=e.getContext("2d")),e},resizeHandler:function(e){var t=this.canvas||this.getCanvas(),i=this.sceneRect||(this.sceneRect={});i.x=0,i.y=0,i.width=e.width,i.height=e.height,Ext.d3.canvas.HiDPI.setSize(t,i.width,i.height),this.onSceneResize(t,i),this.fireEvent("sceneresize",this,t,i)},onSceneResize:Ext.emptyFn,onPanZoom:function(e,t,i){var n=this.canvas,r=this.context2D;r&&this.renderScene&&(r.save(),r.clearRect(0,0,n.width,n.height),r.setTransform(t[0],0,0,t[1],i[0],i[1]),this.renderScene(r),r.restore())},getSceneRect:function(){return this.sceneRect}}),Ext.define("Ext.d3.hierarchy.Hierarchy",{extend:"Ext.d3.svg.Svg",requires:["Ext.d3.axis.Color","Ext.plugin.MouseEnter"],mixins:["Ext.d3.mixin.ToolTip"],config:{hierarchyCls:"hierarchy",selection:null,colorAxis:{scale:{type:"ordinal",range:"d3.schemeCategory20c.slice(0, -4)"},field:"name"},nodeChildren:function(e){return e.isExpanded()?e.childNodes:null},nodeClass:void 0,nodeText:["name","text"],sorter:null,nodeTransform:function(e){e.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})},nodeValue:1,noParentValue:!1,nodeKey:function(e,t){return e.data.id},linkKey:function(e,t){return e.target.data.id},selectEventName:"click",expandEventName:"dblclick",rootVisible:!0,layout:void 0,noSizeLayout:!0,renderLinks:!1,transitions:{layout:{duration:500,ease:"cubicInOut"},select:{duration:150,ease:"cubicInOut",sourceScale:1,targetScale:1.07}}},publishes:"selection",root:null,nodes:null,links:null,defaultCls:{links:Ext.baseCSSPrefix+"d3-links",nodes:Ext.baseCSSPrefix+"d3-nodes",link:Ext.baseCSSPrefix+"d3-link",node:Ext.baseCSSPrefix+"d3-node",root:Ext.baseCSSPrefix+"d3-root",label:Ext.baseCSSPrefix+"d3-label",parent:Ext.baseCSSPrefix+"d3-parent",leaf:Ext.baseCSSPrefix+"d3-leaf",selected:Ext.baseCSSPrefix+"d3-selected",expanded:Ext.baseCSSPrefix+"d3-expanded"},nodeClassCfg:null,mouseEnterPlugin:null,constructor:function(e){this.callParent([e]),this.mixins.d3tooltip.constructor.call(this,e)},applyTooltip:function(e,t){return e&&(e.delegate="g."+this.defaultCls.node),this.mixins.d3tooltip.applyTooltip.call(this,e,t)},updateTooltip:null,defaultNodeClass:function(e){var t,i=this,n=i.defaultCls,r=i.nodeClassCfg;for(t in r||(i.nodeClassCfg=r={},r[n.parent]=function(e){return!e.data.isLeaf()},r[n.leaf]=function(e){return e.data.isLeaf()},r[n.expanded]=function(e){return e.data.isExpanded()},r[n.root]=function(e){return e===i.root}),r)e.classed(t,r[t])},applyColorAxis:function(e,t){return e&&!e.isColorAxis&&(e=new Ext.d3.axis.Color(e)),e||t},applyNodeText:function(o){var e;return"function"==typeof o?e=o:"string"==typeof o?e=function(e,t){var i=t&&t.data&&t.data.data;return i&&i[o]||""}:Array.isArray(o)?e=function(e,t){var i,n,r=t&&t.data&&t.data.data;if(r)for(n=0;n<o.length&&!i;n++)i=r[o[n]];return i||""}:Ext.raise("nodeText must be a string, array of strings, or a function that returns a string."),e},applyNodeClass:function(e,t){var i;return i=(i=Ext.isFunction(e)?e:t||this.defaultNodeClass)&&i.bind(this)},applyNodeTransform:function(e){return e=e&&e.bind(this)},updateHierarchyCls:function(e,t){var i=this.baseCls,n=this.element;e&&Ext.isString(e)&&(n.addCls(e,i),t&&n.removeCls(t,i))},applyStore:function(e,t){var i=e&&Ext.StoreManager.lookup(e,"tree");return i&&!i.isTreeStore&&Ext.raise("The store must be a Ext.data.TreeStore."),i},applyNodeValue:function(t){var i,e,n=this.getNoParentValue(),r=this.getNodeChildren();return"string"==typeof t?i=function(e){return e.data[t]}:Ext.isNumber(t)?i=function(){return t}:"function"==typeof t&&(i=t),i&&(e=n?function(e){return r(e)?0:i.call(this,e)}:i.bind(this)),e},updateNodeValue:function(){this.isConfiguring||this.performLayout()},updateNodeChildren:function(){this.isConfiguring||this.performLayout()},updateSorter:function(e){this.isConfiguring||this.performLayout()},findNode:function(t,e){return(e=e||this.getRenderedNodes()).filter(function(e){return t&&(e.data.id===t.data.id||e===t)})},nodeFromRecord:function(e){var t=e&&this.selectionFromRecord(e);return t&&!t.empty()?t.datum():null},selectionFromRecord:function(e){return e&&e.isModel||Ext.raise("Passed parameter should be a model instance."),this.scene.select('[data-id="'+e.id+'"]')},isRecordInStore:function(e){var t=this.getStore();return!(!(e&&e.isModel&&t)||t.isEmptyStore||e.store!==t&&t.getNodeById(e.id)!==e&&t.getRoot()!==e)},applySelection:function(e){return e&&!e.isModel&&Ext.raise("The 'record' should be a Ext.data.TreeModel instance."),this.isRecordInStore(e)?e:null},updateSelection:function(e,t){var i,n,r,o=this;o.hasFirstRender?(e&&((r=!(i=o.selectionFromRecord(e)).empty())?o.onNodeSelect(e,i):(o[o.self.getConfigurator().configs.selection.names.internal]=null,Ext.log.warn('Selected record "'+e.id+'" does not have an associated element. E.g.:\n- record was selected before it was rendered;\n- record was selected in some other view, but is not supposed to be rendered by this D3 component (see "nodeChildren" config).'))),t&&((n=o.selectionFromRecord(t)).empty()||o.onNodeDeselect(t,n)),r&&o.fireEvent("selectionchange",o,e,t)):e&&o.on({scenerender:o.updateSelection.bind(o,e,t),single:!0})},onNodeSelect:function(e,t){t.classed(this.defaultCls.selected,!0),this.fireEvent("select",this,e,t)},onNodeDeselect:function(e,t){t.classed(this.defaultCls.selected,!1),this.fireEvent("deselect",this,e,t)},onNodesAdd:function(e){e.attr("class",this.defaultCls.node).each(function(e){this.setAttribute("data-id",e.data.id)})},addNodeListeners:function(){var e,t,i=Ext.Array.from(this.getSelectEventName()),n=Ext.Array.from(this.getExpandEventName());for(e=0,t=i.length;e<t;e++)this.addNodeListener(i[e],this.onSelectEvent);for(e=0,t=n.length;e<t;e++)this.addNodeListener(n[e],this.onExpandEvent)},updateEventName:function(e,t,i){var n,r,o=Ext.Array.from(e),a=Ext.Array.from(t);for(n=0,r=a.length;n<r;n++)this.removeNodeListener(a[n],i);for(n=0,r=o.length;n<r;n++)this.addNodeListener(o[n],i)},updateSelectEventName:function(e,t){this.updateEventName(e,t,this.onSelectEvent)},updateExpandEventName:function(e,t){this.updateEventName(e,t,this.onExpandEvent)},addNodeListener:function(e,t){var i=this.el;"mouseenter"===e?this.mouseEnterPlugin=this.addPlugin({type:"mouseenter",element:i,delegate:"g."+this.defaultCls.node,handler:t}):e&&i.on(e,t,this,{delegate:"g."+this.defaultCls.node})},removeNodeListener:function(e,t){var i=this.el;"mouseenter"===e?Ext.destroy(this.mouseEnterPlugin):e&&i.un(e,t,this,{delegate:"g."+this.defaultCls.node})},onSelectEvent:function(e,t){var i=d3.select(t),n=i.node(),r=i.datum();this.handleSelectEvent(e,r,n)},handleSelectEvent:function(e,t,i){this.setSelection(t.data)},onExpandEvent:function(e){var t=d3.select(e.currentTarget),i=t.node(),n=t.datum();this.handleExpandEvent(e,n,i)},handleExpandEvent:function(e,t,i){var n=t.data;n.isExpanded()?n.collapse():n.expand()},setLayoutSize:function(e){this.getLayout().size(e)},getLayoutSize:function(){var e=this.getLayout();return e.size&&e.size()},onSceneResize:function(e,t){this.callParent([e,t]),this.setLayoutSize([t.width,t.height]),this.performLayout()},hasFirstLayout:!1,hasFirstRender:!1,isLayoutTransitionSkipped:!1,oldLayoutSaving:!1,oldNodes:null,oldLinks:null,isLayoutBlocked:Ext.emptyFn,skipLayoutTransition:function(){this.isLayoutTransitionSkipped=!0},processDataChange:function(e){(this.getNoSizeLayout()||this.size)&&this.performLayout()},setupScene:function(e){this.callParent([e]),this.linksGroup=e.append("g").classed(this.defaultCls.links,!0),this.nodesGroup=e.append("g").classed(this.defaultCls.nodes,!0)},performLayout:function(){var e,t,i,n,r,o,a,s,l=this,d=l.getStore(),u=d&&d.getRoot(),c=l.getRootVisible(),h=l.getLayout();l.getScene(),u||(l.getRenderedNodes().remove(),l.getRenderedLinks().remove()),!u||d.isLoading()||l.isInitializing||l.isLayoutBlocked(h)||(n=!c&&u.data.autoRoot&&1===u.childNodes.length?u.firstChild:u,r=l.getSorter(),o=l.getRenderLinks(),a=l.getNodeChildren(),s=l.getNodeValue(),l.oldLayoutSaving&&l.saveLayout(l.nodes,l.links),e=d3.hierarchy(n,a).sum(s),r&&(e=e.sort(r)),l.storeRoot=u,l.root=e=h(e),t=l.nodes=e.descendants(),o&&(i=l.links=e.links()),l.hasFirstLayout=!0,l.renderScene(t,i))},saveLayout:function(e,t){var i,n,r,o={};if(this.oldNodes=o,e)for(i=0,n=e.length;i<n;i++)o[(r=e[i]).data.id]=r;this.oldLinks=t},getOldNode:function(e){return e&&this.oldNodes&&this.oldNodes[e.data.id]},renderScene:function(e,t){var i,n,r=this,o=r.getNodeKey(),a=r.getLinkKey();r.hasFirstLayout||r.performLayout(),e=e||r.nodes,t=t||r.links,r.onBeforeRender(e,t),e&&(i=r.getRenderedNodes().data(e,o),r.renderNodes(i),t&&(n=r.getRenderedLinks().data(t,a),r.renderLinks(n))),r.hideRoot(),r.hasFirstRender=!0,r.onAfterRender(i,n),r.fireEvent("scenerender",r,i,n)},getRenderedNodes:function(){return this.nodesGroup.selectAll("."+this.defaultCls.node)},getRenderedLinks:function(){return this.linksGroup.selectAll("."+this.defaultCls.link)},hideRoot:function(){var e=this.getRootVisible();this.nodesGroup.select("."+this.defaultCls.root).classed(this.defaultCls.invisible,!e)},renderLinks:function(e){this.updateLinks(e,this.addLinks(e.enter())),this.removeLinks(e.exit())},renderNodes:function(e){var t=this.getNodeClass(),i=e.enter().append("g");i.call(this.onNodesAdd.bind(this)),this.addNodes(i),i.call(t),e.call(t),this.updateNodes(e,i),this.removeNodes(e.exit())},layoutTransition:null,onBeforeRender:function(){var e=this,t=e.hasFirstRender&&!e.isLayoutTransitionSkipped,i=e.createTransition(t?"layout":"none");e.isLayoutTransitionSkipped=!1,e.layoutTransition=i.on("end",function(){e.layoutTransition=null,e.destroyed||e.destroying||e.onLayout()})},onLayout:function(){this.panZoom&&this.panZoom.updateIndicator(),this.fireEvent("layout",this)},onAfterRender:Ext.emptyFn,updateLinks:Ext.emptyFn,addLinks:Ext.emptyFn,updateNodes:Ext.emptyFn,addNodes:Ext.emptyFn,removeLinks:function(e){e.remove()},removeNodes:function(e){e.remove()}}),Ext.define("Ext.d3.hierarchy.Pack",{extend:"Ext.d3.hierarchy.Hierarchy",xtype:"d3-pack",requires:["Ext.d3.Helpers"],config:{componentCls:"pack",textPadding:[3,3],nodeValue:function(e){return e.childNodes.length+1},clipText:!0,noSizeLayout:!1},applyLayout:function(){return d3.pack()},onNodeSelect:function(e,t){this.callParent(arguments),t.select("circle").style("fill",null)},onNodeDeselect:function(e,t){var i=this.getColorAxis();this.callParent(arguments),t.select("circle").style("fill",function(e){return i.getColor(e)})},updateColorAxis:function(t){this.isConfiguring||this.getRenderedNodes().select("circle").style("fill",function(e){return t.getColor(e)})},textVisibilityFn:function(e){var t=this.getTextPadding(),r=2*parseFloat(t[0]),o=2*parseFloat(t[1]);e.classed(this.defaultCls.invisible,function(e){var t=this.getBBox(),i=e.r-r,n=e.r-o;return t.width>i||t.height>n})},addNodes:function(e){var t,i=this.getNodeTransform(),n=this.getClipText();e.call(this.onNodesAdd.bind(this)).call(i).append("circle"),t=e.append("text").attr("class",this.defaultCls.label),n&&t.call(this.textVisibilityFn.bind(this)),Ext.d3.Helpers.noDominantBaseline()&&t.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,"central",!0)}),t.attr("opacity",0)},updateNodes:function(e,t){var i,n=this,r=n.getColorAxis(),o=n.getNodeTransform(),a=n.getSelection(),s=n.getNodeText(),l=n.getClipText(),d=e.merge(t),u=n.layoutTransition;d.transition(u).call(o),d.select("circle").transition(u).attr("r",function(e){return e.r}).style("fill",function(e){return e.data===a?null:r.getColor(e)}),i=d.select("text").text(function(e){return s(n,e)}),l&&i.call(n.textVisibilityFn.bind(n)),i.transition(u).attr("opacity",1)},removeNodes:function(e){e.attr("opacity",1).transition(this.layoutTransition).attr("opacity",0).remove()}}),Ext.define("Ext.d3.hierarchy.TreeMap",{extend:"Ext.d3.hierarchy.Hierarchy",xtype:"d3-treemap",requires:["Ext.d3.Helpers"],config:{componentCls:"treemap",tiling:null,parentTile:{padding:4,label:{offset:[5,2],clipSize:[110,40]}},leafTile:{padding:0},nodeTransform:function(e){e.attr("transform",function(e){return"translate("+e.x0+","+e.y0+")"})},busyLayoutText:"Layout in progress...",noParentValue:!0,noSizeLayout:!1,scaleLabels:!1},labelQuantizer:null,constructor:function(e){this.labelQuantizer=this.createLabelQuantizer(),this.callParent([e])},createLabelQuantizer:function(){return d3.scaleQuantize().domain([8,27]).range(["8px","12px","18px","27px"])},labelSizer:function(e,t){return Math.min((e.x1-e.x0)/4,(e.y1-e.y0)/2)},applyTiling:function(e,t){return Ext.d3.Helpers.eval(e||t)},updateTiling:function(e){e&&(this.getLayout().tile(e),this.isConfiguring||this.performLayout())},updateLeafTile:function(e){e&&this.getLayout().paddingInner(e.padding||0),this.isConfiguring||this.performLayout()},applyParentTile:function(e){var t,i=this;return e&&(t=e.padding,Ext.isNumber(t)&&(e.padding=function(e){return i.getRootVisible()||e!==i.root?t:0})),e},updateParentTile:function(e){var t,i;e&&(t=this.getLayout(),i=e.padding,t.paddingRight(i),t.paddingBottom(i),t.paddingLeft(i)),this.isConfiguring||this.performLayout()},applyLayout:function(){return d3.treemap().round(!0)},setLayoutSize:function(e){this.callParent([e])},deferredLayoutId:null,isLayoutBlocked:function(e){var t=this.getBusyLayoutText(),i=!1;return this.deferredLayoutId?(clearTimeout(this.deferredLayoutId),this.deferredLayoutId=null):(this.showMask(t),this.deferredLayoutId=setTimeout(this.performLayout.bind(this),100),i=!0),i},setupScene:function(e){this.callParent([e]),this.getScaleLabels()},onAfterRender:function(){this.hideMask()},hiddenParentLabels:null,labelSizes:null,getContentRect:function(){var e=this.getSceneRect(),t=this.contentRect||(this.contentRect={x:0,y:0});return e&&(t.width=e.width,t.height=e.height),e&&t},onNodeSelect:function(e,t){this.callParent(arguments),t.select("rect").style("fill",null)},onNodeDeselect:function(e,t){var i=this.getColorAxis();this.callParent(arguments),t.select("rect").style("fill",function(e){return i.getColor(e)})},renderNodes:function(e){var t,s=this,i=s.root,n=s.getLayout(),l=s.getParentTile().label,r=s.getNodeTransform(),d=s.hiddenParentLabels={},u=s.labelSizes={};s.callParent([e]),n.paddingTop(function(e){var t,i,n,r=e.data.data.id,o=u[r],a=l.clipSize;return s.getRootVisible()||e!==s.root?(t=2*l.offset[1],i=e.x1-e.x0,n=e.y1-e.y0,o.width<i&&o.height<n&&i>a[0]&&n>a[1]?(t+=o.height,d[r]=!1):d[r]=!0):(t=0,d[r]=!0),t}),s.root=i=n(i),t=s.nodes=i.descendants(),n.paddingTop(0),(e=s.getRenderedNodes().data(t,s.getNodeKey())).transition(s.layoutTransition).call(r),e.select("rect").call(s.nodeSizeFn.bind(s)),e.select("text").call(s.textVisibilityFn.bind(s)).each(function(e){e.data.isLeaf()?(this.setAttribute("x",(e.x1-e.x0)/2),this.setAttribute("y",(e.y1-e.y0)/2)):(this.setAttribute("x",l.offset[0]),this.setAttribute("y",l.offset[1]))})},addNodes:function(e){var i=this,n=i.labelSizes,t=i.getColorAxis(),r=i.getNodeText(),o=i.getScaleLabels(),a=i.defaultCls;e.append("rect").style("fill",function(e){return t.getColor(e)}),e.append("text").style("font-size",function(e){return o?i.getLabelSize(e,this):null}).each(function(e){var t=r(i,e);this.textContent=null==t?"":t,this.setAttribute("class",a.label),Ext.d3.Helpers.fakeDominantBaseline(this,e.data.isLeaf()?"central":"text-before-edge"),n[e.data.id]=this.getBBox()})},updateNodes:function(e){var i=this,n=i.getNodeText(),t=i.getScaleLabels(),r=i.labelSizes;e.select("rect").call(i.nodeSizeFn.bind(i)),e.select("text").style("font-size",function(e){return t?i.getLabelSize(e,this):null}).each(function(e){var t=n(i,e);this.textContent=null==t?"":t,r[e.data.id]=this.getBBox()})},getLabelSize:function(e,t){return e.data.isLeaf()?this.labelQuantizer(this.labelSizer(e,t)):null},updateScaleLabels:function(){this.isConfiguring||this.performLayout()},updateNodeValue:function(e){this.callParent(arguments),this.isConfiguring||this.performLayout()},nodeSizeFn:function(e){e.attr("width",function(e){return Math.max(0,e.x1-e.x0)}).attr("height",function(e){return Math.max(0,e.y1-e.y0)})},isLabelVisible:function(e,t){var i=e.getBBox(),n=t.x1-t.x0,r=t.y1-t.y0,o=t.data.isLeaf(),a=this.getParentTile(),s=this.hiddenParentLabels,l=a.label.offset;return o?(n-=2,r-=2):(n-=2*l[0],r-=2*l[1]),o||!t.data.isExpanded()?i.width<n&&i.height<r:!s[t.data.id]},textVisibilityFn:function(e){var t=this;e.classed(t.defaultCls.invisible,function(e){return!t.isLabelVisible(this,e)})},destroy:function(){var e=this.getColorAxis();this.deferredLayoutId&&clearTimeout(this.deferredLayoutId),e.destroy(),this.callParent()}}),Ext.define("Ext.d3.hierarchy.partition.Partition",{extend:"Ext.d3.hierarchy.Hierarchy",xtype:"d3-partition",config:{partitionCls:"partition",nodeValue:function(e){return e.isExpanded()&&e.childNodes?0:1}},updatePartitionCls:function(e,t){var i=this.baseCls,n=this.element;e&&Ext.isString(e)&&(n.addCls(e,i),t&&n.removeCls(t,i))},applyLayout:function(){return d3.partition()},resetZoom:function(e){var t=this.getStore(),i=t&&t.getRoot();this.zoomInNode(i,e)}}),Ext.define("Ext.d3.hierarchy.partition.Sunburst",{extend:"Ext.d3.hierarchy.partition.Partition",xtype:"d3-sunburst",config:{componentCls:"sunburst",textPadding:[5,"0.35em"],zoomParentDotRadius:30,transitions:{zoom:{duration:1e3,ease:"cubicInOut"}}},setupScene:function(e){this.callParent([e]),this.setupScales(),this.setupArcGenerator()},scaleDefaults:{x:{domain:[0,1],range:[0,2*Math.PI]},y:{domain:[0,1]}},setupScales:function(){var e=this.scaleDefaults;this.xScale=d3.scaleLinear().domain(e.x.domain.slice()).range(e.x.range.slice()),this.yScale=d3.scaleSqrt().domain(e.y.domain.slice())},arc:null,defaultCls:{center:Ext.baseCSSPrefix+"d3-center"},setupArcGenerator:function(){var t=this.xScale,i=this.yScale;this.arc=d3.arc().startAngle(function(e){return Math.max(0,Math.min(2*Math.PI,t(e.x0)))}).endAngle(function(e){return Math.max(0,Math.min(2*Math.PI,t(e.x1)))}).innerRadius(function(e){return Math.max(0,i(e.y0))}).outerRadius(function(e){return Math.max(0,i(e.y1))})},onSceneResize:function(e,t){var i=this.nodesGroup,n=.5*t.width,r=.5*t.height,o=Math.min(n,r);i.attr("transform","translate("+n+","+r+")"),this.setRadius(o)},radius:null,minRadius:1,setRadius:function(e){e=Math.max(this.minRadius,e),this.radius=e,this.yScale.range([0,e]),this.renderScene()},zoomInNode:function(e,t){var r,i,n=this,o=n.getScene(),a=n.getZoomParentDotRadius(),s=n.radius,l=n.xScale,d=n.yScale,u=n.arc;n.hasFirstLayout&&n.hasFirstRender&&n.size&&e&&e.isNode&&(r=n.nodeFromRecord(e)),r&&((i=n.createTransition(t?"none":"zoom",o).tween("scale",function(){var t=d3.interpolate(l.domain(),[r.x0,r.x1]),i=d3.interpolate(d.domain(),[r.y0,1]),n=d3.interpolate(d.range(),[r.y0?a:0,s]);return function(e){l.domain(t(e)),d.domain(i(e)).range(n(e))}}).selectAll("."+n.defaultCls.node)).selectAll("path").attrTween("d",function(t){return function(e){return u(t)}}),i.selectAll("text").call(n.positionTextFn.bind(n)).call(n.textVisibilityFn.bind(n)),t&&(n.xScale.domain([r.x0,r.x1]),n.yScale.domain([r.y0,1]).range([r.y0?a:0,s])))},onNodeSelect:function(e,t){var i=this.getTransitions().select,n=i.targetScale,r=i.sourceScale,o=this.createTransition("select");this.callParent(arguments),t.raise().select("path").style("fill",null),o.duration()&&t.transition(o).attr("transform","scale("+n+","+n+")").transition(o).attr("transform","scale("+r+","+r+")")},onNodeDeselect:function(e,t){var i=this.getColorAxis();this.callParent(arguments),t.select("path").style("fill",function(e){return i.getColor(e)})},isBBoxInSlice:function(e,t,i,n,r,o,a){var s=Math.abs(i-t),l=Math.abs(r-n)-2*o,d=s<Math.PI?2*(n+o)*Math.tan(.5*s)-2*a:.5*r,u=e.width>l,c=e.height>d;return!(u||c)},textVisibilityFn:function(e){var h=this,f=h.xScale,g=h.yScale,i=h.defaultCls.invisible,t=h.getTextPadding(),p=parseFloat(t[0]),m=parseFloat(t[1]);function n(e,t){h.isDestroyed&&Ext.log.warn("Component is destroyed, shouldn't have executed this.");var i=e._bbox||e.getBBox(),n=f(t.x0),r=f(t.x1),o=g(t.y0),a=g(t.y1),s=h.isBBoxInSlice(i,n,r,o,a,p,m),l=f.domain(),d=g.domain(),u=l[0]>t.x0||l[1]<t.x1,c=d[0]>t.y0||d[1]<t.y1;return!s||u||c}e instanceof d3.transition?e.tween("class.invisible",function(e){var t=this;return function(){d3.select(t).classed(i,n(t,e))}}):e.classed(i,function(e){return n(this,e)})},positionTextFn:function(e){var t,i,n=this,r=n.xScale,o=n.yScale,a=Math.PI/2,s=180/Math.PI,l=e instanceof d3.transition,d=l?"attrTween":"attr";function u(e){return o(e.y0)}function c(e){return e===n.root?"":"rotate("+(r((e.x0+e.x1)/2)-a)*s+")"}i=l?(t=function(e){return function(){return u(e)}},function(e){return function(){return c(e)}}):(t=function(e){return u(e)},function(e){return c(e)}),e[d]("x",t)[d]("transform",i)},addNodes:function(e){var t=this,i=t.getTextPadding();e.append("path").attr("d",t.arc),e.append("text").attr("class",t.defaultCls.label).each(function(e){e!==t.root&&(this.setAttribute("dx",i[0]),this.setAttribute("dy",i[1]))})},measureLabels:function(e){e instanceof d3.transition||e.each(function(){this._bbox=this.getBBox()})},updateNodes:function(e,t){var i=this,n=i.getColorAxis(),r=i.getNodeText(),o=i.getSelection(),a=e.merge(t);a.select("path").attr("d",i.arc).style("fill",function(e){return e.data===o?null:n.getColor(e)}),a.select("text").text(function(e){return r(i,e)}).call(i.measureLabels.bind(i)).call(i.positionTextFn.bind(i)).call(i.textVisibilityFn.bind(i)),i.nodesGroup.select("."+i.defaultCls.selected).raise()},updateColorAxis:function(t){this.isConfiguring||this.getRenderedNodes().select("path").style("fill",function(e){return t.getColor(e)})}}),Ext.define("Ext.d3.hierarchy.tree.Tree",{extend:"Ext.d3.hierarchy.Hierarchy",config:{treeCls:"tree",nodeTransform:null,depth:0,nodeRadius:5,nodeTransition:!0,nodeSize:null,noSizeLayout:!1,renderLinks:!0,transitions:{select:{targetScale:1.5}}},updateTreeCls:function(e,t){var i=this.baseCls,n=this.element;e&&Ext.isString(e)&&(n.addCls(e,i),t&&n.removeCls(t,i))},applyLayout:function(){return d3.tree()},updateNodeSize:function(e){this.getLayout().nodeSize(e)},updateColorAxis:function(t){this.isConfiguring||this.getRenderedNodes().select("circle").style("fill",function(e){return t.getColor(e)})},hideRoot:function(){var e=this.getRootVisible();this.nodesGroup.select("."+this.defaultCls.root).classed(this.defaultCls.hidden,!e)},onNodeSelect:function(e,t){var i=this.getTransitions().select,n=i.targetScale,r=i.sourceScale,o=this.createTransition("select"),a=t.select("circle");this.callParent(arguments),a.style("fill",null),o.duration()&&a.transition(o).attr("transform","scale("+n+","+n+")").transition(o).attr("transform","scale("+r+","+r+")")},onNodeDeselect:function(e,t){var i=this.getColorAxis();this.callParent(arguments),t.select("circle").style("fill",function(e){return i.getColor(e)})}}),Ext.define("Ext.d3.hierarchy.tree.HorizontalTree",{extend:"Ext.d3.hierarchy.tree.Tree",xtype:["d3-tree","d3-horizontal-tree"],requires:["Ext.d3.Helpers"],config:{componentCls:"horizontal-tree",nodeTransform:function(e){e.attr("transform",function(e){return"translate("+e.y+","+e.x+")"})}},pendingTreeAlign:!1,oldLayoutSaving:!0,alignAfterLayout:function(){this.pendingTreeAlign=!0},onSceneResize:function(e,t){var i=this.getLayout();this.alignAfterLayout(),i.nodeSize()?this.size?this.alignTree():this.performLayout():this.callParent(arguments)},onLayout:function(){this.pendingTreeAlign&&(this.pendingTreeAlign=!1,this.alignTree()),this.callParent()},alignTree:function(){this.getNodeSize()&&this.alignContent("l")},updateNodeSize:function(e){e?this.getLayout().nodeSize(e.slice().reverse()):(this.setLayoutSize([this.sceneRect.width,this.sceneRect.height]),this.panZoom&&Ext.log.warn("With no `nodeSize` set, the `panzoom` interaction is likely redundant. You can remove it with `component.panZoom.destroy()`. This will also remove any translation/scaling currently applied to the scene.")),this.isConfiguring||(this.skipLayoutTransition(),this.alignAfterLayout(),this.performLayout())},setLayoutSize:function(e){var t=e[0];e[0]=e[1],e[1]=t,this.callParent([e])},onNodesAdd:function(e){var t;this.callParent([e]),(t=this.getOldNode(this.nodeFromRecord(this.getSelection())))&&e.attr("transform","translate("+t.y+","+t.x+")")},addNodes:function(e){var t,i=this.getNodeRadius();e.append("circle").attr("opacity",0),t=e.append("text").attr("class",this.defaultCls.label).each(function(e){var t=e.data.isLeaf();this.setAttribute("x",t?i+5:-5-i)}).attr("opacity",0),Ext.d3.Helpers.noDominantBaseline()&&t.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,"central",!0)})},updateNodes:function(e,t){var i=this,n=i.getSelection(),r=i.getNodeTransform(),o=i.getColorAxis(),a=i.getNodeRadius(),s=i.getNodeText(),l=e.merge(t),d=i.layoutTransition;l.transition(d).call(r),l.select("circle").style("fill",function(e){return e.data===n?null:o.getColor(e)}).attr("r",a).transition(d).attr("opacity",1),l.select("text").text(function(e){return s(i,e)}).transition(d).attr("opacity",1)},removeNodes:function(e){var r=this,o=r.nodeFromRecord(r.getSelection());e.attr("opacity",1).transition(r.layoutTransition).attr("opacity",0).attr("transform",function(e){var t=e.parent,i=o||t&&r.nodeFromRecord(t.data),n=i&&i.x||0;return"translate("+(i&&i.y||0)+","+n+")"}).remove()},getLinkPath:function(e){var t=e.source.y+(e.target.y-e.source.y)/2;return"M"+e.source.y+","+e.source.x+"C"+t+","+e.source.x+" "+t+","+e.target.x+" "+e.target.y+","+e.target.x},addLinks:function(e){var o=this,a=o.nodeFromRecord(o.getSelection());return e.append("path").classed(o.defaultCls.link,!0).attr("d",function(e){var t=a||e.source,i=o.getOldNode(t),n=i?i.x:t.x,r=i?i.y:t.y;return"M"+r+","+n+"C"+r+","+n+" "+r+","+n+" "+r+","+n}).attr("opacity",0)},updateLinks:function(e,t){var i=this,n=e.merge(t),r=i.layoutTransition,o=!i.getRootVisible();n.classed(i.defaultCls.hidden,function(e){return o&&e.source.data===i.storeRoot}).transition(r).attr("d",i.getLinkPath).attr("opacity",1)},removeLinks:function(e){var o=this,a=o.nodeFromRecord(o.getSelection());e.attr("opacity",1).transition(o.layoutTransition).attr("opacity",0).attr("d",function(e){var t=e.source,i=a||t&&o.nodeFromRecord(t.data),n=i&&i.x||0,r=i&&i.y||0;return"M"+r+","+n+"C"+r+","+n+" "+r+","+n+" "+r+","+n}).remove()}}),Ext.define("Ext.d3.interaction.Abstract",{isInteraction:!0,mixins:{observable:"Ext.mixin.Observable"},statics:{lockedEvents:{}},config:{component:null,gestures:null,enabled:!0},supports:[],listeners:null,constructor:function(e){var t;t="id"in(e=e||{})?e.id:"id"in this.config?this.config.id:this.getId(),this.setId(t),this.mixins.observable.constructor.call(this,e)},resetComponent:function(){var e=this.getComponent();this.isConfiguring||(this.setComponent(null),this.setGestures(null),this.setComponent(e))},updateComponent:function(e,t){t!==e&&(t&&this.removeComponent(t),e&&this.addComponent(e))},addComponent:function(e){e.register(this),this.component=e,this.addElementListener(e.element)},removeComponent:function(e){this.removeElementListener(e.element),this.component=null,e.unregister(this)},updateEnabled:function(e){var t=this.getComponent();t&&(e?this.addElementListener(t.element):this.removeElementListener(t.element))},onGesture:Ext.emptyFn,addElementListener:function(e){var t,r=this,i=r.getGestures(),o=r.getLocks();if(r.getEnabled())for(t in r.listeners=r.listeners||{},i)n(t,i[t]);function n(i,n){Ext.isFunction(n)||(n=r[n]),e.on(i,r.listeners[i]=function(e){var t;if(r.getEnabled()&&(!(i in o)||o[i]===r))return!1===(t=n.apply(this,arguments))&&e&&e.stopPropagation&&e.stopPropagation(),t},r)}},removeElementListener:function(e){var t,i,n,r=this,o=r.getGestures();if(r.listeners)for(t in o)i=t,(n=r.listeners[i])&&(e.un(i,n),delete r.listeners[i])},lockEvents:function(){for(var e=this.getLocks(),t=Array.prototype.slice.call(arguments),i=t.length;i--;)e[t[i]]=this},unlockEvents:function(){for(var e=this.getLocks(),t=Array.prototype.slice.call(arguments),i=t.length;i--;)delete e[t[i]]},getLocks:function(){return this.statics().lockedEvents},destroy:function(){this.fireEvent("destroy",this),this.setComponent(null),this.listeners=null}}),Ext.define("Ext.d3.interaction.PanZoom",{extend:"Ext.d3.interaction.Abstract",type:"panzoom",alias:"d3.interaction.panzoom",isPanZoom:!0,config:{pan:{gesture:"drag",constrain:!0,momentum:{friction:1,spring:.2}},zoom:{gesture:"pinch",extent:[1,3],uniform:!0,mouseWheel:{factor:1.02},doubleTap:{factor:1.1}},contentRect:null,viewportRect:null,indicator:{parent:"element"}},panOrigin:null,startSpread:null,minSpread:50,scaling:null,oldScaling:null,oldScalingCenter:null,translation:null,oldTranslation:null,dx:0,dy:0,velocityX:0,velocityY:0,pan:null,viewportRect:null,contentRect:null,updatePan:function(e){this.pan=e,this.resetComponent()},updateZoom:function(){this.resetComponent()},updateContentRect:function(e){this.contentRect=e,this.constrainTranslation()},updateViewportRect:function(e){this.viewportRect=e,this.constrainTranslation()},constructor:function(e){this.translation=e&&e.translation?e.translation.slice():[0,0],this.scaling=e&&e.scaling?e.scaling.slice():[1,1],this.callParent(arguments)},destroy:function(){this.destroyIndicator(),Ext.AnimationQueue.stop(this.panFxFrame,this),this.callParent()},toViewportXY:function(e,t){var i=this.component.element.getXY(),n=this.viewportRect&&this.viewportRect();return[e-i[0]-(n?n.x:0),t-i[1]-(n?n.y:0)]},toRtlViewportXY:function(e,t){var i=this.toViewportXY(e,t),n=this.component;return n.getInherited().rtl&&(i[0]=n.getWidth()-i[0]),i},constrainRange:function(e,t,i){return i=i||t,e[0]=Math.max(t[0],Math.min(t[1],e[0])),e[1]=Math.max(i[0],Math.min(i[1],e[1])),e},constrainTranslation:function(e){var t,i,n=this,r=n.pan,o=r&&r.constrain,a=r&&r.momentum,s=o&&n.contentRect&&n.contentRect(),l=o&&n.viewportRect&&n.viewportRect();s&&l&&(e=e||n.translation,t=n.getConstraints(s,l),i=n.getOffLimits(e,t),n.constrainRange(e,t.slice(0,2),t.slice(2)),i&&a&&a.spring&&(e[0]+=i[0]*a.spring,e[1]+=i[1]*a.spring),n.updateIndicator(s,l))},createInterpolator:function(i){var e,n=0,r=1;return i=i||1,(e=function(e){var t=0;return r&&(t=(e-n)/r,t=Math.max(0,t),t=Math.min(1,t),t*=i),t}).domain=function(e,t){r=t-(n=e)},e},updateIndicator:function(e,t){var i,n,r,o,a,s,l,d,u,c,h=this,f=h.hScrollScale,g=h.vScrollScale;e=e||h.contentRect&&h.contentRect(),t=t||h.viewportRect&&h.viewportRect(),h.hScroll&&e&&t&&(u=h.scaling[0],c=h.scaling[1],i=e.x*u+h.translation[0],n=e.y*c+h.translation[1],r=e.width*u,o=e.height*c,r>t.width?(f.domain(i,i+r),a=f(0),s=f(t.width),h.hScrollBar.style.left=a+"%",h.hScrollBar.style.width=s-a+"%",h.hScroll.dom.style.display="block"):h.hScroll.dom.style.display="none",o>t.height?(g.domain(n,n+o),l=g(0),d=g(t.height),h.vScrollBar.style.top=l+"%",h.vScrollBar.style.height=d-l+"%",h.vScroll.dom.style.display="block"):h.vScroll.dom.style.display="none")},getConstraints:function(e,t){var i,n,r,o,a,s,l,d,u=this.pan,c=null;return e=u&&u.constrain&&(e||this.contentRect&&this.contentRect()),t=t||this.viewportRect&&this.viewportRect(),e&&t&&(a=this.scaling[0],s=this.scaling[1],i=e.x*a,n=e.y*s,r=e.width*a,o=e.height*s,l=t.width-r-i,d=t.height-o-n,c=[Math.min(-i,l),Math.max(-i,l),Math.min(-n,d),Math.max(-n,d)]),c},getOffLimits:function(e,t,i){var n,r,o,a,s,l,d=null;return i=i||.1,(t=t||this.getConstraints())&&(s=(e=e||this.translation)[0],l=e[1],n=t[0],o=t[1],r=t[2],a=t[3],s<n?s-=n:o<s?s-=o:s=0,l<r?l-=r:a<l?l-=a:l=0,s&&Math.abs(s)<i&&(s=0),l&&Math.abs(l)<i&&(l=0),(s||l)&&(d=[s,l])),d},translate:function(e,t){var i=this.translation;this.setTranslation(i[0]+e,i[1]+t)},setTranslation:function(e,t){var i=this.translation;i[0]=e,i[1]=t,this.constrainTranslation(i),this.fireEvent("panzoom",this,this.scaling,i)},scale:function(e,t,i){var n=this.scaling;this.setScaling(n[0]*e,n[1]*t,i)},setScaling:function(e,t,i){var n,r,o=this.getZoom(),a=this.scaling,s=a[0],l=a[1],d=this.translation,u=this.oldTranslation;o&&(o.uniform&&(e=t=(e+t)/2),a[0]=e,a[1]=t,this.constrainRange(a,o.extent),e=a[0]/s,t=a[1]/l,n=i&&i[0]||0,r=i&&i[1]||0,d[0]=n+e*(d[0]-n),d[1]=r+t*(d[1]-r),u&&(u[0]=n-(n-u[0])*e,u[1]=r-(r-u[1])*t),this.constrainTranslation(d),this.fireEvent("panzoom",this,a,d))},setPanZoomSilently:function(e,t){this.suspendEvent("panzoom"),e&&this.setTranslation(e[0],e[1]),t&&this.setScaling(t[0],t[1]),this.resumeEvent("panzoom")},setPanZoom:function(e,t){this.setPanZoomSilently(e,t),this.fireEvent("panzoom",this,this.scaling,this.translation)},normalize:function(e,t,i){var n=(i||1)/this.magnitude(e,t);return[e*n,t*n]},magnitude:function(e,t){return Math.sqrt(e*e+t*t)},panFx:function(e){if(e.momentum){var t,i,n=this,r=e.momentum,o=n.translation,a=n.getOffLimits(o),s=n.velocityX=n.dx,l=n.velocityY=n.dy;a&&(a[0]&&(s=a[n.velocityX=0]),a[1]&&(n.velocityY=0,l=a[1])),t=n.normalize(s,l,-r.friction),n.frictionX=t[0],n.frictionY=t[1],i=n.normalize(s,l,-r.spring),n.springX=i[0],n.springY=i[1],Ext.AnimationQueue.start(n.panFxFrame,n)}},incKeepSign:function(e,t){return e?e*t<0&&Math.abs(e)<Math.abs(t)?0:e+t:e},panFxFrame:function(){var e,t,i=this,n=i.translation,r=i.getOffLimits(n),o=r&&r[0],a=r&&r[1],s=0,l=0,d=0,u=0;d+=i.velocityX=i.incKeepSign(i.velocityX,i.frictionX),u+=i.velocityY=i.incKeepSign(i.velocityY,i.frictionY),o&&(s=Math.abs(o),e=i.springX*s,i.velocityX=i.incKeepSign(d,e),d+=e,Math.abs(d)<.1&&(d=.1*Ext.Number.sign(d)),i.velocityX||1<Math.abs(d)||i.incKeepSign(o,d)||(d=-o)),a&&(l=Math.abs(a),t=i.springY*l,i.velocityY=i.incKeepSign(u,t),u+=t,Math.abs(u)<.1&&(u=.1*Ext.Number.sign(u)),i.velocityY||1<Math.abs(u)||i.incKeepSign(a,u)||(u=-a)),i.prevForceX=d,i.prevForceY=u,n[0]+=d,n[1]+=u,i.updateIndicator(),d||u||Ext.AnimationQueue.stop(i.panFxFrame,i),i.fireEvent("panzoom",i,i.scaling,n)},getGestures:function(){var e,t,i=this.gestures,n=this.getPan(),r=this.getZoom();return i||(this.gestures=i={},n&&(i[e=n.gesture]="onPanGesture",i[e+"start"]="onPanGestureStart",i[e+"end"]="onPanGestureEnd",i[e+"cancel"]="onPanGestureEnd"),r&&(i[t=r.gesture]="onZoomGesture",i[t+"start"]="onZoomGestureStart",i[t+"end"]="onZoomGestureEnd",i[t+"cancel"]="onZoomGestureEnd",r.doubleTap&&(i.doubletap="onDoubleTap"),r.mouseWheel&&(i.wheel="onMouseWheel"))),i},updateGestures:function(e){this.gestures=e},isPanning:function(e){return(e=e||this.getPan())&&this.getLocks()[e.gesture]===this},onPanGestureStart:function(e){var t,i=e&&e.event&&e.event.touches||e.touches,n=this.getPan();if(n&&(!i||i.length<2))return e.claimGesture(),Ext.AnimationQueue.stop(this.panFxFrame,this),this.lockEvents(n.gesture),t=e.getXY(),this.panOrigin=this.lastPanXY=this.toRtlViewportXY(t[0],t[1]),this.oldTranslation=this.translation.slice(),!1},onPanGesture:function(e){var t,i,n,r=this,o=r.oldTranslation,a=r.panOrigin;if(r.isPanning())return t=e.getXY(),t=r.toRtlViewportXY(t[0],t[1]),r.dx=t[0]-r.lastPanXY[0],r.dy=t[1]-r.lastPanXY[1],i=(r.lastPanXY=t)[0]-a[0],n=t[1]-a[1],r.setTranslation(o[0]+i,o[1]+n),!1},onPanGestureEnd:function(){var e=this.getPan();if(this.isPanning(e))return this.panOrigin=null,this.oldTranslation=null,this.unlockEvents(e.gesture),this.panFx(e),!1},onZoomGestureStart:function(e){var t,i,n,r,o,a,s=this,l=s.getZoom(),d=e&&e.event&&e.event.touches||e.touches;if(l&&d&&2===d.length)return e.claimGesture(),s.lockEvents(l.gesture),s.oldTranslation=s.translation.slice(),o=d[0],a=d[1],t=s.toViewportXY(o.pageX,o.pageY),n=(i=s.toViewportXY(a.pageX,a.pageY))[0]-t[0],r=i[1]-t[1],s.startSpread=[Math.max(s.minSpread,Math.abs(n)),Math.max(s.minSpread,Math.abs(r))],s.oldScaling=s.scaling.slice(),!(s.oldScalingCenter=[t[0]+.5*n,t[1]+.5*r])},onZoomGesture:function(e){var t,i,n,r,o,a,s,l,d,u,c,h=this,f=h.getZoom(),g=h.startSpread,p=h.oldScaling,m=h.oldScalingCenter,x=e&&e.event&&e.event.touches||e.touches;if(f&&h.getLocks()[f.gesture]===h)return s=x[0],l=x[1],t=h.toViewportXY(s.pageX,s.pageY),n=(i=h.toViewportXY(l.pageX,l.pageY))[0]-t[0],r=i[1]-t[1],u=(d=[t[0]+.5*n,t[1]+.5*r])[0]-m[0],c=d[1]-m[1],h.setTranslation(h.oldTranslation[0]+u,h.oldTranslation[1]+c),n=Math.max(h.minSpread,Math.abs(n)),r=Math.max(h.minSpread,Math.abs(r)),o=n/g[0],a=r/g[1],h.setScaling(o*p[0],a*p[1],d),!1},onZoomGestureEnd:function(){var e=this,t=e.getZoom();if(t&&e.getLocks()[t.gesture]===e)return e.startSpread=null,e.oldScalingCenter=null,e.oldTranslation=null,e.unlockEvents(t.gesture),e.dx=0,e.dy=0,e.panFx(e.getPan()),!1},onMouseWheel:function(e){var t,i,n,r=e.getWheelDelta(),o=this.getZoom();o&&o.mouseWheel&&(t=o.mouseWheel.factor)&&(t=Math.pow(t,r),n=e.getXY(),i=this.toViewportXY(n[0],n[1]),this.scale(t,t,i),e.preventDefault())},onDoubleTap:function(e){var t,i,n,r=this.getZoom();r&&r.doubleTap&&(t=r.doubleTap.factor)&&(n=e.getXY(),i=this.toViewportXY(n[0],n[1]),this.scale(t,t,i))},createIndicator:function(){var e=this;e.hScroll||(e.hScroll=Ext.dom.Element.create({tag:"div",classList:[Ext.baseCSSPrefix+"d3-scroll",Ext.baseCSSPrefix+"d3-hscroll"],style:{},children:[{tag:"div",reference:"bar",classList:[Ext.baseCSSPrefix+"d3-scrollbar",Ext.baseCSSPrefix+"d3-hscrollbar"]}]}),e.hScrollBar=e.hScroll.dom.querySelector("[reference=bar]"),e.hScrollBar.removeAttribute("reference"),e.vScroll=Ext.dom.Element.create({tag:"div",classList:[Ext.baseCSSPrefix+"d3-scroll",Ext.baseCSSPrefix+"d3-vscroll"],style:{},children:[{tag:"div",reference:"bar",classList:[Ext.baseCSSPrefix+"d3-scrollbar",Ext.baseCSSPrefix+"d3-vscrollbar"]}]}),e.vScrollBar=e.vScroll.dom.querySelector("[reference=bar]"),e.vScrollBar.removeAttribute("reference"),e.hScrollScale=e.createInterpolator(100),e.vScrollScale=e.createInterpolator(100))},destroyIndicator:function(){Ext.destroy(this.hScroll,this.vScroll),this.hScroll=this.vScroll=this.hScrollBar=this.vScrollBar=null},addIndicator:function(e){var t=this.getIndicator(),i=this.indicatorParent;t&&!i&&(this.createIndicator(),(i=this.indicatorParent=e[t.parent])&&(i.appendChild(this.hScroll),i.appendChild(this.vScroll)))},removeIndicator:function(){var e=this.indicatorParent;e&&(this.hScroll&&e.removeChild(this.hScroll),this.vScroll&&e.removeChild(this.vScroll),this.indicatorParent=null)},addComponent:function(e){this.callParent([e]),this.addIndicator(e)},removeComponent:function(e){this.removeIndicator(),this.callParent([e])}}),Ext.define("Ext.d3.svg.Export",{singleton:!0,toSvg:function(e){return'<?xml version="1.0" standalone="yes"?>'+this.serializeNode(e)},download:function(e,t){var i=new Blob([t]),n=document.createElement("a");n.setAttribute("download",e),n.setAttribute("href",URL.createObjectURL(i)),n.click()},quotesRe:/"/g,serializeNode:function(e){var t,i,n,r,o,a,s,l="";if(e.nodeType===document.TEXT_NODE)return this.escapeText(e.nodeValue);if(l+="<"+e.nodeName,e.attributes.length)for(t=0,i=e.attributes.length;t<i;t++)"style"!==(n=e.attributes[t]).name&&(l+=" "+n.name+'="'+n.value+'"');for(l+=' style="',t=0,i=(o=getComputedStyle(e)).length;t<i;t++)"string"==typeof(s=o[a=o[t]])&&(l+=a+":"+s.replace(this.quotesRe,"'")+";");if(l+='"',l+=">",e.childNodes&&e.childNodes.length)for(t=0,i=e.childNodes.length;t<i;t++)r=e.childNodes[t],l+=this.serializeNode(r);return l+="</"+e.nodeName+">"},escapeTextRe:[[/&/g,"&amp;"],[/"/g,"&quot;"],[/'/g,"&apos;"],[/</g,"&lt;"],[/>/g,"&gt;"]],escapeText:function(e){var t,i,n=this.escapeTextRe,r=n.length;for(t=0;t<r;t++)i=n[t],e=e.replace(i[0],i[1]);return e}}),Ext.define("Ext.overrides.exporter.util.Format",{override:"Ext.util.Format",decToHex:function(e,t){var i,n="";for(i=0;i<t;i++)n+=String.fromCharCode(255&e),e>>>=8;return n}}),Ext.define("Ext.exporter.data.Base",{requires:["Ext.util.Collection"],config:{idPrefix:"id",id:null,autoGenerateId:!0,autoGenerateKey:{$value:!1,merge:function(e,t){return!!e&&Ext.concat(e,t||null)}}},internalCols:null,clearPropertiesOnDestroy:!1,constructor:function(e){return this.internalCols=[],this.initConfig(e),this._id||this.setId(null),this.callParent([e])},destroy:function(){this.destroyCollections(),this.callParent(),this.internalCols=null},destroyCollections:function(){var e,t,i,n,r=this.internalCols,o=r.length;for(e=0;e<o;e++){for(i=(n=r[e]).length,t=0;t<i;t++)n.items[t].destroy();n.destroy()}r.length=0},clearCollections:function(e){var t,i;for(t=(e=e?Ext.Array.from(e):this.internalCols).length-1;0<=t;t--)(i=e[t])&&i.destroy(),Ext.Array.remove(this.internalCols,i)},applyId:function(e){return!e&&this._autoGenerateId?this._idPrefix+ ++Ext.idSeed:e},checkCollection:function(e,t,i){var n;return e&&(n=this.constructCollection(i)).add(e),t&&(Ext.Array.remove(this.internalCols,t),Ext.destroy(t.items,t)),n},constructCollection:function(e){var t,i=Ext.ClassManager.get(e),n={decoder:this.getCollectionDecoder(i)};return"function"==typeof i.prototype.getKey&&(n.keyFn=this.getCollectionItemKey),t=new Ext.util.Collection(n),this.internalCols.push(t),t},getCollectionDecoder:function(t){return function(e){return e&&e.isInstance?e:new t(e||{})}},getCollectionItemKey:function(e){return e.getKey?e.getKey():e._id||e.getId()},getKey:function(){var e,t,i=this.getAutoGenerateKey(),n="",r=this.getConfig();if(!Ext.isArray(i)||!i.length)return this.getId();for(e=i.length,t=0;t<e;t++)n+=this.serializeKeyValue(r[i[t]]);return n},serializeKeyValue:function(e){var t,i,n,r="";if(null===e)r="_";else if(Ext.isDate(e))r=e.getTime();else if(Ext.isArray(e))for(i=e.length,n=0;n<i;n++)r+=this.serializeKeyValue(e[n]);else if("object"==typeof e)if(e.isInstance)r=e.getKey?e.getKey():"_";else for(t=Ext.Object.getAllKeys(e),i=(t=Ext.Array.sort(t)).length,n=0;n<i;n++)r+=this.serializeKeyValue(e[t[n]]);else r=e;return r}}),Ext.define("Ext.exporter.data.Cell",{extend:"Ext.exporter.data.Base",config:{style:null,value:null}}),Ext.define("Ext.exporter.data.Row",{extend:"Ext.exporter.data.Base",requires:["Ext.exporter.data.Cell"],config:{cells:null},destroy:function(){this.clearCollections()},applyCells:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Cell")},addCell:function(e){return this._cells||this.setCells([]),this._cells.add(e||{})},getCell:function(e){return this._cells?this._cells.get(e):null}}),Ext.define("Ext.exporter.data.Group",{extend:"Ext.exporter.data.Base",requires:["Ext.exporter.data.Row"],config:{text:null,rows:null,summaries:null,summary:null,groups:null},applyRows:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Row")},addRow:function(e){return this._rows||this.setRows([]),this._rows.add(e||{})},getRow:function(e){return this._rows?this._rows.get(e):null},applyGroups:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Group")},addGroup:function(e){return this._groups||this.setGroups([]),this._groups.add(e||{})},getGroup:function(e){return this._groups?this._groups.get(e):null},applySummaries:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Row")},applySummary:function(e){return e&&this.addSummary(e),null},addSummary:function(e){return this._summaries||this.setSummaries([]),this._summaries.add(e||{})},getSummary:function(e){return this._summaries?this._summaries.get(e):null}}),Ext.define("Ext.exporter.data.Column",{extend:"Ext.exporter.data.Base",config:{table:null,text:null,style:null,width:null,mergeAcross:null,mergeDown:null,level:0,index:null,columns:null},destroy:function(){this.setTable(null),this.callParent()},updateTable:function(e){var t,i,n=this.getColumns();if(n)for(i=n.length,t=0;t<i;t++)n.getAt(t).setTable(e)},applyColumns:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Column")},updateColumns:function(e,t){t&&(t.un({add:this.onColumnAdd,remove:this.onColumnRemove,scope:this}),Ext.destroy(t.items,t)),e&&(e.on({add:this.onColumnAdd,remove:this.onColumnRemove,scope:this}),this.onColumnAdd(e,{items:e.getRange()}))},sync:function(e,t){var i,n,r,o=this.getColumnCount()-1,a=this.getColumns();if(this.setLevel(e),a){for(n=a.length,i=0;i<n;i++)a.items[i].sync(e+1,t);this.setMergeDown(null)}else r=t-e,this.setMergeDown(0<r?r:null);this.setMergeAcross(0<o?o:null)},onColumnAdd:function(e,t){var i,n=t.items,r=n.length,o=this.getTable();for(i=0;i<r;i++)n[i].setTable(o);o&&o.syncColumns()},onColumnRemove:function(e,t){var i=this.getTable();Ext.destroy(t.items),i&&i.syncColumns()},getColumnCount:function(e){var t,i,n=0;if(!e&&!(e=this.getColumns()))return 1;for(i=0;i<e.length;i++)n+=(t=e.getAt(i).getColumns())?this.getColumnCount(t):1;return n},addColumn:function(e){return this.getColumns()||this.setColumns([]),this.getColumns().add(e||{})},getColumn:function(e){return this.getColumns().get(e)}}),Ext.define("Ext.exporter.data.Table",{extend:"Ext.exporter.data.Group",requires:["Ext.exporter.data.Column"],isDataTable:!0,config:{columns:null},autoGenerateId:!1,applyColumns:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Column")},updateColumns:function(e,t){t&&(t.un({add:this.onColumnAdd,remove:this.onColumnRemove,scope:this}),Ext.destroy(t.items,t)),e&&(e.on({add:this.onColumnAdd,remove:this.onColumnRemove,scope:this}),this.onColumnAdd(e,{items:e.getRange()}),this.syncColumns())},syncColumns:function(){var e,t,i,n,r,o,a,s,l=this.getColumns(),d=this.getColDepth(l,-1),u={};if(l){for(i=l.length,e=0;e<i;e++)l.items[e].sync(0,d);for(this.getColumnLevels(l,d,u),i=(r=Ext.Object.getKeys(u)).length,e=0;e<i;e++)for(n=(o=u[r[e]]).length,t=0;t<n;t++)0===t?s=1:o[t-1]?s+=(a=o[t-1].getConfig()).mergeAcross?a.mergeAcross+1:1:s++,o[t]&&o[t].setIndex(s)}},getLeveledColumns:function(){var e=this.getColumns(),t=this.getColDepth(e,-1),i={};return this.getColumnLevels(e,t,i,!0),i},getBottomColumns:function(){var e,t=this.getLeveledColumns();return(e=Ext.Object.getKeys(t)).length?t[e[e.length-1]]:[]},getColumnLevels:function(e,t,i,n){var r,o,a,s,l,d,u;if(e)for(s=e.length,o=0;o<s;o++)if(d=(r=e.items[o]).getLevel(),u=r.getColumns(),i[l="s"+d]=i[l]||[],i[l].push(r),u)this.getColumnLevels(u,t,i,n);else for(a=d+1;a<=t;a++)i[l="s"+a]=i[l]||[],i[l].push(n?r:null)},onColumnAdd:function(e,t){var i,n=t.items,r=n.length;for(i=0;i<r;i++)n[i].setTable(this);this.syncColumns()},onColumnRemove:function(e,t){Ext.destroy(t.items),this.syncColumns()},getColumnCount:function(){var e,t,i=this._columns,n=0;if(i)for(t=i.length,e=0;e<t;e++)n+=i.items[e].getColumnCount();return n},getColDepth:function(e,t){var i,n,r=0;if(!e)return t;for(n=e.length,i=0;i<n;i++)r=Math.max(r,this.getColDepth(e.items[i]._columns,t+1));return r},addColumn:function(e){return this._columns||this.setColumns([]),this._columns.add(e||{})},getColumn:function(e){return this._columns?this._columns.get(e):null}}),Ext.define("Ext.exporter.file.Base",{extend:"Ext.exporter.data.Base",requires:["Ext.XTemplate"],tpl:null,destroy:function(){this.tpl=null,this.callParent()},render:function(){var e=this.processRenderData(this.getRenderData());return this.tpl?Ext.XTemplate.getTpl(this,"tpl").apply(e):""},processRenderData:function(e){return e},getRenderData:function(){var e=this.getConfig();return e.self=this,e}}),Ext.define("Ext.exporter.file.Style",{extend:"Ext.exporter.file.Base",config:{name:null,alignment:null,font:null,interior:null,format:null,borders:null,checks:{alignment:{horizontal:["Automatic","Left","Center","Right","Justify"],readingOrder:["LeftToRight","RightToLeft","Context"],vertical:["Automatic","Top","Bottom","Center"]},font:{bold:[!0,!1],italic:[!0,!1],strikeThrough:[!0,!1],underline:["None","Single"]},border:{position:["Left","Top","Right","Bottom"],lineStyle:["None","Continuous","Dash","Dot"]},interior:{pattern:["None","Solid"]}}},datePatterns:{"General Date":"Y-m-d H:i:s","Long Date":"l, F d, Y","Medium Date":"Y-m-d","Short Date":"n/j/Y","Long Time":"g:i:s A","Medium Time":"H:i:s","Short Time":"g:i A"},numberPatterns:{"General Number":"0",Fixed:"0.00",Standard:"0.00"},booleanPatterns:{"Yes/No":["Yes","No"],"True/False":["True","False"],"On/Off":["On","Off"]},isStyle:!0,autoGenerateKey:["alignment","font","interior","format","borders"],constructor:function(e){this.callParent([this.uncapitalizeKeys(e)])},uncapitalizeKeys:function(e){var t,i,n,r,o=e;if(Ext.isObject(e))for(o={},i=(t=Ext.Object.getAllKeys(e)).length,n=0;n<i;n++)r=t[n],o[Ext.String.uncapitalize(r)]=this.uncapitalizeKeys(e[r]);else if(Ext.isArray(e))for(o=[],i=e.length,n=0;n<i;n++)o.push(this.uncapitalizeKeys(e[n]));return o},destroy:function(){this.setAlignment(null),this.setFont(null),this.setInterior(null),this.setBorders(null),this.setChecks(null),this.callParent()},updateAlignment:function(e){this.checkAttribute(e,"alignment")},updateFont:function(e){this.checkAttribute(e,"font")},updateInterior:function(e){this.checkAttribute(e,"interior")},applyBorders:function(e,t){return e&&(e=Ext.Array.from(e),Ext.Array.unique(Ext.Array.pluck(e,"position")).length!==e.length&&Ext.raise("Invalid border positions supplied")),e},updateBorders:function(e){this.checkAttribute(e,"border")},checkAttribute:function(e,t){var i,n,r,o,a,s,l,d,u,c=this.getChecks();if(e&&c&&c[t])for(u=(i=Ext.Array.from(e)).length,o=0;o<u;o++)for(d=i[o],r=(n=Ext.Object.getKeys(d||{})).length,a=0;a<r;a++)l=n[a],(s=c[t][l])&&d[l]&&((Ext.isArray(s)?-1<Ext.Array.indexOf(s,d[l]):s===d[l])||(delete d[l],Ext.raise(Ext.String.format("Invalid key (%0) or value (%1) provided for Style!",l,d[l]))))},getFormattedValue:function(e){var t=this.getFormat(),i=e,n=Ext.util.Format;return!t||"General"===t||Ext.isEmpty(e)?i:"Currency"===t?n.currency(e):"Euro Currency"===t?n.currency(e,"€"):"Percent"===t?n.number(100*e,"0.00")+"%":"Scientific"===t?Number(e).toExponential():this.datePatterns[t]?n.date(e,this.datePatterns[t]):this.numberPatterns[t]?n.number(e,this.numberPatterns[t]):this.booleanPatterns[t]?e?this.booleanPatterns[t][0]:this.booleanPatterns[t][1]:Ext.isFunction(t)?t(e):n.number(e,t)}}),Ext.define("Ext.exporter.File",{singleton:!0,requires:["Ext.promise.Promise","Ext.Deferred"],textPopupWait:"You may close this window after the file is downloaded!",textPopupBlocker:"The file was not saved because pop-up blocker might be enabled! Please check your browser settings.",url:"https://exporter.sencha.com",forceDownload:!1,requiresPopup:function(){var e=Ext.platformTags;return this.forceDownload||Ext.isSafari||e.phone||e.tablet},initializePopup:function(e){var t,i=this.requiresPopup();!i&&e&&(i=!this.saveBlobAs),this.popup=null,i&&(t=window.open("","_blank"))&&(this.popup=t).document.write(Ext.dom.Helper.markup({tag:"html",children:[{tag:"head"},{tag:"body",children:[{tag:"p",html:this.textPopupWait}]}]}))},saveBinaryAs:function(e,t,i,n){var r=this.downloadBinaryAs;return!this.requiresPopup()&&this.saveBlobAs&&(r=this.saveBlobAs),r.call(this,e,t,i,n)},downloadBinaryAs:function(e,t,i,n){var r,o,a=new Ext.Deferred;return this.url?(r=Ext.dom.Helper.markup({tag:"html",children:[{tag:"head"},{tag:"body",children:[{tag:"form",method:"POST",action:this.url,children:[{tag:"input",type:"hidden",name:"content",value:Ext.util.Base64.encode(e)},{tag:"input",type:"hidden",name:"filename",value:t},{tag:"input",type:"hidden",name:"charset",value:i||"UTF-8"},{tag:"input",type:"hidden",name:"mime",value:n||"application/octet-stream"}]},{tag:"script",type:"text/javascript",children:'document.getElementsByTagName("form")[0].submit();'}]}]}),(o=this.popup||window.open("","_blank"))?(o.document.write(r),a.resolve()):a.reject(this.textPopupBlocker),this.popup=null):Ext.raise("Cannot download file since no URL was defined!"),a.promise}},function(s){var r=window.navigator,u=window.saveAs||function(f){"use strict";if(void 0===r||!/MSIE [1-9]\./.test(r.userAgent)){var e=f.document,g=function(){return f.URL||f.webkitURL||f},p=e.createElementNS("http://www.w3.org/1999/xhtml","a"),m="download"in p,x=/Version\/[\d.]+.*Safari/.test(r.userAgent),y=f.webkitRequestFileSystem,v=f.requestFileSystem||y||f.mozRequestFileSystem,o=function(e){(f.setImmediate||f.setTimeout)(function(){throw e},0)},E="application/octet-stream",b=0,C=function(e){setTimeout(function(){"string"==typeof e?g().revokeObjectURL(e):e.remove()},4e4)},S=function(e,t,i){var n,r;for(n=(t=[].concat(t)).length;n--;)if("function"==typeof(r=e["on"+t[n]]))try{r.call(e,i||e)}catch(e){o(e)}},w=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},n=function(n,i,e){e||(n=w(n));function r(){S(d,"writestart progress write writeend".split(" "))}function o(){var t;if(l&&x&&"undefined"!=typeof FileReader)return(t=new FileReader).onloadend=function(){var e=t.result;l.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),d.readyState=d.DONE,r()},t.readAsDataURL(n),void(d.readyState=d.INIT);!c&&s||(s=g().createObjectURL(n)),l?l.location.href=s:void 0===f.open(s,"_blank")&&x&&(f.location.href=s),d.readyState=d.DONE,r(),C(s)}function a(e){return function(){if(d.readyState!==d.DONE)return e.apply(this,arguments)}}var s,l,t,d=this,u=n.type,c=!1,h={create:!0,exclusive:!1};if(d.readyState=d.INIT,i=i||"download",m)return s=g().createObjectURL(n),void setTimeout(function(){var e,t;p.href=s,p.download=i,e=p,t=new MouseEvent("click"),e.dispatchEvent(t),r(),C(s),d.readyState=d.DONE});f.chrome&&u&&u!==E&&(t=n.slice||n.webkitSlice,n=t.call(n,0,n.size,E),c=!0),y&&"download"!==i&&(i+=".download"),u!==E&&!y||(l=f),v?(b+=n.size,v(f.TEMPORARY,b,a(function(e){e.root.getDirectory("saved",h,a(function(e){function t(){e.getFile(i,h,a(function(i){i.createWriter(a(function(t){t.onwriteend=function(e){l.location.href=i.toURL(),d.readyState=d.DONE,S(d,"writeend",e),C(i)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&o()},["writestart","progress","write","abort"].forEach(function(e){t["on"+e]=d["on"+e]}),t.write(n),d.abort=function(){t.abort(),d.readyState=d.DONE},d.readyState=d.WRITING}),o)}),o)}e.getFile(i,{create:!1},a(function(e){e.remove(),t()}),a(function(e){(e.code===e.NOT_FOUND_ERR?t:o)()}))}),o)}),o)):o()},t=n.prototype;return void 0!==r&&r.msSaveOrOpenBlob?function(e,t,i){return i||(e=w(e)),r.msSaveOrOpenBlob(e,t||"download")}:(t.abort=function(){this.readyState=this.DONE,S(this,"abort")},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,function(e,t,i){return new n(e,t,i)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=u:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return u});var o=window.saveTextAs||function(e,t,i){var n,r,o,a;return t=t||"download.txt",i=i||"utf-8",e=(e||"").replace(/\r?\n/g,"\r\n"),u&&Blob?(n=new Blob([e],{type:"text/plain;charset="+i}),u(n,t),!0):!!((r=window.frames.saveTxtWindow)||((r=document.createElement("iframe")).id="saveTxtWindow",r.style.display="none",document.body.insertBefore(r,null),(r=window.frames.saveTxtWindow)||(r=s.popup||window.open("","_temp","width=100,height=100"))))&&((o=r.document).open("text/html","replace"),o.charset=i,o.write(e),o.close(),a=o.execCommand("SaveAs",null,t),r.close(),a)};s.saveAs=function(e,t,i,n){var r;return this.requiresPopup()?this.downloadBinaryAs(e,t,i||"UTF-8",n||"text/plain"):(r=new Ext.Deferred,o(e,t,i)?r.resolve():r.reject(),r.promise)},u&&Blob&&(s.saveBlobAs=function(e,t,i,n){var r,o,a=new Ext.Deferred,s=new Uint8Array(e.length),l=s.length,d={type:n||"application/octet-stream"};for(o=0;o<l;o++)s[o]=e.charCodeAt(o);return r=new Blob([s],d),u(r,t),a.resolve(),a.promise})}),Ext.define("Ext.exporter.Base",{mixins:["Ext.mixin.Factoryable"],alias:"exporter.base",requires:["Ext.exporter.data.Table","Ext.exporter.file.Style","Ext.exporter.File"],config:{data:null,showSummary:!0,title:null,author:"Sencha",fileName:"export.txt",charset:"UTF-8",mimeType:"text/plain",binary:!1},constructor:function(e){return this.initConfig(e||{}),Ext.exporter.File.initializePopup(this.getBinary()),this.callParent([e])},destroy:function(){this.setData(Ext.destroy(this.getData())),this.callParent()},getContent:Ext.identityFn,saveAs:function(){var e=new Ext.Deferred;return Ext.asap(this.delayedSave,this,[e]),e.promise},delayedSave:function(t){var e=this.getBinary()?"saveBinaryAs":"saveAs";Ext.exporter.File[e](this.getContent(),this.getFileName(),this.getCharset(),this.getMimeType()).then(function(){t.resolve()},function(e){t.reject(e)})},getColumnCount:function(e){var t,i=0;if(!e)return i;for(t=0;t<e.length;t++)e[t].columns?i+=this.getColumnCount(e[t].columns):i+=1;return i},applyData:function(e){return!e||e.isDataTable?e:new Ext.exporter.data.Table(e)}}),Ext.define("Ext.exporter.file.ooxml.Base",{extend:"Ext.exporter.file.Base",config:{tplAttributes:{$value:[],merge:function(e,t){return[].concat(e,t)}},tplNonAttributes:{$value:["idPrefix","id","autoGenerateId","self","tplAttributes","tplNonAttributes"],merge:function(e,t){return[].concat(e,t)}}},generateTplAttributes:!1,processRenderData:function(e){var t,i,n=this.getTplAttributes(),r=this.getTplNonAttributes(),o=Ext.Object.getAllKeys(e),a=o.length,s="";if(!this.generateTplAttributes)return e.attributes="",e;for(t=0;t<a;t++)i=o[t],n&&n.length?0<=Ext.Array.indexOf(n,i)&&null!==e[i]&&(s+=(s.length?" ":"")+this.processTplAttribute(i,e[i])):r&&r.length&&Ext.Array.indexOf(r,i)<0&&null!==e[i]&&(s+=(s.length?" ":"")+this.processTplAttribute(i,e[i]));return e.attributes=s,e},processTplAttribute:function(e,t){var i=t;return"boolean"==typeof t?i=Number(t):"string"==typeof t&&(i=Ext.util.Base64._utf8_encode(Ext.util.Format.htmlEncode(t||""))),e+'="'+i+'"'}}),Ext.define("Ext.exporter.file.ooxml.Relationship",{extend:"Ext.exporter.file.Base",isRelationship:!0,config:{idPrefix:"rId",schema:"",target:"",parentFolder:null,path:null},tpl:['<Relationship Id="{id}" Type="{schema}" Target="{path}"/>'],updateTarget:function(e){this.calculatePath()},applyParentFolder:function(e){return"/"===(e=e||"")[e.length-1]&&(e=e.slice(0,e.length-1)),e},updateParentFolder:function(e){this.calculatePath()},calculatePath:function(){var e,t=String(this.getParentFolder()||""),i=String(this.getTarget()||""),n=t.split("/"),r=i.split("/"),o=Math.min(n.length,r.length),a=o,s="",l=[];for(e=0;e<o;e++)if(n[e]!==r[e]){a=e;break}if(0===a)s=i;else{for(e=a;e<n.length;e++)l.push("..");s=(l=l.concat(r.slice(a))).join("/")}this.setPath(s)}}),Ext.define("Ext.exporter.file.ooxml.ContentType",{extend:"Ext.exporter.file.Base",isContentType:!0,config:{tag:"Override",partName:"",contentType:"",extension:""},tpl:["<{tag}",'<tpl if="extension"> Extension="{extension}"</tpl>','<tpl if="partName"> PartName="{partName}"</tpl>','<tpl if="contentType"> ContentType="{contentType}"</tpl>',"/>"]}),Ext.define("Ext.exporter.file.ooxml.Xml",{extend:"Ext.exporter.file.ooxml.Base",requires:["Ext.exporter.file.ooxml.Relationship","Ext.exporter.file.ooxml.ContentType"],config:{folder:null,fileName:null,path:null,relationship:null,contentType:null},cachedConfig:{fileNameTemplate:"{fileName}.xml"},tplNonAttributes:["path","relationship","contentType","fileName","folder","fileNameTemplate"],destroy:function(){this.setRelationship(null),this.setContentType(null),this.callParent()},applyFolder:function(e){return"/"!==(e=e||"")[e.length-1]&&(e+="/"),e},updateFolder:function(){this.generatePath()},updateFileName:function(){this.generatePath()},getFileNameFromTemplate:function(){var e=Ext.XTemplate.getTpl(this,"_fileNameTemplate");return e?e.apply(this.getConfig()):""},generatePath:function(){this.setPath((this.getFolder()||"")+this.getFileNameFromTemplate())},updatePath:function(e){var t=this.getRelationship(),i=this.getContentType();t&&t.setTarget(e),i&&i.setPartName(e)},applyRelationship:function(e){return!e||e.isRelationship?e:new Ext.exporter.file.ooxml.Relationship(e)},updateRelationship:function(e,t){Ext.destroy(t)},applyContentType:function(e){return!e||e.isContentType?e:new Ext.exporter.file.ooxml.ContentType(e)},updateContentType:function(e,t){Ext.destroy(t)},collectFiles:Ext.emptyFn}),Ext.define("Ext.exporter.file.ooxml.Relationships",{extend:"Ext.exporter.file.ooxml.Xml",isRelationships:!0,currentIndex:1,config:{parentFolder:null,items:[]},contentType:{contentType:"application/vnd.openxmlformats-package.relationships+xml"},fileNameTemplate:"{fileName}.rels",tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">','<tpl if="items"><tpl for="items.getRange()">{[values.render()]}</tpl></tpl>',"</Relationships>"],collectFiles:function(e){var t,i=this.getItems(),n=i.length,r=this.getParentFolder();if(n){for(t=0;t<n;t++)i.getAt(t).setParentFolder(r);e[this.getPath()]=this.render()}},applyFolder:function(e,t){return(e=this.callParent([e,t]))+"_rels/"},applyItems:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.Relationship")},updateItems:function(e,t){t&&t.un({add:this.updateIds,remove:this.updateIds,scope:this}),e&&e.on({add:this.updateIds,remove:this.updateIds,scope:this})},updateIds:function(e){var t,i;if(e)for(i=e.length,t=0;t<i;t++)e.getAt(t).setId("rId"+(t+1))},addRelationship:function(e){return this.getItems().add(e||{})},removeRelationship:function(e){return this.getItems().remove(e)}}),Ext.define("Ext.exporter.file.ooxml.XmlRels",{extend:"Ext.exporter.file.ooxml.Xml",requires:["Ext.exporter.file.ooxml.Relationships"],config:{index:null,name:null,relationships:{contentType:{contentType:"application/vnd.openxmlformats-package.relationships+xml"}}},cachedConfig:{nameTemplate:"{name}"},tplNonAttributes:["index","relationships","nameTemplate"],contentType:{},relationship:{},fileNameTemplate:"{fileName}{index}.xml",destroy:function(){this.setRelationships(null),this.callParent()},updateFolder:function(e,t){var i=this.getRelationships();i&&i.setFolder(e),this.callParent([e,t])},applyRelationships:function(e){return!e||e.isRelationships?e:new Ext.exporter.file.ooxml.Relationships(e)},updateRelationships:function(e,t){Ext.destroy(t)},updateIndex:function(){this.generatePath()},generateName:function(){var e=Ext.XTemplate.getTpl(this,"_nameTemplate");this.setName(e?e.apply(this.getConfig()):"")},collectFiles:function(e){this.collectRelationshipsFiles(e),e[this.getPath()]=this.render()},collectRelationshipsFiles:function(e){var t=this.getRelationships(),i=this.getFileName();t&&(t.setFileName(i?this.getFileNameFromTemplate():""),t.setParentFolder(this.getFolder()),t.collectFiles(e))},collectContentTypes:function(e){e.push(this.getContentType())}}),Ext.define("Ext.exporter.file.zip.File",{extend:"Ext.Base",requires:["Ext.overrides.exporter.util.Format"],config:{path:"",data:null,dateTime:null,folder:!1},constructor:function(e){return this.initConfig(e),this.getDateTime()||this.setDateTime(new Date),this.callParent([e])},getId:function(){return this.getPath()},crc32:function(e,t){var i,n,r,o=this.self.crcTable;if(void 0===e||!e.length)return 0;for(i="string"!=typeof e,void 0===t&&(t=0),t^=-1,n=0,r=e.length;n<r;n++)t=t>>>8^o[255&(t^(i?e[n]:e.charCodeAt(n)))];return-1^t},getHeader:function(e){var t,i,n=this.getData(),r=this.getPath(),o=Ext.util.Base64._utf8_encode(r),a=o!==r,s=this.getDateTime(),l="",d="",u=Ext.util.Format.decToHex,c="";return t=s.getHours(),t<<=6,t|=s.getMinutes(),t<<=5,t|=s.getSeconds()/2,i=s.getFullYear()-1980,i<<=4,i|=s.getMonth()+1,i<<=5,i|=s.getDate(),a&&(d=u(1,1)+u(this.crc32(o),4)+o,l+="up"+u(d.length,2)+d),c+="\n\0",c+=a?"\0\b":"\0\0",c+="\0\0",c+=u(t,2),c+=u(i,2),c+=u(n?this.crc32(n):0,4),c+=u(n?n.length:0,4),c+=u(n?n.length:0,4),c+=u(o.length,2),{fileHeader:"PK"+(c+=u(l.length,2))+o+l,dirHeader:"PK\0"+c+"\0\0\0\0\0\0"+(!0===this.getFolder()?"\0\0\0":"\0\0\0\0")+u(e,4)+o+l,data:n||""}}},function(e){var t,i,n,r=[];for(i=0;i<256;i++){for(t=i,n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;r[i]=t}e.crcTable=r}),Ext.define("Ext.exporter.file.zip.Folder",{extend:"Ext.exporter.file.zip.File",folder:!0}),Ext.define("Ext.exporter.file.zip.Archive",{extend:"Ext.exporter.file.Base",requires:["Ext.exporter.file.zip.Folder"],config:{folders:[],files:[]},destroy:function(){this.setFolders(null),this.setFiles(null),this.callParent()},applyFolders:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.zip.Folder")},applyFiles:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.zip.File")},updateFiles:function(e,t){t&&t.un({add:this.onFileAdd,remove:this.onFileRemove,scope:this}),e&&(e.on({add:this.onFileAdd,remove:this.onFileRemove,scope:this}),this.onFileAdd(e,{items:e.getRange()}))},onFileAdd:function(e,t){var i,n,r,o=this.getFolders(),a=t.items,s=a.length;for(i=0;i<s;i++)n=a[i],(r=this.getParentFolder(n.getPath()))&&o.add({path:r})},onFileRemove:function(e,t){Ext.destroy(t.items)},getParentFolder:function(e){var t;return"/"===e.slice(-1)&&(e=e.substring(0,e.length-1)),0<(t=e.lastIndexOf("/"))?e.substring(0,t+1):""},addFile:function(e){return this.getFiles().add(e||{})},removeFile:function(e){return this.getFiles().remove(e)},getContent:function(){var e,t,i,n="",r="",o=0,a=0,s=Ext.util.Format.decToHex,l=[];for(Ext.Array.insert(l,0,this._folders.items),Ext.Array.insert(l,l.length,this._files.items),e=l.length,t=0;t<e;t++)o+=(i=l[t].getHeader(o)).fileHeader.length+i.data.length,a+=i.dirHeader.length,n+=i.fileHeader+i.data,r+=i.dirHeader;return n+=r+("PK\0\0\0\0"+s(e,2)+s(e,2)+s(a,4)+s(o,4)+"\0\0")}}),Ext.define("Ext.exporter.file.ooxml.excel.Sheet",{extend:"Ext.exporter.file.ooxml.XmlRels",config:{workbook:null},folder:"sheet",fileName:"sheet",nameTemplate:"Sheet{index}",fileNameTemplate:"{fileName}{index}.xml",nameLengthLimit:31,nameRegex:/[\/*?:\[\]]/gi,destroy:function(){this.callParent(),this.setWorkbook(null)},updateIndex:function(){null==this._name&&this.generateName(),this.callParent(arguments)},applyName:function(e){var t=this.nameLengthLimit,i=Ext.String.trim(String(e||"").replace(this.nameRegex,""));return i=i.length>t+3?Ext.String.ellipsis(i,t):i.substr(0,t),Ext.util.Format.htmlEncode(i)},updateName:function(t){var i=this,e=i.getWorkbook(),n=!1;i.isNaming||i.isConfiguring||(e&&(n=!!e.getSheets().findBy(function(e){return e!==i&&e.getName()===t})),(n=n||Ext.isEmpty(t))&&(i.isNaming=!0,i.generateName(),i.isNaming=!1))}}),Ext.define("Ext.exporter.file.ooxml.excel.Column",{extend:"Ext.exporter.file.ooxml.Base",config:{min:1,max:1,width:10,autoFitWidth:!1,hidden:!1,styleId:null},tpl:["<col ",'min="{min}" ','max="{max}" ','width="{width}"','<tpl if="styleId"> style="{styleId}"</tpl>','<tpl if="hidden"> hidden="1"</tpl>','<tpl if="autoFitWidth"> bestFit="1"</tpl>','<tpl if="width != 10"> customWidth="1"</tpl>',"/>"]}),Ext.define("Ext.exporter.file.ooxml.excel.Cell",{extend:"Ext.exporter.file.Base",isCell:!0,config:{row:null,dataType:null,showPhonetic:null,index:null,styleId:null,mergeAcross:null,mergeDown:null,value:null,serializeDateToNumber:!0},isMergedCell:!1,tpl:['<c r="{ref}"','<tpl if="value != null"> t="{dataType}"</tpl>','<tpl if="showPhonetic"> ph="1"</tpl>','<tpl if="styleId"> s="{styleId}"</tpl>','<tpl if="value == null">/><tpl else>><v>{value}</v></c></tpl>'],constructor:function(e){var t=e;return(null==e||Ext.isDate(e)||Ext.isPrimitive(e))&&(t={value:e}),this.callParent([t])},destroy:function(){this.setRow(null),this.callParent()},getRef:function(){return this.getNotation(this._index)+this._row._index},getRenderData:function(){var e={},t=this._row&&this._row._worksheet,i=t&&t._workbook;return e.dataType=this._dataType,e.value=this._value,e.showPhonetic=this._showPhonetic,e.styleId=this._styleId,this.isMergedCell&&t&&t.setMergedCellsNo(t._mergedCellsNo+1),"s"===e.dataType&&i&&(e.value=i._sharedStrings.addString(e.value)),e.ref=this.getRef(),e},applyValue:function(e){var t;return null!=e&&("number"==typeof e?t="n":"string"==typeof e?(t="s",e=Ext.util.Format.stripTags(e)):e instanceof Date?e=this.getSerializeDateToNumber()?(t="n",this.dateValue(e)):(t="d",Ext.Date.format(e,"Y-m-d\\TH:i:s.u")):t="b",this.setDataType(t)),e},updateMergeAcross:function(e){this.isMergedCell=e||this._mergeDown},updateMergeDown:function(e){this.isMergedCell=e||this._mergeAcross},getMergedCellRef:function(){var e=this._index,t=this._row._index,i=this._mergeAcross,n=this._mergeDown,r=this.getNotation(e)+t+":";return i&&(e+=i),n&&(t+=n),r+=this.getNotation(e)+t},getNotation:function(e){var t,i,n=String.fromCharCode;return e<=0&&(e=1),t=e%26,0===(i=Math.floor(e/26))||26===e?n(65+e-1):0==t?this.getNotation(i-1)+"Z":i<26?n(65+i-1)+n(65+t-1):this.getNotation(i)+n(65+t-1)},dateValue:function(e){return 25569+(e.getTime()-60*e.getTimezoneOffset()*1e3)/864e5}}),Ext.define("Ext.exporter.file.ooxml.excel.Row",{extend:"Ext.exporter.file.Base",requires:["Ext.exporter.file.ooxml.excel.Cell"],config:{collapsed:null,hidden:null,height:null,outlineLevel:null,showPhonetic:null,index:null,styleId:null,worksheet:null,cells:[],cachedCells:null},tpl:["<row",'<tpl if="index"> r="{index}"</tpl>','<tpl if="collapsed"> collapsed="{collapsed}"</tpl>','<tpl if="hidden"> hidden="1"</tpl>','<tpl if="height"> ht="{height}" customHeight="1"</tpl>','<tpl if="outlineLevel"> outlineLevel="{outlineLevel}"</tpl>','<tpl if="styleId"> s="{styleId}" customFormat="1"</tpl>','<tpl if="cachedCells">',">{cachedCells}</row>",'<tpl elseif="cells && cells.length">','><tpl for="cells.items">{[values.render()]}</tpl></row>',"<tpl else>","/>","</tpl>"],lastCellIndex:1,constructor:function(e){var t=e;return Ext.isArray(e)&&(t={cells:e}),this.callParent([t])},destroy:function(){this.setWorksheet(null),this.callParent()},applyCells:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Cell")},updateCells:function(e,t){t&&e.un({add:this.onCellAdd,remove:this.onCellRemove,scope:this}),e&&(e.on({add:this.onCellAdd,remove:this.onCellRemove,scope:this}),this.onCellAdd(e,{items:e.getRange()}))},onCellAdd:function(e,t){var i,n,r,o=t.items,a=o.length;for(i=0;i<a;i++)(n=o[i]).setRow(this),(r=n._index)?this.lastCellIndex=Math.max(e.length,r)+1:n.setIndex(this.lastCellIndex++)},onCellRemove:function(e,t){Ext.destroy(t.items),this.updateCellIndexes()},addCell:function(e){return this._cells||this.setCells([]),this._cells.add(e||{})},getCell:function(e){return this._cells?this._cells.get(e):null},beginCellRendering:function(){this.tempCells=[],this.startCaching=!0,this.lastCellIndex=1,this.cachedCell||(this.cachedCell=new Ext.exporter.file.ooxml.excel.Cell({row:this}),this.cachedCellConfig=this.cachedCell.getConfig(),this.cachedCellConfig.id=null)},endCellRendering:function(){this.setCachedCells(this.tempCells.join("")),this.tempCells=null,this.startCaching=!1,this.lastCellIndex=1},renderCells:function(e){var t,i,n,r,o,a={first:null,last:null,row:"",merged:""},s=e.length,l=[];for(this.beginCellRendering(),r=this.cachedCell,t=0;t<s;t++)n="object"!=typeof(i=e[t]||{})||i instanceof Date?{value:i}:i,Ext.applyIf(n,this.cachedCellConfig),r.setValue(n.value),r.setShowPhonetic(n.showPhonetic),r.setStyleId(n.styleId),r.setMergeAcross(n.mergeAcross),r.setMergeDown(n.mergeDown),r.setIndex(n.index),(o=r.getIndex())?this.lastCellIndex=Math.max(this.lastCellIndex,o)+1:r.setIndex(this.lastCellIndex++),0===t?a.first=a.last=r.getRef():t===s-1&&(a.last=r.getRef()),this.tempCells.push(r.render()),r.isMergedCell&&l.push('<mergeCell ref="'+r.getMergedCellRef()+'"/>');return this.endCellRendering(),a.row=this.render(),a.merged=l.join(""),a}}),Ext.define("Ext.exporter.file.ooxml.excel.Location",{extend:"Ext.exporter.file.ooxml.Base",config:{ref:null,firstHeaderRow:null,firstDataRow:null,firstDataCol:null,rowPageCount:null,colPageCount:null},generateTplAttributes:!0,tpl:["<location {attributes}/>"]}),Ext.define("Ext.exporter.file.ooxml.excel.FieldItem",{extend:"Ext.exporter.file.ooxml.Base",config:{c:null,d:null,e:null,f:null,h:null,m:null,n:null,s:null,sd:null,t:null,x:null},generateTplAttributes:!0,tpl:["<item {attributes}/>"]}),Ext.define("Ext.exporter.file.ooxml.excel.PivotAreaReference",{extend:"Ext.exporter.file.ooxml.Base",config:{avgSubtotal:null,byPosition:null,count:null,countASubtotal:null,countSubtotal:null,defaultSubtotal:null,field:null,maxSubtotal:null,minSubtotal:null,productSubtotal:null,relative:null,selected:null,stdDevPSubtotal:null,stdDevSubtotal:null,sumSubtotal:null,varPSubtotal:null,varSubtotal:null,items:[]},tplNonAttributes:["items"],generateTplAttributes:!0,tpl:["<reference {attributes}>",'<tpl if="items"><tpl for="items"><x v="{.}"/></tpl></tpl>',"</reference>"],getCount:function(){return this.getItems().length},applyItems:function(e){return null!==e?Ext.Array.from(e):null}}),Ext.define("Ext.exporter.file.ooxml.excel.PivotArea",{extend:"Ext.exporter.file.ooxml.Base",requires:["Ext.exporter.file.ooxml.excel.PivotAreaReference"],config:{axis:null,cacheIndex:null,collapsedLevelsAreSubtotals:null,dataOnly:null,field:null,fieldPosition:null,grandCol:null,grandRow:null,labelOnly:null,offset:null,outline:null,type:null,references:null},tplNonAttributes:["references"],generateTplAttributes:!0,tpl:["<pivotArea {attributes}>",'<tpl if="references">','    <references count="{references.length}">','        <tpl for="references.getRange()">{[values.render()]}</tpl>',"    </references>","</tpl>","</pivotArea>"],applyReferences:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.PivotAreaReference")}}),Ext.define("Ext.exporter.file.ooxml.excel.AutoSortScope",{extend:"Ext.exporter.file.ooxml.Base",requires:["Ext.exporter.file.ooxml.excel.PivotArea"],config:{pivotArea:{}},tpl:["<autoSortScope>{[values.pivotArea.render()]}</autoSortScope>"],destroy:function(){this.setPivotArea(null),this.callParent()},applyPivotArea:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.PivotArea(e)},updatePivotArea:function(e,t){Ext.destroy(t)}}),Ext.define("Ext.exporter.file.ooxml.excel.PivotField",{extend:"Ext.exporter.file.ooxml.Base",requires:["Ext.exporter.file.ooxml.excel.FieldItem","Ext.exporter.file.ooxml.excel.AutoSortScope"],config:{allDrilled:null,autoShow:null,avgSubtotal:null,axis:null,compact:null,countASubtotal:null,countSubtotal:null,dataField:null,dataSourceSort:null,defaultAttributeDrillState:null,defaultSubtotal:null,dragOff:null,dragToCol:null,dragToData:null,dragToPage:null,dragToRow:null,hiddenLevel:null,hideNewItems:null,includeNewItemsInFilter:null,insertBlankRow:null,insertPageBreak:null,itemPageCount:null,maxSubtotal:null,measureFilter:null,minSubtotal:null,multipleItemSelectionAllowed:null,nonAutoSortDefault:null,numFmtId:null,outline:null,productSubtotal:null,rankBy:null,serverField:null,showAll:null,showDropDowns:null,showPropAsCaption:null,showPropCell:null,showPropTip:null,sortType:null,stdDevPSubtotal:null,stdDevSubtotal:null,subtotalCaption:null,subtotalTop:null,sumSubtotal:null,topAutoShow:null,uniqueMemberProperty:null,varPSubtotal:null,varSubtotal:null,items:null,autoSortScope:null},tplNonAttributes:["items","autoSortScope"],generateTplAttributes:!0,tpl:['<tpl if="items || autoSortScope">',"<pivotField {attributes}>",'<tpl if="items"><items count="{items.length}"><tpl for="items.getRange()">{[values.render()]}</tpl></items></tpl>','<tpl if="autoSortScope">{[values.autoSortScope.render()]}</tpl>',"</pivotField>","<tpl else>","<pivotField {attributes} />","</tpl>"],destroy:function(){this.setAutoSortScope(null),this.callParent()},applyItems:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.FieldItem")},applyAutoSortScope:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.AutoSortScope(e)},updateAutoSortScope:function(e,t){Ext.destroy(t)}}),Ext.define("Ext.exporter.file.ooxml.excel.Field",{extend:"Ext.exporter.file.ooxml.Base",config:{x:null},tpl:['<field x="{x}"/>']}),Ext.define("Ext.exporter.file.ooxml.excel.Item",{extend:"Ext.exporter.file.ooxml.Base",config:{i:null,r:null,t:null,x:null},tpl:['<tpl if="x"><i{attr}>{x}</i><tpl else><i{attr}/></tpl>'],getRenderData:function(){var e,t=this.callParent(),i=t.x?t.x.length:0,n="",r="";for(e=0;e<i;e++)0<t.x[e]?n+='<x v="'+t.x[e]+'"/>':n+="<x/>";return t.x=n,t.t&&(r+=' t="'+t.t+'"'),0<t.r&&(r+=' r="'+t.r+'"'),0<t.i&&(r+=' i="'+t.i+'"'),t.attr=r,t},applyX:function(e){return null!=e?Ext.Array.from(e):null}}),Ext.define("Ext.exporter.file.ooxml.excel.DataField",{extend:"Ext.exporter.file.ooxml.Base",config:{baseField:null,baseItem:null,fld:null,name:null,numFmtId:null,showDataAs:null,subtotal:null},generateTplAttributes:!0,tpl:["<dataField {attributes}/>"]}),Ext.define("Ext.exporter.file.ooxml.excel.Record",{extend:"Ext.exporter.file.ooxml.Base",config:{items:null},tplNonAttributes:["items","stritems"],tpl:['<tpl if="stritems">',"<r>","{stritems}","</r>","<tpl else>","<r/>","</tpl>"],numberTpl:'<n v="{0}"/>',booleanTpl:'<b v="{0}"/>',stringTpl:'<s v="{0}"/>',dateTpl:'<d v="{0}"/>',constructor:function(e){var t;return t=Ext.isArray(e)||Ext.isDate(e)||Ext.isPrimitive(e)?{items:e}:e,this.callParent([t])},getRenderData:function(){var e,t,i,n,r=this.callParent(),o=r.items,a="",s=[];if(o)for(t=o.length,e=0;e<t;e++)null==(i=o[e])||""===i||("string"==typeof i?(n=this.stringTpl,i=Ext.util.Base64._utf8_encode(Ext.util.Format.htmlEncode(i)),s.push("s")):"boolean"==typeof i?(n=this.booleanTpl,s.push("b")):"number"==typeof i?(n=this.numberTpl,s.push("n")):i instanceof Date&&(n=this.dateTpl,i=Ext.Date.format(i,"Y-m-d\\TH:i:s.u"),s.push("d")),a+=Ext.String.format(n,i));return r.stritems=a,r},applyItems:function(e){return null!==e?Ext.Array.from(e):null}}),Ext.define("Ext.exporter.file.ooxml.excel.PivotCacheRecords",{extend:"Ext.exporter.file.ooxml.XmlRels",requires:["Ext.exporter.file.ooxml.excel.Record"],config:{items:[]},folder:"/xl/pivotCache/",fileName:"pivotCacheRecords",contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotCacheRecords"},tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<pivotCacheRecords xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" ','xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" count="{items.length}">','<tpl for="items.getRange()">{[values.render()]}</tpl>',"</pivotCacheRecords>"],applyItems:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Record")}}),Ext.define("Ext.exporter.file.ooxml.excel.WorksheetSource",{extend:"Ext.exporter.file.ooxml.Base",config:{id:null,name:null,ref:null,sheet:null},autoGenerateId:!1,tplAttributes:["id","name","ref","sheet"],generateTplAttributes:!0,tpl:["<worksheetSource {attributes} />"]}),Ext.define("Ext.exporter.file.ooxml.excel.CacheSource",{extend:"Ext.exporter.file.ooxml.Base",requires:["Ext.exporter.file.ooxml.excel.WorksheetSource"],config:{type:"worksheet",worksheetSource:{}},tplNonAttributes:["worksheetSource"],generateTplAttributes:!0,tpl:["<cacheSource {attributes}>","<tpl if=\"type == 'worksheet'\">","{[values.worksheetSource.render()]}","</tpl>","</cacheSource>"],destroy:function(){this.setWorksheetSource(null),this.callParent()},applyWorksheetSource:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.WorksheetSource(e)},updateWorksheetSource:function(e,t){Ext.destroy(t)}}),Ext.define("Ext.exporter.file.ooxml.excel.SharedItems",{extend:"Ext.exporter.file.ooxml.Base",config:{containsBlank:null,containsDate:null,containsInteger:null,containsMixedTypes:null,containsNonDate:null,containsNumber:null,containsSemiMixedTypes:null,containsString:null,longText:null,maxDate:null,maxValue:null,minDate:null,minValue:null,items:null},tplNonAttributes:["items","stritems"],generateTplAttributes:!0,tpl:['<tpl if="stritems">',"<sharedItems {attributes}>","{stritems}","</sharedItems>","<tpl else>","<sharedItems {attributes}/>","</tpl>"],numberTpl:'<n v="{0}"/>',booleanTpl:'<b v="{0}"/>',stringTpl:'<s v="{0}"/>',dateTpl:'<d v="{0}"/>',getRenderData:function(){var e,t,i,n,r=this.callParent(),o=r.items,a="",s=!1,l=!1,d=!1,u=!1,c=0,h=[],f=null,g=null;if(o)for(t=o.length,e=0;e<t;e++)null==(i=o[e])||""===i?0:(c++,"string"==typeof i?(d=!0,n=this.stringTpl,i=Ext.util.Base64._utf8_encode(Ext.util.Format.htmlEncode(i)),h.push("s")):"boolean"==typeof i?(n=this.booleanTpl,h.push("b")):"number"==typeof i?(s=!0,n=this.numberTpl,f=Math.min(f,i),g=Math.max(g,i),0<=String(i).indexOf(".")&&(u=!0),h.push("n")):i instanceof Date&&(l=!0,n=this.dateTpl,i=Ext.Date.format(i,"Y-m-d\\TH:i:s.u"),h.push("d")),a+=Ext.String.format(n,i));return 0<c&&(r.count=c),r.stritems=a,l&&(r.containsSemiMixedTypes=d,r.containsDate=!0,r.stritems=""),s&&(r.containsSemiMixedTypes=d,r.containsNumber=!0,r.minValue=f,r.maxValue=g,u||(r.containsInteger=!0)),r.containsString=d,0<(t=Ext.Array.unique(h))&&(r.containsMixedTypes=1<t),r},applyItems:function(e){return null!==e?Ext.Array.from(e):null},updateMinValue:function(e){null!=e&&this.setContainsNumber(!0)},updateMaxValue:function(e){null!=e&&this.setContainsNumber(!0)},applyMinDate:function(e){return e=e&&Ext.Date.format(e,"Y-m-d\\TH:i:s.u")},updateMinDate:function(e){null!=e&&this.setContainsDate(!0)},applyMaxDate:function(e){return e=e&&Ext.Date.format(e,"Y-m-d\\TH:i:s.u")},updateMaxDate:function(e){null!=e&&this.setContainsDate(!0)}}),Ext.define("Ext.exporter.file.ooxml.excel.CacheField",{extend:"Ext.exporter.file.ooxml.Base",requires:["Ext.exporter.file.ooxml.excel.SharedItems"],config:{caption:null,databaseField:null,formula:null,hierarchy:null,level:null,mappingCount:null,memberPropertyField:null,name:null,numFmtId:null,propertyName:null,serverField:null,sqlType:null,uniqueList:null,sharedItems:{},fieldGroup:null,mpMap:null},tplNonAttributes:["sharedItems","fieldGroup","mpMap"],generateTplAttributes:!0,tpl:["<cacheField {attributes}>",'<tpl if="sharedItems">{[values.sharedItems.render()]}</tpl>',"</cacheField>"],destroy:function(){this.setSharedItems(null),this.callParent()},applySharedItems:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.SharedItems(e)},updateSharedItems:function(e,t){Ext.destroy(t)}}),Ext.define("Ext.exporter.file.ooxml.excel.PivotCache",{extend:"Ext.exporter.file.ooxml.Base",config:{id:null,cacheId:null},autoGenerateId:!1,tpl:['<pivotCache cacheId="{cacheId}" r:id="{id}"/>']}),Ext.define("Ext.exporter.file.ooxml.excel.PivotCacheDefinition",{extend:"Ext.exporter.file.ooxml.XmlRels",requires:["Ext.exporter.file.ooxml.excel.PivotCacheRecords","Ext.exporter.file.ooxml.excel.CacheSource","Ext.exporter.file.ooxml.excel.CacheField","Ext.exporter.file.ooxml.excel.PivotCache"],config:{backgroundQuery:null,createdVersion:null,enableRefresh:null,invalid:null,minRefreshableVersion:null,missingItemsLimit:null,optimizeMemory:null,recordCount:null,refreshedBy:null,refreshedDateIso:null,refreshedVersion:null,refreshOnLoad:null,saveData:null,supportAdvancedDrill:null,supportSubquery:null,tupleCache:null,upgradeOnRefresh:null,cacheRecords:{},cacheSource:{},cacheFields:null,pivotCache:{}},folder:"/xl/pivotCache/",fileName:"pivotCacheDefinition",contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotCacheDefinition"},tplNonAttributes:["cacheRecords","cacheSource","cacheFields","pivotCache"],generateTplAttributes:!0,tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<pivotCacheDefinition xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" ','xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" r:id="{[values.relationship.getId()]}" {attributes}>',"{[values.cacheSource.render()]}",'<tpl if="cacheFields"><cacheFields count="{cacheFields.length}"><tpl for="cacheFields.getRange()">{[values.render()]}</tpl></cacheFields></tpl>',"</pivotCacheDefinition>"],destroy:function(){this.setCacheRecords(null),this.setCacheSource(null),this.setPivotCache(null),this.callParent()},getRenderData:function(){var e=this.callParent(),t=this.getCacheRecords();return t&&(t=t.getItems(),e.recordCount=t.length),e},collectFiles:function(e){var t=this.getCacheRecords();t&&t.collectFiles(e),this.callParent([e])},collectContentTypes:function(e){var t=this.getCacheRecords();t&&t.collectContentTypes(e),this.callParent([e])},updateIndex:function(e,t){var i=this.getCacheRecords();i&&i.setIndex(e),this.callParent([e,t])},applyPivotCache:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.PivotCache(e)},updatePivotCache:function(e,t){Ext.destroy(t)},applyCacheRecords:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.PivotCacheRecords(e)},updateCacheRecords:function(e,t){var i,n=this.getRelationships();t&&n.removeRelationship(t.getRelationship()),Ext.destroy(t),e&&(i=e.getRelationship(),n.addRelationship(i),this.setId(i.getId()))},applyCacheSource:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.CacheSource(e)},updateCacheSource:function(e,t){Ext.destroy(t)},applyCacheFields:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.CacheField")}}),Ext.define("Ext.exporter.file.ooxml.excel.PivotTableStyleInfo",{extend:"Ext.exporter.file.ooxml.Base",config:{name:"PivotStyleLight2",showColHeaders:!0,showColStripes:null,showLastColumn:!0,showRowHeaders:!0,showRowStripes:null},generateTplAttributes:!0,tpl:["<pivotTableStyleInfo {attributes}/>"]}),Ext.define("Ext.exporter.file.ooxml.excel.PivotTable",{extend:"Ext.exporter.file.ooxml.XmlRels",requires:["Ext.exporter.file.ooxml.excel.Location","Ext.exporter.file.ooxml.excel.PivotField","Ext.exporter.file.ooxml.excel.Field","Ext.exporter.file.ooxml.excel.Item","Ext.exporter.file.ooxml.excel.DataField","Ext.exporter.file.ooxml.excel.PivotCacheDefinition","Ext.exporter.file.ooxml.excel.PivotTableStyleInfo"],config:{applyAlignmentFormats:!1,applyBorderFormats:!1,applyFontFormats:!1,applyNumberFormats:!1,applyPatternFormats:!1,applyWidthHeightFormats:!0,asteriskTotals:null,autoFormatId:4096,cacheId:null,chartFormat:null,colGrandTotals:null,colHeaderCaption:null,compact:!1,compactData:!1,createdVersion:null,customListSort:null,dataCaption:"Values",dataOnRows:null,dataPosition:null,disableFieldList:null,editData:null,enableDrill:null,enableFieldProperties:null,enableWizard:null,errorCaption:null,fieldListSortAscending:null,fieldPrintTitles:null,grandTotalCaption:null,gridDropZones:null,immersive:null,indent:null,itemPrintTitles:!0,mdxSubqueries:null,mergeItem:null,minRefreshableVersion:null,missingCaption:null,multipleFieldFilters:!1,name:null,outline:!0,outlineData:null,pageOverThenDown:null,pageStyle:null,pageWrap:null,pivotTableStyle:null,preserveFormatting:null,printDrill:null,published:null,rowGrandTotals:null,rowHeaderCaption:null,showCalcMbrs:null,showDataDropDown:null,showDataTips:null,showDrill:null,showDropZones:null,showEmptyCol:null,showEmptyRow:null,showError:null,showHeaders:null,showItems:null,showMemberPropertyTips:null,showMissing:null,showMultipleLabel:null,subtotalHiddenItems:null,tag:null,updatedVersion:null,useAutoFormatting:!0,vacatedStyle:null,visualTotals:null,location:{},pivotFields:null,rowFields:null,rowItems:null,colFields:null,colItems:null,pageFields:null,dataFields:null,pivotTableStyleInfo:{},worksheet:null,cacheDefinition:{},viewLayoutType:"outline"},folder:"/xl/pivotTables/",fileName:"pivotTable",nameTemplate:"PivotTable{index}",contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotTable"},tplNonAttributes:["location","worksheet","cacheDefinition","pivotFields","rowFields","rowItems","colFields","colItems","pageFields","dataFields","pivotTableStyleInfo","viewLayoutType"],generateTplAttributes:!0,tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<pivotTableDefinition xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" {attributes}>',"{[values.location.render()]}",'<tpl if="pivotFields && pivotFields.length"><pivotFields count="{pivotFields.length}"><tpl for="pivotFields.getRange()">{[values.render()]}</tpl></pivotFields></tpl>','<tpl if="rowFields && rowFields.length"><rowFields count="{rowFields.length}"><tpl for="rowFields.getRange()">{[values.render()]}</tpl></rowFields></tpl>','<tpl if="rowItems && rowItems.length"><rowItems count="{rowItems.length}"><tpl for="rowItems.getRange()">{[values.render()]}</tpl></rowItems></tpl>','<tpl if="colFields && colFields.length"><colFields count="{colFields.length}"><tpl for="colFields.getRange()">{[values.render()]}</tpl></colFields></tpl>','<tpl if="colItems && colItems.length"><colItems count="{colItems.length}"><tpl for="colItems.getRange()">{[values.render()]}</tpl></colItems></tpl>','<tpl if="pageFields && pageFields.length"><pageFields count="{pageFields.length}"><tpl for="pageFields.getRange()">{[values.render()]}</tpl></pageFields></tpl>','<tpl if="dataFields && dataFields.length"><dataFields count="{dataFields.length}"><tpl for="dataFields.getRange()">{[values.render()]}</tpl></dataFields></tpl>','<tpl if="pivotTableStyleInfo">{[values.pivotTableStyleInfo.render()]}</tpl>',"</pivotTableDefinition>"],destroy:function(){this.setWorksheet(null),this.setLocation(null),this.setCacheDefinition(null),this.setPivotTableStyleInfo(null),this.callParent()},collectFiles:function(e){this.getCacheDefinition().collectFiles(e),this.callParent([e])},collectContentTypes:function(e){this.getCacheDefinition().collectContentTypes(e),this.callParent([e])},updateIndex:function(e,t){var i=this.getCacheDefinition();i&&i.setIndex(e),null==this._name&&this.generateName(),this.callParent([e,t])},updateWorksheet:function(e,t){var i,n,r=this.getCacheDefinition();t&&r&&t.getWorkbook()&&t.getWorkbook().getRelationships()&&t.getWorkbook().getRelationships().removeRelationship(r.getRelationship()),e&&r&&((i=e.getWorkbook()).getRelationships().addRelationship(r.getRelationship()),n=r.getPivotCache(),i.addPivotCache(n),this.setCacheId(n.getCacheId()),n.setId(r.getRelationship().getId()))},applyPivotTableStyleInfo:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.PivotTableStyleInfo(e)},updatePivotTableStyleInfo:function(e,t){Ext.destroy(t)},applyCacheDefinition:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.PivotCacheDefinition(e)},updateCacheDefinition:function(e,t){var i=this.getRelationships();t&&i.removeRelationship(t.getRelationship()),Ext.destroy(t),e&&i.addRelationship(e.getRelationship())},updateViewLayoutType:function(e){var t=this;"compact"===e?(t.setOutline(!0),t.setOutlineData(!0),t.setCompact(null),t.setCompactData(null)):("outline"===e?(t.setOutline(!0),t.setOutlineData(!0)):(t.setOutline(null),t.setOutlineData(null)),t.setCompact(!1),t.setCompactData(!1)),t.processPivotFields(t.getPivotFields().getRange())},applyLocation:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.Location(e)},updateLocation:function(e,t){Ext.destroy(t)},applyPivotFields:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.PivotField")},updatePivotFields:function(e,t){t&&t.un({add:this.onPivotFieldAdd,scope:this}),e&&(e.on({add:this.onPivotFieldAdd,scope:this}),this.processPivotFields(e.getRange()))},onPivotFieldAdd:function(e,t){this.processPivotFields(t.items)},processPivotFields:function(e){var t,i,n,r,o=this.getViewLayoutType(),a=e.length;for(r="compact"===o?n=null:"outline"===o?(n=!1,null):n=!1,t=0;t<a;t++)(i=e[t]).setCompact(n),i.setOutline(r)},applyRowFields:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Field")},applyRowItems:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Item")},applyColFields:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Field")},applyColItems:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Item")},applyDataFields:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.DataField")},applyAutoFormatId:function(e){return 4096<=e&&e<=4117?e:null}}),Ext.define("Ext.exporter.file.ooxml.excel.Worksheet",{extend:"Ext.exporter.file.ooxml.excel.Sheet",requires:["Ext.exporter.file.ooxml.excel.Column","Ext.exporter.file.ooxml.excel.Row","Ext.exporter.file.ooxml.excel.PivotTable"],isWorksheet:!0,config:{columns:null,rows:[],drawings:null,tables:null,mergeCells:null,mergedCellsNo:0,topLeftRef:null,bottomRightRef:null,cachedRows:"",cachedMergeCells:"",pivotTables:null},folder:"/xl/worksheets/",contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet"},tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" ','xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">','<tpl if="columns">',"<cols>",'<tpl for="columns.items">{[values.render()]}</tpl>',"</cols>","</tpl>",'<tpl if="cachedRows">',"<sheetData>{cachedRows}</sheetData>",'<tpl if="cachedMergeCells"><mergeCells>{cachedMergeCells}</mergeCells></tpl>','<tpl elseif="rows">','<sheetData><tpl for="rows.items">{[values.render()]}</tpl></sheetData>','<tpl if="values.self.getMergedCellsNo() &gt; 0">',"<mergeCells>",'<tpl for="rows.items">','<tpl for="_cells.items">','<tpl if="isMergedCell"><mergeCell ref="{[values.getMergedCellRef()]}"/></tpl>',"</tpl>","</tpl>","</mergeCells>","</tpl>","<tpl else>","</sheetData>","</tpl>","</worksheet>"],lastRowIndex:1,destroy:function(){Ext.destroy(this.cachedRow),this.cachedRow=this.cachedRowConfig=null,this.callParent()},getRenderData:function(){var e=this.getName();return Ext.isEmpty(e)&&this.generateName(),this.setMergedCellsNo(0),this.callParent()},collectFiles:function(e){var t,i,n=this.getPivotTables();if(n)for(t=n.length,i=0;i<t;i++)n.getAt(i).collectFiles(e);this.callParent([e])},collectContentTypes:function(e){var t,i,n=this.getPivotTables();if(n)for(t=n.length,i=0;i<t;i++)n.getAt(i).collectContentTypes(e);this.callParent([e])},applyColumns:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Column")},applyRows:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Row")},updateRows:function(e,t){t&&t.un({add:this.onRowAdd,remove:this.onRowRemove,scope:this}),e&&(e.on({add:this.onRowAdd,remove:this.onRowRemove,scope:this}),this.onRowAdd(e,{items:e.getRange()}))},onRowAdd:function(e,t){var i,n,r,o=t.items,a=o.length;for(i=0;i<a;i++)(n=o[i]).setWorksheet(this),(r=n._index)?this.lastRowIndex=Math.max(e.length,r)+1:n.setIndex(this.lastRowIndex++)},onRowRemove:function(e,t){Ext.destroy(t.items)},updateItemIndexes:function(e){var t,i,n;if(e)for(i=e.length,t=0;t<i;t++)(n=e.getAt(t)).getIndex()||n.setIndex(t+1)},updateDrawings:function(e,t){var i=this.getRelationships();t&&i&&i.removeRelationship(t.getRelationship()),e&&i&&i.addRelationship(e.getRelationship())},updateTables:function(e,t){var i=this.getRelationships();t&&i&&i.removeRelationship(t.getRelationship()),e&&i&&i.addRelationship(e.getRelationship())},applyPivotTables:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.PivotTable")},updatePivotTables:function(e,t){t&&t.un({add:this.onPivotTableAdd,remove:this.onPivotTableRemove,scope:this}),e&&(e.on({add:this.onPivotTableAdd,remove:this.onPivotTableRemove,scope:this}),this.processPivotTables(e.getRange()))},onPivotTableAdd:function(e,t){this.processPivotTables(t.items)},processPivotTables:function(e){var t,i,n=this.getRelationships(),r=e.length;for(t=0;t<r;t++)i=e[t],n.addRelationship(i.getRelationship()),i.setWorksheet(this);this.updateItemIndexes(this.getPivotTables())},onPivotTableRemove:function(e,t){var i,n,r=this.getRelationships(),o=t.items.length;for(i=0;i<o;i++)n=t.items[i],r.removeRelationship(n.getRelationship()),Ext.destroy(n)},addColumn:function(e){return this._columns||this.setColumns([]),this._columns.add(e||{})},addRow:function(e){return this._rows||this.setRows([]),this._rows.add(e||{})},getRow:function(e){return this._rows?this._rows.get(e):null},addPivotTable:function(e){return this._pivotTables||this.setPivotTables([]),this._pivotTables.add(e||{})},getPivotTable:function(e){return this._pivotTables?this._pivotTables.get(e):null},beginRowRendering:function(){var e=this;e.tempRows=[],e.tempMergeCells=[],e.startCaching=!0,e.setMergedCellsNo(0),e.lastRowIndex=1,e.cachedIndex=0,e.cachedRow||(e.cachedRow=new Ext.exporter.file.ooxml.excel.Row({worksheet:e}),e.cachedRowConfig=e.cachedRow.getConfig(),e.cachedRowConfig.id=e.cachedRowConfig.cells=null)},endRowRendering:function(){this.setCachedRows(this.tempRows.join("")),this.setCachedMergeCells(this.tempMergeCells.join("")),this.tempRows=this.tempMergeCells=null,this.startCaching=!1,this.lastRowIndex=1},renderRows:function(e){var t,i=Ext.Array.from(e),n=i.length;for(t=0;t<n;t++)this.renderRow(i[t])},renderRow:function(e){var t,i,n,r,o,a=this;return a.startCaching||a.beginRowRendering(),i=a.cachedRow,Ext.isArray(e)?(r=e,t={}):(t=e,r=Ext.Array.from(t.cells||[])),delete t.cells,Ext.applyIf(t,a.cachedRowConfig),i.setCollapsed(t.collapsed),i.setHidden(t.hidden),i.setHeight(t.height),i.setOutlineLevel(t.outlineLevel),i.setShowPhonetic(t.showPhonetic),i.setStyleId(t.styleId),i.setIndex(t.index),(n=i.getIndex())?a.lastRowIndex=Math.max(a.lastRowIndex,n)+1:i.setIndex(a.lastRowIndex++),o=i.renderCells(r),a.tempRows.push(o.row),0===a.cachedIndex&&(a._topLeftRef=o.first),a._bottomRightRef=o.last,a.tempMergeCells.push(o.merged),a.cachedIndex++,o.rowIndex=i.getIndex(),o}}),Ext.define("Ext.exporter.file.ooxml.excel.Font",{extend:"Ext.exporter.file.ooxml.Base",config:{size:10,fontName:"",family:null,charset:null,bold:!1,italic:!1,underline:!1,outline:!1,strikeThrough:!1,color:null,verticalAlign:null},mappings:{family:{Automatic:0,Roman:1,Swiss:2,Modern:3,Script:4,Decorative:5}},tpl:["<font>",'<tpl if="size"><sz val="{size}"/></tpl>','<tpl if="fontName"><name val="{fontName}"/></tpl>','<tpl if="family"><family val="{family}"/></tpl>','<tpl if="charset"><charset val="{charset}"/></tpl>','<tpl if="bold"><b/></tpl>','<tpl if="italic"><i/></tpl>','<tpl if="underline"><u/></tpl>','<tpl if="outline"><outline/></tpl>','<tpl if="strikeThrough"><strike/></tpl>','<tpl if="color"><color rgb="{color}"/></tpl>','<tpl if="verticalAlign"><vertAlign val="{verticalAlign}"/></tpl>',"</font>"],autoGenerateKey:["size","fontName","family","charset","bold","italic","underline","outline","strikeThrough","color","verticalAlign"],constructor:function(e){var t,i={},n=Ext.Object.getKeys(e||{}),r=n.length;if(e)for(t=0;t<r;t++)i[Ext.String.uncapitalize(n[t])]=e[n[t]];this.callParent([i])},applyFamily:function(e){return"string"==typeof e?this.mappings.family[e]:e},applyBold:function(e){return!!e},applyItalic:function(e){return!!e},applyStrikeThrough:function(e){return!!e},applyUnderline:function(e){return!!e},applyOutline:function(e){return!!e},applyColor:function(e){var t;return e?0<=(t=String(e)).indexOf("#")?t.replace("#",""):t:e},applyVerticalAlign:function(e){return Ext.util.Format.lowercase(e)}}),Ext.define("Ext.exporter.file.ooxml.excel.NumberFormat",{extend:"Ext.exporter.file.ooxml.Base",config:{isDate:!1,numFmtId:null,formatCode:""},tpl:['<numFmt numFmtId="{numFmtId}" formatCode="{formatCode:htmlEncode}"/>'],spaceRe:/(,| )/g,getRenderData:function(){var e=this.callParent(),t=e.formatCode;return t=t&&e.isDate?t.replace(this.spaceRe,"\\$1"):t,e.formatCode=t,e},getKey:function(){return this.getFormatCode()}}),Ext.define("Ext.exporter.file.ooxml.excel.Fill",{extend:"Ext.exporter.file.ooxml.Base",requires:["Ext.util.Format"],config:{patternType:"none",fgColor:null,bgColor:null},tpl:["<fill>",'<tpl if="fgColor || bgColor">','<patternFill patternType="{patternType}">','<tpl if="fgColor"><fgColor rgb="{fgColor}"/></tpl>','<tpl if="bgColor"><bgColor rgb="{bgColor}"/></tpl>',"</patternFill>","<tpl else>",'<patternFill patternType="{patternType}"/>',"</tpl>","</fill>"],autoGenerateKey:["patternType","fgColor","bgColor"],constructor:function(e){var t=Ext.clone(e);e&&(t.patternType=t.patternType||e.pattern,t.bgColor=t.bgColor||("solid"!==t.patternType?e.color:null),t.fgColor=t.fgColor||("solid"===t.patternType?e.color:null)),this.callParent([t])},formatColor:function(e){var t;return e?0<=(t=String(e)).indexOf("#")?t.replace("#",""):t:e},applyFgColor:function(e){return this.formatColor(e)},applyBgColor:function(e){return this.formatColor(e)},applyPatternType:function(e){var t=Ext.util.Format.uncapitalize(e);return 0<=Ext.Array.indexOf(["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],t)?t:"none"}}),Ext.define("Ext.exporter.file.ooxml.excel.BorderPr",{extend:"Ext.exporter.file.ooxml.Base",isBorderPr:!0,config:{tag:"left",color:null,lineStyle:"none"},mappings:{lineStyle:{None:"none",Continuous:"thin",Dash:"dashed",Dot:"dotted",DashDot:"dashDot",DashDotDot:"dashDotDot",SlantDashDot:"slantDashDot",Double:"double"}},tpl:['<tpl if="color">','<{tag} style="{lineStyle}"><color rgb="{color}"/></{tag}>',"<tpl else>",'<{tag} style="{lineStyle}"/>',"</tpl>"],autoGenerateKey:["tag","color","lineStyle"],applyColor:function(e){var t;return e?0<=(t=String(e)).indexOf("#")?t.replace("#",""):t:e},applyLineStyle:function(e){return 0<=Ext.Array.indexOf(["none","thin","medium","dashed","dotted","thick","double","hair","mediumDashed","dashDot","mediumDashDot","dashDotDot","mediumDashDotDot","slantDashDot"],e)?e:this.mappings.lineStyle[e]||"none"}}),Ext.define("Ext.exporter.file.ooxml.excel.Border",{extend:"Ext.exporter.file.ooxml.Base",requires:["Ext.exporter.file.ooxml.excel.BorderPr"],config:{left:null,right:null,top:null,bottom:null},tpl:["<border>",'<tpl if="left">{[values.left.render()]}</tpl>','<tpl if="right">{[values.right.render()]}</tpl>','<tpl if="top">{[values.top.render()]}</tpl>','<tpl if="bottom">{[values.bottom.render()]}</tpl>',"</border>"],autoGenerateKey:["left","right","top","bottom"],destroy:function(){this.setConfig({left:null,right:null,top:null,bottom:null}),this.callParent()},applyLeft:function(e){return e&&!e.isBorderPr?new Ext.exporter.file.ooxml.excel.BorderPr(e):e},applyTop:function(e){return e&&!e.isBorderPr?new Ext.exporter.file.ooxml.excel.BorderPr(e):e},applyRight:function(e){return e&&!e.isBorderPr?new Ext.exporter.file.ooxml.excel.BorderPr(e):e},applyBottom:function(e){return e&&!e.isBorderPr?new Ext.exporter.file.ooxml.excel.BorderPr(e):e},updateLeft:function(e,t){Ext.destroy(t),e&&e.setTag("left")},updateTop:function(e,t){Ext.destroy(t),e&&e.setTag("top")},updateRight:function(e,t){Ext.destroy(t),e&&e.setTag("right")},updateBottom:function(e,t){Ext.destroy(t),e&&e.setTag("bottom")}}),Ext.define("Ext.exporter.file.ooxml.excel.CellAlignment",{extend:"Ext.exporter.file.ooxml.Base",isCellAlignment:!0,config:{horizontal:"general",vertical:"top",rotate:null,wrapText:!1,indent:null,relativeIndent:null,justifyLastLine:!1,shrinkToFit:!1,readingOrder:null},autoGenerateKey:["horizontal","vertical","rotate","wrapText","indent","relativeIndent","justifyLastLine","shrinkToFit","readingOrder"],mappings:{horizontal:{Automatic:"general",CenterAcrossSelection:"centerContinuous",JustifyDistributed:"distributed"},vertical:{Automatic:"top",JustifyDistributed:"distributed"},readingOrder:{Context:0,LeftToRight:1,RightToLeft:2}},tpl:["<alignment",'<tpl if="horizontal"> horizontal="{horizontal}"</tpl>','<tpl if="vertical"> vertical="{vertical}"</tpl>','<tpl if="rotate"> textRotation="{rotate}"</tpl>','<tpl if="wrapText"> wrapText="{wrapText}"</tpl>','<tpl if="indent"> indent="{indent}"</tpl>','<tpl if="relativeIndent"> relativeIndent="{relativeIndent}"</tpl>','<tpl if="justifyLastLine"> justifyLastLine="{justifyLastLine}"</tpl>','<tpl if="shrinkToFit"> shrinkToFit="{shrinkToFit}"</tpl>','<tpl if="readingOrder"> readingOrder="{readingOrder}"</tpl>',"/>"],constructor:function(e){var t,i={},n=Ext.Object.getKeys(e||{}),r=n.length;if(e)for(t=0;t<r;t++)i[Ext.String.uncapitalize(n[t])]=e[n[t]];this.callParent([i])},applyHorizontal:function(e){var t=Ext.util.Format.uncapitalize(e);return 0<=Ext.Array.indexOf(["general","left","center","right","fill","justify","centerContinuous","distributed"],t)?t:this.mappings.horizontal[e]||"general"},applyVertical:function(e){var t=Ext.util.Format.uncapitalize(e);return 0<=Ext.Array.indexOf(["top","center","bottom","justify","distributed"],t)?t:this.mappings.vertical[e]||"top"},applyReadingOrder:function(e){return"string"==typeof e?this.mappings.readingOrder[e]||0:e}}),Ext.define("Ext.exporter.file.ooxml.excel.CellStyleXf",{extend:"Ext.exporter.file.ooxml.Base",requires:["Ext.exporter.file.ooxml.excel.CellAlignment"],config:{numFmtId:0,fontId:0,fillId:0,borderId:0,alignment:null},autoGenerateKey:["numFmtId","fontId","fillId","borderId","alignment"],tpl:['<xf numFmtId="{numFmtId}" fontId="{fontId}" fillId="{fillId}" borderId="{borderId}"','<tpl if="numFmtId"> applyNumberFormat="1"</tpl>','<tpl if="fillId"> applyFill="1"</tpl>','<tpl if="borderId"> applyBorder="1"</tpl>','<tpl if="fontId"> applyFont="1"</tpl>','<tpl if="alignment">',' applyAlignment="1">{[values.alignment.render()]}</xf>',"<tpl else>","/>","</tpl>"],applyAlignment:function(e){return e&&!e.isCellAlignment?new Ext.exporter.file.ooxml.excel.CellAlignment(e):e}}),Ext.define("Ext.exporter.file.ooxml.excel.CellXf",{extend:"Ext.exporter.file.ooxml.excel.CellStyleXf",config:{xfId:0},tpl:['<xf numFmtId="{numFmtId}" fontId="{fontId}" fillId="{fillId}" borderId="{borderId}"','    xfId="{xfId}"','<tpl if="numFmtId"> applyNumberFormat="1"</tpl>','<tpl if="fillId"> applyFill="1"</tpl>','<tpl if="borderId"> applyBorder="1"</tpl>','<tpl if="fontId"> applyFont="1"</tpl>','<tpl if="alignment">',' applyAlignment="1">{[values.alignment.render()]}</xf>',"<tpl else>","/>","</tpl>"],autoGenerateKey:["xfId"]}),Ext.define("Ext.exporter.file.ooxml.excel.Stylesheet",{extend:"Ext.exporter.file.ooxml.Xml",requires:["Ext.exporter.file.Style","Ext.exporter.file.ooxml.excel.Font","Ext.exporter.file.ooxml.excel.NumberFormat","Ext.exporter.file.ooxml.excel.Fill","Ext.exporter.file.ooxml.excel.Border","Ext.exporter.file.ooxml.excel.CellXf"],isStylesheet:!0,config:{fonts:[{fontName:"Arial",size:10,family:2}],numberFormats:null,fills:[{patternType:"none"},{patternType:"gray125"}],borders:[{left:{},top:{},right:{},bottom:{}}],cellStyleXfs:[{}],cellXfs:[{}]},contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles"},folder:"/xl/",fileName:"styles",tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">','<tpl if="numberFormats"><numFmts count="{numberFormats.length}"><tpl for="numberFormats.items">{[values.render()]}</tpl></numFmts></tpl>','<tpl if="fonts"><fonts count="{fonts.length}"><tpl for="fonts.items">{[values.render()]}</tpl></fonts></tpl>','<tpl if="fills"><fills count="{fills.length}"><tpl for="fills.items">{[values.render()]}</tpl></fills></tpl>','<tpl if="borders"><borders count="{borders.length}"><tpl for="borders.items">{[values.render()]}</tpl></borders></tpl>','<tpl if="cellStyleXfs"><cellStyleXfs count="{cellStyleXfs.length}"><tpl for="cellStyleXfs.items">{[values.render()]}</tpl></cellStyleXfs></tpl>','<tpl if="cellXfs"><cellXfs count="{cellXfs.length}"><tpl for="cellXfs.items">{[values.render()]}</tpl></cellXfs></tpl>','<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium7"/>',"</styleSheet>"],lastNumberFormatId:164,datePatterns:{"General Date":"[$-F800]dddd, mmmm dd, yyyy","Long Date":"[$-F800]dddd, mmmm dd, yyyy","Medium Date":"mm/dd/yy;@","Short Date":"m/d/yy;@","Long Time":"h:mm:ss;@","Medium Time":"[$-409]h:mm AM/PM;@","Short Time":"h:mm;@"},numberPatterns:{"General Number":1,Fixed:2,Standard:2,Percent:10,Scientific:11,Currency:'"$"#,##0.00',"Euro Currency":'"€"#,##0.00'},booleanPatterns:{"Yes/No":'"Yes";-;"No"',"True/False":'"True";-;"False"',"On/Off":'"On";-;"Off"'},applyFonts:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Font")},applyNumberFormats:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.NumberFormat")},applyFills:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Fill")},applyBorders:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Border")},applyCellXfs:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.CellXf")},applyCellStyleXfs:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.CellStyleXf")},addFont:function(e){var t,i,n=this._fonts;return n||(this.setFonts([]),n=this._fonts),i=new Ext.exporter.file.ooxml.excel.Font(e),0<=(t=n.indexOfKey(i.getKey()))?i.destroy():(n.add(i),t=n.indexOf(i)),t},addNumberFormat:function(e){var t,i,n=this._numberFormats;return n||(this.setNumberFormats([]),n=this._numberFormats),i=new Ext.exporter.file.ooxml.excel.NumberFormat(e),(t=n.get(i.getKey()))||(t=i,n.add(t),t.setNumFmtId(this.lastNumberFormatId++)),t.getNumFmtId()},addFill:function(e){var t,i,n=this._fills;return n||(this.setFills([]),n=this._fills),i=new Ext.exporter.file.ooxml.excel.Fill(e),0<=(t=n.indexOfKey(i.getKey()))?i.destroy():(n.add(i),t=n.indexOf(i)),t},addBorder:function(e){var t,i,n=this._borders;return n||(this.setBorders([]),n=this._borders),i=new Ext.exporter.file.ooxml.excel.Border(e),0<=(t=n.indexOfKey(i.getKey()))?i.destroy():(n.add(i),t=n.indexOf(i)),t},addCellXf:function(e){var t,i,n=this._cellXfs;return n||(this.setCellXfs([]),n=this._cellXfs),i=new Ext.exporter.file.ooxml.excel.CellXf(e),0<=(t=n.indexOfKey(i.getKey()))?i.destroy():(n.add(i),t=n.indexOf(i)),t},addCellStyleXf:function(e){var t,i,n=this._cellStyleXfs;return n||(this.setCellStyleXfs([]),n=this._cellStyleXfs),i=new Ext.exporter.file.ooxml.excel.CellStyleXf(e),0<=(t=n.indexOfKey(i.getKey()))?i.destroy():(n.add(i),t=n.indexOf(i)),t},getStyleParams:function(e){var t=(e&&e.isStyle?e:new Ext.exporter.file.Style(e)).getConfig(),i=0,n=0,r=0,o=0,a=0;return t.parentId=e?e.parentId:null,t.font&&(n=this.addFont(t.font)),t.format&&(i=this.getNumberFormatId(t.format)),t.interior&&(r=this.addFill(t.interior)),t.borders&&(o=this.getBorderId(t.borders)),t.parentId&&(a=t.parentId),{numFmtId:i,fontId:n,fillId:r,borderId:o,xfId:a,alignment:t.alignment||null}},addStyle:function(e){return this.addCellStyleXf(this.getStyleParams(e))},addCellStyle:function(e,t){var i,n,r=this.getCellXfs();return r&&(i=r.getAt(t))&&(n=i.getConfig()),this.addCellXf(Ext.merge(n||{},this.getStyleParams(e)))},getNumberFormatId:function(e){var t,i,n=!!this.datePatterns[e];return"General"===e?0:(i=this.datePatterns[e]||this.booleanPatterns[e]||this.numberPatterns[e],Ext.isNumeric(i)?t=i:i=i||e,t||this.addNumberFormat({isDate:n,formatCode:i}))},getBorderId:function(e){var t,i,n,r={},o=e.length;for(t=0;t<o;t++)i=e[t],n=Ext.util.Format.lowercase(i.position),delete i.position,r[n]=i;return this.addBorder(r)}}),Ext.define("Ext.exporter.file.ooxml.excel.SharedStrings",{extend:"Ext.exporter.file.ooxml.Xml",isSharedStrings:!0,config:{strings:[]},contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings"},folder:"/xl/",fileName:"sharedStrings",tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="{strings.length}" uniqueCount="{strings.length}">','<tpl for="strings.getRange()"><si><t>{.:this.utf8}</t></si></tpl>',"</sst>",{utf8:function(e){return Ext.util.Base64._utf8_encode(e)}}],destroy:function(){this.setStrings(null),this.callParent()},applyStrings:function(e,t){var i;return e&&(i=new Ext.util.Collection({keyFn:Ext.identityFn})).add(e),Ext.destroy(t),i},addString:function(e){var t,i=Ext.util.Format.htmlEncode(e),n=this.getStrings();return n||(this.setStrings([]),n=this.getStrings()),(t=n.indexOfKey(i))<0&&(n.add(i),t=n.length-1),t}}),Ext.define("Ext.exporter.file.ooxml.theme.Base",{extend:"Ext.exporter.file.ooxml.XmlRels",alias:"ooxmltheme.base",mixins:["Ext.mixin.Factoryable"],folder:"/theme/",fileName:"theme",contentType:{contentType:"application/vnd.openxmlformats-officedocument.theme+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme"}}),Ext.define("Ext.exporter.file.ooxml.theme.Office",{extend:"Ext.exporter.file.ooxml.theme.Base",alias:"ooxmltheme.office",tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',"<a:themeElements>",'<a:clrScheme name="Office">',"<a:dk1>",'<a:sysClr val="windowText" lastClr="000000"/>',"</a:dk1>","<a:lt1>",'<a:sysClr val="window" lastClr="FFFFFF"/>',"</a:lt1>","<a:dk2>",'<a:srgbClr val="44546A"/>',"</a:dk2>","<a:lt2>",'<a:srgbClr val="E7E6E6"/>',"</a:lt2>","<a:accent1>",'<a:srgbClr val="4472C4"/>',"</a:accent1>","<a:accent2>",'<a:srgbClr val="ED7D31"/>',"</a:accent2>","<a:accent3>",'<a:srgbClr val="A5A5A5"/>',"</a:accent3>","<a:accent4>",'<a:srgbClr val="FFC000"/>',"</a:accent4>","<a:accent5>",'<a:srgbClr val="5B9BD5"/>',"</a:accent5>","<a:accent6>",'<a:srgbClr val="70AD47"/>',"</a:accent6>","<a:hlink>",'<a:srgbClr val="0563C1"/>',"</a:hlink>","<a:folHlink>",'<a:srgbClr val="954F72"/>',"</a:folHlink>","</a:clrScheme>",'<a:fontScheme name="Office">',"<a:majorFont>",'<a:latin typeface="Calibri Light" panose="020F0302020204030204"/>','<a:ea typeface=""/>','<a:cs typeface=""/>','<a:font script="Jpan" typeface="Yu Gothic Light"/>','<a:font script="Hang" typeface="{[this.utf8(\'맑은 고딕\')]}"/>','<a:font script="Hans" typeface="DengXian Light"/>','<a:font script="Hant" typeface="{[this.utf8(\'新細明體\')]}"/>','<a:font script="Arab" typeface="Times New Roman"/>','<a:font script="Hebr" typeface="Times New Roman"/>','<a:font script="Thai" typeface="Tahoma"/>','<a:font script="Ethi" typeface="Nyala"/>','<a:font script="Beng" typeface="Vrinda"/>','<a:font script="Gujr" typeface="Shruti"/>','<a:font script="Khmr" typeface="MoolBoran"/>','<a:font script="Knda" typeface="Tunga"/>','<a:font script="Guru" typeface="Raavi"/>','<a:font script="Cans" typeface="Euphemia"/>','<a:font script="Cher" typeface="Plantagenet Cherokee"/>','<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>','<a:font script="Tibt" typeface="Microsoft Himalaya"/>','<a:font script="Thaa" typeface="MV Boli"/>','<a:font script="Deva" typeface="Mangal"/>','<a:font script="Telu" typeface="Gautami"/>','<a:font script="Taml" typeface="Latha"/>','<a:font script="Syrc" typeface="Estrangelo Edessa"/>','<a:font script="Orya" typeface="Kalinga"/>','<a:font script="Mlym" typeface="Kartika"/>','<a:font script="Laoo" typeface="DokChampa"/>','<a:font script="Sinh" typeface="Iskoola Pota"/>','<a:font script="Mong" typeface="Mongolian Baiti"/>','<a:font script="Viet" typeface="Times New Roman"/>','<a:font script="Uigh" typeface="Microsoft Uighur"/>','<a:font script="Geor" typeface="Sylfaen"/>',"</a:majorFont>","<a:minorFont>",'<a:latin typeface="Calibri" panose="020F0502020204030204"/>','<a:ea typeface=""/>','<a:cs typeface=""/>','<a:font script="Jpan" typeface="Yu Gothic"/>','<a:font script="Hang" typeface="{[this.utf8(\'맑은 고딕\')]}"/>','<a:font script="Hans" typeface="DengXian"/>','<a:font script="Hant" typeface="{[this.utf8(\'新細明體\')]}"/>','<a:font script="Arab" typeface="Arial"/>','<a:font script="Hebr" typeface="Arial"/>','<a:font script="Thai" typeface="Tahoma"/>','<a:font script="Ethi" typeface="Nyala"/>','<a:font script="Beng" typeface="Vrinda"/>','<a:font script="Gujr" typeface="Shruti"/>','<a:font script="Khmr" typeface="DaunPenh"/>','<a:font script="Knda" typeface="Tunga"/>','<a:font script="Guru" typeface="Raavi"/>','<a:font script="Cans" typeface="Euphemia"/>','<a:font script="Cher" typeface="Plantagenet Cherokee"/>','<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>','<a:font script="Tibt" typeface="Microsoft Himalaya"/>','<a:font script="Thaa" typeface="MV Boli"/>','<a:font script="Deva" typeface="Mangal"/>','<a:font script="Telu" typeface="Gautami"/>','<a:font script="Taml" typeface="Latha"/>','<a:font script="Syrc" typeface="Estrangelo Edessa"/>','<a:font script="Orya" typeface="Kalinga"/>','<a:font script="Mlym" typeface="Kartika"/>','<a:font script="Laoo" typeface="DokChampa"/>','<a:font script="Sinh" typeface="Iskoola Pota"/>','<a:font script="Mong" typeface="Mongolian Baiti"/>','<a:font script="Viet" typeface="Arial"/>','<a:font script="Uigh" typeface="Microsoft Uighur"/>','<a:font script="Geor" typeface="Sylfaen"/>',"</a:minorFont>","</a:fontScheme>",'<a:fmtScheme name="Office">',"<a:fillStyleLst>","<a:solidFill>",'<a:schemeClr val="phClr"/>',"</a:solidFill>",'<a:gradFill rotWithShape="1">',"<a:gsLst>",'<a:gs pos="0">','<a:schemeClr val="phClr">','<a:lumMod val="110000"/>','<a:satMod val="105000"/>','<a:tint val="67000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="50000">','<a:schemeClr val="phClr">','<a:lumMod val="105000"/>','<a:satMod val="103000"/>','<a:tint val="73000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="100000">','<a:schemeClr val="phClr">','<a:lumMod val="105000"/>','<a:satMod val="109000"/>','<a:tint val="81000"/>',"</a:schemeClr>","</a:gs>","</a:gsLst>",'<a:lin ang="5400000" scaled="0"/>',"</a:gradFill>",'<a:gradFill rotWithShape="1">',"<a:gsLst>",'<a:gs pos="0">','<a:schemeClr val="phClr">','<a:satMod val="103000"/>','<a:lumMod val="102000"/>','<a:tint val="94000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="50000">','<a:schemeClr val="phClr">','<a:satMod val="110000"/>','<a:lumMod val="100000"/>','<a:shade val="100000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="100000">','<a:schemeClr val="phClr">','<a:lumMod val="99000"/>','<a:satMod val="120000"/>','<a:shade val="78000"/>',"</a:schemeClr>","</a:gs>","</a:gsLst>",'<a:lin ang="5400000" scaled="0"/>',"</a:gradFill>","</a:fillStyleLst>","<a:lnStyleLst>",'<a:ln w="6350" cap="flat" cmpd="sng" algn="ctr">',"<a:solidFill>",'<a:schemeClr val="phClr"/>',"</a:solidFill>",'<a:prstDash val="solid"/>','<a:miter lim="800000"/>',"</a:ln>",'<a:ln w="12700" cap="flat" cmpd="sng" algn="ctr">',"<a:solidFill>",'<a:schemeClr val="phClr"/>',"</a:solidFill>",'<a:prstDash val="solid"/>','<a:miter lim="800000"/>',"</a:ln>",'<a:ln w="19050" cap="flat" cmpd="sng" algn="ctr">',"<a:solidFill>",'<a:schemeClr val="phClr"/>',"</a:solidFill>",'<a:prstDash val="solid"/>','<a:miter lim="800000"/>',"</a:ln>","</a:lnStyleLst>","<a:effectStyleLst>","<a:effectStyle>","<a:effectLst/>","</a:effectStyle>","<a:effectStyle>","<a:effectLst/>","</a:effectStyle>","<a:effectStyle>","<a:effectLst>",'<a:outerShdw blurRad="57150" dist="19050" dir="5400000" algn="ctr" rotWithShape="0">','<a:srgbClr val="000000">','<a:alpha val="63000"/>',"</a:srgbClr>","</a:outerShdw>","</a:effectLst>","</a:effectStyle>","</a:effectStyleLst>","<a:bgFillStyleLst>","<a:solidFill>",'<a:schemeClr val="phClr"/>',"</a:solidFill>","<a:solidFill>",'<a:schemeClr val="phClr">','<a:tint val="95000"/>','<a:satMod val="170000"/>',"</a:schemeClr>","</a:solidFill>",'<a:gradFill rotWithShape="1">',"<a:gsLst>",'<a:gs pos="0">','<a:schemeClr val="phClr">','<a:tint val="93000"/>','<a:satMod val="150000"/>','<a:shade val="98000"/>','<a:lumMod val="102000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="50000">','<a:schemeClr val="phClr">','<a:tint val="98000"/>','<a:satMod val="130000"/>','<a:shade val="90000"/>','<a:lumMod val="103000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="100000">','<a:schemeClr val="phClr">','<a:shade val="63000"/>','<a:satMod val="120000"/>',"</a:schemeClr>","</a:gs>","</a:gsLst>",'<a:lin ang="5400000" scaled="0"/>',"</a:gradFill>","</a:bgFillStyleLst>","</a:fmtScheme>","</a:themeElements>","<a:objectDefaults/>","<a:extraClrSchemeLst/>","</a:theme>",{utf8:function(e){return Ext.util.Base64._utf8_encode(e||"")}}]}),Ext.define("Ext.exporter.file.ooxml.excel.Workbook",{extend:"Ext.exporter.file.ooxml.XmlRels",requires:["Ext.exporter.file.ooxml.excel.Worksheet","Ext.exporter.file.ooxml.excel.Stylesheet","Ext.exporter.file.ooxml.excel.SharedStrings","Ext.exporter.file.ooxml.theme.Office"],isWorkbook:!0,currentSheetIndex:1,currentPivotCacheIndex:0,config:{stylesheet:{},sharedStrings:{},sheets:[],pivotCaches:null,theme:{type:"office",folder:"/xl/theme/",index:1}},contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument"},folder:"/xl/",fileName:"workbook",tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" ','xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">','<tpl if="sheets">',"<sheets>",'<tpl if="sheets"><tpl for="sheets.items"><sheet name="{[this.utf8(values.getName())]}" sheetId="{[xindex]}" state="visible" r:id="{[values.getRelationship().getId()]}"/></tpl></tpl>',"</sheets>","</tpl>",'<tpl if="pivotCaches">',"<pivotCaches>",'<tpl for="pivotCaches.getRange()">{[values.render()]}</tpl>',"</pivotCaches>","</tpl>","</workbook>",{utf8:function(e){return Ext.util.Base64._utf8_encode(e||"")}}],destroy:function(){this.setStylesheet(null),this.setSharedStrings(null),this.setTheme(null),this.callParent()},collectFiles:function(e){var t,i,n,r=this._stylesheet,o=this._sharedStrings,a=this._theme;for(n=(t=this._sheets).length,i=0;i<n;i++)t.items[i].collectFiles(e);e[this._path]=this.render(),e[r._path]=r.render(),e[o._path]=o.render(),e[a._path]=a.render(),this.collectRelationshipsFiles(e)},collectContentTypes:function(e){var t,i,n;for(e.push(this.getStylesheet().getContentType()),e.push(this.getSharedStrings().getContentType()),e.push(this.getTheme().getContentType()),n=(t=this.getSheets()).length,i=0;i<n;i++)t.getAt(i).collectContentTypes(e);this.callParent([e])},applyStylesheet:function(e){return!e||e.isStylesheet?e:new Ext.exporter.file.ooxml.excel.Stylesheet},updateStylesheet:function(e,t){var i=this.getRelationships();t&&i&&i.removeRelationship(t.getRelationship()),e&&i&&i.addRelationship(e.getRelationship()),Ext.destroy(t)},applySharedStrings:function(e){return!e||e.isSharedStrings?e:new Ext.exporter.file.ooxml.excel.SharedStrings},updateSharedStrings:function(e,t){var i=this.getRelationships();t&&i&&i.removeRelationship(t.getRelationship()),e&&i.addRelationship(e.getRelationship()),Ext.destroy(t)},applyPivotCaches:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.PivotCache")},updatePivotCaches:function(e,t){t&&t.un({add:this.onPivotCacheAdd,scope:this}),e&&e.on({add:this.onPivotCacheAdd,scope:this})},onPivotCacheAdd:function(e,t){var i,n=t.items.length;for(i=0;i<n;i++)t.items[i].setCacheId(this.currentPivotCacheIndex++)},applySheets:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Sheet")},updateSheets:function(e,t){t&&t.un({add:this.onSheetAdd,remove:this.onSheetRemove,scope:this}),e&&e.on({add:this.onSheetAdd,remove:this.onSheetRemove,scope:this})},applyTheme:function(e){var t={type:"office"};return e&&("string"==typeof e?t.type=e:Ext.apply(t,e),e=Ext.Factory.ooxmltheme(e)),e},updateTheme:function(e,t){var i=this.getRelationships();t&&i&&i.removeRelationship(t.getRelationship()),e&&i&&i.addRelationship(e.getRelationship()),Ext.destroy(t)},onSheetAdd:function(e,t){var i,n,r=this.getRelationships(),o=t.items.length;for(i=0;i<o;i++)(n=t.items[i]).setIndex(this.currentSheetIndex++),n.setWorkbook(this),r.addRelationship(n.getRelationship())},onSheetRemove:function(e,t){var i,n,r=this.getRelationships(),o=t.items.length;for(i=0;i<o;i++)n=t.items[i],r.removeRelationship(n.getRelationship()),Ext.destroy(n)},addWorksheet:function(e){var t,i,n=Ext.Array.from(e||{}),r=n.length;for(t=0;t<r;t++)(i=n[t])&&!i.isWorksheet&&(i.workbook=this,n[t]=new Ext.exporter.file.ooxml.excel.Worksheet(i));return this.getSheets().add(n)},removeWorksheet:function(e){return this.getSheets().remove(e)},addPivotCache:function(e){return this.getPivotCaches()||this.setPivotCaches([]),this.getPivotCaches().add(e||{})},removePivotCache:function(e){return this.getPivotCaches().remove(e)},addStyle:function(e){return this.getStylesheet().addStyle(e)},addCellStyle:function(e){return this.getStylesheet().addCellStyle(e)}}),Ext.define("Ext.exporter.file.ooxml.ContentTypes",{extend:"Ext.exporter.file.ooxml.Xml",requires:["Ext.exporter.file.ooxml.ContentType"],isContentTypes:!0,config:{contentTypes:[{tag:"Default",contentType:"application/vnd.openxmlformats-package.relationships+xml",extension:"rels"},{tag:"Default",contentType:"application/xml",extension:"xml"}]},tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">','<tpl if="contentTypes"><tpl for="contentTypes.getRange()">{[values.render()]}</tpl></tpl>',"</Types>"],folder:"/",fileName:"[Content_Types]",applyContentTypes:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.ContentType")},addContentType:function(e){return this.getContentTypes().add(e||{})}}),Ext.define("Ext.exporter.file.ooxml.CoreProperties",{extend:"Ext.exporter.file.ooxml.Xml",isCoreProperties:!0,config:{title:"Workbook",author:"Sencha",subject:""},contentType:{contentType:"application/vnd.openxmlformats-package.core-properties+xml",partName:"/docProps/core.xml"},relationship:{schema:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",target:"docProps/core.xml"},path:"/docProps/core.xml",tpl:['<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" ','xmlns:dcterms="http://purl.org/dc/terms/" ','xmlns:dc="http://purl.org/dc/elements/1.1/" ','xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">',"   <dc:creator>{author:this.utf8}</dc:creator>","   <dc:title>{title:this.utf8}</dc:title>","   <dc:subject>{subject:this.utf8}</dc:subject>","</coreProperties>",{utf8:function(e){return Ext.util.Base64._utf8_encode(e||"")}}]}),Ext.define("Ext.exporter.file.ooxml.Excel",{extend:"Ext.exporter.file.ooxml.XmlRels",requires:["Ext.exporter.file.zip.Archive","Ext.exporter.file.ooxml.excel.Workbook","Ext.exporter.file.ooxml.Relationships","Ext.exporter.file.ooxml.ContentTypes","Ext.exporter.file.ooxml.CoreProperties"],config:{properties:null,workbook:{}},folder:"/",fileName:null,tpl:[],constructor:function(e){var t=this.callParent([e]);return this.getWorkbook()||this.setWorkbook({}),t},destroy:function(){this.setWorkbook(null),this.setProperties(null),this.setRelationships(null),this.callParent()},render:function(){var e,t,i,n,r,o,a={};if(this.collectFiles(a),r=(e=Ext.Object.getKeys(a)).length){for(o=new Ext.exporter.file.zip.Archive,n=0;n<r;n++)i=a[t=e[n]],-1===(t=t.substr(1)).indexOf(".xml")&&-1===t.indexOf(".rel")||o.addFile({path:t,data:i});return i=o.getContent(),o=Ext.destroy(o),i}},collectFiles:function(e){var t=new Ext.exporter.file.ooxml.ContentTypes,i=this.getWorkbook(),n=this.getProperties(),r=[];i.collectFiles(e),n&&(t.addContentType(n.getContentType()),e[n.getPath()]=n.render()),i.collectContentTypes(r),t.addContentType(r),e[t.getPath()]=t.render(),Ext.destroy(t),this.collectRelationshipsFiles(e)},applyProperties:function(e){return!e||e.isCoreProperties?e:new Ext.exporter.file.ooxml.CoreProperties(e)},updateProperties:function(e,t){var i=this.getRelationships();t&&(i.removeRelationship(t.getRelationship()),t.destroy()),e&&i.addRelationship(e.getRelationship())},applyWorkbook:function(e){return!e||e.isWorkbook?e:new Ext.exporter.file.ooxml.excel.Workbook(e)},updateWorkbook:function(e,t){var i=this.getRelationships();t&&(i.removeRelationship(t.getRelationship()),t.destroy()),e&&i.addRelationship(e.getRelationship())},addWorksheet:function(e){return this.getWorkbook().addWorksheet(e)},addStyle:function(e){return this.getWorkbook().getStylesheet().addStyle(e)},addCellStyle:function(e,t){return this.getWorkbook().getStylesheet().addCellStyle(e,t)}}),Ext.define("Ext.exporter.excel.Xlsx",{extend:"Ext.exporter.Base",alternateClassName:"Ext.exporter.Excel",alias:["exporter.excel07","exporter.xlsx","exporter.excel"],requires:["Ext.exporter.file.ooxml.Excel"],config:{defaultStyle:{alignment:{vertical:"Top"},font:{fontName:"Arial",family:"Swiss",size:11,color:"#000000"}},titleStyle:{alignment:{horizontal:"Center",vertical:"Center"},font:{fontName:"Arial",family:"Swiss",size:18,color:"#1F497D"}},groupHeaderStyle:{borders:[{position:"Bottom",lineStyle:"Continuous",weight:1,color:"#4F81BD"}]},groupFooterStyle:{borders:[{position:"Top",lineStyle:"Continuous",weight:1,color:"#4F81BD"}]},tableHeaderStyle:{alignment:{horizontal:"Center",vertical:"Center"},borders:[{position:"Bottom",lineStyle:"Continuous",weight:1,color:"#4F81BD"}],font:{fontName:"Arial",family:"Swiss",size:11,color:"#1F497D"}}},fileName:"export.xlsx",charset:"ascii",mimeType:"application/zip",binary:!0,titleRowHeight:22.5,headerRowHeight:20.25,destroy:function(){this.excel=this.worksheet=Ext.destroy(this.excel,this.worksheet),this.callParent()},getContent:function(){var e,t,i=this,n=this.getConfig(),r=n.data;return i.excel=new Ext.exporter.file.ooxml.Excel({properties:{title:n.title,author:n.author}}),i.worksheet=t=i.excel.addWorksheet({name:n.title}),i.tableHeaderStyleId=i.excel.addCellStyle(n.tableHeaderStyle),e=r?r.getColumnCount():1,t.beginRowRendering(),i.addTitle(n,e),r&&(t.renderRows(i.buildHeader()),t.renderRows(i.buildRows(r,e,-1))),t.endRowRendering(),i.columnStylesNormal=i.columnStylesNormalId=i.columnStylesFooter=null,i.columnStylesFooterId=i.headerStyles=i.footerStyles=null,i.excel.render()},addTitle:function(e,t){Ext.isEmpty(e.title)||this.worksheet.renderRow({height:this.titleRowHeight,cells:[{mergeAcross:t-1,value:e.title,styleId:this.excel.addCellStyle(e.titleStyle)}]})},buildRows:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y,v,E=this,b=E._showSummary,C=[];if(!e)return C;if(n=e._groups,p=e._text,g=!n&&!e._rows,!1===b||Ext.isEmpty(p)||g||(o=E.getGroupHeaderStyleByLevel(i),C.push({styleId:o,cells:[{mergeAcross:t-1,value:p,styleId:o}]})),n)for(c=n.length,l=0;l<c;l++)Ext.Array.insert(C,C.length,E.buildRows(n.items[l],t,i+1));if(e._rows)for(h=(m=e._rows.items).length,!1===b&&(o=E.getGroupHeaderStyleByLevel(i),C.push({cells:[{mergeAcross:t-1,value:e._text,styleId:o}]})),u=0;u<h;u++){for(r={id:(y=m[u])._id,cells:[]},f=(s=y._cells).length,d=0;d<f;d++)x=s.items[d],v=E.columnStylesNormalId[d],r.cells.push({id:x._id,value:x._value,styleId:E.getCellStyleId(x._style,v)});C.push(r)}if((m=e._summaries&&e._summaries.items)&&(b||g))for(a=E.getGroupFooterStyleByLevel(i),h=m.length,u=0;u<h;u++){for(r={id:(y=m[u])._id,cells:[]},f=(s=y._cells).length,d=0;d<f;d++)x=s.items[d],v=g?E.columnStylesNormalId[d]:0===d?a:E.columnStylesFooterId[d],r.cells.push({id:x._id,value:x._value,styleId:E.getCellStyleId(x._style,v)});C.push(r)}return e.destroy(),C},getGroupHeaderStyleByLevel:function(e){var t="l"+e,i=this.headerStyles;return i||(this.headerStyles=i={}),i.hasOwnProperty(t)||(i[t]=this.excel.addCellStyle(Ext.applyIf({alignment:{Indent:0<e?e:0}},this._groupHeaderStyle))),i[t]},getGroupFooterStyleByLevel:function(e){var t="l"+e,i=this.footerStyles;return i||(this.footerStyles=i={}),i.hasOwnProperty(t)||(i[t]=this.excel.addCellStyle(Ext.applyIf({alignment:{Indent:0<e?e:0}},this.columnStylesFooter[0]))),i[t]},buildHeader:function(){var e,t,i,n,r,o,a,s,l,d,u,c,h=this,f={},g=h.getData(),p=[];for(h.buildHeaderRows(g.getColumns(),f),r=(e=Ext.Object.getKeys(f)).length,i=0;i<r;i++){for(t={height:h.headerRowHeight,styleId:h.tableHeaderStyleId,cells:[]},o=(s=f[e[i]]).length,n=0;n<o;n++)(c=s[n]).styleId=h.tableHeaderStyleId,t.cells.push(c);p.push(t)}for(o=(s=g.getBottomColumns()).length,h.columnStylesNormal=[],h.columnStylesNormalId=[],h.columnStylesFooter=[],h.columnStylesFooterId=[],l=h.getGroupFooterStyle(),n=0;n<o;n++)u={style:(d=s[n]).getStyle(),width:d.getWidth()},a=Ext.applyIf({parentId:0},l),a=Ext.merge(a,u.style),h.columnStylesFooter.push(a),h.columnStylesFooterId.push(h.excel.addCellStyle(a)),a=Ext.applyIf({parentId:0},u.style),h.columnStylesNormal.push(a),u.styleId=h.excel.addCellStyle(a),h.columnStylesNormalId.push(u.styleId),u.min=u.max=n+1,u.style=null,u.width&&(u.width=u.width/10),h.worksheet.addColumn(u);return p},getCellStyleId:function(e,t){return e?this.excel.addCellStyle(e,t):t},buildHeaderRows:function(e,t){var i,n,r,o,a;if(e)for(o=e.length,r=0;r<o;r++)(i=e.items[r].getConfig()).value=i.text,n=i.columns,delete i.columns,delete i.table,t[a="s"+i.level]=t[a]||[],t[a].push(i),this.buildHeaderRows(n,t)}}),Ext.define("Ext.exporter.Plugin",{extend:"Ext.plugin.Abstract",alias:["plugin.exporterplugin"],requires:["Ext.exporter.data.Table","Ext.exporter.Excel"],init:function(e){return e.saveDocumentAs=Ext.bind(this.saveDocumentAs,this),e.getDocumentData=Ext.bind(this.getDocumentData,this),this.cmp=e,this.callParent([e])},destroy:function(){var e=this.cmp;e.saveDocumentAs=e.getDocumentData=this.cmp=this.delayedSaveTimer=Ext.unasap(this.delayedSaveTimer),this.callParent()},saveDocumentAs:function(e){var t=this.cmp,i=new Ext.Deferred,n=this.getExporter(e);return t.fireEvent("beforedocumentsave",t,{config:e,exporter:n}),this.delayedSaveTimer=Ext.asap(this.delayedSave,this,[n,e,i]),i.promise},delayedSave:function(t,i,n){var r=this.cmp;if(this.disabled||!r)return Ext.destroy(t),void n.reject();this.setExporterData(t,i),t.saveAs().then(function(){n.resolve(i)},function(e){n.reject(e)}).always(function(){var e=r&&!r.destroyed;e&&r.fireEvent("documentsave",r,{config:i,exporter:t}),Ext.destroy(t),e&&r.fireEvent("exportfinished",r,{config:i})})},getDocumentData:function(e){var t,i;if(!this.disabled)return t=this.getExporter(e),this.setExporterData(t,e),i=t.getContent(),Ext.destroy(t),i},getExporter:function(e){var t=Ext.apply({type:"excel"},e);return Ext.Factory.exporter(t)},setExporterData:function(e,t){var i=this.cmp;e.setData(this.prepareData(t)),i.fireEvent("dataready",i,{config:t,exporter:e})},getExportStyle:function(e,t){var i,n,r,o=t&&t.type;return Ext.isArray(e)?(i=Ext.Array.pluck(e,"type"),0<=(r=Ext.Array.indexOf(i,void 0))&&(n=e[r]),0<=(r=Ext.Array.indexOf(i,o))?e[r]:n):e},prepareData:Ext.emptyFn}),Ext.define("Ext.exporter.file.excel.Worksheet",{extend:"Ext.exporter.file.Base",config:{name:"Sheet",protection:null,rightToLeft:null,showGridLines:!0,tables:[]},tpl:['   <Worksheet ss:Name="{name:htmlEncode}"','<tpl if="this.exists(protection)"> ss:Protected="{protection:this.toNumber}"</tpl>','<tpl if="this.exists(rightToLeft)"> ss:RightToLeft="{rightToLeft:this.toNumber}"</tpl>',">\n",'<tpl if="tables"><tpl for="tables.getRange()">{[values.render()]}</tpl></tpl>','       <WorksheetOptions xmlns="urn:schemas-microsoft-com:office:excel">\n',"          <PageSetup>\n",'              <Layout x:CenterHorizontal="1" x:Orientation="Portrait" />\n','              <Header x:Margin="0.3" />\n','              <Footer x:Margin="0.3" x:Data="Page &amp;P of &amp;N" />\n','              <PageMargins x:Bottom="0.75" x:Left="0.7" x:Right="0.7" x:Top="0.75" />\n',"          </PageSetup>\n","          <FitToPage />\n","          <Print>\n","              <PrintErrors>Blank</PrintErrors>\n","              <FitWidth>1</FitWidth>\n","              <FitHeight>32767</FitHeight>\n","              <ValidPrinterInfo />\n","              <VerticalResolution>600</VerticalResolution>\n","          </Print>\n","          <Selected />\n",'<tpl if="!showGridLines">',"          <DoNotDisplayGridlines />\n","</tpl>","          <ProtectObjects>False</ProtectObjects>\n","          <ProtectScenarios>False</ProtectScenarios>\n","      </WorksheetOptions>\n","   </Worksheet>\n",{exists:function(e){return!Ext.isEmpty(e)},toNumber:function(e){return Number(Boolean(e))}}],destroy:function(){this.setTables(null),this.callParent()},applyTables:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.excel.Table")},addTable:function(e){return this.getTables().add(e||{})},getTable:function(e){return this.getTables().get(e)},applyName:function(e){return Ext.String.ellipsis(String(e),31)}}),Ext.define("Ext.exporter.file.excel.Table",{extend:"Ext.exporter.file.Base",config:{expandedColumnCount:null,expandedRowCount:null,fullColumns:1,fullRows:1,defaultColumnWidth:48,defaultRowHeight:12.75,styleId:null,leftCell:1,topCell:1,columns:[],rows:[]},tpl:['       <Table x:FullColumns="{fullColumns}" x:FullRows="{fullRows}"','<tpl if="this.exists(expandedRowCount)"> ss:ExpandedRowCount="{expandedRowCount}"</tpl>','<tpl if="this.exists(expandedColumnCount)"> ss:ExpandedColumnCount="{expandedColumnCount}"</tpl>','<tpl if="this.exists(defaultRowHeight)"> ss:DefaultRowHeight="{defaultRowHeight}"</tpl>','<tpl if="this.exists(defaultColumnWidth)"> ss:DefaultColumnWidth="{defaultColumnWidth}"</tpl>','<tpl if="this.exists(leftCell)"> ss:LeftCell="{leftCell}"</tpl>','<tpl if="this.exists(topCell)"> ss:TopCell="{topCell}"</tpl>','<tpl if="this.exists(styleId)"> ss:StyleID="{styleId}"</tpl>',">\n",'<tpl if="columns"><tpl for="columns.getRange()">{[values.render()]}</tpl></tpl>','<tpl if="rows">','<tpl for="rows.getRange()">{[values.render()]}</tpl>','<tpl else>         <Row ss:AutoFitHeight="0"/>\n</tpl>',"       </Table>\n",{exists:function(e){return!Ext.isEmpty(e)}}],destroy:function(){this.setColumns(null),this.setRows(null),this.callParent()},applyColumns:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.excel.Column")},applyRows:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.excel.Row")},addColumn:function(e){return this.getColumns().add(e||{})},getColumn:function(e){return this.getColumns().get(e)},addRow:function(e){return this.getRows().add(e||{})},getRow:function(e){return this.getRows().get(e)}}),Ext.define("Ext.exporter.file.excel.Style",{extend:"Ext.exporter.file.Style",config:{parentId:null,protection:null},checks:{alignment:{horizontal:["Automatic","Left","Center","Right","Fill","Justify","CenterAcrossSelection","Distributed","JustifyDistributed"],shrinkToFit:[!0,!1],vertical:["Automatic","Top","Bottom","Center","Justify","Distributed","JustifyDistributed"],verticalText:[!0,!1],wrapText:[!0,!1]},font:{family:["Automatic","Decorative","Modern","Roman","Script","Swiss"],outline:[!0,!1],shadow:[!0,!1],underline:["None","Single","Double","SingleAccounting","DoubleAccounting"],verticalAlign:["None","Subscript","Superscript"]},border:{position:["Left","Top","Right","Bottom","DiagonalLeft","DiagonalRight"],lineStyle:["None","Continuous","Dash","Dot","DashDot","DashDotDot","SlantDashDot","Double"],weight:[0,1,2,3]},interior:{pattern:["None","Solid","Gray75","Gray50","Gray25","Gray125","Gray0625","HorzStripe","VertStripe","ReverseDiagStripe","DiagStripe","DiagCross","ThickDiagCross","ThinHorzStripe","ThinVertStripe","ThinReverseDiagStripe","ThinDiagStripe","ThinHorzCross","ThinDiagCross"]},protection:{protected:[!0,!1],hideFormula:[!0,!1]}},tpl:['       <Style ss:ID="{id}"','<tpl if="this.exists(parentId)"> ss:Parent="{parentId}"</tpl>','<tpl if="this.exists(name)"> ss:Name="{name}"</tpl>',">\n",'<tpl if="this.exists(alignment)">','           <Alignment{[this.getAttributes(values.alignment, "alignment")]}/>\n',"</tpl>",'<tpl if="this.exists(borders)">',"           <Borders>\n",'<tpl for="borders">','               <Border{[this.getAttributes(values, "border")]}/>\n',"</tpl>","           </Borders>\n","</tpl>",'<tpl if="this.exists(font)">','           <Font{[this.getAttributes(values.font, "font")]}/>\n',"</tpl>",'<tpl if="this.exists(interior)">','           <Interior{[this.getAttributes(values.interior, "interior")]}/>\n',"</tpl>",'<tpl if="this.exists(format)">','           <NumberFormat ss:Format="{format}"/>\n',"</tpl>",'<tpl if="this.exists(protection)">','           <Protection{[this.getAttributes(values.protection, "protection")]}/>\n',"</tpl>","       </Style>\n",{exists:function(e){return!Ext.isEmpty(e)},getAttributes:function(e,t){var i,n,r=Ext.Object.getKeys(e||{}),o=r.length,a="";for(i=0;i<o;i++)n=r[i],a+=Ext.String.format(' ss:{0}="{1}"',Ext.String.capitalize(n),Ext.isBoolean(e[n])?Number(e[n]):e[n]);return a}}],autoGenerateKey:["parentId","protection"]}),Ext.define("Ext.exporter.file.excel.Row",{extend:"Ext.exporter.file.Base",config:{autoFitHeight:!1,caption:null,cells:[],height:null,index:null,span:null,styleId:null},tpl:["           <Row",'<tpl if="this.exists(index)"> ss:Index="{index}"</tpl>','<tpl if="this.exists(caption)"> c:Caption="{caption}"</tpl>','<tpl if="this.exists(autoFitHeight)"> ','ss:AutoFitHeight="{autoFitHeight:this.toNumber}"',"</tpl>",'<tpl if="this.exists(span)"> ss:Span="{span}"</tpl>','<tpl if="this.exists(height)"> ss:Height="{height}"</tpl>','<tpl if="this.exists(styleId)"> ss:StyleID="{styleId}"</tpl>',">\n",'<tpl if="cells"><tpl for="cells.getRange()">{[values.render()]}</tpl></tpl>',"           </Row>\n",{exists:function(e){return!Ext.isEmpty(e)},toNumber:function(e){return Number(Boolean(e))}}],destroy:function(){this.setCells(null),this.callParent()},applyCells:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.excel.Cell")},addCell:function(e){return this.getCells().add(e||{})},getCell:function(e){return this.getCells().get(e)}}),Ext.define("Ext.exporter.file.excel.Column",{extend:"Ext.exporter.file.Base",config:{autoFitWidth:!1,caption:null,hidden:null,index:null,span:null,styleId:null,width:null},tpl:["<Column",'<tpl if="this.exists(index)"> ss:Index="{index}"</tpl>','<tpl if="this.exists(caption)"> c:Caption="{caption}"</tpl>','<tpl if="this.exists(styleId)"> ss:StyleID="{styleId}"</tpl>','<tpl if="this.exists(hidden)"> ss:Hidden="{hidden}"</tpl>','<tpl if="this.exists(span)"> ss:Span="{span}"</tpl>','<tpl if="this.exists(width)"> ss:Width="{width}"</tpl>','<tpl if="this.exists(autoFitWidth)"> ','ss:AutoFitWidth="{autoFitWidth:this.toNumber}"',"</tpl>","/>\n",{exists:function(e){return!Ext.isEmpty(e)},toNumber:function(e){return Number(Boolean(e))}}]}),Ext.define("Ext.exporter.file.excel.Cell",{extend:"Ext.exporter.file.Base",config:{dataType:"String",formula:null,index:null,styleId:null,mergeAcross:null,mergeDown:null,value:""},tpl:["               <Cell",'<tpl if="this.exists(index)"> ss:Index="{index}"</tpl>','<tpl if="this.exists(styleId)"> ss:StyleID="{styleId}"</tpl>','<tpl if="this.exists(mergeAcross)"> ss:MergeAcross="{mergeAcross}"</tpl>','<tpl if="this.exists(mergeDown)"> ss:MergeDown="{mergeDown}"</tpl>','<tpl if="this.exists(formula)"> ss:Formula="{formula}"</tpl>',">\n",'                   <Data ss:Type="{dataType}">{value}</Data>\n',"               </Cell>\n",{exists:function(e){return!Ext.isEmpty(e)}}],applyValue:function(e){var t="String",i=Ext.util.Format;return e instanceof Date?(t="DateTime",e=Ext.Date.format(e,"Y-m-d\\TH:i:s.u")):Ext.isNumber(e)?t="Number":e=Ext.isBoolean(e)?(t="Boolean",Number(e)):i.htmlEncode(i.htmlDecode(e)),this.setDataType(t),e}}),Ext.define("Ext.exporter.file.excel.Workbook",{extend:"Ext.exporter.file.Base",requires:["Ext.exporter.file.excel.Worksheet","Ext.exporter.file.excel.Table","Ext.exporter.file.excel.Style","Ext.exporter.file.excel.Row","Ext.exporter.file.excel.Column","Ext.exporter.file.excel.Cell"],config:{title:"Workbook",author:"Sencha",windowHeight:9e3,windowWidth:5e4,protectStructure:!1,protectWindows:!1,styles:[],worksheets:[]},tpl:['<?xml version="1.0" encoding="utf-8"?>\n','<?mso-application progid="Excel.Sheet"?>\n',"<Workbook ",'xmlns="urn:schemas-microsoft-com:office:spreadsheet" ','xmlns:o="urn:schemas-microsoft-com:office:office" ','xmlns:x="urn:schemas-microsoft-com:office:excel" ','xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" ','xmlns:html="http://www.w3.org/TR/REC-html40">\n','   <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">\n',"       <Title>{title:htmlEncode}</Title>\n","       <Author>{author:htmlEncode}</Author>\n","       <Created>{createdAt}</Created>\n","   </DocumentProperties>\n",'   <ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">\n',"       <WindowHeight>{windowHeight}</WindowHeight>\n","       <WindowWidth>{windowWidth}</WindowWidth>\n","       <ProtectStructure>{protectStructure}</ProtectStructure>\n","       <ProtectWindows>{protectWindows}</ProtectWindows>\n","   </ExcelWorkbook>\n","   <Styles>\n",'<tpl if="styles"><tpl for="styles.getRange()">{[values.render()]}</tpl></tpl>',"   </Styles>\n",'<tpl if="worksheets"><tpl for="worksheets.getRange()">{[values.render()]}</tpl></tpl>',"</Workbook>"],destroy:function(){this.setStyles(null),this.setWorksheets(null),this.callParent()},applyStyles:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.excel.Style")},applyWorksheets:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.excel.Worksheet")},addStyle:function(e){var t,i,n,r=this.getStyles(),o=r.decodeItems(arguments,0),a=o.length,s=[];for(t=0;t<a;t++)n=o[t],i=r.get(n.getKey()),s.push(i||r.add(n)),i&&n.destroy();return 1===s.length?s[0]:s},getStyle:function(e){return this.getStyles().get(e)},addWorksheet:function(e){return this.getWorksheets().add(e||{})},getWorksheet:function(e){return this.getWorksheets().get(e)}}),Ext.define("Ext.exporter.excel.Xml",{extend:"Ext.exporter.Base",alias:"exporter.excel03",requires:["Ext.exporter.file.excel.Workbook"],config:{windowHeight:9e3,windowWidth:5e4,protectStructure:!1,protectWindows:!1,defaultStyle:{alignment:{vertical:"Top"},font:{fontName:"Calibri",family:"Swiss",size:11,color:"#000000"}},titleStyle:{name:"Title",parentId:"Default",alignment:{horizontal:"Center",vertical:"Center"},font:{fontName:"Cambria",family:"Swiss",size:18,color:"#1F497D"}},groupHeaderStyle:{name:"Group Header",parentId:"Default",borders:[{position:"Bottom",lineStyle:"Continuous",weight:1,color:"#4F81BD"}]},groupFooterStyle:{borders:[{position:"Top",lineStyle:"Continuous",weight:1,color:"#4F81BD"}]},tableHeaderStyle:{name:"Heading 1",parentId:"Default",alignment:{horizontal:"Center",vertical:"Center"},borders:[{position:"Bottom",lineStyle:"Continuous",weight:1,color:"#4F81BD"}],font:{fontName:"Calibri",family:"Swiss",size:11,color:"#1F497D"}}},fileName:"export.xml",mimeType:"text/xml",titleRowHeight:22.5,headerRowHeight:20.25,destroy:function(){this.workbook=this.table=Ext.destroy(this.workbook),this.callParent()},applyDefaultStyle:function(e){return Ext.applyIf({id:"Default",name:"Normal"},e||{})},getContent:function(){var e,t=this,i=this.getConfig(),n=i.data;return t.workbook=new Ext.exporter.file.excel.Workbook({title:i.title,author:i.author,windowHeight:i.windowHeight,windowWidth:i.windowWidth,protectStructure:i.protectStructure,protectWindows:i.protectWindows}),t.table=t.workbook.addWorksheet({name:i.title}).addTable(),t.workbook.addStyle(i.defaultStyle),t.tableHeaderStyleId=t.workbook.addStyle(i.tableHeaderStyle).getId(),t.groupHeaderStyleId=t.workbook.addStyle(i.groupHeaderStyle).getId(),e=n?n.getColumnCount():1,t.addTitle(i,e),n&&(t.buildHeader(),t.table.addRow(t.buildRows(n,e,-1))),t.columnStylesFooter=t.columnStylesNormal=null,t.headerStyles=t.footerStyles=null,t.workbook.render()},addTitle:function(e,t){Ext.isEmpty(e.title)||this.table.addRow({autoFitHeight:1,height:this.titleRowHeight,styleId:this.workbook.addStyle(e.titleStyle).getId()}).addCell({mergeAcross:t-1,value:e.title})},buildRows:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y=this,v=y.getShowSummary(),E=[];if(e){if(n=e._groups,m=e._text,g=!n&&!e._rows,!1===v||Ext.isEmpty(m)||g||(o=y.getGroupHeaderStyleByLevel(i),E.push({cells:[{mergeAcross:t-1,value:m,styleId:o}]})),n)for(c=n.length,l=0;l<c;l++)Ext.Array.insert(E,E.length,y.buildRows(n.items[l],t,i+1));if(e._rows)for(h=e._rows.length,!1===v&&(o=y.getGroupHeaderStyleByLevel(i),E.push({cells:[{mergeAcross:t-1,value:e._text,styleId:o}]})),u=0;u<h;u++){for(r={cells:[]},f=(s=e._rows.items[u]._cells).length,d=0;d<f;d++)p=s.items[d],x=y.columnStylesNormal[d],r.cells.push({value:p._value,styleId:y.getCellStyleId(p._style,x)});E.push(r)}if(e._summaries&&(v||g))for(a=y.getGroupFooterStyleByLevel(i),h=e._summaries.length,u=0;u<h;u++){for(r={cells:[]},f=(s=e._summaries.items[u]._cells).length,d=0;d<f;d++)p=s.items[d],x=g?y.columnStylesNormal[d]:0===d?a:y.columnStylesFooter[d],r.cells.push({value:p._value,styleId:y.getCellStyleId(p._style,x)});E.push(r)}return e.destroy(),E}},getCellStyleId:function(e,t){var i=Ext.applyIf({parentId:t},e);return e?this.workbook.addStyle(i).getId():t},getGroupHeaderStyleByLevel:function(e){var t="l"+e,i=this.headerStyles;return i||(this.headerStyles=i={}),i.hasOwnProperty(t)||(i[t]=this.workbook.addStyle({parentId:this.groupHeaderStyleId,alignment:{Indent:0<e?e:0}}).getId()),i[t]},getGroupFooterStyleByLevel:function(e){var t="l"+e,i=this.footerStyles;return i||(this.footerStyles=i={}),i.hasOwnProperty(t)||(i[t]=this.workbook.addStyle({parentId:this.columnStylesFooter[0],alignment:{Indent:0<e?e:0}}).getId()),i[t]},buildHeader:function(){var e,t,i,n,r,o,a,s,l,d,u,c=this,h={},f=c.getData();for(c.buildHeaderRows(f.getColumns(),h),r=(e=Ext.Object.getKeys(h)).length,i=0;i<r;i++)for(t=c.table.addRow({height:c.headerRowHeight,autoFitHeight:1}),o=(s=h[e[i]]).length,n=0;n<o;n++)t.addCell(s[n]).setStyleId(c.tableHeaderStyleId);for(o=(s=f.getBottomColumns()).length,c.columnStylesNormal=[],c.columnStylesFooter=[],l=c.getGroupFooterStyle(),n=0;n<o;n++)u={width:(d=s[n]).getWidth()},a=Ext.applyIf({parentId:"Default"},l),(a=Ext.merge(a,d.getStyle())).id=null,c.columnStylesFooter.push(c.workbook.addStyle(a).getId()),a=Ext.merge({parentId:"Default"},d.getStyle()),u.styleId=c.workbook.addStyle(a).getId(),c.columnStylesNormal.push(u.styleId),c.table.addColumn(u)},buildHeaderRows:function(e,t){var i,n,r,o,a;if(e)for(o=e.length,r=0;r<o;r++)(i=e.items[r].getConfig()).value=i.text,n=i.columns,delete i.columns,delete i.table,t[a="s"+i.level]=t[a]||[],t[a].push(i),this.buildHeaderRows(n,t)}}),Ext.define("Ext.exporter.file.html.Style",{extend:"Ext.exporter.file.Style",idPrefix:"ext-",indentation:10,mappings:{readingOrder:{LeftToRight:"ltr",RightToLeft:"rtl",Context:"initial",Automatic:"initial"},horizontal:{Automatic:"initial",Left:"left",Center:"center",Right:"right",Justify:"justify"},vertical:{Top:"top",Bottom:"bottom",Center:"middle",Automatic:"baseline"},lineStyle:{None:"none",Continuous:"solid",Dash:"dashed",Dot:"dotted"}},updateId:function(e){e&&!this.getName()&&this.setName("."+e)},render:function(){var e,t,i,n,r=this.getConfig(),o=this.mappings,a="",s=r.alignment,l=r.font,d=r.borders,u=r.interior;if(s&&(s.horizontal&&(a+="text-align: "+o.horizontal[s.horizontal]+";\n"),s.readingOrder&&(a+="direction: "+o.readingOrder[s.readingOrder]+";\n"),s.vertical&&(a+="vertical-align: "+o.vertical[s.vertical]+";\n"),s.indent&&(a+="padding-left: "+s.indent*this.indentation+"px;\n")),l&&(l.size&&(a+="font-size: "+l.size+"px;\n"),l.bold&&(a+="font-weight: bold;\n"),l.italic&&(a+="font-style: italic;\n"),l.strikeThrough&&(a+="text-decoration: line-through;\n"),"Single"===l.underline&&(a+="text-decoration: underline;\n"),l.color&&(a+="color: "+l.color+";\n")),u&&u.color&&(a+="background-color: "+u.color+";\n"),d)for(t=d.length,e=0;e<t;e++)a+=(i="border-"+(n=d[e]).position.toLowerCase())+"-width: "+(n.weight||0)+"px;\n",a+=i+"-style: "+(o.lineStyle[n.lineStyle]||"initial")+";\n",a+=i+"-color: "+(n.color||"initial")+";\n";return r.name+"{\n"+a+"}\n"}}),Ext.define("Ext.exporter.file.html.Doc",{extend:"Ext.exporter.file.Base",requires:["Ext.exporter.file.html.Style"],config:{title:"Title",author:"Sencha",charset:"UTF-8",styles:[],table:null},destroy:function(){this.setStyles(null),this.setTable(null),this.callParent()},applyStyles:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.html.Style")},addStyle:function(e){var t,i,n,r=this.getStyles(),o=r.decodeItems(arguments,0),a=o.length,s=[];for(t=0;t<a;t++)n=o[t],i=r.get(n.getKey()),s.push(i||r.add(n)),i&&n.destroy();return 1===s.length?s[0]:s},getStyle:function(e){return this.getStyles().get(e)}}),Ext.define("Ext.exporter.file.ooxml.excel.PageField",{extend:"Ext.exporter.file.ooxml.Base",config:{cap:null,fld:null,hier:null,item:null,name:null},generateTplAttributes:!0,tpl:["<pageField {attributes} />"]}),Ext.define("Ext.exporter.text.CSV",{extend:"Ext.exporter.Base",alias:"exporter.csv",requires:["Ext.util.CSV"],fileName:"export.csv",getHelper:function(){return Ext.util.CSV},getContent:function(){var e=[],t=this.getData();return t&&(this.buildHeader(e),this.buildRows(t,e,t.getColumnCount()),this.columnStyles=Ext.destroy(this.columnStyles)),this.getHelper().encode(e)},buildHeader:function(e){var t,i,n,r,o={},a=this.getData();for(this.buildHeaderRows(a.getColumns(),o),e.push.apply(e,Ext.Object.getValues(o)),i=(t=a.getBottomColumns()).length,this.columnStyles=[],n=0;n<i;n++)(r=t[n].getStyle()||{}).id||(r.id="c"+n),r.name="."+r.id,this.columnStyles.push(new Ext.exporter.file.Style(r))},buildHeaderRows:function(e,t){var i,n,r,o,a,s,l,d;if(e)for(r=e.length,n=0;n<r;n++){for(a=(i=e.items[n])._mergeAcross,s=i._mergeDown,t[o="s"+(d=i._level)]=t[o]||[],t[o].push(i._text),l=1;l<=a;l++)t[o].push("");for(l=1;l<=s;l++)t[o="s"+(d+l)]=t[o]||[],t[o].push("");this.buildHeaderRows(i._columns,t)}},buildRows:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m=this._showSummary;if(e){if(n=e._groups,p=e._text,h=!n&&!e._rows,Ext.isEmpty(p)||h||((o=[]).length=i,o[e.level||0]=p,t.push(o)),n)for(a=n.length,r=0;r<a;r++)this.buildRows(n.items[r],t,i);if(e._rows)for(l=e._rows.length,s=0;s<l;s++){for(o=[],u=(c=e._rows.items[s]._cells).length,d=0;d<u;d++)f=c.items[d],f=(g=this.columnStyles[d])?g.getFormattedValue(f._value):f._value,o.push(f);t.push(o)}if(e._summaries&&(m||h))for(l=e._summaries.length,s=0;s<l;s++){for(o=[],u=(c=e._summaries.items[s]._cells).length,d=0;d<u;d++)f=c.items[d],f=(g=this.columnStyles[d])?g.getFormattedValue(f._value):f._value,o.push(f);t.push(o)}}}}),Ext.define("Ext.exporter.text.Html",{extend:"Ext.exporter.Base",alias:"exporter.html",requires:["Ext.exporter.file.html.Doc"],config:{tpl:["<!DOCTYPE html>\n","<html>\n","   <head>\n",'       <meta charset="{charset}">\n',"       <title>{title}</title>\n","       <style>\n","       table { border-collapse: collapse; border-spacing: 0; }\n",'<tpl if="styles"><tpl for="styles.getRange()">{[values.render()]}</tpl></tpl>',"       </style>\n","   </head>\n","   <body>\n","       <h1>{title}</h1>\n","       <table>\n","           <thead>\n",'<tpl for="table.columns">',"               <tr>\n",'<tpl for=".">','                   <th<tpl if="width"> width="{width}"</tpl><tpl if="mergeAcross"> colSpan="{mergeAcross}"</tpl><tpl if="mergeDown"> rowSpan="{mergeDown}"</tpl>>{text}</th>\n',"</tpl>","               </tr>\n","</tpl>","           </thead>\n","           <tbody>\n",'<tpl for="table.rows">','               <tr<tpl if="cls"> class="{cls}"</tpl>>\n','<tpl for="cells">','                   <td<tpl if="cls"> class="{cls}"</tpl><tpl if="mergeAcross"> colSpan="{mergeAcross}"</tpl><tpl if="mergeDown"> rowSpan="{mergeDown}"</tpl>>{value}</td>\n',"</tpl>","               </tr>\n","</tpl>","           </tbody>\n","           <tfoot>\n","               <tr>\n",'                   <th<tpl if="table.columnsCount"> colSpan="{table.columnsCount}"</tpl>>&nbsp;</th>\n',"               </tr>\n","           </tfoot>\n","       </table>\n","   </body>\n","</html>"],defaultStyle:{name:"table tbody td, table thead th",alignment:{vertical:"Top"},font:{fontName:"Arial",size:12,color:"#000000"},borders:[{position:"Left",lineStyle:"Continuous",weight:1,color:"#4F81BD"},{position:"Right",lineStyle:"Continuous",weight:1,color:"#4F81BD"}]},titleStyle:{name:"h1",font:{fontName:"Arial",size:18,color:"#1F497D"}},groupHeaderStyle:{name:".groupHeader td",borders:[{position:"Top",lineStyle:"Continuous",weight:1,color:"#4F81BD"},{position:"Bottom",lineStyle:"Continuous",weight:1,color:"#4F81BD"}]},groupFooterStyle:{name:".groupFooter td",borders:[{position:"Bottom",lineStyle:"Continuous",weight:1,color:"#4F81BD"}]},tableHeaderStyle:{name:"table thead th",alignment:{horizontal:"Center",vertical:"Center"},borders:[{position:"Top",lineStyle:"Continuous",weight:1,color:"#4F81BD"},{position:"Bottom",lineStyle:"Continuous",weight:1,color:"#4F81BD"}],font:{fontName:"Arial",size:12,color:"#1F497D"}},tableFooterStyle:{name:"table tfoot th",borders:[{position:"Top",lineStyle:"Continuous",weight:1,color:"#4F81BD"}]}},fileName:"export.html",mimeType:"text/html",getContent:function(){var e,t,i=this.getConfig(),n=i.data,r={columnsCount:0,columns:[],rows:[]};return this.doc=new Ext.exporter.file.html.Doc({title:i.title,author:i.author,tpl:i.tpl,styles:[i.defaultStyle,i.titleStyle,i.groupHeaderStyle,i.groupFooterStyle,i.tableHeaderStyle,i.tableFooterStyle]}),n&&(e=n.getColumnCount(),Ext.apply(r,{columnsCount:n.getColumnCount(),columns:this.buildHeader(),rows:this.buildRows(n,e,0)})),this.doc.setTable(r),t=this.doc.render(),this.doc=this.columnStyles=Ext.destroy(this.doc),t},buildRows:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m=this._showSummary,x=[];if(!e)return x;if(this.doc.addStyle({id:".levelHeader"+i,name:".levelHeader"+i,alignment:{Horizontal:"Left",Indent:5*(0<i?i:0)}}),this.doc.addStyle({id:".levelFooter"+i,name:".levelFooter"+i,alignment:{Horizontal:"Left",Indent:5*(0<i?i:0)}}),n=e._groups,p=e._text,f=!n&&!e._rows,Ext.isEmpty(p)||f||x.push({cls:"groupHeader",cells:[{value:p,mergeAcross:t,cls:"levelHeader"+i}]}),n)for(l=n.length,o=0;o<l;o++)Ext.Array.insert(x,x.length,this.buildRows(n.items[o],t,i+1));if(e._rows)for(d=e._rows.length,a=0;a<d;a++){for(r=[],u=(h=e._rows.items[a]._cells).length,s=0;s<u;s++)c=h.items[s].getConfig(),(g=this.columnStyles[s])&&(c.cls=g._id+(c.style?" "+this.doc.addStyle(c.style)._id:""),c.value=g.getFormattedValue(c.value)),r.push(c);x.push({cells:r})}if(e._summaries&&(m||f))for(d=e._summaries.length,a=0;a<d;a++){for(r=[],u=(h=e._summaries.items[a]._cells).length,s=0;s<u;s++)c=h.items[s].getConfig(),g=this.columnStyles[s],c.cls=0===s?"levelFooter"+i:"",g&&(c.cls+=" "+g.getId()+(c.style?" "+this.doc.addStyle(c.style).getId():""),c.value=g.getFormattedValue(c.value)),r.push(c);x.push({cls:"groupFooter"+(f?" groupHeader":""),cells:r})}return x},buildHeader:function(){var e,t,i,n,r={},o=this.getData();for(this.buildHeaderRows(o.getColumns(),r),t=(e=o.getBottomColumns()).length,this.columnStyles=[],i=0;i<t;i++)(n=e[i].getStyle()||{}).id||(n.id=Ext.id()),n.name="."+n.id,this.columnStyles.push(this.doc.addStyle(n));return Ext.Object.getValues(r)},buildHeaderRows:function(e,t){var i,n,r,o;if(e)for(r=e.length,n=0;n<r;n++)t[o="s"+(i=e.items[n].getConfig()).level]=t[o]||[],i.mergeAcross&&i.mergeAcross++,i.mergeDown&&i.mergeDown++,t[o].push(i),this.buildHeaderRows(i.columns,t)}}),Ext.define("Ext.exporter.text.TSV",{extend:"Ext.exporter.text.CSV",alias:"exporter.tsv",requires:["Ext.util.TSV"],getHelper:function(){return Ext.util.TSV}}),Ext.define("Ext.grid.plugin.BaseExporter",{extend:"Ext.exporter.Plugin",prepareData:function(e){var t,i,n=this.cmp.getStore(),r=new Ext.exporter.data.Table;return t=this.getColumnHeaders(e,this.getGridColumns()),r.setColumns(t.headers),!n||n&&n.destroyed||(n&&n.isBufferedStore&&Ext.raise("BufferedStore can't be exported because it doesn't have all data available"),i=this.prepareDataIndexColumns(e,t.dataIndexes),n.isTreeStore?this.extractNodeData(e,r,i,n.getRoot()):e&&e.includeGroups&&n.isGrouped()?(this.extractData(e,r,i,n.getGroups()),this.extractSummaryRow(e,r,i,n)):this.extractRows(e,r,i,n)),r},getColumnHeaders:function(e,t){var i,n,r=[],o=[],a=t.length;for(i=0;i<a;i++)(n=this.getColumnHeader(e,t[i]))&&(r.push(n.header),Ext.Array.insert(o,o.length,n.dataIndexes));return{headers:r,dataIndexes:o}},getGridColumns:function(){return[]},getColumnHeader:Ext.emptyFn,prepareDataIndexColumns:function(e,t){var i,n=t.length,r=[];for(i=0;i<n;i++)r.push(this.prepareDataIndexColumn(e,t[i]));return r},prepareDataIndexColumn:function(e,t){return{column:t,fn:Ext.emptyFn}},extractData:function(e,t,i,n){var r,o,a,s,l;if(n)for(o=n.getCount(),r=0;r<o;r++)a=(s=n.getAt(r)).getGroups(),l=t.addGroup({text:s.getGroupKey()}),a?this.extractData(e,l,i,a):this.extractRows(e,l,i,s)},extractNodeData:function(e,t,i,n){var r,o,a,s,l,d,u,c,h=this.cmp.getStore(),f=i.length;if(n&&n.hasChildNodes())for(c=(u=n.childNodes).length,r=0;r<c;r++){for(a=u[r],s={cells:[]},o=0;o<f;o++)d=i[o],l=this.getCell(h,a,d)||{value:null},d.column.isTreeColumn&&l&&(l.style=Ext.merge(l.style||{},{alignment:{indent:a.getDepth()-1}})),s.cells.push(l);t.addRow(s),a.hasChildNodes()&&this.extractNodeData(e,t,i,a)}},extractRows:function(e,t,i,n){var r,o,a,s,l,d=this.cmp.getStore(),u=n.getCount(),c=i.length,h=[];for(r=0;r<u;r++){for(a=n.getAt(r),s={cells:[]},o=0;o<c;o++)l=this.getCell(d,a,i[o]),s.cells.push(l||{value:null});h.push(s)}t.setRows(h),this.extractSummaryRow(e,t,i,n)},extractSummaryRow:function(e,t,i,n){var r,o,a,s,l=i.length;if(e.includeSummary){for(a={cells:[]},o=this.getSummaryRecord(n,i),r=0;r<l;r++)s=this.getSummaryCell(n,o,i[r]),a.cells.push(s||{value:null});t.setSummaries(a)}},getCell:Ext.emptyFn,getSummaryCell:Ext.emptyFn,getSummaryRecord:function(e,t){var i,n,r,o=t.length,a=e.getSummaryRecord(),s=new Ext.data.Model({id:"summary-record"});for(s.beginEdit(),s.set(a.getData()),i=0;i<o;i++)(n=t[i]).summary?(r=e.isStore?e.data.items.slice():e.items.slice(),s.set(n.summaryIndex,n.summary.calculate(r,n.summaryIndex,"data",0,r.length))):n.summaryType&&s.set(n.summaryIndex,this.getSummary(e,n.summaryType,n.summaryIndex));return s.endEdit(),s.commit(!0),s},getSummary:function(e,t,i){var n=e.isStore;if(t){if(Ext.isFunction(t))return n?e.aggregate(t,null,!1,[i]):e.aggregate(i,t);switch(t){case"count":return e.count();case"min":return e.min(i);case"max":return e.max(i);case"sum":return e.sum(i);case"average":return e.average(i);default:return null}}}}),Ext.define("Ext.grid.plugin.Exporter",{alias:["plugin.gridexporter"],extend:"Ext.grid.plugin.BaseExporter",lockableScope:"top",getGridColumns:function(){var e=this.cmp,t=[];return e.lockedGrid?(Ext.Array.insert(t,t.length,e.lockedGrid.headerCt.items.items),Ext.Array.insert(t,t.length,e.normalGrid.headerCt.items.items)):Ext.Array.insert(t,t.length,e.headerCt.items.items),t},getColumnHeader:function(e,t){var i,n,r,o,a=[];if(t.hidden||t.ignoreExport||(r=this.getExportStyle(t.exportStyle,e),o=t.getWidth(),r&&(o=r.width||o),i={text:t.text,width:o,style:r},t.isGroupHeader?(n=this.getColumnHeaders(e,t.items.items),i.columns=n.headers,0===i.columns.length?i=null:Ext.Array.insert(a,a.length,n.dataIndexes)):a.push(t)),i)return{header:i,dataIndexes:a}},prepareDataIndexColumn:function(e,t){var i=Ext.identityFn,n=Ext.identityFn,r=this.getExportStyle(t.exportStyle,e);return r&&(!r||r.format)||(i=this.getSpecialFn({renderer:"renderer",exportRenderer:"exportRenderer",formatter:"formatter"},t)||i,n=this.getSpecialFn({renderer:"summaryRenderer",exportRenderer:"exportSummaryRenderer",formatter:"summaryFormatter"},t)||i),{dataIndex:t.dataIndex,column:t,fn:i,summaryType:t.summaryType,summaryIndex:t.dataIndex,summaryFn:n,colIndex:Ext.Array.indexOf(this.cmp.getVisibleColumns(),t)}},getSpecialFn:function(e,t){var i,n,r,o=t[e.exportRenderer],a=t[e.renderer],s=t[e.formatter];return n=t.rendererScope||t.scope||t,r=o,!t.initialConfig[e.formatter]||s||r?(!0===r&&(r=a),"string"==typeof r?i=function(){return Ext.callback(r,n,arguments,0,t)}:"function"==typeof r&&(i=function(){return r.apply(n,arguments)})):i=a,i},getCell:function(e,t,i){var n=t.get(i.dataIndex);return{value:i.fn(n,null,t,e.indexOf(t),i.colIndex,e,this.cmp.getView())}},getSummaryCell:function(e,t,i){var n=t.get(i.dataIndex);return{value:i.summaryFn(n,null,t,-1,i.colIndex,e,this.cmp.getView())}}}),Ext.define("Ext.exporter.excel.PivotXlsx",{extend:"Ext.exporter.Base",alias:["exporter.pivotxlsx"],requires:["Ext.exporter.file.ooxml.Excel"],config:{titleStyle:{alignment:{horizontal:"Center",vertical:"Center"},font:{fontName:"Arial",family:"Swiss",size:18,color:"#1F497D"}},matrix:null,pivotTableStyle:{name:"PivotStyleMedium7"}},fileName:"export.xlsx",charset:"ascii",mimeType:"application/zip",binary:!0,aggregateMap:{avg:"average",sum:"sum",count:"count",countNumbers:"countNums",min:"min",max:"max",variance:"var",varianceP:"varp",stdDev:"stdDev",stdDevP:"stdDevp"},titleRowHeight:22.5,columnLabelsText:"Column Labels",rowLabelsText:"Row Labels",valuesText:"Values",totalText:"Total",grandTotalText:"Grand total",getContent:function(){var e,t,i,n,r,o=this.getMatrix();return e=new Ext.exporter.file.ooxml.Excel({properties:{title:this.getTitle(),author:this.getAuthor()}}),n=o&&o.store,o&&n&&n.isStore&&!n.isDestroyed?(o&&!o.calculateAsExcel&&Ext.raise('The pivot table calculations are different than what Excel does. Check "calculateAsExcel" config on the pivot matrix!'),t=e.addWorksheet(),i=e.addWorksheet(),r=this.generateDataSheet({store:n,worksheet:i}),this.generatePivotSheet({worksheet:t,data:r}),r=e.render(),e.destroy(),r):(Ext.raise("No pivot matrix provided to the exporter or there is no store definedon the matrix"),e.addWorksheet({rows:[{cells:"Unable to export the pivot table since no raw data is available"}]}),e.render())},generateDataSheet:function(e){var t,i=e.store,n=e.worksheet;return((t=this.buildStoreRows(i)).worksheet=n).beginRowRendering(),n.renderRows([t.fields]),n.renderRows(t.rows),n.endRowRendering(),t},generatePivotSheet:function(e){var t=this._matrix,i=e.worksheet,n=e.data;i.beginRowRendering(),this.generatePivotSheetTitle(i),this.setupUniqueAggregateNames(n.fields),this.setupUniqueValues(t.aggregate,n.uniqueValues),this.setupUniqueValues(t.leftAxis.dimensions,n.uniqueValues),this.setupUniqueValues(t.topAxis.dimensions,n.uniqueValues),this.generatePivotSheetData(e),i.endRowRendering()},generatePivotSheetTitle:function(e){e.renderRow({height:this.titleRowHeight,cells:[{mergeAcross:5,value:this.getTitle(),styleId:e.getWorkbook().addCellStyle(this.getTitleStyle())}]})},generatePivotSheetData:function(e){var t=e.worksheet;this.generatePivotConfig(e),this.generatePivotLocation(e),this.generatePivotDataFields(e),this.generatePivotFields(e),this.generatePivotRowFields(e),this.generatePivotColumnFields(e),t.addPivotTable(e.pivotConfig)},generatePivotConfig:function(e){var t,i=this._matrix,n=e.data,r=n.worksheet;(t=e.pivotConfig={grandTotalCaption:i.textGrandTotalTpl,location:{ref:"",firstHeaderRow:1,firstDataRow:1,firstDataCol:1},cacheDefinition:{cacheSource:{worksheetSource:{ref:r.getTopLeftRef()+":"+r.getBottomRightRef(),sheet:r.getName()}},cacheFields:[],cacheRecords:{items:n.cache}},pivotTableStyleInfo:this.getPivotTableStyle(),pivotFields:[],rowFields:[],colFields:[],dataFields:[],rowItems:[],colItems:[]}).rowHeaderCaption=this.rowLabelsText,t.colHeaderCaption=this.columnLabelsText,t.viewLayoutType=i.viewLayoutType},generatePivotLocation:function(e){var t=this,i=t._matrix,n=e.pivotConfig.location,r=i.aggregate.items.length,o=i.leftAxis.dimensions.items.length,a=i.topAxis.dimensions.items.length;e.header=[],e.body=[],e.totals=[],e.dataIndexes=[],e.columns=[],0===o&&0===a?0===r?t.generatePivotDataEmpty(e):t.generatePivotDataAgg(e):(n.firstDataRow+=a+(1<r?1:0),n.firstDataCol=1,n.firstHeaderRow=1,t.generatePivotHeader(e),0===r?a&&o?t.generatePivotDataLeftTopAgg(e):o?t.generatePivotDataLeft(e):t.generatePivotDataTop(e):a&&o?t.generatePivotDataLeftTopAgg(e):o?t.generatePivotDataLeftAgg(e):t.generatePivotDataTopAgg(e),t.generatePivotBody(e),t.generatePivotRowTotals(e)),t.generatePivotData(e)},generatePivotDataEmpty:function(e){var t;for(e.header.push({cells:[null,null,null]}),t=0;t<17;t++)e.header.push({cells:[null,null,null]})},generatePivotDataAgg:function(e){var t,i,n,r,o,a=this._matrix,s=e.pivotConfig.location,l=a.aggregate.items.length;for(i={cells:[{value:null}]},n={cells:[{value:this.totalText}]},e.header.push(i,n),t=0;t<l;t++)o=a.aggregate.items[t],i.cells.push({value:o.excelName}),r=a.results.items.map[a.grandTotalKey+"/"+a.grandTotalKey],n.cells.push({value:r?r.values[o.id]:null});1<l&&(s.firstHeaderRow=0)},generatePivotDataLeftTopAgg:function(e){var t,i,n,r=this._matrix,o=e.pivotConfig,a=o.location,s=o.viewLayoutType,l=r.aggregate.items.length,d=r.leftAxis.dimensions.items.length,u=r.topAxis.dimensions.items.length,c=e.dataIndexes,h=e.header,f=h[0],g=h.length;for(t=0;t<g;t++)if("compact"===s)Ext.Array.insert(h[t].cells,0,[{value:t===g-1?this.rowLabelsText:0===t&&1===l?r.aggregate.items[0].excelName:null}]);else for(i=0;i<d;i++)n=0===t&&0===i&&1===l?{value:r.aggregate.items[0].excelName}:{value:t===g-1?r.leftAxis.dimensions.items[i].dataIndex:null},Ext.Array.insert(h[t].cells,i,[n]);if("compact"===s)f.cells.push({value:this.columnLabelsText}),Ext.Array.insert(c,0,[{aggregate:!1,dataIndex:r.compactViewKey}]);else{for(t=0;t<d;t++)Ext.Array.insert(c,t,[{aggregate:!1,dataIndex:r.leftAxis.dimensions.items[t].id}]);for(t=0;t<u;t++)f.cells.push({value:r.topAxis.dimensions.items[t].dataIndex});1<l&&f.cells.push({value:this.valuesText})}this.generatePivotColTotals(e,h[1]),a.firstDataCol="compact"===s?1:d},generatePivotDataLeftTop:function(e){var t,i,n=this._matrix,r=e.pivotConfig,o=r.location,a=r.viewLayoutType,s=n.leftAxis.dimensions.items.length,l=n.topAxis.dimensions.items.length,d=e.dataIndexes,u=e.header,c=u[0],h=u.length;for(t=0;t<h;t++)if("compact"===a)Ext.Array.insert(u[t].cells,0,[{value:t===h-1?this.rowLabelsText:null}]);else for(i=0;i<s;i++)Ext.Array.insert(u[t].cells,i,[{value:t===h-1?n.leftAxis.dimensions.items[i].dataIndex:null}]);if("compact"===a)c.cells.push({value:this.columnLabelsText}),Ext.Array.insert(d,0,[{aggregate:!1,dataIndex:n.compactViewKey}]);else{for(t=0;t<s;t++)Ext.Array.insert(d,t,[{aggregate:!1,dataIndex:n.leftAxis.dimensions.items[t].id}]);for(t=0;t<l;t++)c.cells.push({value:n.topAxis.dimensions.items[t].dataIndex})}this.generatePivotColTotals(e,u[1]),o.firstDataCol="compact"===a?1:s},generatePivotDataLeftAgg:function(e){var t,i,n=this._matrix,r=e.pivotConfig,o=r.location,a=r.viewLayoutType,s=n.aggregate.items.length,l=n.leftAxis.dimensions.items.length,d=e.dataIndexes,u=e.header[0];if("compact"===a)u.cells.push({value:this.rowLabelsText}),d.push({aggregate:!1,dataIndex:n.compactViewKey});else for(t=0;t<l;t++)i=n.leftAxis.dimensions.items[t],u.cells.push({value:i.dataIndex}),d.push({aggregate:!1,dataIndex:i.id});this.generatePivotColTotals(e,u),o.firstHeaderRow=1<s?0:1,o.firstDataRow=1,o.firstDataCol="compact"===a?1:l},generatePivotDataLeft:function(e){var t,i,n=this._matrix,r=e.pivotConfig,o=r.location,a=r.viewLayoutType,s=n.leftAxis.dimensions.items.length,l=e.header[0],d=e.dataIndexes;if("compact"===a)l.cells.push({value:this.rowLabelsText}),d.push({aggregate:!1,dataIndex:n.compactViewKey});else for(t=0;t<s;t++)i=n.leftAxis.dimensions.items[t],l.cells.push({value:i.dataIndex}),d.push({aggregate:!1,dataIndex:i.id});d.push({aggregate:!1}),o.firstDataCol="compact"===a?1:s},generatePivotDataTopAgg:function(e){var t,i=this._matrix,n=e.pivotConfig.viewLayoutType,r=i.aggregate.items.length,o=i.topAxis.dimensions.items.length,a=e.dataIndexes,s=e.header,l=s[0],d=s.length;for(t=0;t<d;t++)Ext.Array.insert(s[t].cells,0,[{value:1===r&&0===t?i.aggregate.items[0].excelName:null}]);if(Ext.Array.insert(a,0,[{aggregate:!1,dataIndex:"compact"===n?i.compactViewKey:""}]),"compact"===n)l.cells.push({value:this.columnLabelsText});else{for(t=0;t<o;t++)l.cells.push({value:i.topAxis.dimensions.items[t].dataIndex});1<r&&l.cells.push({value:this.valuesText})}this.generatePivotColTotals(e,s[1])},generatePivotDataTop:function(e){var t,i=this._matrix,n=e.pivotConfig,r=n.location,o=n.viewLayoutType,a=i.topAxis.dimensions.items.length,s=e.dataIndexes,l=e.header,d=l[0],u=l.length;for(Ext.Array.insert(s,0,[{aggregate:!1,dataIndex:"compact"===o?i.compactViewKey:""}]),t=0;t<u;t++)Ext.Array.insert(l[t].cells,0,[{value:null}]);if("compact"===o)d.cells.push({value:this.columnLabelsText});else for(t=0;t<a;t++)d.cells.push({value:i.topAxis.dimensions.items[t].dataIndex});this.generatePivotColTotals(e,l[1]),r.firstDataCol=1,r.firstDataRow=a+1},generatePivotHeader:function(e){var t,i,n,r,o,a,s,l=e.columns;for(this.generateTopAxisColumns(e,-1),(t=e.header).push({cells:[]}),r=l.length,i=0;i<r;i++){for(s={cells:[]},o=(a=l[i]).length,n=0;n<o;n++)s.cells.push({value:a[n].value});t.push(s)}r&&(e.pivotConfig.colItems=Ext.Array.pluck(l[r-1],"colItem"),e.dataIndexes=l[r-1])},generatePivotBody:function(e,t){var i,n,r=this._matrix;for(n=(t=t||r.leftAxis.getTree()).length,i=0;i<n;i++)this.generatePivotBodyItem(e,t[i])},generatePivotBodyItem:function(e,t){var i,n,r,o,a,s,l,d=this._matrix,u=e.worksheet,c=e.data.uniqueValues,h=e.dataIndexes,f=h.length,g=e.pivotConfig.viewLayoutType,p=e.body,m=e.pivotConfig.rowItems;for(a={r:t.level,x:[Ext.Array.indexOf(c[t.dimension.dataIndex],t.value)]},s={cells:[]},i=0;i<f;i++)r={value:null},(n=h[i]).aggregate?(o=d.results.items.map[t.key+"/"+n.key],r.value=o?o.values[n.dataIndex]:null):n.dataIndex===t.dimensionId?r.value=t.value:"compact"===g&&n.dataIndex===d.compactViewKey&&(e.styles=e.styles||{},l="level"+t.level,e.styles[l]=e.styles[l]||u.getWorkbook().addCellStyle({alignment:{horizontal:"left",indent:2*t.level}}),r.styleId=e.styles[l],r.value=t.value),s.cells.push(r);m.push(a),p.push(s),t.children&&("tabular"===g?this.generatePivotBodyTabularItem(e,t,t):this.generatePivotBody(e,t.children))},generatePivotBodyTabularItem:function(e,t){var i,n,r,o,a,s,l=this._matrix,d=e.data.uniqueValues,u=t.children,c=u.length,h=e.dataIndexes,f=h.length,g=e.body,p=g[g.length-1].cells,m=e.pivotConfig.rowItems,x=m[m.length-1];for(i=0;i<c;i++)if(s=u[i],0===i){for(x.x.push(Ext.Array.indexOf(d[s.dimension.dataIndex],s.value)),n=0;n<f;n++)r=h[n],o=p[n],r.aggregate?(a=l.results.items.map[s.key+"/"+r.key],o.value=a?a.values[r.dataIndex]:null):r.dataIndex===s.dimensionId&&(o.value=s.value);s.children&&this.generatePivotBodyTabularItem(e,s)}else this.generatePivotBodyItem(e,s);for(m.push({r:t.level,t:"default",x:[Ext.Array.indexOf(d[t.dimension.dataIndex],t.value)]}),p=[],n=0;n<f;n++)o={value:null},(r=h[n]).aggregate?(a=l.results.items.map[t.key+"/"+r.key],o.value=a?a.values[r.dataIndex]:null):r.dataIndex===t.dimensionId&&(o.value=t.data[r.dataIndex]+" "+this.totalText),p.push(o);g.push({cells:p})},generatePivotRowTotals:function(e){var t,i,n,r,o=this._matrix,a=o.aggregate.items.length,s=o.leftAxis.dimensions.items.length,l=e.dataIndexes,d=l.length,u=e.totals,c=[],h=e.pivotConfig.rowItems;for(t=0;t<d;t++)i=l[t],n={value:null},0===t?n.value=s?this.grandTotalText:a?this.totalText:null:i.aggregate&&(r=o.results.items.map[o.grandTotalKey+"/"+i.key],n.value=r?r.values[i.dataIndex]:null),c.push(n);u.push({cells:c}),h.push({t:"grand",x:0})},generatePivotColTotals:function(e,t){var i,n,r=this._matrix,o=e.pivotConfig.colItems,a=e.dataIndexes,s=r.aggregate.items,l=r.aggregate.items.length;if(0===r.topAxis.dimensions.items.length)for(i=0;i<l;i++)n=s[i],t.cells.push({value:n.excelName}),a.push({aggregate:!0,key:r.grandTotalKey,dataIndex:n.id}),o.push({t:"grand",i:i,x:0});else if(l<=1)t.cells.push({value:this.grandTotalText}),a.push({aggregate:!0,key:r.grandTotalKey,dataIndex:l?s[0].id:""}),o.push({t:"grand",x:0});else for(i=0;i<l;i++)n=s[i],t.cells.push({value:this.totalText+" "+n.excelName}),a.push({aggregate:!0,key:r.grandTotalKey,dataIndex:n.id}),o.push({t:"grand",i:i,x:0})},generatePivotData:function(e){var t,i,n,r=e.worksheet,o=e.pivotConfig.location;for(t=e.header.length,i=0;i<t;i++)n=r.renderRow(e.header[i]),0===i&&(o.ref=n.first+":");r.renderRows(e.body),r.renderRows(e.totals),o.ref+=r.getBottomRightRef()},generatePivotDataFields:function(e){var t,i,n=this._matrix,r=e.data.fields,o=this.aggregateMap,a=n.aggregate.items.length;for(t=0;t<a;t++)o[(i=n.aggregate.items[t]).aggregator]||Ext.raise("Custom aggregate functions are not supported by this exporter"),e.pivotConfig.dataFields.push({name:i.excelName,fld:Ext.Array.indexOf(r,i.dataIndex),subtotal:o[i.aggregator]||"sum",baseField:0,baseItem:0})},generatePivotFields:function(e){var t,i,n,r,o,a,s,l=this._matrix,d=e.data,u=d.fields,c=d.uniqueValues,h=l.aggregate.items.length;for(n=u.length,t=0;t<n;t++){for(o=u[t],a={showAll:!1},i=0;i<h;i++)if((s=l.aggregate.items[i]).dataIndex===o){a.dataField=!0;break}if((s=this.getDimension(l.aggregate,o))||((s=this.getDimension(l.leftAxis.dimensions,o))?(a.axis="axisRow",s.getSortable()?a.sortType="ASC"===s.direction?"ascending":"descending":a.sortType="manual"):(s=this.getDimension(l.topAxis.dimensions,o))&&(a.axis="axisCol",s.getSortable()?a.sortType="ASC"===s.direction?"ascending":"descending":a.sortType="manual")),s){for(a.items=[],r=c[o].length,i=0;i<r;i++)a.items.push({x:i});a.items.push({t:"default"})}e.pivotConfig.cacheDefinition.cacheFields.push({name:o,sharedItems:{items:s&&!s.isAggregate?c[o]:[]}}),e.pivotConfig.pivotFields.push(a)}},generatePivotRowFields:function(e){var t,i=this._matrix,n=e.data.fields,r=i.leftAxis.dimensions.items.length;for(t=0;t<r;t++)e.pivotConfig.rowFields.push({x:Ext.Array.indexOf(n,i.leftAxis.dimensions.items[t].dataIndex)})},generatePivotColumnFields:function(e){var t,i=this._matrix,n=e.data.fields,r=i.aggregate.items.length,o=i.topAxis.dimensions.items.length;for(t=0;t<o;t++)e.pivotConfig.colFields.push({x:Ext.Array.indexOf(n,i.topAxis.dimensions.items[t].dataIndex)});1<r&&e.pivotConfig.colFields.push({x:-2})},buildStoreRows:function(e){var t,i,n,r,o,a,s,l,d,u,c={rows:[],cache:[],fields:[],uniqueValues:{}};for(r=(t=e.model.getFields()).length,i=0;i<r;i++)a=t[i].getName(),c.fields.push(a),c.uniqueValues[a]=[];for(o=e.data.length,i=0;i<o;i++){for(s=[],u=[],l=e.data.items[i],n=0;n<r;n++)a=c.fields[n],d=l.get(a),s.push({value:d}),u.push(d),-1===Ext.Array.indexOf(c.uniqueValues[a],d)&&c.uniqueValues[a].push(d);c.rows.push(s),c.cache.push(u)}return c},setupUniqueAggregateNames:function(e){var t,i,n,r,o,a,s=this._matrix.aggregate,l=s.getCount(),d=e.length,u=[];for(i=0;i<l;i++){for(a=o=(r=s.getAt(i)).dataIndex||r.header,t=2,n=0;n<d;n++)(String(a).toLowerCase()===String(e[n]).toLowerCase()||0<=Ext.Array.indexOf(u,a))&&(a=o+t,t++,n=-1);u.push(a),r.excelName=a}},setupUniqueValues:function(e,t){var i,n,r=e.items,o=r.length;for(i=0;i<o;i++)t[(n=r[i]).dataIndex]=Ext.Array.pluck(n.values.items,"value")},getDimension:function(e,t){var i=e.findIndex("dataIndex",t,0,!1,!0);return 0<=i?e.getAt(i):null},generateTopAxisColumns:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m=this._matrix,x=e.data.uniqueValues,y=e.columns,v=m.aggregate.items,E=[];for(a=(i=i||m.topAxis.getTree()).length,s=v.length,n=0;n<a;n++)if(d=i[n],p=Ext.Array.indexOf(x[d.dimension.dataIndex],d.value),y[h=d.level]=y[h]||[],c={value:null==d.value?"(blank)":d.value,index:p},y[h].push(c),d.children){for(l=(g=this.generateTopAxisColumns(e,t,d.children)).length,r=1;r<l;r++)y[h].push({value:"",empty:!0});for(r=0;r<s;r++)for(u=v[r],f={value:c.value+" "+u.excelName},y[h].push(f),g.push(f),l=y.length,o=h+1;o<l;o++)o===l-1?y[o].push({aggregate:!0,value:"",key:d.key,dataIndex:u.id,colItem:{t:"default",i:r,x:p}}):y[o].push({value:"",empty:!0});Ext.Array.insert(E,E.length,g),t+=g.length}else if(s<=1&&(E.push(c),t++,c.aggregate=!0,c.colItem=this.getColItem(t,0,y)),1===s)c.key=d.key,c.dataIndex=v[0].id;else if(1<s)for(y[++h]=y[h]||[],r=0;r<s;r++)t++,f={aggregate:!0,value:(u=v[r]).excelName,index:r,key:d.key,dataIndex:u.id},y[h].push(f),f.colItem=this.getColItem(t,r,y),E.push(f),0<r&&y[h-1].push({value:"",empty:!0});return E},getColItem:function(e,t,i){var n,r,o={i:t},a=0,s=[],l=i.length;for(n=0;n<l;n++)(r=i[n][e])?r.empty||s.push(r.index):a++;return o.r=a,o.x=s,o}}),Ext.define("Ext.pivot.Aggregators",{alternateClassName:["Mz.aggregate.Aggregators"],singleton:!0,customText:"Custom",sumText:"Sum",avgText:"Avg",minText:"Min",maxText:"Max",countText:"Count",countNumbersText:"Count numbers",groupSumPercentageText:"Group sum percentage",groupCountPercentageText:"Group count percentage",varianceText:"Var",variancePText:"Varp",stdDevText:"StdDev",stdDevPText:"StdDevp",sum:function(e,t,i,n,r){var o,a,s=e.length,l=i.calculateAsExcel?null:0;for(o=0;o<s;o++)null!==(a=e[o].get(t))&&(null===l&&(l=0),"number"==typeof a&&(l+=a));return l},avg:function(e,t,i,n,r){var o,a,s=e.length,l=i.calculateAsExcel,d=l?null:0,u=0;for(o=0;o<s;o++)"number"==typeof(a=e[o].get(t))&&(null===d&&(d=0),d+=a,u++);return l||(u=s),0<u&&null!==d?d/u:null},min:function(e,t,i,n,r){var o,a,s,l=e.length,d=null;for(o=0;o<l;o++)a=e[o].get(t),s=!0,i.calculateAsExcel&&(null!==a?("number"!=typeof a&&(a=0,s=!1),null===d&&(d=a)):s=!1),s&&a<d&&(d=a);return d},max:function(e,t,i,n,r){var o,a,s,l=e.length,d=null;for(o=0;o<l;o++)a=e[o].get(t),s=!0,i.calculateAsExcel&&(null!==a?("number"!=typeof a&&(a=0,s=!1),null===d&&(d=a)):s=!1),s&&d<a&&(d=a);return d},count:function(e,t,i,n,r){var o,a=e.length,s=null;if(i.calculateAsExcel)for(o=0;o<a;o++)null!==e[o].get(t)&&(null===s&&(s=0),s++);else s=a;return s},countNumbers:function(e,t,i,n,r){var o,a,s=e.length,l=null;for(o=0;o<s;o++)null!==(a=e[o].get(t))&&(null===l&&(l=0),"number"==typeof a&&l++);return i.calculateAsExcel?l:l||0},groupSumPercentage:function(e,t,i,n,r){var o,a,s=Ext.pivot.Aggregators.sum,l=e.length,d=n.split(i.keysSeparator),u=null,c=null;return l?(d.pop(),d=d.join(i.keysSeparator),Ext.isEmpty(d)&&(d=i.grandTotalKey),(o=i.results.get(n,r))&&(u=o.hasValue("groupSum")?o.getValue("groupSum"):o.calculateByFn("groupSum",t,s)),(a=i.results.get(d,r))&&(c=a.hasValue("groupSum")?a.getValue("groupSum"):a.calculateByFn("groupSum",t,s)),null!==c&&null!==u&&0!==c?u/c*100:null):null},groupCountPercentage:function(e,t,i,n,r){var o,a,s=Ext.pivot.Aggregators.count,l=e.length,d=n.split(i.keysSeparator),u=null,c=null;return l?(d.pop(),d=d.join(i.keysSeparator),Ext.isEmpty(d)&&(d=i.grandTotalKey),(o=i.results.get(n,r))&&(u=o.hasValue("groupCount")?o.getValue("groupCount"):o.calculateByFn("groupCount",t,s)),(a=i.results.get(d,r))&&(c=a.hasValue("groupCount")?a.getValue("groupCount"):a.calculateByFn("groupCount",t,s)),null!==c&&null!==u&&0!==c?u/c*100:null):null},variance:function(e,t,i,n,r){var o,a,s=i.calculateAsExcel,l=Ext.pivot.Aggregators,d=s?l.countNumbers.apply(l,arguments):e.length,u=l.avg.apply(l,arguments),c=e.length,h=0;if(0<u)for(o=0;o<c;o++)a=e[o].get(t),s?"number"==typeof a&&(h+=Math.pow(a-u,2)):h+=Math.pow(Ext.Number.from(a,0)-u,2);return 0<h&&1<d?h/(d-1):null},varianceP:function(e,t,i,n,r){var o,a,s=i.calculateAsExcel,l=Ext.pivot.Aggregators,d=s?l.countNumbers.apply(l,arguments):e.length,u=l.avg.apply(l,arguments),c=e.length,h=0;if(0<u)for(o=0;o<c;o++)a=e[o].get(t),s?"number"==typeof a&&(h+=Math.pow(a-u,2)):h+=Math.pow(Ext.Number.from(a,0)-u,2);return 0<h&&0<d?h/d:null},stdDev:function(e,t,i,n,r){var o=Ext.pivot.Aggregators,a=o.variance.apply(o,arguments);return 0<a?Math.sqrt(a):null},stdDevP:function(e,t,i,n,r){var o=Ext.pivot.Aggregators,a=o.varianceP.apply(o,arguments);return 0<a?Math.sqrt(a):null}}),Ext.define("Ext.pivot.MixedCollection",{extend:"Ext.util.MixedCollection",alternateClassName:["Mz.aggregate.MixedCollection"],removeAt:function(e){Ext.destroy(this.callParent(arguments))},clear:function(){this.destroyItems(),this.callParent(arguments)},removeAll:function(){this.destroyItems(),this.callParent(arguments)},destroy:function(){this.clear()},destroyItems:function(){var e,t,i,n=this.items;if(n)for(e=n.length,t=0;t<e;t++)(i=n[t]).destroy&&i.destroy()}}),Ext.define("Ext.pivot.filter.Base",{alternateClassName:["Mz.aggregate.filter.Abstract"],alias:"pivotfilter.base",mixins:["Ext.mixin.Factoryable"],isFilter:!0,operator:null,value:null,caseSensitive:!0,parent:null,constructor:function(e){var t=Ext.util.Format;return this.thousandRe=new RegExp("["+t.thousandSeparator+"]","g"),this.decimalRe=new RegExp("["+t.decimalSeparator+"]"),Ext.apply(this,e),this.callParent([e])},destroy:function(){this.parent=this.thousandRe=this.decimalRe=null,this.callParent()},serialize:function(){return Ext.apply({type:this.type,operator:this.operator,value:this.value,caseSensitive:this.caseSensitive},this.getSerialArgs()||{})},getSerialArgs:Ext.emptyFn,isMatch:function(e){var t,i,n,r,o,a=this,s=a.value;return s=(Ext.isArray(s)?s[0]:s)||"",t=a.compare(e,s),"="===a.operator?0===t:"!="===a.operator?0!==t:">"===a.operator?0<t:">="===a.operator?0<=t:"<"===a.operator?t<0:"<="===a.operator?t<=0:(s=a.value,r=(Ext.isArray(s)?s[0]:s)||"",o=(Ext.isArray(s)?s[1]:s)||"",i=a.compare(e,r),n=a.compare(e,o),"between"===a.operator?0<=i&&n<=0:"not between"!==a.operator||!(0<=i&&n<=0))},parseNumber:function(e){var t;return"number"==typeof e?e:(Ext.isEmpty(e)&&(e=""),t=(t=String(e).replace(this.thousandRe,"")).replace(this.decimalRe,"."),Ext.isNumeric(t)?parseFloat(t):null)},compare:function(e,t){var i=Ext.pivot.matrix.Base.prototype.naturalSort,n=this.parseNumber(e),r=this.parseNumber(t);return Ext.isNumber(n)&&Ext.isNumber(r)?i(n,r):Ext.isDate(e)?Ext.isDate(t)?i(e,t):i(e,Ext.Date.parse(t,Ext.Date.defaultFormat)):this.caseSensitive?i(e||"",t||""):i(String(e||"").toLowerCase(),String(t||"").toLowerCase())},deprecated:{"6.0":{properties:{mztype:null,from:null,to:null}}}}),Ext.define("Ext.pivot.filter.Label",{alternateClassName:["Mz.aggregate.filter.Label"],extend:"Ext.pivot.filter.Base",alias:"pivotfilter.label",isMatch:function(e){var t=this;return"begins"===t.operator?Ext.String.startsWith(String(e||""),String(t.value||""),!t.caseSensitive):"not begins"===t.operator?!Ext.String.startsWith(String(e||""),String(t.value||""),!t.caseSensitive):"ends"===t.operator?Ext.String.endsWith(String(e||""),String(t.value||""),!t.caseSensitive):"not ends"===t.operator?!Ext.String.endsWith(String(e||""),String(t.value||""),!t.caseSensitive):"contains"===t.operator?t.stringContains(String(e||""),String(t.value||""),!t.caseSensitive):"not contains"===t.operator?!t.stringContains(String(e||""),String(t.value||""),!t.caseSensitive):"in"===t.operator?t.foundInArray(t.value):"not in"===t.operator?!t.foundInArray(t.value):t.callParent(arguments)},foundInArray:function(e){var t,i=Ext.Array.from(this.value),n=i.length,r=!1;if(this.caseSensitive)return 0<=Ext.Array.indexOf(i,e);for(t=0;t<n&&!(r=r||String(e).toLowerCase()===String(i[t]).toLowerCase());t++);return r},stringContains:function(e,t,i){var n=t.length<=e.length;return n&&(i&&(e=e.toLowerCase(),t=t.toLowerCase()),n=0<=e.lastIndexOf(t)),n},deprecated:{"6.0":{methods:{startsWith:Ext.emptyFn,endsWith:Ext.emptyFn}}}}),Ext.define("Ext.pivot.filter.Value",{alternateClassName:["Mz.aggregate.filter.Value"],extend:"Ext.pivot.filter.Base",alias:"pivotfilter.value",dimensionId:"",topType:"items",topOrder:"top",topSort:!0,isTopFilter:!1,constructor:function(e){var t=this.callParent([e]);return Ext.isEmpty(this.dimensionId)&&Ext.raise("dimensionId is mandatory on Value filters"),this.isTopFilter="top10"===this.operator,t},destroy:function(){this.dimension=null,this.callParent()},getDimension:function(){return this.parent.matrix.aggregate.getByKey(this.dimensionId)||Ext.raise("There is no aggregate dimension that matches the dimensionId provided"),this.parent.matrix.aggregate.getByKey(this.dimensionId)},getSerialArgs:function(){return{dimensionId:this.dimensionId,topType:this.topType,topOrder:this.topOrder,topSort:this.topSort}},applyFilter:function(e,t){var i=this.topSort?t:Ext.Array.clone(t),n=[];if(0===t.length)return n;switch(this.sortItemsByGrandTotal(e,i),this.topType){case"items":n=this.extractTop10Items(i);break;case"sum":n=this.extractTop10Sum(i);break;case"percent":n=this.extractTop10Percent(e,i)}return this.topSort||(i.length=0),n},extractTop10Items:function(e){var t,i=[];for(t=0;t<e.length&&!(i.indexOf(e[t].tempVar)<0&&(i.push(e[t].tempVar),i.length>this.value||this.value<t+1&&0<t));t++);return Ext.Array.slice(e,t)},extractTop10Sum:function(e){var t,i=0;for(t=0;t<e.length&&!((i+=e[t].tempVar)>=this.value);t++);return Ext.Array.slice(e,t+1)},extractTop10Percent:function(e,t){var i,n,r,o,a,s,l=0,d=t[0].key.split(e.matrix.keysSeparator);for(d.length--,o=0<d.length?d.join(e.matrix.keysSeparator):e.matrix.grandTotalKey,n=e.isLeftAxis?o:e.matrix.grandTotalKey,r=e.isLeftAxis?e.matrix.grandTotalKey:o,s=(a=e.matrix.results.get(n,r))?a.getValue(this.dimensionId):0,i=0;i<t.length&&!(100*(l+=t[i].tempVar)/s>=this.value);i++);return Ext.Array.slice(t,i+1)},sortItemsByGrandTotal:function(n,e){var t,i,r,o,a=this;for(o=0;o<e.length;o++)t=n.isLeftAxis?e[o].key:n.matrix.grandTotalKey,i=n.isLeftAxis?n.matrix.grandTotalKey:e[o].key,r=n.matrix.results.get(t,i),e[o].tempVar=r?r.getValue(a.dimensionId):0;Ext.Array.sort(e,function(e,t){var i=n.matrix.naturalSort(e.tempVar,t.tempVar);return i<0&&"top"===a.topOrder?1:0<i&&"top"===a.topOrder?-1:i})}}),Ext.define("Ext.pivot.dimension.Item",{alternateClassName:["Mz.aggregate.dimension.Item"],requires:["Ext.pivot.MixedCollection","Ext.pivot.filter.Label","Ext.pivot.filter.Value","Ext.app.bind.Template"],$configPrefixed:!1,$configStrict:!1,config:{id:null,header:"",dataIndex:"",sortIndex:"",width:100,flex:0,align:"left",sortable:!0,direction:"ASC",sorterFn:null,caseSensitiveSort:!0,filter:null,labelRenderer:null,renderer:null,formatter:null,column:null,exportStyle:null,scope:null,grouperFn:null,blankText:"(blank)",showZeroAsBlank:!1,aggregator:"sum",values:[]},isAggregate:!1,matrix:null,constructor:function(e){var t=this;return this.initConfig(e),t.getId()||t.setId(Ext.id()),Ext.isEmpty(t.dataIndex)&&Ext.raise("No dataIndex provided to the dimension!"),t.grouperFn||(t.groupFn=Ext.bind(t.defaultGrouperFn,t)),t.sortable?t.sorterFn||(t.sortFn=Ext.bind(t.defaultSorterFn,t)):t.sortFn=Ext.bind(t.manualSorterFn,t),Ext.isEmpty(t.getSortIndex())&&t.setSortIndex(t.getDataIndex()),!t.isAggregate||t.getFormatter()||t.getRenderer()||t.setRenderer(t.getDefaultFormatRenderer("0,000.00")),this.callParent([e])},destroy:function(){this.setConfig({values:null,grouperFn:null,sorterFn:null,filter:null,renderer:null,labelRenderer:null,aggregator:null}),this.callParent()},serialize:function(){return this.getConfiguration(!0)},getConfiguration:function(e){var t=this.getConfig();return delete t.values,t.filter&&(t.filter=t.filter.serialize()),e&&"function"==typeof t.aggregator&&(t.aggregator="sum"),e&&"function"==typeof t.renderer&&(t.renderer=null),e&&"function"==typeof t.labelRenderer&&(t.labelRenderer=null),t},applyId:function(e){return e||Ext.id()},updateExportStyle:function(e){e&&!e.id&&(e.id=this.getId())},applyFilter:function(e,t){return null==e?e:e&&e.isFilter?(e.parent=this,e):e=!!Ext.isObject(e)&&(Ext.applyIf(e,{type:"label",parent:this}),Ext.Factory.pivotfilter(e))},updateAggregator:function(e){var t=Ext.pivot.Aggregators;Ext.isString(e)&&Ext.isFunction(t[e])?this.aggregatorFn=Ext.bind(t[e],t):this.aggregatorFn=e||"sum"},updateGrouperFn:function(e){this.groupFn=Ext.isFunction(e)?Ext.bind(e,this):e},updateSorterFn:function(e){this.sortFn=Ext.isFunction(e)?Ext.bind(e,this):e},addValue:function(e,t){var i=this.values;i.getByKey(e)||i.add({sortValue:e,value:e,display:t})},applyValues:function(e,t){var i;return Ext.destroy(t),e&&!e.isInstance?((i=new Ext.pivot.MixedCollection).getKey=function(e){return e.value},i.addAll(e),i):e},sortValues:function(){this.sortable&&this.values.sortBy(this.sortFn)},defaultSorterFn:function(e,t){var i,n=e.sortValue,r=t.sortValue;return n instanceof Date&&(n=n.getTime()),r instanceof Date&&(r=r.getTime()),this.caseSensitiveSort||(n="string"==typeof n?n.toUpperCase():n,r="string"==typeof r?r.toUpperCase():r),(i=this.matrix.useNaturalSorting?this.matrix.naturalSort(n,r):n===r?0:n<r?-1:1)<0&&"DESC"===this.direction?1:0<i&&"DESC"===this.direction?-1:i},manualSorterFn:function(e,t){var i=this.values,n=i?i.indexOfKey(e.value):0,r=i?i.indexOfKey(t.value):0;return n===r?0:n<r?-1:1},getDefaultFormatRenderer:function(i){var n=this;return function(e){var t;return Ext.isEmpty(i)?e:Ext.isFunction(i)?i.apply(n,arguments):Ext.isNumber(e)?n.isAggregate&&0===e&&n.showZeroAsBlank?"":(t=0<=e,e=Math.abs(e),e=Ext.util.Format.number(e,i),t?e:"-"+e):e}},defaultGrouperFn:function(e){return e.get(this.dataIndex)},getFormatterFn:function(){var e,t=this,i=t.getFormatter();if(i)return(e=0===i.indexOf("this."))&&(i=i.substring(5)),i=Ext.app.bind.Template.prototype.parseFormat(i),e&&(i.scope=null),function(e){return i.format(e,i.scope||t.getScope()||t.matrix.cmp.resolveListenerScope("self.controller")||this)}},aggregatorFn:Ext.emptyFn,groupFn:Ext.emptyFn,sortFn:Ext.emptyFn}),Ext.define("Ext.pivot.axis.Item",{alternateClassName:["Mz.aggregate.axis.Item"],level:0,key:"",value:"",sortValue:"",name:"",dimensionId:"",dimension:null,children:null,record:null,records:null,axis:null,data:null,expanded:!1,constructor:function(e){var t;Ext.apply(this,e||{}),Ext.isEmpty(this.sortValue)&&(this.sortValue=this.value),t=this.axis,this.expanded=t&&(t.isLeftAxis&&!t.matrix.collapsibleRows||!t.isLeftAxis&&!t.matrix.collapsibleColumns),this.callParent(arguments)},destroy:function(){Ext.destroy(this.children),this.axis=this.data=this.dimension=this.record=this.children=this.records=null,this.callParent(arguments)},getTextTotal:function(){return Ext.XTemplate.getTpl(this.axis.matrix,"textTotalTpl").apply({groupField:this.dimension.dataIndex,columnName:this.dimension.dataIndex,name:this.name,rows:this.children||[]})},expand:function(e){(this.expanded=!0)===e&&this.expandCollapseChildrenTree(!0),this.axis.matrix.fireEvent("groupexpand",this.axis.matrix,this.axis.isLeftAxis?"row":"col",this)},collapse:function(e){!(this.expanded=!1)===e&&this.expandCollapseChildrenTree(!1),this.axis.matrix.fireEvent("groupcollapse",this.axis.matrix,this.axis.isLeftAxis?"row":"col",this)},expandCollapseChildrenTree:function(e){var t;if(this.expanded=e,Ext.isArray(this.children))for(t=0;t<this.children.length;t++)this.children[t].expandCollapseChildrenTree(e)}}),Ext.define("Ext.pivot.axis.Base",{alternateClassName:["Mz.aggregate.axis.Abstract"],alias:"pivotaxis.base",mixins:["Ext.mixin.Factoryable"],requires:["Ext.pivot.MixedCollection","Ext.pivot.dimension.Item","Ext.pivot.axis.Item"],dimensions:null,matrix:null,items:null,tree:null,levels:0,isLeftAxis:!1,constructor:function(e){var t=this;e&&e.matrix?(t.isLeftAxis=e.isLeftAxis||t.isLeftAxis,t.matrix=e.matrix,t.tree=[],t.dimensions=new Ext.pivot.MixedCollection,t.dimensions.getKey=function(e){return e.getId()},t.items=new Ext.pivot.MixedCollection,t.items.getKey=function(e){return e.key},Ext.Array.each(Ext.Array.from(e.dimensions||[]),t.addDimension,t)):Ext.log("Wrong initialization of the axis!")},destroy:function(){Ext.destroyMembers(this,"dimensions","items","tree"),this.matrix=this.dimensions=this.items=this.tree=null},addDimension:function(e){var t=e;e&&(e.isInstance||(t=new Ext.pivot.dimension.Item(e)),t.matrix=this.matrix,this.dimensions.add(t))},addItem:function(e){return!(!Ext.isObject(e)||Ext.isEmpty(e.key)||Ext.isEmpty(e.value)||Ext.isEmpty(e.dimensionId))&&(e.key=String(e.key),e.dimension=this.dimensions.getByKey(e.dimensionId),e.name=e.name||Ext.callback(e.dimension.labelRenderer,e.dimension.scope||"self.controller",[e.value],0,this.matrix.cmp)||e.value,e.dimension.addValue(e.value,e.name),!((e.axis=this).items.map[e.key]||!e.dimension)&&(this.items.add(new Ext.pivot.axis.Item(e)),!0))},clear:function(){this.items.clear(),this.tree=null},getTree:function(){return this.tree||this.buildTree(),this.tree},expandAll:function(){var e,t=this.getTree(),i=t.length;for(e=0;e<i;e++)t[e].expandCollapseChildrenTree(!0);0<i&&this.matrix.fireEvent("groupexpand",this.matrix,this.isLeftAxis?"row":"col",null)},collapseAll:function(){var e,t=this.getTree(),i=t.length;for(e=0;e<i;e++)t[e].expandCollapseChildrenTree(!1);0<i&&this.matrix.fireEvent("groupcollapse",this.matrix,this.isLeftAxis?"row":"col",null)},findTreeElement:function(e,t){var i,n,r=this.items,o=r.getCount(),a=!1;for(i=0;i<o;i++)if(n=r.items[i],Ext.isDate(t)?Ext.Date.isEqual(n[e],t):n[e]===t){a=!0;break}return a?{level:n.level,node:n}:null},buildTree:function(){var e,t,i,n,r,o=this,a=o.dimensions.items,s=a.length;for(e=0;e<s;e++)a[e].sortValues();for(o.tree=[],s=(a=o.items.items).length,e=0;e<s;e++)t=a[e],i=String(t.key).split(o.matrix.keysSeparator),n=(i=Ext.Array.slice(i,0,i.length-1)).join(o.matrix.keysSeparator),(r=o.items.map[n])?(t.level=r.level+1,t.data=Ext.clone(r.data||{}),r.children=r.children||[],r.children.push(t)):(t.level=0,t.data={},o.tree.push(t)),t.data[t.dimension.getId()]=t.name,o.levels=Math.max(o.levels,t.level);o.sortTree()},rebuildTree:function(){var e,t=this.items.items,i=t.length;for(this.tree=null,e=0;e<i;e++)t[e].children=null;this.buildTree()},sortTree:function(){var e,t,i,n=arguments[0]||this.tree,r=n.length;for(0<n.length&&(e=n[0].dimension),e&&Ext.Array.sort(n,e.sortFn),t=0;t<r;t++)(i=n[t]).children&&this.sortTree(i.children)},sortTreeByField:function(e,t){var i,n,r,o=this,a=!1;if(e===o.matrix.compactViewKey)for(a=o.sortTreeByDimension(o.tree,o.dimensions.items,t),n=o.dimensions.items.length,r=0;r<n;r++)o.dimensions.items[r].direction=t;else t=t||"ASC",(i=o.dimensions.getByKey(e))?(a=o.sortTreeByDimension(o.tree,i,t),i.direction=t):a=o.sortTreeByRecords(o.tree,e,t);return a},sortTreeByDimension:function(e,t,i){var n,r,o,a,s=!1,l=Ext.Array.from(t);for(0<(r=(e=e||[]).length)&&(n=e[0].dimension),0<=Ext.Array.indexOf(l,n)&&(n.sortable&&(a=n.direction,n.direction=i,Ext.Array.sort(e,n.sortFn),n.direction=a),s=n.sortable),o=0;o<r;o++)s=this.sortTreeByDimension(e[o].children,t,i)||s;return s},sortTreeByRecords:function(e,t,i){var n,r;if((r=(e=e||[]).length)<=0)return!1;for(e[0].record?this.sortTreeRecords(e,t,i):this.sortTreeLeaves(e,t,i),n=0;n<r;n++)this.sortTreeByRecords(e[n].children,t,i);return!0},sortTreeRecords:function(e,o,a){var s=this.matrix.naturalSort;a=a||"ASC",Ext.Array.sort(e||[],function(e,t){var i,n=e.record,r=t.record;return n&&n.isModel&&r&&r.isModel?(i=s(n.get(o)||"",r.get(o)||""))<0&&"DESC"===a?1:0<i&&"DESC"===a?-1:i:0})},sortTreeLeaves:function(e,t,o){var a,s,l=this.matrix.naturalSort,d=this.matrix.results,i=this.matrix.model,n=Ext.Array.indexOf(Ext.Array.pluck(i,"name"),t);if(n<0)return!1;a=i[n].col,s=i[n].agg,o=o||"ASC",Ext.Array.sort(e||[],function(e,t){var i,n,r;return n=(n=d.get(e.key,a))?n.getValue(s):0,r=(r=d.get(t.key,a))?r.getValue(s):0,(i=l(n,r))<0&&"DESC"===o?1:0<i&&"DESC"===o?-1:i})}}),Ext.define("Ext.pivot.axis.Local",{alternateClassName:["Mz.aggregate.axis.Local"],extend:"Ext.pivot.axis.Base",alias:"pivotaxis.local",processRecord:function(e){var t,i,n,r,o=[],a="",s=!0,l=this.dimensions.items.length;for(r=0;r<l&&(n=this.dimensions.items[r],t=Ext.callback(n.groupFn,n.scope||"self.controller",[e],0,this.matrix.cmp),i=a?a+this.matrix.keysSeparator:"",t=Ext.isEmpty(t)?n.blankText:t,i+=this.matrix.getKey(t),n.filter instanceof Ext.pivot.filter.Label&&(s=n.filter.isMatch(t)),s);r++)o.push({value:t,sortValue:e.get(n.sortIndex),key:i,dimensionId:n.getId()}),a=i;return s?o:null},buildTree:function(){this.callParent(arguments),this.filterTree()},filterTree:function(){var e,t=this.dimensions.items.length,i=!1;for(e=0;e<t;e++)i=i||this.dimensions.items[e].filter instanceof Ext.pivot.filter.Value;i&&(this.matrix.filterApplied=!0,this.filterTreeItems(this.tree))},filterTreeItems:function(e){var t,i,n;if(e&&Ext.isArray(e)&&!(e.length<=0)){if((t=e[0].dimension.filter)&&t instanceof Ext.pivot.filter.Value)for(n=t.isTopFilter?t.applyFilter(this,e)||[]:Ext.Array.filter(e,this.canRemoveItem,this),this.removeRecordsFromResults(n),this.removeItemsFromArray(e,n),i=0;i<n.length;i++)this.removeTreeChildren(n[i]);for(i=0;i<e.length;i++)e[i].children&&(this.filterTreeItems(e[i].children),0===e[i].children.length&&(this.items.remove(e[i]),Ext.Array.erase(e,i,1),i--))}},removeTreeChildren:function(e){var t,i;if(e.children)for(i=e.children.length,t=0;t<i;t++)this.removeTreeChildren(e.children[t]);this.items.remove(e)},canRemoveItem:function(e){var t=this.isLeftAxis?e.key:this.matrix.grandTotalKey,i=this.isLeftAxis?this.matrix.grandTotalKey:e.key,n=this.matrix.results.get(t,i),r=e.dimension.filter;return!!n&&!r.isMatch(n.getValue(r.dimensionId))},removeItemsFromArray:function(e,t){var i;for(i=0;i<e.length;i++)0<=Ext.Array.indexOf(t,e[i])&&(Ext.Array.erase(e,i,1),i--)},removeRecordsFromResults:function(e){var t;for(t=0;t<e.length;t++)this.removeRecordsByItem(e[t])},removeRecordsByItem:function(e){var t,i,n,r,o=this;if(e.children&&o.removeRecordsFromResults(e.children),n=o.isLeftAxis?(r=o.matrix.results.get(e.key,o.matrix.grandTotalKey),o.matrix.results.getByLeftKey(o.matrix.grandTotalKey)):(r=o.matrix.results.get(o.matrix.grandTotalKey,e.key),o.matrix.results.getByTopKey(o.matrix.grandTotalKey)),r){for(i=0;i<n.length;i++)o.removeItemsFromArray(n[i].records,r.records);for((t=e.key.split(o.matrix.keysSeparator)).length=t.length-1;0<t.length;){for(n=o.isLeftAxis?o.matrix.results.getByLeftKey(t.join(o.matrix.keysSeparator)):o.matrix.results.getByTopKey(t.join(o.matrix.keysSeparator)),i=0;i<n.length;i++)o.removeItemsFromArray(n[i].records,r.records);t.length=t.length-1}}}}),Ext.define("Ext.pivot.feature.PivotStore",{config:{store:null,grid:null,matrix:null,clsGrandTotal:"",clsGroupTotal:""},totalRowEvent:"pivottotal",groupRowEvent:"pivotgroup",itemRowEvent:"pivotitem",constructor:function(e){return this.initConfig(e),this.callParent(arguments)},destroy:function(){Ext.destroy(this.storeListeners,this.matrixListeners),this.setConfig({store:null,matrix:null,grid:null}),this.storeInfo=this.storeListeners=null,this.callParent(arguments)},updateStore:function(e){Ext.destroy(this.storeListeners),e&&(this.storeListeners=e.on({pivotstoreremodel:this.processStore,scope:this,destroyable:!0}))},updateMatrix:function(e){Ext.destroy(this.matrixListeners),e&&(this.matrixListeners=e.on({groupexpand:this.onGroupExpand,groupcollapse:this.onGroupCollapse,scope:this,destroyable:!0}))},processStore:function(){var e,t,i,n,r,o=this.getStore(),a=this.getMatrix(),s=[];if(a&&o){for(r=a.getColumns(),o.suspendEvents(),o.model.replaceFields(r,!0),this.storeInfo={},"first"===a.rowGrandTotalsPosition&&s.push.apply(s,this.processGrandTotal()||[]),t=(e=a.leftAxis.getTree()).length,i=0;i<t;i++)n=e[i],s.push.apply(s,this.processGroup({group:n,previousExpanded:0<i&&e[i-1].expanded})||[]);"last"===a.rowGrandTotalsPosition&&s.push.apply(s,this.processGrandTotal()||[]),o.loadData(s),o.resumeEvents(),o.fireEvent("refresh",o)}},processGroup:function(e){var t=this["processGroup"+Ext.String.capitalize(this.getMatrix().viewLayoutType)];return Ext.isFunction(t)||(t=this.processGroupOutline),t.call(this,e)},processGrandTotal:function(){var e,t,i,n,r,o,a,s=!1,l=this.getMatrix(),d={key:l.grandTotalKey},u=[],c=l.totals.length,h=l.leftAxis.dimensions.items,f=h.length;for(e=0;e<c;e++)if(i=f,(o=(n=l.totals[e]).record)&&o.isModel){for(this.storeInfo[o.internalId]={leftKey:d.key,rowStyle:"",rowClasses:[this.getClsGrandTotal()],rowEvent:this.totalRowEvent,rendererParams:{}},t=0;t<f;t++)r=h[t],"compact"===l.viewLayoutType||0===t?("compact"===l.viewLayoutType?(a=l.compactViewKey,i=1):a=r.getId(),o.data[a]=n.title,this.storeInfo[o.internalId].rendererParams[a]={fn:"groupOutlineRenderer",group:d,colspan:i,hidden:!1,subtotalRow:!0},s=!0):(this.storeInfo[o.internalId].rendererParams[r.id]={fn:"groupOutlineRenderer",group:d,colspan:0,hidden:s,subtotalRow:!0},i--);this.storeInfo[o.internalId].rendererParams.topaxis={fn:"topAxisRenderer"},u.push(o)}return u},processGroupOutline:function(e){var t=e.group,i=[];return t.record?this.processRecordOutline({results:i,group:t}):this.processGroupOutlineWithChildren({results:i,group:t,previousExpanded:e.previousExpanded}),i},processGroupOutlineWithChildren:function(e){var t,i,n,r,o=this.getMatrix(),a=e.group,s=e.previousExpanded;if(t=!a.expanded||a.expanded&&"first"===o.rowSubTotalsPosition,i=a.expanded?a.records.expanded:a.records.collapsed,this.processGroupHeaderRecordOutline({results:e.results,group:a,record:i,previousExpanded:s,hasSummaryData:t}),a.expanded){if(a.children)for(r=a.children.length,n=0;n<r;n++)a.children[n].children?this.processGroupOutlineWithChildren({results:e.results,group:a.children[n]}):this.processRecordOutline({results:e.results,group:a.children[n]});"last"===o.rowSubTotalsPosition&&(i=a.records.footer,this.processGroupHeaderRecordOutline({results:e.results,group:a,record:i,previousExpanded:s,subtotalRow:!0,hasSummaryData:!0}))}},processGroupHeaderRecordOutline:function(e){var t,i,n=this.getMatrix(),r=e.group,o=e.record,a=e.previousExpanded,s=e.subtotalRow,l=e.hasSummaryData,d=n.leftAxis.dimensions.items,u=d.length,c=u,h=!1;for(this.storeInfo[o.internalId]={leftKey:r.key,rowStyle:"",rowClasses:[this.getClsGroupTotal()],rowEvent:this.groupRowEvent,rendererParams:{}},t=0;t<u;t++)(i=d[t]).id===r.dimension.id?(this.storeInfo[o.internalId].rendererParams[i.id]={fn:"groupOutlineRenderer",group:r,colspan:c,hidden:!1,previousExpanded:a,subtotalRow:s},h=!0):(this.storeInfo[o.internalId].rendererParams[i.id]={fn:"groupOutlineRenderer",group:r,colspan:0,hidden:h,previousExpanded:a,subtotalRow:s},c--);this.storeInfo[o.internalId].rendererParams.topaxis={fn:l?"topAxisRenderer":"topAxisNoRenderer",group:r},e.results.push(o)},processRecordOutline:function(e){var t,i,n=e.group,r=!1,o=n.record,a=this.getMatrix().leftAxis.dimensions.items,s=a.length;for(this.storeInfo[o.internalId]={leftKey:n.key,rowStyle:"",rowClasses:[],rowEvent:this.itemRowEvent,rendererParams:{}},t=0;t<s;t++)(i=a[t]).id===n.dimension.id&&(r=!0),this.storeInfo[o.internalId].rendererParams[i.id]={fn:"recordOutlineRenderer",group:n,hidden:!r};this.storeInfo[o.internalId].rendererParams.topaxis={fn:"topAxisRenderer",group:n},e.results.push(o)},processGroupCompact:function(e){var t=e.group,i=e.previousExpanded,n=[];return t.record?this.processRecordCompact({results:n,group:t}):this.processGroupCompactWithChildren({results:n,group:t,previousExpanded:i}),n},processGroupCompactWithChildren:function(e){var t,i,n,r=this.getMatrix(),o=e.group,a=e.previousExpanded;if(t=!o.expanded||o.expanded&&"first"===r.rowSubTotalsPosition,this.processGroupHeaderRecordCompact({results:e.results,group:o,record:o.expanded?o.records.expanded:o.records.collapsed,previousExpanded:a,hasSummaryData:t}),o.expanded){if(o.children)for(n=o.children.length,i=0;i<n;i++)o.children[i].children?this.processGroupCompactWithChildren({results:e.results,group:o.children[i]}):this.processRecordCompact({results:e.results,group:o.children[i]});"last"===r.rowSubTotalsPosition&&this.processGroupHeaderRecordCompact({results:e.results,group:o,record:o.records.footer,previousExpanded:a,subtotalRow:!0,hasSummaryData:!0})}},processGroupHeaderRecordCompact:function(e){var t=this.getMatrix(),i=e.group,n=e.record,r=e.previousExpanded,o=e.subtotalRow,a=e.hasSummaryData;this.storeInfo[n.internalId]={leftKey:i.key,rowStyle:"",rowClasses:[this.getClsGroupTotal()],rowEvent:this.groupRowEvent,rendererParams:{}},this.storeInfo[n.internalId].rendererParams[t.compactViewKey]={fn:"groupCompactRenderer",group:i,colspan:0,previousExpanded:r,subtotalRow:o},this.storeInfo[n.internalId].rendererParams.topaxis={fn:a?"topAxisRenderer":"topAxisNoRenderer",group:i},e.results.push(n)},processRecordCompact:function(e){var t=e.group,i=t.record;this.storeInfo[i.internalId]={leftKey:t.key,rowStyle:"",rowClasses:[],rowEvent:this.itemRowEvent,rendererParams:{}},this.storeInfo[i.internalId].rendererParams[this.getMatrix().compactViewKey]={fn:"recordCompactRenderer",group:t},this.storeInfo[i.internalId].rendererParams.topaxis={fn:"topAxisRenderer",group:t},e.results.push(i)},processGroupTabular:function(e){var t=e.group,i=[];return t.record?this.processRecordTabular({results:i,group:t}):this.processGroupTabularWithChildren({results:i,group:t,previousExpanded:e.previousExpanded}),i},processGroupTabularWithChildren:function(e,t){var i,n,r,o,a=this.getMatrix(),s=e.group,l=e.previousExpanded;if(t||this.processGroupHeaderRecordTabular({results:e.results,group:s,previousExpanded:l,hasSummaryData:!s.expanded}),s.expanded){if(s.children)for(o=s.children.length,n=0;n<o;n++)r=s.children[n],0===n&&r.children&&r.expanded?this.processGroupTabularWithChildren({results:e.results,group:r},!0):0<n&&(r.children?this.processGroupTabularWithChildren({results:e.results,group:r}):this.processRecordTabular({results:e.results,group:r}));"none"!==a.rowSubTotalsPosition&&(i=s.records.footer,this.processGroupHeaderRecordTabular({results:e.results,group:s,record:i,previousExpanded:l,subtotalRow:!0,hasSummaryData:!0}))}},getTabularGroupRecord:function(e){var t=e.record;return t=t||(e.expanded?this.getTabularGroupRecord(e.children[0]):e.records.collapsed)},processGroupHeaderRecordTabular:function(e){var t,i,n,r,o,a,s=this.getMatrix(),l=e.group,d=e.record,u=e.previousExpanded,c=e.subtotalRow,h=e.hasSummaryData,f=s.leftAxis.dimensions.length,g=f,p=!1,m={},x=[],y=this.itemRowEvent;if(d){for(t=0;t<f;t++)m[(i=s.leftAxis.dimensions.items[t]).id]={fn:"groupTabularRenderer",group:l,colspan:0,hidden:!1,previousExpanded:u,subtotalRow:c},i.id===l.dimension.id?(m[i.id].colspan=g,p=!0):(m[i.id].hidden=p,g--);n=l}else{for(d=(n=l).record;!d;)m[n.dimension.id]={fn:"groupTabularRenderer",group:n,colspan:0,hidden:!1,previousExpanded:u,subtotalRow:c},n.children?n.expanded?n=n.children[0]:(d=n.records.collapsed,m[n.dimension.id].colspan=f-n.level):d=n.record;for(p=!1,t=0;t<f;t++)m[(i=s.leftAxis.dimensions.items[t]).id]?(d.data[i.id]=m[i.id].group.name,p=!0):p?m[i.id]={fn:"groupTabularRenderer",group:l,colspan:0,hidden:!0,previousExpanded:u,subtotalRow:c}:d.data[i.id]="";if(0<l.level)for((r=(a=l).key.split(s.keysSeparator)).length--,o=s.leftAxis.items.getByKey(r.join(s.keysSeparator));o&&o.children[0]===a;)m[o.dimension.id]={fn:"groupTabularRenderer",group:o,colspan:0,hidden:!1,previousExpanded:u,subtotalRow:c},d.data[o.dimension.id]=o.name,(r=(a=o).key.split(s.keysSeparator)).length--,o=s.leftAxis.items.getByKey(r.join(s.keysSeparator))}h&&(x.push(this.getClsGroupTotal()),y=this.groupRowEvent),this.storeInfo[d.internalId]={leftKey:l.key,rowStyle:"",rowClasses:x,rowEvent:y,rendererParams:m},this.storeInfo[d.internalId].rendererParams.topaxis={fn:"topAxisRenderer",group:n},e.results.push(d)},processRecordTabular:function(e){var t,i,n=e.group,r=!1,o=n.record,a=this.getMatrix().leftAxis.dimensions.items,s=a.length;for(this.storeInfo[o.internalId]={leftKey:n.key,rowStyle:"",rowClasses:[],rowEvent:this.itemRowEvent,rendererParams:{}},t=0;t<s;t++)(i=a[t]).id===n.dimension.id?r=!0:o.data[i.id]=null,this.storeInfo[o.internalId].rendererParams[i.id]={fn:"recordTabularRenderer",group:n,hidden:!r};this.storeInfo[o.internalId].rendererParams.topaxis={fn:"topAxisRenderer",group:n},e.results.push(o)},doExpandCollapse:function(e,t){var i,n=this.getGrid();(i=this.getMatrix().leftAxis.findTreeElement("key",e))&&(this.doExpandCollapseInternal(i.node,t),n.fireEvent(i.node.expanded?"pivotgroupexpand":"pivotgroupcollapse",n,"row",i.node))},doExpandCollapseInternal:function(e,t){var i,n,r,o=this.getStore(),a=Ext.isClassic;e.expanded=!e.expanded,n=this.processGroup({group:e,previousExpanded:!1}),e.expanded=!e.expanded,(i=this.processGroup({group:e,previousExpanded:!1})).length&&n.length&&-1!==(r=o.indexOf(n[0]))&&(o.suspendEvents(),e.expanded?o.remove(o.getAt(r)):o.remove(n),o.insert(r,i),this.removeStoreInfoData(n),o.resumeEvents(),a?o.fireEvent("replace",o,r,n,i):o.fireEvent("refresh",o))},removeStoreInfoData:function(e){var t,i,n=e.length;for(i=0;i<n;i++)t=e[i],this.storeInfo[t.internalId]&&delete this.storeInfo[t.internalId]},onGroupExpand:function(e,t,i){"row"===t&&(i?this.doExpandCollapseInternal(i,i.records.collapsed):this.processStore())},onGroupCollapse:function(e,t,i){"row"===t&&(i?this.doExpandCollapseInternal(i,i.records.expanded):this.processStore())}}),Ext.define("Ext.pivot.result.Base",{alias:"pivotresult.base",mixins:["Ext.mixin.Factoryable"],leftKey:"",topKey:"",dirty:!1,values:null,matrix:null,constructor:function(e){return Ext.apply(this,e||{}),this.values={},this.callParent(arguments)},destroy:function(){return this.matrix=this.values=null,this.leftAxisItem=this.topAxisItem=null,this.callParent(arguments)},calculate:Ext.emptyFn,calculateByFn:Ext.emptyFn,addValue:function(e,t){this.values[e]=t},getValue:function(e){return this.values[e]},hasValue:function(e){return e in this.values},getLeftAxisItem:function(){return this.matrix.leftAxis.items.getByKey(this.leftKey)},getTopAxisItem:function(){return this.matrix.topAxis.items.getByKey(this.topKey)}}),Ext.define("Ext.pivot.result.Collection",{alternateClassName:["Mz.aggregate.matrix.Results"],requires:["Ext.pivot.MixedCollection","Ext.pivot.result.Base"],resultType:"base",items:null,matrix:null,constructor:function(e){return Ext.apply(this,e||{}),this.items=new Ext.pivot.MixedCollection,this.items.getKey=function(e){return e.leftKey+"/"+e.topKey},this.callParent(arguments)},destroy:function(){Ext.destroy(this.items),this.matrix=this.items=null,this.callParent(arguments)},clear:function(){this.items.clear()},add:function(e,t){var i=this.get(e,t);return i=i||this.items.add(Ext.Factory.pivotresult({type:this.resultType,leftKey:e,topKey:t,matrix:this.matrix}))},get:function(e,t){return this.items.getByKey(e+"/"+t)},remove:function(e,t){this.items.removeAtKey(e+"/"+t)},getByLeftKey:function(n){return this.items.filterBy(function(e,t){var i=String(t).split("/");return n===i[0]}).getRange()},getByTopKey:function(n){return this.items.filterBy(function(e,t){var i=String(t).split("/");return 1<i.length&&n===i[1]}).getRange()},calculate:function(){var e,t=this.items.getCount();for(e=0;e<t;e++)this.items.getAt(e).calculate()}}),Ext.define("Ext.pivot.matrix.Base",{alternateClassName:["Mz.aggregate.matrix.Abstract"],extend:"Ext.util.Observable",alias:"pivotmatrix.base",mixins:["Ext.mixin.Factoryable"],requires:["Ext.util.DelayedTask","Ext.data.ArrayStore","Ext.XTemplate","Ext.pivot.Aggregators","Ext.pivot.MixedCollection","Ext.pivot.axis.Base","Ext.pivot.dimension.Item","Ext.pivot.result.Collection"],resultType:"base",leftAxisType:"base",topAxisType:"base",textRowLabels:"Row labels",textTotalTpl:"Total ({name})",textGrandTotalTpl:"Grand total",keysSeparator:"#_#",grandTotalKey:"grandtotal",compactViewKey:"_compactview_",compactViewColumnWidth:200,viewLayoutType:"outline",rowSubTotalsPosition:"first",rowGrandTotalsPosition:"last",colSubTotalsPosition:"last",colGrandTotalsPosition:"last",showZeroAsBlank:!1,calculateAsExcel:!1,leftAxis:null,topAxis:null,aggregate:null,results:null,pivotStore:null,isDestroyed:!1,cmp:null,useNaturalSorting:!1,collapsibleRows:!0,collapsibleColumns:!0,isPivotMatrix:!0,serializeProperties:["viewLayoutType","rowSubTotalsPosition","rowGrandTotalsPosition","colSubTotalsPosition","colGrandTotalsPosition","showZeroAsBlank","collapsibleRows","collapsibleColumns"],constructor:function(e){var t=this.callParent(arguments);return this.initialize(!0,e),t},destroy:function(){var e=this;e.delayedTask.cancel(),e.delayedTask=null,Ext.isFunction(e.onDestroy)&&e.onDestroy(),Ext.destroy(e.results,e.leftAxis,e.topAxis,e.aggregate,e.pivotStore),e.results=e.leftAxis=e.topAxis=e.aggregate=e.pivotStore=null,Ext.isArray(e.columns)&&(e.columns.length=0),Ext.isArray(e.model)&&(e.model.length=0),Ext.isArray(e.totals)&&(e.totals.length=0),e.columns=e.model=e.totals=e.keysMap=e.cmp=e.modelInfo=null,e.isDestroyed=!0,e.callParent(arguments)},getKey:function(e){return this.keysMap=this.keysMap||{},Ext.isDefined(this.keysMap[e])||(this.keysMap[e]=Ext.id()),this.keysMap[e]},naturalSort:function(){function g(e,t){return(!(e=e||"").match(n)||1===t)&&parseFloat(e)||e.replace(i," ").replace(m,"")||0}var p=/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[\da-fA-F]+$|\d+)/g,m=/^\s+|\s+$/g,i=/\s+/g,x=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,y=/^0x[0-9a-f]+$/i,n=/^0/;return function(e,t){var i,n,r,o,a,s,l=String(e instanceof Date?e.getTime():e||"").replace(m,""),d=String(t instanceof Date?t.getTime():t||"").replace(m,""),u=l.replace(p,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),c=d.replace(p,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(l.match(y),16)||1!==u.length&&Date.parse(l),f=parseInt(d.match(y),16)||h&&d.match(x)&&Date.parse(d)||null;if(f){if(h<f)return-1;if(f<h)return 1}for(r=0,o=u.length,a=c.length,s=Math.max(o,a);r<s;r++){if(i=g(u[r],o),n=g(c[r],a),isNaN(i)!==isNaN(n))return isNaN(i)?1:-1;if(typeof i!=typeof n&&(i+="",n+=""),i<n)return-1;if(n<i)return 1}return 0}}(),initialize:function(e,t){var i,n=this,r=n.serializeProperties;for(t=t||{},n.initResults(),(e||t.aggregate)&&n.initAggregates(t.aggregate||[]),(e||t.leftAxis)&&n.initLeftAxis(t.leftAxis||[]),(e||t.topAxis)&&n.initTopAxis(t.topAxis||[]),i=0;i<r.length;i++)Ext.isDefined(t[r[i]])&&(n[r[i]]=t[r[i]]);n.totals=[],n.modelInfo={},n.keysMap=null,e||(n.collapsibleRows||n.leftAxis.expandAll(),n.collapsibleColumns||n.topAxis.expandAll()),e&&(n.pivotStore=new Ext.data.ArrayStore({autoDestroy:!1,fields:[]}),n.delayedTask=new Ext.util.DelayedTask(n.startProcess,n),Ext.isFunction(n.onInitialize)&&n.onInitialize()),n.delayedTask.delay(5)},onInitialize:Ext.emptyFn,onDestroy:Ext.emptyFn,reconfigure:function(e){var t=Ext.clone(e||{});!1!==this.fireEvent("beforereconfigure",this,t)?(Ext.isFunction(this.onReconfigure)&&this.onReconfigure(t),this.fireEvent("reconfigure",this,t),this.initialize(!1,t),this.clearData()):this.delayedTask.cancel()},onReconfigure:Ext.emptyFn,serialize:function(){var e,t,i=this.serializeProperties,n=i.length,r={};for(e=0;e<n;e++)r[t=i[e]]=this[t];return r.leftAxis=this.serializeDimensions(this.leftAxis.dimensions),r.topAxis=this.serializeDimensions(this.topAxis.dimensions),r.aggregate=this.serializeDimensions(this.aggregate),r},serializeDimensions:function(e){var t,i=e.getCount(),n=[];for(t=0;t<i;t++)n.push(e.getAt(t).serialize());return n},initResults:function(){Ext.destroy(this.results),this.results=new Ext.pivot.result.Collection({resultType:this.resultType,matrix:this})},initAggregates:function(e){var t,i;if(Ext.destroy(this.aggregate),this.aggregate=new Ext.pivot.MixedCollection,this.aggregate.getKey=function(e){return e.getId()},!Ext.isEmpty(e))for(e=Ext.Array.from(e),t=0;t<e.length;t++)(i=e[t]).isInstance||(Ext.applyIf(i,{isAggregate:!0,align:"right",showZeroAsBlank:this.showZeroAsBlank}),i=new Ext.pivot.dimension.Item(i)),(i.matrix=this).aggregate.add(i)},initLeftAxis:function(e){e=Ext.Array.from(e||[]),Ext.destroy(this.leftAxis),this.leftAxis=Ext.Factory.pivotaxis({type:this.leftAxisType,matrix:this,dimensions:e,isLeftAxis:!0})},initTopAxis:function(e){e=Ext.Array.from(e||[]),Ext.destroy(this.topAxis),this.topAxis=Ext.Factory.pivotaxis({type:this.topAxisType,matrix:this,dimensions:e,isLeftAxis:!1})},clearData:function(){var e=this;e.fireEvent("cleardata",e),e.leftAxis.clear(),e.topAxis.clear(),e.results.clear(),Ext.isArray(e.columns)&&(e.columns.length=0),Ext.isArray(e.model)&&(e.model.length=0),e.totals=[],e.modelInfo={},e.keysMap=null,e.pivotStore&&e.pivotStore.removeAll(!0)},startProcess:Ext.emptyFn,endProcess:function(){var e=this;e.leftAxis.getTree(),e.topAxis.getTree(),e.buildModelAndColumns(),e.buildPivotStore(),Ext.isFunction(e.onBuildStore)&&e.onBuildStore(e.pivotStore),e.fireEvent("storebuilt",e,e.pivotStore),e.fireEvent("done",e)},onBuildModel:Ext.emptyFn,onBuildColumns:Ext.emptyFn,onBuildRecord:Ext.emptyFn,onBuildTotals:Ext.emptyFn,onBuildStore:Ext.emptyFn,buildModelAndColumns:function(){var e=this;e.model=[{name:"id",type:"string"},{name:"isRowGroupHeader",type:"boolean",defaultValue:!1},{name:"isRowGroupTotal",type:"boolean",defaultValue:!1},{name:"isRowGrandTotal",type:"boolean",defaultValue:!1},{name:"leftAxisKey",type:"string",defaultValue:null}],e.internalCounter=0,e.columns=[],"compact"===e.viewLayoutType?e.generateCompactLeftAxis():e.leftAxis.dimensions.each(e.parseLeftAxisDimension,e),"first"===e.colGrandTotalsPosition&&e.columns.push(e.parseAggregateForColumn(null,{text:e.textGrandTotalTpl,grandTotal:!0})),Ext.Array.each(e.topAxis.getTree(),e.parseTopAxisItem,e),"last"===e.colGrandTotalsPosition&&e.columns.push(e.parseAggregateForColumn(null,{text:e.textGrandTotalTpl,grandTotal:!0})),Ext.isFunction(e.onBuildModel)&&e.onBuildModel(e.model),e.fireEvent("modelbuilt",e,e.model),Ext.isFunction(e.onBuildColumns)&&e.onBuildColumns(e.columns),e.fireEvent("columnsbuilt",e,e.columns)},getDefaultFieldInfo:function(e){return Ext.apply({isColGroupTotal:!1,isColGrandTotal:!1,leftAxisColumn:!1,topAxisColumn:!1,topAxisKey:null},e)},parseLeftAxisDimension:function(e){var t=e.getId();this.model.push({name:t,type:"auto"}),this.columns.push(Ext.merge({dataIndex:t,text:e.header,dimension:e,leftAxis:!0},e.column)),this.modelInfo[t]=this.getDefaultFieldInfo({leftAxisColumn:!0})},generateCompactLeftAxis:function(){this.model.push({name:this.compactViewKey,type:"auto"}),this.columns.push({dataIndex:this.compactViewKey,text:this.textRowLabels,leftAxis:!0,width:this.compactViewColumnWidth}),this.modelInfo[this.compactViewKey]=this.getDefaultFieldInfo({leftAxisColumn:!0})},parseTopAxisItem:function(e){var t,i,n,r,o,a=this,s=[],l=[];if(e.children){for("first"===a.colSubTotalsPosition&&(i=a.addColSummary(e))&&l.push(i),n=e.children.length,r=0;r<n;r++)o=a.parseTopAxisItem(e.children[r]),Ext.isArray(o)?Ext.Array.insert(s,s.length,o):s.push(o);return t={text:e.name,group:e,columns:s,key:e.key,xexpandable:!0,xgrouped:!0},0===e.level&&a.columns.push(t),l.push(t),"last"===a.colSubTotalsPosition&&(i=a.addColSummary(e))&&l.push(i),"none"===a.colSubTotalsPosition&&(i=a.addColSummary(e))&&l.push(i),l}if(s=a.parseAggregateForColumn(e,null),0!==e.level)return s;a.columns.push(s)},addColSummary:function(e){var t;return t=this.parseAggregateForColumn(e,{text:e.expanded?e.getTextTotal():e.name,group:e,subTotal:!0}),0===e.level&&this.columns.push(t),Ext.apply(t,{key:e.key,xexpandable:!0,xgrouped:!0}),t},parseAggregateForColumn:function(e,t){var i,n,r=this,o=[],a={},s=r.aggregate.getRange(),l=s.length;for(i=0;i<l;i++)n=s[i],r.internalCounter++,r.model.push({name:"c"+r.internalCounter,type:"auto",defaultValue:void 0,useNull:!0,col:e?e.key:r.grandTotalKey,agg:n.getId()}),o.push(Ext.merge({dataIndex:"c"+r.internalCounter,text:n.header,topAxis:!0,subTotal:!!t&&!0===t.subTotal,grandTotal:!!t&&!0===t.grandTotal,dimension:n},n.column)),r.modelInfo["c"+r.internalCounter]=r.getDefaultFieldInfo({isColGroupTotal:!!t&&!0===t.subTotal,isColGrandTotal:!!t&&!0===t.grandTotal,topAxisColumn:!0,topAxisKey:e?e.key:r.grandTotalKey});return 0===o.length&&0===r.aggregate.getCount()?(r.internalCounter++,a=Ext.apply({text:e?e.name:"",dataIndex:"c"+r.internalCounter},t||{})):1===o.length?(a=Ext.applyIf({text:e?e.name:""},o[0]),Ext.apply(a,t||{}),t&&t.grandTotal&&1===r.aggregate.getCount()&&(a.text=r.aggregate.getAt(0).header||t.text)):a=Ext.apply({text:e?e.name:"",columns:o},t||{}),a},buildPivotStore:function(){var e=this;Ext.isFunction(e.pivotStore.model.setFields)?e.pivotStore.model.setFields(e.model):e.pivotStore.model.replaceFields(e.model,!0),e.pivotStore.removeAll(!0),Ext.Array.each(e.leftAxis.getTree(),e.addRecordToPivotStore,e),e.addGrandTotalsToPivotStore()},addGrandTotalsToPivotStore:function(){var e,t,i,n=[];for(n.push({title:this.textGrandTotalTpl,values:this.preparePivotStoreRecordData({key:this.grandTotalKey},{isRowGrandTotal:!0})}),Ext.isFunction(this.onBuildTotals)&&this.onBuildTotals(n),this.fireEvent("buildtotals",this,n),e=n.length,t=0;t<e;t++)i=n[t],Ext.isObject(i)&&Ext.isObject(i.values)&&(Ext.applyIf(i.values,{isRowGrandTotal:!0}),this.totals.push({title:i.title||"",record:this.pivotStore.add(i.values)[0]}))},addRecordToPivotStore:function(e){var t,i,n=this;e.children?(e.records={},i="compact"===n.viewLayoutType?n.compactViewKey:e.dimensionId,e.records.collapsed=n.pivotStore.add(n.preparePivotStoreRecordData(e,{isRowGroupHeader:!0,isRowGroupTotal:!0}))[0],"first"===n.rowSubTotalsPosition&&"tabular"!==n.viewLayoutType?e.records.expanded=n.pivotStore.add(n.preparePivotStoreRecordData(e,{isRowGroupHeader:!0}))[0]:(t={},(t=n.preparePivotStoreRecordData(e,{isRowGroupHeader:!0}))[i]=e.name,e.records.expanded=n.pivotStore.add(t)[0],"last"!==n.rowSubTotalsPosition&&"tabular"!==n.viewLayoutType||((t=n.preparePivotStoreRecordData(e,{isRowGroupTotal:!0}))[i]=e.getTextTotal(),e.records.footer=n.pivotStore.add(t)[0])),Ext.Array.each(e.children,n.addRecordToPivotStore,n)):(t=n.pivotStore.add(n.preparePivotStoreRecordData(e))[0],e.record=t,Ext.isFunction(n.onBuildRecord)&&n.onBuildRecord(t,e),n.fireEvent("recordbuilt",n,t,e))},preparePivotStoreRecordData:function(e,t){var i,n,r,o={},a=this.model.length;if(e){for(e.dimensionId&&(o[e.dimensionId]=e.name),o.leftAxisKey=e.key,i=0;i<a;i++)(n=this.model[i]).col&&n.agg&&(r=this.results.items.map[e.key+"/"+n.col],o[n.name]=r?r.values[n.agg]:null);"compact"===this.viewLayoutType&&(o[this.compactViewKey]=e.name)}return Ext.applyIf(o,t)},getColumns:function(){return this.model},getColumnHeaders:function(){return this.model||this.buildModelAndColumns(),this.columns},isGroupRow:function(e){var t=this.leftAxis.findTreeElement("key",e);return!!t&&(t.node.children&&0===t.node.children.length?0:t.level)},isGroupCol:function(e){var t=this.topAxis.findTreeElement("key",e);return!!t&&(t.node.children&&0===t.node.children.length?0:t.level)},deprecated:{"6.0":{properties:{mztype:"type",mztypeLeftAxis:"leftAxisType",mztypeTopAxis:"topAxisType"}}}}),Ext.define("Ext.pivot.result.Local",{extend:"Ext.pivot.result.Base",alias:"pivotresult.local",alternateClassName:["Mz.aggregate.matrix.Result"],records:null,constructor:function(e){return this.records=[],this.callParent(arguments)},destroy:function(){return this.records.length=0,this.records=null,this.callParent(arguments)},calculate:function(){var e,t,i=this.matrix.aggregate.getCount();for(e=0;e<i;e++)t=this.matrix.aggregate.getAt(e),this.addValue(t.getId(),Ext.callback(t.aggregatorFn,t.getScope()||"self.controller",[this.records,t.dataIndex,this.matrix,this.leftKey,this.topKey],0,this.matrix.cmp))},calculateByFn:function(e,t,i){var n;return Ext.isString(i)&&(i=Ext.pivot.Aggregators[i]),Ext.isFunction(i)||Ext.raise("Invalid function provided!"),n=i(this.records,t,this.matrix,this.leftKey,this.topKey),this.addValue(e,n),n},addRecord:function(e){this.records.push(e)},removeRecord:function(e){Ext.Array.remove(this.records,e)}}),Ext.define("Ext.pivot.matrix.Local",{alternateClassName:["Mz.aggregate.matrix.Local"],extend:"Ext.pivot.matrix.Base",alias:"pivotmatrix.local",requires:["Ext.pivot.matrix.Base","Ext.pivot.axis.Local","Ext.pivot.result.Local"],isLocalMatrix:!0,resultType:"local",leftAxisType:"local",topAxisType:"local",store:null,recordsPerJob:1e3,timeBetweenJobs:2,onInitialize:function(){var e=this;e.localDelayedTask=new Ext.util.DelayedTask(e.delayedProcess,e),e.storeCleanDelayedTask=new Ext.util.DelayedTask(e.onOriginalStoreCleanDelayed,e),e.storeChangedDelayedTask=new Ext.util.DelayedTask(e.onOriginalStoreChangedDelayed,e),e.initializeStore({store:e.store}),e.callParent(arguments)},initializeStore:function(e){var t,i,n=this;n.processedRecords={},e.store?i=e.store:n.store&&(n.store.isStore&&!n.storeListeners?t=n.store:i=n.store),i&&(t=Ext.getStore(i||""),Ext.isEmpty(t)&&Ext.isString(i)&&(t=Ext.create(i))),t&&t.isStore&&(Ext.destroy(n.storeListeners),n.store&&n.store.autoDestroy&&t!==n.store&&Ext.destroy(n.store),n.store=t,n.storeListeners=n.store.on({refresh:n.startProcess,beforeload:n.onOriginalStoreBeforeLoad,add:n.onOriginalStoreAdd,update:n.onOriginalStoreUpdate,remove:n.onOriginalStoreRemove,commit:n.onOriginalStoreClean,reject:n.onOriginalStoreClean,clear:n.startProcess,scope:n,destroyable:!0}),t.isLoaded()&&n.startProcess())},onReconfigure:function(e){this.initializeStore(e),this.callParent(arguments)},onDestroy:function(){var e=this;e.localDelayedTask.cancel(),e.localDelayedTask=null,e.storeCleanDelayedTask.cancel(),e.storeCleanDelayedTask=null,e.storeChangedDelayedTask.cancel(),e.storeChangedDelayedTask=null,Ext.isArray(e.records)&&(e.records.length=0),e.records=e.changedRecords=null,Ext.destroy(e.storeListeners),e.store&&e.store.isStore&&e.store.autoDestroy&&Ext.destroy(e.store),e.store=e.storeListeners=e.processedRecords=null,e.callParent(arguments)},onOriginalStoreBeforeLoad:function(e){this.fireEvent("start",this)},createStoreChangesQueue:function(){this.changedRecords=this.changedRecords||{},this.changedRecords.add=this.changedRecords.add||[],this.changedRecords.update=this.changedRecords.update||[],this.changedRecords.remove=this.changedRecords.remove||[]},dropStoreChangesQueue:function(){this.changedRecords&&(this.changedRecords.add.length=0,this.changedRecords.update.length=0,this.changedRecords.remove.length=0)},onOriginalStoreAdd:function(e,t){this.createStoreChangesQueue(),Ext.Array.insert(this.changedRecords.add,this.changedRecords.add.length,t),this.storeChangedDelayedTask.delay(100)},onOriginalStoreUpdate:function(e,t){this.createStoreChangesQueue(),Ext.Array.indexOf(this.changedRecords.add,t)<0&&Ext.Array.insert(this.changedRecords.update,this.changedRecords.update.length,[t]),this.storeChangedDelayedTask.delay(100)},onOriginalStoreRemove:function(e,t,i,n){var r,o=t.length;if(!n){for(this.createStoreChangesQueue(),r=0;r<o;r++)Ext.Array.remove(this.changedRecords.update,t[r]),Ext.Array.remove(this.changedRecords.add,t[r]);Ext.Array.insert(this.changedRecords.remove,this.changedRecords.remove.length,t),this.storeChangedDelayedTask.delay(100)}},onOriginalStoreChangedDelayed:function(){var e=this.changedRecords;this.isDestroyed||(this.storeChanged=!!(e.add.length||e.update.length||e.remove.length),this.storeChanged&&(this.onOriginalStoreAddDelayed(),this.onOriginalStoreUpdateDelayed(),this.onOriginalStoreRemoveDelayed()))},onOriginalStoreAddDelayed:function(){var e,t,i,n,r,o=[],a=!1;if(e=(i=this.changedRecords.add).length){for(t=0;t<e;t++)n=i[t],this.processRecord(n,t,e),r=this.processedRecords[n.internalId],a=a||r.left.length||r.top.length,r.left.length&&Ext.Array.insert(o,o.length,r.left);if(i.length=0,a&&(this.leftAxis.rebuildTree(),this.topAxis.rebuildTree()),e=o.length)for(t=0;t<e;t++)((r=o[t]).children&&!r.records||!r.children&&!r.record)&&this.addRecordToPivotStore(r);this.recalculateResults(this.store,i,a)}},onOriginalStoreUpdateDelayed:function(){var e,t,i,n,r,o,a,s,l,d=this,u=[],c=!1;if(e=(i=d.changedRecords.update).length){for(t=0;t<e;t++)n=i[t],o=d.processedRecords[n.internalId],d.removeRecordFromResults(n),d.processRecord(n,t,e),a=d.processedRecords[n.internalId],o&&a&&(s=Ext.Array.equals(o.left,a.left),l=Ext.Array.equals(o.top,a.top),c=c||!s||!l,s||Ext.Array.insert(u,u.length,a.left));for(i.length=0,c&&(d.leftAxis.rebuildTree(),d.topAxis.rebuildTree()),e=u.length,t=0;t<e;t++)((r=u[t]).children&&!r.records||!r.children&&!r.record)&&d.addRecordToPivotStore(r);d.recalculateResults(d.store,i,c)}},onOriginalStoreRemoveDelayed:function(){var e,t,i,n;if(e=(i=this.changedRecords.remove).length){for(t=0;t<e;t++)n=this.removeRecordFromResults(i[t])||n;i.length=0,n&&(this.leftAxis.rebuildTree(),this.topAxis.rebuildTree()),this.recalculateResults(this.store,i,n)}},onOriginalStoreClean:function(){this.localDelayedTask.id?(this.dropStoreChangesQueue(),this.storeChanged=!1):this.storeCleanDelayedTask.delay(100)},onOriginalStoreCleanDelayed:function(){var e,t,i;if(!this.isDestroyed){for(t=(e=this.pivotStore.getRange()).length,i=0;i<t;i++)e[i].commit(!0);this.storeChanged=!1,this.fireEvent("afterupdate",this,!1)}},removeRecordFromResults:function(e){var t,i,n,r,o,a,s=this,l=s.processedRecords[e.internalId],d=s.grandTotalKey,u=!1;if(!l)return u;for((t=s.results.get(d,d))&&(t.removeRecord(e),0===t.records.length&&s.results.remove(d,d)),o=l.top.length,n=0;n<o;n++)i=l.top[n],(t=s.results.get(d,i.key))&&(t.removeRecord(e),0===t.records.length&&(s.results.remove(d,i.key),s.topAxis.items.remove(i),u=!0));for(o=l.left.length,n=0;n<o;n++)for(i=l.left[n],(t=s.results.get(i.key,d))&&(t.removeRecord(e),0===t.records.length&&(s.results.remove(i.key,d),s.leftAxis.items.remove(i),u=!0)),a=l.top.length,r=0;r<a;r++)(t=s.results.get(l.left[n].key,l.top[r].key))&&(t.removeRecord(e),0===t.records.length&&s.results.remove(l.left[n].key,l.top[r].key));return u},recalculateResults:function(e,t,i){var n=this;n.fireEvent("beforeupdate",n,i),n.buildModelAndColumns(),n.results.calculate(),Ext.Array.each(n.leftAxis.getTree(),n.updateRecordToPivotStore,n),n.updateGrandTotalsToPivotStore(),n.fireEvent("afterupdate",n,i)},updateGrandTotalsToPivotStore:function(){var e,t=this,i=[];if(!(t.totals.length<=0)&&(i.push({title:t.textGrandTotalTpl,values:t.preparePivotStoreRecordData({key:t.grandTotalKey})}),Ext.isFunction(t.onBuildTotals)&&t.onBuildTotals(i),t.fireEvent("buildtotals",t,i),t.totals.length===i.length))for(e=0;e<t.totals.length;e++)Ext.isObject(i[e])&&Ext.isObject(i[e].values)&&t.totals[e].record instanceof Ext.data.Model&&(delete i[e].values.id,t.totals[e].record.set(i[e].values))},updateRecordToPivotStore:function(e){var t,i;e.children?(e.records&&(t="compact"===this.viewLayoutType?this.compactViewKey:e.dimensionId,delete(i=this.preparePivotStoreRecordData(e)).id,delete i[t],e.records.collapsed.set(i),e.records.expanded&&e.records.expanded.set(i),e.records.footer&&e.records.footer.set(i)),Ext.Array.each(e.children,this.updateRecordToPivotStore,this)):e.record&&(delete(i=this.preparePivotStoreRecordData(e)).id,e.record.set(i))},startProcess:function(){!this.store||this.store&&!this.store.isStore||this.isDestroyed||this.store.isLoading()||(this.dropStoreChangesQueue(),this.clearData(),this.localDelayedTask.delay(50))},delayedProcess:function(){this.isDestroyed||(this.fireEvent("start",this),this.records=this.store.getRange(),0!==this.records.length?(this.statusInProgress=!1,this.processRecords(0)):this.endProcess())},processRecords:function(e){var t,i=this,n=e;if(!i.isDestroyed){for(t=i.records.length,i.statusInProgress=!0;n<t&&n<e+i.recordsPerJob&&i.statusInProgress;)i.processRecord(i.records[n],n,t),n++;if(t<=n)return i.statusInProgress=!1,i.results.calculate(),i.leftAxis.buildTree(),i.topAxis.buildTree(),i.filterApplied&&i.results.calculate(),i.records=null,void i.endProcess();i.statusInProgress&&0<t&&Ext.defer(i.processRecords,i.timeBetweenJobs,i,[n])}},processRecord:function(e,t,i){var n,r,o,a,s,l,d,u,c=this,h=c.grandTotalKey;if(c.processedRecords[e.internalId]=d={left:[],top:[]},n=c.leftAxis.processRecord(e),r=c.topAxis.processRecord(e),n&&r){for(c.results.add(h,h).addRecord(e),s=r.length,o=0;o<s;o++)u=r[o],c.topAxis.addItem(u),d.top.push(c.topAxis.items.map[u.key]),c.results.add(h,u.key).addRecord(e);for(l=n.length,o=0;o<l;o++)for(u=n[o],c.leftAxis.addItem(u),d.left.push(c.leftAxis.items.map[u.key]),c.results.add(u.key,h).addRecord(e),a=0;a<s;a++)c.results.add(u.key,r[a].key).addRecord(e)}c.fireEvent("progress",c,t+1,i)},getRecordsByRowGroup:function(e){var t,i=this.results.getByLeftKey(e),n=i.length,r=[];for(t=0;t<n;t++)Ext.Array.insert(r,r.length,i[t].records||[]);return r},getRecordsByColGroup:function(e){var t,i=this.results.getByTopKey(e),n=i.length,r=[];for(t=0;t<n;t++)Ext.Array.insert(r,r.length,i[t].records||[]);return r},getRecordsByGroups:function(e,t){var i=this.results.get(e,t);return i&&i.records||[]}}),Ext.define("Ext.pivot.matrix.Remote",{alternateClassName:["Mz.aggregate.matrix.Remote"],extend:"Ext.pivot.matrix.Base",alias:"pivotmatrix.remote",isRemoteMatrix:!0,url:"",timeout:3e3,onBeforeRequest:Ext.emptyFn,onRequestException:Ext.emptyFn,onInitialize:function(){this.remoteDelayedTask=new Ext.util.DelayedTask(this.delayedProcess,this),this.callParent(arguments)},onDestroy:function(){this.remoteDelayedTask.cancel(),this.remoteDelayedTask=null,this.callParent()},startProcess:function(){Ext.isEmpty(this.url)||(this.clearData(),this.fireEvent("start",this),this.statusInProgress=!1,this.remoteDelayedTask.delay(5))},delayedProcess:function(){var e,t,i=this,n=i.serialize();!(t={keysSeparator:i.keysSeparator,grandTotalKey:i.grandTotalKey,leftAxis:n.leftAxis,topAxis:n.topAxis,aggregate:n.aggregate})!==(e=i.fireEvent("beforerequest",i,t))&&Ext.isFunction(i.onBeforeRequest)&&(e=i.onBeforeRequest(t)),!1===e?i.endProcess():Ext.Ajax.request({url:i.url,timeout:i.timeout,jsonData:t,callback:i.processRemoteResults,scope:i})},processRemoteResults:function(e,t,i){var n,r,o,a,s,l=!t,d=Ext.JSON.decode(i.responseText,!0);if(t&&(l=!d||!d.success),l)return this.fireEvent("requestexception",this,i),Ext.isFunction(this.onRequestException)&&this.onRequestException(i),void this.endProcess();for(o=(n=Ext.Array.from(d.leftAxis||[])).length,a=0;a<o;a++)r=n[a],Ext.isObject(r)&&this.leftAxis.addItem(r);for(o=(n=Ext.Array.from(d.topAxis||[])).length,a=0;a<o;a++)r=n[a],Ext.isObject(r)&&this.topAxis.addItem(r);for(o=(n=Ext.Array.from(d.results||[])).length,a=0;a<o;a++)r=n[a],Ext.isObject(r)&&(s=this.results.add(r.leftKey||"",r.topKey||""),Ext.Object.each(r.values||{},s.addValue,s));this.endProcess()}}),Ext.define("Ext.pivot.plugin.Exporter",{alternateClassName:["Mz.pivot.plugin.ExcelExport"],alias:["plugin.pivotexporter","plugin.mzexcelexport"],extend:"Ext.exporter.Plugin",lockableScope:"top",init:function(e){return e.isPivotGrid||Ext.raise("This plugin is only compatible with Ext.pivot.Grid"),this.callParent([e])},prepareData:function(e){var t,i,n,r,o,a,s,l,d,u,c,h,f=this;if(f.matrix=t=f.cmp.getMatrix(),f.onlyExpandedNodes=e&&e.onlyExpandedNodes,f.onlyExpandedNodes||f.setColumnsExpanded(t.topAxis.getTree(),!0),n=Ext.clone(t.getColumnHeaders()),r=f.getColumnHeaders(n,e),u=f.getDataIndexColumns(n),f.onlyExpandedNodes||f.setColumnsExpanded(t.topAxis.getTree()),i={columns:r,groups:[]},f.extractGroups(i,t.leftAxis.getTree(),u),d=t.totals.length,l=u.length,d)for(i.summaries=[],a=0;a<d;a++){for(c={cells:[{value:(o=t.totals[a]).title}]},s=1;s<l;s++)h=o.record.data[u[s].dataIndex],c.cells.push({value:null!=h&&0!==h||!t.showZeroAsBlank?h:""});i.summaries.push(c)}return f.matrix=f.onlyExpandedNodes=null,new Ext.exporter.data.Table(i)},setColumnsExpanded:function(e,t){var i;for(i=0;i<e.length;i++)Ext.isDefined(t)?(e[i].backupExpanded=e[i].expanded,e[i].expanded=t):(e[i].expanded=e[i].backupExpanded,e[i].backupExpanded=null),e[i].children&&this.setColumnsExpanded(e[i].children,t)},getColumnHeaders:function(e,t){var i,n,r,o=[],a=e.length;for(i=0;i<a;i++)r=e[i],(!this.onlyExpandedNodes||(!r.group||r.group.expanded||!r.group.expanded&&r.subTotal))&&(n={text:r.subTotal&&r.group&&r.group.expanded?r.group.getTextTotal():r.text},r.columns?n.columns=this.getColumnHeaders(r.columns,t):(n.width=r.dimension?r.dimension.getWidth():r.width||100,n.style=r.dimension?this.getExportStyle(r.dimension.getExportStyle(),t):null),o.push(n));return o},getDataIndexColumns:function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],(!this.onlyExpandedNodes||(!i.group||i.group.expanded||!i.group.expanded&&i.subTotal))&&(i.dataIndex?n.push({dataIndex:i.dataIndex,agg:i.dimension?i.dimension.getId():null}):i.columns&&Ext.Array.insert(n,n.length,this.getDataIndexColumns(i.columns)));return n},extractGroups:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f;for(o=t.length,n=0;n<o;n++)if((l=t[n]).record){for(e.rows=e.rows||[],d={cells:f=[]},r=0;r<i.length;r++)h=l.record.data[i[r].dataIndex],f.push({value:null!=h&&0!==h||!this.matrix.showZeroAsBlank?h:""});e.rows.push(d)}else if(l.children){for(e.groups=e.groups||[],u={text:l.name},(s=!this.onlyExpandedNodes||l.expanded)&&this.extractGroups(u,l.children,i),u.summaries=[],d={cells:f=[{value:s?l.getTextTotal():l.value}]},c=l.expanded?l.records.expanded:l.records.collapsed,a=i.length,r=1;r<a;r++)h=c.data[i[r].dataIndex],f.push({value:null!=h&&0!==h||!this.matrix.showZeroAsBlank?h:""});u.summaries.push(d),e.groups.push(u)}}}),Ext.define("Ext.pivot.plugin.configurator.FieldSettings",{$configStrict:!1,config:{cls:"",style:null,fixed:[],allowed:["leftAxis","topAxis","aggregate"],aggregators:["sum","avg","min","max","count","countNumbers","groupSumPercentage","groupCountPercentage","variance","varianceP","stdDev","stdDevP"],renderers:{},formatters:{}},isFieldSettings:!0,constructor:function(e){return this.initConfig(e||{}),this.callParent(arguments)},getDefaultEmptyArray:function(e){var t=this["_"+e];return t||(t=[],this["set"+Ext.String.capitalize(e)](t)),t},applyArrayValues:function(e,t,i){return null==t||t&&Ext.isArray(t)?t:(t&&(i=i||this["get"+Ext.String.capitalize(e)](),Ext.Array.splice(i,0,i.length,t)),i)},getFixed:function(){return this.getDefaultEmptyArray("fixed")},applyFixed:function(e,t){return this.applyArrayValues("fixed",e,t)},getAllowed:function(){return this.getDefaultEmptyArray("allowed")},applyAllowed:function(e,t){return this.applyArrayValues("allowed",e,t)},getAggregators:function(){return this.getDefaultEmptyArray("aggregators")},applyAggregators:function(e,t){return this.applyArrayValues("aggregators",e,t)},isFixed:function(e){var t;return!!e&&(t=e.getFieldType(),0<=Ext.Array.indexOf(this.getFixed(),t))},isAllowed:function(e){var t,i=this.getFixed();return!!e&&(t=e.getFieldType(),i.length?0<=Ext.Array.indexOf(i,t):"all"===t||0<=Ext.Array.indexOf(this.getAllowed(),t))}}),Ext.define("Ext.pivot.plugin.configurator.Field",{extend:"Ext.pivot.dimension.Item",requires:["Ext.pivot.plugin.configurator.FieldSettings"],config:{editor:null,settings:{}},isField:!0,clone:function(){return new Ext.pivot.plugin.configurator.Field(Ext.applyIf({id:Ext.id()},this.getInitialConfig()))},getConfiguration:function(e){var t=this.callParent([e]);return t.settings&&(t.settings=t.settings.getConfig()),t},updateAggregator:function(e,t){var i,n;this.callParent([e,t]),e&&(0===(n=(i=this.getSettings()).getAggregators()).length?Ext.Array.remove(i.getAllowed(),"aggregate"):Ext.Array.include(n,e))},getSettings:function(){var e=this.settings;return e||(e=new Ext.pivot.plugin.configurator.FieldSettings({}),this.setSettings(e)),e},applySettings:function(e,t){return null==e||e&&e.isFieldSettings?e:(e&&(t=t||this.getSettings()).setConfig(e),t&&this.setAggregator(this.getAggregator()),t)},getFieldText:function(){var e=this.getHeader();return this.isAggregate&&(e+=" ("+this.getAggText()+")"),e},getAggText:function(e){var t=Ext.pivot.Aggregators,i=e||this.getAggregator();return Ext.isFunction(i)?t.customText:t[i+"Text"]||t.customText}}),Ext.define("Ext.pivot.update.Base",{extend:"Ext.mixin.Observable",alias:"pivotupdate.base",mixins:["Ext.mixin.Factoryable"],config:{leftKey:null,topKey:null,matrix:null,dataIndex:null,value:null},destroy:function(){Ext.unasap(this.updateTimer),this.setMatrix(null),this.callParent()},getResult:function(){var e=this.getMatrix();return e?e.results.get(this.getLeftKey(),this.getTopKey()):null},update:function(){var n=this;return Ext.unasap(n.updateTimer),new Ext.Promise(function(e,t){var i;n.getMatrix()&&n.getDataIndex()||Ext.raise("Invalid configuration"),(i=n.getResult())?!1!==n.fireEvent("beforeupdate",n)?n.updateTimer=Ext.asap(n.onUpdate,n,[i,e,t]):t("Operation canceled!"):t("No Result found!")})},onUpdate:function(e,t,i){this.fireEvent("update",this),t(this)}}),Ext.define("Ext.pivot.update.Increment",{extend:"Ext.pivot.update.Base",alias:"pivotupdate.increment",onUpdate:function(e,t,i){if(!this.destroyed){var n,r,o,a=this.getDataIndex(),s=parseFloat(this.getValue()),l=e.records;if(isNaN(s)&&(s=null),l&&s)for(n=l.length,r=0;r<n;r++)(o=l[r]).set(a,o.get(a)+s);this.callParent([e,t,i])}}}),Ext.define("Ext.pivot.update.Overwrite",{extend:"Ext.pivot.update.Base",alias:"pivotupdate.overwrite",onUpdate:function(e,t,i){if(!this.destroyed){var n,r,o=this.getDataIndex(),a=parseFloat(this.getValue()),s=e.records;if(isNaN(a)&&(a=null),s)for(n=s.length,r=0;r<n;r++)s[r].set(o,a);this.callParent([e,t,i])}}}),Ext.define("Ext.pivot.update.Percentage",{extend:"Ext.pivot.update.Base",alias:"pivotupdate.percentage",onUpdate:function(e,t,i){if(!this.destroyed){var n,r,o,a=this.getDataIndex(),s=parseFloat(this.getValue()),l=e.records;if(isNaN(s)&&(s=null),l)for(n=l.length,r=0;r<n;r++)(o=l[r]).set(a,null===s?null:Math.floor(o.get(a)*s/100));this.callParent([e,t,i])}}}),Ext.define("Ext.pivot.update.Uniform",{extend:"Ext.pivot.update.Base",alias:"pivotupdate.uniform",onUpdate:function(e,t,i){if(!this.destroyed){var n,r,o,a=this.getDataIndex(),s=e.records,l=parseFloat(this.getValue());if(isNaN(l)&&(l=null),s&&0<(n=s.length))for(o=null===l?null:l/n,r=0;r<n;r++)s[r].set(a,o);this.callParent([e,t,i])}}}),Ext.define("Ext.pivot.feature.PivotEvents",{alternateClassName:["Mz.pivot.feature.PivotEvents"],extend:"Ext.grid.feature.Feature",alias:"feature.pivotevents",requires:["Ext.pivot.feature.PivotStore"],eventPrefix:"pivotcell",eventSelector:"."+Ext.baseCSSPrefix+"grid-cell",cellSelector:"."+Ext.baseCSSPrefix+"grid-cell",rowSelector:"."+Ext.baseCSSPrefix+"grid-row",groupHeaderCls:Ext.baseCSSPrefix+"pivot-grid-group-header",groupHeaderCollapsibleCls:Ext.baseCSSPrefix+"pivot-grid-group-header-collapsible",init:function(e){this.initEventsListeners(),this.callParent(arguments)},destroy:function(){this.destroyEventsListeners(),Ext.destroy(this.dataSource),this.view=this.grid=this.gridMaster=this.matrix=this.dataSource=null,this.callParent(arguments)},initEventsListeners:function(){this.eventsViewListeners=this.view.on(Ext.apply({scope:this,destroyable:!0},this.getViewListeners()||{})),this.gridListeners=this.grid.on(Ext.apply({scope:this,destroyable:!0},this.getGridListeners()||{}))},getViewListeners:function(){var e={afterrender:this.onViewAfterRender};return e[this.eventPrefix+"click"]=this.onCellEvent,e[this.eventPrefix+"dblclick"]=this.onCellEvent,e[this.eventPrefix+"contextmenu"]=this.onCellEvent,e},getGridListeners:Ext.emptyFn,destroyEventsListeners:function(){Ext.destroyMembers(this,"eventsViewListeners","gridListeners"),this.eventsViewListeners=this.gridListeners=null},onViewAfterRender:function(){var e,t=this;t.gridMaster=t.view.up("pivotgrid"),t.matrix=t.gridMaster.getMatrix(),(e=t.lockingPartner)&&e.dataSource?t.dataSource=e.dataSource:t.dataSource=new Ext.pivot.feature.PivotStore({store:t.grid.store,matrix:t.matrix,grid:t.gridMaster,clsGrandTotal:t.gridMaster.clsGrandTotal,clsGroupTotal:t.gridMaster.clsGroupTotal})},getRowId:function(e){return this.view.id+"-record-"+e.internalId},getRecord:function(e){return this.view.getRecord(e)},onCellEvent:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f=this,g=Ext.fly(t).findParent(f.rowSelector),p=f.getRecord(g),m={grid:f.gridMaster,view:f.view,cellEl:t};return g&&p&&(d=f.gridMaster.getMatrix(),n=Ext.getDom(t).getAttribute("data-columnid"),o=f.getColumnHeaderById(n),s=(u=(u=(u=(h=f.dataSource.storeInfo[p.internalId]).rendererParams[o.dataIndex])||h.rendererParams.topaxis)?u.group:null)?u.key:h.leftKey,g=Ext.fly(g),r=h.rowEvent,Ext.apply(m,{columnId:n,column:o,leftKey:s,leftItem:u}),Ext.fly(t).hasCls(f.groupHeaderCls)||o&&(r+="cell",(a=f.getTopAxisGroupByDataIndex(o.dataIndex))&&(l=a.col,c=d.topAxis.findTreeElement("key",l),Ext.apply(m,{topKey:l,topItem:c?c.node:null,dimensionId:a.agg}))),!1!==f.gridMaster.fireEvent(r+i.type,m,i)&&"click"===i.type&&Ext.fly(t).hasCls(f.groupHeaderCollapsibleCls)&&(u.expanded?(u.collapse(),f.view.focusNode("tabular"===d.viewLayoutType?f.dataSource.getTabularGroupRecord(u):u.records.collapsed)):(u.expand(),f.view.focusNode("tabular"===d.viewLayoutType?f.dataSource.getTabularGroupRecord(u):u.records.expanded)))),!1},getColumnHeaderById:function(e){var t,i=this.view.getGridColumns();for(t=0;t<i.length;t++)if(i[t].id===e)return i[t]},getTopAxisGroupByDataIndex:function(e){var t,i=this.gridMaster.matrix.getColumns();for(t=0;t<i.length;t++)if(i[t].name===e)return i[t]}}),Ext.define("Ext.pivot.feature.PivotView",{extend:"Ext.pivot.feature.PivotEvents",alias:"feature.pivotview",groupCls:Ext.baseCSSPrefix+"pivot-grid-group",groupTitleCls:Ext.baseCSSPrefix+"pivot-grid-group-title",groupHeaderCollapsedCls:Ext.baseCSSPrefix+"pivot-grid-group-header-collapsed",outlineCellHiddenCls:Ext.baseCSSPrefix+"pivot-grid-outline-cell-hidden",outlineCellGroupExpandedCls:Ext.baseCSSPrefix+"pivot-grid-outline-cell-previous-expanded",compactGroupHeaderCls:Ext.baseCSSPrefix+"pivot-grid-group-header-compact",outlineGroupHeaderCls:Ext.baseCSSPrefix+"pivot-grid-group-header-outline",tabularGroupHeaderCls:Ext.baseCSSPrefix+"pivot-grid-group-header-tabular",compactLayoutPadding:25,outerTpl:["{%","var me = this.pivotViewFeature;","if (!(me.disabled)) {","me.setup();","}","this.nextTpl.applyOut(values, out, parent);","%}",{priority:200}],rowTpl:["{%","var me = this.pivotViewFeature;","me.setupRowData(values.record, values.rowIndex, values);","values.view.renderColumnSizer(values, out);","this.nextTpl.applyOut(values, out, parent);","me.resetRenderers();","%}",{priority:200,syncRowHeights:function(e,t){var i,n;(e=Ext.fly(e,"syncDest"))&&(i=e.offsetHeight),(t=Ext.fly(t,"sycSrc"))&&(n=t.offsetHeight),e&&t&&(n<i?Ext.fly(t).setHeight(i):i<n&&Ext.fly(e).setHeight(n))}}],cellTpl:["{%",'values.hideCell = values.tdAttr == "hidden";\n',"%}",'<tpl if="!hideCell">','<td class="{tdCls}" role="{cellRole}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>"',' tabindex="-1" data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" ',"{cellInnerAttr:attributes}>{value}</div>","</td>","</tpl>",{priority:0}],rtlCellTpl:["{%",'values.hideCell = values.tdAttr == "hidden";\n',"%}",'<tpl if="!hideCell">','<td class="{tdCls}" role="{cellRole}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>"',' tabindex="-1" data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}" ','style="text-align:{[this.getAlign(values.align)]};<tpl if="style">{style}</tpl>" ',"{cellInnerAttr:attributes}>{value}</div>","</td>","</tpl>",{priority:200,rtlAlign:{right:"left",left:"right",center:"center"},getAlign:function(e){return this.rtlAlign[e]}}],init:function(e){var t=this.view;this.callParent(arguments),t.addTpl(Ext.XTemplate.getTpl(this,"outerTpl")).pivotViewFeature=this,t.addRowTpl(Ext.XTemplate.getTpl(this,"rowTpl")).pivotViewFeature=this,t.preserveScrollOnRefresh=!0,t.bufferedRenderer?t.bufferedRenderer.variableRowHeight=!0:e.variableRowHeight=t.variableRowHeight=!0},destroy:function(){this.columns=null,this.callParent(arguments)},setup:function(){this.columns=this.view.getGridColumns()},isRTL:function(){var e=this.gridMaster||this.grid;return!!Ext.isFunction(e.isLocalRtl)&&e.isLocalRtl()},getGridListeners:function(){return Ext.apply(this.callParent(arguments)||{},{beforerender:this.onBeforeGridRendered})},onBeforeGridRendered:function(e){this.isRTL()?this.view.addCellTpl(Ext.XTemplate.getTpl(this,"rtlCellTpl")):this.view.addCellTpl(Ext.XTemplate.getTpl(this,"cellTpl"))},vetoEvent:function(e,t,i,n){if("mouseover"!==n.type&&"mouseout"!==n.type&&"mouseenter"!==n.type&&"mouseleave"!==n.type&&n.getTarget(this.eventSelector))return!1},setupRowData:function(e,t,i){var n=this.dataSource.storeInfo[e.internalId],r=n?n.rendererParams:{};i.rowClasses.length=0,Ext.Array.insert(i.rowClasses,0,n?n.rowClasses:[]),this.setRenderers(r)},setRenderers:function(e){var t,i,n=this.columns.length;for(t=0;t<n;t++)(i=this.columns[t]).leftAxis&&e[i.dataIndex]&&(i.savedRenderer=i.renderer,i.renderer=this[e[i.dataIndex].fn](Ext.apply({renderer:i.savedRenderer},e[i.dataIndex]))),i.topAxis&&e.topaxis&&(i.savedRenderer=i.renderer,i.renderer=this[e.topaxis.fn](Ext.apply({renderer:i.savedRenderer},e[i.dataIndex])))},resetRenderers:function(){var e,t,i=this.columns.length;for(e=0;e<i;e++)t=this.columns[e],Ext.isDefined(t.savedRenderer)&&(t.renderer=t.savedRenderer,delete t.savedRenderer)},groupOutlineRenderer:function(e){var s=this,l=e.renderer,d=e.group,u=e.colspan,c=e.hidden,h=e.previousExpanded,f=e.subtotalRow;return function(e,t,i,n,r,o,a){return Ext.isFunction(l)&&(e=l.apply(this,arguments)),0<u?(t.tdAttr='colspan = "'+u+'"',t.tdCls=s.groupHeaderCls+" "+s.outlineGroupHeaderCls,f||(d&&d.children&&d.axis.matrix.collapsibleRows&&(t.tdCls+=" "+s.groupHeaderCollapsibleCls,d.expanded||(t.tdCls+=" "+s.groupHeaderCollapsedCls)),h&&(t.tdCls+=" "+s.outlineCellGroupExpandedCls)),'<div class="'+s.groupTitleCls+" "+s.groupCls+'">'+e+"</div>"):(c&&(t.tdAttr="hidden"),t.tdCls=s.outlineCellHiddenCls,"")}},recordOutlineRenderer:function(e){var s=this,l=e.renderer,d=e.hidden;return function(e,t,i,n,r,o,a){return Ext.isFunction(l)&&(e=l.apply(this,arguments)),d?(t.tdCls=s.outlineCellHiddenCls,""):(t.tdCls=s.groupHeaderCls+" "+s.groupTitleCls,e)}},groupCompactRenderer:function(e){var s=this,l=e.renderer,d=e.group,u=e.previousExpanded,c=e.subtotalRow;return function(e,t,i,n,r,o,a){return Ext.isFunction(l)&&(e=l.apply(this,arguments)),0<d.level&&(t.style=(s.isRTL()?"margin-right: ":"margin-left: ")+s.compactLayoutPadding*d.level+"px;"),t.tdCls=s.groupHeaderCls+" "+s.compactGroupHeaderCls,c||(d&&d.children&&d.axis.matrix.collapsibleRows&&(t.tdCls+=" "+s.groupHeaderCollapsibleCls,d.expanded||(t.tdCls+=" "+s.groupHeaderCollapsedCls)),u&&(t.tdCls+=" "+s.outlineCellGroupExpandedCls)),'<div class="'+s.groupTitleCls+" "+s.groupCls+'">'+e+"</div>"}},recordCompactRenderer:function(e){var s=this,l=e.renderer,d=e.group;return function(e,t,i,n,r,o,a){return Ext.isFunction(l)&&(e=l.apply(this,arguments)),0<d.level&&(t.style=(s.isRTL()?"margin-right: ":"margin-left: ")+s.compactLayoutPadding*d.level+"px;"),t.tdCls=s.groupHeaderCls+" "+s.groupTitleCls+" "+s.compactGroupHeaderCls,e}},groupTabularRenderer:function(e){var s=this,l=e.renderer,d=e.group,u=e.colspan,c=e.hidden,h=e.subtotalRow;return function(e,t,i,n,r,o,a){return Ext.isFunction(l)&&(e=l.apply(this,arguments)),0<u&&(t.tdAttr='colspan = "'+u+'"'),t.tdCls=s.groupHeaderCls+" "+s.tabularGroupHeaderCls,h||d&&d.children&&d.axis.matrix.collapsibleRows&&(t.tdCls+=" "+s.groupHeaderCollapsibleCls,d.expanded||(t.tdCls+=" "+s.groupHeaderCollapsedCls)),c&&(t.tdAttr="hidden"),'<div class="'+s.groupTitleCls+" "+s.groupCls+'">'+e+"</div>"}},recordTabularRenderer:function(e){var s=this,l=e.renderer,d=e.hidden;return function(e,t,i,n,r,o,a){return d?"":(Ext.isFunction(l)&&(e=l.apply(this,arguments)),t.tdCls=s.groupHeaderCls+" "+s.groupTitleCls,e)}},topAxisNoRenderer:function(e){return function(e,t,i,n,r,o,a){return""}},topAxisRenderer:function(e){var l=this,d=e.renderer;return function(e,t,i,n,r,o,a){var s=0===e&&l.gridMaster.showZeroAsBlank;return Ext.isFunction(d)&&(e=d.apply(this,arguments)),s?"":e}}}),Ext.define("Ext.pivot.Grid",{extend:"Ext.grid.Panel",alternateClassName:["Mz.pivot.Grid","Mz.pivot.Table"],xtype:["pivotgrid","mzpivotgrid"],requires:["Ext.pivot.matrix.Local","Ext.pivot.matrix.Remote","Ext.pivot.feature.PivotView","Ext.data.ArrayStore"],subGridXType:"gridpanel",isPivotGrid:!0,isPivotComponent:!0,enableLoadMask:!0,enableLocking:!1,enableColumnSort:!0,columnLines:!0,clsGroupTotal:Ext.baseCSSPrefix+"pivot-grid-group-total",clsGrandTotal:Ext.baseCSSPrefix+"pivot-grid-grand-total",startRowGroupsCollapsed:!0,startColGroupsCollapsed:!0,stateEvents:["pivotgroupexpand","pivotgroupcollapse","pivotdone"],groupHeaderCollapsedCls:Ext.baseCSSPrefix+"pivot-grid-group-header-collapsed",groupHeaderCollapsibleCls:Ext.baseCSSPrefix+"pivot-grid-group-header-collapsible",groupCls:Ext.baseCSSPrefix+"pivot-grid-group",relayedMatrixEvents:["beforereconfigure","reconfigure","start","progress","done","modelbuilt","columnsbuilt","recordbuilt","buildtotals","storebuilt","groupexpand","groupcollapse","beforerequest","requestexception"],deprecatedConfigs:["matrixConfig","leftAxis","topAxis","aggregate","showZeroAsBlank","textTotalTpl","textGrandTotalTpl","viewLayoutType","rowSubTotalsPosition","rowGrandTotalsPosition","colSubTotalsPosition","colGrandTotalsPosition"],config:{matrix:{type:"local"}},initComponent:function(){this.columns=[],this.preInitialize(),this.callParent(arguments),this.postInitialize()},preInitialize:function(){this.features=[{id:"group",ftype:"pivotview",summaryRowCls:this.clsGroupTotal,grandSummaryRowCls:this.clsGrandTotal}],this.addCls(Ext.baseCSSPrefix+"pivot-grid"),this.store&&(this.originalStore=this.store),this.store=new Ext.data.ArrayStore({fields:[]}),this.enableColumnMove=!1},postInitialize:function(){var e,t,i,n=this,r={headerclick:n.onHeaderClick,scope:n,destroyable:!0},o=n.getView(),a=[],s=n.deprecatedConfigs,l=s.length,d=n.getMatrix();for(n.enableLocking?(n.lockedHeaderCtListeners=o.lockedView.getHeaderCt().on(r),n.headerCtListeners=o.normalView.getHeaderCt().on(r)):n.headerCtListeners=o.getHeaderCt().on(r),e=0;e<l;e++)n[i=s[e]]&&a.push(i);if(0<a.length){for(t={},l=a.length,e=0;e<l;e++)"matrixConfig"===(i=a[e])?Ext.apply(t,n.matrixConfig):t[i]=n[i];if(n.originalStore&&(t.store=n.originalStore),d){if(t.type&&d.type===t.type)return void d.reconfigure(t)}else t.type||(t.type="local"),t.cmp=n;n.setMatrix(t)}},destroy:function(){var e=this;e.setMatrix(null),Ext.destroy(e.headerCtListeners,e.lockedHeaderCtListeners),Ext.destroy(e.originalStore),e.headerCtListeners=e.lockedHeaderCtListeners=null,e.originalStore=e.pivotColumns=null,e.callParent(arguments),Ext.destroy(e.store),e.store=null},applyMatrix:function(e,t){return Ext.destroy(t),null==e?e:e&&e.isPivotMatrix?(e.cmp=this,e):(Ext.applyIf(e,{type:"local"}),e.cmp=this,"local"===e.type&&this.originalStore&&Ext.applyIf(e,{store:this.originalStore}),Ext.Factory.pivotmatrix(e))},updateMatrix:function(e,t){var i,n=this;n.matrixRelayedListeners=n.matrixListeners=Ext.destroy(t,n.matrixListeners,n.matrixRelayedListeners),e&&(n.matrixListeners=n.matrix.on({cleardata:n.onMatrixClearData,start:n.onMatrixProcessStart,progress:n.onMatrixProcessProgress,done:n.onMatrixDataReady,afterupdate:n.onMatrixAfterUpdate,groupexpand:n.onMatrixGroupExpandCollapse,groupcollapse:n.onMatrixGroupExpandCollapse,scope:n,destroyable:!0}),n.matrixRelayedListeners=n.relayEvents(n.matrix,n.relayedMatrixEvents,"pivot"),(i=n.getFeatureDataSource())&&!n.isConfiguring&&i.setMatrix(e))},refreshView:function(){this.destroyed||this.destroying||this.store.fireEvent("pivotstoreremodel",this)},updateHeaderContainerColumns:function(e){var t,i,n,r,o,a=this,s=this.getView(),l=s.normalView?s.normalView.getHeaderCt():s.getHeaderCt(),d=s.normalGrid?s.normalGrid:a,u=0,c=[];if(e){if((o=a.getColumnForGroup(l.items,e)).found){for(d.reconfiguring=!0,n=o.item.ownerCt,i=o.index;u<n.items.length;)(r=n.items.getAt(u)).group===e&&c.push(r),u++;t=Ext.clone(a.pivotColumns),a.preparePivotColumns(t),t=a.getVisiblePivotColumns(a.prepareVisiblePivotColumns(t),e),t=n.insert(i,t),Ext.destroy(c),d.reconfiguring=!1,t&&t.length&&t[0].focus(),d.onHeadersChanged()}}else t=Ext.clone(a.pivotColumns),a.preparePivotColumns(t),t=a.prepareVisiblePivotColumns(t),a.reconfigure(void 0,t)},getColumnForGroup:function(e,t){var i,n,r=e.length,o={found:!1,index:-1,item:null};for(i=0;i<r&&((n=e.getAt(i)).group===t?(o.found=!0,o.index=i,o.item=n):n.items&&(o=this.getColumnForGroup(n.items,t)),!o.found);i++);return o},onMatrixClearData:function(){this.store.removeAll(!0),this.expandedItemsState||(this.lastColumnsState=null),this.sortedColumn=null},onMatrixProcessStart:function(){this.enableLoadMask&&this.setLoading(!0)},onMatrixProcessProgress:function(e,t,i){var n,r=100*(t||.1)/(i||.1);this.loadMask&&(this.loadMask.msgTextEl?n=this.loadMask.msgTextEl:this.loadMask.msgEl&&(n=this.loadMask.msgEl),n&&n.update(Ext.util.Format.number(r,"0")+"%"))},onMatrixDataReady:function(e){this.refreshMatrixData(e,!1)},onMatrixAfterUpdate:function(e,t){t?this.refreshMatrixData(e,!0):this.refreshView()},onMatrixGroupExpandCollapse:function(e,t,i){"col"===t&&this.updateHeaderContainerColumns(i)},refreshMatrixData:function(e,t){var i,n,r,o=this,a=e.getColumnHeaders(),s=!1,l=e.leftAxis.items.items,d=e.topAxis.items.items;if(o.enableLoadMask&&o.setLoading(!1),!t)if(o.expandedItemsState){for(n=l.length,i=0;i<n;i++)r=l[i],0<=Ext.Array.indexOf(o.expandedItemsState.rows,r.value)&&(s=r.expanded=!0);for(n=d.length,i=0;i<n;i++)r=d[i],0<=Ext.Array.indexOf(o.expandedItemsState.cols,r.value)&&(s=r.expanded=!0);s&&delete o.expandedItemsState}else e.collapsibleRows&&o.doExpandCollapseTree(e.leftAxis.getTree(),!o.startRowGroupsCollapsed),e.collapsibleColumns&&o.doExpandCollapseTree(e.topAxis.getTree(),!o.startColGroupsCollapsed);o.pivotColumns=Ext.clone(a),a=Ext.clone(o.pivotColumns),o.preparePivotColumns(a),o.restorePivotColumnsState(a),a=o.prepareVisiblePivotColumns(a),o.reconfigure(void 0,a,null,!1),Ext.isEmpty(o.sortedColumn)||e.leftAxis.sortTreeByField(o.sortedColumn.dataIndex,o.sortedColumn.direction),o.store.fireEvent("pivotstoreremodel",o),Ext.isEmpty(o.sortedColumn)||o.updateColumnSortState(o.sortedColumn.dataIndex,o.sortedColumn.direction)},getVisiblePivotColumns:function(e,t){var i,n,r=[],o=e.length;for(i=0;i<o;i++)(n=e[i]).group===t&&r.push(n),n.columns&&(r=Ext.Array.merge(r,this.getVisiblePivotColumns(n.columns,t)));return r},prepareVisiblePivotColumns:function(e){var t,i,n=e.length,r=[];for(t=0;t<n;t++)(i=e[t]).hidden||r.push(i),i.columns&&(i.columns=this.prepareVisiblePivotColumns(i.columns));return r},preparePivotColumns:function(e){var t,i,n={menuDisabled:!0,sortable:!1,lockable:!1},r=e.length;for(t=0;t<r;t++)(i=e[t]).cls=i.cls||"",Ext.apply(i,n),i.leftAxis&&(i.locked=this.enableLocking),i.subTotal&&(i.cls=i.tdCls=this.clsGroupTotal),i.grandTotal&&(i.cls=i.tdCls=this.clsGrandTotal),i.group&&i.xgrouped&&(i.group.expanded?!i.subTotal&&this.matrix.collapsibleColumns&&(i.cls+=(Ext.isEmpty(i.cls)?"":" ")+this.groupHeaderCollapsibleCls):i.subTotal&&this.matrix.collapsibleColumns&&(i.cls+=(Ext.isEmpty(i.cls)?"":" ")+this.groupHeaderCollapsibleCls+" "+this.groupHeaderCollapsedCls),i.subTotal?i.text=i.group.expanded?i.group.getTextTotal():Ext.String.format('<span class="'+this.groupCls+'">{0}</span>',i.group.name):i.group&&(i.text=Ext.String.format('<span class="'+this.groupCls+'">{0}</span>',i.group.name)),i.xexpandable=i.subTotal?!i.group.expanded:i.group.expanded,(!i.group.expanded&&!i.subTotal||i.group.expanded&&i.subTotal&&"none"===this.getMatrix().colSubTotalsPosition)&&(i.hidden=!0)),Ext.isEmpty(i.columns)?i.dimension&&(i.renderer=!!i.dimension&&i.dimension.getRenderer(),i.formatter=!!i.dimension&&i.dimension.getFormatter(),i.scope=i.dimension?i.dimension.scope:null,i.align=i.dimension.align,0<i.dimension.flex?i.flex=i.flex||i.dimension.flex:i.width=i.width||i.dimension.width):(i.focusable=!0,i.enableFocusableContainer=!0,this.preparePivotColumns(i.columns))},reconfigurePivot:function(e){var t=this.getMatrix();e=e||{},t?e.type&&t.type!==e.type?this.setMatrix(e):t.reconfigure(e):this.setMatrix(e)},doExpandCollapseTree:function(e,t){var i;for(i=0;i<e.length;i++)e[i].expanded=t,e[i].children&&this.doExpandCollapseTree(e[i].children,t)},doExpandCollapse:function(e,t,i,n){var r,o=this.getMatrix();o&&(r=("row"===e?o.leftAxis:o.topAxis).findTreeElement("key",t))&&(r=r.node,(i=Ext.isDefined(i)?i:!r.expanded)?r.expand(n):r.collapse(n))},setHeaderGroupVisibility:function(e){e.xgrouped&&(e.subTotal?(e.setText(e.group.expanded?e.group.getTextTotal():Ext.String.format('<span class="'+this.groupCls+'">{0}</span>',e.group.name)),e.group.expanded?(e.removeCls(this.groupHeaderCollapsibleCls),e.removeCls(this.groupHeaderCollapsedCls)):(e.addCls(this.groupHeaderCollapsibleCls),e.addCls(this.groupHeaderCollapsedCls))):(e.setText(Ext.String.format('<span class="'+this.groupCls+'">{0}</span>',e.group.name)),e.addCls(this.groupHeaderCollapsibleCls)),e.xexpandable=e.subTotal?!e.group.expanded:e.group.expanded,!e.group.expanded&&!e.subTotal||e.group.expanded&&e.subTotal&&"none"===this.getMatrix().colSubTotalsPosition)?e.hide():(e.show(),e.items.each(this.setHeaderGroupVisibility,this))},expandRow:function(e,t){this.doExpandCollapse("row",e,!0,t)},collapseRow:function(e,t){this.doExpandCollapse("row",e,!1,t)},expandCol:function(e,t){this.doExpandCollapse("col",e,!0,t)},collapseCol:function(e,t){this.doExpandCollapse("col",e,!1,t)},expandAll:function(){this.expandAllColumns(),this.expandAllRows()},expandAllRows:function(){this.getMatrix().leftAxis.expandAll()},expandAllColumns:function(){this.getMatrix().topAxis.expandAll()},collapseAll:function(){this.collapseAllRows(),this.collapseAllColumns()},collapseAllRows:function(){this.getMatrix().leftAxis.collapseAll()},collapseAllColumns:function(){this.getMatrix().topAxis.collapseAll()},setStore:function(e){var t=this.getMatrix();t&&"local"===t.type&&t.initializeStore({store:e})},getStore:function(){var e=this.getMatrix();return(e instanceof Ext.pivot.matrix.Local?e.store:this.originalStore)||this.store},getPivotStore:function(){return this.store},getTopAxisItem:function(e){var t,i,n=this.getMatrix(),r=n.getColumns();if(!e)return null;for(i=0;i<r.length;i++)if(r[i].name===e.dataIndex){t=r[i].col;break}return Ext.isEmpty(t)?null:n.topAxis.items.getByKey(t)},getLeftAxisItem:function(e){var t,i=this.getFeatureDataSource();return e&&i&&(t=i.storeInfo[e.internalId])?this.getMatrix().leftAxis.items.getByKey(t.leftKey):null},getFeatureDataSource:function(){var e,t=this.rendered?this.getView():null;if(t)return(e=(t=t.normalView||t).getFeature("group"))?e.dataSource:null},onHeaderClick:function(e,t,i){var n,r=t.sortState&&"ASC"===t.sortState?"DESC":"ASC";return i&&i.stopEvent(),t.xexpandable?(this.matrix.collapsibleColumns&&this.doExpandCollapse("col",t.key),!1):(n=this.getTopAxisItem(t),!this.enableColumnSort||!this.sortableColumns||n&&n.dimension&&!n.dimension.getSortable()?void 0:(!t.leftAxis&&!t.topAxis||Ext.isEmpty(t.dataIndex)||this.getMatrix().leftAxis.sortTreeByField(t.dataIndex,r)&&(this.refreshView(),this.updateColumnSortState(t,r)),!1))},updateColumnSortState:function(e,t){Ext.isString(e)&&(e=this.down('[dataIndex="'+e+'"]')),e&&(e.setSortState(new Ext.util.Sorter({direction:t,property:"dummy"})),e.sortState=t,this.sortedColumn={dataIndex:e.dataIndex,direction:t})},getStateProperties:function(){return["enableColumnSort","sortedColumn","startRowGroupsCollapsed","startColGroupsCollapsed"]},applyState:function(e){var t,i,n=this.getStateProperties(),r=this.getMatrix();for(t=0;t<n.length;t++)e[i=n[t]]&&(this[i]=e[i]);e.expandedItems&&(this.expandedItemsState=e.expandedItems),this.lastColumnsState=e.pivotcolumns||{},r?r.reconfigure(e.matrix):this.setMatrix(e.matrix)},getState:function(){var e,t,i,n={},r=this.getStateProperties(),o=this.getMatrix();for(t=r.length,e=0;e<t;e++)n[r[e]]=this[r[e]];if(n.expandedItems={cols:[],rows:[]},o){for(n.matrix=o.serialize(),t=o.leftAxis.items.getCount(),e=0;e<t;e++)(i=o.leftAxis.items.getAt(e)).expanded&&n.expandedItems.rows.push(i.value);for(t=o.leftAxis.dimensions.getCount(),e=0;e<t;e++)i=o.leftAxis.dimensions.getAt(e),n.matrix.leftAxis[e].id=i.getId();for(t=o.topAxis.items.getCount(),e=0;e<t;e++)(i=o.topAxis.items.getAt(e)).expanded&&n.expandedItems.cols.push(i.value)}return n.pivotcolumns=this.getPivotColumnsState(),n},getPivotColumnsState:function(){var e,t;if(!this.lastColumnsState)for(t=this.getDataIndexColumns(this.getMatrix().getColumnHeaders()),this.lastColumnsState={},e=0;e<t.length;e++)t[e].dataIndex&&(this.lastColumnsState[t[e].dataIndex]={width:t[e].width,flex:t[e].flex||0});for(t=this.getView().getGridColumns(),e=0;e<t.length;e++)t[e].dataIndex&&(this.lastColumnsState[t[e].dataIndex]={width:t[e].rendered?t[e].getWidth():t[e].width,flex:t[e].flex||0});return this.lastColumnsState},getDataIndexColumns:function(e){var t,i=[];for(t=0;t<e.length;t++)e[t].dataIndex?i.push(e[t].dataIndex):Ext.isArray(e[t].columns)&&(i=Ext.Array.merge(i,this.getDataIndexColumns(e[t].columns)));return i},restorePivotColumnsState:function(e){this.parsePivotColumnsState(this.getPivotColumnsState(),e)},parsePivotColumnsState:function(e,t){var i,n;if(t)for(n=0;n<t.length;n++)(i=e[t[n].dataIndex])&&(i.flex?t[n].flex=i.flex:i.width&&(t[n].width=i.width)),this.parsePivotColumnsState(e,t[n].columns)},deprecated:{6.2:{properties:{matrixConfig:null,viewLayoutType:"outline",rowSubTotalsPosition:"first",rowGrandTotalsPosition:"last",colSubTotalsPosition:"last",colGrandTotalsPosition:"last",textTotalTpl:"Total ({name})",textGrandTotalTpl:"Grand total",showZeroAsBlank:!1,leftAxis:null,topAxis:null,aggregate:null}}}}),Ext.define("Ext.pivot.plugin.CellEditing",{extend:"Ext.grid.plugin.CellEditing",alias:"plugin.pivotcellediting",requires:["Ext.pivot.update.Increment","Ext.pivot.update.Overwrite","Ext.pivot.update.Percentage","Ext.pivot.update.Uniform"],defaultUpdater:"uniform",defaultValue:null,updater:null,init:function(e){var t=this;t.callParent([e]),t.pivot=e.isPivotGrid?e:e.up("pivotgrid"),t.mon(t,{beforeedit:t.onBeforeEdit,priority:1e3,scope:t}),t.pivot.isCellEditingAttached||(t.mon(t.pivot,{pivotcolumnsbuilt:t.addColumnEditors,scope:t}),t.pivot.isCellEditingAttached=!0),t.updater=Ext.Factory.pivotupdate({type:t.defaultUpdater}),t.pivot.relayEvents(t.updater,["beforeupdate","update"],"pivot")},destroy:function(){this.pivot.isCellEditingAttached=!1,this.pivot=this.updater=Ext.destroy(this.updater),this.callParent()},addColumnEditors:function(e,t){var i,n,r=t.length;for(n=0;n<r;n++)(i=t[n]).dimension&&i.dimension.editor&&(i.editor=Ext.clone(i.dimension.editor)),i.columns&&this.addColumnEditors(e,i.columns)},isCellEditable:function(e,t){return this.callParent([e,t])&&Boolean(this.getPivotResult(this.getEditingContext(e,t)))},onBeforeEdit:function(e,t){return Ext.isEmpty(this.defaultValue)||(t.value=this.defaultValue),this.isCellEditable(t.record,t.column)},getPivotResult:function(e){var t=this.pivot.getMatrix(),i=this.pivot.getLeftAxisItem(e.record),n=this.pivot.getTopAxisItem(e.column);return t.results.get(i?i.key:t.grandTotalKey,n?n.key:t.grandTotalKey)},updateRecords:function(e,t){var i=this.pivot,n=i.getMatrix(),r=i.getLeftAxisItem(e.record),o=i.getTopAxisItem(e.column);this.updater.setConfig({leftKey:r?r.key:n.grandTotalKey,topKey:o?o.key:n.grandTotalKey,matrix:n,dataIndex:e.column.dimension.dataIndex,value:t}),this.updater.update()},onEditComplete:function(e,t,i){var n,r,o=this,a=e.context;n=a.view,r=a.record,a.value=t,o.validateEdit(a)?(o.updateRecords(a,t),a.rowIdx=n.indexOf(r),o.fireEvent("edit",o,a),o.context===a&&(o.setActiveEditor(null),o.setActiveColumn(null),o.setActiveRecord(null),o.editing=!1)):o.editing=!1}}),Ext.define("Ext.pivot.plugin.configurator.window.Window",{extend:"Ext.window.Window",requires:["Ext.form.Panel","Ext.form.FieldContainer","Ext.form.field.Text","Ext.form.field.Hidden","Ext.form.field.ComboBox","Ext.layout.container.HBox"],modal:!0,closeAction:"destroy",initComponent:function(){return Ext.apply(this,{layout:"fit",items:[this.getSettingsForm()],buttons:[{text:Ext.Msg.buttonText.ok,handler:this.applySettings,scope:this},{text:Ext.Msg.buttonText.cancel,handler:this.cancelSettings,scope:this}]}),this.callParent(arguments)},beforeApplySettings:Ext.emptyFn,getSettingsForm:function(){return{xtype:"form",bodyPadding:5,items:[]}},loadSettings:function(e){var t=this.down("form");t&&t.getForm().setValues(e||{})},applySettings:function(){var e,t=this.down("form");t&&t.getForm().isValid()&&(e=t.getForm().getValues(),!1!==this.beforeApplySettings(e)&&!1!==this.fireEvent("applysettings",this,e)&&this.cancelSettings())},cancelSettings:function(){this.close()}}),Ext.define("Ext.pivot.plugin.configurator.window.FilterLabel",{extend:"Ext.pivot.plugin.configurator.window.Window",titleText:"Label filter ({0})",fieldText:"Show items for which the label",caseSensitiveText:"Case sensitive",initComponent:function(){this.callParent(arguments),this.setTitle(Ext.String.format(this.titleText,this.title))},getSettingsForm:function(){var e=this.filterFields||[];return e.push({xtype:"combo",editable:!1,queryMode:"local",valueField:"value",store:this.store,name:"operator",listeners:{change:function(e,t){var i=this.isOperatorBetween(t);this.down("#fValue").setVisible(!i),this.down("#fValue").allowBlank=i,this.down("#fFrom").setVisible(i),this.down("#fFrom").allowBlank=!i,this.down("#fTo").setVisible(i),this.down("#fTo").allowBlank=!i},scope:this}},{itemId:"fValue",xtype:"textfield",margin:"0 0 0 5",name:"value"},{itemId:"fFrom",xtype:"textfield",margin:"0 0 0 5",name:"from"},{itemId:"fTo",xtype:"textfield",margin:"0 0 0 5",name:"to"}),Ext.apply(this.callParent(arguments),{items:[{xtype:"hidden",name:"type"},{xtype:"fieldcontainer",labelSeparator:"",fieldLabel:this.fieldText,labelAlign:"top",layout:{type:"hbox",align:"stretch"},defaults:{allowBlank:!1,flex:1},items:e},{xtype:"checkbox",boxLabel:this.caseSensitiveText,name:"caseSensitive"}]})},beforeApplySettings:function(e){this.isOperatorBetween(e.operator)&&(e.value=[e.from,e.to]),delete e.from,delete e.to,e.caseSensitive="on"===e.caseSensitive,e.topSort="on"===e.topSort},isOperatorBetween:function(e){return 0<=Ext.Array.indexOf(["between","not between"],e)}}),Ext.define("Ext.pivot.plugin.configurator.window.FilterValue",{extend:"Ext.pivot.plugin.configurator.window.FilterLabel",titleText:"Value filter ({0})",fieldText:"Show items for which",initComponent:function(){this.filterFields=[{xtype:"combo",editable:!1,queryMode:"local",valueField:"value",store:this.storeAgg,name:"dimensionId"}],this.callParent(arguments)}}),Ext.define("Ext.pivot.plugin.configurator.window.FilterTop",{extend:"Ext.pivot.plugin.configurator.window.Window",titleText:"Top 10 filter ({0})",fieldText:"Show",sortResultsText:"Sort results",initComponent:function(){this.callParent(arguments),this.setTitle(Ext.String.format(this.titleText,this.title))},getSettingsForm:function(){var e=[];return e.push({xtype:"combo",editable:!1,queryMode:"local",valueField:"value",store:this.storeTopOrder,name:"topOrder"},{xtype:"textfield",margin:"0 0 0 5",name:"value"},{xtype:"combo",margin:"0 0 0 5",editable:!1,queryMode:"local",valueField:"value",store:this.storeTopType,name:"topType"},{xtype:"combo",margin:"0 0 0 5",editable:!1,queryMode:"local",valueField:"value",store:this.storeAgg,name:"dimensionId"}),Ext.apply(this.callParent(arguments),{defaults:{allowBlank:!1},items:[{xtype:"hidden",name:"type"},{xtype:"hidden",name:"operator"},{xtype:"fieldcontainer",labelSeparator:"",fieldLabel:this.fieldText,labelAlign:"top",layout:{type:"hbox",align:"stretch"},defaults:{flex:1,allowBlank:!1},items:e},{xtype:"checkbox",boxLabel:this.sortResultsText,name:"topSort"}]})}}),Ext.define("Ext.pivot.plugin.configurator.window.FieldSettings",{extend:"Ext.pivot.plugin.configurator.window.Window",requires:["Ext.form.field.Display"],title:"Field settings",formatText:"Format as",summarizeByText:"Summarize by",customNameText:"Custom name",sourceNameText:"Source name",alignText:"Align",alignLeftText:"Left",alignCenterText:"Center",alignRightText:"Right",field:null,getSettingsForm:function(){var e,t,i,n=this,r=[],o=[],a=n.field.getSettings(),s=a.getFormatters(),l=a.getRenderers(),d=a.getAggregators();for(e=d.length,t=0;t<e;t++)o.push([n.field.getAggText(d[t]),d[t]]);for(e=(i=Ext.Object.getAllKeys(s||{})).length,t=0;t<e;t++)r.push([i[t],s[i[t]],1]);for(e=(i=Ext.Object.getAllKeys(l||{})).length,t=0;t<e;t++)r.push([i[t],l[i[t]],2]);return Ext.apply(n.callParent(arguments),{items:[{xtype:"displayfield",fieldLabel:n.sourceNameText,name:"dataIndex"},{xtype:"textfield",fieldLabel:n.customNameText,name:"header",allowBlank:!1},{xtype:"combo",fieldLabel:n.alignText,editable:!1,queryMode:"local",valueField:"value",name:"align",store:new Ext.data.ArrayStore({fields:["text","value"],data:[[n.alignLeftText,"left"],[n.alignCenterText,"center"],[n.alignRightText,"right"]]})},{xtype:"combo",fieldLabel:n.formatText,editable:!1,queryMode:"local",valueField:"value",name:"formatter",store:new Ext.data.ArrayStore({fields:["text","value","type"],data:r})},{xtype:"combo",fieldLabel:n.summarizeByText,editable:!1,queryMode:"local",valueField:"value",name:"aggregator",store:new Ext.data.ArrayStore({fields:["text","value"],data:o})}]})},beforeApplySettings:function(e){var t,i=this.down("[name=formatter]");i&&(t=i.getStore().findRecord("value",e.formatter,0,!1,!0,!0))&&(1===t.get("type")?(e.formatter=t.get("value"),e.renderer=null):(e.renderer=t.get("value"),e.formatter=null))},loadSettings:function(e){var t=e.formatter;Ext.isFunction(t)&&(t=null),t||Ext.isFunction(e.renderer)||(t=e.renderer),e.formatter=t,this.callParent([e])}}),Ext.define("Ext.pivot.plugin.configurator.Column",{extend:"Ext.Component",requires:["Ext.menu.Menu","Ext.menu.CheckItem","Ext.menu.Item","Ext.menu.Separator","Ext.pivot.plugin.configurator.Field","Ext.pivot.plugin.configurator.window.FilterLabel","Ext.pivot.plugin.configurator.window.FilterValue","Ext.pivot.plugin.configurator.window.FilterTop","Ext.pivot.plugin.configurator.window.FieldSettings"],alias:"widget.pivotconfigfield",childEls:["textCol","filterCol","sortCol","customCol"],tabIndex:0,focusable:!0,isConfiguratorField:!0,renderTpl:'<div id="{id}-configCol" role="button" class="'+Ext.baseCSSPrefix+'pivot-grid-config-column-inner" ><span id="{id}-customCol" role="presentation" data-ref="customCol" class="'+Ext.baseCSSPrefix+"pivot-grid-config-column-btn-customize "+Ext.baseCSSPrefix+"border-box "+Ext.baseCSSPrefix+"pivot-grid-config-column-btn "+Ext.baseCSSPrefix+'pivot-grid-config-column-btn-image"></span><span id="{id}-sortCol" role="presentation" data-ref="sortCol" class="'+Ext.baseCSSPrefix+"border-box "+Ext.baseCSSPrefix+'pivot-grid-config-column-btn"></span><span id="{id}-filterCol" role="presentation" data-ref="filterCol" class="'+Ext.baseCSSPrefix+"border-box "+Ext.baseCSSPrefix+'pivot-grid-config-column-btn"></span><span id="{id}-textCol" role="presentation" data-ref="textCol" data-qtip="{header}" class="'+Ext.baseCSSPrefix+"pivot-grid-config-column-text "+Ext.baseCSSPrefix+"column-header-text "+Ext.baseCSSPrefix+'border-box">{header}</span></div>',header:"&#160;",minWidth:80,sortAscText:"Sort A to Z",sortDescText:"Sort Z to A",sortClearText:"Disable sorting",clearFilterText:'Clear filter from "{0}"',labelFiltersText:"Label filters",valueFiltersText:"Value filters",equalsText:"Equals...",doesNotEqualText:"Does not equal...",beginsWithText:"Begins with...",doesNotBeginWithText:"Does not begin with...",endsWithText:"Ends with...",doesNotEndWithText:"Does not end with...",containsText:"Contains...",doesNotContainText:"Does not contain...",greaterThanText:"Greater than...",greaterThanOrEqualToText:"Greater than or equal to...",lessThanText:"Less than...",lessThanOrEqualToText:"Less than or equal to...",betweenText:"Between...",notBetweenText:"Not between...",top10Text:"Top 10...",equalsLText:"equals",doesNotEqualLText:"does not equal",beginsWithLText:"begins with",doesNotBeginWithLText:"does not begin with",endsWithLText:"ends with",doesNotEndWithLText:"does not end with",containsLText:"contains",doesNotContainLText:"does not contain",greaterThanLText:"is greater than",greaterThanOrEqualToLText:"is greater than or equal to",lessThanLText:"is less than",lessThanOrEqualToLText:"is less than or equal to",betweenLText:"is between",notBetweenLText:"is not between",top10LText:"Top 10...",topOrderTopText:"Top",topOrderBottomText:"Bottom",topTypeItemsText:"Items",topTypePercentText:"Percent",topTypeSumText:"Sum",baseCls:Ext.baseCSSPrefix+"pivot-grid-config-column",btnIconCls:Ext.baseCSSPrefix+"pivot-grid-config-column-btn-image",setFilterIconCls:Ext.baseCSSPrefix+"pivot-grid-config-column-btn-filter-set",clearFilterIconCls:Ext.baseCSSPrefix+"pivot-grid-config-column-btn-filter-clear",ascSortIconCls:Ext.baseCSSPrefix+"pivot-grid-config-column-btn-sort-asc",descSortIconCls:Ext.baseCSSPrefix+"pivot-grid-config-column-btn-sort-desc",clearSortIconCls:Ext.baseCSSPrefix+"pivot-grid-config-column-btn-sort-clear",overCls:Ext.baseCSSPrefix+"pivot-grid-config-column-over",cls:Ext.baseCSSPrefix+"unselectable",config:{fieldType:"all",field:null},destroy:function(){this.setField(null),this.callParent()},initRenderData:function(){var e=this.getField();return Ext.apply(this.callParent(arguments),{header:"aggregate"===this.getFieldType()?e.getFieldText():e.getHeader(),dimension:e})},afterRender:function(){var e=this.getField(),t=e.getSettings();this.callParent(),0<=Ext.Array.indexOf(["leftAxis","topAxis"],this.getFieldType())&&(Ext.isDefined(e.sortable)&&!e.sortable||this.addSortCls(e.direction),e.filter&&this.addFilterCls()),this.textCol.setStyle(t.getStyle()),this.addCls(t.getCls())},getMenuConfig:function(){var e=this.getFieldType();if("leftAxis"===e||"topAxis"===e)return this.getColMenuConfig()},addSortCls:function(e){var t=this;t.sortCol&&("ASC"!==e&&e?(t.sortCol.addCls(t.descSortIconCls),t.sortCol.removeCls(t.ascSortIconCls)):(t.sortCol.addCls(t.ascSortIconCls),t.sortCol.removeCls(t.descSortIconCls)),t.sortCol.addCls(t.btnIconCls))},removeSortCls:function(e){this.sortCol&&("ASC"===e?this.sortCol.removeCls(this.ascSortIconCls):this.sortCol.removeCls(this.descSortIconCls),this.sortCol.removeCls(this.btnIconCls))},addFilterCls:function(){this.filterCol&&!this.filterCol.hasCls(this.setFilterIconCls)&&(this.filterCol.addCls(this.setFilterIconCls),this.filterCol.addCls(this.btnIconCls))},removeFilterCls:function(){this.filterCol&&(this.filterCol.removeCls(this.setFilterIconCls),this.filterCol.removeCls(this.btnIconCls))},getColMenuConfig:function(){var e,t,i,n,r=this,o=[],a=r.getField().filter;for(o.push({text:r.sortAscText,direction:"ASC",iconCls:r.ascSortIconCls,handler:r.sortMe},{text:r.sortDescText,direction:"DESC",iconCls:r.descSortIconCls,handler:r.sortMe},{text:r.sortClearText,direction:"",disabled:!1===r.getField().sortable,iconCls:r.clearSortIconCls,handler:r.sortMe},{xtype:"menuseparator"}),i=[{text:r.equalsText,operator:"="},{text:r.doesNotEqualText,operator:"!="},{xtype:"menuseparator"},{text:r.greaterThanText,operator:">"},{text:r.greaterThanOrEqualToText,operator:">="},{text:r.lessThanText,operator:"<"},{text:r.lessThanOrEqualToText,operator:"<="},{xtype:"menuseparator"},{text:r.betweenText,operator:"between"},{text:r.notBetweenText,operator:"not between"}],e=Ext.clone(i),Ext.Array.insert(e,3,[{text:r.beginsWithText,operator:"begins"},{text:r.doesNotBeginWithText,operator:"not begins"},{text:r.endsWithText,operator:"ends"},{text:r.doesNotEndWithText,operator:"not ends"},{xtype:"menuseparator"},{text:r.containsText,operator:"contains"},{text:r.doesNotContainText,operator:"not contains"},{xtype:"menuseparator"}]),n=0;n<e.length;n++)e[n].checked=a&&"label"===a.type&&a.operator===e[n].operator;for((t=Ext.clone(i)).push({xtype:"menuseparator"},{text:r.top10Text,operator:"top10"}),n=0;n<t.length;n++)t[n].checked=a&&"value"===a.type&&a.operator===t[n].operator;return o.push({text:Ext.String.format(r.clearFilterText,r.header),iconCls:r.clearFilterIconCls,disabled:!a,handler:r.onRemoveFilter},{text:r.labelFiltersText,menu:{defaults:{handler:r.onShowFilter,scope:r,xtype:"menucheckitem",group:"filterlabel",type:"label"},items:e}},{text:r.valueFiltersText,menu:{defaults:{handler:r.onShowFilter,scope:r,xtype:"menucheckitem",group:"filtervalue",type:"value"},items:t}}),{defaults:{scope:r},items:o}},sortMe:function(e){var t=this.getField();Ext.isEmpty(e.direction)?(t.setSortable(!1),this.removeSortCls(t.getDirection())):(t.setSortable(!0),this.addSortCls(e.direction),t.setDirection(e.direction)),this.applyChanges()},onShowFilter:function(e){var t,i,n,r,o,a=this,s=a.up("pivotconfigpanel"),l=[],d={},u=a.getField().getFilter(),c={type:e.type,operator:e.operator,value:u?u.value:"",from:u&&Ext.isArray(u.value)?u.value[0]:"",to:u&&Ext.isArray(u.value)?u.value[1]:"",caseSensitive:!!u&&u.caseSensitive,topSort:!!u&&u.topSort},h=s.getAggregateContainer().items,f=h.getCount();for(r=0;r<f;r++)o=h.getAt(r).getField(),l.push([o.getHeader(),o.getId()]);"label"===e.type||"value"===e.type&&"top10"!==e.operator?(n=[[a.equalsLText,"="],[a.doesNotEqualLText,"!="],[a.greaterThanLText,">"],[a.greaterThanOrEqualToLText,">="],[a.lessThanLText,"<"],[a.lessThanOrEqualToLText,"<="],[a.betweenLText,"between"],[a.notBetweenLText,"not between"]],"label"===e.type?(Ext.Array.insert(n,3,[[a.beginsWithLText,"begins"],[a.doesNotBeginWithLText,"not begins"],[a.endsWithLText,"ends"],[a.doesNotEndWithLText,"not ends"],[a.containsLText,"contains"],[a.doesNotContainLText,"not contains"]]),i="Ext.pivot.plugin.configurator.window.FilterLabel"):(i="Ext.pivot.plugin.configurator.window.FilterValue",Ext.apply(c,{dimensionId:u?u.dimensionId:""}),d.storeAgg=new Ext.data.ArrayStore({fields:["text","value"],data:l})),d.store=new Ext.data.ArrayStore({fields:["text","value"],data:n})):(i="Ext.pivot.plugin.configurator.window.FilterTop",n=[],Ext.apply(d,{storeTopOrder:new Ext.data.ArrayStore({fields:["text","value"],data:[[a.topOrderTopText,"top"],[a.topOrderBottomText,"bottom"]]}),storeTopType:new Ext.data.ArrayStore({fields:["text","value"],data:[[a.topTypeItemsText,"items"],[a.topTypePercentText,"percent"],[a.topTypeSumText,"sum"]]}),storeAgg:new Ext.data.ArrayStore({fields:["text","value"],data:l})}),Ext.apply(c,{operator:"top10",dimensionId:u?u.dimensionId:"",topType:u?u.topType:"items",topOrder:u?u.topOrder:"top"})),(t=Ext.create(i,Ext.apply(d||{},{title:a.header,listeners:{applysettings:Ext.bind(a.onApplyFilterSettings,a)}}))).loadSettings(c),t.show()},onApplyFilterSettings:function(e,t){e.close(),this.addFilterCls(),this.getField().setFilter(t),this.applyChanges()},onRemoveFilter:function(){this.removeFilterCls(),this.getField().setFilter(null),this.applyChanges()},applyChanges:function(){this.ownerCt&&this.ownerCt.applyChanges(this)}}),Ext.define("Ext.pivot.plugin.configurator.Container",{extend:"Ext.panel.Panel",requires:["Ext.pivot.plugin.configurator.Column"],mixins:["Ext.mixin.FocusableContainer"],alias:"widget.pivotconfigcontainer",childEls:["innerCt"],handleSorting:!1,handleFiltering:!1,position:"top",border:!1,enableFocusableContainer:!0,isConfiguratorContainer:!0,cls:Ext.baseCSSPrefix+"pivot-grid-config-container-body",dockedTopRightCls:Ext.baseCSSPrefix+"pivot-grid-config-container-body-tr",dockedBottomLeftCls:Ext.baseCSSPrefix+"pivot-grid-config-container-body-bl",hintTextCls:Ext.baseCSSPrefix+"pivot-grid-config-container-hint",config:{fieldType:"all",dragDropText:"&nbsp;"},initComponent:function(){var e=this;"top"===e.position||"bottom"===e.position?Ext.apply(e,{style:"overflow:hidden",layout:"column",height:"auto"}):Ext.apply(e,{layout:{type:"vbox",align:"stretch"}}),"top"===e.position||"right"===e.position?e.cls+=" "+e.dockedTopRightCls:e.cls+=" "+e.dockedBottomLeftCls,e.callParent(arguments)},destroy:function(){this.infoEl=Ext.destroy(this.infoEl),this.callParent()},afterRender:function(){this.callParent(),this.infoEl=this.innerCt.createChild({cls:this.hintTextCls,html:this.getDragDropText()}),this.setInfoElVisibility()},applyChanges:function(e,t){"all"===this.getFieldType()&&!0!==t||this.fireEvent("configchange",e||this)},addField:function(e,t,i){var n,r={xtype:"pivotconfigfield",field:e,header:e.getHeader(),touchAction:{panX:!1,panY:!1}};return e.isAggregate="aggregate"===this.getFieldType(),n=-1!==t?this.insert(t,r):this.add(r),!0===i&&this.applyChanges(n),n},onAdd:function(e){this.setInfoElVisibility(),e.setFieldType(this.getFieldType()),this.callParent(arguments)},onRemove:function(){this.setInfoElVisibility()},moveField:function(e,t,i){Ext.isString(e)&&(e=this.items.getByKey(e)),Ext.isString(t)&&(t=this.items.getByKey(t)),e!==t&&(this["move"+Ext.String.capitalize(i)](e,t),this.applyChanges(e))},removeField:function(e){this.remove(e),this.applyChanges()},setInfoElVisibility:function(){var e=this.infoEl;e&&(0===this.items.getCount()?e.show():e.hide())}}),Ext.define("Ext.pivot.plugin.configurator.DragZone",{extend:"Ext.dd.DragZone",configColumnSelector:"."+Ext.baseCSSPrefix+"pivot-grid-config-column",configColumnInnerSelector:"."+Ext.baseCSSPrefix+"pivot-grid-config-column-inner",maxProxyWidth:120,dragging:!1,constructor:function(e){this.panel=e,this.ddGroup=this.getDDGroup(),this.callParent([e.el])},getDDGroup:function(){return"configurator-"+this.panel.id},getDragData:function(e){var t,i,n,r;return!(!e.getTarget(this.configColumnInnerSelector)||!(t=e.getTarget(this.configColumnSelector))||((i=Ext.getCmp(t.id)).focus(),r=i.getField(),this.panel.dragging||!r||r.getSettings().isFixed(i.ownerCt)))&&((n=document.createElement("div")).innerHTML=i.header,{ddel:n,header:i})},onBeforeDrag:function(){return!(this.panel.dragging||this.disabled)},onInitDrag:function(){this.panel.dragging=!0,this.callParent(arguments)},onDragDrop:function(){this.panel.dragging=!1,this.callParent(arguments)},afterRepair:function(){this.callParent(),this.panel.dragging=!1},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}}),Ext.define("Ext.pivot.plugin.configurator.DropZone",{extend:"Ext.dd.DropZone",proxyOffsets:[-4,-9],configPanelCls:Ext.baseCSSPrefix+"pivot-grid-config-container-body",configColumnCls:Ext.baseCSSPrefix+"pivot-grid-config-column",constructor:function(e){this.panel=e,this.ddGroup=this.getDDGroup(),this.callParent([e.id])},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},getDDGroup:function(){return"configurator-"+this.panel.id},getTargetFromEvent:function(e){return e.getTarget("."+this.configColumnCls)||e.getTarget("."+this.configPanelCls)},getTopIndicator:function(){return this.topIndicator||(this.self.prototype.topIndicator=Ext.DomHelper.append(Ext.getBody(),{cls:"col-move-top "+Ext.baseCSSPrefix+"col-move-top",html:"&#160;"},!0),this.self.prototype.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)),this.topIndicator},getBottomIndicator:function(){return this.bottomIndicator||(this.self.prototype.bottomIndicator=Ext.DomHelper.append(Ext.getBody(),{cls:"col-move-bottom "+Ext.baseCSSPrefix+"col-move-bottom",html:"&#160;"},!0)),this.bottomIndicator},getLocation:function(e,t,i){var n,r,o=i.getXY()[0],a=Ext.getCmp(t.id);return r=(n=a instanceof Ext.pivot.plugin.configurator.Container?0<a.items.getCount()?Ext.fly(a.items.last().el).getRegion():new Ext.util.Region(0,1e6,0,0):Ext.fly(t).getRegion()).right-o<=(n.right-n.left)/2?"after":"before",e.dropLocation={pos:r,header:Ext.getCmp(t.id),node:t}},positionIndicator:function(e,t,i){var n,r,o,a,s,l,d,u,c,h,f,g,p,m,x,y=this,v=e.header,E=y.getLocation(e,t,i),b=E.header,C=E.pos;if(b!==y.lastTargetHeader||C!==y.lastDropPos)if(n=v.nextSibling("pivotconfigfield:not([hidden])"),r=v.previousSibling("pivotconfigfield:not([hidden])"),y.lastTargetHeader=b,y.lastDropPos=C,v!==b&&("before"===C&&n!==b||"after"===C&&r!==b)&&!b.isDescendantOf(v)){for(p=(g=Ext.dd.DragDropManager.getRelated(y)).length,m=0;m<p;m++)(x=g[m])!==y&&x.invalidateDrop&&x.invalidateDrop();y.valid=!0,o=y.getTopIndicator(),a=y.getBottomIndicator(),l="before"===C?(s="bc-tl","tc-bl"):(s="bc-tr","tc-br"),u=b.isConfiguratorContainer&&0<b.items.getCount()?(d=o.getAlignToXY(b.items.last().el,s),a.getAlignToXY(b.items.last().el,l)):(d=o.getAlignToXY(b.el,s),a.getAlignToXY(b.el,l)),h=(c=y.panel.el).getX()-y.indicatorXOffset,f=c.getX()+c.getWidth(),d[0]=Ext.Number.constrain(d[0],h,f),u[0]=Ext.Number.constrain(u[0],h,f),o.setXY(d),a.setXY(u),o.show(),a.show()}else y.invalidateDrop()},invalidateDrop:function(){this.valid=!1,this.hideIndicators()},onNodeOver:function(e,t,i,n){var r=!0,o=n.header,a=this.getLocation(n,e,i);return n.header.el.dom===e&&(r=!1),a&&a.header&&o&&(r=r&&o.getField().getSettings().isAllowed(a.header)&&this.panel.isAllowed(a.header,o)),r?this.positionIndicator(n,e,i):this.valid=!1,this.valid?this.dropAllowed:this.dropNotAllowed},hideIndicators:function(){this.getTopIndicator().hide(),this.getBottomIndicator().hide(),this.lastTargetHeader=this.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},onNodeDrop:function(e,t,i,n){var r=n.header,o=n.dropLocation;this.valid&&o&&this.panel.dragDropField(o.header,r,o.pos)}}),Ext.define("Ext.pivot.plugin.configurator.window.Settings",{extend:"Ext.pivot.plugin.configurator.window.Window",requires:["Ext.form.field.Display"],title:"Settings",layoutText:"Layout",outlineLayoutText:"Outline",compactLayoutText:"Compact",tabularLayoutText:"Tabular",firstPositionText:"First",hidePositionText:"Hide",lastPositionText:"Last",rowSubTotalPositionText:"Row subtotal position",columnSubTotalPositionText:"Column subtotal position",rowTotalPositionText:"Row total position",columnTotalPositionText:"Column total position",showZeroAsBlankText:"Show zero as blank",yesText:"Yes",noText:"No",getSettingsForm:function(){var e=this,t={type:"array",fields:["text","value"],data:[[e.firstPositionText,"first"],[e.hidePositionText,"none"],[e.lastPositionText,"last"]]};return Ext.apply(e.callParent(arguments),{items:[{xtype:"combo",fieldLabel:e.layoutText,editable:!1,queryMode:"local",valueField:"value",name:"viewLayoutType",store:{type:"array",fields:["text","value"],data:[[e.outlineLayoutText,"outline"],[e.compactLayoutText,"compact"],[e.tabularLayoutText,"tabular"]]}},{xtype:"combo",fieldLabel:e.rowSubTotalPositionText,editable:!1,queryMode:"local",valueField:"value",name:"rowSubTotalsPosition",store:t},{xtype:"combo",fieldLabel:e.columnSubTotalPositionText,editable:!1,queryMode:"local",valueField:"value",name:"colSubTotalsPosition",store:t},{xtype:"combo",fieldLabel:e.rowTotalPositionText,editable:!1,queryMode:"local",valueField:"value",name:"rowGrandTotalsPosition",store:t},{xtype:"combo",fieldLabel:e.columnTotalPositionText,editable:!1,queryMode:"local",valueField:"value",name:"colGrandTotalsPosition",store:t},{xtype:"combo",fieldLabel:e.showZeroAsBlankText,editable:!1,queryMode:"local",valueField:"value",name:"showZeroAsBlank",store:{type:"array",fields:["text","value"],data:[[e.yesText,!0],[e.noText,!1]]}}]})}}),Ext.define("Ext.pivot.plugin.configurator.Panel",{extend:"Ext.panel.Panel",requires:["Ext.pivot.plugin.configurator.Container","Ext.pivot.plugin.configurator.DragZone","Ext.pivot.plugin.configurator.DropZone","Ext.layout.container.HBox","Ext.layout.container.VBox","Ext.pivot.plugin.configurator.window.Settings"],mixins:["Ext.mixin.FocusableContainer"],alias:"widget.pivotconfigpanel",weight:50,defaultMinHeight:70,defaultMinWidth:250,headerWidth:100,dock:"right",header:!1,title:"Configurator",collapsible:!0,collapseMode:"placeholder",panelAllFieldsText:"Drop Unused Fields Here",panelAllFieldsTitle:"All fields",panelTopFieldsText:"Drop Column Fields Here",panelTopFieldsTitle:"Column labels",panelLeftFieldsText:"Drop Row Fields Here",panelLeftFieldsTitle:"Row labels",panelAggFieldsText:"Drop Agg Fields Here",panelAggFieldsTitle:"Values",addToText:"Add to {0}",moveToText:"Move to {0}",removeFieldText:"Remove field",moveUpText:"Move up",moveDownText:"Move down",moveBeginText:"Move to beginning",moveEndText:"Move to end",fieldSettingsText:"Field settings",headerContainerCls:Ext.baseCSSPrefix+"pivot-grid-config-container-header",keyEventRe:/^key/,config:{fields:[],refreshDelay:300,pivot:null},initComponent:function(){var e=this,t={configchange:e.applyChanges,scope:e};Ext.apply(e,0<=Ext.Array.indexOf(["top","bottom"],e.dock)?e.getHorizontalConfig():e.getVerticalConfig()),e.callParent(arguments),e.getAllFieldsContainer().on(t),e.getLeftAxisContainer().on(t),e.getTopAxisContainer().on(t),e.getAggregateContainer().on(t),e.pivotListeners=e.getPivot().getMatrix().on({done:e.onPivotDone,scope:e,destroyable:!0}),e.task=new Ext.util.DelayedTask(e.reconfigurePivot,e)},destroy:function(){var e,t=["relayers","pivotListeners","menu","dragZone","dropZone"],i=t.length;for(e=0;e<i;e++)Ext.destroy(this[t[e]]),this[t[e]]=null;this.task.cancel(),this.task=this.lastFocusedField=null,this.callParent()},enable:function(){this.rendered&&(this.dragZone.enable(),this.dropZone.enable(),this.initPivotFields()),this.show()},disable:function(){this.rendered&&(this.dragZone.disable(),this.dropZone.disable()),this.hide()},afterRender:function(){var e=this,t=e.getEl();e.callParent(arguments),e.mon(t,{scope:e,delegate:"."+Ext.baseCSSPrefix+"pivot-grid-config-column",click:e.handleEvent,keypress:e.handleEvent}),e.dragZone=new Ext.pivot.plugin.configurator.DragZone(e),e.dropZone=new Ext.pivot.plugin.configurator.DropZone(e),t.unselectable()},handleEvent:function(e){var t,i,n,r,o=this,a=o.keyEventRe.test(e.type),s=o.getPivot();(a&&e.getKey()===e.SPACE||0===e.button)&&(t=Ext.fly(e.target))&&(i=t.component)&&(e.stopEvent(),i.focus(),Ext.destroy(o.menu),(n=o.getMenuConfig(i))&&(o.menu=new Ext.menu.Menu(n),!(r={menu:o.menu,field:i.getField(),container:i.getFieldType()})!==s.fireEvent("beforeshowconfigfieldmenu",o,r)?(o.menu.showBy(i),o.menu.focus(),s.fireEvent("showconfigfieldmenu",o,r)):Ext.destroy(o.menu)))},getPanelConfigHeader:function(e){return Ext.apply({xtype:"header",baseCls:Ext.baseCSSPrefix+"panel-header",cls:this.headerContainerCls,border:1,width:this.headerWidth},e||{})},getHorizontalConfig:function(){var e=this,t=[{type:"gear",handler:e.showSettings,scope:e}];return e.collapsible&&t.push({type:"top"===e.dock?"up":"down",handler:e.collapseMe,scope:e}),{minHeight:e.defaultMinHeight,headerPosition:"top"===e.dock?"bottom":"top",collapseDirection:e.dock,defaults:{xtype:"container",layout:{type:"hbox",align:"stretchmax"},minHeight:e.defaultMinHeight/3},items:[{items:[e.getPanelConfigHeader({title:e.panelAllFieldsTitle,tools:t}),{itemId:"fieldsCt",xtype:"pivotconfigcontainer",fieldType:"all",dragDropText:e.panelAllFieldsText,position:e.dock,flex:1}]},{items:[e.getPanelConfigHeader({title:e.panelAggFieldsTitle}),{itemId:"fieldsAggCt",xtype:"pivotconfigcontainer",fieldType:"aggregate",dragDropText:e.panelAggFieldsText,position:e.dock,flex:1}]},{defaults:{xtype:"pivotconfigcontainer",minHeight:e.defaultMinHeight/3,position:e.dock},items:[e.getPanelConfigHeader({title:e.panelLeftFieldsTitle}),{itemId:"fieldsLeftCt",fieldType:"leftAxis",dragDropText:e.panelLeftFieldsText,flex:1},e.getPanelConfigHeader({title:e.panelTopFieldsTitle}),{itemId:"fieldsTopCt",fieldType:"topAxis",dragDropText:e.panelTopFieldsText,flex:1}]}]}},getVerticalConfig:function(){var e=this,t=[{type:"gear",handler:e.showSettings,scope:e}];return e.collapsible&&t.push({type:e.dock,handler:e.collapseMe,scope:e}),{layout:{type:"hbox",align:"stretch"},width:e.defaultMinWidth,minWidth:e.defaultMinWidth,headerPosition:"right"===e.dock?"left":"right",collapseDirection:e.dock,defaults:{flex:1},items:[{itemId:"fieldsCt",xtype:"pivotconfigcontainer",position:e.dock,title:e.panelAllFieldsTitle,fieldType:"all",dragDropText:e.panelAllFieldsText,autoScroll:!0,header:{cls:e.headerContainerCls},tools:t},{xtype:"container",defaults:{xtype:"pivotconfigcontainer",flex:1,autoScroll:!0,position:e.dock,header:{cls:e.headerContainerCls}},layout:{type:"vbox",align:"stretch"},items:[{itemId:"fieldsAggCt",title:e.panelAggFieldsTitle,fieldType:"aggregate",dragDropText:e.panelAggFieldsText},{itemId:"fieldsLeftCt",title:e.panelLeftFieldsTitle,fieldType:"leftAxis",dragDropText:e.panelLeftFieldsText},{itemId:"fieldsTopCt",title:e.panelTopFieldsTitle,fieldType:"topAxis",dragDropText:e.panelTopFieldsText}]}]}},getAllFieldsContainer:function(){return this.down("#fieldsCt")},getAllFieldsHeader:function(){var e=this.dock,t=this.getAllFieldsContainer();return"top"===e||"bottom"===e?t.prev():t.getHeader()},setAllFieldsContainerVisible:function(e){this.getAllFieldsContainer().setVisible(e),this.getAllFieldsHeader().setVisible(e)},getLeftAxisContainer:function(){return this.down("#fieldsLeftCt")},getLeftAxisHeader:function(){var e=this.dock,t=this.getLeftAxisContainer();return"top"===e||"bottom"===e?t.prev():t.getHeader()},setLeftAxisContainerVisible:function(e){this.getLeftAxisContainer().setVisible(e),this.getLeftAxisHeader().setVisible(e)},getTopAxisContainer:function(){return this.down("#fieldsTopCt")},getTopAxisHeader:function(){var e=this.dock,t=this.getTopAxisContainer();return"top"===e||"bottom"===e?t.prev():t.getHeader()},setTopAxisContainerVisible:function(e){this.getTopAxisContainer().setVisible(e),this.getTopAxisHeader().setVisible(e)},getAggregateContainer:function(){return this.down("#fieldsAggCt")},getAggregateHeader:function(){var e=this.dock,t=this.getAggregateContainer();return"top"===e||"bottom"===e?t.prev():t.getHeader()},setAggregateContainerVisible:function(e){this.getAggregateContainer().setVisible(e),this.getAggregateHeader().setVisible(e)},applyChanges:function(e){this.disabled||(e&&(this.lastFocusedField=e),this.task.delay(this.getRefreshDelay()))},collapseMe:function(){this.collapse(this.dock)},showSettings:function(){var e=this.getPivot(),t=new Ext.pivot.plugin.configurator.window.Settings({listeners:{applysettings:Ext.bind(this.applyPivotSettings,this)}}),i=e.getMatrix().serialize();delete i.leftAxis,delete i.topAxis,delete i.aggregate,!1!==e.fireEvent("beforeshowpivotsettings",this,{container:t,settings:i})?(t.loadSettings(i),t.show(),e.fireEvent("showpivotsettings",this,{container:t,settings:i})):Ext.destroy(t)},applyPivotSettings:function(e,t){var i=this.getPivot();if(!1===i.fireEvent("beforeapplypivotsettings",this,{container:e,settings:t}))return!1;i.fireEvent("applypivotsettings",this,{container:e,settings:t}),i.getMatrix().reconfigure(t)},getFieldsFromContainer:function(e,t){var i,n,r=[],o=e.items.getCount();for(i=0;i<o;i++)n=e.items.getAt(i),r.push(!0===t?n.getField().getConfiguration():n.getField());return r},initPivotFields:function(){var e,t,i,n,r=this,o=r.getPivot().getMatrix(),a=r.getAllFieldsContainer(),s=r.getLeftAxisContainer(),l=r.getTopAxisContainer(),d=r.getAggregateContainer();n=r.getFields().clone(),Ext.suspendLayouts(),a.removeAll(),l.removeAll(),s.removeAll(),d.removeAll(),e=r.getConfigFields(o.topAxis.dimensions.getRange()),t=r.getConfigFields(o.leftAxis.dimensions.getRange()),i=r.getConfigFields(o.aggregate.getRange()),r.addFieldsToConfigurator(n.getRange(),a),r.addFieldsToConfigurator(e,l),r.addFieldsToConfigurator(t,s),r.addFieldsToConfigurator(i,d),Ext.resumeLayouts(!0)},addFieldsToConfigurator:function(e,t){var i,n=e.length;for(i=0;i<n;i++)t.addField(e[i],-1)},getConfigFields:function(e){var t,i,n,r=e.length,o=this.getFields(),a=[];for(t=0;t<r;t++)n=e[t],(i=o.byDataIndex.get(n.dataIndex))&&((i=i.clone()).setConfig(n.getInitialConfig()),a.push(i));return a},getMenuConfig:function(e){var t=this,i=e.getFieldType(),n=[],r=e.getMenuConfig()||{},o=e.up("pivotconfigcontainer"),a=o.items.getCount(),s=o.items.indexOf(e),l=e.getField().getSettings(),d=t.getLeftAxisContainer(),u=t.getTopAxisContainer(),c=t.getAggregateContainer(),h=t.getLeftAxisHeader().getTitle().getText(),f=t.getTopAxisHeader().getTitle().getText(),g=t.getAggregateHeader().getTitle().getText();return r.items=r.items||[],"all"===i?n.push({text:Ext.String.format(t.addToText,h),disabled:!l.isAllowed(d),handler:Ext.bind(t.dragDropField,t,[d,e,"after"]),hidden:d.isHidden()},{text:Ext.String.format(t.addToText,f),disabled:!l.isAllowed(u),handler:Ext.bind(t.dragDropField,t,[u,e,"after"]),hidden:u.isHidden()},{text:Ext.String.format(t.addToText,g),disabled:!l.isAllowed(c),handler:Ext.bind(t.dragDropField,t,[c,e,"after"]),hidden:c.isHidden()}):n.push({text:t.moveUpText,disabled:1===a||0===s,handler:Ext.bind(t.dragDropField,t,[e.previousSibling(),e,"before"])},{text:t.moveDownText,disabled:1===a||s===a-1,handler:Ext.bind(t.dragDropField,t,[e.nextSibling(),e,"after"])},{text:t.moveBeginText,disabled:1===a||0===s,handler:Ext.bind(t.dragDropField,t,[o.items.first(),e,"before"])},{text:t.moveEndText,disabled:1===a||s===a-1,handler:Ext.bind(t.dragDropField,t,[o.items.last(),e,"after"])},{xtype:"menuseparator"},{text:Ext.String.format(t.moveToText,t.panelLeftFieldsTitle),disabled:"leftAxis"===i||!l.isAllowed(d)||l.isFixed(o),handler:Ext.bind(t.dragDropField,t,[d,e,"after"])},{text:Ext.String.format(t.moveToText,t.panelTopFieldsTitle),disabled:"topAxis"===i||!l.isAllowed(u)||l.isFixed(o),handler:Ext.bind(t.dragDropField,t,[u,e,"after"])},{text:Ext.String.format(t.moveToText,t.panelAggFieldsTitle),disabled:"aggregate"===i||!l.isAllowed(c)||l.isFixed(o),handler:Ext.bind(t.dragDropField,t,[c,e,"after"])},{xtype:"menuseparator"},{text:t.removeFieldText,disabled:l.isFixed(o),handler:Ext.bind(t.dragDropField,t,[t.getAllFieldsContainer(),e,"after"])}),"aggregate"===i&&n.push({xtype:"menuseparator"},{text:t.fieldSettingsText,handler:Ext.bind(t.openFieldSettings,t,[e])}),r.items.length&&n.push({xtype:"menuseparator"}),Ext.Array.insert(r.items,0,n),Ext.apply({ownerCmp:t,floating:!0},r)},openFieldSettings:function(e){var t=this.getPivot(),i=new Ext.pivot.plugin.configurator.window.FieldSettings({field:e.getField(),listeners:{applysettings:Ext.bind(this.applyFieldSettings,this,[e],0)}}),n=e.getField().getConfig();!1!==t.fireEvent("beforeshowconfigfieldsettings",this,{container:i,settings:n})?(i.loadSettings(n),i.show(),t.fireEvent("showconfigfieldsettings",this,{container:i,settings:n})):Ext.destroy(i)},applyFieldSettings:function(e,t,i){var n=this.getPivot(),r=e.getField();if(!1===n.fireEvent("beforeapplyconfigfieldsettings",this,{container:t,settings:i}))return!1;r.setConfig(i||{}),e.rendered&&(e.textCol.setHtml(r.getFieldText()),e.textCol.dom.setAttribute("data-qtip",r.getFieldText())),n.fireEvent("applyconfigfieldsettings",this,{container:t,settings:i}),this.applyChanges(e)},dragDropField:function(e,t,i){var n,r,o,a=this.getPivot(),s=t.getField(),l=t.ownerCt,d=e.isConfiguratorContainer?e:e.ownerCt,u=e.isConfiguratorField?e:e.items.last(),c=l.getFieldType(),h=d.getFieldType(),f=this.getTopAxisContainer(),g=this.getLeftAxisContainer();if(!1!==a.fireEvent("beforemoveconfigfield",this,{fromContainer:l,toContainer:d,field:s})){if(l!==d)if(n=u?(n=d.items.findIndex("id",u.id),"before"===i?n:n+1):-1,"all"===h)u.focus(),l.removeField(t);else if("aggregate"===h)o=d.addField(s.clone(),n,!0),"all"!==c&&l.remove(t);else{if(r=this.findFieldInContainer(s,d))return;if(r="leftAxis"===h?this.findFieldInContainer(s,f):this.findFieldInContainer(s,g))return d.add(r),this.applyChanges(r);"aggregate"===c&&l.remove(t),o=d.addField(s.clone(),n,!0)}else d.moveField(t.id,u.id,i);o&&(o.focus(),o.el.resumeFocusEvents())}},isAllowed:function(e,t){var i=!0,n=t.getField(),r=t.ownerCt,o=e.isConfiguratorContainer?e:e.ownerCt,a=r.getFieldType(),s=o.getFieldType();return"aggregate"!==a||"leftAxis"!==s&&"topAxis"!==s||(i=!this.findFieldInContainer(n,o)),i},findFieldInContainer:function(e,t){var i,n,r=t.items.getCount();for(i=0;i<r;i++)if((n=t.items.getAt(i)).getField().getDataIndex()===e.getDataIndex())return n},onPivotDone:function(){var e=this.lastFocusedField;this.internalReconfiguration?(this.internalReconfiguration=!1,e&&e.isConfiguratorContainer&&(e=e.items.first()),(e=e||this.getAllFieldsContainer().items.first())?e.focus():this.getPivot().focus()):this.initPivotFields()},reconfigurePivot:function(){var e=this,t=e.getPivot(),i={topAxis:e.getFieldsFromContainer(e.getTopAxisContainer(),!0),leftAxis:e.getFieldsFromContainer(e.getLeftAxisContainer(),!0),aggregate:e.getFieldsFromContainer(e.getAggregateContainer(),!0)};!(e.internalReconfiguration=!0)!==t.fireEvent("beforeconfigchange",e,i)&&(t.getMatrix().reconfigure(i),t.fireEvent("configchange",e,i))},placeholderCollapse:function(e,t){var i,n=this,r=n.ownerCt,o=e||n.collapseDirection,a=Ext.panel.Panel.floatCls,s=n.getPlaceholder(o);return n.isCollapsingOrExpanding=1,n.setHiddenState(!0),n.collapsed=o,s.rendered?(s.el.dom.parentNode!==n.el.dom.parentNode&&n.el.dom.parentNode.insertBefore(s.el.dom,n.el.dom),s.hidden=!1,s.setHiddenState(!1),s.el.show(),r.updateLayout()):n.dock?(s.dock=n.dock,r.addDocked(s)):r.insert(r.items.indexOf(n),s),n.rendered?(Ext.ComponentManager.getActiveComponent()===n.collapseTool&&(n.focusPlaceholderExpandTool=!0),n.el.setVisibilityMode(n.placeholderCollapseHideMode),t?(n.el.addCls(a),s.el.hide(),i=n.convertCollapseDir(o),n.el.slideOut(i,{preserveScroll:!0,duration:Ext.Number.from(t,Ext.fx.Anim.prototype.duration),listeners:{scope:n,afteranimate:function(){this.el.removeCls(a),this.placeholder.el.show().setStyle("display","none").slideIn(i,{easing:"linear",duration:100,listeners:{afteranimate:this.doPlaceholderCollapse,scope:this}})}}})):(n.el.hide(),n.doPlaceholderCollapse())):(n.isCollapsingOrExpanding=0,n.preventCollapseFire||n.fireEvent("collapse",n)),n},placeholderExpand:function(e){var t,i,n=this,r=n.collapsed,o=n.placeholder.expandTool,a=Ext.panel.Panel.floatCls,s=n.ownerLayout?n.ownerLayout.centerRegion:null;return Ext.Component.layoutSuspendCount&&(e=!1),n.floatedFromCollapse&&(i=n.getPosition(!0),n.slideOutFloatedPanelBegin(),n.slideOutFloatedPanelEnd(),n.floated=!1),Ext.ComponentManager.getActiveComponent()===o&&(n.focusHeaderCollapseTool=!0,o._ariaRole=o.ariaEl.dom.getAttribute("role"),o._ariaLabel=o.ariaEl.dom.getAttribute("aria-label"),o.ariaEl.dom.setAttribute("role","presentation"),o.ariaEl.dom.removeAttribute("aria-label")),e?(Ext.suspendLayouts(),n.placeholder.hide(),n.el.show(),n.collapsed=!1,n.setHiddenState(!1),s&&!i&&(s.hidden=!0),Ext.resumeLayouts(!0),s&&(s.hidden=!1),n.el.addCls(a),n.isCollapsingOrExpanding=2,i?(t=n.getXY(),n.setLocalXY(i[0],i[1]),n.setXY([t[0],t[1]],{duration:Ext.Number.from(e,Ext.fx.Anim.prototype.duration),listeners:{scope:n,afteranimate:function(){this.el.removeCls(a),this.isCollapsingOrExpanding=0,this.fireEvent("expand",this)}}})):(n.el.hide(),n.placeholder.el.show(),n.placeholder.hidden=!1,n.setHiddenState(!1),n.el.slideIn(n.convertCollapseDir(r),{preserveScroll:!0,duration:Ext.Number.from(e,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:n.doPlaceholderExpand,scope:n}}))):(n.floated=n.collapsed=!1,n.doPlaceholderExpand(!0)),n}}),Ext.define("Ext.pivot.plugin.Configurator",{alternateClassName:["Mz.pivot.plugin.Configurator"],extend:"Ext.plugin.Abstract",requires:["Ext.util.DelayedTask","Ext.menu.Menu","Ext.menu.CheckItem","Ext.util.Collection","Ext.pivot.plugin.configurator.Panel"],alias:["plugin.pivotconfigurator","plugin.mzconfigurator"],lockableScope:"top",config:{fields:[],refreshDelay:300,dock:"right",collapsible:!0,configPanel:null},init:function(e){e.isPivotComponent||Ext.raise("This plugin is only compatible with pivot components"),e.showConfigurator=Ext.bind(this.showConfigurator,this),e.hideConfigurator=Ext.bind(this.hideConfigurator,this),e.on({afterrender:this.onAfterPivotRendered,single:!0,scope:this}),this.callParent([e])},destroy:function(){var e=this.getCmp();e.showConfigurator=e.hideConfigurator=null,this.setConfigPanel(Ext.destroy(this.getConfigPanel())),this.setFields(null),this.callParent()},enable:function(){this.disabled=!1,this.showConfigurator()},disable:function(){this.disabled=!0,this.hideConfigurator()},showConfigurator:function(){this.renderConfigPanel()},hideConfigurator:function(){var e=this.getConfigPanel();e&&(e.disable(),this.getCmp().fireEvent("hideconfigpanel",e))},onAfterPivotRendered:function(){var e,t,i,n,r,o,a,s,l=this.getFields(),d=this.getCmp().getMatrix(),u=[],c={},h=!1;if(0===l.length&&d instanceof Ext.pivot.matrix.Local)for(h=!0,r=(t=(e=d.store)?e.model.getFields():[]).length,o=0;o<r;o++)n=t[o].getName(),l.byDataIndex.get(n)||l.add({header:Ext.String.capitalize(n),dataIndex:n});for(r=(t=Ext.Array.merge(d.leftAxis.dimensions.getRange(),d.topAxis.dimensions.getRange(),d.aggregate.getRange())).length,o=0;o<r;o++)delete(a=t[o].getConfig()).matrix,delete a.values,delete a.id,(i=l.byDataIndex.get(a.dataIndex))?h&&(c[a.dataIndex]||(c[a.dataIndex]=0),delete a.header,c[a.dataIndex]++,u.push(a)):l.add(a);for(r=u.length,o=0;o<r;o++)1===c[(a=u[o]).dataIndex]&&(i=l.byDataIndex.get(a.dataIndex))&&(s=i.getConfig(),Ext.merge(s,a),i.setConfig(s));(this.isReady=!0)===this.disabled?this.disable():this.enable()},updateDock:function(e){this.renderConfigPanel(e)},updateCollapsible:function(e){this.renderConfigPanel(e)},getFields:function(){var e=this.fields;return e||(e=new Ext.util.Collection({extraKeys:{byDataIndex:"dataIndex"},decoder:function(e){return e&&e.isField?e:new Ext.pivot.plugin.configurator.Field(e||{})}}),this.setFields(e)),e},applyFields:function(e,t){return null==e||e&&e.isCollection?e:(e&&(t=t||this.getFields()).splice(0,t.length,e),t)},renderConfigPanel:function(e){var t=this,i=t.getCmp(),n=t.getConfigPanel(),r=!Ext.isEmpty(n);i&&t.isReady&&!t.disabled&&(Ext.destroy(n),n=i.addDocked({xtype:"pivotconfigpanel",dock:e||t.getDock(),refreshDelay:t.getRefreshDelay(),pivot:t.getCmp(),fields:t.getFields(),listeners:{afterrender:"onRenderConfigPanel",single:!0,scope:t}})[0],t.setConfigPanel(n),r&&n.enable())},onRenderConfigPanel:function(e){this.getCmp().fireEvent("showconfigpanel",e)}}),Ext.define("Ext.pivot.plugin.DrillDown",{alternateClassName:["Mz.pivot.plugin.DrillDown"],alias:["plugin.pivotdrilldown","plugin.mzdrilldown"],extend:"Ext.plugin.Abstract",requires:["Ext.pivot.Grid","Ext.window.Window","Ext.data.proxy.Memory","Ext.data.Store","Ext.toolbar.Paging"],lockableScope:"top",config:{columns:null,width:400,height:300,remoteStore:null,grid:null,view:null},textWindow:"Drill down window",init:function(e){return e.isPivotGrid||Ext.raise("This plugin is only compatible with Ext.pivot.Grid"),this.setGrid(e),this.callParent([e])},destroy:function(){this.setConfig({grid:null,view:null}),this.callParent()},updateGrid:function(e){Ext.destroy(this.gridListeners),e&&(this.gridListeners=e.on({pivotitemcelldblclick:"showPanel",pivotgroupcelldblclick:"showPanel",pivottotalcelldblclick:"showPanel",scope:this,destroyable:!0}))},updateView:function(e,t){Ext.destroy(t)},showPanel:function(e,t,i){var n,r,o,a,s,l,d,u,c=this.getGrid(),h=c.getMatrix(),f=Ext.Array.from(this.getColumns()||[]);if(!this.disabled&&(n=h.results.get(e.leftKey,e.topKey))){switch(h.type){case"local":if(r=h.store.model.getFields(),o=new Ext.data.Store({pageSize:25,remoteSort:!0,fields:Ext.clone(r),proxy:{type:"memory",reader:{type:"array"},enablePaging:!0}}),0===f.length)for(d=r.length,l=0;l<d;l++)u=r[l],f.push({text:Ext.String.capitalize(u.name),dataIndex:u.name});o.getProxy().data=n.records,o.load();break;case"remote":(o=Ext.getStore(this.getRemoteStore()))&&o.setRemoteFilter(!0),0===f.length&&Ext.raise("No columns defined for the drill down grid!"),a=Ext.Array.merge(this.getFiltersFromParams(n.getLeftAxisItem()?n.getLeftAxisItem().data:{}),this.getFiltersFromParams(n.getTopAxisItem()?n.getTopAxisItem().data:{})),o.clearFilter(!0),0<a.length?o.addFilter(a):o.load();break;default:return}(s=this.createPanel(o,f)).show(),this.setView(s),c.fireEvent("showdrilldownpanel",s)}},createPanel:function(e,t){return new Ext.window.Window({title:this.textWindow,width:this.getWidth(),height:this.getHeight(),layout:"fit",modal:!0,closeAction:"hide",items:[{xtype:"grid",border:!1,viewConfig:{loadMask:!1},columns:t,store:e,dockedItems:[{xtype:"pagingtoolbar",store:e,dock:"bottom",displayInfo:!0}]}],listeners:{close:"onClosePanel",scope:this}})},onClosePanel:function(){var e=this.getView();this.getGrid().fireEvent("hidedrilldownpanel",e),this.setView(null)},getFiltersFromParams:function(e){var t,i,n,r=[];if(Ext.isObject(e))for(i=(n=Ext.Object.getKeys(e)).length,t=0;t<i;t++)r.push({property:n[t],exactMatch:!0,value:e[n[t]]});return r}}),Ext.define("Ext.pivot.plugin.RangeEditor",{alternateClassName:["Mz.pivot.plugin.RangeEditor"],alias:["plugin.pivotrangeeditor","plugin.mzrangeeditor"],extend:"Ext.plugin.Abstract",requires:["Ext.pivot.Grid","Ext.pivot.update.Increment","Ext.pivot.update.Overwrite","Ext.pivot.update.Percentage","Ext.pivot.update.Uniform","Ext.window.Window","Ext.form.field.Hidden","Ext.form.field.Text","Ext.form.field.Number","Ext.form.field.ComboBox","Ext.form.field.Display","Ext.form.Panel","Ext.button.Button","Ext.layout.container.Fit","Ext.data.ArrayStore"],width:null,height:null,textWindowTitle:"Range editor",textFieldValue:"Value",textFieldEdit:"Field",textFieldType:"Type",textButtonOk:"Ok",textButtonCancel:"Cancel",onBeforeRecordsUpdate:Ext.emptyFn,onAfterRecordsUpdate:Ext.emptyFn,scope:null,updaters:[["percentage","Percentage"],["increment","Increment"],["overwrite","Overwrite"],["uniform","Uniform"]],defaultUpdater:"uniform",lockableScope:"top",config:{grid:null,view:null},init:function(e){return e.isPivotGrid||Ext.raise("This plugin is only compatible with Ext.pivot.Grid"),this.setGrid(e),this.callParent([e])},destroy:function(){this.setConfig({grid:null,view:null}),this.cleanUp(),this.callParent()},updateGrid:function(e){Ext.destroy(this.gridListeners),e&&(this.gridListeners=e.on({pivotitemcelldblclick:"showPanel",pivotgroupcelldblclick:"showPanel",pivottotalcelldblclick:"showPanel",scope:this,destroyable:!0}))},updateView:function(e,t){Ext.destroy(t)},showPanel:function(e,t,i){var n,r,o,a,s=this.getGrid(),l=s.getMatrix();this.disabled||(r=l.results.get(e.leftKey,e.topKey))&&(a=this.createPanel(),this.currentCol=o=e.column,this.currentRecords=r.records||[],n=o.dimension.getId(),this.currentValue=r.getValue(n),a.down("form").getForm().setValues({leftKey:e.leftKey,topKey:e.topKey,dataIndex:o.dimension.dataIndex,field:o.dimension.header||o.text||o.dimension.dataIndex,value:r.getValue(n),type:this.defaultUpdater}),a.show(),this.setView(a),s.fireEvent("showrangeeditorpanel",a))},createPanel:function(){var e=this;return new Ext.window.Window({title:e.textWindowTitle,width:e.width,height:e.height,layout:"fit",modal:!0,closeAction:"hide",items:[{xtype:"form",padding:5,border:!1,defaults:{anchor:"100%"},items:[{fieldLabel:e.textFieldEdit,xtype:"displayfield",name:"field"},{fieldLabel:e.textFieldType,xtype:"combo",name:"type",queryMode:"local",valueField:"id",displayField:"text",editable:!1,store:e.updaters},{fieldLabel:e.textFieldValue,xtype:"numberfield",name:"value"},{xtype:"hidden",name:"leftKey"},{xtype:"hidden",name:"topKey"},{xtype:"hidden",name:"dataIndex"}]}],buttons:[{text:e.textButtonOk,handler:e.updateRecords,scope:e},{text:e.textButtonCancel,handler:e.closePanel,scope:e}],listeners:{close:"onClosePanel",scope:e}})},closePanel:function(){this.getView().close()},onClosePanel:function(){var e=this.getView();this.getGrid().fireEvent("hiderangeeditorpanel",e),this.setView(null)},updateRecords:function(){var e,t=this.getView().down("form").getValues(),i=Ext.bind(this.cleanUp,this);t.matrix=this.getGrid().getMatrix(),(e=Ext.Factory.pivotupdate(t)).on({beforeupdate:this.onBeforeUpdate,update:this.onUpdate,scope:this}),e.update().then(i,i)},cleanUp:function(){this.currentCol=this.currentRecords=this.currentValue=null},onBeforeUpdate:function(e){var t=this.getGrid();return!1!==Ext.callback(this.onBeforeRecordsUpdate,this.scope||"self.controller",[t,this.currentCol,this.currentRecords,e.getValue(),this.currentValue],0,t)&&(!1!==t.fireEvent("pivotbeforeupdate",e)&&void this.getView().getEl().mask())},onUpdate:function(e){var t=this.getGrid(),i=this.getView();Ext.callback(this.onAfterRecordsUpdate,this.scope||"self.controller",[t,this.currentCol,this.currentRecords,e.getValue(),this.currentValue],0,t),t.fireEvent("pivotupdate",e),Ext.destroy(e),i.getEl().unmask(),i.close()}}),Ext.define("Ext.pivot.d3.HeatMap",{extend:"Ext.d3.HeatMap",xtype:"pivotheatmap",requires:["Ext.pivot.matrix.Local","Ext.pivot.matrix.Remote"],padding:{top:20,right:30,bottom:20,left:80},config:{defaultFormatter:'number("0.00")',matrix:{type:"local",rowGrandTotalsPosition:"none",colGrandTotalsPosition:"none"},xAxis:{axis:{orient:"bottom"},scale:{type:"band"},step:100},yAxis:{axis:{orient:"left"},scale:{type:"band"},step:100},colorAxis:{scale:{type:"linear",range:["white","green"]}},tiles:{attr:{stroke:"green","stroke-width":1},labels:!0},legend:{docked:"bottom",padding:60,items:{count:10,slice:[1],size:{x:40,y:20}}}},destroy:function(){this.setMatrix(null),this.callParent()},applyMatrix:function(e){return e&&(e.isPivotMatrix||(e.type||(e.type="local"),e.cmp=this,e=Ext.Factory.pivotmatrix(e))),e},updateMatrix:function(e,t){Ext.destroy(t,this.matrixListeners),this.matrixListeners=null,e&&(this.matrixListeners=e.on({done:this.onMatrixDataReady,scope:this,destroyable:!0}))},updateStore:Ext.emptyFn,updateXAxis:Ext.emptyFn,updateYAxis:Ext.emptyFn,updateColorAxis:Ext.emptyFn,onMatrixDataReady:function(e){var t,i=this.getXAxis(),n=this.getYAxis(),r=this.getColorAxis(),o=e.topAxis.dimensions,a=e.leftAxis.dimensions,s=e.aggregate;o.getCount()&&i&&(t=o.getAt(0),i.setField(t.getDataIndex()),i.setTitle({text:t.getHeader()})),a.getCount()&&n&&(t=a.getAt(0),n.setField(t.getDataIndex()),n.setTitle({text:t.getHeader()})),s.getCount()&&r&&(t=s.getAt(0),r.setField(t.getId())),this.processData(),this.performLayout()},bindFormatter:function(t,i){var n=this;return function(e){return t(e,i||n.resolveListenerScope())}},getStoreData:function(){var e,t,i,n,r,o,a=this.getMatrix(),s=a.leftAxis.getTree(),l=s.length,d=a.topAxis.getTree(),u=d.length,c=[],h=this.getXAxis(),f=this.getYAxis(),g=this.getColorAxis(),p=h.getField(),m=f.getField(),x=g.getField();for(e=0;e<l;e++)for(i=s[e],t=0;t<u;t++)n=d[t],r=a.results.get(i.key,n.key),(o={data:{}}).data[p]=n.name,o.data[m]=i.name,o.data[x]=r?r.getValue(x):null,o.data.records=r?r.records.length:0,c.push(o);return c},onUpdateTiles:function(e){var i,n,t,r,o=this.getMatrix(),a=this.getColorAxis().getField();o.aggregate.getCount()&&(i=o.aggregate.getAt(0),n=i.getFormatter()||this.getDefaultFormatter(),t=i.getScope(),r=Ext.app.bind.Parser.fly(n),n=this.bindFormatter(r.compileFormat(),t),r.release()),this.callParent([e]),e.select("text").text(function(e){var t=e.data[a]||null;return null!==t&&i&&n&&(t=n(t)),null!==t?t:null})}}),Ext.define("Ext.pivot.d3.AbstractContainer",{extend:"Ext.panel.Panel",requires:["Ext.pivot.d3.HeatMap","Ext.pivot.plugin.Configurator"],isPivotComponent:!0,config:{matrix:{type:"local"},drawing:{xtype:"pivotheatmap"},configurator:null},destroy:function(){this.setMatrix(null),this.callParent()},addDrawing:function(){this.add(Ext.applyIf({matrix:this.getMatrix()},this.getDrawing()))},applyMatrix:function(e,t){return Ext.destroy(t),null==e?e:e&&e.isPivotMatrix?(e.cmp=this,e):(Ext.applyIf(e,{type:"local"}),e.cmp=this,Ext.Factory.pivotmatrix(e))},applyConfigurator:function(e){return e?this.addPlugin(e):null},updateConfigurator:function(e,t){t&&this.removePlugin(t)}}),Ext.define("Ext.pivot.d3.TreeMap",{extend:"Ext.d3.hierarchy.TreeMap",xtype:"pivottreemap",requires:["Ext.pivot.matrix.Local","Ext.pivot.matrix.Remote"],config:{autoExpand:!0,matrix:{type:"local",rowGrandTotalsPosition:"none",colGrandTotalsPosition:"none"},store:{type:"tree",fields:["name","value",{name:"records",type:"int"}],root:{expanded:!0,name:"Root",children:[]}},nodeValue:function(e){return e.data.value},colorAxis:{scale:{range:["#E45649","#ECECEC","#50A14F"]},processor:function(e,t,i,n){var r=i.data;return r.isLeaf()?t(r.get("depth")-5):"#ececec"}}},destroy:function(){this.setMatrix(null),this.callParent()},applyMatrix:function(e){return e&&(e.isPivotMatrix||(e.type||(e.type="local"),e.cmp=this,e=Ext.Factory.pivotmatrix(e))),e},updateMatrix:function(e,t){Ext.destroy(t,this.matrixListeners),this.matrixListeners=null,e&&(this.matrixListeners=e.on({done:this.onMatrixDataReady,scope:this,destroyable:!0}))},onMatrixDataReady:function(e){var t,i,n=this.getColorAxis(),r=e.aggregate,o=this.getStore().getRoot();r.getCount()&&n&&(t=r.getAt(0).getId(),n.setField(t)),i=this.getTreeStoreData(e.leftAxis.getTree(),t),o&&(o.removeAll(),o.appendChild(i)),this.performLayout()},getTreeStoreData:function(e,t){var i,n,r,o,a,s=[],l=this.getMatrix(),d=this.getAutoExpand();if(e&&l)for(n=e.length,i=0;i<n;i++)r=e[i],(a=l.results.get(r.key,l.grandTotalKey))&&(o={path:r.key,name:r.name,value:a?a.getValue(t):null,records:a&&a.records?a.records.length:0},r.children?(o.children=this.getTreeStoreData(r.children,t),o.expanded=d):o.leaf=!0,s.push(o));return s}}),Ext.define("Ext.pivot.d3.Container",{extend:"Ext.pivot.d3.AbstractContainer",xtype:"pivotd3container",config:{configurator:{id:"configurator",ptype:"pivotconfigurator"}},layout:"fit",beforeRender:function(){this.addDrawing(),this.callParent()}}),Ext.define(null,{override:"Ext.ux.gauge.needle.Abstract",compatibility:Ext.isIE10p,setTransform:function(e,t,i){var n=this.getNeedleGroup();this.callParent([e,t,i]),n.set({transform:getComputedStyle(n.dom).getPropertyValue("transform")})},updateStyle:function(e){var t;this.callParent([e]),Ext.isObject(e)&&"transform"in e&&(t=this.getNeedlePath()).set({transform:getComputedStyle(t.dom).getPropertyValue("transform")})}}),Ext.define("Ext.ux.ajax.Simlet",function(){var c=/([^?#]*)(#.*)?$/,h=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,f=/^[+-]?\d+$/,g=/^[+-]?\d+\.\d+$/;return{alias:"simlet.basic",isSimlet:!0,responseProps:["responseText","responseXML","status","statusText","responseHeaders"],status:200,statusText:"OK",constructor:function(e){Ext.apply(this,e)},doGet:function(e){return this.handleRequest(e)},doPost:function(e){return this.handleRequest(e)},doRedirect:function(e){return!1},doDelete:function(e){var t=e.xhr.options.records;this.removeFromData(e,t)},exec:function(e){var t=this["do"+Ext.String.capitalize(e.method.toLowerCase())];return t?t.call(this,this.getCtx(e.method,e.url,e)):{status:405,statusText:"Method Not Allowed"}},getCtx:function(e,t,i){return{method:e,params:this.parseQueryString(t),url:t,xhr:i}},handleRequest:function(t){var i,n=this,r={};return Ext.Array.forEach(n.responseProps,function(e){e in n&&(i=n[e],Ext.isFunction(i)&&(i=i.call(n,t)),r[e]=i)}),r},openRequest:function(e,t,i,n){var r,o=this.getCtx(e,t),a=this.doRedirect(o);return"destroy"===i.action&&(e="delete"),a?r=a:(r=new Ext.ux.ajax.SimXhr({mgr:this.manager,simlet:this,options:i})).open(e,t,n),r},parseQueryString:function(e){var t,i,n,r,o,a,s,l,d=c.exec(e),u={};if(d&&d[1])for(o=0,a=(r=d[1].split("&")).length;o<a;++o)(n=r[o].split("="))[0]&&(t=decodeURIComponent(n.shift()),s=1<n.length?n.join("="):n[0],l=void 0,Ext.isDefined(s)&&(s=decodeURIComponent(s),f.test(s)?s=parseInt(s,10):g.test(s)?s=parseFloat(s):(l=h.exec(s))&&(s=new Date(Date.UTC(+l[1],l[2]-1,+l[3],+l[4],+l[5],+l[6])))),i=s,t in u?Ext.isArray(u[t])?u[t].push(i):u[t]=[u[t],i]:u[t]=i);return u},redirect:function(e,t,i){switch(arguments.length){case 2:if("string"==typeof t)break;i=t;case 1:t=e,e="GET"}return i&&(t=Ext.urlAppend(t,Ext.Object.toQueryString(i))),this.manager.openRequest(e,t)},removeFromData:function(e,t){var i,n=this,r=n.getData(e),o=(e.xhr.options.proxy&&e.xhr.options.proxy.getModel()||{}).idProperty||"id";Ext.each(t,function(e){var t=e.get(o);for(i=r.length;0<i--;)if(r[i][o]===t){n.deleteRecord(i);break}})}}}()),Ext.define("Ext.ux.ajax.DataSimlet",function(){function r(o,a){var e=o.direction,s=e&&"DESC"===e.toUpperCase()?-1:1;return function(e,t){var i=e[o.property],n=t[o.property],r=i<n?-1:n<i?1:0;return r||!a?r*s:a(e,t)}}function d(e,t){var i,n;for(i=t,n=e&&e.length;n;)i=r(e[--n],i);return i}return{extend:"Ext.ux.ajax.Simlet",buildNodes:function(e,t){var i,n,r,o,a={data:[]},s=e.length;for(this.nodes[t]=a,n=0;n<s;++n)a.data.push(r=e[n]),o=r.text||r.title,r.id=t?t+"/"+o:o,i=r.children,(r.leaf=!i)||(delete r.children,this.buildNodes(i,r.id))},deleteRecord:function(e){this.data&&"function"!=typeof this.data&&Ext.Array.removeAt(this.data,e)},fixTree:function(e,t){var i,n=this,r=e.params.node;(i=n.nodes)||(n.nodes=i={},n.buildNodes(t,"")),(r=i[r])?(n.node&&(n.node.sortedData=n.sortedData,n.node.currentOrder=n.currentOrder),n.node=r,n.data=r.data,n.sortedData=r.sortedData,n.currentOrder=r.currentOrder):n.data=null},getData:function(e){var t,i,n,r,o,a=e.params,s=(a.filter||"")+(a.group||"")+"-"+(a.sort||"")+"-"+(a.dir||""),l=this.tree;return l&&this.fixTree(e,l),"function"==typeof(i=this.data)&&(t=!0,i=i.call(this,e)),i&&"--"!=s?t||s!==this.currentOrder?(e.filterSpec=a.filter&&Ext.decode(a.filter),e.groupSpec=a.group&&Ext.decode(a.group),n=a.sort,n=a.dir?[{direction:a.dir,property:n}]:a.sort?Ext.decode(a.sort):null,e.filterSpec&&((o=new Ext.util.FilterCollection).add(this.processFilters(e.filterSpec)),i=Ext.Array.filter(i,o.getFilterFn())),r=d(e.sortSpec=n),e.groupSpec&&(r=d([e.groupSpec],r)),i=Ext.isArray(i)?i.slice(0):i,r&&Ext.Array.sort(i,r),this.sortedData=i,this.currentOrder=s,i):this.sortedData:i||[]},processFilters:Ext.identityFn,getPage:function(e,t){var i=t,n=t.length,r=e.params.start||0,o=e.params.limit?Math.min(n,r+e.params.limit):n;return(r||o<n)&&(i=i.slice(r,o)),i},getGroupSummary:function(e,t,i){return t[0]},getSummary:function(e,t,i){var n,r,o,a=this,s=e.groupSpec.property,l={},d=[];function u(){n&&(d.push(a.getGroupSummary(s,n,e)),n=null)}return Ext.each(i,function(e){r=e[s],l[r]=!0}),Ext.each(t,function(e){return r=e[s],o!==r&&(u(),o=r),l[r]?(n?n.push(e):n=[e],!0):!d.length}),u(),d}}}()),Ext.define("Ext.ux.ajax.JsonSimlet",{extend:"Ext.ux.ajax.DataSimlet",alias:"simlet.json",doGet:function(e){var t=this.getData(e),i=this.getPage(e,t),n=e.xhr.options.proxy&&e.xhr.options.proxy.getReader(),r=n&&n.getRootProperty(),o=this.callParent(arguments),a={};return r&&Ext.isArray(i)?(a[r]=i,a[n.getTotalProperty()]=t.length):a=i,e.groupSpec&&(a.summaryData=this.getSummary(e,t,i)),o.responseText=Ext.encode(a),o},doPost:function(e){return this.doGet(e)}}),Ext.define("Ext.ux.ajax.PivotSimlet",{extend:"Ext.ux.ajax.JsonSimlet",alias:"simlet.pivot",lastPost:null,lastResponse:null,keysSeparator:"",grandTotalKey:"",doPost:function(e){var t=this.callParent(arguments);return this.lastResponse=this.processData(this.getData(e),Ext.decode(e.xhr.body)),t.responseText=Ext.encode(this.lastResponse),t},processData:function(e,t){var i,n,r,o,a,s,l,d=this,u=e.length,c={success:!0,leftAxis:[],topAxis:[],results:[]},h=new Ext.util.MixedCollection,f=new Ext.util.MixedCollection,g=new Ext.util.MixedCollection;for(d.lastPost=t,d.keysSeparator=t.keysSeparator,d.grandTotalKey=t.grandTotalKey,i=0;i<u;i++){for(o=d.extractValues(e[i],t.leftAxis,h),a=d.extractValues(e[i],t.topAxis,f),d.addResult(e[i],d.grandTotalKey,d.grandTotalKey,g),n=0;n<o.length;n++)for(d.addResult(e[i],o[n],d.grandTotalKey,g),r=0;r<a.length;r++)d.addResult(e[i],o[n],a[r],g);for(n=0;n<a.length;n++)d.addResult(e[i],d.grandTotalKey,a[n],g)}for(c.leftAxis=h.getRange(),c.topAxis=f.getRange(),u=g.getCount(),i=0;i<u;i++){for((s=g.getAt(i)).values={},n=0;n<t.aggregate.length;n++)l=t.aggregate[n],s.values[l.id]=d[l.aggregator](s.records,l.dataIndex,s.leftKey,s.topKey);delete s.records,c.results.push(s)}return h.clear(),f.clear(),g.clear(),c},getKey:function(e){return this.keysMap=this.keysMap||{},Ext.isDefined(this.keysMap[e])||(this.keysMap[e]=Ext.id()),this.keysMap[e]},extractValues:function(e,t,i){var n,r,o,a=t.length,s=[];for(r="",n=0;n<a;n++)o=t[n],r+=(0<n?this.keysSeparator:"")+this.getKey(e[o.dataIndex]),i.getByKey(r)||i.add(r,{key:r,value:e[o.dataIndex],dimensionId:o.id}),s.push(r);return s},addResult:function(e,t,i,n){var r=n.getByKey(t+"/"+i);(r=r||n.add(t+"/"+i,{leftKey:t,topKey:i,records:[]})).records.push(e)},sum:function(e,t,i,n){var r,o=e.length,a=0;for(r=0;r<o;r++)a+=Ext.Number.from(e[r][t],0);return a},avg:function(e,t,i,n){var r,o=e.length,a=0;for(r=0;r<o;r++)a+=Ext.Number.from(e[r][t],0);return 0<o?a/o:0},min:function(e,t,i,n){var r,o=[],a=e.length;for(r=0;r<a;r++)o.push(e[r][t]);return Ext.Array.min(o)},max:function(e,t,i,n){var r,o=[],a=e.length;for(r=0;r<a;r++)o.push(e[r][t]);return Ext.Array.max(o)},count:function(e,t,i,n){return e.length},variance:function(e,t,i,n){var r,o=Ext.pivot.Aggregators,a=e.length,s=o.avg.apply(o,arguments),l=0;if(0<s)for(r=0;r<a;r++)l+=Math.pow(Ext.Number.from(e[r][t],0)-s,2);return 0<l&&1<a?l/(a-1):0},varianceP:function(e,t,i,n){var r,o=Ext.pivot.Aggregators,a=e.length,s=o.avg.apply(o,arguments),l=0;if(0<s)for(r=0;r<a;r++)l+=Math.pow(Ext.Number.from(e[r][t],0)-s,2);return 0<l&&0<a?l/a:0},stdDev:function(e,t,i,n){var r=Ext.pivot.Aggregators,o=r.variance.apply(r,arguments);return 0<o?Math.sqrt(o):0},stdDevP:function(e,t,i,n){var r=Ext.pivot.Aggregators,o=r.varianceP.apply(r,arguments);return 0<o?Math.sqrt(o):0}}),Ext.define("Ext.ux.ajax.SimXhr",{readyState:0,mgr:null,simlet:null,constructor:function(e){Ext.apply(this,e),this.requestHeaders={}},abort:function(){this.timer&&(Ext.undefer(this.timer),this.timer=null),this.aborted=!0},getAllResponseHeaders:function(){var i=[];return Ext.isObject(this.responseHeaders)&&Ext.Object.each(this.responseHeaders,function(e,t){i.push(e+": "+t)}),i.join("\r\n")},getResponseHeader:function(e){var t=this.responseHeaders;return t&&t[e]||null},open:function(e,t,i,n,r){this.method=e,this.url=t,this.async=!1!==i,this.user=n,this.password=r,this.setReadyState(1)},overrideMimeType:function(e){this.mimeType=e},schedule:function(){var e=this,t=e.simlet.delay||e.mgr.delay;t?e.timer=Ext.defer(function(){e.onTick()},t):e.onTick()},send:function(e){this.body=e,this.async?this.schedule():this.onComplete()},setReadyState:function(e){this.readyState!==e&&(this.readyState=e,this.onreadystatechange())},setRequestHeader:function(e,t){this.requestHeaders[e]=t},onreadystatechange:Ext.emptyFn,onComplete:function(){var me=this,callback,text;me.readyState=4,Ext.apply(me,me.simlet.exec(me)),callback=me.jsonpCallback,callback&&(text=callback+"("+me.responseText+")",eval(text))},onTick:function(){this.timer=null,this.onComplete(),this.onreadystatechange&&this.onreadystatechange()}}),Ext.define("Ext.ux.ajax.SimManager",{singleton:!0,requires:["Ext.data.Connection","Ext.ux.ajax.SimXhr","Ext.ux.ajax.Simlet","Ext.ux.ajax.JsonSimlet"],defaultType:"basic",delay:150,ready:!1,constructor:function(){this.simlets=[]},getSimlet:function(e){var t,i,n,r=e.indexOf("?"),o=this.simlets,a=o.length;for(r<0&&(r=e.indexOf("#")),0<r&&(e=e.substring(0,r)),t=0;t<a;++t)if((n=(i=o[t]).url)instanceof RegExp?n.test(e):n===e)return i;return this.defaultSimlet},getXhr:function(e,t,i,n){var r=this.getSimlet(t);return r?r.openRequest(e,t,i,n):null},init:function(e){var o=this;return Ext.apply(o,e),o.ready||(o.ready=!0,"defaultSimlet"in o||(o.defaultSimlet=new Ext.ux.ajax.Simlet({status:404,statusText:"Not Found"})),o._openRequest=Ext.data.Connection.prototype.openRequest,Ext.data.request.Ajax.override({openRequest:function(e,t,i){var n=!e.nosim&&o.getXhr(t.method,t.url,e,i);return n=n||this.callParent(arguments)}}),Ext.data.JsonP&&Ext.data.JsonP.self.override({createScript:function(e,t,i){var n=Ext.urlAppend(e,Ext.Object.toQueryString(t)),r=!i.nosim&&o.getXhr("GET",n,i,!0);return r=r||this.callParent(arguments)},loadScript:function(e){var t=e.script;t.simlet?(t.jsonpCallback=e.params[e.callbackKey],t.send(null),e.script=document.createElement("script")):this.callParent(arguments)}})),o},openRequest:function(e,t,i){var n={method:e,url:t};return this._openRequest.call(Ext.data.Connection.prototype,{},n,i)},register:function(e){var i=this;function n(e){var t=e;t.isSimlet||(t=Ext.create("simlet."+(t.type||t.stype||i.defaultType),e)),i.simlets.push(t),t.manager=i}return i.init(),Ext.isArray(e)?Ext.each(e,n):e.isSimlet||e.url?n(e):Ext.Object.each(e,function(e,t){t.url=e,n(t)}),i}}),Ext.define("Ext.ux.ajax.XmlSimlet",{extend:"Ext.ux.ajax.DataSimlet",alias:"simlet.xml",xmlTpl:["<{root}>\n",'<tpl for="data">',"    <{parent.record}>\n",'<tpl for="parent.fields">',"        <{name}>{[parent[values.name]]}</{name}>\n","</tpl>","    </{parent.record}>\n","</tpl>","</{root}>"],doGet:function(e){var t,i,n=this.getData(e),r=this.getPage(e,n),o=e.xhr.options.operation.getProxy(),a=o&&o.getReader(),s=a&&a.getModel(),l=this.callParent(arguments),d={data:r,reader:a,fields:s&&s.fields,root:a&&a.getRootProperty(),record:a&&a.record};return e.groupSpec&&(d.summaryData=this.getSummary(e,n,r)),t=this.xmlTpl?Ext.XTemplate.getTpl(this,"xmlTpl").apply(d):n,"undefined"!=typeof DOMParser?i=(new DOMParser).parseFromString(t,"text/xml"):((i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(t)),l.responseText=t,l.responseXML=i,l},fixTree:function(){var e=[];this.callParent(arguments),this.buildTreeXml(this.data,e),this.data=e.join("")},buildTreeXml:function(e,i){var t=this.rootProperty,n=this.recordProperty;i.push("<",t,">"),Ext.Array.forEach(e,function(e){var t;for(t in i.push("<",n,">"),e)"children"===t?this.buildTreeXml(e.children,i):i.push("<",t,">",e[t],"</",t,">");i.push("</",n,">")}),i.push("</",t,">")}}),Ext.define("Ext.ux.event.Driver",{extend:"Ext.util.Observable",active:null,specialKeysByName:{PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40},specialKeysByCode:{},getTextSelection:function(e){var t,i,n,r,o=e.ownerDocument;return"number"==typeof e.selectionStart?(n=e.selectionStart,r=e.selectionEnd):o.selection&&(t=o.selection.createRange(),(i=e.createTextRange()).setEndPoint("EndToStart",t),r=(n=i.text.length)+t.text.length),[n,r]},getTime:function(){return(new Date).getTime()},getTimestamp:function(){return this.getTime()-this.startTime},onStart:function(){},onStop:function(){},start:function(){this.active||(this.active=new Date,this.startTime=this.getTime(),this.onStart(),this.fireEvent("start",this))},stop:function(){this.active&&(this.active=null,this.onStop(),this.fireEvent("stop",this))}},function(){var i=this.prototype;Ext.Object.each(i.specialKeysByName,function(e,t){i.specialKeysByCode[t]=e})}),Ext.define("Ext.ux.event.Maker",{eventQueue:[],startAfter:500,timerIncrement:500,currentTiming:0,constructor:function(a){var s=this;return s.currentTiming=s.startAfter,Ext.isArray(a)||(a=[a]),Ext.Array.each(a,function(o){o.el=o.el||"el",Ext.Array.each(Ext.ComponentQuery.query(o.cmpQuery),function(e){var t,i,n,r={};n=o.domQuery?e.el.down(o.domQuery):e[o.el],r.target="#"+n.dom.id,r.type=o.type,r.button=a.button||0,t=n.getX()+n.getWidth()/2,i=n.getY()+n.getHeight()/2,r.xy=[t,i],r.ts=s.currentTiming,s.currentTiming+=s.timerIncrement,s.eventQueue.push(r)}),o.screenshot&&(s.eventQueue[s.eventQueue.length-1].screenshot=!0)}),s.eventQueue}}),Ext.define("Ext.ux.event.Player",function(o){var a,s={},l={},d={},u={},t={resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1};Ext.each(["click","dblclick","mouseover","mouseout","mousedown","mouseup","mousemove"],function(e){t[e]=s[e]=l[e]={bubbles:!0,cancelable:"mousemove"!==e,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0}}),Ext.each(["keydown","keyup","keypress"],function(e){t[e]=s[e]=d[e]={bubbles:!0,cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0}}),Ext.each(["blur","change","focus","resize","scroll","select"],function(e){s[e]=u[e]={bubbles:e in t,cancelable:!1,detail:1}});var e={8:function(e,t,i){t<i?e.value=e.value.substring(0,t)+e.value.substring(i):0<t&&(e.value=e.value.substring(0,--t)+e.value.substring(i)),this.setTextSelection(e,t,t)},46:function(e,t,i){t<i?e.value=e.value.substring(0,t)+e.value.substring(i):t<e.value.length-1&&(e.value=e.value.substring(0,t)+e.value.substring(t+1)),this.setTextSelection(e,t,t)}};return{extend:"Ext.ux.event.Driver",keyFrameEvents:{click:!0},pauseForAnimations:!0,speed:1,stallTime:0,_inputSpecialKeys:{INPUT:e,TEXTAREA:Ext.apply({},e)},tagPathRegEx:/(\w+)(?:\[(\d+)\])?/,xpathRe:/^[#~](?:[a-z][-a-z0-9_]*)(?:\/[a-z]+)*$/i,constructor:function(e){var t=this;t.callParent(arguments),t.timerFn=function(){t.onTick()},t.attachTo=t.attachTo||window,t.counter=0,a=t.attachTo.document},getElementFromXPath:function(e){var t,i,n,r,o,a,s=e.split("/"),l=this.tagPathRegEx,d=this.attachTo.document;for(d="~"===s[0]?d.body:d.getElementById(s[0].substring(1)),t=1,i=s.length;d&&t<i;++t){for(r=(n=l.exec(s[t]))[2]?parseInt(n[2],10):1,o=n[1].toUpperCase(),a=d.firstChild;a;a=a.nextSibling)if(a.tagName===o){if(1===r)break;--r}d=a}return d},locateElement:function(e){var t,i,n,r,o;return this.xpathRe.test(e)?r=this.getElementFromXPath(e):(o=e.split("=>"),i=Ext.String.trim(o[0]),n=Ext.String.trim(o[1]),r=i?(t=Ext.first(i))&&t.el:Ext.getBody(),n&&r&&(r=(r=Ext.query(n,!0,r))&&r[0])),r},offsetToRangeCharacterMove:function(e,t){return t-(e.value.slice(0,t).split("\r\n").length-1)},setTextSelection:function(e,t,i){var n,r;t<0&&(t+=e.value.length),null==i&&(i=t),i<0&&(i+=e.value.length),"number"==typeof e.selectionStart?(e.selectionStart=t,e.selectionEnd=i):(n=e.createTextRange(),r=this.offsetToRangeCharacterMove(e,t),n.collapse(!0),t===i?n.move("character",r):(n.moveEnd("character",this.offsetToRangeCharacterMove(e,i)),n.moveStart("character",r)),n.select())},getTimeIndex:function(){return(this.getTimestamp()-this.stallTime)*this.speed},makeToken:function(e,t){var i,n=this;e[t]=!0,e.defer=function(){e[t]=!1,i=n.getTime()},e.finish=function(){e[t]=!0,n.stallTime+=n.getTime()-i,n.schedule()}},nextEvent:function(e){var t=++this.queueIndex;this.keyFrameEvents[e.type]&&Ext.Array.insert(this.eventQueue,t,[{keyframe:!0,ts:e.ts}])},peekEvent:function(){var e=this.eventQueue[this.queueIndex]||null;return e&&void 0===e.seq&&(e.seq=this.counter++),e},replaceEvent:function(e,t){for(var i,n=0,r=t.length;n<r;++n)n&&(delete(i=t[n-1]).afterplay,delete i.screenshot,delete t[n].beforeplay);Ext.Array.replace(this.eventQueue,null==e?this.queueIndex:e,1,t)},processEvents:function(){for(var e,t=this,i=t.pauseForAnimations&&t.attachTo.Ext.fx.Manager.items;null!==(e=t.peekEvent());){if(i&&i.getCount())return!0;if(e.keyframe){if(!t.processKeyFrame(e))return!1;t.nextEvent(e)}else{if(!(e.ts<=t.getTimeIndex()&&!1!==t.fireEvent("beforeplay",t,e)&&t.playEvent(e)))return!0;t.nextEvent(e)}}return t.stop(),!1},processKeyFrame:function(e){return e.defer||(this.makeToken(e,"done"),this.fireEvent("keyframe",this,e)),e.done},injectEvent:function(e,t){var i,n=t.type,r=Ext.apply({},t,s[n]);return"type"===n?(i=this._inputSpecialKeys[e.tagName])?this.injectTypeInputEvent(e,t,i):this.injectTypeEvent(e,t):"focus"===n&&e.focus?(e.focus(),!0):"blur"===n&&e.blur?(e.blur(),!0):"scroll"===n?(e.scrollLeft=t.pos[0],e.scrollTop=t.pos[1],!0):"mduclick"===n?this.injectEvent(e,Ext.applyIf({type:"mousedown"},t))&&this.injectEvent(e,Ext.applyIf({type:"mouseup"},t))&&this.injectEvent(e,Ext.applyIf({type:"click"},t)):l[n]?o.injectMouseEvent(e,r,this.attachTo):d[n]?o.injectKeyEvent(e,r,this.attachTo):!!u[n]&&o.injectUIEvent(e,n,r.bubbles,r.cancelable,r.view||this.attachTo,r.detail)},injectTypeEvent:function(e,t){var i,n,r,o,a,s=t.text,l=[];if(s)for(delete t.text,a=s.toUpperCase(),r=0,o=s.length;r<o;++r)i=s.charCodeAt(r),n=a.charCodeAt(r),l.push(Ext.applyIf({type:"keydown",charCode:n,keyCode:n},t),Ext.applyIf({type:"keypress",charCode:i,keyCode:i},t),Ext.applyIf({type:"keyup",charCode:n,keyCode:n},t));else l.push(Ext.applyIf({type:"keydown",charCode:t.keyCode},t),Ext.applyIf({type:"keyup",charCode:t.keyCode},t));for(r=0,o=l.length;r<o;++r)this.injectEvent(e,l[r]);return!0},injectTypeInputEvent:function(e,t,i){var n,r,o=t.text;if(i){if(n=this.getTextSelection(e),!o)return(i=i[t.keyCode])?(i.call(this,e,n[0],n[1]),!0):("caret"in t?this.setTextSelection(e,t.caret,t.caret):t.selection&&this.setTextSelection(e,t.selection[0],t.selection[1]),this.injectTypeEvent(e,t));r=n[0],e.value=e.value.substring(0,r)+o+e.value.substring(n[1]),r+=o.length,this.setTextSelection(e,r,r)}return!0},playEvent:function(e){var t,i=this.locateElement(e.target),n=this.getTimeIndex(),r=e.timeout;return void 0===e.startedAt&&(e.startedAt=n),i?!!this.playEventHook(e,"beforeplay")&&(e.injected||(e.injected=!0,t=this.translateEvent(e,i),this.injectEvent(i,t)),this.playEventHook(e,"afterplay")):(null!==r&&(r=r||3e4,n-e.startedAt>r&&this.playEventHook(e,"timeout","onEventTimeout")),!1)},playEventHook:function(e,t,i){var n=t+".done",r=t+".fired",o=i||e[t];return!(o&&!e[n])||(e[r]||(e[r]=!0,this.makeToken(e,n),this.eventScope&&Ext.isString(o)&&(o=this.eventScope[o]),o&&o.call(this.eventScope||this,e)),!1)},schedule:function(){this.timer||(this.timer=Ext.defer(this.timerFn,10))},_translateAcross:["type","button","charCode","keyCode","caret","pos","text","selection"],translateEvent:function(e,t){for(var i,n,r={},o=e.modKeys||"",a=this._translateAcross,s=a.length;s--;)(i=a[s])in e&&(r[i]=e[i]);return r.altKey=0<o.indexOf("A"),r.ctrlKey=0<o.indexOf("C"),r.metaKey=0<o.indexOf("M"),r.shiftKey=0<o.indexOf("S"),t&&"x"in e?((n=Ext.fly(t).getXY())[0]+=e.x,n[1]+=e.y):"x"in e?n=[e.x,e.y]:"px"in e&&(n=[e.px,e.py]),n&&(r.clientX=r.screenX=n[0],r.clientY=r.screenY=n[1]),e.key&&(r.keyCode=this.specialKeysByName[e.key]),"wheel"===e.type&&("onwheel"in this.attachTo.document?(r.wheelX=e.dx,r.wheelY=e.dy):(r.type="mousewheel",r.wheelDeltaX=-40*e.dx,r.wheelDeltaY=r.wheelDelta=-40*e.dy)),r},onStart:function(){this.queueIndex=0,this.schedule()},onStop:function(){this.timer&&(Ext.undefer(this.timer),this.timer=null)},onTick:function(){this.timer=null,this.processEvents()&&this.schedule()},statics:{ieButtonCodeMap:{0:1,1:4,2:2},injectKeyEvent:function(e,t,i){var n=t.type,r=null;if("textevent"===n&&(n="keypress"),i=i||window,a.createEvent){try{(r=a.createEvent("KeyEvents")).initKeyEvent(n,t.bubbles,t.cancelable,i,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.keyCode,t.charCode)}catch(e){try{r=a.createEvent("Events")}catch(e){r=a.createEvent("UIEvents")}finally{r.initEvent(n,t.bubbles,t.cancelable),r.view=i,r.altKey=t.altKey,r.ctrlKey=t.ctrlKey,r.shiftKey=t.shiftKey,r.metaKey=t.metaKey,r.keyCode=t.keyCode,r.charCode=t.charCode}}e.dispatchEvent(r)}else{if(!a.createEventObject)return!1;(r=a.createEventObject()).bubbles=t.bubbles,r.cancelable=t.cancelable,r.view=i,r.ctrlKey=t.ctrlKey,r.altKey=t.altKey,r.shiftKey=t.shiftKey,r.metaKey=t.metaKey,r.keyCode=0<t.charCode?t.charCode:t.keyCode,e.fireEvent("on"+n,r)}return!0},injectMouseEvent:function(e,t,i){var n=t.type,r=null;if(i=i||window,a.createEvent)(r=a.createEvent("MouseEvents")).initMouseEvent?r.initMouseEvent(n,t.bubbles,t.cancelable,i,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget):((r=a.createEvent("UIEvents")).initEvent(n,t.bubbles,t.cancelable),r.view=i,r.detail=t.detail,r.screenX=t.screenX,r.screenY=t.screenY,r.clientX=t.clientX,r.clientY=t.clientY,r.ctrlKey=t.ctrlKey,r.altKey=t.altKey,r.metaKey=t.metaKey,r.shiftKey=t.shiftKey,r.button=t.button,r.relatedTarget=t.relatedTarget),t.relatedTarget&&!r.relatedTarget&&("mouseout"===n?r.toElement=t.relatedTarget:"mouseover"===n&&(r.fromElement=t.relatedTarget)),e.dispatchEvent(r);else{if(!a.createEventObject)return!1;(r=a.createEventObject()).bubbles=t.bubbles,r.cancelable=t.cancelable,r.view=i,r.detail=t.detail,r.screenX=t.screenX,r.screenY=t.screenY,r.clientX=t.clientX,r.clientY=t.clientY,r.ctrlKey=t.ctrlKey,r.altKey=t.altKey,r.metaKey=t.metaKey,r.shiftKey=t.shiftKey,r.button=o.ieButtonCodeMap[t.button]||0,r.relatedTarget=t.relatedTarget,e.fireEvent("on"+n,r)}return!0},injectUIEvent:function(e,t,i){var n=null;if(i=i||window,a.createEvent)(n=a.createEvent("UIEvents")).initUIEvent(t.type,t.bubbles,t.cancelable,i,t.detail),e.dispatchEvent(n);else{if(!a.createEventObject)return!1;(n=a.createEventObject()).bubbles=t.bubbles,n.cancelable=t.cancelable,n.view=i,n.detail=t.detail,e.fireEvent("on"+t.type,n)}return!0}}}}),Ext.define("Ext.ux.event.Recorder",function(r){var e,t;function i(){var e,t=arguments.length,i={kind:"other"};for(e=0;e<t;++e)Ext.apply(i,arguments[e]);return i.alt&&!i.event&&(i.event=i.alt),i}function n(e){return i({kind:"keyboard",modKeys:!0,key:!0},e)}function o(e){return i({kind:"mouse",button:!0,modKeys:!0,xy:!0},e)}for(t in e={keydown:n(),keypress:n(),keyup:n(),dragmove:o({alt:"mousemove",pageCoords:!0,whileDrag:!0}),mousemove:o({pageCoords:!0}),mouseover:o(),mouseout:o(),click:o(),wheel:o({wheel:!0}),mousedown:o({press:!0}),mouseup:o({release:!0}),scroll:i({listen:!1}),focus:i(),blur:i()})e[t].event||(e[t].event=t);return e.wheel.event=null,{extend:"Ext.ux.event.Driver",eventsToRecord:e,ignoreIdRegEx:/ext-gen(?:\d+)/,inputRe:/^(input|textarea)$/i,constructor:function(e){var t=e&&e.eventsToRecord;t&&(this.eventsToRecord=Ext.apply(Ext.apply({},this.eventsToRecord),t),delete e.eventsToRecord),this.callParent(arguments),this.clear(),this.modKeys=[],this.attachTo=this.attachTo||window},clear:function(){this.eventsRecorded=[]},listenToEvent:function(e){var t=this,i=t.attachTo.document.body,n=function(){return t.onEvent.apply(t,arguments)},r={};return i.attachEvent&&i.ownerDocument.documentMode<10?(e="on"+e,i.attachEvent(e,n),r.destroy=function(){n&&(i.detachEvent(e,n),n=null)}):(i.addEventListener(e,n,!0),r.destroy=function(){n&&(i.removeEventListener(e,n,!0),n=null)}),r},coalesce:function(e,t){var i=this.eventsRecorded,n=i.length,r=n&&i[n-1],o=1<n&&i[n-2],a=2<n&&i[n-3];if(!r)return!1;if("mousemove"===e.type){if("mousemove"===r.type&&e.ts-r.ts<200)return e.ts=r.ts,i[n-1]=e,!0}else if("click"===e.type){if(o&&"mouseup"===r.type&&"mousedown"===o.type&&e.button===r.button&&e.button===o.button&&e.target===r.target&&e.target===o.target&&this.samePt(e,r)&&this.samePt(e,o))return i.pop(),o.type="mduclick",!0}else if("keyup"===e.type)if(o&&"keypress"===r.type&&"keydown"===o.type){if(e.target===r.target&&e.target===o.target)return i.pop(),o.type="type",o.text=String.fromCharCode(r.charCode),delete o.charCode,delete o.keyCode,a&&"type"===a.type&&a.text&&a.target===o.target&&(a.text+=o.text,i.pop()),!0}else{if(this.completeKeyStroke(r,e))return r.type="type",this.completeSpecialKeyStroke(t.target,r,e),!0;if("scroll"===r.type&&this.completeKeyStroke(o,e))return o.type="type",this.completeSpecialKeyStroke(t.target,o,e),i.pop(),i.pop(),i.push(r,o),!0}return!1},completeKeyStroke:function(e,t){return!(!e||"keydown"!==e.type||e.keyCode!==t.keyCode)&&(delete e.charCode,!0)},completeSpecialKeyStroke:function(e,t,i){var n=this.specialKeysByCode[i.keyCode];return!(!n||!this.inputRe.test(e.tagName))&&(delete t.keyCode,t.key=n,t.selection=this.getTextSelection(e),t.selection[0]===t.selection[1]&&(t.caret=t.selection[0],delete t.selection),!0)},getElementXPath:function(e){var t,i,n,r,o=!1,a=[];for(n=e;n;n=n.parentNode){if(n===this.attachTo.document.body){a.unshift("~"),o=!0;break}if(n.id&&!this.ignoreIdRegEx.test(n.id)){a.unshift("#"+n.id),o=!0;break}for(t=1,i=n;i=i.previousSibling;)i.tagName===n.tagName&&++t;r=n.tagName.toLowerCase(),t<2?a.unshift(r):a.unshift(r+"["+t+"]")}return o?a.join("/"):null},getRecordedEvents:function(){return this.eventsRecorded},onEvent:function(e){var t,i,n,r,o=this,a=new Ext.event.Event(e),s=o.eventsToRecord[a.type],l={type:a.type,ts:o.getTimestamp(),target:o.getElementXPath(a.target)};s&&l.target&&(t=(t=a.target.ownerDocument).defaultView||t.parentWindow)===o.attachTo&&(o.eventsToRecord.scroll&&o.syncScroll(a.target),s.xy&&(r=a.getXY(),s.pageCoords||!l.target?(l.px=r[0],l.py=r[1]):(n=Ext.fly(a.getTarget()).getXY(),r[0]-=n[0],r[1]-=n[1],l.x=r[0],l.y=r[1])),s.button&&(l.button="buttons"in e?e.buttons:e.button,!l.button&&s.whileDrag)||(s.wheel&&((l.type="wheel")===s.event?(l.dx=e.deltaX,l.dy=e.deltaY):"number"==typeof e.wheelDeltaX?(l.dx=-.025*e.wheelDeltaX,l.dy=-.025*e.wheelDeltaY):e.wheelDelta?l.dy=-.025*e.wheelDelta:e.detail&&(l.dy=e.detail)),s.modKeys&&(o.modKeys[0]=a.altKey?"A":"",o.modKeys[1]=a.ctrlKey?"C":"",o.modKeys[2]=a.metaKey?"M":"",o.modKeys[3]=a.shiftKey?"S":"",(i=o.modKeys.join(""))&&(l.modKeys=i)),s.key&&(l.charCode=a.getCharCode(),l.keyCode=a.getKey()),o.coalesce(l,a)?o.fireEvent("coalesce",o,l):(o.eventsRecorded.push(l),o.fireEvent("add",o,l))))},onStart:function(){var i=this,e=i.attachTo.Ext.dd.DragDropManager,t=i.attachTo.Ext.EventObjectImpl.prototype,n=[];r.prototype.eventsToRecord.wheel.event="onwheel"in i.attachTo.document?"wheel":"mousewheel",i.listeners=[],Ext.Object.each(i.eventsToRecord,function(e,t){t&&!1!==t.listen&&(t.event||(t.event=e),t.alt&&t.alt!==e?i.eventsToRecord[t.alt]||n.push(t):i.listeners.push(i.listenToEvent(t.event)))}),Ext.each(n,function(e){i.eventsToRecord[e.alt]=e,i.listeners.push(i.listenToEvent(e.alt))}),i.ddmStopEvent=e.stopEvent,e.stopEvent=Ext.Function.createSequence(e.stopEvent,function(e){i.onEvent(e)}),i.evStopEvent=t.stopEvent,t.stopEvent=Ext.Function.createSequence(t.stopEvent,function(){i.onEvent(this)})},onStop:function(){Ext.destroy(this.listeners),this.listeners=null,this.attachTo.Ext.dd.DragDropManager.stopEvent=this.ddmStopEvent,this.attachTo.Ext.EventObjectImpl.prototype.stopEvent=this.evStopEvent},samePt:function(e,t){return e.x===t.x&&e.y===t.y},syncScroll:function(e){var t,i,n,r,o,a,s,l=this.getTimestamp();for(s=e;s&&(t=s.$lastScrollLeft,i=s.$lastScrollTop,n=s.scrollLeft,r=s.scrollTop,o=!1,t!==n&&(n&&(o=!0),s.$lastScrollLeft=n),i!==r&&(r&&(o=!0),s.$lastScrollTop=r),o&&(this.eventsRecorded.push(a={type:"scroll",target:this.getElementXPath(s),ts:l,pos:[n,r]}),this.fireEvent("add",this,a)),"BODY"!==s.tagName);s=s.parentNode);}}}),Ext.define("Ext.ux.gauge.needle.Abstract",{mixins:["Ext.mixin.Factoryable"],alias:"gauge.needle.abstract",isNeedle:!0,config:{path:null,innerRadius:25,outerRadius:"100% - 20",style:null,radius:0,gauge:null},constructor:function(e){this.initConfig(e)},applyInnerRadius:function(e){return this.getGauge().getRadiusFn(e)},applyOuterRadius:function(e){return this.getGauge().getRadiusFn(e)},updateRadius:function(){this.regeneratePath()},setTransform:function(e,t,i){this.getNeedleGroup().setStyle("transform","translate("+e+"px,"+t+"px) rotate("+i+"deg)")},applyPath:function(e){return Ext.isFunction(e)?e:null},updatePath:function(e){this.regeneratePath(e)},regeneratePath:function(e){e=e||this.getPath();var t=this.getRadius(),i=this.getInnerRadius()(t),n=this.getOuterRadius()(t),r=i<n?e(i,n):"";this.getNeedlePath().dom.setAttribute("d",r)},getNeedleGroup:function(){var e=this.getGauge(),t=this.needleGroup;return t||(t=this.needleGroup=Ext.get(document.createElementNS(e.svgNS,"g")),e.getSvg().appendChild(t)),t},getNeedlePath:function(){var e=this.pathElement;return e||((e=this.pathElement=Ext.get(document.createElementNS(this.getGauge().svgNS,"path"))).dom.setAttribute("class",Ext.baseCSSPrefix+"gauge-needle"),this.getNeedleGroup().appendChild(e)),e},updateStyle:function(e){var t=this.getNeedlePath();Ext.isObject(e)?t.setStyle(e):t.dom.removeAttribute("style")},destroy:function(){this.pathElement=Ext.destroy(this.pathElement),this.needleGroup=Ext.destroy(this.needleGroup),this.setGauge(null)}}),Ext.define("Ext.ux.gauge.Gauge",{alternateClassName:"Ext.ux.Gauge",extend:"Ext.Gadget",xtype:"gauge",requires:["Ext.ux.gauge.needle.Abstract","Ext.util.Region"],config:{padding:10,trackStart:135,trackLength:270,angleOffset:0,minValue:0,maxValue:100,value:50,needle:null,needleDefaults:{cached:!0,$value:{type:"diamond"}},clockwise:!0,textTpl:['<tpl>{value:number("0.00")}%</tpl>'],textAlign:"c-c",textOffset:{dx:0,dy:0},trackStyle:{outerRadius:"100%",innerRadius:"100% - 20",round:!1},valueStyle:{outerRadius:"100% - 2",innerRadius:"100% - 18",round:!1},animation:!0},baseCls:Ext.baseCSSPrefix+"gauge",template:[{reference:"bodyElement",children:[{reference:"textElement",cls:Ext.baseCSSPrefix+"gauge-text"}]}],defaultBindProperty:"value",pathAttributes:{fill:!0,fillOpacity:!0,stroke:!0,strokeOpacity:!0,strokeWidth:!0},easings:{linear:Ext.identityFn,in:function(e){return e*e*e},out:function(e){return--e*e*e+1},inOut:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}},resizeDelay:0,resizeTimerId:0,size:null,svgNS:"http://www.w3.org/2000/svg",svg:null,defs:null,trackArc:null,valueArc:null,trackGradient:null,valueGradient:null,fx:null,fxValue:0,fxAngleOffset:0,constructor:function(e){this.fitSectorInRectCache={startAngle:null,lengthAngle:null,minX:null,maxX:null,minY:null,maxY:null},this.interpolator=this.createInterpolator(),this.callParent([e]),this.el.on("resize","onElementResize",this)},doDestroy:function(){var e=this;Ext.undefer(e.resizeTimerId),e.el.un("resize","onElementResize",e),e.stopAnimation(),e.setNeedle(null),e.trackGradient=Ext.destroy(e.trackGradient),e.valueGradient=Ext.destroy(e.valueGradient),e.defs=Ext.destroy(e.defs),e.svg=Ext.destroy(e.svg),e.callParent()},afterComponentLayout:function(e,t,i,n){this.callParent([e,t,i,n]),Ext.isIE9&&this.handleResize()},onElementResize:function(e,t){this.handleResize(t)},handleResize:function(e,t){var i=this,n=i.element;n&&(e=e||n.getSize())&&e.width&&e.height&&(i.resizeTimerId=Ext.undefer(i.resizeTimerId),t||!i.resizeDelay?(i.size=e,i.resizeHandler(e)):i.resizeTimerId=Ext.defer(i.handleResize,i.resizeDelay,i,[e,!0]))},updateMinValue:function(e){this.interpolator.setDomain(e,this.getMaxValue()),this.isConfiguring||this.render()},updateMaxValue:function(e){this.interpolator.setDomain(this.getMinValue(),e),this.isConfiguring||this.render()},updateAngleOffset:function(e,t){var i=this,n=i.getAnimation();i.fxAngleOffset=e,i.isConfiguring||(n.duration?i.animate(t,e,n.duration,i.easings[n.easing],function(e){i.fxAngleOffset=e,i.render()}):i.render())},applyTrackStart:function(e){return(e<0||360<=e)&&Ext.raise("'trackStart' should be within [0, 360)."),e},applyTrackLength:function(e){return(e<=0||360<e)&&Ext.raise("'trackLength' should be within (0, 360]."),e},updateTrackStart:function(e){this.isConfiguring||this.render()},updateTrackLength:function(e){this.interpolator.setRange(0,e),this.isConfiguring||this.render()},applyPadding:function(e){var t;return"string"==typeof e?(t=parseFloat(e)/100,function(e){return e*t}):function(){return e}},updatePadding:function(){this.isConfiguring||this.render()},applyValue:function(e){var t=this.getMinValue(),i=this.getMaxValue();return Math.min(Math.max(e,t),i)},updateValue:function(e,t){var i=this,n=i.getAnimation();i.fxValue=e,i.isConfiguring||(i.writeText(),n.duration?i.animate(t,e,n.duration,i.easings[n.easing],function(e){i.fxValue=e,i.render()}):i.render())},applyTextTpl:function(e){return e&&!e.isTemplate&&(e=new Ext.XTemplate(e)),e},applyTextOffset:function(e){return(e=e||{}).dx=e.dx||0,e.dy=e.dy||0,e},updateTextTpl:function(){this.writeText(),this.isConfiguring||this.centerText()},writeText:function(e){var t=this.getValue(),i=this.getMinValue(),n=this.getMaxValue(),r=n-i;this.getTextTpl().overwrite(this.textElement,{value:t,percent:(t-i)/r*100,minValue:i,maxValue:n,delta:r})},centerText:function(e,t,i,n,r){var o,a,s=this.textElement,l=this.getTextAlign();Ext.Number.isEqual(n,0,.1)||i.isOutOfBound({x:e,y:t})?(o=s.getRegion().alignTo({align:l,target:i}),s.setLeft(o.left),s.setTop(o.top)):(a=s.getBox(),s.setLeft(e-a.width/2),s.setTop(t-a.height/2))},camelCaseRe:/([a-z])([A-Z])/g,camelToHyphen:function(e){return e.replace(this.camelCaseRe,"$1-$2").toLowerCase()},applyTrackStyle:function(e){var t;return e.innerRadius=this.getRadiusFn(e.innerRadius),e.outerRadius=this.getRadiusFn(e.outerRadius),Ext.isArray(e.fill)&&(t=this.getTrackGradient(),this.setGradientStops(t,e.fill),e.fill="url(#"+t.dom.getAttribute("id")+")"),e},updateTrackStyle:function(e){var t,i=Ext.fly(this.getTrackArc());for(t in e)t in this.pathAttributes?i.setStyle(this.camelToHyphen(t),e[t]):i.setStyle(t,e[t])},applyValueStyle:function(e){var t;return e.innerRadius=this.getRadiusFn(e.innerRadius),e.outerRadius=this.getRadiusFn(e.outerRadius),Ext.isArray(e.fill)&&(t=this.getValueGradient(),this.setGradientStops(t,e.fill),e.fill="url(#"+t.dom.getAttribute("id")+")"),e},updateValueStyle:function(e){var t,i=Ext.fly(this.getValueArc());for(t in e)t in this.pathAttributes?i.setStyle(this.camelToHyphen(t),e[t]):i.setStyle(t,e[t])},getRadiusFn:function(e){var t,i,n,r=0;return Ext.isNumber(e)?t=function(){return e}:Ext.isString(e)&&(e=e.replace(/ /g,""),n=parseFloat(e)/100,(i=e.search("%"))<e.length-1&&(r=parseFloat(e.substr(i+1))),(t=function(e){return e*n+r}).ratio=n),t},getSvg:function(){var e=this.svg;return e||(e=this.svg=Ext.get(document.createElementNS(this.svgNS,"svg")),this.bodyElement.append(e)),e},getTrackArc:function(){var e=this.trackArc;return e||(e=this.trackArc=document.createElementNS(this.svgNS,"path"),this.getSvg().append(e,!0),e.setAttribute("class",Ext.baseCSSPrefix+"gauge-track")),e},getValueArc:function(){var e=this.valueArc;return this.getTrackArc(),e||(e=this.valueArc=document.createElementNS(this.svgNS,"path"),this.getSvg().append(e,!0),e.setAttribute("class",Ext.baseCSSPrefix+"gauge-value")),e},applyNeedle:function(e,t){return this.getValueArc(),Ext.Factory.gaugeNeedle.update(t,e,this,"createNeedle","needleDefaults")},createNeedle:function(e){return Ext.apply({gauge:this},e)},getDefs:function(){var e=this.defs;return e||(e=this.defs=Ext.get(document.createElementNS(this.svgNS,"defs")),this.getSvg().appendChild(e)),e},setGradientSize:function(e,t,i,n,r){e.setAttribute("x1",t),e.setAttribute("y1",i),e.setAttribute("x2",n),e.setAttribute("y2",r)},resizeGradients:function(e){var t=this.getTrackGradient(),i=this.getValueGradient(),n=e.height/2,r=e.width,o=e.height/2;this.setGradientSize(t.dom,0,n,r,o),this.setGradientSize(i.dom,0,n,r,o)},setGradientStops:function(e,t){for(var i,n,r,o=t.length;e.firstChild;)e.removeChild(e.firstChild);for(i=0;i<o;i++)n=t[i],r=document.createElementNS(this.svgNS,"stop"),e.appendChild(r),r.setAttribute("offset",n.offset),r.setAttribute("stop-color",n.color),"opacity"in n&&r.setAttribute("stop-opacity",n.opacity)},getTrackGradient:function(){var e=this.trackGradient;return e||((e=this.trackGradient=Ext.get(document.createElementNS(this.svgNS,"linearGradient"))).dom.setAttribute("gradientUnits","userSpaceOnUse"),this.getDefs().appendChild(e),Ext.get(e)),e},getValueGradient:function(){var e=this.valueGradient;return e||((e=this.valueGradient=Ext.get(document.createElementNS(this.svgNS,"linearGradient"))).dom.setAttribute("gradientUnits","userSpaceOnUse"),this.getDefs().appendChild(e),Ext.get(e)),e},getArcPoint:function(e,t,i,n){var r=n/180*Math.PI;return[e+i*Math.cos(r),t+i*Math.sin(r)]},isCircle:function(e,t){return Ext.Number.isEqual(Math.abs(t-e),360,.001)},getArcPath:function(e,t,i,n,r,o,a){var s=this.isCircle(r,o),l=(o=o-.01,this.getArcPoint(e,t,i,r)),d=this.getArcPoint(e,t,i,o),u=this.getArcPoint(e,t,n,r),c=this.getArcPoint(e,t,n,o),h=o-r<=180?0:1,f=["M",l[0],l[1],"A",i,i,0,h,1,d[0],d[1]],g=(n-i)/2;return s?f.push("M",c[0],c[1]):a?f.push("A",g,g,0,0,0,c[0],c[1]):f.push("L",c[0],c[1]),f.push("A",n,n,0,h,0,u[0],u[1]),a&&!s&&f.push("A",g,g,0,0,0,l[0],l[1]),f.push("Z"),f.join(" ")},resizeHandler:function(e){this.getSvg().setSize(e),this.resizeGradients(e),this.render()},createInterpolator:function(n){function e(e,t){var i=0;return o&&(i=(e-r)/o,n&&(i=Math.max(0,i),i=Math.min(1,i)),t&&(i=1-i)),(1-i)*a+i*s}var r=0,o=1,a=0,s=1;return e.setDomain=function(e,t){return o=t-(r=e),this},e.setRange=function(e,t){return a=e,s=t,this},e.getDomain=function(){return[r,r+o]},e.getRange=function(){return[a,s]},e},applyAnimation:function(e){return!0===e?e={}:!1===e&&(e={duration:0}),"duration"in e||(e.duration=1e3),e.easing in this.easings||(e.easing="out"),e},updateAnimation:function(){this.stopAnimation()},animate:function(e,t,n,r,o,a){var s=this,l=Ext.now(),d=s.createInterpolator().setRange(e,t);function u(){var e=Ext.AnimationQueue.frameStartTime,t=Math.min(e-l,n)/n,i=d(r(t));a?"string"==typeof o?a[o].call(a,i):o.call(a,i):o(i),1<=t&&(Ext.AnimationQueue.stop(u,a),s.fx=null)}s.stopAnimation(),Ext.AnimationQueue.start(u,a),s.fx={frame:u,scope:a}},stopAnimation:function(){this.fx&&(Ext.AnimationQueue.stop(this.fx.frame,this.fx.scope),this.fx=null)},unitCircleExtrema:{0:[1,0],90:[0,1],180:[-1,0],270:[0,-1],360:[1,0],450:[0,1],540:[-1,0],630:[0,-1]},getUnitSectorExtrema:function(e,t){var i,n=this.unitCircleExtrema,r=[];for(i in n)e<i&&i<e+t&&r.push(n[i]);return r},fitSectorInRect:function(e,t,i,n,r){if(Ext.Number.isEqual(n,360,.001))return{cx:e/2,cy:t/2,radius:Math.min(e,t)/2,region:new Ext.util.Region(0,e,t,0)};var o,a,s,l,d,u,c,h=this.fitSectorInRectCache;h.startAngle===i&&h.lengthAngle===n?(l=h.minX,d=h.maxX,u=h.minY,c=h.maxY):(a=(o=this.getUnitSectorExtrema(i,n).concat([this.getArcPoint(0,0,1,i),this.getArcPoint(0,0,r,i),this.getArcPoint(0,0,1,i+n),this.getArcPoint(0,0,r,i+n)])).map(function(e){return e[0]}),s=o.map(function(e){return e[1]}),l=Math.min.apply(null,a),d=Math.max.apply(null,a),u=Math.min.apply(null,s),c=Math.max.apply(null,s),h.startAngle=i,h.lengthAngle=n,h.minX=l,h.maxX=d,h.minY=u,h.maxY=c);var f=e/(d-l),g=t/(c-u),p=Math.min(f,g),m=new Ext.util.Region(u*p,d*p,c*p,l*p),x=new Ext.util.Region(0,e,t,0),y=m.alignTo({align:"c-c",target:x});return{cx:y.left-l*p,cy:y.top-u*p,radius:p,region:y}},fitSectorInPaddedRect:function(e,t,i,n,r,o){var a=this.fitSectorInRect(e-2*i,t-2*i,n,r,o);return a.cx+=i,a.cy+=i,a.region.translateBy(i,i),a},normalizeAngle:function(e){return(e%360+360)%360},render:function(){if(this.size){var e=this,t=e.getTextOffset(),i=e.getTrackArc(),n=e.getValueArc(),r=e.getNeedle(),o=e.getClockwise(),a=e.fxValue,s=e.fxAngleOffset,l=e.getTrackLength(),d=e.size.width,u=e.size.height,c=e.getPadding()(Math.min(d,u)),h=e.normalizeAngle(e.getTrackStart()+s),f=h+l,g=e.interpolator(a),p=e.getTrackStyle(),m=e.getValueStyle(),x=e.fitSectorInPaddedRect(d,u,c,h,l,p.innerRadius.ratio),y=x.cx,v=x.cy,E=x.radius,b=Math.max(0,p.innerRadius(E)),C=Math.max(0,p.outerRadius(E)),S=Math.max(0,m.innerRadius(E)),w=Math.max(0,m.outerRadius(E)),T=e.getArcPath(y,v,b,C,h,f,p.round),P=e.getArcPath(y,v,S,w,o?h:f-g,o?h+g:f,m.round);e.centerText(y+t.dx,v+t.dy,x.region,b,C),i.setAttribute("d",T),n.setAttribute("d",P),r&&(r.setRadius(E),r.setTransform(y,v,-90+h+g)),e.fireEvent("render",e)}}}),Ext.define("Ext.ux.gauge.needle.Arrow",{extend:"Ext.ux.gauge.needle.Abstract",alias:"gauge.needle.arrow",config:{path:function(e,t){return 30<t-e?"M0,"+(e+5)+" L-4,"+e+" L-4,"+(e+10)+" L-1,"+(e+15)+" L-1,"+(t-7)+" L-5,"+(t-10)+" L0,"+t+" L5,"+(t-10)+" L1,"+(t-7)+" L1,"+(e+15)+" L4,"+(e+10)+" L4,"+e+" Z":""}}}),Ext.define("Ext.ux.gauge.needle.Diamond",{extend:"Ext.ux.gauge.needle.Abstract",alias:"gauge.needle.diamond",config:{path:function(e,t){return 10<t-e?"M0,"+e+" L-4,"+(e+5)+" L0,"+t+" L4,"+(e+5)+" Z":""}}}),Ext.define("Ext.ux.gauge.needle.Rectangle",{extend:"Ext.ux.gauge.needle.Abstract",alias:"gauge.needle.rectangle",config:{path:function(e,t){return 10<t-e?"M-2,"+e+" L2,"+e+" L2,"+t+" L-2,"+t+" Z":""}}}),Ext.define("Ext.ux.gauge.needle.Spike",{extend:"Ext.ux.gauge.needle.Abstract",alias:"gauge.needle.spike",config:{path:function(e,t){return 10<t-e?"M0,"+(e+5)+" L-4,"+e+" L0,"+t+" L4,"+e+" Z":""}}}),Ext.define("Ext.ux.gauge.needle.Wedge",{extend:"Ext.ux.gauge.needle.Abstract",alias:"gauge.needle.wedge",config:{path:function(e,t){return 10<t-e?"M-4,"+e+" L0,"+t+" L4,"+e+" Z":""}}}),Ext.define("Ext.ux.rating.Picker",{extend:"Ext.Gadget",xtype:"rating",focusable:!0,cachedConfig:{family:"monospace",glyphs:"☆★",minimum:1,limit:5,overStyle:null,rounding:1,scale:"125%",selectedStyle:null,tip:null,trackOver:!0,value:null,tooltipText:null,trackingValue:null},config:{animate:null},element:{cls:"u"+Ext.baseCSSPrefix+"rating-picker",reference:"element",children:[{reference:"innerEl",cls:"u"+Ext.baseCSSPrefix+"rating-picker-inner",listeners:{click:"onClick",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},children:[{reference:"valueEl",cls:"u"+Ext.baseCSSPrefix+"rating-picker-value"},{reference:"trackerEl",cls:"u"+Ext.baseCSSPrefix+"rating-picker-tracker"}]}]},defaultBindProperty:"value",twoWayBindable:"value",overCls:"u"+Ext.baseCSSPrefix+"rating-picker-over",trackOverCls:"u"+Ext.baseCSSPrefix+"rating-picker-track-over",applyGlyphs:function(e){return"string"==typeof e?(2!==e.length&&Ext.raise('Expected 2 characters for "glyphs" not "'+e+'".'),e=[e.charAt(0),e.charAt(1)]):"number"==typeof e[0]&&(e=[String.fromCharCode(e[0]),String.fromCharCode(e[1])]),e},applyOverStyle:function(e){this.trackerEl.applyStyles(e)},applySelectedStyle:function(e){this.valueEl.applyStyles(e)},applyTip:function(e){return e&&"function"!=typeof e&&(e.isTemplate||(e=new Ext.XTemplate(e)),e=e.apply.bind(e)),e},applyTrackingValue:function(e){return this.applyValue(e)},applyValue:function(e){var t,i,n;return null!==e&&(t=this.getRounding(),i=this.getLimit(),n=this.getMinimum(),e=(e=Math.round(Math.round(e/t)*t*1e3)/1e3)<n?n:i<e?i:e),e},onClick:function(e){var t=this.valueFromEvent(e);this.setValue(t)},onMouseEnter:function(){this.element.addCls(this.overCls)},onMouseLeave:function(){this.element.removeCls(this.overCls)},onMouseMove:function(e){var t=this.valueFromEvent(e);this.setTrackingValue(t)},updateFamily:function(e){this.element.setStyle("fontFamily","'"+e+"'")},updateGlyphs:function(){this.refreshGlyphs()},updateLimit:function(){this.refreshGlyphs()},updateScale:function(e){this.element.setStyle("fontSize",e)},updateTip:function(){this.refreshTip()},updateTooltipText:function(e){this.setTooltip(e)},updateTrackingValue:function(e){var t=this.trackerEl,i=this.valueToPercent(e);t.setStyle("width",i),this.refreshTip()},updateTrackOver:function(e){this.element.toggleCls(this.trackOverCls,e)},updateValue:function(e,t){var i,n,r=this,o=r.getAnimate(),a=r.valueEl,s=r.valueToPercent(e);r.isConfiguring||!o?a.setStyle("width",s):(a.stopAnimation(),a.animate(Ext.merge({from:{width:r.valueToPercent(t)},to:{width:s}},o))),r.refreshTip(),r.isConfiguring||(r.hasListeners.change&&r.fireEvent("change",r,e,t),(n=(i=r.getWidgetColumn&&r.getWidgetColumn())&&r.getWidgetRecord&&r.getWidgetRecord())&&i.dataIndex&&n.set(i.dataIndex,e))},afterCachedConfig:function(){return this.refresh(),this.callParent(arguments)},initConfig:function(e){this.isConfiguring=!0,this.callParent([e]),this.refresh()},setConfig:function(){return this.isReconfiguring=!0,this.callParent(arguments),this.isReconfiguring=!1,this.refresh(),this},privates:{getGlyphTextNode:function(e){var t=e.lastChild;return t&&3===t.nodeType||(t=e.ownerDocument.createTextNode(""),e.appendChild(t)),t},getTooltipData:function(){return{component:this,tracking:this.getTrackingValue(),trackOver:this.getTrackOver(),value:this.getValue()}},refresh:function(){this.invalidGlyphs&&this.refreshGlyphs(!0),this.invalidTip&&this.refreshTip(!0)},refreshGlyphs:function(e){var t,i,n,r,o,a,s,l=this,d=!e&&(l.isConfiguring||l.isReconfiguring);if(!d){for(t=l.getGlyphTextNode(l.innerEl.dom),s=l.getGlyphTextNode(l.valueEl.dom),a=l.getGlyphTextNode(l.trackerEl.dom),i=l.getGlyphs(),n=l.getLimit(),r=o="";n--;)o+=i[0],r+=i[1];t.nodeValue=o,s.nodeValue=r,a.nodeValue=r}l.invalidGlyphs=d},refreshTip:function(e){var t,i,n=!e&&(this.isConfiguring||this.isReconfiguring);n||(i=this.getTip())&&(t=i(this.getTooltipData()),this.setTooltipText(t)),this.invalidTip=n},valueFromEvent:function(e){var t,i=this.innerEl,n=e.getX(),r=this.getRounding(),o=n-i.getX(),a=i.getWidth(),s=this.getLimit();return this.getInherited().rtl&&(o=a-o),t=o/a*s,t=Math.ceil(t/r)*r},valueToPercent:function(e){return(e=e/this.getLimit()*100)+"%"}}}),Ext.define("Ext.ux.overrides.rating.Picker",{override:"Ext.ux.rating.Picker",initConfig:function(e){e&&e.tooltip&&(e.tip=e.tooltip,Ext.log.warn('[Ext.ux.rating.Picker] The "tooltip" config was replaced by "tip"')),this.callParent([e])},updateTooltipText:function(e){var t,i=this.innerEl,n=Ext.tip&&Ext.tip.QuickTipManager,r=n&&n.tip;n&&(i.dom.setAttribute("data-qtip",e),this.trackerEl.dom.setAttribute("data-qtip",e),(t=(t=r&&r.activeTarget)&&t.el)&&i.contains(t)&&r.update(e))}}),Ext.define("Ext.ux.dd.BoxContainerDD",{extend:"Ext.dd.DD",alignElWithMouse:function(e,t,i){var n,r,o,a=this.getTargetCoord(t,i),s=a.x,l=a.y,d=e.dom?e:Ext.fly(e,"_dd");return this.deltaSetXY?this.setLocalXY(d,Math.max(0,s+this.deltaSetXY[0]),Math.max(0,l+this.deltaSetXY[1])):(n=[Math.max(0,s),Math.max(0,l)],d.setXY(n),r=this.getLocalX(d),o=d.getLocalY(),this.deltaSetXY=[r-s,o-l]),this.cachePosition(s,l),this.autoScroll(s,l,e.offsetHeight,e.offsetWidth),a}}),Ext.define("Ext.ux.BoxReorderer",{extend:"Ext.plugin.Abstract",alias:"plugin.boxreorderer",requires:["Ext.ux.dd.BoxContainerDD"],mixins:{observable:"Ext.util.Observable"},itemSelector:".x-box-item",animate:100,constructor:function(){this.callParent(arguments),this.mixins.observable.constructor.call(this)},init:function(e){var t=e.getLayout();this.container=e,this.names=t._props[t.type].names,this.animatePolicy={},this.animatePolicy[this.names.x]=!0,this.container.on({scope:this,boxready:this.onBoxReady,beforedestroy:this.onContainerDestroy})},onContainerDestroy:function(){var e=this.dd;e&&(e.unreg(),this.dd=null)},onBoxReady:function(){var e,t=this,i=t.container.getLayout(),n=t.names;e=t.dd=new Ext.ux.dd.BoxContainerDD(i.innerCt,t.container.id+"-reorderer"),Ext.apply(e,{animate:t.animate,reorderer:t,container:t.container,getDragCmp:t.getDragCmp,clickValidator:Ext.Function.createInterceptor(e.clickValidator,t.clickValidator,t,!1),onMouseDown:t.onMouseDown,startDrag:t.startDrag,onDrag:t.onDrag,endDrag:t.endDrag,getNewIndex:t.getNewIndex,doSwap:t.doSwap,findReorderable:t.findReorderable,names:n}),e.dim=n.width,e.startAttr=n.beforeX,e.endAttr=n.afterX},getDragCmp:function(e){return this.container.getChildByElement(e.getTarget(this.itemSelector,10))},clickValidator:function(e){var t=this.getDragCmp(e);return!(!t||!1===t.reorderable)},onMouseDown:function(e){var t,i,n,r=this,o=r.container;r.dragCmp=r.getDragCmp(e),r.dragCmp&&(i=r.dragCmp.getEl(),r.startIndex=r.curIndex=o.items.indexOf(r.dragCmp),n=i.getBox(),r.lastPos=n[r.startAttr],t=o.el.getBox(),"width"===r.dim?(r.minX=t.left,r.maxX=t.right-n.width,r.minY=r.maxY=n.top,r.deltaX=e.getX()-n.left):(r.minY=t.top,r.maxY=t.bottom-n.height,r.minX=r.maxX=n.left,r.deltaY=e.getY()-n.top),r.constrainY=r.constrainX=!0)},startDrag:function(){var e,t,i,n,r,o=this,a=o.dragCmp;a?((r=o.container.getScrollable())&&r.scrollBy(-1).then(function(){r.scrollBy(1)}),a.setPosition=Ext.emptyFn,a.animate=!1,o.animate&&(o.container.getLayout().animatePolicy=o.reorderer.animatePolicy),o.dragElId=a.getEl().id,o.reorderer.fireEvent("StartDrag",o,o.container,a,o.curIndex),a.suspendEvents(),a.disabled=!0,a.el.setStyle("zIndex",100),a.nextSibling()||(i=(t=(e=o.container.layout.targetEl).dom).scrollWidth-1,n=t.scrollHeight-1,o.spacerEl=Ext.dom.Helper.append(e,{tag:"div",style:"width: 1px;height: 1px;position: absolute;left: "+i+"px;top: "+n+'px;"'}))):o.dragElId=null},findReorderable:function(e){var t,i=this.container.items;if(!1===i.getAt(e).reorderable)if(t=i.getAt(e),e>this.startIndex)for(;t&&!1===t.reorderable;)e++,t=i.getAt(e);else for(;t&&!1===t.reorderable;)e--,t=i.getAt(e);return e=Math.min(Math.max(e,0),i.getCount()-1),!1===i.getAt(e).reorderable?-1:e},doSwap:function(e){var t,i,n,r=this,o=r.container.items,a=r.container;-1!==(e=r.findReorderable(e))&&e!==r.curIndex&&(r.reorderer.fireEvent("ChangeIndex",r,a,r.dragCmp,r.startIndex,e),t=o.getAt(r.curIndex),i=o.getAt(e),o.remove(t),n=Math.min(Math.max(e,0),o.getCount()-1),o.insert(n,t),o.remove(i),o.insert(r.curIndex,i),a.updateLayout({isRoot:!0}),r.curIndex=e)},onDrag:function(e){var t;void 0!==(t=this.getNewIndex(e.getPoint()))&&(this.reorderer.fireEvent("Drag",this,this.container,this.dragCmp,this.startIndex,this.curIndex),this.doSwap(t))},endDrag:function(e){var t,i=this,n=i.dragCmp,r=i.container,o=r.getLayout();e&&e.stopEvent(),n&&(delete i.dragElId,delete n.setPosition,n.animate=!0,n.lastBox[i.names.x]=n.getPosition(!0)[i.names.widthIndex],r.updateLayout({isRoot:!0}),(t=Ext.fx.Manager.getFxQueue(n.el.id)[0])?t.on({afteranimate:i.reorderer.afterBoxReflow,scope:i}):Ext.asap(i.reorderer.afterBoxReflow,i),i.animate&&delete o.animatePolicy,i.reorderer.fireEvent("drop",i,r,n,i.startIndex,i.curIndex))},afterBoxReflow:function(){var e=Ext.fly(this.spacerEl),t=this.dragCmp;t.el.setStyle("zIndex",""),t.disabled=!1,t.resumeEvents(),e&&(e.remove(),this.spacerEl=null)},getNewIndex:function(e){var t,i,n,r=this,o=r.getDragEl(),a=Ext.fly(o).getBox(),s=0,l=r.container.items.items,d=l.length,u=r.lastPos;for(r.lastPos=a[r.startAttr];s<d;s++)if((t=l[s].getEl()).dom!==o&&t.is(r.reorderer.itemSelector))if(n=(i=t.getBox())[r.startAttr]+(i[r.dim]>>1),s<r.curIndex){if(a[r.startAttr]<u&&a[r.startAttr]<n-5)return s}else if(s>r.curIndex&&a[r.startAttr]>u&&a[r.endAttr]>n+5)return s}}),Ext.define("Ext.ux.CellDragDrop",{extend:"Ext.plugin.Abstract",alias:"plugin.celldragdrop",uses:["Ext.view.DragZone"],enforceType:!1,applyEmptyText:!1,emptyText:"",dropBackgroundColor:"green",noDropBackgroundColor:"red",dragText:"{0} selected row{1}",ddGroup:"GridDD",enableDrop:!0,enableDrag:!0,containerScroll:!1,init:function(e){e.on("render",this.onViewRender,this,{single:!0})},destroy:function(){this.dragZone=this.dropZone=Ext.destroy(this.dragZone,this.dropZone),this.callParent()},enable:function(){this.dragZone&&this.dragZone.unlock(),this.dropZone&&this.dropZone.unlock(),this.callParent()},disable:function(){this.dragZone&&this.dragZone.lock(),this.dropZone&&this.dropZone.lock(),this.callParent()},onViewRender:function(e){var t,a=this;a.enableDrag&&(a.containerScroll&&(t=e.getEl()),a.dragZone=new Ext.view.DragZone({view:e,ddGroup:a.dragGroup||a.ddGroup,dragText:a.dragText,containerScroll:a.containerScroll,scrollEl:t,getDragData:function(e){var t,i,n=this.view,r=e.getTarget(n.getItemSelector()),o=n.getRecord(r),a=e.getTarget(n.getCellSelector());if(r)return(t=document.createElement("div")).className="x-form-text",t.appendChild(document.createTextNode(a.textContent||a.innerText)),i=n.getHeaderByCell(a),{event:new Ext.EventObjectImpl(e),ddel:t,item:e.target,columnName:i.dataIndex,record:o}},onInitDrag:function(e,t){var i=this.dragData,n=this.view.getSelectionModel(),r=i.record,o=i.ddel;return n.isSelected(r)||n.select(r,!0),Ext.fly(this.ddel).update(o.textContent||o.innerText),this.proxy.update(this.ddel),this.onStartDrag(e,t),!0}})),a.enableDrop&&(a.dropZone=new Ext.dd.DropZone(e.el,{view:e,ddGroup:a.dropGroup||a.ddGroup,containerScroll:!0,getTargetFromEvent:function(e){var t,i,n=this.view,r=e.getTarget(n.cellSelector);if(r&&(t=n.findItemByChild(r),i=n.getHeaderByCell(r),t&&i))return{node:r,record:n.getRecord(t),columnName:i.dataIndex}},onNodeEnter:function(e,t,i,n){var r,o;if(r=e.record.getField(e.columnName).type.toUpperCase(),o=n.record.getField(n.columnName).type.toUpperCase(),delete this.dropOK,e&&e.node!==n.item.parentNode){if(a.enforceType&&r!==o)return this.dropOK=!1,a.noDropCls?Ext.fly(e.node).addCls(a.noDropCls):Ext.fly(e.node).applyStyles({backgroundColor:a.noDropBackgroundColor}),!1;this.dropOK=!0,a.dropCls?Ext.fly(e.node).addCls(a.dropCls):Ext.fly(e.node).applyStyles({backgroundColor:a.dropBackgroundColor})}},onNodeOver:function(e,t,i,n){return this.dropOK?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(e,t,i,n){var r=this.dropOK?a.dropCls:a.noDropCls;r?Ext.fly(e.node).removeCls(r):Ext.fly(e.node).applyStyles({backgroundColor:""})},onNodeDrop:function(e,t,i,n){if(this.dropOK)return e.record.set(e.columnName,n.record.get(n.columnName)),a.applyEmptyText&&n.record.set(n.columnName,a.emptyText),!0},onCellDrop:Ext.emptyFn}))}}),Ext.define("Ext.ux.DataTip",function(e){function i(){var e=this.isXType("panel")?this.body:this.el;this.dataTip.renderToTarget&&this.dataTip.render(e),this.dataTip.setTarget(e)}function n(e,t){if(e.rendered){if(!1===e.host.fireEvent("beforeshowtip",e.eventHost,e,t))return!1;e.update(t)}else Ext.isString(t)?e.html=t:e.data=t}function r(e){var t=this.view.getRecord(e.triggerElement);return!!t&&n(e,e.initialConfig.data?Ext.apply(e.initialConfig.data,t.data):t.data)}function o(e){var t=Ext.getCmp(e.triggerElement.id);return!(!t||!t.tooltip&&!e.tpl)&&n(e,t.tooltip||t)}return{extend:"Ext.tip.ToolTip",mixins:{plugin:"Ext.plugin.Abstract"},alias:"plugin.datatip",lockableScope:"both",constructor:function(e){this.callParent([e]),this.mixins.plugin.constructor.call(this,e)},init:function(e){var t=this;t.mixins.plugin.init.call(t,e),((e.dataTip=t).host=e).isXType("tablepanel")?(t.view=e.getView(),e.ownerLockable&&(t.host=e.ownerLockable),t.delegate=t.delegate||t.view.rowSelector,t.on("beforeshow",r)):e.isXType("dataview")?(t.view=t.host,t.delegate=t.delegate||e.itemSelector,t.on("beforeshow",r)):e.isXType("form")?(t.delegate="."+Ext.form.Labelable.prototype.formItemCls,t.on("beforeshow",o)):e.isXType("combobox")&&(t.view=e.getPicker(),t.delegate=t.delegate||t.view.getItemSelector(),t.on("beforeshow",r)),e.rendered?i.call(e):e.onRender=Ext.Function.createSequence(e.onRender,i)}}}),Ext.define("Ext.ux.DataView.Animated",{alias:"plugin.ux-animated-dataview",defaults:{duration:750,idProperty:"id"},constructor:function(e){Ext.apply(this,e||{},this.defaults)},init:function(d){var u=this,y=d.store,v=d.all,E={interval:20},b=u.duration;(u.dataview=d).blockRefresh=!0,d.updateIndexes=Ext.Function.createSequence(d.updateIndexes,function(){this.getTargetEl().select(this.itemSelector).each(function(e,t,i){e.dom.id=Ext.util.Format.format("{0}-{1}",d.id,y.getAt(i).internalId)},this)},d),u.dataviewID=d.id,u.cachedStoreData={},u.cacheStoreData(y.data||y.snapshot),d.on("resize",function(){d.store.getCount()},this),d.store.on({datachanged:function(){var e,t,c,i,h,f,n,r=d.getTargetEl(),o=r.getY(),a=r.getPadding("t"),s=u.getAdded(y),l=u.getRemoved(y),g=u.getRemaining(y),p=new Ext.dom.Fly,m=u.dataview.getInherited().rtl?"right":"left",x={};if(!r)return;if(Ext.iterate(l,function(e,t){c=u.dataviewID+"-"+e,Ext.fx.Manager.stopAnimation(c),t.dom=Ext.getDom(c),t.dom||delete l[e]}),u.cacheStoreData(y),h={},f={},Ext.iterate(g,function(e,t){p.attach(Ext.getDom(u.dataviewID+"-"+e))?(h[e]={top:p.getY()-o-p.getMargin("t")-a})[m]=u.getItemX(p):delete g[e]}),d.refresh(),Ext.iterate(l,function(e,t){r.dom.appendChild(t.dom),p.attach(t.dom).animate({duration:b,opacity:0,callback:function(e){var t=Ext.get(e.target.id);t&&t.destroy()}}),delete t.dom}),!y.getCount())return;for(e=v.slice(),t=e.length-1;0<=t;t--)c=y.getAt(t).internalId,p.attach(e[t]),f[c]={dom:p.dom,top:p.getY()-o-p.getMargin("t")-a},f[c][m]=u.getItemX(p),i=h[c]||f[c],x.position="absolute",x.top=i.top+"px",x[m]=i.left+"px",p.applyStyles(x);n=function(){var e,t,i,n,r,o,a,s,l,d,u=(new Date-E.taskStartTime)/b;if(1<=u){for(c in x.position=x.top=x[m]="",f)p.attach(f[c].dom).applyStyles(x);Ext.TaskManager.stop(E)}else for(c in g)e=h[c],t=f[c],i=e.top,n=t.top,r=e[m],o=t[m],a=u*Math.abs(i-n),s=u*Math.abs(r-o),l=n<i?i-a:i+a,d=o<r?r-s:r+s,x.top=l+"px",x[m]=d+"px",p.attach(t.dom).applyStyles(x)},Ext.iterate(s,function(e,t){p.attach(Ext.getDom(u.dataviewID+"-"+e))&&(p.setOpacity(0),p.animate({duration:b,opacity:1}))}),Ext.TaskManager.stop(E),E.run=n,Ext.TaskManager.start(E),u.cacheStoreData(y)},scope:this,buffer:50})},getItemX:function(e){var t=this.dataview.getInherited().rtl,i=e.up("");return t?i.getViewRegion().right-e.getRegion().right+e.getMargin("r"):e.getX()-i.getX()-e.getMargin("l")-i.getPadding("l")},cacheStoreData:function(e){var t=this.cachedStoreData={};e.each(function(e){t[e.internalId]=e})},getExisting:function(){return this.cachedStoreData},getExistingCount:function(){var e,t=0,i=this.getExisting();for(e in i)t++;return t},getAdded:function(e){var t=this.cachedStoreData,i={};return e.each(function(e){null==t[e.internalId]&&(i[e.internalId]=e)}),i},getRemoved:function(e){var t,i=this.cachedStoreData,n={};for(t in i)-1===e.findBy(function(e){return e.internalId===t})&&(n[t]=i[t]);return n},getRemaining:function(e){var t=this.cachedStoreData,i={};return e.each(function(e){null!=t[e.internalId]&&(i[e.internalId]=e)}),i}}),Ext.define("Ext.ux.DataView.DragSelector",{requires:["Ext.dd.DragTracker","Ext.util.Region"],alias:"plugin.dataviewdragselector",init:function(e){var t=e.getScrollable();t&&(t.getX()||t.getY())&&(Ext.supports.PointerEvents||Ext.supports.MSPointerEvents)?Ext.log.warn("DragSelector not available on PointerEvent devices"):(this.dataview=e).mon(e,{beforecontainerclick:this.cancelClick,scope:this,render:{fn:this.onRender,scope:this,single:!0}})},onRender:function(){this.tracker=Ext.create("Ext.dd.DragTracker",{dataview:this.dataview,el:this.dataview.el,onBeforeStart:this.onBeforeStart,onStart:this.onStart.bind(this),onDrag:this.onDrag.bind(this),onEnd:Ext.Function.createDelayed(this.onEnd,100,this)}),this.dragRegion=Ext.create("Ext.util.Region")},onBeforeStart:function(e){return e.target===this.dataview.getEl().dom},onStart:function(e){var t=this.dataview;this.dragging=!0,this.fillRegions(),this.getProxy().show(),t.getSelectionModel().deselectAll()},cancelClick:function(){return!this.dragging},onDrag:function(e){var t,i,n=this.dataview.getSelectionModel(),r=this.dragRegion,o=this.bodyRegion,a=this.getProxy(),s=this.regions,l=s.length,d=this.tracker.startXY,u=this.tracker.getXY(),c=Math.min(d[0],u[0]),h=Math.min(d[1],u[1]),f=Math.abs(d[0]-u[0]),g=Math.abs(d[1]-u[1]);for(Ext.apply(r,{top:h,left:c,right:c+f,bottom:h+g}),r.constrainTo(o),a.setBox(r),i=0;i<l;i++)t=s[i],r.intersect(t)?n.select(i,!0):n.deselect(i)},onEnd:function(e){this.dataview.getSelectionModel();this.dragging=!1,this.getProxy().hide()},getProxy:function(){return this.proxy||(this.proxy=this.dataview.getEl().createChild({tag:"div",cls:"x-view-selector"})),this.proxy},fillRegions:function(){var e=this.dataview,t=this.regions=[];e.all.each(function(e){t.push(e.getRegion())}),this.bodyRegion=e.getEl().getRegion()}}),Ext.define("Ext.ux.DataView.Draggable",{requires:"Ext.dd.DragZone",ghostCls:"x-dataview-draggable-ghost",ghostTpl:['<tpl for=".">',"{title}","</tpl>"],init:function(e,t){(this.dataview=e).on("render",this.onRender,this),Ext.apply(this,{itemSelector:e.itemSelector,ghostConfig:{}},t||{}),Ext.applyIf(this.ghostConfig,{itemSelector:"img",cls:this.ghostCls,tpl:this.ghostTpl})},onRender:function(){var e=this,t=Ext.apply({},e.ddConfig||{},{dvDraggable:e,dataview:e.dataview,getDragData:e.getDragData,getTreeNode:e.getTreeNode,afterRepair:e.afterRepair,getRepairXY:e.getRepairXY});e.dragZone=Ext.create("Ext.dd.DragZone",e.dataview.getEl(),t),e.dataview.setItemsDraggable(!0)},getDragData:function(e){var t,i,n=this.dvDraggable,r=this.dataview,o=r.getSelectionModel(),a=e.getTarget(n.itemSelector);return!!a&&(e.preventDefault(),r.isSelected(a)||o.select(r.getRecord(a)),i={copy:!0,nodes:t=r.getSelectedNodes(),records:o.getSelection(),item:!0},1===t.length?(i.single=!0,i.ddel=a):(i.multi=!0,i.ddel=n.prepareGhost(o.getSelection())),i)},getTreeNode:function(){},afterRepair:function(){var e,t=this.dragData.nodes,i=t.length;for(this.dragging=!1,e=0;e<i;e++)Ext.get(t[e]).frame("#8db2e3",1)},getRepairXY:function(e){var t,i;return!this.dragData.multi&&((i=(t=Ext.get(this.dragData.ddel)).getXY())[0]+=t.getPadding("t")+t.getMargin("t"),i[1]+=t.getPadding("l")+t.getMargin("l"),i)},prepareGhost:function(e){return this.createGhost(e).getEl().dom},createGhost:function(e){var t;return this.ghost?(t=this.ghost.store).loadRecords(e):((t=Ext.create("Ext.data.Store",{model:e[0].self})).loadRecords(e),this.ghost=Ext.create("Ext.view.View",Ext.apply({renderTo:document.createElement("div"),store:t},this.ghostConfig)),this.ghost.container.skipGarbageCollection=this.ghost.el.skipGarbageCollection=!0),t.clearData(),this.ghost},destroy:function(){var e=this.ghost;e&&(e.container.destroy(),e.destroy()),this.callParent()}}),Ext.define("Ext.ux.DataView.LabelEditor",{extend:"Ext.Editor",alias:"plugin.dataviewlabeleditor",alignment:"tl-tl",completeOnEnter:!0,cancelOnEsc:!0,shim:!1,autoSize:{width:"boundEl",height:"field"},labelSelector:"x-editable",requires:["Ext.form.field.Text"],constructor:function(e){e.field=e.field||Ext.create("Ext.form.field.Text",{allowOnlyWhitespace:!1,selectOnFocus:!0}),this.callParent([e])},init:function(e){this.view=e,this.mon(e,"afterrender",this.bindEvents,this),this.on("complete",this.onSave,this)},bindEvents:function(){this.mon(this.view.getEl(),{click:{fn:this.onClick,scope:this}})},onClick:function(e,t){var i,n,r=this;!Ext.fly(t).hasCls(r.labelSelector)||r.editing||e.ctrlKey||e.shiftKey?r.editing&&(r.field.blur(),e.preventDefault()):(e.stopEvent(),i=r.view.findItemByChild(t),n=r.view.store.getAt(r.view.indexOf(i)),r.startEdit(t,n.data[r.dataIndex]),r.activeRecord=n)},onSave:function(e,t){this.activeRecord.set(this.dataIndex,t)}}),Ext.ux.DataViewTransition=Ext.extend(Object,{defaults:{duration:750,idProperty:"id"},constructor:function(e){Ext.apply(this,e||{},this.defaults)},init:function(b){this.dataview=b;var C=this.idProperty;b.blockRefresh=!0,b.updateIndexes=Ext.Function.createSequence(b.updateIndexes,function(){this.getTargetEl().select(this.itemSelector).each(function(e,t,i){e.id=e.dom.id=Ext.util.Format.format("{0}-{1}",b.id,b.store.getAt(i).get(C))},this)},b),this.dataviewID=b.id,this.cachedStoreData={},this.cacheStoreData(b.store.snapshot),b.store.on("datachanged",function(e){var n=b.getTargetEl(),t=e.getAt(0),i=this.getAdded(e),r=this.getRemoved(e),h=this.getRemaining(e);if(Ext.each(r,function(e){Ext.fly(this.dataviewID+"-"+e.get(this.idProperty)).animate({remove:!1,duration:m,opacity:0,useDisplay:!0})},this),null!=t){var o=Ext.get(this.dataviewID+"-"+t.get(this.idProperty)),a=o.getMargin("lr")+o.getWidth(),s=o.getMargin("bt")+o.getHeight(),l=n.getWidth(),d=Math.floor(l/a);n.applyStyles({display:"block",position:"relative"});var f={},g={},u={};Ext.iterate(h,function(e,t){e=t.get(this.idProperty);var i=u[e]=Ext.get(this.dataviewID+"-"+e);f[e]={top:i.getY()-n.getY()-i.getMargin("t")-n.getPadding("t"),left:i.getX()-n.getX()-i.getMargin("l")-n.getPadding("l")}},this),Ext.iterate(h,function(e,t){var i=f[e],n=u[e];"absolute"!==n.getStyle("position")&&u[e].applyStyles({position:"absolute",left:i.left+"px",top:i.top+"px",width:n.getWidth(!Ext.isIE||Ext.isStrict),height:n.getHeight(!Ext.isIE||Ext.isStrict)})});var c=0;Ext.iterate(e.data.items,function(e){var t=e.get(C),i=c%d,n=Math.floor(c/d)*s,r=i*a;g[t]={top:n,left:r},c++},this);var p=new Date,m=this.duration,x=this.dataviewID,y={run:function(){var e,t=(new Date-p)/m;if(1<=t){for(e in g)Ext.fly(x+"-"+e).applyStyles({top:g[e].top+"px",left:g[e].left+"px"});Ext.TaskManager.stop(y)}else for(e in g)if(h[e]){var i=f[e],n=g[e],r=i.top,o=n.top,a=i.left,s=n.left,l=t*Math.abs(r-o),d=t*Math.abs(a-s),u=o<r?r-l:r+l,c=s<a?a-d:a+d;Ext.fly(x+"-"+e).applyStyles({top:u+"px",left:c+"px"})}},interval:20,scope:this};Ext.TaskManager.start(y);var v=0;for(var E in i)v++;Ext.global.console&&Ext.global.console.log&&Ext.global.console.log("added:",v),Ext.iterate(i,function(e,t){Ext.fly(this.dataviewID+"-"+t.get(this.idProperty)).applyStyles({top:g[t.get(this.idProperty)].top+"px",left:g[t.get(this.idProperty)].left+"px"}),Ext.fly(this.dataviewID+"-"+t.get(this.idProperty)).animate({remove:!1,duration:m,opacity:1})},this),this.cacheStoreData(e)}else this.cacheStoreData(e)},this)},cacheStoreData:function(e){this.cachedStoreData={},e.each(function(e){this.cachedStoreData[e.get(this.idProperty)]=e},this)},getExisting:function(){return this.cachedStoreData},getExistingCount:function(){var e=0,t=this.getExisting();for(var i in t)e++;return e},getAdded:function(e){var t={};return e.each(function(e){null==this.cachedStoreData[e.get(this.idProperty)]&&(t[e.get(this.idProperty)]=e)},this),t},getRemoved:function(e){var t=[];for(var i in this.cachedStoreData)-1===e.findExact(this.idProperty,Number(i))&&t.push(this.cachedStoreData[i]);return t},getRemaining:function(e){var t={};return e.each(function(e){null!=this.cachedStoreData[e.get(this.idProperty)]&&(t[e.get(this.idProperty)]=e)},this),t}}),Ext.define("Ext.ux.Explorer",{extend:"Ext.panel.Panel",xtype:"explorer",requires:["Ext.layout.container.Border","Ext.toolbar.Breadcrumb","Ext.tree.Panel"],config:{breadcrumb:{dock:"top",xtype:"breadcrumb",reference:"breadcrumb"},contentView:{xtype:"dataview",reference:"contentView",region:"center",cls:Ext.baseCSSPrefix+"explorer-view",itemSelector:"."+Ext.baseCSSPrefix+"explorer-item",tpl:'<tpl for="."><div class="'+Ext.baseCSSPrefix+'explorer-item"><div class="{iconCls}"><div class="'+Ext.baseCSSPrefix+'explorer-node-icon{[values.leaf ? " '+Ext.baseCSSPrefix+'explorer-leaf-icon" : ""]}"></div><div class="'+Ext.baseCSSPrefix+'explorer-item-text">{text}</div></div></div></tpl>'},store:null,tree:{xtype:"treepanel",reference:"tree",region:"west",width:200}},renderConfig:{selection:null},layout:"border",referenceHolder:!0,defaultListenerScope:!0,cls:Ext.baseCSSPrefix+"explorer",initComponent:function(){this.getStore()||Ext.raise("Ext.ux.Explorer requires a store."),this.dockedItems=[this.getBreadcrumb()],this.items=[this.getTree(),this.getContentView()],this.callParent()},applyBreadcrumb:function(e){var t=this.getStore();return(e=Ext.create(Ext.apply({store:t,selection:t.getRoot()},e))).on("selectionchange","_onBreadcrumbSelectionChange",this),e},applyContentView:function(e){var t=this.contentStore=new Ext.data.Store({model:this.getStore().model});return e=Ext.create(Ext.apply({store:t},e))},applyTree:function(e){return(e=Ext.create(Ext.apply({store:this.getStore()},e))).on("selectionchange","_onTreeSelectionChange",this),e},updateSelection:function(e){var t,i,n=this.getReferences(),r=n.breadcrumb,o=n.tree,a=o.getSelectionModel(),s=this.contentStore;r.getSelection()!==e&&r.setSelection(e),a.getSelection()[0]!==e&&(a.select([e]),(t=e.parentNode)&&t.expand(),(i=o.getView()).scrollRowIntoView(i.getRow(e))),s.removeAll(),s.add(e.hasChildNodes()?e.childNodes:[e])},updateStore:function(e){this.getBreadcrumb().setStore(e)},privates:{_onTreeSelectionChange:function(e,t){this.setSelection(t[0])},_onBreadcrumbSelectionChange:function(e,t){this.setSelection(t)}}}),Ext.define("Ext.ux.FieldReplicator",{alias:"plugin.fieldreplicator",init:function(e){e.replicatorId||(e.replicatorId=Ext.id()),e.on("blur",this.onBlur,this)},onBlur:function(e){var t,i,n=e.ownerCt,r=e.replicatorId,o=Ext.isEmpty(e.getRawValue()),a=n.query("[replicatorId="+r+"]"),s=a[a.length-1]===e;o&&!s?Ext.defer(e.destroy,10,e):!o&&s&&(e.onReplicate&&e.onReplicate(),t=e.cloneConfig({replicatorId:r}),i=n.items.indexOf(e),n.add(i+1,t))}}),Ext.define("Ext.ux.GMapPanel",{extend:"Ext.panel.Panel",alias:"widget.gmappanel",requires:["Ext.window.MessageBox"],initComponent:function(){Ext.applyIf(this,{plain:!0,gmapType:"map",border:!1}),this.callParent()},onBoxReady:function(){var e=this.center;this.callParent(arguments),e?e.geoCodeAddr?this.lookupCode(e.geoCodeAddr,e.marker):this.createMap(e):Ext.raise("center is required")},createMap:function(e,t){var i=Ext.apply({},this.mapOptions);i=Ext.applyIf(i,{zoom:14,center:e,mapTypeId:google.maps.MapTypeId.HYBRID}),this.gmap=new google.maps.Map(this.body.dom,i),t&&this.addMarker(Ext.applyIf(t,{position:e})),Ext.each(this.markers,this.addMarker,this),this.fireEvent("mapready",this,this.gmap)},addMarker:function(e){var i;return(e=Ext.apply({map:this.gmap},e)).position||(e.position=new google.maps.LatLng(e.lat,e.lng)),i=new google.maps.Marker(e),Ext.Object.each(e.listeners,function(e,t){google.maps.event.addListener(i,e,t)}),i},lookupCode:function(e,t){this.geocoder=new google.maps.Geocoder,this.geocoder.geocode({address:e},Ext.Function.bind(this.onLookupComplete,this,[t],!0))},onLookupComplete:function(e,t,i){"OK"===t?this.createMap(e[0].geometry.location,i):Ext.MessageBox.alert("Error",'An error occured: "'+t+'"')},afterComponentLayout:function(e,t){this.callParent(arguments),this.redraw()},redraw:function(){var e=this.gmap;e&&google.maps.event.trigger(e,"resize")}}),Ext.define("Ext.ux.IFrame",{extend:"Ext.Component",alias:"widget.uxiframe",loadMask:"Loading...",src:"about:blank",renderTpl:['<iframe src="{src}" id="{id}-iframeEl" data-ref="iframeEl" name="{frameName}" width="100%" height="100%" frameborder="0"></iframe>'],childEls:["iframeEl"],initComponent:function(){this.callParent(),this.frameName=this.frameName||this.id+"-frame"},initEvents:function(){this.callParent(),this.iframeEl.on("load",this.onLoad,this)},initRenderData:function(){return Ext.apply(this.callParent(),{src:this.src,frameName:this.frameName})},getBody:function(){var e=this.getDoc();return e.body||e.documentElement},getDoc:function(){try{return this.getWin().document}catch(e){return null}},getWin:function(){var e=this.frameName;return Ext.isIE?this.iframeEl.dom.contentWindow:window.frames[e]},getFrame:function(){return this.iframeEl.dom},onLoad:function(){this.getDoc()?(this.el.unmask(),this.fireEvent("load",this)):this.src&&(this.el.unmask(),this.fireEvent("error",this))},load:function(e){var t=this.loadMask,i=this.getFrame();!1!==this.fireEvent("beforeload",this,e)&&(t&&this.el&&this.el.mask(t),i.src=this.src=e||this.src)}}),Ext.define("Ext.ux.statusbar.StatusBar",{extend:"Ext.toolbar.Toolbar",xtype:"statusbar",alternateClassName:"Ext.ux.StatusBar",requires:["Ext.toolbar.TextItem"],cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5e3,emptyText:"&#160;",activeThreadId:0,initComponent:function(){var e="right"===this.statusAlign;this.callParent(arguments),this.currIconCls=this.iconCls||this.defaultIconCls,this.statusEl=Ext.create("Ext.toolbar.TextItem",{cls:"x-status-text "+(this.currIconCls||""),text:this.text||this.defaultText||""}),e?(this.cls+=" x-status-right",this.add("->"),this.add(this.statusEl)):(this.insert(0,this.statusEl),this.insert(1,"->"))},setStatus:function(e){var t,i,n;return e=e||{},Ext.suspendLayouts(),Ext.isString(e)&&(e={text:e}),void 0!==e.text&&this.setText(e.text),void 0!==e.iconCls&&this.setIcon(e.iconCls),e.clear&&(t=e.clear,i=this.autoClear,n={useDefaults:!0,anim:!0},Ext.isObject(t)?(t=Ext.applyIf(t,n)).wait&&(i=t.wait):Ext.isNumber(t)?(i=t,t=n):Ext.isBoolean(t)&&(t=n),t.threadId=this.activeThreadId,Ext.defer(this.clearStatus,i,this,[t])),Ext.resumeLayouts(!0),this},clearStatus:function(e){var t,i,n=this,r=n.statusEl;return e=e||{},n.destroyed||e.threadId&&e.threadId!==n.activeThreadId||(t=e.useDefaults?n.defaultText:n.emptyText,i=e.useDefaults&&n.defaultIconCls?n.defaultIconCls:"",e.anim?r.el.puff({remove:!1,useDisplay:!0,callback:function(){r.el.show(),n.setStatus({text:t,iconCls:i})}}):n.setStatus({text:t,iconCls:i})),n},setText:function(e){return this.activeThreadId++,this.text=e||"",this.rendered&&this.statusEl.setText(this.text),this},getText:function(){return this.text},setIcon:function(e){var t=this;return t.activeThreadId++,e=e||"",t.rendered?(t.currIconCls&&(t.statusEl.removeCls(t.currIconCls),t.currIconCls=null),0<e.length&&(t.statusEl.addCls(e),t.currIconCls=e)):t.currIconCls=e,t},showBusy:function(e){return Ext.isString(e)&&(e={text:e}),e=Ext.applyIf(e||{},{text:this.busyText,iconCls:this.busyIconCls}),this.setStatus(e)}}),Ext.define("Ext.ux.LiveSearchGridPanel",{extend:"Ext.grid.Panel",requires:["Ext.toolbar.TextItem","Ext.form.field.Checkbox","Ext.form.field.Text","Ext.ux.statusbar.StatusBar"],searchValue:null,matches:[],currentIndex:null,searchRegExp:null,caseSensitive:!1,regExpMode:!1,matchCls:"x-livesearch-match",defaultStatusText:"Nothing Found",initComponent:function(){var e=this;e.tbar=["Search",{xtype:"textfield",name:"searchField",hideLabel:!0,width:200,listeners:{change:{fn:e.onTextFieldChange,scope:this,buffer:500}}},{xtype:"button",text:"&lt;",tooltip:"Find Previous Row",handler:e.onPreviousClick,scope:e},{xtype:"button",text:"&gt;",tooltip:"Find Next Row",handler:e.onNextClick,scope:e},"-",{xtype:"checkbox",hideLabel:!0,margin:"0 0 0 4px",handler:e.regExpToggle,scope:e},"Regular expression",{xtype:"checkbox",hideLabel:!0,margin:"0 0 0 4px",handler:e.caseSensitiveToggle,scope:e},"Case sensitive"],e.bbar=new Ext.ux.StatusBar({defaultText:e.defaultStatusText,name:"searchStatusBar"}),e.callParent(arguments)},afterRender:function(){this.callParent(arguments),this.textField=this.down("textfield[name=searchField]"),this.statusBar=this.down("statusbar[name=searchStatusBar]"),this.view.on("cellkeydown",this.focusTextField,this)},focusTextField:function(e,t,i,n,r,o,a,s){a.getKey()===a.S&&(a.preventDefault(),this.textField.focus())},tagsRe:/<[^>]*>/gm,tagsProtect:"",getSearchValue:function(){var e=this.textField.getValue();if(""===e)return null;if(this.regExpMode){try{new RegExp(e)}catch(e){return this.statusBar.setStatus({text:e.message,iconCls:"x-status-error"}),null}if("^"===e||"$"===e)return null}else e=Ext.String.escapeRegex(e);return e},onTextFieldChange:function(){var s=this,l=0,t=s.view,i=s.visibleColumnManager.getColumns();t.refresh(),s.statusBar.setStatus({text:s.defaultStatusText,iconCls:""}),s.searchValue=s.getSearchValue(),s.matches=[],(s.currentIndex=null)!==s.searchValue&&(s.searchRegExp=new RegExp(s.getSearchValue(),"g"+(s.caseSensitive?"":"i")),s.store.each(function(o,e){var a=t.getNode(o);a&&Ext.Array.forEach(i,function(t){var e,i,n,r=Ext.fly(a).down(t.getCellInnerSelector(),!0);r&&(e=r.innerHTML.match(s.tagsRe),i=(i=r.innerHTML.replace(s.tagsRe,s.tagsProtect)).replace(s.searchRegExp,function(e){return++l,n||(s.matches.push({record:o,column:t}),n=!0),'<span class="'+s.matchCls+'">'+e+"</span>"},s),Ext.each(e,function(e){i=i.replace(s.tagsProtect,e)}),r.innerHTML=i)})},s),l&&(s.currentIndex=0,s.gotoCurrent(),s.statusBar.setStatus({text:Ext.String.format("{0} match{1} found.",l,1===l?"es":""),iconCls:"x-status-valid"}))),null===s.currentIndex&&(s.getSelectionModel().deselectAll(),s.textField.focus())},onPreviousClick:function(){var e=this.matches.length,t=this.currentIndex;e&&(this.currentIndex=0===t?e-1:t-1,this.gotoCurrent())},onNextClick:function(){var e=this.matches.length,t=this.currentIndex;e&&(this.currentIndex=t===e-1?0:t+1,this.gotoCurrent())},caseSensitiveToggle:function(e,t){this.caseSensitive=t,this.onTextFieldChange()},regExpToggle:function(e,t){this.regExpMode=t,this.onTextFieldChange()},privates:{gotoCurrent:function(){var e=this.matches[this.currentIndex];this.getNavigationModel().setPosition(e.record,e.column),this.getSelectionModel().select(e.record)}}}),Ext.define("Ext.ux.PreviewPlugin",{extend:"Ext.plugin.Abstract",alias:"plugin.preview",requires:["Ext.grid.feature.RowBody"],hideBodyCls:"x-grid-row-body-hidden",bodyField:"",previewExpanded:!0,setCmp:function(e){this.callParent(arguments);function t(e,t){t.previewExpanded=i.previewExpanded,t.featuresMC.add(n),n.init(e)}var i=this,a=i.cmp=e.isXType("gridview")?e.grid:e,s=i.bodyField,l=i.hideBodyCls,n=Ext.create("Ext.grid.feature.RowBody",{grid:a,getAdditionalData:function(e,t,i,n){var r=Ext.grid.feature.RowBody.prototype.getAdditionalData,o={rowBody:e[s],rowBodyCls:a.getView().previewExpanded?"":l};return Ext.isFunction(r)&&Ext.apply(o,r.apply(this,arguments)),o}});a.view?t(a,a.view):a.on({viewcreated:t,single:!0})},toggleExpanded:function(e){var t=this.getCmp(),i=t&&t.getView(),n=i.bufferedRenderer,r=i.scrollManager;t&&i&&e!==i.previewExpanded&&(this.previewExpanded=i.previewExpanded=!!e,i.refreshView(),r&&(n?n.stretchView(i,n.getScrollHeight(!0)):r.refresh(!0)))}}),Ext.define("Ext.ux.ProgressBarPager",{alias:"plugin.ux-progressbarpager",requires:["Ext.ProgressBar"],width:225,defaultText:"Loading...",defaultAnimCfg:{duration:1e3,easing:"bounceOut"},constructor:function(e){e&&Ext.apply(this,e)},init:function(e){var t;e.displayInfo&&((t=(this.parent=e).child("#displayItem"))&&e.remove(t,!0),this.progressBar=Ext.create("Ext.ProgressBar",{text:this.defaultText,width:this.width,animate:this.defaultAnimCfg,style:{cursor:"pointer"},listeners:{el:{scope:this,click:this.handleProgressBarClick}}}),e.displayItem=this.progressBar,e.add(e.displayItem),Ext.apply(e,this.parentOverrides))},handleProgressBarClick:function(e){var t=this.parent,i=t.displayItem,n=this.progressBar.getBox(),r=e.getXY()[0]-n.x,o=t.store,a=t.pageSize||o.pageSize,s=Math.ceil(o.getTotalCount()/a),l=Math.max(Math.ceil(r/(i.width/s)),1);o.loadPage(l)},parentOverrides:{updateInfo:function(){if(this.displayItem){var e=this.store.getCount(),t=this.getPageData(),i=0===e?this.emptyMsg:Ext.String.format(this.displayMsg,t.fromRecord,t.toRecord,this.store.getTotalCount()),n=0<t.pageCount?t.currentPage/t.pageCount:0;this.displayItem.updateProgress(n,i,this.animate||this.defaultAnimConfig)}}}}),Ext.define("Ext.ux.RowExpander",{extend:"Ext.grid.plugin.RowExpander"}),Ext.define("Ext.ux.SlidingPager",{alias:"plugin.ux-slidingpager",requires:["Ext.slider.Single","Ext.slider.Tip"],constructor:function(e){e&&Ext.apply(this,e)},init:function(i){var n,e=i.items.indexOf(i.child("#inputItem"));Ext.each(i.items.getRange(e-2,e+2),function(e){e.hide()}),n=Ext.create("Ext.slider.Single",{width:114,minValue:1,maxValue:1,hideLabel:!0,tipText:function(e){return Ext.String.format("Page <b>{0}</b> of <b>{1}</b>",e.value,e.slider.maxValue)},listeners:{changecomplete:function(e,t){i.store.loadPage(t)}}}),i.insert(e+1,n),i.on({change:function(e,t){n.setMaxValue(t.pageCount),n.setValue(t.currentPage)}})}}),Ext.define("Ext.ux.Spotlight",{baseCls:"x-spotlight",animate:!0,duration:250,easing:null,active:!1,constructor:function(e){Ext.apply(this,e)},createElements:function(){var e=this,t=e.baseCls,i=Ext.getBody();e.right=i.createChild({cls:t}),e.left=i.createChild({cls:t}),e.top=i.createChild({cls:t}),e.bottom=i.createChild({cls:t}),e.all=Ext.create("Ext.CompositeElement",[e.right,e.left,e.top,e.bottom])},show:function(e,t,i){var n=this;n.el=Ext.get(e),n.right||n.createElements(),n.active?n.applyBounds(!1,!1):(n.all.setDisplayed(""),n.active=!0,Ext.on("resize",n.syncSize,n),n.applyBounds(n.animate,!1))},hide:function(e,t){Ext.un("resize",this.syncSize,this),this.applyBounds(this.animate,!0)},syncSize:function(){this.applyBounds(!1,!1)},applyBounds:function(e,t){var i,n,r,o=this,a=o.el.getBox(),s=Ext.Element.getViewportWidth(),l=Ext.Element.getViewportHeight();i={right:{x:a.right,y:l,width:s-a.right,height:0},left:{x:0,y:0,width:a.x,height:0},top:{x:s,y:0,width:0,height:a.y},bottom:{x:0,y:a.y+a.height,width:0,height:l-(a.y+a.height)+"px"}},n={right:{x:a.right,y:a.y,width:s-a.right+"px",height:l-a.y+"px"},left:{x:0,y:0,width:a.x+"px",height:a.y+a.height+"px"},top:{x:a.x,y:0,width:s-a.x+"px",height:a.y+"px"},bottom:{x:0,y:a.y+a.height,width:a.x+a.width+"px",height:l-(a.y+a.height)+"px"}},t&&(r=Ext.clone(i),i=n,n=r),e?Ext.Array.forEach(["right","left","top","bottom"],function(e){o[e].setBox(i[e]),o[e].animate({duration:o.duration,easing:o.easing,to:n[e]})},this):Ext.Array.forEach(["right","left","top","bottom"],function(e){o[e].setBox(Ext.apply(i[e],n[e])),o[e].repaint()},this)},destroy:function(){Ext.destroy(this.right,this.left,this.top,this.bottom),delete this.el,delete this.all,this.callParent()}}),Ext.define("Ext.ux.TabCloseMenu",{extend:"Ext.plugin.Abstract",alias:"plugin.tabclosemenu",mixins:{observable:"Ext.util.Observable"},closeTabText:"Close Tab",showCloseOthers:!0,closeOtherTabsText:"Close Other Tabs",showCloseAll:!0,closeAllTabsText:"Close All Tabs",extraItemsHead:null,extraItemsTail:null,constructor:function(e){this.callParent([e]),this.mixins.observable.constructor.call(this,e)},init:function(e){this.tabPanel=e,this.tabBar=e.down("tabbar"),this.mon(this.tabPanel,{scope:this,afterlayout:this.onAfterLayout,single:!0})},onAfterLayout:function(){this.mon(this.tabBar.el,{scope:this,contextmenu:this.onContextMenu,delegate:".x-tab"})},destroy:function(){Ext.destroy(this.menu),this.callParent()},onContextMenu:function(e,t){var i=this,n=i.createMenu(),r=!0,o=!0,a=i.tabBar.getChildByElement(t),s=i.tabBar.items.indexOf(a);i.item=i.tabPanel.getComponent(s),n.child("#close").setDisabled(!i.item.closable),(i.showCloseAll||i.showCloseOthers)&&(i.tabPanel.items.each(function(e){return!e.closable||(r=!1,e===i.item)||(o=!1)}),i.showCloseAll&&n.child("#closeAll").setDisabled(r),i.showCloseOthers&&n.child("#closeOthers").setDisabled(o)),e.preventDefault(),i.fireEvent("beforemenu",n,i.item,i),n.showAt(e.getXY())},createMenu:function(){var e,t=this;return t.menu||(e=[{itemId:"close",text:t.closeTabText,scope:t,handler:t.onClose}],(t.showCloseAll||t.showCloseOthers)&&e.push("-"),t.showCloseOthers&&e.push({itemId:"closeOthers",text:t.closeOtherTabsText,scope:t,handler:t.onCloseOthers}),t.showCloseAll&&e.push({itemId:"closeAll",text:t.closeAllTabsText,scope:t,handler:t.onCloseAll}),t.extraItemsHead&&(e=t.extraItemsHead.concat(e)),t.extraItemsTail&&(e=e.concat(t.extraItemsTail)),t.menu=Ext.create("Ext.menu.Menu",{items:e,listeners:{hide:t.onHideMenu,scope:t}})),t.menu},onHideMenu:function(){this.fireEvent("aftermenu",this.menu,this)},onClose:function(){this.tabPanel.remove(this.item)},onCloseOthers:function(){this.doClose(!0)},onCloseAll:function(){this.doClose(!1)},doClose:function(t){var i=[];this.tabPanel.items.each(function(e){e.closable&&(t&&e===this.item||i.push(e))},this),Ext.suspendLayouts(),Ext.Array.forEach(i,function(e){this.tabPanel.remove(e)},this),Ext.resumeLayouts(!0)}}),Ext.define("Ext.ux.TabReorderer",{extend:"Ext.ux.BoxReorderer",alias:"plugin.tabreorderer",itemSelector:"."+Ext.baseCSSPrefix+"tab",init:function(e){this.callParent([e.getTabBar()]),e.onAdd=Ext.Function.createSequence(e.onAdd,this.onAdd)},onBoxReady:function(){var e,t,i,n=0;for(this.callParent(arguments),i=(e=this.container.items.items).length;n<i;n++)(t=e[n]).card&&(t.reorderable=t.card.reorderable)},onAdd:function(e,t){e.tab.reorderable=e.reorderable},afterBoxReflow:function(){Ext.ux.BoxReorderer.prototype.afterBoxReflow.apply(this,arguments),this.dragCmp&&(this.container.tabPanel.setActiveTab(this.dragCmp.card),this.container.tabPanel.move(this.dragCmp.card,this.curIndex))}}),Ext.ns("Ext.ux"),Ext.define("Ext.ux.TabScrollerMenu",{alias:"plugin.tabscrollermenu",requires:["Ext.menu.Menu"],pageSize:10,maxText:15,menuPrefixText:"Items",constructor:function(e){Ext.apply(this,e)},init:function(e){var t=this;(t.tabPanel=e).on({render:function(){t.tabBar=e.tabBar,t.layout=t.tabBar.layout,t.layout.overflowHandler.handleOverflow=t.showButton.bind(t),t.layout.overflowHandler.clearOverflow=Ext.Function.createSequence(t.layout.overflowHandler.clearOverflow,t.hideButton,t)},destroy:t.destroy,scope:t,single:!0})},showButton:function(){var e,t,i=this;return e=Ext.getClass(i.layout.overflowHandler).prototype.handleOverflow.apply(i.layout.overflowHandler,arguments),t=i.menuButton,1<i.tabPanel.items.getCount()?(t||((t=i.menuButton=i.tabBar.body.createChild({cls:Ext.baseCSSPrefix+"tab-tabmenu-right"},i.tabBar.body.child("."+Ext.baseCSSPrefix+"box-scroller-right"))).addClsOnOver(Ext.baseCSSPrefix+"tab-tabmenu-over"),t.on("click",i.showTabsMenu,i)),t.setVisibilityMode(Ext.dom.Element.DISPLAY),t.show(),e.reservedSpace+=t.getWidth()):i.hideButton(),e},hideButton:function(){this.menuButton&&this.menuButton.hide()},getPageSize:function(){return this.pageSize},setPageSize:function(e){this.pageSize=e},getMaxText:function(){return this.maxText},setMaxText:function(e){this.maxText=e},getMenuPrefixText:function(){return this.menuPrefixText},setMenuPrefixText:function(e){this.menuPrefixText=e},showTabsMenu:function(e){var t;this.tabsMenu?this.tabsMenu.removeAll():this.tabsMenu=new Ext.menu.Menu,this.generateTabMenuItems(),(t=Ext.get(e.getTarget()).getXY())[1]+=24,this.tabsMenu.showAt(t)},generateTabMenuItems:function(){var e,t,i,n,r,o,a,s,l,d=this.tabPanel,u=d.getActiveTab(),c=d.items.getRange(),h=this.getPageSize(),f=this.tabsMenu;if(f.suspendLayouts(),e=(c=Ext.Array.filter(c,function(e){return e.id!==u.id&&(!e.hidden||!!e.hiddenByLayout)})).length,t=Math.floor(e/h),i=e%h,h<e){for(n=0;n<t;n++){for(r=(n+1)*h,o=[],a=0;a<h;a++)s=c[a+r-h],o.push(this.autoGenMenuItem(s));f.add({text:this.getMenuPrefixText()+" "+(r-h+1)+" - "+r,menu:o})}if(0<i){for(o=[],n=l=t*h;n<e;n++)s=c[n],o.push(this.autoGenMenuItem(s));this.tabsMenu.add({text:this.menuPrefixText+" "+(1+l)+" - "+(l+o.length),menu:o})}}else for(n=0;n<e;++n)f.add(this.autoGenMenuItem(c[n]));f.resumeLayouts(!0)},autoGenMenuItem:function(e){var t=this.getMaxText();return{text:Ext.util.Format.ellipsis(e.title,t),handler:this.showTabFromMenu,scope:this,disabled:e.disabled,tabToShow:e,iconCls:e.iconCls}},showTabFromMenu:function(e){this.tabPanel.setActiveTab(e.tabToShow)},destroy:function(){Ext.destroy(this.tabsMenu,this.menuButton),this.callParent()}}),Ext.define("Ext.ux.ToolbarDroppable",{constructor:function(e){Ext.apply(this,e)},init:function(e){this.toolbar=e,this.toolbar.on({scope:this,render:this.createDropTarget})},createDropTarget:function(){this.dropTarget=Ext.create("Ext.dd.DropTarget",this.toolbar.getEl(),{notifyOver:this.notifyOver.bind(this),notifyDrop:this.notifyDrop.bind(this)})},addDDGroup:function(e){this.dropTarget.addToGroup(e)},calculateEntryIndex:function(e){for(var t,i=0,n=this.toolbar.items.items,r=n.length,o=e.getXY()[0],a=0;a<r;a++){if(o<(t=n[a].getEl()).getXY()[0]+t.getWidth()/2){i=a;break}i=a+1}return i},canDrop:function(e){return!0},notifyOver:function(e,t,i){return this.canDrop.apply(this,arguments)?this.dropTarget.dropAllowed:this.dropTarget.dropNotAllowed},notifyDrop:function(e,t,i){var n,r=this.canDrop(e,t,i),o=this.toolbar;return r&&(n=this.calculateEntryIndex(t),o.insert(n,this.createItem(i)),this.afterLayout()),r},createItem:function(e){Ext.raise("The createItem method must be implemented in the ToolbarDroppable plugin")},afterLayout:Ext.emptyFn}),Ext.define("Ext.ux.TreePicker",{extend:"Ext.form.field.Picker",xtype:"treepicker",uses:["Ext.tree.Panel"],triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",config:{store:null,displayField:null,columns:null,selectOnTab:!0,maxPickerHeight:300,minPickerHeight:100},editable:!1,initComponent:function(){this.callParent(arguments),this.mon(this.store,{scope:this,load:this.onLoad,update:this.onUpdate})},createPicker:function(){var e=this,t=new Ext.tree.Panel({baseCls:Ext.baseCSSPrefix+"boundlist",shrinkWrapDock:2,store:e.store,floating:!0,displayField:e.displayField,columns:e.columns,minHeight:e.minPickerHeight,maxHeight:e.maxPickerHeight,manageHeight:!1,shadow:!1,listeners:{scope:e,itemclick:e.onItemClick,itemkeydown:e.onPickerKeyDown}}),i=t.getView();return Ext.isIE9&&Ext.isStrict&&i.on({scope:e,highlightitem:e.repaintPickerView,unhighlightitem:e.repaintPickerView,afteritemexpand:e.repaintPickerView,afteritemcollapse:e.repaintPickerView}),t},repaintPickerView:function(){var e=this.picker.getView().getEl().dom.style;e.display=e.display},onItemClick:function(e,t,i,n,r){this.selectItem(t)},onPickerKeyDown:function(e,t,i,n,r){var o=r.getKey();(o===r.ENTER||o===r.TAB&&this.selectOnTab)&&this.selectItem(t)},selectItem:function(e){this.setValue(e.getId()),this.fireEvent("select",this,e),this.collapse()},onExpand:function(){var e,t=this.picker,i=t.store,n=this.value;n&&(e=i.getNodeById(n)),e=e||i.getRoot(),t.ensureVisible(e,{select:!0,focus:!0})},setValue:function(e){var t,i=this;return i.value=e,i.store.loading||(t=e?i.store.getNodeById(e):i.store.getRoot(),void 0===e?(t=i.store.getRoot(),i.value=t.getId()):t=i.store.getNodeById(e),i.setRawValue(t?t.get(i.displayField):"")),i},getSubmitValue:function(){return this.value},getValue:function(){return this.value},onLoad:function(){var e=this.value;e&&this.setValue(e)},onUpdate:function(e,t,i,n){var r=this.displayField;"edit"===i&&n&&Ext.Array.contains(n,r)&&this.value===t.getId()&&this.setRawValue(t.get(r))}}),Ext.define("Ext.ux.colorpick.Selection",{mixinId:"colorselection",config:{format:"hex6",value:"FF0000",color:null,previousColor:null,alphaDecimalFormat:"#.##"},applyColor:function(e){var t=e;return Ext.isString(t)&&(t=Ext.ux.colorpick.ColorUtils.parseColor(e,this.getAlphaDecimalFormat())),t},applyFormat:function(e){if(Ext.ux.colorpick.ColorUtils.formats.hasOwnProperty(e))return e;Ext.raise('The specified format "'+e+'" is invalid.')},applyValue:function(e){var t=Ext.ux.colorpick.ColorUtils.parseColor(e||"#000000",this.getAlphaDecimalFormat());return this.formatColor(t)},formatColor:function(e){return Ext.ux.colorpick.ColorUtils.formats[this.getFormat()](e)},updateColor:function(e){this.syncing||(this.syncing=!0,this.setValue(this.formatColor(e)),this.syncing=!1)},updateValue:function(e,t){this.syncing||(this.syncing=!0,this.setColor(e),this.syncing=!1),this.fireEvent("change",this,e,t)}}),Ext.define("Ext.ux.colorpick.ColorUtils",function(o){var e=Ext.isIE&&Ext.ieVersion<10;return{singleton:!0,constructor:function(){o=this},backgroundTpl:e?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#{alpha}{hex}', endColorstr='#{alpha}{hex}');":"background: {rgba};",setBackground:e?function(e,t){var i,n,r;e&&(i=Ext.XTemplate.getTpl(o,"backgroundTpl"),n={hex:o.rgb2hex(t.r,t.g,t.b),alpha:Math.floor(255*t.a).toString(16)},r=i.apply(n),e.applyStyles(r))}:function(e,t){var i,n,r;e&&(i=Ext.XTemplate.getTpl(o,"backgroundTpl"),n={rgba:o.getRGBAString(t)},r=i.apply(n),e.applyStyles(r))},formats:{RGB:function(e){return o.getRGBString(e).toUpperCase()},RGBA:function(e){return o.getRGBAString(e).toUpperCase()},HEX6:function(e){return o.rgb2hex(e.r,e.g,e.b)},HEX8:function(e){var t=o.rgb2hex(e.r,e.g,e.b),i=Math.round(255*e.a).toString(16);return i.length<2&&(t+="0"),t+=i.toUpperCase()}},hexRe:/^#?(([0-9a-f]{8})|((?:[0-9a-f]{3}){1,2}))$/i,rgbaAltRe:/^rgba\(\s*([\w#\d]+)\s*,\s*([\d\.]+)\s*\)$/i,rgbaRe:/^rgba\(\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*\)$/i,rgbRe:/^rgb\(\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*\)$/i,parseColor:function(e,t){if(!e)return null;var i,n,r,o=this.colorMap[e];if(o)n={r:o[0],g:o[1],b:o[2],a:1};else if("transparent"===e)n={r:0,g:0,b:0,a:0};else if(i=this.hexRe.exec(e))switch((i=i[1]).length){default:return null;case 3:n={r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:1};break;case 6:case 8:n={r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:parseInt(i.substr(6,2)||"ff",16)/255}}else if(i=this.rgbaRe.exec(e))n={r:parseFloat(i[1]),g:parseFloat(i[2]),b:parseFloat(i[3]),a:parseFloat(i[4])};else{if(i=this.rgbaAltRe.exec(e))return(n=this.parseColor(i[1])).a=parseFloat(i[2]),n;if(!(i=this.rgbRe.exec(e)))return null;n={r:parseFloat(i[1]),g:parseFloat(i[2]),b:parseFloat(i[3]),a:1}}return t&&(n.a=Ext.util.Format.number(n.a,t)),r=this.rgb2hsv(n.r,n.g,n.b),Ext.apply(n,r)},isValid:function(e){return null!==o.parseColor(e)},getRGBAString:function(e){return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},getRGBString:function(e){return"rgb("+e.r+","+e.g+","+e.b+")"},hsv2rgb:function(e,t,i){360===(e*=360)&&(e=0);var n,r=i*t,o=e/60,a=r*(1-Math.abs(o%2-1)),s=[0,0,0];switch(Math.floor(o)){case 0:s=[r,a,0];break;case 1:s=[a,r,0];break;case 2:s=[0,r,a];break;case 3:s=[0,a,r];break;case 4:s=[a,0,r];break;case 5:s=[r,0,a];break;default:console.error("unknown color "+e+" "+t+" "+i)}return n=i-r,s[0]+=n,s[1]+=n,s[2]+=n,s[0]=Math.round(255*s[0]),s[1]=Math.round(255*s[1]),s[2]=Math.round(255*s[2]),{r:s[0],g:s[1],b:s[2]}},rgb2hsv:function(e,t,i){e/=255,t/=255,i/=255;var n,r=Math.max(e,t,i),o=r-Math.min(e,t,i),a=0,s=0;return 0!=o&&(r===e?a=(t-i)/o%6:r===t?a=(i-e)/o+2:r===i&&(a=(e-t)/o+4)),360===(n=60*a)&&(n=0),0!=o&&(s=o/r),(n/=360)<0&&(n+=1),{h:n,s:s,v:r}},rgb2hex:function(e,t,i){return e=e.toString(16),t=t.toString(16),i=i.toString(16),e.length<2&&(e="0"+e),t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),(e+t+i).toUpperCase()},colorMap:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}}},function(e){var t=e.formats,i={};t["#HEX6"]=function(e){return"#"+t.HEX6(e)},t["#HEX8"]=function(e){return"#"+t.HEX8(e)},Ext.Object.each(t,function(e,t){i[e.toLowerCase()]=function(e){return t(e).toLowerCase()}}),Ext.apply(t,i)}),Ext.define("Ext.ux.colorpick.ColorMapController",{extend:"Ext.app.ViewController",alias:"controller.colorpickercolormapcontroller",requires:["Ext.ux.colorpick.ColorUtils"],onFirstBoxReady:function(){var e=this.getView(),t=e.down("#dragHandle").dd;t.constrain=!0,t.constrainTo=e.getEl(),t.initialConstrainTo=t.constrainTo,t.on("drag",Ext.bind(this.onHandleDrag,this)),this.mon(e.getEl(),{mousedown:this.onMouseDown,dragstart:this.onDragStart,scope:this})},onHandleDrag:function(e,t){var i=this.getView(),n=i.down("#dragHandle"),r=n.getX()-i.getX(),o=n.getY()-i.getY(),a=i.getEl(),s=r/a.getWidth(),l=o/a.getHeight();.99<s&&(s=1),.99<l&&(l=1),i.fireEvent("handledrag",s,l)},onMouseDown:function(e){var t=this.getView().down("#dragHandle");t.setY(e.getY()),t.setX(e.getX()),this.onHandleDrag(),t.dd.onMouseDown(e,t.dd.el)},onDragStart:function(e){var t=this.getView().down("#dragHandle");t.dd.onDragStart(e,t.dd.el)},onMapClick:function(e){var t,i,n=this.getView(),r=n.down("#dragHandle"),o=n.getXY(),a=e.getXY();t=a[0]-o[0],i=a[1]-o[1],r.getEl().setStyle({left:t+"px",top:i+"px"}),this.onHandleDrag()},onColorBindingChanged:function(e){var t,i,n,r=this.getViewModel().get("selectedColor"),o=this.getView(),a=o.down("#dragHandle"),s=o.getEl(),l=s.getWidth(),d=s.getHeight();i=l*(t=Ext.ux.colorpick.ColorUtils.rgb2hsv(r.r,r.g,r.b)).s,n=d*(1-t.v),a.getEl().setStyle({left:i+"px",top:n+"px"})},onHueBindingChanged:function(e){var t,i;t=Ext.ux.colorpick.ColorUtils.hsv2rgb(e,1,1),i=Ext.ux.colorpick.ColorUtils.rgb2hex(t.r,t.g,t.b),this.getView().getEl().applyStyles({"background-color":"#"+i})}}),Ext.define("Ext.ux.colorpick.ColorMap",{extend:"Ext.container.Container",alias:"widget.colorpickercolormap",controller:"colorpickercolormapcontroller",requires:["Ext.ux.colorpick.ColorMapController"],cls:Ext.baseCSSPrefix+"colorpicker-colormap",items:[{xtype:"component",cls:Ext.baseCSSPrefix+"colorpicker-colormap-draghandle-container",itemId:"dragHandle",width:1,height:1,draggable:!0,html:'<div class="'+Ext.baseCSSPrefix+'colorpicker-colormap-draghandle"></div>'}],listeners:{boxready:{single:!0,fn:"onFirstBoxReady",scope:"controller"},colorbindingchanged:{fn:"onColorBindingChanged",scope:"controller"},huebindingchanged:{fn:"onHueBindingChanged",scope:"controller"}},afterRender:function(){var e=this.mapGradientUrl,t=this.el;this.callParent(),e||(0===(e=(e=t.getStyle("background-image")).substring(4,e.length-1)).indexOf('"')&&(e=e.substring(1,e.length-1)),Ext.ux.colorpick.ColorMap.prototype.mapGradientUrl=e),t.setStyle("background-image","none"),(t=this.layout.getElementTarget()).createChild({tag:"img",cls:Ext.baseCSSPrefix+"colorpicker-colormap-blender",src:e})},setPosition:function(e){var t=this.down("#dragHandle");t.dd&&t.dd.constrain&&(void 0!==t.dd.dragEnded&&!t.dd.dragEnded||this.fireEvent("colorbindingchanged",e))},setHue:function(e){this.getEl()&&this.fireEvent("huebindingchanged",e)}}),Ext.define("Ext.ux.colorpick.SelectorModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.colorpick-selectormodel",requires:["Ext.ux.colorpick.ColorUtils"],data:{selectedColor:{r:255,g:255,b:255,h:0,s:1,v:1,a:1},previousColor:{r:0,g:0,b:0,h:0,s:1,v:1,a:1}},formulas:{hex:{get:function(e){var t=e("selectedColor.r").toString(16),i=e("selectedColor.g").toString(16),n=e("selectedColor.b").toString(16);return"#"+Ext.ux.colorpick.ColorUtils.rgb2hex(t,i,n)},set:function(e){var t=Ext.ux.colorpick.ColorUtils.parseColor(e);this.changeRGB(t)}},red:{get:function(e){return e("selectedColor.r")},set:function(e){this.changeRGB({r:e})}},green:{get:function(e){return e("selectedColor.g")},set:function(e){this.changeRGB({g:e})}},blue:{get:function(e){return e("selectedColor.b")},set:function(e){this.changeRGB({b:e})}},hue:{get:function(e){return 360*e("selectedColor.h")},set:function(e){this.changeHSV({h:e/360})}},saturation:{get:function(e){return 100*e("selectedColor.s")},set:function(e){this.changeHSV({s:e/100})}},value:{get:function(e){return 100*e("selectedColor.v")},set:function(e){this.changeHSV({v:e/100})}},alpha:{get:function(e){return 100*e("selectedColor.a")},set:function(e){this.set("selectedColor",Ext.applyIf({a:e/100},this.data.selectedColor))}}},changeHSV:function(e){var t;Ext.applyIf(e,this.data.selectedColor),t=Ext.ux.colorpick.ColorUtils.hsv2rgb(e.h,e.s,e.v),e.r=t.r,e.g=t.g,e.b=t.b,this.set("selectedColor",e)},changeRGB:function(e){var t;Ext.applyIf(e,this.data.selectedColor),t=Ext.ux.colorpick.ColorUtils.rgb2hsv(e.r,e.g,e.b),e.h=t.h,e.s=t.s,e.v=t.v,this.set("selectedColor",e)}}),Ext.define("Ext.ux.colorpick.SelectorController",{extend:"Ext.app.ViewController",alias:"controller.colorpick-selectorcontroller",requires:["Ext.ux.colorpick.ColorUtils"],destroy:function(){var e=this.getView(),t=e.childViewModel;t&&(t.destroy(),e.childViewModel=null),this.callParent()},changeHSV:function(e){var t,i=this.getView(),n=i.getColor();Ext.applyIf(e,n),t=Ext.ux.colorpick.ColorUtils.hsv2rgb(e.h,e.s,e.v),Ext.apply(e,t),i.setColor(e)},onColorMapHandleDrag:function(e,t){this.changeHSV({s:e,v:1-t})},onValueSliderHandleDrag:function(e){this.changeHSV({v:1-e})},onSaturationSliderHandleDrag:function(e){this.changeHSV({s:1-e})},onHueSliderHandleDrag:function(e){this.changeHSV({h:1-e})},onAlphaSliderHandleDrag:function(e){var t=this.getView(),i=t.getColor(),n=Ext.applyIf({a:1-e},i);t.setColor(n),t.el.repaint()},onPreviousColorSelected:function(e,t){this.getView().setColor(t)},onOK:function(){var e=this.getView();e.fireEvent("ok",e,e.getValue())},onCancel:function(){this.fireViewEvent("cancel",this.getView())},onResize:function(){var e,t,i,n,r=this.getView().childViewModel,o=this.getReferences();this.hasResizedOnce?(e=r.get("hue"),t=r.get("saturation"),i=r.get("value"),n=r.get("alpha"),o.colorMap.setPosition(r.getData()),o.hueSlider.setHue(e),o.satSlider.setSaturation(t),o.valueSlider.setValue(i),o.alphaSlider.setAlpha(n)):this.hasResizedOnce=!0}}),Ext.define("Ext.ux.colorpick.ColorPreview",{extend:"Ext.Component",alias:"widget.colorpickercolorpreview",requires:["Ext.util.Format","Ext.XTemplate"],style:"position: relative",html:'<div class="'+Ext.baseCSSPrefix+'colorpreview-filter" style="height:100%; width:100%; position: absolute;"></div><a class="btn" style="height:100%; width:100%; position: absolute;"></a>',cls:Ext.baseCSSPrefix+"colorpreview",height:256,onRender:function(){this.callParent(arguments),this.mon(this.el.down(".btn"),"click",this.onClick,this)},onClick:function(){this.fireEvent("click",this,this.color)},setColor:function(e){this.getEl()&&(this.color=e,this.applyBgStyle(e))},bgStyleTpl:Ext.create("Ext.XTemplate",Ext.isIE&&Ext.ieVersion<10?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#{hexAlpha}{hex}', endColorstr='#{hexAlpha}{hex}');":"background: {rgba};"),applyBgStyle:function(e){var t,i,n,r,o=Ext.ux.colorpick.ColorUtils,a="."+Ext.baseCSSPrefix+"colorpreview-filter",s=this.getEl().down(a);t=o.rgb2hex(e.r,e.g,e.b),i=Ext.util.Format.hex(Math.floor(255*e.a),2),n=o.getRGBAString(e),r=this.bgStyleTpl.apply({hex:t,hexAlpha:i,rgba:n}),s.applyStyles(r)}}),Ext.define("Ext.ux.colorpick.SliderController",{extend:"Ext.app.ViewController",alias:"controller.colorpick-slidercontroller",boxReady:function(e){var t=this.getDragContainer(),i=this.getDragHandle().dd;i.constrain=!0,i.constrainTo=t.getEl(),i.initialConstrainTo=i.constrainTo,i.on("drag",this.onHandleDrag,this)},getDragHandle:function(){return this.view.lookupReference("dragHandle")},getDragContainer:function(){return this.view.lookupReference("dragHandleContainer")},onHandleDrag:function(e){var t=this.getView(),i=this.getDragContainer(),n=(this.getDragHandle().getY()-i.getY())/i.getEl().getHeight();.99<n&&(n=1),t.fireEvent("handledrag",n)},onMouseDown:function(e){var t=this.getDragHandle(),i=e.getY();t.setY(i),this.onHandleDrag(),t.el.repaint(),t.dd.onMouseDown(e,t.dd.el)},onDragStart:function(e){var t=this.getDragHandle();t.dd.onDragStart(e,t.dd.el)},onMouseUp:function(){this.getDragHandle().dd.dragEnded=!0}}),Ext.define("Ext.ux.colorpick.Slider",{extend:"Ext.container.Container",xtype:"colorpickerslider",controller:"colorpick-slidercontroller",afterRender:function(){var e,t,i;this.callParent(arguments),e=this.width,i=(t=this.lookupReference("dragHandleContainer")).getWidth(),t.el.setStyle("left",(e-i)/2+"px")},baseCls:Ext.baseCSSPrefix+"colorpicker-slider",requires:["Ext.ux.colorpick.SliderController"],referenceHolder:!0,listeners:{element:"el",mousedown:"onMouseDown",mouseup:"onMouseUp",dragstart:"onDragStart"},items:{xtype:"container",cls:Ext.baseCSSPrefix+"colorpicker-draghandle-container",reference:"dragHandleContainer",height:"100%",items:{xtype:"component",cls:Ext.baseCSSPrefix+"colorpicker-draghandle-outer",reference:"dragHandle",width:"100%",height:1,draggable:!0,html:'<div class="'+Ext.baseCSSPrefix+'colorpicker-draghandle"></div>'}},setHue:function(){Ext.raise("Must implement setHue() in a child class!")},getDragHandle:function(){return this.lookupReference("dragHandle")},getDragContainer:function(){return this.lookupReference("dragHandleContainer")}}),Ext.define("Ext.ux.colorpick.SliderAlpha",{extend:"Ext.ux.colorpick.Slider",alias:"widget.colorpickerslideralpha",cls:Ext.baseCSSPrefix+"colorpicker-alpha",requires:["Ext.XTemplate"],gradientStyleTpl:Ext.create("Ext.XTemplate",Ext.isIE&&Ext.ieVersion<10?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#FF{hex}', endColorstr='#00{hex}');":"background: -moz-linear-gradient(top, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);background: -webkit-linear-gradient(top,rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);background: -o-linear-gradient(top, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);background: -ms-linear-gradient(top, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);background: linear-gradient(to bottom, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);"),setAlpha:function(e){var t,i=this.getDragContainer(),n=this.getDragHandle(),r=i.getEl().getHeight();n.dd&&n.dd.constrain&&(void 0!==n.dd.dragEnded&&!n.dd.dragEnded||(t=r*(1-e/100),n.getEl().setStyle({top:t+"px"})))},setColor:function(e){var t,i=this.getDragContainer();this.getEl()&&(t=Ext.ux.colorpick.ColorUtils.rgb2hex(e.r,e.g,e.b),i.getEl().first().applyStyles(this.gradientStyleTpl.apply({hex:t,r:e.r,g:e.g,b:e.b})))}}),Ext.define("Ext.ux.colorpick.SliderSaturation",{extend:"Ext.ux.colorpick.Slider",alias:"widget.colorpickerslidersaturation",cls:Ext.baseCSSPrefix+"colorpicker-saturation",gradientStyleTpl:Ext.create("Ext.XTemplate",Ext.isIE&&Ext.ieVersion<10?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#{hex}', endColorstr='#ffffff');":"background: -mox-linear-gradient(top, #{hex} 0%, #ffffff 100%);background: -webkit-linear-gradient(top, #{hex} 0%,#ffffff 100%);background: -o-linear-gradient(top, #{hex} 0%,#ffffff 100%);background: -ms-linear-gradient(top, #{hex} 0%,#ffffff 100%);background: linear-gradient(to bottom, #{hex} 0%,#ffffff 100%);"),setSaturation:function(e){var t,i=this.getDragContainer(),n=this.getDragHandle(),r=i.getEl().getHeight();n.dd&&n.dd.constrain&&(void 0!==n.dd.dragEnded&&!n.dd.dragEnded||(t=r*(1-e/100),n.getEl().setStyle({top:t+"px"})))},setHue:function(e){var t,i,n=this.getDragContainer();this.getEl()&&(t=Ext.ux.colorpick.ColorUtils.hsv2rgb(e,1,1),i=Ext.ux.colorpick.ColorUtils.rgb2hex(t.r,t.g,t.b),n.getEl().applyStyles(this.gradientStyleTpl.apply({hex:i})))}}),Ext.define("Ext.ux.colorpick.SliderValue",{extend:"Ext.ux.colorpick.Slider",alias:"widget.colorpickerslidervalue",cls:Ext.baseCSSPrefix+"colorpicker-value",requires:["Ext.XTemplate"],gradientStyleTpl:Ext.create("Ext.XTemplate",Ext.isIE&&Ext.ieVersion<10?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr='#{hex}', endColorstr='#000000');":"background: -mox-linear-gradient(top, #{hex} 0%, #000000 100%);background: -webkit-linear-gradient(top, #{hex} 0%,#000000 100%);background: -o-linear-gradient(top, #{hex} 0%,#000000 100%);background: -ms-linear-gradient(top, #{hex} 0%,#000000 100%);background: linear-gradient(to bottom, #{hex} 0%,#000000 100%);"),setValue:function(e){var t,i=this.getDragContainer(),n=this.getDragHandle(),r=i.getEl().getHeight();n.dd&&n.dd.constrain&&(void 0!==n.dd.dragEnded&&!n.dd.dragEnded||(t=r*(1-e/100),n.getEl().setStyle({top:t+"px"})))},setHue:function(e){var t,i,n=this.getDragContainer();this.getEl()&&(t=Ext.ux.colorpick.ColorUtils.hsv2rgb(e,1,1),i=Ext.ux.colorpick.ColorUtils.rgb2hex(t.r,t.g,t.b),n.getEl().applyStyles(this.gradientStyleTpl.apply({hex:i})))}}),Ext.define("Ext.ux.colorpick.SliderHue",{extend:"Ext.ux.colorpick.Slider",alias:"widget.colorpickersliderhue",cls:Ext.baseCSSPrefix+"colorpicker-hue",afterRender:function(){var e=this.gradientUrl,t=this.el;this.callParent(),e||(0===(e=(e=t.getStyle("background-image")).substring(4,e.length-1)).indexOf('"')&&(e=e.substring(1,e.length-1)),Ext.ux.colorpick.SliderHue.prototype.gradientUrl=e),t.setStyle("background-image","none"),(t=this.getDragContainer().layout.getElementTarget()).createChild({tag:"img",cls:Ext.baseCSSPrefix+"colorpicker-hue-gradient",src:e})},setHue:function(e){var t,i=this.getDragContainer(),n=this.getDragHandle(),r=i.getEl().getHeight();n.dd&&n.dd.constrain&&(void 0!==n.dd.dragEnded&&!n.dd.dragEnded||(t=r*(1-e),n.getEl().setStyle({top:t+"px"})))}}),Ext.define("Ext.ux.colorpick.Selector",{extend:"Ext.container.Container",xtype:"colorselector",mixins:["Ext.ux.colorpick.Selection"],controller:"colorpick-selectorcontroller",requires:["Ext.layout.container.HBox","Ext.form.field.Text","Ext.form.field.Number","Ext.ux.colorpick.ColorMap","Ext.ux.colorpick.SelectorModel","Ext.ux.colorpick.SelectorController","Ext.ux.colorpick.ColorPreview","Ext.ux.colorpick.Slider","Ext.ux.colorpick.SliderAlpha","Ext.ux.colorpick.SliderSaturation","Ext.ux.colorpick.SliderValue","Ext.ux.colorpick.SliderHue"],config:{hexReadOnly:!0},width:580,height:337,cls:Ext.baseCSSPrefix+"colorpicker",padding:10,layout:{type:"hbox",align:"stretch"},defaultBindProperty:"value",twoWayBindable:["value"],fieldWidth:50,fieldPad:5,showPreviousColor:!1,showOkCancelButtons:!1,listeners:{resize:"onResize"},constructor:function(e){var t=this,i=Ext.Factory.viewModel("colorpick-selectormodel");t.childViewModel=i,t.items=[t.getMapAndHexRGBFields(i),t.getSliderAndHField(i),t.getSliderAndSField(i),t.getSliderAndVField(i),t.getSliderAndAField(i),t.getPreviewAndButtons(i,e)],t.childViewModel.bind("{selectedColor}",function(e){t.setColor(e)}),t.callParent([e])},updateColor:function(e){this.mixins.colorselection.updateColor.call(this,e),this.childViewModel.set("selectedColor",e)},updatePreviousColor:function(e){this.childViewModel.set("previousColor",e)},getMapAndHexRGBFields:function(e){var t={top:0,right:this.fieldPad,bottom:0,left:0},i=this.fieldWidth;return{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",flex:1,layout:{type:"vbox",align:"stretch"},margin:"0 10 0 0",items:[{xtype:"colorpickercolormap",reference:"colorMap",flex:1,bind:{position:{bindTo:"{selectedColor}",deep:!0},hue:"{selectedColor.h}"},listeners:{handledrag:"onColorMapHandleDrag"}},{xtype:"container",layout:"hbox",defaults:{labelAlign:"top",labelSeparator:"",allowBlank:!1,onChange:function(){this.isValid()&&Ext.form.field.Base.prototype.onChange.apply(this,arguments)}},items:[{xtype:"textfield",fieldLabel:"HEX",flex:1,bind:"{hex}",margin:t,regex:/^#[0-9a-f]{6}$/i,readonly:this.getHexReadOnly()},{xtype:"numberfield",fieldLabel:"R",bind:"{red}",width:i,hideTrigger:!0,maxValue:255,minValue:0,margin:t},{xtype:"numberfield",fieldLabel:"G",bind:"{green}",width:i,hideTrigger:!0,maxValue:255,minValue:0,margin:t},{xtype:"numberfield",fieldLabel:"B",bind:"{blue}",width:i,hideTrigger:!0,maxValue:255,minValue:0,margin:0}]}]}},getSliderAndHField:function(e){var t=this.fieldWidth;return{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",width:t,layout:{type:"vbox",align:"stretch"},items:[{xtype:"colorpickersliderhue",reference:"hueSlider",flex:1,bind:{hue:"{selectedColor.h}"},width:t,listeners:{handledrag:"onHueSliderHandleDrag"}},{xtype:"numberfield",fieldLabel:"H",labelAlign:"top",labelSeparator:"",bind:"{hue}",hideTrigger:!0,maxValue:360,minValue:0,allowBlank:!1,margin:0}]}},getSliderAndSField:function(e){var t=this.fieldWidth;return{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",width:t,layout:{type:"vbox",align:"stretch"},margin:{right:this.fieldPad,left:this.fieldPad},items:[{xtype:"colorpickerslidersaturation",reference:"satSlider",flex:1,bind:{saturation:"{saturation}",hue:"{selectedColor.h}"},width:t,listeners:{handledrag:"onSaturationSliderHandleDrag"}},{xtype:"numberfield",fieldLabel:"S",labelAlign:"top",labelSeparator:"",bind:"{saturation}",hideTrigger:!0,maxValue:100,minValue:0,allowBlank:!1,margin:0}]}},getSliderAndVField:function(e){var t=this.fieldWidth;return{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",width:t,layout:{type:"vbox",align:"stretch"},items:[{xtype:"colorpickerslidervalue",reference:"valueSlider",flex:1,bind:{value:"{value}",hue:"{selectedColor.h}"},width:t,listeners:{handledrag:"onValueSliderHandleDrag"}},{xtype:"numberfield",fieldLabel:"V",labelAlign:"top",labelSeparator:"",bind:"{value}",hideTrigger:!0,maxValue:100,minValue:0,allowBlank:!1,margin:0}]}},getSliderAndAField:function(e){var t=this.fieldWidth;return{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",width:t,layout:{type:"vbox",align:"stretch"},margin:{left:this.fieldPad},items:[{xtype:"colorpickerslideralpha",reference:"alphaSlider",flex:1,bind:{alpha:"{alpha}",color:{bindTo:"{selectedColor}",deep:!0}},width:t,listeners:{handledrag:"onAlphaSliderHandleDrag"}},{xtype:"numberfield",fieldLabel:"A",labelAlign:"top",labelSeparator:"",bind:"{alpha}",hideTrigger:!0,maxValue:100,minValue:0,allowBlank:!1,margin:0}]}},getPreviewAndButtons:function(e,t){var i=[{xtype:"colorpickercolorpreview",flex:1,bind:{color:{bindTo:"{selectedColor}",deep:!0}}}];return t.showPreviousColor&&i.push({xtype:"colorpickercolorpreview",flex:1,bind:{color:{bindTo:"{previousColor}",deep:!0}},listeners:{click:"onPreviousColorSelected"}}),t.showOkCancelButtons&&i.push({xtype:"button",text:"OK",margin:"10 0 0 0",padding:"10 0 10 0",handler:"onOK"},{xtype:"button",text:"Cancel",margin:"10 0 0 0",padding:"10 0 10 0",handler:"onCancel"}),{xtype:"container",viewModel:e,width:70,margin:"0 0 0 10",items:i,layout:{type:"vbox",align:"stretch"}}}}),Ext.define("Ext.ux.colorpick.ButtonController",{extend:"Ext.app.ViewController",alias:"controller.colorpick-buttoncontroller",requires:["Ext.window.Window","Ext.layout.container.Fit","Ext.ux.colorpick.Selector","Ext.ux.colorpick.ColorUtils"],afterRender:function(e){e.updateColor(e.getColor())},destroy:function(){var e=this.getView(),t=e.colorPickerWindow;t&&(t.destroy(),e.colorPickerWindow=e.colorPicker=null),this.callParent()},getPopup:function(){var e,t=this.getView(),i=t.colorPickerWindow;return i||(i=Ext.create(t.getPopup()),(t.colorPickerWindow=i).colorPicker=t.colorPicker=e=i.lookupReference("selector"),e.setFormat(t.getFormat()),e.on({ok:"onColorPickerOK",cancel:"onColorPickerCancel",scope:this}),i.on({close:"onColorPickerCancel",scope:this})),i},onClick:function(){var e=this.getView(),t=e.getColor(),i=this.getPopup(),n=i.colorPicker;n.setColor(t),n.setPreviousColor(t),i.showBy(e,"tl-br?")},onColorPickerOK:function(e){var t=this.getView(),i=e.getColor();t.colorPickerWindow.hide(),t.setColor(i)},onColorPickerCancel:function(){this.getView().colorPickerWindow.hide()},syncColor:function(e){var t=this.getView();Ext.ux.colorpick.ColorUtils.setBackground(t.filterEl,e)}}),Ext.define("Ext.ux.colorpick.Button",{extend:"Ext.Component",xtype:"colorbutton",controller:"colorpick-buttoncontroller",mixins:["Ext.ux.colorpick.Selection"],requires:["Ext.ux.colorpick.ButtonController"],baseCls:Ext.baseCSSPrefix+"colorpicker-button",width:20,height:20,childEls:["btnEl","filterEl"],config:{popup:{lazy:!0,$value:{xtype:"window",closeAction:"hide",referenceHolder:!0,minWidth:540,minHeight:200,layout:"fit",header:!1,resizable:!0,items:{xtype:"colorselector",reference:"selector",showPreviousColor:!0,showOkCancelButtons:!0}}}},defaultBindProperty:"value",twoWayBindable:"value",renderTpl:'<div id="{id}-filterEl" data-ref="filterEl" style="height:100%; width:100%; position: absolute;"></div><a id="{id}-btnEl" data-ref="btnEl" style="height:100%; width:100%; position: absolute;"></a>',listeners:{click:"onClick",element:"btnEl"},updateColor:function(e){var t=this.colorPicker;this.mixins.colorselection.updateColor.call(this,e),Ext.ux.colorpick.ColorUtils.setBackground(this.filterEl,e),t&&t.setColor(e)},updateFormat:function(e){var t=this.colorPicker;t&&t.setFormat(e)}}),Ext.define("Ext.ux.colorpick.Field",{extend:"Ext.form.field.Picker",xtype:"colorfield",mixins:["Ext.ux.colorpick.Selection"],requires:["Ext.window.Window","Ext.ux.colorpick.Selector","Ext.ux.colorpick.ColorUtils","Ext.layout.container.Fit"],editable:!1,matchFieldWidth:!1,beforeBodyEl:['<div class="'+Ext.baseCSSPrefix+'colorpicker-field-swatch"><div id="{id}-swatchEl" data-ref="swatchEl" class="'+Ext.baseCSSPrefix+'colorpicker-field-swatch-inner"></div></div>'],cls:Ext.baseCSSPrefix+"colorpicker-field",childEls:["swatchEl"],checkChangeEvents:["change"],config:{popup:{lazy:!0,$value:{xtype:"window",closeAction:"hide",referenceHolder:!0,minWidth:540,minHeight:200,layout:"fit",header:!1,resizable:!0,items:{xtype:"colorselector",reference:"selector",showPreviousColor:!0,showOkCancelButtons:!0}}}},initComponent:function(){this.callParent(),this.on("change",this.onHexChange)},afterRender:function(){this.callParent(),this.updateValue(this.value)},createPicker:function(){var e,t=this.getPopup();return this.colorPickerWindow=t=Ext.create(t),this.colorPicker=e=t.lookupReference("selector"),e.setFormat(this.getFormat()),e.setColor(this.getColor()),e.setHexReadOnly(!this.editable),e.on({ok:"onColorPickerOK",cancel:"onColorPickerCancel",scope:this}),t.on({close:"onColorPickerCancel",scope:this}),this.colorPickerWindow},onColorPickerOK:function(e){this.setColor(e.getColor()),this.collapse()},onColorPickerCancel:function(){this.collapse()},onExpand:function(){var e=this.getColor();this.colorPicker.setPreviousColor(e)},onHexChange:function(e){e.validate()&&this.setValue(e.getValue())},setValue:function(e){Ext.ux.colorpick.ColorUtils.isValid(e)&&(e=this.applyValue(e),this.callParent([e]),this.updateValue(e))},updateFormat:function(e){var t=this.colorPicker;t&&t.setFormat(e)},updateValue:function(e){var t;this.syncing||(this.syncing=!0,this.setColor(e),this.syncing=!1),(t=this.getColor())&&(Ext.ux.colorpick.ColorUtils.setBackground(this.swatchEl,t),this.colorPicker&&this.colorPicker.setColor(t))},validator:function(e){return!!Ext.ux.colorpick.ColorUtils.isValid(e)||this.invalidText}}),Ext.define("Ext.ux.data.PagingMemoryProxy",{extend:"Ext.data.proxy.Memory",alias:"proxy.pagingmemory",alternateClassName:"Ext.data.PagingMemoryProxy",constructor:function(){Ext.log.warn("Ext.ux.data.PagingMemoryProxy functionality has been merged into Ext.data.proxy.Memory by using the enablePaging flag."),this.callParent(arguments)},read:function(e,t,i){var o,s,n,l,r=this.getReader().read(this.data);i=i||this,0<(s=e.filters).length&&(l=[],Ext.each(r.records,function(e){var t,i,n,r,o=!0,a=s.length;for(r=0;r<a;r++)i=(t=s[r]).filterFn,n=t.scope,o=o&&i.call(n,e);o&&l.push(e)},this),r.records=l,r.totalRecords=r.total=l.length),0<(o=e.sorters).length&&(n=function(e,t){var i,n=o[0].sort(e,t),r=o.length;for(i=1;i<r;i++)n=n||o[i].sort.call(this,e,t);return n},r.records.sort(n)),void 0!==e.start&&void 0!==e.limit&&(r.records=r.records.slice(e.start,e.start+e.limit),r.count=r.records.length),Ext.apply(e,{resultSet:r}),e.setCompleted(),e.setSuccessful(),Ext.defer(function(){Ext.callback(t,i,[e])},10)}}),Ext.define("Ext.ux.dd.CellFieldDropZone",{extend:"Ext.dd.DropZone",alias:"plugin.ux-cellfielddropzone",containerScroll:!0,onCellDrop:Ext.emptyFn,constructor:function(e){if(e){var t=e.ddGroup,i=e.onCellDrop;i&&("string"==typeof i?(this.onCellDropFn=i,this.onCellDrop=this.callCellDrop):this.onCellDrop=i),t&&(this.ddGroup=t)}},init:function(e){var t=this;e.rendered?(t.grid=e).getView().on({render:function(e){t.view=e,Ext.ux.dd.CellFieldDropZone.superclass.constructor.call(t,t.view.el)},single:!0}):e.on("render",t.init,t,{single:!0})},getTargetFromEvent:function(e){var t=this.view,i=e.getTarget(t.getCellSelector());if(i){var n=t.findItemByChild(i),r=i.cellIndex;if(n&&Ext.isDefined(r))return{node:i,record:t.getRecord(n),fieldName:this.grid.getVisibleColumnManager().getColumns()[r].dataIndex}}},onNodeEnter:function(e,t,i,n){if(delete this.dropOK,e){var r=n.field;if(r){var o=e.record.fieldsMap[e.fieldName];if(o.isNumeric){if(!r.isXType("numberfield"))return}else if(o.isDateField){if(!r.isXType("datefield"))return}else if(o.isBooleanField&&!r.isXType("checkbox"))return;this.dropOK=!0,Ext.fly(e.node).addCls("x-drop-target-active")}}},onNodeOver:function(e,t,i,n){return this.dropOK?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(e,t,i,n){Ext.fly(e.node).removeCls("x-drop-target-active")},onNodeDrop:function(e,t,i,n){if(this.dropOK){var r=n.field.getValue();return e.record.set(e.fieldName,r),this.onCellDrop(e.fieldName,r),!0}},callCellDrop:function(e,t){Ext.callback(this.onCellDropFn,null,[e,t],0,this.grid)}}),Ext.define("Ext.ux.dd.PanelFieldDragZone",{extend:"Ext.dd.DragZone",alias:"plugin.ux-panelfielddragzone",scroll:!1,constructor:function(e){e&&e.ddGroup&&(this.ddGroup=e.ddGroup)},init:function(e){var t;e.nodeType?Ext.ux.dd.PanelFieldDragZone.superclass.init.apply(this,arguments):e.rendered?((t=e.getEl()).unselectable(),Ext.ux.dd.PanelFieldDragZone.superclass.constructor.call(this,t)):e.on("afterrender",this.init,this,{single:!0})},getDragData:function(e){var t,i,n,r,o=e.getTarget("label",null,!0);if(o){if(i=(n=Ext.getCmp(o.up("."+Ext.form.Labelable.prototype.formItemCls).id)).preventMark,n.preventMark=!0,n.isValid())return n.preventMark=i,(r=document.createElement("div")).className=Ext.baseCSSPrefix+"form-text",t=n.getRawValue(),r.innerHTML=Ext.isEmpty(t)?"&#160;":t,Ext.fly(r).setWidth(n.getEl().getWidth()),{field:n,ddel:r};e.stopEvent(),n.preventMark=i}},getRepairXY:function(){return this.dragData.field.getEl().getXY()}}),Ext.define("Ext.ux.desktop.Desktop",{extend:"Ext.panel.Panel",alias:"widget.desktop",uses:["Ext.util.MixedCollection","Ext.menu.Menu","Ext.view.View","Ext.window.Window","Ext.ux.desktop.TaskBar","Ext.ux.desktop.Wallpaper"],activeWindowCls:"ux-desktop-active-win",inactiveWindowCls:"ux-desktop-inactive-win",lastActiveWindow:null,border:!1,html:"&#160;",layout:"fit",xTickSize:1,yTickSize:1,app:null,shortcuts:null,shortcutItemSelector:"div.ux-desktop-shortcut",shortcutTpl:['<tpl for=".">','<div class="ux-desktop-shortcut" id="{name}-shortcut">','<div class="ux-desktop-shortcut-icon {iconCls}">','<img src="',Ext.BLANK_IMAGE_URL,'" title="{name}">',"</div>",'<span class="ux-desktop-shortcut-text">{name}</span>',"</div>","</tpl>",'<div class="x-clear"></div>'],taskbarConfig:null,windowMenu:null,initComponent:function(){var e,t=this;t.windowMenu=new Ext.menu.Menu(t.createWindowMenu()),t.bbar=t.taskbar=new Ext.ux.desktop.TaskBar(t.taskbarConfig),t.taskbar.windowMenu=t.windowMenu,t.windows=new Ext.util.MixedCollection,t.contextMenu=new Ext.menu.Menu(t.createDesktopMenu()),t.items=[{xtype:"wallpaper",id:t.id+"_wallpaper"},t.createDataView()],t.callParent(),t.shortcutsView=t.items.getAt(1),t.shortcutsView.on("itemclick",t.onShortcutItemClick,t),e=t.wallpaper,t.wallpaper=t.items.getAt(0),e&&t.setWallpaper(e,t.wallpaperStretch)},afterRender:function(){this.callParent(),this.el.on("contextmenu",this.onDesktopMenu,this)},createDataView:function(){return{xtype:"dataview",overItemCls:"x-view-over",trackOver:!0,itemSelector:this.shortcutItemSelector,store:this.shortcuts,style:{position:"absolute"},x:0,y:0,tpl:new Ext.XTemplate(this.shortcutTpl)}},createDesktopMenu:function(){var e={items:this.contextMenuItems||[]};return e.items.length&&e.items.push("-"),e.items.push({text:"Tile",handler:this.tileWindows,scope:this,minWindows:1},{text:"Cascade",handler:this.cascadeWindows,scope:this,minWindows:1}),e},createWindowMenu:function(){var e=this;return{defaultAlign:"br-tr",items:[{text:"Restore",handler:e.onWindowMenuRestore,scope:e},{text:"Minimize",handler:e.onWindowMenuMinimize,scope:e},{text:"Maximize",handler:e.onWindowMenuMaximize,scope:e},"-",{text:"Close",handler:e.onWindowMenuClose,scope:e}],listeners:{beforeshow:e.onWindowMenuBeforeShow,hide:e.onWindowMenuHide,scope:e}}},onDesktopMenu:function(e){var t=this.contextMenu;e.stopEvent(),t.rendered||t.on("beforeshow",this.onDesktopMenuBeforeShow,this),t.showAt(e.getXY()),t.doConstrain()},onDesktopMenuBeforeShow:function(e){var i=this.windows.getCount();e.items.each(function(e){var t=e.minWindows||0;e.setDisabled(i<t)})},onShortcutItemClick:function(e,t){var i=this.app.getModule(t.data.module),n=i&&i.createWindow();n&&this.restoreWindow(n)},onWindowClose:function(e){this.windows.remove(e),this.taskbar.removeTaskButton(e.taskButton),this.updateActiveWindow()},onWindowMenuBeforeShow:function(e){var t=e.items.items,i=e.theWin;t[0].setDisabled(!0!==i.maximized&&!0!==i.hidden),t[1].setDisabled(!0===i.minimized),t[2].setDisabled(!0===i.maximized||!0===i.hidden)},onWindowMenuClose:function(){this.windowMenu.theWin.close()},onWindowMenuHide:function(e){Ext.defer(function(){e.theWin=null},1)},onWindowMenuMaximize:function(){var e=this.windowMenu.theWin;e.maximize(),e.toFront()},onWindowMenuMinimize:function(){this.windowMenu.theWin.minimize()},onWindowMenuRestore:function(){var e=this.windowMenu.theWin;this.restoreWindow(e)},getWallpaper:function(){return this.wallpaper.wallpaper},setTickSize:function(e,t){var n=this.xTickSize=e,r=this.yTickSize=1<arguments.length?t:n;this.windows.each(function(e){var t=e.dd,i=e.resizer;t.xTickSize=n,t.yTickSize=r,i.widthIncrement=n,i.heightIncrement=r})},setWallpaper:function(e,t){return this.wallpaper.setWallpaper(e,t),this},cascadeWindows:function(){var t=0,i=0;this.getDesktopZIndexManager().eachBottomUp(function(e){e.isWindow&&e.isVisible()&&!e.maximized&&(e.setPosition(t,i),t+=20,i+=20)})},createWindow:function(e,t){var i,n=this,r=Ext.applyIf(e||{},{stateful:!1,isWindow:!0,constrainHeader:!0,minimizable:!0,maximizable:!0});return t=t||Ext.window.Window,i=n.add(new t(r)),n.windows.add(i),i.taskButton=n.taskbar.addTaskButton(i),i.animateTarget=i.taskButton.el,i.on({activate:n.updateActiveWindow,beforeshow:n.updateActiveWindow,deactivate:n.updateActiveWindow,minimize:n.minimizeWindow,destroy:n.onWindowClose,scope:n}),i.on({boxready:function(){i.dd.xTickSize=n.xTickSize,i.dd.yTickSize=n.yTickSize,i.resizer&&(i.resizer.widthIncrement=n.xTickSize,i.resizer.heightIncrement=n.yTickSize)},single:!0}),i.doClose=function(){i.doClose=Ext.emptyFn,i.el.disableShadow(),i.el.fadeOut({listeners:{afteranimate:function(){i.destroy()}}})},i},getActiveWindow:function(){var t=null,e=this.getDesktopZIndexManager();return e&&e.eachTopDown(function(e){return!(e.isWindow&&!e.hidden)||(t=e,!1)}),t},getDesktopZIndexManager:function(){var e=this.windows;return e.getCount()&&e.getAt(0).zIndexManager||null},getWindow:function(e){return this.windows.get(e)},minimizeWindow:function(e){e.minimized=!0,e.hide()},restoreWindow:function(e){return e.isVisible()?(e.restore(),e.toFront()):e.show(),e},tileWindows:function(){var i=this,n=i.body.getWidth(!0),r=i.xTickSize,o=i.yTickSize,a=o;i.windows.each(function(e){var t;e.isVisible()&&!e.maximized&&(t=e.el.getWidth(),r>i.xTickSize&&n<r+t&&(r=i.xTickSize,o=a),e.setPosition(r,o),r+=t+i.xTickSize,a=Math.max(a,o+e.el.getHeight()+i.yTickSize))})},updateActiveWindow:function(){var e=this.getActiveWindow(),t=this.lastActiveWindow;t&&t.destroyed?this.lastActiveWindow=null:e!==t&&(t&&(t.el.dom&&(t.addCls(this.inactiveWindowCls),t.removeCls(this.activeWindowCls)),t.active=!1),(this.lastActiveWindow=e)&&(e.addCls(this.activeWindowCls),e.removeCls(this.inactiveWindowCls),e.minimized=!1,e.active=!0),this.taskbar.setActiveButton(e&&e.taskButton))}}),Ext.define("Ext.ux.desktop.App",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.container.Viewport","Ext.ux.desktop.Desktop"],isReady:!1,modules:null,useQuickTips:!0,constructor:function(e){this.mixins.observable.constructor.call(this,e),Ext.isReady?Ext.defer(this.init,10,this):Ext.onReady(this.init,this)},init:function(){var e,t=this;t.useQuickTips&&Ext.QuickTips.init(),t.modules=t.getModules(),t.modules&&t.initModules(t.modules),e=t.getDesktopConfig(),t.desktop=new Ext.ux.desktop.Desktop(e),t.viewport=new Ext.container.Viewport({layout:"fit",items:[t.desktop]}),Ext.getWin().on("beforeunload",t.onUnload,t),t.isReady=!0,t.fireEvent("ready",t)},getDesktopConfig:function(){var e={app:this,taskbarConfig:this.getTaskbarConfig()};return Ext.apply(e,this.desktopConfig),e},getModules:Ext.emptyFn,getStartConfig:function(){var t,i=this,n={app:i,menu:[]};return Ext.apply(n,i.startConfig),Ext.each(i.modules,function(e){(t=e.launcher)&&(t.handler=t.handler||Ext.bind(i.createWindow,i,[e]),n.menu.push(e.launcher))}),n},createWindow:function(e){e.createWindow().show()},getTaskbarConfig:function(){var e={app:this,startConfig:this.getStartConfig()};return Ext.apply(e,this.taskbarConfig),e},initModules:function(e){var t=this;Ext.each(e,function(e){e.app=t})},getModule:function(e){var t,i,n,r=this.modules;for(t=0,i=r.length;t<i;t++)if((n=r[t]).id==e||n.appType==e)return n;return null},onReady:function(e,t){this.isReady?e.call(t,this):this.on({ready:e,scope:t,single:!0})},getDesktop:function(){return this.desktop},onUnload:function(e){!1===this.fireEvent("beforeunload",this)&&e.stopEvent()}}),Ext.define("Ext.ux.desktop.Module",{mixins:{observable:"Ext.util.Observable"},constructor:function(e){this.mixins.observable.constructor.call(this,e),this.init()},init:Ext.emptyFn}),Ext.define("Ext.ux.desktop.ShortcutModel",{extend:"Ext.data.Model",fields:[{name:"name",convert:Ext.String.createVarName},{name:"iconCls"},{name:"module"}]}),Ext.define("Ext.ux.desktop.StartMenu",{extend:"Ext.menu.Menu",baseCls:Ext.baseCSSPrefix+"panel",cls:"x-menu ux-start-menu",bodyCls:"ux-start-menu-body",defaultAlign:"bl-tl",iconCls:"user",bodyBorder:!0,width:300,initComponent:function(){this.layout.align="stretch",this.items=this.menu,this.callParent(),this.toolbar=new Ext.toolbar.Toolbar(Ext.apply({dock:"right",cls:"ux-start-menu-toolbar",vertical:!0,width:100,layout:{align:"stretch"}},this.toolConfig)),this.addDocked(this.toolbar),delete this.toolItems},addMenuItem:function(){var e=this.menu;e.add.apply(e,arguments)},addToolItem:function(){var e=this.toolbar;e.add.apply(e,arguments)}}),Ext.define("Ext.ux.desktop.TaskBar",{extend:"Ext.toolbar.Toolbar",requires:["Ext.button.Button","Ext.resizer.Splitter","Ext.menu.Menu","Ext.ux.desktop.StartMenu"],alias:"widget.taskbar",cls:"ux-taskbar",startBtnText:"Start",initComponent:function(){var e=this;e.startMenu=new Ext.ux.desktop.StartMenu(e.startConfig),e.quickStart=new Ext.toolbar.Toolbar(e.getQuickStart()),e.windowBar=new Ext.toolbar.Toolbar(e.getWindowBarConfig()),e.tray=new Ext.toolbar.Toolbar(e.getTrayConfig()),e.items=[{xtype:"button",cls:"ux-start-button",iconCls:"ux-start-button-icon",menu:e.startMenu,menuAlign:"bl-tl",text:e.startBtnText},e.quickStart,{xtype:"splitter",html:"&#160;",height:14,width:2,cls:"x-toolbar-separator x-toolbar-separator-horizontal"},e.windowBar,"-",e.tray],e.callParent()},afterLayout:function(){this.callParent(),this.windowBar.el.on("contextmenu",this.onButtonContextMenu,this)},getQuickStart:function(){var t=this,i={minWidth:20,width:"neptune"===Ext.themeName?70:60,items:[],enableOverflow:!0};return Ext.each(this.quickStart,function(e){i.items.push({tooltip:{text:e.name,align:"bl-tl"},overflowText:e.name,iconCls:e.iconCls,module:e.module,handler:t.onQuickStartClick,scope:t})}),i},getTrayConfig:function(){var e={items:this.trayItems};return delete this.trayItems,e},getWindowBarConfig:function(){return{flex:1,cls:"ux-desktop-windowbar",items:["&#160;"],layout:{overflowHandler:"Scroller"}}},getWindowBtnFromEl:function(e){return this.windowBar.getChildByElement(e)||null},onQuickStartClick:function(e){var t=this.app.getModule(e.module);t&&t.createWindow().show()},onButtonContextMenu:function(e){var t=e.getTarget(),i=this.getWindowBtnFromEl(t);i&&(e.stopEvent(),this.windowMenu.theWin=i.win,this.windowMenu.showBy(t))},onWindowBtnClick:function(e){var t=e.win;t.minimized||t.hidden?(e.disable(),t.show(null,function(){e.enable()})):t.active?(e.disable(),t.on("hide",function(){e.enable()},null,{single:!0}),t.minimize()):t.toFront()},addTaskButton:function(e){var t={iconCls:e.iconCls,enableToggle:!0,toggleGroup:"all",width:140,margin:"0 2 0 3",text:Ext.util.Format.ellipsis(e.title,20),listeners:{click:this.onWindowBtnClick,scope:this},win:e},i=this.windowBar.add(t);return i.toggle(!0),i},removeTaskButton:function(t){var i;return this.windowBar.items.each(function(e){return e===t&&(i=e),!i}),i&&this.windowBar.remove(i),i},setActiveButton:function(e){e?e.toggle(!0):this.windowBar.items.each(function(e){e.isButton&&e.toggle(!1)})}}),Ext.define("Ext.ux.desktop.TrayClock",{extend:"Ext.toolbar.TextItem",alias:"widget.trayclock",cls:"ux-desktop-trayclock",html:"&#160;",timeFormat:"g:i A",tpl:"{time}",initComponent:function(){this.callParent(),"string"==typeof this.tpl&&(this.tpl=new Ext.XTemplate(this.tpl))},afterRender:function(){Ext.defer(this.updateTime,100,this),this.callParent()},doDestroy:function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.callParent()},updateTime:function(){var e=Ext.Date.format(new Date,this.timeFormat),t=this.tpl.apply({time:e});this.lastText!==t&&(this.setText(t),this.lastText=t),this.timer=Ext.defer(this.updateTime,1e4,this)}}),Ext.define("Ext.ux.desktop.Video",{extend:"Ext.panel.Panel",alias:"widget.video",layout:"fit",autoplay:!1,controls:!0,bodyStyle:"background-color:#000;color:#fff",html:"",tpl:['<video id="{id}-video" autoPlay="{autoplay}" controls="{controls}" poster="{poster}" start="{start}" loopstart="{loopstart}" loopend="{loopend}" autobuffer="{autobuffer}" loop="{loop}" style="width:100%;height:100%">','<tpl for="src">','<source src="{src}" type="{type}"/>',"</tpl>","{html}","</video>"],initComponent:function(){var e,t,i,n=this;n.fallbackHTML?e=n.fallbackHTML:(e="Your browser does not support HTML5 Video. ",Ext.isChrome?e+="Upgrade Chrome.":Ext.isGecko?e+="Upgrade to Firefox 3.5 or newer.":(i='<a href="http://www.google.com/chrome">Chrome</a>',e+='Please try <a href="http://www.mozilla.com">Firefox</a>',Ext.isIE?e+=", "+i+' or <a href="http://www.apple.com/safari/">Safari</a>.':e+=" or "+i+".")),n.fallbackHTML=e,t=n.data=Ext.copyTo({tag:"video",html:e},n,"id,poster,start,loopstart,loopend,playcount,autobuffer,loop"),n.autoplay&&(t.autoplay=1),n.controls&&(t.controls=1),Ext.isArray(n.src)?t.src=n.src:t.src=[{src:n.src}],n.callParent()},afterRender:function(){var e,t=this;t.callParent(),t.video=t.body.getById(t.id+"-video"),e=t.video.dom,t.supported=e&&"video"===e.tagName.toLowerCase(),t.supported&&t.video.on("error",t.onVideoError,t)},getFallback:function(){return'<h1 style="background-color:#ff4f4f;padding: 10px;">'+this.fallbackHTML+"</h1>"},onVideoError:function(){this.video.remove(),this.supported=!1,this.body.createChild(this.getFallback())},doDestroy:function(){var e,t=this.video;t=this.video,this.supported&&t&&((e=t.dom)&&e.pause&&e.pause(),t.remove(),this.video=null),this.callParent()}}),Ext.define("Ext.ux.desktop.Wallpaper",{extend:"Ext.Component",alias:"widget.wallpaper",cls:"ux-wallpaper",html:'<img src="'+Ext.BLANK_IMAGE_URL+'">',stretch:!1,wallpaper:null,stateful:!0,stateId:"desk-wallpaper",afterRender:function(){this.callParent(),this.setWallpaper(this.wallpaper,this.stretch)},applyState:function(){var e=this.wallpaper;this.callParent(arguments),e!==this.wallpaper&&this.setWallpaper(this.wallpaper)},getState:function(){return this.wallpaper&&{wallpaper:this.wallpaper}},setWallpaper:function(e,t){var i,n,r=this;return r.stretch=!1!==t,r.wallpaper=e,r.rendered&&(i=r.el.dom.firstChild,e&&e!==Ext.BLANK_IMAGE_URL?r.stretch?(i.src=e,r.el.removeCls("ux-wallpaper-tiled"),Ext.fly(i).setStyle({width:"100%",height:"100%"}).show()):(Ext.fly(i).hide(),n="url("+e+")",r.el.addCls("ux-wallpaper-tiled")):Ext.fly(i).hide(),r.el.setStyle({backgroundImage:n||""}),r.stateful&&r.saveState()),r}}),Ext.define("Ext.ux.event.RecorderManager",{extend:"Ext.panel.Panel",alias:"widget.eventrecordermanager",uses:["Ext.ux.event.Recorder","Ext.ux.event.Player"],layout:"fit",buttonAlign:"left",eventsToIgnore:{mousemove:1,mouseover:1,mouseout:1},bodyBorder:!1,playSpeed:1,initComponent:function(){var e,i=this;function t(e,t){return{text:e,speed:t,group:"speed",checked:t===i.playSpeed,handler:i.onPlaySpeed,scope:i}}i.recorder=new Ext.ux.event.Recorder({attachTo:i.attachTo,listeners:{add:i.updateEvents,coalesce:i.updateEvents,buffer:200,scope:i}}),i.recorder.eventsToRecord=Ext.apply({},i.recorder.eventsToRecord),i.tbar=[{text:"Record",xtype:"splitbutton",whenIdle:!0,handler:i.onRecord,scope:i,menu:i.makeRecordButtonMenu()},{text:"Play",xtype:"splitbutton",whenIdle:!0,handler:i.onPlay,scope:i,menu:[t("Qarter Speed (0.25x)",.25),t("Half Speed (0.5x)",.5),t("3/4 Speed (0.75x)",.75),"-",t("Recorded Speed (1x)",1),t("Double Speed (2x)",2),t("Quad Speed (4x)",4),"-",t("Full Speed",1e3)]},{text:"Clear",whenIdle:!0,handler:i.onClear,scope:i},"->",{text:"Stop",whenActive:!0,disabled:!0,handler:i.onStop,scope:i}],e=i.attachTo&&i.attachTo.testEvents,i.items=[{xtype:"textarea",itemId:"eventView",fieldStyle:"font-family: monospace",selectOnFocus:!0,emptyText:"Events go here!",value:e?i.stringifyEvents(e):"",scrollToBottom:function(){var e=this.inputEl.dom;e.scrollTop=e.scrollHeight}}],i.fbar=[{xtype:"tbtext",text:"Attached To: "+(i.attachTo&&i.attachTo.location.href)}],i.callParent()},makeRecordButtonMenu:function(){var n=[],r={},o=this.recorder.eventsToRecord,a=this.eventsToIgnore;function t(e,t){return e.text<t.text?-1:t.text<e.text?1:0}return Ext.Object.each(o,function(t,i){var e=r[i.kind];e||(r[i.kind]=e=[],n.push({text:i.kind,menu:e})),e.push({text:t,checked:!0,handler:function(e){e.checked?o[t]=i:delete o[t]}}),a[t]&&(e[e.length-1].checked=!1,Ext.defer(function(){delete o[t]},1))}),n.sort(t),Ext.Array.each(n,function(e){e.menu.sort(t)}),n},getEventView:function(){return this.down("#eventView")},onClear:function(){this.getEventView().setValue("")},onPlay:function(){var e=this.getEventView().getValue();e&&(e=Ext.decode(e)).length&&(this.player=Ext.create("Ext.ux.event.Player",{attachTo:window.opener,eventQueue:e,speed:this.playSpeed,listeners:{stop:this.onPlayStop,scope:this}}),this.player.start(),this.syncBtnUI())},onPlayStop:function(){this.player=null,this.syncBtnUI()},onPlaySpeed:function(e){this.playSpeed=e.speed},onRecord:function(){this.recorder.start(),this.syncBtnUI()},onStop:function(){this.player?(this.player.stop(),this.player=null):this.recorder.stop(),this.syncBtnUI(),this.updateEvents()},syncBtnUI:function(){var t=!this.player&&!this.recorder.active;Ext.each(this.query("[whenIdle]"),function(e){e.setDisabled(!t)}),Ext.each(this.query("[whenActive]"),function(e){e.setDisabled(t)}),this.getEventView().setReadOnly(!t)},stringifyEvents:function(e){var i,t=[];return Ext.each(e,function(e){i=[],Ext.Object.each(e,function(e,t){i.length?i.push(", "):i.push("  { "),i.push(e,": "),i.push(Ext.encode(t))}),i.push(" }"),t.push(i.join(""))}),"[\n"+t.join(",\n")+"\n]"},updateEvents:function(){var e=this.stringifyEvents(this.recorder.getRecordedEvents()),t=this.getEventView();t.setValue(e),t.scrollToBottom()}}),Ext.define("Ext.ux.form.MultiSelect",{extend:"Ext.form.FieldContainer",mixins:["Ext.util.StoreHolder","Ext.form.field.Field"],alternateClassName:"Ext.ux.Multiselect",alias:["widget.multiselectfield","widget.multiselect"],requires:["Ext.panel.Panel","Ext.view.BoundList","Ext.layout.container.Fit"],uses:["Ext.view.DragZone","Ext.view.DropZone"],layout:"anchor",ddReorder:!1,appendOnly:!1,displayField:"text",allowBlank:!0,minSelections:0,maxSelections:Number.MAX_VALUE,blankText:"This field is required",minSelectionsText:"Minimum {0} item(s) required",maxSelectionsText:"Maximum {0} item(s) required",delimiter:",",dragText:"{0} Item{1}",ignoreSelectChange:0,pageSize:10,initComponent:function(){this.items=this.setupItems(),this.bindStore(this.store,!0),this.callParent(),this.initField()},setupItems:function(){var e=this;return e.boundList=new Ext.view.BoundList(Ext.apply({anchor:"none 100%",border:1,multiSelect:!0,store:e.store,displayField:e.displayField,disabled:e.disabled,tabIndex:0,navigationModel:{type:"default"}},e.listConfig)),e.boundList.getNavigationModel().addKeyBindings({pageUp:e.onKeyPageUp,pageDown:e.onKeyPageDown,scope:e}),e.boundList.getSelectionModel().on("selectionchange",e.onSelectChange,e),(e.boundList.pickerField=e).title?{xtype:"panel",isAriaRegion:e.boundList.border=!1,border:!0,anchor:"none 100%",layout:"anchor",title:e.title,tbar:e.tbar,items:e.boundList}:e.boundList},onSelectChange:function(e,t){this.ignoreSelectChange||this.setValue(t)},getSelected:function(){return this.boundList.getSelectionModel().getSelection()},isEqual:function(e,t){var i,n=Ext.Array.from,r=0;if(e=n(e),t=n(t),(i=e.length)!==t.length)return!1;for(;r<i;r++)if(t[r]!==e[r])return!1;return!0},afterRender:function(){var e,t,i,n,s=this;s.callParent(),t=(e=s.boundList)&&e.getScrollable(),s.selectOnRender&&((i=s.getRecordsForValue(s.value)).length&&(++s.ignoreSelectChange,e.getSelectionModel().select(i),--s.ignoreSelectChange),delete s.toSelect),!s.ddReorder||s.dragGroup||s.dropGroup||(s.dragGroup=s.dropGroup="MultiselectDD-"+Ext.id()),(s.draggable||s.dragGroup)&&(s.dragZone=Ext.create("Ext.view.DragZone",{view:e,ddGroup:s.dragGroup,dragText:s.dragText,containerScroll:!!t,scrollEl:t&&t.getElement()})),(s.droppable||s.dropGroup)&&(s.dropZone=Ext.create("Ext.view.DropZone",{view:e,ddGroup:s.dropGroup,handleNodeDrop:function(e,t,i){var n,r=this.view,o=r.getStore(),a=e.records;e.view.store.remove(a),n=o.indexOf(t),"after"===i&&n++,o.insert(n,a),r.getSelectionModel().select(a),s.fireEvent("drop",s,a)}})),(n=s.down("panel"))&&e&&e.ariaEl.dom.setAttribute("aria-labelledby",n.header.id+"-title-textEl")},onKeyPageUp:function(e){var t,i,n=this.pageSize,r=this.boundList.getNavigationModel();i=n<(t=r.recordIndex)?t-n:0,r.setPosition(i,e)},onKeyPageDown:function(e){var t,i,n,r=this.pageSize,o=this.boundList,a=o.getNavigationModel();t=o.getStore().getCount(),n=(i=a.recordIndex)<t-r?i+r:t-1,a.setPosition(n,e)},isValid:function(){var e=this.disabled;return this.forceValidation||!e?this.validateValue(this.value):e},validateValue:function(e){var t=this.getErrors(e),i=Ext.isEmpty(t);return this.preventMark||(i?this.clearInvalid():this.markInvalid(t)),i},markInvalid:function(e){var t=this.getActiveError();this.setActiveErrors(Ext.Array.from(e)),t!==this.getActiveError()&&this.updateLayout()},clearInvalid:function(){var e=this.hasActiveError();this.unsetActiveError(),e&&this.updateLayout()},getSubmitData:function(){var e,t=null;return this.disabled||!this.submitValue||this.isFileUpload()||null!==(e=this.getSubmitValue())&&((t={})[this.getName()]=e),t},getSubmitValue:function(){var e=this.delimiter,t=this.getValue();return Ext.isString(e)?t.join(e):t},getValue:function(){return this.value||[]},getRecordsForValue:function(e){var t,i,n,r=[],o=this.store.getRange(),a=this.valueField,s=0,l=o.length;for(n=e.length;s<n;++s)for(i=0;i<l;++i)(t=o[i]).get(a)===e[s]&&r.push(t);return r},setupValue:function(e){var t,i,n,r=this.delimiter,o=this.valueField,a=0;if(Ext.isDefined(e)){for(r&&Ext.isString(e)?e=e.split(r):Ext.isArray(e)||(e=[e]),i=e.length;a<i;++a)(n=e[a])&&n.isModel&&(e[a]=n.get(o));t=Ext.Array.unique(e)}else t=[];return t},setValue:function(e){var t=this,i=t.boundList.getSelectionModel(),n=t.store;n.getCount()?(e=t.setupValue(e),t.mixins.field.setValue.call(t,e),t.rendered?(++t.ignoreSelectChange,i.deselectAll(),e.length&&i.select(t.getRecordsForValue(e)),--t.ignoreSelectChange):t.selectOnRender=!0):n.on({load:Ext.Function.bind(t.setValue,t,[e]),single:!0})},clearValue:function(){this.setValue([])},onEnable:function(){var e=this.boundList;this.callParent(),e&&e.enable()},onDisable:function(){var e=this.boundList;this.callParent(),e&&e.disable()},getErrors:function(e){var t,i=Ext.String.format,n=[];return t=(e=Ext.Array.from(e||this.getValue())).length,!this.allowBlank&&t<1&&n.push(this.blankText),t<this.minSelections&&n.push(i(this.minSelectionsText,this.minSelections)),t>this.maxSelections&&n.push(i(this.maxSelectionsText,this.maxSelections)),n},doDestroy:function(){this.bindStore(null),Ext.destroy(this.dragZone,this.dropZone,this.keyNav),this.callParent()},onBindStore:function(e){var t=this.boundList;e.autoCreated&&this.resolveDisplayField(),Ext.isDefined(this.valueField)||(this.valueField=this.displayField),t&&t.bindStore(e)},resolveDisplayField:function(){var e=this.boundList,t=this.getStore();this.valueField=this.displayField="field1",t.expanded||(this.displayField="field2"),e&&e.setDisplayField(this.displayField)}}),Ext.define("Ext.ux.form.ItemSelector",{extend:"Ext.ux.form.MultiSelect",alias:["widget.itemselectorfield","widget.itemselector"],alternateClassName:["Ext.ux.ItemSelector"],requires:["Ext.button.Button","Ext.ux.form.MultiSelect"],hideNavIcons:!1,buttons:["top","up","add","remove","down","bottom"],buttonsText:{top:"Move to Top",up:"Move Up",add:"Add to Selected",remove:"Remove from Selected",down:"Move Down",bottom:"Move to Bottom"},layout:{type:"hbox",align:"stretch"},ariaRole:"group",initComponent:function(){this.ddGroup=this.id+"-dd",this.ariaRenderAttributes=this.ariaRenderAttributes||{},this.ariaRenderAttributes["aria-labelledby"]=this.id+"-labelEl",this.callParent(),this.bindStore(this.store)},createList:function(e){return Ext.create("Ext.ux.form.MultiSelect",{submitValue:!1,getSubmitData:function(){return null},getModelData:function(){return null},flex:1,dragGroup:this.ddGroup,dropGroup:this.ddGroup,title:e,store:{model:this.store.model,data:[]},displayField:this.displayField,valueField:this.valueField,disabled:this.disabled,listeners:{boundList:{scope:this,itemdblclick:this.onItemDblClick,drop:this.syncValue}}})},setupItems:function(){return this.fromField=this.createList(this.fromTitle),this.toField=this.createList(this.toTitle),[this.fromField,{xtype:"toolbar",margin:"0 4",padding:0,layout:{type:"vbox",pack:"center"},items:this.createButtons()},this.toField]},createButtons:function(){var t=this,i=[];return t.hideNavIcons||Ext.Array.forEach(t.buttons,function(e){i.push({xtype:"button",ui:"default",tooltip:t.buttonsText[e],ariaLabel:t.buttonsText[e],handler:t["on"+Ext.String.capitalize(e)+"BtnClick"],cls:Ext.baseCSSPrefix+"form-itemselector-btn",iconCls:Ext.baseCSSPrefix+"form-itemselector-"+e,navBtn:!0,scope:t,margin:"4 0 0 0"})}),i},getSelections:function(e){var i=e.getStore();return Ext.Array.sort(e.getSelectionModel().getSelection(),function(e,t){return(e=i.indexOf(e))<(t=i.indexOf(t))?-1:t<e?1:0})},onTopBtnClick:function(){var e=this.toField.boundList,t=e.getStore(),i=this.getSelections(e);t.suspendEvents(),t.remove(i,!0),t.insert(0,i),t.resumeEvents(),e.refresh(),this.syncValue(),e.getSelectionModel().select(i)},onBottomBtnClick:function(){var e=this.toField.boundList,t=e.getStore(),i=this.getSelections(e);t.suspendEvents(),t.remove(i,!0),t.add(i),t.resumeEvents(),e.refresh(),this.syncValue(),e.getSelectionModel().select(i)},onUpBtnClick:function(){var e,t=this.toField.boundList,i=t.getStore(),n=this.getSelections(t),r=0,o=n.length,a=0;for(i.suspendEvents();r<o;++r,a++)e=n[r],a=Math.max(a,i.indexOf(e)-1),i.remove(e,!0),i.insert(a,e);i.resumeEvents(),t.refresh(),this.syncValue(),t.getSelectionModel().select(n)},onDownBtnClick:function(){var e,t=this.toField.boundList,i=t.getStore(),n=this.getSelections(t),r=n.length-1,o=i.getCount()-1;for(i.suspendEvents();-1<r;--r,o--)e=n[r],o=Math.min(o,i.indexOf(e)+1),i.remove(e,!0),i.insert(o,e);i.resumeEvents(),t.refresh(),this.syncValue(),t.getSelectionModel().select(n)},onAddBtnClick:function(){var e=this.getSelections(this.fromField.boundList);this.moveRec(!0,e),this.toField.boundList.getSelectionModel().select(e)},onRemoveBtnClick:function(){var e=this.getSelections(this.toField.boundList);this.moveRec(!1,e),this.fromField.boundList.getSelectionModel().select(e)},moveRec:function(e,t){var i=this.fromField,n=this.toField,r=e?i.store:n.store,o=e?n.store:i.store;r.suspendEvents(),o.suspendEvents(),r.remove(t),o.add(t),r.resumeEvents(),o.resumeEvents(),i.boundList.containsFocus&&i.boundList.focus(),i.boundList.refresh(),n.boundList.refresh(),this.syncValue()},syncValue:function(){this.mixins.field.setValue.call(this,this.setupValue(this.toField.store.getRange()))},onItemDblClick:function(e,t){this.moveRec(e===this.fromField.boundList,t)},setValue:function(e){var t,i=this,n=i.fromField,r=i.toField,o=n.store,a=r.store;i.fromStorePopulated?(e=i.setupValue(e),i.mixins.field.setValue.call(i,e),t=i.getRecordsForValue(e),o.suspendEvents(),a.suspendEvents(),o.removeAll(),a.removeAll(),i.populateFromStore(i.store),Ext.Array.forEach(t,function(e){-1<o.indexOf(e)&&o.remove(e),a.add(e)}),o.resumeEvents(),a.resumeEvents(),Ext.suspendLayouts(),n.boundList.refresh(),r.boundList.refresh(),Ext.resumeLayouts(!0)):i.fromField.store.on({load:Ext.Function.bind(i.setValue,i,[e]),single:!0})},onBindStore:function(e,t){var i=this,n=i.fromField,r=i.toField;n&&(n.store.removeAll(),r.store.removeAll(),e.autoCreated&&(n.resolveDisplayField(),r.resolveDisplayField(),i.resolveDisplayField()),Ext.isDefined(i.valueField)||(i.valueField=i.displayField),e.getCount()?i.populateFromStore(e):i.store.on("load",i.populateFromStore,i))},populateFromStore:function(e){var t=this.fromField.store;this.fromStorePopulated=!0,t.add(e.getRange()),t.fireEvent("load",t)},onEnable:function(){this.callParent(),this.fromField.enable(),this.toField.enable(),Ext.Array.forEach(this.query("[navBtn]"),function(e){e.enable()})},onDisable:function(){this.callParent(),this.fromField.disable(),this.toField.disable(),Ext.Array.forEach(this.query("[navBtn]"),function(e){e.disable()})},doDestroy:function(){this.bindStore(null),this.callParent()}}),Ext.define("Ext.ux.form.SearchField",{extend:"Ext.form.field.Text",alias:"widget.searchfield",triggers:{clear:{weight:0,cls:Ext.baseCSSPrefix+"form-clear-trigger",hidden:!0,handler:"onClearClick",scope:"this"},search:{weight:1,cls:Ext.baseCSSPrefix+"form-search-trigger",handler:"onSearchClick",scope:"this"}},hasSearch:!1,paramName:"query",initComponent:function(){var e,i=this,t=i.store;i.callParent(arguments),i.on("specialkey",function(e,t){t.getKey()===t.ENTER&&i.onSearchClick()}),t&&t.isStore||(t=i.store=Ext.data.StoreManager.lookup(t)),t.setRemoteFilter(!0),(e=i.store.getProxy()).setFilterParam(i.paramName),e.encodeFilters=function(e){return e[0].getValue()}},onClearClick:function(){var e=this.activeFilter;e&&(this.setValue(""),this.store.getFilters().remove(e),this.activeFilter=null,this.getTrigger("clear").hide(),this.updateLayout())},onSearchClick:function(){var e=this.getValue();0<e.length&&(this.activeFilter=new Ext.util.Filter({property:this.paramName,value:e}),this.store.getFilters().add(this.activeFilter),this.getTrigger("clear").show(),this.updateLayout())}}),Ext.define("Ext.ux.grid.SubTable",{extend:"Ext.grid.plugin.RowExpander",alias:"plugin.subtable",rowBodyTpl:['<table class="'+Ext.baseCSSPrefix+'grid-subtable">',"{%","this.owner.renderTable(out, values);","%}","</table>"],init:function(e){var t,i,n,r=this.columns;if(this.callParent(arguments),this.columns=[],r)for(i=0,t=r.length;i<t;++i)(n=Ext.apply({preventRegister:!0},r[i])).xtype=n.xtype||"gridcolumn",this.columns.push(Ext.widget(n))},destroy:function(){var e,t,i=this.columns;if(i)for(t=0,e=i.length;t<e;++t)i[t].destroy();this.columns=null,this.callParent()},getRowBodyFeatureData:function(e,t,i){this.callParent(arguments),i.rowBodyCls+=" "+Ext.baseCSSPrefix+"grid-subtable-row"},renderTable:function(e,t){var i,n,r,o,a,s=this.columns,l=s.length,d=this.getAssociatedRecords(t.record),u=d.length;for(e.push("<thead>"),o=0;o<l;o++)e.push('<th class="'+Ext.baseCSSPrefix+'grid-subtable-header">',s[o].text,"</th>");for(e.push("</thead><tbody>"),r=0;r<u;r++){for(i=d[r],e.push("<tr>"),o=0;o<l;o++)n=s[o],a=i.get(n.dataIndex),n.renderer&&n.renderer.call&&(a=n.renderer.call(n.scope||this,a,{},i)),e.push('<td class="'+Ext.baseCSSPrefix+'grid-subtable-cell"'),null!=n.width&&e.push(' style="width:'+n.width+'px"'),e.push('><div class="'+Ext.baseCSSPrefix+'grid-cell-inner">',a,"</div></td>");e.push("</tr>")}e.push("</tbody>")},getRowBodyContentsFn:function(t){var i=this;return function(e){return t.owner=i,t.applyTemplate(e)}},getAssociatedRecords:function(e){return e[this.association]().getRange()}}),Ext.define("Ext.ux.grid.TransformGrid",{extend:"Ext.grid.Panel",constructor:function(e,t){t=Ext.apply({},t),e=this.table=Ext.get(e);for(var i,n,r,o,a,s=t.fields||[],l=t.columns||[],d=[],u=[],c=e.query("thead th"),h=0,f=c.length,g=e.dom;h<f;++h)o=(r=c[h]).innerHTML,a="tcol-"+h,d.push(Ext.applyIf(s[h]||{},{name:a,mapping:"td:nth("+(h+1)+")/@innerHTML"})),u.push(Ext.applyIf(l[h]||{},{text:o,dataIndex:a,width:r.offsetWidth,tooltip:r.title,sortable:!0}));i=t.width?t.width:e.getWidth()+1,t.height&&(n=t.height),Ext.applyIf(t,{store:{data:g,fields:d,proxy:{type:"memory",reader:{record:"tbody tr",type:"xml"}}},columns:u,width:i,height:n}),this.callParent([t]),!1!==t.remove&&g.parentNode.removeChild(g)},doDestroy:function(){this.table.remove(),this.tabl=null,this.callParent()}}),Ext.define("Ext.ux.grid.plugin.AutoSelector",{extend:"Ext.plugin.Abstract",alias:"plugin.gridautoselector",config:{store:null},init:function(e){e.isXType("tablepanel")||Ext.raise("The gridautoselector plugin is designed only for grids and trees"),this.grid=e,this.watchGrid(),e.on({reconfigure:this.watchGrid,scope:this})},destroy:function(){this.setStore(null),this.grid=null,this.callParent()},ensureSelection:function(){var e,t=this.grid;t.getStore().getCount()&&((e=t.getSelection())&&e.length||t.getSelectionModel().select(0))},watchGrid:function(){this.setStore(this.grid.getStore()),this.ensureSelection()},updateStore:function(e){Ext.destroy(this.storeListeners),this.storeListeners=e&&e.on({add:this.ensureSelection,remove:this.ensureSelection,destroyable:!0,scope:this})}}),Ext.define("Ext.ux.layout.ResponsiveColumn",{extend:"Ext.layout.container.Auto",alias:"layout.responsivecolumn",states:{small:1e3,large:0},_responsiveCls:Ext.baseCSSPrefix+"responsivecolumn",initLayout:function(){this.innerCtCls+=" "+this._responsiveCls,this.callParent()},beginLayout:function(e){var t,i,n,r=Ext.Element.getViewportWidth(),o=this.states,a=1/0,s=this.innerCt,l=this._currentState;for(t in o)r<=(i=o[t]||1/0)&&i<=a&&(a=i,n=t);n!==l&&(s.replaceCls(l,n,this._responsiveCls),this._currentState=n),this.callParent(arguments)},onAdd:function(e){var t;this.callParent([e]),(t=e.responsiveCls)&&e.addCls(t)}},function(e){Ext.isIE8&&e.override({responsiveSizePolicy:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:0},setsItemSize:!0,calculateItems:function(e,t){var i,n,r,o,a=e.targetContext,s=e.childItems,l=s.length,d=t.gotWidth,u=t.width;if(!1===d)return a.domBlock(this,"width"),!1;if(!d)return!0;for(i=0;i<l;++i)n=s[i],o=parseInt(n.el.getStyle("background-position-x"),10),r=parseInt(n.el.getStyle("background-position-y"),10),n.setWidth(o/100*(u-r)-r);return e.setContentWidth(u+e.paddingContext.getPaddingInfo().width),!0},getItemSizePolicy:function(){return this.responsiveSizePolicy}})}),Ext.define("Ext.ux.statusbar.ValidationStatus",{extend:"Ext.Component",alias:"plugin.validationstatus",requires:["Ext.util.MixedCollection"],errorIconCls:"x-status-error",errorListCls:"x-status-error-list",validIconCls:"x-status-valid",showText:"The form has errors (click for details...)",hideText:"Click again to hide the error list",submitText:"Saving...",init:function(e){(this.statusBar=e).on({single:!0,scope:this,render:this.onStatusbarRender}),e.on({click:{element:"el",fn:this.onStatusClick,scope:this,buffer:200}})},onStatusbarRender:function(e){function t(){i.monitor=!0}var i=this;i.monitor=!0,i.errors=Ext.create("Ext.util.MixedCollection"),i.listAlign="right"===e.statusAlign?"br-tr?":"bl-tl?",i.form&&(i.formPanel=Ext.getCmp(i.form)||i.statusBar.lookupController().lookupReference(i.form),i.basicForm=i.formPanel.getForm(),i.startMonitoring(),i.basicForm.on({beforeaction:function(e,t){"submit"===t.type&&(i.monitor=!1)}}),i.formPanel.on({beforedestroy:i.destroy,scope:i}),i.basicForm.on("actioncomplete",t),i.basicForm.on("actionfailed",t))},startMonitoring:function(){this.basicForm.getFields().each(function(e){e.on("validitychange",this.onFieldValidation,this)},this)},stopMonitoring:function(){var e=this.basicForm;e.destroyed||e.getFields().each(function(e){e.un("validitychange",this.onFieldValidation,this)},this)},doDestroy:function(){Ext.destroy(this.msgEl),this.stopMonitoring(),this.statusBar.statusEl.un("click",this.onStatusClick,this),this.callParent()},onFieldValidation:function(e,t){var i,n=this;if(!n.monitor)return!1;(i=e.getErrors()[0])?n.errors.add(e.id,{field:e,msg:i}):n.errors.removeAtKey(e.id),this.updateErrorList(),0<n.errors.getCount()?n.statusBar.getText()!==n.showText&&n.statusBar.setStatus({text:n.showText,iconCls:n.errorIconCls}):n.statusBar.clearStatus().setIcon(n.validIconCls)},updateErrorList:function(){var t,e=this.getMsgEl();0<this.errors.getCount()?(t=["<ul>"],this.errors.each(function(e){t.push('<li id="x-err-',e.field.id,'"><a href="#">',e.msg,"</a></li>")}),t.push("</ul>"),e.update(t.join(""))):e.update(""),e.setSize("auto","auto")},getMsgEl:function(){var t,i=this,e=i.msgEl;return e||((e=i.msgEl=Ext.DomHelper.append(Ext.getBody(),{cls:i.errorListCls},!0)).hide(),e.on("click",function(e){(t=e.getTarget("li",10,!0))&&(Ext.getCmp(t.id.split("x-err-")[1]).focus(),i.hideErrors())},null,{stopEvent:!0})),e},showErrors:function(){this.updateErrorList(),this.getMsgEl().alignTo(this.statusBar.getEl(),this.listAlign).slideIn("b",{duration:300,easing:"easeOut"}),this.statusBar.setText(this.hideText),this.formPanel.body.on("click",this.hideErrors,this,{single:!0})},hideErrors:function(){var e=this.getMsgEl();e.isVisible()&&(e.slideOut("b",{duration:300,easing:"easeIn"}),this.statusBar.setText(this.showText)),this.formPanel.body.un("click",this.hideErrors,this)},onStatusClick:function(){this.getMsgEl().isVisible()?this.hideErrors():0<this.errors.getCount()&&this.showErrors()}});